// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: SpecimenDefinition
import * as fhir from '../fhir.js';
// @ts-ignore
import { SpecimenContainedPreferenceVsValidation } from '../fhirValueSets/SpecimenContainedPreferenceVsValidation.js';
/**
 * Substance introduced in the kind of container to preserve, maintain or enhance the specimen. Examples: Formalin, Citrate, EDTA.
 */
export class SpecimenDefinitionTypeTestedContainerAdditive extends fhir.BackboneElement {
    /**
     * Default constructor for SpecimenDefinitionTypeTestedContainerAdditive - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['additive']) {
            this.additive = source.additive;
        }
        else if (source['additiveCodeableConcept']) {
            this.additive = new fhir.CodeableConcept(source.additiveCodeableConcept);
        }
        else if (source['additiveReference']) {
            this.additive = new fhir.Reference(source.additiveReference);
        }
        else {
            this.additive = null;
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SpecimenDefinition.typeTested.container.additive';
        }
        iss.push(...this.vRS('additive', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SpecimenDefinitionTypeTestedContainerAdditive._fts_dataType = 'SpecimenDefinitionTypeTestedContainerAdditive';
/**
 * Internal flag to properly serialize choice-type element SpecimenDefinition.typeTested.container.additive.additive[x]
 */
SpecimenDefinitionTypeTestedContainerAdditive._fts_additiveIsChoice = true;
/**
 * The specimen's container.
 */
export class SpecimenDefinitionTypeTestedContainer extends fhir.BackboneElement {
    /**
     * Default constructor for SpecimenDefinitionTypeTestedContainer - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['material']) {
            this.material = new fhir.CodeableConcept(source.material);
        }
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type);
        }
        if (source['cap']) {
            this.cap = new fhir.CodeableConcept(source.cap);
        }
        if (source['description']) {
            this.description = new fhir.FhirString({ value: source.description });
        }
        if (source['_description']) {
            if (this.description) {
                this.description.addExtendedProperties(source._description);
            }
            else {
                this.description = new fhir.FhirString(source._description);
            }
        }
        if (source['capacity']) {
            this.capacity = new fhir.Quantity(source.capacity);
        }
        if (source['minimumVolume']) {
            this.minimumVolume = source.minimumVolume;
        }
        else if (source['minimumVolumeQuantity']) {
            this.minimumVolume = new fhir.Quantity(source.minimumVolumeQuantity);
        }
        else if (source['minimumVolumeString']) {
            this.minimumVolume = new fhir.FhirString({ value: source.minimumVolumeString });
        }
        if (source['additive']) {
            this.additive = source.additive.map((x) => new fhir.SpecimenDefinitionTypeTestedContainerAdditive(x));
        }
        else {
            this.additive = [];
        }
        if (source['preparation']) {
            this.preparation = new fhir.FhirString({ value: source.preparation });
        }
        if (source['_preparation']) {
            if (this.preparation) {
                this.preparation.addExtendedProperties(source._preparation);
            }
            else {
                this.preparation = new fhir.FhirString(source._preparation);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SpecimenDefinition.typeTested.container';
        }
        iss.push(...this.vOS('material', exp));
        iss.push(...this.vOS('type', exp));
        iss.push(...this.vOS('cap', exp));
        iss.push(...this.vOS('description', exp));
        iss.push(...this.vOS('capacity', exp));
        iss.push(...this.vOS('minimumVolume', exp));
        iss.push(...this.vOA('additive', exp));
        iss.push(...this.vOS('preparation', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SpecimenDefinitionTypeTestedContainer._fts_dataType = 'SpecimenDefinitionTypeTestedContainer';
/**
 * Internal flag to properly serialize choice-type element SpecimenDefinition.typeTested.container.minimumVolume[x]
 */
SpecimenDefinitionTypeTestedContainer._fts_minimumVolumeIsChoice = true;
/**
 * Set of instructions for preservation/transport of the specimen at a defined temperature interval, prior the testing process.
 */
export class SpecimenDefinitionTypeTestedHandling extends fhir.BackboneElement {
    /**
     * Default constructor for SpecimenDefinitionTypeTestedHandling - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['temperatureQualifier']) {
            this.temperatureQualifier = new fhir.CodeableConcept(source.temperatureQualifier);
        }
        if (source['temperatureRange']) {
            this.temperatureRange = new fhir.Range(source.temperatureRange);
        }
        if (source['maxDuration']) {
            this.maxDuration = new fhir.Duration(source.maxDuration);
        }
        if (source['instruction']) {
            this.instruction = new fhir.FhirString({ value: source.instruction });
        }
        if (source['_instruction']) {
            if (this.instruction) {
                this.instruction.addExtendedProperties(source._instruction);
            }
            else {
                this.instruction = new fhir.FhirString(source._instruction);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SpecimenDefinition.typeTested.handling';
        }
        iss.push(...this.vOS('temperatureQualifier', exp));
        iss.push(...this.vOS('temperatureRange', exp));
        iss.push(...this.vOS('maxDuration', exp));
        iss.push(...this.vOS('instruction', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SpecimenDefinitionTypeTestedHandling._fts_dataType = 'SpecimenDefinitionTypeTestedHandling';
/**
 * Specimen conditioned in a container as expected by the testing laboratory.
 */
export class SpecimenDefinitionTypeTested extends fhir.BackboneElement {
    /**
     * Default constructor for SpecimenDefinitionTypeTested - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['isDerived']) {
            this.isDerived = new fhir.FhirBoolean({ value: source.isDerived });
        }
        if (source['_isDerived']) {
            if (this.isDerived) {
                this.isDerived.addExtendedProperties(source._isDerived);
            }
            else {
                this.isDerived = new fhir.FhirBoolean(source._isDerived);
            }
        }
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type);
        }
        if (source['preference']) {
            this.preference = new fhir.FhirCode({ value: source.preference });
        }
        else {
            this.preference = null;
        }
        if (source['_preference']) {
            if (this.preference) {
                this.preference.addExtendedProperties(source._preference);
            }
            else {
                this.preference = new fhir.FhirCode(source._preference);
            }
        }
        if (source['container']) {
            this.container = new fhir.SpecimenDefinitionTypeTestedContainer(source.container);
        }
        if (source['requirement']) {
            this.requirement = new fhir.FhirString({ value: source.requirement });
        }
        if (source['_requirement']) {
            if (this.requirement) {
                this.requirement.addExtendedProperties(source._requirement);
            }
            else {
                this.requirement = new fhir.FhirString(source._requirement);
            }
        }
        if (source['retentionTime']) {
            this.retentionTime = new fhir.Duration(source.retentionTime);
        }
        if (source['rejectionCriterion']) {
            this.rejectionCriterion = source.rejectionCriterion.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.rejectionCriterion = [];
        }
        if (source['handling']) {
            this.handling = source.handling.map((x) => new fhir.SpecimenDefinitionTypeTestedHandling(x));
        }
        else {
            this.handling = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SpecimenDefinition.typeTested';
        }
        iss.push(...this.vOS('isDerived', exp));
        iss.push(...this.vOS('type', exp));
        iss.push(...this.vRSV('preference', exp, 'SpecimenContainedPreference', SpecimenContainedPreferenceVsValidation, 'r'));
        iss.push(...this.vOS('container', exp));
        iss.push(...this.vOS('requirement', exp));
        iss.push(...this.vOS('retentionTime', exp));
        iss.push(...this.vOA('rejectionCriterion', exp));
        iss.push(...this.vOA('handling', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SpecimenDefinitionTypeTested._fts_dataType = 'SpecimenDefinitionTypeTested';
/**
 * A kind of specimen with associated set of requirements.
 */
export class SpecimenDefinition extends fhir.DomainResource {
    /**
     * Default constructor for SpecimenDefinition - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'SpecimenDefinition';
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier);
        }
        if (source['typeCollected']) {
            this.typeCollected = new fhir.CodeableConcept(source.typeCollected);
        }
        if (source['patientPreparation']) {
            this.patientPreparation = source.patientPreparation.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.patientPreparation = [];
        }
        if (source['timeAspect']) {
            this.timeAspect = new fhir.FhirString({ value: source.timeAspect });
        }
        if (source['_timeAspect']) {
            if (this.timeAspect) {
                this.timeAspect.addExtendedProperties(source._timeAspect);
            }
            else {
                this.timeAspect = new fhir.FhirString(source._timeAspect);
            }
        }
        if (source['collection']) {
            this.collection = source.collection.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.collection = [];
        }
        if (source['typeTested']) {
            this.typeTested = source.typeTested.map((x) => new fhir.SpecimenDefinitionTypeTested(x));
        }
        else {
            this.typeTested = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SpecimenDefinition';
        }
        iss.push(...this.vOS('identifier', exp));
        iss.push(...this.vOS('typeCollected', exp));
        iss.push(...this.vOA('patientPreparation', exp));
        iss.push(...this.vOS('timeAspect', exp));
        iss.push(...this.vOA('collection', exp));
        iss.push(...this.vOA('typeTested', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SpecimenDefinition._fts_dataType = 'SpecimenDefinition';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3BlY2ltZW5EZWZpbml0aW9uLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9TcGVjaW1lbkRlZmluaXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsb0NBQW9DO0FBRXBDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBd0JuQyxhQUFhO0FBQ2IsT0FBTyxFQUFFLHVDQUF1QyxFQUFFLE1BQU0sNkRBQTZELENBQUM7QUErQnRIOztHQUVHO0FBQ0gsTUFBTSxPQUFPLDZDQUE4QyxTQUFRLElBQUksQ0FBQyxlQUFlO0lBYXJGOztPQUVHO0lBQ0gsWUFBWSxTQUFvRSxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUMxSCxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDO1NBQUU7YUFDdkQsSUFBSSxNQUFNLENBQUMseUJBQXlCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO1NBQUU7YUFDcEgsSUFBSSxNQUFNLENBQUMsbUJBQW1CLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1NBQUU7YUFDbEc7WUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztTQUFFO0lBQ2hDLENBQUM7SUFDRDs7T0FFRztJQUNhLGlCQUFpQixDQUFDLE1BQWEsRUFBRTtRQUMvQyxJQUFJLEdBQUcsR0FBbUIsS0FBSyxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxDQUFDO1FB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QWEsRUFBRTtRQUMvQyxJQUFJLEdBQUcsR0FBbUIsS0FBSyxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3ZELElBQUksR0FBRyxLQUFLLEVBQUUsRUFBRTtZQUFFLEdBQUcsR0FBRyxvQkFBb0IsQ0FBQTtTQUFFO1FBQzlDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3hDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzNDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLG9CQUFvQixFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDaEQsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDeEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDeEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDeEMsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDOztBQWpFRDs7R0FFRztBQUM2QixnQ0FBYSxHQUFVLG9CQUFvQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0LmNvcmUgdmVyc2lvbjogNC4wLjFcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBTcGVjaW1lbkRlZmluaXRpb25cclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbnRhaW5lck1hdGVyaWFsQ29kZXMsICBDb250YWluZXJNYXRlcmlhbENvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db250YWluZXJNYXRlcmlhbENvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDb250YWluZXJNYXRlcmlhbFZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29udGFpbmVyTWF0ZXJpYWxWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFNwZWNpbWVuQ29udGFpbmVyVHlwZUNvZGVzLCAgU3BlY2ltZW5Db250YWluZXJUeXBlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1NwZWNpbWVuQ29udGFpbmVyVHlwZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBTcGVjaW1lbkNvbnRhaW5lclR5cGVWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1NwZWNpbWVuQ29udGFpbmVyVHlwZVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29udGFpbmVyQ2FwQ29kZXMsICBDb250YWluZXJDYXBDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29udGFpbmVyQ2FwQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbnRhaW5lckNhcFZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29udGFpbmVyQ2FwVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBIYW5kbGluZ0NvbmRpdGlvbkNvZGVzLCAgSGFuZGxpbmdDb25kaXRpb25Db2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvSGFuZGxpbmdDb25kaXRpb25Db2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgSGFuZGxpbmdDb25kaXRpb25Wc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0hhbmRsaW5nQ29uZGl0aW9uVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBWMjA0ODdDb2RlcywgIFYyMDQ4N0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9WMjA0ODdDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgVjIwNDg3VnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9WMjA0ODdWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFNwZWNpbWVuQ29udGFpbmVkUHJlZmVyZW5jZUNvZGVzLCAgU3BlY2ltZW5Db250YWluZWRQcmVmZXJlbmNlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1NwZWNpbWVuQ29udGFpbmVkUHJlZmVyZW5jZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBTcGVjaW1lbkNvbnRhaW5lZFByZWZlcmVuY2VWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1NwZWNpbWVuQ29udGFpbmVkUHJlZmVyZW5jZVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUmVqZWN0aW9uQ3JpdGVyaWFDb2RlcywgIFJlamVjdGlvbkNyaXRlcmlhQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1JlamVjdGlvbkNyaXRlcmlhQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFJlamVjdGlvbkNyaXRlcmlhVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9SZWplY3Rpb25Dcml0ZXJpYVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUHJlcGFyZVBhdGllbnRQcmlvclNwZWNpbWVuQ29sbGVjdGlvbkNvZGVzLCAgUHJlcGFyZVBhdGllbnRQcmlvclNwZWNpbWVuQ29sbGVjdGlvbkNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9QcmVwYXJlUGF0aWVudFByaW9yU3BlY2ltZW5Db2xsZWN0aW9uQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFByZXBhcmVQYXRpZW50UHJpb3JTcGVjaW1lbkNvbGxlY3Rpb25Wc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1ByZXBhcmVQYXRpZW50UHJpb3JTcGVjaW1lbkNvbGxlY3Rpb25Wc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFNwZWNpbWVuQ29sbGVjdGlvbkNvZGVzLCAgU3BlY2ltZW5Db2xsZWN0aW9uQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1NwZWNpbWVuQ29sbGVjdGlvbkNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBTcGVjaW1lbkNvbGxlY3Rpb25Wc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1NwZWNpbWVuQ29sbGVjdGlvblZzVmFsaWRhdGlvbi5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBTcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkQ29udGFpbmVyQWRkaXRpdmUgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZENvbnRhaW5lckFkZGl0aXZlQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogU3Vic3RhbmNlIGludHJvZHVjZWQgaW4gdGhlIGtpbmQgb2YgY29udGFpbmVyIHRvIHByZXNlcnZlLCBtYWludGFpbiBvciBlbmhhbmNlIHRoZSBzcGVjaW1lbi4gRXhhbXBsZXM6IEZvcm1hbGluLCBDaXRyYXRlLCBFRFRBLlxyXG4gICAqL1xyXG4gIGFkZGl0aXZlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8Zmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFN1YnN0YW5jZSBpbnRyb2R1Y2VkIGluIHRoZSBraW5kIG9mIGNvbnRhaW5lciB0byBwcmVzZXJ2ZSwgbWFpbnRhaW4gb3IgZW5oYW5jZSB0aGUgc3BlY2ltZW4uIEV4YW1wbGVzOiBGb3JtYWxpbiwgQ2l0cmF0ZSwgRURUQS5cclxuICAgKi9cclxuICBhZGRpdGl2ZUNvZGVhYmxlQ29uY2VwdD86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU3Vic3RhbmNlIGludHJvZHVjZWQgaW4gdGhlIGtpbmQgb2YgY29udGFpbmVyIHRvIHByZXNlcnZlLCBtYWludGFpbiBvciBlbmhhbmNlIHRoZSBzcGVjaW1lbi4gRXhhbXBsZXM6IEZvcm1hbGluLCBDaXRyYXRlLCBFRFRBLlxyXG4gICAqL1xyXG4gIGFkZGl0aXZlUmVmZXJlbmNlPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFN1YnN0YW5jZSBpbnRyb2R1Y2VkIGluIHRoZSBraW5kIG9mIGNvbnRhaW5lciB0byBwcmVzZXJ2ZSwgbWFpbnRhaW4gb3IgZW5oYW5jZSB0aGUgc3BlY2ltZW4uIEV4YW1wbGVzOiBGb3JtYWxpbiwgQ2l0cmF0ZSwgRURUQS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkQ29udGFpbmVyQWRkaXRpdmUgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdTcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkQ29udGFpbmVyQWRkaXRpdmUnO1xyXG4gIC8qKlxyXG4gICAqIFN1YnN0YW5jZSBpbnRyb2R1Y2VkIGluIHRoZSBraW5kIG9mIGNvbnRhaW5lciB0byBwcmVzZXJ2ZSwgbWFpbnRhaW4gb3IgZW5oYW5jZSB0aGUgc3BlY2ltZW4uIEV4YW1wbGVzOiBGb3JtYWxpbiwgQ2l0cmF0ZSwgRURUQS5cclxuICAgKi9cclxuICBwdWJsaWMgYWRkaXRpdmU6IChmaGlyLkNvZGVhYmxlQ29uY2VwdHxmaGlyLlJlZmVyZW5jZSl8bnVsbDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IFNwZWNpbWVuRGVmaW5pdGlvbi50eXBlVGVzdGVkLmNvbnRhaW5lci5hZGRpdGl2ZS5hZGRpdGl2ZVt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c19hZGRpdGl2ZUlzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWRDb250YWluZXJBZGRpdGl2ZSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWRDb250YWluZXJBZGRpdGl2ZUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydhZGRpdGl2ZSddKSB7IHRoaXMuYWRkaXRpdmUgPSBzb3VyY2UuYWRkaXRpdmU7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnYWRkaXRpdmVDb2RlYWJsZUNvbmNlcHQnXSkgeyB0aGlzLmFkZGl0aXZlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5hZGRpdGl2ZUNvZGVhYmxlQ29uY2VwdCk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnYWRkaXRpdmVSZWZlcmVuY2UnXSkgeyB0aGlzLmFkZGl0aXZlID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5hZGRpdGl2ZVJlZmVyZW5jZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmFkZGl0aXZlID0gbnVsbDsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ1NwZWNpbWVuRGVmaW5pdGlvbi50eXBlVGVzdGVkLmNvbnRhaW5lci5hZGRpdGl2ZScgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ2FkZGl0aXZlJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBTcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkQ29udGFpbmVyIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWRDb250YWluZXJBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgdHlwZSBvZiBtYXRlcmlhbCBvZiB0aGUgY29udGFpbmVyLlxyXG4gICAqL1xyXG4gIG1hdGVyaWFsPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdHlwZSBvZiBjb250YWluZXIgdXNlZCB0byBjb250YWluIHRoaXMga2luZCBvZiBzcGVjaW1lbi5cclxuICAgKi9cclxuICB0eXBlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDb2xvciBvZiBjb250YWluZXIgY2FwLlxyXG4gICAqL1xyXG4gIGNhcD86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRleHR1YWwgZGVzY3JpcHRpb24gb2YgdGhlIGtpbmQgb2YgY29udGFpbmVyLlxyXG4gICAqL1xyXG4gIGRlc2NyaXB0aW9uPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFNwZWNpbWVuRGVmaW5pdGlvbi50eXBlVGVzdGVkLmNvbnRhaW5lci5kZXNjcmlwdGlvblxyXG4gICAqL1xyXG4gIF9kZXNjcmlwdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNhcGFjaXR5ICh2b2x1bWUgb3Igb3RoZXIgbWVhc3VyZSkgb2YgdGhpcyBraW5kIG9mIGNvbnRhaW5lci5cclxuICAgKi9cclxuICBjYXBhY2l0eT86IGZoaXIuUXVhbnRpdHlBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbWluaW11bSB2b2x1bWUgdG8gYmUgY29uZGl0aW9uZWQgaW4gdGhlIGNvbnRhaW5lci5cclxuICAgKi9cclxuICBtaW5pbXVtVm9sdW1lPzogZmhpci5RdWFudGl0eXxmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBtaW5pbXVtIHZvbHVtZSB0byBiZSBjb25kaXRpb25lZCBpbiB0aGUgY29udGFpbmVyLlxyXG4gICAqL1xyXG4gIG1pbmltdW1Wb2x1bWVRdWFudGl0eT86IGZoaXIuUXVhbnRpdHlBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbWluaW11bSB2b2x1bWUgdG8gYmUgY29uZGl0aW9uZWQgaW4gdGhlIGNvbnRhaW5lci5cclxuICAgKi9cclxuICBtaW5pbXVtVm9sdW1lU3RyaW5nPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU3Vic3RhbmNlIGludHJvZHVjZWQgaW4gdGhlIGtpbmQgb2YgY29udGFpbmVyIHRvIHByZXNlcnZlLCBtYWludGFpbiBvciBlbmhhbmNlIHRoZSBzcGVjaW1lbi4gRXhhbXBsZXM6IEZvcm1hbGluLCBDaXRyYXRlLCBFRFRBLlxyXG4gICAqL1xyXG4gIGFkZGl0aXZlPzogZmhpci5TcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkQ29udGFpbmVyQWRkaXRpdmVBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFNwZWNpYWwgcHJvY2Vzc2luZyB0aGF0IHNob3VsZCBiZSBhcHBsaWVkIHRvIHRoZSBjb250YWluZXIgZm9yIHRoaXMga2luZCBvZiBzcGVjaW1lbi5cclxuICAgKi9cclxuICBwcmVwYXJhdGlvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTcGVjaW1lbkRlZmluaXRpb24udHlwZVRlc3RlZC5jb250YWluZXIucHJlcGFyYXRpb25cclxuICAgKi9cclxuICBfcHJlcGFyYXRpb24/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlIHNwZWNpbWVuJ3MgY29udGFpbmVyLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWRDb250YWluZXIgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdTcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkQ29udGFpbmVyJztcclxuICAvKipcclxuICAgKiBUaGUgdHlwZSBvZiBtYXRlcmlhbCBvZiB0aGUgY29udGFpbmVyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtYXRlcmlhbD86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdHlwZSBvZiBjb250YWluZXIgdXNlZCB0byBjb250YWluIHRoaXMga2luZCBvZiBzcGVjaW1lbi5cclxuICAgKi9cclxuICBwdWJsaWMgdHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDb2xvciBvZiBjb250YWluZXIgY2FwLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjYXA/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRleHR1YWwgZGVzY3JpcHRpb24gb2YgdGhlIGtpbmQgb2YgY29udGFpbmVyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZXNjcmlwdGlvbj86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNhcGFjaXR5ICh2b2x1bWUgb3Igb3RoZXIgbWVhc3VyZSkgb2YgdGhpcyBraW5kIG9mIGNvbnRhaW5lci5cclxuICAgKi9cclxuICBwdWJsaWMgY2FwYWNpdHk/OiBmaGlyLlF1YW50aXR5fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbWluaW11bSB2b2x1bWUgdG8gYmUgY29uZGl0aW9uZWQgaW4gdGhlIGNvbnRhaW5lci5cclxuICAgKi9cclxuICBwdWJsaWMgbWluaW11bVZvbHVtZT86IChmaGlyLlF1YW50aXR5fGZoaXIuRmhpclN0cmluZyl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgU3BlY2ltZW5EZWZpbml0aW9uLnR5cGVUZXN0ZWQuY29udGFpbmVyLm1pbmltdW1Wb2x1bWVbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfbWluaW11bVZvbHVtZUlzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIFN1YnN0YW5jZSBpbnRyb2R1Y2VkIGluIHRoZSBraW5kIG9mIGNvbnRhaW5lciB0byBwcmVzZXJ2ZSwgbWFpbnRhaW4gb3IgZW5oYW5jZSB0aGUgc3BlY2ltZW4uIEV4YW1wbGVzOiBGb3JtYWxpbiwgQ2l0cmF0ZSwgRURUQS5cclxuICAgKi9cclxuICBwdWJsaWMgYWRkaXRpdmU6IGZoaXIuU3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZENvbnRhaW5lckFkZGl0aXZlW107XHJcbiAgLyoqXHJcbiAgICogU3BlY2lhbCBwcm9jZXNzaW5nIHRoYXQgc2hvdWxkIGJlIGFwcGxpZWQgdG8gdGhlIGNvbnRhaW5lciBmb3IgdGhpcyBraW5kIG9mIHNwZWNpbWVuLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcmVwYXJhdGlvbj86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgU3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZENvbnRhaW5lciAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWRDb250YWluZXJBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnbWF0ZXJpYWwnXSkgeyB0aGlzLm1hdGVyaWFsID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5tYXRlcmlhbCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3R5cGUnXSkgeyB0aGlzLnR5cGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnR5cGUpOyB9XHJcbiAgICBpZiAoc291cmNlWydjYXAnXSkgeyB0aGlzLmNhcCA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY2FwKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGVzY3JpcHRpb24nXSkgeyB0aGlzLmRlc2NyaXB0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5kZXNjcmlwdGlvbn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfZGVzY3JpcHRpb24nXSkge1xyXG4gICAgICBpZiAodGhpcy5kZXNjcmlwdGlvbikgeyB0aGlzLmRlc2NyaXB0aW9uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2Rlc2NyaXB0aW9uISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZGVzY3JpcHRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fZGVzY3JpcHRpb24gYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2NhcGFjaXR5J10pIHsgdGhpcy5jYXBhY2l0eSA9IG5ldyBmaGlyLlF1YW50aXR5KHNvdXJjZS5jYXBhY2l0eSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ21pbmltdW1Wb2x1bWUnXSkgeyB0aGlzLm1pbmltdW1Wb2x1bWUgPSBzb3VyY2UubWluaW11bVZvbHVtZTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydtaW5pbXVtVm9sdW1lUXVhbnRpdHknXSkgeyB0aGlzLm1pbmltdW1Wb2x1bWUgPSBuZXcgZmhpci5RdWFudGl0eShzb3VyY2UubWluaW11bVZvbHVtZVF1YW50aXR5KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydtaW5pbXVtVm9sdW1lU3RyaW5nJ10pIHsgdGhpcy5taW5pbXVtVm9sdW1lID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5taW5pbXVtVm9sdW1lU3RyaW5nfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2FkZGl0aXZlJ10pIHsgdGhpcy5hZGRpdGl2ZSA9IHNvdXJjZS5hZGRpdGl2ZS5tYXAoKHgpID0+IG5ldyBmaGlyLlNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWRDb250YWluZXJBZGRpdGl2ZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmFkZGl0aXZlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3ByZXBhcmF0aW9uJ10pIHsgdGhpcy5wcmVwYXJhdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UucHJlcGFyYXRpb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3ByZXBhcmF0aW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMucHJlcGFyYXRpb24pIHsgdGhpcy5wcmVwYXJhdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9wcmVwYXJhdGlvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnByZXBhcmF0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3ByZXBhcmF0aW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnU3BlY2ltZW5EZWZpbml0aW9uLnR5cGVUZXN0ZWQuY29udGFpbmVyJyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnbWF0ZXJpYWwnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3R5cGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2NhcCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnZGVzY3JpcHRpb24nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2NhcGFjaXR5JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdtaW5pbXVtVm9sdW1lJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdhZGRpdGl2ZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygncHJlcGFyYXRpb24nLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWRIYW5kbGluZyB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkSGFuZGxpbmdBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBJdCBxdWFsaWZpZXMgdGhlIGludGVydmFsIG9mIHRlbXBlcmF0dXJlLCB3aGljaCBjaGFyYWN0ZXJpemVzIGFuIG9jY3VycmVuY2Ugb2YgaGFuZGxpbmcuIENvbmRpdGlvbnMgdGhhdCBhcmUgbm90IHJlbGF0ZWQgdG8gdGVtcGVyYXR1cmUgbWF5IGJlIGhhbmRsZWQgaW4gdGhlIGluc3RydWN0aW9uIGVsZW1lbnQuXHJcbiAgICovXHJcbiAgdGVtcGVyYXR1cmVRdWFsaWZpZXI/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0ZW1wZXJhdHVyZSBpbnRlcnZhbCBmb3IgdGhpcyBzZXQgb2YgaGFuZGxpbmcgaW5zdHJ1Y3Rpb25zLlxyXG4gICAqL1xyXG4gIHRlbXBlcmF0dXJlUmFuZ2U/OiBmaGlyLlJhbmdlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG1heGltdW0gdGltZSBpbnRlcnZhbCBvZiBwcmVzZXJ2YXRpb24gb2YgdGhlIHNwZWNpbWVuIHdpdGggdGhlc2UgY29uZGl0aW9ucy5cclxuICAgKi9cclxuICBtYXhEdXJhdGlvbj86IGZoaXIuRHVyYXRpb25BcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBZGRpdGlvbmFsIHRleHR1YWwgaW5zdHJ1Y3Rpb25zIGZvciB0aGUgcHJlc2VydmF0aW9uIG9yIHRyYW5zcG9ydCBvZiB0aGUgc3BlY2ltZW4uIEZvciBpbnN0YW5jZSwgJ1Byb3RlY3QgZnJvbSBsaWdodCBleHBvc3VyZScuXHJcbiAgICovXHJcbiAgaW5zdHJ1Y3Rpb24/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3BlY2ltZW5EZWZpbml0aW9uLnR5cGVUZXN0ZWQuaGFuZGxpbmcuaW5zdHJ1Y3Rpb25cclxuICAgKi9cclxuICBfaW5zdHJ1Y3Rpb24/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IG9mIGluc3RydWN0aW9ucyBmb3IgcHJlc2VydmF0aW9uL3RyYW5zcG9ydCBvZiB0aGUgc3BlY2ltZW4gYXQgYSBkZWZpbmVkIHRlbXBlcmF0dXJlIGludGVydmFsLCBwcmlvciB0aGUgdGVzdGluZyBwcm9jZXNzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWRIYW5kbGluZyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1NwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWRIYW5kbGluZyc7XHJcbiAgLyoqXHJcbiAgICogSXQgcXVhbGlmaWVzIHRoZSBpbnRlcnZhbCBvZiB0ZW1wZXJhdHVyZSwgd2hpY2ggY2hhcmFjdGVyaXplcyBhbiBvY2N1cnJlbmNlIG9mIGhhbmRsaW5nLiBDb25kaXRpb25zIHRoYXQgYXJlIG5vdCByZWxhdGVkIHRvIHRlbXBlcmF0dXJlIG1heSBiZSBoYW5kbGVkIGluIHRoZSBpbnN0cnVjdGlvbiBlbGVtZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0ZW1wZXJhdHVyZVF1YWxpZmllcj86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdGVtcGVyYXR1cmUgaW50ZXJ2YWwgZm9yIHRoaXMgc2V0IG9mIGhhbmRsaW5nIGluc3RydWN0aW9ucy5cclxuICAgKi9cclxuICBwdWJsaWMgdGVtcGVyYXR1cmVSYW5nZT86IGZoaXIuUmFuZ2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBtYXhpbXVtIHRpbWUgaW50ZXJ2YWwgb2YgcHJlc2VydmF0aW9uIG9mIHRoZSBzcGVjaW1lbiB3aXRoIHRoZXNlIGNvbmRpdGlvbnMuXHJcbiAgICovXHJcbiAgcHVibGljIG1heER1cmF0aW9uPzogZmhpci5EdXJhdGlvbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWRkaXRpb25hbCB0ZXh0dWFsIGluc3RydWN0aW9ucyBmb3IgdGhlIHByZXNlcnZhdGlvbiBvciB0cmFuc3BvcnQgb2YgdGhlIHNwZWNpbWVuLiBGb3IgaW5zdGFuY2UsICdQcm90ZWN0IGZyb20gbGlnaHQgZXhwb3N1cmUnLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpbnN0cnVjdGlvbj86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgU3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZEhhbmRsaW5nIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8U3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZEhhbmRsaW5nQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3RlbXBlcmF0dXJlUXVhbGlmaWVyJ10pIHsgdGhpcy50ZW1wZXJhdHVyZVF1YWxpZmllciA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UudGVtcGVyYXR1cmVRdWFsaWZpZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWyd0ZW1wZXJhdHVyZVJhbmdlJ10pIHsgdGhpcy50ZW1wZXJhdHVyZVJhbmdlID0gbmV3IGZoaXIuUmFuZ2Uoc291cmNlLnRlbXBlcmF0dXJlUmFuZ2UpOyB9XHJcbiAgICBpZiAoc291cmNlWydtYXhEdXJhdGlvbiddKSB7IHRoaXMubWF4RHVyYXRpb24gPSBuZXcgZmhpci5EdXJhdGlvbihzb3VyY2UubWF4RHVyYXRpb24pOyB9XHJcbiAgICBpZiAoc291cmNlWydpbnN0cnVjdGlvbiddKSB7IHRoaXMuaW5zdHJ1Y3Rpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmluc3RydWN0aW9ufSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19pbnN0cnVjdGlvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLmluc3RydWN0aW9uKSB7IHRoaXMuaW5zdHJ1Y3Rpb24uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5faW5zdHJ1Y3Rpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5pbnN0cnVjdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9pbnN0cnVjdGlvbiBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ1NwZWNpbWVuRGVmaW5pdGlvbi50eXBlVGVzdGVkLmhhbmRsaW5nJyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygndGVtcGVyYXR1cmVRdWFsaWZpZXInLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3RlbXBlcmF0dXJlUmFuZ2UnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ21heER1cmF0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdpbnN0cnVjdGlvbicsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgU3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogUHJpbWFyeSBvZiBzZWNvbmRhcnkgc3BlY2ltZW4uXHJcbiAgICovXHJcbiAgaXNEZXJpdmVkPzogZmhpci5GaGlyQm9vbGVhbnxib29sZWFufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3BlY2ltZW5EZWZpbml0aW9uLnR5cGVUZXN0ZWQuaXNEZXJpdmVkXHJcbiAgICovXHJcbiAgX2lzRGVyaXZlZD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGtpbmQgb2Ygc3BlY2ltZW4gY29uZGl0aW9uZWQgZm9yIHRlc3RpbmcgZXhwZWN0ZWQgYnkgbGFiLlxyXG4gICAqL1xyXG4gIHR5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwcmVmZXJlbmNlIGZvciB0aGlzIHR5cGUgb2YgY29uZGl0aW9uZWQgc3BlY2ltZW4uXHJcbiAgICovXHJcbiAgcHJlZmVyZW5jZTogZmhpci5GaGlyQ29kZTxTcGVjaW1lbkNvbnRhaW5lZFByZWZlcmVuY2VDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3BlY2ltZW5EZWZpbml0aW9uLnR5cGVUZXN0ZWQucHJlZmVyZW5jZVxyXG4gICAqL1xyXG4gIF9wcmVmZXJlbmNlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgc3BlY2ltZW4ncyBjb250YWluZXIuXHJcbiAgICovXHJcbiAgY29udGFpbmVyPzogZmhpci5TcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkQ29udGFpbmVyQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZW1lbnRzIGZvciBkZWxpdmVyeSBhbmQgc3BlY2lhbCBoYW5kbGluZyBvZiB0aGlzIGtpbmQgb2YgY29uZGl0aW9uZWQgc3BlY2ltZW4uXHJcbiAgICovXHJcbiAgcmVxdWlyZW1lbnQ/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3BlY2ltZW5EZWZpbml0aW9uLnR5cGVUZXN0ZWQucmVxdWlyZW1lbnRcclxuICAgKi9cclxuICBfcmVxdWlyZW1lbnQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB1c3VhbCB0aW1lIHRoYXQgYSBzcGVjaW1lbiBvZiB0aGlzIGtpbmQgaXMgcmV0YWluZWQgYWZ0ZXIgdGhlIG9yZGVyZWQgdGVzdHMgYXJlIGNvbXBsZXRlZCwgZm9yIHRoZSBwdXJwb3NlIG9mIGFkZGl0aW9uYWwgdGVzdGluZy5cclxuICAgKi9cclxuICByZXRlbnRpb25UaW1lPzogZmhpci5EdXJhdGlvbkFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENyaXRlcmlvbiBmb3IgcmVqZWN0aW9uIG9mIHRoZSBzcGVjaW1lbiBpbiBpdHMgY29udGFpbmVyIGJ5IHRoZSBsYWJvcmF0b3J5LlxyXG4gICAqL1xyXG4gIHJlamVjdGlvbkNyaXRlcmlvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTZXQgb2YgaW5zdHJ1Y3Rpb25zIGZvciBwcmVzZXJ2YXRpb24vdHJhbnNwb3J0IG9mIHRoZSBzcGVjaW1lbiBhdCBhIGRlZmluZWQgdGVtcGVyYXR1cmUgaW50ZXJ2YWwsIHByaW9yIHRoZSB0ZXN0aW5nIHByb2Nlc3MuXHJcbiAgICovXHJcbiAgaGFuZGxpbmc/OiBmaGlyLlNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWRIYW5kbGluZ0FyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTcGVjaW1lbiBjb25kaXRpb25lZCBpbiBhIGNvbnRhaW5lciBhcyBleHBlY3RlZCBieSB0aGUgdGVzdGluZyBsYWJvcmF0b3J5LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWQgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdTcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkJztcclxuICAvKipcclxuICAgKiBQcmltYXJ5IG9mIHNlY29uZGFyeSBzcGVjaW1lbi5cclxuICAgKi9cclxuICBwdWJsaWMgaXNEZXJpdmVkPzogZmhpci5GaGlyQm9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGtpbmQgb2Ygc3BlY2ltZW4gY29uZGl0aW9uZWQgZm9yIHRlc3RpbmcgZXhwZWN0ZWQgYnkgbGFiLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0eXBlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwcmVmZXJlbmNlIGZvciB0aGlzIHR5cGUgb2YgY29uZGl0aW9uZWQgc3BlY2ltZW4uXHJcbiAgICovXHJcbiAgcHVibGljIHByZWZlcmVuY2U6IGZoaXIuRmhpckNvZGU8U3BlY2ltZW5Db250YWluZWRQcmVmZXJlbmNlQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNwZWNpbWVuJ3MgY29udGFpbmVyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb250YWluZXI/OiBmaGlyLlNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWRDb250YWluZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFJlcXVpcmVtZW50cyBmb3IgZGVsaXZlcnkgYW5kIHNwZWNpYWwgaGFuZGxpbmcgb2YgdGhpcyBraW5kIG9mIGNvbmRpdGlvbmVkIHNwZWNpbWVuLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZXF1aXJlbWVudD86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHVzdWFsIHRpbWUgdGhhdCBhIHNwZWNpbWVuIG9mIHRoaXMga2luZCBpcyByZXRhaW5lZCBhZnRlciB0aGUgb3JkZXJlZCB0ZXN0cyBhcmUgY29tcGxldGVkLCBmb3IgdGhlIHB1cnBvc2Ugb2YgYWRkaXRpb25hbCB0ZXN0aW5nLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZXRlbnRpb25UaW1lPzogZmhpci5EdXJhdGlvbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ3JpdGVyaW9uIGZvciByZWplY3Rpb24gb2YgdGhlIHNwZWNpbWVuIGluIGl0cyBjb250YWluZXIgYnkgdGhlIGxhYm9yYXRvcnkuXHJcbiAgICovXHJcbiAgcHVibGljIHJlamVjdGlvbkNyaXRlcmlvbjogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBTZXQgb2YgaW5zdHJ1Y3Rpb25zIGZvciBwcmVzZXJ2YXRpb24vdHJhbnNwb3J0IG9mIHRoZSBzcGVjaW1lbiBhdCBhIGRlZmluZWQgdGVtcGVyYXR1cmUgaW50ZXJ2YWwsIHByaW9yIHRoZSB0ZXN0aW5nIHByb2Nlc3MuXHJcbiAgICovXHJcbiAgcHVibGljIGhhbmRsaW5nOiBmaGlyLlNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWRIYW5kbGluZ1tdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWQgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxTcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2lzRGVyaXZlZCddKSB7IHRoaXMuaXNEZXJpdmVkID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oe3ZhbHVlOiBzb3VyY2UuaXNEZXJpdmVkfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19pc0Rlcml2ZWQnXSkge1xyXG4gICAgICBpZiAodGhpcy5pc0Rlcml2ZWQpIHsgdGhpcy5pc0Rlcml2ZWQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5faXNEZXJpdmVkISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuaXNEZXJpdmVkID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oc291cmNlLl9pc0Rlcml2ZWQgYXMgUGFydGlhbDxmaGlyLkZoaXJCb29sZWFuQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd0eXBlJ10pIHsgdGhpcy50eXBlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS50eXBlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJlZmVyZW5jZSddKSB7IHRoaXMucHJlZmVyZW5jZSA9IG5ldyBmaGlyLkZoaXJDb2RlPFNwZWNpbWVuQ29udGFpbmVkUHJlZmVyZW5jZUNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5wcmVmZXJlbmNlfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnByZWZlcmVuY2UgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfcHJlZmVyZW5jZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnByZWZlcmVuY2UpIHsgdGhpcy5wcmVmZXJlbmNlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3ByZWZlcmVuY2UhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5wcmVmZXJlbmNlID0gbmV3IGZoaXIuRmhpckNvZGU8U3BlY2ltZW5Db250YWluZWRQcmVmZXJlbmNlQ29kZVR5cGU+KHNvdXJjZS5fcHJlZmVyZW5jZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29udGFpbmVyJ10pIHsgdGhpcy5jb250YWluZXIgPSBuZXcgZmhpci5TcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkQ29udGFpbmVyKHNvdXJjZS5jb250YWluZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWydyZXF1aXJlbWVudCddKSB7IHRoaXMucmVxdWlyZW1lbnQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnJlcXVpcmVtZW50fSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19yZXF1aXJlbWVudCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnJlcXVpcmVtZW50KSB7IHRoaXMucmVxdWlyZW1lbnQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fcmVxdWlyZW1lbnQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5yZXF1aXJlbWVudCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9yZXF1aXJlbWVudCBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsncmV0ZW50aW9uVGltZSddKSB7IHRoaXMucmV0ZW50aW9uVGltZSA9IG5ldyBmaGlyLkR1cmF0aW9uKHNvdXJjZS5yZXRlbnRpb25UaW1lKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVqZWN0aW9uQ3JpdGVyaW9uJ10pIHsgdGhpcy5yZWplY3Rpb25Dcml0ZXJpb24gPSBzb3VyY2UucmVqZWN0aW9uQ3JpdGVyaW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVqZWN0aW9uQ3JpdGVyaW9uID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2hhbmRsaW5nJ10pIHsgdGhpcy5oYW5kbGluZyA9IHNvdXJjZS5oYW5kbGluZy5tYXAoKHgpID0+IG5ldyBmaGlyLlNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWRIYW5kbGluZyh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmhhbmRsaW5nID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdTcGVjaW1lbkRlZmluaXRpb24udHlwZVRlc3RlZCcgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2lzRGVyaXZlZCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygndHlwZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSU1YoJ3ByZWZlcmVuY2UnLGV4cCwnU3BlY2ltZW5Db250YWluZWRQcmVmZXJlbmNlJyxTcGVjaW1lbkNvbnRhaW5lZFByZWZlcmVuY2VWc1ZhbGlkYXRpb24sJ3InKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnY29udGFpbmVyJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdyZXF1aXJlbWVudCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygncmV0ZW50aW9uVGltZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgncmVqZWN0aW9uQ3JpdGVyaW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdoYW5kbGluZycsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgU3BlY2ltZW5EZWZpbml0aW9uIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFNwZWNpbWVuRGVmaW5pdGlvbkFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIlNwZWNpbWVuRGVmaW5pdGlvblwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGJ1c2luZXNzIGlkZW50aWZpZXIgYXNzb2NpYXRlZCB3aXRoIHRoZSBraW5kIG9mIHNwZWNpbWVuLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUga2luZCBvZiBtYXRlcmlhbCB0byBiZSBjb2xsZWN0ZWQuXHJcbiAgICovXHJcbiAgdHlwZUNvbGxlY3RlZD86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUHJlcGFyYXRpb24gb2YgdGhlIHBhdGllbnQgZm9yIHNwZWNpbWVuIGNvbGxlY3Rpb24uXHJcbiAgICovXHJcbiAgcGF0aWVudFByZXBhcmF0aW9uPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRpbWUgYXNwZWN0IG9mIHNwZWNpbWVuIGNvbGxlY3Rpb24gKGR1cmF0aW9uIG9yIG9mZnNldCkuXHJcbiAgICovXHJcbiAgdGltZUFzcGVjdD86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTcGVjaW1lbkRlZmluaXRpb24udGltZUFzcGVjdFxyXG4gICAqL1xyXG4gIF90aW1lQXNwZWN0PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgYWN0aW9uIHRvIGJlIHBlcmZvcm1lZCBmb3IgY29sbGVjdGluZyB0aGUgc3BlY2ltZW4uXHJcbiAgICovXHJcbiAgY29sbGVjdGlvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTcGVjaW1lbiBjb25kaXRpb25lZCBpbiBhIGNvbnRhaW5lciBhcyBleHBlY3RlZCBieSB0aGUgdGVzdGluZyBsYWJvcmF0b3J5LlxyXG4gICAqL1xyXG4gIHR5cGVUZXN0ZWQ/OiBmaGlyLlNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWRBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQSBraW5kIG9mIHNwZWNpbWVuIHdpdGggYXNzb2NpYXRlZCBzZXQgb2YgcmVxdWlyZW1lbnRzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNwZWNpbWVuRGVmaW5pdGlvbiBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnU3BlY2ltZW5EZWZpbml0aW9uJztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIlNwZWNpbWVuRGVmaW5pdGlvblwiO1xyXG4gIC8qKlxyXG4gICAqIEEgYnVzaW5lc3MgaWRlbnRpZmllciBhc3NvY2lhdGVkIHdpdGggdGhlIGtpbmQgb2Ygc3BlY2ltZW4uXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBraW5kIG9mIG1hdGVyaWFsIHRvIGJlIGNvbGxlY3RlZC5cclxuICAgKi9cclxuICBwdWJsaWMgdHlwZUNvbGxlY3RlZD86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBQcmVwYXJhdGlvbiBvZiB0aGUgcGF0aWVudCBmb3Igc3BlY2ltZW4gY29sbGVjdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgcGF0aWVudFByZXBhcmF0aW9uOiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIFRpbWUgYXNwZWN0IG9mIHNwZWNpbWVuIGNvbGxlY3Rpb24gKGR1cmF0aW9uIG9yIG9mZnNldCkuXHJcbiAgICovXHJcbiAgcHVibGljIHRpbWVBc3BlY3Q/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBhY3Rpb24gdG8gYmUgcGVyZm9ybWVkIGZvciBjb2xsZWN0aW5nIHRoZSBzcGVjaW1lbi5cclxuICAgKi9cclxuICBwdWJsaWMgY29sbGVjdGlvbjogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBTcGVjaW1lbiBjb25kaXRpb25lZCBpbiBhIGNvbnRhaW5lciBhcyBleHBlY3RlZCBieSB0aGUgdGVzdGluZyBsYWJvcmF0b3J5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0eXBlVGVzdGVkOiBmaGlyLlNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWRbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBTcGVjaW1lbkRlZmluaXRpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxTcGVjaW1lbkRlZmluaXRpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnU3BlY2ltZW5EZWZpbml0aW9uJztcclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBuZXcgZmhpci5JZGVudGlmaWVyKHNvdXJjZS5pZGVudGlmaWVyKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndHlwZUNvbGxlY3RlZCddKSB7IHRoaXMudHlwZUNvbGxlY3RlZCA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UudHlwZUNvbGxlY3RlZCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3BhdGllbnRQcmVwYXJhdGlvbiddKSB7IHRoaXMucGF0aWVudFByZXBhcmF0aW9uID0gc291cmNlLnBhdGllbnRQcmVwYXJhdGlvbi5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnBhdGllbnRQcmVwYXJhdGlvbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWyd0aW1lQXNwZWN0J10pIHsgdGhpcy50aW1lQXNwZWN0ID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS50aW1lQXNwZWN0fSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ190aW1lQXNwZWN0J10pIHtcclxuICAgICAgaWYgKHRoaXMudGltZUFzcGVjdCkgeyB0aGlzLnRpbWVBc3BlY3QuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdGltZUFzcGVjdCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnRpbWVBc3BlY3QgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fdGltZUFzcGVjdCBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29sbGVjdGlvbiddKSB7IHRoaXMuY29sbGVjdGlvbiA9IHNvdXJjZS5jb2xsZWN0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY29sbGVjdGlvbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWyd0eXBlVGVzdGVkJ10pIHsgdGhpcy50eXBlVGVzdGVkID0gc291cmNlLnR5cGVUZXN0ZWQubWFwKCh4KSA9PiBuZXcgZmhpci5TcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudHlwZVRlc3RlZCA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnU3BlY2ltZW5EZWZpbml0aW9uJyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnaWRlbnRpZmllcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygndHlwZUNvbGxlY3RlZCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgncGF0aWVudFByZXBhcmF0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCd0aW1lQXNwZWN0JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdjb2xsZWN0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCd0eXBlVGVzdGVkJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbiJdfQ==