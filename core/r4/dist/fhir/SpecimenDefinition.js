// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: SpecimenDefinition
import * as fhir from '../fhir.js';
// @ts-ignore
import { SpecimenContainedPreferenceVsValidation } from '../fhirValueSets/SpecimenContainedPreferenceVsValidation.js';
/**
 * Substance introduced in the kind of container to preserve, maintain or enhance the specimen. Examples: Formalin, Citrate, EDTA.
 */
export class SpecimenDefinitionTypeTestedContainerAdditive extends fhir.BackboneElement {
    /**
     * Default constructor for SpecimenDefinitionTypeTestedContainerAdditive - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['additive']) {
            this.additive = source.additive;
        }
        else if (source['additiveCodeableConcept']) {
            this.additive = new fhir.CodeableConcept(source.additiveCodeableConcept, options);
        }
        else if (source['additiveReference']) {
            this.additive = new fhir.Reference(source.additiveReference, options);
        }
        else {
            this.additive = null;
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SpecimenDefinition.typeTested.container.additive';
        }
        iss.push(...this.vRS('additive', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SpecimenDefinitionTypeTestedContainerAdditive._fts_dataType = 'SpecimenDefinitionTypeTestedContainerAdditive';
/**
 * Internal flag to properly serialize choice-type element SpecimenDefinition.typeTested.container.additive.additive[x]
 */
SpecimenDefinitionTypeTestedContainerAdditive._fts_additiveIsChoice = true;
/**
 * The specimen's container.
 */
export class SpecimenDefinitionTypeTestedContainer extends fhir.BackboneElement {
    /**
     * Default constructor for SpecimenDefinitionTypeTestedContainer - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['material']) {
            this.material = new fhir.CodeableConcept(source.material, options);
        }
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type, options);
        }
        if (source['cap']) {
            this.cap = new fhir.CodeableConcept(source.cap, options);
        }
        if (source['description'] !== undefined) {
            this.description = new fhir.FhirString({ value: source.description }, options);
        }
        if (source['_description']) {
            if (this.description) {
                this.description.addExtendedProperties(source._description);
            }
            else {
                this.description = new fhir.FhirString(source._description, options);
            }
        }
        if (source['capacity']) {
            this.capacity = new fhir.Quantity(source.capacity, options);
        }
        if (source['minimumVolume']) {
            this.minimumVolume = source.minimumVolume;
        }
        else if (source['minimumVolumeQuantity']) {
            this.minimumVolume = new fhir.Quantity(source.minimumVolumeQuantity, options);
        }
        else if (source['minimumVolumeString'] !== undefined) {
            this.minimumVolume = new fhir.FhirString({ value: source.minimumVolumeString }, options);
        }
        if (source['additive']) {
            this.additive = source.additive.map((x) => new fhir.SpecimenDefinitionTypeTestedContainerAdditive(x, options));
        }
        else {
            this.additive = [];
        }
        if (source['preparation'] !== undefined) {
            this.preparation = new fhir.FhirString({ value: source.preparation }, options);
        }
        if (source['_preparation']) {
            if (this.preparation) {
                this.preparation.addExtendedProperties(source._preparation);
            }
            else {
                this.preparation = new fhir.FhirString(source._preparation, options);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SpecimenDefinition.typeTested.container';
        }
        iss.push(...this.vOS('material', exp));
        iss.push(...this.vOS('type', exp));
        iss.push(...this.vOS('cap', exp));
        iss.push(...this.vOS('description', exp));
        iss.push(...this.vOS('capacity', exp));
        iss.push(...this.vOS('minimumVolume', exp));
        iss.push(...this.vOA('additive', exp));
        iss.push(...this.vOS('preparation', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SpecimenDefinitionTypeTestedContainer._fts_dataType = 'SpecimenDefinitionTypeTestedContainer';
/**
 * Internal flag to properly serialize choice-type element SpecimenDefinition.typeTested.container.minimumVolume[x]
 */
SpecimenDefinitionTypeTestedContainer._fts_minimumVolumeIsChoice = true;
/**
 * Set of instructions for preservation/transport of the specimen at a defined temperature interval, prior the testing process.
 */
export class SpecimenDefinitionTypeTestedHandling extends fhir.BackboneElement {
    /**
     * Default constructor for SpecimenDefinitionTypeTestedHandling - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['temperatureQualifier']) {
            this.temperatureQualifier = new fhir.CodeableConcept(source.temperatureQualifier, options);
        }
        if (source['temperatureRange']) {
            this.temperatureRange = new fhir.Range(source.temperatureRange, options);
        }
        if (source['maxDuration']) {
            this.maxDuration = new fhir.Duration(source.maxDuration, options);
        }
        if (source['instruction'] !== undefined) {
            this.instruction = new fhir.FhirString({ value: source.instruction }, options);
        }
        if (source['_instruction']) {
            if (this.instruction) {
                this.instruction.addExtendedProperties(source._instruction);
            }
            else {
                this.instruction = new fhir.FhirString(source._instruction, options);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SpecimenDefinition.typeTested.handling';
        }
        iss.push(...this.vOS('temperatureQualifier', exp));
        iss.push(...this.vOS('temperatureRange', exp));
        iss.push(...this.vOS('maxDuration', exp));
        iss.push(...this.vOS('instruction', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SpecimenDefinitionTypeTestedHandling._fts_dataType = 'SpecimenDefinitionTypeTestedHandling';
/**
 * Specimen conditioned in a container as expected by the testing laboratory.
 */
export class SpecimenDefinitionTypeTested extends fhir.BackboneElement {
    /**
     * Default constructor for SpecimenDefinitionTypeTested - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['isDerived'] !== undefined) {
            this.isDerived = new fhir.FhirBoolean({ value: source.isDerived }, options);
        }
        if (source['_isDerived']) {
            if (this.isDerived) {
                this.isDerived.addExtendedProperties(source._isDerived);
            }
            else {
                this.isDerived = new fhir.FhirBoolean(source._isDerived, options);
            }
        }
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type, options);
        }
        if (source['preference'] !== undefined) {
            this.preference = new fhir.FhirCode({ value: source.preference }, options);
        }
        else {
            this.preference = null;
        }
        if (source['_preference']) {
            if (this.preference) {
                this.preference.addExtendedProperties(source._preference);
            }
            else {
                this.preference = new fhir.FhirCode(source._preference, options);
            }
        }
        if (source['container']) {
            this.container = new fhir.SpecimenDefinitionTypeTestedContainer(source.container, options);
        }
        if (source['requirement'] !== undefined) {
            this.requirement = new fhir.FhirString({ value: source.requirement }, options);
        }
        if (source['_requirement']) {
            if (this.requirement) {
                this.requirement.addExtendedProperties(source._requirement);
            }
            else {
                this.requirement = new fhir.FhirString(source._requirement, options);
            }
        }
        if (source['retentionTime']) {
            this.retentionTime = new fhir.Duration(source.retentionTime, options);
        }
        if (source['rejectionCriterion']) {
            this.rejectionCriterion = source.rejectionCriterion.map((x) => new fhir.CodeableConcept(x, options));
        }
        else {
            this.rejectionCriterion = [];
        }
        if (source['handling']) {
            this.handling = source.handling.map((x) => new fhir.SpecimenDefinitionTypeTestedHandling(x, options));
        }
        else {
            this.handling = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SpecimenDefinition.typeTested';
        }
        iss.push(...this.vOS('isDerived', exp));
        iss.push(...this.vOS('type', exp));
        iss.push(...this.vRSV('preference', exp, 'SpecimenContainedPreference', SpecimenContainedPreferenceVsValidation, 'r'));
        iss.push(...this.vOS('container', exp));
        iss.push(...this.vOS('requirement', exp));
        iss.push(...this.vOS('retentionTime', exp));
        iss.push(...this.vOA('rejectionCriterion', exp));
        iss.push(...this.vOA('handling', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SpecimenDefinitionTypeTested._fts_dataType = 'SpecimenDefinitionTypeTested';
/**
 * A kind of specimen with associated set of requirements.
 */
export class SpecimenDefinition extends fhir.DomainResource {
    /**
     * Default constructor for SpecimenDefinition - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'SpecimenDefinition';
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier, options);
        }
        if (source['typeCollected']) {
            this.typeCollected = new fhir.CodeableConcept(source.typeCollected, options);
        }
        if (source['patientPreparation']) {
            this.patientPreparation = source.patientPreparation.map((x) => new fhir.CodeableConcept(x, options));
        }
        else {
            this.patientPreparation = [];
        }
        if (source['timeAspect'] !== undefined) {
            this.timeAspect = new fhir.FhirString({ value: source.timeAspect }, options);
        }
        if (source['_timeAspect']) {
            if (this.timeAspect) {
                this.timeAspect.addExtendedProperties(source._timeAspect);
            }
            else {
                this.timeAspect = new fhir.FhirString(source._timeAspect, options);
            }
        }
        if (source['collection']) {
            this.collection = source.collection.map((x) => new fhir.CodeableConcept(x, options));
        }
        else {
            this.collection = [];
        }
        if (source['typeTested']) {
            this.typeTested = source.typeTested.map((x) => new fhir.SpecimenDefinitionTypeTested(x, options));
        }
        else {
            this.typeTested = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SpecimenDefinition';
        }
        iss.push(...this.vOS('identifier', exp));
        iss.push(...this.vOS('typeCollected', exp));
        iss.push(...this.vOA('patientPreparation', exp));
        iss.push(...this.vOS('timeAspect', exp));
        iss.push(...this.vOA('collection', exp));
        iss.push(...this.vOA('typeTested', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SpecimenDefinition._fts_dataType = 'SpecimenDefinition';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3BlY2ltZW5EZWZpbml0aW9uLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9TcGVjaW1lbkRlZmluaXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsb0NBQW9DO0FBRXBDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBd0JuQyxhQUFhO0FBQ2IsT0FBTyxFQUFFLHVDQUF1QyxFQUFFLE1BQU0sNkRBQTZELENBQUM7QUErQnRIOztHQUVHO0FBQ0gsTUFBTSxPQUFPLDZDQUE4QyxTQUFRLElBQUksQ0FBQyxlQUFlO0lBYXJGOztPQUVHO0lBQ0gsWUFBWSxTQUFvRSxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUMxSCxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDO1NBQUU7YUFDdkQsSUFBSSxNQUFNLENBQUMseUJBQXlCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyx1QkFBdUIsRUFBRSxPQUFPLENBQUMsQ0FBQztTQUFFO2FBQzdILElBQUksTUFBTSxDQUFDLG1CQUFtQixDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsaUJBQWlCLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FBRTthQUMzRztZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1NBQUU7SUFDaEMsQ0FBQztJQUNEOztPQUVHO0lBQ2EsaUJBQWlCLENBQUMsTUFBYSxFQUFFO1FBQy9DLElBQUksR0FBRyxHQUFtQixLQUFLLENBQUMsaUJBQWlCLENB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QyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN4QyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN4QyxPQUFPLEdBQUcsQ0FBQztJQUNiLENBQUM7O0FBakVEOztHQUVHO0FBQzZCLGdDQUFhLEdBQVUsb0JBQW9CLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjQuY29yZSB2ZXJzaW9uOiA0LjAuMVxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IFNwZWNpbWVuRGVmaW5pdGlvblxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29udGFpbmVyTWF0ZXJpYWxDb2RlcywgIENvbnRhaW5lck1hdGVyaWFsQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbnRhaW5lck1hdGVyaWFsQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbnRhaW5lck1hdGVyaWFsVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db250YWluZXJNYXRlcmlhbFZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgU3BlY2ltZW5Db250YWluZXJUeXBlQ29kZXMsICBTcGVjaW1lbkNvbnRhaW5lclR5cGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvU3BlY2ltZW5Db250YWluZXJUeXBlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFNwZWNpbWVuQ29udGFpbmVyVHlwZVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvU3BlY2ltZW5Db250YWluZXJUeXBlVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDb250YWluZXJDYXBDb2RlcywgIENvbnRhaW5lckNhcENvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db250YWluZXJDYXBDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29udGFpbmVyQ2FwVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db250YWluZXJDYXBWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEhhbmRsaW5nQ29uZGl0aW9uQ29kZXMsICBIYW5kbGluZ0NvbmRpdGlvbkNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9IYW5kbGluZ0NvbmRpdGlvbkNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBIYW5kbGluZ0NvbmRpdGlvblZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvSGFuZGxpbmdDb25kaXRpb25Wc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFYyMDQ4N0NvZGVzLCAgVjIwNDg3Q29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1YyMDQ4N0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBWMjA0ODdWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1YyMDQ4N1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgU3BlY2ltZW5Db250YWluZWRQcmVmZXJlbmNlQ29kZXMsICBTcGVjaW1lbkNvbnRhaW5lZFByZWZlcmVuY2VDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvU3BlY2ltZW5Db250YWluZWRQcmVmZXJlbmNlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFNwZWNpbWVuQ29udGFpbmVkUHJlZmVyZW5jZVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvU3BlY2ltZW5Db250YWluZWRQcmVmZXJlbmNlVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBSZWplY3Rpb25Dcml0ZXJpYUNvZGVzLCAgUmVqZWN0aW9uQ3JpdGVyaWFDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUmVqZWN0aW9uQ3JpdGVyaWFDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUmVqZWN0aW9uQ3JpdGVyaWFWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1JlamVjdGlvbkNyaXRlcmlhVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBQcmVwYXJlUGF0aWVudFByaW9yU3BlY2ltZW5Db2xsZWN0aW9uQ29kZXMsICBQcmVwYXJlUGF0aWVudFByaW9yU3BlY2ltZW5Db2xsZWN0aW9uQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1ByZXBhcmVQYXRpZW50UHJpb3JTcGVjaW1lbkNvbGxlY3Rpb25Db2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUHJlcGFyZVBhdGllbnRQcmlvclNwZWNpbWVuQ29sbGVjdGlvblZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUHJlcGFyZVBhdGllbnRQcmlvclNwZWNpbWVuQ29sbGVjdGlvblZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgU3BlY2ltZW5Db2xsZWN0aW9uQ29kZXMsICBTcGVjaW1lbkNvbGxlY3Rpb25Db2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvU3BlY2ltZW5Db2xsZWN0aW9uQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFNwZWNpbWVuQ29sbGVjdGlvblZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvU3BlY2ltZW5Db2xsZWN0aW9uVnNWYWxpZGF0aW9uLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWRDb250YWluZXJBZGRpdGl2ZSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkQ29udGFpbmVyQWRkaXRpdmVBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBTdWJzdGFuY2UgaW50cm9kdWNlZCBpbiB0aGUga2luZCBvZiBjb250YWluZXIgdG8gcHJlc2VydmUsIG1haW50YWluIG9yIGVuaGFuY2UgdGhlIHNwZWNpbWVuLiBFeGFtcGxlczogRm9ybWFsaW4sIENpdHJhdGUsIEVEVEEuXHJcbiAgICovXHJcbiAgYWRkaXRpdmU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU3Vic3RhbmNlIGludHJvZHVjZWQgaW4gdGhlIGtpbmQgb2YgY29udGFpbmVyIHRvIHByZXNlcnZlLCBtYWludGFpbiBvciBlbmhhbmNlIHRoZSBzcGVjaW1lbi4gRXhhbXBsZXM6IEZvcm1hbGluLCBDaXRyYXRlLCBFRFRBLlxyXG4gICAqL1xyXG4gIGFkZGl0aXZlQ29kZWFibGVDb25jZXB0PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTdWJzdGFuY2UgaW50cm9kdWNlZCBpbiB0aGUga2luZCBvZiBjb250YWluZXIgdG8gcHJlc2VydmUsIG1haW50YWluIG9yIGVuaGFuY2UgdGhlIHNwZWNpbWVuLiBFeGFtcGxlczogRm9ybWFsaW4sIENpdHJhdGUsIEVEVEEuXHJcbiAgICovXHJcbiAgYWRkaXRpdmVSZWZlcmVuY2U/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogU3Vic3RhbmNlIGludHJvZHVjZWQgaW4gdGhlIGtpbmQgb2YgY29udGFpbmVyIHRvIHByZXNlcnZlLCBtYWludGFpbiBvciBlbmhhbmNlIHRoZSBzcGVjaW1lbi4gRXhhbXBsZXM6IEZvcm1hbGluLCBDaXRyYXRlLCBFRFRBLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWRDb250YWluZXJBZGRpdGl2ZSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1NwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWRDb250YWluZXJBZGRpdGl2ZSc7XHJcbiAgLyoqXHJcbiAgICogU3Vic3RhbmNlIGludHJvZHVjZWQgaW4gdGhlIGtpbmQgb2YgY29udGFpbmVyIHRvIHByZXNlcnZlLCBtYWludGFpbiBvciBlbmhhbmNlIHRoZSBzcGVjaW1lbi4gRXhhbXBsZXM6IEZvcm1hbGluLCBDaXRyYXRlLCBFRFRBLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhZGRpdGl2ZTogKGZoaXIuQ29kZWFibGVDb25jZXB0fGZoaXIuUmVmZXJlbmNlKXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgU3BlY2ltZW5EZWZpbml0aW9uLnR5cGVUZXN0ZWQuY29udGFpbmVyLmFkZGl0aXZlLmFkZGl0aXZlW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX2FkZGl0aXZlSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgU3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZENvbnRhaW5lckFkZGl0aXZlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8U3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZENvbnRhaW5lckFkZGl0aXZlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2FkZGl0aXZlJ10pIHsgdGhpcy5hZGRpdGl2ZSA9IHNvdXJjZS5hZGRpdGl2ZTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydhZGRpdGl2ZUNvZGVhYmxlQ29uY2VwdCddKSB7IHRoaXMuYWRkaXRpdmUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmFkZGl0aXZlQ29kZWFibGVDb25jZXB0LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydhZGRpdGl2ZVJlZmVyZW5jZSddKSB7IHRoaXMuYWRkaXRpdmUgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmFkZGl0aXZlUmVmZXJlbmNlLCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYWRkaXRpdmUgPSBudWxsOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnU3BlY2ltZW5EZWZpbml0aW9uLnR5cGVUZXN0ZWQuY29udGFpbmVyLmFkZGl0aXZlJyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygnYWRkaXRpdmUnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWRDb250YWluZXIgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZENvbnRhaW5lckFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0eXBlIG9mIG1hdGVyaWFsIG9mIHRoZSBjb250YWluZXIuXHJcbiAgICovXHJcbiAgbWF0ZXJpYWw/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0eXBlIG9mIGNvbnRhaW5lciB1c2VkIHRvIGNvbnRhaW4gdGhpcyBraW5kIG9mIHNwZWNpbWVuLlxyXG4gICAqL1xyXG4gIHR5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENvbG9yIG9mIGNvbnRhaW5lciBjYXAuXHJcbiAgICovXHJcbiAgY2FwPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdGV4dHVhbCBkZXNjcmlwdGlvbiBvZiB0aGUga2luZCBvZiBjb250YWluZXIuXHJcbiAgICovXHJcbiAgZGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3BlY2ltZW5EZWZpbml0aW9uLnR5cGVUZXN0ZWQuY29udGFpbmVyLmRlc2NyaXB0aW9uXHJcbiAgICovXHJcbiAgX2Rlc2NyaXB0aW9uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgY2FwYWNpdHkgKHZvbHVtZSBvciBvdGhlciBtZWFzdXJlKSBvZiB0aGlzIGtpbmQgb2YgY29udGFpbmVyLlxyXG4gICAqL1xyXG4gIGNhcGFjaXR5PzogZmhpci5RdWFudGl0eUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBtaW5pbXVtIHZvbHVtZSB0byBiZSBjb25kaXRpb25lZCBpbiB0aGUgY29udGFpbmVyLlxyXG4gICAqL1xyXG4gIG1pbmltdW1Wb2x1bWU/OiBmaGlyLlF1YW50aXR5fGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG1pbmltdW0gdm9sdW1lIHRvIGJlIGNvbmRpdGlvbmVkIGluIHRoZSBjb250YWluZXIuXHJcbiAgICovXHJcbiAgbWluaW11bVZvbHVtZVF1YW50aXR5PzogZmhpci5RdWFudGl0eUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBtaW5pbXVtIHZvbHVtZSB0byBiZSBjb25kaXRpb25lZCBpbiB0aGUgY29udGFpbmVyLlxyXG4gICAqL1xyXG4gIG1pbmltdW1Wb2x1bWVTdHJpbmc/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTdWJzdGFuY2UgaW50cm9kdWNlZCBpbiB0aGUga2luZCBvZiBjb250YWluZXIgdG8gcHJlc2VydmUsIG1haW50YWluIG9yIGVuaGFuY2UgdGhlIHNwZWNpbWVuLiBFeGFtcGxlczogRm9ybWFsaW4sIENpdHJhdGUsIEVEVEEuXHJcbiAgICovXHJcbiAgYWRkaXRpdmU/OiBmaGlyLlNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWRDb250YWluZXJBZGRpdGl2ZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU3BlY2lhbCBwcm9jZXNzaW5nIHRoYXQgc2hvdWxkIGJlIGFwcGxpZWQgdG8gdGhlIGNvbnRhaW5lciBmb3IgdGhpcyBraW5kIG9mIHNwZWNpbWVuLlxyXG4gICAqL1xyXG4gIHByZXBhcmF0aW9uPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFNwZWNpbWVuRGVmaW5pdGlvbi50eXBlVGVzdGVkLmNvbnRhaW5lci5wcmVwYXJhdGlvblxyXG4gICAqL1xyXG4gIF9wcmVwYXJhdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgc3BlY2ltZW4ncyBjb250YWluZXIuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZENvbnRhaW5lciBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1NwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWRDb250YWluZXInO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0eXBlIG9mIG1hdGVyaWFsIG9mIHRoZSBjb250YWluZXIuXHJcbiAgICovXHJcbiAgcHVibGljIG1hdGVyaWFsPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0eXBlIG9mIGNvbnRhaW5lciB1c2VkIHRvIGNvbnRhaW4gdGhpcyBraW5kIG9mIHNwZWNpbWVuLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0eXBlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENvbG9yIG9mIGNvbnRhaW5lciBjYXAuXHJcbiAgICovXHJcbiAgcHVibGljIGNhcD86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdGV4dHVhbCBkZXNjcmlwdGlvbiBvZiB0aGUga2luZCBvZiBjb250YWluZXIuXHJcbiAgICovXHJcbiAgcHVibGljIGRlc2NyaXB0aW9uPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgY2FwYWNpdHkgKHZvbHVtZSBvciBvdGhlciBtZWFzdXJlKSBvZiB0aGlzIGtpbmQgb2YgY29udGFpbmVyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjYXBhY2l0eT86IGZoaXIuUXVhbnRpdHl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBtaW5pbXVtIHZvbHVtZSB0byBiZSBjb25kaXRpb25lZCBpbiB0aGUgY29udGFpbmVyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtaW5pbXVtVm9sdW1lPzogKGZoaXIuUXVhbnRpdHl8Zmhpci5GaGlyU3RyaW5nKXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBTcGVjaW1lbkRlZmluaXRpb24udHlwZVRlc3RlZC5jb250YWluZXIubWluaW11bVZvbHVtZVt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c19taW5pbXVtVm9sdW1lSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogU3Vic3RhbmNlIGludHJvZHVjZWQgaW4gdGhlIGtpbmQgb2YgY29udGFpbmVyIHRvIHByZXNlcnZlLCBtYWludGFpbiBvciBlbmhhbmNlIHRoZSBzcGVjaW1lbi4gRXhhbXBsZXM6IEZvcm1hbGluLCBDaXRyYXRlLCBFRFRBLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhZGRpdGl2ZTogZmhpci5TcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkQ29udGFpbmVyQWRkaXRpdmVbXTtcclxuICAvKipcclxuICAgKiBTcGVjaWFsIHByb2Nlc3NpbmcgdGhhdCBzaG91bGQgYmUgYXBwbGllZCB0byB0aGUgY29udGFpbmVyIGZvciB0aGlzIGtpbmQgb2Ygc3BlY2ltZW4uXHJcbiAgICovXHJcbiAgcHVibGljIHByZXBhcmF0aW9uPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBTcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkQ29udGFpbmVyIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8U3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZENvbnRhaW5lckFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydtYXRlcmlhbCddKSB7IHRoaXMubWF0ZXJpYWwgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLm1hdGVyaWFsLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndHlwZSddKSB7IHRoaXMudHlwZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UudHlwZSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NhcCddKSB7IHRoaXMuY2FwID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jYXAsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydkZXNjcmlwdGlvbiddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5kZXNjcmlwdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuZGVzY3JpcHRpb259LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2Rlc2NyaXB0aW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZGVzY3JpcHRpb24pIHsgdGhpcy5kZXNjcmlwdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9kZXNjcmlwdGlvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRlc2NyaXB0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2Rlc2NyaXB0aW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydjYXBhY2l0eSddKSB7IHRoaXMuY2FwYWNpdHkgPSBuZXcgZmhpci5RdWFudGl0eShzb3VyY2UuY2FwYWNpdHksIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydtaW5pbXVtVm9sdW1lJ10pIHsgdGhpcy5taW5pbXVtVm9sdW1lID0gc291cmNlLm1pbmltdW1Wb2x1bWU7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnbWluaW11bVZvbHVtZVF1YW50aXR5J10pIHsgdGhpcy5taW5pbXVtVm9sdW1lID0gbmV3IGZoaXIuUXVhbnRpdHkoc291cmNlLm1pbmltdW1Wb2x1bWVRdWFudGl0eSwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnbWluaW11bVZvbHVtZVN0cmluZyddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5taW5pbXVtVm9sdW1lID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5taW5pbXVtVm9sdW1lU3RyaW5nfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2FkZGl0aXZlJ10pIHsgdGhpcy5hZGRpdGl2ZSA9IHNvdXJjZS5hZGRpdGl2ZS5tYXAoKHgpID0+IG5ldyBmaGlyLlNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWRDb250YWluZXJBZGRpdGl2ZSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmFkZGl0aXZlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3ByZXBhcmF0aW9uJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnByZXBhcmF0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5wcmVwYXJhdGlvbn0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfcHJlcGFyYXRpb24nXSkge1xyXG4gICAgICBpZiAodGhpcy5wcmVwYXJhdGlvbikgeyB0aGlzLnByZXBhcmF0aW9uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3ByZXBhcmF0aW9uISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMucHJlcGFyYXRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fcHJlcGFyYXRpb24gYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdTcGVjaW1lbkRlZmluaXRpb24udHlwZVRlc3RlZC5jb250YWluZXInIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdtYXRlcmlhbCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygndHlwZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnY2FwJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdkZXNjcmlwdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnY2FwYWNpdHknLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ21pbmltdW1Wb2x1bWUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2FkZGl0aXZlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdwcmVwYXJhdGlvbicsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgU3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZEhhbmRsaW5nIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWRIYW5kbGluZ0FyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEl0IHF1YWxpZmllcyB0aGUgaW50ZXJ2YWwgb2YgdGVtcGVyYXR1cmUsIHdoaWNoIGNoYXJhY3Rlcml6ZXMgYW4gb2NjdXJyZW5jZSBvZiBoYW5kbGluZy4gQ29uZGl0aW9ucyB0aGF0IGFyZSBub3QgcmVsYXRlZCB0byB0ZW1wZXJhdHVyZSBtYXkgYmUgaGFuZGxlZCBpbiB0aGUgaW5zdHJ1Y3Rpb24gZWxlbWVudC5cclxuICAgKi9cclxuICB0ZW1wZXJhdHVyZVF1YWxpZmllcj86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRlbXBlcmF0dXJlIGludGVydmFsIGZvciB0aGlzIHNldCBvZiBoYW5kbGluZyBpbnN0cnVjdGlvbnMuXHJcbiAgICovXHJcbiAgdGVtcGVyYXR1cmVSYW5nZT86IGZoaXIuUmFuZ2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbWF4aW11bSB0aW1lIGludGVydmFsIG9mIHByZXNlcnZhdGlvbiBvZiB0aGUgc3BlY2ltZW4gd2l0aCB0aGVzZSBjb25kaXRpb25zLlxyXG4gICAqL1xyXG4gIG1heER1cmF0aW9uPzogZmhpci5EdXJhdGlvbkFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFkZGl0aW9uYWwgdGV4dHVhbCBpbnN0cnVjdGlvbnMgZm9yIHRoZSBwcmVzZXJ2YXRpb24gb3IgdHJhbnNwb3J0IG9mIHRoZSBzcGVjaW1lbi4gRm9yIGluc3RhbmNlLCAnUHJvdGVjdCBmcm9tIGxpZ2h0IGV4cG9zdXJlJy5cclxuICAgKi9cclxuICBpbnN0cnVjdGlvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTcGVjaW1lbkRlZmluaXRpb24udHlwZVRlc3RlZC5oYW5kbGluZy5pbnN0cnVjdGlvblxyXG4gICAqL1xyXG4gIF9pbnN0cnVjdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgb2YgaW5zdHJ1Y3Rpb25zIGZvciBwcmVzZXJ2YXRpb24vdHJhbnNwb3J0IG9mIHRoZSBzcGVjaW1lbiBhdCBhIGRlZmluZWQgdGVtcGVyYXR1cmUgaW50ZXJ2YWwsIHByaW9yIHRoZSB0ZXN0aW5nIHByb2Nlc3MuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZEhhbmRsaW5nIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnU3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZEhhbmRsaW5nJztcclxuICAvKipcclxuICAgKiBJdCBxdWFsaWZpZXMgdGhlIGludGVydmFsIG9mIHRlbXBlcmF0dXJlLCB3aGljaCBjaGFyYWN0ZXJpemVzIGFuIG9jY3VycmVuY2Ugb2YgaGFuZGxpbmcuIENvbmRpdGlvbnMgdGhhdCBhcmUgbm90IHJlbGF0ZWQgdG8gdGVtcGVyYXR1cmUgbWF5IGJlIGhhbmRsZWQgaW4gdGhlIGluc3RydWN0aW9uIGVsZW1lbnQuXHJcbiAgICovXHJcbiAgcHVibGljIHRlbXBlcmF0dXJlUXVhbGlmaWVyPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0ZW1wZXJhdHVyZSBpbnRlcnZhbCBmb3IgdGhpcyBzZXQgb2YgaGFuZGxpbmcgaW5zdHJ1Y3Rpb25zLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0ZW1wZXJhdHVyZVJhbmdlPzogZmhpci5SYW5nZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG1heGltdW0gdGltZSBpbnRlcnZhbCBvZiBwcmVzZXJ2YXRpb24gb2YgdGhlIHNwZWNpbWVuIHdpdGggdGhlc2UgY29uZGl0aW9ucy5cclxuICAgKi9cclxuICBwdWJsaWMgbWF4RHVyYXRpb24/OiBmaGlyLkR1cmF0aW9ufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBZGRpdGlvbmFsIHRleHR1YWwgaW5zdHJ1Y3Rpb25zIGZvciB0aGUgcHJlc2VydmF0aW9uIG9yIHRyYW5zcG9ydCBvZiB0aGUgc3BlY2ltZW4uIEZvciBpbnN0YW5jZSwgJ1Byb3RlY3QgZnJvbSBsaWdodCBleHBvc3VyZScuXHJcbiAgICovXHJcbiAgcHVibGljIGluc3RydWN0aW9uPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBTcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkSGFuZGxpbmcgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxTcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkSGFuZGxpbmdBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsndGVtcGVyYXR1cmVRdWFsaWZpZXInXSkgeyB0aGlzLnRlbXBlcmF0dXJlUXVhbGlmaWVyID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS50ZW1wZXJhdHVyZVF1YWxpZmllciwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3RlbXBlcmF0dXJlUmFuZ2UnXSkgeyB0aGlzLnRlbXBlcmF0dXJlUmFuZ2UgPSBuZXcgZmhpci5SYW5nZShzb3VyY2UudGVtcGVyYXR1cmVSYW5nZSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ21heER1cmF0aW9uJ10pIHsgdGhpcy5tYXhEdXJhdGlvbiA9IG5ldyBmaGlyLkR1cmF0aW9uKHNvdXJjZS5tYXhEdXJhdGlvbiwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2luc3RydWN0aW9uJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLmluc3RydWN0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5pbnN0cnVjdGlvbn0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfaW5zdHJ1Y3Rpb24nXSkge1xyXG4gICAgICBpZiAodGhpcy5pbnN0cnVjdGlvbikgeyB0aGlzLmluc3RydWN0aW9uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2luc3RydWN0aW9uISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuaW5zdHJ1Y3Rpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5faW5zdHJ1Y3Rpb24gYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdTcGVjaW1lbkRlZmluaXRpb24udHlwZVRlc3RlZC5oYW5kbGluZycgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3RlbXBlcmF0dXJlUXVhbGlmaWVyJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCd0ZW1wZXJhdHVyZVJhbmdlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdtYXhEdXJhdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnaW5zdHJ1Y3Rpb24nLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFByaW1hcnkgb2Ygc2Vjb25kYXJ5IHNwZWNpbWVuLlxyXG4gICAqL1xyXG4gIGlzRGVyaXZlZD86IGZoaXIuRmhpckJvb2xlYW58Ym9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFNwZWNpbWVuRGVmaW5pdGlvbi50eXBlVGVzdGVkLmlzRGVyaXZlZFxyXG4gICAqL1xyXG4gIF9pc0Rlcml2ZWQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBraW5kIG9mIHNwZWNpbWVuIGNvbmRpdGlvbmVkIGZvciB0ZXN0aW5nIGV4cGVjdGVkIGJ5IGxhYi5cclxuICAgKi9cclxuICB0eXBlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcHJlZmVyZW5jZSBmb3IgdGhpcyB0eXBlIG9mIGNvbmRpdGlvbmVkIHNwZWNpbWVuLlxyXG4gICAqL1xyXG4gIHByZWZlcmVuY2U6IGZoaXIuRmhpckNvZGU8U3BlY2ltZW5Db250YWluZWRQcmVmZXJlbmNlQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFNwZWNpbWVuRGVmaW5pdGlvbi50eXBlVGVzdGVkLnByZWZlcmVuY2VcclxuICAgKi9cclxuICBfcHJlZmVyZW5jZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNwZWNpbWVuJ3MgY29udGFpbmVyLlxyXG4gICAqL1xyXG4gIGNvbnRhaW5lcj86IGZoaXIuU3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZENvbnRhaW5lckFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFJlcXVpcmVtZW50cyBmb3IgZGVsaXZlcnkgYW5kIHNwZWNpYWwgaGFuZGxpbmcgb2YgdGhpcyBraW5kIG9mIGNvbmRpdGlvbmVkIHNwZWNpbWVuLlxyXG4gICAqL1xyXG4gIHJlcXVpcmVtZW50PzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFNwZWNpbWVuRGVmaW5pdGlvbi50eXBlVGVzdGVkLnJlcXVpcmVtZW50XHJcbiAgICovXHJcbiAgX3JlcXVpcmVtZW50PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgdXN1YWwgdGltZSB0aGF0IGEgc3BlY2ltZW4gb2YgdGhpcyBraW5kIGlzIHJldGFpbmVkIGFmdGVyIHRoZSBvcmRlcmVkIHRlc3RzIGFyZSBjb21wbGV0ZWQsIGZvciB0aGUgcHVycG9zZSBvZiBhZGRpdGlvbmFsIHRlc3RpbmcuXHJcbiAgICovXHJcbiAgcmV0ZW50aW9uVGltZT86IGZoaXIuRHVyYXRpb25BcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDcml0ZXJpb24gZm9yIHJlamVjdGlvbiBvZiB0aGUgc3BlY2ltZW4gaW4gaXRzIGNvbnRhaW5lciBieSB0aGUgbGFib3JhdG9yeS5cclxuICAgKi9cclxuICByZWplY3Rpb25Dcml0ZXJpb24/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU2V0IG9mIGluc3RydWN0aW9ucyBmb3IgcHJlc2VydmF0aW9uL3RyYW5zcG9ydCBvZiB0aGUgc3BlY2ltZW4gYXQgYSBkZWZpbmVkIHRlbXBlcmF0dXJlIGludGVydmFsLCBwcmlvciB0aGUgdGVzdGluZyBwcm9jZXNzLlxyXG4gICAqL1xyXG4gIGhhbmRsaW5nPzogZmhpci5TcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkSGFuZGxpbmdBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogU3BlY2ltZW4gY29uZGl0aW9uZWQgaW4gYSBjb250YWluZXIgYXMgZXhwZWN0ZWQgYnkgdGhlIHRlc3RpbmcgbGFib3JhdG9yeS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnU3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZCc7XHJcbiAgLyoqXHJcbiAgICogUHJpbWFyeSBvZiBzZWNvbmRhcnkgc3BlY2ltZW4uXHJcbiAgICovXHJcbiAgcHVibGljIGlzRGVyaXZlZD86IGZoaXIuRmhpckJvb2xlYW58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBraW5kIG9mIHNwZWNpbWVuIGNvbmRpdGlvbmVkIGZvciB0ZXN0aW5nIGV4cGVjdGVkIGJ5IGxhYi5cclxuICAgKi9cclxuICBwdWJsaWMgdHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcHJlZmVyZW5jZSBmb3IgdGhpcyB0eXBlIG9mIGNvbmRpdGlvbmVkIHNwZWNpbWVuLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcmVmZXJlbmNlOiBmaGlyLkZoaXJDb2RlPFNwZWNpbWVuQ29udGFpbmVkUHJlZmVyZW5jZUNvZGVUeXBlPnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzcGVjaW1lbidzIGNvbnRhaW5lci5cclxuICAgKi9cclxuICBwdWJsaWMgY29udGFpbmVyPzogZmhpci5TcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkQ29udGFpbmVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBSZXF1aXJlbWVudHMgZm9yIGRlbGl2ZXJ5IGFuZCBzcGVjaWFsIGhhbmRsaW5nIG9mIHRoaXMga2luZCBvZiBjb25kaXRpb25lZCBzcGVjaW1lbi5cclxuICAgKi9cclxuICBwdWJsaWMgcmVxdWlyZW1lbnQ/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB1c3VhbCB0aW1lIHRoYXQgYSBzcGVjaW1lbiBvZiB0aGlzIGtpbmQgaXMgcmV0YWluZWQgYWZ0ZXIgdGhlIG9yZGVyZWQgdGVzdHMgYXJlIGNvbXBsZXRlZCwgZm9yIHRoZSBwdXJwb3NlIG9mIGFkZGl0aW9uYWwgdGVzdGluZy5cclxuICAgKi9cclxuICBwdWJsaWMgcmV0ZW50aW9uVGltZT86IGZoaXIuRHVyYXRpb258dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENyaXRlcmlvbiBmb3IgcmVqZWN0aW9uIG9mIHRoZSBzcGVjaW1lbiBpbiBpdHMgY29udGFpbmVyIGJ5IHRoZSBsYWJvcmF0b3J5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWplY3Rpb25Dcml0ZXJpb246IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogU2V0IG9mIGluc3RydWN0aW9ucyBmb3IgcHJlc2VydmF0aW9uL3RyYW5zcG9ydCBvZiB0aGUgc3BlY2ltZW4gYXQgYSBkZWZpbmVkIHRlbXBlcmF0dXJlIGludGVydmFsLCBwcmlvciB0aGUgdGVzdGluZyBwcm9jZXNzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBoYW5kbGluZzogZmhpci5TcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkSGFuZGxpbmdbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBTcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8U3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydpc0Rlcml2ZWQnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuaXNEZXJpdmVkID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oe3ZhbHVlOiBzb3VyY2UuaXNEZXJpdmVkfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19pc0Rlcml2ZWQnXSkge1xyXG4gICAgICBpZiAodGhpcy5pc0Rlcml2ZWQpIHsgdGhpcy5pc0Rlcml2ZWQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5faXNEZXJpdmVkISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuaXNEZXJpdmVkID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oc291cmNlLl9pc0Rlcml2ZWQgYXMgUGFydGlhbDxmaGlyLkZoaXJCb29sZWFuQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd0eXBlJ10pIHsgdGhpcy50eXBlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS50eXBlLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJlZmVyZW5jZSddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5wcmVmZXJlbmNlID0gbmV3IGZoaXIuRmhpckNvZGU8U3BlY2ltZW5Db250YWluZWRQcmVmZXJlbmNlQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnByZWZlcmVuY2V9LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucHJlZmVyZW5jZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19wcmVmZXJlbmNlJ10pIHtcclxuICAgICAgaWYgKHRoaXMucHJlZmVyZW5jZSkgeyB0aGlzLnByZWZlcmVuY2UuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fcHJlZmVyZW5jZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnByZWZlcmVuY2UgPSBuZXcgZmhpci5GaGlyQ29kZTxTcGVjaW1lbkNvbnRhaW5lZFByZWZlcmVuY2VDb2RlVHlwZT4oc291cmNlLl9wcmVmZXJlbmNlIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydjb250YWluZXInXSkgeyB0aGlzLmNvbnRhaW5lciA9IG5ldyBmaGlyLlNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWRDb250YWluZXIoc291cmNlLmNvbnRhaW5lciwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3JlcXVpcmVtZW50J10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnJlcXVpcmVtZW50ID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5yZXF1aXJlbWVudH0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfcmVxdWlyZW1lbnQnXSkge1xyXG4gICAgICBpZiAodGhpcy5yZXF1aXJlbWVudCkgeyB0aGlzLnJlcXVpcmVtZW50LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3JlcXVpcmVtZW50ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMucmVxdWlyZW1lbnQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fcmVxdWlyZW1lbnQgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3JldGVudGlvblRpbWUnXSkgeyB0aGlzLnJldGVudGlvblRpbWUgPSBuZXcgZmhpci5EdXJhdGlvbihzb3VyY2UucmV0ZW50aW9uVGltZSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3JlamVjdGlvbkNyaXRlcmlvbiddKSB7IHRoaXMucmVqZWN0aW9uQ3JpdGVyaW9uID0gc291cmNlLnJlamVjdGlvbkNyaXRlcmlvbi5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnJlamVjdGlvbkNyaXRlcmlvbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydoYW5kbGluZyddKSB7IHRoaXMuaGFuZGxpbmcgPSBzb3VyY2UuaGFuZGxpbmcubWFwKCh4KSA9PiBuZXcgZmhpci5TcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkSGFuZGxpbmcoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5oYW5kbGluZyA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnU3BlY2ltZW5EZWZpbml0aW9uLnR5cGVUZXN0ZWQnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdpc0Rlcml2ZWQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3R5cGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlNWKCdwcmVmZXJlbmNlJyxleHAsJ1NwZWNpbWVuQ29udGFpbmVkUHJlZmVyZW5jZScsU3BlY2ltZW5Db250YWluZWRQcmVmZXJlbmNlVnNWYWxpZGF0aW9uLCdyJykpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2NvbnRhaW5lcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygncmVxdWlyZW1lbnQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3JldGVudGlvblRpbWUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3JlamVjdGlvbkNyaXRlcmlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnaGFuZGxpbmcnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFNwZWNpbWVuRGVmaW5pdGlvbiB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTcGVjaW1lbkRlZmluaXRpb25BcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJTcGVjaW1lbkRlZmluaXRpb25cInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBidXNpbmVzcyBpZGVudGlmaWVyIGFzc29jaWF0ZWQgd2l0aCB0aGUga2luZCBvZiBzcGVjaW1lbi5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGtpbmQgb2YgbWF0ZXJpYWwgdG8gYmUgY29sbGVjdGVkLlxyXG4gICAqL1xyXG4gIHR5cGVDb2xsZWN0ZWQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFByZXBhcmF0aW9uIG9mIHRoZSBwYXRpZW50IGZvciBzcGVjaW1lbiBjb2xsZWN0aW9uLlxyXG4gICAqL1xyXG4gIHBhdGllbnRQcmVwYXJhdGlvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaW1lIGFzcGVjdCBvZiBzcGVjaW1lbiBjb2xsZWN0aW9uIChkdXJhdGlvbiBvciBvZmZzZXQpLlxyXG4gICAqL1xyXG4gIHRpbWVBc3BlY3Q/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3BlY2ltZW5EZWZpbml0aW9uLnRpbWVBc3BlY3RcclxuICAgKi9cclxuICBfdGltZUFzcGVjdD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGFjdGlvbiB0byBiZSBwZXJmb3JtZWQgZm9yIGNvbGxlY3RpbmcgdGhlIHNwZWNpbWVuLlxyXG4gICAqL1xyXG4gIGNvbGxlY3Rpb24/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU3BlY2ltZW4gY29uZGl0aW9uZWQgaW4gYSBjb250YWluZXIgYXMgZXhwZWN0ZWQgYnkgdGhlIHRlc3RpbmcgbGFib3JhdG9yeS5cclxuICAgKi9cclxuICB0eXBlVGVzdGVkPzogZmhpci5TcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEga2luZCBvZiBzcGVjaW1lbiB3aXRoIGFzc29jaWF0ZWQgc2V0IG9mIHJlcXVpcmVtZW50cy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTcGVjaW1lbkRlZmluaXRpb24gZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1NwZWNpbWVuRGVmaW5pdGlvbic7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJTcGVjaW1lbkRlZmluaXRpb25cIjtcclxuICAvKipcclxuICAgKiBBIGJ1c2luZXNzIGlkZW50aWZpZXIgYXNzb2NpYXRlZCB3aXRoIHRoZSBraW5kIG9mIHNwZWNpbWVuLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUga2luZCBvZiBtYXRlcmlhbCB0byBiZSBjb2xsZWN0ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHR5cGVDb2xsZWN0ZWQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUHJlcGFyYXRpb24gb2YgdGhlIHBhdGllbnQgZm9yIHNwZWNpbWVuIGNvbGxlY3Rpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHBhdGllbnRQcmVwYXJhdGlvbjogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBUaW1lIGFzcGVjdCBvZiBzcGVjaW1lbiBjb2xsZWN0aW9uIChkdXJhdGlvbiBvciBvZmZzZXQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0aW1lQXNwZWN0PzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgYWN0aW9uIHRvIGJlIHBlcmZvcm1lZCBmb3IgY29sbGVjdGluZyB0aGUgc3BlY2ltZW4uXHJcbiAgICovXHJcbiAgcHVibGljIGNvbGxlY3Rpb246IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogU3BlY2ltZW4gY29uZGl0aW9uZWQgaW4gYSBjb250YWluZXIgYXMgZXhwZWN0ZWQgYnkgdGhlIHRlc3RpbmcgbGFib3JhdG9yeS5cclxuICAgKi9cclxuICBwdWJsaWMgdHlwZVRlc3RlZDogZmhpci5TcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgU3BlY2ltZW5EZWZpbml0aW9uIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8U3BlY2ltZW5EZWZpbml0aW9uQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ1NwZWNpbWVuRGVmaW5pdGlvbic7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gbmV3IGZoaXIuSWRlbnRpZmllcihzb3VyY2UuaWRlbnRpZmllciwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3R5cGVDb2xsZWN0ZWQnXSkgeyB0aGlzLnR5cGVDb2xsZWN0ZWQgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnR5cGVDb2xsZWN0ZWQsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydwYXRpZW50UHJlcGFyYXRpb24nXSkgeyB0aGlzLnBhdGllbnRQcmVwYXJhdGlvbiA9IHNvdXJjZS5wYXRpZW50UHJlcGFyYXRpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wYXRpZW50UHJlcGFyYXRpb24gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndGltZUFzcGVjdCddICE9PSB1bmRlZmluZWQpIHsgdGhpcy50aW1lQXNwZWN0ID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS50aW1lQXNwZWN0fSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ190aW1lQXNwZWN0J10pIHtcclxuICAgICAgaWYgKHRoaXMudGltZUFzcGVjdCkgeyB0aGlzLnRpbWVBc3BlY3QuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdGltZUFzcGVjdCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnRpbWVBc3BlY3QgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fdGltZUFzcGVjdCBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29sbGVjdGlvbiddKSB7IHRoaXMuY29sbGVjdGlvbiA9IHNvdXJjZS5jb2xsZWN0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY29sbGVjdGlvbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWyd0eXBlVGVzdGVkJ10pIHsgdGhpcy50eXBlVGVzdGVkID0gc291cmNlLnR5cGVUZXN0ZWQubWFwKCh4KSA9PiBuZXcgZmhpci5TcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudHlwZVRlc3RlZCA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnU3BlY2ltZW5EZWZpbml0aW9uJyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnaWRlbnRpZmllcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygndHlwZUNvbGxlY3RlZCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgncGF0aWVudFByZXBhcmF0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCd0aW1lQXNwZWN0JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdjb2xsZWN0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCd0eXBlVGVzdGVkJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbiJdfQ==