// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: CoverageEligibilityRequest
import * as fhir from '../fhir.js';
// @ts-ignore
import { FmStatusCodings, } from '../fhirValueSets/FmStatusCodings.js';
// @ts-ignore
import { EligibilityrequestPurposeCodings, } from '../fhirValueSets/EligibilityrequestPurposeCodings.js';
/**
 * Often there are multiple jurisdiction specific valuesets which are required.
 */
export class CoverageEligibilityRequestSupportingInfo extends fhir.BackboneElement {
    /**
     * Default constructor for CoverageEligibilityRequestSupportingInfo - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['sequence']) {
            this.sequence = new fhir.FhirPositiveInt({ value: source.sequence });
        }
        else {
            this.sequence = null;
        }
        if (source['information']) {
            this.information = new fhir.Reference(source.information);
        }
        else {
            this.information = null;
        }
        if (source['appliesToAll']) {
            this.appliesToAll = new fhir.FhirBoolean({ value: source.appliesToAll });
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['sequence']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property sequence:fhir.FhirPositiveInt fhir: CoverageEligibilityRequest.supportingInfo.sequence:positiveInt', });
        }
        if (this["sequence"]) {
            issues.push(...this.sequence.doModelValidation());
        }
        if (!this['information']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property information:fhir.Reference fhir: CoverageEligibilityRequest.supportingInfo.information:Reference', });
        }
        if (this["information"]) {
            issues.push(...this.information.doModelValidation());
        }
        if (this["appliesToAll"]) {
            issues.push(...this.appliesToAll.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
CoverageEligibilityRequestSupportingInfo._fts_dataType = 'CoverageEligibilityRequestSupportingInfo';
/**
 * All insurance coverages for the patient which may be applicable for reimbursement, of the products and services listed in the claim, are typically provided in the claim to allow insurers to confirm the ordering of the insurance coverages relative to local 'coordination of benefit' rules. One coverage (and only one) with 'focal=true' is to be used in the adjudication of this claim. Coverages appearing before the focal Coverage in the list, and where 'subrogation=false', should provide a reference to the ClaimResponse containing the adjudication results of the prior claim.
 */
export class CoverageEligibilityRequestInsurance extends fhir.BackboneElement {
    /**
     * Default constructor for CoverageEligibilityRequestInsurance - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['focal']) {
            this.focal = new fhir.FhirBoolean({ value: source.focal });
        }
        if (source['coverage']) {
            this.coverage = new fhir.Reference(source.coverage);
        }
        else {
            this.coverage = null;
        }
        if (source['businessArrangement']) {
            this.businessArrangement = new fhir.FhirString({ value: source.businessArrangement });
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["focal"]) {
            issues.push(...this.focal.doModelValidation());
        }
        if (!this['coverage']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property coverage:fhir.Reference fhir: CoverageEligibilityRequest.insurance.coverage:Reference', });
        }
        if (this["coverage"]) {
            issues.push(...this.coverage.doModelValidation());
        }
        if (this["businessArrangement"]) {
            issues.push(...this.businessArrangement.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
CoverageEligibilityRequestInsurance._fts_dataType = 'CoverageEligibilityRequestInsurance';
/**
 * Patient diagnosis for which care is sought.
 */
export class CoverageEligibilityRequestItemDiagnosis extends fhir.BackboneElement {
    /**
     * Default constructor for CoverageEligibilityRequestItemDiagnosis - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['diagnosis']) {
            this.diagnosis = source.diagnosis;
        }
        else if (source['diagnosisCodeableConcept']) {
            this.diagnosis = new fhir.CodeableConcept(source.diagnosisCodeableConcept);
        }
        else if (source['diagnosisReference']) {
            this.diagnosis = new fhir.Reference(source.diagnosisReference);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
CoverageEligibilityRequestItemDiagnosis._fts_dataType = 'CoverageEligibilityRequestItemDiagnosis';
/**
 * Internal flag to properly serialize choice-type element CoverageEligibilityRequest.item.diagnosis.diagnosis[x]
 */
CoverageEligibilityRequestItemDiagnosis._fts_diagnosisIsChoice = true;
/**
 * Service categories or billable services for which benefit details and/or an authorization prior to service delivery may be required by the payor.
 */
export class CoverageEligibilityRequestItem extends fhir.BackboneElement {
    /**
     * Default constructor for CoverageEligibilityRequestItem - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['supportingInfoSequence']) {
            this.supportingInfoSequence = source.supportingInfoSequence.map((x) => new fhir.FhirPositiveInt({ value: x }));
        }
        else {
            this.supportingInfoSequence = [];
        }
        if (source['category']) {
            this.category = new fhir.CodeableConcept(source.category);
        }
        if (source['productOrService']) {
            this.productOrService = new fhir.CodeableConcept(source.productOrService);
        }
        if (source['modifier']) {
            this.modifier = source.modifier.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.modifier = [];
        }
        if (source['provider']) {
            this.provider = new fhir.Reference(source.provider);
        }
        if (source['quantity']) {
            this.quantity = new fhir.Quantity(source.quantity);
        }
        if (source['unitPrice']) {
            this.unitPrice = new fhir.Money(source.unitPrice);
        }
        if (source['facility']) {
            this.facility = new fhir.Reference(source.facility);
        }
        if (source['diagnosis']) {
            this.diagnosis = source.diagnosis.map((x) => new fhir.CoverageEligibilityRequestItemDiagnosis(x));
        }
        else {
            this.diagnosis = [];
        }
        if (source['detail']) {
            this.detail = source.detail.map((x) => new fhir.Reference(x));
        }
        else {
            this.detail = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["supportingInfoSequence"]) {
            this.supportingInfoSequence.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["category"]) {
            issues.push(...this.category.doModelValidation());
        }
        if (this["productOrService"]) {
            issues.push(...this.productOrService.doModelValidation());
        }
        if (this["modifier"]) {
            this.modifier.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["provider"]) {
            issues.push(...this.provider.doModelValidation());
        }
        if (this["quantity"]) {
            issues.push(...this.quantity.doModelValidation());
        }
        if (this["unitPrice"]) {
            issues.push(...this.unitPrice.doModelValidation());
        }
        if (this["facility"]) {
            issues.push(...this.facility.doModelValidation());
        }
        if (this["diagnosis"]) {
            this.diagnosis.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["detail"]) {
            this.detail.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
CoverageEligibilityRequestItem._fts_dataType = 'CoverageEligibilityRequestItem';
/**
 * The CoverageEligibilityRequest provides patient and insurance coverage information to an insurer for them to respond, in the form of an CoverageEligibilityResponse, with information regarding whether the stated coverage is valid and in-force and optionally to provide the insurance details of the policy.
 */
export class CoverageEligibilityRequest extends fhir.DomainResource {
    /**
     * Default constructor for CoverageEligibilityRequest - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'CoverageEligibilityRequest';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['status']) {
            this.status = source.status;
        }
        else {
            this.status = null;
        }
        if (source['priority']) {
            this.priority = new fhir.CodeableConcept(source.priority);
        }
        if (source['purpose']) {
            this.purpose = source.purpose.map((x) => x);
        }
        else {
            this.purpose = [];
        }
        if (source['patient']) {
            this.patient = new fhir.Reference(source.patient);
        }
        else {
            this.patient = null;
        }
        if (source['serviced']) {
            this.serviced = source.serviced;
        }
        else if (source['servicedDate']) {
            this.serviced = new fhir.FhirDate({ value: source.servicedDate });
        }
        else if (source['servicedPeriod']) {
            this.serviced = new fhir.Period(source.servicedPeriod);
        }
        if (source['created']) {
            this.created = new fhir.FhirDateTime({ value: source.created });
        }
        else {
            this.created = null;
        }
        if (source['enterer']) {
            this.enterer = new fhir.Reference(source.enterer);
        }
        if (source['provider']) {
            this.provider = new fhir.Reference(source.provider);
        }
        if (source['insurer']) {
            this.insurer = new fhir.Reference(source.insurer);
        }
        else {
            this.insurer = null;
        }
        if (source['facility']) {
            this.facility = new fhir.Reference(source.facility);
        }
        if (source['supportingInfo']) {
            this.supportingInfo = source.supportingInfo.map((x) => new fhir.CoverageEligibilityRequestSupportingInfo(x));
        }
        else {
            this.supportingInfo = [];
        }
        if (source['insurance']) {
            this.insurance = source.insurance.map((x) => new fhir.CoverageEligibilityRequestInsurance(x));
        }
        else {
            this.insurance = [];
        }
        if (source['item']) {
            this.item = source.item.map((x) => new fhir.CoverageEligibilityRequestItem(x));
        }
        else {
            this.item = [];
        }
    }
    /**
     * Required-bound Value Set for status (CoverageEligibilityRequest.status)
     */
    static statusRequiredCoding() {
        return FmStatusCodings;
    }
    /**
     * Required-bound Value Set for purpose (CoverageEligibilityRequest.purpose)
     */
    static purposeRequiredCoding() {
        return EligibilityrequestPurposeCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType:"CoverageEligibilityRequest" fhir: CoverageEligibilityRequest.resourceType:"CoverageEligibilityRequest"', });
        }
        if (this["identifier"]) {
            this.identifier.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (!this['status']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property status:FmStatusCodeType fhir: CoverageEligibilityRequest.status:code', });
        }
        if (this["priority"]) {
            issues.push(...this.priority.doModelValidation());
        }
        if (!this['purpose']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property purpose:EligibilityrequestPurposeCodeType[] fhir: CoverageEligibilityRequest.purpose:code', });
        }
        else if (!Array.isArray(this.purpose)) {
            issues.push({ severity: 'error', code: 'structure', diagnostics: 'Found scalar in array property purpose:EligibilityrequestPurposeCodeType[] fhir: CoverageEligibilityRequest.purpose:code', });
        }
        else if (this.purpose.length === 0) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property purpose:EligibilityrequestPurposeCodeType[] fhir: CoverageEligibilityRequest.purpose:code', });
        }
        if (!this['patient']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property patient:fhir.Reference fhir: CoverageEligibilityRequest.patient:Reference', });
        }
        if (this["patient"]) {
            issues.push(...this.patient.doModelValidation());
        }
        if (!this['created']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property created:fhir.FhirDateTime fhir: CoverageEligibilityRequest.created:dateTime', });
        }
        if (this["created"]) {
            issues.push(...this.created.doModelValidation());
        }
        if (this["enterer"]) {
            issues.push(...this.enterer.doModelValidation());
        }
        if (this["provider"]) {
            issues.push(...this.provider.doModelValidation());
        }
        if (!this['insurer']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property insurer:fhir.Reference fhir: CoverageEligibilityRequest.insurer:Reference', });
        }
        if (this["insurer"]) {
            issues.push(...this.insurer.doModelValidation());
        }
        if (this["facility"]) {
            issues.push(...this.facility.doModelValidation());
        }
        if (this["supportingInfo"]) {
            this.supportingInfo.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["insurance"]) {
            this.insurance.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["item"]) {
            this.item.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
CoverageEligibilityRequest._fts_dataType = 'CoverageEligibilityRequest';
/**
 * Internal flag to properly serialize choice-type element CoverageEligibilityRequest.serviced[x]
 */
CoverageEligibilityRequest._fts_servicedIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3QuanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL0NvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQiwrQ0FBK0M7QUFDL0Msa0NBQWtDO0FBQ2xDLDRDQUE0QztBQUU1QyxPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQWNuQyxhQUFhO0FBQ2IsT0FBTyxFQUFFLGVBQWUsR0FBc0IsTUFBTSxxQ0FBcUMsQ0FBQztBQU8xRixhQUFhO0FBQ2IsT0FBTyxFQUFFLGdDQUFnQyxHQUF1QyxNQUFNLHNEQUFzRCxDQUFDO0FBcUI3STs7R0FFRztBQUNILE1BQU0sT0FBTyx3Q0FBeUMsU0FBUSxJQUFJLENBQUMsZUFBZTtJQWlCaEY7O09BRUc7SUFDSCxZQUFZLFNBQStELEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQ3JILEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsUUFBUSxFQUFDLENBQUMsQ0FBQztTQUFFO2FBQzFGO1lBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7U0FBRTtRQUM5QixJQUFJLE1BQU0sQ0FBQyxhQUFhLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQztTQUFFO2FBQ3BGO1lBQUUsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7U0FBRTtRQUNqQyxJQUFJLE1BQU0sQ0FBQyxjQUFjLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxJ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QzZCLHdDQUFhLEdBQVUsNEJBQTRCLENBQUM7QUE2QnBGOztHQUVHO0FBQ3VCLGdEQUFxQixHQUFRLElBQUksQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNC5jb3JlIHZlcnNpb246IDQuMC4xXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEV4QmVuZWZpdGNhdGVnb3J5Q29kaW5ncywgRXhCZW5lZml0Y2F0ZWdvcnlDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9FeEJlbmVmaXRjYXRlZ29yeUNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEV4QmVuZWZpdGNhdGVnb3J5Q29kZXMsICBFeEJlbmVmaXRjYXRlZ29yeUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9FeEJlbmVmaXRjYXRlZ29yeUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBTZXJ2aWNlVXNjbHNDb2RpbmdzLCBTZXJ2aWNlVXNjbHNDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9TZXJ2aWNlVXNjbHNDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBTZXJ2aWNlVXNjbHNDb2RlcywgIFNlcnZpY2VVc2Nsc0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9TZXJ2aWNlVXNjbHNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ2xhaW1Nb2RpZmllcnNDb2RpbmdzLCBDbGFpbU1vZGlmaWVyc0NvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NsYWltTW9kaWZpZXJzQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ2xhaW1Nb2RpZmllcnNDb2RlcywgIENsYWltTW9kaWZpZXJzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NsYWltTW9kaWZpZXJzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEZtU3RhdHVzQ29kaW5ncywgRm1TdGF0dXNDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9GbVN0YXR1c0NvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEZtU3RhdHVzQ29kZXMsICBGbVN0YXR1c0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9GbVN0YXR1c0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBQcm9jZXNzUHJpb3JpdHlDb2RpbmdzLCBQcm9jZXNzUHJpb3JpdHlDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Qcm9jZXNzUHJpb3JpdHlDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBQcm9jZXNzUHJpb3JpdHlDb2RlcywgIFByb2Nlc3NQcmlvcml0eUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Qcm9jZXNzUHJpb3JpdHlDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRWxpZ2liaWxpdHlyZXF1ZXN0UHVycG9zZUNvZGluZ3MsIEVsaWdpYmlsaXR5cmVxdWVzdFB1cnBvc2VDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9FbGlnaWJpbGl0eXJlcXVlc3RQdXJwb3NlQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRWxpZ2liaWxpdHlyZXF1ZXN0UHVycG9zZUNvZGVzLCAgRWxpZ2liaWxpdHlyZXF1ZXN0UHVycG9zZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9FbGlnaWJpbGl0eXJlcXVlc3RQdXJwb3NlQ29kZXMuanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RTdXBwb3J0aW5nSW5mbyB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdFN1cHBvcnRpbmdJbmZvQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogQSBudW1iZXIgdG8gdW5pcXVlbHkgaWRlbnRpZnkgc3VwcG9ydGluZyBpbmZvcm1hdGlvbiBlbnRyaWVzLlxyXG4gICAqL1xyXG4gIHNlcXVlbmNlOiBmaGlyLkZoaXJQb3NpdGl2ZUludHxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENvdWxkIGJlIHVzZWQgdG8gcHJvdmlkZSByZWZlcmVuY2VzIHRvIG90aGVyIHJlc291cmNlcywgZG9jdW1lbnQuIEZvciBleGFtcGxlIGNvdWxkIGNvbnRhaW4gYSBQREYgaW4gYW4gQXR0YWNobWVudCBvZiB0aGUgUG9saWNlIFJlcG9ydCBmb3IgYW4gQWNjaWRlbnQuXHJcbiAgICovXHJcbiAgaW5mb3JtYXRpb246IGZoaXIuUmVmZXJlbmNlQXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzdXBwb3J0aW5nIG1hdGVyaWFscyBhcmUgYXBwbGljYWJsZSBmb3IgYWxsIGRldGFpbCBpdGVtcywgcHJvZHVjdC9zZXJ2Y2UgY2F0ZWdvcmllcyBhbmQgc3BlY2lmaWMgYmlsbGluZyBjb2Rlcy5cclxuICAgKi9cclxuICBhcHBsaWVzVG9BbGw/OiBmaGlyLkZoaXJCb29sZWFufGJvb2xlYW58dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogT2Z0ZW4gdGhlcmUgYXJlIG11bHRpcGxlIGp1cmlzZGljdGlvbiBzcGVjaWZpYyB2YWx1ZXNldHMgd2hpY2ggYXJlIHJlcXVpcmVkLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0U3VwcG9ydGluZ0luZm8gZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdFN1cHBvcnRpbmdJbmZvJztcclxuICAvKipcclxuICAgKiBBIG51bWJlciB0byB1bmlxdWVseSBpZGVudGlmeSBzdXBwb3J0aW5nIGluZm9ybWF0aW9uIGVudHJpZXMuXHJcbiAgICovXHJcbiAgcHVibGljIHNlcXVlbmNlOiBmaGlyLkZoaXJQb3NpdGl2ZUludHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIENvdWxkIGJlIHVzZWQgdG8gcHJvdmlkZSByZWZlcmVuY2VzIHRvIG90aGVyIHJlc291cmNlcywgZG9jdW1lbnQuIEZvciBleGFtcGxlIGNvdWxkIGNvbnRhaW4gYSBQREYgaW4gYW4gQXR0YWNobWVudCBvZiB0aGUgUG9saWNlIFJlcG9ydCBmb3IgYW4gQWNjaWRlbnQuXHJcbiAgICovXHJcbiAgcHVibGljIGluZm9ybWF0aW9uOiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzdXBwb3J0aW5nIG1hdGVyaWFscyBhcmUgYXBwbGljYWJsZSBmb3IgYWxsIGRldGFpbCBpdGVtcywgcHJvZHVjdC9zZXJ2Y2UgY2F0ZWdvcmllcyBhbmQgc3BlY2lmaWMgYmlsbGluZyBjb2Rlcy5cclxuICAgKi9cclxuICBwdWJsaWMgYXBwbGllc1RvQWxsPzogZmhpci5GaGlyQm9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RTdXBwb3J0aW5nSW5mbyAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0U3VwcG9ydGluZ0luZm9BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnc2VxdWVuY2UnXSkgeyB0aGlzLnNlcXVlbmNlID0gbmV3IGZoaXIuRmhpclBvc2l0aXZlSW50KHt2YWx1ZTogc291cmNlLnNlcXVlbmNlfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnNlcXVlbmNlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaW5mb3JtYXRpb24nXSkgeyB0aGlzLmluZm9ybWF0aW9uID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5pbmZvcm1hdGlvbik7IH1cclxuICAgIGVsc2UgeyB0aGlzLmluZm9ybWF0aW9uID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYXBwbGllc1RvQWxsJ10pIHsgdGhpcy5hcHBsaWVzVG9BbGwgPSBuZXcgZmhpci5GaGlyQm9vbGVhbih7dmFsdWU6IHNvdXJjZS5hcHBsaWVzVG9BbGx9KTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKCF0aGlzWydzZXF1ZW5jZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsICBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgc2VxdWVuY2U6Zmhpci5GaGlyUG9zaXRpdmVJbnQgZmhpcjogQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3Quc3VwcG9ydGluZ0luZm8uc2VxdWVuY2U6cG9zaXRpdmVJbnQnLCB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wic2VxdWVuY2VcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5zZXF1ZW5jZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKCF0aGlzWydpbmZvcm1hdGlvbiddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsICBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgaW5mb3JtYXRpb246Zmhpci5SZWZlcmVuY2UgZmhpcjogQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3Quc3VwcG9ydGluZ0luZm8uaW5mb3JtYXRpb246UmVmZXJlbmNlJywgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImluZm9ybWF0aW9uXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuaW5mb3JtYXRpb24uZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiYXBwbGllc1RvQWxsXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuYXBwbGllc1RvQWxsLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RJbnN1cmFuY2UgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RJbnN1cmFuY2VBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBBIHBhdGllbnQgbWF5ICh3aWxsKSBoYXZlIG11bHRpcGxlIGluc3VyYW5jZSBwb2xpY2llcyB3aGljaCBwcm92aWRlIHJlaW1idXJlbWVudCBmb3IgaGVhbHRoY2FyZSBzZXJ2aWNlcyBhbmQgcHJvZHVjdHMuIEZvciBleGFtcGxlIGEgcGVyc29uIG1heSBhbHNvIGJlIGNvdmVyZWQgYnkgdGhlaXIgc3BvdXNlJ3MgcG9saWN5IGFuZCBib3RoIGFwcGVhciBpbiB0aGUgbGlzdCAoYW5kIG1heSBiZSBmcm9tIHRoZSBzYW1lIGluc3VyZXIpLiBUaGlzIGZsYWcgd2lsbCBiZSBzZXQgdG8gdHJ1ZSBmb3Igb25seSBvbmUgb2YgdGhlIGxpc3RlZCBwb2xpY2llcyBhbmQgdGhhdCBwb2xpY3kgd2lsbCBiZSB1c2VkIGZvciBldmFsdWF0aW5nIHRoaXMgcmVxdWVzdC4gT3RoZXIgcmVxdWVzdHMgd291bGQgYmUgY3JlYXRlZCB0byByZXF1ZXN0IGV2YWx1YXRpb24gYWdhaW5zdCB0aGUgb3RoZXIgbGlzdGVkIHBvbGljaWVzLlxyXG4gICAqL1xyXG4gIGZvY2FsPzogZmhpci5GaGlyQm9vbGVhbnxib29sZWFufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBSZWZlcmVuY2UgdG8gdGhlIGluc3VyYW5jZSBjYXJkIGxldmVsIGluZm9ybWF0aW9uIGNvbnRhaW5lZCBpbiB0aGUgQ292ZXJhZ2UgcmVzb3VyY2UuIFRoZSBjb3ZlcmFnZSBpc3N1aW5nIGluc3VyZXIgd2lsbCB1c2UgdGhlc2UgZGV0YWlscyB0byBsb2NhdGUgdGhlIHBhdGllbnQncyBhY3R1YWwgY292ZXJhZ2Ugd2l0aGluIHRoZSBpbnN1cmVyJ3MgaW5mb3JtYXRpb24gc3lzdGVtLlxyXG4gICAqL1xyXG4gIGNvdmVyYWdlOiBmaGlyLlJlZmVyZW5jZUFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBBIGJ1c2luZXNzIGFncmVlbWVudCBudW1iZXIgZXN0YWJsaXNoZWQgYmV0d2VlbiB0aGUgcHJvdmlkZXIgYW5kIHRoZSBpbnN1cmVyIGZvciBzcGVjaWFsIGJ1c2luZXNzIHByb2Nlc3NpbmcgcHVycG9zZXMuXHJcbiAgICovXHJcbiAgYnVzaW5lc3NBcnJhbmdlbWVudD86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQWxsIGluc3VyYW5jZSBjb3ZlcmFnZXMgZm9yIHRoZSBwYXRpZW50IHdoaWNoIG1heSBiZSBhcHBsaWNhYmxlIGZvciByZWltYnVyc2VtZW50LCBvZiB0aGUgcHJvZHVjdHMgYW5kIHNlcnZpY2VzIGxpc3RlZCBpbiB0aGUgY2xhaW0sIGFyZSB0eXBpY2FsbHkgcHJvdmlkZWQgaW4gdGhlIGNsYWltIHRvIGFsbG93IGluc3VyZXJzIHRvIGNvbmZpcm0gdGhlIG9yZGVyaW5nIG9mIHRoZSBpbnN1cmFuY2UgY292ZXJhZ2VzIHJlbGF0aXZlIHRvIGxvY2FsICdjb29yZGluYXRpb24gb2YgYmVuZWZpdCcgcnVsZXMuIE9uZSBjb3ZlcmFnZSAoYW5kIG9ubHkgb25lKSB3aXRoICdmb2NhbD10cnVlJyBpcyB0byBiZSB1c2VkIGluIHRoZSBhZGp1ZGljYXRpb24gb2YgdGhpcyBjbGFpbS4gQ292ZXJhZ2VzIGFwcGVhcmluZyBiZWZvcmUgdGhlIGZvY2FsIENvdmVyYWdlIGluIHRoZSBsaXN0LCBhbmQgd2hlcmUgJ3N1YnJvZ2F0aW9uPWZhbHNlJywgc2hvdWxkIHByb3ZpZGUgYSByZWZlcmVuY2UgdG8gdGhlIENsYWltUmVzcG9uc2UgY29udGFpbmluZyB0aGUgYWRqdWRpY2F0aW9uIHJlc3VsdHMgb2YgdGhlIHByaW9yIGNsYWltLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0SW5zdXJhbmNlIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RJbnN1cmFuY2UnO1xyXG4gIC8qKlxyXG4gICAqIEEgcGF0aWVudCBtYXkgKHdpbGwpIGhhdmUgbXVsdGlwbGUgaW5zdXJhbmNlIHBvbGljaWVzIHdoaWNoIHByb3ZpZGUgcmVpbWJ1cmVtZW50IGZvciBoZWFsdGhjYXJlIHNlcnZpY2VzIGFuZCBwcm9kdWN0cy4gRm9yIGV4YW1wbGUgYSBwZXJzb24gbWF5IGFsc28gYmUgY292ZXJlZCBieSB0aGVpciBzcG91c2UncyBwb2xpY3kgYW5kIGJvdGggYXBwZWFyIGluIHRoZSBsaXN0IChhbmQgbWF5IGJlIGZyb20gdGhlIHNhbWUgaW5zdXJlcikuIFRoaXMgZmxhZyB3aWxsIGJlIHNldCB0byB0cnVlIGZvciBvbmx5IG9uZSBvZiB0aGUgbGlzdGVkIHBvbGljaWVzIGFuZCB0aGF0IHBvbGljeSB3aWxsIGJlIHVzZWQgZm9yIGV2YWx1YXRpbmcgdGhpcyByZXF1ZXN0LiBPdGhlciByZXF1ZXN0cyB3b3VsZCBiZSBjcmVhdGVkIHRvIHJlcXVlc3QgZXZhbHVhdGlvbiBhZ2FpbnN0IHRoZSBvdGhlciBsaXN0ZWQgcG9saWNpZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGZvY2FsPzogZmhpci5GaGlyQm9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUmVmZXJlbmNlIHRvIHRoZSBpbnN1cmFuY2UgY2FyZCBsZXZlbCBpbmZvcm1hdGlvbiBjb250YWluZWQgaW4gdGhlIENvdmVyYWdlIHJlc291cmNlLiBUaGUgY292ZXJhZ2UgaXNzdWluZyBpbnN1cmVyIHdpbGwgdXNlIHRoZXNlIGRldGFpbHMgdG8gbG9jYXRlIHRoZSBwYXRpZW50J3MgYWN0dWFsIGNvdmVyYWdlIHdpdGhpbiB0aGUgaW5zdXJlcidzIGluZm9ybWF0aW9uIHN5c3RlbS5cclxuICAgKi9cclxuICBwdWJsaWMgY292ZXJhZ2U6IGZoaXIuUmVmZXJlbmNlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogQSBidXNpbmVzcyBhZ3JlZW1lbnQgbnVtYmVyIGVzdGFibGlzaGVkIGJldHdlZW4gdGhlIHByb3ZpZGVyIGFuZCB0aGUgaW5zdXJlciBmb3Igc3BlY2lhbCBidXNpbmVzcyBwcm9jZXNzaW5nIHB1cnBvc2VzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBidXNpbmVzc0FycmFuZ2VtZW50PzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdEluc3VyYW5jZSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0SW5zdXJhbmNlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2ZvY2FsJ10pIHsgdGhpcy5mb2NhbCA9IG5ldyBmaGlyLkZoaXJCb29sZWFuKHt2YWx1ZTogc291cmNlLmZvY2FsfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvdmVyYWdlJ10pIHsgdGhpcy5jb3ZlcmFnZSA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuY292ZXJhZ2UpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb3ZlcmFnZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ2J1c2luZXNzQXJyYW5nZW1lbnQnXSkgeyB0aGlzLmJ1c2luZXNzQXJyYW5nZW1lbnQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmJ1c2luZXNzQXJyYW5nZW1lbnR9KTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKHRoaXNbXCJmb2NhbFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmZvY2FsLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAoIXRoaXNbJ2NvdmVyYWdlJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBjb3ZlcmFnZTpmaGlyLlJlZmVyZW5jZSBmaGlyOiBDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdC5pbnN1cmFuY2UuY292ZXJhZ2U6UmVmZXJlbmNlJywgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImNvdmVyYWdlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY292ZXJhZ2UuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiYnVzaW5lc3NBcnJhbmdlbWVudFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmJ1c2luZXNzQXJyYW5nZW1lbnQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdEl0ZW1EaWFnbm9zaXMgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RJdGVtRGlhZ25vc2lzQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIG5hdHVyZSBvZiBpbGxuZXNzIG9yIHByb2JsZW0gaW4gYSBjb2RlZCBmb3JtIG9yIGFzIGEgcmVmZXJlbmNlIHRvIGFuIGV4dGVybmFsIGRlZmluZWQgQ29uZGl0aW9uLlxyXG4gICAqL1xyXG4gIGRpYWdub3Npcz86IGZoaXIuQ29kZWFibGVDb25jZXB0fGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbmF0dXJlIG9mIGlsbG5lc3Mgb3IgcHJvYmxlbSBpbiBhIGNvZGVkIGZvcm0gb3IgYXMgYSByZWZlcmVuY2UgdG8gYW4gZXh0ZXJuYWwgZGVmaW5lZCBDb25kaXRpb24uXHJcbiAgICovXHJcbiAgZGlhZ25vc2lzQ29kZWFibGVDb25jZXB0PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbmF0dXJlIG9mIGlsbG5lc3Mgb3IgcHJvYmxlbSBpbiBhIGNvZGVkIGZvcm0gb3IgYXMgYSByZWZlcmVuY2UgdG8gYW4gZXh0ZXJuYWwgZGVmaW5lZCBDb25kaXRpb24uXHJcbiAgICovXHJcbiAgZGlhZ25vc2lzUmVmZXJlbmNlPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFBhdGllbnQgZGlhZ25vc2lzIGZvciB3aGljaCBjYXJlIGlzIHNvdWdodC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdEl0ZW1EaWFnbm9zaXMgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdEl0ZW1EaWFnbm9zaXMnO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBuYXR1cmUgb2YgaWxsbmVzcyBvciBwcm9ibGVtIGluIGEgY29kZWQgZm9ybSBvciBhcyBhIHJlZmVyZW5jZSB0byBhbiBleHRlcm5hbCBkZWZpbmVkIENvbmRpdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgZGlhZ25vc2lzPzogKGZoaXIuQ29kZWFibGVDb25jZXB0fGZoaXIuUmVmZXJlbmNlKXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdC5pdGVtLmRpYWdub3Npcy5kaWFnbm9zaXNbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfZGlhZ25vc2lzSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RJdGVtRGlhZ25vc2lzIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8Q292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RJdGVtRGlhZ25vc2lzQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2RpYWdub3NpcyddKSB7IHRoaXMuZGlhZ25vc2lzID0gc291cmNlLmRpYWdub3NpczsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydkaWFnbm9zaXNDb2RlYWJsZUNvbmNlcHQnXSkgeyB0aGlzLmRpYWdub3NpcyA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuZGlhZ25vc2lzQ29kZWFibGVDb25jZXB0KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydkaWFnbm9zaXNSZWZlcmVuY2UnXSkgeyB0aGlzLmRpYWdub3NpcyA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuZGlhZ25vc2lzUmVmZXJlbmNlKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIENvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0SXRlbSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdEl0ZW1BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBFeGNlcHRpb25zLCBzcGVjaWFsIGNvbmRpdGlvbnMgYW5kIHN1cHBvcnRpbmcgaW5mb3JtYXRpb24gYXBwbGljYWJsZSBmb3IgdGhpcyBzZXJ2aWNlIG9yIHByb2R1Y3QgbGluZS5cclxuICAgKi9cclxuICBzdXBwb3J0aW5nSW5mb1NlcXVlbmNlPzogZmhpci5GaGlyUG9zaXRpdmVJbnRbXXxudW1iZXJbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXhhbXBsZXMgaW5jbHVkZSBNZWRpY2FsIENhcmUsIFBlcmlvZG9udGljcywgUmVuYWwgRGlhbHlzaXMsIFZpc2lvbiBDb3ZlcmFnZS5cclxuICAgKi9cclxuICBjYXRlZ29yeT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ29kZSB0byBpbmRpY2F0ZSB0aGUgUHJvZmVzc2lvbmFsIFNlcnZpY2Ugb3IgUHJvZHVjdCBzdXBwbGllZCAoZS5nLiBDVFAsIEhDUENTLCBVU0NMUywgSUNEMTAsIE5DUERQLCBESU4sIFJ4Tm9ybSwgQUNISSwgQ0NJKS5cclxuICAgKi9cclxuICBwcm9kdWN0T3JTZXJ2aWNlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBGb3IgZXhhbXBsZSBpbiBPcmFsIHdoZXRoZXIgdGhlIHRyZWF0bWVudCBpcyBjb3NtZXRpYyBvciBhc3NvY2lhdGVkIHdpdGggVE1KLCBvciBmb3IgTWVkaWNhbCB3aGV0aGVyIHRoZSB0cmVhdG1lbnQgd2FzIG91dHNpZGUgdGhlIGNsaW5pYyBvciBvdXQgb2Ygb2ZmaWNlIGhvdXJzLlxyXG4gICAqL1xyXG4gIG1vZGlmaWVyPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwcmFjdGl0aW9uZXIgd2hvIGlzIHJlc3BvbnNpYmxlIGZvciB0aGUgcHJvZHVjdCBvciBzZXJ2aWNlIHRvIGJlIHJlbmRlcmVkIHRvIHRoZSBwYXRpZW50LlxyXG4gICAqL1xyXG4gIHByb3ZpZGVyPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbnVtYmVyIG9mIHJlcGV0aXRpb25zIG9mIGEgc2VydmljZSBvciBwcm9kdWN0LlxyXG4gICAqL1xyXG4gIHF1YW50aXR5PzogZmhpci5RdWFudGl0eUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBhbW91bnQgY2hhcmdlZCB0byB0aGUgcGF0aWVudCBieSB0aGUgcHJvdmlkZXIgZm9yIGEgc2luZ2xlIHVuaXQuXHJcbiAgICovXHJcbiAgdW5pdFByaWNlPzogZmhpci5Nb25leUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEZhY2lsaXR5IHdoZXJlIHRoZSBzZXJ2aWNlcyB3aWxsIGJlIHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGZhY2lsaXR5PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBQYXRpZW50IGRpYWdub3NpcyBmb3Igd2hpY2ggY2FyZSBpcyBzb3VnaHQuXHJcbiAgICovXHJcbiAgZGlhZ25vc2lzPzogZmhpci5Db3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdEl0ZW1EaWFnbm9zaXNBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwbGFuL3Byb3Bvc2FsL29yZGVyIGRlc2NyaWJpbmcgdGhlIHByb3Bvc2VkIHNlcnZpY2UgaW4gZGV0YWlsLlxyXG4gICAqL1xyXG4gIGRldGFpbD86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNlcnZpY2UgY2F0ZWdvcmllcyBvciBiaWxsYWJsZSBzZXJ2aWNlcyBmb3Igd2hpY2ggYmVuZWZpdCBkZXRhaWxzIGFuZC9vciBhbiBhdXRob3JpemF0aW9uIHByaW9yIHRvIHNlcnZpY2UgZGVsaXZlcnkgbWF5IGJlIHJlcXVpcmVkIGJ5IHRoZSBwYXlvci5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdEl0ZW0gZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdEl0ZW0nO1xyXG4gIC8qKlxyXG4gICAqIEV4Y2VwdGlvbnMsIHNwZWNpYWwgY29uZGl0aW9ucyBhbmQgc3VwcG9ydGluZyBpbmZvcm1hdGlvbiBhcHBsaWNhYmxlIGZvciB0aGlzIHNlcnZpY2Ugb3IgcHJvZHVjdCBsaW5lLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdXBwb3J0aW5nSW5mb1NlcXVlbmNlPzogZmhpci5GaGlyUG9zaXRpdmVJbnRbXTtcclxuICAvKipcclxuICAgKiBFeGFtcGxlcyBpbmNsdWRlIE1lZGljYWwgQ2FyZSwgUGVyaW9kb250aWNzLCBSZW5hbCBEaWFseXNpcywgVmlzaW9uIENvdmVyYWdlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjYXRlZ29yeT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDb2RlIHRvIGluZGljYXRlIHRoZSBQcm9mZXNzaW9uYWwgU2VydmljZSBvciBQcm9kdWN0IHN1cHBsaWVkIChlLmcuIENUUCwgSENQQ1MsIFVTQ0xTLCBJQ0QxMCwgTkNQRFAsIERJTiwgUnhOb3JtLCBBQ0hJLCBDQ0kpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcm9kdWN0T3JTZXJ2aWNlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEZvciBleGFtcGxlIGluIE9yYWwgd2hldGhlciB0aGUgdHJlYXRtZW50IGlzIGNvc21ldGljIG9yIGFzc29jaWF0ZWQgd2l0aCBUTUosIG9yIGZvciBNZWRpY2FsIHdoZXRoZXIgdGhlIHRyZWF0bWVudCB3YXMgb3V0c2lkZSB0aGUgY2xpbmljIG9yIG91dCBvZiBvZmZpY2UgaG91cnMuXHJcbiAgICovXHJcbiAgcHVibGljIG1vZGlmaWVyPzogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBUaGUgcHJhY3RpdGlvbmVyIHdobyBpcyByZXNwb25zaWJsZSBmb3IgdGhlIHByb2R1Y3Qgb3Igc2VydmljZSB0byBiZSByZW5kZXJlZCB0byB0aGUgcGF0aWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgcHJvdmlkZXI/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG51bWJlciBvZiByZXBldGl0aW9ucyBvZiBhIHNlcnZpY2Ugb3IgcHJvZHVjdC5cclxuICAgKi9cclxuICBwdWJsaWMgcXVhbnRpdHk/OiBmaGlyLlF1YW50aXR5fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgYW1vdW50IGNoYXJnZWQgdG8gdGhlIHBhdGllbnQgYnkgdGhlIHByb3ZpZGVyIGZvciBhIHNpbmdsZSB1bml0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyB1bml0UHJpY2U/OiBmaGlyLk1vbmV5fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBGYWNpbGl0eSB3aGVyZSB0aGUgc2VydmljZXMgd2lsbCBiZSBwcm92aWRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgZmFjaWxpdHk/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUGF0aWVudCBkaWFnbm9zaXMgZm9yIHdoaWNoIGNhcmUgaXMgc291Z2h0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkaWFnbm9zaXM/OiBmaGlyLkNvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0SXRlbURpYWdub3Npc1tdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwbGFuL3Byb3Bvc2FsL29yZGVyIGRlc2NyaWJpbmcgdGhlIHByb3Bvc2VkIHNlcnZpY2UgaW4gZGV0YWlsLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZXRhaWw/OiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIENvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0SXRlbSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0SXRlbUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydzdXBwb3J0aW5nSW5mb1NlcXVlbmNlJ10pIHsgdGhpcy5zdXBwb3J0aW5nSW5mb1NlcXVlbmNlID0gc291cmNlLnN1cHBvcnRpbmdJbmZvU2VxdWVuY2UubWFwKCh4KSA9PiBuZXcgZmhpci5GaGlyUG9zaXRpdmVJbnQoe3ZhbHVlOiB4fSkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdXBwb3J0aW5nSW5mb1NlcXVlbmNlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2NhdGVnb3J5J10pIHsgdGhpcy5jYXRlZ29yeSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY2F0ZWdvcnkpOyB9XHJcbiAgICBpZiAoc291cmNlWydwcm9kdWN0T3JTZXJ2aWNlJ10pIHsgdGhpcy5wcm9kdWN0T3JTZXJ2aWNlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5wcm9kdWN0T3JTZXJ2aWNlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbW9kaWZpZXInXSkgeyB0aGlzLm1vZGlmaWVyID0gc291cmNlLm1vZGlmaWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubW9kaWZpZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJvdmlkZXInXSkgeyB0aGlzLnByb3ZpZGVyID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5wcm92aWRlcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ3F1YW50aXR5J10pIHsgdGhpcy5xdWFudGl0eSA9IG5ldyBmaGlyLlF1YW50aXR5KHNvdXJjZS5xdWFudGl0eSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3VuaXRQcmljZSddKSB7IHRoaXMudW5pdFByaWNlID0gbmV3IGZoaXIuTW9uZXkoc291cmNlLnVuaXRQcmljZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2ZhY2lsaXR5J10pIHsgdGhpcy5mYWNpbGl0eSA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuZmFjaWxpdHkpOyB9XHJcbiAgICBpZiAoc291cmNlWydkaWFnbm9zaXMnXSkgeyB0aGlzLmRpYWdub3NpcyA9IHNvdXJjZS5kaWFnbm9zaXMubWFwKCh4KSA9PiBuZXcgZmhpci5Db3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdEl0ZW1EaWFnbm9zaXMoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5kaWFnbm9zaXMgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGV0YWlsJ10pIHsgdGhpcy5kZXRhaWwgPSBzb3VyY2UuZGV0YWlsLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZGV0YWlsID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICh0aGlzW1wic3VwcG9ydGluZ0luZm9TZXF1ZW5jZVwiXSkgeyB0aGlzLnN1cHBvcnRpbmdJbmZvU2VxdWVuY2UuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImNhdGVnb3J5XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY2F0ZWdvcnkuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wicHJvZHVjdE9yU2VydmljZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnByb2R1Y3RPclNlcnZpY2UuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wibW9kaWZpZXJcIl0pIHsgdGhpcy5tb2RpZmllci5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wicHJvdmlkZXJcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5wcm92aWRlci5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJxdWFudGl0eVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnF1YW50aXR5LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInVuaXRQcmljZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnVuaXRQcmljZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJmYWNpbGl0eVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmZhY2lsaXR5LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImRpYWdub3Npc1wiXSkgeyB0aGlzLmRpYWdub3Npcy5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wiZGV0YWlsXCJdKSB7IHRoaXMuZGV0YWlsLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIENvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0QXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RcInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSB1bmlxdWUgaWRlbnRpZmllciBhc3NpZ25lZCB0byB0aGlzIGNvdmVyYWdlIGVsaWdpYmxpdHkgcmVxdWVzdC5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIGJlY2F1c2UgdGhlIHN0YXR1cyBjb250YWlucyBjb2RlcyB0aGF0IG1hcmsgdGhlIHJlc291cmNlIGFzIG5vdCBjdXJyZW50bHkgdmFsaWQuXHJcbiAgICovXHJcbiAgc3RhdHVzOiBGbVN0YXR1c0NvZGVUeXBlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogV2hlbiB0aGUgcmVxdWVzdG9yIGV4cGVjdHMgdGhlIHByb2Nlc3NvciB0byBjb21wbGV0ZSBwcm9jZXNzaW5nLlxyXG4gICAqL1xyXG4gIHByaW9yaXR5PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDb2RlIHRvIHNwZWNpZnkgd2hldGhlciByZXF1ZXN0aW5nOiBwcmlvciBhdXRob3JpemF0aW9uIHJlcXVpcmVtZW50cyBmb3Igc29tZSBzZXJ2aWNlIGNhdGVnb3JpZXMgb3IgYmlsbGluZyBjb2RlczsgYmVuZWZpdHMgZm9yIGNvdmVyYWdlcyBzcGVjaWZpZWQgb3IgZGlzY292ZXJlZDsgZGlzY292ZXJ5IGFuZCByZXR1cm4gb2YgY292ZXJhZ2VzIGZvciB0aGUgcGF0aWVudDsgYW5kL29yIHZhbGlkYXRpb24gdGhhdCB0aGUgc3BlY2lmaWVkIGNvdmVyYWdlIGlzIGluLWZvcmNlIGF0IHRoZSBkYXRlL3BlcmlvZCBzcGVjaWZpZWQgb3IgJ25vdycgaWYgbm90IHNwZWNpZmllZC5cclxuICAgKi9cclxuICBwdXJwb3NlOiBFbGlnaWJpbGl0eXJlcXVlc3RQdXJwb3NlQ29kZVR5cGVbXXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIDEuLjEuXHJcbiAgICovXHJcbiAgcGF0aWVudDogZmhpci5SZWZlcmVuY2VBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgb3IgZGF0ZXMgd2hlbiB0aGUgZW5jbG9zZWQgc3VpdGUgb2Ygc2VydmljZXMgd2VyZSBwZXJmb3JtZWQgb3IgY29tcGxldGVkLlxyXG4gICAqL1xyXG4gIHNlcnZpY2VkPzogZmhpci5GaGlyRGF0ZXxmaGlyLlBlcmlvZHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgb3IgZGF0ZXMgd2hlbiB0aGUgZW5jbG9zZWQgc3VpdGUgb2Ygc2VydmljZXMgd2VyZSBwZXJmb3JtZWQgb3IgY29tcGxldGVkLlxyXG4gICAqL1xyXG4gIHNlcnZpY2VkRGF0ZT86IGZoaXIuRmhpckRhdGV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSBvciBkYXRlcyB3aGVuIHRoZSBlbmNsb3NlZCBzdWl0ZSBvZiBzZXJ2aWNlcyB3ZXJlIHBlcmZvcm1lZCBvciBjb21wbGV0ZWQuXHJcbiAgICovXHJcbiAgc2VydmljZWRQZXJpb2Q/OiBmaGlyLlBlcmlvZEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRlIHdoZW4gdGhpcyByZXNvdXJjZSB3YXMgY3JlYXRlZC5cclxuICAgKi9cclxuICBjcmVhdGVkOiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFBlcnNvbiB3aG8gY3JlYXRlZCB0aGUgcmVxdWVzdC5cclxuICAgKi9cclxuICBlbnRlcmVyPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUeXBpY2FsbHkgdGhpcyBmaWVsZCB3b3VsZCBiZSAxLi4xIHdoZXJlIHRoaXMgcGFydHkgaXMgcmVzcG9uc2libGUgZm9yIHRoZSBlbGlnaWJpbGl0eSByZXF1ZXN0IGJ1dCBub3QgbmVjZXNzYXJpbHkgcHJvZmVzc2lvbmFsbHkgcmVzcG9uc2libGUgZm9yIHRoZSBwcm92aXNpb24gb2YgdGhlIGluZGl2aWR1YWwgcHJvZHVjdHMgYW5kIHNlcnZpY2VzIGxpc3RlZCBiZWxvdy5cclxuICAgKi9cclxuICBwcm92aWRlcj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIEluc3VyZXIgd2hvIGlzc3VlZCB0aGUgY292ZXJhZ2UgaW4gcXVlc3Rpb24gYW5kIGlzIHRoZSByZWNpcGllbnQgb2YgdGhlIHJlcXVlc3QuXHJcbiAgICovXHJcbiAgaW5zdXJlcjogZmhpci5SZWZlcmVuY2VBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogRmFjaWxpdHkgd2hlcmUgdGhlIHNlcnZpY2VzIGFyZSBpbnRlbmRlZCB0byBiZSBwcm92aWRlZC5cclxuICAgKi9cclxuICBmYWNpbGl0eT86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogT2Z0ZW4gdGhlcmUgYXJlIG11bHRpcGxlIGp1cmlzZGljdGlvbiBzcGVjaWZpYyB2YWx1ZXNldHMgd2hpY2ggYXJlIHJlcXVpcmVkLlxyXG4gICAqL1xyXG4gIHN1cHBvcnRpbmdJbmZvPzogZmhpci5Db3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdFN1cHBvcnRpbmdJbmZvQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBbGwgaW5zdXJhbmNlIGNvdmVyYWdlcyBmb3IgdGhlIHBhdGllbnQgd2hpY2ggbWF5IGJlIGFwcGxpY2FibGUgZm9yIHJlaW1idXJzZW1lbnQsIG9mIHRoZSBwcm9kdWN0cyBhbmQgc2VydmljZXMgbGlzdGVkIGluIHRoZSBjbGFpbSwgYXJlIHR5cGljYWxseSBwcm92aWRlZCBpbiB0aGUgY2xhaW0gdG8gYWxsb3cgaW5zdXJlcnMgdG8gY29uZmlybSB0aGUgb3JkZXJpbmcgb2YgdGhlIGluc3VyYW5jZSBjb3ZlcmFnZXMgcmVsYXRpdmUgdG8gbG9jYWwgJ2Nvb3JkaW5hdGlvbiBvZiBiZW5lZml0JyBydWxlcy4gT25lIGNvdmVyYWdlIChhbmQgb25seSBvbmUpIHdpdGggJ2ZvY2FsPXRydWUnIGlzIHRvIGJlIHVzZWQgaW4gdGhlIGFkanVkaWNhdGlvbiBvZiB0aGlzIGNsYWltLiBDb3ZlcmFnZXMgYXBwZWFyaW5nIGJlZm9yZSB0aGUgZm9jYWwgQ292ZXJhZ2UgaW4gdGhlIGxpc3QsIGFuZCB3aGVyZSAnc3Vicm9nYXRpb249ZmFsc2UnLCBzaG91bGQgcHJvdmlkZSBhIHJlZmVyZW5jZSB0byB0aGUgQ2xhaW1SZXNwb25zZSBjb250YWluaW5nIHRoZSBhZGp1ZGljYXRpb24gcmVzdWx0cyBvZiB0aGUgcHJpb3IgY2xhaW0uXHJcbiAgICovXHJcbiAgaW5zdXJhbmNlPzogZmhpci5Db3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdEluc3VyYW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU2VydmljZSBjYXRlZ29yaWVzIG9yIGJpbGxhYmxlIHNlcnZpY2VzIGZvciB3aGljaCBiZW5lZml0IGRldGFpbHMgYW5kL29yIGFuIGF1dGhvcml6YXRpb24gcHJpb3IgdG8gc2VydmljZSBkZWxpdmVyeSBtYXkgYmUgcmVxdWlyZWQgYnkgdGhlIHBheW9yLlxyXG4gICAqL1xyXG4gIGl0ZW0/OiBmaGlyLkNvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0SXRlbUFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3QgcHJvdmlkZXMgcGF0aWVudCBhbmQgaW5zdXJhbmNlIGNvdmVyYWdlIGluZm9ybWF0aW9uIHRvIGFuIGluc3VyZXIgZm9yIHRoZW0gdG8gcmVzcG9uZCwgaW4gdGhlIGZvcm0gb2YgYW4gQ292ZXJhZ2VFbGlnaWJpbGl0eVJlc3BvbnNlLCB3aXRoIGluZm9ybWF0aW9uIHJlZ2FyZGluZyB3aGV0aGVyIHRoZSBzdGF0ZWQgY292ZXJhZ2UgaXMgdmFsaWQgYW5kIGluLWZvcmNlIGFuZCBvcHRpb25hbGx5IHRvIHByb3ZpZGUgdGhlIGluc3VyYW5jZSBkZXRhaWxzIG9mIHRoZSBwb2xpY3kuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3QgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0NvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0JztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIkNvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0XCI7XHJcbiAgLyoqXHJcbiAgICogQSB1bmlxdWUgaWRlbnRpZmllciBhc3NpZ25lZCB0byB0aGlzIGNvdmVyYWdlIGVsaWdpYmxpdHkgcmVxdWVzdC5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllcltdO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgYmVjYXVzZSB0aGUgc3RhdHVzIGNvbnRhaW5zIGNvZGVzIHRoYXQgbWFyayB0aGUgcmVzb3VyY2UgYXMgbm90IGN1cnJlbnRseSB2YWxpZC5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdHVzOiBGbVN0YXR1c0NvZGVUeXBlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogV2hlbiB0aGUgcmVxdWVzdG9yIGV4cGVjdHMgdGhlIHByb2Nlc3NvciB0byBjb21wbGV0ZSBwcm9jZXNzaW5nLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcmlvcml0eT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDb2RlIHRvIHNwZWNpZnkgd2hldGhlciByZXF1ZXN0aW5nOiBwcmlvciBhdXRob3JpemF0aW9uIHJlcXVpcmVtZW50cyBmb3Igc29tZSBzZXJ2aWNlIGNhdGVnb3JpZXMgb3IgYmlsbGluZyBjb2RlczsgYmVuZWZpdHMgZm9yIGNvdmVyYWdlcyBzcGVjaWZpZWQgb3IgZGlzY292ZXJlZDsgZGlzY292ZXJ5IGFuZCByZXR1cm4gb2YgY292ZXJhZ2VzIGZvciB0aGUgcGF0aWVudDsgYW5kL29yIHZhbGlkYXRpb24gdGhhdCB0aGUgc3BlY2lmaWVkIGNvdmVyYWdlIGlzIGluLWZvcmNlIGF0IHRoZSBkYXRlL3BlcmlvZCBzcGVjaWZpZWQgb3IgJ25vdycgaWYgbm90IHNwZWNpZmllZC5cclxuICAgKi9cclxuICBwdWJsaWMgcHVycG9zZTogRWxpZ2liaWxpdHlyZXF1ZXN0UHVycG9zZUNvZGVUeXBlW107XHJcbiAgLyoqXHJcbiAgICogMS4uMS5cclxuICAgKi9cclxuICBwdWJsaWMgcGF0aWVudDogZmhpci5SZWZlcmVuY2V8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSBvciBkYXRlcyB3aGVuIHRoZSBlbmNsb3NlZCBzdWl0ZSBvZiBzZXJ2aWNlcyB3ZXJlIHBlcmZvcm1lZCBvciBjb21wbGV0ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHNlcnZpY2VkPzogKGZoaXIuRmhpckRhdGV8Zmhpci5QZXJpb2QpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IENvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0LnNlcnZpY2VkW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX3NlcnZpY2VkSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgd2hlbiB0aGlzIHJlc291cmNlIHdhcyBjcmVhdGVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjcmVhdGVkOiBmaGlyLkZoaXJEYXRlVGltZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFBlcnNvbiB3aG8gY3JlYXRlZCB0aGUgcmVxdWVzdC5cclxuICAgKi9cclxuICBwdWJsaWMgZW50ZXJlcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUeXBpY2FsbHkgdGhpcyBmaWVsZCB3b3VsZCBiZSAxLi4xIHdoZXJlIHRoaXMgcGFydHkgaXMgcmVzcG9uc2libGUgZm9yIHRoZSBlbGlnaWJpbGl0eSByZXF1ZXN0IGJ1dCBub3QgbmVjZXNzYXJpbHkgcHJvZmVzc2lvbmFsbHkgcmVzcG9uc2libGUgZm9yIHRoZSBwcm92aXNpb24gb2YgdGhlIGluZGl2aWR1YWwgcHJvZHVjdHMgYW5kIHNlcnZpY2VzIGxpc3RlZCBiZWxvdy5cclxuICAgKi9cclxuICBwdWJsaWMgcHJvdmlkZXI/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIEluc3VyZXIgd2hvIGlzc3VlZCB0aGUgY292ZXJhZ2UgaW4gcXVlc3Rpb24gYW5kIGlzIHRoZSByZWNpcGllbnQgb2YgdGhlIHJlcXVlc3QuXHJcbiAgICovXHJcbiAgcHVibGljIGluc3VyZXI6IGZoaXIuUmVmZXJlbmNlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogRmFjaWxpdHkgd2hlcmUgdGhlIHNlcnZpY2VzIGFyZSBpbnRlbmRlZCB0byBiZSBwcm92aWRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgZmFjaWxpdHk/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogT2Z0ZW4gdGhlcmUgYXJlIG11bHRpcGxlIGp1cmlzZGljdGlvbiBzcGVjaWZpYyB2YWx1ZXNldHMgd2hpY2ggYXJlIHJlcXVpcmVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdXBwb3J0aW5nSW5mbz86IGZoaXIuQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RTdXBwb3J0aW5nSW5mb1tdO1xyXG4gIC8qKlxyXG4gICAqIEFsbCBpbnN1cmFuY2UgY292ZXJhZ2VzIGZvciB0aGUgcGF0aWVudCB3aGljaCBtYXkgYmUgYXBwbGljYWJsZSBmb3IgcmVpbWJ1cnNlbWVudCwgb2YgdGhlIHByb2R1Y3RzIGFuZCBzZXJ2aWNlcyBsaXN0ZWQgaW4gdGhlIGNsYWltLCBhcmUgdHlwaWNhbGx5IHByb3ZpZGVkIGluIHRoZSBjbGFpbSB0byBhbGxvdyBpbnN1cmVycyB0byBjb25maXJtIHRoZSBvcmRlcmluZyBvZiB0aGUgaW5zdXJhbmNlIGNvdmVyYWdlcyByZWxhdGl2ZSB0byBsb2NhbCAnY29vcmRpbmF0aW9uIG9mIGJlbmVmaXQnIHJ1bGVzLiBPbmUgY292ZXJhZ2UgKGFuZCBvbmx5IG9uZSkgd2l0aCAnZm9jYWw9dHJ1ZScgaXMgdG8gYmUgdXNlZCBpbiB0aGUgYWRqdWRpY2F0aW9uIG9mIHRoaXMgY2xhaW0uIENvdmVyYWdlcyBhcHBlYXJpbmcgYmVmb3JlIHRoZSBmb2NhbCBDb3ZlcmFnZSBpbiB0aGUgbGlzdCwgYW5kIHdoZXJlICdzdWJyb2dhdGlvbj1mYWxzZScsIHNob3VsZCBwcm92aWRlIGEgcmVmZXJlbmNlIHRvIHRoZSBDbGFpbVJlc3BvbnNlIGNvbnRhaW5pbmcgdGhlIGFkanVkaWNhdGlvbiByZXN1bHRzIG9mIHRoZSBwcmlvciBjbGFpbS5cclxuICAgKi9cclxuICBwdWJsaWMgaW5zdXJhbmNlPzogZmhpci5Db3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdEluc3VyYW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIFNlcnZpY2UgY2F0ZWdvcmllcyBvciBiaWxsYWJsZSBzZXJ2aWNlcyBmb3Igd2hpY2ggYmVuZWZpdCBkZXRhaWxzIGFuZC9vciBhbiBhdXRob3JpemF0aW9uIHByaW9yIHRvIHNlcnZpY2UgZGVsaXZlcnkgbWF5IGJlIHJlcXVpcmVkIGJ5IHRoZSBwYXlvci5cclxuICAgKi9cclxuICBwdWJsaWMgaXRlbT86IGZoaXIuQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RJdGVtW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3QgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdCc7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gc291cmNlLmlkZW50aWZpZXIubWFwKCh4KSA9PiBuZXcgZmhpci5JZGVudGlmaWVyKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaWRlbnRpZmllciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydzdGF0dXMnXSkgeyB0aGlzLnN0YXR1cyA9IHNvdXJjZS5zdGF0dXM7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3ByaW9yaXR5J10pIHsgdGhpcy5wcmlvcml0eSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UucHJpb3JpdHkpOyB9XHJcbiAgICBpZiAoc291cmNlWydwdXJwb3NlJ10pIHsgdGhpcy5wdXJwb3NlID0gc291cmNlLnB1cnBvc2UubWFwKCh4KSA9PiB4KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucHVycG9zZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwYXRpZW50J10pIHsgdGhpcy5wYXRpZW50ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5wYXRpZW50KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucGF0aWVudCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3NlcnZpY2VkJ10pIHsgdGhpcy5zZXJ2aWNlZCA9IHNvdXJjZS5zZXJ2aWNlZDsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydzZXJ2aWNlZERhdGUnXSkgeyB0aGlzLnNlcnZpY2VkID0gbmV3IGZoaXIuRmhpckRhdGUoe3ZhbHVlOiBzb3VyY2Uuc2VydmljZWREYXRlfSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnc2VydmljZWRQZXJpb2QnXSkgeyB0aGlzLnNlcnZpY2VkID0gbmV3IGZoaXIuUGVyaW9kKHNvdXJjZS5zZXJ2aWNlZFBlcmlvZCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NyZWF0ZWQnXSkgeyB0aGlzLmNyZWF0ZWQgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2UuY3JlYXRlZH0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jcmVhdGVkID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZW50ZXJlciddKSB7IHRoaXMuZW50ZXJlciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuZW50ZXJlcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ3Byb3ZpZGVyJ10pIHsgdGhpcy5wcm92aWRlciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UucHJvdmlkZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWydpbnN1cmVyJ10pIHsgdGhpcy5pbnN1cmVyID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5pbnN1cmVyKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaW5zdXJlciA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ2ZhY2lsaXR5J10pIHsgdGhpcy5mYWNpbGl0eSA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuZmFjaWxpdHkpOyB9XHJcbiAgICBpZiAoc291cmNlWydzdXBwb3J0aW5nSW5mbyddKSB7IHRoaXMuc3VwcG9ydGluZ0luZm8gPSBzb3VyY2Uuc3VwcG9ydGluZ0luZm8ubWFwKCh4KSA9PiBuZXcgZmhpci5Db3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdFN1cHBvcnRpbmdJbmZvKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3VwcG9ydGluZ0luZm8gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaW5zdXJhbmNlJ10pIHsgdGhpcy5pbnN1cmFuY2UgPSBzb3VyY2UuaW5zdXJhbmNlLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RJbnN1cmFuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pbnN1cmFuY2UgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaXRlbSddKSB7IHRoaXMuaXRlbSA9IHNvdXJjZS5pdGVtLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RJdGVtKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaXRlbSA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlcXVpcmVkLWJvdW5kIFZhbHVlIFNldCBmb3Igc3RhdHVzIChDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdC5zdGF0dXMpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBzdGF0dXNSZXF1aXJlZENvZGluZygpOkZtU3RhdHVzQ29kaW5nVHlwZSB7XHJcbiAgICByZXR1cm4gRm1TdGF0dXNDb2RpbmdzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIHB1cnBvc2UgKENvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0LnB1cnBvc2UpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBwdXJwb3NlUmVxdWlyZWRDb2RpbmcoKTpFbGlnaWJpbGl0eXJlcXVlc3RQdXJwb3NlQ29kaW5nVHlwZSB7XHJcbiAgICByZXR1cm4gRWxpZ2liaWxpdHlyZXF1ZXN0UHVycG9zZUNvZGluZ3M7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAoIXRoaXNbJ3Jlc291cmNlVHlwZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsICBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgcmVzb3VyY2VUeXBlOlwiQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RcIiBmaGlyOiBDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdC5yZXNvdXJjZVR5cGU6XCJDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdFwiJywgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImlkZW50aWZpZXJcIl0pIHsgdGhpcy5pZGVudGlmaWVyLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKCF0aGlzWydzdGF0dXMnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCAgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHN0YXR1czpGbVN0YXR1c0NvZGVUeXBlIGZoaXI6IENvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0LnN0YXR1czpjb2RlJywgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInByaW9yaXR5XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucHJpb3JpdHkuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICghdGhpc1sncHVycG9zZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsICBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgcHVycG9zZTpFbGlnaWJpbGl0eXJlcXVlc3RQdXJwb3NlQ29kZVR5cGVbXSBmaGlyOiBDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdC5wdXJwb3NlOmNvZGUnLCB9KTtcclxuICAgIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkodGhpcy5wdXJwb3NlKSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnc3RydWN0dXJlJywgIGRpYWdub3N0aWNzOiAnRm91bmQgc2NhbGFyIGluIGFycmF5IHByb3BlcnR5IHB1cnBvc2U6RWxpZ2liaWxpdHlyZXF1ZXN0UHVycG9zZUNvZGVUeXBlW10gZmhpcjogQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3QucHVycG9zZTpjb2RlJywgfSk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMucHVycG9zZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBwdXJwb3NlOkVsaWdpYmlsaXR5cmVxdWVzdFB1cnBvc2VDb2RlVHlwZVtdIGZoaXI6IENvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0LnB1cnBvc2U6Y29kZScsIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCF0aGlzWydwYXRpZW50J10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBwYXRpZW50OmZoaXIuUmVmZXJlbmNlIGZoaXI6IENvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0LnBhdGllbnQ6UmVmZXJlbmNlJywgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInBhdGllbnRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5wYXRpZW50LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAoIXRoaXNbJ2NyZWF0ZWQnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCAgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IGNyZWF0ZWQ6Zmhpci5GaGlyRGF0ZVRpbWUgZmhpcjogQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3QuY3JlYXRlZDpkYXRlVGltZScsIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJjcmVhdGVkXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY3JlYXRlZC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJlbnRlcmVyXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZW50ZXJlci5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJwcm92aWRlclwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnByb3ZpZGVyLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAoIXRoaXNbJ2luc3VyZXInXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCAgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IGluc3VyZXI6Zmhpci5SZWZlcmVuY2UgZmhpcjogQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3QuaW5zdXJlcjpSZWZlcmVuY2UnLCB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiaW5zdXJlclwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmluc3VyZXIuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiZmFjaWxpdHlcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5mYWNpbGl0eS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJzdXBwb3J0aW5nSW5mb1wiXSkgeyB0aGlzLnN1cHBvcnRpbmdJbmZvLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJpbnN1cmFuY2VcIl0pIHsgdGhpcy5pbnN1cmFuY2UuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcIml0ZW1cIl0pIHsgdGhpcy5pdGVtLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuIl19