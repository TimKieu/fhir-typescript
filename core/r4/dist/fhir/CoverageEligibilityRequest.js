// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: CoverageEligibilityRequest
import * as fhir from '../fhir.js';
// @ts-ignore
import { FmStatusVsValidation } from '../fhirValueSets/FmStatusVsValidation.js';
// @ts-ignore
import { EligibilityrequestPurposeVsValidation } from '../fhirValueSets/EligibilityrequestPurposeVsValidation.js';
/**
 * Often there are multiple jurisdiction specific valuesets which are required.
 */
export class CoverageEligibilityRequestSupportingInfo extends fhir.BackboneElement {
    /**
     * Default constructor for CoverageEligibilityRequestSupportingInfo - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['sequence'] !== undefined) {
            this.sequence = new fhir.FhirPositiveInt({ value: source.sequence }, options);
        }
        else {
            this.sequence = null;
        }
        if (source['_sequence']) {
            if (this.sequence) {
                this.sequence.addExtendedProperties(source._sequence);
            }
            else {
                this.sequence = new fhir.FhirPositiveInt(source._sequence, options);
            }
        }
        if (source['information']) {
            this.information = new fhir.Reference(source.information, options);
        }
        else {
            this.information = null;
        }
        if (source['appliesToAll'] !== undefined) {
            this.appliesToAll = new fhir.FhirBoolean({ value: source.appliesToAll }, options);
        }
        if (source['_appliesToAll']) {
            if (this.appliesToAll) {
                this.appliesToAll.addExtendedProperties(source._appliesToAll);
            }
            else {
                this.appliesToAll = new fhir.FhirBoolean(source._appliesToAll, options);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'CoverageEligibilityRequest.supportingInfo';
        }
        iss.push(...this.vRS('sequence', exp));
        iss.push(...this.vRS('information', exp));
        iss.push(...this.vOS('appliesToAll', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
CoverageEligibilityRequestSupportingInfo._fts_dataType = 'CoverageEligibilityRequestSupportingInfo';
/**
 * All insurance coverages for the patient which may be applicable for reimbursement, of the products and services listed in the claim, are typically provided in the claim to allow insurers to confirm the ordering of the insurance coverages relative to local 'coordination of benefit' rules. One coverage (and only one) with 'focal=true' is to be used in the adjudication of this claim. Coverages appearing before the focal Coverage in the list, and where 'subrogation=false', should provide a reference to the ClaimResponse containing the adjudication results of the prior claim.
 */
export class CoverageEligibilityRequestInsurance extends fhir.BackboneElement {
    /**
     * Default constructor for CoverageEligibilityRequestInsurance - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['focal'] !== undefined) {
            this.focal = new fhir.FhirBoolean({ value: source.focal }, options);
        }
        if (source['_focal']) {
            if (this.focal) {
                this.focal.addExtendedProperties(source._focal);
            }
            else {
                this.focal = new fhir.FhirBoolean(source._focal, options);
            }
        }
        if (source['coverage']) {
            this.coverage = new fhir.Reference(source.coverage, options);
        }
        else {
            this.coverage = null;
        }
        if (source['businessArrangement'] !== undefined) {
            this.businessArrangement = new fhir.FhirString({ value: source.businessArrangement }, options);
        }
        if (source['_businessArrangement']) {
            if (this.businessArrangement) {
                this.businessArrangement.addExtendedProperties(source._businessArrangement);
            }
            else {
                this.businessArrangement = new fhir.FhirString(source._businessArrangement, options);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'CoverageEligibilityRequest.insurance';
        }
        iss.push(...this.vOS('focal', exp));
        iss.push(...this.vRS('coverage', exp));
        iss.push(...this.vOS('businessArrangement', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
CoverageEligibilityRequestInsurance._fts_dataType = 'CoverageEligibilityRequestInsurance';
/**
 * Patient diagnosis for which care is sought.
 */
export class CoverageEligibilityRequestItemDiagnosis extends fhir.BackboneElement {
    /**
     * Default constructor for CoverageEligibilityRequestItemDiagnosis - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['diagnosis']) {
            this.diagnosis = source.diagnosis;
        }
        else if (source['diagnosisCodeableConcept']) {
            this.diagnosis = new fhir.CodeableConcept(source.diagnosisCodeableConcept, options);
        }
        else if (source['diagnosisReference']) {
            this.diagnosis = new fhir.Reference(source.diagnosisReference, options);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'CoverageEligibilityRequest.item.diagnosis';
        }
        iss.push(...this.vOS('diagnosis', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
CoverageEligibilityRequestItemDiagnosis._fts_dataType = 'CoverageEligibilityRequestItemDiagnosis';
/**
 * Internal flag to properly serialize choice-type element CoverageEligibilityRequest.item.diagnosis.diagnosis[x]
 */
CoverageEligibilityRequestItemDiagnosis._fts_diagnosisIsChoice = true;
/**
 * Service categories or billable services for which benefit details and/or an authorization prior to service delivery may be required by the payor.
 */
export class CoverageEligibilityRequestItem extends fhir.BackboneElement {
    /**
     * Default constructor for CoverageEligibilityRequestItem - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['supportingInfoSequence'] !== undefined) {
            this.supportingInfoSequence = source.supportingInfoSequence.map((x) => new fhir.FhirPositiveInt({ value: x }, options));
        }
        else {
            this.supportingInfoSequence = [];
        }
        if (source['_supportingInfoSequence']) {
            source._supportingInfoSequence.forEach((x, i) => {
                if (this.supportingInfoSequence.length >= i) {
                    if (x) {
                        this.supportingInfoSequence[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.supportingInfoSequence.push(new fhir.FhirPositiveInt(x));
                    }
                }
            });
        }
        if (source['category']) {
            this.category = new fhir.CodeableConcept(source.category, options);
        }
        if (source['productOrService']) {
            this.productOrService = new fhir.CodeableConcept(source.productOrService, options);
        }
        if (source['modifier']) {
            this.modifier = source.modifier.map((x) => new fhir.CodeableConcept(x, options));
        }
        else {
            this.modifier = [];
        }
        if (source['provider']) {
            this.provider = new fhir.Reference(source.provider, options);
        }
        if (source['quantity']) {
            this.quantity = new fhir.Quantity(source.quantity, options);
        }
        if (source['unitPrice']) {
            this.unitPrice = new fhir.Money(source.unitPrice, options);
        }
        if (source['facility']) {
            this.facility = new fhir.Reference(source.facility, options);
        }
        if (source['diagnosis']) {
            this.diagnosis = source.diagnosis.map((x) => new fhir.CoverageEligibilityRequestItemDiagnosis(x, options));
        }
        else {
            this.diagnosis = [];
        }
        if (source['detail']) {
            this.detail = source.detail.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.detail = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'CoverageEligibilityRequest.item';
        }
        iss.push(...this.vOA('supportingInfoSequence', exp));
        iss.push(...this.vOS('category', exp));
        iss.push(...this.vOS('productOrService', exp));
        iss.push(...this.vOA('modifier', exp));
        iss.push(...this.vOS('provider', exp));
        iss.push(...this.vOS('quantity', exp));
        iss.push(...this.vOS('unitPrice', exp));
        iss.push(...this.vOS('facility', exp));
        iss.push(...this.vOA('diagnosis', exp));
        iss.push(...this.vOA('detail', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
CoverageEligibilityRequestItem._fts_dataType = 'CoverageEligibilityRequestItem';
/**
 * The CoverageEligibilityRequest provides patient and insurance coverage information to an insurer for them to respond, in the form of an CoverageEligibilityResponse, with information regarding whether the stated coverage is valid and in-force and optionally to provide the insurance details of the policy.
 */
export class CoverageEligibilityRequest extends fhir.DomainResource {
    /**
     * Default constructor for CoverageEligibilityRequest - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'CoverageEligibilityRequest';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x, options));
        }
        else {
            this.identifier = [];
        }
        if (source['status'] !== undefined) {
            this.status = new fhir.FhirCode({ value: source.status }, options);
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status, options);
            }
        }
        if (source['priority']) {
            this.priority = new fhir.CodeableConcept(source.priority, options);
        }
        if (source['purpose'] !== undefined) {
            this.purpose = source.purpose.map((x) => new fhir.FhirCode({ value: x }, options));
        }
        else {
            this.purpose = [];
        }
        if (source['_purpose']) {
            source._purpose.forEach((x, i) => {
                if (this.purpose.length >= i) {
                    if (x) {
                        this.purpose[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.purpose.push(new fhir.FhirCode(x));
                    }
                }
            });
        }
        if (source['patient']) {
            this.patient = new fhir.Reference(source.patient, options);
        }
        else {
            this.patient = null;
        }
        if (source['serviced']) {
            this.serviced = source.serviced;
        }
        else if (source['servicedDate'] !== undefined) {
            this.serviced = new fhir.FhirDate({ value: source.servicedDate }, options);
        }
        else if (source['servicedPeriod']) {
            this.serviced = new fhir.Period(source.servicedPeriod, options);
        }
        if (source['created'] !== undefined) {
            this.created = new fhir.FhirDateTime({ value: source.created }, options);
        }
        else {
            this.created = null;
        }
        if (source['_created']) {
            if (this.created) {
                this.created.addExtendedProperties(source._created);
            }
            else {
                this.created = new fhir.FhirDateTime(source._created, options);
            }
        }
        if (source['enterer']) {
            this.enterer = new fhir.Reference(source.enterer, options);
        }
        if (source['provider']) {
            this.provider = new fhir.Reference(source.provider, options);
        }
        if (source['insurer']) {
            this.insurer = new fhir.Reference(source.insurer, options);
        }
        else {
            this.insurer = null;
        }
        if (source['facility']) {
            this.facility = new fhir.Reference(source.facility, options);
        }
        if (source['supportingInfo']) {
            this.supportingInfo = source.supportingInfo.map((x) => new fhir.CoverageEligibilityRequestSupportingInfo(x, options));
        }
        else {
            this.supportingInfo = [];
        }
        if (source['insurance']) {
            this.insurance = source.insurance.map((x) => new fhir.CoverageEligibilityRequestInsurance(x, options));
        }
        else {
            this.insurance = [];
        }
        if (source['item']) {
            this.item = source.item.map((x) => new fhir.CoverageEligibilityRequestItem(x, options));
        }
        else {
            this.item = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'CoverageEligibilityRequest';
        }
        iss.push(...this.vOA('identifier', exp));
        iss.push(...this.vRSV('status', exp, 'FmStatus', FmStatusVsValidation, 'r'));
        iss.push(...this.vOS('priority', exp));
        iss.push(...this.vRAV('purpose', exp, 'EligibilityrequestPurpose', EligibilityrequestPurposeVsValidation, 'r'));
        iss.push(...this.vRS('patient', exp));
        iss.push(...this.vOS('serviced', exp));
        iss.push(...this.vRS('created', exp));
        iss.push(...this.vOS('enterer', exp));
        iss.push(...this.vOS('provider', exp));
        iss.push(...this.vRS('insurer', exp));
        iss.push(...this.vOS('facility', exp));
        iss.push(...this.vOA('supportingInfo', exp));
        iss.push(...this.vOA('insurance', exp));
        iss.push(...this.vOA('item', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
CoverageEligibilityRequest._fts_dataType = 'CoverageEligibilityRequest';
/**
 * Internal flag to properly serialize choice-type element CoverageEligibilityRequest.serviced[x]
 */
CoverageEligibilityRequest._fts_servicedIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3QuanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL0NvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQiwrQ0FBK0M7QUFDL0Msa0NBQWtDO0FBQ2xDLDRDQUE0QztBQUU1QyxPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQWdCbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLDBDQUEwQyxDQUFDO0FBT2hGLGFBQWE7QUFDYixPQUFPLEVBQUUscUNBQXFDLEVBQUUsTUFBTSwyREFBMkQsQ0FBQztBQTJCbEg7O0dBRUc7QUFDSCxNQUFNLE9BQU8sd0NBQXlDLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFpQmhGOztPQUVHO0lBQ0gsWUFBWSxTQUErRCxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUNySCxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLFVBQVUsQ0FBQyxLQUFLLFNBQVMsRUFBRTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxRQUFRLEVBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztTQUFFO2FBQ2pIO1lBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7U0FBRTtRQUM5QixJQUFJLE1BQU0sQ0FBQyxXQUFXLENBQUMsRUFBRTtZQUN2QixJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7Z0JBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsU0FBVSxDQUFDLENBQUM7YUFBRTtpQkFDekU7Z0JBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLFNBQThD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QyxDQUFDO1FBQ3ZELElBQUksR0FBRyxLQUFLLEVBQUUsRUFBRTtZQUFFLEdBQUcsR0FBRyw0QkFBNEIsQ0FBQTtTQUFFO1FBQ3RELEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3hDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBQyxHQUFHLEVBQUMsVUFBVSxFQUFDLG9CQUFvQixFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDekUsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFDLEdBQUcsRUFBQywyQkFBMkIsRUFBQyxxQ0FBcUMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzVHLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3JDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3RDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3JDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3JDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3RDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3JDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3RDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDNUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbEMsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDOztBQXZJRDs7R0FFRztBQUM2Qix3Q0FBYSxHQUFVLDRCQUE0QixDQUFDO0FBNkJwRjs7R0FFRztBQUN1QixnREFBcUIsR0FBUSxJQUFJLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjQuY29yZSB2ZXJzaW9uOiA0LjAuMVxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IENvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0XHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBFeEJlbmVmaXRjYXRlZ29yeUNvZGVzLCAgRXhCZW5lZml0Y2F0ZWdvcnlDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRXhCZW5lZml0Y2F0ZWdvcnlDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRXhCZW5lZml0Y2F0ZWdvcnlWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0V4QmVuZWZpdGNhdGVnb3J5VnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBTZXJ2aWNlVXNjbHNDb2RlcywgIFNlcnZpY2VVc2Nsc0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9TZXJ2aWNlVXNjbHNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgU2VydmljZVVzY2xzVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9TZXJ2aWNlVXNjbHNWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENsYWltTW9kaWZpZXJzQ29kZXMsICBDbGFpbU1vZGlmaWVyc0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9DbGFpbU1vZGlmaWVyc0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDbGFpbU1vZGlmaWVyc1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ2xhaW1Nb2RpZmllcnNWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEZtU3RhdHVzQ29kZXMsICBGbVN0YXR1c0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9GbVN0YXR1c0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBGbVN0YXR1c1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRm1TdGF0dXNWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFByb2Nlc3NQcmlvcml0eUNvZGVzLCAgUHJvY2Vzc1ByaW9yaXR5Q29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1Byb2Nlc3NQcmlvcml0eUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBQcm9jZXNzUHJpb3JpdHlWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1Byb2Nlc3NQcmlvcml0eVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRWxpZ2liaWxpdHlyZXF1ZXN0UHVycG9zZUNvZGVzLCAgRWxpZ2liaWxpdHlyZXF1ZXN0UHVycG9zZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9FbGlnaWJpbGl0eXJlcXVlc3RQdXJwb3NlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEVsaWdpYmlsaXR5cmVxdWVzdFB1cnBvc2VWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0VsaWdpYmlsaXR5cmVxdWVzdFB1cnBvc2VWc1ZhbGlkYXRpb24uanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RTdXBwb3J0aW5nSW5mbyB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdFN1cHBvcnRpbmdJbmZvQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogQSBudW1iZXIgdG8gdW5pcXVlbHkgaWRlbnRpZnkgc3VwcG9ydGluZyBpbmZvcm1hdGlvbiBlbnRyaWVzLlxyXG4gICAqL1xyXG4gIHNlcXVlbmNlOiBmaGlyLkZoaXJQb3NpdGl2ZUludHxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdC5zdXBwb3J0aW5nSW5mby5zZXF1ZW5jZVxyXG4gICAqL1xyXG4gIF9zZXF1ZW5jZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQ291bGQgYmUgdXNlZCB0byBwcm92aWRlIHJlZmVyZW5jZXMgdG8gb3RoZXIgcmVzb3VyY2VzLCBkb2N1bWVudC4gRm9yIGV4YW1wbGUgY291bGQgY29udGFpbiBhIFBERiBpbiBhbiBBdHRhY2htZW50IG9mIHRoZSBQb2xpY2UgUmVwb3J0IGZvciBhbiBBY2NpZGVudC5cclxuICAgKi9cclxuICBpbmZvcm1hdGlvbjogZmhpci5SZWZlcmVuY2VBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIHN1cHBvcnRpbmcgbWF0ZXJpYWxzIGFyZSBhcHBsaWNhYmxlIGZvciBhbGwgZGV0YWlsIGl0ZW1zLCBwcm9kdWN0L3NlcnZjZSBjYXRlZ29yaWVzIGFuZCBzcGVjaWZpYyBiaWxsaW5nIGNvZGVzLlxyXG4gICAqL1xyXG4gIGFwcGxpZXNUb0FsbD86IGZoaXIuRmhpckJvb2xlYW58Ym9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0LnN1cHBvcnRpbmdJbmZvLmFwcGxpZXNUb0FsbFxyXG4gICAqL1xyXG4gIF9hcHBsaWVzVG9BbGw/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG59XHJcblxyXG4vKipcclxuICogT2Z0ZW4gdGhlcmUgYXJlIG11bHRpcGxlIGp1cmlzZGljdGlvbiBzcGVjaWZpYyB2YWx1ZXNldHMgd2hpY2ggYXJlIHJlcXVpcmVkLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0U3VwcG9ydGluZ0luZm8gZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdFN1cHBvcnRpbmdJbmZvJztcclxuICAvKipcclxuICAgKiBBIG51bWJlciB0byB1bmlxdWVseSBpZGVudGlmeSBzdXBwb3J0aW5nIGluZm9ybWF0aW9uIGVudHJpZXMuXHJcbiAgICovXHJcbiAgcHVibGljIHNlcXVlbmNlOiBmaGlyLkZoaXJQb3NpdGl2ZUludHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIENvdWxkIGJlIHVzZWQgdG8gcHJvdmlkZSByZWZlcmVuY2VzIHRvIG90aGVyIHJlc291cmNlcywgZG9jdW1lbnQuIEZvciBleGFtcGxlIGNvdWxkIGNvbnRhaW4gYSBQREYgaW4gYW4gQXR0YWNobWVudCBvZiB0aGUgUG9saWNlIFJlcG9ydCBmb3IgYW4gQWNjaWRlbnQuXHJcbiAgICovXHJcbiAgcHVibGljIGluZm9ybWF0aW9uOiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzdXBwb3J0aW5nIG1hdGVyaWFscyBhcmUgYXBwbGljYWJsZSBmb3IgYWxsIGRldGFpbCBpdGVtcywgcHJvZHVjdC9zZXJ2Y2UgY2F0ZWdvcmllcyBhbmQgc3BlY2lmaWMgYmlsbGluZyBjb2Rlcy5cclxuICAgKi9cclxuICBwdWJsaWMgYXBwbGllc1RvQWxsPzogZmhpci5GaGlyQm9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RTdXBwb3J0aW5nSW5mbyAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0U3VwcG9ydGluZ0luZm9BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnc2VxdWVuY2UnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuc2VxdWVuY2UgPSBuZXcgZmhpci5GaGlyUG9zaXRpdmVJbnQoe3ZhbHVlOiBzb3VyY2Uuc2VxdWVuY2V9LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc2VxdWVuY2UgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfc2VxdWVuY2UnXSkge1xyXG4gICAgICBpZiAodGhpcy5zZXF1ZW5jZSkgeyB0aGlzLnNlcXVlbmNlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3NlcXVlbmNlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc2VxdWVuY2UgPSBuZXcgZmhpci5GaGlyUG9zaXRpdmVJbnQoc291cmNlLl9zZXF1ZW5jZSBhcyBQYXJ0aWFsPGZoaXIuRmhpclBvc2l0aXZlSW50QXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydpbmZvcm1hdGlvbiddKSB7IHRoaXMuaW5mb3JtYXRpb24gPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmluZm9ybWF0aW9uLCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaW5mb3JtYXRpb24gPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydhcHBsaWVzVG9BbGwnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuYXBwbGllc1RvQWxsID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oe3ZhbHVlOiBzb3VyY2UuYXBwbGllc1RvQWxsfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19hcHBsaWVzVG9BbGwnXSkge1xyXG4gICAgICBpZiAodGhpcy5hcHBsaWVzVG9BbGwpIHsgdGhpcy5hcHBsaWVzVG9BbGwuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fYXBwbGllc1RvQWxsISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuYXBwbGllc1RvQWxsID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oc291cmNlLl9hcHBsaWVzVG9BbGwgYXMgUGFydGlhbDxmaGlyLkZoaXJCb29sZWFuQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3Quc3VwcG9ydGluZ0luZm8nIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdzZXF1ZW5jZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygnaW5mb3JtYXRpb24nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2FwcGxpZXNUb0FsbCcsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RJbnN1cmFuY2UgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RJbnN1cmFuY2VBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBBIHBhdGllbnQgbWF5ICh3aWxsKSBoYXZlIG11bHRpcGxlIGluc3VyYW5jZSBwb2xpY2llcyB3aGljaCBwcm92aWRlIHJlaW1idXJlbWVudCBmb3IgaGVhbHRoY2FyZSBzZXJ2aWNlcyBhbmQgcHJvZHVjdHMuIEZvciBleGFtcGxlIGEgcGVyc29uIG1heSBhbHNvIGJlIGNvdmVyZWQgYnkgdGhlaXIgc3BvdXNlJ3MgcG9saWN5IGFuZCBib3RoIGFwcGVhciBpbiB0aGUgbGlzdCAoYW5kIG1heSBiZSBmcm9tIHRoZSBzYW1lIGluc3VyZXIpLiBUaGlzIGZsYWcgd2lsbCBiZSBzZXQgdG8gdHJ1ZSBmb3Igb25seSBvbmUgb2YgdGhlIGxpc3RlZCBwb2xpY2llcyBhbmQgdGhhdCBwb2xpY3kgd2lsbCBiZSB1c2VkIGZvciBldmFsdWF0aW5nIHRoaXMgcmVxdWVzdC4gT3RoZXIgcmVxdWVzdHMgd291bGQgYmUgY3JlYXRlZCB0byByZXF1ZXN0IGV2YWx1YXRpb24gYWdhaW5zdCB0aGUgb3RoZXIgbGlzdGVkIHBvbGljaWVzLlxyXG4gICAqL1xyXG4gIGZvY2FsPzogZmhpci5GaGlyQm9vbGVhbnxib29sZWFufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3QuaW5zdXJhbmNlLmZvY2FsXHJcbiAgICovXHJcbiAgX2ZvY2FsPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBSZWZlcmVuY2UgdG8gdGhlIGluc3VyYW5jZSBjYXJkIGxldmVsIGluZm9ybWF0aW9uIGNvbnRhaW5lZCBpbiB0aGUgQ292ZXJhZ2UgcmVzb3VyY2UuIFRoZSBjb3ZlcmFnZSBpc3N1aW5nIGluc3VyZXIgd2lsbCB1c2UgdGhlc2UgZGV0YWlscyB0byBsb2NhdGUgdGhlIHBhdGllbnQncyBhY3R1YWwgY292ZXJhZ2Ugd2l0aGluIHRoZSBpbnN1cmVyJ3MgaW5mb3JtYXRpb24gc3lzdGVtLlxyXG4gICAqL1xyXG4gIGNvdmVyYWdlOiBmaGlyLlJlZmVyZW5jZUFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBBIGJ1c2luZXNzIGFncmVlbWVudCBudW1iZXIgZXN0YWJsaXNoZWQgYmV0d2VlbiB0aGUgcHJvdmlkZXIgYW5kIHRoZSBpbnN1cmVyIGZvciBzcGVjaWFsIGJ1c2luZXNzIHByb2Nlc3NpbmcgcHVycG9zZXMuXHJcbiAgICovXHJcbiAgYnVzaW5lc3NBcnJhbmdlbWVudD86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdC5pbnN1cmFuY2UuYnVzaW5lc3NBcnJhbmdlbWVudFxyXG4gICAqL1xyXG4gIF9idXNpbmVzc0FycmFuZ2VtZW50PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIEFsbCBpbnN1cmFuY2UgY292ZXJhZ2VzIGZvciB0aGUgcGF0aWVudCB3aGljaCBtYXkgYmUgYXBwbGljYWJsZSBmb3IgcmVpbWJ1cnNlbWVudCwgb2YgdGhlIHByb2R1Y3RzIGFuZCBzZXJ2aWNlcyBsaXN0ZWQgaW4gdGhlIGNsYWltLCBhcmUgdHlwaWNhbGx5IHByb3ZpZGVkIGluIHRoZSBjbGFpbSB0byBhbGxvdyBpbnN1cmVycyB0byBjb25maXJtIHRoZSBvcmRlcmluZyBvZiB0aGUgaW5zdXJhbmNlIGNvdmVyYWdlcyByZWxhdGl2ZSB0byBsb2NhbCAnY29vcmRpbmF0aW9uIG9mIGJlbmVmaXQnIHJ1bGVzLiBPbmUgY292ZXJhZ2UgKGFuZCBvbmx5IG9uZSkgd2l0aCAnZm9jYWw9dHJ1ZScgaXMgdG8gYmUgdXNlZCBpbiB0aGUgYWRqdWRpY2F0aW9uIG9mIHRoaXMgY2xhaW0uIENvdmVyYWdlcyBhcHBlYXJpbmcgYmVmb3JlIHRoZSBmb2NhbCBDb3ZlcmFnZSBpbiB0aGUgbGlzdCwgYW5kIHdoZXJlICdzdWJyb2dhdGlvbj1mYWxzZScsIHNob3VsZCBwcm92aWRlIGEgcmVmZXJlbmNlIHRvIHRoZSBDbGFpbVJlc3BvbnNlIGNvbnRhaW5pbmcgdGhlIGFkanVkaWNhdGlvbiByZXN1bHRzIG9mIHRoZSBwcmlvciBjbGFpbS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdEluc3VyYW5jZSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0NvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0SW5zdXJhbmNlJztcclxuICAvKipcclxuICAgKiBBIHBhdGllbnQgbWF5ICh3aWxsKSBoYXZlIG11bHRpcGxlIGluc3VyYW5jZSBwb2xpY2llcyB3aGljaCBwcm92aWRlIHJlaW1idXJlbWVudCBmb3IgaGVhbHRoY2FyZSBzZXJ2aWNlcyBhbmQgcHJvZHVjdHMuIEZvciBleGFtcGxlIGEgcGVyc29uIG1heSBhbHNvIGJlIGNvdmVyZWQgYnkgdGhlaXIgc3BvdXNlJ3MgcG9saWN5IGFuZCBib3RoIGFwcGVhciBpbiB0aGUgbGlzdCAoYW5kIG1heSBiZSBmcm9tIHRoZSBzYW1lIGluc3VyZXIpLiBUaGlzIGZsYWcgd2lsbCBiZSBzZXQgdG8gdHJ1ZSBmb3Igb25seSBvbmUgb2YgdGhlIGxpc3RlZCBwb2xpY2llcyBhbmQgdGhhdCBwb2xpY3kgd2lsbCBiZSB1c2VkIGZvciBldmFsdWF0aW5nIHRoaXMgcmVxdWVzdC4gT3RoZXIgcmVxdWVzdHMgd291bGQgYmUgY3JlYXRlZCB0byByZXF1ZXN0IGV2YWx1YXRpb24gYWdhaW5zdCB0aGUgb3RoZXIgbGlzdGVkIHBvbGljaWVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBmb2NhbD86IGZoaXIuRmhpckJvb2xlYW58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFJlZmVyZW5jZSB0byB0aGUgaW5zdXJhbmNlIGNhcmQgbGV2ZWwgaW5mb3JtYXRpb24gY29udGFpbmVkIGluIHRoZSBDb3ZlcmFnZSByZXNvdXJjZS4gVGhlIGNvdmVyYWdlIGlzc3VpbmcgaW5zdXJlciB3aWxsIHVzZSB0aGVzZSBkZXRhaWxzIHRvIGxvY2F0ZSB0aGUgcGF0aWVudCdzIGFjdHVhbCBjb3ZlcmFnZSB3aXRoaW4gdGhlIGluc3VyZXIncyBpbmZvcm1hdGlvbiBzeXN0ZW0uXHJcbiAgICovXHJcbiAgcHVibGljIGNvdmVyYWdlOiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEEgYnVzaW5lc3MgYWdyZWVtZW50IG51bWJlciBlc3RhYmxpc2hlZCBiZXR3ZWVuIHRoZSBwcm92aWRlciBhbmQgdGhlIGluc3VyZXIgZm9yIHNwZWNpYWwgYnVzaW5lc3MgcHJvY2Vzc2luZyBwdXJwb3Nlcy5cclxuICAgKi9cclxuICBwdWJsaWMgYnVzaW5lc3NBcnJhbmdlbWVudD86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RJbnN1cmFuY2UgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdEluc3VyYW5jZUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydmb2NhbCddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5mb2NhbCA9IG5ldyBmaGlyLkZoaXJCb29sZWFuKHt2YWx1ZTogc291cmNlLmZvY2FsfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19mb2NhbCddKSB7XHJcbiAgICAgIGlmICh0aGlzLmZvY2FsKSB7IHRoaXMuZm9jYWwuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZm9jYWwhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5mb2NhbCA9IG5ldyBmaGlyLkZoaXJCb29sZWFuKHNvdXJjZS5fZm9jYWwgYXMgUGFydGlhbDxmaGlyLkZoaXJCb29sZWFuQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydjb3ZlcmFnZSddKSB7IHRoaXMuY292ZXJhZ2UgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmNvdmVyYWdlLCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY292ZXJhZ2UgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydidXNpbmVzc0FycmFuZ2VtZW50J10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLmJ1c2luZXNzQXJyYW5nZW1lbnQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmJ1c2luZXNzQXJyYW5nZW1lbnR9LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2J1c2luZXNzQXJyYW5nZW1lbnQnXSkge1xyXG4gICAgICBpZiAodGhpcy5idXNpbmVzc0FycmFuZ2VtZW50KSB7IHRoaXMuYnVzaW5lc3NBcnJhbmdlbWVudC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9idXNpbmVzc0FycmFuZ2VtZW50ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuYnVzaW5lc3NBcnJhbmdlbWVudCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9idXNpbmVzc0FycmFuZ2VtZW50IGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3QuaW5zdXJhbmNlJyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnZm9jYWwnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ2NvdmVyYWdlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdidXNpbmVzc0FycmFuZ2VtZW50JyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdEl0ZW1EaWFnbm9zaXMgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RJdGVtRGlhZ25vc2lzQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIG5hdHVyZSBvZiBpbGxuZXNzIG9yIHByb2JsZW0gaW4gYSBjb2RlZCBmb3JtIG9yIGFzIGEgcmVmZXJlbmNlIHRvIGFuIGV4dGVybmFsIGRlZmluZWQgQ29uZGl0aW9uLlxyXG4gICAqL1xyXG4gIGRpYWdub3Npcz86IGZoaXIuQ29kZWFibGVDb25jZXB0fGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbmF0dXJlIG9mIGlsbG5lc3Mgb3IgcHJvYmxlbSBpbiBhIGNvZGVkIGZvcm0gb3IgYXMgYSByZWZlcmVuY2UgdG8gYW4gZXh0ZXJuYWwgZGVmaW5lZCBDb25kaXRpb24uXHJcbiAgICovXHJcbiAgZGlhZ25vc2lzQ29kZWFibGVDb25jZXB0PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbmF0dXJlIG9mIGlsbG5lc3Mgb3IgcHJvYmxlbSBpbiBhIGNvZGVkIGZvcm0gb3IgYXMgYSByZWZlcmVuY2UgdG8gYW4gZXh0ZXJuYWwgZGVmaW5lZCBDb25kaXRpb24uXHJcbiAgICovXHJcbiAgZGlhZ25vc2lzUmVmZXJlbmNlPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFBhdGllbnQgZGlhZ25vc2lzIGZvciB3aGljaCBjYXJlIGlzIHNvdWdodC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdEl0ZW1EaWFnbm9zaXMgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdEl0ZW1EaWFnbm9zaXMnO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBuYXR1cmUgb2YgaWxsbmVzcyBvciBwcm9ibGVtIGluIGEgY29kZWQgZm9ybSBvciBhcyBhIHJlZmVyZW5jZSB0byBhbiBleHRlcm5hbCBkZWZpbmVkIENvbmRpdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgZGlhZ25vc2lzPzogKGZoaXIuQ29kZWFibGVDb25jZXB0fGZoaXIuUmVmZXJlbmNlKXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdC5pdGVtLmRpYWdub3Npcy5kaWFnbm9zaXNbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfZGlhZ25vc2lzSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RJdGVtRGlhZ25vc2lzIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8Q292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RJdGVtRGlhZ25vc2lzQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2RpYWdub3NpcyddKSB7IHRoaXMuZGlhZ25vc2lzID0gc291cmNlLmRpYWdub3NpczsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydkaWFnbm9zaXNDb2RlYWJsZUNvbmNlcHQnXSkgeyB0aGlzLmRpYWdub3NpcyA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuZGlhZ25vc2lzQ29kZWFibGVDb25jZXB0LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydkaWFnbm9zaXNSZWZlcmVuY2UnXSkgeyB0aGlzLmRpYWdub3NpcyA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuZGlhZ25vc2lzUmVmZXJlbmNlLCBvcHRpb25zKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0NvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0Lml0ZW0uZGlhZ25vc2lzJyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnZGlhZ25vc2lzJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdEl0ZW0gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RJdGVtQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogRXhjZXB0aW9ucywgc3BlY2lhbCBjb25kaXRpb25zIGFuZCBzdXBwb3J0aW5nIGluZm9ybWF0aW9uIGFwcGxpY2FibGUgZm9yIHRoaXMgc2VydmljZSBvciBwcm9kdWN0IGxpbmUuXHJcbiAgICovXHJcbiAgc3VwcG9ydGluZ0luZm9TZXF1ZW5jZT86IGZoaXIuRmhpclBvc2l0aXZlSW50W118KG51bWJlcnxudWxsKVtdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3QuaXRlbS5zdXBwb3J0aW5nSW5mb1NlcXVlbmNlXHJcbiAgICovXHJcbiAgX3N1cHBvcnRpbmdJbmZvU2VxdWVuY2U/OihmaGlyLkZoaXJFbGVtZW50QXJnc3xudWxsKVtdO1xyXG4gIC8qKlxyXG4gICAqIEV4YW1wbGVzIGluY2x1ZGUgTWVkaWNhbCBDYXJlLCBQZXJpb2RvbnRpY3MsIFJlbmFsIERpYWx5c2lzLCBWaXNpb24gQ292ZXJhZ2UuXHJcbiAgICovXHJcbiAgY2F0ZWdvcnk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENvZGUgdG8gaW5kaWNhdGUgdGhlIFByb2Zlc3Npb25hbCBTZXJ2aWNlIG9yIFByb2R1Y3Qgc3VwcGxpZWQgKGUuZy4gQ1RQLCBIQ1BDUywgVVNDTFMsIElDRDEwLCBOQ1BEUCwgRElOLCBSeE5vcm0sIEFDSEksIENDSSkuXHJcbiAgICovXHJcbiAgcHJvZHVjdE9yU2VydmljZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRm9yIGV4YW1wbGUgaW4gT3JhbCB3aGV0aGVyIHRoZSB0cmVhdG1lbnQgaXMgY29zbWV0aWMgb3IgYXNzb2NpYXRlZCB3aXRoIFRNSiwgb3IgZm9yIE1lZGljYWwgd2hldGhlciB0aGUgdHJlYXRtZW50IHdhcyBvdXRzaWRlIHRoZSBjbGluaWMgb3Igb3V0IG9mIG9mZmljZSBob3Vycy5cclxuICAgKi9cclxuICBtb2RpZmllcj86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcHJhY3RpdGlvbmVyIHdobyBpcyByZXNwb25zaWJsZSBmb3IgdGhlIHByb2R1Y3Qgb3Igc2VydmljZSB0byBiZSByZW5kZXJlZCB0byB0aGUgcGF0aWVudC5cclxuICAgKi9cclxuICBwcm92aWRlcj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG51bWJlciBvZiByZXBldGl0aW9ucyBvZiBhIHNlcnZpY2Ugb3IgcHJvZHVjdC5cclxuICAgKi9cclxuICBxdWFudGl0eT86IGZoaXIuUXVhbnRpdHlBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgYW1vdW50IGNoYXJnZWQgdG8gdGhlIHBhdGllbnQgYnkgdGhlIHByb3ZpZGVyIGZvciBhIHNpbmdsZSB1bml0LlxyXG4gICAqL1xyXG4gIHVuaXRQcmljZT86IGZoaXIuTW9uZXlBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBGYWNpbGl0eSB3aGVyZSB0aGUgc2VydmljZXMgd2lsbCBiZSBwcm92aWRlZC5cclxuICAgKi9cclxuICBmYWNpbGl0eT86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUGF0aWVudCBkaWFnbm9zaXMgZm9yIHdoaWNoIGNhcmUgaXMgc291Z2h0LlxyXG4gICAqL1xyXG4gIGRpYWdub3Npcz86IGZoaXIuQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RJdGVtRGlhZ25vc2lzQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcGxhbi9wcm9wb3NhbC9vcmRlciBkZXNjcmliaW5nIHRoZSBwcm9wb3NlZCBzZXJ2aWNlIGluIGRldGFpbC5cclxuICAgKi9cclxuICBkZXRhaWw/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXJ2aWNlIGNhdGVnb3JpZXMgb3IgYmlsbGFibGUgc2VydmljZXMgZm9yIHdoaWNoIGJlbmVmaXQgZGV0YWlscyBhbmQvb3IgYW4gYXV0aG9yaXphdGlvbiBwcmlvciB0byBzZXJ2aWNlIGRlbGl2ZXJ5IG1heSBiZSByZXF1aXJlZCBieSB0aGUgcGF5b3IuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RJdGVtIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RJdGVtJztcclxuICAvKipcclxuICAgKiBFeGNlcHRpb25zLCBzcGVjaWFsIGNvbmRpdGlvbnMgYW5kIHN1cHBvcnRpbmcgaW5mb3JtYXRpb24gYXBwbGljYWJsZSBmb3IgdGhpcyBzZXJ2aWNlIG9yIHByb2R1Y3QgbGluZS5cclxuICAgKi9cclxuICBwdWJsaWMgc3VwcG9ydGluZ0luZm9TZXF1ZW5jZTogZmhpci5GaGlyUG9zaXRpdmVJbnRbXTtcclxuICAvKipcclxuICAgKiBFeGFtcGxlcyBpbmNsdWRlIE1lZGljYWwgQ2FyZSwgUGVyaW9kb250aWNzLCBSZW5hbCBEaWFseXNpcywgVmlzaW9uIENvdmVyYWdlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjYXRlZ29yeT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDb2RlIHRvIGluZGljYXRlIHRoZSBQcm9mZXNzaW9uYWwgU2VydmljZSBvciBQcm9kdWN0IHN1cHBsaWVkIChlLmcuIENUUCwgSENQQ1MsIFVTQ0xTLCBJQ0QxMCwgTkNQRFAsIERJTiwgUnhOb3JtLCBBQ0hJLCBDQ0kpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcm9kdWN0T3JTZXJ2aWNlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEZvciBleGFtcGxlIGluIE9yYWwgd2hldGhlciB0aGUgdHJlYXRtZW50IGlzIGNvc21ldGljIG9yIGFzc29jaWF0ZWQgd2l0aCBUTUosIG9yIGZvciBNZWRpY2FsIHdoZXRoZXIgdGhlIHRyZWF0bWVudCB3YXMgb3V0c2lkZSB0aGUgY2xpbmljIG9yIG91dCBvZiBvZmZpY2UgaG91cnMuXHJcbiAgICovXHJcbiAgcHVibGljIG1vZGlmaWVyOiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwcmFjdGl0aW9uZXIgd2hvIGlzIHJlc3BvbnNpYmxlIGZvciB0aGUgcHJvZHVjdCBvciBzZXJ2aWNlIHRvIGJlIHJlbmRlcmVkIHRvIHRoZSBwYXRpZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcm92aWRlcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbnVtYmVyIG9mIHJlcGV0aXRpb25zIG9mIGEgc2VydmljZSBvciBwcm9kdWN0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBxdWFudGl0eT86IGZoaXIuUXVhbnRpdHl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBhbW91bnQgY2hhcmdlZCB0byB0aGUgcGF0aWVudCBieSB0aGUgcHJvdmlkZXIgZm9yIGEgc2luZ2xlIHVuaXQuXHJcbiAgICovXHJcbiAgcHVibGljIHVuaXRQcmljZT86IGZoaXIuTW9uZXl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEZhY2lsaXR5IHdoZXJlIHRoZSBzZXJ2aWNlcyB3aWxsIGJlIHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBmYWNpbGl0eT86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBQYXRpZW50IGRpYWdub3NpcyBmb3Igd2hpY2ggY2FyZSBpcyBzb3VnaHQuXHJcbiAgICovXHJcbiAgcHVibGljIGRpYWdub3NpczogZmhpci5Db3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdEl0ZW1EaWFnbm9zaXNbXTtcclxuICAvKipcclxuICAgKiBUaGUgcGxhbi9wcm9wb3NhbC9vcmRlciBkZXNjcmliaW5nIHRoZSBwcm9wb3NlZCBzZXJ2aWNlIGluIGRldGFpbC5cclxuICAgKi9cclxuICBwdWJsaWMgZGV0YWlsOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIENvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0SXRlbSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0SXRlbUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydzdXBwb3J0aW5nSW5mb1NlcXVlbmNlJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnN1cHBvcnRpbmdJbmZvU2VxdWVuY2UgPSBzb3VyY2Uuc3VwcG9ydGluZ0luZm9TZXF1ZW5jZS5tYXAoKHgpID0+IG5ldyBmaGlyLkZoaXJQb3NpdGl2ZUludCh7dmFsdWU6IHh9LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN1cHBvcnRpbmdJbmZvU2VxdWVuY2UgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3N1cHBvcnRpbmdJbmZvU2VxdWVuY2UnXSkge1xyXG4gICAgICBzb3VyY2UuX3N1cHBvcnRpbmdJbmZvU2VxdWVuY2UuZm9yRWFjaCgoeCxpKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3VwcG9ydGluZ0luZm9TZXF1ZW5jZS5sZW5ndGggPj0gaSkgeyBpZiAoeCkgeyB0aGlzLnN1cHBvcnRpbmdJbmZvU2VxdWVuY2VbaV0uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHgpOyB9IH1cclxuICAgICAgICBlbHNlIHsgaWYgKHgpIHsgdGhpcy5zdXBwb3J0aW5nSW5mb1NlcXVlbmNlLnB1c2gobmV3IGZoaXIuRmhpclBvc2l0aXZlSW50KHggYXMgUGFydGlhbDxmaGlyLkZoaXJQb3NpdGl2ZUludEFyZ3M+KSk7IH0gfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2NhdGVnb3J5J10pIHsgdGhpcy5jYXRlZ29yeSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY2F0ZWdvcnksIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydwcm9kdWN0T3JTZXJ2aWNlJ10pIHsgdGhpcy5wcm9kdWN0T3JTZXJ2aWNlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5wcm9kdWN0T3JTZXJ2aWNlLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbW9kaWZpZXInXSkgeyB0aGlzLm1vZGlmaWVyID0gc291cmNlLm1vZGlmaWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubW9kaWZpZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJvdmlkZXInXSkgeyB0aGlzLnByb3ZpZGVyID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5wcm92aWRlciwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3F1YW50aXR5J10pIHsgdGhpcy5xdWFudGl0eSA9IG5ldyBmaGlyLlF1YW50aXR5KHNvdXJjZS5xdWFudGl0eSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3VuaXRQcmljZSddKSB7IHRoaXMudW5pdFByaWNlID0gbmV3IGZoaXIuTW9uZXkoc291cmNlLnVuaXRQcmljZSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2ZhY2lsaXR5J10pIHsgdGhpcy5mYWNpbGl0eSA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuZmFjaWxpdHksIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydkaWFnbm9zaXMnXSkgeyB0aGlzLmRpYWdub3NpcyA9IHNvdXJjZS5kaWFnbm9zaXMubWFwKCh4KSA9PiBuZXcgZmhpci5Db3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdEl0ZW1EaWFnbm9zaXMoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5kaWFnbm9zaXMgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGV0YWlsJ10pIHsgdGhpcy5kZXRhaWwgPSBzb3VyY2UuZGV0YWlsLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZGV0YWlsID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdC5pdGVtJyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnc3VwcG9ydGluZ0luZm9TZXF1ZW5jZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnY2F0ZWdvcnknLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3Byb2R1Y3RPclNlcnZpY2UnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ21vZGlmaWVyJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdwcm92aWRlcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygncXVhbnRpdHknLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3VuaXRQcmljZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnZmFjaWxpdHknLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2RpYWdub3NpcycsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnZGV0YWlsJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdEFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIkNvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0XCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgdW5pcXVlIGlkZW50aWZpZXIgYXNzaWduZWQgdG8gdGhpcyBjb3ZlcmFnZSBlbGlnaWJsaXR5IHJlcXVlc3QuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IGlzIGxhYmVsZWQgYXMgYSBtb2RpZmllciBiZWNhdXNlIHRoZSBzdGF0dXMgY29udGFpbnMgY29kZXMgdGhhdCBtYXJrIHRoZSByZXNvdXJjZSBhcyBub3QgY3VycmVudGx5IHZhbGlkLlxyXG4gICAqL1xyXG4gIHN0YXR1czogZmhpci5GaGlyQ29kZTxGbVN0YXR1c0NvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdC5zdGF0dXNcclxuICAgKi9cclxuICBfc3RhdHVzPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBXaGVuIHRoZSByZXF1ZXN0b3IgZXhwZWN0cyB0aGUgcHJvY2Vzc29yIHRvIGNvbXBsZXRlIHByb2Nlc3NpbmcuXHJcbiAgICovXHJcbiAgcHJpb3JpdHk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENvZGUgdG8gc3BlY2lmeSB3aGV0aGVyIHJlcXVlc3Rpbmc6IHByaW9yIGF1dGhvcml6YXRpb24gcmVxdWlyZW1lbnRzIGZvciBzb21lIHNlcnZpY2UgY2F0ZWdvcmllcyBvciBiaWxsaW5nIGNvZGVzOyBiZW5lZml0cyBmb3IgY292ZXJhZ2VzIHNwZWNpZmllZCBvciBkaXNjb3ZlcmVkOyBkaXNjb3ZlcnkgYW5kIHJldHVybiBvZiBjb3ZlcmFnZXMgZm9yIHRoZSBwYXRpZW50OyBhbmQvb3IgdmFsaWRhdGlvbiB0aGF0IHRoZSBzcGVjaWZpZWQgY292ZXJhZ2UgaXMgaW4tZm9yY2UgYXQgdGhlIGRhdGUvcGVyaW9kIHNwZWNpZmllZCBvciAnbm93JyBpZiBub3Qgc3BlY2lmaWVkLlxyXG4gICAqL1xyXG4gIHB1cnBvc2U6IGZoaXIuRmhpckNvZGU8RWxpZ2liaWxpdHlyZXF1ZXN0UHVycG9zZUNvZGVUeXBlPltdfChzdHJpbmd8bnVsbClbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0LnB1cnBvc2VcclxuICAgKi9cclxuICBfcHVycG9zZT86KGZoaXIuRmhpckVsZW1lbnRBcmdzfG51bGwpW107XHJcbiAgLyoqXHJcbiAgICogMS4uMS5cclxuICAgKi9cclxuICBwYXRpZW50OiBmaGlyLlJlZmVyZW5jZUFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSBvciBkYXRlcyB3aGVuIHRoZSBlbmNsb3NlZCBzdWl0ZSBvZiBzZXJ2aWNlcyB3ZXJlIHBlcmZvcm1lZCBvciBjb21wbGV0ZWQuXHJcbiAgICovXHJcbiAgc2VydmljZWQ/OiBmaGlyLkZoaXJEYXRlfGZoaXIuUGVyaW9kfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSBvciBkYXRlcyB3aGVuIHRoZSBlbmNsb3NlZCBzdWl0ZSBvZiBzZXJ2aWNlcyB3ZXJlIHBlcmZvcm1lZCBvciBjb21wbGV0ZWQuXHJcbiAgICovXHJcbiAgc2VydmljZWREYXRlPzogZmhpci5GaGlyRGF0ZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRlIG9yIGRhdGVzIHdoZW4gdGhlIGVuY2xvc2VkIHN1aXRlIG9mIHNlcnZpY2VzIHdlcmUgcGVyZm9ybWVkIG9yIGNvbXBsZXRlZC5cclxuICAgKi9cclxuICBzZXJ2aWNlZFBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgd2hlbiB0aGlzIHJlc291cmNlIHdhcyBjcmVhdGVkLlxyXG4gICAqL1xyXG4gIGNyZWF0ZWQ6IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0LmNyZWF0ZWRcclxuICAgKi9cclxuICBfY3JlYXRlZD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogUGVyc29uIHdobyBjcmVhdGVkIHRoZSByZXF1ZXN0LlxyXG4gICAqL1xyXG4gIGVudGVyZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFR5cGljYWxseSB0aGlzIGZpZWxkIHdvdWxkIGJlIDEuLjEgd2hlcmUgdGhpcyBwYXJ0eSBpcyByZXNwb25zaWJsZSBmb3IgdGhlIGVsaWdpYmlsaXR5IHJlcXVlc3QgYnV0IG5vdCBuZWNlc3NhcmlseSBwcm9mZXNzaW9uYWxseSByZXNwb25zaWJsZSBmb3IgdGhlIHByb3Zpc2lvbiBvZiB0aGUgaW5kaXZpZHVhbCBwcm9kdWN0cyBhbmQgc2VydmljZXMgbGlzdGVkIGJlbG93LlxyXG4gICAqL1xyXG4gIHByb3ZpZGVyPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgSW5zdXJlciB3aG8gaXNzdWVkIHRoZSBjb3ZlcmFnZSBpbiBxdWVzdGlvbiBhbmQgaXMgdGhlIHJlY2lwaWVudCBvZiB0aGUgcmVxdWVzdC5cclxuICAgKi9cclxuICBpbnN1cmVyOiBmaGlyLlJlZmVyZW5jZUFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBGYWNpbGl0eSB3aGVyZSB0aGUgc2VydmljZXMgYXJlIGludGVuZGVkIHRvIGJlIHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGZhY2lsaXR5PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBPZnRlbiB0aGVyZSBhcmUgbXVsdGlwbGUganVyaXNkaWN0aW9uIHNwZWNpZmljIHZhbHVlc2V0cyB3aGljaCBhcmUgcmVxdWlyZWQuXHJcbiAgICovXHJcbiAgc3VwcG9ydGluZ0luZm8/OiBmaGlyLkNvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0U3VwcG9ydGluZ0luZm9BcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFsbCBpbnN1cmFuY2UgY292ZXJhZ2VzIGZvciB0aGUgcGF0aWVudCB3aGljaCBtYXkgYmUgYXBwbGljYWJsZSBmb3IgcmVpbWJ1cnNlbWVudCwgb2YgdGhlIHByb2R1Y3RzIGFuZCBzZXJ2aWNlcyBsaXN0ZWQgaW4gdGhlIGNsYWltLCBhcmUgdHlwaWNhbGx5IHByb3ZpZGVkIGluIHRoZSBjbGFpbSB0byBhbGxvdyBpbnN1cmVycyB0byBjb25maXJtIHRoZSBvcmRlcmluZyBvZiB0aGUgaW5zdXJhbmNlIGNvdmVyYWdlcyByZWxhdGl2ZSB0byBsb2NhbCAnY29vcmRpbmF0aW9uIG9mIGJlbmVmaXQnIHJ1bGVzLiBPbmUgY292ZXJhZ2UgKGFuZCBvbmx5IG9uZSkgd2l0aCAnZm9jYWw9dHJ1ZScgaXMgdG8gYmUgdXNlZCBpbiB0aGUgYWRqdWRpY2F0aW9uIG9mIHRoaXMgY2xhaW0uIENvdmVyYWdlcyBhcHBlYXJpbmcgYmVmb3JlIHRoZSBmb2NhbCBDb3ZlcmFnZSBpbiB0aGUgbGlzdCwgYW5kIHdoZXJlICdzdWJyb2dhdGlvbj1mYWxzZScsIHNob3VsZCBwcm92aWRlIGEgcmVmZXJlbmNlIHRvIHRoZSBDbGFpbVJlc3BvbnNlIGNvbnRhaW5pbmcgdGhlIGFkanVkaWNhdGlvbiByZXN1bHRzIG9mIHRoZSBwcmlvciBjbGFpbS5cclxuICAgKi9cclxuICBpbnN1cmFuY2U/OiBmaGlyLkNvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0SW5zdXJhbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTZXJ2aWNlIGNhdGVnb3JpZXMgb3IgYmlsbGFibGUgc2VydmljZXMgZm9yIHdoaWNoIGJlbmVmaXQgZGV0YWlscyBhbmQvb3IgYW4gYXV0aG9yaXphdGlvbiBwcmlvciB0byBzZXJ2aWNlIGRlbGl2ZXJ5IG1heSBiZSByZXF1aXJlZCBieSB0aGUgcGF5b3IuXHJcbiAgICovXHJcbiAgaXRlbT86IGZoaXIuQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RJdGVtQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdCBwcm92aWRlcyBwYXRpZW50IGFuZCBpbnN1cmFuY2UgY292ZXJhZ2UgaW5mb3JtYXRpb24gdG8gYW4gaW5zdXJlciBmb3IgdGhlbSB0byByZXNwb25kLCBpbiB0aGUgZm9ybSBvZiBhbiBDb3ZlcmFnZUVsaWdpYmlsaXR5UmVzcG9uc2UsIHdpdGggaW5mb3JtYXRpb24gcmVnYXJkaW5nIHdoZXRoZXIgdGhlIHN0YXRlZCBjb3ZlcmFnZSBpcyB2YWxpZCBhbmQgaW4tZm9yY2UgYW5kIG9wdGlvbmFsbHkgdG8gcHJvdmlkZSB0aGUgaW5zdXJhbmNlIGRldGFpbHMgb2YgdGhlIHBvbGljeS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdCBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3QnO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNvdXJjZVR5cGU6IFwiQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RcIjtcclxuICAvKipcclxuICAgKiBBIHVuaXF1ZSBpZGVudGlmaWVyIGFzc2lnbmVkIHRvIHRoaXMgY292ZXJhZ2UgZWxpZ2libGl0eSByZXF1ZXN0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyOiBmaGlyLklkZW50aWZpZXJbXTtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIGJlY2F1c2UgdGhlIHN0YXR1cyBjb250YWlucyBjb2RlcyB0aGF0IG1hcmsgdGhlIHJlc291cmNlIGFzIG5vdCBjdXJyZW50bHkgdmFsaWQuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1czogZmhpci5GaGlyQ29kZTxGbVN0YXR1c0NvZGVUeXBlPnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFdoZW4gdGhlIHJlcXVlc3RvciBleHBlY3RzIHRoZSBwcm9jZXNzb3IgdG8gY29tcGxldGUgcHJvY2Vzc2luZy5cclxuICAgKi9cclxuICBwdWJsaWMgcHJpb3JpdHk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ29kZSB0byBzcGVjaWZ5IHdoZXRoZXIgcmVxdWVzdGluZzogcHJpb3IgYXV0aG9yaXphdGlvbiByZXF1aXJlbWVudHMgZm9yIHNvbWUgc2VydmljZSBjYXRlZ29yaWVzIG9yIGJpbGxpbmcgY29kZXM7IGJlbmVmaXRzIGZvciBjb3ZlcmFnZXMgc3BlY2lmaWVkIG9yIGRpc2NvdmVyZWQ7IGRpc2NvdmVyeSBhbmQgcmV0dXJuIG9mIGNvdmVyYWdlcyBmb3IgdGhlIHBhdGllbnQ7IGFuZC9vciB2YWxpZGF0aW9uIHRoYXQgdGhlIHNwZWNpZmllZCBjb3ZlcmFnZSBpcyBpbi1mb3JjZSBhdCB0aGUgZGF0ZS9wZXJpb2Qgc3BlY2lmaWVkIG9yICdub3cnIGlmIG5vdCBzcGVjaWZpZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHB1cnBvc2U6IGZoaXIuRmhpckNvZGU8RWxpZ2liaWxpdHlyZXF1ZXN0UHVycG9zZUNvZGVUeXBlPltdO1xyXG4gIC8qKlxyXG4gICAqIDEuLjEuXHJcbiAgICovXHJcbiAgcHVibGljIHBhdGllbnQ6IGZoaXIuUmVmZXJlbmNlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgb3IgZGF0ZXMgd2hlbiB0aGUgZW5jbG9zZWQgc3VpdGUgb2Ygc2VydmljZXMgd2VyZSBwZXJmb3JtZWQgb3IgY29tcGxldGVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXJ2aWNlZD86IChmaGlyLkZoaXJEYXRlfGZoaXIuUGVyaW9kKXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBDb3ZlcmFnZUVsaWdpYmlsaXR5UmVxdWVzdC5zZXJ2aWNlZFt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c19zZXJ2aWNlZElzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRlIHdoZW4gdGhpcyByZXNvdXJjZSB3YXMgY3JlYXRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgY3JlYXRlZDogZmhpci5GaGlyRGF0ZVRpbWV8bnVsbDtcclxuICAvKipcclxuICAgKiBQZXJzb24gd2hvIGNyZWF0ZWQgdGhlIHJlcXVlc3QuXHJcbiAgICovXHJcbiAgcHVibGljIGVudGVyZXI/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVHlwaWNhbGx5IHRoaXMgZmllbGQgd291bGQgYmUgMS4uMSB3aGVyZSB0aGlzIHBhcnR5IGlzIHJlc3BvbnNpYmxlIGZvciB0aGUgZWxpZ2liaWxpdHkgcmVxdWVzdCBidXQgbm90IG5lY2Vzc2FyaWx5IHByb2Zlc3Npb25hbGx5IHJlc3BvbnNpYmxlIGZvciB0aGUgcHJvdmlzaW9uIG9mIHRoZSBpbmRpdmlkdWFsIHByb2R1Y3RzIGFuZCBzZXJ2aWNlcyBsaXN0ZWQgYmVsb3cuXHJcbiAgICovXHJcbiAgcHVibGljIHByb3ZpZGVyPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBJbnN1cmVyIHdobyBpc3N1ZWQgdGhlIGNvdmVyYWdlIGluIHF1ZXN0aW9uIGFuZCBpcyB0aGUgcmVjaXBpZW50IG9mIHRoZSByZXF1ZXN0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpbnN1cmVyOiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEZhY2lsaXR5IHdoZXJlIHRoZSBzZXJ2aWNlcyBhcmUgaW50ZW5kZWQgdG8gYmUgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGZhY2lsaXR5PzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE9mdGVuIHRoZXJlIGFyZSBtdWx0aXBsZSBqdXJpc2RpY3Rpb24gc3BlY2lmaWMgdmFsdWVzZXRzIHdoaWNoIGFyZSByZXF1aXJlZC5cclxuICAgKi9cclxuICBwdWJsaWMgc3VwcG9ydGluZ0luZm86IGZoaXIuQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RTdXBwb3J0aW5nSW5mb1tdO1xyXG4gIC8qKlxyXG4gICAqIEFsbCBpbnN1cmFuY2UgY292ZXJhZ2VzIGZvciB0aGUgcGF0aWVudCB3aGljaCBtYXkgYmUgYXBwbGljYWJsZSBmb3IgcmVpbWJ1cnNlbWVudCwgb2YgdGhlIHByb2R1Y3RzIGFuZCBzZXJ2aWNlcyBsaXN0ZWQgaW4gdGhlIGNsYWltLCBhcmUgdHlwaWNhbGx5IHByb3ZpZGVkIGluIHRoZSBjbGFpbSB0byBhbGxvdyBpbnN1cmVycyB0byBjb25maXJtIHRoZSBvcmRlcmluZyBvZiB0aGUgaW5zdXJhbmNlIGNvdmVyYWdlcyByZWxhdGl2ZSB0byBsb2NhbCAnY29vcmRpbmF0aW9uIG9mIGJlbmVmaXQnIHJ1bGVzLiBPbmUgY292ZXJhZ2UgKGFuZCBvbmx5IG9uZSkgd2l0aCAnZm9jYWw9dHJ1ZScgaXMgdG8gYmUgdXNlZCBpbiB0aGUgYWRqdWRpY2F0aW9uIG9mIHRoaXMgY2xhaW0uIENvdmVyYWdlcyBhcHBlYXJpbmcgYmVmb3JlIHRoZSBmb2NhbCBDb3ZlcmFnZSBpbiB0aGUgbGlzdCwgYW5kIHdoZXJlICdzdWJyb2dhdGlvbj1mYWxzZScsIHNob3VsZCBwcm92aWRlIGEgcmVmZXJlbmNlIHRvIHRoZSBDbGFpbVJlc3BvbnNlIGNvbnRhaW5pbmcgdGhlIGFkanVkaWNhdGlvbiByZXN1bHRzIG9mIHRoZSBwcmlvciBjbGFpbS5cclxuICAgKi9cclxuICBwdWJsaWMgaW5zdXJhbmNlOiBmaGlyLkNvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0SW5zdXJhbmNlW107XHJcbiAgLyoqXHJcbiAgICogU2VydmljZSBjYXRlZ29yaWVzIG9yIGJpbGxhYmxlIHNlcnZpY2VzIGZvciB3aGljaCBiZW5lZml0IGRldGFpbHMgYW5kL29yIGFuIGF1dGhvcml6YXRpb24gcHJpb3IgdG8gc2VydmljZSBkZWxpdmVyeSBtYXkgYmUgcmVxdWlyZWQgYnkgdGhlIHBheW9yLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpdGVtOiBmaGlyLkNvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0SXRlbVtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIENvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8Q292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3QnO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IHNvdXJjZS5pZGVudGlmaWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuSWRlbnRpZmllcih4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmlkZW50aWZpZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RhdHVzJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPEZtU3RhdHVzQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnN0YXR1c30sIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfc3RhdHVzJ10pIHtcclxuICAgICAgaWYgKHRoaXMuc3RhdHVzKSB7IHRoaXMuc3RhdHVzLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3N0YXR1cyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPEZtU3RhdHVzQ29kZVR5cGU+KHNvdXJjZS5fc3RhdHVzIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydwcmlvcml0eSddKSB7IHRoaXMucHJpb3JpdHkgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnByaW9yaXR5LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHVycG9zZSddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5wdXJwb3NlID0gc291cmNlLnB1cnBvc2UubWFwKCh4KSA9PiBuZXcgZmhpci5GaGlyQ29kZTxFbGlnaWJpbGl0eXJlcXVlc3RQdXJwb3NlQ29kZVR5cGU+KHt2YWx1ZTogeH0sIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucHVycG9zZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydfcHVycG9zZSddKSB7XHJcbiAgICAgIHNvdXJjZS5fcHVycG9zZS5mb3JFYWNoKCh4LGkpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5wdXJwb3NlLmxlbmd0aCA+PSBpKSB7IGlmICh4KSB7IHRoaXMucHVycG9zZVtpXS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoeCk7IH0gfVxyXG4gICAgICAgIGVsc2UgeyBpZiAoeCkgeyB0aGlzLnB1cnBvc2UucHVzaChuZXcgZmhpci5GaGlyQ29kZTxFbGlnaWJpbGl0eXJlcXVlc3RQdXJwb3NlQ29kZVR5cGU+KHggYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPikpOyB9IH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydwYXRpZW50J10pIHsgdGhpcy5wYXRpZW50ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5wYXRpZW50LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucGF0aWVudCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3NlcnZpY2VkJ10pIHsgdGhpcy5zZXJ2aWNlZCA9IHNvdXJjZS5zZXJ2aWNlZDsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydzZXJ2aWNlZERhdGUnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuc2VydmljZWQgPSBuZXcgZmhpci5GaGlyRGF0ZSh7dmFsdWU6IHNvdXJjZS5zZXJ2aWNlZERhdGV9LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydzZXJ2aWNlZFBlcmlvZCddKSB7IHRoaXMuc2VydmljZWQgPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLnNlcnZpY2VkUGVyaW9kLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY3JlYXRlZCddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5jcmVhdGVkID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLmNyZWF0ZWR9LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY3JlYXRlZCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19jcmVhdGVkJ10pIHtcclxuICAgICAgaWYgKHRoaXMuY3JlYXRlZCkgeyB0aGlzLmNyZWF0ZWQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fY3JlYXRlZCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmNyZWF0ZWQgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoc291cmNlLl9jcmVhdGVkIGFzIFBhcnRpYWw8Zmhpci5GaGlyRGF0ZVRpbWVBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2VudGVyZXInXSkgeyB0aGlzLmVudGVyZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmVudGVyZXIsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydwcm92aWRlciddKSB7IHRoaXMucHJvdmlkZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnByb3ZpZGVyLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaW5zdXJlciddKSB7IHRoaXMuaW5zdXJlciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuaW5zdXJlciwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmluc3VyZXIgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydmYWNpbGl0eSddKSB7IHRoaXMuZmFjaWxpdHkgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmZhY2lsaXR5LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3VwcG9ydGluZ0luZm8nXSkgeyB0aGlzLnN1cHBvcnRpbmdJbmZvID0gc291cmNlLnN1cHBvcnRpbmdJbmZvLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ292ZXJhZ2VFbGlnaWJpbGl0eVJlcXVlc3RTdXBwb3J0aW5nSW5mbyh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN1cHBvcnRpbmdJbmZvID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2luc3VyYW5jZSddKSB7IHRoaXMuaW5zdXJhbmNlID0gc291cmNlLmluc3VyYW5jZS5tYXAoKHgpID0+IG5ldyBmaGlyLkNvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0SW5zdXJhbmNlKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaW5zdXJhbmNlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2l0ZW0nXSkgeyB0aGlzLml0ZW0gPSBzb3VyY2UuaXRlbS5tYXAoKHgpID0+IG5ldyBmaGlyLkNvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0SXRlbSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLml0ZW0gPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0NvdmVyYWdlRWxpZ2liaWxpdHlSZXF1ZXN0JyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnaWRlbnRpZmllcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSU1YoJ3N0YXR1cycsZXhwLCdGbVN0YXR1cycsRm1TdGF0dXNWc1ZhbGlkYXRpb24sJ3InKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygncHJpb3JpdHknLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UkFWKCdwdXJwb3NlJyxleHAsJ0VsaWdpYmlsaXR5cmVxdWVzdFB1cnBvc2UnLEVsaWdpYmlsaXR5cmVxdWVzdFB1cnBvc2VWc1ZhbGlkYXRpb24sJ3InKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygncGF0aWVudCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnc2VydmljZWQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ2NyZWF0ZWQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2VudGVyZXInLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3Byb3ZpZGVyJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdpbnN1cmVyJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdmYWNpbGl0eScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnc3VwcG9ydGluZ0luZm8nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2luc3VyYW5jZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnaXRlbScsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4iXX0=