// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR ComplexType: TriggerDefinition
import * as fhir from '../fhir.js';
// @ts-ignore
import { TriggerTypeVsValidation } from '../fhirValueSets/TriggerTypeVsValidation.js';
/**
 * A description of a triggering event. Triggering events can be named events, data events, or periodic, as determined by the type element.
 */
export class TriggerDefinition extends fhir.FhirElement {
    /**
     * Default constructor for TriggerDefinition - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['type'] !== undefined) {
            this.type = new fhir.FhirCode({ value: source.type }, options);
        }
        else {
            this.type = null;
        }
        if (source['_type']) {
            if (this.type) {
                this.type.addExtendedProperties(source._type);
            }
            else {
                this.type = new fhir.FhirCode(source._type, options);
            }
        }
        if (source['name'] !== undefined) {
            this.name = new fhir.FhirString({ value: source.name }, options);
        }
        if (source['_name']) {
            if (this.name) {
                this.name.addExtendedProperties(source._name);
            }
            else {
                this.name = new fhir.FhirString(source._name, options);
            }
        }
        if (source['timing']) {
            this.timing = source.timing;
        }
        else if (source['timingTiming']) {
            this.timing = new fhir.Timing(source.timingTiming, options);
        }
        else if (source['timingReference']) {
            this.timing = new fhir.Reference(source.timingReference, options);
        }
        else if (source['timingDate'] !== undefined) {
            this.timing = new fhir.FhirDate({ value: source.timingDate }, options);
        }
        else if (source['timingDateTime'] !== undefined) {
            this.timing = new fhir.FhirDateTime({ value: source.timingDateTime }, options);
        }
        if (source['data']) {
            this.data = source.data.map((x) => new fhir.DataRequirement(x, options));
        }
        else {
            this.data = [];
        }
        if (source['condition']) {
            this.condition = new fhir.Expression(source.condition, options);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'TriggerDefinition';
        }
        iss.push(...this.vRSV('type', exp, 'TriggerType', TriggerTypeVsValidation, 'r'));
        iss.push(...this.vOS('name', exp));
        iss.push(...this.vOS('timing', exp));
        iss.push(...this.vOA('data', exp));
        iss.push(...this.vOS('condition', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
TriggerDefinition._fts_dataType = 'TriggerDefinition';
/**
 * Internal flag to properly serialize choice-type element TriggerDefinition.timing[x]
 */
TriggerDefinition._fts_timingIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHJpZ2dlckRlZmluaXRpb24uanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL1RyaWdnZXJEZWZpbml0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQiwrQ0FBK0M7QUFDL0Msa0NBQWtDO0FBQ2xDLHNDQUFzQztBQUV0QyxPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQUluQyxhQUFhO0FBQ2IsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sNkNBQTZDLENBQUM7QUFtRHRGOztHQUVHO0FBQ0gsTUFBTSxPQUFPLGlCQUFrQixTQUFRLElBQUksQ0FBQyxXQUFXO0lBNkJyRDs7T0FFRztJQUNILFlBQVksU0FBd0MsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDOUYsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxTQUFTLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBc0IsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLElBQUksRUFBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1NBQUU7YUFDbkg7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztTQUFFO1FBQzFCLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQ25CLElBQUksSUFBSSxDQUFDLElBQUksRUFBRTtnQkFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxLQUFNLENBQUMsQ0FBQzthQUFFO2lCQUM3RDtnQkFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBc0IsTUFBTSxDQUFDLEtBQStCLEVBQUUsT0FBTyxDQUFDLENBQUM7YUFBRTtTQUM5RztRQUNELElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLFNBQVMs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QztRQUNwQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNsQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN2QyxPQUFPLEdBQUcsQ0FBQztJQUNiLENBQUM7O0FBakVEOztHQUVHO0FBQzZCLCtCQUFhLEdBQVUsbUJBQW1CLENBQUM7QUFhM0U7O0dBRUc7QUFDdUIscUNBQW1CLEdBQVEsSUFBSSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0LmNvcmUgdmVyc2lvbjogNC4wLjFcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIENvbXBsZXhUeXBlOiBUcmlnZ2VyRGVmaW5pdGlvblxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgVHJpZ2dlclR5cGVDb2RlcywgIFRyaWdnZXJUeXBlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1RyaWdnZXJUeXBlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFRyaWdnZXJUeXBlVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9UcmlnZ2VyVHlwZVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBUcmlnZ2VyRGVmaW5pdGlvbiB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBUcmlnZ2VyRGVmaW5pdGlvbkFyZ3MgZXh0ZW5kcyBmaGlyLkZoaXJFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIHR5cGUgb2YgdHJpZ2dlcmluZyBldmVudC5cclxuICAgKi9cclxuICB0eXBlOiBmaGlyLkZoaXJDb2RlPFRyaWdnZXJUeXBlQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFRyaWdnZXJEZWZpbml0aW9uLnR5cGVcclxuICAgKi9cclxuICBfdHlwZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQW4gZXZlbnQgbmFtZSBjYW4gYmUgcHJvdmlkZWQgZm9yIGFsbCBldmVudCB0eXBlcywgYnV0IGlzIHJlcXVpcmVkIGZvciBuYW1lZCBldmVudHMuIElmIGEgbmFtZSBpcyBwcm92aWRlZCBmb3IgYSB0eXBlIG90aGVyIHRoYW4gbmFtZWQgZXZlbnRzLCBpdCBpcyBjb25zaWRlcmVkIHRvIGJlIGEgc2hvcnRoYW5kIGZvciB0aGUgc2VtYW50aWNzIGRlc2NyaWJlZCBieSB0aGUgZm9ybWFsIGRlc2NyaXB0aW9uIG9mIHRoZSBldmVudC5cclxuICAgKi9cclxuICBuYW1lPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFRyaWdnZXJEZWZpbml0aW9uLm5hbWVcclxuICAgKi9cclxuICBfbmFtZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRpbWluZyBvZiB0aGUgZXZlbnQgKGlmIHRoaXMgaXMgYSBwZXJpb2RpYyB0cmlnZ2VyKS5cclxuICAgKi9cclxuICB0aW1pbmc/OiBmaGlyLlRpbWluZ3xmaGlyLlJlZmVyZW5jZXxmaGlyLkZoaXJEYXRlfGZoaXIuRmhpckRhdGVUaW1lfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdGltaW5nIG9mIHRoZSBldmVudCAoaWYgdGhpcyBpcyBhIHBlcmlvZGljIHRyaWdnZXIpLlxyXG4gICAqL1xyXG4gIHRpbWluZ1RpbWluZz86IGZoaXIuVGltaW5nQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRpbWluZyBvZiB0aGUgZXZlbnQgKGlmIHRoaXMgaXMgYSBwZXJpb2RpYyB0cmlnZ2VyKS5cclxuICAgKi9cclxuICB0aW1pbmdSZWZlcmVuY2U/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0aW1pbmcgb2YgdGhlIGV2ZW50IChpZiB0aGlzIGlzIGEgcGVyaW9kaWMgdHJpZ2dlcikuXHJcbiAgICovXHJcbiAgdGltaW5nRGF0ZT86IGZoaXIuRmhpckRhdGV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdGltaW5nIG9mIHRoZSBldmVudCAoaWYgdGhpcyBpcyBhIHBlcmlvZGljIHRyaWdnZXIpLlxyXG4gICAqL1xyXG4gIHRpbWluZ0RhdGVUaW1lPzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgc2hhbGwgYmUgcHJlc2VudCBmb3IgYW55IGRhdGEgdHlwZSB0cmlnZ2VyLlxyXG4gICAqL1xyXG4gIGRhdGE/OiBmaGlyLkRhdGFSZXF1aXJlbWVudEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IGNhbiBiZSBvbmx5IGJlIHNwZWNpZmllZCBmb3IgZGF0YSB0eXBlIHRyaWdnZXJzIGFuZCBwcm92aWRlcyBhZGRpdGlvbmFsIHNlbWFudGljcyBmb3IgdGhlIHRyaWdnZXIuIFRoZSBjb250ZXh0IGF2YWlsYWJsZSB3aXRoaW4gdGhlIGNvbmRpdGlvbiBpcyBiYXNlZCBvbiB0aGUgdHlwZSBvZiBkYXRhIGV2ZW50LiBGb3IgYWxsIGV2ZW50cywgdGhlIGN1cnJlbnQgcmVzb3VyY2Ugd2lsbCBiZSBhdmFpbGFibGUgYXMgY29udGV4dC4gSW4gYWRkaXRpb24sIGZvciBtb2RpZmljYXRpb24gZXZlbnRzLCB0aGUgcHJldmlvdXMgcmVzb3VyY2Ugd2lsbCBhbHNvIGJlIGF2YWlsYWJsZS4gVGhlIGV4cHJlc3Npb24gbWF5IGJlIGlubGluZWQsIG9yIG1heSBiZSBhIHNpbXBsZSBhYnNvbHV0ZSBVUkksIHdoaWNoIGlzIGEgcmVmZXJlbmNlIHRvIGEgbmFtZWQgZXhwcmVzc2lvbiB3aXRoaW4gYSBsb2dpYyBsaWJyYXJ5IHJlZmVyZW5jZWQgYnkgYSBsaWJyYXJ5IGVsZW1lbnQgb3IgZXh0ZW5zaW9uIHdpdGhpbiB0aGUgY29udGFpbmluZyByZXNvdXJjZS4gSWYgdGhlIGV4cHJlc3Npb24gaXMgYSBGSElSIFBhdGggZXhwcmVzc2lvbiwgaXQgZXZhbHVhdGVzIGluIHRoZSBjb250ZXh0IG9mIGEgcmVzb3VyY2Ugb2Ygb25lIG9mIHRoZSB0eXBlIGlkZW50aWZpZWQgaW4gdGhlIGRhdGEgcmVxdWlyZW1lbnQsIGFuZCBtYXkgYWxzbyByZWZlciB0byB0aGUgdmFyaWFibGUgJXByZXZpb3VzIGZvciBkZWx0YSBjb21wYXJpc29ucyBvbiBldmVudHMgb2YgdHlwZSBkYXRhLWNoYW5nZWQsIGRhdGEtbW9kaWZpZWQsIGFuZCBkYXRhLWRlbGV0ZWQgd2hpY2ggd2lsbCBhbHdheXMgaGF2ZSB0aGUgc2FtZSB0eXBlLlxyXG4gICAqL1xyXG4gIGNvbmRpdGlvbj86IGZoaXIuRXhwcmVzc2lvbkFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQSBkZXNjcmlwdGlvbiBvZiBhIHRyaWdnZXJpbmcgZXZlbnQuIFRyaWdnZXJpbmcgZXZlbnRzIGNhbiBiZSBuYW1lZCBldmVudHMsIGRhdGEgZXZlbnRzLCBvciBwZXJpb2RpYywgYXMgZGV0ZXJtaW5lZCBieSB0aGUgdHlwZSBlbGVtZW50LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRyaWdnZXJEZWZpbml0aW9uIGV4dGVuZHMgZmhpci5GaGlyRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdUcmlnZ2VyRGVmaW5pdGlvbic7XHJcbiAgLyoqXHJcbiAgICogVGhlIHR5cGUgb2YgdHJpZ2dlcmluZyBldmVudC5cclxuICAgKi9cclxuICBwdWJsaWMgdHlwZTogZmhpci5GaGlyQ29kZTxUcmlnZ2VyVHlwZUNvZGVUeXBlPnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEFuIGV2ZW50IG5hbWUgY2FuIGJlIHByb3ZpZGVkIGZvciBhbGwgZXZlbnQgdHlwZXMsIGJ1dCBpcyByZXF1aXJlZCBmb3IgbmFtZWQgZXZlbnRzLiBJZiBhIG5hbWUgaXMgcHJvdmlkZWQgZm9yIGEgdHlwZSBvdGhlciB0aGFuIG5hbWVkIGV2ZW50cywgaXQgaXMgY29uc2lkZXJlZCB0byBiZSBhIHNob3J0aGFuZCBmb3IgdGhlIHNlbWFudGljcyBkZXNjcmliZWQgYnkgdGhlIGZvcm1hbCBkZXNjcmlwdGlvbiBvZiB0aGUgZXZlbnQuXHJcbiAgICovXHJcbiAgcHVibGljIG5hbWU/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0aW1pbmcgb2YgdGhlIGV2ZW50IChpZiB0aGlzIGlzIGEgcGVyaW9kaWMgdHJpZ2dlcikuXHJcbiAgICovXHJcbiAgcHVibGljIHRpbWluZz86IChmaGlyLlRpbWluZ3xmaGlyLlJlZmVyZW5jZXxmaGlyLkZoaXJEYXRlfGZoaXIuRmhpckRhdGVUaW1lKXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBUcmlnZ2VyRGVmaW5pdGlvbi50aW1pbmdbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfdGltaW5nSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IHNoYWxsIGJlIHByZXNlbnQgZm9yIGFueSBkYXRhIHR5cGUgdHJpZ2dlci5cclxuICAgKi9cclxuICBwdWJsaWMgZGF0YTogZmhpci5EYXRhUmVxdWlyZW1lbnRbXTtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgY2FuIGJlIG9ubHkgYmUgc3BlY2lmaWVkIGZvciBkYXRhIHR5cGUgdHJpZ2dlcnMgYW5kIHByb3ZpZGVzIGFkZGl0aW9uYWwgc2VtYW50aWNzIGZvciB0aGUgdHJpZ2dlci4gVGhlIGNvbnRleHQgYXZhaWxhYmxlIHdpdGhpbiB0aGUgY29uZGl0aW9uIGlzIGJhc2VkIG9uIHRoZSB0eXBlIG9mIGRhdGEgZXZlbnQuIEZvciBhbGwgZXZlbnRzLCB0aGUgY3VycmVudCByZXNvdXJjZSB3aWxsIGJlIGF2YWlsYWJsZSBhcyBjb250ZXh0LiBJbiBhZGRpdGlvbiwgZm9yIG1vZGlmaWNhdGlvbiBldmVudHMsIHRoZSBwcmV2aW91cyByZXNvdXJjZSB3aWxsIGFsc28gYmUgYXZhaWxhYmxlLiBUaGUgZXhwcmVzc2lvbiBtYXkgYmUgaW5saW5lZCwgb3IgbWF5IGJlIGEgc2ltcGxlIGFic29sdXRlIFVSSSwgd2hpY2ggaXMgYSByZWZlcmVuY2UgdG8gYSBuYW1lZCBleHByZXNzaW9uIHdpdGhpbiBhIGxvZ2ljIGxpYnJhcnkgcmVmZXJlbmNlZCBieSBhIGxpYnJhcnkgZWxlbWVudCBvciBleHRlbnNpb24gd2l0aGluIHRoZSBjb250YWluaW5nIHJlc291cmNlLiBJZiB0aGUgZXhwcmVzc2lvbiBpcyBhIEZISVIgUGF0aCBleHByZXNzaW9uLCBpdCBldmFsdWF0ZXMgaW4gdGhlIGNvbnRleHQgb2YgYSByZXNvdXJjZSBvZiBvbmUgb2YgdGhlIHR5cGUgaWRlbnRpZmllZCBpbiB0aGUgZGF0YSByZXF1aXJlbWVudCwgYW5kIG1heSBhbHNvIHJlZmVyIHRvIHRoZSB2YXJpYWJsZSAlcHJldmlvdXMgZm9yIGRlbHRhIGNvbXBhcmlzb25zIG9uIGV2ZW50cyBvZiB0eXBlIGRhdGEtY2hhbmdlZCwgZGF0YS1tb2RpZmllZCwgYW5kIGRhdGEtZGVsZXRlZCB3aGljaCB3aWxsIGFsd2F5cyBoYXZlIHRoZSBzYW1lIHR5cGUuXHJcbiAgICovXHJcbiAgcHVibGljIGNvbmRpdGlvbj86IGZoaXIuRXhwcmVzc2lvbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgVHJpZ2dlckRlZmluaXRpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxUcmlnZ2VyRGVmaW5pdGlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWyd0eXBlJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnR5cGUgPSBuZXcgZmhpci5GaGlyQ29kZTxUcmlnZ2VyVHlwZUNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS50eXBlfSwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnR5cGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfdHlwZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnR5cGUpIHsgdGhpcy50eXBlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3R5cGUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy50eXBlID0gbmV3IGZoaXIuRmhpckNvZGU8VHJpZ2dlclR5cGVDb2RlVHlwZT4oc291cmNlLl90eXBlIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyduYW1lJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLm5hbWUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLm5hbWV9LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX25hbWUnXSkge1xyXG4gICAgICBpZiAodGhpcy5uYW1lKSB7IHRoaXMubmFtZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9uYW1lISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubmFtZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9uYW1lIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd0aW1pbmcnXSkgeyB0aGlzLnRpbWluZyA9IHNvdXJjZS50aW1pbmc7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsndGltaW5nVGltaW5nJ10pIHsgdGhpcy50aW1pbmcgPSBuZXcgZmhpci5UaW1pbmcoc291cmNlLnRpbWluZ1RpbWluZywgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsndGltaW5nUmVmZXJlbmNlJ10pIHsgdGhpcy50aW1pbmcgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnRpbWluZ1JlZmVyZW5jZSwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsndGltaW5nRGF0ZSddICE9PSB1bmRlZmluZWQpIHsgdGhpcy50aW1pbmcgPSBuZXcgZmhpci5GaGlyRGF0ZSh7dmFsdWU6IHNvdXJjZS50aW1pbmdEYXRlfSwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsndGltaW5nRGF0ZVRpbWUnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMudGltaW5nID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLnRpbWluZ0RhdGVUaW1lfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2RhdGEnXSkgeyB0aGlzLmRhdGEgPSBzb3VyY2UuZGF0YS5tYXAoKHgpID0+IG5ldyBmaGlyLkRhdGFSZXF1aXJlbWVudCh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmRhdGEgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29uZGl0aW9uJ10pIHsgdGhpcy5jb25kaXRpb24gPSBuZXcgZmhpci5FeHByZXNzaW9uKHNvdXJjZS5jb25kaXRpb24sIG9wdGlvbnMpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnVHJpZ2dlckRlZmluaXRpb24nIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTVigndHlwZScsZXhwLCdUcmlnZ2VyVHlwZScsVHJpZ2dlclR5cGVWc1ZhbGlkYXRpb24sJ3InKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnbmFtZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygndGltaW5nJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdkYXRhJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdjb25kaXRpb24nLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuIl19