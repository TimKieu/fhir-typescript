// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR ComplexType: TriggerDefinition
import * as fhir from '../fhir.js';
// @ts-ignore
import { TriggerTypeVsValidation } from '../fhirValueSets/TriggerTypeVsValidation.js';
/**
 * A description of a triggering event. Triggering events can be named events, data events, or periodic, as determined by the type element.
 */
export class TriggerDefinition extends fhir.FhirElement {
    /**
     * Default constructor for TriggerDefinition - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['type']) {
            this.type = new fhir.FhirCode({ value: source.type });
        }
        else {
            this.type = null;
        }
        if (source['_type']) {
            if (this.type) {
                this.type.addExtendedProperties(source._type);
            }
            else {
                this.type = new fhir.FhirCode(source._type);
            }
        }
        if (source['name']) {
            this.name = new fhir.FhirString({ value: source.name });
        }
        if (source['_name']) {
            if (this.name) {
                this.name.addExtendedProperties(source._name);
            }
            else {
                this.name = new fhir.FhirString(source._name);
            }
        }
        if (source['timing']) {
            this.timing = source.timing;
        }
        else if (source['timingTiming']) {
            this.timing = new fhir.Timing(source.timingTiming);
        }
        else if (source['timingReference']) {
            this.timing = new fhir.Reference(source.timingReference);
        }
        else if (source['timingDate']) {
            this.timing = new fhir.FhirDate({ value: source.timingDate });
        }
        else if (source['timingDateTime']) {
            this.timing = new fhir.FhirDateTime({ value: source.timingDateTime });
        }
        if (source['data']) {
            this.data = source.data.map((x) => new fhir.DataRequirement(x));
        }
        else {
            this.data = [];
        }
        if (source['condition']) {
            this.condition = new fhir.Expression(source.condition);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'TriggerDefinition';
        }
        iss.push(...this.vRSV('type', exp, 'TriggerType', TriggerTypeVsValidation, 'r'));
        iss.push(...this.vOS('name', exp));
        iss.push(...this.vOS('timing', exp));
        iss.push(...this.vOA('data', exp));
        iss.push(...this.vOS('condition', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
TriggerDefinition._fts_dataType = 'TriggerDefinition';
/**
 * Internal flag to properly serialize choice-type element TriggerDefinition.timing[x]
 */
TriggerDefinition._fts_timingIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHJpZ2dlckRlZmluaXRpb24uanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL1RyaWdnZXJEZWZpbml0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQiwrQ0FBK0M7QUFDL0Msa0NBQWtDO0FBQ2xDLHNDQUFzQztBQUV0QyxPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQUluQyxhQUFhO0FBQ2IsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sNkNBQTZDLENBQUM7QUFtRHRGOztHQUVHO0FBQ0gsTUFBTSxPQUFPLGlCQUFrQixTQUFRLElBQUksQ0FBQyxXQUFXO0lBNkJyRDs7T0FFRztJQUNILFlBQVksU0FBd0MsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDOUYsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFzQixFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsSUFBSSxFQUFDLENBQUMsQ0FBQztTQUFFO2FBQzVGO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7U0FBRTtRQUMxQixJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUNuQixJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUU7Z0JBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsS0FBTSxDQUFDLENBQUM7YUFBRTtpQkFDN0Q7Z0JBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQXNCLE1BQU0sQ0FBQyxLQUErQixDQUFDLENBQUM7YUFBRTtTQUNyRztRQUNELElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUks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QUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkMsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDOztBQWpFRDs7R0FFRztBQUM2QiwrQkFBYSxHQUFVLG1CQUFtQixDQUFDO0FBYTNFOztHQUVHO0FBQ3VCLHFDQUFtQixHQUFRLElBQUksQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNC5jb3JlIHZlcnNpb246IDQuMC4xXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBDb21wbGV4VHlwZTogVHJpZ2dlckRlZmluaXRpb25cclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFRyaWdnZXJUeXBlQ29kZXMsICBUcmlnZ2VyVHlwZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9UcmlnZ2VyVHlwZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBUcmlnZ2VyVHlwZVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVHJpZ2dlclR5cGVWc1ZhbGlkYXRpb24uanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgVHJpZ2dlckRlZmluaXRpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgVHJpZ2dlckRlZmluaXRpb25BcmdzIGV4dGVuZHMgZmhpci5GaGlyRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0eXBlIG9mIHRyaWdnZXJpbmcgZXZlbnQuXHJcbiAgICovXHJcbiAgdHlwZTogZmhpci5GaGlyQ29kZTxUcmlnZ2VyVHlwZUNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBUcmlnZ2VyRGVmaW5pdGlvbi50eXBlXHJcbiAgICovXHJcbiAgX3R5cGU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEFuIGV2ZW50IG5hbWUgY2FuIGJlIHByb3ZpZGVkIGZvciBhbGwgZXZlbnQgdHlwZXMsIGJ1dCBpcyByZXF1aXJlZCBmb3IgbmFtZWQgZXZlbnRzLiBJZiBhIG5hbWUgaXMgcHJvdmlkZWQgZm9yIGEgdHlwZSBvdGhlciB0aGFuIG5hbWVkIGV2ZW50cywgaXQgaXMgY29uc2lkZXJlZCB0byBiZSBhIHNob3J0aGFuZCBmb3IgdGhlIHNlbWFudGljcyBkZXNjcmliZWQgYnkgdGhlIGZvcm1hbCBkZXNjcmlwdGlvbiBvZiB0aGUgZXZlbnQuXHJcbiAgICovXHJcbiAgbmFtZT86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBUcmlnZ2VyRGVmaW5pdGlvbi5uYW1lXHJcbiAgICovXHJcbiAgX25hbWU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0aW1pbmcgb2YgdGhlIGV2ZW50IChpZiB0aGlzIGlzIGEgcGVyaW9kaWMgdHJpZ2dlcikuXHJcbiAgICovXHJcbiAgdGltaW5nPzogZmhpci5UaW1pbmd8Zmhpci5SZWZlcmVuY2V8Zmhpci5GaGlyRGF0ZXxmaGlyLkZoaXJEYXRlVGltZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRpbWluZyBvZiB0aGUgZXZlbnQgKGlmIHRoaXMgaXMgYSBwZXJpb2RpYyB0cmlnZ2VyKS5cclxuICAgKi9cclxuICB0aW1pbmdUaW1pbmc/OiBmaGlyLlRpbWluZ0FyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0aW1pbmcgb2YgdGhlIGV2ZW50IChpZiB0aGlzIGlzIGEgcGVyaW9kaWMgdHJpZ2dlcikuXHJcbiAgICovXHJcbiAgdGltaW5nUmVmZXJlbmNlPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdGltaW5nIG9mIHRoZSBldmVudCAoaWYgdGhpcyBpcyBhIHBlcmlvZGljIHRyaWdnZXIpLlxyXG4gICAqL1xyXG4gIHRpbWluZ0RhdGU/OiBmaGlyLkZoaXJEYXRlfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRpbWluZyBvZiB0aGUgZXZlbnQgKGlmIHRoaXMgaXMgYSBwZXJpb2RpYyB0cmlnZ2VyKS5cclxuICAgKi9cclxuICB0aW1pbmdEYXRlVGltZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IHNoYWxsIGJlIHByZXNlbnQgZm9yIGFueSBkYXRhIHR5cGUgdHJpZ2dlci5cclxuICAgKi9cclxuICBkYXRhPzogZmhpci5EYXRhUmVxdWlyZW1lbnRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBjYW4gYmUgb25seSBiZSBzcGVjaWZpZWQgZm9yIGRhdGEgdHlwZSB0cmlnZ2VycyBhbmQgcHJvdmlkZXMgYWRkaXRpb25hbCBzZW1hbnRpY3MgZm9yIHRoZSB0cmlnZ2VyLiBUaGUgY29udGV4dCBhdmFpbGFibGUgd2l0aGluIHRoZSBjb25kaXRpb24gaXMgYmFzZWQgb24gdGhlIHR5cGUgb2YgZGF0YSBldmVudC4gRm9yIGFsbCBldmVudHMsIHRoZSBjdXJyZW50IHJlc291cmNlIHdpbGwgYmUgYXZhaWxhYmxlIGFzIGNvbnRleHQuIEluIGFkZGl0aW9uLCBmb3IgbW9kaWZpY2F0aW9uIGV2ZW50cywgdGhlIHByZXZpb3VzIHJlc291cmNlIHdpbGwgYWxzbyBiZSBhdmFpbGFibGUuIFRoZSBleHByZXNzaW9uIG1heSBiZSBpbmxpbmVkLCBvciBtYXkgYmUgYSBzaW1wbGUgYWJzb2x1dGUgVVJJLCB3aGljaCBpcyBhIHJlZmVyZW5jZSB0byBhIG5hbWVkIGV4cHJlc3Npb24gd2l0aGluIGEgbG9naWMgbGlicmFyeSByZWZlcmVuY2VkIGJ5IGEgbGlicmFyeSBlbGVtZW50IG9yIGV4dGVuc2lvbiB3aXRoaW4gdGhlIGNvbnRhaW5pbmcgcmVzb3VyY2UuIElmIHRoZSBleHByZXNzaW9uIGlzIGEgRkhJUiBQYXRoIGV4cHJlc3Npb24sIGl0IGV2YWx1YXRlcyBpbiB0aGUgY29udGV4dCBvZiBhIHJlc291cmNlIG9mIG9uZSBvZiB0aGUgdHlwZSBpZGVudGlmaWVkIGluIHRoZSBkYXRhIHJlcXVpcmVtZW50LCBhbmQgbWF5IGFsc28gcmVmZXIgdG8gdGhlIHZhcmlhYmxlICVwcmV2aW91cyBmb3IgZGVsdGEgY29tcGFyaXNvbnMgb24gZXZlbnRzIG9mIHR5cGUgZGF0YS1jaGFuZ2VkLCBkYXRhLW1vZGlmaWVkLCBhbmQgZGF0YS1kZWxldGVkIHdoaWNoIHdpbGwgYWx3YXlzIGhhdmUgdGhlIHNhbWUgdHlwZS5cclxuICAgKi9cclxuICBjb25kaXRpb24/OiBmaGlyLkV4cHJlc3Npb25BcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgZGVzY3JpcHRpb24gb2YgYSB0cmlnZ2VyaW5nIGV2ZW50LiBUcmlnZ2VyaW5nIGV2ZW50cyBjYW4gYmUgbmFtZWQgZXZlbnRzLCBkYXRhIGV2ZW50cywgb3IgcGVyaW9kaWMsIGFzIGRldGVybWluZWQgYnkgdGhlIHR5cGUgZWxlbWVudC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBUcmlnZ2VyRGVmaW5pdGlvbiBleHRlbmRzIGZoaXIuRmhpckVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnVHJpZ2dlckRlZmluaXRpb24nO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0eXBlIG9mIHRyaWdnZXJpbmcgZXZlbnQuXHJcbiAgICovXHJcbiAgcHVibGljIHR5cGU6IGZoaXIuRmhpckNvZGU8VHJpZ2dlclR5cGVDb2RlVHlwZT58bnVsbDtcclxuICAvKipcclxuICAgKiBBbiBldmVudCBuYW1lIGNhbiBiZSBwcm92aWRlZCBmb3IgYWxsIGV2ZW50IHR5cGVzLCBidXQgaXMgcmVxdWlyZWQgZm9yIG5hbWVkIGV2ZW50cy4gSWYgYSBuYW1lIGlzIHByb3ZpZGVkIGZvciBhIHR5cGUgb3RoZXIgdGhhbiBuYW1lZCBldmVudHMsIGl0IGlzIGNvbnNpZGVyZWQgdG8gYmUgYSBzaG9ydGhhbmQgZm9yIHRoZSBzZW1hbnRpY3MgZGVzY3JpYmVkIGJ5IHRoZSBmb3JtYWwgZGVzY3JpcHRpb24gb2YgdGhlIGV2ZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBuYW1lPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdGltaW5nIG9mIHRoZSBldmVudCAoaWYgdGhpcyBpcyBhIHBlcmlvZGljIHRyaWdnZXIpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0aW1pbmc/OiAoZmhpci5UaW1pbmd8Zmhpci5SZWZlcmVuY2V8Zmhpci5GaGlyRGF0ZXxmaGlyLkZoaXJEYXRlVGltZSl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgVHJpZ2dlckRlZmluaXRpb24udGltaW5nW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX3RpbWluZ0lzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBzaGFsbCBiZSBwcmVzZW50IGZvciBhbnkgZGF0YSB0eXBlIHRyaWdnZXIuXHJcbiAgICovXHJcbiAgcHVibGljIGRhdGE6IGZoaXIuRGF0YVJlcXVpcmVtZW50W107XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IGNhbiBiZSBvbmx5IGJlIHNwZWNpZmllZCBmb3IgZGF0YSB0eXBlIHRyaWdnZXJzIGFuZCBwcm92aWRlcyBhZGRpdGlvbmFsIHNlbWFudGljcyBmb3IgdGhlIHRyaWdnZXIuIFRoZSBjb250ZXh0IGF2YWlsYWJsZSB3aXRoaW4gdGhlIGNvbmRpdGlvbiBpcyBiYXNlZCBvbiB0aGUgdHlwZSBvZiBkYXRhIGV2ZW50LiBGb3IgYWxsIGV2ZW50cywgdGhlIGN1cnJlbnQgcmVzb3VyY2Ugd2lsbCBiZSBhdmFpbGFibGUgYXMgY29udGV4dC4gSW4gYWRkaXRpb24sIGZvciBtb2RpZmljYXRpb24gZXZlbnRzLCB0aGUgcHJldmlvdXMgcmVzb3VyY2Ugd2lsbCBhbHNvIGJlIGF2YWlsYWJsZS4gVGhlIGV4cHJlc3Npb24gbWF5IGJlIGlubGluZWQsIG9yIG1heSBiZSBhIHNpbXBsZSBhYnNvbHV0ZSBVUkksIHdoaWNoIGlzIGEgcmVmZXJlbmNlIHRvIGEgbmFtZWQgZXhwcmVzc2lvbiB3aXRoaW4gYSBsb2dpYyBsaWJyYXJ5IHJlZmVyZW5jZWQgYnkgYSBsaWJyYXJ5IGVsZW1lbnQgb3IgZXh0ZW5zaW9uIHdpdGhpbiB0aGUgY29udGFpbmluZyByZXNvdXJjZS4gSWYgdGhlIGV4cHJlc3Npb24gaXMgYSBGSElSIFBhdGggZXhwcmVzc2lvbiwgaXQgZXZhbHVhdGVzIGluIHRoZSBjb250ZXh0IG9mIGEgcmVzb3VyY2Ugb2Ygb25lIG9mIHRoZSB0eXBlIGlkZW50aWZpZWQgaW4gdGhlIGRhdGEgcmVxdWlyZW1lbnQsIGFuZCBtYXkgYWxzbyByZWZlciB0byB0aGUgdmFyaWFibGUgJXByZXZpb3VzIGZvciBkZWx0YSBjb21wYXJpc29ucyBvbiBldmVudHMgb2YgdHlwZSBkYXRhLWNoYW5nZWQsIGRhdGEtbW9kaWZpZWQsIGFuZCBkYXRhLWRlbGV0ZWQgd2hpY2ggd2lsbCBhbHdheXMgaGF2ZSB0aGUgc2FtZSB0eXBlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25kaXRpb24/OiBmaGlyLkV4cHJlc3Npb258dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFRyaWdnZXJEZWZpbml0aW9uIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8VHJpZ2dlckRlZmluaXRpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsndHlwZSddKSB7IHRoaXMudHlwZSA9IG5ldyBmaGlyLkZoaXJDb2RlPFRyaWdnZXJUeXBlQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnR5cGV9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudHlwZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ190eXBlJ10pIHtcclxuICAgICAgaWYgKHRoaXMudHlwZSkgeyB0aGlzLnR5cGUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdHlwZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnR5cGUgPSBuZXcgZmhpci5GaGlyQ29kZTxUcmlnZ2VyVHlwZUNvZGVUeXBlPihzb3VyY2UuX3R5cGUgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ25hbWUnXSkgeyB0aGlzLm5hbWUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLm5hbWV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX25hbWUnXSkge1xyXG4gICAgICBpZiAodGhpcy5uYW1lKSB7IHRoaXMubmFtZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9uYW1lISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubmFtZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9uYW1lIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd0aW1pbmcnXSkgeyB0aGlzLnRpbWluZyA9IHNvdXJjZS50aW1pbmc7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsndGltaW5nVGltaW5nJ10pIHsgdGhpcy50aW1pbmcgPSBuZXcgZmhpci5UaW1pbmcoc291cmNlLnRpbWluZ1RpbWluZyk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsndGltaW5nUmVmZXJlbmNlJ10pIHsgdGhpcy50aW1pbmcgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnRpbWluZ1JlZmVyZW5jZSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsndGltaW5nRGF0ZSddKSB7IHRoaXMudGltaW5nID0gbmV3IGZoaXIuRmhpckRhdGUoe3ZhbHVlOiBzb3VyY2UudGltaW5nRGF0ZX0pOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3RpbWluZ0RhdGVUaW1lJ10pIHsgdGhpcy50aW1pbmcgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2UudGltaW5nRGF0ZVRpbWV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGF0YSddKSB7IHRoaXMuZGF0YSA9IHNvdXJjZS5kYXRhLm1hcCgoeCkgPT4gbmV3IGZoaXIuRGF0YVJlcXVpcmVtZW50KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZGF0YSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydjb25kaXRpb24nXSkgeyB0aGlzLmNvbmRpdGlvbiA9IG5ldyBmaGlyLkV4cHJlc3Npb24oc291cmNlLmNvbmRpdGlvbik7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdUcmlnZ2VyRGVmaW5pdGlvbicgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlNWKCd0eXBlJyxleHAsJ1RyaWdnZXJUeXBlJyxUcmlnZ2VyVHlwZVZzVmFsaWRhdGlvbiwncicpKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCduYW1lJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCd0aW1pbmcnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2RhdGEnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2NvbmRpdGlvbicsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4iXX0=