// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR ComplexType: Identifier
import * as fhir from '../fhir.js';
// @ts-ignore
import { IdentifierUseCodes } from '../fhirValueSets/IdentifierUseCodes.js';
// @ts-ignore
import { IdentifierTypeCodings, } from '../fhirValueSets/IdentifierTypeCodings.js';
/**
 * An identifier - identifies some entity uniquely and unambiguously. Typically this is used for business identifiers.
 */
export class Identifier extends fhir.FhirElement {
    /**
     * Default constructor for Identifier - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['use']) {
            this.use = new fhir.FhirCode({ value: source.use });
        }
        if (source['_use']) {
            if (this.use) {
                this.use.addExtendedProperties(source._use);
            }
            else {
                this.use = new fhir.FhirCode(source._use);
            }
        }
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type);
        }
        if (source['system']) {
            this.system = new fhir.FhirUri({ value: source.system });
        }
        if (source['_system']) {
            if (this.system) {
                this.system.addExtendedProperties(source._system);
            }
            else {
                this.system = new fhir.FhirUri(source._system);
            }
        }
        if (source['value']) {
            this.value = new fhir.FhirString({ value: source.value });
        }
        if (source['_value']) {
            if (this.value) {
                this.value.addExtendedProperties(source._value);
            }
            else {
                this.value = new fhir.FhirString(source._value);
            }
        }
        if (source['period']) {
            this.period = new fhir.Period(source.period);
        }
        if (source['assigner']) {
            this.assigner = new fhir.Reference(source.assigner);
        }
    }
    /**
     * Required-bound Value Set for use (Identifier.use)
     */
    static get useRequiredCodes() {
        return IdentifierUseCodes;
    }
    /**
     * Extensible-bound Value Set for type (Identifier.type)
     */
    static get typeExtensibleCodings() {
        return IdentifierTypeCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'Identifier';
        }
        if (this['use'] && (!Object.values(IdentifierUseCodes).includes(this.use.value))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'use (Identifier.use) of type code is missing code for Required binding to: IdentifierUse', expression: [expression] });
        }
        if (this["use"]) {
            issues.push(...this.use.doModelValidation(expression + '.use'));
        }
        if (this["type"]) {
            issues.push(...this.type.doModelValidation(expression + '.type'));
        }
        if (this["system"]) {
            issues.push(...this.system.doModelValidation(expression + '.system'));
        }
        if (this["value"]) {
            issues.push(...this.value.doModelValidation(expression + '.value'));
        }
        if (this["period"]) {
            issues.push(...this.period.doModelValidation(expression + '.period'));
        }
        if (this["assigner"]) {
            issues.push(...this.assigner.doModelValidation(expression + '.assigner'));
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
Identifier._fts_dataType = 'Identifier';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSWRlbnRpZmllci5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvSWRlbnRpZmllci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQywrQkFBK0I7QUFFL0IsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFJbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSxrQkFBa0IsRUFBMEIsTUFBTSx3Q0FBd0MsQ0FBQztBQUNwRyxhQUFhO0FBQ2IsT0FBTyxFQUFFLHFCQUFxQixHQUE0QixNQUFNLDJDQUEyQyxDQUFDO0FBNkM1Rzs7R0FFRztBQUNILE1BQU0sT0FBTyxVQUFXLFNBQVEsSUFBSSxDQUFDLFdBQVc7SUE2QjlDOztPQUVHO0lBQ0gsWUFBWSxTQUFpQyxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUN2RixLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQXdCLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxHQUFHLEVBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDaEcsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFDbEIsSUFBSSxJQUFJLENBQUMsR0FBRyxFQUFFO2dCQUFFLElBQUksQ0FBQyxHQUFHLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLElBQUssQ0FBQyxDQUFDO2FBQUU7aUJBQzFEO2dCQUFFLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUF3QixNQUFNLENBQUMsSUFBOEIsQ0FBQyxDQUFDO2FBQUU7U0FDckc7UUFDRCxJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMs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aUIsQ0FBQyxVQUFVLEdBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztTQUFFO1FBQ3RGLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsaUJBQWlCLENBQUMsVUFBVSxHQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7U0FBRTtRQUM1RixJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLFVBQVUsR0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDekYsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLEdBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztTQUFFO1FBQzVGLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsaUJBQWlCLENBQUMsVUFBVSxHQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7U0FBRTtRQUNsRyxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQWhGRDs7R0FFRztBQUM2Qix3QkFBYSxHQUFVLFlBQVksQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNC5jb3JlIHZlcnNpb246IDQuMC4xXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBDb21wbGV4VHlwZTogSWRlbnRpZmllclxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgSWRlbnRpZmllclVzZUNvZGluZ3MsIElkZW50aWZpZXJVc2VDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9JZGVudGlmaWVyVXNlQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgSWRlbnRpZmllclVzZUNvZGVzLCAgSWRlbnRpZmllclVzZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9JZGVudGlmaWVyVXNlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IElkZW50aWZpZXJUeXBlQ29kaW5ncywgSWRlbnRpZmllclR5cGVDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9JZGVudGlmaWVyVHlwZUNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IElkZW50aWZpZXJUeXBlQ29kZXMsICBJZGVudGlmaWVyVHlwZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9JZGVudGlmaWVyVHlwZUNvZGVzLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIElkZW50aWZpZXIgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgSWRlbnRpZmllckFyZ3MgZXh0ZW5kcyBmaGlyLkZoaXJFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogQXBwbGljYXRpb25zIGNhbiBhc3N1bWUgdGhhdCBhbiBpZGVudGlmaWVyIGlzIHBlcm1hbmVudCB1bmxlc3MgaXQgZXhwbGljaXRseSBzYXlzIHRoYXQgaXQgaXMgdGVtcG9yYXJ5LlxyXG4gICAqL1xyXG4gIHVzZT86IGZoaXIuRmhpckNvZGU8SWRlbnRpZmllclVzZUNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBJZGVudGlmaWVyLnVzZVxyXG4gICAqL1xyXG4gIF91c2U/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBkZWFscyBvbmx5IHdpdGggZ2VuZXJhbCBjYXRlZ29yaWVzIG9mIGlkZW50aWZpZXJzLiAgSXQgU0hPVUxEIG5vdCBiZSB1c2VkIGZvciBjb2RlcyB0aGF0IGNvcnJlc3BvbmQgMS4uMSB3aXRoIHRoZSBJZGVudGlmaWVyLnN5c3RlbS4gU29tZSBpZGVudGlmaWVycyBtYXkgZmFsbCBpbnRvIG11bHRpcGxlIGNhdGVnb3JpZXMgZHVlIHRvIGNvbW1vbiB1c2FnZS4gICBXaGVyZSB0aGUgc3lzdGVtIGlzIGtub3duLCBhIHR5cGUgaXMgdW5uZWNlc3NhcnkgYmVjYXVzZSB0aGUgdHlwZSBpcyBhbHdheXMgcGFydCBvZiB0aGUgc3lzdGVtIGRlZmluaXRpb24uIEhvd2V2ZXIgc3lzdGVtcyBvZnRlbiBuZWVkIHRvIGhhbmRsZSBpZGVudGlmaWVycyB3aGVyZSB0aGUgc3lzdGVtIGlzIG5vdCBrbm93bi4gVGhlcmUgaXMgbm90IGEgMToxIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHR5cGUgYW5kIHN5c3RlbSwgc2luY2UgbWFueSBkaWZmZXJlbnQgc3lzdGVtcyBoYXZlIHRoZSBzYW1lIHR5cGUuXHJcbiAgICovXHJcbiAgdHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllci5zeXN0ZW0gaXMgYWx3YXlzIGNhc2Ugc2Vuc2l0aXZlLlxyXG4gICAqL1xyXG4gIHN5c3RlbT86IGZoaXIuRmhpclVyaXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBJZGVudGlmaWVyLnN5c3RlbVxyXG4gICAqL1xyXG4gIF9zeXN0ZW0/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIElmIHRoZSB2YWx1ZSBpcyBhIGZ1bGwgVVJJLCB0aGVuIHRoZSBzeXN0ZW0gU0hBTEwgYmUgdXJuOmlldGY6cmZjOjM5ODYuICBUaGUgdmFsdWUncyBwcmltYXJ5IHB1cnBvc2UgaXMgY29tcHV0YXRpb25hbCBtYXBwaW5nLiAgQXMgYSByZXN1bHQsIGl0IG1heSBiZSBub3JtYWxpemVkIGZvciBjb21wYXJpc29uIHB1cnBvc2VzIChlLmcuIHJlbW92aW5nIG5vbi1zaWduaWZpY2FudCB3aGl0ZXNwYWNlLCBkYXNoZXMsIGV0Yy4pICBBIHZhbHVlIGZvcm1hdHRlZCBmb3IgaHVtYW4gZGlzcGxheSBjYW4gYmUgY29udmV5ZWQgdXNpbmcgdGhlIFtSZW5kZXJlZCBWYWx1ZSBleHRlbnNpb25dKGV4dGVuc2lvbi1yZW5kZXJlZC12YWx1ZS5odG1sKS4gSWRlbnRpZmllci52YWx1ZSBpcyB0byBiZSB0cmVhdGVkIGFzIGNhc2Ugc2Vuc2l0aXZlIHVubGVzcyBrbm93bGVkZ2Ugb2YgdGhlIElkZW50aWZpZXIuc3lzdGVtIGFsbG93cyB0aGUgcHJvY2Vzc2VyIHRvIGJlIGNvbmZpZGVudCB0aGF0IG5vbi1jYXNlLXNlbnNpdGl2ZSBwcm9jZXNzaW5nIGlzIHNhZmUuXHJcbiAgICovXHJcbiAgdmFsdWU/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogSWRlbnRpZmllci52YWx1ZVxyXG4gICAqL1xyXG4gIF92YWx1ZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGltZSBwZXJpb2QgZHVyaW5nIHdoaWNoIGlkZW50aWZpZXIgaXMvd2FzIHZhbGlkIGZvciB1c2UuXHJcbiAgICovXHJcbiAgcGVyaW9kPzogZmhpci5QZXJpb2RBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgSWRlbnRpZmllci5hc3NpZ25lciBtYXkgb21pdCB0aGUgLnJlZmVyZW5jZSBlbGVtZW50IGFuZCBvbmx5IGNvbnRhaW4gYSAuZGlzcGxheSBlbGVtZW50IHJlZmxlY3RpbmcgdGhlIG5hbWUgb3Igb3RoZXIgdGV4dHVhbCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgYXNzaWduaW5nIG9yZ2FuaXphdGlvbi5cclxuICAgKi9cclxuICBhc3NpZ25lcj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBbiBpZGVudGlmaWVyIC0gaWRlbnRpZmllcyBzb21lIGVudGl0eSB1bmlxdWVseSBhbmQgdW5hbWJpZ3VvdXNseS4gVHlwaWNhbGx5IHRoaXMgaXMgdXNlZCBmb3IgYnVzaW5lc3MgaWRlbnRpZmllcnMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgSWRlbnRpZmllciBleHRlbmRzIGZoaXIuRmhpckVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnSWRlbnRpZmllcic7XHJcbiAgLyoqXHJcbiAgICogQXBwbGljYXRpb25zIGNhbiBhc3N1bWUgdGhhdCBhbiBpZGVudGlmaWVyIGlzIHBlcm1hbmVudCB1bmxlc3MgaXQgZXhwbGljaXRseSBzYXlzIHRoYXQgaXQgaXMgdGVtcG9yYXJ5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyB1c2U/OiBmaGlyLkZoaXJDb2RlPElkZW50aWZpZXJVc2VDb2RlVHlwZT58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBkZWFscyBvbmx5IHdpdGggZ2VuZXJhbCBjYXRlZ29yaWVzIG9mIGlkZW50aWZpZXJzLiAgSXQgU0hPVUxEIG5vdCBiZSB1c2VkIGZvciBjb2RlcyB0aGF0IGNvcnJlc3BvbmQgMS4uMSB3aXRoIHRoZSBJZGVudGlmaWVyLnN5c3RlbS4gU29tZSBpZGVudGlmaWVycyBtYXkgZmFsbCBpbnRvIG11bHRpcGxlIGNhdGVnb3JpZXMgZHVlIHRvIGNvbW1vbiB1c2FnZS4gICBXaGVyZSB0aGUgc3lzdGVtIGlzIGtub3duLCBhIHR5cGUgaXMgdW5uZWNlc3NhcnkgYmVjYXVzZSB0aGUgdHlwZSBpcyBhbHdheXMgcGFydCBvZiB0aGUgc3lzdGVtIGRlZmluaXRpb24uIEhvd2V2ZXIgc3lzdGVtcyBvZnRlbiBuZWVkIHRvIGhhbmRsZSBpZGVudGlmaWVycyB3aGVyZSB0aGUgc3lzdGVtIGlzIG5vdCBrbm93bi4gVGhlcmUgaXMgbm90IGEgMToxIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHR5cGUgYW5kIHN5c3RlbSwgc2luY2UgbWFueSBkaWZmZXJlbnQgc3lzdGVtcyBoYXZlIHRoZSBzYW1lIHR5cGUuXHJcbiAgICovXHJcbiAgcHVibGljIHR5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllci5zeXN0ZW0gaXMgYWx3YXlzIGNhc2Ugc2Vuc2l0aXZlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzeXN0ZW0/OiBmaGlyLkZoaXJVcml8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIHRoZSB2YWx1ZSBpcyBhIGZ1bGwgVVJJLCB0aGVuIHRoZSBzeXN0ZW0gU0hBTEwgYmUgdXJuOmlldGY6cmZjOjM5ODYuICBUaGUgdmFsdWUncyBwcmltYXJ5IHB1cnBvc2UgaXMgY29tcHV0YXRpb25hbCBtYXBwaW5nLiAgQXMgYSByZXN1bHQsIGl0IG1heSBiZSBub3JtYWxpemVkIGZvciBjb21wYXJpc29uIHB1cnBvc2VzIChlLmcuIHJlbW92aW5nIG5vbi1zaWduaWZpY2FudCB3aGl0ZXNwYWNlLCBkYXNoZXMsIGV0Yy4pICBBIHZhbHVlIGZvcm1hdHRlZCBmb3IgaHVtYW4gZGlzcGxheSBjYW4gYmUgY29udmV5ZWQgdXNpbmcgdGhlIFtSZW5kZXJlZCBWYWx1ZSBleHRlbnNpb25dKGV4dGVuc2lvbi1yZW5kZXJlZC12YWx1ZS5odG1sKS4gSWRlbnRpZmllci52YWx1ZSBpcyB0byBiZSB0cmVhdGVkIGFzIGNhc2Ugc2Vuc2l0aXZlIHVubGVzcyBrbm93bGVkZ2Ugb2YgdGhlIElkZW50aWZpZXIuc3lzdGVtIGFsbG93cyB0aGUgcHJvY2Vzc2VyIHRvIGJlIGNvbmZpZGVudCB0aGF0IG5vbi1jYXNlLXNlbnNpdGl2ZSBwcm9jZXNzaW5nIGlzIHNhZmUuXHJcbiAgICovXHJcbiAgcHVibGljIHZhbHVlPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaW1lIHBlcmlvZCBkdXJpbmcgd2hpY2ggaWRlbnRpZmllciBpcy93YXMgdmFsaWQgZm9yIHVzZS5cclxuICAgKi9cclxuICBwdWJsaWMgcGVyaW9kPzogZmhpci5QZXJpb2R8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBJZGVudGlmaWVyLmFzc2lnbmVyIG1heSBvbWl0IHRoZSAucmVmZXJlbmNlIGVsZW1lbnQgYW5kIG9ubHkgY29udGFpbiBhIC5kaXNwbGF5IGVsZW1lbnQgcmVmbGVjdGluZyB0aGUgbmFtZSBvciBvdGhlciB0ZXh0dWFsIGluZm9ybWF0aW9uIGFib3V0IHRoZSBhc3NpZ25pbmcgb3JnYW5pemF0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhc3NpZ25lcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBJZGVudGlmaWVyIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8SWRlbnRpZmllckFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWyd1c2UnXSkgeyB0aGlzLnVzZSA9IG5ldyBmaGlyLkZoaXJDb2RlPElkZW50aWZpZXJVc2VDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2UudXNlfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ191c2UnXSkge1xyXG4gICAgICBpZiAodGhpcy51c2UpIHsgdGhpcy51c2UuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdXNlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudXNlID0gbmV3IGZoaXIuRmhpckNvZGU8SWRlbnRpZmllclVzZUNvZGVUeXBlPihzb3VyY2UuX3VzZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsndHlwZSddKSB7IHRoaXMudHlwZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UudHlwZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N5c3RlbSddKSB7IHRoaXMuc3lzdGVtID0gbmV3IGZoaXIuRmhpclVyaSh7dmFsdWU6IHNvdXJjZS5zeXN0ZW19KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3N5c3RlbSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnN5c3RlbSkgeyB0aGlzLnN5c3RlbS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zeXN0ZW0hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zeXN0ZW0gPSBuZXcgZmhpci5GaGlyVXJpKHNvdXJjZS5fc3lzdGVtIGFzIFBhcnRpYWw8Zmhpci5GaGlyVXJpQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd2YWx1ZSddKSB7IHRoaXMudmFsdWUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnZhbHVlfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ192YWx1ZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnZhbHVlKSB7IHRoaXMudmFsdWUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdmFsdWUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy52YWx1ZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl92YWx1ZSBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsncGVyaW9kJ10pIHsgdGhpcy5wZXJpb2QgPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLnBlcmlvZCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2Fzc2lnbmVyJ10pIHsgdGhpcy5hc3NpZ25lciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuYXNzaWduZXIpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlcXVpcmVkLWJvdW5kIFZhbHVlIFNldCBmb3IgdXNlIChJZGVudGlmaWVyLnVzZSlcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCB1c2VSZXF1aXJlZENvZGVzKCkge1xyXG4gICAgcmV0dXJuIElkZW50aWZpZXJVc2VDb2RlcztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5zaWJsZS1ib3VuZCBWYWx1ZSBTZXQgZm9yIHR5cGUgKElkZW50aWZpZXIudHlwZSlcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCB0eXBlRXh0ZW5zaWJsZUNvZGluZ3MoKTpJZGVudGlmaWVyVHlwZUNvZGluZ1R5cGUge1xyXG4gICAgcmV0dXJuIElkZW50aWZpZXJUeXBlQ29kaW5ncztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb246c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24pO1xyXG4gICAgaWYgKGV4cHJlc3Npb24gPT09ICcnKSB7IGV4cHJlc3Npb24gPSAnSWRlbnRpZmllcicgfVxyXG4gICAgaWYgKHRoaXNbJ3VzZSddICYmICghT2JqZWN0LnZhbHVlcyhJZGVudGlmaWVyVXNlQ29kZXMpLmluY2x1ZGVzKHRoaXMudXNlLnZhbHVlIGFzIGFueSkpKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdjb2RlLWludmFsaWQnLCBkaWFnbm9zdGljczogJ3VzZSAoSWRlbnRpZmllci51c2UpIG9mIHR5cGUgY29kZSBpcyBtaXNzaW5nIGNvZGUgZm9yIFJlcXVpcmVkIGJpbmRpbmcgdG86IElkZW50aWZpZXJVc2UnLCBleHByZXNzaW9uOiBbZXhwcmVzc2lvbl0gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInVzZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnVzZS5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycudXNlJykpOyB9XHJcbiAgICBpZiAodGhpc1tcInR5cGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy50eXBlLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy50eXBlJykpOyB9XHJcbiAgICBpZiAodGhpc1tcInN5c3RlbVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnN5c3RlbS5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuc3lzdGVtJykpOyB9XHJcbiAgICBpZiAodGhpc1tcInZhbHVlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMudmFsdWUuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLnZhbHVlJykpOyB9XHJcbiAgICBpZiAodGhpc1tcInBlcmlvZFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnBlcmlvZC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycucGVyaW9kJykpOyB9XHJcbiAgICBpZiAodGhpc1tcImFzc2lnbmVyXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuYXNzaWduZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLmFzc2lnbmVyJykpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=