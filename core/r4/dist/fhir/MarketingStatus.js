// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR ComplexType: MarketingStatus
import * as fhir from '../fhir.js';
/**
 * The marketing status describes the date when a medicinal product is actually put on the market or the date as of which it is no longer available.
 */
export class MarketingStatus extends fhir.BackboneElement {
    /**
     * Default constructor for MarketingStatus - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['country']) {
            this.country = new fhir.CodeableConcept(source.country);
        }
        else {
            this.country = null;
        }
        if (source['jurisdiction']) {
            this.jurisdiction = new fhir.CodeableConcept(source.jurisdiction);
        }
        if (source['status']) {
            this.status = new fhir.CodeableConcept(source.status);
        }
        else {
            this.status = null;
        }
        if (source['dateRange']) {
            this.dateRange = new fhir.Period(source.dateRange);
        }
        else {
            this.dateRange = null;
        }
        if (source['restoreDate']) {
            this.restoreDate = new fhir.FhirDateTime({ value: source.restoreDate });
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['country']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property country:fhir.CodeableConcept fhir: MarketingStatus.country:CodeableConcept' });
        }
        if (this["country"]) {
            issues.push(...this.country.doModelValidation());
        }
        if (this["jurisdiction"]) {
            issues.push(...this.jurisdiction.doModelValidation());
        }
        if (!this['status']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property status:fhir.CodeableConcept fhir: MarketingStatus.status:CodeableConcept' });
        }
        if (this["status"]) {
            issues.push(...this.status.doModelValidation());
        }
        if (!this['dateRange']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property dateRange:fhir.Period fhir: MarketingStatus.dateRange:Period' });
        }
        if (this["dateRange"]) {
            issues.push(...this.dateRange.doModelValidation());
        }
        if (this["restoreDate"]) {
            issues.push(...this.restoreDate.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MarketingStatus._fts_dataType = 'MarketingStatus';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWFya2V0aW5nU3RhdHVzLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9NYXJrZXRpbmdTdGF0dXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsb0NBQW9DO0FBRXBDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBNEJuQzs7R0FFRztBQUNILE1BQU0sT0FBTyxlQUFnQixTQUFRLElBQUksQ0FBQyxlQUFlO0lBeUJ2RDs7T0FFRztJQUNILFlBQVksU0FBc0MsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDNUYsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztTQUFFO2FBQzlFO1lBQUUsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7U0FBRTtRQUM3QixJQUFJLE1BQU0sQ0FBQyxjQUFjLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQztTQUFFO1FBQ2xHLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQUU7YUFDM0U7WUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztTQUFFO1FBQzVCLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1NBQUU7YUFDM0U7WUFBRSxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztTQUFFO1FBQy9CLElBQUksTUFBTSxDQUFDLGFBQWEsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLFdBQVcsRUFBQyxDQUFDLENBQUM7U0FBRTtJQUN2RyxDQUFDO0lBQ0Q7O09BRUc7SUFDYSxpQkFBaUI7UUFDL0IsSUFBSSxNQUFNLEdBQW1CLEtBQUssQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQ3ZELElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFDcEIsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQUUsc0dBQXNHLEVBQUUsQ0FBQyxDQUFDO1NBQzNLO1FBQ0QsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUMxRSxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQ3BGLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDbkIsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQUUsb0dBQW9HLEVBQUUsQ0FBQyxDQUFDO1NBQ3pLO1FBQ0QsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUN4RSxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQ3RCLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUFFLHdGQUF3RixFQUFFLENBQUMsQ0FBQztTQUM3SjtRQUNELElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFDOUUsSUFBSSxJQUFJLENBQUMsYUFBYSxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUNsRixPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQTFERDs7R0FFRztBQUM2Qiw2QkFBYSxHQUFVLGlCQUFpQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0LmNvcmUgdmVyc2lvbjogNC4wLjFcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIENvbXBsZXhUeXBlOiBNYXJrZXRpbmdTdGF0dXNcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgTWFya2V0aW5nU3RhdHVzIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1hcmtldGluZ1N0YXR1c0FyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjb3VudHJ5IGluIHdoaWNoIHRoZSBtYXJrZXRpbmcgYXV0aG9yaXNhdGlvbiBoYXMgYmVlbiBncmFudGVkIHNoYWxsIGJlIHNwZWNpZmllZCBJdCBzaG91bGQgYmUgc3BlY2lmaWVkIHVzaW5nIHRoZSBJU08gMzE2NiDigJEgMSBhbHBoYS0yIGNvZGUgZWxlbWVudHMuXHJcbiAgICovXHJcbiAgY291bnRyeTogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogV2hlcmUgYSBNZWRpY2luZXMgUmVndWxhdG9yeSBBZ2VuY3kgaGFzIGdyYW50ZWQgYSBtYXJrZXRpbmcgYXV0aG9yaXNhdGlvbiBmb3Igd2hpY2ggc3BlY2lmaWMgcHJvdmlzaW9ucyB3aXRoaW4gYSBqdXJpc2RpY3Rpb24gYXBwbHksIHRoZSBqdXJpc2RpY3Rpb24gY2FuIGJlIHNwZWNpZmllZCB1c2luZyBhbiBhcHByb3ByaWF0ZSBjb250cm9sbGVkIHRlcm1pbm9sb2d5IFRoZSBjb250cm9sbGVkIHRlcm0gYW5kIHRoZSBjb250cm9sbGVkIHRlcm0gaWRlbnRpZmllciBzaGFsbCBiZSBzcGVjaWZpZWQuXHJcbiAgICovXHJcbiAganVyaXNkaWN0aW9uPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGF0dHJpYnV0ZSBwcm92aWRlcyBpbmZvcm1hdGlvbiBvbiB0aGUgc3RhdHVzIG9mIHRoZSBtYXJrZXRpbmcgb2YgdGhlIG1lZGljaW5hbCBwcm9kdWN0IFNlZSBJU08vVFMgMjA0NDMgZm9yIG1vcmUgaW5mb3JtYXRpb24gYW5kIGV4YW1wbGVzLlxyXG4gICAqL1xyXG4gIHN0YXR1czogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgd2hlbiB0aGUgTWVkaWNpbmFsIFByb2R1Y3QgaXMgcGxhY2VkIG9uIHRoZSBtYXJrZXQgYnkgdGhlIE1hcmtldGluZyBBdXRob3Jpc2F0aW9uIEhvbGRlciAob3Igd2hlcmUgYXBwbGljYWJsZSwgdGhlIG1hbnVmYWN0dXJlci9kaXN0cmlidXRvcikgaW4gYSBjb3VudHJ5IGFuZC9vciBqdXJpc2RpY3Rpb24gc2hhbGwgYmUgcHJvdmlkZWQgQSBjb21wbGV0ZSBkYXRlIGNvbnNpc3Rpbmcgb2YgZGF5LCBtb250aCBhbmQgeWVhciBzaGFsbCBiZSBzcGVjaWZpZWQgdXNpbmcgdGhlIElTTyA4NjAxIGRhdGUgZm9ybWF0IE5PVEUg4oCcUGxhY2VkIG9uIHRoZSBtYXJrZXTigJ0gcmVmZXJzIHRvIHRoZSByZWxlYXNlIG9mIHRoZSBNZWRpY2luYWwgUHJvZHVjdCBpbnRvIHRoZSBkaXN0cmlidXRpb24gY2hhaW4uXHJcbiAgICovXHJcbiAgZGF0ZVJhbmdlOiBmaGlyLlBlcmlvZEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSB3aGVuIHRoZSBNZWRpY2luYWwgUHJvZHVjdCBpcyBwbGFjZWQgb24gdGhlIG1hcmtldCBieSB0aGUgTWFya2V0aW5nIEF1dGhvcmlzYXRpb24gSG9sZGVyIChvciB3aGVyZSBhcHBsaWNhYmxlLCB0aGUgbWFudWZhY3R1cmVyL2Rpc3RyaWJ1dG9yKSBpbiBhIGNvdW50cnkgYW5kL29yIGp1cmlzZGljdGlvbiBzaGFsbCBiZSBwcm92aWRlZCBBIGNvbXBsZXRlIGRhdGUgY29uc2lzdGluZyBvZiBkYXksIG1vbnRoIGFuZCB5ZWFyIHNoYWxsIGJlIHNwZWNpZmllZCB1c2luZyB0aGUgSVNPIDg2MDEgZGF0ZSBmb3JtYXQgTk9URSDigJxQbGFjZWQgb24gdGhlIG1hcmtldOKAnSByZWZlcnMgdG8gdGhlIHJlbGVhc2Ugb2YgdGhlIE1lZGljaW5hbCBQcm9kdWN0IGludG8gdGhlIGRpc3RyaWJ1dGlvbiBjaGFpbi5cclxuICAgKi9cclxuICByZXN0b3JlRGF0ZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgbWFya2V0aW5nIHN0YXR1cyBkZXNjcmliZXMgdGhlIGRhdGUgd2hlbiBhIG1lZGljaW5hbCBwcm9kdWN0IGlzIGFjdHVhbGx5IHB1dCBvbiB0aGUgbWFya2V0IG9yIHRoZSBkYXRlIGFzIG9mIHdoaWNoIGl0IGlzIG5vIGxvbmdlciBhdmFpbGFibGUuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWFya2V0aW5nU3RhdHVzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWFya2V0aW5nU3RhdHVzJztcclxuICAvKipcclxuICAgKiBUaGUgY291bnRyeSBpbiB3aGljaCB0aGUgbWFya2V0aW5nIGF1dGhvcmlzYXRpb24gaGFzIGJlZW4gZ3JhbnRlZCBzaGFsbCBiZSBzcGVjaWZpZWQgSXQgc2hvdWxkIGJlIHNwZWNpZmllZCB1c2luZyB0aGUgSVNPIDMxNjYg4oCRIDEgYWxwaGEtMiBjb2RlIGVsZW1lbnRzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb3VudHJ5OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFdoZXJlIGEgTWVkaWNpbmVzIFJlZ3VsYXRvcnkgQWdlbmN5IGhhcyBncmFudGVkIGEgbWFya2V0aW5nIGF1dGhvcmlzYXRpb24gZm9yIHdoaWNoIHNwZWNpZmljIHByb3Zpc2lvbnMgd2l0aGluIGEganVyaXNkaWN0aW9uIGFwcGx5LCB0aGUganVyaXNkaWN0aW9uIGNhbiBiZSBzcGVjaWZpZWQgdXNpbmcgYW4gYXBwcm9wcmlhdGUgY29udHJvbGxlZCB0ZXJtaW5vbG9neSBUaGUgY29udHJvbGxlZCB0ZXJtIGFuZCB0aGUgY29udHJvbGxlZCB0ZXJtIGlkZW50aWZpZXIgc2hhbGwgYmUgc3BlY2lmaWVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBqdXJpc2RpY3Rpb24/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBhdHRyaWJ1dGUgcHJvdmlkZXMgaW5mb3JtYXRpb24gb24gdGhlIHN0YXR1cyBvZiB0aGUgbWFya2V0aW5nIG9mIHRoZSBtZWRpY2luYWwgcHJvZHVjdCBTZWUgSVNPL1RTIDIwNDQzIGZvciBtb3JlIGluZm9ybWF0aW9uIGFuZCBleGFtcGxlcy5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdHVzOiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRlIHdoZW4gdGhlIE1lZGljaW5hbCBQcm9kdWN0IGlzIHBsYWNlZCBvbiB0aGUgbWFya2V0IGJ5IHRoZSBNYXJrZXRpbmcgQXV0aG9yaXNhdGlvbiBIb2xkZXIgKG9yIHdoZXJlIGFwcGxpY2FibGUsIHRoZSBtYW51ZmFjdHVyZXIvZGlzdHJpYnV0b3IpIGluIGEgY291bnRyeSBhbmQvb3IganVyaXNkaWN0aW9uIHNoYWxsIGJlIHByb3ZpZGVkIEEgY29tcGxldGUgZGF0ZSBjb25zaXN0aW5nIG9mIGRheSwgbW9udGggYW5kIHllYXIgc2hhbGwgYmUgc3BlY2lmaWVkIHVzaW5nIHRoZSBJU08gODYwMSBkYXRlIGZvcm1hdCBOT1RFIOKAnFBsYWNlZCBvbiB0aGUgbWFya2V04oCdIHJlZmVycyB0byB0aGUgcmVsZWFzZSBvZiB0aGUgTWVkaWNpbmFsIFByb2R1Y3QgaW50byB0aGUgZGlzdHJpYnV0aW9uIGNoYWluLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkYXRlUmFuZ2U6IGZoaXIuUGVyaW9kfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgd2hlbiB0aGUgTWVkaWNpbmFsIFByb2R1Y3QgaXMgcGxhY2VkIG9uIHRoZSBtYXJrZXQgYnkgdGhlIE1hcmtldGluZyBBdXRob3Jpc2F0aW9uIEhvbGRlciAob3Igd2hlcmUgYXBwbGljYWJsZSwgdGhlIG1hbnVmYWN0dXJlci9kaXN0cmlidXRvcikgaW4gYSBjb3VudHJ5IGFuZC9vciBqdXJpc2RpY3Rpb24gc2hhbGwgYmUgcHJvdmlkZWQgQSBjb21wbGV0ZSBkYXRlIGNvbnNpc3Rpbmcgb2YgZGF5LCBtb250aCBhbmQgeWVhciBzaGFsbCBiZSBzcGVjaWZpZWQgdXNpbmcgdGhlIElTTyA4NjAxIGRhdGUgZm9ybWF0IE5PVEUg4oCcUGxhY2VkIG9uIHRoZSBtYXJrZXTigJ0gcmVmZXJzIHRvIHRoZSByZWxlYXNlIG9mIHRoZSBNZWRpY2luYWwgUHJvZHVjdCBpbnRvIHRoZSBkaXN0cmlidXRpb24gY2hhaW4uXHJcbiAgICovXHJcbiAgcHVibGljIHJlc3RvcmVEYXRlPzogZmhpci5GaGlyRGF0ZVRpbWV8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE1hcmtldGluZ1N0YXR1cyAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE1hcmtldGluZ1N0YXR1c0FyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydjb3VudHJ5J10pIHsgdGhpcy5jb3VudHJ5ID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jb3VudHJ5KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY291bnRyeSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ2p1cmlzZGljdGlvbiddKSB7IHRoaXMuanVyaXNkaWN0aW9uID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5qdXJpc2RpY3Rpb24pOyB9XHJcbiAgICBpZiAoc291cmNlWydzdGF0dXMnXSkgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2Uuc3RhdHVzKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGF0ZVJhbmdlJ10pIHsgdGhpcy5kYXRlUmFuZ2UgPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLmRhdGVSYW5nZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmRhdGVSYW5nZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3Jlc3RvcmVEYXRlJ10pIHsgdGhpcy5yZXN0b3JlRGF0ZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5yZXN0b3JlRGF0ZX0pOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAoIXRoaXNbJ2NvdW50cnknXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgY291bnRyeTpmaGlyLkNvZGVhYmxlQ29uY2VwdCBmaGlyOiBNYXJrZXRpbmdTdGF0dXMuY291bnRyeTpDb2RlYWJsZUNvbmNlcHQnIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJjb3VudHJ5XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY291bnRyeS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJqdXJpc2RpY3Rpb25cIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5qdXJpc2RpY3Rpb24uZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICghdGhpc1snc3RhdHVzJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHN0YXR1czpmaGlyLkNvZGVhYmxlQ29uY2VwdCBmaGlyOiBNYXJrZXRpbmdTdGF0dXMuc3RhdHVzOkNvZGVhYmxlQ29uY2VwdCcgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInN0YXR1c1wiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnN0YXR1cy5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKCF0aGlzWydkYXRlUmFuZ2UnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgZGF0ZVJhbmdlOmZoaXIuUGVyaW9kIGZoaXI6IE1hcmtldGluZ1N0YXR1cy5kYXRlUmFuZ2U6UGVyaW9kJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiZGF0ZVJhbmdlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZGF0ZVJhbmdlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInJlc3RvcmVEYXRlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucmVzdG9yZURhdGUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbiJdfQ==