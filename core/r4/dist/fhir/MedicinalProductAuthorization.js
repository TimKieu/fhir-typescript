// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: MedicinalProductAuthorization
import * as fhir from '../fhir.js';
/**
 * Authorization in areas within a country.
 */
export class MedicinalProductAuthorizationJurisdictionalAuthorization extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductAuthorizationJurisdictionalAuthorization - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['country']) {
            this.country = new fhir.CodeableConcept(source.country);
        }
        if (source['jurisdiction']) {
            this.jurisdiction = source.jurisdiction.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.jurisdiction = [];
        }
        if (source['legalStatusOfSupply']) {
            this.legalStatusOfSupply = new fhir.CodeableConcept(source.legalStatusOfSupply);
        }
        if (source['validityPeriod']) {
            this.validityPeriod = new fhir.Period(source.validityPeriod);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'MedicinalProductAuthorization.jurisdictionalAuthorization';
        }
        this.vOptA('identifier', expression);
        this.vOptS('country', expression);
        this.vOptA('jurisdiction', expression);
        this.vOptS('legalStatusOfSupply', expression);
        this.vOptS('validityPeriod', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductAuthorizationJurisdictionalAuthorization._fts_dataType = 'MedicinalProductAuthorizationJurisdictionalAuthorization';
/**
 * The regulatory procedure for granting or amending a marketing authorization.
 */
export class MedicinalProductAuthorizationProcedure extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductAuthorizationProcedure - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier);
        }
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type);
        }
        else {
            this.type = null;
        }
        if (source['date']) {
            this.date = source.date;
        }
        else if (source['datePeriod']) {
            this.date = new fhir.Period(source.datePeriod);
        }
        else if (source['dateDateTime']) {
            this.date = new fhir.FhirDateTime({ value: source.dateDateTime });
        }
        if (source['application']) {
            this.application = source.application.map((x) => new fhir.MedicinalProductAuthorizationProcedure(x));
        }
        else {
            this.application = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'MedicinalProductAuthorization.procedure';
        }
        this.vOptS('identifier', expression);
        this.vReqS('type', expression);
        this.vOptS('date', expression);
        this.vOptA('application', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductAuthorizationProcedure._fts_dataType = 'MedicinalProductAuthorizationProcedure';
/**
 * Internal flag to properly serialize choice-type element MedicinalProductAuthorization.procedure.date[x]
 */
MedicinalProductAuthorizationProcedure._fts_dateIsChoice = true;
/**
 * The regulatory authorization of a medicinal product.
 */
export class MedicinalProductAuthorization extends fhir.DomainResource {
    /**
     * Default constructor for MedicinalProductAuthorization - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'MedicinalProductAuthorization';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject);
        }
        if (source['country']) {
            this.country = source.country.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.country = [];
        }
        if (source['jurisdiction']) {
            this.jurisdiction = source.jurisdiction.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.jurisdiction = [];
        }
        if (source['status']) {
            this.status = new fhir.CodeableConcept(source.status);
        }
        if (source['statusDate']) {
            this.statusDate = new fhir.FhirDateTime({ value: source.statusDate });
        }
        if (source['_statusDate']) {
            if (this.statusDate) {
                this.statusDate.addExtendedProperties(source._statusDate);
            }
            else {
                this.statusDate = new fhir.FhirDateTime(source._statusDate);
            }
        }
        if (source['restoreDate']) {
            this.restoreDate = new fhir.FhirDateTime({ value: source.restoreDate });
        }
        if (source['_restoreDate']) {
            if (this.restoreDate) {
                this.restoreDate.addExtendedProperties(source._restoreDate);
            }
            else {
                this.restoreDate = new fhir.FhirDateTime(source._restoreDate);
            }
        }
        if (source['validityPeriod']) {
            this.validityPeriod = new fhir.Period(source.validityPeriod);
        }
        if (source['dataExclusivityPeriod']) {
            this.dataExclusivityPeriod = new fhir.Period(source.dataExclusivityPeriod);
        }
        if (source['dateOfFirstAuthorization']) {
            this.dateOfFirstAuthorization = new fhir.FhirDateTime({ value: source.dateOfFirstAuthorization });
        }
        if (source['_dateOfFirstAuthorization']) {
            if (this.dateOfFirstAuthorization) {
                this.dateOfFirstAuthorization.addExtendedProperties(source._dateOfFirstAuthorization);
            }
            else {
                this.dateOfFirstAuthorization = new fhir.FhirDateTime(source._dateOfFirstAuthorization);
            }
        }
        if (source['internationalBirthDate']) {
            this.internationalBirthDate = new fhir.FhirDateTime({ value: source.internationalBirthDate });
        }
        if (source['_internationalBirthDate']) {
            if (this.internationalBirthDate) {
                this.internationalBirthDate.addExtendedProperties(source._internationalBirthDate);
            }
            else {
                this.internationalBirthDate = new fhir.FhirDateTime(source._internationalBirthDate);
            }
        }
        if (source['legalBasis']) {
            this.legalBasis = new fhir.CodeableConcept(source.legalBasis);
        }
        if (source['jurisdictionalAuthorization']) {
            this.jurisdictionalAuthorization = source.jurisdictionalAuthorization.map((x) => new fhir.MedicinalProductAuthorizationJurisdictionalAuthorization(x));
        }
        else {
            this.jurisdictionalAuthorization = [];
        }
        if (source['holder']) {
            this.holder = new fhir.Reference(source.holder);
        }
        if (source['regulator']) {
            this.regulator = new fhir.Reference(source.regulator);
        }
        if (source['procedure']) {
            this.procedure = new fhir.MedicinalProductAuthorizationProcedure(source.procedure);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'MedicinalProductAuthorization';
        }
        this.vReqS('resourceType', expression);
        this.vOptA('identifier', expression);
        this.vOptS('subject', expression);
        this.vOptA('country', expression);
        this.vOptA('jurisdiction', expression);
        this.vOptS('status', expression);
        this.vOptS('statusDate', expression);
        this.vOptS('restoreDate', expression);
        this.vOptS('validityPeriod', expression);
        this.vOptS('dataExclusivityPeriod', expression);
        this.vOptS('dateOfFirstAuthorization', expression);
        this.vOptS('internationalBirthDate', expression);
        this.vOptS('legalBasis', expression);
        this.vOptA('jurisdictionalAuthorization', expression);
        this.vOptS('holder', expression);
        this.vOptS('regulator', expression);
        this.vOptS('procedure', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductAuthorization._fts_dataType = 'MedicinalProductAuthorization';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVkaWNpbmFsUHJvZHVjdEF1dGhvcml6YXRpb24uanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL01lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQiwrQ0FBK0M7QUFDL0Msa0NBQWtDO0FBQ2xDLCtDQUErQztBQUUvQyxPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQTRCbkM7O0dBRUc7QUFDSCxNQUFNLE9BQU8sd0RBQXlELFNBQVEsSUFBSSxDQUFDLGVBQWU7SUF5QmhHOztPQUVHO0lBQ0gsWUFBWSxTQUErRSxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUNySSxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLFlBQVksQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUNoRztZQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsRUFBRSxDQUFDO1NBQUU7UUFDOUIsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7U0FBRTtRQUNuRixJQUFJLE1BQU0sQ0FBQyxjQUFjLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxZQUFZLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDM0c7WUFBRSxJQUFJLENBQUMs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LENBQUMsS0FBSyxDQUFDLGdCQUFnQixFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ3ZDLElBQUksQ0FBQyxLQUFLLENBQUMsdUJBQXVCLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDOUMsSUFBSSxDQUFDLEtBQUssQ0FBQywwQkFBMEIsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUNqRCxJQUFJLENBQUMsS0FBSyxDQUFDLHdCQUF3QixFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQy9DLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ25DLElBQUksQ0FBQyxLQUFLLENBQUMsNkJBQTZCLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDcEQsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDL0IsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDbEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDbEMsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQzs7QUEzSUQ7O0dBRUc7QUFDNkIsMkNBQWEsR0FBVSwrQkFBK0IsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNC5jb3JlIHZlcnNpb246IDQuMC4xXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogTWVkaWNpbmFsUHJvZHVjdEF1dGhvcml6YXRpb25cclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgTWVkaWNpbmFsUHJvZHVjdEF1dGhvcml6YXRpb25KdXJpc2RpY3Rpb25hbEF1dGhvcml6YXRpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVkaWNpbmFsUHJvZHVjdEF1dGhvcml6YXRpb25KdXJpc2RpY3Rpb25hbEF1dGhvcml6YXRpb25BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgYXNzaWduZWQgbnVtYmVyIGZvciB0aGUgbWFya2V0aW5nIGF1dGhvcml6YXRpb24uXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ291bnRyeSBvZiBhdXRob3JpemF0aW9uLlxyXG4gICAqL1xyXG4gIGNvdW50cnk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEp1cmlzZGljdGlvbiB3aXRoaW4gYSBjb3VudHJ5LlxyXG4gICAqL1xyXG4gIGp1cmlzZGljdGlvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbGVnYWwgc3RhdHVzIG9mIHN1cHBseSBpbiBhIGp1cmlzZGljdGlvbiBvciByZWdpb24uXHJcbiAgICovXHJcbiAgbGVnYWxTdGF0dXNPZlN1cHBseT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHN0YXJ0IGFuZCBleHBlY3RlZCBlbmQgZGF0ZSBvZiB0aGUgYXV0aG9yaXphdGlvbi5cclxuICAgKi9cclxuICB2YWxpZGl0eVBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBdXRob3JpemF0aW9uIGluIGFyZWFzIHdpdGhpbiBhIGNvdW50cnkuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNpbmFsUHJvZHVjdEF1dGhvcml6YXRpb25KdXJpc2RpY3Rpb25hbEF1dGhvcml6YXRpb24gZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdNZWRpY2luYWxQcm9kdWN0QXV0aG9yaXphdGlvbkp1cmlzZGljdGlvbmFsQXV0aG9yaXphdGlvbic7XHJcbiAgLyoqXHJcbiAgICogVGhlIGFzc2lnbmVkIG51bWJlciBmb3IgdGhlIG1hcmtldGluZyBhdXRob3JpemF0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyOiBmaGlyLklkZW50aWZpZXJbXTtcclxuICAvKipcclxuICAgKiBDb3VudHJ5IG9mIGF1dGhvcml6YXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIGNvdW50cnk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSnVyaXNkaWN0aW9uIHdpdGhpbiBhIGNvdW50cnkuXHJcbiAgICovXHJcbiAgcHVibGljIGp1cmlzZGljdGlvbjogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBUaGUgbGVnYWwgc3RhdHVzIG9mIHN1cHBseSBpbiBhIGp1cmlzZGljdGlvbiBvciByZWdpb24uXHJcbiAgICovXHJcbiAgcHVibGljIGxlZ2FsU3RhdHVzT2ZTdXBwbHk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHN0YXJ0IGFuZCBleHBlY3RlZCBlbmQgZGF0ZSBvZiB0aGUgYXV0aG9yaXphdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgdmFsaWRpdHlQZXJpb2Q/OiBmaGlyLlBlcmlvZHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgTWVkaWNpbmFsUHJvZHVjdEF1dGhvcml6YXRpb25KdXJpc2RpY3Rpb25hbEF1dGhvcml6YXRpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxNZWRpY2luYWxQcm9kdWN0QXV0aG9yaXphdGlvbkp1cmlzZGljdGlvbmFsQXV0aG9yaXphdGlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gc291cmNlLmlkZW50aWZpZXIubWFwKCh4KSA9PiBuZXcgZmhpci5JZGVudGlmaWVyKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaWRlbnRpZmllciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydjb3VudHJ5J10pIHsgdGhpcy5jb3VudHJ5ID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jb3VudHJ5KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnanVyaXNkaWN0aW9uJ10pIHsgdGhpcy5qdXJpc2RpY3Rpb24gPSBzb3VyY2UuanVyaXNkaWN0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuanVyaXNkaWN0aW9uID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2xlZ2FsU3RhdHVzT2ZTdXBwbHknXSkgeyB0aGlzLmxlZ2FsU3RhdHVzT2ZTdXBwbHkgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmxlZ2FsU3RhdHVzT2ZTdXBwbHkpOyB9XHJcbiAgICBpZiAoc291cmNlWyd2YWxpZGl0eVBlcmlvZCddKSB7IHRoaXMudmFsaWRpdHlQZXJpb2QgPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLnZhbGlkaXR5UGVyaW9kKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdNZWRpY2luYWxQcm9kdWN0QXV0aG9yaXphdGlvbi5qdXJpc2RpY3Rpb25hbEF1dGhvcml6YXRpb24nIH1cclxuICAgIHRoaXMudk9wdEEoJ2lkZW50aWZpZXInLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdjb3VudHJ5JyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0QSgnanVyaXNkaWN0aW9uJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnbGVnYWxTdGF0dXNPZlN1cHBseScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ3ZhbGlkaXR5UGVyaW9kJyxleHByZXNzaW9uKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uUHJvY2VkdXJlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uUHJvY2VkdXJlQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllciBmb3IgdGhpcyBwcm9jZWR1cmUuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFR5cGUgb2YgcHJvY2VkdXJlLlxyXG4gICAqL1xyXG4gIHR5cGU6IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIERhdGUgb2YgcHJvY2VkdXJlLlxyXG4gICAqL1xyXG4gIGRhdGU/OiBmaGlyLlBlcmlvZHxmaGlyLkZoaXJEYXRlVGltZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGF0ZSBvZiBwcm9jZWR1cmUuXHJcbiAgICovXHJcbiAgZGF0ZVBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGF0ZSBvZiBwcm9jZWR1cmUuXHJcbiAgICovXHJcbiAgZGF0ZURhdGVUaW1lPzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBcHBsY2F0aW9ucyBzdWJtaXR0ZWQgdG8gb2J0YWluIGEgbWFya2V0aW5nIGF1dGhvcml6YXRpb24uXHJcbiAgICovXHJcbiAgYXBwbGljYXRpb24/OiBmaGlyLk1lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uUHJvY2VkdXJlQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSByZWd1bGF0b3J5IHByb2NlZHVyZSBmb3IgZ3JhbnRpbmcgb3IgYW1lbmRpbmcgYSBtYXJrZXRpbmcgYXV0aG9yaXphdGlvbi5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZWRpY2luYWxQcm9kdWN0QXV0aG9yaXphdGlvblByb2NlZHVyZSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ01lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uUHJvY2VkdXJlJztcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVyIGZvciB0aGlzIHByb2NlZHVyZS5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVHlwZSBvZiBwcm9jZWR1cmUuXHJcbiAgICovXHJcbiAgcHVibGljIHR5cGU6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogRGF0ZSBvZiBwcm9jZWR1cmUuXHJcbiAgICovXHJcbiAgcHVibGljIGRhdGU/OiAoZmhpci5QZXJpb2R8Zmhpci5GaGlyRGF0ZVRpbWUpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IE1lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uLnByb2NlZHVyZS5kYXRlW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX2RhdGVJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBBcHBsY2F0aW9ucyBzdWJtaXR0ZWQgdG8gb2J0YWluIGEgbWFya2V0aW5nIGF1dGhvcml6YXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIGFwcGxpY2F0aW9uOiBmaGlyLk1lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uUHJvY2VkdXJlW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgTWVkaWNpbmFsUHJvZHVjdEF1dGhvcml6YXRpb25Qcm9jZWR1cmUgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxNZWRpY2luYWxQcm9kdWN0QXV0aG9yaXphdGlvblByb2NlZHVyZUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gbmV3IGZoaXIuSWRlbnRpZmllcihzb3VyY2UuaWRlbnRpZmllcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ3R5cGUnXSkgeyB0aGlzLnR5cGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnR5cGUpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy50eXBlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGF0ZSddKSB7IHRoaXMuZGF0ZSA9IHNvdXJjZS5kYXRlOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2RhdGVQZXJpb2QnXSkgeyB0aGlzLmRhdGUgPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLmRhdGVQZXJpb2QpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2RhdGVEYXRlVGltZSddKSB7IHRoaXMuZGF0ZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5kYXRlRGF0ZVRpbWV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYXBwbGljYXRpb24nXSkgeyB0aGlzLmFwcGxpY2F0aW9uID0gc291cmNlLmFwcGxpY2F0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuTWVkaWNpbmFsUHJvZHVjdEF1dGhvcml6YXRpb25Qcm9jZWR1cmUoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5hcHBsaWNhdGlvbiA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKTtcclxuICAgIGlmIChleHByZXNzaW9uID09PSAnJykgeyBleHByZXNzaW9uID0gJ01lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uLnByb2NlZHVyZScgfVxyXG4gICAgdGhpcy52T3B0UygnaWRlbnRpZmllcicsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudlJlcVMoJ3R5cGUnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdkYXRlJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0QSgnYXBwbGljYXRpb24nLGV4cHJlc3Npb24pXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgTWVkaWNpbmFsUHJvZHVjdEF1dGhvcml6YXRpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVkaWNpbmFsUHJvZHVjdEF1dGhvcml6YXRpb25BcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJNZWRpY2luYWxQcm9kdWN0QXV0aG9yaXphdGlvblwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBCdXNpbmVzcyBpZGVudGlmaWVyIGZvciB0aGUgbWFya2V0aW5nIGF1dGhvcml6YXRpb24sIGFzIGFzc2lnbmVkIGJ5IGEgcmVndWxhdG9yLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBtZWRpY2luYWwgcHJvZHVjdCB0aGF0IGlzIGJlaW5nIGF1dGhvcml6ZWQuXHJcbiAgICovXHJcbiAgc3ViamVjdD86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNvdW50cnkgaW4gd2hpY2ggdGhlIG1hcmtldGluZyBhdXRob3JpemF0aW9uIGhhcyBiZWVuIGdyYW50ZWQuXHJcbiAgICovXHJcbiAgY291bnRyeT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBKdXJpc2RpY3Rpb24gd2l0aGluIGEgY291bnRyeS5cclxuICAgKi9cclxuICBqdXJpc2RpY3Rpb24/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHN0YXR1cyBvZiB0aGUgbWFya2V0aW5nIGF1dGhvcml6YXRpb24uXHJcbiAgICovXHJcbiAgc3RhdHVzPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSBhdCB3aGljaCB0aGUgZ2l2ZW4gc3RhdHVzIGhhcyBiZWNvbWUgYXBwbGljYWJsZS5cclxuICAgKi9cclxuICBzdGF0dXNEYXRlPzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogTWVkaWNpbmFsUHJvZHVjdEF1dGhvcml6YXRpb24uc3RhdHVzRGF0ZVxyXG4gICAqL1xyXG4gIF9zdGF0dXNEYXRlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSB3aGVuIGEgc3VzcGVuZGVkIHRoZSBtYXJrZXRpbmcgb3IgdGhlIG1hcmtldGluZyBhdXRob3JpemF0aW9uIG9mIHRoZSBwcm9kdWN0IGlzIGFudGljaXBhdGVkIHRvIGJlIHJlc3RvcmVkLlxyXG4gICAqL1xyXG4gIHJlc3RvcmVEYXRlPzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogTWVkaWNpbmFsUHJvZHVjdEF1dGhvcml6YXRpb24ucmVzdG9yZURhdGVcclxuICAgKi9cclxuICBfcmVzdG9yZURhdGU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBiZWdpbm5pbmcgb2YgdGhlIHRpbWUgcGVyaW9kIGluIHdoaWNoIHRoZSBtYXJrZXRpbmcgYXV0aG9yaXphdGlvbiBpcyBpbiB0aGUgc3BlY2lmaWMgc3RhdHVzIHNoYWxsIGJlIHNwZWNpZmllZCBBIGNvbXBsZXRlIGRhdGUgY29uc2lzdGluZyBvZiBkYXksIG1vbnRoIGFuZCB5ZWFyIHNoYWxsIGJlIHNwZWNpZmllZCB1c2luZyB0aGUgSVNPIDg2MDEgZGF0ZSBmb3JtYXQuXHJcbiAgICovXHJcbiAgdmFsaWRpdHlQZXJpb2Q/OiBmaGlyLlBlcmlvZEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgcGVyaW9kIG9mIHRpbWUgYWZ0ZXIgYXV0aG9yaXphdGlvbiBiZWZvcmUgZ2VuZXJpYyBwcm9kdWN0IGFwcGxpY2F0aW9zbiBjYW4gYmUgc3VibWl0dGVkLlxyXG4gICAqL1xyXG4gIGRhdGFFeGNsdXNpdml0eVBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgd2hlbiB0aGUgZmlyc3QgYXV0aG9yaXphdGlvbiB3YXMgZ3JhbnRlZCBieSBhIE1lZGljaW5lcyBSZWd1bGF0b3J5IEFnZW5jeS5cclxuICAgKi9cclxuICBkYXRlT2ZGaXJzdEF1dGhvcml6YXRpb24/OiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBNZWRpY2luYWxQcm9kdWN0QXV0aG9yaXphdGlvbi5kYXRlT2ZGaXJzdEF1dGhvcml6YXRpb25cclxuICAgKi9cclxuICBfZGF0ZU9mRmlyc3RBdXRob3JpemF0aW9uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBEYXRlIG9mIGZpcnN0IG1hcmtldGluZyBhdXRob3JpemF0aW9uIGZvciBhIGNvbXBhbnkncyBuZXcgbWVkaWNpbmFsIHByb2R1Y3QgaW4gYW55IGNvdW50cnkgaW4gdGhlIFdvcmxkLlxyXG4gICAqL1xyXG4gIGludGVybmF0aW9uYWxCaXJ0aERhdGU/OiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBNZWRpY2luYWxQcm9kdWN0QXV0aG9yaXphdGlvbi5pbnRlcm5hdGlvbmFsQmlydGhEYXRlXHJcbiAgICovXHJcbiAgX2ludGVybmF0aW9uYWxCaXJ0aERhdGU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsZWdhbCBmcmFtZXdvcmsgYWdhaW5zdCB3aGljaCB0aGlzIGF1dGhvcml6YXRpb24gaXMgZ3JhbnRlZC5cclxuICAgKi9cclxuICBsZWdhbEJhc2lzPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBdXRob3JpemF0aW9uIGluIGFyZWFzIHdpdGhpbiBhIGNvdW50cnkuXHJcbiAgICovXHJcbiAganVyaXNkaWN0aW9uYWxBdXRob3JpemF0aW9uPzogZmhpci5NZWRpY2luYWxQcm9kdWN0QXV0aG9yaXphdGlvbkp1cmlzZGljdGlvbmFsQXV0aG9yaXphdGlvbkFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTWFya2V0aW5nIEF1dGhvcml6YXRpb24gSG9sZGVyLlxyXG4gICAqL1xyXG4gIGhvbGRlcj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTWVkaWNpbmVzIFJlZ3VsYXRvcnkgQWdlbmN5LlxyXG4gICAqL1xyXG4gIHJlZ3VsYXRvcj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlZ3VsYXRvcnkgcHJvY2VkdXJlIGZvciBncmFudGluZyBvciBhbWVuZGluZyBhIG1hcmtldGluZyBhdXRob3JpemF0aW9uLlxyXG4gICAqL1xyXG4gIHByb2NlZHVyZT86IGZoaXIuTWVkaWNpbmFsUHJvZHVjdEF1dGhvcml6YXRpb25Qcm9jZWR1cmVBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSByZWd1bGF0b3J5IGF1dGhvcml6YXRpb24gb2YgYSBtZWRpY2luYWwgcHJvZHVjdC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZWRpY2luYWxQcm9kdWN0QXV0aG9yaXphdGlvbiBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVkaWNpbmFsUHJvZHVjdEF1dGhvcml6YXRpb24nO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNvdXJjZVR5cGU6IFwiTWVkaWNpbmFsUHJvZHVjdEF1dGhvcml6YXRpb25cIjtcclxuICAvKipcclxuICAgKiBCdXNpbmVzcyBpZGVudGlmaWVyIGZvciB0aGUgbWFya2V0aW5nIGF1dGhvcml6YXRpb24sIGFzIGFzc2lnbmVkIGJ5IGEgcmVndWxhdG9yLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyOiBmaGlyLklkZW50aWZpZXJbXTtcclxuICAvKipcclxuICAgKiBUaGUgbWVkaWNpbmFsIHByb2R1Y3QgdGhhdCBpcyBiZWluZyBhdXRob3JpemVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdWJqZWN0PzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjb3VudHJ5IGluIHdoaWNoIHRoZSBtYXJrZXRpbmcgYXV0aG9yaXphdGlvbiBoYXMgYmVlbiBncmFudGVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb3VudHJ5OiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIEp1cmlzZGljdGlvbiB3aXRoaW4gYSBjb3VudHJ5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBqdXJpc2RpY3Rpb246IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogVGhlIHN0YXR1cyBvZiB0aGUgbWFya2V0aW5nIGF1dGhvcml6YXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1cz86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSBhdCB3aGljaCB0aGUgZ2l2ZW4gc3RhdHVzIGhhcyBiZWNvbWUgYXBwbGljYWJsZS5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdHVzRGF0ZT86IGZoaXIuRmhpckRhdGVUaW1lfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSB3aGVuIGEgc3VzcGVuZGVkIHRoZSBtYXJrZXRpbmcgb3IgdGhlIG1hcmtldGluZyBhdXRob3JpemF0aW9uIG9mIHRoZSBwcm9kdWN0IGlzIGFudGljaXBhdGVkIHRvIGJlIHJlc3RvcmVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZXN0b3JlRGF0ZT86IGZoaXIuRmhpckRhdGVUaW1lfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgYmVnaW5uaW5nIG9mIHRoZSB0aW1lIHBlcmlvZCBpbiB3aGljaCB0aGUgbWFya2V0aW5nIGF1dGhvcml6YXRpb24gaXMgaW4gdGhlIHNwZWNpZmljIHN0YXR1cyBzaGFsbCBiZSBzcGVjaWZpZWQgQSBjb21wbGV0ZSBkYXRlIGNvbnNpc3Rpbmcgb2YgZGF5LCBtb250aCBhbmQgeWVhciBzaGFsbCBiZSBzcGVjaWZpZWQgdXNpbmcgdGhlIElTTyA4NjAxIGRhdGUgZm9ybWF0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyB2YWxpZGl0eVBlcmlvZD86IGZoaXIuUGVyaW9kfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHBlcmlvZCBvZiB0aW1lIGFmdGVyIGF1dGhvcml6YXRpb24gYmVmb3JlIGdlbmVyaWMgcHJvZHVjdCBhcHBsaWNhdGlvc24gY2FuIGJlIHN1Ym1pdHRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgZGF0YUV4Y2x1c2l2aXR5UGVyaW9kPzogZmhpci5QZXJpb2R8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRlIHdoZW4gdGhlIGZpcnN0IGF1dGhvcml6YXRpb24gd2FzIGdyYW50ZWQgYnkgYSBNZWRpY2luZXMgUmVndWxhdG9yeSBBZ2VuY3kuXHJcbiAgICovXHJcbiAgcHVibGljIGRhdGVPZkZpcnN0QXV0aG9yaXphdGlvbj86IGZoaXIuRmhpckRhdGVUaW1lfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEYXRlIG9mIGZpcnN0IG1hcmtldGluZyBhdXRob3JpemF0aW9uIGZvciBhIGNvbXBhbnkncyBuZXcgbWVkaWNpbmFsIHByb2R1Y3QgaW4gYW55IGNvdW50cnkgaW4gdGhlIFdvcmxkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpbnRlcm5hdGlvbmFsQmlydGhEYXRlPzogZmhpci5GaGlyRGF0ZVRpbWV8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsZWdhbCBmcmFtZXdvcmsgYWdhaW5zdCB3aGljaCB0aGlzIGF1dGhvcml6YXRpb24gaXMgZ3JhbnRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgbGVnYWxCYXNpcz86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBdXRob3JpemF0aW9uIGluIGFyZWFzIHdpdGhpbiBhIGNvdW50cnkuXHJcbiAgICovXHJcbiAgcHVibGljIGp1cmlzZGljdGlvbmFsQXV0aG9yaXphdGlvbjogZmhpci5NZWRpY2luYWxQcm9kdWN0QXV0aG9yaXphdGlvbkp1cmlzZGljdGlvbmFsQXV0aG9yaXphdGlvbltdO1xyXG4gIC8qKlxyXG4gICAqIE1hcmtldGluZyBBdXRob3JpemF0aW9uIEhvbGRlci5cclxuICAgKi9cclxuICBwdWJsaWMgaG9sZGVyPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE1lZGljaW5lcyBSZWd1bGF0b3J5IEFnZW5jeS5cclxuICAgKi9cclxuICBwdWJsaWMgcmVndWxhdG9yPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZWd1bGF0b3J5IHByb2NlZHVyZSBmb3IgZ3JhbnRpbmcgb3IgYW1lbmRpbmcgYSBtYXJrZXRpbmcgYXV0aG9yaXphdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgcHJvY2VkdXJlPzogZmhpci5NZWRpY2luYWxQcm9kdWN0QXV0aG9yaXphdGlvblByb2NlZHVyZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgTWVkaWNpbmFsUHJvZHVjdEF1dGhvcml6YXRpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxNZWRpY2luYWxQcm9kdWN0QXV0aG9yaXphdGlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdNZWRpY2luYWxQcm9kdWN0QXV0aG9yaXphdGlvbic7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gc291cmNlLmlkZW50aWZpZXIubWFwKCh4KSA9PiBuZXcgZmhpci5JZGVudGlmaWVyKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaWRlbnRpZmllciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydzdWJqZWN0J10pIHsgdGhpcy5zdWJqZWN0ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5zdWJqZWN0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY291bnRyeSddKSB7IHRoaXMuY291bnRyeSA9IHNvdXJjZS5jb3VudHJ5Lm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY291bnRyeSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydqdXJpc2RpY3Rpb24nXSkgeyB0aGlzLmp1cmlzZGljdGlvbiA9IHNvdXJjZS5qdXJpc2RpY3Rpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5qdXJpc2RpY3Rpb24gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RhdHVzJ10pIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnN0YXR1cyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0YXR1c0RhdGUnXSkgeyB0aGlzLnN0YXR1c0RhdGUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2Uuc3RhdHVzRGF0ZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfc3RhdHVzRGF0ZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnN0YXR1c0RhdGUpIHsgdGhpcy5zdGF0dXNEYXRlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3N0YXR1c0RhdGUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zdGF0dXNEYXRlID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHNvdXJjZS5fc3RhdHVzRGF0ZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckRhdGVUaW1lQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydyZXN0b3JlRGF0ZSddKSB7IHRoaXMucmVzdG9yZURhdGUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2UucmVzdG9yZURhdGV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3Jlc3RvcmVEYXRlJ10pIHtcclxuICAgICAgaWYgKHRoaXMucmVzdG9yZURhdGUpIHsgdGhpcy5yZXN0b3JlRGF0ZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9yZXN0b3JlRGF0ZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnJlc3RvcmVEYXRlID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHNvdXJjZS5fcmVzdG9yZURhdGUgYXMgUGFydGlhbDxmaGlyLkZoaXJEYXRlVGltZUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsndmFsaWRpdHlQZXJpb2QnXSkgeyB0aGlzLnZhbGlkaXR5UGVyaW9kID0gbmV3IGZoaXIuUGVyaW9kKHNvdXJjZS52YWxpZGl0eVBlcmlvZCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2RhdGFFeGNsdXNpdml0eVBlcmlvZCddKSB7IHRoaXMuZGF0YUV4Y2x1c2l2aXR5UGVyaW9kID0gbmV3IGZoaXIuUGVyaW9kKHNvdXJjZS5kYXRhRXhjbHVzaXZpdHlQZXJpb2QpOyB9XHJcbiAgICBpZiAoc291cmNlWydkYXRlT2ZGaXJzdEF1dGhvcml6YXRpb24nXSkgeyB0aGlzLmRhdGVPZkZpcnN0QXV0aG9yaXphdGlvbiA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5kYXRlT2ZGaXJzdEF1dGhvcml6YXRpb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2RhdGVPZkZpcnN0QXV0aG9yaXphdGlvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLmRhdGVPZkZpcnN0QXV0aG9yaXphdGlvbikgeyB0aGlzLmRhdGVPZkZpcnN0QXV0aG9yaXphdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9kYXRlT2ZGaXJzdEF1dGhvcml6YXRpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5kYXRlT2ZGaXJzdEF1dGhvcml6YXRpb24gPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoc291cmNlLl9kYXRlT2ZGaXJzdEF1dGhvcml6YXRpb24gYXMgUGFydGlhbDxmaGlyLkZoaXJEYXRlVGltZUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnaW50ZXJuYXRpb25hbEJpcnRoRGF0ZSddKSB7IHRoaXMuaW50ZXJuYXRpb25hbEJpcnRoRGF0ZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5pbnRlcm5hdGlvbmFsQmlydGhEYXRlfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19pbnRlcm5hdGlvbmFsQmlydGhEYXRlJ10pIHtcclxuICAgICAgaWYgKHRoaXMuaW50ZXJuYXRpb25hbEJpcnRoRGF0ZSkgeyB0aGlzLmludGVybmF0aW9uYWxCaXJ0aERhdGUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5faW50ZXJuYXRpb25hbEJpcnRoRGF0ZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmludGVybmF0aW9uYWxCaXJ0aERhdGUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoc291cmNlLl9pbnRlcm5hdGlvbmFsQmlydGhEYXRlIGFzIFBhcnRpYWw8Zmhpci5GaGlyRGF0ZVRpbWVBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2xlZ2FsQmFzaXMnXSkgeyB0aGlzLmxlZ2FsQmFzaXMgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmxlZ2FsQmFzaXMpOyB9XHJcbiAgICBpZiAoc291cmNlWydqdXJpc2RpY3Rpb25hbEF1dGhvcml6YXRpb24nXSkgeyB0aGlzLmp1cmlzZGljdGlvbmFsQXV0aG9yaXphdGlvbiA9IHNvdXJjZS5qdXJpc2RpY3Rpb25hbEF1dGhvcml6YXRpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5NZWRpY2luYWxQcm9kdWN0QXV0aG9yaXphdGlvbkp1cmlzZGljdGlvbmFsQXV0aG9yaXphdGlvbih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmp1cmlzZGljdGlvbmFsQXV0aG9yaXphdGlvbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydob2xkZXInXSkgeyB0aGlzLmhvbGRlciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuaG9sZGVyKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVndWxhdG9yJ10pIHsgdGhpcy5yZWd1bGF0b3IgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnJlZ3VsYXRvcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ3Byb2NlZHVyZSddKSB7IHRoaXMucHJvY2VkdXJlID0gbmV3IGZoaXIuTWVkaWNpbmFsUHJvZHVjdEF1dGhvcml6YXRpb25Qcm9jZWR1cmUoc291cmNlLnByb2NlZHVyZSk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb246c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24pO1xyXG4gICAgaWYgKGV4cHJlc3Npb24gPT09ICcnKSB7IGV4cHJlc3Npb24gPSAnTWVkaWNpbmFsUHJvZHVjdEF1dGhvcml6YXRpb24nIH1cclxuICAgIHRoaXMudlJlcVMoJ3Jlc291cmNlVHlwZScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdEEoJ2lkZW50aWZpZXInLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdzdWJqZWN0JyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0QSgnY291bnRyeScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdEEoJ2p1cmlzZGljdGlvbicsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ3N0YXR1cycsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ3N0YXR1c0RhdGUnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdyZXN0b3JlRGF0ZScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ3ZhbGlkaXR5UGVyaW9kJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnZGF0YUV4Y2x1c2l2aXR5UGVyaW9kJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnZGF0ZU9mRmlyc3RBdXRob3JpemF0aW9uJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnaW50ZXJuYXRpb25hbEJpcnRoRGF0ZScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ2xlZ2FsQmFzaXMnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRBKCdqdXJpc2RpY3Rpb25hbEF1dGhvcml6YXRpb24nLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdob2xkZXInLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdyZWd1bGF0b3InLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdwcm9jZWR1cmUnLGV4cHJlc3Npb24pXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=