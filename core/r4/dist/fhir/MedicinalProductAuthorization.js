// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: MedicinalProductAuthorization
import * as fhir from '../fhir.js';
/**
 * Authorization in areas within a country.
 */
export class MedicinalProductAuthorizationJurisdictionalAuthorization extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductAuthorizationJurisdictionalAuthorization - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['country']) {
            this.country = new fhir.CodeableConcept(source.country);
        }
        if (source['jurisdiction']) {
            this.jurisdiction = source.jurisdiction.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.jurisdiction = [];
        }
        if (source['legalStatusOfSupply']) {
            this.legalStatusOfSupply = new fhir.CodeableConcept(source.legalStatusOfSupply);
        }
        if (source['validityPeriod']) {
            this.validityPeriod = new fhir.Period(source.validityPeriod);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["identifier"]) {
            this.identifier.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["country"]) {
            issues.push(...this.country.doModelValidation());
        }
        if (this["jurisdiction"]) {
            this.jurisdiction.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["legalStatusOfSupply"]) {
            issues.push(...this.legalStatusOfSupply.doModelValidation());
        }
        if (this["validityPeriod"]) {
            issues.push(...this.validityPeriod.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductAuthorizationJurisdictionalAuthorization._fts_dataType = 'MedicinalProductAuthorizationJurisdictionalAuthorization';
/**
 * The regulatory procedure for granting or amending a marketing authorization.
 */
export class MedicinalProductAuthorizationProcedure extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductAuthorizationProcedure - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier);
        }
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type);
        }
        else {
            this.type = null;
        }
        if (source['date']) {
            this.date = source.date;
        }
        else if (source['datePeriod']) {
            this.date = new fhir.Period(source.datePeriod);
        }
        else if (source['dateDateTime']) {
            this.date = new fhir.FhirDateTime({ value: source.dateDateTime });
        }
        if (source['application']) {
            this.application = source.application.map((x) => new fhir.MedicinalProductAuthorizationProcedure(x));
        }
        else {
            this.application = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["identifier"]) {
            issues.push(...this.identifier.doModelValidation());
        }
        if (!this['type']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property type:fhir.CodeableConcept fhir: MedicinalProductAuthorization.procedure.type:CodeableConcept', });
        }
        if (this["type"]) {
            issues.push(...this.type.doModelValidation());
        }
        if (this["application"]) {
            this.application.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductAuthorizationProcedure._fts_dataType = 'MedicinalProductAuthorizationProcedure';
/**
 * Internal flag to properly serialize choice-type element MedicinalProductAuthorization.procedure.date[x]
 */
MedicinalProductAuthorizationProcedure._fts_dateIsChoice = true;
/**
 * The regulatory authorization of a medicinal product.
 */
export class MedicinalProductAuthorization extends fhir.DomainResource {
    /**
     * Default constructor for MedicinalProductAuthorization - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'MedicinalProductAuthorization';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject);
        }
        if (source['country']) {
            this.country = source.country.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.country = [];
        }
        if (source['jurisdiction']) {
            this.jurisdiction = source.jurisdiction.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.jurisdiction = [];
        }
        if (source['status']) {
            this.status = new fhir.CodeableConcept(source.status);
        }
        if (source['statusDate']) {
            this.statusDate = new fhir.FhirDateTime({ value: source.statusDate });
        }
        if (source['restoreDate']) {
            this.restoreDate = new fhir.FhirDateTime({ value: source.restoreDate });
        }
        if (source['validityPeriod']) {
            this.validityPeriod = new fhir.Period(source.validityPeriod);
        }
        if (source['dataExclusivityPeriod']) {
            this.dataExclusivityPeriod = new fhir.Period(source.dataExclusivityPeriod);
        }
        if (source['dateOfFirstAuthorization']) {
            this.dateOfFirstAuthorization = new fhir.FhirDateTime({ value: source.dateOfFirstAuthorization });
        }
        if (source['internationalBirthDate']) {
            this.internationalBirthDate = new fhir.FhirDateTime({ value: source.internationalBirthDate });
        }
        if (source['legalBasis']) {
            this.legalBasis = new fhir.CodeableConcept(source.legalBasis);
        }
        if (source['jurisdictionalAuthorization']) {
            this.jurisdictionalAuthorization = source.jurisdictionalAuthorization.map((x) => new fhir.MedicinalProductAuthorizationJurisdictionalAuthorization(x));
        }
        else {
            this.jurisdictionalAuthorization = [];
        }
        if (source['holder']) {
            this.holder = new fhir.Reference(source.holder);
        }
        if (source['regulator']) {
            this.regulator = new fhir.Reference(source.regulator);
        }
        if (source['procedure']) {
            this.procedure = new fhir.MedicinalProductAuthorizationProcedure(source.procedure);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType:"MedicinalProductAuthorization" fhir: MedicinalProductAuthorization.resourceType:"MedicinalProductAuthorization"', });
        }
        if (this["identifier"]) {
            this.identifier.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["subject"]) {
            issues.push(...this.subject.doModelValidation());
        }
        if (this["country"]) {
            this.country.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["jurisdiction"]) {
            this.jurisdiction.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["status"]) {
            issues.push(...this.status.doModelValidation());
        }
        if (this["statusDate"]) {
            issues.push(...this.statusDate.doModelValidation());
        }
        if (this["restoreDate"]) {
            issues.push(...this.restoreDate.doModelValidation());
        }
        if (this["validityPeriod"]) {
            issues.push(...this.validityPeriod.doModelValidation());
        }
        if (this["dataExclusivityPeriod"]) {
            issues.push(...this.dataExclusivityPeriod.doModelValidation());
        }
        if (this["dateOfFirstAuthorization"]) {
            issues.push(...this.dateOfFirstAuthorization.doModelValidation());
        }
        if (this["internationalBirthDate"]) {
            issues.push(...this.internationalBirthDate.doModelValidation());
        }
        if (this["legalBasis"]) {
            issues.push(...this.legalBasis.doModelValidation());
        }
        if (this["jurisdictionalAuthorization"]) {
            this.jurisdictionalAuthorization.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["holder"]) {
            issues.push(...this.holder.doModelValidation());
        }
        if (this["regulator"]) {
            issues.push(...this.regulator.doModelValidation());
        }
        if (this["procedure"]) {
            issues.push(...this.procedure.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductAuthorization._fts_dataType = 'MedicinalProductAuthorization';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVkaWNpbmFsUHJvZHVjdEF1dGhvcml6YXRpb24uanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL01lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQiwrQ0FBK0M7QUFDL0Msa0NBQWtDO0FBQ2xDLCtDQUErQztBQUUvQyxPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQTRCbkM7O0dBRUc7QUFDSCxNQUFNLE9BQU8sd0RBQXlELFNBQVEsSUFBSSxDQUFDLGVBQWU7SUF5QmhHOztPQUVHO0lBQ0gsWUFBWSxTQUErRSxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUNySSxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLFlBQVksQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUNoRztZQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsRUFBRSxDQUFDO1NBQUU7UUFDOUIsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7U0FBRTtRQUNuRixJQUFJLE1BQU0sQ0FBQyxjQUFjLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxZQUFZLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDM0c7WUFBRSxJQUFJLENBQUMs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QUMsNkJBQTZCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQywyQkFBMkIsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7U0FBRTtRQUN4SSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQ3hFLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFDOUUsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUM5RSxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQTVIRDs7R0FFRztBQUM2QiwyQ0FBYSxHQUFVLCtCQUErQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0LmNvcmUgdmVyc2lvbjogNC4wLjFcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBNZWRpY2luYWxQcm9kdWN0QXV0aG9yaXphdGlvblxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBNZWRpY2luYWxQcm9kdWN0QXV0aG9yaXphdGlvbkp1cmlzZGljdGlvbmFsQXV0aG9yaXphdGlvbiB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNZWRpY2luYWxQcm9kdWN0QXV0aG9yaXphdGlvbkp1cmlzZGljdGlvbmFsQXV0aG9yaXphdGlvbkFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBhc3NpZ25lZCBudW1iZXIgZm9yIHRoZSBtYXJrZXRpbmcgYXV0aG9yaXphdGlvbi5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDb3VudHJ5IG9mIGF1dGhvcml6YXRpb24uXHJcbiAgICovXHJcbiAgY291bnRyeT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSnVyaXNkaWN0aW9uIHdpdGhpbiBhIGNvdW50cnkuXHJcbiAgICovXHJcbiAganVyaXNkaWN0aW9uPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsZWdhbCBzdGF0dXMgb2Ygc3VwcGx5IGluIGEganVyaXNkaWN0aW9uIG9yIHJlZ2lvbi5cclxuICAgKi9cclxuICBsZWdhbFN0YXR1c09mU3VwcGx5PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc3RhcnQgYW5kIGV4cGVjdGVkIGVuZCBkYXRlIG9mIHRoZSBhdXRob3JpemF0aW9uLlxyXG4gICAqL1xyXG4gIHZhbGlkaXR5UGVyaW9kPzogZmhpci5QZXJpb2RBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEF1dGhvcml6YXRpb24gaW4gYXJlYXMgd2l0aGluIGEgY291bnRyeS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZWRpY2luYWxQcm9kdWN0QXV0aG9yaXphdGlvbkp1cmlzZGljdGlvbmFsQXV0aG9yaXphdGlvbiBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ01lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uSnVyaXNkaWN0aW9uYWxBdXRob3JpemF0aW9uJztcclxuICAvKipcclxuICAgKiBUaGUgYXNzaWduZWQgbnVtYmVyIGZvciB0aGUgbWFya2V0aW5nIGF1dGhvcml6YXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJbXTtcclxuICAvKipcclxuICAgKiBDb3VudHJ5IG9mIGF1dGhvcml6YXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIGNvdW50cnk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSnVyaXNkaWN0aW9uIHdpdGhpbiBhIGNvdW50cnkuXHJcbiAgICovXHJcbiAgcHVibGljIGp1cmlzZGljdGlvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogVGhlIGxlZ2FsIHN0YXR1cyBvZiBzdXBwbHkgaW4gYSBqdXJpc2RpY3Rpb24gb3IgcmVnaW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBsZWdhbFN0YXR1c09mU3VwcGx5PzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzdGFydCBhbmQgZXhwZWN0ZWQgZW5kIGRhdGUgb2YgdGhlIGF1dGhvcml6YXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHZhbGlkaXR5UGVyaW9kPzogZmhpci5QZXJpb2R8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE1lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uSnVyaXNkaWN0aW9uYWxBdXRob3JpemF0aW9uIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVkaWNpbmFsUHJvZHVjdEF1dGhvcml6YXRpb25KdXJpc2RpY3Rpb25hbEF1dGhvcml6YXRpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IHNvdXJjZS5pZGVudGlmaWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuSWRlbnRpZmllcih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmlkZW50aWZpZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY291bnRyeSddKSB7IHRoaXMuY291bnRyeSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY291bnRyeSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2p1cmlzZGljdGlvbiddKSB7IHRoaXMuanVyaXNkaWN0aW9uID0gc291cmNlLmp1cmlzZGljdGlvbi5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmp1cmlzZGljdGlvbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydsZWdhbFN0YXR1c09mU3VwcGx5J10pIHsgdGhpcy5sZWdhbFN0YXR1c09mU3VwcGx5ID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5sZWdhbFN0YXR1c09mU3VwcGx5KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndmFsaWRpdHlQZXJpb2QnXSkgeyB0aGlzLnZhbGlkaXR5UGVyaW9kID0gbmV3IGZoaXIuUGVyaW9kKHNvdXJjZS52YWxpZGl0eVBlcmlvZCk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICh0aGlzW1wiaWRlbnRpZmllclwiXSkgeyB0aGlzLmlkZW50aWZpZXIuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImNvdW50cnlcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5jb3VudHJ5LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImp1cmlzZGljdGlvblwiXSkgeyB0aGlzLmp1cmlzZGljdGlvbi5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wibGVnYWxTdGF0dXNPZlN1cHBseVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmxlZ2FsU3RhdHVzT2ZTdXBwbHkuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1widmFsaWRpdHlQZXJpb2RcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy52YWxpZGl0eVBlcmlvZC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uUHJvY2VkdXJlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uUHJvY2VkdXJlQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllciBmb3IgdGhpcyBwcm9jZWR1cmUuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFR5cGUgb2YgcHJvY2VkdXJlLlxyXG4gICAqL1xyXG4gIHR5cGU6IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIERhdGUgb2YgcHJvY2VkdXJlLlxyXG4gICAqL1xyXG4gIGRhdGU/OiBmaGlyLlBlcmlvZHxmaGlyLkZoaXJEYXRlVGltZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGF0ZSBvZiBwcm9jZWR1cmUuXHJcbiAgICovXHJcbiAgZGF0ZVBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGF0ZSBvZiBwcm9jZWR1cmUuXHJcbiAgICovXHJcbiAgZGF0ZURhdGVUaW1lPzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBcHBsY2F0aW9ucyBzdWJtaXR0ZWQgdG8gb2J0YWluIGEgbWFya2V0aW5nIGF1dGhvcml6YXRpb24uXHJcbiAgICovXHJcbiAgYXBwbGljYXRpb24/OiBmaGlyLk1lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uUHJvY2VkdXJlQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSByZWd1bGF0b3J5IHByb2NlZHVyZSBmb3IgZ3JhbnRpbmcgb3IgYW1lbmRpbmcgYSBtYXJrZXRpbmcgYXV0aG9yaXphdGlvbi5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZWRpY2luYWxQcm9kdWN0QXV0aG9yaXphdGlvblByb2NlZHVyZSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ01lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uUHJvY2VkdXJlJztcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVyIGZvciB0aGlzIHByb2NlZHVyZS5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVHlwZSBvZiBwcm9jZWR1cmUuXHJcbiAgICovXHJcbiAgcHVibGljIHR5cGU6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogRGF0ZSBvZiBwcm9jZWR1cmUuXHJcbiAgICovXHJcbiAgcHVibGljIGRhdGU/OiAoZmhpci5QZXJpb2R8Zmhpci5GaGlyRGF0ZVRpbWUpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IE1lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uLnByb2NlZHVyZS5kYXRlW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX2RhdGVJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBBcHBsY2F0aW9ucyBzdWJtaXR0ZWQgdG8gb2J0YWluIGEgbWFya2V0aW5nIGF1dGhvcml6YXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIGFwcGxpY2F0aW9uPzogZmhpci5NZWRpY2luYWxQcm9kdWN0QXV0aG9yaXphdGlvblByb2NlZHVyZVtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE1lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uUHJvY2VkdXJlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVkaWNpbmFsUHJvZHVjdEF1dGhvcml6YXRpb25Qcm9jZWR1cmVBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IG5ldyBmaGlyLklkZW50aWZpZXIoc291cmNlLmlkZW50aWZpZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWyd0eXBlJ10pIHsgdGhpcy50eXBlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS50eXBlKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudHlwZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ2RhdGUnXSkgeyB0aGlzLmRhdGUgPSBzb3VyY2UuZGF0ZTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydkYXRlUGVyaW9kJ10pIHsgdGhpcy5kYXRlID0gbmV3IGZoaXIuUGVyaW9kKHNvdXJjZS5kYXRlUGVyaW9kKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydkYXRlRGF0ZVRpbWUnXSkgeyB0aGlzLmRhdGUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2UuZGF0ZURhdGVUaW1lfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2FwcGxpY2F0aW9uJ10pIHsgdGhpcy5hcHBsaWNhdGlvbiA9IHNvdXJjZS5hcHBsaWNhdGlvbi5tYXAoKHgpID0+IG5ldyBmaGlyLk1lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uUHJvY2VkdXJlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYXBwbGljYXRpb24gPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKHRoaXNbXCJpZGVudGlmaWVyXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuaWRlbnRpZmllci5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKCF0aGlzWyd0eXBlJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSB0eXBlOmZoaXIuQ29kZWFibGVDb25jZXB0IGZoaXI6IE1lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uLnByb2NlZHVyZS50eXBlOkNvZGVhYmxlQ29uY2VwdCcsIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJ0eXBlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMudHlwZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJhcHBsaWNhdGlvblwiXSkgeyB0aGlzLmFwcGxpY2F0aW9uLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uQXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiTWVkaWNpbmFsUHJvZHVjdEF1dGhvcml6YXRpb25cInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQnVzaW5lc3MgaWRlbnRpZmllciBmb3IgdGhlIG1hcmtldGluZyBhdXRob3JpemF0aW9uLCBhcyBhc3NpZ25lZCBieSBhIHJlZ3VsYXRvci5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbWVkaWNpbmFsIHByb2R1Y3QgdGhhdCBpcyBiZWluZyBhdXRob3JpemVkLlxyXG4gICAqL1xyXG4gIHN1YmplY3Q/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjb3VudHJ5IGluIHdoaWNoIHRoZSBtYXJrZXRpbmcgYXV0aG9yaXphdGlvbiBoYXMgYmVlbiBncmFudGVkLlxyXG4gICAqL1xyXG4gIGNvdW50cnk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSnVyaXNkaWN0aW9uIHdpdGhpbiBhIGNvdW50cnkuXHJcbiAgICovXHJcbiAganVyaXNkaWN0aW9uPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzdGF0dXMgb2YgdGhlIG1hcmtldGluZyBhdXRob3JpemF0aW9uLlxyXG4gICAqL1xyXG4gIHN0YXR1cz86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgYXQgd2hpY2ggdGhlIGdpdmVuIHN0YXR1cyBoYXMgYmVjb21lIGFwcGxpY2FibGUuXHJcbiAgICovXHJcbiAgc3RhdHVzRGF0ZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgd2hlbiBhIHN1c3BlbmRlZCB0aGUgbWFya2V0aW5nIG9yIHRoZSBtYXJrZXRpbmcgYXV0aG9yaXphdGlvbiBvZiB0aGUgcHJvZHVjdCBpcyBhbnRpY2lwYXRlZCB0byBiZSByZXN0b3JlZC5cclxuICAgKi9cclxuICByZXN0b3JlRGF0ZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGJlZ2lubmluZyBvZiB0aGUgdGltZSBwZXJpb2QgaW4gd2hpY2ggdGhlIG1hcmtldGluZyBhdXRob3JpemF0aW9uIGlzIGluIHRoZSBzcGVjaWZpYyBzdGF0dXMgc2hhbGwgYmUgc3BlY2lmaWVkIEEgY29tcGxldGUgZGF0ZSBjb25zaXN0aW5nIG9mIGRheSwgbW9udGggYW5kIHllYXIgc2hhbGwgYmUgc3BlY2lmaWVkIHVzaW5nIHRoZSBJU08gODYwMSBkYXRlIGZvcm1hdC5cclxuICAgKi9cclxuICB2YWxpZGl0eVBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBwZXJpb2Qgb2YgdGltZSBhZnRlciBhdXRob3JpemF0aW9uIGJlZm9yZSBnZW5lcmljIHByb2R1Y3QgYXBwbGljYXRpb3NuIGNhbiBiZSBzdWJtaXR0ZWQuXHJcbiAgICovXHJcbiAgZGF0YUV4Y2x1c2l2aXR5UGVyaW9kPzogZmhpci5QZXJpb2RBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSB3aGVuIHRoZSBmaXJzdCBhdXRob3JpemF0aW9uIHdhcyBncmFudGVkIGJ5IGEgTWVkaWNpbmVzIFJlZ3VsYXRvcnkgQWdlbmN5LlxyXG4gICAqL1xyXG4gIGRhdGVPZkZpcnN0QXV0aG9yaXphdGlvbj86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGF0ZSBvZiBmaXJzdCBtYXJrZXRpbmcgYXV0aG9yaXphdGlvbiBmb3IgYSBjb21wYW55J3MgbmV3IG1lZGljaW5hbCBwcm9kdWN0IGluIGFueSBjb3VudHJ5IGluIHRoZSBXb3JsZC5cclxuICAgKi9cclxuICBpbnRlcm5hdGlvbmFsQmlydGhEYXRlPzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbGVnYWwgZnJhbWV3b3JrIGFnYWluc3Qgd2hpY2ggdGhpcyBhdXRob3JpemF0aW9uIGlzIGdyYW50ZWQuXHJcbiAgICovXHJcbiAgbGVnYWxCYXNpcz86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQXV0aG9yaXphdGlvbiBpbiBhcmVhcyB3aXRoaW4gYSBjb3VudHJ5LlxyXG4gICAqL1xyXG4gIGp1cmlzZGljdGlvbmFsQXV0aG9yaXphdGlvbj86IGZoaXIuTWVkaWNpbmFsUHJvZHVjdEF1dGhvcml6YXRpb25KdXJpc2RpY3Rpb25hbEF1dGhvcml6YXRpb25BcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE1hcmtldGluZyBBdXRob3JpemF0aW9uIEhvbGRlci5cclxuICAgKi9cclxuICBob2xkZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE1lZGljaW5lcyBSZWd1bGF0b3J5IEFnZW5jeS5cclxuICAgKi9cclxuICByZWd1bGF0b3I/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZWd1bGF0b3J5IHByb2NlZHVyZSBmb3IgZ3JhbnRpbmcgb3IgYW1lbmRpbmcgYSBtYXJrZXRpbmcgYXV0aG9yaXphdGlvbi5cclxuICAgKi9cclxuICBwcm9jZWR1cmU/OiBmaGlyLk1lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uUHJvY2VkdXJlQXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgcmVndWxhdG9yeSBhdXRob3JpemF0aW9uIG9mIGEgbWVkaWNpbmFsIHByb2R1Y3QuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNpbmFsUHJvZHVjdEF1dGhvcml6YXRpb24gZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ01lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uJztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIk1lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uXCI7XHJcbiAgLyoqXHJcbiAgICogQnVzaW5lc3MgaWRlbnRpZmllciBmb3IgdGhlIG1hcmtldGluZyBhdXRob3JpemF0aW9uLCBhcyBhc3NpZ25lZCBieSBhIHJlZ3VsYXRvci5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllcltdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBtZWRpY2luYWwgcHJvZHVjdCB0aGF0IGlzIGJlaW5nIGF1dGhvcml6ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHN1YmplY3Q/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNvdW50cnkgaW4gd2hpY2ggdGhlIG1hcmtldGluZyBhdXRob3JpemF0aW9uIGhhcyBiZWVuIGdyYW50ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGNvdW50cnk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIEp1cmlzZGljdGlvbiB3aXRoaW4gYSBjb3VudHJ5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBqdXJpc2RpY3Rpb24/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzdGF0dXMgb2YgdGhlIG1hcmtldGluZyBhdXRob3JpemF0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0dXM/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgYXQgd2hpY2ggdGhlIGdpdmVuIHN0YXR1cyBoYXMgYmVjb21lIGFwcGxpY2FibGUuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1c0RhdGU/OiBmaGlyLkZoaXJEYXRlVGltZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgd2hlbiBhIHN1c3BlbmRlZCB0aGUgbWFya2V0aW5nIG9yIHRoZSBtYXJrZXRpbmcgYXV0aG9yaXphdGlvbiBvZiB0aGUgcHJvZHVjdCBpcyBhbnRpY2lwYXRlZCB0byBiZSByZXN0b3JlZC5cclxuICAgKi9cclxuICBwdWJsaWMgcmVzdG9yZURhdGU/OiBmaGlyLkZoaXJEYXRlVGltZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGJlZ2lubmluZyBvZiB0aGUgdGltZSBwZXJpb2QgaW4gd2hpY2ggdGhlIG1hcmtldGluZyBhdXRob3JpemF0aW9uIGlzIGluIHRoZSBzcGVjaWZpYyBzdGF0dXMgc2hhbGwgYmUgc3BlY2lmaWVkIEEgY29tcGxldGUgZGF0ZSBjb25zaXN0aW5nIG9mIGRheSwgbW9udGggYW5kIHllYXIgc2hhbGwgYmUgc3BlY2lmaWVkIHVzaW5nIHRoZSBJU08gODYwMSBkYXRlIGZvcm1hdC5cclxuICAgKi9cclxuICBwdWJsaWMgdmFsaWRpdHlQZXJpb2Q/OiBmaGlyLlBlcmlvZHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBwZXJpb2Qgb2YgdGltZSBhZnRlciBhdXRob3JpemF0aW9uIGJlZm9yZSBnZW5lcmljIHByb2R1Y3QgYXBwbGljYXRpb3NuIGNhbiBiZSBzdWJtaXR0ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGRhdGFFeGNsdXNpdml0eVBlcmlvZD86IGZoaXIuUGVyaW9kfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSB3aGVuIHRoZSBmaXJzdCBhdXRob3JpemF0aW9uIHdhcyBncmFudGVkIGJ5IGEgTWVkaWNpbmVzIFJlZ3VsYXRvcnkgQWdlbmN5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkYXRlT2ZGaXJzdEF1dGhvcml6YXRpb24/OiBmaGlyLkZoaXJEYXRlVGltZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGF0ZSBvZiBmaXJzdCBtYXJrZXRpbmcgYXV0aG9yaXphdGlvbiBmb3IgYSBjb21wYW55J3MgbmV3IG1lZGljaW5hbCBwcm9kdWN0IGluIGFueSBjb3VudHJ5IGluIHRoZSBXb3JsZC5cclxuICAgKi9cclxuICBwdWJsaWMgaW50ZXJuYXRpb25hbEJpcnRoRGF0ZT86IGZoaXIuRmhpckRhdGVUaW1lfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbGVnYWwgZnJhbWV3b3JrIGFnYWluc3Qgd2hpY2ggdGhpcyBhdXRob3JpemF0aW9uIGlzIGdyYW50ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGxlZ2FsQmFzaXM/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQXV0aG9yaXphdGlvbiBpbiBhcmVhcyB3aXRoaW4gYSBjb3VudHJ5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBqdXJpc2RpY3Rpb25hbEF1dGhvcml6YXRpb24/OiBmaGlyLk1lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uSnVyaXNkaWN0aW9uYWxBdXRob3JpemF0aW9uW107XHJcbiAgLyoqXHJcbiAgICogTWFya2V0aW5nIEF1dGhvcml6YXRpb24gSG9sZGVyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBob2xkZXI/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTWVkaWNpbmVzIFJlZ3VsYXRvcnkgQWdlbmN5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWd1bGF0b3I/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlZ3VsYXRvcnkgcHJvY2VkdXJlIGZvciBncmFudGluZyBvciBhbWVuZGluZyBhIG1hcmtldGluZyBhdXRob3JpemF0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcm9jZWR1cmU/OiBmaGlyLk1lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uUHJvY2VkdXJlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBNZWRpY2luYWxQcm9kdWN0QXV0aG9yaXphdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE1lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ01lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uJztcclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBzb3VyY2UuaWRlbnRpZmllci5tYXAoKHgpID0+IG5ldyBmaGlyLklkZW50aWZpZXIoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pZGVudGlmaWVyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3N1YmplY3QnXSkgeyB0aGlzLnN1YmplY3QgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnN1YmplY3QpOyB9XHJcbiAgICBpZiAoc291cmNlWydjb3VudHJ5J10pIHsgdGhpcy5jb3VudHJ5ID0gc291cmNlLmNvdW50cnkubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb3VudHJ5ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2p1cmlzZGljdGlvbiddKSB7IHRoaXMuanVyaXNkaWN0aW9uID0gc291cmNlLmp1cmlzZGljdGlvbi5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmp1cmlzZGljdGlvbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydzdGF0dXMnXSkgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2Uuc3RhdHVzKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RhdHVzRGF0ZSddKSB7IHRoaXMuc3RhdHVzRGF0ZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5zdGF0dXNEYXRlfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3Jlc3RvcmVEYXRlJ10pIHsgdGhpcy5yZXN0b3JlRGF0ZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5yZXN0b3JlRGF0ZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWyd2YWxpZGl0eVBlcmlvZCddKSB7IHRoaXMudmFsaWRpdHlQZXJpb2QgPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLnZhbGlkaXR5UGVyaW9kKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGF0YUV4Y2x1c2l2aXR5UGVyaW9kJ10pIHsgdGhpcy5kYXRhRXhjbHVzaXZpdHlQZXJpb2QgPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLmRhdGFFeGNsdXNpdml0eVBlcmlvZCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2RhdGVPZkZpcnN0QXV0aG9yaXphdGlvbiddKSB7IHRoaXMuZGF0ZU9mRmlyc3RBdXRob3JpemF0aW9uID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLmRhdGVPZkZpcnN0QXV0aG9yaXphdGlvbn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydpbnRlcm5hdGlvbmFsQmlydGhEYXRlJ10pIHsgdGhpcy5pbnRlcm5hdGlvbmFsQmlydGhEYXRlID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLmludGVybmF0aW9uYWxCaXJ0aERhdGV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbGVnYWxCYXNpcyddKSB7IHRoaXMubGVnYWxCYXNpcyA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UubGVnYWxCYXNpcyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2p1cmlzZGljdGlvbmFsQXV0aG9yaXphdGlvbiddKSB7IHRoaXMuanVyaXNkaWN0aW9uYWxBdXRob3JpemF0aW9uID0gc291cmNlLmp1cmlzZGljdGlvbmFsQXV0aG9yaXphdGlvbi5tYXAoKHgpID0+IG5ldyBmaGlyLk1lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uSnVyaXNkaWN0aW9uYWxBdXRob3JpemF0aW9uKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuanVyaXNkaWN0aW9uYWxBdXRob3JpemF0aW9uID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2hvbGRlciddKSB7IHRoaXMuaG9sZGVyID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5ob2xkZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWydyZWd1bGF0b3InXSkgeyB0aGlzLnJlZ3VsYXRvciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UucmVndWxhdG9yKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJvY2VkdXJlJ10pIHsgdGhpcy5wcm9jZWR1cmUgPSBuZXcgZmhpci5NZWRpY2luYWxQcm9kdWN0QXV0aG9yaXphdGlvblByb2NlZHVyZShzb3VyY2UucHJvY2VkdXJlKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKCF0aGlzWydyZXNvdXJjZVR5cGUnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCAgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHJlc291cmNlVHlwZTpcIk1lZGljaW5hbFByb2R1Y3RBdXRob3JpemF0aW9uXCIgZmhpcjogTWVkaWNpbmFsUHJvZHVjdEF1dGhvcml6YXRpb24ucmVzb3VyY2VUeXBlOlwiTWVkaWNpbmFsUHJvZHVjdEF1dGhvcml6YXRpb25cIicsIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJpZGVudGlmaWVyXCJdKSB7IHRoaXMuaWRlbnRpZmllci5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wic3ViamVjdFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnN1YmplY3QuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiY291bnRyeVwiXSkgeyB0aGlzLmNvdW50cnkuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImp1cmlzZGljdGlvblwiXSkgeyB0aGlzLmp1cmlzZGljdGlvbi5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wic3RhdHVzXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc3RhdHVzLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInN0YXR1c0RhdGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5zdGF0dXNEYXRlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInJlc3RvcmVEYXRlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucmVzdG9yZURhdGUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1widmFsaWRpdHlQZXJpb2RcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy52YWxpZGl0eVBlcmlvZC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJkYXRhRXhjbHVzaXZpdHlQZXJpb2RcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5kYXRhRXhjbHVzaXZpdHlQZXJpb2QuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiZGF0ZU9mRmlyc3RBdXRob3JpemF0aW9uXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZGF0ZU9mRmlyc3RBdXRob3JpemF0aW9uLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImludGVybmF0aW9uYWxCaXJ0aERhdGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5pbnRlcm5hdGlvbmFsQmlydGhEYXRlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImxlZ2FsQmFzaXNcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5sZWdhbEJhc2lzLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImp1cmlzZGljdGlvbmFsQXV0aG9yaXphdGlvblwiXSkgeyB0aGlzLmp1cmlzZGljdGlvbmFsQXV0aG9yaXphdGlvbi5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wiaG9sZGVyXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuaG9sZGVyLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInJlZ3VsYXRvclwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnJlZ3VsYXRvci5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJwcm9jZWR1cmVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5wcm9jZWR1cmUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbiJdfQ==