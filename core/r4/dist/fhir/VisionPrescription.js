// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: VisionPrescription
import * as fhir from '../fhir.js';
// @ts-ignore
import { VisionBaseVsValidation } from '../fhirValueSets/VisionBaseVsValidation.js';
// @ts-ignore
import { VisionEyeVsValidation } from '../fhirValueSets/VisionEyeVsValidation.js';
// @ts-ignore
import { FmStatusVsValidation } from '../fhirValueSets/FmStatusVsValidation.js';
/**
 * Allows for adjustment on two axis.
 */
export class VisionPrescriptionLensSpecificationPrism extends fhir.BackboneElement {
    /**
     * Default constructor for VisionPrescriptionLensSpecificationPrism - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['amount']) {
            this.amount = new fhir.FhirDecimal({ value: source.amount });
        }
        else {
            this.amount = null;
        }
        if (source['_amount']) {
            if (this.amount) {
                this.amount.addExtendedProperties(source._amount);
            }
            else {
                this.amount = new fhir.FhirDecimal(source._amount);
            }
        }
        if (source['base']) {
            this.base = new fhir.FhirCode({ value: source.base });
        }
        else {
            this.base = null;
        }
        if (source['_base']) {
            if (this.base) {
                this.base.addExtendedProperties(source._base);
            }
            else {
                this.base = new fhir.FhirCode(source._base);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'VisionPrescription.lensSpecification.prism';
        }
        this.vReqS('amount', expression);
        this.vReqSV('base', expression, 'VisionBase', VisionBaseVsValidation, 'r');
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
VisionPrescriptionLensSpecificationPrism._fts_dataType = 'VisionPrescriptionLensSpecificationPrism';
/**
 * Contain the details of  the individual lens specifications and serves as the authorization for the fullfillment by certified professionals.
 */
export class VisionPrescriptionLensSpecification extends fhir.BackboneElement {
    /**
     * Default constructor for VisionPrescriptionLensSpecification - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['product']) {
            this.product = new fhir.CodeableConcept(source.product);
        }
        else {
            this.product = null;
        }
        if (source['eye']) {
            this.eye = new fhir.FhirCode({ value: source.eye });
        }
        else {
            this.eye = null;
        }
        if (source['_eye']) {
            if (this.eye) {
                this.eye.addExtendedProperties(source._eye);
            }
            else {
                this.eye = new fhir.FhirCode(source._eye);
            }
        }
        if (source['sphere']) {
            this.sphere = new fhir.FhirDecimal({ value: source.sphere });
        }
        if (source['_sphere']) {
            if (this.sphere) {
                this.sphere.addExtendedProperties(source._sphere);
            }
            else {
                this.sphere = new fhir.FhirDecimal(source._sphere);
            }
        }
        if (source['cylinder']) {
            this.cylinder = new fhir.FhirDecimal({ value: source.cylinder });
        }
        if (source['_cylinder']) {
            if (this.cylinder) {
                this.cylinder.addExtendedProperties(source._cylinder);
            }
            else {
                this.cylinder = new fhir.FhirDecimal(source._cylinder);
            }
        }
        if (source['axis']) {
            this.axis = new fhir.FhirInteger({ value: source.axis });
        }
        if (source['_axis']) {
            if (this.axis) {
                this.axis.addExtendedProperties(source._axis);
            }
            else {
                this.axis = new fhir.FhirInteger(source._axis);
            }
        }
        if (source['prism']) {
            this.prism = source.prism.map((x) => new fhir.VisionPrescriptionLensSpecificationPrism(x));
        }
        else {
            this.prism = [];
        }
        if (source['add']) {
            this.add = new fhir.FhirDecimal({ value: source.add });
        }
        if (source['_add']) {
            if (this.add) {
                this.add.addExtendedProperties(source._add);
            }
            else {
                this.add = new fhir.FhirDecimal(source._add);
            }
        }
        if (source['power']) {
            this.power = new fhir.FhirDecimal({ value: source.power });
        }
        if (source['_power']) {
            if (this.power) {
                this.power.addExtendedProperties(source._power);
            }
            else {
                this.power = new fhir.FhirDecimal(source._power);
            }
        }
        if (source['backCurve']) {
            this.backCurve = new fhir.FhirDecimal({ value: source.backCurve });
        }
        if (source['_backCurve']) {
            if (this.backCurve) {
                this.backCurve.addExtendedProperties(source._backCurve);
            }
            else {
                this.backCurve = new fhir.FhirDecimal(source._backCurve);
            }
        }
        if (source['diameter']) {
            this.diameter = new fhir.FhirDecimal({ value: source.diameter });
        }
        if (source['_diameter']) {
            if (this.diameter) {
                this.diameter.addExtendedProperties(source._diameter);
            }
            else {
                this.diameter = new fhir.FhirDecimal(source._diameter);
            }
        }
        if (source['duration']) {
            this.duration = new fhir.Quantity(source.duration);
        }
        if (source['color']) {
            this.color = new fhir.FhirString({ value: source.color });
        }
        if (source['_color']) {
            if (this.color) {
                this.color.addExtendedProperties(source._color);
            }
            else {
                this.color = new fhir.FhirString(source._color);
            }
        }
        if (source['brand']) {
            this.brand = new fhir.FhirString({ value: source.brand });
        }
        if (source['_brand']) {
            if (this.brand) {
                this.brand.addExtendedProperties(source._brand);
            }
            else {
                this.brand = new fhir.FhirString(source._brand);
            }
        }
        if (source['note']) {
            this.note = source.note.map((x) => new fhir.Annotation(x));
        }
        else {
            this.note = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'VisionPrescription.lensSpecification';
        }
        this.vReqS('product', expression);
        this.vReqSV('eye', expression, 'VisionEye', VisionEyeVsValidation, 'r');
        this.vOptS('sphere', expression);
        this.vOptS('cylinder', expression);
        this.vOptS('axis', expression);
        this.vOptA('prism', expression);
        this.vOptS('add', expression);
        this.vOptS('power', expression);
        this.vOptS('backCurve', expression);
        this.vOptS('diameter', expression);
        this.vOptS('duration', expression);
        this.vOptS('color', expression);
        this.vOptS('brand', expression);
        this.vOptA('note', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
VisionPrescriptionLensSpecification._fts_dataType = 'VisionPrescriptionLensSpecification';
/**
 * An authorization for the provision of glasses and/or contact lenses to a patient.
 */
export class VisionPrescription extends fhir.DomainResource {
    /**
     * Default constructor for VisionPrescription - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'VisionPrescription';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['created']) {
            this.created = new fhir.FhirDateTime({ value: source.created });
        }
        else {
            this.created = null;
        }
        if (source['_created']) {
            if (this.created) {
                this.created.addExtendedProperties(source._created);
            }
            else {
                this.created = new fhir.FhirDateTime(source._created);
            }
        }
        if (source['patient']) {
            this.patient = new fhir.Reference(source.patient);
        }
        else {
            this.patient = null;
        }
        if (source['encounter']) {
            this.encounter = new fhir.Reference(source.encounter);
        }
        if (source['dateWritten']) {
            this.dateWritten = new fhir.FhirDateTime({ value: source.dateWritten });
        }
        else {
            this.dateWritten = null;
        }
        if (source['_dateWritten']) {
            if (this.dateWritten) {
                this.dateWritten.addExtendedProperties(source._dateWritten);
            }
            else {
                this.dateWritten = new fhir.FhirDateTime(source._dateWritten);
            }
        }
        if (source['prescriber']) {
            this.prescriber = new fhir.Reference(source.prescriber);
        }
        else {
            this.prescriber = null;
        }
        if (source['lensSpecification']) {
            this.lensSpecification = source.lensSpecification.map((x) => new fhir.VisionPrescriptionLensSpecification(x));
        }
        else {
            this.lensSpecification = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'VisionPrescription';
        }
        this.vReqS('resourceType', expression);
        this.vOptA('identifier', expression);
        this.vReqSV('status', expression, 'FmStatus', FmStatusVsValidation, 'r');
        this.vReqS('created', expression);
        this.vReqS('patient', expression);
        this.vOptS('encounter', expression);
        this.vReqS('dateWritten', expression);
        this.vReqS('prescriber', expression);
        this.vReqA('lensSpecification', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
VisionPrescription._fts_dataType = 'VisionPrescription';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVmlzaW9uUHJlc2NyaXB0aW9uLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9WaXNpb25QcmVzY3JpcHRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsb0NBQW9DO0FBRXBDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBSW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSw0Q0FBNEMsQ0FBQztBQU9wRixhQUFhO0FBQ2IsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sMkNBQTJDLENBQUM7QUFHbEYsYUFBYTtBQUNiLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLDBDQUEwQyxDQUFDO0FBdUJoRjs7R0FFRztBQUNILE1BQU0sT0FBTyx3Q0FBeUMsU0FBUSxJQUFJLENBQUMsZUFBZTtJQWFoRjs7T0FFRztJQUNILFlBQVksU0FBK0QsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDckgsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxNQUFNLEVBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDaEY7WUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztTQUFFO1FBQzVCLElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQ3JCLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtnQkFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxPQUFRLENBQUMsQ0FBQzthQUFFO2lCQUNuRTtnQkFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FB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LEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDcEUsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDaEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDaEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDbEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDcEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDbkMsSUFBSSxDQUFDLEtBQUssQ0FBQyxtQkFBbUIsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUMxQyxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQTFGRDs7R0FFRztBQUM2QixnQ0FBYSxHQUFVLG9CQUFvQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0LmNvcmUgdmVyc2lvbjogNC4wLjFcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBWaXNpb25QcmVzY3JpcHRpb25cclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFZpc2lvbkJhc2VDb2RlcywgIFZpc2lvbkJhc2VDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVmlzaW9uQmFzZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBWaXNpb25CYXNlVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9WaXNpb25CYXNlVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBWaXNpb25Qcm9kdWN0Q29kZXMsICBWaXNpb25Qcm9kdWN0Q29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1Zpc2lvblByb2R1Y3RDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgVmlzaW9uUHJvZHVjdFZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVmlzaW9uUHJvZHVjdFZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgVmlzaW9uRXllQ29kZXMsICBWaXNpb25FeWVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVmlzaW9uRXllQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFZpc2lvbkV5ZVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVmlzaW9uRXllVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBGbVN0YXR1c0NvZGVzLCAgRm1TdGF0dXNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRm1TdGF0dXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRm1TdGF0dXNWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0ZtU3RhdHVzVnNWYWxpZGF0aW9uLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFZpc2lvblByZXNjcmlwdGlvbkxlbnNTcGVjaWZpY2F0aW9uUHJpc20gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgVmlzaW9uUHJlc2NyaXB0aW9uTGVuc1NwZWNpZmljYXRpb25QcmlzbUFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEFtb3VudCBvZiBwcmlzbSB0byBjb21wZW5zYXRlIGZvciBleWUgYWxpZ25tZW50IGluIGZyYWN0aW9uYWwgdW5pdHMuXHJcbiAgICovXHJcbiAgYW1vdW50OiBmaGlyLkZoaXJEZWNpbWFsfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFZpc2lvblByZXNjcmlwdGlvbi5sZW5zU3BlY2lmaWNhdGlvbi5wcmlzbS5hbW91bnRcclxuICAgKi9cclxuICBfYW1vdW50PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgcmVsYXRpdmUgYmFzZSwgb3IgcmVmZXJlbmNlIGxlbnMgZWRnZSwgZm9yIHRoZSBwcmlzbS5cclxuICAgKi9cclxuICBiYXNlOiBmaGlyLkZoaXJDb2RlPFZpc2lvbkJhc2VDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogVmlzaW9uUHJlc2NyaXB0aW9uLmxlbnNTcGVjaWZpY2F0aW9uLnByaXNtLmJhc2VcclxuICAgKi9cclxuICBfYmFzZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBbGxvd3MgZm9yIGFkanVzdG1lbnQgb24gdHdvIGF4aXMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVmlzaW9uUHJlc2NyaXB0aW9uTGVuc1NwZWNpZmljYXRpb25QcmlzbSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1Zpc2lvblByZXNjcmlwdGlvbkxlbnNTcGVjaWZpY2F0aW9uUHJpc20nO1xyXG4gIC8qKlxyXG4gICAqIEFtb3VudCBvZiBwcmlzbSB0byBjb21wZW5zYXRlIGZvciBleWUgYWxpZ25tZW50IGluIGZyYWN0aW9uYWwgdW5pdHMuXHJcbiAgICovXHJcbiAgcHVibGljIGFtb3VudDogZmhpci5GaGlyRGVjaW1hbHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZWxhdGl2ZSBiYXNlLCBvciByZWZlcmVuY2UgbGVucyBlZGdlLCBmb3IgdGhlIHByaXNtLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBiYXNlOiBmaGlyLkZoaXJDb2RlPFZpc2lvbkJhc2VDb2RlVHlwZT58bnVsbDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBWaXNpb25QcmVzY3JpcHRpb25MZW5zU3BlY2lmaWNhdGlvblByaXNtIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8VmlzaW9uUHJlc2NyaXB0aW9uTGVuc1NwZWNpZmljYXRpb25QcmlzbUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydhbW91bnQnXSkgeyB0aGlzLmFtb3VudCA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHt2YWx1ZTogc291cmNlLmFtb3VudH0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5hbW91bnQgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfYW1vdW50J10pIHtcclxuICAgICAgaWYgKHRoaXMuYW1vdW50KSB7IHRoaXMuYW1vdW50LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2Ftb3VudCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmFtb3VudCA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHNvdXJjZS5fYW1vdW50IGFzIFBhcnRpYWw8Zmhpci5GaGlyRGVjaW1hbEFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnYmFzZSddKSB7IHRoaXMuYmFzZSA9IG5ldyBmaGlyLkZoaXJDb2RlPFZpc2lvbkJhc2VDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2UuYmFzZX0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5iYXNlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2Jhc2UnXSkge1xyXG4gICAgICBpZiAodGhpcy5iYXNlKSB7IHRoaXMuYmFzZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9iYXNlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuYmFzZSA9IG5ldyBmaGlyLkZoaXJDb2RlPFZpc2lvbkJhc2VDb2RlVHlwZT4oc291cmNlLl9iYXNlIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKTtcclxuICAgIGlmIChleHByZXNzaW9uID09PSAnJykgeyBleHByZXNzaW9uID0gJ1Zpc2lvblByZXNjcmlwdGlvbi5sZW5zU3BlY2lmaWNhdGlvbi5wcmlzbScgfVxyXG4gICAgdGhpcy52UmVxUygnYW1vdW50JyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52UmVxU1YoJ2Jhc2UnLGV4cHJlc3Npb24sJ1Zpc2lvbkJhc2UnLFZpc2lvbkJhc2VWc1ZhbGlkYXRpb24sJ3InKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFZpc2lvblByZXNjcmlwdGlvbkxlbnNTcGVjaWZpY2F0aW9uIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFZpc2lvblByZXNjcmlwdGlvbkxlbnNTcGVjaWZpY2F0aW9uQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgdHlwZSBvZiB2aXNpb24gY29ycmVjdGlvbiBwcm9kdWN0IHdoaWNoIGlzIHJlcXVpcmVkIGZvciB0aGUgcGF0aWVudC5cclxuICAgKi9cclxuICBwcm9kdWN0OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBNYXkgYWxzbyBhcHBlYXIgYXMgT0QgKG9jdWx1cyBkZXh0ZXIpIGZvciB0aGUgcmlnaHQgZXllIGFuZCBPUyAob2N1bHVzIHNpbml0ZXIpIGZvciB0aGUgbGVmdCBleWUuXHJcbiAgICovXHJcbiAgZXllOiBmaGlyLkZoaXJDb2RlPFZpc2lvbkV5ZUNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBWaXNpb25QcmVzY3JpcHRpb24ubGVuc1NwZWNpZmljYXRpb24uZXllXHJcbiAgICovXHJcbiAgX2V5ZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHZhbHVlIGlzIG5lZ2F0aXZlIGZvciBuZWFyLXNpZ2h0ZWQgYW5kIHBvc2l0aXZlIGZvciBmYXIgc2lnaHRlZC5cclxuICAgKiBPZnRlbiBpbnN1cmFuY2Ugd2lsbCBub3QgY292ZXIgYSBsZW5zIHdpdGggcG93ZXIgYmV0d2VlbiArNzUgYW5kIC03NS5cclxuICAgKi9cclxuICBzcGhlcmU/OiBmaGlyLkZoaXJEZWNpbWFsfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFZpc2lvblByZXNjcmlwdGlvbi5sZW5zU3BlY2lmaWNhdGlvbi5zcGhlcmVcclxuICAgKi9cclxuICBfc3BoZXJlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBQb3dlciBhZGp1c3RtZW50IGZvciBhc3RpZ21hdGlzbSBtZWFzdXJlZCBpbiBkaW9wdHJlcyAoMC4yNSB1bml0cykuXHJcbiAgICovXHJcbiAgY3lsaW5kZXI/OiBmaGlyLkZoaXJEZWNpbWFsfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFZpc2lvblByZXNjcmlwdGlvbi5sZW5zU3BlY2lmaWNhdGlvbi5jeWxpbmRlclxyXG4gICAqL1xyXG4gIF9jeWxpbmRlcj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGxpbWl0cyBhcmUgKzE4MCBhbmQgLTE4MCBkZWdyZWVzLlxyXG4gICAqL1xyXG4gIGF4aXM/OiBmaGlyLkZoaXJJbnRlZ2VyfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFZpc2lvblByZXNjcmlwdGlvbi5sZW5zU3BlY2lmaWNhdGlvbi5heGlzXHJcbiAgICovXHJcbiAgX2F4aXM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEFsbG93cyBmb3IgYWRqdXN0bWVudCBvbiB0d28gYXhpcy5cclxuICAgKi9cclxuICBwcmlzbT86IGZoaXIuVmlzaW9uUHJlc2NyaXB0aW9uTGVuc1NwZWNpZmljYXRpb25QcmlzbUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUG93ZXIgYWRqdXN0bWVudCBmb3IgbXVsdGlmb2NhbCBsZW5zZXMgbWVhc3VyZWQgaW4gZGlvcHRyZXMgKDAuMjUgdW5pdHMpLlxyXG4gICAqL1xyXG4gIGFkZD86IGZoaXIuRmhpckRlY2ltYWx8bnVtYmVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogVmlzaW9uUHJlc2NyaXB0aW9uLmxlbnNTcGVjaWZpY2F0aW9uLmFkZFxyXG4gICAqL1xyXG4gIF9hZGQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIENvbnRhY3QgbGVucyBwb3dlciBtZWFzdXJlZCBpbiBkaW9wdHJlcyAoMC4yNSB1bml0cykuXHJcbiAgICovXHJcbiAgcG93ZXI/OiBmaGlyLkZoaXJEZWNpbWFsfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFZpc2lvblByZXNjcmlwdGlvbi5sZW5zU3BlY2lmaWNhdGlvbi5wb3dlclxyXG4gICAqL1xyXG4gIF9wb3dlcj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQmFjayBjdXJ2YXR1cmUgbWVhc3VyZWQgaW4gbWlsbGltZXRyZXMuXHJcbiAgICovXHJcbiAgYmFja0N1cnZlPzogZmhpci5GaGlyRGVjaW1hbHxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBWaXNpb25QcmVzY3JpcHRpb24ubGVuc1NwZWNpZmljYXRpb24uYmFja0N1cnZlXHJcbiAgICovXHJcbiAgX2JhY2tDdXJ2ZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQ29udGFjdCBsZW5zIGRpYW1ldGVyIG1lYXN1cmVkIGluIG1pbGxpbWV0cmVzLlxyXG4gICAqL1xyXG4gIGRpYW1ldGVyPzogZmhpci5GaGlyRGVjaW1hbHxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBWaXNpb25QcmVzY3JpcHRpb24ubGVuc1NwZWNpZmljYXRpb24uZGlhbWV0ZXJcclxuICAgKi9cclxuICBfZGlhbWV0ZXI/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZWNvbW1lbmRlZCBtYXhpbXVtIHdlYXIgcGVyaW9kIGZvciB0aGUgbGVucy5cclxuICAgKi9cclxuICBkdXJhdGlvbj86IGZoaXIuUXVhbnRpdHlBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTcGVjaWFsIGNvbG9yIG9yIHBhdHRlcm4uXHJcbiAgICovXHJcbiAgY29sb3I/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogVmlzaW9uUHJlc2NyaXB0aW9uLmxlbnNTcGVjaWZpY2F0aW9uLmNvbG9yXHJcbiAgICovXHJcbiAgX2NvbG9yPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBCcmFuZCByZWNvbW1lbmRhdGlvbnMgb3IgcmVzdHJpY3Rpb25zLlxyXG4gICAqL1xyXG4gIGJyYW5kPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFZpc2lvblByZXNjcmlwdGlvbi5sZW5zU3BlY2lmaWNhdGlvbi5icmFuZFxyXG4gICAqL1xyXG4gIF9icmFuZD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogTm90ZXMgZm9yIHNwZWNpYWwgcmVxdWlyZW1lbnRzIHN1Y2ggYXMgY29hdGluZ3MgYW5kIGxlbnMgbWF0ZXJpYWxzLlxyXG4gICAqL1xyXG4gIG5vdGU/OiBmaGlyLkFubm90YXRpb25BcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQ29udGFpbiB0aGUgZGV0YWlscyBvZiAgdGhlIGluZGl2aWR1YWwgbGVucyBzcGVjaWZpY2F0aW9ucyBhbmQgc2VydmVzIGFzIHRoZSBhdXRob3JpemF0aW9uIGZvciB0aGUgZnVsbGZpbGxtZW50IGJ5IGNlcnRpZmllZCBwcm9mZXNzaW9uYWxzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFZpc2lvblByZXNjcmlwdGlvbkxlbnNTcGVjaWZpY2F0aW9uIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnVmlzaW9uUHJlc2NyaXB0aW9uTGVuc1NwZWNpZmljYXRpb24nO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgdGhlIHR5cGUgb2YgdmlzaW9uIGNvcnJlY3Rpb24gcHJvZHVjdCB3aGljaCBpcyByZXF1aXJlZCBmb3IgdGhlIHBhdGllbnQuXHJcbiAgICovXHJcbiAgcHVibGljIHByb2R1Y3Q6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogTWF5IGFsc28gYXBwZWFyIGFzIE9EIChvY3VsdXMgZGV4dGVyKSBmb3IgdGhlIHJpZ2h0IGV5ZSBhbmQgT1MgKG9jdWx1cyBzaW5pdGVyKSBmb3IgdGhlIGxlZnQgZXllLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBleWU6IGZoaXIuRmhpckNvZGU8VmlzaW9uRXllQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIHZhbHVlIGlzIG5lZ2F0aXZlIGZvciBuZWFyLXNpZ2h0ZWQgYW5kIHBvc2l0aXZlIGZvciBmYXIgc2lnaHRlZC5cclxuICAgKiBPZnRlbiBpbnN1cmFuY2Ugd2lsbCBub3QgY292ZXIgYSBsZW5zIHdpdGggcG93ZXIgYmV0d2VlbiArNzUgYW5kIC03NS5cclxuICAgKi9cclxuICBwdWJsaWMgc3BoZXJlPzogZmhpci5GaGlyRGVjaW1hbHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUG93ZXIgYWRqdXN0bWVudCBmb3IgYXN0aWdtYXRpc20gbWVhc3VyZWQgaW4gZGlvcHRyZXMgKDAuMjUgdW5pdHMpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjeWxpbmRlcj86IGZoaXIuRmhpckRlY2ltYWx8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsaW1pdHMgYXJlICsxODAgYW5kIC0xODAgZGVncmVlcy5cclxuICAgKi9cclxuICBwdWJsaWMgYXhpcz86IGZoaXIuRmhpckludGVnZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFsbG93cyBmb3IgYWRqdXN0bWVudCBvbiB0d28gYXhpcy5cclxuICAgKi9cclxuICBwdWJsaWMgcHJpc206IGZoaXIuVmlzaW9uUHJlc2NyaXB0aW9uTGVuc1NwZWNpZmljYXRpb25QcmlzbVtdO1xyXG4gIC8qKlxyXG4gICAqIFBvd2VyIGFkanVzdG1lbnQgZm9yIG11bHRpZm9jYWwgbGVuc2VzIG1lYXN1cmVkIGluIGRpb3B0cmVzICgwLjI1IHVuaXRzKS5cclxuICAgKi9cclxuICBwdWJsaWMgYWRkPzogZmhpci5GaGlyRGVjaW1hbHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ29udGFjdCBsZW5zIHBvd2VyIG1lYXN1cmVkIGluIGRpb3B0cmVzICgwLjI1IHVuaXRzKS5cclxuICAgKi9cclxuICBwdWJsaWMgcG93ZXI/OiBmaGlyLkZoaXJEZWNpbWFsfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBCYWNrIGN1cnZhdHVyZSBtZWFzdXJlZCBpbiBtaWxsaW1ldHJlcy5cclxuICAgKi9cclxuICBwdWJsaWMgYmFja0N1cnZlPzogZmhpci5GaGlyRGVjaW1hbHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ29udGFjdCBsZW5zIGRpYW1ldGVyIG1lYXN1cmVkIGluIG1pbGxpbWV0cmVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkaWFtZXRlcj86IGZoaXIuRmhpckRlY2ltYWx8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZWNvbW1lbmRlZCBtYXhpbXVtIHdlYXIgcGVyaW9kIGZvciB0aGUgbGVucy5cclxuICAgKi9cclxuICBwdWJsaWMgZHVyYXRpb24/OiBmaGlyLlF1YW50aXR5fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTcGVjaWFsIGNvbG9yIG9yIHBhdHRlcm4uXHJcbiAgICovXHJcbiAgcHVibGljIGNvbG9yPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBCcmFuZCByZWNvbW1lbmRhdGlvbnMgb3IgcmVzdHJpY3Rpb25zLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBicmFuZD86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTm90ZXMgZm9yIHNwZWNpYWwgcmVxdWlyZW1lbnRzIHN1Y2ggYXMgY29hdGluZ3MgYW5kIGxlbnMgbWF0ZXJpYWxzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBub3RlOiBmaGlyLkFubm90YXRpb25bXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBWaXNpb25QcmVzY3JpcHRpb25MZW5zU3BlY2lmaWNhdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFZpc2lvblByZXNjcmlwdGlvbkxlbnNTcGVjaWZpY2F0aW9uQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3Byb2R1Y3QnXSkgeyB0aGlzLnByb2R1Y3QgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnByb2R1Y3QpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wcm9kdWN0ID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZXllJ10pIHsgdGhpcy5leWUgPSBuZXcgZmhpci5GaGlyQ29kZTxWaXNpb25FeWVDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2UuZXllfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmV5ZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19leWUnXSkge1xyXG4gICAgICBpZiAodGhpcy5leWUpIHsgdGhpcy5leWUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZXllISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZXllID0gbmV3IGZoaXIuRmhpckNvZGU8VmlzaW9uRXllQ29kZVR5cGU+KHNvdXJjZS5fZXllIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydzcGhlcmUnXSkgeyB0aGlzLnNwaGVyZSA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHt2YWx1ZTogc291cmNlLnNwaGVyZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfc3BoZXJlJ10pIHtcclxuICAgICAgaWYgKHRoaXMuc3BoZXJlKSB7IHRoaXMuc3BoZXJlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3NwaGVyZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnNwaGVyZSA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHNvdXJjZS5fc3BoZXJlIGFzIFBhcnRpYWw8Zmhpci5GaGlyRGVjaW1hbEFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnY3lsaW5kZXInXSkgeyB0aGlzLmN5bGluZGVyID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoe3ZhbHVlOiBzb3VyY2UuY3lsaW5kZXJ9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2N5bGluZGVyJ10pIHtcclxuICAgICAgaWYgKHRoaXMuY3lsaW5kZXIpIHsgdGhpcy5jeWxpbmRlci5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9jeWxpbmRlciEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmN5bGluZGVyID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoc291cmNlLl9jeWxpbmRlciBhcyBQYXJ0aWFsPGZoaXIuRmhpckRlY2ltYWxBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2F4aXMnXSkgeyB0aGlzLmF4aXMgPSBuZXcgZmhpci5GaGlySW50ZWdlcih7dmFsdWU6IHNvdXJjZS5heGlzfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19heGlzJ10pIHtcclxuICAgICAgaWYgKHRoaXMuYXhpcykgeyB0aGlzLmF4aXMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fYXhpcyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmF4aXMgPSBuZXcgZmhpci5GaGlySW50ZWdlcihzb3VyY2UuX2F4aXMgYXMgUGFydGlhbDxmaGlyLkZoaXJJbnRlZ2VyQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydwcmlzbSddKSB7IHRoaXMucHJpc20gPSBzb3VyY2UucHJpc20ubWFwKCh4KSA9PiBuZXcgZmhpci5WaXNpb25QcmVzY3JpcHRpb25MZW5zU3BlY2lmaWNhdGlvblByaXNtKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucHJpc20gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYWRkJ10pIHsgdGhpcy5hZGQgPSBuZXcgZmhpci5GaGlyRGVjaW1hbCh7dmFsdWU6IHNvdXJjZS5hZGR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2FkZCddKSB7XHJcbiAgICAgIGlmICh0aGlzLmFkZCkgeyB0aGlzLmFkZC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9hZGQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5hZGQgPSBuZXcgZmhpci5GaGlyRGVjaW1hbChzb3VyY2UuX2FkZCBhcyBQYXJ0aWFsPGZoaXIuRmhpckRlY2ltYWxBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3Bvd2VyJ10pIHsgdGhpcy5wb3dlciA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHt2YWx1ZTogc291cmNlLnBvd2VyfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19wb3dlciddKSB7XHJcbiAgICAgIGlmICh0aGlzLnBvd2VyKSB7IHRoaXMucG93ZXIuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fcG93ZXIhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5wb3dlciA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHNvdXJjZS5fcG93ZXIgYXMgUGFydGlhbDxmaGlyLkZoaXJEZWNpbWFsQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydiYWNrQ3VydmUnXSkgeyB0aGlzLmJhY2tDdXJ2ZSA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHt2YWx1ZTogc291cmNlLmJhY2tDdXJ2ZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfYmFja0N1cnZlJ10pIHtcclxuICAgICAgaWYgKHRoaXMuYmFja0N1cnZlKSB7IHRoaXMuYmFja0N1cnZlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2JhY2tDdXJ2ZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmJhY2tDdXJ2ZSA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHNvdXJjZS5fYmFja0N1cnZlIGFzIFBhcnRpYWw8Zmhpci5GaGlyRGVjaW1hbEFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGlhbWV0ZXInXSkgeyB0aGlzLmRpYW1ldGVyID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoe3ZhbHVlOiBzb3VyY2UuZGlhbWV0ZXJ9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2RpYW1ldGVyJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZGlhbWV0ZXIpIHsgdGhpcy5kaWFtZXRlci5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9kaWFtZXRlciEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRpYW1ldGVyID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoc291cmNlLl9kaWFtZXRlciBhcyBQYXJ0aWFsPGZoaXIuRmhpckRlY2ltYWxBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2R1cmF0aW9uJ10pIHsgdGhpcy5kdXJhdGlvbiA9IG5ldyBmaGlyLlF1YW50aXR5KHNvdXJjZS5kdXJhdGlvbik7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvbG9yJ10pIHsgdGhpcy5jb2xvciA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuY29sb3J9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2NvbG9yJ10pIHtcclxuICAgICAgaWYgKHRoaXMuY29sb3IpIHsgdGhpcy5jb2xvci5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9jb2xvciEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmNvbG9yID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2NvbG9yIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydicmFuZCddKSB7IHRoaXMuYnJhbmQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmJyYW5kfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19icmFuZCddKSB7XHJcbiAgICAgIGlmICh0aGlzLmJyYW5kKSB7IHRoaXMuYnJhbmQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fYnJhbmQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5icmFuZCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9icmFuZCBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnbm90ZSddKSB7IHRoaXMubm90ZSA9IHNvdXJjZS5ub3RlLm1hcCgoeCkgPT4gbmV3IGZoaXIuQW5ub3RhdGlvbih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm5vdGUgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdWaXNpb25QcmVzY3JpcHRpb24ubGVuc1NwZWNpZmljYXRpb24nIH1cclxuICAgIHRoaXMudlJlcVMoJ3Byb2R1Y3QnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZSZXFTVignZXllJyxleHByZXNzaW9uLCdWaXNpb25FeWUnLFZpc2lvbkV5ZVZzVmFsaWRhdGlvbiwncicpXHJcbiAgICB0aGlzLnZPcHRTKCdzcGhlcmUnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdjeWxpbmRlcicsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ2F4aXMnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRBKCdwcmlzbScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ2FkZCcsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ3Bvd2VyJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnYmFja0N1cnZlJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnZGlhbWV0ZXInLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdkdXJhdGlvbicsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ2NvbG9yJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnYnJhbmQnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRBKCdub3RlJyxleHByZXNzaW9uKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFZpc2lvblByZXNjcmlwdGlvbiB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBWaXNpb25QcmVzY3JpcHRpb25BcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJWaXNpb25QcmVzY3JpcHRpb25cInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSB1bmlxdWUgaWRlbnRpZmllciBhc3NpZ25lZCB0byB0aGlzIHZpc2lvbiBwcmVzY3JpcHRpb24uXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IGlzIGxhYmVsZWQgYXMgYSBtb2RpZmllciBiZWNhdXNlIHRoZSBzdGF0dXMgY29udGFpbnMgY29kZXMgdGhhdCBtYXJrIHRoZSByZXNvdXJjZSBhcyBub3QgY3VycmVudGx5IHZhbGlkLlxyXG4gICAqL1xyXG4gIHN0YXR1czogZmhpci5GaGlyQ29kZTxGbVN0YXR1c0NvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBWaXNpb25QcmVzY3JpcHRpb24uc3RhdHVzXHJcbiAgICovXHJcbiAgX3N0YXR1cz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgdGhpcyByZXNvdXJjZSB3YXMgY3JlYXRlZC5cclxuICAgKi9cclxuICBjcmVhdGVkOiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBWaXNpb25QcmVzY3JpcHRpb24uY3JlYXRlZFxyXG4gICAqL1xyXG4gIF9jcmVhdGVkPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBBIHJlc291cmNlIHJlZmVyZW5jZSB0byB0aGUgcGVyc29uIHRvIHdob20gdGhlIHZpc2lvbiBwcmVzY3JpcHRpb24gYXBwbGllcy5cclxuICAgKi9cclxuICBwYXRpZW50OiBmaGlyLlJlZmVyZW5jZUFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBBIHJlZmVyZW5jZSB0byBhIHJlc291cmNlIHRoYXQgaWRlbnRpZmllcyB0aGUgcGFydGljdWxhciBvY2N1cnJlbmNlIG9mIGNvbnRhY3QgYmV0d2VlbiBwYXRpZW50IGFuZCBoZWFsdGggY2FyZSBwcm92aWRlciBkdXJpbmcgd2hpY2ggdGhlIHByZXNjcmlwdGlvbiB3YXMgaXNzdWVkLlxyXG4gICAqL1xyXG4gIGVuY291bnRlcj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSnVyaXNkaWN0aW9ucyBkZXRlcm1pbmUgdGhlIHZhbGlkIGxpZmV0aW1lIG9mIGEgcHJlc2NyaXB0aW9uLiBUeXBpY2FsbHkgdmlzaW9uIHByZXNjcmlwdGlvbnMgYXJlIHZhbGlkIGZvciB0d28geWVhcnMgZnJvbSB0aGUgZGF0ZSB3cml0dGVuLlxyXG4gICAqL1xyXG4gIGRhdGVXcml0dGVuOiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBWaXNpb25QcmVzY3JpcHRpb24uZGF0ZVdyaXR0ZW5cclxuICAgKi9cclxuICBfZGF0ZVdyaXR0ZW4/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBoZWFsdGhjYXJlIHByb2Zlc3Npb25hbCByZXNwb25zaWJsZSBmb3IgYXV0aG9yaXppbmcgdGhlIHByZXNjcmlwdGlvbi5cclxuICAgKi9cclxuICBwcmVzY3JpYmVyOiBmaGlyLlJlZmVyZW5jZUFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBDb250YWluIHRoZSBkZXRhaWxzIG9mICB0aGUgaW5kaXZpZHVhbCBsZW5zIHNwZWNpZmljYXRpb25zIGFuZCBzZXJ2ZXMgYXMgdGhlIGF1dGhvcml6YXRpb24gZm9yIHRoZSBmdWxsZmlsbG1lbnQgYnkgY2VydGlmaWVkIHByb2Zlc3Npb25hbHMuXHJcbiAgICovXHJcbiAgbGVuc1NwZWNpZmljYXRpb246IGZoaXIuVmlzaW9uUHJlc2NyaXB0aW9uTGVuc1NwZWNpZmljYXRpb25BcmdzW118bnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFuIGF1dGhvcml6YXRpb24gZm9yIHRoZSBwcm92aXNpb24gb2YgZ2xhc3NlcyBhbmQvb3IgY29udGFjdCBsZW5zZXMgdG8gYSBwYXRpZW50LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFZpc2lvblByZXNjcmlwdGlvbiBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnVmlzaW9uUHJlc2NyaXB0aW9uJztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIlZpc2lvblByZXNjcmlwdGlvblwiO1xyXG4gIC8qKlxyXG4gICAqIEEgdW5pcXVlIGlkZW50aWZpZXIgYXNzaWduZWQgdG8gdGhpcyB2aXNpb24gcHJlc2NyaXB0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyOiBmaGlyLklkZW50aWZpZXJbXTtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIGJlY2F1c2UgdGhlIHN0YXR1cyBjb250YWlucyBjb2RlcyB0aGF0IG1hcmsgdGhlIHJlc291cmNlIGFzIG5vdCBjdXJyZW50bHkgdmFsaWQuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1czogZmhpci5GaGlyQ29kZTxGbVN0YXR1c0NvZGVUeXBlPnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRlIHRoaXMgcmVzb3VyY2Ugd2FzIGNyZWF0ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGNyZWF0ZWQ6IGZoaXIuRmhpckRhdGVUaW1lfG51bGw7XHJcbiAgLyoqXHJcbiAgICogQSByZXNvdXJjZSByZWZlcmVuY2UgdG8gdGhlIHBlcnNvbiB0byB3aG9tIHRoZSB2aXNpb24gcHJlc2NyaXB0aW9uIGFwcGxpZXMuXHJcbiAgICovXHJcbiAgcHVibGljIHBhdGllbnQ6IGZoaXIuUmVmZXJlbmNlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogQSByZWZlcmVuY2UgdG8gYSByZXNvdXJjZSB0aGF0IGlkZW50aWZpZXMgdGhlIHBhcnRpY3VsYXIgb2NjdXJyZW5jZSBvZiBjb250YWN0IGJldHdlZW4gcGF0aWVudCBhbmQgaGVhbHRoIGNhcmUgcHJvdmlkZXIgZHVyaW5nIHdoaWNoIHRoZSBwcmVzY3JpcHRpb24gd2FzIGlzc3VlZC5cclxuICAgKi9cclxuICBwdWJsaWMgZW5jb3VudGVyPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEp1cmlzZGljdGlvbnMgZGV0ZXJtaW5lIHRoZSB2YWxpZCBsaWZldGltZSBvZiBhIHByZXNjcmlwdGlvbi4gVHlwaWNhbGx5IHZpc2lvbiBwcmVzY3JpcHRpb25zIGFyZSB2YWxpZCBmb3IgdHdvIHllYXJzIGZyb20gdGhlIGRhdGUgd3JpdHRlbi5cclxuICAgKi9cclxuICBwdWJsaWMgZGF0ZVdyaXR0ZW46IGZoaXIuRmhpckRhdGVUaW1lfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGhlYWx0aGNhcmUgcHJvZmVzc2lvbmFsIHJlc3BvbnNpYmxlIGZvciBhdXRob3JpemluZyB0aGUgcHJlc2NyaXB0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcmVzY3JpYmVyOiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIENvbnRhaW4gdGhlIGRldGFpbHMgb2YgIHRoZSBpbmRpdmlkdWFsIGxlbnMgc3BlY2lmaWNhdGlvbnMgYW5kIHNlcnZlcyBhcyB0aGUgYXV0aG9yaXphdGlvbiBmb3IgdGhlIGZ1bGxmaWxsbWVudCBieSBjZXJ0aWZpZWQgcHJvZmVzc2lvbmFscy5cclxuICAgKi9cclxuICBwdWJsaWMgbGVuc1NwZWNpZmljYXRpb246IGZoaXIuVmlzaW9uUHJlc2NyaXB0aW9uTGVuc1NwZWNpZmljYXRpb25bXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBWaXNpb25QcmVzY3JpcHRpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxWaXNpb25QcmVzY3JpcHRpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnVmlzaW9uUHJlc2NyaXB0aW9uJztcclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBzb3VyY2UuaWRlbnRpZmllci5tYXAoKHgpID0+IG5ldyBmaGlyLklkZW50aWZpZXIoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pZGVudGlmaWVyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0YXR1cyddKSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8Rm1TdGF0dXNDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2Uuc3RhdHVzfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zdGF0dXMnXSkge1xyXG4gICAgICBpZiAodGhpcy5zdGF0dXMpIHsgdGhpcy5zdGF0dXMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc3RhdHVzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8Rm1TdGF0dXNDb2RlVHlwZT4oc291cmNlLl9zdGF0dXMgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2NyZWF0ZWQnXSkgeyB0aGlzLmNyZWF0ZWQgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2UuY3JlYXRlZH0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jcmVhdGVkID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2NyZWF0ZWQnXSkge1xyXG4gICAgICBpZiAodGhpcy5jcmVhdGVkKSB7IHRoaXMuY3JlYXRlZC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9jcmVhdGVkISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuY3JlYXRlZCA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZShzb3VyY2UuX2NyZWF0ZWQgYXMgUGFydGlhbDxmaGlyLkZoaXJEYXRlVGltZUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsncGF0aWVudCddKSB7IHRoaXMucGF0aWVudCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UucGF0aWVudCk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnBhdGllbnQgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydlbmNvdW50ZXInXSkgeyB0aGlzLmVuY291bnRlciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuZW5jb3VudGVyKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGF0ZVdyaXR0ZW4nXSkgeyB0aGlzLmRhdGVXcml0dGVuID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLmRhdGVXcml0dGVufSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmRhdGVXcml0dGVuID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2RhdGVXcml0dGVuJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZGF0ZVdyaXR0ZW4pIHsgdGhpcy5kYXRlV3JpdHRlbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9kYXRlV3JpdHRlbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRhdGVXcml0dGVuID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHNvdXJjZS5fZGF0ZVdyaXR0ZW4gYXMgUGFydGlhbDxmaGlyLkZoaXJEYXRlVGltZUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJlc2NyaWJlciddKSB7IHRoaXMucHJlc2NyaWJlciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UucHJlc2NyaWJlcik7IH1cclxuICAgIGVsc2UgeyB0aGlzLnByZXNjcmliZXIgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydsZW5zU3BlY2lmaWNhdGlvbiddKSB7IHRoaXMubGVuc1NwZWNpZmljYXRpb24gPSBzb3VyY2UubGVuc1NwZWNpZmljYXRpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5WaXNpb25QcmVzY3JpcHRpb25MZW5zU3BlY2lmaWNhdGlvbih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmxlbnNTcGVjaWZpY2F0aW9uID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb246c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24pO1xyXG4gICAgaWYgKGV4cHJlc3Npb24gPT09ICcnKSB7IGV4cHJlc3Npb24gPSAnVmlzaW9uUHJlc2NyaXB0aW9uJyB9XHJcbiAgICB0aGlzLnZSZXFTKCdyZXNvdXJjZVR5cGUnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRBKCdpZGVudGlmaWVyJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52UmVxU1YoJ3N0YXR1cycsZXhwcmVzc2lvbiwnRm1TdGF0dXMnLEZtU3RhdHVzVnNWYWxpZGF0aW9uLCdyJylcclxuICAgIHRoaXMudlJlcVMoJ2NyZWF0ZWQnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZSZXFTKCdwYXRpZW50JyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnZW5jb3VudGVyJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52UmVxUygnZGF0ZVdyaXR0ZW4nLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZSZXFTKCdwcmVzY3JpYmVyJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52UmVxQSgnbGVuc1NwZWNpZmljYXRpb24nLGV4cHJlc3Npb24pXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=