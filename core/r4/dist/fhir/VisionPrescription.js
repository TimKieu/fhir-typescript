// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: VisionPrescription
import * as fhir from '../fhir.js';
// @ts-ignore
import { VisionBaseCodes } from '../fhirValueSets/VisionBaseCodes.js';
// @ts-ignore
import { VisionEyeCodes } from '../fhirValueSets/VisionEyeCodes.js';
// @ts-ignore
import { FmStatusCodes } from '../fhirValueSets/FmStatusCodes.js';
/**
 * Allows for adjustment on two axis.
 */
export class VisionPrescriptionLensSpecificationPrism extends fhir.BackboneElement {
    /**
     * Default constructor for VisionPrescriptionLensSpecificationPrism - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['amount']) {
            this.amount = new fhir.FhirDecimal({ value: source.amount });
        }
        else {
            this.amount = null;
        }
        if (source['_amount']) {
            if (this.amount) {
                this.amount.addExtendedProperties(source._amount);
            }
            else {
                this.amount = new fhir.FhirDecimal(source._amount);
            }
        }
        if (source['base']) {
            this.base = new fhir.FhirCode({ value: source.base });
        }
        else {
            this.base = null;
        }
        if (source['_base']) {
            if (this.base) {
                this.base.addExtendedProperties(source._base);
            }
            else {
                this.base = new fhir.FhirCode(source._base);
            }
        }
    }
    /**
     * Required-bound Value Set for base (VisionPrescription.lensSpecification.prism.base)
     */
    static get baseRequiredCodes() {
        return VisionBaseCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'VisionPrescription.lensSpecification.prism';
        }
        if (!this['amount']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property amount fhir: VisionPrescription.lensSpecification.prism.amount:decimal', expression: [expression] });
        }
        if (this["amount"]) {
            issues.push(...this.amount.doModelValidation(expression + '.amount'));
        }
        if (!this['base']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property base fhir: VisionPrescription.lensSpecification.prism.base:code', expression: [expression] });
        }
        if (this['base'] && (!Object.values(VisionBaseCodes).includes(this.base.value))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'base (VisionPrescription.lensSpecification.prism.base) of type code is missing code for Required binding to: VisionBase', expression: [expression] });
        }
        if (this["base"]) {
            issues.push(...this.base.doModelValidation(expression + '.base'));
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
VisionPrescriptionLensSpecificationPrism._fts_dataType = 'VisionPrescriptionLensSpecificationPrism';
/**
 * Contain the details of  the individual lens specifications and serves as the authorization for the fullfillment by certified professionals.
 */
export class VisionPrescriptionLensSpecification extends fhir.BackboneElement {
    /**
     * Default constructor for VisionPrescriptionLensSpecification - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['product']) {
            this.product = new fhir.CodeableConcept(source.product);
        }
        else {
            this.product = null;
        }
        if (source['eye']) {
            this.eye = new fhir.FhirCode({ value: source.eye });
        }
        else {
            this.eye = null;
        }
        if (source['_eye']) {
            if (this.eye) {
                this.eye.addExtendedProperties(source._eye);
            }
            else {
                this.eye = new fhir.FhirCode(source._eye);
            }
        }
        if (source['sphere']) {
            this.sphere = new fhir.FhirDecimal({ value: source.sphere });
        }
        if (source['_sphere']) {
            if (this.sphere) {
                this.sphere.addExtendedProperties(source._sphere);
            }
            else {
                this.sphere = new fhir.FhirDecimal(source._sphere);
            }
        }
        if (source['cylinder']) {
            this.cylinder = new fhir.FhirDecimal({ value: source.cylinder });
        }
        if (source['_cylinder']) {
            if (this.cylinder) {
                this.cylinder.addExtendedProperties(source._cylinder);
            }
            else {
                this.cylinder = new fhir.FhirDecimal(source._cylinder);
            }
        }
        if (source['axis']) {
            this.axis = new fhir.FhirInteger({ value: source.axis });
        }
        if (source['_axis']) {
            if (this.axis) {
                this.axis.addExtendedProperties(source._axis);
            }
            else {
                this.axis = new fhir.FhirInteger(source._axis);
            }
        }
        if (source['prism']) {
            this.prism = source.prism.map((x) => new fhir.VisionPrescriptionLensSpecificationPrism(x));
        }
        else {
            this.prism = [];
        }
        if (source['add']) {
            this.add = new fhir.FhirDecimal({ value: source.add });
        }
        if (source['_add']) {
            if (this.add) {
                this.add.addExtendedProperties(source._add);
            }
            else {
                this.add = new fhir.FhirDecimal(source._add);
            }
        }
        if (source['power']) {
            this.power = new fhir.FhirDecimal({ value: source.power });
        }
        if (source['_power']) {
            if (this.power) {
                this.power.addExtendedProperties(source._power);
            }
            else {
                this.power = new fhir.FhirDecimal(source._power);
            }
        }
        if (source['backCurve']) {
            this.backCurve = new fhir.FhirDecimal({ value: source.backCurve });
        }
        if (source['_backCurve']) {
            if (this.backCurve) {
                this.backCurve.addExtendedProperties(source._backCurve);
            }
            else {
                this.backCurve = new fhir.FhirDecimal(source._backCurve);
            }
        }
        if (source['diameter']) {
            this.diameter = new fhir.FhirDecimal({ value: source.diameter });
        }
        if (source['_diameter']) {
            if (this.diameter) {
                this.diameter.addExtendedProperties(source._diameter);
            }
            else {
                this.diameter = new fhir.FhirDecimal(source._diameter);
            }
        }
        if (source['duration']) {
            this.duration = new fhir.Quantity(source.duration);
        }
        if (source['color']) {
            this.color = new fhir.FhirString({ value: source.color });
        }
        if (source['_color']) {
            if (this.color) {
                this.color.addExtendedProperties(source._color);
            }
            else {
                this.color = new fhir.FhirString(source._color);
            }
        }
        if (source['brand']) {
            this.brand = new fhir.FhirString({ value: source.brand });
        }
        if (source['_brand']) {
            if (this.brand) {
                this.brand.addExtendedProperties(source._brand);
            }
            else {
                this.brand = new fhir.FhirString(source._brand);
            }
        }
        if (source['note']) {
            this.note = source.note.map((x) => new fhir.Annotation(x));
        }
        else {
            this.note = [];
        }
    }
    /**
     * Required-bound Value Set for eye (VisionPrescription.lensSpecification.eye)
     */
    static get eyeRequiredCodes() {
        return VisionEyeCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'VisionPrescription.lensSpecification';
        }
        if (!this['product']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property product fhir: VisionPrescription.lensSpecification.product:CodeableConcept', expression: [expression] });
        }
        if (this["product"]) {
            issues.push(...this.product.doModelValidation(expression + '.product'));
        }
        if (!this['eye']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property eye fhir: VisionPrescription.lensSpecification.eye:code', expression: [expression] });
        }
        if (this['eye'] && (!Object.values(VisionEyeCodes).includes(this.eye.value))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'eye (VisionPrescription.lensSpecification.eye) of type code is missing code for Required binding to: VisionEye', expression: [expression] });
        }
        if (this["eye"]) {
            issues.push(...this.eye.doModelValidation(expression + '.eye'));
        }
        if (this["sphere"]) {
            issues.push(...this.sphere.doModelValidation(expression + '.sphere'));
        }
        if (this["cylinder"]) {
            issues.push(...this.cylinder.doModelValidation(expression + '.cylinder'));
        }
        if (this["axis"]) {
            issues.push(...this.axis.doModelValidation(expression + '.axis'));
        }
        if (this["prism"]) {
            this.prism.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.prism[${i}]`)); });
        }
        if (this["add"]) {
            issues.push(...this.add.doModelValidation(expression + '.add'));
        }
        if (this["power"]) {
            issues.push(...this.power.doModelValidation(expression + '.power'));
        }
        if (this["backCurve"]) {
            issues.push(...this.backCurve.doModelValidation(expression + '.backCurve'));
        }
        if (this["diameter"]) {
            issues.push(...this.diameter.doModelValidation(expression + '.diameter'));
        }
        if (this["duration"]) {
            issues.push(...this.duration.doModelValidation(expression + '.duration'));
        }
        if (this["color"]) {
            issues.push(...this.color.doModelValidation(expression + '.color'));
        }
        if (this["brand"]) {
            issues.push(...this.brand.doModelValidation(expression + '.brand'));
        }
        if (this["note"]) {
            this.note.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.note[${i}]`)); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
VisionPrescriptionLensSpecification._fts_dataType = 'VisionPrescriptionLensSpecification';
/**
 * An authorization for the provision of glasses and/or contact lenses to a patient.
 */
export class VisionPrescription extends fhir.DomainResource {
    /**
     * Default constructor for VisionPrescription - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'VisionPrescription';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['created']) {
            this.created = new fhir.FhirDateTime({ value: source.created });
        }
        else {
            this.created = null;
        }
        if (source['_created']) {
            if (this.created) {
                this.created.addExtendedProperties(source._created);
            }
            else {
                this.created = new fhir.FhirDateTime(source._created);
            }
        }
        if (source['patient']) {
            this.patient = new fhir.Reference(source.patient);
        }
        else {
            this.patient = null;
        }
        if (source['encounter']) {
            this.encounter = new fhir.Reference(source.encounter);
        }
        if (source['dateWritten']) {
            this.dateWritten = new fhir.FhirDateTime({ value: source.dateWritten });
        }
        else {
            this.dateWritten = null;
        }
        if (source['_dateWritten']) {
            if (this.dateWritten) {
                this.dateWritten.addExtendedProperties(source._dateWritten);
            }
            else {
                this.dateWritten = new fhir.FhirDateTime(source._dateWritten);
            }
        }
        if (source['prescriber']) {
            this.prescriber = new fhir.Reference(source.prescriber);
        }
        else {
            this.prescriber = null;
        }
        if (source['lensSpecification']) {
            this.lensSpecification = source.lensSpecification.map((x) => new fhir.VisionPrescriptionLensSpecification(x));
        }
        else {
            this.lensSpecification = [];
        }
    }
    /**
     * Required-bound Value Set for status (VisionPrescription.status)
     */
    static get statusRequiredCodes() {
        return FmStatusCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'VisionPrescription';
        }
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType fhir: VisionPrescription.resourceType:"VisionPrescription"', expression: [expression] });
        }
        if (this["identifier"]) {
            this.identifier.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.identifier[${i}]`)); });
        }
        if (!this['status']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property status fhir: VisionPrescription.status:code', expression: [expression] });
        }
        if (this['status'] && (!Object.values(FmStatusCodes).includes(this.status.value))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'status (VisionPrescription.status) of type code is missing code for Required binding to: FmStatus', expression: [expression] });
        }
        if (this["status"]) {
            issues.push(...this.status.doModelValidation(expression + '.status'));
        }
        if (!this['created']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property created fhir: VisionPrescription.created:dateTime', expression: [expression] });
        }
        if (this["created"]) {
            issues.push(...this.created.doModelValidation(expression + '.created'));
        }
        if (!this['patient']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property patient fhir: VisionPrescription.patient:Reference', expression: [expression] });
        }
        if (this["patient"]) {
            issues.push(...this.patient.doModelValidation(expression + '.patient'));
        }
        if (this["encounter"]) {
            issues.push(...this.encounter.doModelValidation(expression + '.encounter'));
        }
        if (!this['dateWritten']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property dateWritten fhir: VisionPrescription.dateWritten:dateTime', expression: [expression] });
        }
        if (this["dateWritten"]) {
            issues.push(...this.dateWritten.doModelValidation(expression + '.dateWritten'));
        }
        if (!this['prescriber']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property prescriber fhir: VisionPrescription.prescriber:Reference', expression: [expression] });
        }
        if (this["prescriber"]) {
            issues.push(...this.prescriber.doModelValidation(expression + '.prescriber'));
        }
        if (!this['lensSpecification']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property lensSpecification fhir: VisionPrescription.lensSpecification:lensSpecification', expression: [expression] });
        }
        else if (!Array.isArray(this.lensSpecification)) {
            issues.push({ severity: 'error', code: 'structure', diagnostics: 'Found scalar in array property lensSpecification fhir: VisionPrescription.lensSpecification:lensSpecification', expression: [expression] });
        }
        else if (this.lensSpecification.length === 0) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property lensSpecification fhir: VisionPrescription.lensSpecification:lensSpecification', expression: [expression] });
        }
        if (this["lensSpecification"]) {
            this.lensSpecification.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.lensSpecification[${i}]`)); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
VisionPrescription._fts_dataType = 'VisionPrescription';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVmlzaW9uUHJlc2NyaXB0aW9uLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9WaXNpb25QcmVzY3JpcHRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsb0NBQW9DO0FBRXBDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBSW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsZUFBZSxFQUF1QixNQUFNLHFDQUFxQyxDQUFDO0FBTzNGLGFBQWE7QUFDYixPQUFPLEVBQUUsY0FBYyxFQUFzQixNQUFNLG9DQUFvQyxDQUFDO0FBR3hGLGFBQWE7QUFDYixPQUFPLEVBQUUsYUFBYSxFQUFxQixNQUFNLG1DQUFtQyxDQUFDO0FBdUJyRjs7R0FFRztBQUNILE1BQU0sT0FBTyx3Q0FBeUMsU0FBUSxJQUFJLENBQUMsZUFBZTtJQWFoRjs7T0FFRztJQUNILFlBQVksU0FBK0QsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDckgsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxNQUFNLEVBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDaEY7WUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztTQUFFO1FBQzVCLElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQ3JCLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtnQkFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxPQUFRLENBQUMsQ0FBQzthQUFFO2lCQUNuRTtnQkFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxN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LEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDL007YUFBTSxJQUFJLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO1lBQzlDLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUFFLDBHQUEwRyxFQUFFLFVBQVUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsQ0FBQztTQUN6TTtRQUNELElBQUksSUFBSSxDQUFDLG1CQUFtQixDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLEdBQUMsc0JBQXNCLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQUU7UUFDM0osT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQzs7QUEzSEQ7O0dBRUc7QUFDNkIsZ0NBQWEsR0FBVSxvQkFBb0IsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNC5jb3JlIHZlcnNpb246IDQuMC4xXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogVmlzaW9uUHJlc2NyaXB0aW9uXHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBWaXNpb25CYXNlQ29kaW5ncywgVmlzaW9uQmFzZUNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1Zpc2lvbkJhc2VDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBWaXNpb25CYXNlQ29kZXMsICBWaXNpb25CYXNlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1Zpc2lvbkJhc2VDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgVmlzaW9uUHJvZHVjdENvZGluZ3MsIFZpc2lvblByb2R1Y3RDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9WaXNpb25Qcm9kdWN0Q29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgVmlzaW9uUHJvZHVjdENvZGVzLCAgVmlzaW9uUHJvZHVjdENvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9WaXNpb25Qcm9kdWN0Q29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFZpc2lvbkV5ZUNvZGluZ3MsIFZpc2lvbkV5ZUNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1Zpc2lvbkV5ZUNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFZpc2lvbkV5ZUNvZGVzLCAgVmlzaW9uRXllQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1Zpc2lvbkV5ZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBGbVN0YXR1c0NvZGluZ3MsIEZtU3RhdHVzQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRm1TdGF0dXNDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBGbVN0YXR1c0NvZGVzLCAgRm1TdGF0dXNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRm1TdGF0dXNDb2Rlcy5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBWaXNpb25QcmVzY3JpcHRpb25MZW5zU3BlY2lmaWNhdGlvblByaXNtIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFZpc2lvblByZXNjcmlwdGlvbkxlbnNTcGVjaWZpY2F0aW9uUHJpc21BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBBbW91bnQgb2YgcHJpc20gdG8gY29tcGVuc2F0ZSBmb3IgZXllIGFsaWdubWVudCBpbiBmcmFjdGlvbmFsIHVuaXRzLlxyXG4gICAqL1xyXG4gIGFtb3VudDogZmhpci5GaGlyRGVjaW1hbHxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBWaXNpb25QcmVzY3JpcHRpb24ubGVuc1NwZWNpZmljYXRpb24ucHJpc20uYW1vdW50XHJcbiAgICovXHJcbiAgX2Ftb3VudD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlbGF0aXZlIGJhc2UsIG9yIHJlZmVyZW5jZSBsZW5zIGVkZ2UsIGZvciB0aGUgcHJpc20uXHJcbiAgICovXHJcbiAgYmFzZTogZmhpci5GaGlyQ29kZTxWaXNpb25CYXNlQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFZpc2lvblByZXNjcmlwdGlvbi5sZW5zU3BlY2lmaWNhdGlvbi5wcmlzbS5iYXNlXHJcbiAgICovXHJcbiAgX2Jhc2U/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG59XHJcblxyXG4vKipcclxuICogQWxsb3dzIGZvciBhZGp1c3RtZW50IG9uIHR3byBheGlzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFZpc2lvblByZXNjcmlwdGlvbkxlbnNTcGVjaWZpY2F0aW9uUHJpc20gZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdWaXNpb25QcmVzY3JpcHRpb25MZW5zU3BlY2lmaWNhdGlvblByaXNtJztcclxuICAvKipcclxuICAgKiBBbW91bnQgb2YgcHJpc20gdG8gY29tcGVuc2F0ZSBmb3IgZXllIGFsaWdubWVudCBpbiBmcmFjdGlvbmFsIHVuaXRzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhbW91bnQ6IGZoaXIuRmhpckRlY2ltYWx8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgcmVsYXRpdmUgYmFzZSwgb3IgcmVmZXJlbmNlIGxlbnMgZWRnZSwgZm9yIHRoZSBwcmlzbS5cclxuICAgKi9cclxuICBwdWJsaWMgYmFzZTogZmhpci5GaGlyQ29kZTxWaXNpb25CYXNlQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgVmlzaW9uUHJlc2NyaXB0aW9uTGVuc1NwZWNpZmljYXRpb25QcmlzbSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFZpc2lvblByZXNjcmlwdGlvbkxlbnNTcGVjaWZpY2F0aW9uUHJpc21BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnYW1vdW50J10pIHsgdGhpcy5hbW91bnQgPSBuZXcgZmhpci5GaGlyRGVjaW1hbCh7dmFsdWU6IHNvdXJjZS5hbW91bnR9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYW1vdW50ID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2Ftb3VudCddKSB7XHJcbiAgICAgIGlmICh0aGlzLmFtb3VudCkgeyB0aGlzLmFtb3VudC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9hbW91bnQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5hbW91bnQgPSBuZXcgZmhpci5GaGlyRGVjaW1hbChzb3VyY2UuX2Ftb3VudCBhcyBQYXJ0aWFsPGZoaXIuRmhpckRlY2ltYWxBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2Jhc2UnXSkgeyB0aGlzLmJhc2UgPSBuZXcgZmhpci5GaGlyQ29kZTxWaXNpb25CYXNlQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLmJhc2V9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYmFzZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19iYXNlJ10pIHtcclxuICAgICAgaWYgKHRoaXMuYmFzZSkgeyB0aGlzLmJhc2UuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fYmFzZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmJhc2UgPSBuZXcgZmhpci5GaGlyQ29kZTxWaXNpb25CYXNlQ29kZVR5cGU+KHNvdXJjZS5fYmFzZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIGJhc2UgKFZpc2lvblByZXNjcmlwdGlvbi5sZW5zU3BlY2lmaWNhdGlvbi5wcmlzbS5iYXNlKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IGJhc2VSZXF1aXJlZENvZGVzKCkge1xyXG4gICAgcmV0dXJuIFZpc2lvbkJhc2VDb2RlcztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb246c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24pO1xyXG4gICAgaWYgKGV4cHJlc3Npb24gPT09ICcnKSB7IGV4cHJlc3Npb24gPSAnVmlzaW9uUHJlc2NyaXB0aW9uLmxlbnNTcGVjaWZpY2F0aW9uLnByaXNtJyB9XHJcbiAgICBpZiAoIXRoaXNbJ2Ftb3VudCddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBhbW91bnQgZmhpcjogVmlzaW9uUHJlc2NyaXB0aW9uLmxlbnNTcGVjaWZpY2F0aW9uLnByaXNtLmFtb3VudDpkZWNpbWFsJywgZXhwcmVzc2lvbjogW2V4cHJlc3Npb25dIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJhbW91bnRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5hbW91bnQuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLmFtb3VudCcpKTsgfVxyXG4gICAgaWYgKCF0aGlzWydiYXNlJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IGJhc2UgZmhpcjogVmlzaW9uUHJlc2NyaXB0aW9uLmxlbnNTcGVjaWZpY2F0aW9uLnByaXNtLmJhc2U6Y29kZScsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzWydiYXNlJ10gJiYgKCFPYmplY3QudmFsdWVzKFZpc2lvbkJhc2VDb2RlcykuaW5jbHVkZXModGhpcy5iYXNlLnZhbHVlIGFzIGFueSkpKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdjb2RlLWludmFsaWQnLCBkaWFnbm9zdGljczogJ2Jhc2UgKFZpc2lvblByZXNjcmlwdGlvbi5sZW5zU3BlY2lmaWNhdGlvbi5wcmlzbS5iYXNlKSBvZiB0eXBlIGNvZGUgaXMgbWlzc2luZyBjb2RlIGZvciBSZXF1aXJlZCBiaW5kaW5nIHRvOiBWaXNpb25CYXNlJywgZXhwcmVzc2lvbjogW2V4cHJlc3Npb25dIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJiYXNlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuYmFzZS5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuYmFzZScpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFZpc2lvblByZXNjcmlwdGlvbkxlbnNTcGVjaWZpY2F0aW9uIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFZpc2lvblByZXNjcmlwdGlvbkxlbnNTcGVjaWZpY2F0aW9uQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgdHlwZSBvZiB2aXNpb24gY29ycmVjdGlvbiBwcm9kdWN0IHdoaWNoIGlzIHJlcXVpcmVkIGZvciB0aGUgcGF0aWVudC5cclxuICAgKi9cclxuICBwcm9kdWN0OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBNYXkgYWxzbyBhcHBlYXIgYXMgT0QgKG9jdWx1cyBkZXh0ZXIpIGZvciB0aGUgcmlnaHQgZXllIGFuZCBPUyAob2N1bHVzIHNpbml0ZXIpIGZvciB0aGUgbGVmdCBleWUuXHJcbiAgICovXHJcbiAgZXllOiBmaGlyLkZoaXJDb2RlPFZpc2lvbkV5ZUNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBWaXNpb25QcmVzY3JpcHRpb24ubGVuc1NwZWNpZmljYXRpb24uZXllXHJcbiAgICovXHJcbiAgX2V5ZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHZhbHVlIGlzIG5lZ2F0aXZlIGZvciBuZWFyLXNpZ2h0ZWQgYW5kIHBvc2l0aXZlIGZvciBmYXIgc2lnaHRlZC5cclxuICAgKiBPZnRlbiBpbnN1cmFuY2Ugd2lsbCBub3QgY292ZXIgYSBsZW5zIHdpdGggcG93ZXIgYmV0d2VlbiArNzUgYW5kIC03NS5cclxuICAgKi9cclxuICBzcGhlcmU/OiBmaGlyLkZoaXJEZWNpbWFsfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFZpc2lvblByZXNjcmlwdGlvbi5sZW5zU3BlY2lmaWNhdGlvbi5zcGhlcmVcclxuICAgKi9cclxuICBfc3BoZXJlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBQb3dlciBhZGp1c3RtZW50IGZvciBhc3RpZ21hdGlzbSBtZWFzdXJlZCBpbiBkaW9wdHJlcyAoMC4yNSB1bml0cykuXHJcbiAgICovXHJcbiAgY3lsaW5kZXI/OiBmaGlyLkZoaXJEZWNpbWFsfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFZpc2lvblByZXNjcmlwdGlvbi5sZW5zU3BlY2lmaWNhdGlvbi5jeWxpbmRlclxyXG4gICAqL1xyXG4gIF9jeWxpbmRlcj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGxpbWl0cyBhcmUgKzE4MCBhbmQgLTE4MCBkZWdyZWVzLlxyXG4gICAqL1xyXG4gIGF4aXM/OiBmaGlyLkZoaXJJbnRlZ2VyfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFZpc2lvblByZXNjcmlwdGlvbi5sZW5zU3BlY2lmaWNhdGlvbi5heGlzXHJcbiAgICovXHJcbiAgX2F4aXM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEFsbG93cyBmb3IgYWRqdXN0bWVudCBvbiB0d28gYXhpcy5cclxuICAgKi9cclxuICBwcmlzbT86IGZoaXIuVmlzaW9uUHJlc2NyaXB0aW9uTGVuc1NwZWNpZmljYXRpb25QcmlzbUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUG93ZXIgYWRqdXN0bWVudCBmb3IgbXVsdGlmb2NhbCBsZW5zZXMgbWVhc3VyZWQgaW4gZGlvcHRyZXMgKDAuMjUgdW5pdHMpLlxyXG4gICAqL1xyXG4gIGFkZD86IGZoaXIuRmhpckRlY2ltYWx8bnVtYmVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogVmlzaW9uUHJlc2NyaXB0aW9uLmxlbnNTcGVjaWZpY2F0aW9uLmFkZFxyXG4gICAqL1xyXG4gIF9hZGQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIENvbnRhY3QgbGVucyBwb3dlciBtZWFzdXJlZCBpbiBkaW9wdHJlcyAoMC4yNSB1bml0cykuXHJcbiAgICovXHJcbiAgcG93ZXI/OiBmaGlyLkZoaXJEZWNpbWFsfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFZpc2lvblByZXNjcmlwdGlvbi5sZW5zU3BlY2lmaWNhdGlvbi5wb3dlclxyXG4gICAqL1xyXG4gIF9wb3dlcj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQmFjayBjdXJ2YXR1cmUgbWVhc3VyZWQgaW4gbWlsbGltZXRyZXMuXHJcbiAgICovXHJcbiAgYmFja0N1cnZlPzogZmhpci5GaGlyRGVjaW1hbHxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBWaXNpb25QcmVzY3JpcHRpb24ubGVuc1NwZWNpZmljYXRpb24uYmFja0N1cnZlXHJcbiAgICovXHJcbiAgX2JhY2tDdXJ2ZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQ29udGFjdCBsZW5zIGRpYW1ldGVyIG1lYXN1cmVkIGluIG1pbGxpbWV0cmVzLlxyXG4gICAqL1xyXG4gIGRpYW1ldGVyPzogZmhpci5GaGlyRGVjaW1hbHxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBWaXNpb25QcmVzY3JpcHRpb24ubGVuc1NwZWNpZmljYXRpb24uZGlhbWV0ZXJcclxuICAgKi9cclxuICBfZGlhbWV0ZXI/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZWNvbW1lbmRlZCBtYXhpbXVtIHdlYXIgcGVyaW9kIGZvciB0aGUgbGVucy5cclxuICAgKi9cclxuICBkdXJhdGlvbj86IGZoaXIuUXVhbnRpdHlBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTcGVjaWFsIGNvbG9yIG9yIHBhdHRlcm4uXHJcbiAgICovXHJcbiAgY29sb3I/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogVmlzaW9uUHJlc2NyaXB0aW9uLmxlbnNTcGVjaWZpY2F0aW9uLmNvbG9yXHJcbiAgICovXHJcbiAgX2NvbG9yPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBCcmFuZCByZWNvbW1lbmRhdGlvbnMgb3IgcmVzdHJpY3Rpb25zLlxyXG4gICAqL1xyXG4gIGJyYW5kPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFZpc2lvblByZXNjcmlwdGlvbi5sZW5zU3BlY2lmaWNhdGlvbi5icmFuZFxyXG4gICAqL1xyXG4gIF9icmFuZD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogTm90ZXMgZm9yIHNwZWNpYWwgcmVxdWlyZW1lbnRzIHN1Y2ggYXMgY29hdGluZ3MgYW5kIGxlbnMgbWF0ZXJpYWxzLlxyXG4gICAqL1xyXG4gIG5vdGU/OiBmaGlyLkFubm90YXRpb25BcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQ29udGFpbiB0aGUgZGV0YWlscyBvZiAgdGhlIGluZGl2aWR1YWwgbGVucyBzcGVjaWZpY2F0aW9ucyBhbmQgc2VydmVzIGFzIHRoZSBhdXRob3JpemF0aW9uIGZvciB0aGUgZnVsbGZpbGxtZW50IGJ5IGNlcnRpZmllZCBwcm9mZXNzaW9uYWxzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFZpc2lvblByZXNjcmlwdGlvbkxlbnNTcGVjaWZpY2F0aW9uIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnVmlzaW9uUHJlc2NyaXB0aW9uTGVuc1NwZWNpZmljYXRpb24nO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgdGhlIHR5cGUgb2YgdmlzaW9uIGNvcnJlY3Rpb24gcHJvZHVjdCB3aGljaCBpcyByZXF1aXJlZCBmb3IgdGhlIHBhdGllbnQuXHJcbiAgICovXHJcbiAgcHVibGljIHByb2R1Y3Q6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogTWF5IGFsc28gYXBwZWFyIGFzIE9EIChvY3VsdXMgZGV4dGVyKSBmb3IgdGhlIHJpZ2h0IGV5ZSBhbmQgT1MgKG9jdWx1cyBzaW5pdGVyKSBmb3IgdGhlIGxlZnQgZXllLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBleWU6IGZoaXIuRmhpckNvZGU8VmlzaW9uRXllQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIHZhbHVlIGlzIG5lZ2F0aXZlIGZvciBuZWFyLXNpZ2h0ZWQgYW5kIHBvc2l0aXZlIGZvciBmYXIgc2lnaHRlZC5cclxuICAgKiBPZnRlbiBpbnN1cmFuY2Ugd2lsbCBub3QgY292ZXIgYSBsZW5zIHdpdGggcG93ZXIgYmV0d2VlbiArNzUgYW5kIC03NS5cclxuICAgKi9cclxuICBwdWJsaWMgc3BoZXJlPzogZmhpci5GaGlyRGVjaW1hbHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUG93ZXIgYWRqdXN0bWVudCBmb3IgYXN0aWdtYXRpc20gbWVhc3VyZWQgaW4gZGlvcHRyZXMgKDAuMjUgdW5pdHMpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjeWxpbmRlcj86IGZoaXIuRmhpckRlY2ltYWx8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsaW1pdHMgYXJlICsxODAgYW5kIC0xODAgZGVncmVlcy5cclxuICAgKi9cclxuICBwdWJsaWMgYXhpcz86IGZoaXIuRmhpckludGVnZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFsbG93cyBmb3IgYWRqdXN0bWVudCBvbiB0d28gYXhpcy5cclxuICAgKi9cclxuICBwdWJsaWMgcHJpc206IGZoaXIuVmlzaW9uUHJlc2NyaXB0aW9uTGVuc1NwZWNpZmljYXRpb25QcmlzbVtdO1xyXG4gIC8qKlxyXG4gICAqIFBvd2VyIGFkanVzdG1lbnQgZm9yIG11bHRpZm9jYWwgbGVuc2VzIG1lYXN1cmVkIGluIGRpb3B0cmVzICgwLjI1IHVuaXRzKS5cclxuICAgKi9cclxuICBwdWJsaWMgYWRkPzogZmhpci5GaGlyRGVjaW1hbHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ29udGFjdCBsZW5zIHBvd2VyIG1lYXN1cmVkIGluIGRpb3B0cmVzICgwLjI1IHVuaXRzKS5cclxuICAgKi9cclxuICBwdWJsaWMgcG93ZXI/OiBmaGlyLkZoaXJEZWNpbWFsfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBCYWNrIGN1cnZhdHVyZSBtZWFzdXJlZCBpbiBtaWxsaW1ldHJlcy5cclxuICAgKi9cclxuICBwdWJsaWMgYmFja0N1cnZlPzogZmhpci5GaGlyRGVjaW1hbHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ29udGFjdCBsZW5zIGRpYW1ldGVyIG1lYXN1cmVkIGluIG1pbGxpbWV0cmVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkaWFtZXRlcj86IGZoaXIuRmhpckRlY2ltYWx8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZWNvbW1lbmRlZCBtYXhpbXVtIHdlYXIgcGVyaW9kIGZvciB0aGUgbGVucy5cclxuICAgKi9cclxuICBwdWJsaWMgZHVyYXRpb24/OiBmaGlyLlF1YW50aXR5fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTcGVjaWFsIGNvbG9yIG9yIHBhdHRlcm4uXHJcbiAgICovXHJcbiAgcHVibGljIGNvbG9yPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBCcmFuZCByZWNvbW1lbmRhdGlvbnMgb3IgcmVzdHJpY3Rpb25zLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBicmFuZD86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTm90ZXMgZm9yIHNwZWNpYWwgcmVxdWlyZW1lbnRzIHN1Y2ggYXMgY29hdGluZ3MgYW5kIGxlbnMgbWF0ZXJpYWxzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBub3RlOiBmaGlyLkFubm90YXRpb25bXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBWaXNpb25QcmVzY3JpcHRpb25MZW5zU3BlY2lmaWNhdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFZpc2lvblByZXNjcmlwdGlvbkxlbnNTcGVjaWZpY2F0aW9uQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3Byb2R1Y3QnXSkgeyB0aGlzLnByb2R1Y3QgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnByb2R1Y3QpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wcm9kdWN0ID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZXllJ10pIHsgdGhpcy5leWUgPSBuZXcgZmhpci5GaGlyQ29kZTxWaXNpb25FeWVDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2UuZXllfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmV5ZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19leWUnXSkge1xyXG4gICAgICBpZiAodGhpcy5leWUpIHsgdGhpcy5leWUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZXllISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZXllID0gbmV3IGZoaXIuRmhpckNvZGU8VmlzaW9uRXllQ29kZVR5cGU+KHNvdXJjZS5fZXllIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydzcGhlcmUnXSkgeyB0aGlzLnNwaGVyZSA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHt2YWx1ZTogc291cmNlLnNwaGVyZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfc3BoZXJlJ10pIHtcclxuICAgICAgaWYgKHRoaXMuc3BoZXJlKSB7IHRoaXMuc3BoZXJlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3NwaGVyZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnNwaGVyZSA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHNvdXJjZS5fc3BoZXJlIGFzIFBhcnRpYWw8Zmhpci5GaGlyRGVjaW1hbEFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnY3lsaW5kZXInXSkgeyB0aGlzLmN5bGluZGVyID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoe3ZhbHVlOiBzb3VyY2UuY3lsaW5kZXJ9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2N5bGluZGVyJ10pIHtcclxuICAgICAgaWYgKHRoaXMuY3lsaW5kZXIpIHsgdGhpcy5jeWxpbmRlci5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9jeWxpbmRlciEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmN5bGluZGVyID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoc291cmNlLl9jeWxpbmRlciBhcyBQYXJ0aWFsPGZoaXIuRmhpckRlY2ltYWxBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2F4aXMnXSkgeyB0aGlzLmF4aXMgPSBuZXcgZmhpci5GaGlySW50ZWdlcih7dmFsdWU6IHNvdXJjZS5heGlzfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19heGlzJ10pIHtcclxuICAgICAgaWYgKHRoaXMuYXhpcykgeyB0aGlzLmF4aXMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fYXhpcyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmF4aXMgPSBuZXcgZmhpci5GaGlySW50ZWdlcihzb3VyY2UuX2F4aXMgYXMgUGFydGlhbDxmaGlyLkZoaXJJbnRlZ2VyQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydwcmlzbSddKSB7IHRoaXMucHJpc20gPSBzb3VyY2UucHJpc20ubWFwKCh4KSA9PiBuZXcgZmhpci5WaXNpb25QcmVzY3JpcHRpb25MZW5zU3BlY2lmaWNhdGlvblByaXNtKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucHJpc20gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYWRkJ10pIHsgdGhpcy5hZGQgPSBuZXcgZmhpci5GaGlyRGVjaW1hbCh7dmFsdWU6IHNvdXJjZS5hZGR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2FkZCddKSB7XHJcbiAgICAgIGlmICh0aGlzLmFkZCkgeyB0aGlzLmFkZC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9hZGQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5hZGQgPSBuZXcgZmhpci5GaGlyRGVjaW1hbChzb3VyY2UuX2FkZCBhcyBQYXJ0aWFsPGZoaXIuRmhpckRlY2ltYWxBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3Bvd2VyJ10pIHsgdGhpcy5wb3dlciA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHt2YWx1ZTogc291cmNlLnBvd2VyfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19wb3dlciddKSB7XHJcbiAgICAgIGlmICh0aGlzLnBvd2VyKSB7IHRoaXMucG93ZXIuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fcG93ZXIhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5wb3dlciA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHNvdXJjZS5fcG93ZXIgYXMgUGFydGlhbDxmaGlyLkZoaXJEZWNpbWFsQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydiYWNrQ3VydmUnXSkgeyB0aGlzLmJhY2tDdXJ2ZSA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHt2YWx1ZTogc291cmNlLmJhY2tDdXJ2ZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfYmFja0N1cnZlJ10pIHtcclxuICAgICAgaWYgKHRoaXMuYmFja0N1cnZlKSB7IHRoaXMuYmFja0N1cnZlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2JhY2tDdXJ2ZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmJhY2tDdXJ2ZSA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHNvdXJjZS5fYmFja0N1cnZlIGFzIFBhcnRpYWw8Zmhpci5GaGlyRGVjaW1hbEFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGlhbWV0ZXInXSkgeyB0aGlzLmRpYW1ldGVyID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoe3ZhbHVlOiBzb3VyY2UuZGlhbWV0ZXJ9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2RpYW1ldGVyJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZGlhbWV0ZXIpIHsgdGhpcy5kaWFtZXRlci5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9kaWFtZXRlciEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRpYW1ldGVyID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoc291cmNlLl9kaWFtZXRlciBhcyBQYXJ0aWFsPGZoaXIuRmhpckRlY2ltYWxBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2R1cmF0aW9uJ10pIHsgdGhpcy5kdXJhdGlvbiA9IG5ldyBmaGlyLlF1YW50aXR5KHNvdXJjZS5kdXJhdGlvbik7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvbG9yJ10pIHsgdGhpcy5jb2xvciA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuY29sb3J9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2NvbG9yJ10pIHtcclxuICAgICAgaWYgKHRoaXMuY29sb3IpIHsgdGhpcy5jb2xvci5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9jb2xvciEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmNvbG9yID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2NvbG9yIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydicmFuZCddKSB7IHRoaXMuYnJhbmQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmJyYW5kfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19icmFuZCddKSB7XHJcbiAgICAgIGlmICh0aGlzLmJyYW5kKSB7IHRoaXMuYnJhbmQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fYnJhbmQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5icmFuZCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9icmFuZCBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnbm90ZSddKSB7IHRoaXMubm90ZSA9IHNvdXJjZS5ub3RlLm1hcCgoeCkgPT4gbmV3IGZoaXIuQW5ub3RhdGlvbih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm5vdGUgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIGV5ZSAoVmlzaW9uUHJlc2NyaXB0aW9uLmxlbnNTcGVjaWZpY2F0aW9uLmV5ZSlcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCBleWVSZXF1aXJlZENvZGVzKCkge1xyXG4gICAgcmV0dXJuIFZpc2lvbkV5ZUNvZGVzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdWaXNpb25QcmVzY3JpcHRpb24ubGVuc1NwZWNpZmljYXRpb24nIH1cclxuICAgIGlmICghdGhpc1sncHJvZHVjdCddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBwcm9kdWN0IGZoaXI6IFZpc2lvblByZXNjcmlwdGlvbi5sZW5zU3BlY2lmaWNhdGlvbi5wcm9kdWN0OkNvZGVhYmxlQ29uY2VwdCcsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wicHJvZHVjdFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnByb2R1Y3QuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLnByb2R1Y3QnKSk7IH1cclxuICAgIGlmICghdGhpc1snZXllJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IGV5ZSBmaGlyOiBWaXNpb25QcmVzY3JpcHRpb24ubGVuc1NwZWNpZmljYXRpb24uZXllOmNvZGUnLCBleHByZXNzaW9uOiBbZXhwcmVzc2lvbl0gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1snZXllJ10gJiYgKCFPYmplY3QudmFsdWVzKFZpc2lvbkV5ZUNvZGVzKS5pbmNsdWRlcyh0aGlzLmV5ZS52YWx1ZSBhcyBhbnkpKSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnY29kZS1pbnZhbGlkJywgZGlhZ25vc3RpY3M6ICdleWUgKFZpc2lvblByZXNjcmlwdGlvbi5sZW5zU3BlY2lmaWNhdGlvbi5leWUpIG9mIHR5cGUgY29kZSBpcyBtaXNzaW5nIGNvZGUgZm9yIFJlcXVpcmVkIGJpbmRpbmcgdG86IFZpc2lvbkV5ZScsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiZXllXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZXllLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5leWUnKSk7IH1cclxuICAgIGlmICh0aGlzW1wic3BoZXJlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc3BoZXJlLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5zcGhlcmUnKSk7IH1cclxuICAgIGlmICh0aGlzW1wiY3lsaW5kZXJcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5jeWxpbmRlci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuY3lsaW5kZXInKSk7IH1cclxuICAgIGlmICh0aGlzW1wiYXhpc1wiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmF4aXMuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLmF4aXMnKSk7IH1cclxuICAgIGlmICh0aGlzW1wicHJpc21cIl0pIHsgdGhpcy5wcmlzbS5mb3JFYWNoKCh4LGkpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uK2AucHJpc21bJHtpfV1gKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wiYWRkXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuYWRkLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5hZGQnKSk7IH1cclxuICAgIGlmICh0aGlzW1wicG93ZXJcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5wb3dlci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycucG93ZXInKSk7IH1cclxuICAgIGlmICh0aGlzW1wiYmFja0N1cnZlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuYmFja0N1cnZlLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5iYWNrQ3VydmUnKSk7IH1cclxuICAgIGlmICh0aGlzW1wiZGlhbWV0ZXJcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5kaWFtZXRlci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuZGlhbWV0ZXInKSk7IH1cclxuICAgIGlmICh0aGlzW1wiZHVyYXRpb25cIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5kdXJhdGlvbi5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuZHVyYXRpb24nKSk7IH1cclxuICAgIGlmICh0aGlzW1wiY29sb3JcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5jb2xvci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuY29sb3InKSk7IH1cclxuICAgIGlmICh0aGlzW1wiYnJhbmRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5icmFuZC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuYnJhbmQnKSk7IH1cclxuICAgIGlmICh0aGlzW1wibm90ZVwiXSkgeyB0aGlzLm5vdGUuZm9yRWFjaCgoeCxpKSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbitgLm5vdGVbJHtpfV1gKSk7IH0pIH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBWaXNpb25QcmVzY3JpcHRpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgVmlzaW9uUHJlc2NyaXB0aW9uQXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiVmlzaW9uUHJlc2NyaXB0aW9uXCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgdW5pcXVlIGlkZW50aWZpZXIgYXNzaWduZWQgdG8gdGhpcyB2aXNpb24gcHJlc2NyaXB0aW9uLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgYmVjYXVzZSB0aGUgc3RhdHVzIGNvbnRhaW5zIGNvZGVzIHRoYXQgbWFyayB0aGUgcmVzb3VyY2UgYXMgbm90IGN1cnJlbnRseSB2YWxpZC5cclxuICAgKi9cclxuICBzdGF0dXM6IGZoaXIuRmhpckNvZGU8Rm1TdGF0dXNDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogVmlzaW9uUHJlc2NyaXB0aW9uLnN0YXR1c1xyXG4gICAqL1xyXG4gIF9zdGF0dXM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRlIHRoaXMgcmVzb3VyY2Ugd2FzIGNyZWF0ZWQuXHJcbiAgICovXHJcbiAgY3JlYXRlZDogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogVmlzaW9uUHJlc2NyaXB0aW9uLmNyZWF0ZWRcclxuICAgKi9cclxuICBfY3JlYXRlZD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQSByZXNvdXJjZSByZWZlcmVuY2UgdG8gdGhlIHBlcnNvbiB0byB3aG9tIHRoZSB2aXNpb24gcHJlc2NyaXB0aW9uIGFwcGxpZXMuXHJcbiAgICovXHJcbiAgcGF0aWVudDogZmhpci5SZWZlcmVuY2VBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogQSByZWZlcmVuY2UgdG8gYSByZXNvdXJjZSB0aGF0IGlkZW50aWZpZXMgdGhlIHBhcnRpY3VsYXIgb2NjdXJyZW5jZSBvZiBjb250YWN0IGJldHdlZW4gcGF0aWVudCBhbmQgaGVhbHRoIGNhcmUgcHJvdmlkZXIgZHVyaW5nIHdoaWNoIHRoZSBwcmVzY3JpcHRpb24gd2FzIGlzc3VlZC5cclxuICAgKi9cclxuICBlbmNvdW50ZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEp1cmlzZGljdGlvbnMgZGV0ZXJtaW5lIHRoZSB2YWxpZCBsaWZldGltZSBvZiBhIHByZXNjcmlwdGlvbi4gVHlwaWNhbGx5IHZpc2lvbiBwcmVzY3JpcHRpb25zIGFyZSB2YWxpZCBmb3IgdHdvIHllYXJzIGZyb20gdGhlIGRhdGUgd3JpdHRlbi5cclxuICAgKi9cclxuICBkYXRlV3JpdHRlbjogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogVmlzaW9uUHJlc2NyaXB0aW9uLmRhdGVXcml0dGVuXHJcbiAgICovXHJcbiAgX2RhdGVXcml0dGVuPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgaGVhbHRoY2FyZSBwcm9mZXNzaW9uYWwgcmVzcG9uc2libGUgZm9yIGF1dGhvcml6aW5nIHRoZSBwcmVzY3JpcHRpb24uXHJcbiAgICovXHJcbiAgcHJlc2NyaWJlcjogZmhpci5SZWZlcmVuY2VBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogQ29udGFpbiB0aGUgZGV0YWlscyBvZiAgdGhlIGluZGl2aWR1YWwgbGVucyBzcGVjaWZpY2F0aW9ucyBhbmQgc2VydmVzIGFzIHRoZSBhdXRob3JpemF0aW9uIGZvciB0aGUgZnVsbGZpbGxtZW50IGJ5IGNlcnRpZmllZCBwcm9mZXNzaW9uYWxzLlxyXG4gICAqL1xyXG4gIGxlbnNTcGVjaWZpY2F0aW9uOiBmaGlyLlZpc2lvblByZXNjcmlwdGlvbkxlbnNTcGVjaWZpY2F0aW9uQXJnc1tdfG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBbiBhdXRob3JpemF0aW9uIGZvciB0aGUgcHJvdmlzaW9uIG9mIGdsYXNzZXMgYW5kL29yIGNvbnRhY3QgbGVuc2VzIHRvIGEgcGF0aWVudC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBWaXNpb25QcmVzY3JpcHRpb24gZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1Zpc2lvblByZXNjcmlwdGlvbic7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJWaXNpb25QcmVzY3JpcHRpb25cIjtcclxuICAvKipcclxuICAgKiBBIHVuaXF1ZSBpZGVudGlmaWVyIGFzc2lnbmVkIHRvIHRoaXMgdmlzaW9uIHByZXNjcmlwdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcjogZmhpci5JZGVudGlmaWVyW107XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IGlzIGxhYmVsZWQgYXMgYSBtb2RpZmllciBiZWNhdXNlIHRoZSBzdGF0dXMgY29udGFpbnMgY29kZXMgdGhhdCBtYXJrIHRoZSByZXNvdXJjZSBhcyBub3QgY3VycmVudGx5IHZhbGlkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0dXM6IGZoaXIuRmhpckNvZGU8Rm1TdGF0dXNDb2RlVHlwZT58bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSB0aGlzIHJlc291cmNlIHdhcyBjcmVhdGVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjcmVhdGVkOiBmaGlyLkZoaXJEYXRlVGltZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEEgcmVzb3VyY2UgcmVmZXJlbmNlIHRvIHRoZSBwZXJzb24gdG8gd2hvbSB0aGUgdmlzaW9uIHByZXNjcmlwdGlvbiBhcHBsaWVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXRpZW50OiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEEgcmVmZXJlbmNlIHRvIGEgcmVzb3VyY2UgdGhhdCBpZGVudGlmaWVzIHRoZSBwYXJ0aWN1bGFyIG9jY3VycmVuY2Ugb2YgY29udGFjdCBiZXR3ZWVuIHBhdGllbnQgYW5kIGhlYWx0aCBjYXJlIHByb3ZpZGVyIGR1cmluZyB3aGljaCB0aGUgcHJlc2NyaXB0aW9uIHdhcyBpc3N1ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGVuY291bnRlcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBKdXJpc2RpY3Rpb25zIGRldGVybWluZSB0aGUgdmFsaWQgbGlmZXRpbWUgb2YgYSBwcmVzY3JpcHRpb24uIFR5cGljYWxseSB2aXNpb24gcHJlc2NyaXB0aW9ucyBhcmUgdmFsaWQgZm9yIHR3byB5ZWFycyBmcm9tIHRoZSBkYXRlIHdyaXR0ZW4uXHJcbiAgICovXHJcbiAgcHVibGljIGRhdGVXcml0dGVuOiBmaGlyLkZoaXJEYXRlVGltZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBoZWFsdGhjYXJlIHByb2Zlc3Npb25hbCByZXNwb25zaWJsZSBmb3IgYXV0aG9yaXppbmcgdGhlIHByZXNjcmlwdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgcHJlc2NyaWJlcjogZmhpci5SZWZlcmVuY2V8bnVsbDtcclxuICAvKipcclxuICAgKiBDb250YWluIHRoZSBkZXRhaWxzIG9mICB0aGUgaW5kaXZpZHVhbCBsZW5zIHNwZWNpZmljYXRpb25zIGFuZCBzZXJ2ZXMgYXMgdGhlIGF1dGhvcml6YXRpb24gZm9yIHRoZSBmdWxsZmlsbG1lbnQgYnkgY2VydGlmaWVkIHByb2Zlc3Npb25hbHMuXHJcbiAgICovXHJcbiAgcHVibGljIGxlbnNTcGVjaWZpY2F0aW9uOiBmaGlyLlZpc2lvblByZXNjcmlwdGlvbkxlbnNTcGVjaWZpY2F0aW9uW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgVmlzaW9uUHJlc2NyaXB0aW9uIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8VmlzaW9uUHJlc2NyaXB0aW9uQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ1Zpc2lvblByZXNjcmlwdGlvbic7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gc291cmNlLmlkZW50aWZpZXIubWFwKCh4KSA9PiBuZXcgZmhpci5JZGVudGlmaWVyKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaWRlbnRpZmllciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydzdGF0dXMnXSkgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPEZtU3RhdHVzQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnN0YXR1c30pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfc3RhdHVzJ10pIHtcclxuICAgICAgaWYgKHRoaXMuc3RhdHVzKSB7IHRoaXMuc3RhdHVzLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3N0YXR1cyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPEZtU3RhdHVzQ29kZVR5cGU+KHNvdXJjZS5fc3RhdHVzIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydjcmVhdGVkJ10pIHsgdGhpcy5jcmVhdGVkID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLmNyZWF0ZWR9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY3JlYXRlZCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19jcmVhdGVkJ10pIHtcclxuICAgICAgaWYgKHRoaXMuY3JlYXRlZCkgeyB0aGlzLmNyZWF0ZWQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fY3JlYXRlZCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmNyZWF0ZWQgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoc291cmNlLl9jcmVhdGVkIGFzIFBhcnRpYWw8Zmhpci5GaGlyRGF0ZVRpbWVBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3BhdGllbnQnXSkgeyB0aGlzLnBhdGllbnQgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnBhdGllbnQpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wYXRpZW50ID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZW5jb3VudGVyJ10pIHsgdGhpcy5lbmNvdW50ZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmVuY291bnRlcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ2RhdGVXcml0dGVuJ10pIHsgdGhpcy5kYXRlV3JpdHRlbiA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5kYXRlV3JpdHRlbn0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5kYXRlV3JpdHRlbiA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19kYXRlV3JpdHRlbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLmRhdGVXcml0dGVuKSB7IHRoaXMuZGF0ZVdyaXR0ZW4uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZGF0ZVdyaXR0ZW4hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5kYXRlV3JpdHRlbiA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZShzb3VyY2UuX2RhdGVXcml0dGVuIGFzIFBhcnRpYWw8Zmhpci5GaGlyRGF0ZVRpbWVBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3ByZXNjcmliZXInXSkgeyB0aGlzLnByZXNjcmliZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnByZXNjcmliZXIpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wcmVzY3JpYmVyID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbGVuc1NwZWNpZmljYXRpb24nXSkgeyB0aGlzLmxlbnNTcGVjaWZpY2F0aW9uID0gc291cmNlLmxlbnNTcGVjaWZpY2F0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuVmlzaW9uUHJlc2NyaXB0aW9uTGVuc1NwZWNpZmljYXRpb24oeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5sZW5zU3BlY2lmaWNhdGlvbiA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlcXVpcmVkLWJvdW5kIFZhbHVlIFNldCBmb3Igc3RhdHVzIChWaXNpb25QcmVzY3JpcHRpb24uc3RhdHVzKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IHN0YXR1c1JlcXVpcmVkQ29kZXMoKSB7XHJcbiAgICByZXR1cm4gRm1TdGF0dXNDb2RlcztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb246c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24pO1xyXG4gICAgaWYgKGV4cHJlc3Npb24gPT09ICcnKSB7IGV4cHJlc3Npb24gPSAnVmlzaW9uUHJlc2NyaXB0aW9uJyB9XHJcbiAgICBpZiAoIXRoaXNbJ3Jlc291cmNlVHlwZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSByZXNvdXJjZVR5cGUgZmhpcjogVmlzaW9uUHJlc2NyaXB0aW9uLnJlc291cmNlVHlwZTpcIlZpc2lvblByZXNjcmlwdGlvblwiJywgZXhwcmVzc2lvbjogW2V4cHJlc3Npb25dIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJpZGVudGlmaWVyXCJdKSB7IHRoaXMuaWRlbnRpZmllci5mb3JFYWNoKCh4LGkpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uK2AuaWRlbnRpZmllclske2l9XWApKTsgfSkgfVxyXG4gICAgaWYgKCF0aGlzWydzdGF0dXMnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgc3RhdHVzIGZoaXI6IFZpc2lvblByZXNjcmlwdGlvbi5zdGF0dXM6Y29kZScsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzWydzdGF0dXMnXSAmJiAoIU9iamVjdC52YWx1ZXMoRm1TdGF0dXNDb2RlcykuaW5jbHVkZXModGhpcy5zdGF0dXMudmFsdWUgYXMgYW55KSkpIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ2NvZGUtaW52YWxpZCcsIGRpYWdub3N0aWNzOiAnc3RhdHVzIChWaXNpb25QcmVzY3JpcHRpb24uc3RhdHVzKSBvZiB0eXBlIGNvZGUgaXMgbWlzc2luZyBjb2RlIGZvciBSZXF1aXJlZCBiaW5kaW5nIHRvOiBGbVN0YXR1cycsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wic3RhdHVzXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc3RhdHVzLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5zdGF0dXMnKSk7IH1cclxuICAgIGlmICghdGhpc1snY3JlYXRlZCddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBjcmVhdGVkIGZoaXI6IFZpc2lvblByZXNjcmlwdGlvbi5jcmVhdGVkOmRhdGVUaW1lJywgZXhwcmVzc2lvbjogW2V4cHJlc3Npb25dIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJjcmVhdGVkXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY3JlYXRlZC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuY3JlYXRlZCcpKTsgfVxyXG4gICAgaWYgKCF0aGlzWydwYXRpZW50J10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHBhdGllbnQgZmhpcjogVmlzaW9uUHJlc2NyaXB0aW9uLnBhdGllbnQ6UmVmZXJlbmNlJywgZXhwcmVzc2lvbjogW2V4cHJlc3Npb25dIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJwYXRpZW50XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucGF0aWVudC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycucGF0aWVudCcpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJlbmNvdW50ZXJcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5lbmNvdW50ZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLmVuY291bnRlcicpKTsgfVxyXG4gICAgaWYgKCF0aGlzWydkYXRlV3JpdHRlbiddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBkYXRlV3JpdHRlbiBmaGlyOiBWaXNpb25QcmVzY3JpcHRpb24uZGF0ZVdyaXR0ZW46ZGF0ZVRpbWUnLCBleHByZXNzaW9uOiBbZXhwcmVzc2lvbl0gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImRhdGVXcml0dGVuXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZGF0ZVdyaXR0ZW4uZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLmRhdGVXcml0dGVuJykpOyB9XHJcbiAgICBpZiAoIXRoaXNbJ3ByZXNjcmliZXInXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgcHJlc2NyaWJlciBmaGlyOiBWaXNpb25QcmVzY3JpcHRpb24ucHJlc2NyaWJlcjpSZWZlcmVuY2UnLCBleHByZXNzaW9uOiBbZXhwcmVzc2lvbl0gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInByZXNjcmliZXJcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5wcmVzY3JpYmVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5wcmVzY3JpYmVyJykpOyB9XHJcbiAgICBpZiAoIXRoaXNbJ2xlbnNTcGVjaWZpY2F0aW9uJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IGxlbnNTcGVjaWZpY2F0aW9uIGZoaXI6IFZpc2lvblByZXNjcmlwdGlvbi5sZW5zU3BlY2lmaWNhdGlvbjpsZW5zU3BlY2lmaWNhdGlvbicsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkodGhpcy5sZW5zU3BlY2lmaWNhdGlvbikpIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3N0cnVjdHVyZScsIGRpYWdub3N0aWNzOiAnRm91bmQgc2NhbGFyIGluIGFycmF5IHByb3BlcnR5IGxlbnNTcGVjaWZpY2F0aW9uIGZoaXI6IFZpc2lvblByZXNjcmlwdGlvbi5sZW5zU3BlY2lmaWNhdGlvbjpsZW5zU3BlY2lmaWNhdGlvbicsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5sZW5zU3BlY2lmaWNhdGlvbi5sZW5ndGggPT09IDApIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IGxlbnNTcGVjaWZpY2F0aW9uIGZoaXI6IFZpc2lvblByZXNjcmlwdGlvbi5sZW5zU3BlY2lmaWNhdGlvbjpsZW5zU3BlY2lmaWNhdGlvbicsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wibGVuc1NwZWNpZmljYXRpb25cIl0pIHsgdGhpcy5sZW5zU3BlY2lmaWNhdGlvbi5mb3JFYWNoKCh4LGkpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uK2AubGVuc1NwZWNpZmljYXRpb25bJHtpfV1gKSk7IH0pIH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbiJdfQ==