// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: VisionPrescription
import * as fhir from '../fhir.js';
// @ts-ignore
import { VisionBaseCodesCodes } from '../fhirValueSets/VisionBaseCodesCodes.js';
// @ts-ignore
import { VisionEyeCodesCodes } from '../fhirValueSets/VisionEyeCodesCodes.js';
// @ts-ignore
import { FmStatusCodes } from '../fhirValueSets/FmStatusCodes.js';
/**
 * Allows for adjustment on two axis.
 */
export class VisionPrescriptionLensSpecificationPrism extends fhir.BackboneElement {
    /**
     * Default constructor for VisionPrescriptionLensSpecificationPrism - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['amount']) {
            this.amount = new fhir.FhirDecimal({ value: source.amount });
        }
        else {
            this.amount = null;
        }
        if (source['base']) {
            this.base = new fhir.FhirCode({ value: source.base });
        }
        else {
            this.base = null;
        }
    }
    /**
     * Required-bound Value Set for base (VisionPrescription.lensSpecification.prism.base)
     */
    static get baseRequiredCodes() {
        return VisionBaseCodesCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['amount']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property amount:fhir.FhirDecimal fhir: VisionPrescription.lensSpecification.prism.amount:decimal' });
        }
        if (this["amount"]) {
            issues.push(...this.amount.doModelValidation());
        }
        if (!this['base']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property base:fhir.FhirCode<VisionBaseCodesCodeType> fhir: VisionPrescription.lensSpecification.prism.base:code' });
        }
        if (this['base'] && (!Object.values(VisionBaseCodesCodes).includes(this.base))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property base:fhir.FhirCode<VisionBaseCodesCodeType> fhir: VisionPrescription.lensSpecification.prism.base:code Required binding to: VisionBaseCodes' });
        }
        if (this["base"]) {
            issues.push(...this.base.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
VisionPrescriptionLensSpecificationPrism._fts_dataType = 'VisionPrescriptionLensSpecificationPrism';
/**
 * Contain the details of  the individual lens specifications and serves as the authorization for the fullfillment by certified professionals.
 */
export class VisionPrescriptionLensSpecification extends fhir.BackboneElement {
    /**
     * Default constructor for VisionPrescriptionLensSpecification - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['product']) {
            this.product = new fhir.CodeableConcept(source.product);
        }
        else {
            this.product = null;
        }
        if (source['eye']) {
            this.eye = new fhir.FhirCode({ value: source.eye });
        }
        else {
            this.eye = null;
        }
        if (source['sphere']) {
            this.sphere = new fhir.FhirDecimal({ value: source.sphere });
        }
        if (source['cylinder']) {
            this.cylinder = new fhir.FhirDecimal({ value: source.cylinder });
        }
        if (source['axis']) {
            this.axis = new fhir.FhirInteger({ value: source.axis });
        }
        if (source['prism']) {
            this.prism = source.prism.map((x) => new fhir.VisionPrescriptionLensSpecificationPrism(x));
        }
        else {
            this.prism = [];
        }
        if (source['add']) {
            this.add = new fhir.FhirDecimal({ value: source.add });
        }
        if (source['power']) {
            this.power = new fhir.FhirDecimal({ value: source.power });
        }
        if (source['backCurve']) {
            this.backCurve = new fhir.FhirDecimal({ value: source.backCurve });
        }
        if (source['diameter']) {
            this.diameter = new fhir.FhirDecimal({ value: source.diameter });
        }
        if (source['duration']) {
            this.duration = new fhir.Quantity(source.duration);
        }
        if (source['color']) {
            this.color = new fhir.FhirString({ value: source.color });
        }
        if (source['brand']) {
            this.brand = new fhir.FhirString({ value: source.brand });
        }
        if (source['note']) {
            this.note = source.note.map((x) => new fhir.Annotation(x));
        }
        else {
            this.note = [];
        }
    }
    /**
     * Required-bound Value Set for eye (VisionPrescription.lensSpecification.eye)
     */
    static get eyeRequiredCodes() {
        return VisionEyeCodesCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['product']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property product:fhir.CodeableConcept fhir: VisionPrescription.lensSpecification.product:CodeableConcept' });
        }
        if (this["product"]) {
            issues.push(...this.product.doModelValidation());
        }
        if (!this['eye']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property eye:fhir.FhirCode<VisionEyeCodesCodeType> fhir: VisionPrescription.lensSpecification.eye:code' });
        }
        if (this['eye'] && (!Object.values(VisionEyeCodesCodes).includes(this.eye))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property eye:fhir.FhirCode<VisionEyeCodesCodeType> fhir: VisionPrescription.lensSpecification.eye:code Required binding to: VisionEyeCodes' });
        }
        if (this["eye"]) {
            issues.push(...this.eye.doModelValidation());
        }
        if (this["sphere"]) {
            issues.push(...this.sphere.doModelValidation());
        }
        if (this["cylinder"]) {
            issues.push(...this.cylinder.doModelValidation());
        }
        if (this["axis"]) {
            issues.push(...this.axis.doModelValidation());
        }
        if (this["prism"]) {
            this.prism.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["add"]) {
            issues.push(...this.add.doModelValidation());
        }
        if (this["power"]) {
            issues.push(...this.power.doModelValidation());
        }
        if (this["backCurve"]) {
            issues.push(...this.backCurve.doModelValidation());
        }
        if (this["diameter"]) {
            issues.push(...this.diameter.doModelValidation());
        }
        if (this["duration"]) {
            issues.push(...this.duration.doModelValidation());
        }
        if (this["color"]) {
            issues.push(...this.color.doModelValidation());
        }
        if (this["brand"]) {
            issues.push(...this.brand.doModelValidation());
        }
        if (this["note"]) {
            this.note.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
VisionPrescriptionLensSpecification._fts_dataType = 'VisionPrescriptionLensSpecification';
/**
 * An authorization for the provision of glasses and/or contact lenses to a patient.
 */
export class VisionPrescription extends fhir.DomainResource {
    /**
     * Default constructor for VisionPrescription - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'VisionPrescription';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['created']) {
            this.created = new fhir.FhirDateTime({ value: source.created });
        }
        else {
            this.created = null;
        }
        if (source['patient']) {
            this.patient = new fhir.Reference(source.patient);
        }
        else {
            this.patient = null;
        }
        if (source['encounter']) {
            this.encounter = new fhir.Reference(source.encounter);
        }
        if (source['dateWritten']) {
            this.dateWritten = new fhir.FhirDateTime({ value: source.dateWritten });
        }
        else {
            this.dateWritten = null;
        }
        if (source['prescriber']) {
            this.prescriber = new fhir.Reference(source.prescriber);
        }
        else {
            this.prescriber = null;
        }
        if (source['lensSpecification']) {
            this.lensSpecification = source.lensSpecification.map((x) => new fhir.VisionPrescriptionLensSpecification(x));
        }
        else {
            this.lensSpecification = [];
        }
    }
    /**
     * Required-bound Value Set for status (VisionPrescription.status)
     */
    static get statusRequiredCodes() {
        return FmStatusCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType:"VisionPrescription" fhir: VisionPrescription.resourceType:"VisionPrescription"' });
        }
        if (this["identifier"]) {
            this.identifier.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (!this['status']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property status:fhir.FhirCode<FmStatusCodeType> fhir: VisionPrescription.status:code' });
        }
        if (this['status'] && (!Object.values(FmStatusCodes).includes(this.status))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property status:fhir.FhirCode<FmStatusCodeType> fhir: VisionPrescription.status:code Required binding to: FmStatus' });
        }
        if (this["status"]) {
            issues.push(...this.status.doModelValidation());
        }
        if (!this['created']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property created:fhir.FhirDateTime fhir: VisionPrescription.created:dateTime' });
        }
        if (this["created"]) {
            issues.push(...this.created.doModelValidation());
        }
        if (!this['patient']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property patient:fhir.Reference fhir: VisionPrescription.patient:Reference' });
        }
        if (this["patient"]) {
            issues.push(...this.patient.doModelValidation());
        }
        if (this["encounter"]) {
            issues.push(...this.encounter.doModelValidation());
        }
        if (!this['dateWritten']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property dateWritten:fhir.FhirDateTime fhir: VisionPrescription.dateWritten:dateTime' });
        }
        if (this["dateWritten"]) {
            issues.push(...this.dateWritten.doModelValidation());
        }
        if (!this['prescriber']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property prescriber:fhir.Reference fhir: VisionPrescription.prescriber:Reference' });
        }
        if (this["prescriber"]) {
            issues.push(...this.prescriber.doModelValidation());
        }
        if (!this['lensSpecification']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property lensSpecification:fhir.VisionPrescriptionLensSpecification[] fhir: VisionPrescription.lensSpecification:lensSpecification' });
        }
        else if (!Array.isArray(this.lensSpecification)) {
            issues.push({ severity: 'error', code: 'structure', diagnostics: 'Found scalar in array property lensSpecification:fhir.VisionPrescriptionLensSpecification[] fhir: VisionPrescription.lensSpecification:lensSpecification' });
        }
        else if (this.lensSpecification.length === 0) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property lensSpecification:fhir.VisionPrescriptionLensSpecification[] fhir: VisionPrescription.lensSpecification:lensSpecification' });
        }
        if (this["lensSpecification"]) {
            this.lensSpecification.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
VisionPrescription._fts_dataType = 'VisionPrescription';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVmlzaW9uUHJlc2NyaXB0aW9uLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9WaXNpb25QcmVzY3JpcHRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsb0NBQW9DO0FBRXBDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBSW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsb0JBQW9CLEVBQTRCLE1BQU0sMENBQTBDLENBQUM7QUFPMUcsYUFBYTtBQUNiLE9BQU8sRUFBRSxtQkFBbUIsRUFBMkIsTUFBTSx5Q0FBeUMsQ0FBQztBQUd2RyxhQUFhO0FBQ2IsT0FBTyxFQUFFLGFBQWEsRUFBcUIsTUFBTSxtQ0FBbUMsQ0FBQztBQWVyRjs7R0FFRztBQUNILE1BQU0sT0FBTyx3Q0FBeUMsU0FBUSxJQUFJLENBQUMsZUFBZTtJQWFoRjs7T0FFRztJQUNILFlBQVksU0FBK0QsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDckgsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxNQUFNLEVBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDaEY7WUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztTQUFFO1FBQzVCLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQTBCLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxJQUFJLEVBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDaEc7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztTQUFFO0lBQzVCLENB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SUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsSUFBSSxFQUFDLENBQUMsQ0FBQztTQUFFO1FBQy9FLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsd0NBQXdDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQy9HO1lBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUM7U0FBRTtRQUN6QixJQUFJLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxHQUFHLEVBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDNUUsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsS0FBSyxFQUFDLENBQUMsQ0FBQztTQUFFO1FBQ2xGLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLFNBQVMsRUFBQyxDQUFDLENBQUM7U0FBRTtRQUM5RixJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxRQUFRLEVBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDM0YsSUFBSSxNQUFNLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7U0FBRTtRQUMvRSxJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxLQUFLLEVBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDakYsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsS0FBSyxFQUFDLENBQUMsQ0FBQztTQUFFO1FBQ2pGLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUM5RTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDO1NBQUU7SUFDMUIsQ0FBQztJQUNEOztPQUVHO0lBQ0ksTUFBTSxLQUFLLGdCQUFnQjtRQUNoQyxPQUFPLG1CQUFtQixDQUFDO0lBQzdCLENBQUM7SUFDRDs7T0FFRztJQUNhLGlCQUFpQjtRQUMvQixJQUFJLE1BQU0sR0FBbUIsS0FBSyxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDdkQsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUNwQixNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSwySEFBMkgsRUFBRSxDQUFDLENBQUM7U0FDaE07UUFDRCxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQzFFLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7WUFDaEIsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQUUseUhBQXlILEVBQUUsQ0FBQyxDQUFDO1NBQzlMO1FBQ0QsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEdBQVUsQ0FBQyxDQUFDLEVBQUU7WUFDbEYsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLGNBQWMsRUFBRSxXQUFXLEVBQUUseUpBQXlKLEVBQUUsQ0FBQyxDQUFDO1NBQ2xPO1FBQ0QsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUNsRSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQ3hFLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFDNUUsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUNwRSxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQUU7UUFDNUYsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUNsRSxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQ3RFLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFDOUUsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUM1RSxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQzVFLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFDdEUsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUN0RSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQUU7UUFDMUYsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQzs7QUF4SEQ7O0dBRUc7QUFDNkIsaURBQWEsR0FBVSxxQ0FBcUMsQ0FBQztBQWlLL0Y7O0dBRUc7QUFDSCxNQUFNLE9BQU8sa0JBQW1CLFNBQVEsSUFBSSxDQUFDLGNBQWM7SUF5Q3pEOztPQUVHO0lBQ0gsWUFBWSxTQUF5QyxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUMvRixLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxZQUFZLEdBQUcsb0JBQW9CLENBQUM7UUFDekMsSUFBSSxNQUFNLENBQUMsWUFBWSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQ2hHO1lBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxFQUFFLENBQUM7U0FBRTtRQUM5QixJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFtQixFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsTUFBTSxFQUFDLENBQUMsQ0FBQztTQUFFO2FBQy9GO1lBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7U0FBRTtRQUM1QixJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxPQUFPLEVBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDcEY7WUFBRSxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztTQUFFO1FBQzdCLElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1NBQUU7YUFDeEU7WUFBRSxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztTQUFFO1FBQzdCLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1NBQUU7UUFDbkYsSUFBSSxNQUFNLENBQUMsYUFBYSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsV0FBVyxFQUFDLENBQUMsQ0FBQztTQUFFO2FBQ2hHO1lBQUUsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7U0FBRTtRQUNqQyxJQUFJLE1BQU0sQ0FBQyxZQUFZLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQztTQUFFO2FBQ2pGO1lBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUM7U0FBRTtRQUNoQyxJQUFJLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLGlCQUFpQixHQUFHLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLG1DQUFtQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUM5STtZQUFFLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxFQUFFLENBQUM7U0FBRTtJQUN2QyxDQUFDO0lBQ0Q7O09BRUc7SUFDSSxNQUFNLEtBQUssbUJBQW1CO1FBQ25DLE9BQU8sYUFBYSxDQUFDO0lBQ3ZCLENBQUM7SUFDRDs7T0FFRztJQUNhLGlCQUFpQjtRQUMvQixJQUFJLE1BQU0sR0FBbUIsS0FBSyxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDdkQsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsRUFBRTtZQUN6QixNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSx3SEFBd0gsRUFBRSxDQUFDLENBQUM7U0FDN0w7UUFDRCxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQUU7UUFDdEcsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUNuQixNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSx1R0FBdUcsRUFBRSxDQUFDLENBQUM7U0FDNUs7UUFDRCxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQWEsQ0FBQyxDQUFDLEVBQUU7WUFDbEYsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLGNBQWMsRUFBRSxXQUFXLEVBQUUsaUlBQWlJLEVBQUUsQ0FBQyxDQUFDO1NBQzFNO1FBQ0QsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUN4RSxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQ3BCLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUFFLCtGQUErRixFQUFFLENBQUMsQ0FBQztTQUNwSztRQUNELElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFDMUUsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUNwQixNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSw2RkFBNkYsRUFBRSxDQUFDLENBQUM7U0FDbEs7UUFDRCxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQzFFLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFDOUUsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRTtZQUN4QixNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSx1R0FBdUcsRUFBRSxDQUFDLENBQUM7U0FDNUs7UUFDRCxJQUFJLElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQ2xGLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUU7WUFDdkIsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQUUsbUdBQW1HLEVBQUUsQ0FBQyxDQUFDO1NBQ3hLO1FBQ0QsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUNoRixJQUFJLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLEVBQUU7WUFDOUIsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQUUscUpBQXFKLEVBQUUsQ0FBQyxDQUFDO1NBQzFOO2FBQU0sSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEVBQUU7WUFDakQsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxXQUFXLEVBQUUsMEpBQTBKLEVBQUUsQ0FBQyxDQUFDO1NBQ2hPO2FBQU0sSUFBSSxJQUFJLENBQUMsaUJBQWlCLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtZQUM5QyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxxSkFBcUosRUFBRSxDQUFDLENBQUM7U0FDMU47UUFDRCxJQUFJLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtTQUFFO1FBQ3BILE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBOUdEOztHQUVHO0FBQzZCLGdDQUFhLEdBQVUsb0JBQW9CLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjQuY29yZSB2ZXJzaW9uOiA0LjAuMVxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IFZpc2lvblByZXNjcmlwdGlvblxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgVmlzaW9uQmFzZUNvZGVzQ29kaW5ncywgVmlzaW9uQmFzZUNvZGVzQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVmlzaW9uQmFzZUNvZGVzQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgVmlzaW9uQmFzZUNvZGVzQ29kZXMsICBWaXNpb25CYXNlQ29kZXNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVmlzaW9uQmFzZUNvZGVzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFZpc2lvblByb2R1Y3RDb2RpbmdzLCBWaXNpb25Qcm9kdWN0Q29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVmlzaW9uUHJvZHVjdENvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFZpc2lvblByb2R1Y3RDb2RlcywgIFZpc2lvblByb2R1Y3RDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVmlzaW9uUHJvZHVjdENvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBWaXNpb25FeWVDb2Rlc0NvZGluZ3MsIFZpc2lvbkV5ZUNvZGVzQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVmlzaW9uRXllQ29kZXNDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBWaXNpb25FeWVDb2Rlc0NvZGVzLCAgVmlzaW9uRXllQ29kZXNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVmlzaW9uRXllQ29kZXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRm1TdGF0dXNDb2RpbmdzLCBGbVN0YXR1c0NvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0ZtU3RhdHVzQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRm1TdGF0dXNDb2RlcywgIEZtU3RhdHVzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0ZtU3RhdHVzQ29kZXMuanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgVmlzaW9uUHJlc2NyaXB0aW9uTGVuc1NwZWNpZmljYXRpb25QcmlzbSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBWaXNpb25QcmVzY3JpcHRpb25MZW5zU3BlY2lmaWNhdGlvblByaXNtQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogQW1vdW50IG9mIHByaXNtIHRvIGNvbXBlbnNhdGUgZm9yIGV5ZSBhbGlnbm1lbnQgaW4gZnJhY3Rpb25hbCB1bml0cy5cclxuICAgKi9cclxuICBhbW91bnQ6IGZoaXIuRmhpckRlY2ltYWx8bnVtYmVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcmVsYXRpdmUgYmFzZSwgb3IgcmVmZXJlbmNlIGxlbnMgZWRnZSwgZm9yIHRoZSBwcmlzbS5cclxuICAgKi9cclxuICBiYXNlOiBmaGlyLkZoaXJDb2RlPFZpc2lvbkJhc2VDb2Rlc0NvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQWxsb3dzIGZvciBhZGp1c3RtZW50IG9uIHR3byBheGlzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFZpc2lvblByZXNjcmlwdGlvbkxlbnNTcGVjaWZpY2F0aW9uUHJpc20gZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdWaXNpb25QcmVzY3JpcHRpb25MZW5zU3BlY2lmaWNhdGlvblByaXNtJztcclxuICAvKipcclxuICAgKiBBbW91bnQgb2YgcHJpc20gdG8gY29tcGVuc2F0ZSBmb3IgZXllIGFsaWdubWVudCBpbiBmcmFjdGlvbmFsIHVuaXRzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhbW91bnQ6IGZoaXIuRmhpckRlY2ltYWx8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgcmVsYXRpdmUgYmFzZSwgb3IgcmVmZXJlbmNlIGxlbnMgZWRnZSwgZm9yIHRoZSBwcmlzbS5cclxuICAgKi9cclxuICBwdWJsaWMgYmFzZTogZmhpci5GaGlyQ29kZTxWaXNpb25CYXNlQ29kZXNDb2RlVHlwZT58bnVsbDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBWaXNpb25QcmVzY3JpcHRpb25MZW5zU3BlY2lmaWNhdGlvblByaXNtIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8VmlzaW9uUHJlc2NyaXB0aW9uTGVuc1NwZWNpZmljYXRpb25QcmlzbUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydhbW91bnQnXSkgeyB0aGlzLmFtb3VudCA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHt2YWx1ZTogc291cmNlLmFtb3VudH0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5hbW91bnQgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydiYXNlJ10pIHsgdGhpcy5iYXNlID0gbmV3IGZoaXIuRmhpckNvZGU8VmlzaW9uQmFzZUNvZGVzQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLmJhc2V9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYmFzZSA9IG51bGw7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZWQtYm91bmQgVmFsdWUgU2V0IGZvciBiYXNlIChWaXNpb25QcmVzY3JpcHRpb24ubGVuc1NwZWNpZmljYXRpb24ucHJpc20uYmFzZSlcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCBiYXNlUmVxdWlyZWRDb2RlcygpIHtcclxuICAgIHJldHVybiBWaXNpb25CYXNlQ29kZXNDb2RlcztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICghdGhpc1snYW1vdW50J10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IGFtb3VudDpmaGlyLkZoaXJEZWNpbWFsIGZoaXI6IFZpc2lvblByZXNjcmlwdGlvbi5sZW5zU3BlY2lmaWNhdGlvbi5wcmlzbS5hbW91bnQ6ZGVjaW1hbCcgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImFtb3VudFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmFtb3VudC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKCF0aGlzWydiYXNlJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IGJhc2U6Zmhpci5GaGlyQ29kZTxWaXNpb25CYXNlQ29kZXNDb2RlVHlwZT4gZmhpcjogVmlzaW9uUHJlc2NyaXB0aW9uLmxlbnNTcGVjaWZpY2F0aW9uLnByaXNtLmJhc2U6Y29kZScgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1snYmFzZSddICYmICghT2JqZWN0LnZhbHVlcyhWaXNpb25CYXNlQ29kZXNDb2RlcykuaW5jbHVkZXModGhpcy5iYXNlIGFzIGFueSkpKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdjb2RlLWludmFsaWQnLCBkaWFnbm9zdGljczogJ0ludmFsaWQgY29kZSBwcm9wZXJ0eSBiYXNlOmZoaXIuRmhpckNvZGU8VmlzaW9uQmFzZUNvZGVzQ29kZVR5cGU+IGZoaXI6IFZpc2lvblByZXNjcmlwdGlvbi5sZW5zU3BlY2lmaWNhdGlvbi5wcmlzbS5iYXNlOmNvZGUgUmVxdWlyZWQgYmluZGluZyB0bzogVmlzaW9uQmFzZUNvZGVzJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiYmFzZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmJhc2UuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBWaXNpb25QcmVzY3JpcHRpb25MZW5zU3BlY2lmaWNhdGlvbiB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBWaXNpb25QcmVzY3JpcHRpb25MZW5zU3BlY2lmaWNhdGlvbkFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgdGhlIHR5cGUgb2YgdmlzaW9uIGNvcnJlY3Rpb24gcHJvZHVjdCB3aGljaCBpcyByZXF1aXJlZCBmb3IgdGhlIHBhdGllbnQuXHJcbiAgICovXHJcbiAgcHJvZHVjdDogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogTWF5IGFsc28gYXBwZWFyIGFzIE9EIChvY3VsdXMgZGV4dGVyKSBmb3IgdGhlIHJpZ2h0IGV5ZSBhbmQgT1MgKG9jdWx1cyBzaW5pdGVyKSBmb3IgdGhlIGxlZnQgZXllLlxyXG4gICAqL1xyXG4gIGV5ZTogZmhpci5GaGlyQ29kZTxWaXNpb25FeWVDb2Rlc0NvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB2YWx1ZSBpcyBuZWdhdGl2ZSBmb3IgbmVhci1zaWdodGVkIGFuZCBwb3NpdGl2ZSBmb3IgZmFyIHNpZ2h0ZWQuXHJcbiAgICogT2Z0ZW4gaW5zdXJhbmNlIHdpbGwgbm90IGNvdmVyIGEgbGVucyB3aXRoIHBvd2VyIGJldHdlZW4gKzc1IGFuZCAtNzUuXHJcbiAgICovXHJcbiAgc3BoZXJlPzogZmhpci5GaGlyRGVjaW1hbHxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFBvd2VyIGFkanVzdG1lbnQgZm9yIGFzdGlnbWF0aXNtIG1lYXN1cmVkIGluIGRpb3B0cmVzICgwLjI1IHVuaXRzKS5cclxuICAgKi9cclxuICBjeWxpbmRlcj86IGZoaXIuRmhpckRlY2ltYWx8bnVtYmVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbGltaXRzIGFyZSArMTgwIGFuZCAtMTgwIGRlZ3JlZXMuXHJcbiAgICovXHJcbiAgYXhpcz86IGZoaXIuRmhpckludGVnZXJ8bnVtYmVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBbGxvd3MgZm9yIGFkanVzdG1lbnQgb24gdHdvIGF4aXMuXHJcbiAgICovXHJcbiAgcHJpc20/OiBmaGlyLlZpc2lvblByZXNjcmlwdGlvbkxlbnNTcGVjaWZpY2F0aW9uUHJpc21BcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFBvd2VyIGFkanVzdG1lbnQgZm9yIG11bHRpZm9jYWwgbGVuc2VzIG1lYXN1cmVkIGluIGRpb3B0cmVzICgwLjI1IHVuaXRzKS5cclxuICAgKi9cclxuICBhZGQ/OiBmaGlyLkZoaXJEZWNpbWFsfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ29udGFjdCBsZW5zIHBvd2VyIG1lYXN1cmVkIGluIGRpb3B0cmVzICgwLjI1IHVuaXRzKS5cclxuICAgKi9cclxuICBwb3dlcj86IGZoaXIuRmhpckRlY2ltYWx8bnVtYmVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBCYWNrIGN1cnZhdHVyZSBtZWFzdXJlZCBpbiBtaWxsaW1ldHJlcy5cclxuICAgKi9cclxuICBiYWNrQ3VydmU/OiBmaGlyLkZoaXJEZWNpbWFsfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ29udGFjdCBsZW5zIGRpYW1ldGVyIG1lYXN1cmVkIGluIG1pbGxpbWV0cmVzLlxyXG4gICAqL1xyXG4gIGRpYW1ldGVyPzogZmhpci5GaGlyRGVjaW1hbHxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZWNvbW1lbmRlZCBtYXhpbXVtIHdlYXIgcGVyaW9kIGZvciB0aGUgbGVucy5cclxuICAgKi9cclxuICBkdXJhdGlvbj86IGZoaXIuUXVhbnRpdHlBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTcGVjaWFsIGNvbG9yIG9yIHBhdHRlcm4uXHJcbiAgICovXHJcbiAgY29sb3I/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBCcmFuZCByZWNvbW1lbmRhdGlvbnMgb3IgcmVzdHJpY3Rpb25zLlxyXG4gICAqL1xyXG4gIGJyYW5kPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTm90ZXMgZm9yIHNwZWNpYWwgcmVxdWlyZW1lbnRzIHN1Y2ggYXMgY29hdGluZ3MgYW5kIGxlbnMgbWF0ZXJpYWxzLlxyXG4gICAqL1xyXG4gIG5vdGU/OiBmaGlyLkFubm90YXRpb25BcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQ29udGFpbiB0aGUgZGV0YWlscyBvZiAgdGhlIGluZGl2aWR1YWwgbGVucyBzcGVjaWZpY2F0aW9ucyBhbmQgc2VydmVzIGFzIHRoZSBhdXRob3JpemF0aW9uIGZvciB0aGUgZnVsbGZpbGxtZW50IGJ5IGNlcnRpZmllZCBwcm9mZXNzaW9uYWxzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFZpc2lvblByZXNjcmlwdGlvbkxlbnNTcGVjaWZpY2F0aW9uIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnVmlzaW9uUHJlc2NyaXB0aW9uTGVuc1NwZWNpZmljYXRpb24nO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgdGhlIHR5cGUgb2YgdmlzaW9uIGNvcnJlY3Rpb24gcHJvZHVjdCB3aGljaCBpcyByZXF1aXJlZCBmb3IgdGhlIHBhdGllbnQuXHJcbiAgICovXHJcbiAgcHVibGljIHByb2R1Y3Q6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogTWF5IGFsc28gYXBwZWFyIGFzIE9EIChvY3VsdXMgZGV4dGVyKSBmb3IgdGhlIHJpZ2h0IGV5ZSBhbmQgT1MgKG9jdWx1cyBzaW5pdGVyKSBmb3IgdGhlIGxlZnQgZXllLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBleWU6IGZoaXIuRmhpckNvZGU8VmlzaW9uRXllQ29kZXNDb2RlVHlwZT58bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgdmFsdWUgaXMgbmVnYXRpdmUgZm9yIG5lYXItc2lnaHRlZCBhbmQgcG9zaXRpdmUgZm9yIGZhciBzaWdodGVkLlxyXG4gICAqIE9mdGVuIGluc3VyYW5jZSB3aWxsIG5vdCBjb3ZlciBhIGxlbnMgd2l0aCBwb3dlciBiZXR3ZWVuICs3NSBhbmQgLTc1LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzcGhlcmU/OiBmaGlyLkZoaXJEZWNpbWFsfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBQb3dlciBhZGp1c3RtZW50IGZvciBhc3RpZ21hdGlzbSBtZWFzdXJlZCBpbiBkaW9wdHJlcyAoMC4yNSB1bml0cykuXHJcbiAgICovXHJcbiAgcHVibGljIGN5bGluZGVyPzogZmhpci5GaGlyRGVjaW1hbHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGxpbWl0cyBhcmUgKzE4MCBhbmQgLTE4MCBkZWdyZWVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBheGlzPzogZmhpci5GaGlySW50ZWdlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWxsb3dzIGZvciBhZGp1c3RtZW50IG9uIHR3byBheGlzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcmlzbTogZmhpci5WaXNpb25QcmVzY3JpcHRpb25MZW5zU3BlY2lmaWNhdGlvblByaXNtW107XHJcbiAgLyoqXHJcbiAgICogUG93ZXIgYWRqdXN0bWVudCBmb3IgbXVsdGlmb2NhbCBsZW5zZXMgbWVhc3VyZWQgaW4gZGlvcHRyZXMgKDAuMjUgdW5pdHMpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhZGQ/OiBmaGlyLkZoaXJEZWNpbWFsfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDb250YWN0IGxlbnMgcG93ZXIgbWVhc3VyZWQgaW4gZGlvcHRyZXMgKDAuMjUgdW5pdHMpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwb3dlcj86IGZoaXIuRmhpckRlY2ltYWx8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEJhY2sgY3VydmF0dXJlIG1lYXN1cmVkIGluIG1pbGxpbWV0cmVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBiYWNrQ3VydmU/OiBmaGlyLkZoaXJEZWNpbWFsfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDb250YWN0IGxlbnMgZGlhbWV0ZXIgbWVhc3VyZWQgaW4gbWlsbGltZXRyZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGRpYW1ldGVyPzogZmhpci5GaGlyRGVjaW1hbHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlY29tbWVuZGVkIG1heGltdW0gd2VhciBwZXJpb2QgZm9yIHRoZSBsZW5zLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkdXJhdGlvbj86IGZoaXIuUXVhbnRpdHl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFNwZWNpYWwgY29sb3Igb3IgcGF0dGVybi5cclxuICAgKi9cclxuICBwdWJsaWMgY29sb3I/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEJyYW5kIHJlY29tbWVuZGF0aW9ucyBvciByZXN0cmljdGlvbnMuXHJcbiAgICovXHJcbiAgcHVibGljIGJyYW5kPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBOb3RlcyBmb3Igc3BlY2lhbCByZXF1aXJlbWVudHMgc3VjaCBhcyBjb2F0aW5ncyBhbmQgbGVucyBtYXRlcmlhbHMuXHJcbiAgICovXHJcbiAgcHVibGljIG5vdGU6IGZoaXIuQW5ub3RhdGlvbltdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFZpc2lvblByZXNjcmlwdGlvbkxlbnNTcGVjaWZpY2F0aW9uIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8VmlzaW9uUHJlc2NyaXB0aW9uTGVuc1NwZWNpZmljYXRpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsncHJvZHVjdCddKSB7IHRoaXMucHJvZHVjdCA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UucHJvZHVjdCk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnByb2R1Y3QgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydleWUnXSkgeyB0aGlzLmV5ZSA9IG5ldyBmaGlyLkZoaXJDb2RlPFZpc2lvbkV5ZUNvZGVzQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLmV5ZX0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5leWUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydzcGhlcmUnXSkgeyB0aGlzLnNwaGVyZSA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHt2YWx1ZTogc291cmNlLnNwaGVyZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydjeWxpbmRlciddKSB7IHRoaXMuY3lsaW5kZXIgPSBuZXcgZmhpci5GaGlyRGVjaW1hbCh7dmFsdWU6IHNvdXJjZS5jeWxpbmRlcn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydheGlzJ10pIHsgdGhpcy5heGlzID0gbmV3IGZoaXIuRmhpckludGVnZXIoe3ZhbHVlOiBzb3VyY2UuYXhpc30pOyB9XHJcbiAgICBpZiAoc291cmNlWydwcmlzbSddKSB7IHRoaXMucHJpc20gPSBzb3VyY2UucHJpc20ubWFwKCh4KSA9PiBuZXcgZmhpci5WaXNpb25QcmVzY3JpcHRpb25MZW5zU3BlY2lmaWNhdGlvblByaXNtKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucHJpc20gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYWRkJ10pIHsgdGhpcy5hZGQgPSBuZXcgZmhpci5GaGlyRGVjaW1hbCh7dmFsdWU6IHNvdXJjZS5hZGR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncG93ZXInXSkgeyB0aGlzLnBvd2VyID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoe3ZhbHVlOiBzb3VyY2UucG93ZXJ9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYmFja0N1cnZlJ10pIHsgdGhpcy5iYWNrQ3VydmUgPSBuZXcgZmhpci5GaGlyRGVjaW1hbCh7dmFsdWU6IHNvdXJjZS5iYWNrQ3VydmV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGlhbWV0ZXInXSkgeyB0aGlzLmRpYW1ldGVyID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoe3ZhbHVlOiBzb3VyY2UuZGlhbWV0ZXJ9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZHVyYXRpb24nXSkgeyB0aGlzLmR1cmF0aW9uID0gbmV3IGZoaXIuUXVhbnRpdHkoc291cmNlLmR1cmF0aW9uKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29sb3InXSkgeyB0aGlzLmNvbG9yID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5jb2xvcn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydicmFuZCddKSB7IHRoaXMuYnJhbmQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmJyYW5kfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ25vdGUnXSkgeyB0aGlzLm5vdGUgPSBzb3VyY2Uubm90ZS5tYXAoKHgpID0+IG5ldyBmaGlyLkFubm90YXRpb24oeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5ub3RlID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZWQtYm91bmQgVmFsdWUgU2V0IGZvciBleWUgKFZpc2lvblByZXNjcmlwdGlvbi5sZW5zU3BlY2lmaWNhdGlvbi5leWUpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgZXllUmVxdWlyZWRDb2RlcygpIHtcclxuICAgIHJldHVybiBWaXNpb25FeWVDb2Rlc0NvZGVzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKCF0aGlzWydwcm9kdWN0J10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHByb2R1Y3Q6Zmhpci5Db2RlYWJsZUNvbmNlcHQgZmhpcjogVmlzaW9uUHJlc2NyaXB0aW9uLmxlbnNTcGVjaWZpY2F0aW9uLnByb2R1Y3Q6Q29kZWFibGVDb25jZXB0JyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wicHJvZHVjdFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnByb2R1Y3QuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICghdGhpc1snZXllJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IGV5ZTpmaGlyLkZoaXJDb2RlPFZpc2lvbkV5ZUNvZGVzQ29kZVR5cGU+IGZoaXI6IFZpc2lvblByZXNjcmlwdGlvbi5sZW5zU3BlY2lmaWNhdGlvbi5leWU6Y29kZScgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1snZXllJ10gJiYgKCFPYmplY3QudmFsdWVzKFZpc2lvbkV5ZUNvZGVzQ29kZXMpLmluY2x1ZGVzKHRoaXMuZXllIGFzIGFueSkpKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdjb2RlLWludmFsaWQnLCBkaWFnbm9zdGljczogJ0ludmFsaWQgY29kZSBwcm9wZXJ0eSBleWU6Zmhpci5GaGlyQ29kZTxWaXNpb25FeWVDb2Rlc0NvZGVUeXBlPiBmaGlyOiBWaXNpb25QcmVzY3JpcHRpb24ubGVuc1NwZWNpZmljYXRpb24uZXllOmNvZGUgUmVxdWlyZWQgYmluZGluZyB0bzogVmlzaW9uRXllQ29kZXMnIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJleWVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5leWUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wic3BoZXJlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc3BoZXJlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImN5bGluZGVyXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY3lsaW5kZXIuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiYXhpc1wiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmF4aXMuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wicHJpc21cIl0pIHsgdGhpcy5wcmlzbS5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wiYWRkXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuYWRkLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInBvd2VyXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucG93ZXIuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiYmFja0N1cnZlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuYmFja0N1cnZlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImRpYW1ldGVyXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZGlhbWV0ZXIuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiZHVyYXRpb25cIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5kdXJhdGlvbi5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJjb2xvclwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmNvbG9yLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImJyYW5kXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuYnJhbmQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wibm90ZVwiXSkgeyB0aGlzLm5vdGUuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgVmlzaW9uUHJlc2NyaXB0aW9uIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFZpc2lvblByZXNjcmlwdGlvbkFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIlZpc2lvblByZXNjcmlwdGlvblwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHVuaXF1ZSBpZGVudGlmaWVyIGFzc2lnbmVkIHRvIHRoaXMgdmlzaW9uIHByZXNjcmlwdGlvbi5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIGJlY2F1c2UgdGhlIHN0YXR1cyBjb250YWlucyBjb2RlcyB0aGF0IG1hcmsgdGhlIHJlc291cmNlIGFzIG5vdCBjdXJyZW50bHkgdmFsaWQuXHJcbiAgICovXHJcbiAgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPEZtU3RhdHVzQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgdGhpcyByZXNvdXJjZSB3YXMgY3JlYXRlZC5cclxuICAgKi9cclxuICBjcmVhdGVkOiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgcmVzb3VyY2UgcmVmZXJlbmNlIHRvIHRoZSBwZXJzb24gdG8gd2hvbSB0aGUgdmlzaW9uIHByZXNjcmlwdGlvbiBhcHBsaWVzLlxyXG4gICAqL1xyXG4gIHBhdGllbnQ6IGZoaXIuUmVmZXJlbmNlQXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIEEgcmVmZXJlbmNlIHRvIGEgcmVzb3VyY2UgdGhhdCBpZGVudGlmaWVzIHRoZSBwYXJ0aWN1bGFyIG9jY3VycmVuY2Ugb2YgY29udGFjdCBiZXR3ZWVuIHBhdGllbnQgYW5kIGhlYWx0aCBjYXJlIHByb3ZpZGVyIGR1cmluZyB3aGljaCB0aGUgcHJlc2NyaXB0aW9uIHdhcyBpc3N1ZWQuXHJcbiAgICovXHJcbiAgZW5jb3VudGVyPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBKdXJpc2RpY3Rpb25zIGRldGVybWluZSB0aGUgdmFsaWQgbGlmZXRpbWUgb2YgYSBwcmVzY3JpcHRpb24uIFR5cGljYWxseSB2aXNpb24gcHJlc2NyaXB0aW9ucyBhcmUgdmFsaWQgZm9yIHR3byB5ZWFycyBmcm9tIHRoZSBkYXRlIHdyaXR0ZW4uXHJcbiAgICovXHJcbiAgZGF0ZVdyaXR0ZW46IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGhlYWx0aGNhcmUgcHJvZmVzc2lvbmFsIHJlc3BvbnNpYmxlIGZvciBhdXRob3JpemluZyB0aGUgcHJlc2NyaXB0aW9uLlxyXG4gICAqL1xyXG4gIHByZXNjcmliZXI6IGZoaXIuUmVmZXJlbmNlQXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIENvbnRhaW4gdGhlIGRldGFpbHMgb2YgIHRoZSBpbmRpdmlkdWFsIGxlbnMgc3BlY2lmaWNhdGlvbnMgYW5kIHNlcnZlcyBhcyB0aGUgYXV0aG9yaXphdGlvbiBmb3IgdGhlIGZ1bGxmaWxsbWVudCBieSBjZXJ0aWZpZWQgcHJvZmVzc2lvbmFscy5cclxuICAgKi9cclxuICBsZW5zU3BlY2lmaWNhdGlvbjogZmhpci5WaXNpb25QcmVzY3JpcHRpb25MZW5zU3BlY2lmaWNhdGlvbkFyZ3NbXXxudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogQW4gYXV0aG9yaXphdGlvbiBmb3IgdGhlIHByb3Zpc2lvbiBvZiBnbGFzc2VzIGFuZC9vciBjb250YWN0IGxlbnNlcyB0byBhIHBhdGllbnQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVmlzaW9uUHJlc2NyaXB0aW9uIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdWaXNpb25QcmVzY3JpcHRpb24nO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNvdXJjZVR5cGU6IFwiVmlzaW9uUHJlc2NyaXB0aW9uXCI7XHJcbiAgLyoqXHJcbiAgICogQSB1bmlxdWUgaWRlbnRpZmllciBhc3NpZ25lZCB0byB0aGlzIHZpc2lvbiBwcmVzY3JpcHRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI6IGZoaXIuSWRlbnRpZmllcltdO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgYmVjYXVzZSB0aGUgc3RhdHVzIGNvbnRhaW5zIGNvZGVzIHRoYXQgbWFyayB0aGUgcmVzb3VyY2UgYXMgbm90IGN1cnJlbnRseSB2YWxpZC5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPEZtU3RhdHVzQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgdGhpcyByZXNvdXJjZSB3YXMgY3JlYXRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgY3JlYXRlZDogZmhpci5GaGlyRGF0ZVRpbWV8bnVsbDtcclxuICAvKipcclxuICAgKiBBIHJlc291cmNlIHJlZmVyZW5jZSB0byB0aGUgcGVyc29uIHRvIHdob20gdGhlIHZpc2lvbiBwcmVzY3JpcHRpb24gYXBwbGllcy5cclxuICAgKi9cclxuICBwdWJsaWMgcGF0aWVudDogZmhpci5SZWZlcmVuY2V8bnVsbDtcclxuICAvKipcclxuICAgKiBBIHJlZmVyZW5jZSB0byBhIHJlc291cmNlIHRoYXQgaWRlbnRpZmllcyB0aGUgcGFydGljdWxhciBvY2N1cnJlbmNlIG9mIGNvbnRhY3QgYmV0d2VlbiBwYXRpZW50IGFuZCBoZWFsdGggY2FyZSBwcm92aWRlciBkdXJpbmcgd2hpY2ggdGhlIHByZXNjcmlwdGlvbiB3YXMgaXNzdWVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBlbmNvdW50ZXI/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSnVyaXNkaWN0aW9ucyBkZXRlcm1pbmUgdGhlIHZhbGlkIGxpZmV0aW1lIG9mIGEgcHJlc2NyaXB0aW9uLiBUeXBpY2FsbHkgdmlzaW9uIHByZXNjcmlwdGlvbnMgYXJlIHZhbGlkIGZvciB0d28geWVhcnMgZnJvbSB0aGUgZGF0ZSB3cml0dGVuLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkYXRlV3JpdHRlbjogZmhpci5GaGlyRGF0ZVRpbWV8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgaGVhbHRoY2FyZSBwcm9mZXNzaW9uYWwgcmVzcG9uc2libGUgZm9yIGF1dGhvcml6aW5nIHRoZSBwcmVzY3JpcHRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHByZXNjcmliZXI6IGZoaXIuUmVmZXJlbmNlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogQ29udGFpbiB0aGUgZGV0YWlscyBvZiAgdGhlIGluZGl2aWR1YWwgbGVucyBzcGVjaWZpY2F0aW9ucyBhbmQgc2VydmVzIGFzIHRoZSBhdXRob3JpemF0aW9uIGZvciB0aGUgZnVsbGZpbGxtZW50IGJ5IGNlcnRpZmllZCBwcm9mZXNzaW9uYWxzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBsZW5zU3BlY2lmaWNhdGlvbjogZmhpci5WaXNpb25QcmVzY3JpcHRpb25MZW5zU3BlY2lmaWNhdGlvbltdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFZpc2lvblByZXNjcmlwdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFZpc2lvblByZXNjcmlwdGlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdWaXNpb25QcmVzY3JpcHRpb24nO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IHNvdXJjZS5pZGVudGlmaWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuSWRlbnRpZmllcih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmlkZW50aWZpZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RhdHVzJ10pIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxGbVN0YXR1c0NvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5zdGF0dXN9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY3JlYXRlZCddKSB7IHRoaXMuY3JlYXRlZCA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5jcmVhdGVkfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNyZWF0ZWQgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydwYXRpZW50J10pIHsgdGhpcy5wYXRpZW50ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5wYXRpZW50KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucGF0aWVudCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ2VuY291bnRlciddKSB7IHRoaXMuZW5jb3VudGVyID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5lbmNvdW50ZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWydkYXRlV3JpdHRlbiddKSB7IHRoaXMuZGF0ZVdyaXR0ZW4gPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2UuZGF0ZVdyaXR0ZW59KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZGF0ZVdyaXR0ZW4gPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydwcmVzY3JpYmVyJ10pIHsgdGhpcy5wcmVzY3JpYmVyID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5wcmVzY3JpYmVyKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucHJlc2NyaWJlciA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ2xlbnNTcGVjaWZpY2F0aW9uJ10pIHsgdGhpcy5sZW5zU3BlY2lmaWNhdGlvbiA9IHNvdXJjZS5sZW5zU3BlY2lmaWNhdGlvbi5tYXAoKHgpID0+IG5ldyBmaGlyLlZpc2lvblByZXNjcmlwdGlvbkxlbnNTcGVjaWZpY2F0aW9uKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubGVuc1NwZWNpZmljYXRpb24gPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIHN0YXR1cyAoVmlzaW9uUHJlc2NyaXB0aW9uLnN0YXR1cylcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCBzdGF0dXNSZXF1aXJlZENvZGVzKCkge1xyXG4gICAgcmV0dXJuIEZtU3RhdHVzQ29kZXM7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAoIXRoaXNbJ3Jlc291cmNlVHlwZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSByZXNvdXJjZVR5cGU6XCJWaXNpb25QcmVzY3JpcHRpb25cIiBmaGlyOiBWaXNpb25QcmVzY3JpcHRpb24ucmVzb3VyY2VUeXBlOlwiVmlzaW9uUHJlc2NyaXB0aW9uXCInIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJpZGVudGlmaWVyXCJdKSB7IHRoaXMuaWRlbnRpZmllci5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICghdGhpc1snc3RhdHVzJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHN0YXR1czpmaGlyLkZoaXJDb2RlPEZtU3RhdHVzQ29kZVR5cGU+IGZoaXI6IFZpc2lvblByZXNjcmlwdGlvbi5zdGF0dXM6Y29kZScgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1snc3RhdHVzJ10gJiYgKCFPYmplY3QudmFsdWVzKEZtU3RhdHVzQ29kZXMpLmluY2x1ZGVzKHRoaXMuc3RhdHVzIGFzIGFueSkpKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdjb2RlLWludmFsaWQnLCBkaWFnbm9zdGljczogJ0ludmFsaWQgY29kZSBwcm9wZXJ0eSBzdGF0dXM6Zmhpci5GaGlyQ29kZTxGbVN0YXR1c0NvZGVUeXBlPiBmaGlyOiBWaXNpb25QcmVzY3JpcHRpb24uc3RhdHVzOmNvZGUgUmVxdWlyZWQgYmluZGluZyB0bzogRm1TdGF0dXMnIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJzdGF0dXNcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5zdGF0dXMuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICghdGhpc1snY3JlYXRlZCddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBjcmVhdGVkOmZoaXIuRmhpckRhdGVUaW1lIGZoaXI6IFZpc2lvblByZXNjcmlwdGlvbi5jcmVhdGVkOmRhdGVUaW1lJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiY3JlYXRlZFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmNyZWF0ZWQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICghdGhpc1sncGF0aWVudCddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBwYXRpZW50OmZoaXIuUmVmZXJlbmNlIGZoaXI6IFZpc2lvblByZXNjcmlwdGlvbi5wYXRpZW50OlJlZmVyZW5jZScgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInBhdGllbnRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5wYXRpZW50LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImVuY291bnRlclwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmVuY291bnRlci5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKCF0aGlzWydkYXRlV3JpdHRlbiddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBkYXRlV3JpdHRlbjpmaGlyLkZoaXJEYXRlVGltZSBmaGlyOiBWaXNpb25QcmVzY3JpcHRpb24uZGF0ZVdyaXR0ZW46ZGF0ZVRpbWUnIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJkYXRlV3JpdHRlblwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmRhdGVXcml0dGVuLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAoIXRoaXNbJ3ByZXNjcmliZXInXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgcHJlc2NyaWJlcjpmaGlyLlJlZmVyZW5jZSBmaGlyOiBWaXNpb25QcmVzY3JpcHRpb24ucHJlc2NyaWJlcjpSZWZlcmVuY2UnIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJwcmVzY3JpYmVyXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucHJlc2NyaWJlci5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKCF0aGlzWydsZW5zU3BlY2lmaWNhdGlvbiddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBsZW5zU3BlY2lmaWNhdGlvbjpmaGlyLlZpc2lvblByZXNjcmlwdGlvbkxlbnNTcGVjaWZpY2F0aW9uW10gZmhpcjogVmlzaW9uUHJlc2NyaXB0aW9uLmxlbnNTcGVjaWZpY2F0aW9uOmxlbnNTcGVjaWZpY2F0aW9uJyB9KTtcclxuICAgIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkodGhpcy5sZW5zU3BlY2lmaWNhdGlvbikpIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3N0cnVjdHVyZScsIGRpYWdub3N0aWNzOiAnRm91bmQgc2NhbGFyIGluIGFycmF5IHByb3BlcnR5IGxlbnNTcGVjaWZpY2F0aW9uOmZoaXIuVmlzaW9uUHJlc2NyaXB0aW9uTGVuc1NwZWNpZmljYXRpb25bXSBmaGlyOiBWaXNpb25QcmVzY3JpcHRpb24ubGVuc1NwZWNpZmljYXRpb246bGVuc1NwZWNpZmljYXRpb24nIH0pO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmxlbnNTcGVjaWZpY2F0aW9uLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgbGVuc1NwZWNpZmljYXRpb246Zmhpci5WaXNpb25QcmVzY3JpcHRpb25MZW5zU3BlY2lmaWNhdGlvbltdIGZoaXI6IFZpc2lvblByZXNjcmlwdGlvbi5sZW5zU3BlY2lmaWNhdGlvbjpsZW5zU3BlY2lmaWNhdGlvbicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImxlbnNTcGVjaWZpY2F0aW9uXCJdKSB7IHRoaXMubGVuc1NwZWNpZmljYXRpb24uZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=