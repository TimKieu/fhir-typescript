// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR ComplexType: Timing
import * as fhir from '../fhir.js';
// @ts-ignore
import { UnitsOfTimeVsValidation } from '../fhirValueSets/UnitsOfTimeVsValidation.js';
// @ts-ignore
import { DaysOfWeekVsValidation } from '../fhirValueSets/DaysOfWeekVsValidation.js';
// @ts-ignore
import { EventTimingVsValidation } from '../fhirValueSets/EventTimingVsValidation.js';
/**
 * A set of rules that describe when the event is scheduled.
 */
export class TimingRepeat extends fhir.FhirElement {
    /**
     * Default constructor for TimingRepeat - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['bounds']) {
            this.bounds = source.bounds;
        }
        else if (source['boundsDuration']) {
            this.bounds = new fhir.Duration(source.boundsDuration);
        }
        else if (source['boundsRange']) {
            this.bounds = new fhir.Range(source.boundsRange);
        }
        else if (source['boundsPeriod']) {
            this.bounds = new fhir.Period(source.boundsPeriod);
        }
        if (source['count']) {
            this.count = new fhir.FhirPositiveInt({ value: source.count });
        }
        if (source['_count']) {
            if (this.count) {
                this.count.addExtendedProperties(source._count);
            }
            else {
                this.count = new fhir.FhirPositiveInt(source._count);
            }
        }
        if (source['countMax']) {
            this.countMax = new fhir.FhirPositiveInt({ value: source.countMax });
        }
        if (source['_countMax']) {
            if (this.countMax) {
                this.countMax.addExtendedProperties(source._countMax);
            }
            else {
                this.countMax = new fhir.FhirPositiveInt(source._countMax);
            }
        }
        if (source['duration']) {
            this.duration = new fhir.FhirDecimal({ value: source.duration });
        }
        if (source['_duration']) {
            if (this.duration) {
                this.duration.addExtendedProperties(source._duration);
            }
            else {
                this.duration = new fhir.FhirDecimal(source._duration);
            }
        }
        if (source['durationMax']) {
            this.durationMax = new fhir.FhirDecimal({ value: source.durationMax });
        }
        if (source['_durationMax']) {
            if (this.durationMax) {
                this.durationMax.addExtendedProperties(source._durationMax);
            }
            else {
                this.durationMax = new fhir.FhirDecimal(source._durationMax);
            }
        }
        if (source['durationUnit']) {
            this.durationUnit = new fhir.FhirCode({ value: source.durationUnit });
        }
        if (source['_durationUnit']) {
            if (this.durationUnit) {
                this.durationUnit.addExtendedProperties(source._durationUnit);
            }
            else {
                this.durationUnit = new fhir.FhirCode(source._durationUnit);
            }
        }
        if (source['frequency']) {
            this.frequency = new fhir.FhirPositiveInt({ value: source.frequency });
        }
        if (source['_frequency']) {
            if (this.frequency) {
                this.frequency.addExtendedProperties(source._frequency);
            }
            else {
                this.frequency = new fhir.FhirPositiveInt(source._frequency);
            }
        }
        if (source['frequencyMax']) {
            this.frequencyMax = new fhir.FhirPositiveInt({ value: source.frequencyMax });
        }
        if (source['_frequencyMax']) {
            if (this.frequencyMax) {
                this.frequencyMax.addExtendedProperties(source._frequencyMax);
            }
            else {
                this.frequencyMax = new fhir.FhirPositiveInt(source._frequencyMax);
            }
        }
        if (source['period']) {
            this.period = new fhir.FhirDecimal({ value: source.period });
        }
        if (source['_period']) {
            if (this.period) {
                this.period.addExtendedProperties(source._period);
            }
            else {
                this.period = new fhir.FhirDecimal(source._period);
            }
        }
        if (source['periodMax']) {
            this.periodMax = new fhir.FhirDecimal({ value: source.periodMax });
        }
        if (source['_periodMax']) {
            if (this.periodMax) {
                this.periodMax.addExtendedProperties(source._periodMax);
            }
            else {
                this.periodMax = new fhir.FhirDecimal(source._periodMax);
            }
        }
        if (source['periodUnit']) {
            this.periodUnit = new fhir.FhirCode({ value: source.periodUnit });
        }
        if (source['_periodUnit']) {
            if (this.periodUnit) {
                this.periodUnit.addExtendedProperties(source._periodUnit);
            }
            else {
                this.periodUnit = new fhir.FhirCode(source._periodUnit);
            }
        }
        if (source['dayOfWeek']) {
            this.dayOfWeek = source.dayOfWeek.map((x) => new fhir.FhirCode({ value: x }));
        }
        else {
            this.dayOfWeek = [];
        }
        if (source['_dayOfWeek']) {
            source._dayOfWeek.forEach((x, i) => {
                if (this.dayOfWeek.length >= i) {
                    if (x) {
                        this.dayOfWeek[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.dayOfWeek.push(new fhir.FhirCode(x));
                    }
                }
            });
        }
        if (source['timeOfDay']) {
            this.timeOfDay = source.timeOfDay.map((x) => new fhir.FhirTime({ value: x }));
        }
        else {
            this.timeOfDay = [];
        }
        if (source['_timeOfDay']) {
            source._timeOfDay.forEach((x, i) => {
                if (this.timeOfDay.length >= i) {
                    if (x) {
                        this.timeOfDay[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.timeOfDay.push(new fhir.FhirTime(x));
                    }
                }
            });
        }
        if (source['when']) {
            this.when = source.when.map((x) => new fhir.FhirCode({ value: x }));
        }
        else {
            this.when = [];
        }
        if (source['_when']) {
            source._when.forEach((x, i) => {
                if (this.when.length >= i) {
                    if (x) {
                        this.when[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.when.push(new fhir.FhirCode(x));
                    }
                }
            });
        }
        if (source['offset']) {
            this.offset = new fhir.FhirUnsignedInt({ value: source.offset });
        }
        if (source['_offset']) {
            if (this.offset) {
                this.offset.addExtendedProperties(source._offset);
            }
            else {
                this.offset = new fhir.FhirUnsignedInt(source._offset);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Timing.repeat';
        }
        this.vOS('bounds', exp);
        this.vOS('count', exp);
        this.vOS('countMax', exp);
        this.vOS('duration', exp);
        this.vOS('durationMax', exp);
        this.vOSV('durationUnit', exp, 'UnitsOfTime', UnitsOfTimeVsValidation, 'r');
        this.vOS('frequency', exp);
        this.vOS('frequencyMax', exp);
        this.vOS('period', exp);
        this.vOS('periodMax', exp);
        this.vOSV('periodUnit', exp, 'UnitsOfTime', UnitsOfTimeVsValidation, 'r');
        this.vOAV('dayOfWeek', exp, 'DaysOfWeek', DaysOfWeekVsValidation, 'r');
        this.vOA('timeOfDay', exp);
        this.vOAV('when', exp, 'EventTiming', EventTimingVsValidation, 'r');
        this.vOS('offset', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
TimingRepeat._fts_dataType = 'TimingRepeat';
/**
 * Internal flag to properly serialize choice-type element Timing.repeat.bounds[x]
 */
TimingRepeat._fts_boundsIsChoice = true;
/**
 * Specifies an event that may occur multiple times. Timing schedules are used to record when things are planned, expected or requested to occur. The most common usage is in dosage instructions for medications. They are also used when planning care of various kinds, and may be used for reporting the schedule to which past regular activities were carried out.
 */
export class Timing extends fhir.BackboneElement {
    /**
     * Default constructor for Timing - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['event']) {
            this.event = source.event.map((x) => new fhir.FhirDateTime({ value: x }));
        }
        else {
            this.event = [];
        }
        if (source['_event']) {
            source._event.forEach((x, i) => {
                if (this.event.length >= i) {
                    if (x) {
                        this.event[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.event.push(new fhir.FhirDateTime(x));
                    }
                }
            });
        }
        if (source['repeat']) {
            this.repeat = new fhir.TimingRepeat(source.repeat);
        }
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Timing';
        }
        this.vOA('event', exp);
        this.vOS('repeat', exp);
        this.vOS('code', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
Timing._fts_dataType = 'Timing';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGltaW5nLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9UaW1pbmcudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsMkJBQTJCO0FBRTNCLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBSW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSw2Q0FBNkMsQ0FBQztBQUd0RixhQUFhO0FBQ2IsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sNENBQTRDLENBQUM7QUFHcEYsYUFBYTtBQUNiLE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxNQUFNLDZDQUE2QyxDQUFDO0FBMkl0Rjs7R0FFRztBQUNILE1BQU0sT0FBTyxZQUFhLFNBQVEsSUFBSSxDQUFDLFdBQVc7SUFxRWhEOztPQUVHO0lBQ0gsWUFBWSxTQUFtQyxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUN6RixLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDO1NBQUU7YUFDakQsSUFBSSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQztTQUFFO2FBQ3pGLElBQUksTUFBTSxDQUFDLGFBQWEsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1NBQUU7YUFDaEYsSUFBSSxNQUFNLENBQUMsY0FBYyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksSUFBSSxDQUFDLE1B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Q0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQUU7SUFDNUUsQ0FBQztJQUNEOztPQUVHO0lBQ2EsaUJBQWlCLENBQUMsTUFBYSxFQUFFO1FBQy9DLElBQUksTUFBTSxHQUFtQixLQUFLLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDMUQsSUFBSSxHQUFHLEtBQUssRUFBRSxFQUFFO1lBQUUsR0FBRyxHQUFHLFFBQVEsQ0FBQTtTQUFFO1FBQ2xDLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ3JCLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ3RCLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ3BCLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBMUNEOztHQUVHO0FBQzZCLG9CQUFhLEdBQVUsUUFBUSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0LmNvcmUgdmVyc2lvbjogNC4wLjFcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIENvbXBsZXhUeXBlOiBUaW1pbmdcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFVuaXRzT2ZUaW1lQ29kZXMsICBVbml0c09mVGltZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Vbml0c09mVGltZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBVbml0c09mVGltZVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVW5pdHNPZlRpbWVWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IERheXNPZldlZWtDb2RlcywgIERheXNPZldlZWtDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRGF5c09mV2Vla0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEYXlzT2ZXZWVrVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9EYXlzT2ZXZWVrVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBFdmVudFRpbWluZ0NvZGVzLCAgRXZlbnRUaW1pbmdDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRXZlbnRUaW1pbmdDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRXZlbnRUaW1pbmdWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0V2ZW50VGltaW5nVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBUaW1pbmdBYmJyZXZpYXRpb25Db2RlcywgIFRpbWluZ0FiYnJldmlhdGlvbkNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9UaW1pbmdBYmJyZXZpYXRpb25Db2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgVGltaW5nQWJicmV2aWF0aW9uVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9UaW1pbmdBYmJyZXZpYXRpb25Wc1ZhbGlkYXRpb24uanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgVGltaW5nUmVwZWF0IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFRpbWluZ1JlcGVhdEFyZ3MgZXh0ZW5kcyBmaGlyLkZoaXJFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogRWl0aGVyIGEgZHVyYXRpb24gZm9yIHRoZSBsZW5ndGggb2YgdGhlIHRpbWluZyBzY2hlZHVsZSwgYSByYW5nZSBvZiBwb3NzaWJsZSBsZW5ndGgsIG9yIG91dGVyIGJvdW5kcyBmb3Igc3RhcnQgYW5kL29yIGVuZCBsaW1pdHMgb2YgdGhlIHRpbWluZyBzY2hlZHVsZS5cclxuICAgKi9cclxuICBib3VuZHM/OiBmaGlyLkR1cmF0aW9ufGZoaXIuUmFuZ2V8Zmhpci5QZXJpb2R8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEVpdGhlciBhIGR1cmF0aW9uIGZvciB0aGUgbGVuZ3RoIG9mIHRoZSB0aW1pbmcgc2NoZWR1bGUsIGEgcmFuZ2Ugb2YgcG9zc2libGUgbGVuZ3RoLCBvciBvdXRlciBib3VuZHMgZm9yIHN0YXJ0IGFuZC9vciBlbmQgbGltaXRzIG9mIHRoZSB0aW1pbmcgc2NoZWR1bGUuXHJcbiAgICovXHJcbiAgYm91bmRzRHVyYXRpb24/OiBmaGlyLkR1cmF0aW9uQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRWl0aGVyIGEgZHVyYXRpb24gZm9yIHRoZSBsZW5ndGggb2YgdGhlIHRpbWluZyBzY2hlZHVsZSwgYSByYW5nZSBvZiBwb3NzaWJsZSBsZW5ndGgsIG9yIG91dGVyIGJvdW5kcyBmb3Igc3RhcnQgYW5kL29yIGVuZCBsaW1pdHMgb2YgdGhlIHRpbWluZyBzY2hlZHVsZS5cclxuICAgKi9cclxuICBib3VuZHNSYW5nZT86IGZoaXIuUmFuZ2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFaXRoZXIgYSBkdXJhdGlvbiBmb3IgdGhlIGxlbmd0aCBvZiB0aGUgdGltaW5nIHNjaGVkdWxlLCBhIHJhbmdlIG9mIHBvc3NpYmxlIGxlbmd0aCwgb3Igb3V0ZXIgYm91bmRzIGZvciBzdGFydCBhbmQvb3IgZW5kIGxpbWl0cyBvZiB0aGUgdGltaW5nIHNjaGVkdWxlLlxyXG4gICAqL1xyXG4gIGJvdW5kc1BlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgeW91IGhhdmUgYm90aCBib3VuZHMgYW5kIGNvdW50LCB0aGVuIHRoaXMgc2hvdWxkIGJlIHVuZGVyc3Rvb2QgYXMgd2l0aGluIHRoZSBib3VuZHMgcGVyaW9kLCB1bnRpbCBjb3VudCB0aW1lcyBoYXBwZW5zLlxyXG4gICAqL1xyXG4gIGNvdW50PzogZmhpci5GaGlyUG9zaXRpdmVJbnR8bnVtYmVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogVGltaW5nLnJlcGVhdC5jb3VudFxyXG4gICAqL1xyXG4gIF9jb3VudD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogSWYgcHJlc2VudCwgaW5kaWNhdGVzIHRoYXQgdGhlIGNvdW50IGlzIGEgcmFuZ2UgLSBzbyB0byBwZXJmb3JtIHRoZSBhY3Rpb24gYmV0d2VlbiBbY291bnRdIGFuZCBbY291bnRNYXhdIHRpbWVzLlxyXG4gICAqL1xyXG4gIGNvdW50TWF4PzogZmhpci5GaGlyUG9zaXRpdmVJbnR8bnVtYmVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogVGltaW5nLnJlcGVhdC5jb3VudE1heFxyXG4gICAqL1xyXG4gIF9jb3VudE1heD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogRm9yIHNvbWUgZXZlbnRzIHRoZSBkdXJhdGlvbiBpcyBwYXJ0IG9mIHRoZSBkZWZpbml0aW9uIG9mIHRoZSBldmVudCAoZS5nLiBJViBpbmZ1c2lvbnMsIHdoZXJlIHRoZSBkdXJhdGlvbiBpcyBpbXBsaWNpdCBpbiB0aGUgc3BlY2lmaWVkIHF1YW50aXR5IGFuZCByYXRlKS4gRm9yIG90aGVycywgaXQncyBwYXJ0IG9mIHRoZSB0aW1pbmcgc3BlY2lmaWNhdGlvbiAoZS5nLiBleGVyY2lzZSkuXHJcbiAgICovXHJcbiAgZHVyYXRpb24/OiBmaGlyLkZoaXJEZWNpbWFsfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFRpbWluZy5yZXBlYXQuZHVyYXRpb25cclxuICAgKi9cclxuICBfZHVyYXRpb24/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEZvciBzb21lIGV2ZW50cyB0aGUgZHVyYXRpb24gaXMgcGFydCBvZiB0aGUgZGVmaW5pdGlvbiBvZiB0aGUgZXZlbnQgKGUuZy4gSVYgaW5mdXNpb25zLCB3aGVyZSB0aGUgZHVyYXRpb24gaXMgaW1wbGljaXQgaW4gdGhlIHNwZWNpZmllZCBxdWFudGl0eSBhbmQgcmF0ZSkuIEZvciBvdGhlcnMsIGl0J3MgcGFydCBvZiB0aGUgdGltaW5nIHNwZWNpZmljYXRpb24gKGUuZy4gZXhlcmNpc2UpLlxyXG4gICAqL1xyXG4gIGR1cmF0aW9uTWF4PzogZmhpci5GaGlyRGVjaW1hbHxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBUaW1pbmcucmVwZWF0LmR1cmF0aW9uTWF4XHJcbiAgICovXHJcbiAgX2R1cmF0aW9uTWF4PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgdW5pdHMgb2YgdGltZSBmb3IgdGhlIGR1cmF0aW9uLCBpbiBVQ1VNIHVuaXRzLlxyXG4gICAqL1xyXG4gIGR1cmF0aW9uVW5pdD86IGZoaXIuRmhpckNvZGU8VW5pdHNPZlRpbWVDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogVGltaW5nLnJlcGVhdC5kdXJhdGlvblVuaXRcclxuICAgKi9cclxuICBfZHVyYXRpb25Vbml0PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgbnVtYmVyIG9mIHRpbWVzIHRvIHJlcGVhdCB0aGUgYWN0aW9uIHdpdGhpbiB0aGUgc3BlY2lmaWVkIHBlcmlvZC4gSWYgZnJlcXVlbmN5TWF4IGlzIHByZXNlbnQsIHRoaXMgZWxlbWVudCBpbmRpY2F0ZXMgdGhlIGxvd2VyIGJvdW5kIG9mIHRoZSBhbGxvd2VkIHJhbmdlIG9mIHRoZSBmcmVxdWVuY3kuXHJcbiAgICovXHJcbiAgZnJlcXVlbmN5PzogZmhpci5GaGlyUG9zaXRpdmVJbnR8bnVtYmVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogVGltaW5nLnJlcGVhdC5mcmVxdWVuY3lcclxuICAgKi9cclxuICBfZnJlcXVlbmN5PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBJZiBwcmVzZW50LCBpbmRpY2F0ZXMgdGhhdCB0aGUgZnJlcXVlbmN5IGlzIGEgcmFuZ2UgLSBzbyB0byByZXBlYXQgYmV0d2VlbiBbZnJlcXVlbmN5XSBhbmQgW2ZyZXF1ZW5jeU1heF0gdGltZXMgd2l0aGluIHRoZSBwZXJpb2Qgb3IgcGVyaW9kIHJhbmdlLlxyXG4gICAqL1xyXG4gIGZyZXF1ZW5jeU1heD86IGZoaXIuRmhpclBvc2l0aXZlSW50fG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFRpbWluZy5yZXBlYXQuZnJlcXVlbmN5TWF4XHJcbiAgICovXHJcbiAgX2ZyZXF1ZW5jeU1heD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHRoZSBkdXJhdGlvbiBvZiB0aW1lIG92ZXIgd2hpY2ggcmVwZXRpdGlvbnMgYXJlIHRvIG9jY3VyOyBlLmcuIHRvIGV4cHJlc3MgXCIzIHRpbWVzIHBlciBkYXlcIiwgMyB3b3VsZCBiZSB0aGUgZnJlcXVlbmN5IGFuZCBcIjEgZGF5XCIgd291bGQgYmUgdGhlIHBlcmlvZC4gSWYgcGVyaW9kTWF4IGlzIHByZXNlbnQsIHRoaXMgZWxlbWVudCBpbmRpY2F0ZXMgdGhlIGxvd2VyIGJvdW5kIG9mIHRoZSBhbGxvd2VkIHJhbmdlIG9mIHRoZSBwZXJpb2QgbGVuZ3RoLlxyXG4gICAqL1xyXG4gIHBlcmlvZD86IGZoaXIuRmhpckRlY2ltYWx8bnVtYmVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogVGltaW5nLnJlcGVhdC5wZXJpb2RcclxuICAgKi9cclxuICBfcGVyaW9kPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBJZiBwcmVzZW50LCBpbmRpY2F0ZXMgdGhhdCB0aGUgcGVyaW9kIGlzIGEgcmFuZ2UgZnJvbSBbcGVyaW9kXSB0byBbcGVyaW9kTWF4XSwgYWxsb3dpbmcgZXhwcmVzc2luZyBjb25jZXB0cyBzdWNoIGFzIFwiZG8gdGhpcyBvbmNlIGV2ZXJ5IDMtNSBkYXlzLlxyXG4gICAqL1xyXG4gIHBlcmlvZE1heD86IGZoaXIuRmhpckRlY2ltYWx8bnVtYmVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogVGltaW5nLnJlcGVhdC5wZXJpb2RNYXhcclxuICAgKi9cclxuICBfcGVyaW9kTWF4PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgdW5pdHMgb2YgdGltZSBmb3IgdGhlIHBlcmlvZCBpbiBVQ1VNIHVuaXRzLlxyXG4gICAqL1xyXG4gIHBlcmlvZFVuaXQ/OiBmaGlyLkZoaXJDb2RlPFVuaXRzT2ZUaW1lQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFRpbWluZy5yZXBlYXQucGVyaW9kVW5pdFxyXG4gICAqL1xyXG4gIF9wZXJpb2RVbml0PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBJZiBubyBkYXlzIGFyZSBzcGVjaWZpZWQsIHRoZSBhY3Rpb24gaXMgYXNzdW1lZCB0byBoYXBwZW4gZXZlcnkgZGF5IGFzIG90aGVyd2lzZSBzcGVjaWZpZWQuIFRoZSBlbGVtZW50cyBmcmVxdWVuY3kgYW5kIHBlcmlvZCBjYW5ub3QgYmUgdXNlZCBhcyB3ZWxsIGFzIGRheU9mV2Vlay5cclxuICAgKi9cclxuICBkYXlPZldlZWs/OiBmaGlyLkZoaXJDb2RlPERheXNPZldlZWtDb2RlVHlwZT5bXXwoc3RyaW5nfG51bGwpW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBUaW1pbmcucmVwZWF0LmRheU9mV2Vla1xyXG4gICAqL1xyXG4gIF9kYXlPZldlZWs/OihmaGlyLkZoaXJFbGVtZW50QXJnc3xudWxsKVtdO1xyXG4gIC8qKlxyXG4gICAqIFdoZW4gdGltZSBvZiBkYXkgaXMgc3BlY2lmaWVkLCBpdCBpcyBpbmZlcnJlZCB0aGF0IHRoZSBhY3Rpb24gaGFwcGVucyBldmVyeSBkYXkgKGFzIGZpbHRlcmVkIGJ5IGRheW9mV2Vlaykgb24gdGhlIHNwZWNpZmllZCB0aW1lcy4gVGhlIGVsZW1lbnRzIHdoZW4sIGZyZXF1ZW5jeSBhbmQgcGVyaW9kIGNhbm5vdCBiZSB1c2VkIGFzIHdlbGwgYXMgdGltZU9mRGF5LlxyXG4gICAqL1xyXG4gIHRpbWVPZkRheT86IGZoaXIuRmhpclRpbWVbXXwoc3RyaW5nfG51bGwpW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBUaW1pbmcucmVwZWF0LnRpbWVPZkRheVxyXG4gICAqL1xyXG4gIF90aW1lT2ZEYXk/OihmaGlyLkZoaXJFbGVtZW50QXJnc3xudWxsKVtdO1xyXG4gIC8qKlxyXG4gICAqIFdoZW4gbW9yZSB0aGFuIG9uZSBldmVudCBpcyBsaXN0ZWQsIHRoZSBldmVudCBpcyB0aWVkIHRvIHRoZSB1bmlvbiBvZiB0aGUgc3BlY2lmaWVkIGV2ZW50cy5cclxuICAgKi9cclxuICB3aGVuPzogZmhpci5GaGlyQ29kZVtdfChzdHJpbmd8bnVsbClbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFRpbWluZy5yZXBlYXQud2hlblxyXG4gICAqL1xyXG4gIF93aGVuPzooZmhpci5GaGlyRWxlbWVudEFyZ3N8bnVsbClbXTtcclxuICAvKipcclxuICAgKiBUaGUgbnVtYmVyIG9mIG1pbnV0ZXMgZnJvbSB0aGUgZXZlbnQuIElmIHRoZSBldmVudCBjb2RlIGRvZXMgbm90IGluZGljYXRlIHdoZXRoZXIgdGhlIG1pbnV0ZXMgaXMgYmVmb3JlIG9yIGFmdGVyIHRoZSBldmVudCwgdGhlbiB0aGUgb2Zmc2V0IGlzIGFzc3VtZWQgdG8gYmUgYWZ0ZXIgdGhlIGV2ZW50LlxyXG4gICAqL1xyXG4gIG9mZnNldD86IGZoaXIuRmhpclVuc2lnbmVkSW50fG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFRpbWluZy5yZXBlYXQub2Zmc2V0XHJcbiAgICovXHJcbiAgX29mZnNldD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBIHNldCBvZiBydWxlcyB0aGF0IGRlc2NyaWJlIHdoZW4gdGhlIGV2ZW50IGlzIHNjaGVkdWxlZC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBUaW1pbmdSZXBlYXQgZXh0ZW5kcyBmaGlyLkZoaXJFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1RpbWluZ1JlcGVhdCc7XHJcbiAgLyoqXHJcbiAgICogRWl0aGVyIGEgZHVyYXRpb24gZm9yIHRoZSBsZW5ndGggb2YgdGhlIHRpbWluZyBzY2hlZHVsZSwgYSByYW5nZSBvZiBwb3NzaWJsZSBsZW5ndGgsIG9yIG91dGVyIGJvdW5kcyBmb3Igc3RhcnQgYW5kL29yIGVuZCBsaW1pdHMgb2YgdGhlIHRpbWluZyBzY2hlZHVsZS5cclxuICAgKi9cclxuICBwdWJsaWMgYm91bmRzPzogKGZoaXIuRHVyYXRpb258Zmhpci5SYW5nZXxmaGlyLlBlcmlvZCl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgVGltaW5nLnJlcGVhdC5ib3VuZHNbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfYm91bmRzSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogSWYgeW91IGhhdmUgYm90aCBib3VuZHMgYW5kIGNvdW50LCB0aGVuIHRoaXMgc2hvdWxkIGJlIHVuZGVyc3Rvb2QgYXMgd2l0aGluIHRoZSBib3VuZHMgcGVyaW9kLCB1bnRpbCBjb3VudCB0aW1lcyBoYXBwZW5zLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb3VudD86IGZoaXIuRmhpclBvc2l0aXZlSW50fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiBwcmVzZW50LCBpbmRpY2F0ZXMgdGhhdCB0aGUgY291bnQgaXMgYSByYW5nZSAtIHNvIHRvIHBlcmZvcm0gdGhlIGFjdGlvbiBiZXR3ZWVuIFtjb3VudF0gYW5kIFtjb3VudE1heF0gdGltZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGNvdW50TWF4PzogZmhpci5GaGlyUG9zaXRpdmVJbnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEZvciBzb21lIGV2ZW50cyB0aGUgZHVyYXRpb24gaXMgcGFydCBvZiB0aGUgZGVmaW5pdGlvbiBvZiB0aGUgZXZlbnQgKGUuZy4gSVYgaW5mdXNpb25zLCB3aGVyZSB0aGUgZHVyYXRpb24gaXMgaW1wbGljaXQgaW4gdGhlIHNwZWNpZmllZCBxdWFudGl0eSBhbmQgcmF0ZSkuIEZvciBvdGhlcnMsIGl0J3MgcGFydCBvZiB0aGUgdGltaW5nIHNwZWNpZmljYXRpb24gKGUuZy4gZXhlcmNpc2UpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkdXJhdGlvbj86IGZoaXIuRmhpckRlY2ltYWx8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEZvciBzb21lIGV2ZW50cyB0aGUgZHVyYXRpb24gaXMgcGFydCBvZiB0aGUgZGVmaW5pdGlvbiBvZiB0aGUgZXZlbnQgKGUuZy4gSVYgaW5mdXNpb25zLCB3aGVyZSB0aGUgZHVyYXRpb24gaXMgaW1wbGljaXQgaW4gdGhlIHNwZWNpZmllZCBxdWFudGl0eSBhbmQgcmF0ZSkuIEZvciBvdGhlcnMsIGl0J3MgcGFydCBvZiB0aGUgdGltaW5nIHNwZWNpZmljYXRpb24gKGUuZy4gZXhlcmNpc2UpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkdXJhdGlvbk1heD86IGZoaXIuRmhpckRlY2ltYWx8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB1bml0cyBvZiB0aW1lIGZvciB0aGUgZHVyYXRpb24sIGluIFVDVU0gdW5pdHMuXHJcbiAgICovXHJcbiAgcHVibGljIGR1cmF0aW9uVW5pdD86IGZoaXIuRmhpckNvZGU8VW5pdHNPZlRpbWVDb2RlVHlwZT58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBudW1iZXIgb2YgdGltZXMgdG8gcmVwZWF0IHRoZSBhY3Rpb24gd2l0aGluIHRoZSBzcGVjaWZpZWQgcGVyaW9kLiBJZiBmcmVxdWVuY3lNYXggaXMgcHJlc2VudCwgdGhpcyBlbGVtZW50IGluZGljYXRlcyB0aGUgbG93ZXIgYm91bmQgb2YgdGhlIGFsbG93ZWQgcmFuZ2Ugb2YgdGhlIGZyZXF1ZW5jeS5cclxuICAgKi9cclxuICBwdWJsaWMgZnJlcXVlbmN5PzogZmhpci5GaGlyUG9zaXRpdmVJbnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIHByZXNlbnQsIGluZGljYXRlcyB0aGF0IHRoZSBmcmVxdWVuY3kgaXMgYSByYW5nZSAtIHNvIHRvIHJlcGVhdCBiZXR3ZWVuIFtmcmVxdWVuY3ldIGFuZCBbZnJlcXVlbmN5TWF4XSB0aW1lcyB3aXRoaW4gdGhlIHBlcmlvZCBvciBwZXJpb2QgcmFuZ2UuXHJcbiAgICovXHJcbiAgcHVibGljIGZyZXF1ZW5jeU1heD86IGZoaXIuRmhpclBvc2l0aXZlSW50fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgdGhlIGR1cmF0aW9uIG9mIHRpbWUgb3ZlciB3aGljaCByZXBldGl0aW9ucyBhcmUgdG8gb2NjdXI7IGUuZy4gdG8gZXhwcmVzcyBcIjMgdGltZXMgcGVyIGRheVwiLCAzIHdvdWxkIGJlIHRoZSBmcmVxdWVuY3kgYW5kIFwiMSBkYXlcIiB3b3VsZCBiZSB0aGUgcGVyaW9kLiBJZiBwZXJpb2RNYXggaXMgcHJlc2VudCwgdGhpcyBlbGVtZW50IGluZGljYXRlcyB0aGUgbG93ZXIgYm91bmQgb2YgdGhlIGFsbG93ZWQgcmFuZ2Ugb2YgdGhlIHBlcmlvZCBsZW5ndGguXHJcbiAgICovXHJcbiAgcHVibGljIHBlcmlvZD86IGZoaXIuRmhpckRlY2ltYWx8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIHByZXNlbnQsIGluZGljYXRlcyB0aGF0IHRoZSBwZXJpb2QgaXMgYSByYW5nZSBmcm9tIFtwZXJpb2RdIHRvIFtwZXJpb2RNYXhdLCBhbGxvd2luZyBleHByZXNzaW5nIGNvbmNlcHRzIHN1Y2ggYXMgXCJkbyB0aGlzIG9uY2UgZXZlcnkgMy01IGRheXMuXHJcbiAgICovXHJcbiAgcHVibGljIHBlcmlvZE1heD86IGZoaXIuRmhpckRlY2ltYWx8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB1bml0cyBvZiB0aW1lIGZvciB0aGUgcGVyaW9kIGluIFVDVU0gdW5pdHMuXHJcbiAgICovXHJcbiAgcHVibGljIHBlcmlvZFVuaXQ/OiBmaGlyLkZoaXJDb2RlPFVuaXRzT2ZUaW1lQ29kZVR5cGU+fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiBubyBkYXlzIGFyZSBzcGVjaWZpZWQsIHRoZSBhY3Rpb24gaXMgYXNzdW1lZCB0byBoYXBwZW4gZXZlcnkgZGF5IGFzIG90aGVyd2lzZSBzcGVjaWZpZWQuIFRoZSBlbGVtZW50cyBmcmVxdWVuY3kgYW5kIHBlcmlvZCBjYW5ub3QgYmUgdXNlZCBhcyB3ZWxsIGFzIGRheU9mV2Vlay5cclxuICAgKi9cclxuICBwdWJsaWMgZGF5T2ZXZWVrOiBmaGlyLkZoaXJDb2RlPERheXNPZldlZWtDb2RlVHlwZT5bXTtcclxuICAvKipcclxuICAgKiBXaGVuIHRpbWUgb2YgZGF5IGlzIHNwZWNpZmllZCwgaXQgaXMgaW5mZXJyZWQgdGhhdCB0aGUgYWN0aW9uIGhhcHBlbnMgZXZlcnkgZGF5IChhcyBmaWx0ZXJlZCBieSBkYXlvZldlZWspIG9uIHRoZSBzcGVjaWZpZWQgdGltZXMuIFRoZSBlbGVtZW50cyB3aGVuLCBmcmVxdWVuY3kgYW5kIHBlcmlvZCBjYW5ub3QgYmUgdXNlZCBhcyB3ZWxsIGFzIHRpbWVPZkRheS5cclxuICAgKi9cclxuICBwdWJsaWMgdGltZU9mRGF5OiBmaGlyLkZoaXJUaW1lW107XHJcbiAgLyoqXHJcbiAgICogV2hlbiBtb3JlIHRoYW4gb25lIGV2ZW50IGlzIGxpc3RlZCwgdGhlIGV2ZW50IGlzIHRpZWQgdG8gdGhlIHVuaW9uIG9mIHRoZSBzcGVjaWZpZWQgZXZlbnRzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB3aGVuOiBmaGlyLkZoaXJDb2RlW107XHJcbiAgLyoqXHJcbiAgICogVGhlIG51bWJlciBvZiBtaW51dGVzIGZyb20gdGhlIGV2ZW50LiBJZiB0aGUgZXZlbnQgY29kZSBkb2VzIG5vdCBpbmRpY2F0ZSB3aGV0aGVyIHRoZSBtaW51dGVzIGlzIGJlZm9yZSBvciBhZnRlciB0aGUgZXZlbnQsIHRoZW4gdGhlIG9mZnNldCBpcyBhc3N1bWVkIHRvIGJlIGFmdGVyIHRoZSBldmVudC5cclxuICAgKi9cclxuICBwdWJsaWMgb2Zmc2V0PzogZmhpci5GaGlyVW5zaWduZWRJbnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFRpbWluZ1JlcGVhdCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFRpbWluZ1JlcGVhdEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydib3VuZHMnXSkgeyB0aGlzLmJvdW5kcyA9IHNvdXJjZS5ib3VuZHM7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnYm91bmRzRHVyYXRpb24nXSkgeyB0aGlzLmJvdW5kcyA9IG5ldyBmaGlyLkR1cmF0aW9uKHNvdXJjZS5ib3VuZHNEdXJhdGlvbik7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnYm91bmRzUmFuZ2UnXSkgeyB0aGlzLmJvdW5kcyA9IG5ldyBmaGlyLlJhbmdlKHNvdXJjZS5ib3VuZHNSYW5nZSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnYm91bmRzUGVyaW9kJ10pIHsgdGhpcy5ib3VuZHMgPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLmJvdW5kc1BlcmlvZCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvdW50J10pIHsgdGhpcy5jb3VudCA9IG5ldyBmaGlyLkZoaXJQb3NpdGl2ZUludCh7dmFsdWU6IHNvdXJjZS5jb3VudH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfY291bnQnXSkge1xyXG4gICAgICBpZiAodGhpcy5jb3VudCkgeyB0aGlzLmNvdW50LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2NvdW50ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuY291bnQgPSBuZXcgZmhpci5GaGlyUG9zaXRpdmVJbnQoc291cmNlLl9jb3VudCBhcyBQYXJ0aWFsPGZoaXIuRmhpclBvc2l0aXZlSW50QXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydjb3VudE1heCddKSB7IHRoaXMuY291bnRNYXggPSBuZXcgZmhpci5GaGlyUG9zaXRpdmVJbnQoe3ZhbHVlOiBzb3VyY2UuY291bnRNYXh9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2NvdW50TWF4J10pIHtcclxuICAgICAgaWYgKHRoaXMuY291bnRNYXgpIHsgdGhpcy5jb3VudE1heC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9jb3VudE1heCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmNvdW50TWF4ID0gbmV3IGZoaXIuRmhpclBvc2l0aXZlSW50KHNvdXJjZS5fY291bnRNYXggYXMgUGFydGlhbDxmaGlyLkZoaXJQb3NpdGl2ZUludEFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnZHVyYXRpb24nXSkgeyB0aGlzLmR1cmF0aW9uID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoe3ZhbHVlOiBzb3VyY2UuZHVyYXRpb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2R1cmF0aW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZHVyYXRpb24pIHsgdGhpcy5kdXJhdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9kdXJhdGlvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmR1cmF0aW9uID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoc291cmNlLl9kdXJhdGlvbiBhcyBQYXJ0aWFsPGZoaXIuRmhpckRlY2ltYWxBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2R1cmF0aW9uTWF4J10pIHsgdGhpcy5kdXJhdGlvbk1heCA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHt2YWx1ZTogc291cmNlLmR1cmF0aW9uTWF4fSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19kdXJhdGlvbk1heCddKSB7XHJcbiAgICAgIGlmICh0aGlzLmR1cmF0aW9uTWF4KSB7IHRoaXMuZHVyYXRpb25NYXguYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZHVyYXRpb25NYXghKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5kdXJhdGlvbk1heCA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHNvdXJjZS5fZHVyYXRpb25NYXggYXMgUGFydGlhbDxmaGlyLkZoaXJEZWNpbWFsQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydkdXJhdGlvblVuaXQnXSkgeyB0aGlzLmR1cmF0aW9uVW5pdCA9IG5ldyBmaGlyLkZoaXJDb2RlPFVuaXRzT2ZUaW1lQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLmR1cmF0aW9uVW5pdH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfZHVyYXRpb25Vbml0J10pIHtcclxuICAgICAgaWYgKHRoaXMuZHVyYXRpb25Vbml0KSB7IHRoaXMuZHVyYXRpb25Vbml0LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2R1cmF0aW9uVW5pdCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmR1cmF0aW9uVW5pdCA9IG5ldyBmaGlyLkZoaXJDb2RlPFVuaXRzT2ZUaW1lQ29kZVR5cGU+KHNvdXJjZS5fZHVyYXRpb25Vbml0IGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydmcmVxdWVuY3knXSkgeyB0aGlzLmZyZXF1ZW5jeSA9IG5ldyBmaGlyLkZoaXJQb3NpdGl2ZUludCh7dmFsdWU6IHNvdXJjZS5mcmVxdWVuY3l9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2ZyZXF1ZW5jeSddKSB7XHJcbiAgICAgIGlmICh0aGlzLmZyZXF1ZW5jeSkgeyB0aGlzLmZyZXF1ZW5jeS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9mcmVxdWVuY3khKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5mcmVxdWVuY3kgPSBuZXcgZmhpci5GaGlyUG9zaXRpdmVJbnQoc291cmNlLl9mcmVxdWVuY3kgYXMgUGFydGlhbDxmaGlyLkZoaXJQb3NpdGl2ZUludEFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnZnJlcXVlbmN5TWF4J10pIHsgdGhpcy5mcmVxdWVuY3lNYXggPSBuZXcgZmhpci5GaGlyUG9zaXRpdmVJbnQoe3ZhbHVlOiBzb3VyY2UuZnJlcXVlbmN5TWF4fSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19mcmVxdWVuY3lNYXgnXSkge1xyXG4gICAgICBpZiAodGhpcy5mcmVxdWVuY3lNYXgpIHsgdGhpcy5mcmVxdWVuY3lNYXguYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZnJlcXVlbmN5TWF4ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZnJlcXVlbmN5TWF4ID0gbmV3IGZoaXIuRmhpclBvc2l0aXZlSW50KHNvdXJjZS5fZnJlcXVlbmN5TWF4IGFzIFBhcnRpYWw8Zmhpci5GaGlyUG9zaXRpdmVJbnRBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3BlcmlvZCddKSB7IHRoaXMucGVyaW9kID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoe3ZhbHVlOiBzb3VyY2UucGVyaW9kfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19wZXJpb2QnXSkge1xyXG4gICAgICBpZiAodGhpcy5wZXJpb2QpIHsgdGhpcy5wZXJpb2QuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fcGVyaW9kISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMucGVyaW9kID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoc291cmNlLl9wZXJpb2QgYXMgUGFydGlhbDxmaGlyLkZoaXJEZWNpbWFsQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydwZXJpb2RNYXgnXSkgeyB0aGlzLnBlcmlvZE1heCA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHt2YWx1ZTogc291cmNlLnBlcmlvZE1heH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfcGVyaW9kTWF4J10pIHtcclxuICAgICAgaWYgKHRoaXMucGVyaW9kTWF4KSB7IHRoaXMucGVyaW9kTWF4LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3BlcmlvZE1heCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnBlcmlvZE1heCA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHNvdXJjZS5fcGVyaW9kTWF4IGFzIFBhcnRpYWw8Zmhpci5GaGlyRGVjaW1hbEFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsncGVyaW9kVW5pdCddKSB7IHRoaXMucGVyaW9kVW5pdCA9IG5ldyBmaGlyLkZoaXJDb2RlPFVuaXRzT2ZUaW1lQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnBlcmlvZFVuaXR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3BlcmlvZFVuaXQnXSkge1xyXG4gICAgICBpZiAodGhpcy5wZXJpb2RVbml0KSB7IHRoaXMucGVyaW9kVW5pdC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9wZXJpb2RVbml0ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMucGVyaW9kVW5pdCA9IG5ldyBmaGlyLkZoaXJDb2RlPFVuaXRzT2ZUaW1lQ29kZVR5cGU+KHNvdXJjZS5fcGVyaW9kVW5pdCBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGF5T2ZXZWVrJ10pIHsgdGhpcy5kYXlPZldlZWsgPSBzb3VyY2UuZGF5T2ZXZWVrLm1hcCgoeCkgPT4gbmV3IGZoaXIuRmhpckNvZGU8RGF5c09mV2Vla0NvZGVUeXBlPih7dmFsdWU6IHh9KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmRheU9mV2VlayA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydfZGF5T2ZXZWVrJ10pIHtcclxuICAgICAgc291cmNlLl9kYXlPZldlZWsuZm9yRWFjaCgoeCxpKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGF5T2ZXZWVrLmxlbmd0aCA+PSBpKSB7IGlmICh4KSB7IHRoaXMuZGF5T2ZXZWVrW2ldLmFkZEV4dGVuZGVkUHJvcGVydGllcyh4KTsgfSB9XHJcbiAgICAgICAgZWxzZSB7IGlmICh4KSB7IHRoaXMuZGF5T2ZXZWVrLnB1c2gobmV3IGZoaXIuRmhpckNvZGU8RGF5c09mV2Vla0NvZGVUeXBlPih4IGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pKTsgfSB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsndGltZU9mRGF5J10pIHsgdGhpcy50aW1lT2ZEYXkgPSBzb3VyY2UudGltZU9mRGF5Lm1hcCgoeCkgPT4gbmV3IGZoaXIuRmhpclRpbWUoe3ZhbHVlOiB4fSkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy50aW1lT2ZEYXkgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3RpbWVPZkRheSddKSB7XHJcbiAgICAgIHNvdXJjZS5fdGltZU9mRGF5LmZvckVhY2goKHgsaSkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLnRpbWVPZkRheS5sZW5ndGggPj0gaSkgeyBpZiAoeCkgeyB0aGlzLnRpbWVPZkRheVtpXS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoeCk7IH0gfVxyXG4gICAgICAgIGVsc2UgeyBpZiAoeCkgeyB0aGlzLnRpbWVPZkRheS5wdXNoKG5ldyBmaGlyLkZoaXJUaW1lKHggYXMgUGFydGlhbDxmaGlyLkZoaXJUaW1lQXJncz4pKTsgfSB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnd2hlbiddKSB7IHRoaXMud2hlbiA9IHNvdXJjZS53aGVuLm1hcCgoeCkgPT4gbmV3IGZoaXIuRmhpckNvZGUoe3ZhbHVlOiB4fSkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy53aGVuID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ193aGVuJ10pIHtcclxuICAgICAgc291cmNlLl93aGVuLmZvckVhY2goKHgsaSkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLndoZW4ubGVuZ3RoID49IGkpIHsgaWYgKHgpIHsgdGhpcy53aGVuW2ldLmFkZEV4dGVuZGVkUHJvcGVydGllcyh4KTsgfSB9XHJcbiAgICAgICAgZWxzZSB7IGlmICh4KSB7IHRoaXMud2hlbi5wdXNoKG5ldyBmaGlyLkZoaXJDb2RlKHggYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlQXJncz4pKTsgfSB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnb2Zmc2V0J10pIHsgdGhpcy5vZmZzZXQgPSBuZXcgZmhpci5GaGlyVW5zaWduZWRJbnQoe3ZhbHVlOiBzb3VyY2Uub2Zmc2V0fSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19vZmZzZXQnXSkge1xyXG4gICAgICBpZiAodGhpcy5vZmZzZXQpIHsgdGhpcy5vZmZzZXQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fb2Zmc2V0ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMub2Zmc2V0ID0gbmV3IGZoaXIuRmhpclVuc2lnbmVkSW50KHNvdXJjZS5fb2Zmc2V0IGFzIFBhcnRpYWw8Zmhpci5GaGlyVW5zaWduZWRJbnRBcmdzPik7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdUaW1pbmcucmVwZWF0JyB9XHJcbiAgICB0aGlzLnZPUygnYm91bmRzJyxleHApXHJcbiAgICB0aGlzLnZPUygnY291bnQnLGV4cClcclxuICAgIHRoaXMudk9TKCdjb3VudE1heCcsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2R1cmF0aW9uJyxleHApXHJcbiAgICB0aGlzLnZPUygnZHVyYXRpb25NYXgnLGV4cClcclxuICAgIHRoaXMudk9TVignZHVyYXRpb25Vbml0JyxleHAsJ1VuaXRzT2ZUaW1lJyxVbml0c09mVGltZVZzVmFsaWRhdGlvbiwncicpXHJcbiAgICB0aGlzLnZPUygnZnJlcXVlbmN5JyxleHApXHJcbiAgICB0aGlzLnZPUygnZnJlcXVlbmN5TWF4JyxleHApXHJcbiAgICB0aGlzLnZPUygncGVyaW9kJyxleHApXHJcbiAgICB0aGlzLnZPUygncGVyaW9kTWF4JyxleHApXHJcbiAgICB0aGlzLnZPU1YoJ3BlcmlvZFVuaXQnLGV4cCwnVW5pdHNPZlRpbWUnLFVuaXRzT2ZUaW1lVnNWYWxpZGF0aW9uLCdyJylcclxuICAgIHRoaXMudk9BVignZGF5T2ZXZWVrJyxleHAsJ0RheXNPZldlZWsnLERheXNPZldlZWtWc1ZhbGlkYXRpb24sJ3InKVxyXG4gICAgdGhpcy52T0EoJ3RpbWVPZkRheScsZXhwKVxyXG4gICAgdGhpcy52T0FWKCd3aGVuJyxleHAsJ0V2ZW50VGltaW5nJyxFdmVudFRpbWluZ1ZzVmFsaWRhdGlvbiwncicpXHJcbiAgICB0aGlzLnZPUygnb2Zmc2V0JyxleHApXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgVGltaW5nIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFRpbWluZ0FyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgc3BlY2lmaWMgdGltZXMgd2hlbiB0aGUgZXZlbnQgb2NjdXJzLlxyXG4gICAqL1xyXG4gIGV2ZW50PzogZmhpci5GaGlyRGF0ZVRpbWVbXXwoc3RyaW5nfG51bGwpW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBUaW1pbmcuZXZlbnRcclxuICAgKi9cclxuICBfZXZlbnQ/OihmaGlyLkZoaXJFbGVtZW50QXJnc3xudWxsKVtdO1xyXG4gIC8qKlxyXG4gICAqIEEgc2V0IG9mIHJ1bGVzIHRoYXQgZGVzY3JpYmUgd2hlbiB0aGUgZXZlbnQgaXMgc2NoZWR1bGVkLlxyXG4gICAqL1xyXG4gIHJlcGVhdD86IGZoaXIuVGltaW5nUmVwZWF0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQklEIGV0Yy4gYXJlIGRlZmluZWQgYXMgJ2F0IGluc3RpdHV0aW9uYWxseSBzcGVjaWZpZWQgdGltZXMnLiBGb3IgZXhhbXBsZSwgYW4gaW5zdGl0dXRpb24gbWF5IGNob29zZSB0aGF0IEJJRCBpcyBcImFsd2F5cyBhdCA3YW0gYW5kIDZwbVwiLiAgSWYgaXQgaXMgaW5hcHByb3ByaWF0ZSBmb3IgdGhpcyBjaG9pY2UgdG8gYmUgbWFkZSwgdGhlIGNvZGUgQklEIHNob3VsZCBub3QgYmUgdXNlZC4gSW5zdGVhZCwgYSBkaXN0aW5jdCBvcmdhbml6YXRpb24tc3BlY2lmaWMgY29kZSBzaG91bGQgYmUgdXNlZCBpbiBwbGFjZSBvZiB0aGUgSEw3LWRlZmluZWQgQklEIGNvZGUgYW5kL29yIGEgc3RydWN0dXJlZCByZXByZXNlbnRhdGlvbiBzaG91bGQgYmUgdXNlZCAoaW4gdGhpcyBjYXNlLCBzcGVjaWZ5aW5nIHRoZSB0d28gZXZlbnQgdGltZXMpLlxyXG4gICAqL1xyXG4gIGNvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogU3BlY2lmaWVzIGFuIGV2ZW50IHRoYXQgbWF5IG9jY3VyIG11bHRpcGxlIHRpbWVzLiBUaW1pbmcgc2NoZWR1bGVzIGFyZSB1c2VkIHRvIHJlY29yZCB3aGVuIHRoaW5ncyBhcmUgcGxhbm5lZCwgZXhwZWN0ZWQgb3IgcmVxdWVzdGVkIHRvIG9jY3VyLiBUaGUgbW9zdCBjb21tb24gdXNhZ2UgaXMgaW4gZG9zYWdlIGluc3RydWN0aW9ucyBmb3IgbWVkaWNhdGlvbnMuIFRoZXkgYXJlIGFsc28gdXNlZCB3aGVuIHBsYW5uaW5nIGNhcmUgb2YgdmFyaW91cyBraW5kcywgYW5kIG1heSBiZSB1c2VkIGZvciByZXBvcnRpbmcgdGhlIHNjaGVkdWxlIHRvIHdoaWNoIHBhc3QgcmVndWxhciBhY3Rpdml0aWVzIHdlcmUgY2FycmllZCBvdXQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVGltaW5nIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnVGltaW5nJztcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHNwZWNpZmljIHRpbWVzIHdoZW4gdGhlIGV2ZW50IG9jY3Vycy5cclxuICAgKi9cclxuICBwdWJsaWMgZXZlbnQ6IGZoaXIuRmhpckRhdGVUaW1lW107XHJcbiAgLyoqXHJcbiAgICogQSBzZXQgb2YgcnVsZXMgdGhhdCBkZXNjcmliZSB3aGVuIHRoZSBldmVudCBpcyBzY2hlZHVsZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHJlcGVhdD86IGZoaXIuVGltaW5nUmVwZWF0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBCSUQgZXRjLiBhcmUgZGVmaW5lZCBhcyAnYXQgaW5zdGl0dXRpb25hbGx5IHNwZWNpZmllZCB0aW1lcycuIEZvciBleGFtcGxlLCBhbiBpbnN0aXR1dGlvbiBtYXkgY2hvb3NlIHRoYXQgQklEIGlzIFwiYWx3YXlzIGF0IDdhbSBhbmQgNnBtXCIuICBJZiBpdCBpcyBpbmFwcHJvcHJpYXRlIGZvciB0aGlzIGNob2ljZSB0byBiZSBtYWRlLCB0aGUgY29kZSBCSUQgc2hvdWxkIG5vdCBiZSB1c2VkLiBJbnN0ZWFkLCBhIGRpc3RpbmN0IG9yZ2FuaXphdGlvbi1zcGVjaWZpYyBjb2RlIHNob3VsZCBiZSB1c2VkIGluIHBsYWNlIG9mIHRoZSBITDctZGVmaW5lZCBCSUQgY29kZSBhbmQvb3IgYSBzdHJ1Y3R1cmVkIHJlcHJlc2VudGF0aW9uIHNob3VsZCBiZSB1c2VkIChpbiB0aGlzIGNhc2UsIHNwZWNpZnlpbmcgdGhlIHR3byBldmVudCB0aW1lcykuXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgVGltaW5nIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8VGltaW5nQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2V2ZW50J10pIHsgdGhpcy5ldmVudCA9IHNvdXJjZS5ldmVudC5tYXAoKHgpID0+IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHh9KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmV2ZW50ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ19ldmVudCddKSB7XHJcbiAgICAgIHNvdXJjZS5fZXZlbnQuZm9yRWFjaCgoeCxpKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuZXZlbnQubGVuZ3RoID49IGkpIHsgaWYgKHgpIHsgdGhpcy5ldmVudFtpXS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoeCk7IH0gfVxyXG4gICAgICAgIGVsc2UgeyBpZiAoeCkgeyB0aGlzLmV2ZW50LnB1c2gobmV3IGZoaXIuRmhpckRhdGVUaW1lKHggYXMgUGFydGlhbDxmaGlyLkZoaXJEYXRlVGltZUFyZ3M+KSk7IH0gfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3JlcGVhdCddKSB7IHRoaXMucmVwZWF0ID0gbmV3IGZoaXIuVGltaW5nUmVwZWF0KHNvdXJjZS5yZXBlYXQpOyB9XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jb2RlKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ1RpbWluZycgfVxyXG4gICAgdGhpcy52T0EoJ2V2ZW50JyxleHApXHJcbiAgICB0aGlzLnZPUygncmVwZWF0JyxleHApXHJcbiAgICB0aGlzLnZPUygnY29kZScsZXhwKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuIl19