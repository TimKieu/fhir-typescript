// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR ComplexType: Timing
import * as fhir from '../fhir.js';
// @ts-ignore
import { UnitsOfTimeCodes } from '../fhirValueSets/UnitsOfTimeCodes.js';
// @ts-ignore
import { DaysOfWeekCodes } from '../fhirValueSets/DaysOfWeekCodes.js';
// @ts-ignore
import { EventTimingCodes } from '../fhirValueSets/EventTimingCodes.js';
// @ts-ignore
import { TimingAbbreviationCodings, } from '../fhirValueSets/TimingAbbreviationCodings.js';
/**
 * A set of rules that describe when the event is scheduled.
 */
export class TimingRepeat extends fhir.FhirElement {
    /**
     * Default constructor for TimingRepeat - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['bounds']) {
            this.bounds = source.bounds;
        }
        else if (source['boundsDuration']) {
            this.bounds = new fhir.Duration(source.boundsDuration);
        }
        else if (source['boundsRange']) {
            this.bounds = new fhir.Range(source.boundsRange);
        }
        else if (source['boundsPeriod']) {
            this.bounds = new fhir.Period(source.boundsPeriod);
        }
        if (source['count']) {
            this.count = new fhir.FhirPositiveInt({ value: source.count });
        }
        if (source['countMax']) {
            this.countMax = new fhir.FhirPositiveInt({ value: source.countMax });
        }
        if (source['duration']) {
            this.duration = new fhir.FhirDecimal({ value: source.duration });
        }
        if (source['durationMax']) {
            this.durationMax = new fhir.FhirDecimal({ value: source.durationMax });
        }
        if (source['durationUnit']) {
            this.durationUnit = new fhir.FhirCode({ value: source.durationUnit });
        }
        if (source['frequency']) {
            this.frequency = new fhir.FhirPositiveInt({ value: source.frequency });
        }
        if (source['frequencyMax']) {
            this.frequencyMax = new fhir.FhirPositiveInt({ value: source.frequencyMax });
        }
        if (source['period']) {
            this.period = new fhir.FhirDecimal({ value: source.period });
        }
        if (source['periodMax']) {
            this.periodMax = new fhir.FhirDecimal({ value: source.periodMax });
        }
        if (source['periodUnit']) {
            this.periodUnit = new fhir.FhirCode({ value: source.periodUnit });
        }
        if (source['dayOfWeek']) {
            this.dayOfWeek = source.dayOfWeek.map((x) => new fhir.FhirCode({ value: x }));
        }
        else {
            this.dayOfWeek = [];
        }
        if (source['timeOfDay']) {
            this.timeOfDay = source.timeOfDay.map((x) => new fhir.FhirTime({ value: x }));
        }
        else {
            this.timeOfDay = [];
        }
        if (source['when']) {
            this.when = source.when.map((x) => new fhir.FhirCode({ value: x }));
        }
        else {
            this.when = [];
        }
        if (source['offset']) {
            this.offset = new fhir.FhirUnsignedInt({ value: source.offset });
        }
    }
    /**
     * Required-bound Value Set for durationUnit (Timing.repeat.durationUnit)
     */
    static get durationUnitRequiredCodes() {
        return UnitsOfTimeCodes;
    }
    /**
     * Required-bound Value Set for periodUnit (Timing.repeat.periodUnit)
     */
    static get periodUnitRequiredCodes() {
        return UnitsOfTimeCodes;
    }
    /**
     * Required-bound Value Set for dayOfWeek (Timing.repeat.dayOfWeek)
     */
    static get dayOfWeekRequiredCodes() {
        return DaysOfWeekCodes;
    }
    /**
     * Required-bound Value Set for when (Timing.repeat.when)
     */
    static get whenRequiredCodes() {
        return EventTimingCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["count"]) {
            issues.push(...this.count.doModelValidation());
        }
        if (this["countMax"]) {
            issues.push(...this.countMax.doModelValidation());
        }
        if (this["duration"]) {
            issues.push(...this.duration.doModelValidation());
        }
        if (this["durationMax"]) {
            issues.push(...this.durationMax.doModelValidation());
        }
        if (this['durationUnit'] && (!Object.values(UnitsOfTimeCodes).includes(this.durationUnit))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property durationUnit?:fhir.FhirCode<UnitsOfTimeCodeType> fhir: Timing.repeat.durationUnit:code Required binding to: UnitsOfTime' });
        }
        if (this["durationUnit"]) {
            issues.push(...this.durationUnit.doModelValidation());
        }
        if (this["frequency"]) {
            issues.push(...this.frequency.doModelValidation());
        }
        if (this["frequencyMax"]) {
            issues.push(...this.frequencyMax.doModelValidation());
        }
        if (this["period"]) {
            issues.push(...this.period.doModelValidation());
        }
        if (this["periodMax"]) {
            issues.push(...this.periodMax.doModelValidation());
        }
        if (this['periodUnit'] && (!Object.values(UnitsOfTimeCodes).includes(this.periodUnit))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property periodUnit?:fhir.FhirCode<UnitsOfTimeCodeType> fhir: Timing.repeat.periodUnit:code Required binding to: UnitsOfTime' });
        }
        if (this["periodUnit"]) {
            issues.push(...this.periodUnit.doModelValidation());
        }
        if (this['dayOfWeek']) {
            this.dayOfWeek.forEach((v) => {
                if (!Object.values(DaysOfWeekCodes).includes(v)) {
                    issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property dayOfWeek?:fhir.FhirCode<DaysOfWeekCodeType>[] fhir: Timing.repeat.dayOfWeek:code Required binding to: DaysOfWeek' });
                }
            });
        }
        if (this["dayOfWeek"]) {
            this.dayOfWeek.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["timeOfDay"]) {
            this.timeOfDay.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this['when']) {
            this.when.forEach((v) => {
                if (!Object.values(EventTimingCodes).includes(v)) {
                    issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property when?:fhir.FhirCode[] fhir: Timing.repeat.when:code Required binding to: EventTiming' });
                }
            });
        }
        if (this["when"]) {
            this.when.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["offset"]) {
            issues.push(...this.offset.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
TimingRepeat._fts_dataType = 'TimingRepeat';
/**
 * Internal flag to properly serialize choice-type element Timing.repeat.bounds[x]
 */
TimingRepeat._fts_boundsIsChoice = true;
/**
 * Specifies an event that may occur multiple times. Timing schedules are used to record when things are planned, expected or requested to occur. The most common usage is in dosage instructions for medications. They are also used when planning care of various kinds, and may be used for reporting the schedule to which past regular activities were carried out.
 */
export class Timing extends fhir.BackboneElement {
    /**
     * Default constructor for Timing - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['event']) {
            this.event = source.event.map((x) => new fhir.FhirDateTime({ value: x }));
        }
        else {
            this.event = [];
        }
        if (source['repeat']) {
            this.repeat = new fhir.TimingRepeat(source.repeat);
        }
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
    }
    /**
     * Preferred-bound Value Set for code (Timing.code)
     */
    static get codePreferredCodings() {
        return TimingAbbreviationCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["event"]) {
            this.event.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["repeat"]) {
            issues.push(...this.repeat.doModelValidation());
        }
        if (this["code"]) {
            issues.push(...this.code.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
Timing._fts_dataType = 'Timing';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGltaW5nLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9UaW1pbmcudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsMkJBQTJCO0FBRTNCLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBSW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsZ0JBQWdCLEVBQXdCLE1BQU0sc0NBQXNDLENBQUM7QUFHOUYsYUFBYTtBQUNiLE9BQU8sRUFBRSxlQUFlLEVBQXVCLE1BQU0scUNBQXFDLENBQUM7QUFHM0YsYUFBYTtBQUNiLE9BQU8sRUFBRSxnQkFBZ0IsRUFBd0IsTUFBTSxzQ0FBc0MsQ0FBQztBQUM5RixhQUFhO0FBQ2IsT0FBTyxFQUFFLHlCQUF5QixHQUFnQyxNQUFNLCtDQUErQyxDQUFDO0FBaUZ4SDs7R0FFRztBQUNILE1BQU0sT0FBTyxZQUFhLFNBQVEsSUFBSSxDQUFDLFdBQVc7SUFxRWhEOztPQUVHO0lBQ0gsWUFBWSxTQUFtQyxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUN6RixLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDO1NBQUU7YUFDakQsSUFBSSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQztTQUFFO2FBQ3pGLElBQUksTUFBTSxDQUFDLGFBQWEsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1NBQUU7YUFDaEYsSUFBSSxNQUFNLENBQUMs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QUNhLGlCQUFpQjtRQUMvQixJQUFJLE1BQU0sR0FBbUIsS0FBSyxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDdkQsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtTQUFFO1FBQzVGLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFDeEUsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUNwRSxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQXpDRDs7R0FFRztBQUM2QixvQkFBYSxHQUFVLFFBQVEsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNC5jb3JlIHZlcnNpb246IDQuMC4xXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBDb21wbGV4VHlwZTogVGltaW5nXHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBVbml0c09mVGltZUNvZGluZ3MsIFVuaXRzT2ZUaW1lQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVW5pdHNPZlRpbWVDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBVbml0c09mVGltZUNvZGVzLCAgVW5pdHNPZlRpbWVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVW5pdHNPZlRpbWVDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRGF5c09mV2Vla0NvZGluZ3MsIERheXNPZldlZWtDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9EYXlzT2ZXZWVrQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRGF5c09mV2Vla0NvZGVzLCAgRGF5c09mV2Vla0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9EYXlzT2ZXZWVrQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEV2ZW50VGltaW5nQ29kaW5ncywgRXZlbnRUaW1pbmdDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9FdmVudFRpbWluZ0NvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEV2ZW50VGltaW5nQ29kZXMsICBFdmVudFRpbWluZ0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9FdmVudFRpbWluZ0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBUaW1pbmdBYmJyZXZpYXRpb25Db2RpbmdzLCBUaW1pbmdBYmJyZXZpYXRpb25Db2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9UaW1pbmdBYmJyZXZpYXRpb25Db2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBUaW1pbmdBYmJyZXZpYXRpb25Db2RlcywgIFRpbWluZ0FiYnJldmlhdGlvbkNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9UaW1pbmdBYmJyZXZpYXRpb25Db2Rlcy5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBUaW1pbmdSZXBlYXQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgVGltaW5nUmVwZWF0QXJncyBleHRlbmRzIGZoaXIuRmhpckVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBFaXRoZXIgYSBkdXJhdGlvbiBmb3IgdGhlIGxlbmd0aCBvZiB0aGUgdGltaW5nIHNjaGVkdWxlLCBhIHJhbmdlIG9mIHBvc3NpYmxlIGxlbmd0aCwgb3Igb3V0ZXIgYm91bmRzIGZvciBzdGFydCBhbmQvb3IgZW5kIGxpbWl0cyBvZiB0aGUgdGltaW5nIHNjaGVkdWxlLlxyXG4gICAqL1xyXG4gIGJvdW5kcz86IGZoaXIuRHVyYXRpb258Zmhpci5SYW5nZXxmaGlyLlBlcmlvZHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRWl0aGVyIGEgZHVyYXRpb24gZm9yIHRoZSBsZW5ndGggb2YgdGhlIHRpbWluZyBzY2hlZHVsZSwgYSByYW5nZSBvZiBwb3NzaWJsZSBsZW5ndGgsIG9yIG91dGVyIGJvdW5kcyBmb3Igc3RhcnQgYW5kL29yIGVuZCBsaW1pdHMgb2YgdGhlIHRpbWluZyBzY2hlZHVsZS5cclxuICAgKi9cclxuICBib3VuZHNEdXJhdGlvbj86IGZoaXIuRHVyYXRpb25BcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFaXRoZXIgYSBkdXJhdGlvbiBmb3IgdGhlIGxlbmd0aCBvZiB0aGUgdGltaW5nIHNjaGVkdWxlLCBhIHJhbmdlIG9mIHBvc3NpYmxlIGxlbmd0aCwgb3Igb3V0ZXIgYm91bmRzIGZvciBzdGFydCBhbmQvb3IgZW5kIGxpbWl0cyBvZiB0aGUgdGltaW5nIHNjaGVkdWxlLlxyXG4gICAqL1xyXG4gIGJvdW5kc1JhbmdlPzogZmhpci5SYW5nZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEVpdGhlciBhIGR1cmF0aW9uIGZvciB0aGUgbGVuZ3RoIG9mIHRoZSB0aW1pbmcgc2NoZWR1bGUsIGEgcmFuZ2Ugb2YgcG9zc2libGUgbGVuZ3RoLCBvciBvdXRlciBib3VuZHMgZm9yIHN0YXJ0IGFuZC9vciBlbmQgbGltaXRzIG9mIHRoZSB0aW1pbmcgc2NoZWR1bGUuXHJcbiAgICovXHJcbiAgYm91bmRzUGVyaW9kPzogZmhpci5QZXJpb2RBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiB5b3UgaGF2ZSBib3RoIGJvdW5kcyBhbmQgY291bnQsIHRoZW4gdGhpcyBzaG91bGQgYmUgdW5kZXJzdG9vZCBhcyB3aXRoaW4gdGhlIGJvdW5kcyBwZXJpb2QsIHVudGlsIGNvdW50IHRpbWVzIGhhcHBlbnMuXHJcbiAgICovXHJcbiAgY291bnQ/OiBmaGlyLkZoaXJQb3NpdGl2ZUludHxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIHByZXNlbnQsIGluZGljYXRlcyB0aGF0IHRoZSBjb3VudCBpcyBhIHJhbmdlIC0gc28gdG8gcGVyZm9ybSB0aGUgYWN0aW9uIGJldHdlZW4gW2NvdW50XSBhbmQgW2NvdW50TWF4XSB0aW1lcy5cclxuICAgKi9cclxuICBjb3VudE1heD86IGZoaXIuRmhpclBvc2l0aXZlSW50fG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRm9yIHNvbWUgZXZlbnRzIHRoZSBkdXJhdGlvbiBpcyBwYXJ0IG9mIHRoZSBkZWZpbml0aW9uIG9mIHRoZSBldmVudCAoZS5nLiBJViBpbmZ1c2lvbnMsIHdoZXJlIHRoZSBkdXJhdGlvbiBpcyBpbXBsaWNpdCBpbiB0aGUgc3BlY2lmaWVkIHF1YW50aXR5IGFuZCByYXRlKS4gRm9yIG90aGVycywgaXQncyBwYXJ0IG9mIHRoZSB0aW1pbmcgc3BlY2lmaWNhdGlvbiAoZS5nLiBleGVyY2lzZSkuXHJcbiAgICovXHJcbiAgZHVyYXRpb24/OiBmaGlyLkZoaXJEZWNpbWFsfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRm9yIHNvbWUgZXZlbnRzIHRoZSBkdXJhdGlvbiBpcyBwYXJ0IG9mIHRoZSBkZWZpbml0aW9uIG9mIHRoZSBldmVudCAoZS5nLiBJViBpbmZ1c2lvbnMsIHdoZXJlIHRoZSBkdXJhdGlvbiBpcyBpbXBsaWNpdCBpbiB0aGUgc3BlY2lmaWVkIHF1YW50aXR5IGFuZCByYXRlKS4gRm9yIG90aGVycywgaXQncyBwYXJ0IG9mIHRoZSB0aW1pbmcgc3BlY2lmaWNhdGlvbiAoZS5nLiBleGVyY2lzZSkuXHJcbiAgICovXHJcbiAgZHVyYXRpb25NYXg/OiBmaGlyLkZoaXJEZWNpbWFsfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHVuaXRzIG9mIHRpbWUgZm9yIHRoZSBkdXJhdGlvbiwgaW4gVUNVTSB1bml0cy5cclxuICAgKi9cclxuICBkdXJhdGlvblVuaXQ/OiBmaGlyLkZoaXJDb2RlPFVuaXRzT2ZUaW1lQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG51bWJlciBvZiB0aW1lcyB0byByZXBlYXQgdGhlIGFjdGlvbiB3aXRoaW4gdGhlIHNwZWNpZmllZCBwZXJpb2QuIElmIGZyZXF1ZW5jeU1heCBpcyBwcmVzZW50LCB0aGlzIGVsZW1lbnQgaW5kaWNhdGVzIHRoZSBsb3dlciBib3VuZCBvZiB0aGUgYWxsb3dlZCByYW5nZSBvZiB0aGUgZnJlcXVlbmN5LlxyXG4gICAqL1xyXG4gIGZyZXF1ZW5jeT86IGZoaXIuRmhpclBvc2l0aXZlSW50fG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgcHJlc2VudCwgaW5kaWNhdGVzIHRoYXQgdGhlIGZyZXF1ZW5jeSBpcyBhIHJhbmdlIC0gc28gdG8gcmVwZWF0IGJldHdlZW4gW2ZyZXF1ZW5jeV0gYW5kIFtmcmVxdWVuY3lNYXhdIHRpbWVzIHdpdGhpbiB0aGUgcGVyaW9kIG9yIHBlcmlvZCByYW5nZS5cclxuICAgKi9cclxuICBmcmVxdWVuY3lNYXg/OiBmaGlyLkZoaXJQb3NpdGl2ZUludHxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB0aGUgZHVyYXRpb24gb2YgdGltZSBvdmVyIHdoaWNoIHJlcGV0aXRpb25zIGFyZSB0byBvY2N1cjsgZS5nLiB0byBleHByZXNzIFwiMyB0aW1lcyBwZXIgZGF5XCIsIDMgd291bGQgYmUgdGhlIGZyZXF1ZW5jeSBhbmQgXCIxIGRheVwiIHdvdWxkIGJlIHRoZSBwZXJpb2QuIElmIHBlcmlvZE1heCBpcyBwcmVzZW50LCB0aGlzIGVsZW1lbnQgaW5kaWNhdGVzIHRoZSBsb3dlciBib3VuZCBvZiB0aGUgYWxsb3dlZCByYW5nZSBvZiB0aGUgcGVyaW9kIGxlbmd0aC5cclxuICAgKi9cclxuICBwZXJpb2Q/OiBmaGlyLkZoaXJEZWNpbWFsfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgcHJlc2VudCwgaW5kaWNhdGVzIHRoYXQgdGhlIHBlcmlvZCBpcyBhIHJhbmdlIGZyb20gW3BlcmlvZF0gdG8gW3BlcmlvZE1heF0sIGFsbG93aW5nIGV4cHJlc3NpbmcgY29uY2VwdHMgc3VjaCBhcyBcImRvIHRoaXMgb25jZSBldmVyeSAzLTUgZGF5cy5cclxuICAgKi9cclxuICBwZXJpb2RNYXg/OiBmaGlyLkZoaXJEZWNpbWFsfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHVuaXRzIG9mIHRpbWUgZm9yIHRoZSBwZXJpb2QgaW4gVUNVTSB1bml0cy5cclxuICAgKi9cclxuICBwZXJpb2RVbml0PzogZmhpci5GaGlyQ29kZTxVbml0c09mVGltZUNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIG5vIGRheXMgYXJlIHNwZWNpZmllZCwgdGhlIGFjdGlvbiBpcyBhc3N1bWVkIHRvIGhhcHBlbiBldmVyeSBkYXkgYXMgb3RoZXJ3aXNlIHNwZWNpZmllZC4gVGhlIGVsZW1lbnRzIGZyZXF1ZW5jeSBhbmQgcGVyaW9kIGNhbm5vdCBiZSB1c2VkIGFzIHdlbGwgYXMgZGF5T2ZXZWVrLlxyXG4gICAqL1xyXG4gIGRheU9mV2Vlaz86IGZoaXIuRmhpckNvZGU8RGF5c09mV2Vla0NvZGVUeXBlPltdfHN0cmluZ1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBXaGVuIHRpbWUgb2YgZGF5IGlzIHNwZWNpZmllZCwgaXQgaXMgaW5mZXJyZWQgdGhhdCB0aGUgYWN0aW9uIGhhcHBlbnMgZXZlcnkgZGF5IChhcyBmaWx0ZXJlZCBieSBkYXlvZldlZWspIG9uIHRoZSBzcGVjaWZpZWQgdGltZXMuIFRoZSBlbGVtZW50cyB3aGVuLCBmcmVxdWVuY3kgYW5kIHBlcmlvZCBjYW5ub3QgYmUgdXNlZCBhcyB3ZWxsIGFzIHRpbWVPZkRheS5cclxuICAgKi9cclxuICB0aW1lT2ZEYXk/OiBmaGlyLkZoaXJUaW1lW118c3RyaW5nW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFdoZW4gbW9yZSB0aGFuIG9uZSBldmVudCBpcyBsaXN0ZWQsIHRoZSBldmVudCBpcyB0aWVkIHRvIHRoZSB1bmlvbiBvZiB0aGUgc3BlY2lmaWVkIGV2ZW50cy5cclxuICAgKi9cclxuICB3aGVuPzogZmhpci5GaGlyQ29kZVtdfHN0cmluZ1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbnVtYmVyIG9mIG1pbnV0ZXMgZnJvbSB0aGUgZXZlbnQuIElmIHRoZSBldmVudCBjb2RlIGRvZXMgbm90IGluZGljYXRlIHdoZXRoZXIgdGhlIG1pbnV0ZXMgaXMgYmVmb3JlIG9yIGFmdGVyIHRoZSBldmVudCwgdGhlbiB0aGUgb2Zmc2V0IGlzIGFzc3VtZWQgdG8gYmUgYWZ0ZXIgdGhlIGV2ZW50LlxyXG4gICAqL1xyXG4gIG9mZnNldD86IGZoaXIuRmhpclVuc2lnbmVkSW50fG51bWJlcnx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBIHNldCBvZiBydWxlcyB0aGF0IGRlc2NyaWJlIHdoZW4gdGhlIGV2ZW50IGlzIHNjaGVkdWxlZC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBUaW1pbmdSZXBlYXQgZXh0ZW5kcyBmaGlyLkZoaXJFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1RpbWluZ1JlcGVhdCc7XHJcbiAgLyoqXHJcbiAgICogRWl0aGVyIGEgZHVyYXRpb24gZm9yIHRoZSBsZW5ndGggb2YgdGhlIHRpbWluZyBzY2hlZHVsZSwgYSByYW5nZSBvZiBwb3NzaWJsZSBsZW5ndGgsIG9yIG91dGVyIGJvdW5kcyBmb3Igc3RhcnQgYW5kL29yIGVuZCBsaW1pdHMgb2YgdGhlIHRpbWluZyBzY2hlZHVsZS5cclxuICAgKi9cclxuICBwdWJsaWMgYm91bmRzPzogKGZoaXIuRHVyYXRpb258Zmhpci5SYW5nZXxmaGlyLlBlcmlvZCl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgVGltaW5nLnJlcGVhdC5ib3VuZHNbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfYm91bmRzSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogSWYgeW91IGhhdmUgYm90aCBib3VuZHMgYW5kIGNvdW50LCB0aGVuIHRoaXMgc2hvdWxkIGJlIHVuZGVyc3Rvb2QgYXMgd2l0aGluIHRoZSBib3VuZHMgcGVyaW9kLCB1bnRpbCBjb3VudCB0aW1lcyBoYXBwZW5zLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb3VudD86IGZoaXIuRmhpclBvc2l0aXZlSW50fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiBwcmVzZW50LCBpbmRpY2F0ZXMgdGhhdCB0aGUgY291bnQgaXMgYSByYW5nZSAtIHNvIHRvIHBlcmZvcm0gdGhlIGFjdGlvbiBiZXR3ZWVuIFtjb3VudF0gYW5kIFtjb3VudE1heF0gdGltZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGNvdW50TWF4PzogZmhpci5GaGlyUG9zaXRpdmVJbnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEZvciBzb21lIGV2ZW50cyB0aGUgZHVyYXRpb24gaXMgcGFydCBvZiB0aGUgZGVmaW5pdGlvbiBvZiB0aGUgZXZlbnQgKGUuZy4gSVYgaW5mdXNpb25zLCB3aGVyZSB0aGUgZHVyYXRpb24gaXMgaW1wbGljaXQgaW4gdGhlIHNwZWNpZmllZCBxdWFudGl0eSBhbmQgcmF0ZSkuIEZvciBvdGhlcnMsIGl0J3MgcGFydCBvZiB0aGUgdGltaW5nIHNwZWNpZmljYXRpb24gKGUuZy4gZXhlcmNpc2UpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkdXJhdGlvbj86IGZoaXIuRmhpckRlY2ltYWx8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEZvciBzb21lIGV2ZW50cyB0aGUgZHVyYXRpb24gaXMgcGFydCBvZiB0aGUgZGVmaW5pdGlvbiBvZiB0aGUgZXZlbnQgKGUuZy4gSVYgaW5mdXNpb25zLCB3aGVyZSB0aGUgZHVyYXRpb24gaXMgaW1wbGljaXQgaW4gdGhlIHNwZWNpZmllZCBxdWFudGl0eSBhbmQgcmF0ZSkuIEZvciBvdGhlcnMsIGl0J3MgcGFydCBvZiB0aGUgdGltaW5nIHNwZWNpZmljYXRpb24gKGUuZy4gZXhlcmNpc2UpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkdXJhdGlvbk1heD86IGZoaXIuRmhpckRlY2ltYWx8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB1bml0cyBvZiB0aW1lIGZvciB0aGUgZHVyYXRpb24sIGluIFVDVU0gdW5pdHMuXHJcbiAgICovXHJcbiAgcHVibGljIGR1cmF0aW9uVW5pdD86IGZoaXIuRmhpckNvZGU8VW5pdHNPZlRpbWVDb2RlVHlwZT58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBudW1iZXIgb2YgdGltZXMgdG8gcmVwZWF0IHRoZSBhY3Rpb24gd2l0aGluIHRoZSBzcGVjaWZpZWQgcGVyaW9kLiBJZiBmcmVxdWVuY3lNYXggaXMgcHJlc2VudCwgdGhpcyBlbGVtZW50IGluZGljYXRlcyB0aGUgbG93ZXIgYm91bmQgb2YgdGhlIGFsbG93ZWQgcmFuZ2Ugb2YgdGhlIGZyZXF1ZW5jeS5cclxuICAgKi9cclxuICBwdWJsaWMgZnJlcXVlbmN5PzogZmhpci5GaGlyUG9zaXRpdmVJbnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIHByZXNlbnQsIGluZGljYXRlcyB0aGF0IHRoZSBmcmVxdWVuY3kgaXMgYSByYW5nZSAtIHNvIHRvIHJlcGVhdCBiZXR3ZWVuIFtmcmVxdWVuY3ldIGFuZCBbZnJlcXVlbmN5TWF4XSB0aW1lcyB3aXRoaW4gdGhlIHBlcmlvZCBvciBwZXJpb2QgcmFuZ2UuXHJcbiAgICovXHJcbiAgcHVibGljIGZyZXF1ZW5jeU1heD86IGZoaXIuRmhpclBvc2l0aXZlSW50fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgdGhlIGR1cmF0aW9uIG9mIHRpbWUgb3ZlciB3aGljaCByZXBldGl0aW9ucyBhcmUgdG8gb2NjdXI7IGUuZy4gdG8gZXhwcmVzcyBcIjMgdGltZXMgcGVyIGRheVwiLCAzIHdvdWxkIGJlIHRoZSBmcmVxdWVuY3kgYW5kIFwiMSBkYXlcIiB3b3VsZCBiZSB0aGUgcGVyaW9kLiBJZiBwZXJpb2RNYXggaXMgcHJlc2VudCwgdGhpcyBlbGVtZW50IGluZGljYXRlcyB0aGUgbG93ZXIgYm91bmQgb2YgdGhlIGFsbG93ZWQgcmFuZ2Ugb2YgdGhlIHBlcmlvZCBsZW5ndGguXHJcbiAgICovXHJcbiAgcHVibGljIHBlcmlvZD86IGZoaXIuRmhpckRlY2ltYWx8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIHByZXNlbnQsIGluZGljYXRlcyB0aGF0IHRoZSBwZXJpb2QgaXMgYSByYW5nZSBmcm9tIFtwZXJpb2RdIHRvIFtwZXJpb2RNYXhdLCBhbGxvd2luZyBleHByZXNzaW5nIGNvbmNlcHRzIHN1Y2ggYXMgXCJkbyB0aGlzIG9uY2UgZXZlcnkgMy01IGRheXMuXHJcbiAgICovXHJcbiAgcHVibGljIHBlcmlvZE1heD86IGZoaXIuRmhpckRlY2ltYWx8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB1bml0cyBvZiB0aW1lIGZvciB0aGUgcGVyaW9kIGluIFVDVU0gdW5pdHMuXHJcbiAgICovXHJcbiAgcHVibGljIHBlcmlvZFVuaXQ/OiBmaGlyLkZoaXJDb2RlPFVuaXRzT2ZUaW1lQ29kZVR5cGU+fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiBubyBkYXlzIGFyZSBzcGVjaWZpZWQsIHRoZSBhY3Rpb24gaXMgYXNzdW1lZCB0byBoYXBwZW4gZXZlcnkgZGF5IGFzIG90aGVyd2lzZSBzcGVjaWZpZWQuIFRoZSBlbGVtZW50cyBmcmVxdWVuY3kgYW5kIHBlcmlvZCBjYW5ub3QgYmUgdXNlZCBhcyB3ZWxsIGFzIGRheU9mV2Vlay5cclxuICAgKi9cclxuICBwdWJsaWMgZGF5T2ZXZWVrOiBmaGlyLkZoaXJDb2RlPERheXNPZldlZWtDb2RlVHlwZT5bXTtcclxuICAvKipcclxuICAgKiBXaGVuIHRpbWUgb2YgZGF5IGlzIHNwZWNpZmllZCwgaXQgaXMgaW5mZXJyZWQgdGhhdCB0aGUgYWN0aW9uIGhhcHBlbnMgZXZlcnkgZGF5IChhcyBmaWx0ZXJlZCBieSBkYXlvZldlZWspIG9uIHRoZSBzcGVjaWZpZWQgdGltZXMuIFRoZSBlbGVtZW50cyB3aGVuLCBmcmVxdWVuY3kgYW5kIHBlcmlvZCBjYW5ub3QgYmUgdXNlZCBhcyB3ZWxsIGFzIHRpbWVPZkRheS5cclxuICAgKi9cclxuICBwdWJsaWMgdGltZU9mRGF5OiBmaGlyLkZoaXJUaW1lW107XHJcbiAgLyoqXHJcbiAgICogV2hlbiBtb3JlIHRoYW4gb25lIGV2ZW50IGlzIGxpc3RlZCwgdGhlIGV2ZW50IGlzIHRpZWQgdG8gdGhlIHVuaW9uIG9mIHRoZSBzcGVjaWZpZWQgZXZlbnRzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB3aGVuOiBmaGlyLkZoaXJDb2RlW107XHJcbiAgLyoqXHJcbiAgICogVGhlIG51bWJlciBvZiBtaW51dGVzIGZyb20gdGhlIGV2ZW50LiBJZiB0aGUgZXZlbnQgY29kZSBkb2VzIG5vdCBpbmRpY2F0ZSB3aGV0aGVyIHRoZSBtaW51dGVzIGlzIGJlZm9yZSBvciBhZnRlciB0aGUgZXZlbnQsIHRoZW4gdGhlIG9mZnNldCBpcyBhc3N1bWVkIHRvIGJlIGFmdGVyIHRoZSBldmVudC5cclxuICAgKi9cclxuICBwdWJsaWMgb2Zmc2V0PzogZmhpci5GaGlyVW5zaWduZWRJbnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFRpbWluZ1JlcGVhdCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFRpbWluZ1JlcGVhdEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydib3VuZHMnXSkgeyB0aGlzLmJvdW5kcyA9IHNvdXJjZS5ib3VuZHM7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnYm91bmRzRHVyYXRpb24nXSkgeyB0aGlzLmJvdW5kcyA9IG5ldyBmaGlyLkR1cmF0aW9uKHNvdXJjZS5ib3VuZHNEdXJhdGlvbik7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnYm91bmRzUmFuZ2UnXSkgeyB0aGlzLmJvdW5kcyA9IG5ldyBmaGlyLlJhbmdlKHNvdXJjZS5ib3VuZHNSYW5nZSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnYm91bmRzUGVyaW9kJ10pIHsgdGhpcy5ib3VuZHMgPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLmJvdW5kc1BlcmlvZCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvdW50J10pIHsgdGhpcy5jb3VudCA9IG5ldyBmaGlyLkZoaXJQb3NpdGl2ZUludCh7dmFsdWU6IHNvdXJjZS5jb3VudH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydjb3VudE1heCddKSB7IHRoaXMuY291bnRNYXggPSBuZXcgZmhpci5GaGlyUG9zaXRpdmVJbnQoe3ZhbHVlOiBzb3VyY2UuY291bnRNYXh9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZHVyYXRpb24nXSkgeyB0aGlzLmR1cmF0aW9uID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoe3ZhbHVlOiBzb3VyY2UuZHVyYXRpb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZHVyYXRpb25NYXgnXSkgeyB0aGlzLmR1cmF0aW9uTWF4ID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoe3ZhbHVlOiBzb3VyY2UuZHVyYXRpb25NYXh9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZHVyYXRpb25Vbml0J10pIHsgdGhpcy5kdXJhdGlvblVuaXQgPSBuZXcgZmhpci5GaGlyQ29kZTxVbml0c09mVGltZUNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5kdXJhdGlvblVuaXR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZnJlcXVlbmN5J10pIHsgdGhpcy5mcmVxdWVuY3kgPSBuZXcgZmhpci5GaGlyUG9zaXRpdmVJbnQoe3ZhbHVlOiBzb3VyY2UuZnJlcXVlbmN5fSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2ZyZXF1ZW5jeU1heCddKSB7IHRoaXMuZnJlcXVlbmN5TWF4ID0gbmV3IGZoaXIuRmhpclBvc2l0aXZlSW50KHt2YWx1ZTogc291cmNlLmZyZXF1ZW5jeU1heH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydwZXJpb2QnXSkgeyB0aGlzLnBlcmlvZCA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHt2YWx1ZTogc291cmNlLnBlcmlvZH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydwZXJpb2RNYXgnXSkgeyB0aGlzLnBlcmlvZE1heCA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHt2YWx1ZTogc291cmNlLnBlcmlvZE1heH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydwZXJpb2RVbml0J10pIHsgdGhpcy5wZXJpb2RVbml0ID0gbmV3IGZoaXIuRmhpckNvZGU8VW5pdHNPZlRpbWVDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2UucGVyaW9kVW5pdH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydkYXlPZldlZWsnXSkgeyB0aGlzLmRheU9mV2VlayA9IHNvdXJjZS5kYXlPZldlZWsubWFwKCh4KSA9PiBuZXcgZmhpci5GaGlyQ29kZTxEYXlzT2ZXZWVrQ29kZVR5cGU+KHt2YWx1ZTogeH0pKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZGF5T2ZXZWVrID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3RpbWVPZkRheSddKSB7IHRoaXMudGltZU9mRGF5ID0gc291cmNlLnRpbWVPZkRheS5tYXAoKHgpID0+IG5ldyBmaGlyLkZoaXJUaW1lKHt2YWx1ZTogeH0pKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudGltZU9mRGF5ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3doZW4nXSkgeyB0aGlzLndoZW4gPSBzb3VyY2Uud2hlbi5tYXAoKHgpID0+IG5ldyBmaGlyLkZoaXJDb2RlKHt2YWx1ZTogeH0pKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMud2hlbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydvZmZzZXQnXSkgeyB0aGlzLm9mZnNldCA9IG5ldyBmaGlyLkZoaXJVbnNpZ25lZEludCh7dmFsdWU6IHNvdXJjZS5vZmZzZXR9KTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIGR1cmF0aW9uVW5pdCAoVGltaW5nLnJlcGVhdC5kdXJhdGlvblVuaXQpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgZHVyYXRpb25Vbml0UmVxdWlyZWRDb2RlcygpIHtcclxuICAgIHJldHVybiBVbml0c09mVGltZUNvZGVzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIHBlcmlvZFVuaXQgKFRpbWluZy5yZXBlYXQucGVyaW9kVW5pdClcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCBwZXJpb2RVbml0UmVxdWlyZWRDb2RlcygpIHtcclxuICAgIHJldHVybiBVbml0c09mVGltZUNvZGVzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIGRheU9mV2VlayAoVGltaW5nLnJlcGVhdC5kYXlPZldlZWspXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgZGF5T2ZXZWVrUmVxdWlyZWRDb2RlcygpIHtcclxuICAgIHJldHVybiBEYXlzT2ZXZWVrQ29kZXM7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlcXVpcmVkLWJvdW5kIFZhbHVlIFNldCBmb3Igd2hlbiAoVGltaW5nLnJlcGVhdC53aGVuKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IHdoZW5SZXF1aXJlZENvZGVzKCkge1xyXG4gICAgcmV0dXJuIEV2ZW50VGltaW5nQ29kZXM7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAodGhpc1tcImNvdW50XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY291bnQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiY291bnRNYXhcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5jb3VudE1heC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJkdXJhdGlvblwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmR1cmF0aW9uLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImR1cmF0aW9uTWF4XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZHVyYXRpb25NYXguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzWydkdXJhdGlvblVuaXQnXSAmJiAoIU9iamVjdC52YWx1ZXMoVW5pdHNPZlRpbWVDb2RlcykuaW5jbHVkZXModGhpcy5kdXJhdGlvblVuaXQgYXMgYW55KSkpIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ2NvZGUtaW52YWxpZCcsIGRpYWdub3N0aWNzOiAnSW52YWxpZCBjb2RlIHByb3BlcnR5IGR1cmF0aW9uVW5pdD86Zmhpci5GaGlyQ29kZTxVbml0c09mVGltZUNvZGVUeXBlPiBmaGlyOiBUaW1pbmcucmVwZWF0LmR1cmF0aW9uVW5pdDpjb2RlIFJlcXVpcmVkIGJpbmRpbmcgdG86IFVuaXRzT2ZUaW1lJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiZHVyYXRpb25Vbml0XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZHVyYXRpb25Vbml0LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImZyZXF1ZW5jeVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmZyZXF1ZW5jeS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJmcmVxdWVuY3lNYXhcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5mcmVxdWVuY3lNYXguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wicGVyaW9kXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucGVyaW9kLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInBlcmlvZE1heFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnBlcmlvZE1heC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbJ3BlcmlvZFVuaXQnXSAmJiAoIU9iamVjdC52YWx1ZXMoVW5pdHNPZlRpbWVDb2RlcykuaW5jbHVkZXModGhpcy5wZXJpb2RVbml0IGFzIGFueSkpKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdjb2RlLWludmFsaWQnLCBkaWFnbm9zdGljczogJ0ludmFsaWQgY29kZSBwcm9wZXJ0eSBwZXJpb2RVbml0PzpmaGlyLkZoaXJDb2RlPFVuaXRzT2ZUaW1lQ29kZVR5cGU+IGZoaXI6IFRpbWluZy5yZXBlYXQucGVyaW9kVW5pdDpjb2RlIFJlcXVpcmVkIGJpbmRpbmcgdG86IFVuaXRzT2ZUaW1lJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wicGVyaW9kVW5pdFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnBlcmlvZFVuaXQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzWydkYXlPZldlZWsnXSkge1xyXG4gICAgICB0aGlzLmRheU9mV2Vlay5mb3JFYWNoKCh2KSA9PiB7XHJcbiAgICAgICAgaWYgKCFPYmplY3QudmFsdWVzKERheXNPZldlZWtDb2RlcykuaW5jbHVkZXModiBhcyBhbnkpKSB7XHJcbiAgICAgICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnY29kZS1pbnZhbGlkJywgZGlhZ25vc3RpY3M6ICdJbnZhbGlkIGNvZGUgcHJvcGVydHkgZGF5T2ZXZWVrPzpmaGlyLkZoaXJDb2RlPERheXNPZldlZWtDb2RlVHlwZT5bXSBmaGlyOiBUaW1pbmcucmVwZWF0LmRheU9mV2Vlazpjb2RlIFJlcXVpcmVkIGJpbmRpbmcgdG86IERheXNPZldlZWsnIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImRheU9mV2Vla1wiXSkgeyB0aGlzLmRheU9mV2Vlay5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1widGltZU9mRGF5XCJdKSB7IHRoaXMudGltZU9mRGF5LmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbJ3doZW4nXSkge1xyXG4gICAgICB0aGlzLndoZW4uZm9yRWFjaCgodikgPT4ge1xyXG4gICAgICAgIGlmICghT2JqZWN0LnZhbHVlcyhFdmVudFRpbWluZ0NvZGVzKS5pbmNsdWRlcyh2IGFzIGFueSkpIHtcclxuICAgICAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdjb2RlLWludmFsaWQnLCBkaWFnbm9zdGljczogJ0ludmFsaWQgY29kZSBwcm9wZXJ0eSB3aGVuPzpmaGlyLkZoaXJDb2RlW10gZmhpcjogVGltaW5nLnJlcGVhdC53aGVuOmNvZGUgUmVxdWlyZWQgYmluZGluZyB0bzogRXZlbnRUaW1pbmcnIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcIndoZW5cIl0pIHsgdGhpcy53aGVuLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJvZmZzZXRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5vZmZzZXQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBUaW1pbmcgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgVGltaW5nQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyBzcGVjaWZpYyB0aW1lcyB3aGVuIHRoZSBldmVudCBvY2N1cnMuXHJcbiAgICovXHJcbiAgZXZlbnQ/OiBmaGlyLkZoaXJEYXRlVGltZVtdfHN0cmluZ1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHNldCBvZiBydWxlcyB0aGF0IGRlc2NyaWJlIHdoZW4gdGhlIGV2ZW50IGlzIHNjaGVkdWxlZC5cclxuICAgKi9cclxuICByZXBlYXQ/OiBmaGlyLlRpbWluZ1JlcGVhdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEJJRCBldGMuIGFyZSBkZWZpbmVkIGFzICdhdCBpbnN0aXR1dGlvbmFsbHkgc3BlY2lmaWVkIHRpbWVzJy4gRm9yIGV4YW1wbGUsIGFuIGluc3RpdHV0aW9uIG1heSBjaG9vc2UgdGhhdCBCSUQgaXMgXCJhbHdheXMgYXQgN2FtIGFuZCA2cG1cIi4gIElmIGl0IGlzIGluYXBwcm9wcmlhdGUgZm9yIHRoaXMgY2hvaWNlIHRvIGJlIG1hZGUsIHRoZSBjb2RlIEJJRCBzaG91bGQgbm90IGJlIHVzZWQuIEluc3RlYWQsIGEgZGlzdGluY3Qgb3JnYW5pemF0aW9uLXNwZWNpZmljIGNvZGUgc2hvdWxkIGJlIHVzZWQgaW4gcGxhY2Ugb2YgdGhlIEhMNy1kZWZpbmVkIEJJRCBjb2RlIGFuZC9vciBhIHN0cnVjdHVyZWQgcmVwcmVzZW50YXRpb24gc2hvdWxkIGJlIHVzZWQgKGluIHRoaXMgY2FzZSwgc3BlY2lmeWluZyB0aGUgdHdvIGV2ZW50IHRpbWVzKS5cclxuICAgKi9cclxuICBjb2RlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNwZWNpZmllcyBhbiBldmVudCB0aGF0IG1heSBvY2N1ciBtdWx0aXBsZSB0aW1lcy4gVGltaW5nIHNjaGVkdWxlcyBhcmUgdXNlZCB0byByZWNvcmQgd2hlbiB0aGluZ3MgYXJlIHBsYW5uZWQsIGV4cGVjdGVkIG9yIHJlcXVlc3RlZCB0byBvY2N1ci4gVGhlIG1vc3QgY29tbW9uIHVzYWdlIGlzIGluIGRvc2FnZSBpbnN0cnVjdGlvbnMgZm9yIG1lZGljYXRpb25zLiBUaGV5IGFyZSBhbHNvIHVzZWQgd2hlbiBwbGFubmluZyBjYXJlIG9mIHZhcmlvdXMga2luZHMsIGFuZCBtYXkgYmUgdXNlZCBmb3IgcmVwb3J0aW5nIHRoZSBzY2hlZHVsZSB0byB3aGljaCBwYXN0IHJlZ3VsYXIgYWN0aXZpdGllcyB3ZXJlIGNhcnJpZWQgb3V0LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRpbWluZyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1RpbWluZyc7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyBzcGVjaWZpYyB0aW1lcyB3aGVuIHRoZSBldmVudCBvY2N1cnMuXHJcbiAgICovXHJcbiAgcHVibGljIGV2ZW50OiBmaGlyLkZoaXJEYXRlVGltZVtdO1xyXG4gIC8qKlxyXG4gICAqIEEgc2V0IG9mIHJ1bGVzIHRoYXQgZGVzY3JpYmUgd2hlbiB0aGUgZXZlbnQgaXMgc2NoZWR1bGVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZXBlYXQ/OiBmaGlyLlRpbWluZ1JlcGVhdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQklEIGV0Yy4gYXJlIGRlZmluZWQgYXMgJ2F0IGluc3RpdHV0aW9uYWxseSBzcGVjaWZpZWQgdGltZXMnLiBGb3IgZXhhbXBsZSwgYW4gaW5zdGl0dXRpb24gbWF5IGNob29zZSB0aGF0IEJJRCBpcyBcImFsd2F5cyBhdCA3YW0gYW5kIDZwbVwiLiAgSWYgaXQgaXMgaW5hcHByb3ByaWF0ZSBmb3IgdGhpcyBjaG9pY2UgdG8gYmUgbWFkZSwgdGhlIGNvZGUgQklEIHNob3VsZCBub3QgYmUgdXNlZC4gSW5zdGVhZCwgYSBkaXN0aW5jdCBvcmdhbml6YXRpb24tc3BlY2lmaWMgY29kZSBzaG91bGQgYmUgdXNlZCBpbiBwbGFjZSBvZiB0aGUgSEw3LWRlZmluZWQgQklEIGNvZGUgYW5kL29yIGEgc3RydWN0dXJlZCByZXByZXNlbnRhdGlvbiBzaG91bGQgYmUgdXNlZCAoaW4gdGhpcyBjYXNlLCBzcGVjaWZ5aW5nIHRoZSB0d28gZXZlbnQgdGltZXMpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb2RlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFRpbWluZyAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFRpbWluZ0FyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydldmVudCddKSB7IHRoaXMuZXZlbnQgPSBzb3VyY2UuZXZlbnQubWFwKCh4KSA9PiBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiB4fSkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5ldmVudCA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydyZXBlYXQnXSkgeyB0aGlzLnJlcGVhdCA9IG5ldyBmaGlyLlRpbWluZ1JlcGVhdChzb3VyY2UucmVwZWF0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY29kZSk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogUHJlZmVycmVkLWJvdW5kIFZhbHVlIFNldCBmb3IgY29kZSAoVGltaW5nLmNvZGUpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgY29kZVByZWZlcnJlZENvZGluZ3MoKSB7XHJcbiAgICByZXR1cm4gVGltaW5nQWJicmV2aWF0aW9uQ29kaW5ncztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICh0aGlzW1wiZXZlbnRcIl0pIHsgdGhpcy5ldmVudC5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wicmVwZWF0XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucmVwZWF0LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImNvZGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5jb2RlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=