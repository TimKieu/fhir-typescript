// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: DocumentManifest
import * as fhir from '../fhir.js';
// @ts-ignore
import { DocumentReferenceStatusVsValidation } from '../fhirValueSets/DocumentReferenceStatusVsValidation.js';
/**
 * May be identifiers or resources that caused the DocumentManifest to be created.
 */
export class DocumentManifestRelated extends fhir.BackboneElement {
    /**
     * Default constructor for DocumentManifestRelated - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier);
        }
        if (source['ref']) {
            this.ref = new fhir.Reference(source.ref);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'DocumentManifest.related';
        }
        this.vOptS('identifier', expression);
        this.vOptS('ref', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DocumentManifestRelated._fts_dataType = 'DocumentManifestRelated';
/**
 * A collection of documents compiled for a purpose together with metadata that applies to the collection.
 */
export class DocumentManifest extends fhir.DomainResource {
    /**
     * Default constructor for DocumentManifest - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'DocumentManifest';
        if (source['masterIdentifier']) {
            this.masterIdentifier = new fhir.Identifier(source.masterIdentifier);
        }
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type);
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject);
        }
        if (source['created']) {
            this.created = new fhir.FhirDateTime({ value: source.created });
        }
        if (source['_created']) {
            if (this.created) {
                this.created.addExtendedProperties(source._created);
            }
            else {
                this.created = new fhir.FhirDateTime(source._created);
            }
        }
        if (source['author']) {
            this.author = source.author.map((x) => new fhir.Reference(x));
        }
        else {
            this.author = [];
        }
        if (source['recipient']) {
            this.recipient = source.recipient.map((x) => new fhir.Reference(x));
        }
        else {
            this.recipient = [];
        }
        if (source['source']) {
            this.source = new fhir.FhirUri({ value: source.source });
        }
        if (source['_source']) {
            if (this.source) {
                this.source.addExtendedProperties(source._source);
            }
            else {
                this.source = new fhir.FhirUri(source._source);
            }
        }
        if (source['description']) {
            this.description = new fhir.FhirString({ value: source.description });
        }
        if (source['_description']) {
            if (this.description) {
                this.description.addExtendedProperties(source._description);
            }
            else {
                this.description = new fhir.FhirString(source._description);
            }
        }
        if (source['content']) {
            this.content = source.content.map((x) => new fhir.Reference(x));
        }
        else {
            this.content = [];
        }
        if (source['related']) {
            this.related = source.related.map((x) => new fhir.DocumentManifestRelated(x));
        }
        else {
            this.related = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'DocumentManifest';
        }
        this.vReqS('resourceType', expression);
        this.vOptS('masterIdentifier', expression);
        this.vOptA('identifier', expression);
        this.vReqSV('status', expression, 'DocumentReferenceStatus', DocumentReferenceStatusVsValidation, 'r');
        this.vOptS('type', expression);
        this.vOptS('subject', expression);
        this.vOptS('created', expression);
        this.vOptA('author', expression);
        this.vOptA('recipient', expression);
        this.vOptS('source', expression);
        this.vOptS('description', expression);
        this.vReqA('content', expression);
        this.vOptA('related', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DocumentManifest._fts_dataType = 'DocumentManifest';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRG9jdW1lbnRNYW5pZmVzdC5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvRG9jdW1lbnRNYW5pZmVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQyxrQ0FBa0M7QUFFbEMsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFJbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSxtQ0FBbUMsRUFBRSxNQUFNLHlEQUF5RCxDQUFDO0FBbUI5Rzs7R0FFRztBQUNILE1BQU0sT0FBTyx1QkFBd0IsU0FBUSxJQUFJLENBQUMsZUFBZTtJQWEvRDs7T0FFRztJQUNILFlBQVksU0FBOEMsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDcEcsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxZQUFZLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQztTQUFFO1FBQ3ZGLElBQUksTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQUU7SUFDbkUsQ0FBQztJQUNEOztPQUVHO0lBQ2EsaUJBQWlCLENBQUMsYUFBb0IsRUFBRTtRQUN0RCxJQUFJLE1BQU0sR0FBbUIsS0FBSyxDQUFDLGlCQUFpQixDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ2pFLElBQUksVUFBVSxLQUFLLEVBQUUsRUFBRTtZQUFFLFVBQVUsR0FBRywwQkFBMEIsQ0FBQTtTQUFFO1FBQ2xFLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ25DLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxF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QUcsQ0FBQyxDQUFBO1FBQ2xHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQzdCLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ2hDLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ2hDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQy9CLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ2xDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQy9CLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ3BDLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ2hDLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ2hDLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBckhEOztHQUVHO0FBQzZCLDhCQUFhLEdBQVUsa0JBQWtCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjQuY29yZSB2ZXJzaW9uOiA0LjAuMVxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IERvY3VtZW50TWFuaWZlc3RcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IERvY3VtZW50UmVmZXJlbmNlU3RhdHVzQ29kZXMsICBEb2N1bWVudFJlZmVyZW5jZVN0YXR1c0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Eb2N1bWVudFJlZmVyZW5jZVN0YXR1c0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEb2N1bWVudFJlZmVyZW5jZVN0YXR1c1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRG9jdW1lbnRSZWZlcmVuY2VTdGF0dXNWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFYzQWN0Q29kZXMsICBWM0FjdENvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9WM0FjdENvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBWM0FjdFZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVjNBY3RWc1ZhbGlkYXRpb24uanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgRG9jdW1lbnRNYW5pZmVzdFJlbGF0ZWQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgRG9jdW1lbnRNYW5pZmVzdFJlbGF0ZWRBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBJZiBib3RoIGlkZW50aWZpZXIgYW5kIHJlZiBlbGVtZW50cyBhcmUgcHJlc2VudCB0aGV5IHNoYWxsIHJlZmVyIHRvIHRoZSBzYW1lIHRoaW5nLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiBib3RoIGlkZW50aWZpZXIgYW5kIHJlZiBlbGVtZW50cyBhcmUgcHJlc2VudCB0aGV5IHNoYWxsIHJlZmVyIHRvIHRoZSBzYW1lIHRoaW5nLlxyXG4gICAqL1xyXG4gIHJlZj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNYXkgYmUgaWRlbnRpZmllcnMgb3IgcmVzb3VyY2VzIHRoYXQgY2F1c2VkIHRoZSBEb2N1bWVudE1hbmlmZXN0IHRvIGJlIGNyZWF0ZWQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRG9jdW1lbnRNYW5pZmVzdFJlbGF0ZWQgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdEb2N1bWVudE1hbmlmZXN0UmVsYXRlZCc7XHJcbiAgLyoqXHJcbiAgICogSWYgYm90aCBpZGVudGlmaWVyIGFuZCByZWYgZWxlbWVudHMgYXJlIHByZXNlbnQgdGhleSBzaGFsbCByZWZlciB0byB0aGUgc2FtZSB0aGluZy5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgYm90aCBpZGVudGlmaWVyIGFuZCByZWYgZWxlbWVudHMgYXJlIHByZXNlbnQgdGhleSBzaGFsbCByZWZlciB0byB0aGUgc2FtZSB0aGluZy5cclxuICAgKi9cclxuICBwdWJsaWMgcmVmPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIERvY3VtZW50TWFuaWZlc3RSZWxhdGVkIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8RG9jdW1lbnRNYW5pZmVzdFJlbGF0ZWRBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IG5ldyBmaGlyLklkZW50aWZpZXIoc291cmNlLmlkZW50aWZpZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWydyZWYnXSkgeyB0aGlzLnJlZiA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UucmVmKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdEb2N1bWVudE1hbmlmZXN0LnJlbGF0ZWQnIH1cclxuICAgIHRoaXMudk9wdFMoJ2lkZW50aWZpZXInLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdyZWYnLGV4cHJlc3Npb24pXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgRG9jdW1lbnRNYW5pZmVzdCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBEb2N1bWVudE1hbmlmZXN0QXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiRG9jdW1lbnRNYW5pZmVzdFwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHNpbmdsZSBpZGVudGlmaWVyIHRoYXQgdW5pcXVlbHkgaWRlbnRpZmllcyB0aGlzIG1hbmlmZXN0LiBQcmluY2lwYWxseSB1c2VkIHRvIHJlZmVyIHRvIHRoZSBtYW5pZmVzdCBpbiBub24tRkhJUiBjb250ZXh0cy5cclxuICAgKi9cclxuICBtYXN0ZXJJZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogT3RoZXIgaWRlbnRpZmllcnMgYXNzb2NpYXRlZCB3aXRoIHRoZSBkb2N1bWVudCBtYW5pZmVzdCwgaW5jbHVkaW5nIHZlcnNpb24gaW5kZXBlbmRlbnQgIGlkZW50aWZpZXJzLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgYmVjYXVzZSB0aGUgc3RhdHVzIGNvbnRhaW5zIHRoZSBjb2RlcyB0aGF0IG1hcmsgdGhlIG1hbmlmZXN0IGFzIG5vdCBjdXJyZW50bHkgdmFsaWQuXHJcbiAgICovXHJcbiAgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPERvY3VtZW50UmVmZXJlbmNlU3RhdHVzQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IERvY3VtZW50TWFuaWZlc3Quc3RhdHVzXHJcbiAgICovXHJcbiAgX3N0YXR1cz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogU3BlY2lmaWVzIHRoZSBraW5kIG9mIHRoaXMgc2V0IG9mIGRvY3VtZW50cyAoZS5nLiBQYXRpZW50IFN1bW1hcnksIERpc2NoYXJnZSBTdW1tYXJ5LCBQcmVzY3JpcHRpb24sIGV0Yy4pLiBUaGUgdHlwZSBvZiBhIHNldCBvZiBkb2N1bWVudHMgbWF5IGJlIHRoZSBzYW1lIGFzIG9uZSBvZiB0aGUgZG9jdW1lbnRzIGluIGl0IC0gZXNwZWNpYWxseSBpZiB0aGVyZSBpcyBvbmx5IG9uZSAtIGJ1dCBpdCBtYXkgYmUgd2lkZXIuXHJcbiAgICovXHJcbiAgdHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogV2hvIG9yIHdoYXQgdGhlIHNldCBvZiBkb2N1bWVudHMgaXMgYWJvdXQuIFRoZSBkb2N1bWVudHMgY2FuIGJlIGFib3V0IGEgcGVyc29uLCAocGF0aWVudCBvciBoZWFsdGhjYXJlIHByYWN0aXRpb25lciksIGEgZGV2aWNlIChpLmUuIG1hY2hpbmUpIG9yIGV2ZW4gYSBncm91cCBvZiBzdWJqZWN0cyAoc3VjaCBhcyBhIGRvY3VtZW50IGFib3V0IGEgaGVyZCBvZiBmYXJtIGFuaW1hbHMsIG9yIGEgc2V0IG9mIHBhdGllbnRzIHRoYXQgc2hhcmUgYSBjb21tb24gZXhwb3N1cmUpLiBJZiB0aGUgZG9jdW1lbnRzIGNyb3NzIG1vcmUgdGhhbiBvbmUgc3ViamVjdCwgdGhlbiBtb3JlIHRoYW4gb25lIHN1YmplY3QgaXMgYWxsb3dlZCBoZXJlICh1bnVzdWFsIHVzZSBjYXNlKS5cclxuICAgKi9cclxuICBzdWJqZWN0PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDcmVhdGlvbiB0aW1lIGlzIHVzZWQgZm9yIHRyYWNraW5nLCBvcmdhbml6aW5nIHZlcnNpb25zIGFuZCBzZWFyY2hpbmcuIFRoaXMgaXMgdGhlIGNyZWF0aW9uIHRpbWUgb2YgdGhlIGRvY3VtZW50IHNldCwgbm90IHRoZSBkb2N1bWVudHMgb24gd2hpY2ggaXQgaXMgYmFzZWQuXHJcbiAgICovXHJcbiAgY3JlYXRlZD86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IERvY3VtZW50TWFuaWZlc3QuY3JlYXRlZFxyXG4gICAqL1xyXG4gIF9jcmVhdGVkPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBOb3QgbmVjZXNzYXJpbHkgd2hvIGRpZCB0aGUgYWN0dWFsIGRhdGEgZW50cnkgKGkuZS4gdHlwaXN0KSBvciB3aG8gd2FzIHRoZSBzb3VyY2UgKGluZm9ybWFudCkuXHJcbiAgICovXHJcbiAgYXV0aG9yPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEhvdyB0aGUgcmVjaXBpZW50IHJlY2VpdmVzIHRoZSBkb2N1bWVudCBzZXQgb3IgaXMgbm90aWZpZWQgb2YgaXQgaXMgdXAgdG8gdGhlIGltcGxlbWVudGF0aW9uLiBUaGlzIGVsZW1lbnQgaXMganVzdCBhIHN0YXRlbWVudCBvZiBpbnRlbnQuIElmIHRoZSByZWNpcGllbnQgaXMgYSBwZXJzb24sIGFuZCBpdCBpcyBub3Qga25vd24gd2hldGhlciB0aGUgcGVyc29uIGlzIGEgcGF0aWVudCBvciBhIHByYWN0aXRpb25lciwgUmVsYXRlZFBlcnNvbiB3b3VsZCBiZSB0aGUgZGVmYXVsdCBjaG9pY2UuXHJcbiAgICovXHJcbiAgcmVjaXBpZW50PzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgdGhlIHNvdXJjZSBzeXN0ZW0sIGFwcGxpY2F0aW9uLCBvciBzb2Z0d2FyZSB0aGF0IHByb2R1Y2VkIHRoZSBkb2N1bWVudCBtYW5pZmVzdC5cclxuICAgKi9cclxuICBzb3VyY2U/OiBmaGlyLkZoaXJVcml8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogRG9jdW1lbnRNYW5pZmVzdC5zb3VyY2VcclxuICAgKi9cclxuICBfc291cmNlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBXaGF0IHRoZSBkb2N1bWVudCBpcyBhYm91dCwgcmF0aGVyIHRoYW4gYSB0ZXJzZSBzdW1tYXJ5IG9mIHRoZSBkb2N1bWVudC4gSXQgaXMgY29tbW9ubHkgdGhlIGNhc2UgdGhhdCByZWNvcmRzIGRvIG5vdCBoYXZlIGEgdGl0bGUgYW5kIGFyZSBjb2xsZWN0aXZlbHkgcmVmZXJyZWQgdG8gYnkgdGhlIGRpc3BsYXkgbmFtZSBvZiBSZWNvcmQgY29kZSAoZS5nLiBhIFwiY29uc3VsdGF0aW9uXCIgb3IgXCJwcm9ncmVzcyBub3RlXCIpLlxyXG4gICAqL1xyXG4gIGRlc2NyaXB0aW9uPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IERvY3VtZW50TWFuaWZlc3QuZGVzY3JpcHRpb25cclxuICAgKi9cclxuICBfZGVzY3JpcHRpb24/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFdoZW4gdXNlZCBmb3IgWERTIHRoZSBpbnRlbmRlZCBmb2N1cyBvZiB0aGUgRG9jdW1lbnRNYW5pZmVzdCBpcyBmb3IgdGhlIHJlZmVyZW5jZSB0byB0YXJnZXQgdG8gYmUgYSBzZXQgb2YgRG9jdW1lbnRSZWZlcmVuY2UgUmVzb3VyY2VzLiBUaGUgcmVmZXJlbmNlIGlzIHRvIFwiQW55XCIgdG8gc3VwcG9ydCBFTiAxMzYwNiB1c2FnZSwgd2hlcmUgYW4gZXh0cmFjdCBpcyBEb2N1bWVudE1hbmlmZXN0IHRoYXQgcmVmZXJlbmNlcyAgTGlzdCBhbmQgQ29tcG9zaXRpb24gcmVzb3VyY2VzLlxyXG4gICAqL1xyXG4gIGNvbnRlbnQ6IGZoaXIuUmVmZXJlbmNlQXJnc1tdfG51bGw7XHJcbiAgLyoqXHJcbiAgICogTWF5IGJlIGlkZW50aWZpZXJzIG9yIHJlc291cmNlcyB0aGF0IGNhdXNlZCB0aGUgRG9jdW1lbnRNYW5pZmVzdCB0byBiZSBjcmVhdGVkLlxyXG4gICAqL1xyXG4gIHJlbGF0ZWQ/OiBmaGlyLkRvY3VtZW50TWFuaWZlc3RSZWxhdGVkQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgY29sbGVjdGlvbiBvZiBkb2N1bWVudHMgY29tcGlsZWQgZm9yIGEgcHVycG9zZSB0b2dldGhlciB3aXRoIG1ldGFkYXRhIHRoYXQgYXBwbGllcyB0byB0aGUgY29sbGVjdGlvbi5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBEb2N1bWVudE1hbmlmZXN0IGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdEb2N1bWVudE1hbmlmZXN0JztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIkRvY3VtZW50TWFuaWZlc3RcIjtcclxuICAvKipcclxuICAgKiBBIHNpbmdsZSBpZGVudGlmaWVyIHRoYXQgdW5pcXVlbHkgaWRlbnRpZmllcyB0aGlzIG1hbmlmZXN0LiBQcmluY2lwYWxseSB1c2VkIHRvIHJlZmVyIHRvIHRoZSBtYW5pZmVzdCBpbiBub24tRkhJUiBjb250ZXh0cy5cclxuICAgKi9cclxuICBwdWJsaWMgbWFzdGVySWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogT3RoZXIgaWRlbnRpZmllcnMgYXNzb2NpYXRlZCB3aXRoIHRoZSBkb2N1bWVudCBtYW5pZmVzdCwgaW5jbHVkaW5nIHZlcnNpb24gaW5kZXBlbmRlbnQgIGlkZW50aWZpZXJzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyOiBmaGlyLklkZW50aWZpZXJbXTtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIGJlY2F1c2UgdGhlIHN0YXR1cyBjb250YWlucyB0aGUgY29kZXMgdGhhdCBtYXJrIHRoZSBtYW5pZmVzdCBhcyBub3QgY3VycmVudGx5IHZhbGlkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0dXM6IGZoaXIuRmhpckNvZGU8RG9jdW1lbnRSZWZlcmVuY2VTdGF0dXNDb2RlVHlwZT58bnVsbDtcclxuICAvKipcclxuICAgKiBTcGVjaWZpZXMgdGhlIGtpbmQgb2YgdGhpcyBzZXQgb2YgZG9jdW1lbnRzIChlLmcuIFBhdGllbnQgU3VtbWFyeSwgRGlzY2hhcmdlIFN1bW1hcnksIFByZXNjcmlwdGlvbiwgZXRjLikuIFRoZSB0eXBlIG9mIGEgc2V0IG9mIGRvY3VtZW50cyBtYXkgYmUgdGhlIHNhbWUgYXMgb25lIG9mIHRoZSBkb2N1bWVudHMgaW4gaXQgLSBlc3BlY2lhbGx5IGlmIHRoZXJlIGlzIG9ubHkgb25lIC0gYnV0IGl0IG1heSBiZSB3aWRlci5cclxuICAgKi9cclxuICBwdWJsaWMgdHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBXaG8gb3Igd2hhdCB0aGUgc2V0IG9mIGRvY3VtZW50cyBpcyBhYm91dC4gVGhlIGRvY3VtZW50cyBjYW4gYmUgYWJvdXQgYSBwZXJzb24sIChwYXRpZW50IG9yIGhlYWx0aGNhcmUgcHJhY3RpdGlvbmVyKSwgYSBkZXZpY2UgKGkuZS4gbWFjaGluZSkgb3IgZXZlbiBhIGdyb3VwIG9mIHN1YmplY3RzIChzdWNoIGFzIGEgZG9jdW1lbnQgYWJvdXQgYSBoZXJkIG9mIGZhcm0gYW5pbWFscywgb3IgYSBzZXQgb2YgcGF0aWVudHMgdGhhdCBzaGFyZSBhIGNvbW1vbiBleHBvc3VyZSkuIElmIHRoZSBkb2N1bWVudHMgY3Jvc3MgbW9yZSB0aGFuIG9uZSBzdWJqZWN0LCB0aGVuIG1vcmUgdGhhbiBvbmUgc3ViamVjdCBpcyBhbGxvd2VkIGhlcmUgKHVudXN1YWwgdXNlIGNhc2UpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdWJqZWN0PzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENyZWF0aW9uIHRpbWUgaXMgdXNlZCBmb3IgdHJhY2tpbmcsIG9yZ2FuaXppbmcgdmVyc2lvbnMgYW5kIHNlYXJjaGluZy4gVGhpcyBpcyB0aGUgY3JlYXRpb24gdGltZSBvZiB0aGUgZG9jdW1lbnQgc2V0LCBub3QgdGhlIGRvY3VtZW50cyBvbiB3aGljaCBpdCBpcyBiYXNlZC5cclxuICAgKi9cclxuICBwdWJsaWMgY3JlYXRlZD86IGZoaXIuRmhpckRhdGVUaW1lfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBOb3QgbmVjZXNzYXJpbHkgd2hvIGRpZCB0aGUgYWN0dWFsIGRhdGEgZW50cnkgKGkuZS4gdHlwaXN0KSBvciB3aG8gd2FzIHRoZSBzb3VyY2UgKGluZm9ybWFudCkuXHJcbiAgICovXHJcbiAgcHVibGljIGF1dGhvcjogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBIb3cgdGhlIHJlY2lwaWVudCByZWNlaXZlcyB0aGUgZG9jdW1lbnQgc2V0IG9yIGlzIG5vdGlmaWVkIG9mIGl0IGlzIHVwIHRvIHRoZSBpbXBsZW1lbnRhdGlvbi4gVGhpcyBlbGVtZW50IGlzIGp1c3QgYSBzdGF0ZW1lbnQgb2YgaW50ZW50LiBJZiB0aGUgcmVjaXBpZW50IGlzIGEgcGVyc29uLCBhbmQgaXQgaXMgbm90IGtub3duIHdoZXRoZXIgdGhlIHBlcnNvbiBpcyBhIHBhdGllbnQgb3IgYSBwcmFjdGl0aW9uZXIsIFJlbGF0ZWRQZXJzb24gd291bGQgYmUgdGhlIGRlZmF1bHQgY2hvaWNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWNpcGllbnQ6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgc291cmNlIHN5c3RlbSwgYXBwbGljYXRpb24sIG9yIHNvZnR3YXJlIHRoYXQgcHJvZHVjZWQgdGhlIGRvY3VtZW50IG1hbmlmZXN0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzb3VyY2U/OiBmaGlyLkZoaXJVcml8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFdoYXQgdGhlIGRvY3VtZW50IGlzIGFib3V0LCByYXRoZXIgdGhhbiBhIHRlcnNlIHN1bW1hcnkgb2YgdGhlIGRvY3VtZW50LiBJdCBpcyBjb21tb25seSB0aGUgY2FzZSB0aGF0IHJlY29yZHMgZG8gbm90IGhhdmUgYSB0aXRsZSBhbmQgYXJlIGNvbGxlY3RpdmVseSByZWZlcnJlZCB0byBieSB0aGUgZGlzcGxheSBuYW1lIG9mIFJlY29yZCBjb2RlIChlLmcuIGEgXCJjb25zdWx0YXRpb25cIiBvciBcInByb2dyZXNzIG5vdGVcIikuXHJcbiAgICovXHJcbiAgcHVibGljIGRlc2NyaXB0aW9uPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBXaGVuIHVzZWQgZm9yIFhEUyB0aGUgaW50ZW5kZWQgZm9jdXMgb2YgdGhlIERvY3VtZW50TWFuaWZlc3QgaXMgZm9yIHRoZSByZWZlcmVuY2UgdG8gdGFyZ2V0IHRvIGJlIGEgc2V0IG9mIERvY3VtZW50UmVmZXJlbmNlIFJlc291cmNlcy4gVGhlIHJlZmVyZW5jZSBpcyB0byBcIkFueVwiIHRvIHN1cHBvcnQgRU4gMTM2MDYgdXNhZ2UsIHdoZXJlIGFuIGV4dHJhY3QgaXMgRG9jdW1lbnRNYW5pZmVzdCB0aGF0IHJlZmVyZW5jZXMgIExpc3QgYW5kIENvbXBvc2l0aW9uIHJlc291cmNlcy5cclxuICAgKi9cclxuICBwdWJsaWMgY29udGVudDogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBNYXkgYmUgaWRlbnRpZmllcnMgb3IgcmVzb3VyY2VzIHRoYXQgY2F1c2VkIHRoZSBEb2N1bWVudE1hbmlmZXN0IHRvIGJlIGNyZWF0ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHJlbGF0ZWQ6IGZoaXIuRG9jdW1lbnRNYW5pZmVzdFJlbGF0ZWRbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBEb2N1bWVudE1hbmlmZXN0IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8RG9jdW1lbnRNYW5pZmVzdEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdEb2N1bWVudE1hbmlmZXN0JztcclxuICAgIGlmIChzb3VyY2VbJ21hc3RlcklkZW50aWZpZXInXSkgeyB0aGlzLm1hc3RlcklkZW50aWZpZXIgPSBuZXcgZmhpci5JZGVudGlmaWVyKHNvdXJjZS5tYXN0ZXJJZGVudGlmaWVyKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IHNvdXJjZS5pZGVudGlmaWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuSWRlbnRpZmllcih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmlkZW50aWZpZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RhdHVzJ10pIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxEb2N1bWVudFJlZmVyZW5jZVN0YXR1c0NvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5zdGF0dXN9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3N0YXR1cyddKSB7XHJcbiAgICAgIGlmICh0aGlzLnN0YXR1cykgeyB0aGlzLnN0YXR1cy5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zdGF0dXMhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxEb2N1bWVudFJlZmVyZW5jZVN0YXR1c0NvZGVUeXBlPihzb3VyY2UuX3N0YXR1cyBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsndHlwZSddKSB7IHRoaXMudHlwZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UudHlwZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N1YmplY3QnXSkgeyB0aGlzLnN1YmplY3QgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnN1YmplY3QpOyB9XHJcbiAgICBpZiAoc291cmNlWydjcmVhdGVkJ10pIHsgdGhpcy5jcmVhdGVkID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLmNyZWF0ZWR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2NyZWF0ZWQnXSkge1xyXG4gICAgICBpZiAodGhpcy5jcmVhdGVkKSB7IHRoaXMuY3JlYXRlZC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9jcmVhdGVkISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuY3JlYXRlZCA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZShzb3VyY2UuX2NyZWF0ZWQgYXMgUGFydGlhbDxmaGlyLkZoaXJEYXRlVGltZUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnYXV0aG9yJ10pIHsgdGhpcy5hdXRob3IgPSBzb3VyY2UuYXV0aG9yLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYXV0aG9yID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3JlY2lwaWVudCddKSB7IHRoaXMucmVjaXBpZW50ID0gc291cmNlLnJlY2lwaWVudC5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnJlY2lwaWVudCA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydzb3VyY2UnXSkgeyB0aGlzLnNvdXJjZSA9IG5ldyBmaGlyLkZoaXJVcmkoe3ZhbHVlOiBzb3VyY2Uuc291cmNlfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zb3VyY2UnXSkge1xyXG4gICAgICBpZiAodGhpcy5zb3VyY2UpIHsgdGhpcy5zb3VyY2UuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc291cmNlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc291cmNlID0gbmV3IGZoaXIuRmhpclVyaShzb3VyY2UuX3NvdXJjZSBhcyBQYXJ0aWFsPGZoaXIuRmhpclVyaUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGVzY3JpcHRpb24nXSkgeyB0aGlzLmRlc2NyaXB0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5kZXNjcmlwdGlvbn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfZGVzY3JpcHRpb24nXSkge1xyXG4gICAgICBpZiAodGhpcy5kZXNjcmlwdGlvbikgeyB0aGlzLmRlc2NyaXB0aW9uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2Rlc2NyaXB0aW9uISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZGVzY3JpcHRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fZGVzY3JpcHRpb24gYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2NvbnRlbnQnXSkgeyB0aGlzLmNvbnRlbnQgPSBzb3VyY2UuY29udGVudC5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvbnRlbnQgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVsYXRlZCddKSB7IHRoaXMucmVsYXRlZCA9IHNvdXJjZS5yZWxhdGVkLm1hcCgoeCkgPT4gbmV3IGZoaXIuRG9jdW1lbnRNYW5pZmVzdFJlbGF0ZWQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZWxhdGVkID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb246c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24pO1xyXG4gICAgaWYgKGV4cHJlc3Npb24gPT09ICcnKSB7IGV4cHJlc3Npb24gPSAnRG9jdW1lbnRNYW5pZmVzdCcgfVxyXG4gICAgdGhpcy52UmVxUygncmVzb3VyY2VUeXBlJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnbWFzdGVySWRlbnRpZmllcicsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdEEoJ2lkZW50aWZpZXInLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZSZXFTVignc3RhdHVzJyxleHByZXNzaW9uLCdEb2N1bWVudFJlZmVyZW5jZVN0YXR1cycsRG9jdW1lbnRSZWZlcmVuY2VTdGF0dXNWc1ZhbGlkYXRpb24sJ3InKVxyXG4gICAgdGhpcy52T3B0UygndHlwZScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ3N1YmplY3QnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdjcmVhdGVkJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0QSgnYXV0aG9yJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0QSgncmVjaXBpZW50JyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0Uygnc291cmNlJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnZGVzY3JpcHRpb24nLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZSZXFBKCdjb250ZW50JyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0QSgncmVsYXRlZCcsZXhwcmVzc2lvbilcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbiJdfQ==