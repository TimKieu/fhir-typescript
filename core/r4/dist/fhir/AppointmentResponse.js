// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: AppointmentResponse
import * as fhir from '../fhir.js';
// @ts-ignore
import { EncounterParticipantTypeCodings, } from '../fhirValueSets/EncounterParticipantTypeCodings.js';
// @ts-ignore
import { ParticipationstatusCodes } from '../fhirValueSets/ParticipationstatusCodes.js';
/**
 * A reply to an appointment request for a patient and/or practitioner(s), such as a confirmation or rejection.
 */
export class AppointmentResponse extends fhir.DomainResource {
    /**
     * Default constructor for AppointmentResponse - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'AppointmentResponse';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['appointment']) {
            this.appointment = new fhir.Reference(source.appointment);
        }
        else {
            this.appointment = null;
        }
        if (source['start']) {
            this.start = new fhir.FhirInstant({ value: source.start });
        }
        if (source['end']) {
            this.end = new fhir.FhirInstant({ value: source.end });
        }
        if (source['participantType']) {
            this.participantType = source.participantType.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.participantType = [];
        }
        if (source['actor']) {
            this.actor = new fhir.Reference(source.actor);
        }
        if (source['participantStatus']) {
            this.participantStatus = new fhir.FhirCode({ value: source.participantStatus });
        }
        else {
            this.participantStatus = null;
        }
        if (source['comment']) {
            this.comment = new fhir.FhirString({ value: source.comment });
        }
    }
    /**
     * Extensible-bound Value Set for participantType (AppointmentResponse.participantType)
     */
    static get participantTypeExtensibleCodings() {
        return EncounterParticipantTypeCodings;
    }
    /**
     * Required-bound Value Set for participantStatus (AppointmentResponse.participantStatus)
     */
    static get participantStatusRequiredCodes() {
        return ParticipationstatusCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType:"AppointmentResponse" fhir: AppointmentResponse.resourceType:"AppointmentResponse"' });
        }
        if (this["identifier"]) {
            this.identifier.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (!this['appointment']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property appointment:fhir.Reference fhir: AppointmentResponse.appointment:Reference' });
        }
        if (this["appointment"]) {
            issues.push(...this.appointment.doModelValidation());
        }
        if (this["start"]) {
            issues.push(...this.start.doModelValidation());
        }
        if (this["end"]) {
            issues.push(...this.end.doModelValidation());
        }
        if (this["participantType"]) {
            this.participantType.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["actor"]) {
            issues.push(...this.actor.doModelValidation());
        }
        if (!this['participantStatus']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property participantStatus:fhir.FhirCode<ParticipationstatusCodeType> fhir: AppointmentResponse.participantStatus:code' });
        }
        if (this['participantStatus'] && (!Object.values(ParticipationstatusCodes).includes(this.participantStatus))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property participantStatus:fhir.FhirCode<ParticipationstatusCodeType> fhir: AppointmentResponse.participantStatus:code Required binding to: Participationstatus' });
        }
        if (this["participantStatus"]) {
            issues.push(...this.participantStatus.doModelValidation());
        }
        if (this["comment"]) {
            issues.push(...this.comment.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
AppointmentResponse._fts_dataType = 'AppointmentResponse';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXBwb2ludG1lbnRSZXNwb25zZS5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvQXBwb2ludG1lbnRSZXNwb25zZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQyxxQ0FBcUM7QUFFckMsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFFbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSwrQkFBK0IsR0FBc0MsTUFBTSxxREFBcUQsQ0FBQztBQUsxSSxhQUFhO0FBQ2IsT0FBTyxFQUFFLHdCQUF3QixFQUFnQyxNQUFNLDhDQUE4QyxDQUFDO0FBNkN0SDs7R0FFRztBQUNILE1BQU0sT0FBTyxtQkFBb0IsU0FBUSxJQUFJLENBQUMsY0FBYztJQTJDMUQ7O09BRUc7SUFDSCxZQUFZLFNBQTBDLEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQ2hHLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxDQUFDLFlBQVksR0FBRyxxQkFBcUIsQ0FBQztRQUMxQyxJQUFJLE1BQU0sQ0FBQyxZQUFZLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDaEc7WUFBRSxJQUFJLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQztTQUFFO1FBQzlCLElBQUksTUFBTSxDQUFDLGFBQWEsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1NBQUU7YUFDcEY7WUFBRSxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztTQUFFO1FBQ2pDLElBQUks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SSxDQUFDLGlCQUFpQixDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQzlGLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFDMUUsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQzs7QUFuR0Q7O0dBRUc7QUFDNkIsaUNBQWEsR0FBVSxxQkFBcUIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNC5jb3JlIHZlcnNpb246IDQuMC4xXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogQXBwb2ludG1lbnRSZXNwb25zZVxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRW5jb3VudGVyUGFydGljaXBhbnRUeXBlQ29kaW5ncywgRW5jb3VudGVyUGFydGljaXBhbnRUeXBlQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRW5jb3VudGVyUGFydGljaXBhbnRUeXBlQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRW5jb3VudGVyUGFydGljaXBhbnRUeXBlQ29kZXMsICBFbmNvdW50ZXJQYXJ0aWNpcGFudFR5cGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRW5jb3VudGVyUGFydGljaXBhbnRUeXBlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFBhcnRpY2lwYXRpb25zdGF0dXNDb2RpbmdzLCBQYXJ0aWNpcGF0aW9uc3RhdHVzQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUGFydGljaXBhdGlvbnN0YXR1c0NvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFBhcnRpY2lwYXRpb25zdGF0dXNDb2RlcywgIFBhcnRpY2lwYXRpb25zdGF0dXNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUGFydGljaXBhdGlvbnN0YXR1c0NvZGVzLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEFwcG9pbnRtZW50UmVzcG9uc2UgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQXBwb2ludG1lbnRSZXNwb25zZUFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIkFwcG9pbnRtZW50UmVzcG9uc2VcInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyByZWNvcmRzIGlkZW50aWZpZXJzIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGFwcG9pbnRtZW50IHJlc3BvbnNlIGNvbmNlcm4gdGhhdCBhcmUgZGVmaW5lZCBieSBidXNpbmVzcyBwcm9jZXNzZXMgYW5kLyBvciB1c2VkIHRvIHJlZmVyIHRvIGl0IHdoZW4gYSBkaXJlY3QgVVJMIHJlZmVyZW5jZSB0byB0aGUgcmVzb3VyY2UgaXRzZWxmIGlzIG5vdCBhcHByb3ByaWF0ZS5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBcHBvaW50bWVudCB0aGF0IHRoaXMgcmVzcG9uc2UgaXMgcmVwbHlpbmcgdG8uXHJcbiAgICovXHJcbiAgYXBwb2ludG1lbnQ6IGZoaXIuUmVmZXJlbmNlQXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgbWF5IGJlIGVpdGhlciB0aGUgc2FtZSBhcyB0aGUgYXBwb2ludG1lbnQgcmVxdWVzdCB0byBjb25maXJtIHRoZSBkZXRhaWxzIG9mIHRoZSBhcHBvaW50bWVudCwgb3IgYWx0ZXJuYXRlbHkgYSBuZXcgdGltZSB0byByZXF1ZXN0IGEgcmUtbmVnb3RpYXRpb24gb2YgdGhlIHN0YXJ0IHRpbWUuXHJcbiAgICovXHJcbiAgc3RhcnQ/OiBmaGlyLkZoaXJJbnN0YW50fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBtYXkgYmUgZWl0aGVyIHRoZSBzYW1lIGFzIHRoZSBhcHBvaW50bWVudCByZXF1ZXN0IHRvIGNvbmZpcm0gdGhlIGRldGFpbHMgb2YgdGhlIGFwcG9pbnRtZW50LCBvciBhbHRlcm5hdGVseSBhIG5ldyB0aW1lIHRvIHJlcXVlc3QgYSByZS1uZWdvdGlhdGlvbiBvZiB0aGUgZW5kIHRpbWUuXHJcbiAgICovXHJcbiAgZW5kPzogZmhpci5GaGlySW5zdGFudHxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByb2xlIG9mIHRoZSBwYXJ0aWNpcGFudCBjYW4gYmUgdXNlZCB0byBkZWNsYXJlIHdoYXQgdGhlIGFjdG9yIHdpbGwgYmUgZG9pbmcgaW4gdGhlIHNjb3BlIG9mIHRoZSByZWZlcmVuY2VkIGFwcG9pbnRtZW50LlxyXG4gICAqIElmIHRoZSBhY3RvciBpcyBub3Qgc3BlY2lmaWVkLCB0aGVuIGl0IGlzIGV4cGVjdGVkIHRoYXQgdGhlIGFjdG9yIHdpbGwgYmUgZmlsbGVkIGluIGF0IGEgbGF0ZXIgc3RhZ2Ugb2YgcGxhbm5pbmcuXHJcbiAgICogVGhpcyB2YWx1ZSBTSEFMTCBiZSB0aGUgc2FtZSBhcyBzcGVjaWZpZWQgb24gdGhlIHJlZmVyZW5jZWQgQXBwb2ludG1lbnQgc28gdGhhdCB0aGV5IGNhbiBiZSBtYXRjaGVkLCBhbmQgc3Vic2VxdWVudGx5IHVwZGF0ZWQuXHJcbiAgICovXHJcbiAgcGFydGljaXBhbnRUeXBlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgUGVyc29uLCBMb2NhdGlvbiwgSGVhbHRoY2FyZVNlcnZpY2UsIG9yIERldmljZSB0aGF0IGlzIHBhcnRpY2lwYXRpbmcgaW4gdGhlIGFwcG9pbnRtZW50LlxyXG4gICAqL1xyXG4gIGFjdG9yPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIGJlY2F1c2UgdGhlIHN0YXR1cyBjb250YWlucyB0aGUgY29kZSBlbnRlcmVkLWluLWVycm9yIHRoYXQgbWFya3MgdGhlIHBhcnRpY2lwYW50IGFzIG5vdCBjdXJyZW50bHkgdmFsaWQuXHJcbiAgICovXHJcbiAgcGFydGljaXBhbnRTdGF0dXM6IGZoaXIuRmhpckNvZGU8UGFydGljaXBhdGlvbnN0YXR1c0NvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgY29tbWVudCBpcyBwYXJ0aWN1bGFybHkgaW1wb3J0YW50IHdoZW4gdGhlIHJlc3BvbmRlciBpcyBkZWNsaW5pbmcsIHRlbnRhdGl2ZWx5IGFjY2VwdGluZyBvciByZXF1ZXN0aW5nIGFub3RoZXIgdGltZSB0byBpbmRpY2F0ZSB0aGUgcmVhc29ucyB3aHkuXHJcbiAgICovXHJcbiAgY29tbWVudD86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQSByZXBseSB0byBhbiBhcHBvaW50bWVudCByZXF1ZXN0IGZvciBhIHBhdGllbnQgYW5kL29yIHByYWN0aXRpb25lcihzKSwgc3VjaCBhcyBhIGNvbmZpcm1hdGlvbiBvciByZWplY3Rpb24uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQXBwb2ludG1lbnRSZXNwb25zZSBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQXBwb2ludG1lbnRSZXNwb25zZSc7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJBcHBvaW50bWVudFJlc3BvbnNlXCI7XHJcbiAgLyoqXHJcbiAgICogVGhpcyByZWNvcmRzIGlkZW50aWZpZXJzIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGFwcG9pbnRtZW50IHJlc3BvbnNlIGNvbmNlcm4gdGhhdCBhcmUgZGVmaW5lZCBieSBidXNpbmVzcyBwcm9jZXNzZXMgYW5kLyBvciB1c2VkIHRvIHJlZmVyIHRvIGl0IHdoZW4gYSBkaXJlY3QgVVJMIHJlZmVyZW5jZSB0byB0aGUgcmVzb3VyY2UgaXRzZWxmIGlzIG5vdCBhcHByb3ByaWF0ZS5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcjogZmhpci5JZGVudGlmaWVyW107XHJcbiAgLyoqXHJcbiAgICogQXBwb2ludG1lbnQgdGhhdCB0aGlzIHJlc3BvbnNlIGlzIHJlcGx5aW5nIHRvLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhcHBvaW50bWVudDogZmhpci5SZWZlcmVuY2V8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGlzIG1heSBiZSBlaXRoZXIgdGhlIHNhbWUgYXMgdGhlIGFwcG9pbnRtZW50IHJlcXVlc3QgdG8gY29uZmlybSB0aGUgZGV0YWlscyBvZiB0aGUgYXBwb2ludG1lbnQsIG9yIGFsdGVybmF0ZWx5IGEgbmV3IHRpbWUgdG8gcmVxdWVzdCBhIHJlLW5lZ290aWF0aW9uIG9mIHRoZSBzdGFydCB0aW1lLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGFydD86IGZoaXIuRmhpckluc3RhbnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgbWF5IGJlIGVpdGhlciB0aGUgc2FtZSBhcyB0aGUgYXBwb2ludG1lbnQgcmVxdWVzdCB0byBjb25maXJtIHRoZSBkZXRhaWxzIG9mIHRoZSBhcHBvaW50bWVudCwgb3IgYWx0ZXJuYXRlbHkgYSBuZXcgdGltZSB0byByZXF1ZXN0IGEgcmUtbmVnb3RpYXRpb24gb2YgdGhlIGVuZCB0aW1lLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBlbmQ/OiBmaGlyLkZoaXJJbnN0YW50fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcm9sZSBvZiB0aGUgcGFydGljaXBhbnQgY2FuIGJlIHVzZWQgdG8gZGVjbGFyZSB3aGF0IHRoZSBhY3RvciB3aWxsIGJlIGRvaW5nIGluIHRoZSBzY29wZSBvZiB0aGUgcmVmZXJlbmNlZCBhcHBvaW50bWVudC5cclxuICAgKiBJZiB0aGUgYWN0b3IgaXMgbm90IHNwZWNpZmllZCwgdGhlbiBpdCBpcyBleHBlY3RlZCB0aGF0IHRoZSBhY3RvciB3aWxsIGJlIGZpbGxlZCBpbiBhdCBhIGxhdGVyIHN0YWdlIG9mIHBsYW5uaW5nLlxyXG4gICAqIFRoaXMgdmFsdWUgU0hBTEwgYmUgdGhlIHNhbWUgYXMgc3BlY2lmaWVkIG9uIHRoZSByZWZlcmVuY2VkIEFwcG9pbnRtZW50IHNvIHRoYXQgdGhleSBjYW4gYmUgbWF0Y2hlZCwgYW5kIHN1YnNlcXVlbnRseSB1cGRhdGVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXJ0aWNpcGFudFR5cGU6IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogQSBQZXJzb24sIExvY2F0aW9uLCBIZWFsdGhjYXJlU2VydmljZSwgb3IgRGV2aWNlIHRoYXQgaXMgcGFydGljaXBhdGluZyBpbiB0aGUgYXBwb2ludG1lbnQuXHJcbiAgICovXHJcbiAgcHVibGljIGFjdG9yPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgYmVjYXVzZSB0aGUgc3RhdHVzIGNvbnRhaW5zIHRoZSBjb2RlIGVudGVyZWQtaW4tZXJyb3IgdGhhdCBtYXJrcyB0aGUgcGFydGljaXBhbnQgYXMgbm90IGN1cnJlbnRseSB2YWxpZC5cclxuICAgKi9cclxuICBwdWJsaWMgcGFydGljaXBhbnRTdGF0dXM6IGZoaXIuRmhpckNvZGU8UGFydGljaXBhdGlvbnN0YXR1c0NvZGVUeXBlPnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgY29tbWVudCBpcyBwYXJ0aWN1bGFybHkgaW1wb3J0YW50IHdoZW4gdGhlIHJlc3BvbmRlciBpcyBkZWNsaW5pbmcsIHRlbnRhdGl2ZWx5IGFjY2VwdGluZyBvciByZXF1ZXN0aW5nIGFub3RoZXIgdGltZSB0byBpbmRpY2F0ZSB0aGUgcmVhc29ucyB3aHkuXHJcbiAgICovXHJcbiAgcHVibGljIGNvbW1lbnQ/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEFwcG9pbnRtZW50UmVzcG9uc2UgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxBcHBvaW50bWVudFJlc3BvbnNlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ0FwcG9pbnRtZW50UmVzcG9uc2UnO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IHNvdXJjZS5pZGVudGlmaWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuSWRlbnRpZmllcih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmlkZW50aWZpZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYXBwb2ludG1lbnQnXSkgeyB0aGlzLmFwcG9pbnRtZW50ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5hcHBvaW50bWVudCk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmFwcG9pbnRtZW50ID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RhcnQnXSkgeyB0aGlzLnN0YXJ0ID0gbmV3IGZoaXIuRmhpckluc3RhbnQoe3ZhbHVlOiBzb3VyY2Uuc3RhcnR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZW5kJ10pIHsgdGhpcy5lbmQgPSBuZXcgZmhpci5GaGlySW5zdGFudCh7dmFsdWU6IHNvdXJjZS5lbmR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncGFydGljaXBhbnRUeXBlJ10pIHsgdGhpcy5wYXJ0aWNpcGFudFR5cGUgPSBzb3VyY2UucGFydGljaXBhbnRUeXBlLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucGFydGljaXBhbnRUeXBlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2FjdG9yJ10pIHsgdGhpcy5hY3RvciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuYWN0b3IpOyB9XHJcbiAgICBpZiAoc291cmNlWydwYXJ0aWNpcGFudFN0YXR1cyddKSB7IHRoaXMucGFydGljaXBhbnRTdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxQYXJ0aWNpcGF0aW9uc3RhdHVzQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnBhcnRpY2lwYW50U3RhdHVzfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnBhcnRpY2lwYW50U3RhdHVzID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29tbWVudCddKSB7IHRoaXMuY29tbWVudCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuY29tbWVudH0pOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEV4dGVuc2libGUtYm91bmQgVmFsdWUgU2V0IGZvciBwYXJ0aWNpcGFudFR5cGUgKEFwcG9pbnRtZW50UmVzcG9uc2UucGFydGljaXBhbnRUeXBlKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IHBhcnRpY2lwYW50VHlwZUV4dGVuc2libGVDb2RpbmdzKCkge1xyXG4gICAgcmV0dXJuIEVuY291bnRlclBhcnRpY2lwYW50VHlwZUNvZGluZ3M7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlcXVpcmVkLWJvdW5kIFZhbHVlIFNldCBmb3IgcGFydGljaXBhbnRTdGF0dXMgKEFwcG9pbnRtZW50UmVzcG9uc2UucGFydGljaXBhbnRTdGF0dXMpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgcGFydGljaXBhbnRTdGF0dXNSZXF1aXJlZENvZGVzKCkge1xyXG4gICAgcmV0dXJuIFBhcnRpY2lwYXRpb25zdGF0dXNDb2RlcztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICghdGhpc1sncmVzb3VyY2VUeXBlJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHJlc291cmNlVHlwZTpcIkFwcG9pbnRtZW50UmVzcG9uc2VcIiBmaGlyOiBBcHBvaW50bWVudFJlc3BvbnNlLnJlc291cmNlVHlwZTpcIkFwcG9pbnRtZW50UmVzcG9uc2VcIicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImlkZW50aWZpZXJcIl0pIHsgdGhpcy5pZGVudGlmaWVyLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKCF0aGlzWydhcHBvaW50bWVudCddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBhcHBvaW50bWVudDpmaGlyLlJlZmVyZW5jZSBmaGlyOiBBcHBvaW50bWVudFJlc3BvbnNlLmFwcG9pbnRtZW50OlJlZmVyZW5jZScgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImFwcG9pbnRtZW50XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuYXBwb2ludG1lbnQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wic3RhcnRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5zdGFydC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJlbmRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5lbmQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wicGFydGljaXBhbnRUeXBlXCJdKSB7IHRoaXMucGFydGljaXBhbnRUeXBlLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJhY3RvclwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmFjdG9yLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAoIXRoaXNbJ3BhcnRpY2lwYW50U3RhdHVzJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHBhcnRpY2lwYW50U3RhdHVzOmZoaXIuRmhpckNvZGU8UGFydGljaXBhdGlvbnN0YXR1c0NvZGVUeXBlPiBmaGlyOiBBcHBvaW50bWVudFJlc3BvbnNlLnBhcnRpY2lwYW50U3RhdHVzOmNvZGUnIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbJ3BhcnRpY2lwYW50U3RhdHVzJ10gJiYgKCFPYmplY3QudmFsdWVzKFBhcnRpY2lwYXRpb25zdGF0dXNDb2RlcykuaW5jbHVkZXModGhpcy5wYXJ0aWNpcGFudFN0YXR1cyBhcyBhbnkpKSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnY29kZS1pbnZhbGlkJywgZGlhZ25vc3RpY3M6ICdJbnZhbGlkIGNvZGUgcHJvcGVydHkgcGFydGljaXBhbnRTdGF0dXM6Zmhpci5GaGlyQ29kZTxQYXJ0aWNpcGF0aW9uc3RhdHVzQ29kZVR5cGU+IGZoaXI6IEFwcG9pbnRtZW50UmVzcG9uc2UucGFydGljaXBhbnRTdGF0dXM6Y29kZSBSZXF1aXJlZCBiaW5kaW5nIHRvOiBQYXJ0aWNpcGF0aW9uc3RhdHVzJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wicGFydGljaXBhbnRTdGF0dXNcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5wYXJ0aWNpcGFudFN0YXR1cy5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJjb21tZW50XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY29tbWVudC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuIl19