// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: MedicationStatement
import * as fhir from '../fhir.js';
// @ts-ignore
import { MedicationStatementStatusCodes } from '../fhirValueSets/MedicationStatementStatusCodes.js';
// @ts-ignore
import { MedicationStatementCategoryCodings, } from '../fhirValueSets/MedicationStatementCategoryCodings.js';
/**
 * A record of a medication that is being consumed by a patient.   A MedicationStatement may indicate that the patient may be taking the medication now or has taken the medication in the past or will be taking the medication in the future.  The source of this information can be the patient, significant other (such as a family member or spouse), or a clinician.  A common scenario where this information is captured is during the history taking process during a patient visit or stay.   The medication information may come from sources such as the patient's memory, from a prescription bottle,  or from a list of medications the patient, clinician or other party maintains.
 * The primary difference between a medication statement and a medication administration is that the medication administration has complete administration information and is based on actual administration information from the person who administered the medication.  A medication statement is often, if not always, less specific.  There is no required date/time when the medication was administered, in fact we only know that a source has reported the patient is taking this medication, where details such as time, quantity, or rate or even medication product may be incomplete or missing or less precise.  As stated earlier, the medication statement information may come from the patient's memory, from a prescription bottle or from a list of medications the patient, clinician or other party maintains.  Medication administration is more formal and is not missing detailed information.
 */
export class MedicationStatement extends fhir.DomainResource {
    /**
     * Default constructor for MedicationStatement - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'MedicationStatement';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['basedOn']) {
            this.basedOn = source.basedOn.map((x) => new fhir.Reference(x));
        }
        else {
            this.basedOn = [];
        }
        if (source['partOf']) {
            this.partOf = source.partOf.map((x) => new fhir.Reference(x));
        }
        else {
            this.partOf = [];
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['statusReason']) {
            this.statusReason = source.statusReason.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.statusReason = [];
        }
        if (source['category']) {
            this.category = new fhir.CodeableConcept(source.category);
        }
        if (source['medication']) {
            this.medication = source.medication;
        }
        else if (source['medicationCodeableConcept']) {
            this.medication = new fhir.CodeableConcept(source.medicationCodeableConcept);
        }
        else if (source['medicationReference']) {
            this.medication = new fhir.Reference(source.medicationReference);
        }
        else {
            this.medication = null;
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject);
        }
        else {
            this.subject = null;
        }
        if (source['context']) {
            this.context = new fhir.Reference(source.context);
        }
        if (source['effective']) {
            this.effective = source.effective;
        }
        else if (source['effectiveDateTime']) {
            this.effective = new fhir.FhirDateTime({ value: source.effectiveDateTime });
        }
        else if (source['effectivePeriod']) {
            this.effective = new fhir.Period(source.effectivePeriod);
        }
        if (source['dateAsserted']) {
            this.dateAsserted = new fhir.FhirDateTime({ value: source.dateAsserted });
        }
        if (source['_dateAsserted']) {
            if (this.dateAsserted) {
                this.dateAsserted.addExtendedProperties(source._dateAsserted);
            }
            else {
                this.dateAsserted = new fhir.FhirDateTime(source._dateAsserted);
            }
        }
        if (source['informationSource']) {
            this.informationSource = new fhir.Reference(source.informationSource);
        }
        if (source['derivedFrom']) {
            this.derivedFrom = source.derivedFrom.map((x) => new fhir.Reference(x));
        }
        else {
            this.derivedFrom = [];
        }
        if (source['reasonCode']) {
            this.reasonCode = source.reasonCode.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.reasonCode = [];
        }
        if (source['reasonReference']) {
            this.reasonReference = source.reasonReference.map((x) => new fhir.Reference(x));
        }
        else {
            this.reasonReference = [];
        }
        if (source['note']) {
            this.note = source.note.map((x) => new fhir.Annotation(x));
        }
        else {
            this.note = [];
        }
        if (source['dosage']) {
            this.dosage = source.dosage.map((x) => new fhir.Dosage(x));
        }
        else {
            this.dosage = [];
        }
    }
    /**
     * Required-bound Value Set for status (MedicationStatement.status)
     */
    static get statusRequiredCodes() {
        return MedicationStatementStatusCodes;
    }
    /**
     * Preferred-bound Value Set for category (MedicationStatement.category)
     */
    static get categoryPreferredCodings() {
        return MedicationStatementCategoryCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'MedicationStatement';
        }
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType fhir: MedicationStatement.resourceType:"MedicationStatement"', expression: [expression] });
        }
        if (this["identifier"]) {
            this.identifier.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.identifier[${i}]`)); });
        }
        if (this["basedOn"]) {
            this.basedOn.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.basedOn[${i}]`)); });
        }
        if (this["partOf"]) {
            this.partOf.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.partOf[${i}]`)); });
        }
        if (!this['status']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property status fhir: MedicationStatement.status:code', expression: [expression] });
        }
        if (this['status'] && (!Object.values(MedicationStatementStatusCodes).includes(this.status.value))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property status fhir: MedicationStatement.status:code Required binding to: MedicationStatementStatus', expression: [expression] });
        }
        if (this["status"]) {
            issues.push(...this.status.doModelValidation(expression + '.status'));
        }
        if (this["statusReason"]) {
            this.statusReason.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.statusReason[${i}]`)); });
        }
        if (this["category"]) {
            issues.push(...this.category.doModelValidation(expression + '.category'));
        }
        if (!this['medication']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property medication fhir: MedicationStatement.medication[x]:', expression: [expression] });
        }
        if (!this['subject']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property subject fhir: MedicationStatement.subject:Reference', expression: [expression] });
        }
        if (this["subject"]) {
            issues.push(...this.subject.doModelValidation(expression + '.subject'));
        }
        if (this["context"]) {
            issues.push(...this.context.doModelValidation(expression + '.context'));
        }
        if (this["dateAsserted"]) {
            issues.push(...this.dateAsserted.doModelValidation(expression + '.dateAsserted'));
        }
        if (this["informationSource"]) {
            issues.push(...this.informationSource.doModelValidation(expression + '.informationSource'));
        }
        if (this["derivedFrom"]) {
            this.derivedFrom.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.derivedFrom[${i}]`)); });
        }
        if (this["reasonCode"]) {
            this.reasonCode.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.reasonCode[${i}]`)); });
        }
        if (this["reasonReference"]) {
            this.reasonReference.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.reasonReference[${i}]`)); });
        }
        if (this["note"]) {
            this.note.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.note[${i}]`)); });
        }
        if (this["dosage"]) {
            this.dosage.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.dosage[${i}]`)); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicationStatement._fts_dataType = 'MedicationStatement';
/**
 * Internal flag to properly serialize choice-type element MedicationStatement.medication[x]
 */
MedicationStatement._fts_medicationIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element MedicationStatement.effective[x]
 */
MedicationStatement._fts_effectiveIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVkaWNhdGlvblN0YXRlbWVudC5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvTWVkaWNhdGlvblN0YXRlbWVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQyxxQ0FBcUM7QUFFckMsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFJbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSw4QkFBOEIsRUFBc0MsTUFBTSxvREFBb0QsQ0FBQztBQUt4SSxhQUFhO0FBQ2IsT0FBTyxFQUFFLGtDQUFrQyxHQUF5QyxNQUFNLHdEQUF3RCxDQUFDO0FBOEduSjs7O0dBR0c7QUFDSCxNQUFNLE9BQU8sbUJBQW9CLFNBQVEsSUFBSSxDQUFDLGNBQWM7SUFzRjFEOztPQUVHO0lBQ0gsWUFBWSxTQUEwQyxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUNoRyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxZQUFZLEdBQUcscUJBQXFCLENBQUM7UUFDMUMsSUFBSSxNQUFNLENBQUMsWUFBWSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQ2hHO1lBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxFQUFFLENBQUM7U0FBRTtRQUM5QixJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDdEY7WUFBRSxJQUFJLENBQUMsT0FBTyxHQUFHLEVBQUUsQ0FBQztTQUFFO1FBQzNCLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUNuRjtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDO1NBQUU7UUFDMUIsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBb0MsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLE1BQU0sRUFBQyxDQUFDLENBQUM7U0FBRTthQUNoSDtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDNUIsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFDckIsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO2dCQUFFLElBQUksQ0FBQyxNQUFNLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLE9BQVEsQ0FBQyxDQUFDO2FBQUU7aUJBQ25FO2dCQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFvQyxNQUFNLENBQUMsT0FBaUMsQ0FBQyxDQUFDO2FBQUU7U0FDdkg7UUFDRCxJQUFJLE1BQU0sQ0FBQyxjQUFjLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxZQUFZLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDM0c7WUFBRSxJQUFJLENBQUMsWUFBWSxHQUFHLEVBQUUsQ0FBQztTQUFFO1FBQ2hDLElBQUksTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQUU7UUFDdEYsSUFBSSxNQUFNLENBQUMsWUFBWSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUM7U0FBRTthQUM3RCxJQUFJLE1BQU0sQ0FBQywyQkFBMkIsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLHlCQUF5QixDQUFDLENBQUM7U0FBRTthQUMxSCxJQUFJLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLG1CQUFtQixDQUFDLENBQUM7U0FBRTthQUN4RztZQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDaEMsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7U0FBRTthQUN4RTtZQUFFLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDN0IsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7U0FBRTtRQUM3RSxJQUFJLE1BQU0sQ0FBQyxXQUFXLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQztTQUFFO2FBQzFELElBQUksTUFBTSxDQUFDLG1CQUFtQixDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsaUJBQWlCLEVBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDL0csSUFBSSxNQUFNLENBQUMsaUJBQWlCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxlQUFlLENBQUMsQ0FBQztTQUFFO1FBQ2pHLElBQUksTUFBTSxDQUFDLGNBQWMsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLFlBQVksRUFBQyxDQUFDLENBQUM7U0FBRTtRQUN4RyxJQUFJLE1BQU0sQ0FBQyxlQUFlLENBQUMsRUFBRTtZQUMzQixJQUFJLElBQUksQ0FBQyxZQUFZLEVBQUU7Z0JBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsYUFBYyxDQUFDLENBQUM7YUFBRTtpQkFDckY7Z0JBQUUsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLGFBQStDLENBQUMsQ0FBQzthQUFFO1NBQzVHO1FBQ0QsSUFBSSxNQUFNLENBQUMsbUJBQW1CLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLGlCQUFpQixDQUFDLENBQUM7U0FBRTtRQUMzRyxJQUFJLE1BQU0sQ0FBQyxhQUFhLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDbEc7WUFBRSxJQUFJLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQztTQUFFO1FBQy9CLElBQUksTUFBTSxDQUFDLFlBQVksQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUNyRztZQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsRUFBRSxDQUFDO1NBQUU7UUFDOUIsSUFBSSxNQUFNLENBQUMsaUJBQWlCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxlQUFlLEdBQUcsTUFBTSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDOUc7WUFBRSxJQUFJLENBQUMsZUFBZSxHQUFHLEVBQUUsQ0FBQztTQUFFO1FBQ25DLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUM5RTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDO1NBQUU7UUFDeEIsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQ2hGO1lBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUM7U0FBRTtJQUM1QixDQUFDO0lBQ0Q7O09BRUc7SUFDSSxNQUFNLEtBQUssbUJBQW1CO1FBQ25DLE9BQU8sOEJBQThCLENBQUM7SUFDeEMsQ0FBQztJQUNEOztPQUVHO0lBQ0ksTUFBTSxLQUFLLHdCQUF3QjtRQUN4QyxPQUFPLGtDQUFrQyxDQUFDO0lBQzVDLENBQUM7SUFDRDs7T0FFRztJQUNhLGlCQUFpQixDQUFDLGFBQW9CLEVBQUU7UUFDdEQsSUFBSSxNQUFNLEdBQW1CLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNqRSxJQUFJLFVBQVUsS0FBSyxFQUFFLEVBQUU7WUFBRSxVQUFVLEdBQUcscUJBQXFCLENBQUE7U0FBRTtRQUM3RCxJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxFQUFFO1lBQ3pCLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUFFLHFHQUFxRyxFQUFFLFVBQVUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsQ0FBQztTQUNwTTtRQUNELElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixDQUFDLFVBQVUsR0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQUU7UUFDdEksSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLENBQUMsVUFBVSxHQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7U0FBRTtRQUM3SCxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLEdBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtTQUFFO1FBQzFILElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDbkIsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQUUsd0VBQXdFLEVBQUUsVUFBVSxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1NBQ3ZLO1FBQ0QsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsOEJBQThCLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFZLENBQUMsQ0FBQyxFQUFFO1lBQ3pHLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxjQUFjLEVBQUUsV0FBVyxFQUFFLG1IQUFtSCxFQUFFLFVBQVUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsQ0FBQztTQUN0TjtRQUNELElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsaUJBQWlCLENBQUMsVUFBVSxHQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7U0FBRTtRQUM1RixJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLEdBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQUU7UUFDNUksSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLEdBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztTQUFFO1FBQ2xHLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUU7WUFDdkIsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQUUsK0VBQStFLEVBQUUsVUFBVSxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1NBQzlLO1FBQ0QsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUNwQixNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSwrRUFBK0UsRUFBRSxVQUFVLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDOUs7UUFDRCxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGlCQUFpQixDQUFDLFVBQVUsR0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDL0YsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLEdBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztTQUFFO1FBQy9GLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsaUJBQWlCLENBQUMsVUFBVSxHQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUM7U0FBRTtRQUM5RyxJQUFJLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLEdBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDN0gsSUFBSSxJQUFJLENBQUMsYUFBYSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLENBQUMsVUFBVSxHQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtTQUFFO1FBQ3pJLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixDQUFDLFVBQVUsR0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQUU7UUFDdEksSUFBSSxJQUFJLENBQUMsaUJBQWlCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLEdBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQUU7UUFDckosSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLENBQUMsVUFBVSxHQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7U0FBRTtRQUNwSCxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLEdBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtTQUFFO1FBQzFILE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBdExEOztHQUVHO0FBQzZCLGlDQUFhLEdBQVUscUJBQXFCLENBQUM7QUFrQzdFOztHQUVHO0FBQ3VCLDJDQUF1QixHQUFRLElBQUksQ0FBQztBQWE5RDs7R0FFRztBQUN1QiwwQ0FBc0IsR0FBUSxJQUFJLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjQuY29yZSB2ZXJzaW9uOiA0LjAuMVxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IE1lZGljYXRpb25TdGF0ZW1lbnRcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE1lZGljYXRpb25TdGF0ZW1lbnRTdGF0dXNDb2RpbmdzLCBNZWRpY2F0aW9uU3RhdGVtZW50U3RhdHVzQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTWVkaWNhdGlvblN0YXRlbWVudFN0YXR1c0NvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE1lZGljYXRpb25TdGF0ZW1lbnRTdGF0dXNDb2RlcywgIE1lZGljYXRpb25TdGF0ZW1lbnRTdGF0dXNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTWVkaWNhdGlvblN0YXRlbWVudFN0YXR1c0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBSZWFzb25NZWRpY2F0aW9uU3RhdHVzQ29kaW5ncywgUmVhc29uTWVkaWNhdGlvblN0YXR1c0NvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1JlYXNvbk1lZGljYXRpb25TdGF0dXNDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBSZWFzb25NZWRpY2F0aW9uU3RhdHVzQ29kZXMsICBSZWFzb25NZWRpY2F0aW9uU3RhdHVzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1JlYXNvbk1lZGljYXRpb25TdGF0dXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTWVkaWNhdGlvblN0YXRlbWVudENhdGVnb3J5Q29kaW5ncywgTWVkaWNhdGlvblN0YXRlbWVudENhdGVnb3J5Q29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTWVkaWNhdGlvblN0YXRlbWVudENhdGVnb3J5Q29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTWVkaWNhdGlvblN0YXRlbWVudENhdGVnb3J5Q29kZXMsICBNZWRpY2F0aW9uU3RhdGVtZW50Q2F0ZWdvcnlDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTWVkaWNhdGlvblN0YXRlbWVudENhdGVnb3J5Q29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbmRpdGlvbkNvZGluZ3MsIENvbmRpdGlvbkNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbmRpdGlvbkNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbmRpdGlvbkNvZGVzLCAgQ29uZGl0aW9uQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbmRpdGlvbkNvZGVzLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lZGljYXRpb25TdGF0ZW1lbnQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVkaWNhdGlvblN0YXRlbWVudEFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIk1lZGljYXRpb25TdGF0ZW1lbnRcInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBhIGJ1c2luZXNzIGlkZW50aWZpZXIsIG5vdCBhIHJlc291cmNlIGlkZW50aWZpZXIuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBwbGFuLCBwcm9wb3NhbCBvciBvcmRlciB0aGF0IGlzIGZ1bGZpbGxlZCBpbiB3aG9sZSBvciBpbiBwYXJ0IGJ5IHRoaXMgZXZlbnQuXHJcbiAgICovXHJcbiAgYmFzZWRPbj86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGxhcmdlciBldmVudCBvZiB3aGljaCB0aGlzIHBhcnRpY3VsYXIgZXZlbnQgaXMgYSBjb21wb25lbnQgb3Igc3RlcC5cclxuICAgKi9cclxuICBwYXJ0T2Y/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTWVkaWNhdGlvblN0YXRlbWVudCBpcyBhIHN0YXRlbWVudCBhdCBhIHBvaW50IGluIHRpbWUuICBUaGUgc3RhdHVzIGlzIG9ubHkgcmVwcmVzZW50YXRpdmUgYXQgdGhlIHBvaW50IHdoZW4gaXQgd2FzIGFzc2VydGVkLiAgVGhlIHZhbHVlIHNldCBmb3IgTWVkaWNhdGlvblN0YXRlbWVudC5zdGF0dXMgY29udGFpbnMgY29kZXMgdGhhdCBhc3NlcnQgdGhlIHN0YXR1cyBvZiB0aGUgdXNlIG9mIHRoZSBtZWRpY2F0aW9uIGJ5IHRoZSBwYXRpZW50IChmb3IgZXhhbXBsZSwgc3RvcHBlZCBvciBvbiBob2xkKSBhcyB3ZWxsIGFzIGNvZGVzIHRoYXQgYXNzZXJ0IHRoZSBzdGF0dXMgb2YgdGhlIG1lZGljYXRpb24gc3RhdGVtZW50IGl0c2VsZiAoZm9yIGV4YW1wbGUsIGVudGVyZWQgaW4gZXJyb3IpLlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgYmVjYXVzZSB0aGUgc3RhdHVzIGNvbnRhaW5zIGNvZGVzIHRoYXQgbWFyayB0aGUgcmVzb3VyY2UgYXMgbm90IGN1cnJlbnRseSB2YWxpZC5cclxuICAgKi9cclxuICBzdGF0dXM6IGZoaXIuRmhpckNvZGU8TWVkaWNhdGlvblN0YXRlbWVudFN0YXR1c0NvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBNZWRpY2F0aW9uU3RhdGVtZW50LnN0YXR1c1xyXG4gICAqL1xyXG4gIF9zdGF0dXM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaXMgZ2VuZXJhbGx5IG9ubHkgdXNlZCBmb3IgXCJleGNlcHRpb25cIiBzdGF0dXNlcyBzdWNoIGFzIFwibm90LXRha2VuXCIsIFwib24taG9sZFwiLCBcImNhbmNlbGxlZFwiIG9yIFwiZW50ZXJlZC1pbi1lcnJvclwiLiBUaGUgcmVhc29uIGZvciBwZXJmb3JtaW5nIHRoZSBldmVudCBhdCBhbGwgaXMgY2FwdHVyZWQgaW4gcmVhc29uQ29kZSwgbm90IGhlcmUuXHJcbiAgICovXHJcbiAgc3RhdHVzUmVhc29uPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB3aGVyZSB0aGUgbWVkaWNhdGlvbiBpcyBleHBlY3RlZCB0byBiZSBjb25zdW1lZCBvciBhZG1pbmlzdGVyZWQuXHJcbiAgICovXHJcbiAgY2F0ZWdvcnk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIG9ubHkgYSBjb2RlIGlzIHNwZWNpZmllZCwgdGhlbiBpdCBuZWVkcyB0byBiZSBhIGNvZGUgZm9yIGEgc3BlY2lmaWMgcHJvZHVjdC4gSWYgbW9yZSBpbmZvcm1hdGlvbiBpcyByZXF1aXJlZCwgdGhlbiB0aGUgdXNlIG9mIHRoZSBtZWRpY2F0aW9uIHJlc291cmNlIGlzIHJlY29tbWVuZGVkLiAgRm9yIGV4YW1wbGUsIGlmIHlvdSByZXF1aXJlIGZvcm0gb3IgbG90IG51bWJlciwgdGhlbiB5b3UgbXVzdCByZWZlcmVuY2UgdGhlIE1lZGljYXRpb24gcmVzb3VyY2UuXHJcbiAgICovXHJcbiAgbWVkaWNhdGlvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0fGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiBvbmx5IGEgY29kZSBpcyBzcGVjaWZpZWQsIHRoZW4gaXQgbmVlZHMgdG8gYmUgYSBjb2RlIGZvciBhIHNwZWNpZmljIHByb2R1Y3QuIElmIG1vcmUgaW5mb3JtYXRpb24gaXMgcmVxdWlyZWQsIHRoZW4gdGhlIHVzZSBvZiB0aGUgbWVkaWNhdGlvbiByZXNvdXJjZSBpcyByZWNvbW1lbmRlZC4gIEZvciBleGFtcGxlLCBpZiB5b3UgcmVxdWlyZSBmb3JtIG9yIGxvdCBudW1iZXIsIHRoZW4geW91IG11c3QgcmVmZXJlbmNlIHRoZSBNZWRpY2F0aW9uIHJlc291cmNlLlxyXG4gICAqL1xyXG4gIG1lZGljYXRpb25Db2RlYWJsZUNvbmNlcHQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIG9ubHkgYSBjb2RlIGlzIHNwZWNpZmllZCwgdGhlbiBpdCBuZWVkcyB0byBiZSBhIGNvZGUgZm9yIGEgc3BlY2lmaWMgcHJvZHVjdC4gSWYgbW9yZSBpbmZvcm1hdGlvbiBpcyByZXF1aXJlZCwgdGhlbiB0aGUgdXNlIG9mIHRoZSBtZWRpY2F0aW9uIHJlc291cmNlIGlzIHJlY29tbWVuZGVkLiAgRm9yIGV4YW1wbGUsIGlmIHlvdSByZXF1aXJlIGZvcm0gb3IgbG90IG51bWJlciwgdGhlbiB5b3UgbXVzdCByZWZlcmVuY2UgdGhlIE1lZGljYXRpb24gcmVzb3VyY2UuXHJcbiAgICovXHJcbiAgbWVkaWNhdGlvblJlZmVyZW5jZT86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBlcnNvbiwgYW5pbWFsIG9yIGdyb3VwIHdobyBpcy93YXMgdGFraW5nIHRoZSBtZWRpY2F0aW9uLlxyXG4gICAqL1xyXG4gIHN1YmplY3Q6IGZoaXIuUmVmZXJlbmNlQXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBlbmNvdW50ZXIgb3IgZXBpc29kZSBvZiBjYXJlIHRoYXQgZXN0YWJsaXNoZXMgdGhlIGNvbnRleHQgZm9yIHRoaXMgTWVkaWNhdGlvblN0YXRlbWVudC5cclxuICAgKi9cclxuICBjb250ZXh0PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGF0dHJpYnV0ZSByZWZsZWN0cyB0aGUgcGVyaW9kIG92ZXIgd2hpY2ggdGhlIHBhdGllbnQgY29uc3VtZWQgdGhlIG1lZGljYXRpb24gYW5kIGlzIGV4cGVjdGVkIHRvIGJlIHBvcHVsYXRlZCBvbiB0aGUgbWFqb3JpdHkgb2YgTWVkaWNhdGlvbiBTdGF0ZW1lbnRzLiBJZiB0aGUgbWVkaWNhdGlvbiBpcyBzdGlsbCBiZWluZyB0YWtlbiBhdCB0aGUgdGltZSB0aGUgc3RhdGVtZW50IGlzIHJlY29yZGVkLCB0aGUgXCJlbmRcIiBkYXRlIHdpbGwgYmUgb21pdHRlZC4gIFRoZSBkYXRlL3RpbWUgYXR0cmlidXRlIHN1cHBvcnRzIGEgdmFyaWV0eSBvZiBkYXRlcyAtIHllYXIsIHllYXIvbW9udGggYW5kIGV4YWN0IGRhdGUuICBJZiBzb21ldGhpbmcgbW9yZSB0aGFuIHRoaXMgaXMgcmVxdWlyZWQsIHRoaXMgc2hvdWxkIGJlIGNvbnZleWVkIGFzIHRleHQuXHJcbiAgICovXHJcbiAgZWZmZWN0aXZlPzogZmhpci5GaGlyRGF0ZVRpbWV8Zmhpci5QZXJpb2R8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgYXR0cmlidXRlIHJlZmxlY3RzIHRoZSBwZXJpb2Qgb3ZlciB3aGljaCB0aGUgcGF0aWVudCBjb25zdW1lZCB0aGUgbWVkaWNhdGlvbiBhbmQgaXMgZXhwZWN0ZWQgdG8gYmUgcG9wdWxhdGVkIG9uIHRoZSBtYWpvcml0eSBvZiBNZWRpY2F0aW9uIFN0YXRlbWVudHMuIElmIHRoZSBtZWRpY2F0aW9uIGlzIHN0aWxsIGJlaW5nIHRha2VuIGF0IHRoZSB0aW1lIHRoZSBzdGF0ZW1lbnQgaXMgcmVjb3JkZWQsIHRoZSBcImVuZFwiIGRhdGUgd2lsbCBiZSBvbWl0dGVkLiAgVGhlIGRhdGUvdGltZSBhdHRyaWJ1dGUgc3VwcG9ydHMgYSB2YXJpZXR5IG9mIGRhdGVzIC0geWVhciwgeWVhci9tb250aCBhbmQgZXhhY3QgZGF0ZS4gIElmIHNvbWV0aGluZyBtb3JlIHRoYW4gdGhpcyBpcyByZXF1aXJlZCwgdGhpcyBzaG91bGQgYmUgY29udmV5ZWQgYXMgdGV4dC5cclxuICAgKi9cclxuICBlZmZlY3RpdmVEYXRlVGltZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBhdHRyaWJ1dGUgcmVmbGVjdHMgdGhlIHBlcmlvZCBvdmVyIHdoaWNoIHRoZSBwYXRpZW50IGNvbnN1bWVkIHRoZSBtZWRpY2F0aW9uIGFuZCBpcyBleHBlY3RlZCB0byBiZSBwb3B1bGF0ZWQgb24gdGhlIG1ham9yaXR5IG9mIE1lZGljYXRpb24gU3RhdGVtZW50cy4gSWYgdGhlIG1lZGljYXRpb24gaXMgc3RpbGwgYmVpbmcgdGFrZW4gYXQgdGhlIHRpbWUgdGhlIHN0YXRlbWVudCBpcyByZWNvcmRlZCwgdGhlIFwiZW5kXCIgZGF0ZSB3aWxsIGJlIG9taXR0ZWQuICBUaGUgZGF0ZS90aW1lIGF0dHJpYnV0ZSBzdXBwb3J0cyBhIHZhcmlldHkgb2YgZGF0ZXMgLSB5ZWFyLCB5ZWFyL21vbnRoIGFuZCBleGFjdCBkYXRlLiAgSWYgc29tZXRoaW5nIG1vcmUgdGhhbiB0aGlzIGlzIHJlcXVpcmVkLCB0aGlzIHNob3VsZCBiZSBjb252ZXllZCBhcyB0ZXh0LlxyXG4gICAqL1xyXG4gIGVmZmVjdGl2ZVBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgd2hlbiB0aGUgbWVkaWNhdGlvbiBzdGF0ZW1lbnQgd2FzIGFzc2VydGVkIGJ5IHRoZSBpbmZvcm1hdGlvbiBzb3VyY2UuXHJcbiAgICovXHJcbiAgZGF0ZUFzc2VydGVkPzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogTWVkaWNhdGlvblN0YXRlbWVudC5kYXRlQXNzZXJ0ZWRcclxuICAgKi9cclxuICBfZGF0ZUFzc2VydGVkPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgcGVyc29uIG9yIG9yZ2FuaXphdGlvbiB0aGF0IHByb3ZpZGVkIHRoZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgdGFraW5nIG9mIHRoaXMgbWVkaWNhdGlvbi4gTm90ZTogVXNlIGRlcml2ZWRGcm9tIHdoZW4gYSBNZWRpY2F0aW9uU3RhdGVtZW50IGlzIGRlcml2ZWQgZnJvbSBvdGhlciByZXNvdXJjZXMsIGUuZy4gQ2xhaW0gb3IgTWVkaWNhdGlvblJlcXVlc3QuXHJcbiAgICovXHJcbiAgaW5mb3JtYXRpb25Tb3VyY2U/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIExpa2VseSByZWZlcmVuY2VzIHdvdWxkIGJlIHRvIE1lZGljYXRpb25SZXF1ZXN0LCBNZWRpY2F0aW9uRGlzcGVuc2UsIENsYWltLCBPYnNlcnZhdGlvbiBvciBRdWVzdGlvbm5haXJlQW5zd2Vycy4gIFRoZSBtb3N0IGNvbW1vbiB1c2UgY2FzZXMgZm9yIGRlcml2aW5nIGEgTWVkaWNhdGlvblN0YXRlbWVudCBjb21lcyBmcm9tIGNyZWF0aW5nIGEgTWVkaWNhdGlvblN0YXRlbWVudCBmcm9tIGEgTWVkaWNhdGlvblJlcXVlc3Qgb3IgZnJvbSBhIGxhYiBvYnNlcnZhdGlvbiBvciBhIGNsYWltLiAgaXQgc2hvdWxkIGJlIG5vdGVkIHRoYXQgdGhlIGFtb3VudCBvZiBpbmZvcm1hdGlvbiB0aGF0IGlzIGF2YWlsYWJsZSB2YXJpZXMgZnJvbSB0aGUgdHlwZSByZXNvdXJjZSB0aGF0IHlvdSBkZXJpdmUgdGhlIE1lZGljYXRpb25TdGF0ZW1lbnQgZnJvbS5cclxuICAgKi9cclxuICBkZXJpdmVkRnJvbT86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGNvdWxkIGJlIGEgZGlhZ25vc2lzIGNvZGUuIElmIGEgZnVsbCBjb25kaXRpb24gcmVjb3JkIGV4aXN0cyBvciBhZGRpdGlvbmFsIGRldGFpbCBpcyBuZWVkZWQsIHVzZSByZWFzb25Gb3JVc2VSZWZlcmVuY2UuXHJcbiAgICovXHJcbiAgcmVhc29uQ29kZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGlzIGEgcmVmZXJlbmNlIHRvIGEgY29uZGl0aW9uIHRoYXQgaXMgdGhlIHJlYXNvbiB3aHkgdGhlIG1lZGljYXRpb24gaXMgYmVpbmcvd2FzIHRha2VuLiAgSWYgb25seSBhIGNvZGUgZXhpc3RzLCB1c2UgcmVhc29uRm9yVXNlQ29kZS5cclxuICAgKi9cclxuICByZWFzb25SZWZlcmVuY2U/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUHJvdmlkZXMgZXh0cmEgaW5mb3JtYXRpb24gYWJvdXQgdGhlIG1lZGljYXRpb24gc3RhdGVtZW50IHRoYXQgaXMgbm90IGNvbnZleWVkIGJ5IHRoZSBvdGhlciBhdHRyaWJ1dGVzLlxyXG4gICAqL1xyXG4gIG5vdGU/OiBmaGlyLkFubm90YXRpb25BcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRlcyBpbmNsdWRlZCBpbiB0aGUgZG9zYWdlIG9uIGEgTWVkaWNhdGlvbiBTdGF0ZW1lbnQgcmVmbGVjdCB0aGUgZGF0ZXMgZm9yIGEgZ2l2ZW4gZG9zZS4gIEZvciBleGFtcGxlLCBcImZyb20gTm92ZW1iZXIgMSwgMjAxNiB0byBOb3ZlbWJlciAzLCAyMDE2LCB0YWtlIG9uZSB0YWJsZXQgZGFpbHkgYW5kIGZyb20gTm92ZW1iZXIgNCwgMjAxNiB0byBOb3ZlbWJlciA3LCAyMDE2LCB0YWtlIHR3byB0YWJsZXRzIGRhaWx5LlwiICBJdCBpcyBleHBlY3RlZCB0aGF0IHRoaXMgc3BlY2lmaWNpdHkgbWF5IG9ubHkgYmUgcG9wdWxhdGVkIHdoZXJlIHRoZSBwYXRpZW50IGJyaW5ncyBpbiB0aGVpciBsYWJlbGVkIGNvbnRhaW5lciBvciB3aGVyZSB0aGUgTWVkaWNhdGlvbiBTdGF0ZW1lbnQgaXMgZGVyaXZlZCBmcm9tIGEgTWVkaWNhdGlvblJlcXVlc3QuXHJcbiAgICovXHJcbiAgZG9zYWdlPzogZmhpci5Eb3NhZ2VBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQSByZWNvcmQgb2YgYSBtZWRpY2F0aW9uIHRoYXQgaXMgYmVpbmcgY29uc3VtZWQgYnkgYSBwYXRpZW50LiAgIEEgTWVkaWNhdGlvblN0YXRlbWVudCBtYXkgaW5kaWNhdGUgdGhhdCB0aGUgcGF0aWVudCBtYXkgYmUgdGFraW5nIHRoZSBtZWRpY2F0aW9uIG5vdyBvciBoYXMgdGFrZW4gdGhlIG1lZGljYXRpb24gaW4gdGhlIHBhc3Qgb3Igd2lsbCBiZSB0YWtpbmcgdGhlIG1lZGljYXRpb24gaW4gdGhlIGZ1dHVyZS4gIFRoZSBzb3VyY2Ugb2YgdGhpcyBpbmZvcm1hdGlvbiBjYW4gYmUgdGhlIHBhdGllbnQsIHNpZ25pZmljYW50IG90aGVyIChzdWNoIGFzIGEgZmFtaWx5IG1lbWJlciBvciBzcG91c2UpLCBvciBhIGNsaW5pY2lhbi4gIEEgY29tbW9uIHNjZW5hcmlvIHdoZXJlIHRoaXMgaW5mb3JtYXRpb24gaXMgY2FwdHVyZWQgaXMgZHVyaW5nIHRoZSBoaXN0b3J5IHRha2luZyBwcm9jZXNzIGR1cmluZyBhIHBhdGllbnQgdmlzaXQgb3Igc3RheS4gICBUaGUgbWVkaWNhdGlvbiBpbmZvcm1hdGlvbiBtYXkgY29tZSBmcm9tIHNvdXJjZXMgc3VjaCBhcyB0aGUgcGF0aWVudCdzIG1lbW9yeSwgZnJvbSBhIHByZXNjcmlwdGlvbiBib3R0bGUsICBvciBmcm9tIGEgbGlzdCBvZiBtZWRpY2F0aW9ucyB0aGUgcGF0aWVudCwgY2xpbmljaWFuIG9yIG90aGVyIHBhcnR5IG1haW50YWlucy4gXHJcbiAqIFRoZSBwcmltYXJ5IGRpZmZlcmVuY2UgYmV0d2VlbiBhIG1lZGljYXRpb24gc3RhdGVtZW50IGFuZCBhIG1lZGljYXRpb24gYWRtaW5pc3RyYXRpb24gaXMgdGhhdCB0aGUgbWVkaWNhdGlvbiBhZG1pbmlzdHJhdGlvbiBoYXMgY29tcGxldGUgYWRtaW5pc3RyYXRpb24gaW5mb3JtYXRpb24gYW5kIGlzIGJhc2VkIG9uIGFjdHVhbCBhZG1pbmlzdHJhdGlvbiBpbmZvcm1hdGlvbiBmcm9tIHRoZSBwZXJzb24gd2hvIGFkbWluaXN0ZXJlZCB0aGUgbWVkaWNhdGlvbi4gIEEgbWVkaWNhdGlvbiBzdGF0ZW1lbnQgaXMgb2Z0ZW4sIGlmIG5vdCBhbHdheXMsIGxlc3Mgc3BlY2lmaWMuICBUaGVyZSBpcyBubyByZXF1aXJlZCBkYXRlL3RpbWUgd2hlbiB0aGUgbWVkaWNhdGlvbiB3YXMgYWRtaW5pc3RlcmVkLCBpbiBmYWN0IHdlIG9ubHkga25vdyB0aGF0IGEgc291cmNlIGhhcyByZXBvcnRlZCB0aGUgcGF0aWVudCBpcyB0YWtpbmcgdGhpcyBtZWRpY2F0aW9uLCB3aGVyZSBkZXRhaWxzIHN1Y2ggYXMgdGltZSwgcXVhbnRpdHksIG9yIHJhdGUgb3IgZXZlbiBtZWRpY2F0aW9uIHByb2R1Y3QgbWF5IGJlIGluY29tcGxldGUgb3IgbWlzc2luZyBvciBsZXNzIHByZWNpc2UuICBBcyBzdGF0ZWQgZWFybGllciwgdGhlIG1lZGljYXRpb24gc3RhdGVtZW50IGluZm9ybWF0aW9uIG1heSBjb21lIGZyb20gdGhlIHBhdGllbnQncyBtZW1vcnksIGZyb20gYSBwcmVzY3JpcHRpb24gYm90dGxlIG9yIGZyb20gYSBsaXN0IG9mIG1lZGljYXRpb25zIHRoZSBwYXRpZW50LCBjbGluaWNpYW4gb3Igb3RoZXIgcGFydHkgbWFpbnRhaW5zLiAgTWVkaWNhdGlvbiBhZG1pbmlzdHJhdGlvbiBpcyBtb3JlIGZvcm1hbCBhbmQgaXMgbm90IG1pc3NpbmcgZGV0YWlsZWQgaW5mb3JtYXRpb24uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNhdGlvblN0YXRlbWVudCBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVkaWNhdGlvblN0YXRlbWVudCc7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJNZWRpY2F0aW9uU3RhdGVtZW50XCI7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBhIGJ1c2luZXNzIGlkZW50aWZpZXIsIG5vdCBhIHJlc291cmNlIGlkZW50aWZpZXIuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI6IGZoaXIuSWRlbnRpZmllcltdO1xyXG4gIC8qKlxyXG4gICAqIEEgcGxhbiwgcHJvcG9zYWwgb3Igb3JkZXIgdGhhdCBpcyBmdWxmaWxsZWQgaW4gd2hvbGUgb3IgaW4gcGFydCBieSB0aGlzIGV2ZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBiYXNlZE9uOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIEEgbGFyZ2VyIGV2ZW50IG9mIHdoaWNoIHRoaXMgcGFydGljdWxhciBldmVudCBpcyBhIGNvbXBvbmVudCBvciBzdGVwLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXJ0T2Y6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogTWVkaWNhdGlvblN0YXRlbWVudCBpcyBhIHN0YXRlbWVudCBhdCBhIHBvaW50IGluIHRpbWUuICBUaGUgc3RhdHVzIGlzIG9ubHkgcmVwcmVzZW50YXRpdmUgYXQgdGhlIHBvaW50IHdoZW4gaXQgd2FzIGFzc2VydGVkLiAgVGhlIHZhbHVlIHNldCBmb3IgTWVkaWNhdGlvblN0YXRlbWVudC5zdGF0dXMgY29udGFpbnMgY29kZXMgdGhhdCBhc3NlcnQgdGhlIHN0YXR1cyBvZiB0aGUgdXNlIG9mIHRoZSBtZWRpY2F0aW9uIGJ5IHRoZSBwYXRpZW50IChmb3IgZXhhbXBsZSwgc3RvcHBlZCBvciBvbiBob2xkKSBhcyB3ZWxsIGFzIGNvZGVzIHRoYXQgYXNzZXJ0IHRoZSBzdGF0dXMgb2YgdGhlIG1lZGljYXRpb24gc3RhdGVtZW50IGl0c2VsZiAoZm9yIGV4YW1wbGUsIGVudGVyZWQgaW4gZXJyb3IpLlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgYmVjYXVzZSB0aGUgc3RhdHVzIGNvbnRhaW5zIGNvZGVzIHRoYXQgbWFyayB0aGUgcmVzb3VyY2UgYXMgbm90IGN1cnJlbnRseSB2YWxpZC5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPE1lZGljYXRpb25TdGF0ZW1lbnRTdGF0dXNDb2RlVHlwZT58bnVsbDtcclxuICAvKipcclxuICAgKiBUaGlzIGlzIGdlbmVyYWxseSBvbmx5IHVzZWQgZm9yIFwiZXhjZXB0aW9uXCIgc3RhdHVzZXMgc3VjaCBhcyBcIm5vdC10YWtlblwiLCBcIm9uLWhvbGRcIiwgXCJjYW5jZWxsZWRcIiBvciBcImVudGVyZWQtaW4tZXJyb3JcIi4gVGhlIHJlYXNvbiBmb3IgcGVyZm9ybWluZyB0aGUgZXZlbnQgYXQgYWxsIGlzIGNhcHR1cmVkIGluIHJlYXNvbkNvZGUsIG5vdCBoZXJlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0dXNSZWFzb246IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHdoZXJlIHRoZSBtZWRpY2F0aW9uIGlzIGV4cGVjdGVkIHRvIGJlIGNvbnN1bWVkIG9yIGFkbWluaXN0ZXJlZC5cclxuICAgKi9cclxuICBwdWJsaWMgY2F0ZWdvcnk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgb25seSBhIGNvZGUgaXMgc3BlY2lmaWVkLCB0aGVuIGl0IG5lZWRzIHRvIGJlIGEgY29kZSBmb3IgYSBzcGVjaWZpYyBwcm9kdWN0LiBJZiBtb3JlIGluZm9ybWF0aW9uIGlzIHJlcXVpcmVkLCB0aGVuIHRoZSB1c2Ugb2YgdGhlIG1lZGljYXRpb24gcmVzb3VyY2UgaXMgcmVjb21tZW5kZWQuICBGb3IgZXhhbXBsZSwgaWYgeW91IHJlcXVpcmUgZm9ybSBvciBsb3QgbnVtYmVyLCB0aGVuIHlvdSBtdXN0IHJlZmVyZW5jZSB0aGUgTWVkaWNhdGlvbiByZXNvdXJjZS5cclxuICAgKi9cclxuICBwdWJsaWMgbWVkaWNhdGlvbjogKGZoaXIuQ29kZWFibGVDb25jZXB0fGZoaXIuUmVmZXJlbmNlKXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgTWVkaWNhdGlvblN0YXRlbWVudC5tZWRpY2F0aW9uW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX21lZGljYXRpb25Jc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBUaGUgcGVyc29uLCBhbmltYWwgb3IgZ3JvdXAgd2hvIGlzL3dhcyB0YWtpbmcgdGhlIG1lZGljYXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHN1YmplY3Q6IGZoaXIuUmVmZXJlbmNlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGVuY291bnRlciBvciBlcGlzb2RlIG9mIGNhcmUgdGhhdCBlc3RhYmxpc2hlcyB0aGUgY29udGV4dCBmb3IgdGhpcyBNZWRpY2F0aW9uU3RhdGVtZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb250ZXh0PzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgYXR0cmlidXRlIHJlZmxlY3RzIHRoZSBwZXJpb2Qgb3ZlciB3aGljaCB0aGUgcGF0aWVudCBjb25zdW1lZCB0aGUgbWVkaWNhdGlvbiBhbmQgaXMgZXhwZWN0ZWQgdG8gYmUgcG9wdWxhdGVkIG9uIHRoZSBtYWpvcml0eSBvZiBNZWRpY2F0aW9uIFN0YXRlbWVudHMuIElmIHRoZSBtZWRpY2F0aW9uIGlzIHN0aWxsIGJlaW5nIHRha2VuIGF0IHRoZSB0aW1lIHRoZSBzdGF0ZW1lbnQgaXMgcmVjb3JkZWQsIHRoZSBcImVuZFwiIGRhdGUgd2lsbCBiZSBvbWl0dGVkLiAgVGhlIGRhdGUvdGltZSBhdHRyaWJ1dGUgc3VwcG9ydHMgYSB2YXJpZXR5IG9mIGRhdGVzIC0geWVhciwgeWVhci9tb250aCBhbmQgZXhhY3QgZGF0ZS4gIElmIHNvbWV0aGluZyBtb3JlIHRoYW4gdGhpcyBpcyByZXF1aXJlZCwgdGhpcyBzaG91bGQgYmUgY29udmV5ZWQgYXMgdGV4dC5cclxuICAgKi9cclxuICBwdWJsaWMgZWZmZWN0aXZlPzogKGZoaXIuRmhpckRhdGVUaW1lfGZoaXIuUGVyaW9kKXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBNZWRpY2F0aW9uU3RhdGVtZW50LmVmZmVjdGl2ZVt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c19lZmZlY3RpdmVJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSB3aGVuIHRoZSBtZWRpY2F0aW9uIHN0YXRlbWVudCB3YXMgYXNzZXJ0ZWQgYnkgdGhlIGluZm9ybWF0aW9uIHNvdXJjZS5cclxuICAgKi9cclxuICBwdWJsaWMgZGF0ZUFzc2VydGVkPzogZmhpci5GaGlyRGF0ZVRpbWV8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwZXJzb24gb3Igb3JnYW5pemF0aW9uIHRoYXQgcHJvdmlkZWQgdGhlIGluZm9ybWF0aW9uIGFib3V0IHRoZSB0YWtpbmcgb2YgdGhpcyBtZWRpY2F0aW9uLiBOb3RlOiBVc2UgZGVyaXZlZEZyb20gd2hlbiBhIE1lZGljYXRpb25TdGF0ZW1lbnQgaXMgZGVyaXZlZCBmcm9tIG90aGVyIHJlc291cmNlcywgZS5nLiBDbGFpbSBvciBNZWRpY2F0aW9uUmVxdWVzdC5cclxuICAgKi9cclxuICBwdWJsaWMgaW5mb3JtYXRpb25Tb3VyY2U/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTGlrZWx5IHJlZmVyZW5jZXMgd291bGQgYmUgdG8gTWVkaWNhdGlvblJlcXVlc3QsIE1lZGljYXRpb25EaXNwZW5zZSwgQ2xhaW0sIE9ic2VydmF0aW9uIG9yIFF1ZXN0aW9ubmFpcmVBbnN3ZXJzLiAgVGhlIG1vc3QgY29tbW9uIHVzZSBjYXNlcyBmb3IgZGVyaXZpbmcgYSBNZWRpY2F0aW9uU3RhdGVtZW50IGNvbWVzIGZyb20gY3JlYXRpbmcgYSBNZWRpY2F0aW9uU3RhdGVtZW50IGZyb20gYSBNZWRpY2F0aW9uUmVxdWVzdCBvciBmcm9tIGEgbGFiIG9ic2VydmF0aW9uIG9yIGEgY2xhaW0uICBpdCBzaG91bGQgYmUgbm90ZWQgdGhhdCB0aGUgYW1vdW50IG9mIGluZm9ybWF0aW9uIHRoYXQgaXMgYXZhaWxhYmxlIHZhcmllcyBmcm9tIHRoZSB0eXBlIHJlc291cmNlIHRoYXQgeW91IGRlcml2ZSB0aGUgTWVkaWNhdGlvblN0YXRlbWVudCBmcm9tLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZXJpdmVkRnJvbTogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBUaGlzIGNvdWxkIGJlIGEgZGlhZ25vc2lzIGNvZGUuIElmIGEgZnVsbCBjb25kaXRpb24gcmVjb3JkIGV4aXN0cyBvciBhZGRpdGlvbmFsIGRldGFpbCBpcyBuZWVkZWQsIHVzZSByZWFzb25Gb3JVc2VSZWZlcmVuY2UuXHJcbiAgICovXHJcbiAgcHVibGljIHJlYXNvbkNvZGU6IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBhIHJlZmVyZW5jZSB0byBhIGNvbmRpdGlvbiB0aGF0IGlzIHRoZSByZWFzb24gd2h5IHRoZSBtZWRpY2F0aW9uIGlzIGJlaW5nL3dhcyB0YWtlbi4gIElmIG9ubHkgYSBjb2RlIGV4aXN0cywgdXNlIHJlYXNvbkZvclVzZUNvZGUuXHJcbiAgICovXHJcbiAgcHVibGljIHJlYXNvblJlZmVyZW5jZTogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBQcm92aWRlcyBleHRyYSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgbWVkaWNhdGlvbiBzdGF0ZW1lbnQgdGhhdCBpcyBub3QgY29udmV5ZWQgYnkgdGhlIG90aGVyIGF0dHJpYnV0ZXMuXHJcbiAgICovXHJcbiAgcHVibGljIG5vdGU6IGZoaXIuQW5ub3RhdGlvbltdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRlcyBpbmNsdWRlZCBpbiB0aGUgZG9zYWdlIG9uIGEgTWVkaWNhdGlvbiBTdGF0ZW1lbnQgcmVmbGVjdCB0aGUgZGF0ZXMgZm9yIGEgZ2l2ZW4gZG9zZS4gIEZvciBleGFtcGxlLCBcImZyb20gTm92ZW1iZXIgMSwgMjAxNiB0byBOb3ZlbWJlciAzLCAyMDE2LCB0YWtlIG9uZSB0YWJsZXQgZGFpbHkgYW5kIGZyb20gTm92ZW1iZXIgNCwgMjAxNiB0byBOb3ZlbWJlciA3LCAyMDE2LCB0YWtlIHR3byB0YWJsZXRzIGRhaWx5LlwiICBJdCBpcyBleHBlY3RlZCB0aGF0IHRoaXMgc3BlY2lmaWNpdHkgbWF5IG9ubHkgYmUgcG9wdWxhdGVkIHdoZXJlIHRoZSBwYXRpZW50IGJyaW5ncyBpbiB0aGVpciBsYWJlbGVkIGNvbnRhaW5lciBvciB3aGVyZSB0aGUgTWVkaWNhdGlvbiBTdGF0ZW1lbnQgaXMgZGVyaXZlZCBmcm9tIGEgTWVkaWNhdGlvblJlcXVlc3QuXHJcbiAgICovXHJcbiAgcHVibGljIGRvc2FnZTogZmhpci5Eb3NhZ2VbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBNZWRpY2F0aW9uU3RhdGVtZW50IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVkaWNhdGlvblN0YXRlbWVudEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdNZWRpY2F0aW9uU3RhdGVtZW50JztcclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBzb3VyY2UuaWRlbnRpZmllci5tYXAoKHgpID0+IG5ldyBmaGlyLklkZW50aWZpZXIoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pZGVudGlmaWVyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2Jhc2VkT24nXSkgeyB0aGlzLmJhc2VkT24gPSBzb3VyY2UuYmFzZWRPbi5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmJhc2VkT24gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncGFydE9mJ10pIHsgdGhpcy5wYXJ0T2YgPSBzb3VyY2UucGFydE9mLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucGFydE9mID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0YXR1cyddKSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8TWVkaWNhdGlvblN0YXRlbWVudFN0YXR1c0NvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5zdGF0dXN9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3N0YXR1cyddKSB7XHJcbiAgICAgIGlmICh0aGlzLnN0YXR1cykgeyB0aGlzLnN0YXR1cy5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zdGF0dXMhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxNZWRpY2F0aW9uU3RhdGVtZW50U3RhdHVzQ29kZVR5cGU+KHNvdXJjZS5fc3RhdHVzIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydzdGF0dXNSZWFzb24nXSkgeyB0aGlzLnN0YXR1c1JlYXNvbiA9IHNvdXJjZS5zdGF0dXNSZWFzb24ubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdGF0dXNSZWFzb24gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY2F0ZWdvcnknXSkgeyB0aGlzLmNhdGVnb3J5ID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jYXRlZ29yeSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ21lZGljYXRpb24nXSkgeyB0aGlzLm1lZGljYXRpb24gPSBzb3VyY2UubWVkaWNhdGlvbjsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydtZWRpY2F0aW9uQ29kZWFibGVDb25jZXB0J10pIHsgdGhpcy5tZWRpY2F0aW9uID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5tZWRpY2F0aW9uQ29kZWFibGVDb25jZXB0KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydtZWRpY2F0aW9uUmVmZXJlbmNlJ10pIHsgdGhpcy5tZWRpY2F0aW9uID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5tZWRpY2F0aW9uUmVmZXJlbmNlKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubWVkaWNhdGlvbiA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N1YmplY3QnXSkgeyB0aGlzLnN1YmplY3QgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnN1YmplY3QpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdWJqZWN0ID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29udGV4dCddKSB7IHRoaXMuY29udGV4dCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuY29udGV4dCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2VmZmVjdGl2ZSddKSB7IHRoaXMuZWZmZWN0aXZlID0gc291cmNlLmVmZmVjdGl2ZTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydlZmZlY3RpdmVEYXRlVGltZSddKSB7IHRoaXMuZWZmZWN0aXZlID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLmVmZmVjdGl2ZURhdGVUaW1lfSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnZWZmZWN0aXZlUGVyaW9kJ10pIHsgdGhpcy5lZmZlY3RpdmUgPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLmVmZmVjdGl2ZVBlcmlvZCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2RhdGVBc3NlcnRlZCddKSB7IHRoaXMuZGF0ZUFzc2VydGVkID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLmRhdGVBc3NlcnRlZH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfZGF0ZUFzc2VydGVkJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZGF0ZUFzc2VydGVkKSB7IHRoaXMuZGF0ZUFzc2VydGVkLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2RhdGVBc3NlcnRlZCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRhdGVBc3NlcnRlZCA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZShzb3VyY2UuX2RhdGVBc3NlcnRlZCBhcyBQYXJ0aWFsPGZoaXIuRmhpckRhdGVUaW1lQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydpbmZvcm1hdGlvblNvdXJjZSddKSB7IHRoaXMuaW5mb3JtYXRpb25Tb3VyY2UgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmluZm9ybWF0aW9uU291cmNlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGVyaXZlZEZyb20nXSkgeyB0aGlzLmRlcml2ZWRGcm9tID0gc291cmNlLmRlcml2ZWRGcm9tLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZGVyaXZlZEZyb20gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVhc29uQ29kZSddKSB7IHRoaXMucmVhc29uQ29kZSA9IHNvdXJjZS5yZWFzb25Db2RlLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVhc29uQ29kZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydyZWFzb25SZWZlcmVuY2UnXSkgeyB0aGlzLnJlYXNvblJlZmVyZW5jZSA9IHNvdXJjZS5yZWFzb25SZWZlcmVuY2UubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZWFzb25SZWZlcmVuY2UgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbm90ZSddKSB7IHRoaXMubm90ZSA9IHNvdXJjZS5ub3RlLm1hcCgoeCkgPT4gbmV3IGZoaXIuQW5ub3RhdGlvbih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm5vdGUgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZG9zYWdlJ10pIHsgdGhpcy5kb3NhZ2UgPSBzb3VyY2UuZG9zYWdlLm1hcCgoeCkgPT4gbmV3IGZoaXIuRG9zYWdlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZG9zYWdlID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZWQtYm91bmQgVmFsdWUgU2V0IGZvciBzdGF0dXMgKE1lZGljYXRpb25TdGF0ZW1lbnQuc3RhdHVzKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IHN0YXR1c1JlcXVpcmVkQ29kZXMoKSB7XHJcbiAgICByZXR1cm4gTWVkaWNhdGlvblN0YXRlbWVudFN0YXR1c0NvZGVzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBQcmVmZXJyZWQtYm91bmQgVmFsdWUgU2V0IGZvciBjYXRlZ29yeSAoTWVkaWNhdGlvblN0YXRlbWVudC5jYXRlZ29yeSlcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCBjYXRlZ29yeVByZWZlcnJlZENvZGluZ3MoKTpNZWRpY2F0aW9uU3RhdGVtZW50Q2F0ZWdvcnlDb2RpbmdUeXBlIHtcclxuICAgIHJldHVybiBNZWRpY2F0aW9uU3RhdGVtZW50Q2F0ZWdvcnlDb2RpbmdzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdNZWRpY2F0aW9uU3RhdGVtZW50JyB9XHJcbiAgICBpZiAoIXRoaXNbJ3Jlc291cmNlVHlwZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSByZXNvdXJjZVR5cGUgZmhpcjogTWVkaWNhdGlvblN0YXRlbWVudC5yZXNvdXJjZVR5cGU6XCJNZWRpY2F0aW9uU3RhdGVtZW50XCInLCBleHByZXNzaW9uOiBbZXhwcmVzc2lvbl0gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImlkZW50aWZpZXJcIl0pIHsgdGhpcy5pZGVudGlmaWVyLmZvckVhY2goKHgsaSkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rYC5pZGVudGlmaWVyWyR7aX1dYCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImJhc2VkT25cIl0pIHsgdGhpcy5iYXNlZE9uLmZvckVhY2goKHgsaSkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rYC5iYXNlZE9uWyR7aX1dYCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcInBhcnRPZlwiXSkgeyB0aGlzLnBhcnRPZi5mb3JFYWNoKCh4LGkpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uK2AucGFydE9mWyR7aX1dYCkpOyB9KSB9XHJcbiAgICBpZiAoIXRoaXNbJ3N0YXR1cyddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBzdGF0dXMgZmhpcjogTWVkaWNhdGlvblN0YXRlbWVudC5zdGF0dXM6Y29kZScsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzWydzdGF0dXMnXSAmJiAoIU9iamVjdC52YWx1ZXMoTWVkaWNhdGlvblN0YXRlbWVudFN0YXR1c0NvZGVzKS5pbmNsdWRlcyh0aGlzLnN0YXR1cy52YWx1ZSBhcyBhbnkpKSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnY29kZS1pbnZhbGlkJywgZGlhZ25vc3RpY3M6ICdJbnZhbGlkIGNvZGUgcHJvcGVydHkgc3RhdHVzIGZoaXI6IE1lZGljYXRpb25TdGF0ZW1lbnQuc3RhdHVzOmNvZGUgUmVxdWlyZWQgYmluZGluZyB0bzogTWVkaWNhdGlvblN0YXRlbWVudFN0YXR1cycsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wic3RhdHVzXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc3RhdHVzLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5zdGF0dXMnKSk7IH1cclxuICAgIGlmICh0aGlzW1wic3RhdHVzUmVhc29uXCJdKSB7IHRoaXMuc3RhdHVzUmVhc29uLmZvckVhY2goKHgsaSkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rYC5zdGF0dXNSZWFzb25bJHtpfV1gKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wiY2F0ZWdvcnlcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5jYXRlZ29yeS5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuY2F0ZWdvcnknKSk7IH1cclxuICAgIGlmICghdGhpc1snbWVkaWNhdGlvbiddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBtZWRpY2F0aW9uIGZoaXI6IE1lZGljYXRpb25TdGF0ZW1lbnQubWVkaWNhdGlvblt4XTonLCBleHByZXNzaW9uOiBbZXhwcmVzc2lvbl0gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXRoaXNbJ3N1YmplY3QnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgc3ViamVjdCBmaGlyOiBNZWRpY2F0aW9uU3RhdGVtZW50LnN1YmplY3Q6UmVmZXJlbmNlJywgZXhwcmVzc2lvbjogW2V4cHJlc3Npb25dIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJzdWJqZWN0XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc3ViamVjdC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuc3ViamVjdCcpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJjb250ZXh0XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY29udGV4dC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuY29udGV4dCcpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJkYXRlQXNzZXJ0ZWRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5kYXRlQXNzZXJ0ZWQuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLmRhdGVBc3NlcnRlZCcpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJpbmZvcm1hdGlvblNvdXJjZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmluZm9ybWF0aW9uU291cmNlLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5pbmZvcm1hdGlvblNvdXJjZScpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJkZXJpdmVkRnJvbVwiXSkgeyB0aGlzLmRlcml2ZWRGcm9tLmZvckVhY2goKHgsaSkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rYC5kZXJpdmVkRnJvbVske2l9XWApKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJyZWFzb25Db2RlXCJdKSB7IHRoaXMucmVhc29uQ29kZS5mb3JFYWNoKCh4LGkpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uK2AucmVhc29uQ29kZVske2l9XWApKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJyZWFzb25SZWZlcmVuY2VcIl0pIHsgdGhpcy5yZWFzb25SZWZlcmVuY2UuZm9yRWFjaCgoeCxpKSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbitgLnJlYXNvblJlZmVyZW5jZVske2l9XWApKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJub3RlXCJdKSB7IHRoaXMubm90ZS5mb3JFYWNoKCh4LGkpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uK2Aubm90ZVske2l9XWApKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJkb3NhZ2VcIl0pIHsgdGhpcy5kb3NhZ2UuZm9yRWFjaCgoeCxpKSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbitgLmRvc2FnZVske2l9XWApKTsgfSkgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuIl19