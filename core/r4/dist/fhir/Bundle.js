// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: Bundle
import * as fhir from '../fhir.js';
// @ts-ignore
import { SearchEntryModeCodes } from '../fhirValueSets/SearchEntryModeCodes.js';
// @ts-ignore
import { HttpVerbCodes } from '../fhirValueSets/HttpVerbCodes.js';
// @ts-ignore
import { BundleTypeCodes } from '../fhirValueSets/BundleTypeCodes.js';
/**
 * Both Bundle.link and Bundle.entry.link are defined to support providing additional context when Bundles are used (e.g. [HATEOAS](http://en.wikipedia.org/wiki/HATEOAS)).
 * Bundle.entry.link corresponds to links found in the HTTP header if the resource in the entry was [read](http.html#read) directly.
 * This specification defines some specific uses of Bundle.link for [searching](search.html#conformance) and [paging](http.html#paging), but no specific uses for Bundle.entry.link, and no defined function in a transaction - the meaning is implementation specific.
 */
export class BundleLink extends fhir.BackboneElement {
    /**
     * Default constructor for BundleLink - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['relation']) {
            this.relation = new fhir.FhirString({ value: source.relation });
        }
        else {
            this.relation = null;
        }
        if (source['_relation']) {
            if (this.relation) {
                this.relation.addExtendedProperties(source._relation);
            }
            else {
                this.relation = new fhir.FhirString(source._relation);
            }
        }
        if (source['url']) {
            this.url = new fhir.FhirUri({ value: source.url });
        }
        else {
            this.url = null;
        }
        if (source['_url']) {
            if (this.url) {
                this.url.addExtendedProperties(source._url);
            }
            else {
                this.url = new fhir.FhirUri(source._url);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['relation']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property relation:fhir.FhirString fhir: Bundle.link.relation:string' });
        }
        if (this["relation"]) {
            issues.push(...this.relation.doModelValidation());
        }
        if (!this['url']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property url:fhir.FhirUri fhir: Bundle.link.url:uri' });
        }
        if (this["url"]) {
            issues.push(...this.url.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BundleLink._fts_dataType = 'BundleLink';
/**
 * Information about the search process that lead to the creation of this entry.
 */
export class BundleEntrySearch extends fhir.BackboneElement {
    /**
     * Default constructor for BundleEntrySearch - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['mode']) {
            this.mode = new fhir.FhirCode({ value: source.mode });
        }
        if (source['_mode']) {
            if (this.mode) {
                this.mode.addExtendedProperties(source._mode);
            }
            else {
                this.mode = new fhir.FhirCode(source._mode);
            }
        }
        if (source['score']) {
            this.score = new fhir.FhirDecimal({ value: source.score });
        }
        if (source['_score']) {
            if (this.score) {
                this.score.addExtendedProperties(source._score);
            }
            else {
                this.score = new fhir.FhirDecimal(source._score);
            }
        }
    }
    /**
     * Required-bound Value Set for mode (Bundle.entry.search.mode)
     */
    static get modeRequiredCodes() {
        return SearchEntryModeCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this['mode'] && (!Object.values(SearchEntryModeCodes).includes(this.mode))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property mode?:fhir.FhirCode<SearchEntryModeCodeType> fhir: Bundle.entry.search.mode:code Required binding to: SearchEntryMode' });
        }
        if (this["mode"]) {
            issues.push(...this.mode.doModelValidation());
        }
        if (this["score"]) {
            issues.push(...this.score.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BundleEntrySearch._fts_dataType = 'BundleEntrySearch';
/**
 * Additional information about how this entry should be processed as part of a transaction or batch.  For history, it shows how the entry was processed to create the version contained in the entry.
 */
export class BundleEntryRequest extends fhir.BackboneElement {
    /**
     * Default constructor for BundleEntryRequest - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['method']) {
            this.method = new fhir.FhirCode({ value: source.method });
        }
        else {
            this.method = null;
        }
        if (source['_method']) {
            if (this.method) {
                this.method.addExtendedProperties(source._method);
            }
            else {
                this.method = new fhir.FhirCode(source._method);
            }
        }
        if (source['url']) {
            this.url = new fhir.FhirUri({ value: source.url });
        }
        else {
            this.url = null;
        }
        if (source['_url']) {
            if (this.url) {
                this.url.addExtendedProperties(source._url);
            }
            else {
                this.url = new fhir.FhirUri(source._url);
            }
        }
        if (source['ifNoneMatch']) {
            this.ifNoneMatch = new fhir.FhirString({ value: source.ifNoneMatch });
        }
        if (source['_ifNoneMatch']) {
            if (this.ifNoneMatch) {
                this.ifNoneMatch.addExtendedProperties(source._ifNoneMatch);
            }
            else {
                this.ifNoneMatch = new fhir.FhirString(source._ifNoneMatch);
            }
        }
        if (source['ifModifiedSince']) {
            this.ifModifiedSince = new fhir.FhirInstant({ value: source.ifModifiedSince });
        }
        if (source['_ifModifiedSince']) {
            if (this.ifModifiedSince) {
                this.ifModifiedSince.addExtendedProperties(source._ifModifiedSince);
            }
            else {
                this.ifModifiedSince = new fhir.FhirInstant(source._ifModifiedSince);
            }
        }
        if (source['ifMatch']) {
            this.ifMatch = new fhir.FhirString({ value: source.ifMatch });
        }
        if (source['_ifMatch']) {
            if (this.ifMatch) {
                this.ifMatch.addExtendedProperties(source._ifMatch);
            }
            else {
                this.ifMatch = new fhir.FhirString(source._ifMatch);
            }
        }
        if (source['ifNoneExist']) {
            this.ifNoneExist = new fhir.FhirString({ value: source.ifNoneExist });
        }
        if (source['_ifNoneExist']) {
            if (this.ifNoneExist) {
                this.ifNoneExist.addExtendedProperties(source._ifNoneExist);
            }
            else {
                this.ifNoneExist = new fhir.FhirString(source._ifNoneExist);
            }
        }
    }
    /**
     * Required-bound Value Set for method (Bundle.entry.request.method)
     */
    static get methodRequiredCodes() {
        return HttpVerbCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['method']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property method:fhir.FhirCode<HttpVerbCodeType> fhir: Bundle.entry.request.method:code' });
        }
        if (this['method'] && (!Object.values(HttpVerbCodes).includes(this.method))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property method:fhir.FhirCode<HttpVerbCodeType> fhir: Bundle.entry.request.method:code Required binding to: HttpVerb' });
        }
        if (this["method"]) {
            issues.push(...this.method.doModelValidation());
        }
        if (!this['url']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property url:fhir.FhirUri fhir: Bundle.entry.request.url:uri' });
        }
        if (this["url"]) {
            issues.push(...this.url.doModelValidation());
        }
        if (this["ifNoneMatch"]) {
            issues.push(...this.ifNoneMatch.doModelValidation());
        }
        if (this["ifModifiedSince"]) {
            issues.push(...this.ifModifiedSince.doModelValidation());
        }
        if (this["ifMatch"]) {
            issues.push(...this.ifMatch.doModelValidation());
        }
        if (this["ifNoneExist"]) {
            issues.push(...this.ifNoneExist.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BundleEntryRequest._fts_dataType = 'BundleEntryRequest';
/**
 * Indicates the results of processing the corresponding 'request' entry in the batch or transaction being responded to or what the results of an operation where when returning history.
 */
export class BundleEntryResponse extends fhir.BackboneElement {
    /**
     * Default constructor for BundleEntryResponse - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['status']) {
            this.status = new fhir.FhirString({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirString(source._status);
            }
        }
        if (source['location']) {
            this.location = new fhir.FhirUri({ value: source.location });
        }
        if (source['_location']) {
            if (this.location) {
                this.location.addExtendedProperties(source._location);
            }
            else {
                this.location = new fhir.FhirUri(source._location);
            }
        }
        if (source['etag']) {
            this.etag = new fhir.FhirString({ value: source.etag });
        }
        if (source['_etag']) {
            if (this.etag) {
                this.etag.addExtendedProperties(source._etag);
            }
            else {
                this.etag = new fhir.FhirString(source._etag);
            }
        }
        if (source['lastModified']) {
            this.lastModified = new fhir.FhirInstant({ value: source.lastModified });
        }
        if (source['_lastModified']) {
            if (this.lastModified) {
                this.lastModified.addExtendedProperties(source._lastModified);
            }
            else {
                this.lastModified = new fhir.FhirInstant(source._lastModified);
            }
        }
        if (source['outcome']) {
            this.outcome = (fhir.resourceFactory(source.outcome) ?? undefined);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['status']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property status:fhir.FhirString fhir: Bundle.entry.response.status:string' });
        }
        if (this["status"]) {
            issues.push(...this.status.doModelValidation());
        }
        if (this["location"]) {
            issues.push(...this.location.doModelValidation());
        }
        if (this["etag"]) {
            issues.push(...this.etag.doModelValidation());
        }
        if (this["lastModified"]) {
            issues.push(...this.lastModified.doModelValidation());
        }
        if (this["outcome"]) {
            issues.push(...this.outcome.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BundleEntryResponse._fts_dataType = 'BundleEntryResponse';
/**
 * An entry in a bundle resource - will either contain a resource or information about a resource (transactions and history only).
 */
export class BundleEntry extends fhir.BackboneElement {
    /**
     * Default constructor for BundleEntry - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['link']) {
            this.link = source.link.map((x) => new fhir.BundleLink(x));
        }
        else {
            this.link = [];
        }
        if (source['fullUrl']) {
            this.fullUrl = new fhir.FhirUri({ value: source.fullUrl });
        }
        if (source['_fullUrl']) {
            if (this.fullUrl) {
                this.fullUrl.addExtendedProperties(source._fullUrl);
            }
            else {
                this.fullUrl = new fhir.FhirUri(source._fullUrl);
            }
        }
        if (source['resource']) {
            this.resource = (fhir.resourceFactory(source.resource) ?? undefined);
        }
        if (source['search']) {
            this.search = new fhir.BundleEntrySearch(source.search);
        }
        if (source['request']) {
            this.request = new fhir.BundleEntryRequest(source.request);
        }
        if (source['response']) {
            this.response = new fhir.BundleEntryResponse(source.response);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["link"]) {
            this.link.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["fullUrl"]) {
            issues.push(...this.fullUrl.doModelValidation());
        }
        if (this["resource"]) {
            issues.push(...this.resource.doModelValidation());
        }
        if (this["search"]) {
            issues.push(...this.search.doModelValidation());
        }
        if (this["request"]) {
            issues.push(...this.request.doModelValidation());
        }
        if (this["response"]) {
            issues.push(...this.response.doModelValidation());
        }
        return issues;
    }
    /**
     * Access a bundle.entry[].resource as a typed resource
     */
    resourceAs() {
        return this.resource;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BundleEntry._fts_dataType = 'BundleEntry';
/**
 * A container for a collection of resources.
 */
export class Bundle extends fhir.Resource {
    /**
     * Default constructor for Bundle - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'Bundle';
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier);
        }
        if (source['type']) {
            this.type = new fhir.FhirCode({ value: source.type });
        }
        else {
            this.type = null;
        }
        if (source['_type']) {
            if (this.type) {
                this.type.addExtendedProperties(source._type);
            }
            else {
                this.type = new fhir.FhirCode(source._type);
            }
        }
        if (source['timestamp']) {
            this.timestamp = new fhir.FhirInstant({ value: source.timestamp });
        }
        if (source['_timestamp']) {
            if (this.timestamp) {
                this.timestamp.addExtendedProperties(source._timestamp);
            }
            else {
                this.timestamp = new fhir.FhirInstant(source._timestamp);
            }
        }
        if (source['total']) {
            this.total = new fhir.FhirUnsignedInt({ value: source.total });
        }
        if (source['_total']) {
            if (this.total) {
                this.total.addExtendedProperties(source._total);
            }
            else {
                this.total = new fhir.FhirUnsignedInt(source._total);
            }
        }
        if (source['link']) {
            this.link = source.link.map((x) => new fhir.BundleLink(x));
        }
        else {
            this.link = [];
        }
        if (source['entry']) {
            this.entry = source.entry.map((x) => new fhir.BundleEntry(x));
        }
        else {
            this.entry = [];
        }
        if (source['signature']) {
            this.signature = new fhir.Signature(source.signature);
        }
    }
    /**
     * Required-bound Value Set for type (Bundle.type)
     */
    static get typeRequiredCodes() {
        return BundleTypeCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType:"Bundle" fhir: Bundle.resourceType:"Bundle"' });
        }
        if (this["identifier"]) {
            issues.push(...this.identifier.doModelValidation());
        }
        if (!this['type']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property type:fhir.FhirCode<BundleTypeCodeType> fhir: Bundle.type:code' });
        }
        if (this['type'] && (!Object.values(BundleTypeCodes).includes(this.type))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property type:fhir.FhirCode<BundleTypeCodeType> fhir: Bundle.type:code Required binding to: BundleType' });
        }
        if (this["type"]) {
            issues.push(...this.type.doModelValidation());
        }
        if (this["timestamp"]) {
            issues.push(...this.timestamp.doModelValidation());
        }
        if (this["total"]) {
            issues.push(...this.total.doModelValidation());
        }
        if (this["link"]) {
            this.link.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["entry"]) {
            this.entry.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["signature"]) {
            issues.push(...this.signature.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
Bundle._fts_dataType = 'Bundle';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQnVuZGxlLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9CdW5kbGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsd0JBQXdCO0FBRXhCLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBSW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsb0JBQW9CLEVBQTRCLE1BQU0sMENBQTBDLENBQUM7QUFHMUcsYUFBYTtBQUNiLE9BQU8sRUFBRSxhQUFhLEVBQXFCLE1BQU0sbUNBQW1DLENBQUM7QUFHckYsYUFBYTtBQUNiLE9BQU8sRUFBRSxlQUFlLEVBQXVCLE1BQU0scUNBQXFDLENBQUM7QUF1QjNGOzs7O0dBSUc7QUFDSCxNQUFNLE9BQU8sVUFBVyxTQUFRLElBQUksQ0FBQyxlQUFlO0lBYWxEOztPQUVHO0lBQ0gsWUFBWSxTQUFpQyxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUN2RixLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLFFBQVEsRUFBQyxDQUFDLENBQUM7U0FBRTthQUNyRjtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDOUIsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLEVBQUU7WUFDdkIsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO2dCQUFFLElBQUksQ0FBQyxRQUFRLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLFNBQVUsQ0FBQyxDQUFDO2FBQUU7aUJBQ3pFO2dCQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxTQUF5QyxDQUFDLENB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QyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFDdEUsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtTQUFFO1FBQzFGLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7U0FBRTtRQUM1RixJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQzlFLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBdEdEOztHQUVHO0FBQzZCLG9CQUFhLEdBQVUsUUFBUSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0LmNvcmUgdmVyc2lvbjogNC4wLjFcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBCdW5kbGVcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFNlYXJjaEVudHJ5TW9kZUNvZGluZ3MsIFNlYXJjaEVudHJ5TW9kZUNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1NlYXJjaEVudHJ5TW9kZUNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFNlYXJjaEVudHJ5TW9kZUNvZGVzLCAgU2VhcmNoRW50cnlNb2RlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1NlYXJjaEVudHJ5TW9kZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBIdHRwVmVyYkNvZGluZ3MsIEh0dHBWZXJiQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvSHR0cFZlcmJDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBIdHRwVmVyYkNvZGVzLCAgSHR0cFZlcmJDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvSHR0cFZlcmJDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQnVuZGxlVHlwZUNvZGluZ3MsIEJ1bmRsZVR5cGVDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9CdW5kbGVUeXBlQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQnVuZGxlVHlwZUNvZGVzLCAgQnVuZGxlVHlwZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9CdW5kbGVUeXBlQ29kZXMuanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQnVuZGxlTGluayB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBCdW5kbGVMaW5rQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogQSBuYW1lIHdoaWNoIGRldGFpbHMgdGhlIGZ1bmN0aW9uYWwgdXNlIGZvciB0aGlzIGxpbmsgLSBzZWUgW2h0dHA6Ly93d3cuaWFuYS5vcmcvYXNzaWdubWVudHMvbGluay1yZWxhdGlvbnMvbGluay1yZWxhdGlvbnMueGh0bWwjbGluay1yZWxhdGlvbnMtMV0oaHR0cDovL3d3dy5pYW5hLm9yZy9hc3NpZ25tZW50cy9saW5rLXJlbGF0aW9ucy9saW5rLXJlbGF0aW9ucy54aHRtbCNsaW5rLXJlbGF0aW9ucy0xKS5cclxuICAgKi9cclxuICByZWxhdGlvbjogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEJ1bmRsZS5saW5rLnJlbGF0aW9uXHJcbiAgICovXHJcbiAgX3JlbGF0aW9uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgcmVmZXJlbmNlIGRldGFpbHMgZm9yIHRoZSBsaW5rLlxyXG4gICAqL1xyXG4gIHVybDogZmhpci5GaGlyVXJpfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEJ1bmRsZS5saW5rLnVybFxyXG4gICAqL1xyXG4gIF91cmw/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG59XHJcblxyXG4vKipcclxuICogQm90aCBCdW5kbGUubGluayBhbmQgQnVuZGxlLmVudHJ5LmxpbmsgYXJlIGRlZmluZWQgdG8gc3VwcG9ydCBwcm92aWRpbmcgYWRkaXRpb25hbCBjb250ZXh0IHdoZW4gQnVuZGxlcyBhcmUgdXNlZCAoZS5nLiBbSEFURU9BU10oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9IQVRFT0FTKSkuIFxyXG4gKiBCdW5kbGUuZW50cnkubGluayBjb3JyZXNwb25kcyB0byBsaW5rcyBmb3VuZCBpbiB0aGUgSFRUUCBoZWFkZXIgaWYgdGhlIHJlc291cmNlIGluIHRoZSBlbnRyeSB3YXMgW3JlYWRdKGh0dHAuaHRtbCNyZWFkKSBkaXJlY3RseS5cclxuICogVGhpcyBzcGVjaWZpY2F0aW9uIGRlZmluZXMgc29tZSBzcGVjaWZpYyB1c2VzIG9mIEJ1bmRsZS5saW5rIGZvciBbc2VhcmNoaW5nXShzZWFyY2guaHRtbCNjb25mb3JtYW5jZSkgYW5kIFtwYWdpbmddKGh0dHAuaHRtbCNwYWdpbmcpLCBidXQgbm8gc3BlY2lmaWMgdXNlcyBmb3IgQnVuZGxlLmVudHJ5LmxpbmssIGFuZCBubyBkZWZpbmVkIGZ1bmN0aW9uIGluIGEgdHJhbnNhY3Rpb24gLSB0aGUgbWVhbmluZyBpcyBpbXBsZW1lbnRhdGlvbiBzcGVjaWZpYy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBCdW5kbGVMaW5rIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQnVuZGxlTGluayc7XHJcbiAgLyoqXHJcbiAgICogQSBuYW1lIHdoaWNoIGRldGFpbHMgdGhlIGZ1bmN0aW9uYWwgdXNlIGZvciB0aGlzIGxpbmsgLSBzZWUgW2h0dHA6Ly93d3cuaWFuYS5vcmcvYXNzaWdubWVudHMvbGluay1yZWxhdGlvbnMvbGluay1yZWxhdGlvbnMueGh0bWwjbGluay1yZWxhdGlvbnMtMV0oaHR0cDovL3d3dy5pYW5hLm9yZy9hc3NpZ25tZW50cy9saW5rLXJlbGF0aW9ucy9saW5rLXJlbGF0aW9ucy54aHRtbCNsaW5rLXJlbGF0aW9ucy0xKS5cclxuICAgKi9cclxuICBwdWJsaWMgcmVsYXRpb246IGZoaXIuRmhpclN0cmluZ3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZWZlcmVuY2UgZGV0YWlscyBmb3IgdGhlIGxpbmsuXHJcbiAgICovXHJcbiAgcHVibGljIHVybDogZmhpci5GaGlyVXJpfG51bGw7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQnVuZGxlTGluayAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEJ1bmRsZUxpbmtBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsncmVsYXRpb24nXSkgeyB0aGlzLnJlbGF0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5yZWxhdGlvbn0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZWxhdGlvbiA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19yZWxhdGlvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLnJlbGF0aW9uKSB7IHRoaXMucmVsYXRpb24uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fcmVsYXRpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5yZWxhdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9yZWxhdGlvbiBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsndXJsJ10pIHsgdGhpcy51cmwgPSBuZXcgZmhpci5GaGlyVXJpKHt2YWx1ZTogc291cmNlLnVybH0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy51cmwgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfdXJsJ10pIHtcclxuICAgICAgaWYgKHRoaXMudXJsKSB7IHRoaXMudXJsLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3VybCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnVybCA9IG5ldyBmaGlyLkZoaXJVcmkoc291cmNlLl91cmwgYXMgUGFydGlhbDxmaGlyLkZoaXJVcmlBcmdzPik7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICghdGhpc1sncmVsYXRpb24nXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgcmVsYXRpb246Zmhpci5GaGlyU3RyaW5nIGZoaXI6IEJ1bmRsZS5saW5rLnJlbGF0aW9uOnN0cmluZycgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInJlbGF0aW9uXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucmVsYXRpb24uZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICghdGhpc1sndXJsJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHVybDpmaGlyLkZoaXJVcmkgZmhpcjogQnVuZGxlLmxpbmsudXJsOnVyaScgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInVybFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnVybC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEJ1bmRsZUVudHJ5U2VhcmNoIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEJ1bmRsZUVudHJ5U2VhcmNoQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlcmUgaXMgb25seSBvbmUgbW9kZS4gSW4gc29tZSBjb3JuZXIgY2FzZXMsIGEgcmVzb3VyY2UgbWF5IGJlIGluY2x1ZGVkIGJlY2F1c2UgaXQgaXMgYm90aCBhIG1hdGNoIGFuZCBhbiBpbmNsdWRlLiBJbiB0aGVzZSBjaXJjdW1zdGFuY2VzLCAnbWF0Y2gnIHRha2VzIHByZWNlZGVuY2UuXHJcbiAgICovXHJcbiAgbW9kZT86IGZoaXIuRmhpckNvZGU8U2VhcmNoRW50cnlNb2RlQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEJ1bmRsZS5lbnRyeS5zZWFyY2gubW9kZVxyXG4gICAqL1xyXG4gIF9tb2RlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBTZXJ2ZXJzIGFyZSBub3QgcmVxdWlyZWQgdG8gcmV0dXJuIGEgcmFua2luZyBzY29yZS4gMSBpcyBtb3N0IHJlbGV2YW50LCBhbmQgMCBpcyBsZWFzdCByZWxldmFudC4gT2Z0ZW4sIHNlYXJjaCByZXN1bHRzIGFyZSBzb3J0ZWQgYnkgc2NvcmUsIGJ1dCB0aGUgY2xpZW50IG1heSBzcGVjaWZ5IGEgZGlmZmVyZW50IHNvcnQgb3JkZXIuXHJcbiAgICogU2VlIFtQYXRpZW50IE1hdGNoXShwYXRpZW50LW9wZXJhdGlvbi1tYXRjaC5odG1sKSBmb3IgdGhlIEVNUEkgc2VhcmNoIHdoaWNoIHJlbGF0ZXMgdG8gdGhpcyBlbGVtZW50LlxyXG4gICAqL1xyXG4gIHNjb3JlPzogZmhpci5GaGlyRGVjaW1hbHxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUuZW50cnkuc2VhcmNoLnNjb3JlXHJcbiAgICovXHJcbiAgX3Njb3JlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIEluZm9ybWF0aW9uIGFib3V0IHRoZSBzZWFyY2ggcHJvY2VzcyB0aGF0IGxlYWQgdG8gdGhlIGNyZWF0aW9uIG9mIHRoaXMgZW50cnkuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQnVuZGxlRW50cnlTZWFyY2ggZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdCdW5kbGVFbnRyeVNlYXJjaCc7XHJcbiAgLyoqXHJcbiAgICogVGhlcmUgaXMgb25seSBvbmUgbW9kZS4gSW4gc29tZSBjb3JuZXIgY2FzZXMsIGEgcmVzb3VyY2UgbWF5IGJlIGluY2x1ZGVkIGJlY2F1c2UgaXQgaXMgYm90aCBhIG1hdGNoIGFuZCBhbiBpbmNsdWRlLiBJbiB0aGVzZSBjaXJjdW1zdGFuY2VzLCAnbWF0Y2gnIHRha2VzIHByZWNlZGVuY2UuXHJcbiAgICovXHJcbiAgcHVibGljIG1vZGU/OiBmaGlyLkZoaXJDb2RlPFNlYXJjaEVudHJ5TW9kZUNvZGVUeXBlPnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU2VydmVycyBhcmUgbm90IHJlcXVpcmVkIHRvIHJldHVybiBhIHJhbmtpbmcgc2NvcmUuIDEgaXMgbW9zdCByZWxldmFudCwgYW5kIDAgaXMgbGVhc3QgcmVsZXZhbnQuIE9mdGVuLCBzZWFyY2ggcmVzdWx0cyBhcmUgc29ydGVkIGJ5IHNjb3JlLCBidXQgdGhlIGNsaWVudCBtYXkgc3BlY2lmeSBhIGRpZmZlcmVudCBzb3J0IG9yZGVyLlxyXG4gICAqIFNlZSBbUGF0aWVudCBNYXRjaF0ocGF0aWVudC1vcGVyYXRpb24tbWF0Y2guaHRtbCkgZm9yIHRoZSBFTVBJIHNlYXJjaCB3aGljaCByZWxhdGVzIHRvIHRoaXMgZWxlbWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgc2NvcmU/OiBmaGlyLkZoaXJEZWNpbWFsfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBCdW5kbGVFbnRyeVNlYXJjaCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEJ1bmRsZUVudHJ5U2VhcmNoQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ21vZGUnXSkgeyB0aGlzLm1vZGUgPSBuZXcgZmhpci5GaGlyQ29kZTxTZWFyY2hFbnRyeU1vZGVDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2UubW9kZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfbW9kZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLm1vZGUpIHsgdGhpcy5tb2RlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX21vZGUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5tb2RlID0gbmV3IGZoaXIuRmhpckNvZGU8U2VhcmNoRW50cnlNb2RlQ29kZVR5cGU+KHNvdXJjZS5fbW9kZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2NvcmUnXSkgeyB0aGlzLnNjb3JlID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoe3ZhbHVlOiBzb3VyY2Uuc2NvcmV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3Njb3JlJ10pIHtcclxuICAgICAgaWYgKHRoaXMuc2NvcmUpIHsgdGhpcy5zY29yZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zY29yZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnNjb3JlID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoc291cmNlLl9zY29yZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckRlY2ltYWxBcmdzPik7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZWQtYm91bmQgVmFsdWUgU2V0IGZvciBtb2RlIChCdW5kbGUuZW50cnkuc2VhcmNoLm1vZGUpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgbW9kZVJlcXVpcmVkQ29kZXMoKSB7XHJcbiAgICByZXR1cm4gU2VhcmNoRW50cnlNb2RlQ29kZXM7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAodGhpc1snbW9kZSddICYmICghT2JqZWN0LnZhbHVlcyhTZWFyY2hFbnRyeU1vZGVDb2RlcykuaW5jbHVkZXModGhpcy5tb2RlIGFzIGFueSkpKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdjb2RlLWludmFsaWQnLCBkaWFnbm9zdGljczogJ0ludmFsaWQgY29kZSBwcm9wZXJ0eSBtb2RlPzpmaGlyLkZoaXJDb2RlPFNlYXJjaEVudHJ5TW9kZUNvZGVUeXBlPiBmaGlyOiBCdW5kbGUuZW50cnkuc2VhcmNoLm1vZGU6Y29kZSBSZXF1aXJlZCBiaW5kaW5nIHRvOiBTZWFyY2hFbnRyeU1vZGUnIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJtb2RlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMubW9kZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJzY29yZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnNjb3JlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQnVuZGxlRW50cnlSZXF1ZXN0IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEJ1bmRsZUVudHJ5UmVxdWVzdEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEluIGEgdHJhbnNhY3Rpb24gb3IgYmF0Y2gsIHRoaXMgaXMgdGhlIEhUVFAgYWN0aW9uIHRvIGJlIGV4ZWN1dGVkIGZvciB0aGlzIGVudHJ5LiBJbiBhIGhpc3RvcnkgYnVuZGxlLCB0aGlzIGluZGljYXRlcyB0aGUgSFRUUCBhY3Rpb24gdGhhdCBvY2N1cnJlZC5cclxuICAgKi9cclxuICBtZXRob2Q6IGZoaXIuRmhpckNvZGU8SHR0cFZlcmJDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLmVudHJ5LnJlcXVlc3QubWV0aG9kXHJcbiAgICovXHJcbiAgX21ldGhvZD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogRS5nLiBmb3IgYSBQYXRpZW50IENyZWF0ZSwgdGhlIG1ldGhvZCB3b3VsZCBiZSBcIlBPU1RcIiBhbmQgdGhlIFVSTCB3b3VsZCBiZSBcIlBhdGllbnRcIi4gRm9yIGEgUGF0aWVudCBVcGRhdGUsIHRoZSBtZXRob2Qgd291bGQgYmUgUFVUIGFuZCB0aGUgVVJMIHdvdWxkIGJlIFwiUGF0aWVudC9baWRdXCIuXHJcbiAgICovXHJcbiAgdXJsOiBmaGlyLkZoaXJVcml8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLmVudHJ5LnJlcXVlc3QudXJsXHJcbiAgICovXHJcbiAgX3VybD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhlIEVUYWcgdmFsdWVzIG1hdGNoLCByZXR1cm4gYSAzMDQgTm90IE1vZGlmaWVkIHN0YXR1cy4gU2VlIHRoZSBBUEkgZG9jdW1lbnRhdGlvbiBmb3IgW1wiQ29uZGl0aW9uYWwgUmVhZFwiXShodHRwLmh0bWwjY3JlYWQpLlxyXG4gICAqL1xyXG4gIGlmTm9uZU1hdGNoPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEJ1bmRsZS5lbnRyeS5yZXF1ZXN0LmlmTm9uZU1hdGNoXHJcbiAgICovXHJcbiAgX2lmTm9uZU1hdGNoPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBPbmx5IHBlcmZvcm0gdGhlIG9wZXJhdGlvbiBpZiB0aGUgbGFzdCB1cGRhdGVkIGRhdGUgbWF0Y2hlcy4gU2VlIHRoZSBBUEkgZG9jdW1lbnRhdGlvbiBmb3IgW1wiQ29uZGl0aW9uYWwgUmVhZFwiXShodHRwLmh0bWwjY3JlYWQpLlxyXG4gICAqL1xyXG4gIGlmTW9kaWZpZWRTaW5jZT86IGZoaXIuRmhpckluc3RhbnR8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLmVudHJ5LnJlcXVlc3QuaWZNb2RpZmllZFNpbmNlXHJcbiAgICovXHJcbiAgX2lmTW9kaWZpZWRTaW5jZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogT25seSBwZXJmb3JtIHRoZSBvcGVyYXRpb24gaWYgdGhlIEV0YWcgdmFsdWUgbWF0Y2hlcy4gRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZSB0aGUgQVBJIHNlY3Rpb24gW1wiTWFuYWdpbmcgUmVzb3VyY2UgQ29udGVudGlvblwiXShodHRwLmh0bWwjY29uY3VycmVuY3kpLlxyXG4gICAqL1xyXG4gIGlmTWF0Y2g/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLmVudHJ5LnJlcXVlc3QuaWZNYXRjaFxyXG4gICAqL1xyXG4gIF9pZk1hdGNoPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBJbnN0cnVjdCB0aGUgc2VydmVyIG5vdCB0byBwZXJmb3JtIHRoZSBjcmVhdGUgaWYgYSBzcGVjaWZpZWQgcmVzb3VyY2UgYWxyZWFkeSBleGlzdHMuIEZvciBmdXJ0aGVyIGluZm9ybWF0aW9uLCBzZWUgdGhlIEFQSSBkb2N1bWVudGF0aW9uIGZvciBbXCJDb25kaXRpb25hbCBDcmVhdGVcIl0oaHR0cC5odG1sI2NjcmVhdGUpLiBUaGlzIGlzIGp1c3QgdGhlIHF1ZXJ5IHBvcnRpb24gb2YgdGhlIFVSTCAtIHdoYXQgZm9sbG93cyB0aGUgXCI/XCIgKG5vdCBpbmNsdWRpbmcgdGhlIFwiP1wiKS5cclxuICAgKi9cclxuICBpZk5vbmVFeGlzdD86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUuZW50cnkucmVxdWVzdC5pZk5vbmVFeGlzdFxyXG4gICAqL1xyXG4gIF9pZk5vbmVFeGlzdD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBZGRpdGlvbmFsIGluZm9ybWF0aW9uIGFib3V0IGhvdyB0aGlzIGVudHJ5IHNob3VsZCBiZSBwcm9jZXNzZWQgYXMgcGFydCBvZiBhIHRyYW5zYWN0aW9uIG9yIGJhdGNoLiAgRm9yIGhpc3RvcnksIGl0IHNob3dzIGhvdyB0aGUgZW50cnkgd2FzIHByb2Nlc3NlZCB0byBjcmVhdGUgdGhlIHZlcnNpb24gY29udGFpbmVkIGluIHRoZSBlbnRyeS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBCdW5kbGVFbnRyeVJlcXVlc3QgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdCdW5kbGVFbnRyeVJlcXVlc3QnO1xyXG4gIC8qKlxyXG4gICAqIEluIGEgdHJhbnNhY3Rpb24gb3IgYmF0Y2gsIHRoaXMgaXMgdGhlIEhUVFAgYWN0aW9uIHRvIGJlIGV4ZWN1dGVkIGZvciB0aGlzIGVudHJ5LiBJbiBhIGhpc3RvcnkgYnVuZGxlLCB0aGlzIGluZGljYXRlcyB0aGUgSFRUUCBhY3Rpb24gdGhhdCBvY2N1cnJlZC5cclxuICAgKi9cclxuICBwdWJsaWMgbWV0aG9kOiBmaGlyLkZoaXJDb2RlPEh0dHBWZXJiQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogRS5nLiBmb3IgYSBQYXRpZW50IENyZWF0ZSwgdGhlIG1ldGhvZCB3b3VsZCBiZSBcIlBPU1RcIiBhbmQgdGhlIFVSTCB3b3VsZCBiZSBcIlBhdGllbnRcIi4gRm9yIGEgUGF0aWVudCBVcGRhdGUsIHRoZSBtZXRob2Qgd291bGQgYmUgUFVUIGFuZCB0aGUgVVJMIHdvdWxkIGJlIFwiUGF0aWVudC9baWRdXCIuXHJcbiAgICovXHJcbiAgcHVibGljIHVybDogZmhpci5GaGlyVXJpfG51bGw7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhlIEVUYWcgdmFsdWVzIG1hdGNoLCByZXR1cm4gYSAzMDQgTm90IE1vZGlmaWVkIHN0YXR1cy4gU2VlIHRoZSBBUEkgZG9jdW1lbnRhdGlvbiBmb3IgW1wiQ29uZGl0aW9uYWwgUmVhZFwiXShodHRwLmh0bWwjY3JlYWQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZk5vbmVNYXRjaD86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogT25seSBwZXJmb3JtIHRoZSBvcGVyYXRpb24gaWYgdGhlIGxhc3QgdXBkYXRlZCBkYXRlIG1hdGNoZXMuIFNlZSB0aGUgQVBJIGRvY3VtZW50YXRpb24gZm9yIFtcIkNvbmRpdGlvbmFsIFJlYWRcIl0oaHR0cC5odG1sI2NyZWFkKS5cclxuICAgKi9cclxuICBwdWJsaWMgaWZNb2RpZmllZFNpbmNlPzogZmhpci5GaGlySW5zdGFudHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogT25seSBwZXJmb3JtIHRoZSBvcGVyYXRpb24gaWYgdGhlIEV0YWcgdmFsdWUgbWF0Y2hlcy4gRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZSB0aGUgQVBJIHNlY3Rpb24gW1wiTWFuYWdpbmcgUmVzb3VyY2UgQ29udGVudGlvblwiXShodHRwLmh0bWwjY29uY3VycmVuY3kpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZk1hdGNoPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnN0cnVjdCB0aGUgc2VydmVyIG5vdCB0byBwZXJmb3JtIHRoZSBjcmVhdGUgaWYgYSBzcGVjaWZpZWQgcmVzb3VyY2UgYWxyZWFkeSBleGlzdHMuIEZvciBmdXJ0aGVyIGluZm9ybWF0aW9uLCBzZWUgdGhlIEFQSSBkb2N1bWVudGF0aW9uIGZvciBbXCJDb25kaXRpb25hbCBDcmVhdGVcIl0oaHR0cC5odG1sI2NjcmVhdGUpLiBUaGlzIGlzIGp1c3QgdGhlIHF1ZXJ5IHBvcnRpb24gb2YgdGhlIFVSTCAtIHdoYXQgZm9sbG93cyB0aGUgXCI/XCIgKG5vdCBpbmNsdWRpbmcgdGhlIFwiP1wiKS5cclxuICAgKi9cclxuICBwdWJsaWMgaWZOb25lRXhpc3Q/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEJ1bmRsZUVudHJ5UmVxdWVzdCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEJ1bmRsZUVudHJ5UmVxdWVzdEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydtZXRob2QnXSkgeyB0aGlzLm1ldGhvZCA9IG5ldyBmaGlyLkZoaXJDb2RlPEh0dHBWZXJiQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLm1ldGhvZH0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5tZXRob2QgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfbWV0aG9kJ10pIHtcclxuICAgICAgaWYgKHRoaXMubWV0aG9kKSB7IHRoaXMubWV0aG9kLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX21ldGhvZCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLm1ldGhvZCA9IG5ldyBmaGlyLkZoaXJDb2RlPEh0dHBWZXJiQ29kZVR5cGU+KHNvdXJjZS5fbWV0aG9kIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd1cmwnXSkgeyB0aGlzLnVybCA9IG5ldyBmaGlyLkZoaXJVcmkoe3ZhbHVlOiBzb3VyY2UudXJsfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnVybCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ191cmwnXSkge1xyXG4gICAgICBpZiAodGhpcy51cmwpIHsgdGhpcy51cmwuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdXJsISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudXJsID0gbmV3IGZoaXIuRmhpclVyaShzb3VyY2UuX3VybCBhcyBQYXJ0aWFsPGZoaXIuRmhpclVyaUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnaWZOb25lTWF0Y2gnXSkgeyB0aGlzLmlmTm9uZU1hdGNoID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5pZk5vbmVNYXRjaH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfaWZOb25lTWF0Y2gnXSkge1xyXG4gICAgICBpZiAodGhpcy5pZk5vbmVNYXRjaCkgeyB0aGlzLmlmTm9uZU1hdGNoLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2lmTm9uZU1hdGNoISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuaWZOb25lTWF0Y2ggPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5faWZOb25lTWF0Y2ggYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2lmTW9kaWZpZWRTaW5jZSddKSB7IHRoaXMuaWZNb2RpZmllZFNpbmNlID0gbmV3IGZoaXIuRmhpckluc3RhbnQoe3ZhbHVlOiBzb3VyY2UuaWZNb2RpZmllZFNpbmNlfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19pZk1vZGlmaWVkU2luY2UnXSkge1xyXG4gICAgICBpZiAodGhpcy5pZk1vZGlmaWVkU2luY2UpIHsgdGhpcy5pZk1vZGlmaWVkU2luY2UuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5faWZNb2RpZmllZFNpbmNlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuaWZNb2RpZmllZFNpbmNlID0gbmV3IGZoaXIuRmhpckluc3RhbnQoc291cmNlLl9pZk1vZGlmaWVkU2luY2UgYXMgUGFydGlhbDxmaGlyLkZoaXJJbnN0YW50QXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydpZk1hdGNoJ10pIHsgdGhpcy5pZk1hdGNoID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5pZk1hdGNofSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19pZk1hdGNoJ10pIHtcclxuICAgICAgaWYgKHRoaXMuaWZNYXRjaCkgeyB0aGlzLmlmTWF0Y2guYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5faWZNYXRjaCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmlmTWF0Y2ggPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5faWZNYXRjaCBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnaWZOb25lRXhpc3QnXSkgeyB0aGlzLmlmTm9uZUV4aXN0ID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5pZk5vbmVFeGlzdH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfaWZOb25lRXhpc3QnXSkge1xyXG4gICAgICBpZiAodGhpcy5pZk5vbmVFeGlzdCkgeyB0aGlzLmlmTm9uZUV4aXN0LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2lmTm9uZUV4aXN0ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuaWZOb25lRXhpc3QgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5faWZOb25lRXhpc3QgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZWQtYm91bmQgVmFsdWUgU2V0IGZvciBtZXRob2QgKEJ1bmRsZS5lbnRyeS5yZXF1ZXN0Lm1ldGhvZClcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCBtZXRob2RSZXF1aXJlZENvZGVzKCkge1xyXG4gICAgcmV0dXJuIEh0dHBWZXJiQ29kZXM7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAoIXRoaXNbJ21ldGhvZCddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBtZXRob2Q6Zmhpci5GaGlyQ29kZTxIdHRwVmVyYkNvZGVUeXBlPiBmaGlyOiBCdW5kbGUuZW50cnkucmVxdWVzdC5tZXRob2Q6Y29kZScgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1snbWV0aG9kJ10gJiYgKCFPYmplY3QudmFsdWVzKEh0dHBWZXJiQ29kZXMpLmluY2x1ZGVzKHRoaXMubWV0aG9kIGFzIGFueSkpKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdjb2RlLWludmFsaWQnLCBkaWFnbm9zdGljczogJ0ludmFsaWQgY29kZSBwcm9wZXJ0eSBtZXRob2Q6Zmhpci5GaGlyQ29kZTxIdHRwVmVyYkNvZGVUeXBlPiBmaGlyOiBCdW5kbGUuZW50cnkucmVxdWVzdC5tZXRob2Q6Y29kZSBSZXF1aXJlZCBiaW5kaW5nIHRvOiBIdHRwVmVyYicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcIm1ldGhvZFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm1ldGhvZC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKCF0aGlzWyd1cmwnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgdXJsOmZoaXIuRmhpclVyaSBmaGlyOiBCdW5kbGUuZW50cnkucmVxdWVzdC51cmw6dXJpJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1widXJsXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMudXJsLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImlmTm9uZU1hdGNoXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuaWZOb25lTWF0Y2guZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiaWZNb2RpZmllZFNpbmNlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuaWZNb2RpZmllZFNpbmNlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImlmTWF0Y2hcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5pZk1hdGNoLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImlmTm9uZUV4aXN0XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuaWZOb25lRXhpc3QuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBCdW5kbGVFbnRyeVJlc3BvbnNlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEJ1bmRsZUVudHJ5UmVzcG9uc2VBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgc3RhdHVzIGNvZGUgcmV0dXJuZWQgYnkgcHJvY2Vzc2luZyB0aGlzIGVudHJ5LiBUaGUgc3RhdHVzIFNIQUxMIHN0YXJ0IHdpdGggYSAzIGRpZ2l0IEhUVFAgY29kZSAoZS5nLiA0MDQpIGFuZCBtYXkgY29udGFpbiB0aGUgc3RhbmRhcmQgSFRUUCBkZXNjcmlwdGlvbiBhc3NvY2lhdGVkIHdpdGggdGhlIHN0YXR1cyBjb2RlLlxyXG4gICAqL1xyXG4gIHN0YXR1czogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEJ1bmRsZS5lbnRyeS5yZXNwb25zZS5zdGF0dXNcclxuICAgKi9cclxuICBfc3RhdHVzPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgbG9jYXRpb24gaGVhZGVyIGNyZWF0ZWQgYnkgcHJvY2Vzc2luZyB0aGlzIG9wZXJhdGlvbiwgcG9wdWxhdGVkIGlmIHRoZSBvcGVyYXRpb24gcmV0dXJucyBhIGxvY2F0aW9uLlxyXG4gICAqL1xyXG4gIGxvY2F0aW9uPzogZmhpci5GaGlyVXJpfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEJ1bmRsZS5lbnRyeS5yZXNwb25zZS5sb2NhdGlvblxyXG4gICAqL1xyXG4gIF9sb2NhdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogRXRhZ3MgbWF0Y2ggdGhlIFJlc291cmNlLm1ldGEudmVyc2lvbklkLiBUaGUgRVRhZyBoYXMgdG8gbWF0Y2ggdGhlIHZlcnNpb24gaWQgaW4gdGhlIGhlYWRlciBpZiBhIHJlc291cmNlIGlzIGluY2x1ZGVkLlxyXG4gICAqL1xyXG4gIGV0YWc/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLmVudHJ5LnJlc3BvbnNlLmV0YWdcclxuICAgKi9cclxuICBfZXRhZz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBoYXMgdG8gbWF0Y2ggdGhlIHNhbWUgdGltZSBpbiB0aGUgbWV0YSBoZWFkZXIgKG1ldGEubGFzdFVwZGF0ZWQpIGlmIGEgcmVzb3VyY2UgaXMgaW5jbHVkZWQuXHJcbiAgICovXHJcbiAgbGFzdE1vZGlmaWVkPzogZmhpci5GaGlySW5zdGFudHxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUuZW50cnkucmVzcG9uc2UubGFzdE1vZGlmaWVkXHJcbiAgICovXHJcbiAgX2xhc3RNb2RpZmllZD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogRm9yIGEgUE9TVC9QVVQgb3BlcmF0aW9uLCB0aGlzIGlzIHRoZSBlcXVpdmFsZW50IG91dGNvbWUgdGhhdCB3b3VsZCBiZSByZXR1cm5lZCBmb3IgcHJlZmVyID0gb3BlcmF0aW9ub3V0Y29tZSAtIGV4Y2VwdCB0aGF0IHRoZSByZXNvdXJjZSBpcyBhbHdheXMgcmV0dXJuZWQgd2hldGhlciBvciBub3QgdGhlIG91dGNvbWUgaXMgcmV0dXJuZWQuXHJcbiAgICogVGhpcyBvdXRjb21lIGlzIG5vdCB1c2VkIGZvciBlcnJvciByZXNwb25zZXMgaW4gYmF0Y2gvdHJhbnNhY3Rpb24sIG9ubHkgZm9yIGhpbnRzIGFuZCB3YXJuaW5ncy4gSW4gYSBiYXRjaCBvcGVyYXRpb24sIHRoZSBlcnJvciB3aWxsIGJlIGluIEJ1bmRsZS5lbnRyeS5yZXNwb25zZSwgYW5kIGZvciB0cmFuc2FjdGlvbiwgdGhlcmUgd2lsbCBiZSBhIHNpbmdsZSBPcGVyYXRpb25PdXRjb21lIGluc3RlYWQgb2YgYSBidW5kbGUgaW4gdGhlIGNhc2Ugb2YgYW4gZXJyb3IuXHJcbiAgICovXHJcbiAgb3V0Y29tZT86IGZoaXIuUmVzb3VyY2VBcmdzfGFueXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbmRpY2F0ZXMgdGhlIHJlc3VsdHMgb2YgcHJvY2Vzc2luZyB0aGUgY29ycmVzcG9uZGluZyAncmVxdWVzdCcgZW50cnkgaW4gdGhlIGJhdGNoIG9yIHRyYW5zYWN0aW9uIGJlaW5nIHJlc3BvbmRlZCB0byBvciB3aGF0IHRoZSByZXN1bHRzIG9mIGFuIG9wZXJhdGlvbiB3aGVyZSB3aGVuIHJldHVybmluZyBoaXN0b3J5LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJ1bmRsZUVudHJ5UmVzcG9uc2UgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdCdW5kbGVFbnRyeVJlc3BvbnNlJztcclxuICAvKipcclxuICAgKiBUaGUgc3RhdHVzIGNvZGUgcmV0dXJuZWQgYnkgcHJvY2Vzc2luZyB0aGlzIGVudHJ5LiBUaGUgc3RhdHVzIFNIQUxMIHN0YXJ0IHdpdGggYSAzIGRpZ2l0IEhUVFAgY29kZSAoZS5nLiA0MDQpIGFuZCBtYXkgY29udGFpbiB0aGUgc3RhbmRhcmQgSFRUUCBkZXNjcmlwdGlvbiBhc3NvY2lhdGVkIHdpdGggdGhlIHN0YXR1cyBjb2RlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0dXM6IGZoaXIuRmhpclN0cmluZ3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsb2NhdGlvbiBoZWFkZXIgY3JlYXRlZCBieSBwcm9jZXNzaW5nIHRoaXMgb3BlcmF0aW9uLCBwb3B1bGF0ZWQgaWYgdGhlIG9wZXJhdGlvbiByZXR1cm5zIGEgbG9jYXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIGxvY2F0aW9uPzogZmhpci5GaGlyVXJpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFdGFncyBtYXRjaCB0aGUgUmVzb3VyY2UubWV0YS52ZXJzaW9uSWQuIFRoZSBFVGFnIGhhcyB0byBtYXRjaCB0aGUgdmVyc2lvbiBpZCBpbiB0aGUgaGVhZGVyIGlmIGEgcmVzb3VyY2UgaXMgaW5jbHVkZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGV0YWc/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaGFzIHRvIG1hdGNoIHRoZSBzYW1lIHRpbWUgaW4gdGhlIG1ldGEgaGVhZGVyIChtZXRhLmxhc3RVcGRhdGVkKSBpZiBhIHJlc291cmNlIGlzIGluY2x1ZGVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBsYXN0TW9kaWZpZWQ/OiBmaGlyLkZoaXJJbnN0YW50fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBGb3IgYSBQT1NUL1BVVCBvcGVyYXRpb24sIHRoaXMgaXMgdGhlIGVxdWl2YWxlbnQgb3V0Y29tZSB0aGF0IHdvdWxkIGJlIHJldHVybmVkIGZvciBwcmVmZXIgPSBvcGVyYXRpb25vdXRjb21lIC0gZXhjZXB0IHRoYXQgdGhlIHJlc291cmNlIGlzIGFsd2F5cyByZXR1cm5lZCB3aGV0aGVyIG9yIG5vdCB0aGUgb3V0Y29tZSBpcyByZXR1cm5lZC5cclxuICAgKiBUaGlzIG91dGNvbWUgaXMgbm90IHVzZWQgZm9yIGVycm9yIHJlc3BvbnNlcyBpbiBiYXRjaC90cmFuc2FjdGlvbiwgb25seSBmb3IgaGludHMgYW5kIHdhcm5pbmdzLiBJbiBhIGJhdGNoIG9wZXJhdGlvbiwgdGhlIGVycm9yIHdpbGwgYmUgaW4gQnVuZGxlLmVudHJ5LnJlc3BvbnNlLCBhbmQgZm9yIHRyYW5zYWN0aW9uLCB0aGVyZSB3aWxsIGJlIGEgc2luZ2xlIE9wZXJhdGlvbk91dGNvbWUgaW5zdGVhZCBvZiBhIGJ1bmRsZSBpbiB0aGUgY2FzZSBvZiBhbiBlcnJvci5cclxuICAgKi9cclxuICBwdWJsaWMgb3V0Y29tZT86IGZoaXIuRmhpclJlc291cmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBCdW5kbGVFbnRyeVJlc3BvbnNlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8QnVuZGxlRW50cnlSZXNwb25zZUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydzdGF0dXMnXSkgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2Uuc3RhdHVzfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zdGF0dXMnXSkge1xyXG4gICAgICBpZiAodGhpcy5zdGF0dXMpIHsgdGhpcy5zdGF0dXMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc3RhdHVzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3N0YXR1cyBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnbG9jYXRpb24nXSkgeyB0aGlzLmxvY2F0aW9uID0gbmV3IGZoaXIuRmhpclVyaSh7dmFsdWU6IHNvdXJjZS5sb2NhdGlvbn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfbG9jYXRpb24nXSkge1xyXG4gICAgICBpZiAodGhpcy5sb2NhdGlvbikgeyB0aGlzLmxvY2F0aW9uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2xvY2F0aW9uISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubG9jYXRpb24gPSBuZXcgZmhpci5GaGlyVXJpKHNvdXJjZS5fbG9jYXRpb24gYXMgUGFydGlhbDxmaGlyLkZoaXJVcmlBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2V0YWcnXSkgeyB0aGlzLmV0YWcgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmV0YWd9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2V0YWcnXSkge1xyXG4gICAgICBpZiAodGhpcy5ldGFnKSB7IHRoaXMuZXRhZy5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9ldGFnISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZXRhZyA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9ldGFnIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydsYXN0TW9kaWZpZWQnXSkgeyB0aGlzLmxhc3RNb2RpZmllZCA9IG5ldyBmaGlyLkZoaXJJbnN0YW50KHt2YWx1ZTogc291cmNlLmxhc3RNb2RpZmllZH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfbGFzdE1vZGlmaWVkJ10pIHtcclxuICAgICAgaWYgKHRoaXMubGFzdE1vZGlmaWVkKSB7IHRoaXMubGFzdE1vZGlmaWVkLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2xhc3RNb2RpZmllZCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmxhc3RNb2RpZmllZCA9IG5ldyBmaGlyLkZoaXJJbnN0YW50KHNvdXJjZS5fbGFzdE1vZGlmaWVkIGFzIFBhcnRpYWw8Zmhpci5GaGlySW5zdGFudEFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnb3V0Y29tZSddKSB7IHRoaXMub3V0Y29tZSA9IChmaGlyLnJlc291cmNlRmFjdG9yeShzb3VyY2Uub3V0Y29tZSkgPz8gdW5kZWZpbmVkKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKCF0aGlzWydzdGF0dXMnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgc3RhdHVzOmZoaXIuRmhpclN0cmluZyBmaGlyOiBCdW5kbGUuZW50cnkucmVzcG9uc2Uuc3RhdHVzOnN0cmluZycgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInN0YXR1c1wiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnN0YXR1cy5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJsb2NhdGlvblwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmxvY2F0aW9uLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImV0YWdcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5ldGFnLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImxhc3RNb2RpZmllZFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmxhc3RNb2RpZmllZC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJvdXRjb21lXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMub3V0Y29tZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEJ1bmRsZUVudHJ5IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEJ1bmRsZUVudHJ5QXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogQSBzZXJpZXMgb2YgbGlua3MgdGhhdCBwcm92aWRlIGNvbnRleHQgdG8gdGhpcyBlbnRyeS5cclxuICAgKi9cclxuICBsaW5rPzogZmhpci5CdW5kbGVMaW5rQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBmdWxsVXJsIG1pZ2h0IG5vdCBiZSBbdW5pcXVlIGluIHRoZSBjb250ZXh0IG9mIGEgcmVzb3VyY2VdKGJ1bmRsZS5odG1sI2J1bmRsZS11bmlxdWUpLiBOb3RlIHRoYXQgc2luY2UgW0ZISVIgcmVzb3VyY2VzIGRvIG5vdCBuZWVkIHRvIGJlIHNlcnZlZCB0aHJvdWdoIHRoZSBGSElSIEFQSV0ocmVmZXJlbmNlcy5odG1sKSwgdGhlIGZ1bGxVUkwgbWlnaHQgYmUgYSBVUk4gb3IgYW4gYWJzb2x1dGUgVVJMIHRoYXQgZG9lcyBub3QgZW5kIHdpdGggdGhlIGxvZ2ljYWwgaWQgb2YgdGhlIHJlc291cmNlIChSZXNvdXJjZS5pZCkuIEhvd2V2ZXIsIGJ1dCBpZiB0aGUgZnVsbFVybCBkb2VzIGxvb2sgbGlrZSBhIFJFU1RmdWwgc2VydmVyIFVSTCAoZS5nLiBtZWV0cyB0aGUgW3JlZ2V4XShyZWZlcmVuY2VzLmh0bWwjcmVnZXgpLCB0aGVuIHRoZSAnaWQnIHBvcnRpb24gb2YgdGhlIGZ1bGxVcmwgU0hBTEwgZW5kIHdpdGggdGhlIFJlc291cmNlLmlkLlxyXG4gICAqIE5vdGUgdGhhdCB0aGUgZnVsbFVybCBpcyBub3QgdGhlIHNhbWUgYXMgdGhlIGNhbm9uaWNhbCBVUkwgLSBpdCdzIGFuIGFic29sdXRlIHVybCBmb3IgYW4gZW5kcG9pbnQgc2VydmluZyB0aGUgcmVzb3VyY2UgKHRoZXNlIHdpbGwgaGFwcGVuIHRvIGhhdmUgdGhlIHNhbWUgdmFsdWUgb24gdGhlIGNhbm9uaWNhbCBzZXJ2ZXIgZm9yIHRoZSByZXNvdXJjZSB3aXRoIHRoZSBjYW5vbmljYWwgVVJMKS5cclxuICAgKi9cclxuICBmdWxsVXJsPzogZmhpci5GaGlyVXJpfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEJ1bmRsZS5lbnRyeS5mdWxsVXJsXHJcbiAgICovXHJcbiAgX2Z1bGxVcmw/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBSZXNvdXJjZSBmb3IgdGhlIGVudHJ5LiBUaGUgcHVycG9zZS9tZWFuaW5nIG9mIHRoZSByZXNvdXJjZSBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBCdW5kbGUudHlwZS5cclxuICAgKi9cclxuICByZXNvdXJjZT86IGZoaXIuUmVzb3VyY2VBcmdzfGFueXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5mb3JtYXRpb24gYWJvdXQgdGhlIHNlYXJjaCBwcm9jZXNzIHRoYXQgbGVhZCB0byB0aGUgY3JlYXRpb24gb2YgdGhpcyBlbnRyeS5cclxuICAgKi9cclxuICBzZWFyY2g/OiBmaGlyLkJ1bmRsZUVudHJ5U2VhcmNoQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWRkaXRpb25hbCBpbmZvcm1hdGlvbiBhYm91dCBob3cgdGhpcyBlbnRyeSBzaG91bGQgYmUgcHJvY2Vzc2VkIGFzIHBhcnQgb2YgYSB0cmFuc2FjdGlvbiBvciBiYXRjaC4gIEZvciBoaXN0b3J5LCBpdCBzaG93cyBob3cgdGhlIGVudHJ5IHdhcyBwcm9jZXNzZWQgdG8gY3JlYXRlIHRoZSB2ZXJzaW9uIGNvbnRhaW5lZCBpbiB0aGUgZW50cnkuXHJcbiAgICovXHJcbiAgcmVxdWVzdD86IGZoaXIuQnVuZGxlRW50cnlSZXF1ZXN0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHRoZSByZXN1bHRzIG9mIHByb2Nlc3NpbmcgdGhlIGNvcnJlc3BvbmRpbmcgJ3JlcXVlc3QnIGVudHJ5IGluIHRoZSBiYXRjaCBvciB0cmFuc2FjdGlvbiBiZWluZyByZXNwb25kZWQgdG8gb3Igd2hhdCB0aGUgcmVzdWx0cyBvZiBhbiBvcGVyYXRpb24gd2hlcmUgd2hlbiByZXR1cm5pbmcgaGlzdG9yeS5cclxuICAgKi9cclxuICByZXNwb25zZT86IGZoaXIuQnVuZGxlRW50cnlSZXNwb25zZUFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQW4gZW50cnkgaW4gYSBidW5kbGUgcmVzb3VyY2UgLSB3aWxsIGVpdGhlciBjb250YWluIGEgcmVzb3VyY2Ugb3IgaW5mb3JtYXRpb24gYWJvdXQgYSByZXNvdXJjZSAodHJhbnNhY3Rpb25zIGFuZCBoaXN0b3J5IG9ubHkpLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJ1bmRsZUVudHJ5IGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQnVuZGxlRW50cnknO1xyXG4gIC8qKlxyXG4gICAqIEEgc2VyaWVzIG9mIGxpbmtzIHRoYXQgcHJvdmlkZSBjb250ZXh0IHRvIHRoaXMgZW50cnkuXHJcbiAgICovXHJcbiAgcHVibGljIGxpbms6IGZoaXIuQnVuZGxlTGlua1tdO1xyXG4gIC8qKlxyXG4gICAqIGZ1bGxVcmwgbWlnaHQgbm90IGJlIFt1bmlxdWUgaW4gdGhlIGNvbnRleHQgb2YgYSByZXNvdXJjZV0oYnVuZGxlLmh0bWwjYnVuZGxlLXVuaXF1ZSkuIE5vdGUgdGhhdCBzaW5jZSBbRkhJUiByZXNvdXJjZXMgZG8gbm90IG5lZWQgdG8gYmUgc2VydmVkIHRocm91Z2ggdGhlIEZISVIgQVBJXShyZWZlcmVuY2VzLmh0bWwpLCB0aGUgZnVsbFVSTCBtaWdodCBiZSBhIFVSTiBvciBhbiBhYnNvbHV0ZSBVUkwgdGhhdCBkb2VzIG5vdCBlbmQgd2l0aCB0aGUgbG9naWNhbCBpZCBvZiB0aGUgcmVzb3VyY2UgKFJlc291cmNlLmlkKS4gSG93ZXZlciwgYnV0IGlmIHRoZSBmdWxsVXJsIGRvZXMgbG9vayBsaWtlIGEgUkVTVGZ1bCBzZXJ2ZXIgVVJMIChlLmcuIG1lZXRzIHRoZSBbcmVnZXhdKHJlZmVyZW5jZXMuaHRtbCNyZWdleCksIHRoZW4gdGhlICdpZCcgcG9ydGlvbiBvZiB0aGUgZnVsbFVybCBTSEFMTCBlbmQgd2l0aCB0aGUgUmVzb3VyY2UuaWQuXHJcbiAgICogTm90ZSB0aGF0IHRoZSBmdWxsVXJsIGlzIG5vdCB0aGUgc2FtZSBhcyB0aGUgY2Fub25pY2FsIFVSTCAtIGl0J3MgYW4gYWJzb2x1dGUgdXJsIGZvciBhbiBlbmRwb2ludCBzZXJ2aW5nIHRoZSByZXNvdXJjZSAodGhlc2Ugd2lsbCBoYXBwZW4gdG8gaGF2ZSB0aGUgc2FtZSB2YWx1ZSBvbiB0aGUgY2Fub25pY2FsIHNlcnZlciBmb3IgdGhlIHJlc291cmNlIHdpdGggdGhlIGNhbm9uaWNhbCBVUkwpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBmdWxsVXJsPzogZmhpci5GaGlyVXJpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgUmVzb3VyY2UgZm9yIHRoZSBlbnRyeS4gVGhlIHB1cnBvc2UvbWVhbmluZyBvZiB0aGUgcmVzb3VyY2UgaXMgZGV0ZXJtaW5lZCBieSB0aGUgQnVuZGxlLnR5cGUuXHJcbiAgICovXHJcbiAgcHVibGljIHJlc291cmNlPzogZmhpci5GaGlyUmVzb3VyY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZm9ybWF0aW9uIGFib3V0IHRoZSBzZWFyY2ggcHJvY2VzcyB0aGF0IGxlYWQgdG8gdGhlIGNyZWF0aW9uIG9mIHRoaXMgZW50cnkuXHJcbiAgICovXHJcbiAgcHVibGljIHNlYXJjaD86IGZoaXIuQnVuZGxlRW50cnlTZWFyY2h8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFkZGl0aW9uYWwgaW5mb3JtYXRpb24gYWJvdXQgaG93IHRoaXMgZW50cnkgc2hvdWxkIGJlIHByb2Nlc3NlZCBhcyBwYXJ0IG9mIGEgdHJhbnNhY3Rpb24gb3IgYmF0Y2guICBGb3IgaGlzdG9yeSwgaXQgc2hvd3MgaG93IHRoZSBlbnRyeSB3YXMgcHJvY2Vzc2VkIHRvIGNyZWF0ZSB0aGUgdmVyc2lvbiBjb250YWluZWQgaW4gdGhlIGVudHJ5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZXF1ZXN0PzogZmhpci5CdW5kbGVFbnRyeVJlcXVlc3R8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB0aGUgcmVzdWx0cyBvZiBwcm9jZXNzaW5nIHRoZSBjb3JyZXNwb25kaW5nICdyZXF1ZXN0JyBlbnRyeSBpbiB0aGUgYmF0Y2ggb3IgdHJhbnNhY3Rpb24gYmVpbmcgcmVzcG9uZGVkIHRvIG9yIHdoYXQgdGhlIHJlc3VsdHMgb2YgYW4gb3BlcmF0aW9uIHdoZXJlIHdoZW4gcmV0dXJuaW5nIGhpc3RvcnkuXHJcbiAgICovXHJcbiAgcHVibGljIHJlc3BvbnNlPzogZmhpci5CdW5kbGVFbnRyeVJlc3BvbnNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBCdW5kbGVFbnRyeSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEJ1bmRsZUVudHJ5QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2xpbmsnXSkgeyB0aGlzLmxpbmsgPSBzb3VyY2UubGluay5tYXAoKHgpID0+IG5ldyBmaGlyLkJ1bmRsZUxpbmsoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5saW5rID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2Z1bGxVcmwnXSkgeyB0aGlzLmZ1bGxVcmwgPSBuZXcgZmhpci5GaGlyVXJpKHt2YWx1ZTogc291cmNlLmZ1bGxVcmx9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2Z1bGxVcmwnXSkge1xyXG4gICAgICBpZiAodGhpcy5mdWxsVXJsKSB7IHRoaXMuZnVsbFVybC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9mdWxsVXJsISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZnVsbFVybCA9IG5ldyBmaGlyLkZoaXJVcmkoc291cmNlLl9mdWxsVXJsIGFzIFBhcnRpYWw8Zmhpci5GaGlyVXJpQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydyZXNvdXJjZSddKSB7IHRoaXMucmVzb3VyY2UgPSAoZmhpci5yZXNvdXJjZUZhY3Rvcnkoc291cmNlLnJlc291cmNlKSA/PyB1bmRlZmluZWQpOyB9XHJcbiAgICBpZiAoc291cmNlWydzZWFyY2gnXSkgeyB0aGlzLnNlYXJjaCA9IG5ldyBmaGlyLkJ1bmRsZUVudHJ5U2VhcmNoKHNvdXJjZS5zZWFyY2gpOyB9XHJcbiAgICBpZiAoc291cmNlWydyZXF1ZXN0J10pIHsgdGhpcy5yZXF1ZXN0ID0gbmV3IGZoaXIuQnVuZGxlRW50cnlSZXF1ZXN0KHNvdXJjZS5yZXF1ZXN0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVzcG9uc2UnXSkgeyB0aGlzLnJlc3BvbnNlID0gbmV3IGZoaXIuQnVuZGxlRW50cnlSZXNwb25zZShzb3VyY2UucmVzcG9uc2UpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAodGhpc1tcImxpbmtcIl0pIHsgdGhpcy5saW5rLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJmdWxsVXJsXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZnVsbFVybC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJyZXNvdXJjZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnJlc291cmNlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInNlYXJjaFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnNlYXJjaC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJyZXF1ZXN0XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucmVxdWVzdC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJyZXNwb25zZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnJlc3BvbnNlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxuXHJcbi8qKlxyXG4gKiBBY2Nlc3MgYSBidW5kbGUuZW50cnlbXS5yZXNvdXJjZSBhcyBhIHR5cGVkIHJlc291cmNlXHJcbiAqL1xyXG4gIHJlc291cmNlQXM8QnVuZGVDb250ZW50VHlwZSA9IGZoaXIuRmhpclJlc291cmNlPigpOiBCdW5kZUNvbnRlbnRUeXBlfHVua25vd24ge1xyXG4gICAgcmV0dXJuIHRoaXMucmVzb3VyY2UgYXMgdW5rbm93biBhcyBCdW5kZUNvbnRlbnRUeXBlO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQnVuZGxlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEJ1bmRsZUFyZ3MgZXh0ZW5kcyBmaGlyLlJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIkJ1bmRsZVwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBQZXJzaXN0ZW50IGlkZW50aXR5IGdlbmVyYWxseSBvbmx5IG1hdHRlcnMgZm9yIGJhdGNoZXMgb2YgdHlwZSBEb2N1bWVudCwgTWVzc2FnZSwgYW5kIENvbGxlY3Rpb24uIEl0IHdvdWxkIG5vdCBub3JtYWxseSBiZSBwb3B1bGF0ZWQgZm9yIHNlYXJjaCBhbmQgaGlzdG9yeSByZXN1bHRzIGFuZCBzZXJ2ZXJzIGlnbm9yZSBCdW5kbGUuaWRlbnRpZmllciB3aGVuIHByb2Nlc3NpbmcgYmF0Y2hlcyBhbmQgdHJhbnNhY3Rpb25zLiBGb3IgRG9jdW1lbnRzICB0aGUgLmlkZW50aWZpZXIgU0hBTEwgYmUgcG9wdWxhdGVkIHN1Y2ggdGhhdCB0aGUgLmlkZW50aWZpZXIgaXMgZ2xvYmFsbHkgdW5pcXVlLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJdCdzIHBvc3NpYmxlIHRvIHVzZSBhIGJ1bmRsZSBmb3Igb3RoZXIgcHVycG9zZXMgKGUuZy4gYSBkb2N1bWVudCBjYW4gYmUgYWNjZXB0ZWQgYXMgYSB0cmFuc2FjdGlvbikuIFRoaXMgaXMgcHJpbWFyaWx5IGRlZmluZWQgc28gdGhhdCB0aGVyZSBjYW4gYmUgc3BlY2lmaWMgcnVsZXMgZm9yIHNvbWUgb2YgdGhlIGJ1bmRsZSB0eXBlcy5cclxuICAgKi9cclxuICB0eXBlOiBmaGlyLkZoaXJDb2RlPEJ1bmRsZVR5cGVDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLnR5cGVcclxuICAgKi9cclxuICBfdHlwZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogRm9yIG1hbnkgYnVuZGxlcywgdGhlIHRpbWVzdGFtcCBpcyBlcXVhbCB0byAubWV0YS5sYXN0VXBkYXRlZCwgYmVjYXVzZSB0aGV5IGFyZSBub3Qgc3RvcmVkIChlLmcuIHNlYXJjaCByZXN1bHRzKS4gV2hlbiBhIGJ1bmRsZSBpcyBwbGFjZWQgaW4gYSBwZXJzaXN0ZW50IHN0b3JlLCAubWV0YS5sYXN0VXBkYXRlZCB3aWxsIGJlIHVzdWFsbHkgYmUgY2hhbmdlZCBieSB0aGUgc2VydmVyLiBXaGVuIHRoZSBidW5kbGUgaXMgYSBtZXNzYWdlLCBhIG1pZGRsZXdhcmUgYWdlbnQgYWx0ZXJpbmcgdGhlIG1lc3NhZ2UgKGV2ZW4gaWYgbm90IHN0b3JlZCkgU0hPVUxEIHVwZGF0ZSAubWV0YS5sYXN0VXBkYXRlZC4gLnRpbWVzdGFtcCBpcyB1c2VkIHRvIHRyYWNrIHRoZSBvcmlnaW5hbCB0aW1lIG9mIHRoZSBCdW5kbGUsIGFuZCBTSE9VTEQgYmUgcG9wdWxhdGVkLiAgXHJcbiAgICogVXNhZ2U6XHJcbiAgICogKiBkb2N1bWVudCA6IHRoZSBkYXRlIHRoZSBkb2N1bWVudCB3YXMgY3JlYXRlZC4gTm90ZTogdGhlIGNvbXBvc2l0aW9uIG1heSBwcmVkYXRlIHRoZSBkb2N1bWVudCwgb3IgYmUgYXNzb2NpYXRlZCB3aXRoIG11bHRpcGxlIGRvY3VtZW50cy4gVGhlIGRhdGUgb2YgdGhlIGNvbXBvc2l0aW9uIC0gdGhlIGF1dGhvcmluZyB0aW1lIC0gbWF5IGJlIGVhcmxpZXIgdGhhbiB0aGUgZG9jdW1lbnQgYXNzZW1ibHkgdGltZVxyXG4gICAqICogbWVzc2FnZSA6IHRoZSBkYXRlIHRoYXQgdGhlIGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2Ugd2FzIGFzc2VtYmxlZC4gVGhpcyBkYXRlIGlzIG5vdCBjaGFuZ2VkIGJ5IG1pZGRsZXdhcmUgZW5naW5lcyB1bmxlc3MgdGhleSBhZGQgYWRkaXRpb25hbCBkYXRhIHRoYXQgY2hhbmdlcyB0aGUgbWVhbmluZyBvZiB0aGUgdGltZSBvZiB0aGUgbWVzc2FnZVxyXG4gICAqICogaGlzdG9yeSA6IHRoZSBkYXRlIHRoYXQgdGhlIGhpc3Rvcnkgd2FzIGFzc2VtYmxlZC4gVGhpcyB0aW1lIHdvdWxkIGJlIHVzZWQgYXMgdGhlIF9zaW5jZSB0aW1lIHRvIGFzayBmb3Igc3Vic2VxdWVudCB1cGRhdGVzXHJcbiAgICogKiBzZWFyY2hzZXQgOiB0aGUgdGltZSB0aGF0IHRoZSBzZWFyY2ggc2V0IHdhcyBhc3NlbWJsZWQuIE5vdGUgdGhhdCBkaWZmZXJlbnQgcGFnZXMgTUFZIGhhdmUgZGlmZmVyZW50IHRpbWVzdGFtcHMgYnV0IG5lZWQgbm90LiBIYXZpbmcgZGlmZmVyZW50IHRpbWVzdGFtcHMgZG9lcyBub3QgaW1wbHkgdGhhdCBzdWJzZXF1ZW50IHBhZ2VzIHdpbGwgcmVwcmVzZW50IG9yIGluY2x1ZGUgY2hhbmdlcyBtYWRlIHNpbmNlIHRoZSBpbml0aWFsIHF1ZXJ5XHJcbiAgICogKiB0cmFuc2FjdGlvbiB8IHRyYW5zYWN0aW9uLXJlc3BvbnNlIHwgYmF0Y2ggfCBiYXRjaC1yZXNwb25zZSB8IGNvbGxlY3Rpb24gOiBubyBwYXJ0aWN1bGFyIGFzc2lnbmVkIG1lYW5pbmdcclxuICAgKiBUaGUgdGltZXN0YW1wIHZhbHVlIHNob3VsZCBiZSBncmVhdGVyIHRoYW4gdGhlIGxhc3RVcGRhdGVkIGFuZCBvdGhlciB0aW1lc3RhbXBzIGluIHRoZSByZXNvdXJjZXMgaW4gdGhlIGJ1bmRsZSwgYW5kIGl0IHNob3VsZCBiZSBlcXVhbCBvciBlYXJsaWVyIHRoYW4gdGhlIC5tZXRhLmxhc3RVcGRhdGVkIG9uIHRoZSBCdW5kbGUgaXRzZWxmLlxyXG4gICAqL1xyXG4gIHRpbWVzdGFtcD86IGZoaXIuRmhpckluc3RhbnR8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLnRpbWVzdGFtcFxyXG4gICAqL1xyXG4gIF90aW1lc3RhbXA/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIE9ubHkgdXNlZCBpZiB0aGUgYnVuZGxlIGlzIGEgc2VhcmNoIHJlc3VsdCBzZXQuIFRoZSB0b3RhbCBkb2VzIG5vdCBpbmNsdWRlIHJlc291cmNlcyBzdWNoIGFzIE9wZXJhdGlvbk91dGNvbWUgYW5kIGluY2x1ZGVkIHJlc291cmNlcywgb25seSB0aGUgdG90YWwgbnVtYmVyIG9mIG1hdGNoaW5nIHJlc291cmNlcy5cclxuICAgKi9cclxuICB0b3RhbD86IGZoaXIuRmhpclVuc2lnbmVkSW50fG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEJ1bmRsZS50b3RhbFxyXG4gICAqL1xyXG4gIF90b3RhbD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQm90aCBCdW5kbGUubGluayBhbmQgQnVuZGxlLmVudHJ5LmxpbmsgYXJlIGRlZmluZWQgdG8gc3VwcG9ydCBwcm92aWRpbmcgYWRkaXRpb25hbCBjb250ZXh0IHdoZW4gQnVuZGxlcyBhcmUgdXNlZCAoZS5nLiBbSEFURU9BU10oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9IQVRFT0FTKSkuIFxyXG4gICAqIEJ1bmRsZS5lbnRyeS5saW5rIGNvcnJlc3BvbmRzIHRvIGxpbmtzIGZvdW5kIGluIHRoZSBIVFRQIGhlYWRlciBpZiB0aGUgcmVzb3VyY2UgaW4gdGhlIGVudHJ5IHdhcyBbcmVhZF0oaHR0cC5odG1sI3JlYWQpIGRpcmVjdGx5LlxyXG4gICAqIFRoaXMgc3BlY2lmaWNhdGlvbiBkZWZpbmVzIHNvbWUgc3BlY2lmaWMgdXNlcyBvZiBCdW5kbGUubGluayBmb3IgW3NlYXJjaGluZ10oc2VhcmNoLmh0bWwjY29uZm9ybWFuY2UpIGFuZCBbcGFnaW5nXShodHRwLmh0bWwjcGFnaW5nKSwgYnV0IG5vIHNwZWNpZmljIHVzZXMgZm9yIEJ1bmRsZS5lbnRyeS5saW5rLCBhbmQgbm8gZGVmaW5lZCBmdW5jdGlvbiBpbiBhIHRyYW5zYWN0aW9uIC0gdGhlIG1lYW5pbmcgaXMgaW1wbGVtZW50YXRpb24gc3BlY2lmaWMuXHJcbiAgICovXHJcbiAgbGluaz86IGZoaXIuQnVuZGxlTGlua0FyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQW4gZW50cnkgaW4gYSBidW5kbGUgcmVzb3VyY2UgLSB3aWxsIGVpdGhlciBjb250YWluIGEgcmVzb3VyY2Ugb3IgaW5mb3JtYXRpb24gYWJvdXQgYSByZXNvdXJjZSAodHJhbnNhY3Rpb25zIGFuZCBoaXN0b3J5IG9ubHkpLlxyXG4gICAqL1xyXG4gIGVudHJ5PzogZmhpci5CdW5kbGVFbnRyeUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNpZ25hdHVyZSBjb3VsZCBiZSBjcmVhdGVkIGJ5IHRoZSBcImF1dGhvclwiIG9mIHRoZSBidW5kbGUgb3IgYnkgdGhlIG9yaWdpbmF0aW5nIGRldmljZS4gICBSZXF1aXJlbWVudHMgYXJvdW5kIGluY2x1c2lvbiBvZiBhIHNpZ25hdHVyZSwgdmVyaWZpY2F0aW9uIG9mIHNpZ25hdHVyZXMgYW5kIHRyZWF0bWVudCBvZiBzaWduZWQvbm9uLXNpZ25lZCBidW5kbGVzIGlzIGltcGxlbWVudGF0aW9uLWVudmlyb25tZW50IHNwZWNpZmljLlxyXG4gICAqL1xyXG4gIHNpZ25hdHVyZT86IGZoaXIuU2lnbmF0dXJlQXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBIGNvbnRhaW5lciBmb3IgYSBjb2xsZWN0aW9uIG9mIHJlc291cmNlcy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBCdW5kbGUgZXh0ZW5kcyBmaGlyLlJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0J1bmRsZSc7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJCdW5kbGVcIjtcclxuICAvKipcclxuICAgKiBQZXJzaXN0ZW50IGlkZW50aXR5IGdlbmVyYWxseSBvbmx5IG1hdHRlcnMgZm9yIGJhdGNoZXMgb2YgdHlwZSBEb2N1bWVudCwgTWVzc2FnZSwgYW5kIENvbGxlY3Rpb24uIEl0IHdvdWxkIG5vdCBub3JtYWxseSBiZSBwb3B1bGF0ZWQgZm9yIHNlYXJjaCBhbmQgaGlzdG9yeSByZXN1bHRzIGFuZCBzZXJ2ZXJzIGlnbm9yZSBCdW5kbGUuaWRlbnRpZmllciB3aGVuIHByb2Nlc3NpbmcgYmF0Y2hlcyBhbmQgdHJhbnNhY3Rpb25zLiBGb3IgRG9jdW1lbnRzICB0aGUgLmlkZW50aWZpZXIgU0hBTEwgYmUgcG9wdWxhdGVkIHN1Y2ggdGhhdCB0aGUgLmlkZW50aWZpZXIgaXMgZ2xvYmFsbHkgdW5pcXVlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJdCdzIHBvc3NpYmxlIHRvIHVzZSBhIGJ1bmRsZSBmb3Igb3RoZXIgcHVycG9zZXMgKGUuZy4gYSBkb2N1bWVudCBjYW4gYmUgYWNjZXB0ZWQgYXMgYSB0cmFuc2FjdGlvbikuIFRoaXMgaXMgcHJpbWFyaWx5IGRlZmluZWQgc28gdGhhdCB0aGVyZSBjYW4gYmUgc3BlY2lmaWMgcnVsZXMgZm9yIHNvbWUgb2YgdGhlIGJ1bmRsZSB0eXBlcy5cclxuICAgKi9cclxuICBwdWJsaWMgdHlwZTogZmhpci5GaGlyQ29kZTxCdW5kbGVUeXBlQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogRm9yIG1hbnkgYnVuZGxlcywgdGhlIHRpbWVzdGFtcCBpcyBlcXVhbCB0byAubWV0YS5sYXN0VXBkYXRlZCwgYmVjYXVzZSB0aGV5IGFyZSBub3Qgc3RvcmVkIChlLmcuIHNlYXJjaCByZXN1bHRzKS4gV2hlbiBhIGJ1bmRsZSBpcyBwbGFjZWQgaW4gYSBwZXJzaXN0ZW50IHN0b3JlLCAubWV0YS5sYXN0VXBkYXRlZCB3aWxsIGJlIHVzdWFsbHkgYmUgY2hhbmdlZCBieSB0aGUgc2VydmVyLiBXaGVuIHRoZSBidW5kbGUgaXMgYSBtZXNzYWdlLCBhIG1pZGRsZXdhcmUgYWdlbnQgYWx0ZXJpbmcgdGhlIG1lc3NhZ2UgKGV2ZW4gaWYgbm90IHN0b3JlZCkgU0hPVUxEIHVwZGF0ZSAubWV0YS5sYXN0VXBkYXRlZC4gLnRpbWVzdGFtcCBpcyB1c2VkIHRvIHRyYWNrIHRoZSBvcmlnaW5hbCB0aW1lIG9mIHRoZSBCdW5kbGUsIGFuZCBTSE9VTEQgYmUgcG9wdWxhdGVkLiAgXHJcbiAgICogVXNhZ2U6XHJcbiAgICogKiBkb2N1bWVudCA6IHRoZSBkYXRlIHRoZSBkb2N1bWVudCB3YXMgY3JlYXRlZC4gTm90ZTogdGhlIGNvbXBvc2l0aW9uIG1heSBwcmVkYXRlIHRoZSBkb2N1bWVudCwgb3IgYmUgYXNzb2NpYXRlZCB3aXRoIG11bHRpcGxlIGRvY3VtZW50cy4gVGhlIGRhdGUgb2YgdGhlIGNvbXBvc2l0aW9uIC0gdGhlIGF1dGhvcmluZyB0aW1lIC0gbWF5IGJlIGVhcmxpZXIgdGhhbiB0aGUgZG9jdW1lbnQgYXNzZW1ibHkgdGltZVxyXG4gICAqICogbWVzc2FnZSA6IHRoZSBkYXRlIHRoYXQgdGhlIGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2Ugd2FzIGFzc2VtYmxlZC4gVGhpcyBkYXRlIGlzIG5vdCBjaGFuZ2VkIGJ5IG1pZGRsZXdhcmUgZW5naW5lcyB1bmxlc3MgdGhleSBhZGQgYWRkaXRpb25hbCBkYXRhIHRoYXQgY2hhbmdlcyB0aGUgbWVhbmluZyBvZiB0aGUgdGltZSBvZiB0aGUgbWVzc2FnZVxyXG4gICAqICogaGlzdG9yeSA6IHRoZSBkYXRlIHRoYXQgdGhlIGhpc3Rvcnkgd2FzIGFzc2VtYmxlZC4gVGhpcyB0aW1lIHdvdWxkIGJlIHVzZWQgYXMgdGhlIF9zaW5jZSB0aW1lIHRvIGFzayBmb3Igc3Vic2VxdWVudCB1cGRhdGVzXHJcbiAgICogKiBzZWFyY2hzZXQgOiB0aGUgdGltZSB0aGF0IHRoZSBzZWFyY2ggc2V0IHdhcyBhc3NlbWJsZWQuIE5vdGUgdGhhdCBkaWZmZXJlbnQgcGFnZXMgTUFZIGhhdmUgZGlmZmVyZW50IHRpbWVzdGFtcHMgYnV0IG5lZWQgbm90LiBIYXZpbmcgZGlmZmVyZW50IHRpbWVzdGFtcHMgZG9lcyBub3QgaW1wbHkgdGhhdCBzdWJzZXF1ZW50IHBhZ2VzIHdpbGwgcmVwcmVzZW50IG9yIGluY2x1ZGUgY2hhbmdlcyBtYWRlIHNpbmNlIHRoZSBpbml0aWFsIHF1ZXJ5XHJcbiAgICogKiB0cmFuc2FjdGlvbiB8IHRyYW5zYWN0aW9uLXJlc3BvbnNlIHwgYmF0Y2ggfCBiYXRjaC1yZXNwb25zZSB8IGNvbGxlY3Rpb24gOiBubyBwYXJ0aWN1bGFyIGFzc2lnbmVkIG1lYW5pbmdcclxuICAgKiBUaGUgdGltZXN0YW1wIHZhbHVlIHNob3VsZCBiZSBncmVhdGVyIHRoYW4gdGhlIGxhc3RVcGRhdGVkIGFuZCBvdGhlciB0aW1lc3RhbXBzIGluIHRoZSByZXNvdXJjZXMgaW4gdGhlIGJ1bmRsZSwgYW5kIGl0IHNob3VsZCBiZSBlcXVhbCBvciBlYXJsaWVyIHRoYW4gdGhlIC5tZXRhLmxhc3RVcGRhdGVkIG9uIHRoZSBCdW5kbGUgaXRzZWxmLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0aW1lc3RhbXA/OiBmaGlyLkZoaXJJbnN0YW50fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBPbmx5IHVzZWQgaWYgdGhlIGJ1bmRsZSBpcyBhIHNlYXJjaCByZXN1bHQgc2V0LiBUaGUgdG90YWwgZG9lcyBub3QgaW5jbHVkZSByZXNvdXJjZXMgc3VjaCBhcyBPcGVyYXRpb25PdXRjb21lIGFuZCBpbmNsdWRlZCByZXNvdXJjZXMsIG9ubHkgdGhlIHRvdGFsIG51bWJlciBvZiBtYXRjaGluZyByZXNvdXJjZXMuXHJcbiAgICovXHJcbiAgcHVibGljIHRvdGFsPzogZmhpci5GaGlyVW5zaWduZWRJbnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEJvdGggQnVuZGxlLmxpbmsgYW5kIEJ1bmRsZS5lbnRyeS5saW5rIGFyZSBkZWZpbmVkIHRvIHN1cHBvcnQgcHJvdmlkaW5nIGFkZGl0aW9uYWwgY29udGV4dCB3aGVuIEJ1bmRsZXMgYXJlIHVzZWQgKGUuZy4gW0hBVEVPQVNdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSEFURU9BUykpLiBcclxuICAgKiBCdW5kbGUuZW50cnkubGluayBjb3JyZXNwb25kcyB0byBsaW5rcyBmb3VuZCBpbiB0aGUgSFRUUCBoZWFkZXIgaWYgdGhlIHJlc291cmNlIGluIHRoZSBlbnRyeSB3YXMgW3JlYWRdKGh0dHAuaHRtbCNyZWFkKSBkaXJlY3RseS5cclxuICAgKiBUaGlzIHNwZWNpZmljYXRpb24gZGVmaW5lcyBzb21lIHNwZWNpZmljIHVzZXMgb2YgQnVuZGxlLmxpbmsgZm9yIFtzZWFyY2hpbmddKHNlYXJjaC5odG1sI2NvbmZvcm1hbmNlKSBhbmQgW3BhZ2luZ10oaHR0cC5odG1sI3BhZ2luZyksIGJ1dCBubyBzcGVjaWZpYyB1c2VzIGZvciBCdW5kbGUuZW50cnkubGluaywgYW5kIG5vIGRlZmluZWQgZnVuY3Rpb24gaW4gYSB0cmFuc2FjdGlvbiAtIHRoZSBtZWFuaW5nIGlzIGltcGxlbWVudGF0aW9uIHNwZWNpZmljLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBsaW5rOiBmaGlyLkJ1bmRsZUxpbmtbXTtcclxuICAvKipcclxuICAgKiBBbiBlbnRyeSBpbiBhIGJ1bmRsZSByZXNvdXJjZSAtIHdpbGwgZWl0aGVyIGNvbnRhaW4gYSByZXNvdXJjZSBvciBpbmZvcm1hdGlvbiBhYm91dCBhIHJlc291cmNlICh0cmFuc2FjdGlvbnMgYW5kIGhpc3Rvcnkgb25seSkuXHJcbiAgICovXHJcbiAgcHVibGljIGVudHJ5OiBmaGlyLkJ1bmRsZUVudHJ5W107XHJcbiAgLyoqXHJcbiAgICogVGhlIHNpZ25hdHVyZSBjb3VsZCBiZSBjcmVhdGVkIGJ5IHRoZSBcImF1dGhvclwiIG9mIHRoZSBidW5kbGUgb3IgYnkgdGhlIG9yaWdpbmF0aW5nIGRldmljZS4gICBSZXF1aXJlbWVudHMgYXJvdW5kIGluY2x1c2lvbiBvZiBhIHNpZ25hdHVyZSwgdmVyaWZpY2F0aW9uIG9mIHNpZ25hdHVyZXMgYW5kIHRyZWF0bWVudCBvZiBzaWduZWQvbm9uLXNpZ25lZCBidW5kbGVzIGlzIGltcGxlbWVudGF0aW9uLWVudmlyb25tZW50IHNwZWNpZmljLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzaWduYXR1cmU/OiBmaGlyLlNpZ25hdHVyZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQnVuZGxlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8QnVuZGxlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ0J1bmRsZSc7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gbmV3IGZoaXIuSWRlbnRpZmllcihzb3VyY2UuaWRlbnRpZmllcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ3R5cGUnXSkgeyB0aGlzLnR5cGUgPSBuZXcgZmhpci5GaGlyQ29kZTxCdW5kbGVUeXBlQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnR5cGV9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudHlwZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ190eXBlJ10pIHtcclxuICAgICAgaWYgKHRoaXMudHlwZSkgeyB0aGlzLnR5cGUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdHlwZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnR5cGUgPSBuZXcgZmhpci5GaGlyQ29kZTxCdW5kbGVUeXBlQ29kZVR5cGU+KHNvdXJjZS5fdHlwZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsndGltZXN0YW1wJ10pIHsgdGhpcy50aW1lc3RhbXAgPSBuZXcgZmhpci5GaGlySW5zdGFudCh7dmFsdWU6IHNvdXJjZS50aW1lc3RhbXB9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3RpbWVzdGFtcCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnRpbWVzdGFtcCkgeyB0aGlzLnRpbWVzdGFtcC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl90aW1lc3RhbXAhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy50aW1lc3RhbXAgPSBuZXcgZmhpci5GaGlySW5zdGFudChzb3VyY2UuX3RpbWVzdGFtcCBhcyBQYXJ0aWFsPGZoaXIuRmhpckluc3RhbnRBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3RvdGFsJ10pIHsgdGhpcy50b3RhbCA9IG5ldyBmaGlyLkZoaXJVbnNpZ25lZEludCh7dmFsdWU6IHNvdXJjZS50b3RhbH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfdG90YWwnXSkge1xyXG4gICAgICBpZiAodGhpcy50b3RhbCkgeyB0aGlzLnRvdGFsLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3RvdGFsISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudG90YWwgPSBuZXcgZmhpci5GaGlyVW5zaWduZWRJbnQoc291cmNlLl90b3RhbCBhcyBQYXJ0aWFsPGZoaXIuRmhpclVuc2lnbmVkSW50QXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydsaW5rJ10pIHsgdGhpcy5saW5rID0gc291cmNlLmxpbmsubWFwKCh4KSA9PiBuZXcgZmhpci5CdW5kbGVMaW5rKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubGluayA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydlbnRyeSddKSB7IHRoaXMuZW50cnkgPSBzb3VyY2UuZW50cnkubWFwKCh4KSA9PiBuZXcgZmhpci5CdW5kbGVFbnRyeSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmVudHJ5ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3NpZ25hdHVyZSddKSB7IHRoaXMuc2lnbmF0dXJlID0gbmV3IGZoaXIuU2lnbmF0dXJlKHNvdXJjZS5zaWduYXR1cmUpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlcXVpcmVkLWJvdW5kIFZhbHVlIFNldCBmb3IgdHlwZSAoQnVuZGxlLnR5cGUpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgdHlwZVJlcXVpcmVkQ29kZXMoKSB7XHJcbiAgICByZXR1cm4gQnVuZGxlVHlwZUNvZGVzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKCF0aGlzWydyZXNvdXJjZVR5cGUnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgcmVzb3VyY2VUeXBlOlwiQnVuZGxlXCIgZmhpcjogQnVuZGxlLnJlc291cmNlVHlwZTpcIkJ1bmRsZVwiJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiaWRlbnRpZmllclwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmlkZW50aWZpZXIuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICghdGhpc1sndHlwZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSB0eXBlOmZoaXIuRmhpckNvZGU8QnVuZGxlVHlwZUNvZGVUeXBlPiBmaGlyOiBCdW5kbGUudHlwZTpjb2RlJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzWyd0eXBlJ10gJiYgKCFPYmplY3QudmFsdWVzKEJ1bmRsZVR5cGVDb2RlcykuaW5jbHVkZXModGhpcy50eXBlIGFzIGFueSkpKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdjb2RlLWludmFsaWQnLCBkaWFnbm9zdGljczogJ0ludmFsaWQgY29kZSBwcm9wZXJ0eSB0eXBlOmZoaXIuRmhpckNvZGU8QnVuZGxlVHlwZUNvZGVUeXBlPiBmaGlyOiBCdW5kbGUudHlwZTpjb2RlIFJlcXVpcmVkIGJpbmRpbmcgdG86IEJ1bmRsZVR5cGUnIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJ0eXBlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMudHlwZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJ0aW1lc3RhbXBcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy50aW1lc3RhbXAuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1widG90YWxcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy50b3RhbC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJsaW5rXCJdKSB7IHRoaXMubGluay5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wiZW50cnlcIl0pIHsgdGhpcy5lbnRyeS5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wic2lnbmF0dXJlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc2lnbmF0dXJlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=