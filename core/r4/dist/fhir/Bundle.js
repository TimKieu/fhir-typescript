// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: Bundle
import * as fhir from '../fhir.js';
// @ts-ignore
import { SearchEntryModeCodes } from '../fhirValueSets/SearchEntryModeCodes.js';
// @ts-ignore
import { HttpVerbCodes } from '../fhirValueSets/HttpVerbCodes.js';
// @ts-ignore
import { BundleTypeCodes } from '../fhirValueSets/BundleTypeCodes.js';
/**
 * Both Bundle.link and Bundle.entry.link are defined to support providing additional context when Bundles are used (e.g. [HATEOAS](http://en.wikipedia.org/wiki/HATEOAS)).
 * Bundle.entry.link corresponds to links found in the HTTP header if the resource in the entry was [read](http.html#read) directly.
 * This specification defines some specific uses of Bundle.link for [searching](search.html#conformance) and [paging](http.html#paging), but no specific uses for Bundle.entry.link, and no defined function in a transaction - the meaning is implementation specific.
 */
export class BundleLink extends fhir.BackboneElement {
    /**
     * Default constructor for BundleLink - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['relation']) {
            this.relation = new fhir.FhirString({ value: source.relation });
        }
        else {
            this.relation = null;
        }
        if (source['_relation']) {
            if (this.relation) {
                this.relation.addExtendedProperties(source._relation);
            }
            else {
                this.relation = new fhir.FhirString(source._relation);
            }
        }
        if (source['url']) {
            this.url = new fhir.FhirUri({ value: source.url });
        }
        else {
            this.url = null;
        }
        if (source['_url']) {
            if (this.url) {
                this.url.addExtendedProperties(source._url);
            }
            else {
                this.url = new fhir.FhirUri(source._url);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'Bundle.link';
        }
        if (!this['relation']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property relation fhir: Bundle.link.relation:string', expression: [expression] });
        }
        if (this["relation"]) {
            issues.push(...this.relation.doModelValidation(expression + '.relation'));
        }
        if (!this['url']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property url fhir: Bundle.link.url:uri', expression: [expression] });
        }
        if (this["url"]) {
            issues.push(...this.url.doModelValidation(expression + '.url'));
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BundleLink._fts_dataType = 'BundleLink';
/**
 * Information about the search process that lead to the creation of this entry.
 */
export class BundleEntrySearch extends fhir.BackboneElement {
    /**
     * Default constructor for BundleEntrySearch - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['mode']) {
            this.mode = new fhir.FhirCode({ value: source.mode });
        }
        if (source['_mode']) {
            if (this.mode) {
                this.mode.addExtendedProperties(source._mode);
            }
            else {
                this.mode = new fhir.FhirCode(source._mode);
            }
        }
        if (source['score']) {
            this.score = new fhir.FhirDecimal({ value: source.score });
        }
        if (source['_score']) {
            if (this.score) {
                this.score.addExtendedProperties(source._score);
            }
            else {
                this.score = new fhir.FhirDecimal(source._score);
            }
        }
    }
    /**
     * Required-bound Value Set for mode (Bundle.entry.search.mode)
     */
    static get modeRequiredCodes() {
        return SearchEntryModeCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'Bundle.entry.search';
        }
        if (this['mode'] && (!Object.values(SearchEntryModeCodes).includes(this.mode.value))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'mode (Bundle.entry.search.mode) of type code is missing code for Required binding to: SearchEntryMode', expression: [expression] });
        }
        if (this["mode"]) {
            issues.push(...this.mode.doModelValidation(expression + '.mode'));
        }
        if (this["score"]) {
            issues.push(...this.score.doModelValidation(expression + '.score'));
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BundleEntrySearch._fts_dataType = 'BundleEntrySearch';
/**
 * Additional information about how this entry should be processed as part of a transaction or batch.  For history, it shows how the entry was processed to create the version contained in the entry.
 */
export class BundleEntryRequest extends fhir.BackboneElement {
    /**
     * Default constructor for BundleEntryRequest - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['method']) {
            this.method = new fhir.FhirCode({ value: source.method });
        }
        else {
            this.method = null;
        }
        if (source['_method']) {
            if (this.method) {
                this.method.addExtendedProperties(source._method);
            }
            else {
                this.method = new fhir.FhirCode(source._method);
            }
        }
        if (source['url']) {
            this.url = new fhir.FhirUri({ value: source.url });
        }
        else {
            this.url = null;
        }
        if (source['_url']) {
            if (this.url) {
                this.url.addExtendedProperties(source._url);
            }
            else {
                this.url = new fhir.FhirUri(source._url);
            }
        }
        if (source['ifNoneMatch']) {
            this.ifNoneMatch = new fhir.FhirString({ value: source.ifNoneMatch });
        }
        if (source['_ifNoneMatch']) {
            if (this.ifNoneMatch) {
                this.ifNoneMatch.addExtendedProperties(source._ifNoneMatch);
            }
            else {
                this.ifNoneMatch = new fhir.FhirString(source._ifNoneMatch);
            }
        }
        if (source['ifModifiedSince']) {
            this.ifModifiedSince = new fhir.FhirInstant({ value: source.ifModifiedSince });
        }
        if (source['_ifModifiedSince']) {
            if (this.ifModifiedSince) {
                this.ifModifiedSince.addExtendedProperties(source._ifModifiedSince);
            }
            else {
                this.ifModifiedSince = new fhir.FhirInstant(source._ifModifiedSince);
            }
        }
        if (source['ifMatch']) {
            this.ifMatch = new fhir.FhirString({ value: source.ifMatch });
        }
        if (source['_ifMatch']) {
            if (this.ifMatch) {
                this.ifMatch.addExtendedProperties(source._ifMatch);
            }
            else {
                this.ifMatch = new fhir.FhirString(source._ifMatch);
            }
        }
        if (source['ifNoneExist']) {
            this.ifNoneExist = new fhir.FhirString({ value: source.ifNoneExist });
        }
        if (source['_ifNoneExist']) {
            if (this.ifNoneExist) {
                this.ifNoneExist.addExtendedProperties(source._ifNoneExist);
            }
            else {
                this.ifNoneExist = new fhir.FhirString(source._ifNoneExist);
            }
        }
    }
    /**
     * Required-bound Value Set for method (Bundle.entry.request.method)
     */
    static get methodRequiredCodes() {
        return HttpVerbCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'Bundle.entry.request';
        }
        if (!this['method']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property method fhir: Bundle.entry.request.method:code', expression: [expression] });
        }
        if (this['method'] && (!Object.values(HttpVerbCodes).includes(this.method.value))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'method (Bundle.entry.request.method) of type code is missing code for Required binding to: HttpVerb', expression: [expression] });
        }
        if (this["method"]) {
            issues.push(...this.method.doModelValidation(expression + '.method'));
        }
        if (!this['url']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property url fhir: Bundle.entry.request.url:uri', expression: [expression] });
        }
        if (this["url"]) {
            issues.push(...this.url.doModelValidation(expression + '.url'));
        }
        if (this["ifNoneMatch"]) {
            issues.push(...this.ifNoneMatch.doModelValidation(expression + '.ifNoneMatch'));
        }
        if (this["ifModifiedSince"]) {
            issues.push(...this.ifModifiedSince.doModelValidation(expression + '.ifModifiedSince'));
        }
        if (this["ifMatch"]) {
            issues.push(...this.ifMatch.doModelValidation(expression + '.ifMatch'));
        }
        if (this["ifNoneExist"]) {
            issues.push(...this.ifNoneExist.doModelValidation(expression + '.ifNoneExist'));
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BundleEntryRequest._fts_dataType = 'BundleEntryRequest';
/**
 * Indicates the results of processing the corresponding 'request' entry in the batch or transaction being responded to or what the results of an operation where when returning history.
 */
export class BundleEntryResponse extends fhir.BackboneElement {
    /**
     * Default constructor for BundleEntryResponse - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['status']) {
            this.status = new fhir.FhirString({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirString(source._status);
            }
        }
        if (source['location']) {
            this.location = new fhir.FhirUri({ value: source.location });
        }
        if (source['_location']) {
            if (this.location) {
                this.location.addExtendedProperties(source._location);
            }
            else {
                this.location = new fhir.FhirUri(source._location);
            }
        }
        if (source['etag']) {
            this.etag = new fhir.FhirString({ value: source.etag });
        }
        if (source['_etag']) {
            if (this.etag) {
                this.etag.addExtendedProperties(source._etag);
            }
            else {
                this.etag = new fhir.FhirString(source._etag);
            }
        }
        if (source['lastModified']) {
            this.lastModified = new fhir.FhirInstant({ value: source.lastModified });
        }
        if (source['_lastModified']) {
            if (this.lastModified) {
                this.lastModified.addExtendedProperties(source._lastModified);
            }
            else {
                this.lastModified = new fhir.FhirInstant(source._lastModified);
            }
        }
        if (source['outcome']) {
            this.outcome = (fhir.resourceFactory(source.outcome) ?? undefined);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'Bundle.entry.response';
        }
        if (!this['status']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property status fhir: Bundle.entry.response.status:string', expression: [expression] });
        }
        if (this["status"]) {
            issues.push(...this.status.doModelValidation(expression + '.status'));
        }
        if (this["location"]) {
            issues.push(...this.location.doModelValidation(expression + '.location'));
        }
        if (this["etag"]) {
            issues.push(...this.etag.doModelValidation(expression + '.etag'));
        }
        if (this["lastModified"]) {
            issues.push(...this.lastModified.doModelValidation(expression + '.lastModified'));
        }
        if (this["outcome"]) {
            issues.push(...this.outcome.doModelValidation(expression + '.outcome'));
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BundleEntryResponse._fts_dataType = 'BundleEntryResponse';
/**
 * An entry in a bundle resource - will either contain a resource or information about a resource (transactions and history only).
 */
export class BundleEntry extends fhir.BackboneElement {
    /**
     * Default constructor for BundleEntry - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['link']) {
            this.link = source.link.map((x) => new fhir.BundleLink(x));
        }
        else {
            this.link = [];
        }
        if (source['fullUrl']) {
            this.fullUrl = new fhir.FhirUri({ value: source.fullUrl });
        }
        if (source['_fullUrl']) {
            if (this.fullUrl) {
                this.fullUrl.addExtendedProperties(source._fullUrl);
            }
            else {
                this.fullUrl = new fhir.FhirUri(source._fullUrl);
            }
        }
        if (source['resource']) {
            this.resource = (fhir.resourceFactory(source.resource) ?? undefined);
        }
        if (source['search']) {
            this.search = new fhir.BundleEntrySearch(source.search);
        }
        if (source['request']) {
            this.request = new fhir.BundleEntryRequest(source.request);
        }
        if (source['response']) {
            this.response = new fhir.BundleEntryResponse(source.response);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'Bundle.entry';
        }
        if (this["link"]) {
            this.link.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.link[${i}]`)); });
        }
        if (this["fullUrl"]) {
            issues.push(...this.fullUrl.doModelValidation(expression + '.fullUrl'));
        }
        if (this["resource"]) {
            issues.push(...this.resource.doModelValidation(expression + '.resource'));
        }
        if (this["search"]) {
            issues.push(...this.search.doModelValidation(expression + '.search'));
        }
        if (this["request"]) {
            issues.push(...this.request.doModelValidation(expression + '.request'));
        }
        if (this["response"]) {
            issues.push(...this.response.doModelValidation(expression + '.response'));
        }
        return issues;
    }
    /**
     * Access a bundle.entry[].resource as a typed resource
     */
    resourceAs() {
        return this.resource;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BundleEntry._fts_dataType = 'BundleEntry';
/**
 * A container for a collection of resources.
 */
export class Bundle extends fhir.Resource {
    /**
     * Default constructor for Bundle - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'Bundle';
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier);
        }
        if (source['type']) {
            this.type = new fhir.FhirCode({ value: source.type });
        }
        else {
            this.type = null;
        }
        if (source['_type']) {
            if (this.type) {
                this.type.addExtendedProperties(source._type);
            }
            else {
                this.type = new fhir.FhirCode(source._type);
            }
        }
        if (source['timestamp']) {
            this.timestamp = new fhir.FhirInstant({ value: source.timestamp });
        }
        if (source['_timestamp']) {
            if (this.timestamp) {
                this.timestamp.addExtendedProperties(source._timestamp);
            }
            else {
                this.timestamp = new fhir.FhirInstant(source._timestamp);
            }
        }
        if (source['total']) {
            this.total = new fhir.FhirUnsignedInt({ value: source.total });
        }
        if (source['_total']) {
            if (this.total) {
                this.total.addExtendedProperties(source._total);
            }
            else {
                this.total = new fhir.FhirUnsignedInt(source._total);
            }
        }
        if (source['link']) {
            this.link = source.link.map((x) => new fhir.BundleLink(x));
        }
        else {
            this.link = [];
        }
        if (source['entry']) {
            this.entry = source.entry.map((x) => new fhir.BundleEntry(x));
        }
        else {
            this.entry = [];
        }
        if (source['signature']) {
            this.signature = new fhir.Signature(source.signature);
        }
    }
    /**
     * Required-bound Value Set for type (Bundle.type)
     */
    static get typeRequiredCodes() {
        return BundleTypeCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'Bundle';
        }
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType fhir: Bundle.resourceType:"Bundle"', expression: [expression] });
        }
        if (this["identifier"]) {
            issues.push(...this.identifier.doModelValidation(expression + '.identifier'));
        }
        if (!this['type']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property type fhir: Bundle.type:code', expression: [expression] });
        }
        if (this['type'] && (!Object.values(BundleTypeCodes).includes(this.type.value))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'type (Bundle.type) of type code is missing code for Required binding to: BundleType', expression: [expression] });
        }
        if (this["type"]) {
            issues.push(...this.type.doModelValidation(expression + '.type'));
        }
        if (this["timestamp"]) {
            issues.push(...this.timestamp.doModelValidation(expression + '.timestamp'));
        }
        if (this["total"]) {
            issues.push(...this.total.doModelValidation(expression + '.total'));
        }
        if (this["link"]) {
            this.link.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.link[${i}]`)); });
        }
        if (this["entry"]) {
            this.entry.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.entry[${i}]`)); });
        }
        if (this["signature"]) {
            issues.push(...this.signature.doModelValidation(expression + '.signature'));
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
Bundle._fts_dataType = 'Bundle';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQnVuZGxlLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9CdW5kbGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsd0JBQXdCO0FBRXhCLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBSW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsb0JBQW9CLEVBQTRCLE1BQU0sMENBQTBDLENBQUM7QUFHMUcsYUFBYTtBQUNiLE9BQU8sRUFBRSxhQUFhLEVBQXFCLE1BQU0sbUNBQW1DLENBQUM7QUFHckYsYUFBYTtBQUNiLE9BQU8sRUFBRSxlQUFlLEVBQXVCLE1BQU0scUNBQXFDLENBQUM7QUF1QjNGOzs7O0dBSUc7QUFDSCxNQUFNLE9BQU8sVUFBVyxTQUFRLElBQUksQ0FBQyxlQUFlO0lBYWxEOztPQUVHO0lBQ0gsWUFBWSxTQUFpQyxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUN2RixLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLFFBQVEsRUFBQyxDQUFDLENBQUM7U0FBRTthQUNyRjtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDOUIsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLEVBQUU7WUFDdkIsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO2dCQUFFLElBQUksQ0FBQyxRQUFRLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLFNBQVUsQ0FBQyxDQUFDO2FBQUU7aUJBQ3pFO2dCQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxTQUF5QyxDQUFDLENB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Q0FBQyxVQUFVLEdBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtTQUFFO1FBQ3ZILElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsaUJBQWlCLENBQUMsVUFBVSxHQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7U0FBRTtRQUNyRyxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQXZHRDs7R0FFRztBQUM2QixvQkFBYSxHQUFVLFFBQVEsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNC5jb3JlIHZlcnNpb246IDQuMC4xXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogQnVuZGxlXHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBTZWFyY2hFbnRyeU1vZGVDb2RpbmdzLCBTZWFyY2hFbnRyeU1vZGVDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9TZWFyY2hFbnRyeU1vZGVDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBTZWFyY2hFbnRyeU1vZGVDb2RlcywgIFNlYXJjaEVudHJ5TW9kZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9TZWFyY2hFbnRyeU1vZGVDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgSHR0cFZlcmJDb2RpbmdzLCBIdHRwVmVyYkNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0h0dHBWZXJiQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgSHR0cFZlcmJDb2RlcywgIEh0dHBWZXJiQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0h0dHBWZXJiQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEJ1bmRsZVR5cGVDb2RpbmdzLCBCdW5kbGVUeXBlQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQnVuZGxlVHlwZUNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEJ1bmRsZVR5cGVDb2RlcywgIEJ1bmRsZVR5cGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQnVuZGxlVHlwZUNvZGVzLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEJ1bmRsZUxpbmsgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQnVuZGxlTGlua0FyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEEgbmFtZSB3aGljaCBkZXRhaWxzIHRoZSBmdW5jdGlvbmFsIHVzZSBmb3IgdGhpcyBsaW5rIC0gc2VlIFtodHRwOi8vd3d3LmlhbmEub3JnL2Fzc2lnbm1lbnRzL2xpbmstcmVsYXRpb25zL2xpbmstcmVsYXRpb25zLnhodG1sI2xpbmstcmVsYXRpb25zLTFdKGh0dHA6Ly93d3cuaWFuYS5vcmcvYXNzaWdubWVudHMvbGluay1yZWxhdGlvbnMvbGluay1yZWxhdGlvbnMueGh0bWwjbGluay1yZWxhdGlvbnMtMSkuXHJcbiAgICovXHJcbiAgcmVsYXRpb246IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUubGluay5yZWxhdGlvblxyXG4gICAqL1xyXG4gIF9yZWxhdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlZmVyZW5jZSBkZXRhaWxzIGZvciB0aGUgbGluay5cclxuICAgKi9cclxuICB1cmw6IGZoaXIuRmhpclVyaXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUubGluay51cmxcclxuICAgKi9cclxuICBfdXJsPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIEJvdGggQnVuZGxlLmxpbmsgYW5kIEJ1bmRsZS5lbnRyeS5saW5rIGFyZSBkZWZpbmVkIHRvIHN1cHBvcnQgcHJvdmlkaW5nIGFkZGl0aW9uYWwgY29udGV4dCB3aGVuIEJ1bmRsZXMgYXJlIHVzZWQgKGUuZy4gW0hBVEVPQVNdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSEFURU9BUykpLiBcclxuICogQnVuZGxlLmVudHJ5LmxpbmsgY29ycmVzcG9uZHMgdG8gbGlua3MgZm91bmQgaW4gdGhlIEhUVFAgaGVhZGVyIGlmIHRoZSByZXNvdXJjZSBpbiB0aGUgZW50cnkgd2FzIFtyZWFkXShodHRwLmh0bWwjcmVhZCkgZGlyZWN0bHkuXHJcbiAqIFRoaXMgc3BlY2lmaWNhdGlvbiBkZWZpbmVzIHNvbWUgc3BlY2lmaWMgdXNlcyBvZiBCdW5kbGUubGluayBmb3IgW3NlYXJjaGluZ10oc2VhcmNoLmh0bWwjY29uZm9ybWFuY2UpIGFuZCBbcGFnaW5nXShodHRwLmh0bWwjcGFnaW5nKSwgYnV0IG5vIHNwZWNpZmljIHVzZXMgZm9yIEJ1bmRsZS5lbnRyeS5saW5rLCBhbmQgbm8gZGVmaW5lZCBmdW5jdGlvbiBpbiBhIHRyYW5zYWN0aW9uIC0gdGhlIG1lYW5pbmcgaXMgaW1wbGVtZW50YXRpb24gc3BlY2lmaWMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQnVuZGxlTGluayBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0J1bmRsZUxpbmsnO1xyXG4gIC8qKlxyXG4gICAqIEEgbmFtZSB3aGljaCBkZXRhaWxzIHRoZSBmdW5jdGlvbmFsIHVzZSBmb3IgdGhpcyBsaW5rIC0gc2VlIFtodHRwOi8vd3d3LmlhbmEub3JnL2Fzc2lnbm1lbnRzL2xpbmstcmVsYXRpb25zL2xpbmstcmVsYXRpb25zLnhodG1sI2xpbmstcmVsYXRpb25zLTFdKGh0dHA6Ly93d3cuaWFuYS5vcmcvYXNzaWdubWVudHMvbGluay1yZWxhdGlvbnMvbGluay1yZWxhdGlvbnMueGh0bWwjbGluay1yZWxhdGlvbnMtMSkuXHJcbiAgICovXHJcbiAgcHVibGljIHJlbGF0aW9uOiBmaGlyLkZoaXJTdHJpbmd8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgcmVmZXJlbmNlIGRldGFpbHMgZm9yIHRoZSBsaW5rLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB1cmw6IGZoaXIuRmhpclVyaXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEJ1bmRsZUxpbmsgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxCdW5kbGVMaW5rQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3JlbGF0aW9uJ10pIHsgdGhpcy5yZWxhdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UucmVsYXRpb259KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVsYXRpb24gPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfcmVsYXRpb24nXSkge1xyXG4gICAgICBpZiAodGhpcy5yZWxhdGlvbikgeyB0aGlzLnJlbGF0aW9uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3JlbGF0aW9uISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMucmVsYXRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fcmVsYXRpb24gYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3VybCddKSB7IHRoaXMudXJsID0gbmV3IGZoaXIuRmhpclVyaSh7dmFsdWU6IHNvdXJjZS51cmx9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudXJsID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3VybCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnVybCkgeyB0aGlzLnVybC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl91cmwhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy51cmwgPSBuZXcgZmhpci5GaGlyVXJpKHNvdXJjZS5fdXJsIGFzIFBhcnRpYWw8Zmhpci5GaGlyVXJpQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKTtcclxuICAgIGlmIChleHByZXNzaW9uID09PSAnJykgeyBleHByZXNzaW9uID0gJ0J1bmRsZS5saW5rJyB9XHJcbiAgICBpZiAoIXRoaXNbJ3JlbGF0aW9uJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHJlbGF0aW9uIGZoaXI6IEJ1bmRsZS5saW5rLnJlbGF0aW9uOnN0cmluZycsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wicmVsYXRpb25cIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5yZWxhdGlvbi5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycucmVsYXRpb24nKSk7IH1cclxuICAgIGlmICghdGhpc1sndXJsJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHVybCBmaGlyOiBCdW5kbGUubGluay51cmw6dXJpJywgZXhwcmVzc2lvbjogW2V4cHJlc3Npb25dIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJ1cmxcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy51cmwuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLnVybCcpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEJ1bmRsZUVudHJ5U2VhcmNoIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEJ1bmRsZUVudHJ5U2VhcmNoQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlcmUgaXMgb25seSBvbmUgbW9kZS4gSW4gc29tZSBjb3JuZXIgY2FzZXMsIGEgcmVzb3VyY2UgbWF5IGJlIGluY2x1ZGVkIGJlY2F1c2UgaXQgaXMgYm90aCBhIG1hdGNoIGFuZCBhbiBpbmNsdWRlLiBJbiB0aGVzZSBjaXJjdW1zdGFuY2VzLCAnbWF0Y2gnIHRha2VzIHByZWNlZGVuY2UuXHJcbiAgICovXHJcbiAgbW9kZT86IGZoaXIuRmhpckNvZGU8U2VhcmNoRW50cnlNb2RlQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEJ1bmRsZS5lbnRyeS5zZWFyY2gubW9kZVxyXG4gICAqL1xyXG4gIF9tb2RlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBTZXJ2ZXJzIGFyZSBub3QgcmVxdWlyZWQgdG8gcmV0dXJuIGEgcmFua2luZyBzY29yZS4gMSBpcyBtb3N0IHJlbGV2YW50LCBhbmQgMCBpcyBsZWFzdCByZWxldmFudC4gT2Z0ZW4sIHNlYXJjaCByZXN1bHRzIGFyZSBzb3J0ZWQgYnkgc2NvcmUsIGJ1dCB0aGUgY2xpZW50IG1heSBzcGVjaWZ5IGEgZGlmZmVyZW50IHNvcnQgb3JkZXIuXHJcbiAgICogU2VlIFtQYXRpZW50IE1hdGNoXShwYXRpZW50LW9wZXJhdGlvbi1tYXRjaC5odG1sKSBmb3IgdGhlIEVNUEkgc2VhcmNoIHdoaWNoIHJlbGF0ZXMgdG8gdGhpcyBlbGVtZW50LlxyXG4gICAqL1xyXG4gIHNjb3JlPzogZmhpci5GaGlyRGVjaW1hbHxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUuZW50cnkuc2VhcmNoLnNjb3JlXHJcbiAgICovXHJcbiAgX3Njb3JlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIEluZm9ybWF0aW9uIGFib3V0IHRoZSBzZWFyY2ggcHJvY2VzcyB0aGF0IGxlYWQgdG8gdGhlIGNyZWF0aW9uIG9mIHRoaXMgZW50cnkuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQnVuZGxlRW50cnlTZWFyY2ggZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdCdW5kbGVFbnRyeVNlYXJjaCc7XHJcbiAgLyoqXHJcbiAgICogVGhlcmUgaXMgb25seSBvbmUgbW9kZS4gSW4gc29tZSBjb3JuZXIgY2FzZXMsIGEgcmVzb3VyY2UgbWF5IGJlIGluY2x1ZGVkIGJlY2F1c2UgaXQgaXMgYm90aCBhIG1hdGNoIGFuZCBhbiBpbmNsdWRlLiBJbiB0aGVzZSBjaXJjdW1zdGFuY2VzLCAnbWF0Y2gnIHRha2VzIHByZWNlZGVuY2UuXHJcbiAgICovXHJcbiAgcHVibGljIG1vZGU/OiBmaGlyLkZoaXJDb2RlPFNlYXJjaEVudHJ5TW9kZUNvZGVUeXBlPnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU2VydmVycyBhcmUgbm90IHJlcXVpcmVkIHRvIHJldHVybiBhIHJhbmtpbmcgc2NvcmUuIDEgaXMgbW9zdCByZWxldmFudCwgYW5kIDAgaXMgbGVhc3QgcmVsZXZhbnQuIE9mdGVuLCBzZWFyY2ggcmVzdWx0cyBhcmUgc29ydGVkIGJ5IHNjb3JlLCBidXQgdGhlIGNsaWVudCBtYXkgc3BlY2lmeSBhIGRpZmZlcmVudCBzb3J0IG9yZGVyLlxyXG4gICAqIFNlZSBbUGF0aWVudCBNYXRjaF0ocGF0aWVudC1vcGVyYXRpb24tbWF0Y2guaHRtbCkgZm9yIHRoZSBFTVBJIHNlYXJjaCB3aGljaCByZWxhdGVzIHRvIHRoaXMgZWxlbWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgc2NvcmU/OiBmaGlyLkZoaXJEZWNpbWFsfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBCdW5kbGVFbnRyeVNlYXJjaCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEJ1bmRsZUVudHJ5U2VhcmNoQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ21vZGUnXSkgeyB0aGlzLm1vZGUgPSBuZXcgZmhpci5GaGlyQ29kZTxTZWFyY2hFbnRyeU1vZGVDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2UubW9kZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfbW9kZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLm1vZGUpIHsgdGhpcy5tb2RlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX21vZGUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5tb2RlID0gbmV3IGZoaXIuRmhpckNvZGU8U2VhcmNoRW50cnlNb2RlQ29kZVR5cGU+KHNvdXJjZS5fbW9kZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2NvcmUnXSkgeyB0aGlzLnNjb3JlID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoe3ZhbHVlOiBzb3VyY2Uuc2NvcmV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3Njb3JlJ10pIHtcclxuICAgICAgaWYgKHRoaXMuc2NvcmUpIHsgdGhpcy5zY29yZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zY29yZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnNjb3JlID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoc291cmNlLl9zY29yZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckRlY2ltYWxBcmdzPik7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZWQtYm91bmQgVmFsdWUgU2V0IGZvciBtb2RlIChCdW5kbGUuZW50cnkuc2VhcmNoLm1vZGUpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgbW9kZVJlcXVpcmVkQ29kZXMoKSB7XHJcbiAgICByZXR1cm4gU2VhcmNoRW50cnlNb2RlQ29kZXM7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKTtcclxuICAgIGlmIChleHByZXNzaW9uID09PSAnJykgeyBleHByZXNzaW9uID0gJ0J1bmRsZS5lbnRyeS5zZWFyY2gnIH1cclxuICAgIGlmICh0aGlzWydtb2RlJ10gJiYgKCFPYmplY3QudmFsdWVzKFNlYXJjaEVudHJ5TW9kZUNvZGVzKS5pbmNsdWRlcyh0aGlzLm1vZGUudmFsdWUgYXMgYW55KSkpIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ2NvZGUtaW52YWxpZCcsIGRpYWdub3N0aWNzOiAnbW9kZSAoQnVuZGxlLmVudHJ5LnNlYXJjaC5tb2RlKSBvZiB0eXBlIGNvZGUgaXMgbWlzc2luZyBjb2RlIGZvciBSZXF1aXJlZCBiaW5kaW5nIHRvOiBTZWFyY2hFbnRyeU1vZGUnLCBleHByZXNzaW9uOiBbZXhwcmVzc2lvbl0gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcIm1vZGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5tb2RlLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5tb2RlJykpOyB9XHJcbiAgICBpZiAodGhpc1tcInNjb3JlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc2NvcmUuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLnNjb3JlJykpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQnVuZGxlRW50cnlSZXF1ZXN0IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEJ1bmRsZUVudHJ5UmVxdWVzdEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEluIGEgdHJhbnNhY3Rpb24gb3IgYmF0Y2gsIHRoaXMgaXMgdGhlIEhUVFAgYWN0aW9uIHRvIGJlIGV4ZWN1dGVkIGZvciB0aGlzIGVudHJ5LiBJbiBhIGhpc3RvcnkgYnVuZGxlLCB0aGlzIGluZGljYXRlcyB0aGUgSFRUUCBhY3Rpb24gdGhhdCBvY2N1cnJlZC5cclxuICAgKi9cclxuICBtZXRob2Q6IGZoaXIuRmhpckNvZGU8SHR0cFZlcmJDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLmVudHJ5LnJlcXVlc3QubWV0aG9kXHJcbiAgICovXHJcbiAgX21ldGhvZD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogRS5nLiBmb3IgYSBQYXRpZW50IENyZWF0ZSwgdGhlIG1ldGhvZCB3b3VsZCBiZSBcIlBPU1RcIiBhbmQgdGhlIFVSTCB3b3VsZCBiZSBcIlBhdGllbnRcIi4gRm9yIGEgUGF0aWVudCBVcGRhdGUsIHRoZSBtZXRob2Qgd291bGQgYmUgUFVUIGFuZCB0aGUgVVJMIHdvdWxkIGJlIFwiUGF0aWVudC9baWRdXCIuXHJcbiAgICovXHJcbiAgdXJsOiBmaGlyLkZoaXJVcml8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLmVudHJ5LnJlcXVlc3QudXJsXHJcbiAgICovXHJcbiAgX3VybD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhlIEVUYWcgdmFsdWVzIG1hdGNoLCByZXR1cm4gYSAzMDQgTm90IE1vZGlmaWVkIHN0YXR1cy4gU2VlIHRoZSBBUEkgZG9jdW1lbnRhdGlvbiBmb3IgW1wiQ29uZGl0aW9uYWwgUmVhZFwiXShodHRwLmh0bWwjY3JlYWQpLlxyXG4gICAqL1xyXG4gIGlmTm9uZU1hdGNoPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEJ1bmRsZS5lbnRyeS5yZXF1ZXN0LmlmTm9uZU1hdGNoXHJcbiAgICovXHJcbiAgX2lmTm9uZU1hdGNoPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBPbmx5IHBlcmZvcm0gdGhlIG9wZXJhdGlvbiBpZiB0aGUgbGFzdCB1cGRhdGVkIGRhdGUgbWF0Y2hlcy4gU2VlIHRoZSBBUEkgZG9jdW1lbnRhdGlvbiBmb3IgW1wiQ29uZGl0aW9uYWwgUmVhZFwiXShodHRwLmh0bWwjY3JlYWQpLlxyXG4gICAqL1xyXG4gIGlmTW9kaWZpZWRTaW5jZT86IGZoaXIuRmhpckluc3RhbnR8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLmVudHJ5LnJlcXVlc3QuaWZNb2RpZmllZFNpbmNlXHJcbiAgICovXHJcbiAgX2lmTW9kaWZpZWRTaW5jZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogT25seSBwZXJmb3JtIHRoZSBvcGVyYXRpb24gaWYgdGhlIEV0YWcgdmFsdWUgbWF0Y2hlcy4gRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZSB0aGUgQVBJIHNlY3Rpb24gW1wiTWFuYWdpbmcgUmVzb3VyY2UgQ29udGVudGlvblwiXShodHRwLmh0bWwjY29uY3VycmVuY3kpLlxyXG4gICAqL1xyXG4gIGlmTWF0Y2g/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLmVudHJ5LnJlcXVlc3QuaWZNYXRjaFxyXG4gICAqL1xyXG4gIF9pZk1hdGNoPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBJbnN0cnVjdCB0aGUgc2VydmVyIG5vdCB0byBwZXJmb3JtIHRoZSBjcmVhdGUgaWYgYSBzcGVjaWZpZWQgcmVzb3VyY2UgYWxyZWFkeSBleGlzdHMuIEZvciBmdXJ0aGVyIGluZm9ybWF0aW9uLCBzZWUgdGhlIEFQSSBkb2N1bWVudGF0aW9uIGZvciBbXCJDb25kaXRpb25hbCBDcmVhdGVcIl0oaHR0cC5odG1sI2NjcmVhdGUpLiBUaGlzIGlzIGp1c3QgdGhlIHF1ZXJ5IHBvcnRpb24gb2YgdGhlIFVSTCAtIHdoYXQgZm9sbG93cyB0aGUgXCI/XCIgKG5vdCBpbmNsdWRpbmcgdGhlIFwiP1wiKS5cclxuICAgKi9cclxuICBpZk5vbmVFeGlzdD86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUuZW50cnkucmVxdWVzdC5pZk5vbmVFeGlzdFxyXG4gICAqL1xyXG4gIF9pZk5vbmVFeGlzdD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBZGRpdGlvbmFsIGluZm9ybWF0aW9uIGFib3V0IGhvdyB0aGlzIGVudHJ5IHNob3VsZCBiZSBwcm9jZXNzZWQgYXMgcGFydCBvZiBhIHRyYW5zYWN0aW9uIG9yIGJhdGNoLiAgRm9yIGhpc3RvcnksIGl0IHNob3dzIGhvdyB0aGUgZW50cnkgd2FzIHByb2Nlc3NlZCB0byBjcmVhdGUgdGhlIHZlcnNpb24gY29udGFpbmVkIGluIHRoZSBlbnRyeS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBCdW5kbGVFbnRyeVJlcXVlc3QgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdCdW5kbGVFbnRyeVJlcXVlc3QnO1xyXG4gIC8qKlxyXG4gICAqIEluIGEgdHJhbnNhY3Rpb24gb3IgYmF0Y2gsIHRoaXMgaXMgdGhlIEhUVFAgYWN0aW9uIHRvIGJlIGV4ZWN1dGVkIGZvciB0aGlzIGVudHJ5LiBJbiBhIGhpc3RvcnkgYnVuZGxlLCB0aGlzIGluZGljYXRlcyB0aGUgSFRUUCBhY3Rpb24gdGhhdCBvY2N1cnJlZC5cclxuICAgKi9cclxuICBwdWJsaWMgbWV0aG9kOiBmaGlyLkZoaXJDb2RlPEh0dHBWZXJiQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogRS5nLiBmb3IgYSBQYXRpZW50IENyZWF0ZSwgdGhlIG1ldGhvZCB3b3VsZCBiZSBcIlBPU1RcIiBhbmQgdGhlIFVSTCB3b3VsZCBiZSBcIlBhdGllbnRcIi4gRm9yIGEgUGF0aWVudCBVcGRhdGUsIHRoZSBtZXRob2Qgd291bGQgYmUgUFVUIGFuZCB0aGUgVVJMIHdvdWxkIGJlIFwiUGF0aWVudC9baWRdXCIuXHJcbiAgICovXHJcbiAgcHVibGljIHVybDogZmhpci5GaGlyVXJpfG51bGw7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhlIEVUYWcgdmFsdWVzIG1hdGNoLCByZXR1cm4gYSAzMDQgTm90IE1vZGlmaWVkIHN0YXR1cy4gU2VlIHRoZSBBUEkgZG9jdW1lbnRhdGlvbiBmb3IgW1wiQ29uZGl0aW9uYWwgUmVhZFwiXShodHRwLmh0bWwjY3JlYWQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZk5vbmVNYXRjaD86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogT25seSBwZXJmb3JtIHRoZSBvcGVyYXRpb24gaWYgdGhlIGxhc3QgdXBkYXRlZCBkYXRlIG1hdGNoZXMuIFNlZSB0aGUgQVBJIGRvY3VtZW50YXRpb24gZm9yIFtcIkNvbmRpdGlvbmFsIFJlYWRcIl0oaHR0cC5odG1sI2NyZWFkKS5cclxuICAgKi9cclxuICBwdWJsaWMgaWZNb2RpZmllZFNpbmNlPzogZmhpci5GaGlySW5zdGFudHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogT25seSBwZXJmb3JtIHRoZSBvcGVyYXRpb24gaWYgdGhlIEV0YWcgdmFsdWUgbWF0Y2hlcy4gRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZSB0aGUgQVBJIHNlY3Rpb24gW1wiTWFuYWdpbmcgUmVzb3VyY2UgQ29udGVudGlvblwiXShodHRwLmh0bWwjY29uY3VycmVuY3kpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZk1hdGNoPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnN0cnVjdCB0aGUgc2VydmVyIG5vdCB0byBwZXJmb3JtIHRoZSBjcmVhdGUgaWYgYSBzcGVjaWZpZWQgcmVzb3VyY2UgYWxyZWFkeSBleGlzdHMuIEZvciBmdXJ0aGVyIGluZm9ybWF0aW9uLCBzZWUgdGhlIEFQSSBkb2N1bWVudGF0aW9uIGZvciBbXCJDb25kaXRpb25hbCBDcmVhdGVcIl0oaHR0cC5odG1sI2NjcmVhdGUpLiBUaGlzIGlzIGp1c3QgdGhlIHF1ZXJ5IHBvcnRpb24gb2YgdGhlIFVSTCAtIHdoYXQgZm9sbG93cyB0aGUgXCI/XCIgKG5vdCBpbmNsdWRpbmcgdGhlIFwiP1wiKS5cclxuICAgKi9cclxuICBwdWJsaWMgaWZOb25lRXhpc3Q/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEJ1bmRsZUVudHJ5UmVxdWVzdCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEJ1bmRsZUVudHJ5UmVxdWVzdEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydtZXRob2QnXSkgeyB0aGlzLm1ldGhvZCA9IG5ldyBmaGlyLkZoaXJDb2RlPEh0dHBWZXJiQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLm1ldGhvZH0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5tZXRob2QgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfbWV0aG9kJ10pIHtcclxuICAgICAgaWYgKHRoaXMubWV0aG9kKSB7IHRoaXMubWV0aG9kLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX21ldGhvZCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLm1ldGhvZCA9IG5ldyBmaGlyLkZoaXJDb2RlPEh0dHBWZXJiQ29kZVR5cGU+KHNvdXJjZS5fbWV0aG9kIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd1cmwnXSkgeyB0aGlzLnVybCA9IG5ldyBmaGlyLkZoaXJVcmkoe3ZhbHVlOiBzb3VyY2UudXJsfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnVybCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ191cmwnXSkge1xyXG4gICAgICBpZiAodGhpcy51cmwpIHsgdGhpcy51cmwuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdXJsISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudXJsID0gbmV3IGZoaXIuRmhpclVyaShzb3VyY2UuX3VybCBhcyBQYXJ0aWFsPGZoaXIuRmhpclVyaUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnaWZOb25lTWF0Y2gnXSkgeyB0aGlzLmlmTm9uZU1hdGNoID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5pZk5vbmVNYXRjaH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfaWZOb25lTWF0Y2gnXSkge1xyXG4gICAgICBpZiAodGhpcy5pZk5vbmVNYXRjaCkgeyB0aGlzLmlmTm9uZU1hdGNoLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2lmTm9uZU1hdGNoISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuaWZOb25lTWF0Y2ggPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5faWZOb25lTWF0Y2ggYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2lmTW9kaWZpZWRTaW5jZSddKSB7IHRoaXMuaWZNb2RpZmllZFNpbmNlID0gbmV3IGZoaXIuRmhpckluc3RhbnQoe3ZhbHVlOiBzb3VyY2UuaWZNb2RpZmllZFNpbmNlfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19pZk1vZGlmaWVkU2luY2UnXSkge1xyXG4gICAgICBpZiAodGhpcy5pZk1vZGlmaWVkU2luY2UpIHsgdGhpcy5pZk1vZGlmaWVkU2luY2UuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5faWZNb2RpZmllZFNpbmNlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuaWZNb2RpZmllZFNpbmNlID0gbmV3IGZoaXIuRmhpckluc3RhbnQoc291cmNlLl9pZk1vZGlmaWVkU2luY2UgYXMgUGFydGlhbDxmaGlyLkZoaXJJbnN0YW50QXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydpZk1hdGNoJ10pIHsgdGhpcy5pZk1hdGNoID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5pZk1hdGNofSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19pZk1hdGNoJ10pIHtcclxuICAgICAgaWYgKHRoaXMuaWZNYXRjaCkgeyB0aGlzLmlmTWF0Y2guYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5faWZNYXRjaCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmlmTWF0Y2ggPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5faWZNYXRjaCBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnaWZOb25lRXhpc3QnXSkgeyB0aGlzLmlmTm9uZUV4aXN0ID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5pZk5vbmVFeGlzdH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfaWZOb25lRXhpc3QnXSkge1xyXG4gICAgICBpZiAodGhpcy5pZk5vbmVFeGlzdCkgeyB0aGlzLmlmTm9uZUV4aXN0LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2lmTm9uZUV4aXN0ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuaWZOb25lRXhpc3QgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5faWZOb25lRXhpc3QgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZWQtYm91bmQgVmFsdWUgU2V0IGZvciBtZXRob2QgKEJ1bmRsZS5lbnRyeS5yZXF1ZXN0Lm1ldGhvZClcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCBtZXRob2RSZXF1aXJlZENvZGVzKCkge1xyXG4gICAgcmV0dXJuIEh0dHBWZXJiQ29kZXM7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKTtcclxuICAgIGlmIChleHByZXNzaW9uID09PSAnJykgeyBleHByZXNzaW9uID0gJ0J1bmRsZS5lbnRyeS5yZXF1ZXN0JyB9XHJcbiAgICBpZiAoIXRoaXNbJ21ldGhvZCddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBtZXRob2QgZmhpcjogQnVuZGxlLmVudHJ5LnJlcXVlc3QubWV0aG9kOmNvZGUnLCBleHByZXNzaW9uOiBbZXhwcmVzc2lvbl0gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1snbWV0aG9kJ10gJiYgKCFPYmplY3QudmFsdWVzKEh0dHBWZXJiQ29kZXMpLmluY2x1ZGVzKHRoaXMubWV0aG9kLnZhbHVlIGFzIGFueSkpKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdjb2RlLWludmFsaWQnLCBkaWFnbm9zdGljczogJ21ldGhvZCAoQnVuZGxlLmVudHJ5LnJlcXVlc3QubWV0aG9kKSBvZiB0eXBlIGNvZGUgaXMgbWlzc2luZyBjb2RlIGZvciBSZXF1aXJlZCBiaW5kaW5nIHRvOiBIdHRwVmVyYicsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wibWV0aG9kXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMubWV0aG9kLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5tZXRob2QnKSk7IH1cclxuICAgIGlmICghdGhpc1sndXJsJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHVybCBmaGlyOiBCdW5kbGUuZW50cnkucmVxdWVzdC51cmw6dXJpJywgZXhwcmVzc2lvbjogW2V4cHJlc3Npb25dIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJ1cmxcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy51cmwuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLnVybCcpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJpZk5vbmVNYXRjaFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmlmTm9uZU1hdGNoLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5pZk5vbmVNYXRjaCcpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJpZk1vZGlmaWVkU2luY2VcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5pZk1vZGlmaWVkU2luY2UuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLmlmTW9kaWZpZWRTaW5jZScpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJpZk1hdGNoXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuaWZNYXRjaC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuaWZNYXRjaCcpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJpZk5vbmVFeGlzdFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmlmTm9uZUV4aXN0LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5pZk5vbmVFeGlzdCcpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEJ1bmRsZUVudHJ5UmVzcG9uc2UgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQnVuZGxlRW50cnlSZXNwb25zZUFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzdGF0dXMgY29kZSByZXR1cm5lZCBieSBwcm9jZXNzaW5nIHRoaXMgZW50cnkuIFRoZSBzdGF0dXMgU0hBTEwgc3RhcnQgd2l0aCBhIDMgZGlnaXQgSFRUUCBjb2RlIChlLmcuIDQwNCkgYW5kIG1heSBjb250YWluIHRoZSBzdGFuZGFyZCBIVFRQIGRlc2NyaXB0aW9uIGFzc29jaWF0ZWQgd2l0aCB0aGUgc3RhdHVzIGNvZGUuXHJcbiAgICovXHJcbiAgc3RhdHVzOiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLmVudHJ5LnJlc3BvbnNlLnN0YXR1c1xyXG4gICAqL1xyXG4gIF9zdGF0dXM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsb2NhdGlvbiBoZWFkZXIgY3JlYXRlZCBieSBwcm9jZXNzaW5nIHRoaXMgb3BlcmF0aW9uLCBwb3B1bGF0ZWQgaWYgdGhlIG9wZXJhdGlvbiByZXR1cm5zIGEgbG9jYXRpb24uXHJcbiAgICovXHJcbiAgbG9jYXRpb24/OiBmaGlyLkZoaXJVcml8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLmVudHJ5LnJlc3BvbnNlLmxvY2F0aW9uXHJcbiAgICovXHJcbiAgX2xvY2F0aW9uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBFdGFncyBtYXRjaCB0aGUgUmVzb3VyY2UubWV0YS52ZXJzaW9uSWQuIFRoZSBFVGFnIGhhcyB0byBtYXRjaCB0aGUgdmVyc2lvbiBpZCBpbiB0aGUgaGVhZGVyIGlmIGEgcmVzb3VyY2UgaXMgaW5jbHVkZWQuXHJcbiAgICovXHJcbiAgZXRhZz86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUuZW50cnkucmVzcG9uc2UuZXRhZ1xyXG4gICAqL1xyXG4gIF9ldGFnPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGlzIGhhcyB0byBtYXRjaCB0aGUgc2FtZSB0aW1lIGluIHRoZSBtZXRhIGhlYWRlciAobWV0YS5sYXN0VXBkYXRlZCkgaWYgYSByZXNvdXJjZSBpcyBpbmNsdWRlZC5cclxuICAgKi9cclxuICBsYXN0TW9kaWZpZWQ/OiBmaGlyLkZoaXJJbnN0YW50fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEJ1bmRsZS5lbnRyeS5yZXNwb25zZS5sYXN0TW9kaWZpZWRcclxuICAgKi9cclxuICBfbGFzdE1vZGlmaWVkPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBGb3IgYSBQT1NUL1BVVCBvcGVyYXRpb24sIHRoaXMgaXMgdGhlIGVxdWl2YWxlbnQgb3V0Y29tZSB0aGF0IHdvdWxkIGJlIHJldHVybmVkIGZvciBwcmVmZXIgPSBvcGVyYXRpb25vdXRjb21lIC0gZXhjZXB0IHRoYXQgdGhlIHJlc291cmNlIGlzIGFsd2F5cyByZXR1cm5lZCB3aGV0aGVyIG9yIG5vdCB0aGUgb3V0Y29tZSBpcyByZXR1cm5lZC5cclxuICAgKiBUaGlzIG91dGNvbWUgaXMgbm90IHVzZWQgZm9yIGVycm9yIHJlc3BvbnNlcyBpbiBiYXRjaC90cmFuc2FjdGlvbiwgb25seSBmb3IgaGludHMgYW5kIHdhcm5pbmdzLiBJbiBhIGJhdGNoIG9wZXJhdGlvbiwgdGhlIGVycm9yIHdpbGwgYmUgaW4gQnVuZGxlLmVudHJ5LnJlc3BvbnNlLCBhbmQgZm9yIHRyYW5zYWN0aW9uLCB0aGVyZSB3aWxsIGJlIGEgc2luZ2xlIE9wZXJhdGlvbk91dGNvbWUgaW5zdGVhZCBvZiBhIGJ1bmRsZSBpbiB0aGUgY2FzZSBvZiBhbiBlcnJvci5cclxuICAgKi9cclxuICBvdXRjb21lPzogZmhpci5SZXNvdXJjZUFyZ3N8YW55fHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEluZGljYXRlcyB0aGUgcmVzdWx0cyBvZiBwcm9jZXNzaW5nIHRoZSBjb3JyZXNwb25kaW5nICdyZXF1ZXN0JyBlbnRyeSBpbiB0aGUgYmF0Y2ggb3IgdHJhbnNhY3Rpb24gYmVpbmcgcmVzcG9uZGVkIHRvIG9yIHdoYXQgdGhlIHJlc3VsdHMgb2YgYW4gb3BlcmF0aW9uIHdoZXJlIHdoZW4gcmV0dXJuaW5nIGhpc3RvcnkuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQnVuZGxlRW50cnlSZXNwb25zZSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0J1bmRsZUVudHJ5UmVzcG9uc2UnO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzdGF0dXMgY29kZSByZXR1cm5lZCBieSBwcm9jZXNzaW5nIHRoaXMgZW50cnkuIFRoZSBzdGF0dXMgU0hBTEwgc3RhcnQgd2l0aCBhIDMgZGlnaXQgSFRUUCBjb2RlIChlLmcuIDQwNCkgYW5kIG1heSBjb250YWluIHRoZSBzdGFuZGFyZCBIVFRQIGRlc2NyaXB0aW9uIGFzc29jaWF0ZWQgd2l0aCB0aGUgc3RhdHVzIGNvZGUuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1czogZmhpci5GaGlyU3RyaW5nfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGxvY2F0aW9uIGhlYWRlciBjcmVhdGVkIGJ5IHByb2Nlc3NpbmcgdGhpcyBvcGVyYXRpb24sIHBvcHVsYXRlZCBpZiB0aGUgb3BlcmF0aW9uIHJldHVybnMgYSBsb2NhdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgbG9jYXRpb24/OiBmaGlyLkZoaXJVcml8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV0YWdzIG1hdGNoIHRoZSBSZXNvdXJjZS5tZXRhLnZlcnNpb25JZC4gVGhlIEVUYWcgaGFzIHRvIG1hdGNoIHRoZSB2ZXJzaW9uIGlkIGluIHRoZSBoZWFkZXIgaWYgYSByZXNvdXJjZSBpcyBpbmNsdWRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgZXRhZz86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBoYXMgdG8gbWF0Y2ggdGhlIHNhbWUgdGltZSBpbiB0aGUgbWV0YSBoZWFkZXIgKG1ldGEubGFzdFVwZGF0ZWQpIGlmIGEgcmVzb3VyY2UgaXMgaW5jbHVkZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGxhc3RNb2RpZmllZD86IGZoaXIuRmhpckluc3RhbnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEZvciBhIFBPU1QvUFVUIG9wZXJhdGlvbiwgdGhpcyBpcyB0aGUgZXF1aXZhbGVudCBvdXRjb21lIHRoYXQgd291bGQgYmUgcmV0dXJuZWQgZm9yIHByZWZlciA9IG9wZXJhdGlvbm91dGNvbWUgLSBleGNlcHQgdGhhdCB0aGUgcmVzb3VyY2UgaXMgYWx3YXlzIHJldHVybmVkIHdoZXRoZXIgb3Igbm90IHRoZSBvdXRjb21lIGlzIHJldHVybmVkLlxyXG4gICAqIFRoaXMgb3V0Y29tZSBpcyBub3QgdXNlZCBmb3IgZXJyb3IgcmVzcG9uc2VzIGluIGJhdGNoL3RyYW5zYWN0aW9uLCBvbmx5IGZvciBoaW50cyBhbmQgd2FybmluZ3MuIEluIGEgYmF0Y2ggb3BlcmF0aW9uLCB0aGUgZXJyb3Igd2lsbCBiZSBpbiBCdW5kbGUuZW50cnkucmVzcG9uc2UsIGFuZCBmb3IgdHJhbnNhY3Rpb24sIHRoZXJlIHdpbGwgYmUgYSBzaW5nbGUgT3BlcmF0aW9uT3V0Y29tZSBpbnN0ZWFkIG9mIGEgYnVuZGxlIGluIHRoZSBjYXNlIG9mIGFuIGVycm9yLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdXRjb21lPzogZmhpci5GaGlyUmVzb3VyY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEJ1bmRsZUVudHJ5UmVzcG9uc2UgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxCdW5kbGVFbnRyeVJlc3BvbnNlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3N0YXR1cyddKSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5zdGF0dXN9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3N0YXR1cyddKSB7XHJcbiAgICAgIGlmICh0aGlzLnN0YXR1cykgeyB0aGlzLnN0YXR1cy5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zdGF0dXMhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fc3RhdHVzIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydsb2NhdGlvbiddKSB7IHRoaXMubG9jYXRpb24gPSBuZXcgZmhpci5GaGlyVXJpKHt2YWx1ZTogc291cmNlLmxvY2F0aW9ufSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19sb2NhdGlvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLmxvY2F0aW9uKSB7IHRoaXMubG9jYXRpb24uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbG9jYXRpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5sb2NhdGlvbiA9IG5ldyBmaGlyLkZoaXJVcmkoc291cmNlLl9sb2NhdGlvbiBhcyBQYXJ0aWFsPGZoaXIuRmhpclVyaUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnZXRhZyddKSB7IHRoaXMuZXRhZyA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuZXRhZ30pOyB9XHJcbiAgICBpZiAoc291cmNlWydfZXRhZyddKSB7XHJcbiAgICAgIGlmICh0aGlzLmV0YWcpIHsgdGhpcy5ldGFnLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2V0YWchKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5ldGFnID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2V0YWcgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2xhc3RNb2RpZmllZCddKSB7IHRoaXMubGFzdE1vZGlmaWVkID0gbmV3IGZoaXIuRmhpckluc3RhbnQoe3ZhbHVlOiBzb3VyY2UubGFzdE1vZGlmaWVkfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19sYXN0TW9kaWZpZWQnXSkge1xyXG4gICAgICBpZiAodGhpcy5sYXN0TW9kaWZpZWQpIHsgdGhpcy5sYXN0TW9kaWZpZWQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbGFzdE1vZGlmaWVkISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubGFzdE1vZGlmaWVkID0gbmV3IGZoaXIuRmhpckluc3RhbnQoc291cmNlLl9sYXN0TW9kaWZpZWQgYXMgUGFydGlhbDxmaGlyLkZoaXJJbnN0YW50QXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydvdXRjb21lJ10pIHsgdGhpcy5vdXRjb21lID0gKGZoaXIucmVzb3VyY2VGYWN0b3J5KHNvdXJjZS5vdXRjb21lKSA/PyB1bmRlZmluZWQpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKTtcclxuICAgIGlmIChleHByZXNzaW9uID09PSAnJykgeyBleHByZXNzaW9uID0gJ0J1bmRsZS5lbnRyeS5yZXNwb25zZScgfVxyXG4gICAgaWYgKCF0aGlzWydzdGF0dXMnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgc3RhdHVzIGZoaXI6IEJ1bmRsZS5lbnRyeS5yZXNwb25zZS5zdGF0dXM6c3RyaW5nJywgZXhwcmVzc2lvbjogW2V4cHJlc3Npb25dIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJzdGF0dXNcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5zdGF0dXMuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLnN0YXR1cycpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJsb2NhdGlvblwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmxvY2F0aW9uLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5sb2NhdGlvbicpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJldGFnXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZXRhZy5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuZXRhZycpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJsYXN0TW9kaWZpZWRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5sYXN0TW9kaWZpZWQuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLmxhc3RNb2RpZmllZCcpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJvdXRjb21lXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMub3V0Y29tZS5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycub3V0Y29tZScpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEJ1bmRsZUVudHJ5IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEJ1bmRsZUVudHJ5QXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogQSBzZXJpZXMgb2YgbGlua3MgdGhhdCBwcm92aWRlIGNvbnRleHQgdG8gdGhpcyBlbnRyeS5cclxuICAgKi9cclxuICBsaW5rPzogZmhpci5CdW5kbGVMaW5rQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBmdWxsVXJsIG1pZ2h0IG5vdCBiZSBbdW5pcXVlIGluIHRoZSBjb250ZXh0IG9mIGEgcmVzb3VyY2VdKGJ1bmRsZS5odG1sI2J1bmRsZS11bmlxdWUpLiBOb3RlIHRoYXQgc2luY2UgW0ZISVIgcmVzb3VyY2VzIGRvIG5vdCBuZWVkIHRvIGJlIHNlcnZlZCB0aHJvdWdoIHRoZSBGSElSIEFQSV0ocmVmZXJlbmNlcy5odG1sKSwgdGhlIGZ1bGxVUkwgbWlnaHQgYmUgYSBVUk4gb3IgYW4gYWJzb2x1dGUgVVJMIHRoYXQgZG9lcyBub3QgZW5kIHdpdGggdGhlIGxvZ2ljYWwgaWQgb2YgdGhlIHJlc291cmNlIChSZXNvdXJjZS5pZCkuIEhvd2V2ZXIsIGJ1dCBpZiB0aGUgZnVsbFVybCBkb2VzIGxvb2sgbGlrZSBhIFJFU1RmdWwgc2VydmVyIFVSTCAoZS5nLiBtZWV0cyB0aGUgW3JlZ2V4XShyZWZlcmVuY2VzLmh0bWwjcmVnZXgpLCB0aGVuIHRoZSAnaWQnIHBvcnRpb24gb2YgdGhlIGZ1bGxVcmwgU0hBTEwgZW5kIHdpdGggdGhlIFJlc291cmNlLmlkLlxyXG4gICAqIE5vdGUgdGhhdCB0aGUgZnVsbFVybCBpcyBub3QgdGhlIHNhbWUgYXMgdGhlIGNhbm9uaWNhbCBVUkwgLSBpdCdzIGFuIGFic29sdXRlIHVybCBmb3IgYW4gZW5kcG9pbnQgc2VydmluZyB0aGUgcmVzb3VyY2UgKHRoZXNlIHdpbGwgaGFwcGVuIHRvIGhhdmUgdGhlIHNhbWUgdmFsdWUgb24gdGhlIGNhbm9uaWNhbCBzZXJ2ZXIgZm9yIHRoZSByZXNvdXJjZSB3aXRoIHRoZSBjYW5vbmljYWwgVVJMKS5cclxuICAgKi9cclxuICBmdWxsVXJsPzogZmhpci5GaGlyVXJpfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEJ1bmRsZS5lbnRyeS5mdWxsVXJsXHJcbiAgICovXHJcbiAgX2Z1bGxVcmw/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBSZXNvdXJjZSBmb3IgdGhlIGVudHJ5LiBUaGUgcHVycG9zZS9tZWFuaW5nIG9mIHRoZSByZXNvdXJjZSBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBCdW5kbGUudHlwZS5cclxuICAgKi9cclxuICByZXNvdXJjZT86IGZoaXIuUmVzb3VyY2VBcmdzfGFueXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5mb3JtYXRpb24gYWJvdXQgdGhlIHNlYXJjaCBwcm9jZXNzIHRoYXQgbGVhZCB0byB0aGUgY3JlYXRpb24gb2YgdGhpcyBlbnRyeS5cclxuICAgKi9cclxuICBzZWFyY2g/OiBmaGlyLkJ1bmRsZUVudHJ5U2VhcmNoQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWRkaXRpb25hbCBpbmZvcm1hdGlvbiBhYm91dCBob3cgdGhpcyBlbnRyeSBzaG91bGQgYmUgcHJvY2Vzc2VkIGFzIHBhcnQgb2YgYSB0cmFuc2FjdGlvbiBvciBiYXRjaC4gIEZvciBoaXN0b3J5LCBpdCBzaG93cyBob3cgdGhlIGVudHJ5IHdhcyBwcm9jZXNzZWQgdG8gY3JlYXRlIHRoZSB2ZXJzaW9uIGNvbnRhaW5lZCBpbiB0aGUgZW50cnkuXHJcbiAgICovXHJcbiAgcmVxdWVzdD86IGZoaXIuQnVuZGxlRW50cnlSZXF1ZXN0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHRoZSByZXN1bHRzIG9mIHByb2Nlc3NpbmcgdGhlIGNvcnJlc3BvbmRpbmcgJ3JlcXVlc3QnIGVudHJ5IGluIHRoZSBiYXRjaCBvciB0cmFuc2FjdGlvbiBiZWluZyByZXNwb25kZWQgdG8gb3Igd2hhdCB0aGUgcmVzdWx0cyBvZiBhbiBvcGVyYXRpb24gd2hlcmUgd2hlbiByZXR1cm5pbmcgaGlzdG9yeS5cclxuICAgKi9cclxuICByZXNwb25zZT86IGZoaXIuQnVuZGxlRW50cnlSZXNwb25zZUFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQW4gZW50cnkgaW4gYSBidW5kbGUgcmVzb3VyY2UgLSB3aWxsIGVpdGhlciBjb250YWluIGEgcmVzb3VyY2Ugb3IgaW5mb3JtYXRpb24gYWJvdXQgYSByZXNvdXJjZSAodHJhbnNhY3Rpb25zIGFuZCBoaXN0b3J5IG9ubHkpLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJ1bmRsZUVudHJ5IGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQnVuZGxlRW50cnknO1xyXG4gIC8qKlxyXG4gICAqIEEgc2VyaWVzIG9mIGxpbmtzIHRoYXQgcHJvdmlkZSBjb250ZXh0IHRvIHRoaXMgZW50cnkuXHJcbiAgICovXHJcbiAgcHVibGljIGxpbms6IGZoaXIuQnVuZGxlTGlua1tdO1xyXG4gIC8qKlxyXG4gICAqIGZ1bGxVcmwgbWlnaHQgbm90IGJlIFt1bmlxdWUgaW4gdGhlIGNvbnRleHQgb2YgYSByZXNvdXJjZV0oYnVuZGxlLmh0bWwjYnVuZGxlLXVuaXF1ZSkuIE5vdGUgdGhhdCBzaW5jZSBbRkhJUiByZXNvdXJjZXMgZG8gbm90IG5lZWQgdG8gYmUgc2VydmVkIHRocm91Z2ggdGhlIEZISVIgQVBJXShyZWZlcmVuY2VzLmh0bWwpLCB0aGUgZnVsbFVSTCBtaWdodCBiZSBhIFVSTiBvciBhbiBhYnNvbHV0ZSBVUkwgdGhhdCBkb2VzIG5vdCBlbmQgd2l0aCB0aGUgbG9naWNhbCBpZCBvZiB0aGUgcmVzb3VyY2UgKFJlc291cmNlLmlkKS4gSG93ZXZlciwgYnV0IGlmIHRoZSBmdWxsVXJsIGRvZXMgbG9vayBsaWtlIGEgUkVTVGZ1bCBzZXJ2ZXIgVVJMIChlLmcuIG1lZXRzIHRoZSBbcmVnZXhdKHJlZmVyZW5jZXMuaHRtbCNyZWdleCksIHRoZW4gdGhlICdpZCcgcG9ydGlvbiBvZiB0aGUgZnVsbFVybCBTSEFMTCBlbmQgd2l0aCB0aGUgUmVzb3VyY2UuaWQuXHJcbiAgICogTm90ZSB0aGF0IHRoZSBmdWxsVXJsIGlzIG5vdCB0aGUgc2FtZSBhcyB0aGUgY2Fub25pY2FsIFVSTCAtIGl0J3MgYW4gYWJzb2x1dGUgdXJsIGZvciBhbiBlbmRwb2ludCBzZXJ2aW5nIHRoZSByZXNvdXJjZSAodGhlc2Ugd2lsbCBoYXBwZW4gdG8gaGF2ZSB0aGUgc2FtZSB2YWx1ZSBvbiB0aGUgY2Fub25pY2FsIHNlcnZlciBmb3IgdGhlIHJlc291cmNlIHdpdGggdGhlIGNhbm9uaWNhbCBVUkwpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBmdWxsVXJsPzogZmhpci5GaGlyVXJpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgUmVzb3VyY2UgZm9yIHRoZSBlbnRyeS4gVGhlIHB1cnBvc2UvbWVhbmluZyBvZiB0aGUgcmVzb3VyY2UgaXMgZGV0ZXJtaW5lZCBieSB0aGUgQnVuZGxlLnR5cGUuXHJcbiAgICovXHJcbiAgcHVibGljIHJlc291cmNlPzogZmhpci5GaGlyUmVzb3VyY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZm9ybWF0aW9uIGFib3V0IHRoZSBzZWFyY2ggcHJvY2VzcyB0aGF0IGxlYWQgdG8gdGhlIGNyZWF0aW9uIG9mIHRoaXMgZW50cnkuXHJcbiAgICovXHJcbiAgcHVibGljIHNlYXJjaD86IGZoaXIuQnVuZGxlRW50cnlTZWFyY2h8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFkZGl0aW9uYWwgaW5mb3JtYXRpb24gYWJvdXQgaG93IHRoaXMgZW50cnkgc2hvdWxkIGJlIHByb2Nlc3NlZCBhcyBwYXJ0IG9mIGEgdHJhbnNhY3Rpb24gb3IgYmF0Y2guICBGb3IgaGlzdG9yeSwgaXQgc2hvd3MgaG93IHRoZSBlbnRyeSB3YXMgcHJvY2Vzc2VkIHRvIGNyZWF0ZSB0aGUgdmVyc2lvbiBjb250YWluZWQgaW4gdGhlIGVudHJ5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZXF1ZXN0PzogZmhpci5CdW5kbGVFbnRyeVJlcXVlc3R8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB0aGUgcmVzdWx0cyBvZiBwcm9jZXNzaW5nIHRoZSBjb3JyZXNwb25kaW5nICdyZXF1ZXN0JyBlbnRyeSBpbiB0aGUgYmF0Y2ggb3IgdHJhbnNhY3Rpb24gYmVpbmcgcmVzcG9uZGVkIHRvIG9yIHdoYXQgdGhlIHJlc3VsdHMgb2YgYW4gb3BlcmF0aW9uIHdoZXJlIHdoZW4gcmV0dXJuaW5nIGhpc3RvcnkuXHJcbiAgICovXHJcbiAgcHVibGljIHJlc3BvbnNlPzogZmhpci5CdW5kbGVFbnRyeVJlc3BvbnNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBCdW5kbGVFbnRyeSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEJ1bmRsZUVudHJ5QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2xpbmsnXSkgeyB0aGlzLmxpbmsgPSBzb3VyY2UubGluay5tYXAoKHgpID0+IG5ldyBmaGlyLkJ1bmRsZUxpbmsoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5saW5rID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2Z1bGxVcmwnXSkgeyB0aGlzLmZ1bGxVcmwgPSBuZXcgZmhpci5GaGlyVXJpKHt2YWx1ZTogc291cmNlLmZ1bGxVcmx9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2Z1bGxVcmwnXSkge1xyXG4gICAgICBpZiAodGhpcy5mdWxsVXJsKSB7IHRoaXMuZnVsbFVybC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9mdWxsVXJsISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZnVsbFVybCA9IG5ldyBmaGlyLkZoaXJVcmkoc291cmNlLl9mdWxsVXJsIGFzIFBhcnRpYWw8Zmhpci5GaGlyVXJpQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydyZXNvdXJjZSddKSB7IHRoaXMucmVzb3VyY2UgPSAoZmhpci5yZXNvdXJjZUZhY3Rvcnkoc291cmNlLnJlc291cmNlKSA/PyB1bmRlZmluZWQpOyB9XHJcbiAgICBpZiAoc291cmNlWydzZWFyY2gnXSkgeyB0aGlzLnNlYXJjaCA9IG5ldyBmaGlyLkJ1bmRsZUVudHJ5U2VhcmNoKHNvdXJjZS5zZWFyY2gpOyB9XHJcbiAgICBpZiAoc291cmNlWydyZXF1ZXN0J10pIHsgdGhpcy5yZXF1ZXN0ID0gbmV3IGZoaXIuQnVuZGxlRW50cnlSZXF1ZXN0KHNvdXJjZS5yZXF1ZXN0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVzcG9uc2UnXSkgeyB0aGlzLnJlc3BvbnNlID0gbmV3IGZoaXIuQnVuZGxlRW50cnlSZXNwb25zZShzb3VyY2UucmVzcG9uc2UpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKTtcclxuICAgIGlmIChleHByZXNzaW9uID09PSAnJykgeyBleHByZXNzaW9uID0gJ0J1bmRsZS5lbnRyeScgfVxyXG4gICAgaWYgKHRoaXNbXCJsaW5rXCJdKSB7IHRoaXMubGluay5mb3JFYWNoKCh4LGkpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uK2AubGlua1ske2l9XWApKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJmdWxsVXJsXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZnVsbFVybC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuZnVsbFVybCcpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJyZXNvdXJjZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnJlc291cmNlLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5yZXNvdXJjZScpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJzZWFyY2hcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5zZWFyY2guZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLnNlYXJjaCcpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJyZXF1ZXN0XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucmVxdWVzdC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycucmVxdWVzdCcpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJyZXNwb25zZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnJlc3BvbnNlLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5yZXNwb25zZScpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcblxyXG4vKipcclxuICogQWNjZXNzIGEgYnVuZGxlLmVudHJ5W10ucmVzb3VyY2UgYXMgYSB0eXBlZCByZXNvdXJjZVxyXG4gKi9cclxuICByZXNvdXJjZUFzPEJ1bmRlQ29udGVudFR5cGUgPSBmaGlyLkZoaXJSZXNvdXJjZT4oKTogQnVuZGVDb250ZW50VHlwZXx1bmtub3duIHtcclxuICAgIHJldHVybiB0aGlzLnJlc291cmNlIGFzIHVua25vd24gYXMgQnVuZGVDb250ZW50VHlwZTtcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEJ1bmRsZSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBCdW5kbGVBcmdzIGV4dGVuZHMgZmhpci5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJCdW5kbGVcInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUGVyc2lzdGVudCBpZGVudGl0eSBnZW5lcmFsbHkgb25seSBtYXR0ZXJzIGZvciBiYXRjaGVzIG9mIHR5cGUgRG9jdW1lbnQsIE1lc3NhZ2UsIGFuZCBDb2xsZWN0aW9uLiBJdCB3b3VsZCBub3Qgbm9ybWFsbHkgYmUgcG9wdWxhdGVkIGZvciBzZWFyY2ggYW5kIGhpc3RvcnkgcmVzdWx0cyBhbmQgc2VydmVycyBpZ25vcmUgQnVuZGxlLmlkZW50aWZpZXIgd2hlbiBwcm9jZXNzaW5nIGJhdGNoZXMgYW5kIHRyYW5zYWN0aW9ucy4gRm9yIERvY3VtZW50cyAgdGhlIC5pZGVudGlmaWVyIFNIQUxMIGJlIHBvcHVsYXRlZCBzdWNoIHRoYXQgdGhlIC5pZGVudGlmaWVyIGlzIGdsb2JhbGx5IHVuaXF1ZS5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSXQncyBwb3NzaWJsZSB0byB1c2UgYSBidW5kbGUgZm9yIG90aGVyIHB1cnBvc2VzIChlLmcuIGEgZG9jdW1lbnQgY2FuIGJlIGFjY2VwdGVkIGFzIGEgdHJhbnNhY3Rpb24pLiBUaGlzIGlzIHByaW1hcmlseSBkZWZpbmVkIHNvIHRoYXQgdGhlcmUgY2FuIGJlIHNwZWNpZmljIHJ1bGVzIGZvciBzb21lIG9mIHRoZSBidW5kbGUgdHlwZXMuXHJcbiAgICovXHJcbiAgdHlwZTogZmhpci5GaGlyQ29kZTxCdW5kbGVUeXBlQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEJ1bmRsZS50eXBlXHJcbiAgICovXHJcbiAgX3R5cGU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEZvciBtYW55IGJ1bmRsZXMsIHRoZSB0aW1lc3RhbXAgaXMgZXF1YWwgdG8gLm1ldGEubGFzdFVwZGF0ZWQsIGJlY2F1c2UgdGhleSBhcmUgbm90IHN0b3JlZCAoZS5nLiBzZWFyY2ggcmVzdWx0cykuIFdoZW4gYSBidW5kbGUgaXMgcGxhY2VkIGluIGEgcGVyc2lzdGVudCBzdG9yZSwgLm1ldGEubGFzdFVwZGF0ZWQgd2lsbCBiZSB1c3VhbGx5IGJlIGNoYW5nZWQgYnkgdGhlIHNlcnZlci4gV2hlbiB0aGUgYnVuZGxlIGlzIGEgbWVzc2FnZSwgYSBtaWRkbGV3YXJlIGFnZW50IGFsdGVyaW5nIHRoZSBtZXNzYWdlIChldmVuIGlmIG5vdCBzdG9yZWQpIFNIT1VMRCB1cGRhdGUgLm1ldGEubGFzdFVwZGF0ZWQuIC50aW1lc3RhbXAgaXMgdXNlZCB0byB0cmFjayB0aGUgb3JpZ2luYWwgdGltZSBvZiB0aGUgQnVuZGxlLCBhbmQgU0hPVUxEIGJlIHBvcHVsYXRlZC4gIFxyXG4gICAqIFVzYWdlOlxyXG4gICAqICogZG9jdW1lbnQgOiB0aGUgZGF0ZSB0aGUgZG9jdW1lbnQgd2FzIGNyZWF0ZWQuIE5vdGU6IHRoZSBjb21wb3NpdGlvbiBtYXkgcHJlZGF0ZSB0aGUgZG9jdW1lbnQsIG9yIGJlIGFzc29jaWF0ZWQgd2l0aCBtdWx0aXBsZSBkb2N1bWVudHMuIFRoZSBkYXRlIG9mIHRoZSBjb21wb3NpdGlvbiAtIHRoZSBhdXRob3JpbmcgdGltZSAtIG1heSBiZSBlYXJsaWVyIHRoYW4gdGhlIGRvY3VtZW50IGFzc2VtYmx5IHRpbWVcclxuICAgKiAqIG1lc3NhZ2UgOiB0aGUgZGF0ZSB0aGF0IHRoZSBjb250ZW50IG9mIHRoZSBtZXNzYWdlIHdhcyBhc3NlbWJsZWQuIFRoaXMgZGF0ZSBpcyBub3QgY2hhbmdlZCBieSBtaWRkbGV3YXJlIGVuZ2luZXMgdW5sZXNzIHRoZXkgYWRkIGFkZGl0aW9uYWwgZGF0YSB0aGF0IGNoYW5nZXMgdGhlIG1lYW5pbmcgb2YgdGhlIHRpbWUgb2YgdGhlIG1lc3NhZ2VcclxuICAgKiAqIGhpc3RvcnkgOiB0aGUgZGF0ZSB0aGF0IHRoZSBoaXN0b3J5IHdhcyBhc3NlbWJsZWQuIFRoaXMgdGltZSB3b3VsZCBiZSB1c2VkIGFzIHRoZSBfc2luY2UgdGltZSB0byBhc2sgZm9yIHN1YnNlcXVlbnQgdXBkYXRlc1xyXG4gICAqICogc2VhcmNoc2V0IDogdGhlIHRpbWUgdGhhdCB0aGUgc2VhcmNoIHNldCB3YXMgYXNzZW1ibGVkLiBOb3RlIHRoYXQgZGlmZmVyZW50IHBhZ2VzIE1BWSBoYXZlIGRpZmZlcmVudCB0aW1lc3RhbXBzIGJ1dCBuZWVkIG5vdC4gSGF2aW5nIGRpZmZlcmVudCB0aW1lc3RhbXBzIGRvZXMgbm90IGltcGx5IHRoYXQgc3Vic2VxdWVudCBwYWdlcyB3aWxsIHJlcHJlc2VudCBvciBpbmNsdWRlIGNoYW5nZXMgbWFkZSBzaW5jZSB0aGUgaW5pdGlhbCBxdWVyeVxyXG4gICAqICogdHJhbnNhY3Rpb24gfCB0cmFuc2FjdGlvbi1yZXNwb25zZSB8IGJhdGNoIHwgYmF0Y2gtcmVzcG9uc2UgfCBjb2xsZWN0aW9uIDogbm8gcGFydGljdWxhciBhc3NpZ25lZCBtZWFuaW5nXHJcbiAgICogVGhlIHRpbWVzdGFtcCB2YWx1ZSBzaG91bGQgYmUgZ3JlYXRlciB0aGFuIHRoZSBsYXN0VXBkYXRlZCBhbmQgb3RoZXIgdGltZXN0YW1wcyBpbiB0aGUgcmVzb3VyY2VzIGluIHRoZSBidW5kbGUsIGFuZCBpdCBzaG91bGQgYmUgZXF1YWwgb3IgZWFybGllciB0aGFuIHRoZSAubWV0YS5sYXN0VXBkYXRlZCBvbiB0aGUgQnVuZGxlIGl0c2VsZi5cclxuICAgKi9cclxuICB0aW1lc3RhbXA/OiBmaGlyLkZoaXJJbnN0YW50fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEJ1bmRsZS50aW1lc3RhbXBcclxuICAgKi9cclxuICBfdGltZXN0YW1wPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBPbmx5IHVzZWQgaWYgdGhlIGJ1bmRsZSBpcyBhIHNlYXJjaCByZXN1bHQgc2V0LiBUaGUgdG90YWwgZG9lcyBub3QgaW5jbHVkZSByZXNvdXJjZXMgc3VjaCBhcyBPcGVyYXRpb25PdXRjb21lIGFuZCBpbmNsdWRlZCByZXNvdXJjZXMsIG9ubHkgdGhlIHRvdGFsIG51bWJlciBvZiBtYXRjaGluZyByZXNvdXJjZXMuXHJcbiAgICovXHJcbiAgdG90YWw/OiBmaGlyLkZoaXJVbnNpZ25lZEludHxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUudG90YWxcclxuICAgKi9cclxuICBfdG90YWw/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEJvdGggQnVuZGxlLmxpbmsgYW5kIEJ1bmRsZS5lbnRyeS5saW5rIGFyZSBkZWZpbmVkIHRvIHN1cHBvcnQgcHJvdmlkaW5nIGFkZGl0aW9uYWwgY29udGV4dCB3aGVuIEJ1bmRsZXMgYXJlIHVzZWQgKGUuZy4gW0hBVEVPQVNdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSEFURU9BUykpLiBcclxuICAgKiBCdW5kbGUuZW50cnkubGluayBjb3JyZXNwb25kcyB0byBsaW5rcyBmb3VuZCBpbiB0aGUgSFRUUCBoZWFkZXIgaWYgdGhlIHJlc291cmNlIGluIHRoZSBlbnRyeSB3YXMgW3JlYWRdKGh0dHAuaHRtbCNyZWFkKSBkaXJlY3RseS5cclxuICAgKiBUaGlzIHNwZWNpZmljYXRpb24gZGVmaW5lcyBzb21lIHNwZWNpZmljIHVzZXMgb2YgQnVuZGxlLmxpbmsgZm9yIFtzZWFyY2hpbmddKHNlYXJjaC5odG1sI2NvbmZvcm1hbmNlKSBhbmQgW3BhZ2luZ10oaHR0cC5odG1sI3BhZ2luZyksIGJ1dCBubyBzcGVjaWZpYyB1c2VzIGZvciBCdW5kbGUuZW50cnkubGluaywgYW5kIG5vIGRlZmluZWQgZnVuY3Rpb24gaW4gYSB0cmFuc2FjdGlvbiAtIHRoZSBtZWFuaW5nIGlzIGltcGxlbWVudGF0aW9uIHNwZWNpZmljLlxyXG4gICAqL1xyXG4gIGxpbms/OiBmaGlyLkJ1bmRsZUxpbmtBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFuIGVudHJ5IGluIGEgYnVuZGxlIHJlc291cmNlIC0gd2lsbCBlaXRoZXIgY29udGFpbiBhIHJlc291cmNlIG9yIGluZm9ybWF0aW9uIGFib3V0IGEgcmVzb3VyY2UgKHRyYW5zYWN0aW9ucyBhbmQgaGlzdG9yeSBvbmx5KS5cclxuICAgKi9cclxuICBlbnRyeT86IGZoaXIuQnVuZGxlRW50cnlBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzaWduYXR1cmUgY291bGQgYmUgY3JlYXRlZCBieSB0aGUgXCJhdXRob3JcIiBvZiB0aGUgYnVuZGxlIG9yIGJ5IHRoZSBvcmlnaW5hdGluZyBkZXZpY2UuICAgUmVxdWlyZW1lbnRzIGFyb3VuZCBpbmNsdXNpb24gb2YgYSBzaWduYXR1cmUsIHZlcmlmaWNhdGlvbiBvZiBzaWduYXR1cmVzIGFuZCB0cmVhdG1lbnQgb2Ygc2lnbmVkL25vbi1zaWduZWQgYnVuZGxlcyBpcyBpbXBsZW1lbnRhdGlvbi1lbnZpcm9ubWVudCBzcGVjaWZpYy5cclxuICAgKi9cclxuICBzaWduYXR1cmU/OiBmaGlyLlNpZ25hdHVyZUFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQSBjb250YWluZXIgZm9yIGEgY29sbGVjdGlvbiBvZiByZXNvdXJjZXMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQnVuZGxlIGV4dGVuZHMgZmhpci5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdCdW5kbGUnO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNvdXJjZVR5cGU6IFwiQnVuZGxlXCI7XHJcbiAgLyoqXHJcbiAgICogUGVyc2lzdGVudCBpZGVudGl0eSBnZW5lcmFsbHkgb25seSBtYXR0ZXJzIGZvciBiYXRjaGVzIG9mIHR5cGUgRG9jdW1lbnQsIE1lc3NhZ2UsIGFuZCBDb2xsZWN0aW9uLiBJdCB3b3VsZCBub3Qgbm9ybWFsbHkgYmUgcG9wdWxhdGVkIGZvciBzZWFyY2ggYW5kIGhpc3RvcnkgcmVzdWx0cyBhbmQgc2VydmVycyBpZ25vcmUgQnVuZGxlLmlkZW50aWZpZXIgd2hlbiBwcm9jZXNzaW5nIGJhdGNoZXMgYW5kIHRyYW5zYWN0aW9ucy4gRm9yIERvY3VtZW50cyAgdGhlIC5pZGVudGlmaWVyIFNIQUxMIGJlIHBvcHVsYXRlZCBzdWNoIHRoYXQgdGhlIC5pZGVudGlmaWVyIGlzIGdsb2JhbGx5IHVuaXF1ZS5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSXQncyBwb3NzaWJsZSB0byB1c2UgYSBidW5kbGUgZm9yIG90aGVyIHB1cnBvc2VzIChlLmcuIGEgZG9jdW1lbnQgY2FuIGJlIGFjY2VwdGVkIGFzIGEgdHJhbnNhY3Rpb24pLiBUaGlzIGlzIHByaW1hcmlseSBkZWZpbmVkIHNvIHRoYXQgdGhlcmUgY2FuIGJlIHNwZWNpZmljIHJ1bGVzIGZvciBzb21lIG9mIHRoZSBidW5kbGUgdHlwZXMuXHJcbiAgICovXHJcbiAgcHVibGljIHR5cGU6IGZoaXIuRmhpckNvZGU8QnVuZGxlVHlwZUNvZGVUeXBlPnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEZvciBtYW55IGJ1bmRsZXMsIHRoZSB0aW1lc3RhbXAgaXMgZXF1YWwgdG8gLm1ldGEubGFzdFVwZGF0ZWQsIGJlY2F1c2UgdGhleSBhcmUgbm90IHN0b3JlZCAoZS5nLiBzZWFyY2ggcmVzdWx0cykuIFdoZW4gYSBidW5kbGUgaXMgcGxhY2VkIGluIGEgcGVyc2lzdGVudCBzdG9yZSwgLm1ldGEubGFzdFVwZGF0ZWQgd2lsbCBiZSB1c3VhbGx5IGJlIGNoYW5nZWQgYnkgdGhlIHNlcnZlci4gV2hlbiB0aGUgYnVuZGxlIGlzIGEgbWVzc2FnZSwgYSBtaWRkbGV3YXJlIGFnZW50IGFsdGVyaW5nIHRoZSBtZXNzYWdlIChldmVuIGlmIG5vdCBzdG9yZWQpIFNIT1VMRCB1cGRhdGUgLm1ldGEubGFzdFVwZGF0ZWQuIC50aW1lc3RhbXAgaXMgdXNlZCB0byB0cmFjayB0aGUgb3JpZ2luYWwgdGltZSBvZiB0aGUgQnVuZGxlLCBhbmQgU0hPVUxEIGJlIHBvcHVsYXRlZC4gIFxyXG4gICAqIFVzYWdlOlxyXG4gICAqICogZG9jdW1lbnQgOiB0aGUgZGF0ZSB0aGUgZG9jdW1lbnQgd2FzIGNyZWF0ZWQuIE5vdGU6IHRoZSBjb21wb3NpdGlvbiBtYXkgcHJlZGF0ZSB0aGUgZG9jdW1lbnQsIG9yIGJlIGFzc29jaWF0ZWQgd2l0aCBtdWx0aXBsZSBkb2N1bWVudHMuIFRoZSBkYXRlIG9mIHRoZSBjb21wb3NpdGlvbiAtIHRoZSBhdXRob3JpbmcgdGltZSAtIG1heSBiZSBlYXJsaWVyIHRoYW4gdGhlIGRvY3VtZW50IGFzc2VtYmx5IHRpbWVcclxuICAgKiAqIG1lc3NhZ2UgOiB0aGUgZGF0ZSB0aGF0IHRoZSBjb250ZW50IG9mIHRoZSBtZXNzYWdlIHdhcyBhc3NlbWJsZWQuIFRoaXMgZGF0ZSBpcyBub3QgY2hhbmdlZCBieSBtaWRkbGV3YXJlIGVuZ2luZXMgdW5sZXNzIHRoZXkgYWRkIGFkZGl0aW9uYWwgZGF0YSB0aGF0IGNoYW5nZXMgdGhlIG1lYW5pbmcgb2YgdGhlIHRpbWUgb2YgdGhlIG1lc3NhZ2VcclxuICAgKiAqIGhpc3RvcnkgOiB0aGUgZGF0ZSB0aGF0IHRoZSBoaXN0b3J5IHdhcyBhc3NlbWJsZWQuIFRoaXMgdGltZSB3b3VsZCBiZSB1c2VkIGFzIHRoZSBfc2luY2UgdGltZSB0byBhc2sgZm9yIHN1YnNlcXVlbnQgdXBkYXRlc1xyXG4gICAqICogc2VhcmNoc2V0IDogdGhlIHRpbWUgdGhhdCB0aGUgc2VhcmNoIHNldCB3YXMgYXNzZW1ibGVkLiBOb3RlIHRoYXQgZGlmZmVyZW50IHBhZ2VzIE1BWSBoYXZlIGRpZmZlcmVudCB0aW1lc3RhbXBzIGJ1dCBuZWVkIG5vdC4gSGF2aW5nIGRpZmZlcmVudCB0aW1lc3RhbXBzIGRvZXMgbm90IGltcGx5IHRoYXQgc3Vic2VxdWVudCBwYWdlcyB3aWxsIHJlcHJlc2VudCBvciBpbmNsdWRlIGNoYW5nZXMgbWFkZSBzaW5jZSB0aGUgaW5pdGlhbCBxdWVyeVxyXG4gICAqICogdHJhbnNhY3Rpb24gfCB0cmFuc2FjdGlvbi1yZXNwb25zZSB8IGJhdGNoIHwgYmF0Y2gtcmVzcG9uc2UgfCBjb2xsZWN0aW9uIDogbm8gcGFydGljdWxhciBhc3NpZ25lZCBtZWFuaW5nXHJcbiAgICogVGhlIHRpbWVzdGFtcCB2YWx1ZSBzaG91bGQgYmUgZ3JlYXRlciB0aGFuIHRoZSBsYXN0VXBkYXRlZCBhbmQgb3RoZXIgdGltZXN0YW1wcyBpbiB0aGUgcmVzb3VyY2VzIGluIHRoZSBidW5kbGUsIGFuZCBpdCBzaG91bGQgYmUgZXF1YWwgb3IgZWFybGllciB0aGFuIHRoZSAubWV0YS5sYXN0VXBkYXRlZCBvbiB0aGUgQnVuZGxlIGl0c2VsZi5cclxuICAgKi9cclxuICBwdWJsaWMgdGltZXN0YW1wPzogZmhpci5GaGlySW5zdGFudHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogT25seSB1c2VkIGlmIHRoZSBidW5kbGUgaXMgYSBzZWFyY2ggcmVzdWx0IHNldC4gVGhlIHRvdGFsIGRvZXMgbm90IGluY2x1ZGUgcmVzb3VyY2VzIHN1Y2ggYXMgT3BlcmF0aW9uT3V0Y29tZSBhbmQgaW5jbHVkZWQgcmVzb3VyY2VzLCBvbmx5IHRoZSB0b3RhbCBudW1iZXIgb2YgbWF0Y2hpbmcgcmVzb3VyY2VzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0b3RhbD86IGZoaXIuRmhpclVuc2lnbmVkSW50fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBCb3RoIEJ1bmRsZS5saW5rIGFuZCBCdW5kbGUuZW50cnkubGluayBhcmUgZGVmaW5lZCB0byBzdXBwb3J0IHByb3ZpZGluZyBhZGRpdGlvbmFsIGNvbnRleHQgd2hlbiBCdW5kbGVzIGFyZSB1c2VkIChlLmcuIFtIQVRFT0FTXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0hBVEVPQVMpKS4gXHJcbiAgICogQnVuZGxlLmVudHJ5LmxpbmsgY29ycmVzcG9uZHMgdG8gbGlua3MgZm91bmQgaW4gdGhlIEhUVFAgaGVhZGVyIGlmIHRoZSByZXNvdXJjZSBpbiB0aGUgZW50cnkgd2FzIFtyZWFkXShodHRwLmh0bWwjcmVhZCkgZGlyZWN0bHkuXHJcbiAgICogVGhpcyBzcGVjaWZpY2F0aW9uIGRlZmluZXMgc29tZSBzcGVjaWZpYyB1c2VzIG9mIEJ1bmRsZS5saW5rIGZvciBbc2VhcmNoaW5nXShzZWFyY2guaHRtbCNjb25mb3JtYW5jZSkgYW5kIFtwYWdpbmddKGh0dHAuaHRtbCNwYWdpbmcpLCBidXQgbm8gc3BlY2lmaWMgdXNlcyBmb3IgQnVuZGxlLmVudHJ5LmxpbmssIGFuZCBubyBkZWZpbmVkIGZ1bmN0aW9uIGluIGEgdHJhbnNhY3Rpb24gLSB0aGUgbWVhbmluZyBpcyBpbXBsZW1lbnRhdGlvbiBzcGVjaWZpYy5cclxuICAgKi9cclxuICBwdWJsaWMgbGluazogZmhpci5CdW5kbGVMaW5rW107XHJcbiAgLyoqXHJcbiAgICogQW4gZW50cnkgaW4gYSBidW5kbGUgcmVzb3VyY2UgLSB3aWxsIGVpdGhlciBjb250YWluIGEgcmVzb3VyY2Ugb3IgaW5mb3JtYXRpb24gYWJvdXQgYSByZXNvdXJjZSAodHJhbnNhY3Rpb25zIGFuZCBoaXN0b3J5IG9ubHkpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBlbnRyeTogZmhpci5CdW5kbGVFbnRyeVtdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzaWduYXR1cmUgY291bGQgYmUgY3JlYXRlZCBieSB0aGUgXCJhdXRob3JcIiBvZiB0aGUgYnVuZGxlIG9yIGJ5IHRoZSBvcmlnaW5hdGluZyBkZXZpY2UuICAgUmVxdWlyZW1lbnRzIGFyb3VuZCBpbmNsdXNpb24gb2YgYSBzaWduYXR1cmUsIHZlcmlmaWNhdGlvbiBvZiBzaWduYXR1cmVzIGFuZCB0cmVhdG1lbnQgb2Ygc2lnbmVkL25vbi1zaWduZWQgYnVuZGxlcyBpcyBpbXBsZW1lbnRhdGlvbi1lbnZpcm9ubWVudCBzcGVjaWZpYy5cclxuICAgKi9cclxuICBwdWJsaWMgc2lnbmF0dXJlPzogZmhpci5TaWduYXR1cmV8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEJ1bmRsZSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEJ1bmRsZUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdCdW5kbGUnO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IG5ldyBmaGlyLklkZW50aWZpZXIoc291cmNlLmlkZW50aWZpZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWyd0eXBlJ10pIHsgdGhpcy50eXBlID0gbmV3IGZoaXIuRmhpckNvZGU8QnVuZGxlVHlwZUNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS50eXBlfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnR5cGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfdHlwZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnR5cGUpIHsgdGhpcy50eXBlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3R5cGUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy50eXBlID0gbmV3IGZoaXIuRmhpckNvZGU8QnVuZGxlVHlwZUNvZGVUeXBlPihzb3VyY2UuX3R5cGUgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3RpbWVzdGFtcCddKSB7IHRoaXMudGltZXN0YW1wID0gbmV3IGZoaXIuRmhpckluc3RhbnQoe3ZhbHVlOiBzb3VyY2UudGltZXN0YW1wfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ190aW1lc3RhbXAnXSkge1xyXG4gICAgICBpZiAodGhpcy50aW1lc3RhbXApIHsgdGhpcy50aW1lc3RhbXAuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdGltZXN0YW1wISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudGltZXN0YW1wID0gbmV3IGZoaXIuRmhpckluc3RhbnQoc291cmNlLl90aW1lc3RhbXAgYXMgUGFydGlhbDxmaGlyLkZoaXJJbnN0YW50QXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd0b3RhbCddKSB7IHRoaXMudG90YWwgPSBuZXcgZmhpci5GaGlyVW5zaWduZWRJbnQoe3ZhbHVlOiBzb3VyY2UudG90YWx9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3RvdGFsJ10pIHtcclxuICAgICAgaWYgKHRoaXMudG90YWwpIHsgdGhpcy50b3RhbC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl90b3RhbCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnRvdGFsID0gbmV3IGZoaXIuRmhpclVuc2lnbmVkSW50KHNvdXJjZS5fdG90YWwgYXMgUGFydGlhbDxmaGlyLkZoaXJVbnNpZ25lZEludEFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnbGluayddKSB7IHRoaXMubGluayA9IHNvdXJjZS5saW5rLm1hcCgoeCkgPT4gbmV3IGZoaXIuQnVuZGxlTGluayh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmxpbmsgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZW50cnknXSkgeyB0aGlzLmVudHJ5ID0gc291cmNlLmVudHJ5Lm1hcCgoeCkgPT4gbmV3IGZoaXIuQnVuZGxlRW50cnkoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5lbnRyeSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydzaWduYXR1cmUnXSkgeyB0aGlzLnNpZ25hdHVyZSA9IG5ldyBmaGlyLlNpZ25hdHVyZShzb3VyY2Uuc2lnbmF0dXJlKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIHR5cGUgKEJ1bmRsZS50eXBlKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IHR5cGVSZXF1aXJlZENvZGVzKCkge1xyXG4gICAgcmV0dXJuIEJ1bmRsZVR5cGVDb2RlcztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb246c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24pO1xyXG4gICAgaWYgKGV4cHJlc3Npb24gPT09ICcnKSB7IGV4cHJlc3Npb24gPSAnQnVuZGxlJyB9XHJcbiAgICBpZiAoIXRoaXNbJ3Jlc291cmNlVHlwZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSByZXNvdXJjZVR5cGUgZmhpcjogQnVuZGxlLnJlc291cmNlVHlwZTpcIkJ1bmRsZVwiJywgZXhwcmVzc2lvbjogW2V4cHJlc3Npb25dIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJpZGVudGlmaWVyXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuaWRlbnRpZmllci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuaWRlbnRpZmllcicpKTsgfVxyXG4gICAgaWYgKCF0aGlzWyd0eXBlJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHR5cGUgZmhpcjogQnVuZGxlLnR5cGU6Y29kZScsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzWyd0eXBlJ10gJiYgKCFPYmplY3QudmFsdWVzKEJ1bmRsZVR5cGVDb2RlcykuaW5jbHVkZXModGhpcy50eXBlLnZhbHVlIGFzIGFueSkpKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdjb2RlLWludmFsaWQnLCBkaWFnbm9zdGljczogJ3R5cGUgKEJ1bmRsZS50eXBlKSBvZiB0eXBlIGNvZGUgaXMgbWlzc2luZyBjb2RlIGZvciBSZXF1aXJlZCBiaW5kaW5nIHRvOiBCdW5kbGVUeXBlJywgZXhwcmVzc2lvbjogW2V4cHJlc3Npb25dIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJ0eXBlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMudHlwZS5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycudHlwZScpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJ0aW1lc3RhbXBcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy50aW1lc3RhbXAuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLnRpbWVzdGFtcCcpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJ0b3RhbFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnRvdGFsLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy50b3RhbCcpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJsaW5rXCJdKSB7IHRoaXMubGluay5mb3JFYWNoKCh4LGkpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uK2AubGlua1ske2l9XWApKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJlbnRyeVwiXSkgeyB0aGlzLmVudHJ5LmZvckVhY2goKHgsaSkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rYC5lbnRyeVske2l9XWApKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJzaWduYXR1cmVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5zaWduYXR1cmUuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLnNpZ25hdHVyZScpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuIl19