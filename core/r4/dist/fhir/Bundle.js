// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: Bundle
import * as fhir from '../fhir.js';
// @ts-ignore
import { SearchEntryModeVsValidation } from '../fhirValueSets/SearchEntryModeVsValidation.js';
// @ts-ignore
import { HttpVerbVsValidation } from '../fhirValueSets/HttpVerbVsValidation.js';
// @ts-ignore
import { BundleTypeVsValidation } from '../fhirValueSets/BundleTypeVsValidation.js';
/**
 * Both Bundle.link and Bundle.entry.link are defined to support providing additional context when Bundles are used (e.g. [HATEOAS](http://en.wikipedia.org/wiki/HATEOAS)).
 * Bundle.entry.link corresponds to links found in the HTTP header if the resource in the entry was [read](http.html#read) directly.
 * This specification defines some specific uses of Bundle.link for [searching](search.html#conformance) and [paging](http.html#paging), but no specific uses for Bundle.entry.link, and no defined function in a transaction - the meaning is implementation specific.
 */
export class BundleLink extends fhir.BackboneElement {
    /**
     * Default constructor for BundleLink - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['relation']) {
            this.relation = new fhir.FhirString({ value: source.relation });
        }
        else {
            this.relation = null;
        }
        if (source['_relation']) {
            if (this.relation) {
                this.relation.addExtendedProperties(source._relation);
            }
            else {
                this.relation = new fhir.FhirString(source._relation);
            }
        }
        if (source['url']) {
            this.url = new fhir.FhirUri({ value: source.url });
        }
        else {
            this.url = null;
        }
        if (source['_url']) {
            if (this.url) {
                this.url.addExtendedProperties(source._url);
            }
            else {
                this.url = new fhir.FhirUri(source._url);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'Bundle.link';
        }
        this.vReqS('relation', expression);
        this.vReqS('url', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BundleLink._fts_dataType = 'BundleLink';
/**
 * Information about the search process that lead to the creation of this entry.
 */
export class BundleEntrySearch extends fhir.BackboneElement {
    /**
     * Default constructor for BundleEntrySearch - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['mode']) {
            this.mode = new fhir.FhirCode({ value: source.mode });
        }
        if (source['_mode']) {
            if (this.mode) {
                this.mode.addExtendedProperties(source._mode);
            }
            else {
                this.mode = new fhir.FhirCode(source._mode);
            }
        }
        if (source['score']) {
            this.score = new fhir.FhirDecimal({ value: source.score });
        }
        if (source['_score']) {
            if (this.score) {
                this.score.addExtendedProperties(source._score);
            }
            else {
                this.score = new fhir.FhirDecimal(source._score);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'Bundle.entry.search';
        }
        this.vOptSV('mode', expression, 'SearchEntryMode', SearchEntryModeVsValidation, 'r');
        this.vOptS('score', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BundleEntrySearch._fts_dataType = 'BundleEntrySearch';
/**
 * Additional information about how this entry should be processed as part of a transaction or batch.  For history, it shows how the entry was processed to create the version contained in the entry.
 */
export class BundleEntryRequest extends fhir.BackboneElement {
    /**
     * Default constructor for BundleEntryRequest - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['method']) {
            this.method = new fhir.FhirCode({ value: source.method });
        }
        else {
            this.method = null;
        }
        if (source['_method']) {
            if (this.method) {
                this.method.addExtendedProperties(source._method);
            }
            else {
                this.method = new fhir.FhirCode(source._method);
            }
        }
        if (source['url']) {
            this.url = new fhir.FhirUri({ value: source.url });
        }
        else {
            this.url = null;
        }
        if (source['_url']) {
            if (this.url) {
                this.url.addExtendedProperties(source._url);
            }
            else {
                this.url = new fhir.FhirUri(source._url);
            }
        }
        if (source['ifNoneMatch']) {
            this.ifNoneMatch = new fhir.FhirString({ value: source.ifNoneMatch });
        }
        if (source['_ifNoneMatch']) {
            if (this.ifNoneMatch) {
                this.ifNoneMatch.addExtendedProperties(source._ifNoneMatch);
            }
            else {
                this.ifNoneMatch = new fhir.FhirString(source._ifNoneMatch);
            }
        }
        if (source['ifModifiedSince']) {
            this.ifModifiedSince = new fhir.FhirInstant({ value: source.ifModifiedSince });
        }
        if (source['_ifModifiedSince']) {
            if (this.ifModifiedSince) {
                this.ifModifiedSince.addExtendedProperties(source._ifModifiedSince);
            }
            else {
                this.ifModifiedSince = new fhir.FhirInstant(source._ifModifiedSince);
            }
        }
        if (source['ifMatch']) {
            this.ifMatch = new fhir.FhirString({ value: source.ifMatch });
        }
        if (source['_ifMatch']) {
            if (this.ifMatch) {
                this.ifMatch.addExtendedProperties(source._ifMatch);
            }
            else {
                this.ifMatch = new fhir.FhirString(source._ifMatch);
            }
        }
        if (source['ifNoneExist']) {
            this.ifNoneExist = new fhir.FhirString({ value: source.ifNoneExist });
        }
        if (source['_ifNoneExist']) {
            if (this.ifNoneExist) {
                this.ifNoneExist.addExtendedProperties(source._ifNoneExist);
            }
            else {
                this.ifNoneExist = new fhir.FhirString(source._ifNoneExist);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'Bundle.entry.request';
        }
        this.vReqSV('method', expression, 'HttpVerb', HttpVerbVsValidation, 'r');
        this.vReqS('url', expression);
        this.vOptS('ifNoneMatch', expression);
        this.vOptS('ifModifiedSince', expression);
        this.vOptS('ifMatch', expression);
        this.vOptS('ifNoneExist', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BundleEntryRequest._fts_dataType = 'BundleEntryRequest';
/**
 * Indicates the results of processing the corresponding 'request' entry in the batch or transaction being responded to or what the results of an operation where when returning history.
 */
export class BundleEntryResponse extends fhir.BackboneElement {
    /**
     * Default constructor for BundleEntryResponse - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['status']) {
            this.status = new fhir.FhirString({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirString(source._status);
            }
        }
        if (source['location']) {
            this.location = new fhir.FhirUri({ value: source.location });
        }
        if (source['_location']) {
            if (this.location) {
                this.location.addExtendedProperties(source._location);
            }
            else {
                this.location = new fhir.FhirUri(source._location);
            }
        }
        if (source['etag']) {
            this.etag = new fhir.FhirString({ value: source.etag });
        }
        if (source['_etag']) {
            if (this.etag) {
                this.etag.addExtendedProperties(source._etag);
            }
            else {
                this.etag = new fhir.FhirString(source._etag);
            }
        }
        if (source['lastModified']) {
            this.lastModified = new fhir.FhirInstant({ value: source.lastModified });
        }
        if (source['_lastModified']) {
            if (this.lastModified) {
                this.lastModified.addExtendedProperties(source._lastModified);
            }
            else {
                this.lastModified = new fhir.FhirInstant(source._lastModified);
            }
        }
        if (source['outcome']) {
            this.outcome = (fhir.resourceFactory(source.outcome) ?? undefined);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'Bundle.entry.response';
        }
        this.vReqS('status', expression);
        this.vOptS('location', expression);
        this.vOptS('etag', expression);
        this.vOptS('lastModified', expression);
        this.vOptS('outcome', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BundleEntryResponse._fts_dataType = 'BundleEntryResponse';
/**
 * An entry in a bundle resource - will either contain a resource or information about a resource (transactions and history only).
 */
export class BundleEntry extends fhir.BackboneElement {
    /**
     * Default constructor for BundleEntry - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['link']) {
            this.link = source.link.map((x) => new fhir.BundleLink(x));
        }
        else {
            this.link = [];
        }
        if (source['fullUrl']) {
            this.fullUrl = new fhir.FhirUri({ value: source.fullUrl });
        }
        if (source['_fullUrl']) {
            if (this.fullUrl) {
                this.fullUrl.addExtendedProperties(source._fullUrl);
            }
            else {
                this.fullUrl = new fhir.FhirUri(source._fullUrl);
            }
        }
        if (source['resource']) {
            this.resource = (fhir.resourceFactory(source.resource) ?? undefined);
        }
        if (source['search']) {
            this.search = new fhir.BundleEntrySearch(source.search);
        }
        if (source['request']) {
            this.request = new fhir.BundleEntryRequest(source.request);
        }
        if (source['response']) {
            this.response = new fhir.BundleEntryResponse(source.response);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'Bundle.entry';
        }
        this.vOptA('link', expression);
        this.vOptS('fullUrl', expression);
        this.vOptS('resource', expression);
        this.vOptS('search', expression);
        this.vOptS('request', expression);
        this.vOptS('response', expression);
        return issues;
    }
    /**
     * Access a bundle.entry[].resource as a typed resource
     */
    resourceAs() {
        return this.resource;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BundleEntry._fts_dataType = 'BundleEntry';
/**
 * A container for a collection of resources.
 */
export class Bundle extends fhir.Resource {
    /**
     * Default constructor for Bundle - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'Bundle';
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier);
        }
        if (source['type']) {
            this.type = new fhir.FhirCode({ value: source.type });
        }
        else {
            this.type = null;
        }
        if (source['_type']) {
            if (this.type) {
                this.type.addExtendedProperties(source._type);
            }
            else {
                this.type = new fhir.FhirCode(source._type);
            }
        }
        if (source['timestamp']) {
            this.timestamp = new fhir.FhirInstant({ value: source.timestamp });
        }
        if (source['_timestamp']) {
            if (this.timestamp) {
                this.timestamp.addExtendedProperties(source._timestamp);
            }
            else {
                this.timestamp = new fhir.FhirInstant(source._timestamp);
            }
        }
        if (source['total']) {
            this.total = new fhir.FhirUnsignedInt({ value: source.total });
        }
        if (source['_total']) {
            if (this.total) {
                this.total.addExtendedProperties(source._total);
            }
            else {
                this.total = new fhir.FhirUnsignedInt(source._total);
            }
        }
        if (source['link']) {
            this.link = source.link.map((x) => new fhir.BundleLink(x));
        }
        else {
            this.link = [];
        }
        if (source['entry']) {
            this.entry = source.entry.map((x) => new fhir.BundleEntry(x));
        }
        else {
            this.entry = [];
        }
        if (source['signature']) {
            this.signature = new fhir.Signature(source.signature);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'Bundle';
        }
        this.vReqS('resourceType', expression);
        this.vOptS('identifier', expression);
        this.vReqSV('type', expression, 'BundleType', BundleTypeVsValidation, 'r');
        this.vOptS('timestamp', expression);
        this.vOptS('total', expression);
        this.vOptA('link', expression);
        this.vOptA('entry', expression);
        this.vOptS('signature', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
Bundle._fts_dataType = 'Bundle';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQnVuZGxlLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9CdW5kbGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsd0JBQXdCO0FBRXhCLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBSW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsMkJBQTJCLEVBQUUsTUFBTSxpREFBaUQsQ0FBQztBQUc5RixhQUFhO0FBQ2IsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sMENBQTBDLENBQUM7QUFHaEYsYUFBYTtBQUNiLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLDRDQUE0QyxDQUFDO0FBdUJwRjs7OztHQUlHO0FBQ0gsTUFBTSxPQUFPLFVBQVcsU0FBUSxJQUFJLENBQUMsZUFBZTtJQWFsRDs7T0FFRztJQUNILFlBQVksU0FBaUMsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDdkYsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxRQUFRLEVBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDckY7WUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztTQUFFO1FBQzlCLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQ3ZCLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtnQkFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxTQUFVLENBQUMsQ0FBQzthQUFFO2lCQUN6RTtnQkFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsU0FBeUMsQ0FBQyxD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LENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUNsQyxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQXpGRDs7R0FFRztBQUM2QixvQkFBYSxHQUFVLFFBQVEsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNC5jb3JlIHZlcnNpb246IDQuMC4xXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogQnVuZGxlXHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBTZWFyY2hFbnRyeU1vZGVDb2RlcywgIFNlYXJjaEVudHJ5TW9kZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9TZWFyY2hFbnRyeU1vZGVDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgU2VhcmNoRW50cnlNb2RlVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9TZWFyY2hFbnRyeU1vZGVWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEh0dHBWZXJiQ29kZXMsICBIdHRwVmVyYkNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9IdHRwVmVyYkNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBIdHRwVmVyYlZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvSHR0cFZlcmJWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEJ1bmRsZVR5cGVDb2RlcywgIEJ1bmRsZVR5cGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQnVuZGxlVHlwZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBCdW5kbGVUeXBlVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9CdW5kbGVUeXBlVnNWYWxpZGF0aW9uLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEJ1bmRsZUxpbmsgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQnVuZGxlTGlua0FyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEEgbmFtZSB3aGljaCBkZXRhaWxzIHRoZSBmdW5jdGlvbmFsIHVzZSBmb3IgdGhpcyBsaW5rIC0gc2VlIFtodHRwOi8vd3d3LmlhbmEub3JnL2Fzc2lnbm1lbnRzL2xpbmstcmVsYXRpb25zL2xpbmstcmVsYXRpb25zLnhodG1sI2xpbmstcmVsYXRpb25zLTFdKGh0dHA6Ly93d3cuaWFuYS5vcmcvYXNzaWdubWVudHMvbGluay1yZWxhdGlvbnMvbGluay1yZWxhdGlvbnMueGh0bWwjbGluay1yZWxhdGlvbnMtMSkuXHJcbiAgICovXHJcbiAgcmVsYXRpb246IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUubGluay5yZWxhdGlvblxyXG4gICAqL1xyXG4gIF9yZWxhdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlZmVyZW5jZSBkZXRhaWxzIGZvciB0aGUgbGluay5cclxuICAgKi9cclxuICB1cmw6IGZoaXIuRmhpclVyaXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUubGluay51cmxcclxuICAgKi9cclxuICBfdXJsPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIEJvdGggQnVuZGxlLmxpbmsgYW5kIEJ1bmRsZS5lbnRyeS5saW5rIGFyZSBkZWZpbmVkIHRvIHN1cHBvcnQgcHJvdmlkaW5nIGFkZGl0aW9uYWwgY29udGV4dCB3aGVuIEJ1bmRsZXMgYXJlIHVzZWQgKGUuZy4gW0hBVEVPQVNdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSEFURU9BUykpLiBcclxuICogQnVuZGxlLmVudHJ5LmxpbmsgY29ycmVzcG9uZHMgdG8gbGlua3MgZm91bmQgaW4gdGhlIEhUVFAgaGVhZGVyIGlmIHRoZSByZXNvdXJjZSBpbiB0aGUgZW50cnkgd2FzIFtyZWFkXShodHRwLmh0bWwjcmVhZCkgZGlyZWN0bHkuXHJcbiAqIFRoaXMgc3BlY2lmaWNhdGlvbiBkZWZpbmVzIHNvbWUgc3BlY2lmaWMgdXNlcyBvZiBCdW5kbGUubGluayBmb3IgW3NlYXJjaGluZ10oc2VhcmNoLmh0bWwjY29uZm9ybWFuY2UpIGFuZCBbcGFnaW5nXShodHRwLmh0bWwjcGFnaW5nKSwgYnV0IG5vIHNwZWNpZmljIHVzZXMgZm9yIEJ1bmRsZS5lbnRyeS5saW5rLCBhbmQgbm8gZGVmaW5lZCBmdW5jdGlvbiBpbiBhIHRyYW5zYWN0aW9uIC0gdGhlIG1lYW5pbmcgaXMgaW1wbGVtZW50YXRpb24gc3BlY2lmaWMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQnVuZGxlTGluayBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0J1bmRsZUxpbmsnO1xyXG4gIC8qKlxyXG4gICAqIEEgbmFtZSB3aGljaCBkZXRhaWxzIHRoZSBmdW5jdGlvbmFsIHVzZSBmb3IgdGhpcyBsaW5rIC0gc2VlIFtodHRwOi8vd3d3LmlhbmEub3JnL2Fzc2lnbm1lbnRzL2xpbmstcmVsYXRpb25zL2xpbmstcmVsYXRpb25zLnhodG1sI2xpbmstcmVsYXRpb25zLTFdKGh0dHA6Ly93d3cuaWFuYS5vcmcvYXNzaWdubWVudHMvbGluay1yZWxhdGlvbnMvbGluay1yZWxhdGlvbnMueGh0bWwjbGluay1yZWxhdGlvbnMtMSkuXHJcbiAgICovXHJcbiAgcHVibGljIHJlbGF0aW9uOiBmaGlyLkZoaXJTdHJpbmd8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgcmVmZXJlbmNlIGRldGFpbHMgZm9yIHRoZSBsaW5rLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB1cmw6IGZoaXIuRmhpclVyaXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEJ1bmRsZUxpbmsgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxCdW5kbGVMaW5rQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3JlbGF0aW9uJ10pIHsgdGhpcy5yZWxhdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UucmVsYXRpb259KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVsYXRpb24gPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfcmVsYXRpb24nXSkge1xyXG4gICAgICBpZiAodGhpcy5yZWxhdGlvbikgeyB0aGlzLnJlbGF0aW9uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3JlbGF0aW9uISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMucmVsYXRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fcmVsYXRpb24gYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3VybCddKSB7IHRoaXMudXJsID0gbmV3IGZoaXIuRmhpclVyaSh7dmFsdWU6IHNvdXJjZS51cmx9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudXJsID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3VybCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnVybCkgeyB0aGlzLnVybC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl91cmwhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy51cmwgPSBuZXcgZmhpci5GaGlyVXJpKHNvdXJjZS5fdXJsIGFzIFBhcnRpYWw8Zmhpci5GaGlyVXJpQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKTtcclxuICAgIGlmIChleHByZXNzaW9uID09PSAnJykgeyBleHByZXNzaW9uID0gJ0J1bmRsZS5saW5rJyB9XHJcbiAgICB0aGlzLnZSZXFTKCdyZWxhdGlvbicsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudlJlcVMoJ3VybCcsZXhwcmVzc2lvbilcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBCdW5kbGVFbnRyeVNlYXJjaCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBCdW5kbGVFbnRyeVNlYXJjaEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZXJlIGlzIG9ubHkgb25lIG1vZGUuIEluIHNvbWUgY29ybmVyIGNhc2VzLCBhIHJlc291cmNlIG1heSBiZSBpbmNsdWRlZCBiZWNhdXNlIGl0IGlzIGJvdGggYSBtYXRjaCBhbmQgYW4gaW5jbHVkZS4gSW4gdGhlc2UgY2lyY3Vtc3RhbmNlcywgJ21hdGNoJyB0YWtlcyBwcmVjZWRlbmNlLlxyXG4gICAqL1xyXG4gIG1vZGU/OiBmaGlyLkZoaXJDb2RlPFNlYXJjaEVudHJ5TW9kZUNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUuZW50cnkuc2VhcmNoLm1vZGVcclxuICAgKi9cclxuICBfbW9kZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogU2VydmVycyBhcmUgbm90IHJlcXVpcmVkIHRvIHJldHVybiBhIHJhbmtpbmcgc2NvcmUuIDEgaXMgbW9zdCByZWxldmFudCwgYW5kIDAgaXMgbGVhc3QgcmVsZXZhbnQuIE9mdGVuLCBzZWFyY2ggcmVzdWx0cyBhcmUgc29ydGVkIGJ5IHNjb3JlLCBidXQgdGhlIGNsaWVudCBtYXkgc3BlY2lmeSBhIGRpZmZlcmVudCBzb3J0IG9yZGVyLlxyXG4gICAqIFNlZSBbUGF0aWVudCBNYXRjaF0ocGF0aWVudC1vcGVyYXRpb24tbWF0Y2guaHRtbCkgZm9yIHRoZSBFTVBJIHNlYXJjaCB3aGljaCByZWxhdGVzIHRvIHRoaXMgZWxlbWVudC5cclxuICAgKi9cclxuICBzY29yZT86IGZoaXIuRmhpckRlY2ltYWx8bnVtYmVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLmVudHJ5LnNlYXJjaC5zY29yZVxyXG4gICAqL1xyXG4gIF9zY29yZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbmZvcm1hdGlvbiBhYm91dCB0aGUgc2VhcmNoIHByb2Nlc3MgdGhhdCBsZWFkIHRvIHRoZSBjcmVhdGlvbiBvZiB0aGlzIGVudHJ5LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJ1bmRsZUVudHJ5U2VhcmNoIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQnVuZGxlRW50cnlTZWFyY2gnO1xyXG4gIC8qKlxyXG4gICAqIFRoZXJlIGlzIG9ubHkgb25lIG1vZGUuIEluIHNvbWUgY29ybmVyIGNhc2VzLCBhIHJlc291cmNlIG1heSBiZSBpbmNsdWRlZCBiZWNhdXNlIGl0IGlzIGJvdGggYSBtYXRjaCBhbmQgYW4gaW5jbHVkZS4gSW4gdGhlc2UgY2lyY3Vtc3RhbmNlcywgJ21hdGNoJyB0YWtlcyBwcmVjZWRlbmNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtb2RlPzogZmhpci5GaGlyQ29kZTxTZWFyY2hFbnRyeU1vZGVDb2RlVHlwZT58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFNlcnZlcnMgYXJlIG5vdCByZXF1aXJlZCB0byByZXR1cm4gYSByYW5raW5nIHNjb3JlLiAxIGlzIG1vc3QgcmVsZXZhbnQsIGFuZCAwIGlzIGxlYXN0IHJlbGV2YW50LiBPZnRlbiwgc2VhcmNoIHJlc3VsdHMgYXJlIHNvcnRlZCBieSBzY29yZSwgYnV0IHRoZSBjbGllbnQgbWF5IHNwZWNpZnkgYSBkaWZmZXJlbnQgc29ydCBvcmRlci5cclxuICAgKiBTZWUgW1BhdGllbnQgTWF0Y2hdKHBhdGllbnQtb3BlcmF0aW9uLW1hdGNoLmh0bWwpIGZvciB0aGUgRU1QSSBzZWFyY2ggd2hpY2ggcmVsYXRlcyB0byB0aGlzIGVsZW1lbnQuXHJcbiAgICovXHJcbiAgcHVibGljIHNjb3JlPzogZmhpci5GaGlyRGVjaW1hbHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQnVuZGxlRW50cnlTZWFyY2ggLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxCdW5kbGVFbnRyeVNlYXJjaEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydtb2RlJ10pIHsgdGhpcy5tb2RlID0gbmV3IGZoaXIuRmhpckNvZGU8U2VhcmNoRW50cnlNb2RlQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLm1vZGV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX21vZGUnXSkge1xyXG4gICAgICBpZiAodGhpcy5tb2RlKSB7IHRoaXMubW9kZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9tb2RlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubW9kZSA9IG5ldyBmaGlyLkZoaXJDb2RlPFNlYXJjaEVudHJ5TW9kZUNvZGVUeXBlPihzb3VyY2UuX21vZGUgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3Njb3JlJ10pIHsgdGhpcy5zY29yZSA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHt2YWx1ZTogc291cmNlLnNjb3JlfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zY29yZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnNjb3JlKSB7IHRoaXMuc2NvcmUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc2NvcmUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zY29yZSA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHNvdXJjZS5fc2NvcmUgYXMgUGFydGlhbDxmaGlyLkZoaXJEZWNpbWFsQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKTtcclxuICAgIGlmIChleHByZXNzaW9uID09PSAnJykgeyBleHByZXNzaW9uID0gJ0J1bmRsZS5lbnRyeS5zZWFyY2gnIH1cclxuICAgIHRoaXMudk9wdFNWKCdtb2RlJyxleHByZXNzaW9uLCdTZWFyY2hFbnRyeU1vZGUnLFNlYXJjaEVudHJ5TW9kZVZzVmFsaWRhdGlvbiwncicpXHJcbiAgICB0aGlzLnZPcHRTKCdzY29yZScsZXhwcmVzc2lvbilcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBCdW5kbGVFbnRyeVJlcXVlc3QgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQnVuZGxlRW50cnlSZXF1ZXN0QXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogSW4gYSB0cmFuc2FjdGlvbiBvciBiYXRjaCwgdGhpcyBpcyB0aGUgSFRUUCBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQgZm9yIHRoaXMgZW50cnkuIEluIGEgaGlzdG9yeSBidW5kbGUsIHRoaXMgaW5kaWNhdGVzIHRoZSBIVFRQIGFjdGlvbiB0aGF0IG9jY3VycmVkLlxyXG4gICAqL1xyXG4gIG1ldGhvZDogZmhpci5GaGlyQ29kZTxIdHRwVmVyYkNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUuZW50cnkucmVxdWVzdC5tZXRob2RcclxuICAgKi9cclxuICBfbWV0aG9kPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBFLmcuIGZvciBhIFBhdGllbnQgQ3JlYXRlLCB0aGUgbWV0aG9kIHdvdWxkIGJlIFwiUE9TVFwiIGFuZCB0aGUgVVJMIHdvdWxkIGJlIFwiUGF0aWVudFwiLiBGb3IgYSBQYXRpZW50IFVwZGF0ZSwgdGhlIG1ldGhvZCB3b3VsZCBiZSBQVVQgYW5kIHRoZSBVUkwgd291bGQgYmUgXCJQYXRpZW50L1tpZF1cIi5cclxuICAgKi9cclxuICB1cmw6IGZoaXIuRmhpclVyaXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUuZW50cnkucmVxdWVzdC51cmxcclxuICAgKi9cclxuICBfdXJsPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBJZiB0aGUgRVRhZyB2YWx1ZXMgbWF0Y2gsIHJldHVybiBhIDMwNCBOb3QgTW9kaWZpZWQgc3RhdHVzLiBTZWUgdGhlIEFQSSBkb2N1bWVudGF0aW9uIGZvciBbXCJDb25kaXRpb25hbCBSZWFkXCJdKGh0dHAuaHRtbCNjcmVhZCkuXHJcbiAgICovXHJcbiAgaWZOb25lTWF0Y2g/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLmVudHJ5LnJlcXVlc3QuaWZOb25lTWF0Y2hcclxuICAgKi9cclxuICBfaWZOb25lTWF0Y2g/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIE9ubHkgcGVyZm9ybSB0aGUgb3BlcmF0aW9uIGlmIHRoZSBsYXN0IHVwZGF0ZWQgZGF0ZSBtYXRjaGVzLiBTZWUgdGhlIEFQSSBkb2N1bWVudGF0aW9uIGZvciBbXCJDb25kaXRpb25hbCBSZWFkXCJdKGh0dHAuaHRtbCNjcmVhZCkuXHJcbiAgICovXHJcbiAgaWZNb2RpZmllZFNpbmNlPzogZmhpci5GaGlySW5zdGFudHxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUuZW50cnkucmVxdWVzdC5pZk1vZGlmaWVkU2luY2VcclxuICAgKi9cclxuICBfaWZNb2RpZmllZFNpbmNlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBPbmx5IHBlcmZvcm0gdGhlIG9wZXJhdGlvbiBpZiB0aGUgRXRhZyB2YWx1ZSBtYXRjaGVzLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlIHRoZSBBUEkgc2VjdGlvbiBbXCJNYW5hZ2luZyBSZXNvdXJjZSBDb250ZW50aW9uXCJdKGh0dHAuaHRtbCNjb25jdXJyZW5jeSkuXHJcbiAgICovXHJcbiAgaWZNYXRjaD86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUuZW50cnkucmVxdWVzdC5pZk1hdGNoXHJcbiAgICovXHJcbiAgX2lmTWF0Y2g/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEluc3RydWN0IHRoZSBzZXJ2ZXIgbm90IHRvIHBlcmZvcm0gdGhlIGNyZWF0ZSBpZiBhIHNwZWNpZmllZCByZXNvdXJjZSBhbHJlYWR5IGV4aXN0cy4gRm9yIGZ1cnRoZXIgaW5mb3JtYXRpb24sIHNlZSB0aGUgQVBJIGRvY3VtZW50YXRpb24gZm9yIFtcIkNvbmRpdGlvbmFsIENyZWF0ZVwiXShodHRwLmh0bWwjY2NyZWF0ZSkuIFRoaXMgaXMganVzdCB0aGUgcXVlcnkgcG9ydGlvbiBvZiB0aGUgVVJMIC0gd2hhdCBmb2xsb3dzIHRoZSBcIj9cIiAobm90IGluY2x1ZGluZyB0aGUgXCI/XCIpLlxyXG4gICAqL1xyXG4gIGlmTm9uZUV4aXN0PzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEJ1bmRsZS5lbnRyeS5yZXF1ZXN0LmlmTm9uZUV4aXN0XHJcbiAgICovXHJcbiAgX2lmTm9uZUV4aXN0PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIEFkZGl0aW9uYWwgaW5mb3JtYXRpb24gYWJvdXQgaG93IHRoaXMgZW50cnkgc2hvdWxkIGJlIHByb2Nlc3NlZCBhcyBwYXJ0IG9mIGEgdHJhbnNhY3Rpb24gb3IgYmF0Y2guICBGb3IgaGlzdG9yeSwgaXQgc2hvd3MgaG93IHRoZSBlbnRyeSB3YXMgcHJvY2Vzc2VkIHRvIGNyZWF0ZSB0aGUgdmVyc2lvbiBjb250YWluZWQgaW4gdGhlIGVudHJ5LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJ1bmRsZUVudHJ5UmVxdWVzdCBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0J1bmRsZUVudHJ5UmVxdWVzdCc7XHJcbiAgLyoqXHJcbiAgICogSW4gYSB0cmFuc2FjdGlvbiBvciBiYXRjaCwgdGhpcyBpcyB0aGUgSFRUUCBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQgZm9yIHRoaXMgZW50cnkuIEluIGEgaGlzdG9yeSBidW5kbGUsIHRoaXMgaW5kaWNhdGVzIHRoZSBIVFRQIGFjdGlvbiB0aGF0IG9jY3VycmVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtZXRob2Q6IGZoaXIuRmhpckNvZGU8SHR0cFZlcmJDb2RlVHlwZT58bnVsbDtcclxuICAvKipcclxuICAgKiBFLmcuIGZvciBhIFBhdGllbnQgQ3JlYXRlLCB0aGUgbWV0aG9kIHdvdWxkIGJlIFwiUE9TVFwiIGFuZCB0aGUgVVJMIHdvdWxkIGJlIFwiUGF0aWVudFwiLiBGb3IgYSBQYXRpZW50IFVwZGF0ZSwgdGhlIG1ldGhvZCB3b3VsZCBiZSBQVVQgYW5kIHRoZSBVUkwgd291bGQgYmUgXCJQYXRpZW50L1tpZF1cIi5cclxuICAgKi9cclxuICBwdWJsaWMgdXJsOiBmaGlyLkZoaXJVcml8bnVsbDtcclxuICAvKipcclxuICAgKiBJZiB0aGUgRVRhZyB2YWx1ZXMgbWF0Y2gsIHJldHVybiBhIDMwNCBOb3QgTW9kaWZpZWQgc3RhdHVzLiBTZWUgdGhlIEFQSSBkb2N1bWVudGF0aW9uIGZvciBbXCJDb25kaXRpb25hbCBSZWFkXCJdKGh0dHAuaHRtbCNjcmVhZCkuXHJcbiAgICovXHJcbiAgcHVibGljIGlmTm9uZU1hdGNoPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBPbmx5IHBlcmZvcm0gdGhlIG9wZXJhdGlvbiBpZiB0aGUgbGFzdCB1cGRhdGVkIGRhdGUgbWF0Y2hlcy4gU2VlIHRoZSBBUEkgZG9jdW1lbnRhdGlvbiBmb3IgW1wiQ29uZGl0aW9uYWwgUmVhZFwiXShodHRwLmh0bWwjY3JlYWQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZk1vZGlmaWVkU2luY2U/OiBmaGlyLkZoaXJJbnN0YW50fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBPbmx5IHBlcmZvcm0gdGhlIG9wZXJhdGlvbiBpZiB0aGUgRXRhZyB2YWx1ZSBtYXRjaGVzLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlIHRoZSBBUEkgc2VjdGlvbiBbXCJNYW5hZ2luZyBSZXNvdXJjZSBDb250ZW50aW9uXCJdKGh0dHAuaHRtbCNjb25jdXJyZW5jeSkuXHJcbiAgICovXHJcbiAgcHVibGljIGlmTWF0Y2g/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluc3RydWN0IHRoZSBzZXJ2ZXIgbm90IHRvIHBlcmZvcm0gdGhlIGNyZWF0ZSBpZiBhIHNwZWNpZmllZCByZXNvdXJjZSBhbHJlYWR5IGV4aXN0cy4gRm9yIGZ1cnRoZXIgaW5mb3JtYXRpb24sIHNlZSB0aGUgQVBJIGRvY3VtZW50YXRpb24gZm9yIFtcIkNvbmRpdGlvbmFsIENyZWF0ZVwiXShodHRwLmh0bWwjY2NyZWF0ZSkuIFRoaXMgaXMganVzdCB0aGUgcXVlcnkgcG9ydGlvbiBvZiB0aGUgVVJMIC0gd2hhdCBmb2xsb3dzIHRoZSBcIj9cIiAobm90IGluY2x1ZGluZyB0aGUgXCI/XCIpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZk5vbmVFeGlzdD86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQnVuZGxlRW50cnlSZXF1ZXN0IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8QnVuZGxlRW50cnlSZXF1ZXN0QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ21ldGhvZCddKSB7IHRoaXMubWV0aG9kID0gbmV3IGZoaXIuRmhpckNvZGU8SHR0cFZlcmJDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2UubWV0aG9kfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm1ldGhvZCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19tZXRob2QnXSkge1xyXG4gICAgICBpZiAodGhpcy5tZXRob2QpIHsgdGhpcy5tZXRob2QuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbWV0aG9kISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubWV0aG9kID0gbmV3IGZoaXIuRmhpckNvZGU8SHR0cFZlcmJDb2RlVHlwZT4oc291cmNlLl9tZXRob2QgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3VybCddKSB7IHRoaXMudXJsID0gbmV3IGZoaXIuRmhpclVyaSh7dmFsdWU6IHNvdXJjZS51cmx9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudXJsID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3VybCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnVybCkgeyB0aGlzLnVybC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl91cmwhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy51cmwgPSBuZXcgZmhpci5GaGlyVXJpKHNvdXJjZS5fdXJsIGFzIFBhcnRpYWw8Zmhpci5GaGlyVXJpQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydpZk5vbmVNYXRjaCddKSB7IHRoaXMuaWZOb25lTWF0Y2ggPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmlmTm9uZU1hdGNofSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19pZk5vbmVNYXRjaCddKSB7XHJcbiAgICAgIGlmICh0aGlzLmlmTm9uZU1hdGNoKSB7IHRoaXMuaWZOb25lTWF0Y2guYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5faWZOb25lTWF0Y2ghKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5pZk5vbmVNYXRjaCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9pZk5vbmVNYXRjaCBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnaWZNb2RpZmllZFNpbmNlJ10pIHsgdGhpcy5pZk1vZGlmaWVkU2luY2UgPSBuZXcgZmhpci5GaGlySW5zdGFudCh7dmFsdWU6IHNvdXJjZS5pZk1vZGlmaWVkU2luY2V9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2lmTW9kaWZpZWRTaW5jZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLmlmTW9kaWZpZWRTaW5jZSkgeyB0aGlzLmlmTW9kaWZpZWRTaW5jZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9pZk1vZGlmaWVkU2luY2UhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5pZk1vZGlmaWVkU2luY2UgPSBuZXcgZmhpci5GaGlySW5zdGFudChzb3VyY2UuX2lmTW9kaWZpZWRTaW5jZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckluc3RhbnRBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2lmTWF0Y2gnXSkgeyB0aGlzLmlmTWF0Y2ggPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmlmTWF0Y2h9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2lmTWF0Y2gnXSkge1xyXG4gICAgICBpZiAodGhpcy5pZk1hdGNoKSB7IHRoaXMuaWZNYXRjaC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9pZk1hdGNoISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuaWZNYXRjaCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9pZk1hdGNoIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydpZk5vbmVFeGlzdCddKSB7IHRoaXMuaWZOb25lRXhpc3QgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmlmTm9uZUV4aXN0fSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19pZk5vbmVFeGlzdCddKSB7XHJcbiAgICAgIGlmICh0aGlzLmlmTm9uZUV4aXN0KSB7IHRoaXMuaWZOb25lRXhpc3QuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5faWZOb25lRXhpc3QhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5pZk5vbmVFeGlzdCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9pZk5vbmVFeGlzdCBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdCdW5kbGUuZW50cnkucmVxdWVzdCcgfVxyXG4gICAgdGhpcy52UmVxU1YoJ21ldGhvZCcsZXhwcmVzc2lvbiwnSHR0cFZlcmInLEh0dHBWZXJiVnNWYWxpZGF0aW9uLCdyJylcclxuICAgIHRoaXMudlJlcVMoJ3VybCcsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ2lmTm9uZU1hdGNoJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnaWZNb2RpZmllZFNpbmNlJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnaWZNYXRjaCcsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ2lmTm9uZUV4aXN0JyxleHByZXNzaW9uKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEJ1bmRsZUVudHJ5UmVzcG9uc2UgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQnVuZGxlRW50cnlSZXNwb25zZUFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzdGF0dXMgY29kZSByZXR1cm5lZCBieSBwcm9jZXNzaW5nIHRoaXMgZW50cnkuIFRoZSBzdGF0dXMgU0hBTEwgc3RhcnQgd2l0aCBhIDMgZGlnaXQgSFRUUCBjb2RlIChlLmcuIDQwNCkgYW5kIG1heSBjb250YWluIHRoZSBzdGFuZGFyZCBIVFRQIGRlc2NyaXB0aW9uIGFzc29jaWF0ZWQgd2l0aCB0aGUgc3RhdHVzIGNvZGUuXHJcbiAgICovXHJcbiAgc3RhdHVzOiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLmVudHJ5LnJlc3BvbnNlLnN0YXR1c1xyXG4gICAqL1xyXG4gIF9zdGF0dXM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsb2NhdGlvbiBoZWFkZXIgY3JlYXRlZCBieSBwcm9jZXNzaW5nIHRoaXMgb3BlcmF0aW9uLCBwb3B1bGF0ZWQgaWYgdGhlIG9wZXJhdGlvbiByZXR1cm5zIGEgbG9jYXRpb24uXHJcbiAgICovXHJcbiAgbG9jYXRpb24/OiBmaGlyLkZoaXJVcml8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLmVudHJ5LnJlc3BvbnNlLmxvY2F0aW9uXHJcbiAgICovXHJcbiAgX2xvY2F0aW9uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBFdGFncyBtYXRjaCB0aGUgUmVzb3VyY2UubWV0YS52ZXJzaW9uSWQuIFRoZSBFVGFnIGhhcyB0byBtYXRjaCB0aGUgdmVyc2lvbiBpZCBpbiB0aGUgaGVhZGVyIGlmIGEgcmVzb3VyY2UgaXMgaW5jbHVkZWQuXHJcbiAgICovXHJcbiAgZXRhZz86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUuZW50cnkucmVzcG9uc2UuZXRhZ1xyXG4gICAqL1xyXG4gIF9ldGFnPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGlzIGhhcyB0byBtYXRjaCB0aGUgc2FtZSB0aW1lIGluIHRoZSBtZXRhIGhlYWRlciAobWV0YS5sYXN0VXBkYXRlZCkgaWYgYSByZXNvdXJjZSBpcyBpbmNsdWRlZC5cclxuICAgKi9cclxuICBsYXN0TW9kaWZpZWQ/OiBmaGlyLkZoaXJJbnN0YW50fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEJ1bmRsZS5lbnRyeS5yZXNwb25zZS5sYXN0TW9kaWZpZWRcclxuICAgKi9cclxuICBfbGFzdE1vZGlmaWVkPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBGb3IgYSBQT1NUL1BVVCBvcGVyYXRpb24sIHRoaXMgaXMgdGhlIGVxdWl2YWxlbnQgb3V0Y29tZSB0aGF0IHdvdWxkIGJlIHJldHVybmVkIGZvciBwcmVmZXIgPSBvcGVyYXRpb25vdXRjb21lIC0gZXhjZXB0IHRoYXQgdGhlIHJlc291cmNlIGlzIGFsd2F5cyByZXR1cm5lZCB3aGV0aGVyIG9yIG5vdCB0aGUgb3V0Y29tZSBpcyByZXR1cm5lZC5cclxuICAgKiBUaGlzIG91dGNvbWUgaXMgbm90IHVzZWQgZm9yIGVycm9yIHJlc3BvbnNlcyBpbiBiYXRjaC90cmFuc2FjdGlvbiwgb25seSBmb3IgaGludHMgYW5kIHdhcm5pbmdzLiBJbiBhIGJhdGNoIG9wZXJhdGlvbiwgdGhlIGVycm9yIHdpbGwgYmUgaW4gQnVuZGxlLmVudHJ5LnJlc3BvbnNlLCBhbmQgZm9yIHRyYW5zYWN0aW9uLCB0aGVyZSB3aWxsIGJlIGEgc2luZ2xlIE9wZXJhdGlvbk91dGNvbWUgaW5zdGVhZCBvZiBhIGJ1bmRsZSBpbiB0aGUgY2FzZSBvZiBhbiBlcnJvci5cclxuICAgKi9cclxuICBvdXRjb21lPzogZmhpci5SZXNvdXJjZUFyZ3N8YW55fHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEluZGljYXRlcyB0aGUgcmVzdWx0cyBvZiBwcm9jZXNzaW5nIHRoZSBjb3JyZXNwb25kaW5nICdyZXF1ZXN0JyBlbnRyeSBpbiB0aGUgYmF0Y2ggb3IgdHJhbnNhY3Rpb24gYmVpbmcgcmVzcG9uZGVkIHRvIG9yIHdoYXQgdGhlIHJlc3VsdHMgb2YgYW4gb3BlcmF0aW9uIHdoZXJlIHdoZW4gcmV0dXJuaW5nIGhpc3RvcnkuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQnVuZGxlRW50cnlSZXNwb25zZSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0J1bmRsZUVudHJ5UmVzcG9uc2UnO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzdGF0dXMgY29kZSByZXR1cm5lZCBieSBwcm9jZXNzaW5nIHRoaXMgZW50cnkuIFRoZSBzdGF0dXMgU0hBTEwgc3RhcnQgd2l0aCBhIDMgZGlnaXQgSFRUUCBjb2RlIChlLmcuIDQwNCkgYW5kIG1heSBjb250YWluIHRoZSBzdGFuZGFyZCBIVFRQIGRlc2NyaXB0aW9uIGFzc29jaWF0ZWQgd2l0aCB0aGUgc3RhdHVzIGNvZGUuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1czogZmhpci5GaGlyU3RyaW5nfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGxvY2F0aW9uIGhlYWRlciBjcmVhdGVkIGJ5IHByb2Nlc3NpbmcgdGhpcyBvcGVyYXRpb24sIHBvcHVsYXRlZCBpZiB0aGUgb3BlcmF0aW9uIHJldHVybnMgYSBsb2NhdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgbG9jYXRpb24/OiBmaGlyLkZoaXJVcml8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV0YWdzIG1hdGNoIHRoZSBSZXNvdXJjZS5tZXRhLnZlcnNpb25JZC4gVGhlIEVUYWcgaGFzIHRvIG1hdGNoIHRoZSB2ZXJzaW9uIGlkIGluIHRoZSBoZWFkZXIgaWYgYSByZXNvdXJjZSBpcyBpbmNsdWRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgZXRhZz86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBoYXMgdG8gbWF0Y2ggdGhlIHNhbWUgdGltZSBpbiB0aGUgbWV0YSBoZWFkZXIgKG1ldGEubGFzdFVwZGF0ZWQpIGlmIGEgcmVzb3VyY2UgaXMgaW5jbHVkZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGxhc3RNb2RpZmllZD86IGZoaXIuRmhpckluc3RhbnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEZvciBhIFBPU1QvUFVUIG9wZXJhdGlvbiwgdGhpcyBpcyB0aGUgZXF1aXZhbGVudCBvdXRjb21lIHRoYXQgd291bGQgYmUgcmV0dXJuZWQgZm9yIHByZWZlciA9IG9wZXJhdGlvbm91dGNvbWUgLSBleGNlcHQgdGhhdCB0aGUgcmVzb3VyY2UgaXMgYWx3YXlzIHJldHVybmVkIHdoZXRoZXIgb3Igbm90IHRoZSBvdXRjb21lIGlzIHJldHVybmVkLlxyXG4gICAqIFRoaXMgb3V0Y29tZSBpcyBub3QgdXNlZCBmb3IgZXJyb3IgcmVzcG9uc2VzIGluIGJhdGNoL3RyYW5zYWN0aW9uLCBvbmx5IGZvciBoaW50cyBhbmQgd2FybmluZ3MuIEluIGEgYmF0Y2ggb3BlcmF0aW9uLCB0aGUgZXJyb3Igd2lsbCBiZSBpbiBCdW5kbGUuZW50cnkucmVzcG9uc2UsIGFuZCBmb3IgdHJhbnNhY3Rpb24sIHRoZXJlIHdpbGwgYmUgYSBzaW5nbGUgT3BlcmF0aW9uT3V0Y29tZSBpbnN0ZWFkIG9mIGEgYnVuZGxlIGluIHRoZSBjYXNlIG9mIGFuIGVycm9yLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdXRjb21lPzogZmhpci5GaGlyUmVzb3VyY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEJ1bmRsZUVudHJ5UmVzcG9uc2UgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxCdW5kbGVFbnRyeVJlc3BvbnNlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3N0YXR1cyddKSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5zdGF0dXN9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3N0YXR1cyddKSB7XHJcbiAgICAgIGlmICh0aGlzLnN0YXR1cykgeyB0aGlzLnN0YXR1cy5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zdGF0dXMhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fc3RhdHVzIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydsb2NhdGlvbiddKSB7IHRoaXMubG9jYXRpb24gPSBuZXcgZmhpci5GaGlyVXJpKHt2YWx1ZTogc291cmNlLmxvY2F0aW9ufSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19sb2NhdGlvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLmxvY2F0aW9uKSB7IHRoaXMubG9jYXRpb24uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbG9jYXRpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5sb2NhdGlvbiA9IG5ldyBmaGlyLkZoaXJVcmkoc291cmNlLl9sb2NhdGlvbiBhcyBQYXJ0aWFsPGZoaXIuRmhpclVyaUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnZXRhZyddKSB7IHRoaXMuZXRhZyA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuZXRhZ30pOyB9XHJcbiAgICBpZiAoc291cmNlWydfZXRhZyddKSB7XHJcbiAgICAgIGlmICh0aGlzLmV0YWcpIHsgdGhpcy5ldGFnLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2V0YWchKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5ldGFnID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2V0YWcgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2xhc3RNb2RpZmllZCddKSB7IHRoaXMubGFzdE1vZGlmaWVkID0gbmV3IGZoaXIuRmhpckluc3RhbnQoe3ZhbHVlOiBzb3VyY2UubGFzdE1vZGlmaWVkfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19sYXN0TW9kaWZpZWQnXSkge1xyXG4gICAgICBpZiAodGhpcy5sYXN0TW9kaWZpZWQpIHsgdGhpcy5sYXN0TW9kaWZpZWQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbGFzdE1vZGlmaWVkISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubGFzdE1vZGlmaWVkID0gbmV3IGZoaXIuRmhpckluc3RhbnQoc291cmNlLl9sYXN0TW9kaWZpZWQgYXMgUGFydGlhbDxmaGlyLkZoaXJJbnN0YW50QXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydvdXRjb21lJ10pIHsgdGhpcy5vdXRjb21lID0gKGZoaXIucmVzb3VyY2VGYWN0b3J5KHNvdXJjZS5vdXRjb21lKSA/PyB1bmRlZmluZWQpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKTtcclxuICAgIGlmIChleHByZXNzaW9uID09PSAnJykgeyBleHByZXNzaW9uID0gJ0J1bmRsZS5lbnRyeS5yZXNwb25zZScgfVxyXG4gICAgdGhpcy52UmVxUygnc3RhdHVzJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnbG9jYXRpb24nLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdldGFnJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnbGFzdE1vZGlmaWVkJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0Uygnb3V0Y29tZScsZXhwcmVzc2lvbilcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBCdW5kbGVFbnRyeSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBCdW5kbGVFbnRyeUFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEEgc2VyaWVzIG9mIGxpbmtzIHRoYXQgcHJvdmlkZSBjb250ZXh0IHRvIHRoaXMgZW50cnkuXHJcbiAgICovXHJcbiAgbGluaz86IGZoaXIuQnVuZGxlTGlua0FyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogZnVsbFVybCBtaWdodCBub3QgYmUgW3VuaXF1ZSBpbiB0aGUgY29udGV4dCBvZiBhIHJlc291cmNlXShidW5kbGUuaHRtbCNidW5kbGUtdW5pcXVlKS4gTm90ZSB0aGF0IHNpbmNlIFtGSElSIHJlc291cmNlcyBkbyBub3QgbmVlZCB0byBiZSBzZXJ2ZWQgdGhyb3VnaCB0aGUgRkhJUiBBUEldKHJlZmVyZW5jZXMuaHRtbCksIHRoZSBmdWxsVVJMIG1pZ2h0IGJlIGEgVVJOIG9yIGFuIGFic29sdXRlIFVSTCB0aGF0IGRvZXMgbm90IGVuZCB3aXRoIHRoZSBsb2dpY2FsIGlkIG9mIHRoZSByZXNvdXJjZSAoUmVzb3VyY2UuaWQpLiBIb3dldmVyLCBidXQgaWYgdGhlIGZ1bGxVcmwgZG9lcyBsb29rIGxpa2UgYSBSRVNUZnVsIHNlcnZlciBVUkwgKGUuZy4gbWVldHMgdGhlIFtyZWdleF0ocmVmZXJlbmNlcy5odG1sI3JlZ2V4KSwgdGhlbiB0aGUgJ2lkJyBwb3J0aW9uIG9mIHRoZSBmdWxsVXJsIFNIQUxMIGVuZCB3aXRoIHRoZSBSZXNvdXJjZS5pZC5cclxuICAgKiBOb3RlIHRoYXQgdGhlIGZ1bGxVcmwgaXMgbm90IHRoZSBzYW1lIGFzIHRoZSBjYW5vbmljYWwgVVJMIC0gaXQncyBhbiBhYnNvbHV0ZSB1cmwgZm9yIGFuIGVuZHBvaW50IHNlcnZpbmcgdGhlIHJlc291cmNlICh0aGVzZSB3aWxsIGhhcHBlbiB0byBoYXZlIHRoZSBzYW1lIHZhbHVlIG9uIHRoZSBjYW5vbmljYWwgc2VydmVyIGZvciB0aGUgcmVzb3VyY2Ugd2l0aCB0aGUgY2Fub25pY2FsIFVSTCkuXHJcbiAgICovXHJcbiAgZnVsbFVybD86IGZoaXIuRmhpclVyaXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUuZW50cnkuZnVsbFVybFxyXG4gICAqL1xyXG4gIF9mdWxsVXJsPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgUmVzb3VyY2UgZm9yIHRoZSBlbnRyeS4gVGhlIHB1cnBvc2UvbWVhbmluZyBvZiB0aGUgcmVzb3VyY2UgaXMgZGV0ZXJtaW5lZCBieSB0aGUgQnVuZGxlLnR5cGUuXHJcbiAgICovXHJcbiAgcmVzb3VyY2U/OiBmaGlyLlJlc291cmNlQXJnc3xhbnl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZm9ybWF0aW9uIGFib3V0IHRoZSBzZWFyY2ggcHJvY2VzcyB0aGF0IGxlYWQgdG8gdGhlIGNyZWF0aW9uIG9mIHRoaXMgZW50cnkuXHJcbiAgICovXHJcbiAgc2VhcmNoPzogZmhpci5CdW5kbGVFbnRyeVNlYXJjaEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFkZGl0aW9uYWwgaW5mb3JtYXRpb24gYWJvdXQgaG93IHRoaXMgZW50cnkgc2hvdWxkIGJlIHByb2Nlc3NlZCBhcyBwYXJ0IG9mIGEgdHJhbnNhY3Rpb24gb3IgYmF0Y2guICBGb3IgaGlzdG9yeSwgaXQgc2hvd3MgaG93IHRoZSBlbnRyeSB3YXMgcHJvY2Vzc2VkIHRvIGNyZWF0ZSB0aGUgdmVyc2lvbiBjb250YWluZWQgaW4gdGhlIGVudHJ5LlxyXG4gICAqL1xyXG4gIHJlcXVlc3Q/OiBmaGlyLkJ1bmRsZUVudHJ5UmVxdWVzdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB0aGUgcmVzdWx0cyBvZiBwcm9jZXNzaW5nIHRoZSBjb3JyZXNwb25kaW5nICdyZXF1ZXN0JyBlbnRyeSBpbiB0aGUgYmF0Y2ggb3IgdHJhbnNhY3Rpb24gYmVpbmcgcmVzcG9uZGVkIHRvIG9yIHdoYXQgdGhlIHJlc3VsdHMgb2YgYW4gb3BlcmF0aW9uIHdoZXJlIHdoZW4gcmV0dXJuaW5nIGhpc3RvcnkuXHJcbiAgICovXHJcbiAgcmVzcG9uc2U/OiBmaGlyLkJ1bmRsZUVudHJ5UmVzcG9uc2VBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFuIGVudHJ5IGluIGEgYnVuZGxlIHJlc291cmNlIC0gd2lsbCBlaXRoZXIgY29udGFpbiBhIHJlc291cmNlIG9yIGluZm9ybWF0aW9uIGFib3V0IGEgcmVzb3VyY2UgKHRyYW5zYWN0aW9ucyBhbmQgaGlzdG9yeSBvbmx5KS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBCdW5kbGVFbnRyeSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0J1bmRsZUVudHJ5JztcclxuICAvKipcclxuICAgKiBBIHNlcmllcyBvZiBsaW5rcyB0aGF0IHByb3ZpZGUgY29udGV4dCB0byB0aGlzIGVudHJ5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBsaW5rOiBmaGlyLkJ1bmRsZUxpbmtbXTtcclxuICAvKipcclxuICAgKiBmdWxsVXJsIG1pZ2h0IG5vdCBiZSBbdW5pcXVlIGluIHRoZSBjb250ZXh0IG9mIGEgcmVzb3VyY2VdKGJ1bmRsZS5odG1sI2J1bmRsZS11bmlxdWUpLiBOb3RlIHRoYXQgc2luY2UgW0ZISVIgcmVzb3VyY2VzIGRvIG5vdCBuZWVkIHRvIGJlIHNlcnZlZCB0aHJvdWdoIHRoZSBGSElSIEFQSV0ocmVmZXJlbmNlcy5odG1sKSwgdGhlIGZ1bGxVUkwgbWlnaHQgYmUgYSBVUk4gb3IgYW4gYWJzb2x1dGUgVVJMIHRoYXQgZG9lcyBub3QgZW5kIHdpdGggdGhlIGxvZ2ljYWwgaWQgb2YgdGhlIHJlc291cmNlIChSZXNvdXJjZS5pZCkuIEhvd2V2ZXIsIGJ1dCBpZiB0aGUgZnVsbFVybCBkb2VzIGxvb2sgbGlrZSBhIFJFU1RmdWwgc2VydmVyIFVSTCAoZS5nLiBtZWV0cyB0aGUgW3JlZ2V4XShyZWZlcmVuY2VzLmh0bWwjcmVnZXgpLCB0aGVuIHRoZSAnaWQnIHBvcnRpb24gb2YgdGhlIGZ1bGxVcmwgU0hBTEwgZW5kIHdpdGggdGhlIFJlc291cmNlLmlkLlxyXG4gICAqIE5vdGUgdGhhdCB0aGUgZnVsbFVybCBpcyBub3QgdGhlIHNhbWUgYXMgdGhlIGNhbm9uaWNhbCBVUkwgLSBpdCdzIGFuIGFic29sdXRlIHVybCBmb3IgYW4gZW5kcG9pbnQgc2VydmluZyB0aGUgcmVzb3VyY2UgKHRoZXNlIHdpbGwgaGFwcGVuIHRvIGhhdmUgdGhlIHNhbWUgdmFsdWUgb24gdGhlIGNhbm9uaWNhbCBzZXJ2ZXIgZm9yIHRoZSByZXNvdXJjZSB3aXRoIHRoZSBjYW5vbmljYWwgVVJMKS5cclxuICAgKi9cclxuICBwdWJsaWMgZnVsbFVybD86IGZoaXIuRmhpclVyaXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIFJlc291cmNlIGZvciB0aGUgZW50cnkuIFRoZSBwdXJwb3NlL21lYW5pbmcgb2YgdGhlIHJlc291cmNlIGlzIGRldGVybWluZWQgYnkgdGhlIEJ1bmRsZS50eXBlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZXNvdXJjZT86IGZoaXIuRmhpclJlc291cmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmZvcm1hdGlvbiBhYm91dCB0aGUgc2VhcmNoIHByb2Nlc3MgdGhhdCBsZWFkIHRvIHRoZSBjcmVhdGlvbiBvZiB0aGlzIGVudHJ5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZWFyY2g/OiBmaGlyLkJ1bmRsZUVudHJ5U2VhcmNofHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBZGRpdGlvbmFsIGluZm9ybWF0aW9uIGFib3V0IGhvdyB0aGlzIGVudHJ5IHNob3VsZCBiZSBwcm9jZXNzZWQgYXMgcGFydCBvZiBhIHRyYW5zYWN0aW9uIG9yIGJhdGNoLiAgRm9yIGhpc3RvcnksIGl0IHNob3dzIGhvdyB0aGUgZW50cnkgd2FzIHByb2Nlc3NlZCB0byBjcmVhdGUgdGhlIHZlcnNpb24gY29udGFpbmVkIGluIHRoZSBlbnRyeS5cclxuICAgKi9cclxuICBwdWJsaWMgcmVxdWVzdD86IGZoaXIuQnVuZGxlRW50cnlSZXF1ZXN0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgdGhlIHJlc3VsdHMgb2YgcHJvY2Vzc2luZyB0aGUgY29ycmVzcG9uZGluZyAncmVxdWVzdCcgZW50cnkgaW4gdGhlIGJhdGNoIG9yIHRyYW5zYWN0aW9uIGJlaW5nIHJlc3BvbmRlZCB0byBvciB3aGF0IHRoZSByZXN1bHRzIG9mIGFuIG9wZXJhdGlvbiB3aGVyZSB3aGVuIHJldHVybmluZyBoaXN0b3J5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZXNwb25zZT86IGZoaXIuQnVuZGxlRW50cnlSZXNwb25zZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQnVuZGxlRW50cnkgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxCdW5kbGVFbnRyeUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydsaW5rJ10pIHsgdGhpcy5saW5rID0gc291cmNlLmxpbmsubWFwKCh4KSA9PiBuZXcgZmhpci5CdW5kbGVMaW5rKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubGluayA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydmdWxsVXJsJ10pIHsgdGhpcy5mdWxsVXJsID0gbmV3IGZoaXIuRmhpclVyaSh7dmFsdWU6IHNvdXJjZS5mdWxsVXJsfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19mdWxsVXJsJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZnVsbFVybCkgeyB0aGlzLmZ1bGxVcmwuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZnVsbFVybCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmZ1bGxVcmwgPSBuZXcgZmhpci5GaGlyVXJpKHNvdXJjZS5fZnVsbFVybCBhcyBQYXJ0aWFsPGZoaXIuRmhpclVyaUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVzb3VyY2UnXSkgeyB0aGlzLnJlc291cmNlID0gKGZoaXIucmVzb3VyY2VGYWN0b3J5KHNvdXJjZS5yZXNvdXJjZSkgPz8gdW5kZWZpbmVkKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2VhcmNoJ10pIHsgdGhpcy5zZWFyY2ggPSBuZXcgZmhpci5CdW5kbGVFbnRyeVNlYXJjaChzb3VyY2Uuc2VhcmNoKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVxdWVzdCddKSB7IHRoaXMucmVxdWVzdCA9IG5ldyBmaGlyLkJ1bmRsZUVudHJ5UmVxdWVzdChzb3VyY2UucmVxdWVzdCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3Jlc3BvbnNlJ10pIHsgdGhpcy5yZXNwb25zZSA9IG5ldyBmaGlyLkJ1bmRsZUVudHJ5UmVzcG9uc2Uoc291cmNlLnJlc3BvbnNlKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdCdW5kbGUuZW50cnknIH1cclxuICAgIHRoaXMudk9wdEEoJ2xpbmsnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdmdWxsVXJsJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygncmVzb3VyY2UnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdzZWFyY2gnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdyZXF1ZXN0JyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygncmVzcG9uc2UnLGV4cHJlc3Npb24pXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxuXHJcbi8qKlxyXG4gKiBBY2Nlc3MgYSBidW5kbGUuZW50cnlbXS5yZXNvdXJjZSBhcyBhIHR5cGVkIHJlc291cmNlXHJcbiAqL1xyXG4gIHJlc291cmNlQXM8QnVuZGVDb250ZW50VHlwZSA9IGZoaXIuRmhpclJlc291cmNlPigpOiBCdW5kZUNvbnRlbnRUeXBlfHVua25vd24ge1xyXG4gICAgcmV0dXJuIHRoaXMucmVzb3VyY2UgYXMgdW5rbm93biBhcyBCdW5kZUNvbnRlbnRUeXBlO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQnVuZGxlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEJ1bmRsZUFyZ3MgZXh0ZW5kcyBmaGlyLlJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIkJ1bmRsZVwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBQZXJzaXN0ZW50IGlkZW50aXR5IGdlbmVyYWxseSBvbmx5IG1hdHRlcnMgZm9yIGJhdGNoZXMgb2YgdHlwZSBEb2N1bWVudCwgTWVzc2FnZSwgYW5kIENvbGxlY3Rpb24uIEl0IHdvdWxkIG5vdCBub3JtYWxseSBiZSBwb3B1bGF0ZWQgZm9yIHNlYXJjaCBhbmQgaGlzdG9yeSByZXN1bHRzIGFuZCBzZXJ2ZXJzIGlnbm9yZSBCdW5kbGUuaWRlbnRpZmllciB3aGVuIHByb2Nlc3NpbmcgYmF0Y2hlcyBhbmQgdHJhbnNhY3Rpb25zLiBGb3IgRG9jdW1lbnRzICB0aGUgLmlkZW50aWZpZXIgU0hBTEwgYmUgcG9wdWxhdGVkIHN1Y2ggdGhhdCB0aGUgLmlkZW50aWZpZXIgaXMgZ2xvYmFsbHkgdW5pcXVlLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJdCdzIHBvc3NpYmxlIHRvIHVzZSBhIGJ1bmRsZSBmb3Igb3RoZXIgcHVycG9zZXMgKGUuZy4gYSBkb2N1bWVudCBjYW4gYmUgYWNjZXB0ZWQgYXMgYSB0cmFuc2FjdGlvbikuIFRoaXMgaXMgcHJpbWFyaWx5IGRlZmluZWQgc28gdGhhdCB0aGVyZSBjYW4gYmUgc3BlY2lmaWMgcnVsZXMgZm9yIHNvbWUgb2YgdGhlIGJ1bmRsZSB0eXBlcy5cclxuICAgKi9cclxuICB0eXBlOiBmaGlyLkZoaXJDb2RlPEJ1bmRsZVR5cGVDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLnR5cGVcclxuICAgKi9cclxuICBfdHlwZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogRm9yIG1hbnkgYnVuZGxlcywgdGhlIHRpbWVzdGFtcCBpcyBlcXVhbCB0byAubWV0YS5sYXN0VXBkYXRlZCwgYmVjYXVzZSB0aGV5IGFyZSBub3Qgc3RvcmVkIChlLmcuIHNlYXJjaCByZXN1bHRzKS4gV2hlbiBhIGJ1bmRsZSBpcyBwbGFjZWQgaW4gYSBwZXJzaXN0ZW50IHN0b3JlLCAubWV0YS5sYXN0VXBkYXRlZCB3aWxsIGJlIHVzdWFsbHkgYmUgY2hhbmdlZCBieSB0aGUgc2VydmVyLiBXaGVuIHRoZSBidW5kbGUgaXMgYSBtZXNzYWdlLCBhIG1pZGRsZXdhcmUgYWdlbnQgYWx0ZXJpbmcgdGhlIG1lc3NhZ2UgKGV2ZW4gaWYgbm90IHN0b3JlZCkgU0hPVUxEIHVwZGF0ZSAubWV0YS5sYXN0VXBkYXRlZC4gLnRpbWVzdGFtcCBpcyB1c2VkIHRvIHRyYWNrIHRoZSBvcmlnaW5hbCB0aW1lIG9mIHRoZSBCdW5kbGUsIGFuZCBTSE9VTEQgYmUgcG9wdWxhdGVkLiAgXHJcbiAgICogVXNhZ2U6XHJcbiAgICogKiBkb2N1bWVudCA6IHRoZSBkYXRlIHRoZSBkb2N1bWVudCB3YXMgY3JlYXRlZC4gTm90ZTogdGhlIGNvbXBvc2l0aW9uIG1heSBwcmVkYXRlIHRoZSBkb2N1bWVudCwgb3IgYmUgYXNzb2NpYXRlZCB3aXRoIG11bHRpcGxlIGRvY3VtZW50cy4gVGhlIGRhdGUgb2YgdGhlIGNvbXBvc2l0aW9uIC0gdGhlIGF1dGhvcmluZyB0aW1lIC0gbWF5IGJlIGVhcmxpZXIgdGhhbiB0aGUgZG9jdW1lbnQgYXNzZW1ibHkgdGltZVxyXG4gICAqICogbWVzc2FnZSA6IHRoZSBkYXRlIHRoYXQgdGhlIGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2Ugd2FzIGFzc2VtYmxlZC4gVGhpcyBkYXRlIGlzIG5vdCBjaGFuZ2VkIGJ5IG1pZGRsZXdhcmUgZW5naW5lcyB1bmxlc3MgdGhleSBhZGQgYWRkaXRpb25hbCBkYXRhIHRoYXQgY2hhbmdlcyB0aGUgbWVhbmluZyBvZiB0aGUgdGltZSBvZiB0aGUgbWVzc2FnZVxyXG4gICAqICogaGlzdG9yeSA6IHRoZSBkYXRlIHRoYXQgdGhlIGhpc3Rvcnkgd2FzIGFzc2VtYmxlZC4gVGhpcyB0aW1lIHdvdWxkIGJlIHVzZWQgYXMgdGhlIF9zaW5jZSB0aW1lIHRvIGFzayBmb3Igc3Vic2VxdWVudCB1cGRhdGVzXHJcbiAgICogKiBzZWFyY2hzZXQgOiB0aGUgdGltZSB0aGF0IHRoZSBzZWFyY2ggc2V0IHdhcyBhc3NlbWJsZWQuIE5vdGUgdGhhdCBkaWZmZXJlbnQgcGFnZXMgTUFZIGhhdmUgZGlmZmVyZW50IHRpbWVzdGFtcHMgYnV0IG5lZWQgbm90LiBIYXZpbmcgZGlmZmVyZW50IHRpbWVzdGFtcHMgZG9lcyBub3QgaW1wbHkgdGhhdCBzdWJzZXF1ZW50IHBhZ2VzIHdpbGwgcmVwcmVzZW50IG9yIGluY2x1ZGUgY2hhbmdlcyBtYWRlIHNpbmNlIHRoZSBpbml0aWFsIHF1ZXJ5XHJcbiAgICogKiB0cmFuc2FjdGlvbiB8IHRyYW5zYWN0aW9uLXJlc3BvbnNlIHwgYmF0Y2ggfCBiYXRjaC1yZXNwb25zZSB8IGNvbGxlY3Rpb24gOiBubyBwYXJ0aWN1bGFyIGFzc2lnbmVkIG1lYW5pbmdcclxuICAgKiBUaGUgdGltZXN0YW1wIHZhbHVlIHNob3VsZCBiZSBncmVhdGVyIHRoYW4gdGhlIGxhc3RVcGRhdGVkIGFuZCBvdGhlciB0aW1lc3RhbXBzIGluIHRoZSByZXNvdXJjZXMgaW4gdGhlIGJ1bmRsZSwgYW5kIGl0IHNob3VsZCBiZSBlcXVhbCBvciBlYXJsaWVyIHRoYW4gdGhlIC5tZXRhLmxhc3RVcGRhdGVkIG9uIHRoZSBCdW5kbGUgaXRzZWxmLlxyXG4gICAqL1xyXG4gIHRpbWVzdGFtcD86IGZoaXIuRmhpckluc3RhbnR8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLnRpbWVzdGFtcFxyXG4gICAqL1xyXG4gIF90aW1lc3RhbXA/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIE9ubHkgdXNlZCBpZiB0aGUgYnVuZGxlIGlzIGEgc2VhcmNoIHJlc3VsdCBzZXQuIFRoZSB0b3RhbCBkb2VzIG5vdCBpbmNsdWRlIHJlc291cmNlcyBzdWNoIGFzIE9wZXJhdGlvbk91dGNvbWUgYW5kIGluY2x1ZGVkIHJlc291cmNlcywgb25seSB0aGUgdG90YWwgbnVtYmVyIG9mIG1hdGNoaW5nIHJlc291cmNlcy5cclxuICAgKi9cclxuICB0b3RhbD86IGZoaXIuRmhpclVuc2lnbmVkSW50fG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEJ1bmRsZS50b3RhbFxyXG4gICAqL1xyXG4gIF90b3RhbD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQm90aCBCdW5kbGUubGluayBhbmQgQnVuZGxlLmVudHJ5LmxpbmsgYXJlIGRlZmluZWQgdG8gc3VwcG9ydCBwcm92aWRpbmcgYWRkaXRpb25hbCBjb250ZXh0IHdoZW4gQnVuZGxlcyBhcmUgdXNlZCAoZS5nLiBbSEFURU9BU10oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9IQVRFT0FTKSkuIFxyXG4gICAqIEJ1bmRsZS5lbnRyeS5saW5rIGNvcnJlc3BvbmRzIHRvIGxpbmtzIGZvdW5kIGluIHRoZSBIVFRQIGhlYWRlciBpZiB0aGUgcmVzb3VyY2UgaW4gdGhlIGVudHJ5IHdhcyBbcmVhZF0oaHR0cC5odG1sI3JlYWQpIGRpcmVjdGx5LlxyXG4gICAqIFRoaXMgc3BlY2lmaWNhdGlvbiBkZWZpbmVzIHNvbWUgc3BlY2lmaWMgdXNlcyBvZiBCdW5kbGUubGluayBmb3IgW3NlYXJjaGluZ10oc2VhcmNoLmh0bWwjY29uZm9ybWFuY2UpIGFuZCBbcGFnaW5nXShodHRwLmh0bWwjcGFnaW5nKSwgYnV0IG5vIHNwZWNpZmljIHVzZXMgZm9yIEJ1bmRsZS5lbnRyeS5saW5rLCBhbmQgbm8gZGVmaW5lZCBmdW5jdGlvbiBpbiBhIHRyYW5zYWN0aW9uIC0gdGhlIG1lYW5pbmcgaXMgaW1wbGVtZW50YXRpb24gc3BlY2lmaWMuXHJcbiAgICovXHJcbiAgbGluaz86IGZoaXIuQnVuZGxlTGlua0FyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQW4gZW50cnkgaW4gYSBidW5kbGUgcmVzb3VyY2UgLSB3aWxsIGVpdGhlciBjb250YWluIGEgcmVzb3VyY2Ugb3IgaW5mb3JtYXRpb24gYWJvdXQgYSByZXNvdXJjZSAodHJhbnNhY3Rpb25zIGFuZCBoaXN0b3J5IG9ubHkpLlxyXG4gICAqL1xyXG4gIGVudHJ5PzogZmhpci5CdW5kbGVFbnRyeUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNpZ25hdHVyZSBjb3VsZCBiZSBjcmVhdGVkIGJ5IHRoZSBcImF1dGhvclwiIG9mIHRoZSBidW5kbGUgb3IgYnkgdGhlIG9yaWdpbmF0aW5nIGRldmljZS4gICBSZXF1aXJlbWVudHMgYXJvdW5kIGluY2x1c2lvbiBvZiBhIHNpZ25hdHVyZSwgdmVyaWZpY2F0aW9uIG9mIHNpZ25hdHVyZXMgYW5kIHRyZWF0bWVudCBvZiBzaWduZWQvbm9uLXNpZ25lZCBidW5kbGVzIGlzIGltcGxlbWVudGF0aW9uLWVudmlyb25tZW50IHNwZWNpZmljLlxyXG4gICAqL1xyXG4gIHNpZ25hdHVyZT86IGZoaXIuU2lnbmF0dXJlQXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBIGNvbnRhaW5lciBmb3IgYSBjb2xsZWN0aW9uIG9mIHJlc291cmNlcy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBCdW5kbGUgZXh0ZW5kcyBmaGlyLlJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0J1bmRsZSc7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJCdW5kbGVcIjtcclxuICAvKipcclxuICAgKiBQZXJzaXN0ZW50IGlkZW50aXR5IGdlbmVyYWxseSBvbmx5IG1hdHRlcnMgZm9yIGJhdGNoZXMgb2YgdHlwZSBEb2N1bWVudCwgTWVzc2FnZSwgYW5kIENvbGxlY3Rpb24uIEl0IHdvdWxkIG5vdCBub3JtYWxseSBiZSBwb3B1bGF0ZWQgZm9yIHNlYXJjaCBhbmQgaGlzdG9yeSByZXN1bHRzIGFuZCBzZXJ2ZXJzIGlnbm9yZSBCdW5kbGUuaWRlbnRpZmllciB3aGVuIHByb2Nlc3NpbmcgYmF0Y2hlcyBhbmQgdHJhbnNhY3Rpb25zLiBGb3IgRG9jdW1lbnRzICB0aGUgLmlkZW50aWZpZXIgU0hBTEwgYmUgcG9wdWxhdGVkIHN1Y2ggdGhhdCB0aGUgLmlkZW50aWZpZXIgaXMgZ2xvYmFsbHkgdW5pcXVlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJdCdzIHBvc3NpYmxlIHRvIHVzZSBhIGJ1bmRsZSBmb3Igb3RoZXIgcHVycG9zZXMgKGUuZy4gYSBkb2N1bWVudCBjYW4gYmUgYWNjZXB0ZWQgYXMgYSB0cmFuc2FjdGlvbikuIFRoaXMgaXMgcHJpbWFyaWx5IGRlZmluZWQgc28gdGhhdCB0aGVyZSBjYW4gYmUgc3BlY2lmaWMgcnVsZXMgZm9yIHNvbWUgb2YgdGhlIGJ1bmRsZSB0eXBlcy5cclxuICAgKi9cclxuICBwdWJsaWMgdHlwZTogZmhpci5GaGlyQ29kZTxCdW5kbGVUeXBlQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogRm9yIG1hbnkgYnVuZGxlcywgdGhlIHRpbWVzdGFtcCBpcyBlcXVhbCB0byAubWV0YS5sYXN0VXBkYXRlZCwgYmVjYXVzZSB0aGV5IGFyZSBub3Qgc3RvcmVkIChlLmcuIHNlYXJjaCByZXN1bHRzKS4gV2hlbiBhIGJ1bmRsZSBpcyBwbGFjZWQgaW4gYSBwZXJzaXN0ZW50IHN0b3JlLCAubWV0YS5sYXN0VXBkYXRlZCB3aWxsIGJlIHVzdWFsbHkgYmUgY2hhbmdlZCBieSB0aGUgc2VydmVyLiBXaGVuIHRoZSBidW5kbGUgaXMgYSBtZXNzYWdlLCBhIG1pZGRsZXdhcmUgYWdlbnQgYWx0ZXJpbmcgdGhlIG1lc3NhZ2UgKGV2ZW4gaWYgbm90IHN0b3JlZCkgU0hPVUxEIHVwZGF0ZSAubWV0YS5sYXN0VXBkYXRlZC4gLnRpbWVzdGFtcCBpcyB1c2VkIHRvIHRyYWNrIHRoZSBvcmlnaW5hbCB0aW1lIG9mIHRoZSBCdW5kbGUsIGFuZCBTSE9VTEQgYmUgcG9wdWxhdGVkLiAgXHJcbiAgICogVXNhZ2U6XHJcbiAgICogKiBkb2N1bWVudCA6IHRoZSBkYXRlIHRoZSBkb2N1bWVudCB3YXMgY3JlYXRlZC4gTm90ZTogdGhlIGNvbXBvc2l0aW9uIG1heSBwcmVkYXRlIHRoZSBkb2N1bWVudCwgb3IgYmUgYXNzb2NpYXRlZCB3aXRoIG11bHRpcGxlIGRvY3VtZW50cy4gVGhlIGRhdGUgb2YgdGhlIGNvbXBvc2l0aW9uIC0gdGhlIGF1dGhvcmluZyB0aW1lIC0gbWF5IGJlIGVhcmxpZXIgdGhhbiB0aGUgZG9jdW1lbnQgYXNzZW1ibHkgdGltZVxyXG4gICAqICogbWVzc2FnZSA6IHRoZSBkYXRlIHRoYXQgdGhlIGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2Ugd2FzIGFzc2VtYmxlZC4gVGhpcyBkYXRlIGlzIG5vdCBjaGFuZ2VkIGJ5IG1pZGRsZXdhcmUgZW5naW5lcyB1bmxlc3MgdGhleSBhZGQgYWRkaXRpb25hbCBkYXRhIHRoYXQgY2hhbmdlcyB0aGUgbWVhbmluZyBvZiB0aGUgdGltZSBvZiB0aGUgbWVzc2FnZVxyXG4gICAqICogaGlzdG9yeSA6IHRoZSBkYXRlIHRoYXQgdGhlIGhpc3Rvcnkgd2FzIGFzc2VtYmxlZC4gVGhpcyB0aW1lIHdvdWxkIGJlIHVzZWQgYXMgdGhlIF9zaW5jZSB0aW1lIHRvIGFzayBmb3Igc3Vic2VxdWVudCB1cGRhdGVzXHJcbiAgICogKiBzZWFyY2hzZXQgOiB0aGUgdGltZSB0aGF0IHRoZSBzZWFyY2ggc2V0IHdhcyBhc3NlbWJsZWQuIE5vdGUgdGhhdCBkaWZmZXJlbnQgcGFnZXMgTUFZIGhhdmUgZGlmZmVyZW50IHRpbWVzdGFtcHMgYnV0IG5lZWQgbm90LiBIYXZpbmcgZGlmZmVyZW50IHRpbWVzdGFtcHMgZG9lcyBub3QgaW1wbHkgdGhhdCBzdWJzZXF1ZW50IHBhZ2VzIHdpbGwgcmVwcmVzZW50IG9yIGluY2x1ZGUgY2hhbmdlcyBtYWRlIHNpbmNlIHRoZSBpbml0aWFsIHF1ZXJ5XHJcbiAgICogKiB0cmFuc2FjdGlvbiB8IHRyYW5zYWN0aW9uLXJlc3BvbnNlIHwgYmF0Y2ggfCBiYXRjaC1yZXNwb25zZSB8IGNvbGxlY3Rpb24gOiBubyBwYXJ0aWN1bGFyIGFzc2lnbmVkIG1lYW5pbmdcclxuICAgKiBUaGUgdGltZXN0YW1wIHZhbHVlIHNob3VsZCBiZSBncmVhdGVyIHRoYW4gdGhlIGxhc3RVcGRhdGVkIGFuZCBvdGhlciB0aW1lc3RhbXBzIGluIHRoZSByZXNvdXJjZXMgaW4gdGhlIGJ1bmRsZSwgYW5kIGl0IHNob3VsZCBiZSBlcXVhbCBvciBlYXJsaWVyIHRoYW4gdGhlIC5tZXRhLmxhc3RVcGRhdGVkIG9uIHRoZSBCdW5kbGUgaXRzZWxmLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0aW1lc3RhbXA/OiBmaGlyLkZoaXJJbnN0YW50fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBPbmx5IHVzZWQgaWYgdGhlIGJ1bmRsZSBpcyBhIHNlYXJjaCByZXN1bHQgc2V0LiBUaGUgdG90YWwgZG9lcyBub3QgaW5jbHVkZSByZXNvdXJjZXMgc3VjaCBhcyBPcGVyYXRpb25PdXRjb21lIGFuZCBpbmNsdWRlZCByZXNvdXJjZXMsIG9ubHkgdGhlIHRvdGFsIG51bWJlciBvZiBtYXRjaGluZyByZXNvdXJjZXMuXHJcbiAgICovXHJcbiAgcHVibGljIHRvdGFsPzogZmhpci5GaGlyVW5zaWduZWRJbnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEJvdGggQnVuZGxlLmxpbmsgYW5kIEJ1bmRsZS5lbnRyeS5saW5rIGFyZSBkZWZpbmVkIHRvIHN1cHBvcnQgcHJvdmlkaW5nIGFkZGl0aW9uYWwgY29udGV4dCB3aGVuIEJ1bmRsZXMgYXJlIHVzZWQgKGUuZy4gW0hBVEVPQVNdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSEFURU9BUykpLiBcclxuICAgKiBCdW5kbGUuZW50cnkubGluayBjb3JyZXNwb25kcyB0byBsaW5rcyBmb3VuZCBpbiB0aGUgSFRUUCBoZWFkZXIgaWYgdGhlIHJlc291cmNlIGluIHRoZSBlbnRyeSB3YXMgW3JlYWRdKGh0dHAuaHRtbCNyZWFkKSBkaXJlY3RseS5cclxuICAgKiBUaGlzIHNwZWNpZmljYXRpb24gZGVmaW5lcyBzb21lIHNwZWNpZmljIHVzZXMgb2YgQnVuZGxlLmxpbmsgZm9yIFtzZWFyY2hpbmddKHNlYXJjaC5odG1sI2NvbmZvcm1hbmNlKSBhbmQgW3BhZ2luZ10oaHR0cC5odG1sI3BhZ2luZyksIGJ1dCBubyBzcGVjaWZpYyB1c2VzIGZvciBCdW5kbGUuZW50cnkubGluaywgYW5kIG5vIGRlZmluZWQgZnVuY3Rpb24gaW4gYSB0cmFuc2FjdGlvbiAtIHRoZSBtZWFuaW5nIGlzIGltcGxlbWVudGF0aW9uIHNwZWNpZmljLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBsaW5rOiBmaGlyLkJ1bmRsZUxpbmtbXTtcclxuICAvKipcclxuICAgKiBBbiBlbnRyeSBpbiBhIGJ1bmRsZSByZXNvdXJjZSAtIHdpbGwgZWl0aGVyIGNvbnRhaW4gYSByZXNvdXJjZSBvciBpbmZvcm1hdGlvbiBhYm91dCBhIHJlc291cmNlICh0cmFuc2FjdGlvbnMgYW5kIGhpc3Rvcnkgb25seSkuXHJcbiAgICovXHJcbiAgcHVibGljIGVudHJ5OiBmaGlyLkJ1bmRsZUVudHJ5W107XHJcbiAgLyoqXHJcbiAgICogVGhlIHNpZ25hdHVyZSBjb3VsZCBiZSBjcmVhdGVkIGJ5IHRoZSBcImF1dGhvclwiIG9mIHRoZSBidW5kbGUgb3IgYnkgdGhlIG9yaWdpbmF0aW5nIGRldmljZS4gICBSZXF1aXJlbWVudHMgYXJvdW5kIGluY2x1c2lvbiBvZiBhIHNpZ25hdHVyZSwgdmVyaWZpY2F0aW9uIG9mIHNpZ25hdHVyZXMgYW5kIHRyZWF0bWVudCBvZiBzaWduZWQvbm9uLXNpZ25lZCBidW5kbGVzIGlzIGltcGxlbWVudGF0aW9uLWVudmlyb25tZW50IHNwZWNpZmljLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzaWduYXR1cmU/OiBmaGlyLlNpZ25hdHVyZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQnVuZGxlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8QnVuZGxlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ0J1bmRsZSc7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gbmV3IGZoaXIuSWRlbnRpZmllcihzb3VyY2UuaWRlbnRpZmllcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ3R5cGUnXSkgeyB0aGlzLnR5cGUgPSBuZXcgZmhpci5GaGlyQ29kZTxCdW5kbGVUeXBlQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnR5cGV9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudHlwZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ190eXBlJ10pIHtcclxuICAgICAgaWYgKHRoaXMudHlwZSkgeyB0aGlzLnR5cGUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdHlwZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnR5cGUgPSBuZXcgZmhpci5GaGlyQ29kZTxCdW5kbGVUeXBlQ29kZVR5cGU+KHNvdXJjZS5fdHlwZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsndGltZXN0YW1wJ10pIHsgdGhpcy50aW1lc3RhbXAgPSBuZXcgZmhpci5GaGlySW5zdGFudCh7dmFsdWU6IHNvdXJjZS50aW1lc3RhbXB9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3RpbWVzdGFtcCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnRpbWVzdGFtcCkgeyB0aGlzLnRpbWVzdGFtcC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl90aW1lc3RhbXAhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy50aW1lc3RhbXAgPSBuZXcgZmhpci5GaGlySW5zdGFudChzb3VyY2UuX3RpbWVzdGFtcCBhcyBQYXJ0aWFsPGZoaXIuRmhpckluc3RhbnRBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3RvdGFsJ10pIHsgdGhpcy50b3RhbCA9IG5ldyBmaGlyLkZoaXJVbnNpZ25lZEludCh7dmFsdWU6IHNvdXJjZS50b3RhbH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfdG90YWwnXSkge1xyXG4gICAgICBpZiAodGhpcy50b3RhbCkgeyB0aGlzLnRvdGFsLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3RvdGFsISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudG90YWwgPSBuZXcgZmhpci5GaGlyVW5zaWduZWRJbnQoc291cmNlLl90b3RhbCBhcyBQYXJ0aWFsPGZoaXIuRmhpclVuc2lnbmVkSW50QXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydsaW5rJ10pIHsgdGhpcy5saW5rID0gc291cmNlLmxpbmsubWFwKCh4KSA9PiBuZXcgZmhpci5CdW5kbGVMaW5rKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubGluayA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydlbnRyeSddKSB7IHRoaXMuZW50cnkgPSBzb3VyY2UuZW50cnkubWFwKCh4KSA9PiBuZXcgZmhpci5CdW5kbGVFbnRyeSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmVudHJ5ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3NpZ25hdHVyZSddKSB7IHRoaXMuc2lnbmF0dXJlID0gbmV3IGZoaXIuU2lnbmF0dXJlKHNvdXJjZS5zaWduYXR1cmUpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKTtcclxuICAgIGlmIChleHByZXNzaW9uID09PSAnJykgeyBleHByZXNzaW9uID0gJ0J1bmRsZScgfVxyXG4gICAgdGhpcy52UmVxUygncmVzb3VyY2VUeXBlJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnaWRlbnRpZmllcicsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudlJlcVNWKCd0eXBlJyxleHByZXNzaW9uLCdCdW5kbGVUeXBlJyxCdW5kbGVUeXBlVnNWYWxpZGF0aW9uLCdyJylcclxuICAgIHRoaXMudk9wdFMoJ3RpbWVzdGFtcCcsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ3RvdGFsJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0QSgnbGluaycsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdEEoJ2VudHJ5JyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0Uygnc2lnbmF0dXJlJyxleHByZXNzaW9uKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuIl19