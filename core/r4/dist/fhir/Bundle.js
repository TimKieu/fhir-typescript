// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: Bundle
import * as fhir from '../fhir.js';
// @ts-ignore
import { SearchEntryModeVsValidation } from '../fhirValueSets/SearchEntryModeVsValidation.js';
// @ts-ignore
import { HttpVerbVsValidation } from '../fhirValueSets/HttpVerbVsValidation.js';
// @ts-ignore
import { BundleTypeVsValidation } from '../fhirValueSets/BundleTypeVsValidation.js';
/**
 * Both Bundle.link and Bundle.entry.link are defined to support providing additional context when Bundles are used (e.g. [HATEOAS](http://en.wikipedia.org/wiki/HATEOAS)).
 * Bundle.entry.link corresponds to links found in the HTTP header if the resource in the entry was [read](http.html#read) directly.
 * This specification defines some specific uses of Bundle.link for [searching](search.html#conformance) and [paging](http.html#paging), but no specific uses for Bundle.entry.link, and no defined function in a transaction - the meaning is implementation specific.
 */
export class BundleLink extends fhir.BackboneElement {
    /**
     * Default constructor for BundleLink - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['relation'] !== undefined) {
            this.relation = new fhir.FhirString({ value: source.relation }, options);
        }
        else {
            this.relation = null;
        }
        if (source['_relation']) {
            if (this.relation) {
                this.relation.addExtendedProperties(source._relation);
            }
            else {
                this.relation = new fhir.FhirString(source._relation, options);
            }
        }
        if (source['url'] !== undefined) {
            this.url = new fhir.FhirUri({ value: source.url }, options);
        }
        else {
            this.url = null;
        }
        if (source['_url']) {
            if (this.url) {
                this.url.addExtendedProperties(source._url);
            }
            else {
                this.url = new fhir.FhirUri(source._url, options);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Bundle.link';
        }
        iss.push(...this.vRS('relation', exp));
        iss.push(...this.vRS('url', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BundleLink._fts_dataType = 'BundleLink';
/**
 * Information about the search process that lead to the creation of this entry.
 */
export class BundleEntrySearch extends fhir.BackboneElement {
    /**
     * Default constructor for BundleEntrySearch - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['mode'] !== undefined) {
            this.mode = new fhir.FhirCode({ value: source.mode }, options);
        }
        if (source['_mode']) {
            if (this.mode) {
                this.mode.addExtendedProperties(source._mode);
            }
            else {
                this.mode = new fhir.FhirCode(source._mode, options);
            }
        }
        if (source['score'] !== undefined) {
            this.score = new fhir.FhirDecimal({ value: source.score }, options);
        }
        if (source['_score']) {
            if (this.score) {
                this.score.addExtendedProperties(source._score);
            }
            else {
                this.score = new fhir.FhirDecimal(source._score, options);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Bundle.entry.search';
        }
        iss.push(...this.vOSV('mode', exp, 'SearchEntryMode', SearchEntryModeVsValidation, 'r'));
        iss.push(...this.vOS('score', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BundleEntrySearch._fts_dataType = 'BundleEntrySearch';
/**
 * Additional information about how this entry should be processed as part of a transaction or batch.  For history, it shows how the entry was processed to create the version contained in the entry.
 */
export class BundleEntryRequest extends fhir.BackboneElement {
    /**
     * Default constructor for BundleEntryRequest - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['method'] !== undefined) {
            this.method = new fhir.FhirCode({ value: source.method }, options);
        }
        else {
            this.method = null;
        }
        if (source['_method']) {
            if (this.method) {
                this.method.addExtendedProperties(source._method);
            }
            else {
                this.method = new fhir.FhirCode(source._method, options);
            }
        }
        if (source['url'] !== undefined) {
            this.url = new fhir.FhirUri({ value: source.url }, options);
        }
        else {
            this.url = null;
        }
        if (source['_url']) {
            if (this.url) {
                this.url.addExtendedProperties(source._url);
            }
            else {
                this.url = new fhir.FhirUri(source._url, options);
            }
        }
        if (source['ifNoneMatch'] !== undefined) {
            this.ifNoneMatch = new fhir.FhirString({ value: source.ifNoneMatch }, options);
        }
        if (source['_ifNoneMatch']) {
            if (this.ifNoneMatch) {
                this.ifNoneMatch.addExtendedProperties(source._ifNoneMatch);
            }
            else {
                this.ifNoneMatch = new fhir.FhirString(source._ifNoneMatch, options);
            }
        }
        if (source['ifModifiedSince'] !== undefined) {
            this.ifModifiedSince = new fhir.FhirInstant({ value: source.ifModifiedSince }, options);
        }
        if (source['_ifModifiedSince']) {
            if (this.ifModifiedSince) {
                this.ifModifiedSince.addExtendedProperties(source._ifModifiedSince);
            }
            else {
                this.ifModifiedSince = new fhir.FhirInstant(source._ifModifiedSince, options);
            }
        }
        if (source['ifMatch'] !== undefined) {
            this.ifMatch = new fhir.FhirString({ value: source.ifMatch }, options);
        }
        if (source['_ifMatch']) {
            if (this.ifMatch) {
                this.ifMatch.addExtendedProperties(source._ifMatch);
            }
            else {
                this.ifMatch = new fhir.FhirString(source._ifMatch, options);
            }
        }
        if (source['ifNoneExist'] !== undefined) {
            this.ifNoneExist = new fhir.FhirString({ value: source.ifNoneExist }, options);
        }
        if (source['_ifNoneExist']) {
            if (this.ifNoneExist) {
                this.ifNoneExist.addExtendedProperties(source._ifNoneExist);
            }
            else {
                this.ifNoneExist = new fhir.FhirString(source._ifNoneExist, options);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Bundle.entry.request';
        }
        iss.push(...this.vRSV('method', exp, 'HttpVerb', HttpVerbVsValidation, 'r'));
        iss.push(...this.vRS('url', exp));
        iss.push(...this.vOS('ifNoneMatch', exp));
        iss.push(...this.vOS('ifModifiedSince', exp));
        iss.push(...this.vOS('ifMatch', exp));
        iss.push(...this.vOS('ifNoneExist', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BundleEntryRequest._fts_dataType = 'BundleEntryRequest';
/**
 * Indicates the results of processing the corresponding 'request' entry in the batch or transaction being responded to or what the results of an operation where when returning history.
 */
export class BundleEntryResponse extends fhir.BackboneElement {
    /**
     * Default constructor for BundleEntryResponse - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['status'] !== undefined) {
            this.status = new fhir.FhirString({ value: source.status }, options);
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirString(source._status, options);
            }
        }
        if (source['location'] !== undefined) {
            this.location = new fhir.FhirUri({ value: source.location }, options);
        }
        if (source['_location']) {
            if (this.location) {
                this.location.addExtendedProperties(source._location);
            }
            else {
                this.location = new fhir.FhirUri(source._location, options);
            }
        }
        if (source['etag'] !== undefined) {
            this.etag = new fhir.FhirString({ value: source.etag }, options);
        }
        if (source['_etag']) {
            if (this.etag) {
                this.etag.addExtendedProperties(source._etag);
            }
            else {
                this.etag = new fhir.FhirString(source._etag, options);
            }
        }
        if (source['lastModified'] !== undefined) {
            this.lastModified = new fhir.FhirInstant({ value: source.lastModified }, options);
        }
        if (source['_lastModified']) {
            if (this.lastModified) {
                this.lastModified.addExtendedProperties(source._lastModified);
            }
            else {
                this.lastModified = new fhir.FhirInstant(source._lastModified, options);
            }
        }
        if (source['outcome']) {
            this.outcome = (fhir.resourceFactory(source.outcome, options) ?? undefined);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Bundle.entry.response';
        }
        iss.push(...this.vRS('status', exp));
        iss.push(...this.vOS('location', exp));
        iss.push(...this.vOS('etag', exp));
        iss.push(...this.vOS('lastModified', exp));
        iss.push(...this.vOS('outcome', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BundleEntryResponse._fts_dataType = 'BundleEntryResponse';
/**
 * An entry in a bundle resource - will either contain a resource or information about a resource (transactions and history only).
 */
export class BundleEntry extends fhir.BackboneElement {
    /**
     * Default constructor for BundleEntry - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['link']) {
            this.link = source.link.map((x) => new fhir.BundleLink(x, options));
        }
        else {
            this.link = [];
        }
        if (source['fullUrl'] !== undefined) {
            this.fullUrl = new fhir.FhirUri({ value: source.fullUrl }, options);
        }
        if (source['_fullUrl']) {
            if (this.fullUrl) {
                this.fullUrl.addExtendedProperties(source._fullUrl);
            }
            else {
                this.fullUrl = new fhir.FhirUri(source._fullUrl, options);
            }
        }
        if (source['resource']) {
            this.resource = (fhir.resourceFactory(source.resource, options) ?? undefined);
        }
        if (source['search']) {
            this.search = new fhir.BundleEntrySearch(source.search, options);
        }
        if (source['request']) {
            this.request = new fhir.BundleEntryRequest(source.request, options);
        }
        if (source['response']) {
            this.response = new fhir.BundleEntryResponse(source.response, options);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Bundle.entry';
        }
        iss.push(...this.vOA('link', exp));
        iss.push(...this.vOS('fullUrl', exp));
        iss.push(...this.vOS('resource', exp));
        iss.push(...this.vOS('search', exp));
        iss.push(...this.vOS('request', exp));
        iss.push(...this.vOS('response', exp));
        return iss;
    }
    /**
     * Access a bundle.entry[].resource as a typed resource
     */
    resourceAs() {
        return this.resource;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BundleEntry._fts_dataType = 'BundleEntry';
/**
 * A container for a collection of resources.
 */
export class Bundle extends fhir.Resource {
    /**
     * Default constructor for Bundle - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'Bundle';
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier, options);
        }
        if (source['type'] !== undefined) {
            this.type = new fhir.FhirCode({ value: source.type }, options);
        }
        else {
            this.type = null;
        }
        if (source['_type']) {
            if (this.type) {
                this.type.addExtendedProperties(source._type);
            }
            else {
                this.type = new fhir.FhirCode(source._type, options);
            }
        }
        if (source['timestamp'] !== undefined) {
            this.timestamp = new fhir.FhirInstant({ value: source.timestamp }, options);
        }
        if (source['_timestamp']) {
            if (this.timestamp) {
                this.timestamp.addExtendedProperties(source._timestamp);
            }
            else {
                this.timestamp = new fhir.FhirInstant(source._timestamp, options);
            }
        }
        if (source['total'] !== undefined) {
            this.total = new fhir.FhirUnsignedInt({ value: source.total }, options);
        }
        if (source['_total']) {
            if (this.total) {
                this.total.addExtendedProperties(source._total);
            }
            else {
                this.total = new fhir.FhirUnsignedInt(source._total, options);
            }
        }
        if (source['link']) {
            this.link = source.link.map((x) => new fhir.BundleLink(x, options));
        }
        else {
            this.link = [];
        }
        if (source['entry']) {
            this.entry = source.entry.map((x) => new fhir.BundleEntry(x, options));
        }
        else {
            this.entry = [];
        }
        if (source['signature']) {
            this.signature = new fhir.Signature(source.signature, options);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Bundle';
        }
        iss.push(...this.vOS('identifier', exp));
        iss.push(...this.vRSV('type', exp, 'BundleType', BundleTypeVsValidation, 'r'));
        iss.push(...this.vOS('timestamp', exp));
        iss.push(...this.vOS('total', exp));
        iss.push(...this.vOA('link', exp));
        iss.push(...this.vOA('entry', exp));
        iss.push(...this.vOS('signature', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
Bundle._fts_dataType = 'Bundle';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQnVuZGxlLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9CdW5kbGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsd0JBQXdCO0FBRXhCLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBSW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsMkJBQTJCLEVBQUUsTUFBTSxpREFBaUQsQ0FBQztBQUc5RixhQUFhO0FBQ2IsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sMENBQTBDLENBQUM7QUFHaEYsYUFBYTtBQUNiLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLDRDQUE0QyxDQUFDO0FBdUJwRjs7OztHQUlHO0FBQ0gsTUFBTSxPQUFPLFVBQVcsU0FBUSxJQUFJLENBQUMsZUFBZTtJQWFsRDs7T0FFRztJQUNILFlBQVksU0FBaUMsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDdkYsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsS0FBSyxTQUFTLEVBQUU7WUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsUUFBUSxFQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FBRTthQUM1RztZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDOUIsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLEVBQUU7WUFDdkIsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO2dCQUFFLElBQUksQ0FBQyxRQUFRLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLFNBQVUsQ0FBQyxDQUFDO2FBQUU7aUJBQ3pFO2dCQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1B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LEdBQUcsQ0FBQyxZQUFZLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN4QyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUMsR0FBRyxFQUFDLFlBQVksRUFBQyxzQkFBc0IsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzNFLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ25DLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ2xDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ25DLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZDLE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQzs7QUF4RkQ7O0dBRUc7QUFDNkIsb0JBQWEsR0FBVSxRQUFRLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjQuY29yZSB2ZXJzaW9uOiA0LjAuMVxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IEJ1bmRsZVxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgU2VhcmNoRW50cnlNb2RlQ29kZXMsICBTZWFyY2hFbnRyeU1vZGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvU2VhcmNoRW50cnlNb2RlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFNlYXJjaEVudHJ5TW9kZVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvU2VhcmNoRW50cnlNb2RlVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBIdHRwVmVyYkNvZGVzLCAgSHR0cFZlcmJDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvSHR0cFZlcmJDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgSHR0cFZlcmJWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0h0dHBWZXJiVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBCdW5kbGVUeXBlQ29kZXMsICBCdW5kbGVUeXBlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0J1bmRsZVR5cGVDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQnVuZGxlVHlwZVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQnVuZGxlVHlwZVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBCdW5kbGVMaW5rIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEJ1bmRsZUxpbmtBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBBIG5hbWUgd2hpY2ggZGV0YWlscyB0aGUgZnVuY3Rpb25hbCB1c2UgZm9yIHRoaXMgbGluayAtIHNlZSBbaHR0cDovL3d3dy5pYW5hLm9yZy9hc3NpZ25tZW50cy9saW5rLXJlbGF0aW9ucy9saW5rLXJlbGF0aW9ucy54aHRtbCNsaW5rLXJlbGF0aW9ucy0xXShodHRwOi8vd3d3LmlhbmEub3JnL2Fzc2lnbm1lbnRzL2xpbmstcmVsYXRpb25zL2xpbmstcmVsYXRpb25zLnhodG1sI2xpbmstcmVsYXRpb25zLTEpLlxyXG4gICAqL1xyXG4gIHJlbGF0aW9uOiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLmxpbmsucmVsYXRpb25cclxuICAgKi9cclxuICBfcmVsYXRpb24/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZWZlcmVuY2UgZGV0YWlscyBmb3IgdGhlIGxpbmsuXHJcbiAgICovXHJcbiAgdXJsOiBmaGlyLkZoaXJVcml8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLmxpbmsudXJsXHJcbiAgICovXHJcbiAgX3VybD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBCb3RoIEJ1bmRsZS5saW5rIGFuZCBCdW5kbGUuZW50cnkubGluayBhcmUgZGVmaW5lZCB0byBzdXBwb3J0IHByb3ZpZGluZyBhZGRpdGlvbmFsIGNvbnRleHQgd2hlbiBCdW5kbGVzIGFyZSB1c2VkIChlLmcuIFtIQVRFT0FTXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0hBVEVPQVMpKS4gXHJcbiAqIEJ1bmRsZS5lbnRyeS5saW5rIGNvcnJlc3BvbmRzIHRvIGxpbmtzIGZvdW5kIGluIHRoZSBIVFRQIGhlYWRlciBpZiB0aGUgcmVzb3VyY2UgaW4gdGhlIGVudHJ5IHdhcyBbcmVhZF0oaHR0cC5odG1sI3JlYWQpIGRpcmVjdGx5LlxyXG4gKiBUaGlzIHNwZWNpZmljYXRpb24gZGVmaW5lcyBzb21lIHNwZWNpZmljIHVzZXMgb2YgQnVuZGxlLmxpbmsgZm9yIFtzZWFyY2hpbmddKHNlYXJjaC5odG1sI2NvbmZvcm1hbmNlKSBhbmQgW3BhZ2luZ10oaHR0cC5odG1sI3BhZ2luZyksIGJ1dCBubyBzcGVjaWZpYyB1c2VzIGZvciBCdW5kbGUuZW50cnkubGluaywgYW5kIG5vIGRlZmluZWQgZnVuY3Rpb24gaW4gYSB0cmFuc2FjdGlvbiAtIHRoZSBtZWFuaW5nIGlzIGltcGxlbWVudGF0aW9uIHNwZWNpZmljLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJ1bmRsZUxpbmsgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdCdW5kbGVMaW5rJztcclxuICAvKipcclxuICAgKiBBIG5hbWUgd2hpY2ggZGV0YWlscyB0aGUgZnVuY3Rpb25hbCB1c2UgZm9yIHRoaXMgbGluayAtIHNlZSBbaHR0cDovL3d3dy5pYW5hLm9yZy9hc3NpZ25tZW50cy9saW5rLXJlbGF0aW9ucy9saW5rLXJlbGF0aW9ucy54aHRtbCNsaW5rLXJlbGF0aW9ucy0xXShodHRwOi8vd3d3LmlhbmEub3JnL2Fzc2lnbm1lbnRzL2xpbmstcmVsYXRpb25zL2xpbmstcmVsYXRpb25zLnhodG1sI2xpbmstcmVsYXRpb25zLTEpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWxhdGlvbjogZmhpci5GaGlyU3RyaW5nfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlZmVyZW5jZSBkZXRhaWxzIGZvciB0aGUgbGluay5cclxuICAgKi9cclxuICBwdWJsaWMgdXJsOiBmaGlyLkZoaXJVcml8bnVsbDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBCdW5kbGVMaW5rIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8QnVuZGxlTGlua0FyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydyZWxhdGlvbiddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5yZWxhdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UucmVsYXRpb259LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVsYXRpb24gPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfcmVsYXRpb24nXSkge1xyXG4gICAgICBpZiAodGhpcy5yZWxhdGlvbikgeyB0aGlzLnJlbGF0aW9uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3JlbGF0aW9uISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMucmVsYXRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fcmVsYXRpb24gYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3VybCddICE9PSB1bmRlZmluZWQpIHsgdGhpcy51cmwgPSBuZXcgZmhpci5GaGlyVXJpKHt2YWx1ZTogc291cmNlLnVybH0sIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy51cmwgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfdXJsJ10pIHtcclxuICAgICAgaWYgKHRoaXMudXJsKSB7IHRoaXMudXJsLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3VybCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnVybCA9IG5ldyBmaGlyLkZoaXJVcmkoc291cmNlLl91cmwgYXMgUGFydGlhbDxmaGlyLkZoaXJVcmlBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdCdW5kbGUubGluaycgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ3JlbGF0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCd1cmwnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEJ1bmRsZUVudHJ5U2VhcmNoIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEJ1bmRsZUVudHJ5U2VhcmNoQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlcmUgaXMgb25seSBvbmUgbW9kZS4gSW4gc29tZSBjb3JuZXIgY2FzZXMsIGEgcmVzb3VyY2UgbWF5IGJlIGluY2x1ZGVkIGJlY2F1c2UgaXQgaXMgYm90aCBhIG1hdGNoIGFuZCBhbiBpbmNsdWRlLiBJbiB0aGVzZSBjaXJjdW1zdGFuY2VzLCAnbWF0Y2gnIHRha2VzIHByZWNlZGVuY2UuXHJcbiAgICovXHJcbiAgbW9kZT86IGZoaXIuRmhpckNvZGU8U2VhcmNoRW50cnlNb2RlQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEJ1bmRsZS5lbnRyeS5zZWFyY2gubW9kZVxyXG4gICAqL1xyXG4gIF9tb2RlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBTZXJ2ZXJzIGFyZSBub3QgcmVxdWlyZWQgdG8gcmV0dXJuIGEgcmFua2luZyBzY29yZS4gMSBpcyBtb3N0IHJlbGV2YW50LCBhbmQgMCBpcyBsZWFzdCByZWxldmFudC4gT2Z0ZW4sIHNlYXJjaCByZXN1bHRzIGFyZSBzb3J0ZWQgYnkgc2NvcmUsIGJ1dCB0aGUgY2xpZW50IG1heSBzcGVjaWZ5IGEgZGlmZmVyZW50IHNvcnQgb3JkZXIuXHJcbiAgICogU2VlIFtQYXRpZW50IE1hdGNoXShwYXRpZW50LW9wZXJhdGlvbi1tYXRjaC5odG1sKSBmb3IgdGhlIEVNUEkgc2VhcmNoIHdoaWNoIHJlbGF0ZXMgdG8gdGhpcyBlbGVtZW50LlxyXG4gICAqL1xyXG4gIHNjb3JlPzogZmhpci5GaGlyRGVjaW1hbHxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUuZW50cnkuc2VhcmNoLnNjb3JlXHJcbiAgICovXHJcbiAgX3Njb3JlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIEluZm9ybWF0aW9uIGFib3V0IHRoZSBzZWFyY2ggcHJvY2VzcyB0aGF0IGxlYWQgdG8gdGhlIGNyZWF0aW9uIG9mIHRoaXMgZW50cnkuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQnVuZGxlRW50cnlTZWFyY2ggZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdCdW5kbGVFbnRyeVNlYXJjaCc7XHJcbiAgLyoqXHJcbiAgICogVGhlcmUgaXMgb25seSBvbmUgbW9kZS4gSW4gc29tZSBjb3JuZXIgY2FzZXMsIGEgcmVzb3VyY2UgbWF5IGJlIGluY2x1ZGVkIGJlY2F1c2UgaXQgaXMgYm90aCBhIG1hdGNoIGFuZCBhbiBpbmNsdWRlLiBJbiB0aGVzZSBjaXJjdW1zdGFuY2VzLCAnbWF0Y2gnIHRha2VzIHByZWNlZGVuY2UuXHJcbiAgICovXHJcbiAgcHVibGljIG1vZGU/OiBmaGlyLkZoaXJDb2RlPFNlYXJjaEVudHJ5TW9kZUNvZGVUeXBlPnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU2VydmVycyBhcmUgbm90IHJlcXVpcmVkIHRvIHJldHVybiBhIHJhbmtpbmcgc2NvcmUuIDEgaXMgbW9zdCByZWxldmFudCwgYW5kIDAgaXMgbGVhc3QgcmVsZXZhbnQuIE9mdGVuLCBzZWFyY2ggcmVzdWx0cyBhcmUgc29ydGVkIGJ5IHNjb3JlLCBidXQgdGhlIGNsaWVudCBtYXkgc3BlY2lmeSBhIGRpZmZlcmVudCBzb3J0IG9yZGVyLlxyXG4gICAqIFNlZSBbUGF0aWVudCBNYXRjaF0ocGF0aWVudC1vcGVyYXRpb24tbWF0Y2guaHRtbCkgZm9yIHRoZSBFTVBJIHNlYXJjaCB3aGljaCByZWxhdGVzIHRvIHRoaXMgZWxlbWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgc2NvcmU/OiBmaGlyLkZoaXJEZWNpbWFsfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBCdW5kbGVFbnRyeVNlYXJjaCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEJ1bmRsZUVudHJ5U2VhcmNoQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ21vZGUnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMubW9kZSA9IG5ldyBmaGlyLkZoaXJDb2RlPFNlYXJjaEVudHJ5TW9kZUNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5tb2RlfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19tb2RlJ10pIHtcclxuICAgICAgaWYgKHRoaXMubW9kZSkgeyB0aGlzLm1vZGUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbW9kZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLm1vZGUgPSBuZXcgZmhpci5GaGlyQ29kZTxTZWFyY2hFbnRyeU1vZGVDb2RlVHlwZT4oc291cmNlLl9tb2RlIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydzY29yZSddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5zY29yZSA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHt2YWx1ZTogc291cmNlLnNjb3JlfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zY29yZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnNjb3JlKSB7IHRoaXMuc2NvcmUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc2NvcmUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zY29yZSA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHNvdXJjZS5fc2NvcmUgYXMgUGFydGlhbDxmaGlyLkZoaXJEZWNpbWFsQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnQnVuZGxlLmVudHJ5LnNlYXJjaCcgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1NWKCdtb2RlJyxleHAsJ1NlYXJjaEVudHJ5TW9kZScsU2VhcmNoRW50cnlNb2RlVnNWYWxpZGF0aW9uLCdyJykpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3Njb3JlJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBCdW5kbGVFbnRyeVJlcXVlc3QgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQnVuZGxlRW50cnlSZXF1ZXN0QXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogSW4gYSB0cmFuc2FjdGlvbiBvciBiYXRjaCwgdGhpcyBpcyB0aGUgSFRUUCBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQgZm9yIHRoaXMgZW50cnkuIEluIGEgaGlzdG9yeSBidW5kbGUsIHRoaXMgaW5kaWNhdGVzIHRoZSBIVFRQIGFjdGlvbiB0aGF0IG9jY3VycmVkLlxyXG4gICAqL1xyXG4gIG1ldGhvZDogZmhpci5GaGlyQ29kZTxIdHRwVmVyYkNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUuZW50cnkucmVxdWVzdC5tZXRob2RcclxuICAgKi9cclxuICBfbWV0aG9kPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBFLmcuIGZvciBhIFBhdGllbnQgQ3JlYXRlLCB0aGUgbWV0aG9kIHdvdWxkIGJlIFwiUE9TVFwiIGFuZCB0aGUgVVJMIHdvdWxkIGJlIFwiUGF0aWVudFwiLiBGb3IgYSBQYXRpZW50IFVwZGF0ZSwgdGhlIG1ldGhvZCB3b3VsZCBiZSBQVVQgYW5kIHRoZSBVUkwgd291bGQgYmUgXCJQYXRpZW50L1tpZF1cIi5cclxuICAgKi9cclxuICB1cmw6IGZoaXIuRmhpclVyaXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUuZW50cnkucmVxdWVzdC51cmxcclxuICAgKi9cclxuICBfdXJsPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBJZiB0aGUgRVRhZyB2YWx1ZXMgbWF0Y2gsIHJldHVybiBhIDMwNCBOb3QgTW9kaWZpZWQgc3RhdHVzLiBTZWUgdGhlIEFQSSBkb2N1bWVudGF0aW9uIGZvciBbXCJDb25kaXRpb25hbCBSZWFkXCJdKGh0dHAuaHRtbCNjcmVhZCkuXHJcbiAgICovXHJcbiAgaWZOb25lTWF0Y2g/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLmVudHJ5LnJlcXVlc3QuaWZOb25lTWF0Y2hcclxuICAgKi9cclxuICBfaWZOb25lTWF0Y2g/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIE9ubHkgcGVyZm9ybSB0aGUgb3BlcmF0aW9uIGlmIHRoZSBsYXN0IHVwZGF0ZWQgZGF0ZSBtYXRjaGVzLiBTZWUgdGhlIEFQSSBkb2N1bWVudGF0aW9uIGZvciBbXCJDb25kaXRpb25hbCBSZWFkXCJdKGh0dHAuaHRtbCNjcmVhZCkuXHJcbiAgICovXHJcbiAgaWZNb2RpZmllZFNpbmNlPzogZmhpci5GaGlySW5zdGFudHxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUuZW50cnkucmVxdWVzdC5pZk1vZGlmaWVkU2luY2VcclxuICAgKi9cclxuICBfaWZNb2RpZmllZFNpbmNlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBPbmx5IHBlcmZvcm0gdGhlIG9wZXJhdGlvbiBpZiB0aGUgRXRhZyB2YWx1ZSBtYXRjaGVzLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlIHRoZSBBUEkgc2VjdGlvbiBbXCJNYW5hZ2luZyBSZXNvdXJjZSBDb250ZW50aW9uXCJdKGh0dHAuaHRtbCNjb25jdXJyZW5jeSkuXHJcbiAgICovXHJcbiAgaWZNYXRjaD86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUuZW50cnkucmVxdWVzdC5pZk1hdGNoXHJcbiAgICovXHJcbiAgX2lmTWF0Y2g/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEluc3RydWN0IHRoZSBzZXJ2ZXIgbm90IHRvIHBlcmZvcm0gdGhlIGNyZWF0ZSBpZiBhIHNwZWNpZmllZCByZXNvdXJjZSBhbHJlYWR5IGV4aXN0cy4gRm9yIGZ1cnRoZXIgaW5mb3JtYXRpb24sIHNlZSB0aGUgQVBJIGRvY3VtZW50YXRpb24gZm9yIFtcIkNvbmRpdGlvbmFsIENyZWF0ZVwiXShodHRwLmh0bWwjY2NyZWF0ZSkuIFRoaXMgaXMganVzdCB0aGUgcXVlcnkgcG9ydGlvbiBvZiB0aGUgVVJMIC0gd2hhdCBmb2xsb3dzIHRoZSBcIj9cIiAobm90IGluY2x1ZGluZyB0aGUgXCI/XCIpLlxyXG4gICAqL1xyXG4gIGlmTm9uZUV4aXN0PzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEJ1bmRsZS5lbnRyeS5yZXF1ZXN0LmlmTm9uZUV4aXN0XHJcbiAgICovXHJcbiAgX2lmTm9uZUV4aXN0PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIEFkZGl0aW9uYWwgaW5mb3JtYXRpb24gYWJvdXQgaG93IHRoaXMgZW50cnkgc2hvdWxkIGJlIHByb2Nlc3NlZCBhcyBwYXJ0IG9mIGEgdHJhbnNhY3Rpb24gb3IgYmF0Y2guICBGb3IgaGlzdG9yeSwgaXQgc2hvd3MgaG93IHRoZSBlbnRyeSB3YXMgcHJvY2Vzc2VkIHRvIGNyZWF0ZSB0aGUgdmVyc2lvbiBjb250YWluZWQgaW4gdGhlIGVudHJ5LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJ1bmRsZUVudHJ5UmVxdWVzdCBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0J1bmRsZUVudHJ5UmVxdWVzdCc7XHJcbiAgLyoqXHJcbiAgICogSW4gYSB0cmFuc2FjdGlvbiBvciBiYXRjaCwgdGhpcyBpcyB0aGUgSFRUUCBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQgZm9yIHRoaXMgZW50cnkuIEluIGEgaGlzdG9yeSBidW5kbGUsIHRoaXMgaW5kaWNhdGVzIHRoZSBIVFRQIGFjdGlvbiB0aGF0IG9jY3VycmVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtZXRob2Q6IGZoaXIuRmhpckNvZGU8SHR0cFZlcmJDb2RlVHlwZT58bnVsbDtcclxuICAvKipcclxuICAgKiBFLmcuIGZvciBhIFBhdGllbnQgQ3JlYXRlLCB0aGUgbWV0aG9kIHdvdWxkIGJlIFwiUE9TVFwiIGFuZCB0aGUgVVJMIHdvdWxkIGJlIFwiUGF0aWVudFwiLiBGb3IgYSBQYXRpZW50IFVwZGF0ZSwgdGhlIG1ldGhvZCB3b3VsZCBiZSBQVVQgYW5kIHRoZSBVUkwgd291bGQgYmUgXCJQYXRpZW50L1tpZF1cIi5cclxuICAgKi9cclxuICBwdWJsaWMgdXJsOiBmaGlyLkZoaXJVcml8bnVsbDtcclxuICAvKipcclxuICAgKiBJZiB0aGUgRVRhZyB2YWx1ZXMgbWF0Y2gsIHJldHVybiBhIDMwNCBOb3QgTW9kaWZpZWQgc3RhdHVzLiBTZWUgdGhlIEFQSSBkb2N1bWVudGF0aW9uIGZvciBbXCJDb25kaXRpb25hbCBSZWFkXCJdKGh0dHAuaHRtbCNjcmVhZCkuXHJcbiAgICovXHJcbiAgcHVibGljIGlmTm9uZU1hdGNoPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBPbmx5IHBlcmZvcm0gdGhlIG9wZXJhdGlvbiBpZiB0aGUgbGFzdCB1cGRhdGVkIGRhdGUgbWF0Y2hlcy4gU2VlIHRoZSBBUEkgZG9jdW1lbnRhdGlvbiBmb3IgW1wiQ29uZGl0aW9uYWwgUmVhZFwiXShodHRwLmh0bWwjY3JlYWQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZk1vZGlmaWVkU2luY2U/OiBmaGlyLkZoaXJJbnN0YW50fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBPbmx5IHBlcmZvcm0gdGhlIG9wZXJhdGlvbiBpZiB0aGUgRXRhZyB2YWx1ZSBtYXRjaGVzLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlIHRoZSBBUEkgc2VjdGlvbiBbXCJNYW5hZ2luZyBSZXNvdXJjZSBDb250ZW50aW9uXCJdKGh0dHAuaHRtbCNjb25jdXJyZW5jeSkuXHJcbiAgICovXHJcbiAgcHVibGljIGlmTWF0Y2g/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluc3RydWN0IHRoZSBzZXJ2ZXIgbm90IHRvIHBlcmZvcm0gdGhlIGNyZWF0ZSBpZiBhIHNwZWNpZmllZCByZXNvdXJjZSBhbHJlYWR5IGV4aXN0cy4gRm9yIGZ1cnRoZXIgaW5mb3JtYXRpb24sIHNlZSB0aGUgQVBJIGRvY3VtZW50YXRpb24gZm9yIFtcIkNvbmRpdGlvbmFsIENyZWF0ZVwiXShodHRwLmh0bWwjY2NyZWF0ZSkuIFRoaXMgaXMganVzdCB0aGUgcXVlcnkgcG9ydGlvbiBvZiB0aGUgVVJMIC0gd2hhdCBmb2xsb3dzIHRoZSBcIj9cIiAobm90IGluY2x1ZGluZyB0aGUgXCI/XCIpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZk5vbmVFeGlzdD86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQnVuZGxlRW50cnlSZXF1ZXN0IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8QnVuZGxlRW50cnlSZXF1ZXN0QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ21ldGhvZCddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5tZXRob2QgPSBuZXcgZmhpci5GaGlyQ29kZTxIdHRwVmVyYkNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5tZXRob2R9LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubWV0aG9kID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX21ldGhvZCddKSB7XHJcbiAgICAgIGlmICh0aGlzLm1ldGhvZCkgeyB0aGlzLm1ldGhvZC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9tZXRob2QhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5tZXRob2QgPSBuZXcgZmhpci5GaGlyQ29kZTxIdHRwVmVyYkNvZGVUeXBlPihzb3VyY2UuX21ldGhvZCBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsndXJsJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnVybCA9IG5ldyBmaGlyLkZoaXJVcmkoe3ZhbHVlOiBzb3VyY2UudXJsfSwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnVybCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ191cmwnXSkge1xyXG4gICAgICBpZiAodGhpcy51cmwpIHsgdGhpcy51cmwuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdXJsISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudXJsID0gbmV3IGZoaXIuRmhpclVyaShzb3VyY2UuX3VybCBhcyBQYXJ0aWFsPGZoaXIuRmhpclVyaUFyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnaWZOb25lTWF0Y2gnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuaWZOb25lTWF0Y2ggPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmlmTm9uZU1hdGNofSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19pZk5vbmVNYXRjaCddKSB7XHJcbiAgICAgIGlmICh0aGlzLmlmTm9uZU1hdGNoKSB7IHRoaXMuaWZOb25lTWF0Y2guYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5faWZOb25lTWF0Y2ghKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5pZk5vbmVNYXRjaCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9pZk5vbmVNYXRjaCBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnaWZNb2RpZmllZFNpbmNlJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLmlmTW9kaWZpZWRTaW5jZSA9IG5ldyBmaGlyLkZoaXJJbnN0YW50KHt2YWx1ZTogc291cmNlLmlmTW9kaWZpZWRTaW5jZX0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfaWZNb2RpZmllZFNpbmNlJ10pIHtcclxuICAgICAgaWYgKHRoaXMuaWZNb2RpZmllZFNpbmNlKSB7IHRoaXMuaWZNb2RpZmllZFNpbmNlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2lmTW9kaWZpZWRTaW5jZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmlmTW9kaWZpZWRTaW5jZSA9IG5ldyBmaGlyLkZoaXJJbnN0YW50KHNvdXJjZS5faWZNb2RpZmllZFNpbmNlIGFzIFBhcnRpYWw8Zmhpci5GaGlySW5zdGFudEFyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnaWZNYXRjaCddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5pZk1hdGNoID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5pZk1hdGNofSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19pZk1hdGNoJ10pIHtcclxuICAgICAgaWYgKHRoaXMuaWZNYXRjaCkgeyB0aGlzLmlmTWF0Y2guYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5faWZNYXRjaCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmlmTWF0Y2ggPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5faWZNYXRjaCBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnaWZOb25lRXhpc3QnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuaWZOb25lRXhpc3QgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmlmTm9uZUV4aXN0fSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19pZk5vbmVFeGlzdCddKSB7XHJcbiAgICAgIGlmICh0aGlzLmlmTm9uZUV4aXN0KSB7IHRoaXMuaWZOb25lRXhpc3QuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5faWZOb25lRXhpc3QhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5pZk5vbmVFeGlzdCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9pZk5vbmVFeGlzdCBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0J1bmRsZS5lbnRyeS5yZXF1ZXN0JyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSU1YoJ21ldGhvZCcsZXhwLCdIdHRwVmVyYicsSHR0cFZlcmJWc1ZhbGlkYXRpb24sJ3InKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygndXJsJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdpZk5vbmVNYXRjaCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnaWZNb2RpZmllZFNpbmNlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdpZk1hdGNoJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdpZk5vbmVFeGlzdCcsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQnVuZGxlRW50cnlSZXNwb25zZSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBCdW5kbGVFbnRyeVJlc3BvbnNlQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIHN0YXR1cyBjb2RlIHJldHVybmVkIGJ5IHByb2Nlc3NpbmcgdGhpcyBlbnRyeS4gVGhlIHN0YXR1cyBTSEFMTCBzdGFydCB3aXRoIGEgMyBkaWdpdCBIVFRQIGNvZGUgKGUuZy4gNDA0KSBhbmQgbWF5IGNvbnRhaW4gdGhlIHN0YW5kYXJkIEhUVFAgZGVzY3JpcHRpb24gYXNzb2NpYXRlZCB3aXRoIHRoZSBzdGF0dXMgY29kZS5cclxuICAgKi9cclxuICBzdGF0dXM6IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUuZW50cnkucmVzcG9uc2Uuc3RhdHVzXHJcbiAgICovXHJcbiAgX3N0YXR1cz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGxvY2F0aW9uIGhlYWRlciBjcmVhdGVkIGJ5IHByb2Nlc3NpbmcgdGhpcyBvcGVyYXRpb24sIHBvcHVsYXRlZCBpZiB0aGUgb3BlcmF0aW9uIHJldHVybnMgYSBsb2NhdGlvbi5cclxuICAgKi9cclxuICBsb2NhdGlvbj86IGZoaXIuRmhpclVyaXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUuZW50cnkucmVzcG9uc2UubG9jYXRpb25cclxuICAgKi9cclxuICBfbG9jYXRpb24/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEV0YWdzIG1hdGNoIHRoZSBSZXNvdXJjZS5tZXRhLnZlcnNpb25JZC4gVGhlIEVUYWcgaGFzIHRvIG1hdGNoIHRoZSB2ZXJzaW9uIGlkIGluIHRoZSBoZWFkZXIgaWYgYSByZXNvdXJjZSBpcyBpbmNsdWRlZC5cclxuICAgKi9cclxuICBldGFnPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEJ1bmRsZS5lbnRyeS5yZXNwb25zZS5ldGFnXHJcbiAgICovXHJcbiAgX2V0YWc/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaGFzIHRvIG1hdGNoIHRoZSBzYW1lIHRpbWUgaW4gdGhlIG1ldGEgaGVhZGVyIChtZXRhLmxhc3RVcGRhdGVkKSBpZiBhIHJlc291cmNlIGlzIGluY2x1ZGVkLlxyXG4gICAqL1xyXG4gIGxhc3RNb2RpZmllZD86IGZoaXIuRmhpckluc3RhbnR8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLmVudHJ5LnJlc3BvbnNlLmxhc3RNb2RpZmllZFxyXG4gICAqL1xyXG4gIF9sYXN0TW9kaWZpZWQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEZvciBhIFBPU1QvUFVUIG9wZXJhdGlvbiwgdGhpcyBpcyB0aGUgZXF1aXZhbGVudCBvdXRjb21lIHRoYXQgd291bGQgYmUgcmV0dXJuZWQgZm9yIHByZWZlciA9IG9wZXJhdGlvbm91dGNvbWUgLSBleGNlcHQgdGhhdCB0aGUgcmVzb3VyY2UgaXMgYWx3YXlzIHJldHVybmVkIHdoZXRoZXIgb3Igbm90IHRoZSBvdXRjb21lIGlzIHJldHVybmVkLlxyXG4gICAqIFRoaXMgb3V0Y29tZSBpcyBub3QgdXNlZCBmb3IgZXJyb3IgcmVzcG9uc2VzIGluIGJhdGNoL3RyYW5zYWN0aW9uLCBvbmx5IGZvciBoaW50cyBhbmQgd2FybmluZ3MuIEluIGEgYmF0Y2ggb3BlcmF0aW9uLCB0aGUgZXJyb3Igd2lsbCBiZSBpbiBCdW5kbGUuZW50cnkucmVzcG9uc2UsIGFuZCBmb3IgdHJhbnNhY3Rpb24sIHRoZXJlIHdpbGwgYmUgYSBzaW5nbGUgT3BlcmF0aW9uT3V0Y29tZSBpbnN0ZWFkIG9mIGEgYnVuZGxlIGluIHRoZSBjYXNlIG9mIGFuIGVycm9yLlxyXG4gICAqL1xyXG4gIG91dGNvbWU/OiBmaGlyLlJlc291cmNlQXJnc3xhbnl8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogSW5kaWNhdGVzIHRoZSByZXN1bHRzIG9mIHByb2Nlc3NpbmcgdGhlIGNvcnJlc3BvbmRpbmcgJ3JlcXVlc3QnIGVudHJ5IGluIHRoZSBiYXRjaCBvciB0cmFuc2FjdGlvbiBiZWluZyByZXNwb25kZWQgdG8gb3Igd2hhdCB0aGUgcmVzdWx0cyBvZiBhbiBvcGVyYXRpb24gd2hlcmUgd2hlbiByZXR1cm5pbmcgaGlzdG9yeS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBCdW5kbGVFbnRyeVJlc3BvbnNlIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQnVuZGxlRW50cnlSZXNwb25zZSc7XHJcbiAgLyoqXHJcbiAgICogVGhlIHN0YXR1cyBjb2RlIHJldHVybmVkIGJ5IHByb2Nlc3NpbmcgdGhpcyBlbnRyeS4gVGhlIHN0YXR1cyBTSEFMTCBzdGFydCB3aXRoIGEgMyBkaWdpdCBIVFRQIGNvZGUgKGUuZy4gNDA0KSBhbmQgbWF5IGNvbnRhaW4gdGhlIHN0YW5kYXJkIEhUVFAgZGVzY3JpcHRpb24gYXNzb2NpYXRlZCB3aXRoIHRoZSBzdGF0dXMgY29kZS5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdHVzOiBmaGlyLkZoaXJTdHJpbmd8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgbG9jYXRpb24gaGVhZGVyIGNyZWF0ZWQgYnkgcHJvY2Vzc2luZyB0aGlzIG9wZXJhdGlvbiwgcG9wdWxhdGVkIGlmIHRoZSBvcGVyYXRpb24gcmV0dXJucyBhIGxvY2F0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBsb2NhdGlvbj86IGZoaXIuRmhpclVyaXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXRhZ3MgbWF0Y2ggdGhlIFJlc291cmNlLm1ldGEudmVyc2lvbklkLiBUaGUgRVRhZyBoYXMgdG8gbWF0Y2ggdGhlIHZlcnNpb24gaWQgaW4gdGhlIGhlYWRlciBpZiBhIHJlc291cmNlIGlzIGluY2x1ZGVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBldGFnPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGhhcyB0byBtYXRjaCB0aGUgc2FtZSB0aW1lIGluIHRoZSBtZXRhIGhlYWRlciAobWV0YS5sYXN0VXBkYXRlZCkgaWYgYSByZXNvdXJjZSBpcyBpbmNsdWRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgbGFzdE1vZGlmaWVkPzogZmhpci5GaGlySW5zdGFudHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRm9yIGEgUE9TVC9QVVQgb3BlcmF0aW9uLCB0aGlzIGlzIHRoZSBlcXVpdmFsZW50IG91dGNvbWUgdGhhdCB3b3VsZCBiZSByZXR1cm5lZCBmb3IgcHJlZmVyID0gb3BlcmF0aW9ub3V0Y29tZSAtIGV4Y2VwdCB0aGF0IHRoZSByZXNvdXJjZSBpcyBhbHdheXMgcmV0dXJuZWQgd2hldGhlciBvciBub3QgdGhlIG91dGNvbWUgaXMgcmV0dXJuZWQuXHJcbiAgICogVGhpcyBvdXRjb21lIGlzIG5vdCB1c2VkIGZvciBlcnJvciByZXNwb25zZXMgaW4gYmF0Y2gvdHJhbnNhY3Rpb24sIG9ubHkgZm9yIGhpbnRzIGFuZCB3YXJuaW5ncy4gSW4gYSBiYXRjaCBvcGVyYXRpb24sIHRoZSBlcnJvciB3aWxsIGJlIGluIEJ1bmRsZS5lbnRyeS5yZXNwb25zZSwgYW5kIGZvciB0cmFuc2FjdGlvbiwgdGhlcmUgd2lsbCBiZSBhIHNpbmdsZSBPcGVyYXRpb25PdXRjb21lIGluc3RlYWQgb2YgYSBidW5kbGUgaW4gdGhlIGNhc2Ugb2YgYW4gZXJyb3IuXHJcbiAgICovXHJcbiAgcHVibGljIG91dGNvbWU/OiBmaGlyLkZoaXJSZXNvdXJjZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQnVuZGxlRW50cnlSZXNwb25zZSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEJ1bmRsZUVudHJ5UmVzcG9uc2VBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnc3RhdHVzJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2Uuc3RhdHVzfSwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zdGF0dXMnXSkge1xyXG4gICAgICBpZiAodGhpcy5zdGF0dXMpIHsgdGhpcy5zdGF0dXMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc3RhdHVzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3N0YXR1cyBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnbG9jYXRpb24nXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMubG9jYXRpb24gPSBuZXcgZmhpci5GaGlyVXJpKHt2YWx1ZTogc291cmNlLmxvY2F0aW9ufSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19sb2NhdGlvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLmxvY2F0aW9uKSB7IHRoaXMubG9jYXRpb24uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbG9jYXRpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5sb2NhdGlvbiA9IG5ldyBmaGlyLkZoaXJVcmkoc291cmNlLl9sb2NhdGlvbiBhcyBQYXJ0aWFsPGZoaXIuRmhpclVyaUFyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnZXRhZyddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5ldGFnID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5ldGFnfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19ldGFnJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZXRhZykgeyB0aGlzLmV0YWcuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZXRhZyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmV0YWcgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fZXRhZyBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnbGFzdE1vZGlmaWVkJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLmxhc3RNb2RpZmllZCA9IG5ldyBmaGlyLkZoaXJJbnN0YW50KHt2YWx1ZTogc291cmNlLmxhc3RNb2RpZmllZH0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfbGFzdE1vZGlmaWVkJ10pIHtcclxuICAgICAgaWYgKHRoaXMubGFzdE1vZGlmaWVkKSB7IHRoaXMubGFzdE1vZGlmaWVkLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2xhc3RNb2RpZmllZCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmxhc3RNb2RpZmllZCA9IG5ldyBmaGlyLkZoaXJJbnN0YW50KHNvdXJjZS5fbGFzdE1vZGlmaWVkIGFzIFBhcnRpYWw8Zmhpci5GaGlySW5zdGFudEFyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnb3V0Y29tZSddKSB7IHRoaXMub3V0Y29tZSA9IChmaGlyLnJlc291cmNlRmFjdG9yeShzb3VyY2Uub3V0Y29tZSwgb3B0aW9ucykgPz8gdW5kZWZpbmVkKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0J1bmRsZS5lbnRyeS5yZXNwb25zZScgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ3N0YXR1cycsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnbG9jYXRpb24nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2V0YWcnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2xhc3RNb2RpZmllZCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnb3V0Y29tZScsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQnVuZGxlRW50cnkgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQnVuZGxlRW50cnlBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBBIHNlcmllcyBvZiBsaW5rcyB0aGF0IHByb3ZpZGUgY29udGV4dCB0byB0aGlzIGVudHJ5LlxyXG4gICAqL1xyXG4gIGxpbms/OiBmaGlyLkJ1bmRsZUxpbmtBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIGZ1bGxVcmwgbWlnaHQgbm90IGJlIFt1bmlxdWUgaW4gdGhlIGNvbnRleHQgb2YgYSByZXNvdXJjZV0oYnVuZGxlLmh0bWwjYnVuZGxlLXVuaXF1ZSkuIE5vdGUgdGhhdCBzaW5jZSBbRkhJUiByZXNvdXJjZXMgZG8gbm90IG5lZWQgdG8gYmUgc2VydmVkIHRocm91Z2ggdGhlIEZISVIgQVBJXShyZWZlcmVuY2VzLmh0bWwpLCB0aGUgZnVsbFVSTCBtaWdodCBiZSBhIFVSTiBvciBhbiBhYnNvbHV0ZSBVUkwgdGhhdCBkb2VzIG5vdCBlbmQgd2l0aCB0aGUgbG9naWNhbCBpZCBvZiB0aGUgcmVzb3VyY2UgKFJlc291cmNlLmlkKS4gSG93ZXZlciwgYnV0IGlmIHRoZSBmdWxsVXJsIGRvZXMgbG9vayBsaWtlIGEgUkVTVGZ1bCBzZXJ2ZXIgVVJMIChlLmcuIG1lZXRzIHRoZSBbcmVnZXhdKHJlZmVyZW5jZXMuaHRtbCNyZWdleCksIHRoZW4gdGhlICdpZCcgcG9ydGlvbiBvZiB0aGUgZnVsbFVybCBTSEFMTCBlbmQgd2l0aCB0aGUgUmVzb3VyY2UuaWQuXHJcbiAgICogTm90ZSB0aGF0IHRoZSBmdWxsVXJsIGlzIG5vdCB0aGUgc2FtZSBhcyB0aGUgY2Fub25pY2FsIFVSTCAtIGl0J3MgYW4gYWJzb2x1dGUgdXJsIGZvciBhbiBlbmRwb2ludCBzZXJ2aW5nIHRoZSByZXNvdXJjZSAodGhlc2Ugd2lsbCBoYXBwZW4gdG8gaGF2ZSB0aGUgc2FtZSB2YWx1ZSBvbiB0aGUgY2Fub25pY2FsIHNlcnZlciBmb3IgdGhlIHJlc291cmNlIHdpdGggdGhlIGNhbm9uaWNhbCBVUkwpLlxyXG4gICAqL1xyXG4gIGZ1bGxVcmw/OiBmaGlyLkZoaXJVcml8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLmVudHJ5LmZ1bGxVcmxcclxuICAgKi9cclxuICBfZnVsbFVybD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIFJlc291cmNlIGZvciB0aGUgZW50cnkuIFRoZSBwdXJwb3NlL21lYW5pbmcgb2YgdGhlIHJlc291cmNlIGlzIGRldGVybWluZWQgYnkgdGhlIEJ1bmRsZS50eXBlLlxyXG4gICAqL1xyXG4gIHJlc291cmNlPzogZmhpci5SZXNvdXJjZUFyZ3N8YW55fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmZvcm1hdGlvbiBhYm91dCB0aGUgc2VhcmNoIHByb2Nlc3MgdGhhdCBsZWFkIHRvIHRoZSBjcmVhdGlvbiBvZiB0aGlzIGVudHJ5LlxyXG4gICAqL1xyXG4gIHNlYXJjaD86IGZoaXIuQnVuZGxlRW50cnlTZWFyY2hBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBZGRpdGlvbmFsIGluZm9ybWF0aW9uIGFib3V0IGhvdyB0aGlzIGVudHJ5IHNob3VsZCBiZSBwcm9jZXNzZWQgYXMgcGFydCBvZiBhIHRyYW5zYWN0aW9uIG9yIGJhdGNoLiAgRm9yIGhpc3RvcnksIGl0IHNob3dzIGhvdyB0aGUgZW50cnkgd2FzIHByb2Nlc3NlZCB0byBjcmVhdGUgdGhlIHZlcnNpb24gY29udGFpbmVkIGluIHRoZSBlbnRyeS5cclxuICAgKi9cclxuICByZXF1ZXN0PzogZmhpci5CdW5kbGVFbnRyeVJlcXVlc3RBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgdGhlIHJlc3VsdHMgb2YgcHJvY2Vzc2luZyB0aGUgY29ycmVzcG9uZGluZyAncmVxdWVzdCcgZW50cnkgaW4gdGhlIGJhdGNoIG9yIHRyYW5zYWN0aW9uIGJlaW5nIHJlc3BvbmRlZCB0byBvciB3aGF0IHRoZSByZXN1bHRzIG9mIGFuIG9wZXJhdGlvbiB3aGVyZSB3aGVuIHJldHVybmluZyBoaXN0b3J5LlxyXG4gICAqL1xyXG4gIHJlc3BvbnNlPzogZmhpci5CdW5kbGVFbnRyeVJlc3BvbnNlQXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBbiBlbnRyeSBpbiBhIGJ1bmRsZSByZXNvdXJjZSAtIHdpbGwgZWl0aGVyIGNvbnRhaW4gYSByZXNvdXJjZSBvciBpbmZvcm1hdGlvbiBhYm91dCBhIHJlc291cmNlICh0cmFuc2FjdGlvbnMgYW5kIGhpc3Rvcnkgb25seSkuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQnVuZGxlRW50cnkgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdCdW5kbGVFbnRyeSc7XHJcbiAgLyoqXHJcbiAgICogQSBzZXJpZXMgb2YgbGlua3MgdGhhdCBwcm92aWRlIGNvbnRleHQgdG8gdGhpcyBlbnRyeS5cclxuICAgKi9cclxuICBwdWJsaWMgbGluazogZmhpci5CdW5kbGVMaW5rW107XHJcbiAgLyoqXHJcbiAgICogZnVsbFVybCBtaWdodCBub3QgYmUgW3VuaXF1ZSBpbiB0aGUgY29udGV4dCBvZiBhIHJlc291cmNlXShidW5kbGUuaHRtbCNidW5kbGUtdW5pcXVlKS4gTm90ZSB0aGF0IHNpbmNlIFtGSElSIHJlc291cmNlcyBkbyBub3QgbmVlZCB0byBiZSBzZXJ2ZWQgdGhyb3VnaCB0aGUgRkhJUiBBUEldKHJlZmVyZW5jZXMuaHRtbCksIHRoZSBmdWxsVVJMIG1pZ2h0IGJlIGEgVVJOIG9yIGFuIGFic29sdXRlIFVSTCB0aGF0IGRvZXMgbm90IGVuZCB3aXRoIHRoZSBsb2dpY2FsIGlkIG9mIHRoZSByZXNvdXJjZSAoUmVzb3VyY2UuaWQpLiBIb3dldmVyLCBidXQgaWYgdGhlIGZ1bGxVcmwgZG9lcyBsb29rIGxpa2UgYSBSRVNUZnVsIHNlcnZlciBVUkwgKGUuZy4gbWVldHMgdGhlIFtyZWdleF0ocmVmZXJlbmNlcy5odG1sI3JlZ2V4KSwgdGhlbiB0aGUgJ2lkJyBwb3J0aW9uIG9mIHRoZSBmdWxsVXJsIFNIQUxMIGVuZCB3aXRoIHRoZSBSZXNvdXJjZS5pZC5cclxuICAgKiBOb3RlIHRoYXQgdGhlIGZ1bGxVcmwgaXMgbm90IHRoZSBzYW1lIGFzIHRoZSBjYW5vbmljYWwgVVJMIC0gaXQncyBhbiBhYnNvbHV0ZSB1cmwgZm9yIGFuIGVuZHBvaW50IHNlcnZpbmcgdGhlIHJlc291cmNlICh0aGVzZSB3aWxsIGhhcHBlbiB0byBoYXZlIHRoZSBzYW1lIHZhbHVlIG9uIHRoZSBjYW5vbmljYWwgc2VydmVyIGZvciB0aGUgcmVzb3VyY2Ugd2l0aCB0aGUgY2Fub25pY2FsIFVSTCkuXHJcbiAgICovXHJcbiAgcHVibGljIGZ1bGxVcmw/OiBmaGlyLkZoaXJVcml8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBSZXNvdXJjZSBmb3IgdGhlIGVudHJ5LiBUaGUgcHVycG9zZS9tZWFuaW5nIG9mIHRoZSByZXNvdXJjZSBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBCdW5kbGUudHlwZS5cclxuICAgKi9cclxuICBwdWJsaWMgcmVzb3VyY2U/OiBmaGlyLkZoaXJSZXNvdXJjZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5mb3JtYXRpb24gYWJvdXQgdGhlIHNlYXJjaCBwcm9jZXNzIHRoYXQgbGVhZCB0byB0aGUgY3JlYXRpb24gb2YgdGhpcyBlbnRyeS5cclxuICAgKi9cclxuICBwdWJsaWMgc2VhcmNoPzogZmhpci5CdW5kbGVFbnRyeVNlYXJjaHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWRkaXRpb25hbCBpbmZvcm1hdGlvbiBhYm91dCBob3cgdGhpcyBlbnRyeSBzaG91bGQgYmUgcHJvY2Vzc2VkIGFzIHBhcnQgb2YgYSB0cmFuc2FjdGlvbiBvciBiYXRjaC4gIEZvciBoaXN0b3J5LCBpdCBzaG93cyBob3cgdGhlIGVudHJ5IHdhcyBwcm9jZXNzZWQgdG8gY3JlYXRlIHRoZSB2ZXJzaW9uIGNvbnRhaW5lZCBpbiB0aGUgZW50cnkuXHJcbiAgICovXHJcbiAgcHVibGljIHJlcXVlc3Q/OiBmaGlyLkJ1bmRsZUVudHJ5UmVxdWVzdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHRoZSByZXN1bHRzIG9mIHByb2Nlc3NpbmcgdGhlIGNvcnJlc3BvbmRpbmcgJ3JlcXVlc3QnIGVudHJ5IGluIHRoZSBiYXRjaCBvciB0cmFuc2FjdGlvbiBiZWluZyByZXNwb25kZWQgdG8gb3Igd2hhdCB0aGUgcmVzdWx0cyBvZiBhbiBvcGVyYXRpb24gd2hlcmUgd2hlbiByZXR1cm5pbmcgaGlzdG9yeS5cclxuICAgKi9cclxuICBwdWJsaWMgcmVzcG9uc2U/OiBmaGlyLkJ1bmRsZUVudHJ5UmVzcG9uc2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEJ1bmRsZUVudHJ5IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8QnVuZGxlRW50cnlBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnbGluayddKSB7IHRoaXMubGluayA9IHNvdXJjZS5saW5rLm1hcCgoeCkgPT4gbmV3IGZoaXIuQnVuZGxlTGluayh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmxpbmsgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZnVsbFVybCddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5mdWxsVXJsID0gbmV3IGZoaXIuRmhpclVyaSh7dmFsdWU6IHNvdXJjZS5mdWxsVXJsfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19mdWxsVXJsJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZnVsbFVybCkgeyB0aGlzLmZ1bGxVcmwuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZnVsbFVybCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmZ1bGxVcmwgPSBuZXcgZmhpci5GaGlyVXJpKHNvdXJjZS5fZnVsbFVybCBhcyBQYXJ0aWFsPGZoaXIuRmhpclVyaUFyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVzb3VyY2UnXSkgeyB0aGlzLnJlc291cmNlID0gKGZoaXIucmVzb3VyY2VGYWN0b3J5KHNvdXJjZS5yZXNvdXJjZSwgb3B0aW9ucykgPz8gdW5kZWZpbmVkKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2VhcmNoJ10pIHsgdGhpcy5zZWFyY2ggPSBuZXcgZmhpci5CdW5kbGVFbnRyeVNlYXJjaChzb3VyY2Uuc2VhcmNoLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVxdWVzdCddKSB7IHRoaXMucmVxdWVzdCA9IG5ldyBmaGlyLkJ1bmRsZUVudHJ5UmVxdWVzdChzb3VyY2UucmVxdWVzdCwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3Jlc3BvbnNlJ10pIHsgdGhpcy5yZXNwb25zZSA9IG5ldyBmaGlyLkJ1bmRsZUVudHJ5UmVzcG9uc2Uoc291cmNlLnJlc3BvbnNlLCBvcHRpb25zKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0J1bmRsZS5lbnRyeScgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2xpbmsnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2Z1bGxVcmwnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3Jlc291cmNlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdzZWFyY2gnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3JlcXVlc3QnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3Jlc3BvbnNlJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG5cclxuLyoqXHJcbiAqIEFjY2VzcyBhIGJ1bmRsZS5lbnRyeVtdLnJlc291cmNlIGFzIGEgdHlwZWQgcmVzb3VyY2VcclxuICovXHJcbiAgcmVzb3VyY2VBczxCdW5kZUNvbnRlbnRUeXBlID0gZmhpci5GaGlyUmVzb3VyY2U+KCk6IEJ1bmRlQ29udGVudFR5cGV8dW5rbm93biB7XHJcbiAgICByZXR1cm4gdGhpcy5yZXNvdXJjZSBhcyB1bmtub3duIGFzIEJ1bmRlQ29udGVudFR5cGU7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBCdW5kbGUgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQnVuZGxlQXJncyBleHRlbmRzIGZoaXIuUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiQnVuZGxlXCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFBlcnNpc3RlbnQgaWRlbnRpdHkgZ2VuZXJhbGx5IG9ubHkgbWF0dGVycyBmb3IgYmF0Y2hlcyBvZiB0eXBlIERvY3VtZW50LCBNZXNzYWdlLCBhbmQgQ29sbGVjdGlvbi4gSXQgd291bGQgbm90IG5vcm1hbGx5IGJlIHBvcHVsYXRlZCBmb3Igc2VhcmNoIGFuZCBoaXN0b3J5IHJlc3VsdHMgYW5kIHNlcnZlcnMgaWdub3JlIEJ1bmRsZS5pZGVudGlmaWVyIHdoZW4gcHJvY2Vzc2luZyBiYXRjaGVzIGFuZCB0cmFuc2FjdGlvbnMuIEZvciBEb2N1bWVudHMgIHRoZSAuaWRlbnRpZmllciBTSEFMTCBiZSBwb3B1bGF0ZWQgc3VjaCB0aGF0IHRoZSAuaWRlbnRpZmllciBpcyBnbG9iYWxseSB1bmlxdWUuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEl0J3MgcG9zc2libGUgdG8gdXNlIGEgYnVuZGxlIGZvciBvdGhlciBwdXJwb3NlcyAoZS5nLiBhIGRvY3VtZW50IGNhbiBiZSBhY2NlcHRlZCBhcyBhIHRyYW5zYWN0aW9uKS4gVGhpcyBpcyBwcmltYXJpbHkgZGVmaW5lZCBzbyB0aGF0IHRoZXJlIGNhbiBiZSBzcGVjaWZpYyBydWxlcyBmb3Igc29tZSBvZiB0aGUgYnVuZGxlIHR5cGVzLlxyXG4gICAqL1xyXG4gIHR5cGU6IGZoaXIuRmhpckNvZGU8QnVuZGxlVHlwZUNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUudHlwZVxyXG4gICAqL1xyXG4gIF90eXBlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBGb3IgbWFueSBidW5kbGVzLCB0aGUgdGltZXN0YW1wIGlzIGVxdWFsIHRvIC5tZXRhLmxhc3RVcGRhdGVkLCBiZWNhdXNlIHRoZXkgYXJlIG5vdCBzdG9yZWQgKGUuZy4gc2VhcmNoIHJlc3VsdHMpLiBXaGVuIGEgYnVuZGxlIGlzIHBsYWNlZCBpbiBhIHBlcnNpc3RlbnQgc3RvcmUsIC5tZXRhLmxhc3RVcGRhdGVkIHdpbGwgYmUgdXN1YWxseSBiZSBjaGFuZ2VkIGJ5IHRoZSBzZXJ2ZXIuIFdoZW4gdGhlIGJ1bmRsZSBpcyBhIG1lc3NhZ2UsIGEgbWlkZGxld2FyZSBhZ2VudCBhbHRlcmluZyB0aGUgbWVzc2FnZSAoZXZlbiBpZiBub3Qgc3RvcmVkKSBTSE9VTEQgdXBkYXRlIC5tZXRhLmxhc3RVcGRhdGVkLiAudGltZXN0YW1wIGlzIHVzZWQgdG8gdHJhY2sgdGhlIG9yaWdpbmFsIHRpbWUgb2YgdGhlIEJ1bmRsZSwgYW5kIFNIT1VMRCBiZSBwb3B1bGF0ZWQuICBcclxuICAgKiBVc2FnZTpcclxuICAgKiAqIGRvY3VtZW50IDogdGhlIGRhdGUgdGhlIGRvY3VtZW50IHdhcyBjcmVhdGVkLiBOb3RlOiB0aGUgY29tcG9zaXRpb24gbWF5IHByZWRhdGUgdGhlIGRvY3VtZW50LCBvciBiZSBhc3NvY2lhdGVkIHdpdGggbXVsdGlwbGUgZG9jdW1lbnRzLiBUaGUgZGF0ZSBvZiB0aGUgY29tcG9zaXRpb24gLSB0aGUgYXV0aG9yaW5nIHRpbWUgLSBtYXkgYmUgZWFybGllciB0aGFuIHRoZSBkb2N1bWVudCBhc3NlbWJseSB0aW1lXHJcbiAgICogKiBtZXNzYWdlIDogdGhlIGRhdGUgdGhhdCB0aGUgY29udGVudCBvZiB0aGUgbWVzc2FnZSB3YXMgYXNzZW1ibGVkLiBUaGlzIGRhdGUgaXMgbm90IGNoYW5nZWQgYnkgbWlkZGxld2FyZSBlbmdpbmVzIHVubGVzcyB0aGV5IGFkZCBhZGRpdGlvbmFsIGRhdGEgdGhhdCBjaGFuZ2VzIHRoZSBtZWFuaW5nIG9mIHRoZSB0aW1lIG9mIHRoZSBtZXNzYWdlXHJcbiAgICogKiBoaXN0b3J5IDogdGhlIGRhdGUgdGhhdCB0aGUgaGlzdG9yeSB3YXMgYXNzZW1ibGVkLiBUaGlzIHRpbWUgd291bGQgYmUgdXNlZCBhcyB0aGUgX3NpbmNlIHRpbWUgdG8gYXNrIGZvciBzdWJzZXF1ZW50IHVwZGF0ZXNcclxuICAgKiAqIHNlYXJjaHNldCA6IHRoZSB0aW1lIHRoYXQgdGhlIHNlYXJjaCBzZXQgd2FzIGFzc2VtYmxlZC4gTm90ZSB0aGF0IGRpZmZlcmVudCBwYWdlcyBNQVkgaGF2ZSBkaWZmZXJlbnQgdGltZXN0YW1wcyBidXQgbmVlZCBub3QuIEhhdmluZyBkaWZmZXJlbnQgdGltZXN0YW1wcyBkb2VzIG5vdCBpbXBseSB0aGF0IHN1YnNlcXVlbnQgcGFnZXMgd2lsbCByZXByZXNlbnQgb3IgaW5jbHVkZSBjaGFuZ2VzIG1hZGUgc2luY2UgdGhlIGluaXRpYWwgcXVlcnlcclxuICAgKiAqIHRyYW5zYWN0aW9uIHwgdHJhbnNhY3Rpb24tcmVzcG9uc2UgfCBiYXRjaCB8IGJhdGNoLXJlc3BvbnNlIHwgY29sbGVjdGlvbiA6IG5vIHBhcnRpY3VsYXIgYXNzaWduZWQgbWVhbmluZ1xyXG4gICAqIFRoZSB0aW1lc3RhbXAgdmFsdWUgc2hvdWxkIGJlIGdyZWF0ZXIgdGhhbiB0aGUgbGFzdFVwZGF0ZWQgYW5kIG90aGVyIHRpbWVzdGFtcHMgaW4gdGhlIHJlc291cmNlcyBpbiB0aGUgYnVuZGxlLCBhbmQgaXQgc2hvdWxkIGJlIGVxdWFsIG9yIGVhcmxpZXIgdGhhbiB0aGUgLm1ldGEubGFzdFVwZGF0ZWQgb24gdGhlIEJ1bmRsZSBpdHNlbGYuXHJcbiAgICovXHJcbiAgdGltZXN0YW1wPzogZmhpci5GaGlySW5zdGFudHxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUudGltZXN0YW1wXHJcbiAgICovXHJcbiAgX3RpbWVzdGFtcD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogT25seSB1c2VkIGlmIHRoZSBidW5kbGUgaXMgYSBzZWFyY2ggcmVzdWx0IHNldC4gVGhlIHRvdGFsIGRvZXMgbm90IGluY2x1ZGUgcmVzb3VyY2VzIHN1Y2ggYXMgT3BlcmF0aW9uT3V0Y29tZSBhbmQgaW5jbHVkZWQgcmVzb3VyY2VzLCBvbmx5IHRoZSB0b3RhbCBudW1iZXIgb2YgbWF0Y2hpbmcgcmVzb3VyY2VzLlxyXG4gICAqL1xyXG4gIHRvdGFsPzogZmhpci5GaGlyVW5zaWduZWRJbnR8bnVtYmVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLnRvdGFsXHJcbiAgICovXHJcbiAgX3RvdGFsPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBCb3RoIEJ1bmRsZS5saW5rIGFuZCBCdW5kbGUuZW50cnkubGluayBhcmUgZGVmaW5lZCB0byBzdXBwb3J0IHByb3ZpZGluZyBhZGRpdGlvbmFsIGNvbnRleHQgd2hlbiBCdW5kbGVzIGFyZSB1c2VkIChlLmcuIFtIQVRFT0FTXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0hBVEVPQVMpKS4gXHJcbiAgICogQnVuZGxlLmVudHJ5LmxpbmsgY29ycmVzcG9uZHMgdG8gbGlua3MgZm91bmQgaW4gdGhlIEhUVFAgaGVhZGVyIGlmIHRoZSByZXNvdXJjZSBpbiB0aGUgZW50cnkgd2FzIFtyZWFkXShodHRwLmh0bWwjcmVhZCkgZGlyZWN0bHkuXHJcbiAgICogVGhpcyBzcGVjaWZpY2F0aW9uIGRlZmluZXMgc29tZSBzcGVjaWZpYyB1c2VzIG9mIEJ1bmRsZS5saW5rIGZvciBbc2VhcmNoaW5nXShzZWFyY2guaHRtbCNjb25mb3JtYW5jZSkgYW5kIFtwYWdpbmddKGh0dHAuaHRtbCNwYWdpbmcpLCBidXQgbm8gc3BlY2lmaWMgdXNlcyBmb3IgQnVuZGxlLmVudHJ5LmxpbmssIGFuZCBubyBkZWZpbmVkIGZ1bmN0aW9uIGluIGEgdHJhbnNhY3Rpb24gLSB0aGUgbWVhbmluZyBpcyBpbXBsZW1lbnRhdGlvbiBzcGVjaWZpYy5cclxuICAgKi9cclxuICBsaW5rPzogZmhpci5CdW5kbGVMaW5rQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBbiBlbnRyeSBpbiBhIGJ1bmRsZSByZXNvdXJjZSAtIHdpbGwgZWl0aGVyIGNvbnRhaW4gYSByZXNvdXJjZSBvciBpbmZvcm1hdGlvbiBhYm91dCBhIHJlc291cmNlICh0cmFuc2FjdGlvbnMgYW5kIGhpc3Rvcnkgb25seSkuXHJcbiAgICovXHJcbiAgZW50cnk/OiBmaGlyLkJ1bmRsZUVudHJ5QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc2lnbmF0dXJlIGNvdWxkIGJlIGNyZWF0ZWQgYnkgdGhlIFwiYXV0aG9yXCIgb2YgdGhlIGJ1bmRsZSBvciBieSB0aGUgb3JpZ2luYXRpbmcgZGV2aWNlLiAgIFJlcXVpcmVtZW50cyBhcm91bmQgaW5jbHVzaW9uIG9mIGEgc2lnbmF0dXJlLCB2ZXJpZmljYXRpb24gb2Ygc2lnbmF0dXJlcyBhbmQgdHJlYXRtZW50IG9mIHNpZ25lZC9ub24tc2lnbmVkIGJ1bmRsZXMgaXMgaW1wbGVtZW50YXRpb24tZW52aXJvbm1lbnQgc3BlY2lmaWMuXHJcbiAgICovXHJcbiAgc2lnbmF0dXJlPzogZmhpci5TaWduYXR1cmVBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgY29udGFpbmVyIGZvciBhIGNvbGxlY3Rpb24gb2YgcmVzb3VyY2VzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJ1bmRsZSBleHRlbmRzIGZoaXIuUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQnVuZGxlJztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIkJ1bmRsZVwiO1xyXG4gIC8qKlxyXG4gICAqIFBlcnNpc3RlbnQgaWRlbnRpdHkgZ2VuZXJhbGx5IG9ubHkgbWF0dGVycyBmb3IgYmF0Y2hlcyBvZiB0eXBlIERvY3VtZW50LCBNZXNzYWdlLCBhbmQgQ29sbGVjdGlvbi4gSXQgd291bGQgbm90IG5vcm1hbGx5IGJlIHBvcHVsYXRlZCBmb3Igc2VhcmNoIGFuZCBoaXN0b3J5IHJlc3VsdHMgYW5kIHNlcnZlcnMgaWdub3JlIEJ1bmRsZS5pZGVudGlmaWVyIHdoZW4gcHJvY2Vzc2luZyBiYXRjaGVzIGFuZCB0cmFuc2FjdGlvbnMuIEZvciBEb2N1bWVudHMgIHRoZSAuaWRlbnRpZmllciBTSEFMTCBiZSBwb3B1bGF0ZWQgc3VjaCB0aGF0IHRoZSAuaWRlbnRpZmllciBpcyBnbG9iYWxseSB1bmlxdWUuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEl0J3MgcG9zc2libGUgdG8gdXNlIGEgYnVuZGxlIGZvciBvdGhlciBwdXJwb3NlcyAoZS5nLiBhIGRvY3VtZW50IGNhbiBiZSBhY2NlcHRlZCBhcyBhIHRyYW5zYWN0aW9uKS4gVGhpcyBpcyBwcmltYXJpbHkgZGVmaW5lZCBzbyB0aGF0IHRoZXJlIGNhbiBiZSBzcGVjaWZpYyBydWxlcyBmb3Igc29tZSBvZiB0aGUgYnVuZGxlIHR5cGVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0eXBlOiBmaGlyLkZoaXJDb2RlPEJ1bmRsZVR5cGVDb2RlVHlwZT58bnVsbDtcclxuICAvKipcclxuICAgKiBGb3IgbWFueSBidW5kbGVzLCB0aGUgdGltZXN0YW1wIGlzIGVxdWFsIHRvIC5tZXRhLmxhc3RVcGRhdGVkLCBiZWNhdXNlIHRoZXkgYXJlIG5vdCBzdG9yZWQgKGUuZy4gc2VhcmNoIHJlc3VsdHMpLiBXaGVuIGEgYnVuZGxlIGlzIHBsYWNlZCBpbiBhIHBlcnNpc3RlbnQgc3RvcmUsIC5tZXRhLmxhc3RVcGRhdGVkIHdpbGwgYmUgdXN1YWxseSBiZSBjaGFuZ2VkIGJ5IHRoZSBzZXJ2ZXIuIFdoZW4gdGhlIGJ1bmRsZSBpcyBhIG1lc3NhZ2UsIGEgbWlkZGxld2FyZSBhZ2VudCBhbHRlcmluZyB0aGUgbWVzc2FnZSAoZXZlbiBpZiBub3Qgc3RvcmVkKSBTSE9VTEQgdXBkYXRlIC5tZXRhLmxhc3RVcGRhdGVkLiAudGltZXN0YW1wIGlzIHVzZWQgdG8gdHJhY2sgdGhlIG9yaWdpbmFsIHRpbWUgb2YgdGhlIEJ1bmRsZSwgYW5kIFNIT1VMRCBiZSBwb3B1bGF0ZWQuICBcclxuICAgKiBVc2FnZTpcclxuICAgKiAqIGRvY3VtZW50IDogdGhlIGRhdGUgdGhlIGRvY3VtZW50IHdhcyBjcmVhdGVkLiBOb3RlOiB0aGUgY29tcG9zaXRpb24gbWF5IHByZWRhdGUgdGhlIGRvY3VtZW50LCBvciBiZSBhc3NvY2lhdGVkIHdpdGggbXVsdGlwbGUgZG9jdW1lbnRzLiBUaGUgZGF0ZSBvZiB0aGUgY29tcG9zaXRpb24gLSB0aGUgYXV0aG9yaW5nIHRpbWUgLSBtYXkgYmUgZWFybGllciB0aGFuIHRoZSBkb2N1bWVudCBhc3NlbWJseSB0aW1lXHJcbiAgICogKiBtZXNzYWdlIDogdGhlIGRhdGUgdGhhdCB0aGUgY29udGVudCBvZiB0aGUgbWVzc2FnZSB3YXMgYXNzZW1ibGVkLiBUaGlzIGRhdGUgaXMgbm90IGNoYW5nZWQgYnkgbWlkZGxld2FyZSBlbmdpbmVzIHVubGVzcyB0aGV5IGFkZCBhZGRpdGlvbmFsIGRhdGEgdGhhdCBjaGFuZ2VzIHRoZSBtZWFuaW5nIG9mIHRoZSB0aW1lIG9mIHRoZSBtZXNzYWdlXHJcbiAgICogKiBoaXN0b3J5IDogdGhlIGRhdGUgdGhhdCB0aGUgaGlzdG9yeSB3YXMgYXNzZW1ibGVkLiBUaGlzIHRpbWUgd291bGQgYmUgdXNlZCBhcyB0aGUgX3NpbmNlIHRpbWUgdG8gYXNrIGZvciBzdWJzZXF1ZW50IHVwZGF0ZXNcclxuICAgKiAqIHNlYXJjaHNldCA6IHRoZSB0aW1lIHRoYXQgdGhlIHNlYXJjaCBzZXQgd2FzIGFzc2VtYmxlZC4gTm90ZSB0aGF0IGRpZmZlcmVudCBwYWdlcyBNQVkgaGF2ZSBkaWZmZXJlbnQgdGltZXN0YW1wcyBidXQgbmVlZCBub3QuIEhhdmluZyBkaWZmZXJlbnQgdGltZXN0YW1wcyBkb2VzIG5vdCBpbXBseSB0aGF0IHN1YnNlcXVlbnQgcGFnZXMgd2lsbCByZXByZXNlbnQgb3IgaW5jbHVkZSBjaGFuZ2VzIG1hZGUgc2luY2UgdGhlIGluaXRpYWwgcXVlcnlcclxuICAgKiAqIHRyYW5zYWN0aW9uIHwgdHJhbnNhY3Rpb24tcmVzcG9uc2UgfCBiYXRjaCB8IGJhdGNoLXJlc3BvbnNlIHwgY29sbGVjdGlvbiA6IG5vIHBhcnRpY3VsYXIgYXNzaWduZWQgbWVhbmluZ1xyXG4gICAqIFRoZSB0aW1lc3RhbXAgdmFsdWUgc2hvdWxkIGJlIGdyZWF0ZXIgdGhhbiB0aGUgbGFzdFVwZGF0ZWQgYW5kIG90aGVyIHRpbWVzdGFtcHMgaW4gdGhlIHJlc291cmNlcyBpbiB0aGUgYnVuZGxlLCBhbmQgaXQgc2hvdWxkIGJlIGVxdWFsIG9yIGVhcmxpZXIgdGhhbiB0aGUgLm1ldGEubGFzdFVwZGF0ZWQgb24gdGhlIEJ1bmRsZSBpdHNlbGYuXHJcbiAgICovXHJcbiAgcHVibGljIHRpbWVzdGFtcD86IGZoaXIuRmhpckluc3RhbnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE9ubHkgdXNlZCBpZiB0aGUgYnVuZGxlIGlzIGEgc2VhcmNoIHJlc3VsdCBzZXQuIFRoZSB0b3RhbCBkb2VzIG5vdCBpbmNsdWRlIHJlc291cmNlcyBzdWNoIGFzIE9wZXJhdGlvbk91dGNvbWUgYW5kIGluY2x1ZGVkIHJlc291cmNlcywgb25seSB0aGUgdG90YWwgbnVtYmVyIG9mIG1hdGNoaW5nIHJlc291cmNlcy5cclxuICAgKi9cclxuICBwdWJsaWMgdG90YWw/OiBmaGlyLkZoaXJVbnNpZ25lZEludHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQm90aCBCdW5kbGUubGluayBhbmQgQnVuZGxlLmVudHJ5LmxpbmsgYXJlIGRlZmluZWQgdG8gc3VwcG9ydCBwcm92aWRpbmcgYWRkaXRpb25hbCBjb250ZXh0IHdoZW4gQnVuZGxlcyBhcmUgdXNlZCAoZS5nLiBbSEFURU9BU10oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9IQVRFT0FTKSkuIFxyXG4gICAqIEJ1bmRsZS5lbnRyeS5saW5rIGNvcnJlc3BvbmRzIHRvIGxpbmtzIGZvdW5kIGluIHRoZSBIVFRQIGhlYWRlciBpZiB0aGUgcmVzb3VyY2UgaW4gdGhlIGVudHJ5IHdhcyBbcmVhZF0oaHR0cC5odG1sI3JlYWQpIGRpcmVjdGx5LlxyXG4gICAqIFRoaXMgc3BlY2lmaWNhdGlvbiBkZWZpbmVzIHNvbWUgc3BlY2lmaWMgdXNlcyBvZiBCdW5kbGUubGluayBmb3IgW3NlYXJjaGluZ10oc2VhcmNoLmh0bWwjY29uZm9ybWFuY2UpIGFuZCBbcGFnaW5nXShodHRwLmh0bWwjcGFnaW5nKSwgYnV0IG5vIHNwZWNpZmljIHVzZXMgZm9yIEJ1bmRsZS5lbnRyeS5saW5rLCBhbmQgbm8gZGVmaW5lZCBmdW5jdGlvbiBpbiBhIHRyYW5zYWN0aW9uIC0gdGhlIG1lYW5pbmcgaXMgaW1wbGVtZW50YXRpb24gc3BlY2lmaWMuXHJcbiAgICovXHJcbiAgcHVibGljIGxpbms6IGZoaXIuQnVuZGxlTGlua1tdO1xyXG4gIC8qKlxyXG4gICAqIEFuIGVudHJ5IGluIGEgYnVuZGxlIHJlc291cmNlIC0gd2lsbCBlaXRoZXIgY29udGFpbiBhIHJlc291cmNlIG9yIGluZm9ybWF0aW9uIGFib3V0IGEgcmVzb3VyY2UgKHRyYW5zYWN0aW9ucyBhbmQgaGlzdG9yeSBvbmx5KS5cclxuICAgKi9cclxuICBwdWJsaWMgZW50cnk6IGZoaXIuQnVuZGxlRW50cnlbXTtcclxuICAvKipcclxuICAgKiBUaGUgc2lnbmF0dXJlIGNvdWxkIGJlIGNyZWF0ZWQgYnkgdGhlIFwiYXV0aG9yXCIgb2YgdGhlIGJ1bmRsZSBvciBieSB0aGUgb3JpZ2luYXRpbmcgZGV2aWNlLiAgIFJlcXVpcmVtZW50cyBhcm91bmQgaW5jbHVzaW9uIG9mIGEgc2lnbmF0dXJlLCB2ZXJpZmljYXRpb24gb2Ygc2lnbmF0dXJlcyBhbmQgdHJlYXRtZW50IG9mIHNpZ25lZC9ub24tc2lnbmVkIGJ1bmRsZXMgaXMgaW1wbGVtZW50YXRpb24tZW52aXJvbm1lbnQgc3BlY2lmaWMuXHJcbiAgICovXHJcbiAgcHVibGljIHNpZ25hdHVyZT86IGZoaXIuU2lnbmF0dXJlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBCdW5kbGUgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxCdW5kbGVBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnQnVuZGxlJztcclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBuZXcgZmhpci5JZGVudGlmaWVyKHNvdXJjZS5pZGVudGlmaWVyLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndHlwZSddICE9PSB1bmRlZmluZWQpIHsgdGhpcy50eXBlID0gbmV3IGZoaXIuRmhpckNvZGU8QnVuZGxlVHlwZUNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS50eXBlfSwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnR5cGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfdHlwZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnR5cGUpIHsgdGhpcy50eXBlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3R5cGUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy50eXBlID0gbmV3IGZoaXIuRmhpckNvZGU8QnVuZGxlVHlwZUNvZGVUeXBlPihzb3VyY2UuX3R5cGUgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3RpbWVzdGFtcCddICE9PSB1bmRlZmluZWQpIHsgdGhpcy50aW1lc3RhbXAgPSBuZXcgZmhpci5GaGlySW5zdGFudCh7dmFsdWU6IHNvdXJjZS50aW1lc3RhbXB9LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3RpbWVzdGFtcCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnRpbWVzdGFtcCkgeyB0aGlzLnRpbWVzdGFtcC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl90aW1lc3RhbXAhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy50aW1lc3RhbXAgPSBuZXcgZmhpci5GaGlySW5zdGFudChzb3VyY2UuX3RpbWVzdGFtcCBhcyBQYXJ0aWFsPGZoaXIuRmhpckluc3RhbnRBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3RvdGFsJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnRvdGFsID0gbmV3IGZoaXIuRmhpclVuc2lnbmVkSW50KHt2YWx1ZTogc291cmNlLnRvdGFsfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ190b3RhbCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnRvdGFsKSB7IHRoaXMudG90YWwuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdG90YWwhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy50b3RhbCA9IG5ldyBmaGlyLkZoaXJVbnNpZ25lZEludChzb3VyY2UuX3RvdGFsIGFzIFBhcnRpYWw8Zmhpci5GaGlyVW5zaWduZWRJbnRBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2xpbmsnXSkgeyB0aGlzLmxpbmsgPSBzb3VyY2UubGluay5tYXAoKHgpID0+IG5ldyBmaGlyLkJ1bmRsZUxpbmsoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5saW5rID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2VudHJ5J10pIHsgdGhpcy5lbnRyeSA9IHNvdXJjZS5lbnRyeS5tYXAoKHgpID0+IG5ldyBmaGlyLkJ1bmRsZUVudHJ5KHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZW50cnkgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2lnbmF0dXJlJ10pIHsgdGhpcy5zaWduYXR1cmUgPSBuZXcgZmhpci5TaWduYXR1cmUoc291cmNlLnNpZ25hdHVyZSwgb3B0aW9ucyk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdCdW5kbGUnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdpZGVudGlmaWVyJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTVigndHlwZScsZXhwLCdCdW5kbGVUeXBlJyxCdW5kbGVUeXBlVnNWYWxpZGF0aW9uLCdyJykpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3RpbWVzdGFtcCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygndG90YWwnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2xpbmsnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2VudHJ5JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdzaWduYXR1cmUnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuIl19