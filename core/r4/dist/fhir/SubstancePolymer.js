// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: SubstancePolymer
import * as fhir from '../fhir.js';
/**
 * Todo.
 */
export class SubstancePolymerMonomerSetStartingMaterial extends fhir.BackboneElement {
    /**
     * Default constructor for SubstancePolymerMonomerSetStartingMaterial - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['material']) {
            this.material = new fhir.CodeableConcept(source.material);
        }
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type);
        }
        if (source['isDefining']) {
            this.isDefining = new fhir.FhirBoolean({ value: source.isDefining });
        }
        if (source['_isDefining']) {
            if (this.isDefining) {
                this.isDefining.addExtendedProperties(source._isDefining);
            }
            else {
                this.isDefining = new fhir.FhirBoolean(source._isDefining);
            }
        }
        if (source['amount']) {
            this.amount = new fhir.SubstanceAmount(source.amount);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SubstancePolymer.monomerSet.startingMaterial';
        }
        this.vOS('material', exp);
        this.vOS('type', exp);
        this.vOS('isDefining', exp);
        this.vOS('amount', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstancePolymerMonomerSetStartingMaterial._fts_dataType = 'SubstancePolymerMonomerSetStartingMaterial';
/**
 * Todo.
 */
export class SubstancePolymerMonomerSet extends fhir.BackboneElement {
    /**
     * Default constructor for SubstancePolymerMonomerSet - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['ratioType']) {
            this.ratioType = new fhir.CodeableConcept(source.ratioType);
        }
        if (source['startingMaterial']) {
            this.startingMaterial = source.startingMaterial.map((x) => new fhir.SubstancePolymerMonomerSetStartingMaterial(x));
        }
        else {
            this.startingMaterial = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SubstancePolymer.monomerSet';
        }
        this.vOS('ratioType', exp);
        this.vOA('startingMaterial', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstancePolymerMonomerSet._fts_dataType = 'SubstancePolymerMonomerSet';
/**
 * Todo.
 */
export class SubstancePolymerRepeatRepeatUnitDegreeOfPolymerisation extends fhir.BackboneElement {
    /**
     * Default constructor for SubstancePolymerRepeatRepeatUnitDegreeOfPolymerisation - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['degree']) {
            this.degree = new fhir.CodeableConcept(source.degree);
        }
        if (source['amount']) {
            this.amount = new fhir.SubstanceAmount(source.amount);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SubstancePolymer.repeat.repeatUnit.degreeOfPolymerisation';
        }
        this.vOS('degree', exp);
        this.vOS('amount', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstancePolymerRepeatRepeatUnitDegreeOfPolymerisation._fts_dataType = 'SubstancePolymerRepeatRepeatUnitDegreeOfPolymerisation';
/**
 * Todo.
 */
export class SubstancePolymerRepeatRepeatUnitStructuralRepresentation extends fhir.BackboneElement {
    /**
     * Default constructor for SubstancePolymerRepeatRepeatUnitStructuralRepresentation - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type);
        }
        if (source['representation']) {
            this.representation = new fhir.FhirString({ value: source.representation });
        }
        if (source['_representation']) {
            if (this.representation) {
                this.representation.addExtendedProperties(source._representation);
            }
            else {
                this.representation = new fhir.FhirString(source._representation);
            }
        }
        if (source['attachment']) {
            this.attachment = new fhir.Attachment(source.attachment);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SubstancePolymer.repeat.repeatUnit.structuralRepresentation';
        }
        this.vOS('type', exp);
        this.vOS('representation', exp);
        this.vOS('attachment', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstancePolymerRepeatRepeatUnitStructuralRepresentation._fts_dataType = 'SubstancePolymerRepeatRepeatUnitStructuralRepresentation';
/**
 * Todo.
 */
export class SubstancePolymerRepeatRepeatUnit extends fhir.BackboneElement {
    /**
     * Default constructor for SubstancePolymerRepeatRepeatUnit - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['orientationOfPolymerisation']) {
            this.orientationOfPolymerisation = new fhir.CodeableConcept(source.orientationOfPolymerisation);
        }
        if (source['repeatUnit']) {
            this.repeatUnit = new fhir.FhirString({ value: source.repeatUnit });
        }
        if (source['_repeatUnit']) {
            if (this.repeatUnit) {
                this.repeatUnit.addExtendedProperties(source._repeatUnit);
            }
            else {
                this.repeatUnit = new fhir.FhirString(source._repeatUnit);
            }
        }
        if (source['amount']) {
            this.amount = new fhir.SubstanceAmount(source.amount);
        }
        if (source['degreeOfPolymerisation']) {
            this.degreeOfPolymerisation = source.degreeOfPolymerisation.map((x) => new fhir.SubstancePolymerRepeatRepeatUnitDegreeOfPolymerisation(x));
        }
        else {
            this.degreeOfPolymerisation = [];
        }
        if (source['structuralRepresentation']) {
            this.structuralRepresentation = source.structuralRepresentation.map((x) => new fhir.SubstancePolymerRepeatRepeatUnitStructuralRepresentation(x));
        }
        else {
            this.structuralRepresentation = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SubstancePolymer.repeat.repeatUnit';
        }
        this.vOS('orientationOfPolymerisation', exp);
        this.vOS('repeatUnit', exp);
        this.vOS('amount', exp);
        this.vOA('degreeOfPolymerisation', exp);
        this.vOA('structuralRepresentation', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstancePolymerRepeatRepeatUnit._fts_dataType = 'SubstancePolymerRepeatRepeatUnit';
/**
 * Todo.
 */
export class SubstancePolymerRepeat extends fhir.BackboneElement {
    /**
     * Default constructor for SubstancePolymerRepeat - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['numberOfUnits']) {
            this.numberOfUnits = new fhir.FhirInteger({ value: source.numberOfUnits });
        }
        if (source['_numberOfUnits']) {
            if (this.numberOfUnits) {
                this.numberOfUnits.addExtendedProperties(source._numberOfUnits);
            }
            else {
                this.numberOfUnits = new fhir.FhirInteger(source._numberOfUnits);
            }
        }
        if (source['averageMolecularFormula']) {
            this.averageMolecularFormula = new fhir.FhirString({ value: source.averageMolecularFormula });
        }
        if (source['_averageMolecularFormula']) {
            if (this.averageMolecularFormula) {
                this.averageMolecularFormula.addExtendedProperties(source._averageMolecularFormula);
            }
            else {
                this.averageMolecularFormula = new fhir.FhirString(source._averageMolecularFormula);
            }
        }
        if (source['repeatUnitAmountType']) {
            this.repeatUnitAmountType = new fhir.CodeableConcept(source.repeatUnitAmountType);
        }
        if (source['repeatUnit']) {
            this.repeatUnit = source.repeatUnit.map((x) => new fhir.SubstancePolymerRepeatRepeatUnit(x));
        }
        else {
            this.repeatUnit = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SubstancePolymer.repeat';
        }
        this.vOS('numberOfUnits', exp);
        this.vOS('averageMolecularFormula', exp);
        this.vOS('repeatUnitAmountType', exp);
        this.vOA('repeatUnit', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstancePolymerRepeat._fts_dataType = 'SubstancePolymerRepeat';
/**
 * Todo.
 */
export class SubstancePolymer extends fhir.DomainResource {
    /**
     * Default constructor for SubstancePolymer - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'SubstancePolymer';
        if (source['class']) {
            this.class = new fhir.CodeableConcept(source.class);
        }
        if (source['geometry']) {
            this.geometry = new fhir.CodeableConcept(source.geometry);
        }
        if (source['copolymerConnectivity']) {
            this.copolymerConnectivity = source.copolymerConnectivity.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.copolymerConnectivity = [];
        }
        if (source['modification']) {
            this.modification = source.modification.map((x) => new fhir.FhirString({ value: x }));
        }
        else {
            this.modification = [];
        }
        if (source['_modification']) {
            source._modification.forEach((x, i) => {
                if (this.modification.length >= i) {
                    if (x) {
                        this.modification[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.modification.push(new fhir.FhirString(x));
                    }
                }
            });
        }
        if (source['monomerSet']) {
            this.monomerSet = source.monomerSet.map((x) => new fhir.SubstancePolymerMonomerSet(x));
        }
        else {
            this.monomerSet = [];
        }
        if (source['repeat']) {
            this.repeat = source.repeat.map((x) => new fhir.SubstancePolymerRepeat(x));
        }
        else {
            this.repeat = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SubstancePolymer';
        }
        this.vRS('resourceType', exp);
        this.vOS('class', exp);
        this.vOS('geometry', exp);
        this.vOA('copolymerConnectivity', exp);
        this.vOA('modification', exp);
        this.vOA('monomerSet', exp);
        this.vOA('repeat', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstancePolymer._fts_dataType = 'SubstancePolymer';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3Vic3RhbmNlUG9seW1lci5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvU3Vic3RhbmNlUG9seW1lci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQyxrQ0FBa0M7QUFFbEMsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUE0Qm5DOztHQUVHO0FBQ0gsTUFBTSxPQUFPLDBDQUEyQyxTQUFRLElBQUksQ0FBQyxlQUFlO0lBcUJsRjs7T0FFRztJQUNILFlBQVksU0FBaUUsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDdkgsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztTQUFFO1FBQ3RGLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQUU7UUFDMUUsSUFBSSxNQUFNLENBQUMsWUFBWSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsVUFBVSxFQUFDLENBQUMsQ0FBQztTQUFFO1FBQ2pHLElBQUksTUFBTSxDQUFDLGFBQWEsQ0FBQyxFQUFFO1lBQ3pCLElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRTtnQkFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxXQUFZLENBQUMsQ0FBQzthQUFFO2lCQUMvRTtnQkFBRSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUks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QUFJLE1BQU0sQ0FBQyxZQUFZLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxVQUFVLEVBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDaEcsSUFBSSxNQUFNLENBQUMsYUFBYSxDQUFDLEVBQUU7WUFDekIsSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFO2dCQUFFLElBQUksQ0FBQyxVQUFVLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLFdBQVksQ0FBQyxDQUFDO2FBQUU7aUJBQy9FO2dCQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxXQUEyQyxDQUFDLENBQUM7YUFBRTtTQUNwRztRQUNELElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQUU7UUFDaEYsSUFBSSxNQUFNLENBQUMsd0JBQXdCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxzQkFBc0IsR0FBRyxNQUFNLENBQUMsc0JBQXNCLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxzREFBc0QsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDaEw7WUFBRSxJQUFJLENBQUMsc0JBQXNCLEdBQUcsRUFBRSxDQUFDO1NBQUU7UUFDMUMsSUFBSSxNQUFNLENBQUMsMEJBQTBCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyx3QkFBd0IsR0FBRyxNQUFNLENBQUMsd0JBQXdCLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyx3REFBd0QsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDeEw7WUFBRSxJQUFJLENBQUMsd0JBQXdCLEdB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QUFrQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0LmNvcmUgdmVyc2lvbjogNC4wLjFcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBTdWJzdGFuY2VQb2x5bWVyXHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFN1YnN0YW5jZVBvbHltZXJNb25vbWVyU2V0U3RhcnRpbmdNYXRlcmlhbCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTdWJzdGFuY2VQb2x5bWVyTW9ub21lclNldFN0YXJ0aW5nTWF0ZXJpYWxBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUb2RvLlxyXG4gICAqL1xyXG4gIG1hdGVyaWFsPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUb2RvLlxyXG4gICAqL1xyXG4gIHR5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRvZG8uXHJcbiAgICovXHJcbiAgaXNEZWZpbmluZz86IGZoaXIuRmhpckJvb2xlYW58Ym9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFN1YnN0YW5jZVBvbHltZXIubW9ub21lclNldC5zdGFydGluZ01hdGVyaWFsLmlzRGVmaW5pbmdcclxuICAgKi9cclxuICBfaXNEZWZpbmluZz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVG9kby5cclxuICAgKi9cclxuICBhbW91bnQ/OiBmaGlyLlN1YnN0YW5jZUFtb3VudEFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogVG9kby5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTdWJzdGFuY2VQb2x5bWVyTW9ub21lclNldFN0YXJ0aW5nTWF0ZXJpYWwgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdTdWJzdGFuY2VQb2x5bWVyTW9ub21lclNldFN0YXJ0aW5nTWF0ZXJpYWwnO1xyXG4gIC8qKlxyXG4gICAqIFRvZG8uXHJcbiAgICovXHJcbiAgcHVibGljIG1hdGVyaWFsPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRvZG8uXHJcbiAgICovXHJcbiAgcHVibGljIHR5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVG9kby5cclxuICAgKi9cclxuICBwdWJsaWMgaXNEZWZpbmluZz86IGZoaXIuRmhpckJvb2xlYW58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRvZG8uXHJcbiAgICovXHJcbiAgcHVibGljIGFtb3VudD86IGZoaXIuU3Vic3RhbmNlQW1vdW50fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBTdWJzdGFuY2VQb2x5bWVyTW9ub21lclNldFN0YXJ0aW5nTWF0ZXJpYWwgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxTdWJzdGFuY2VQb2x5bWVyTW9ub21lclNldFN0YXJ0aW5nTWF0ZXJpYWxBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnbWF0ZXJpYWwnXSkgeyB0aGlzLm1hdGVyaWFsID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5tYXRlcmlhbCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3R5cGUnXSkgeyB0aGlzLnR5cGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnR5cGUpOyB9XHJcbiAgICBpZiAoc291cmNlWydpc0RlZmluaW5nJ10pIHsgdGhpcy5pc0RlZmluaW5nID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oe3ZhbHVlOiBzb3VyY2UuaXNEZWZpbmluZ30pOyB9XHJcbiAgICBpZiAoc291cmNlWydfaXNEZWZpbmluZyddKSB7XHJcbiAgICAgIGlmICh0aGlzLmlzRGVmaW5pbmcpIHsgdGhpcy5pc0RlZmluaW5nLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2lzRGVmaW5pbmchKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5pc0RlZmluaW5nID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oc291cmNlLl9pc0RlZmluaW5nIGFzIFBhcnRpYWw8Zmhpci5GaGlyQm9vbGVhbkFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnYW1vdW50J10pIHsgdGhpcy5hbW91bnQgPSBuZXcgZmhpci5TdWJzdGFuY2VBbW91bnQoc291cmNlLmFtb3VudCk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdTdWJzdGFuY2VQb2x5bWVyLm1vbm9tZXJTZXQuc3RhcnRpbmdNYXRlcmlhbCcgfVxyXG4gICAgdGhpcy52T1MoJ21hdGVyaWFsJyxleHApXHJcbiAgICB0aGlzLnZPUygndHlwZScsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2lzRGVmaW5pbmcnLGV4cClcclxuICAgIHRoaXMudk9TKCdhbW91bnQnLGV4cClcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBTdWJzdGFuY2VQb2x5bWVyTW9ub21lclNldCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTdWJzdGFuY2VQb2x5bWVyTW9ub21lclNldEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRvZG8uXHJcbiAgICovXHJcbiAgcmF0aW9UeXBlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUb2RvLlxyXG4gICAqL1xyXG4gIHN0YXJ0aW5nTWF0ZXJpYWw/OiBmaGlyLlN1YnN0YW5jZVBvbHltZXJNb25vbWVyU2V0U3RhcnRpbmdNYXRlcmlhbEFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUb2RvLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFN1YnN0YW5jZVBvbHltZXJNb25vbWVyU2V0IGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnU3Vic3RhbmNlUG9seW1lck1vbm9tZXJTZXQnO1xyXG4gIC8qKlxyXG4gICAqIFRvZG8uXHJcbiAgICovXHJcbiAgcHVibGljIHJhdGlvVHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUb2RvLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGFydGluZ01hdGVyaWFsOiBmaGlyLlN1YnN0YW5jZVBvbHltZXJNb25vbWVyU2V0U3RhcnRpbmdNYXRlcmlhbFtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFN1YnN0YW5jZVBvbHltZXJNb25vbWVyU2V0IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8U3Vic3RhbmNlUG9seW1lck1vbm9tZXJTZXRBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsncmF0aW9UeXBlJ10pIHsgdGhpcy5yYXRpb1R5cGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnJhdGlvVHlwZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0YXJ0aW5nTWF0ZXJpYWwnXSkgeyB0aGlzLnN0YXJ0aW5nTWF0ZXJpYWwgPSBzb3VyY2Uuc3RhcnRpbmdNYXRlcmlhbC5tYXAoKHgpID0+IG5ldyBmaGlyLlN1YnN0YW5jZVBvbHltZXJNb25vbWVyU2V0U3RhcnRpbmdNYXRlcmlhbCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0YXJ0aW5nTWF0ZXJpYWwgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ1N1YnN0YW5jZVBvbHltZXIubW9ub21lclNldCcgfVxyXG4gICAgdGhpcy52T1MoJ3JhdGlvVHlwZScsZXhwKVxyXG4gICAgdGhpcy52T0EoJ3N0YXJ0aW5nTWF0ZXJpYWwnLGV4cClcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBTdWJzdGFuY2VQb2x5bWVyUmVwZWF0UmVwZWF0VW5pdERlZ3JlZU9mUG9seW1lcmlzYXRpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3Vic3RhbmNlUG9seW1lclJlcGVhdFJlcGVhdFVuaXREZWdyZWVPZlBvbHltZXJpc2F0aW9uQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVG9kby5cclxuICAgKi9cclxuICBkZWdyZWU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRvZG8uXHJcbiAgICovXHJcbiAgYW1vdW50PzogZmhpci5TdWJzdGFuY2VBbW91bnRBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRvZG8uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3Vic3RhbmNlUG9seW1lclJlcGVhdFJlcGVhdFVuaXREZWdyZWVPZlBvbHltZXJpc2F0aW9uIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnU3Vic3RhbmNlUG9seW1lclJlcGVhdFJlcGVhdFVuaXREZWdyZWVPZlBvbHltZXJpc2F0aW9uJztcclxuICAvKipcclxuICAgKiBUb2RvLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZWdyZWU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVG9kby5cclxuICAgKi9cclxuICBwdWJsaWMgYW1vdW50PzogZmhpci5TdWJzdGFuY2VBbW91bnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFN1YnN0YW5jZVBvbHltZXJSZXBlYXRSZXBlYXRVbml0RGVncmVlT2ZQb2x5bWVyaXNhdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFN1YnN0YW5jZVBvbHltZXJSZXBlYXRSZXBlYXRVbml0RGVncmVlT2ZQb2x5bWVyaXNhdGlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydkZWdyZWUnXSkgeyB0aGlzLmRlZ3JlZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuZGVncmVlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYW1vdW50J10pIHsgdGhpcy5hbW91bnQgPSBuZXcgZmhpci5TdWJzdGFuY2VBbW91bnQoc291cmNlLmFtb3VudCk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdTdWJzdGFuY2VQb2x5bWVyLnJlcGVhdC5yZXBlYXRVbml0LmRlZ3JlZU9mUG9seW1lcmlzYXRpb24nIH1cclxuICAgIHRoaXMudk9TKCdkZWdyZWUnLGV4cClcclxuICAgIHRoaXMudk9TKCdhbW91bnQnLGV4cClcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBTdWJzdGFuY2VQb2x5bWVyUmVwZWF0UmVwZWF0VW5pdFN0cnVjdHVyYWxSZXByZXNlbnRhdGlvbiB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTdWJzdGFuY2VQb2x5bWVyUmVwZWF0UmVwZWF0VW5pdFN0cnVjdHVyYWxSZXByZXNlbnRhdGlvbkFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRvZG8uXHJcbiAgICovXHJcbiAgdHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVG9kby5cclxuICAgKi9cclxuICByZXByZXNlbnRhdGlvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTdWJzdGFuY2VQb2x5bWVyLnJlcGVhdC5yZXBlYXRVbml0LnN0cnVjdHVyYWxSZXByZXNlbnRhdGlvbi5yZXByZXNlbnRhdGlvblxyXG4gICAqL1xyXG4gIF9yZXByZXNlbnRhdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVG9kby5cclxuICAgKi9cclxuICBhdHRhY2htZW50PzogZmhpci5BdHRhY2htZW50QXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUb2RvLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFN1YnN0YW5jZVBvbHltZXJSZXBlYXRSZXBlYXRVbml0U3RydWN0dXJhbFJlcHJlc2VudGF0aW9uIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnU3Vic3RhbmNlUG9seW1lclJlcGVhdFJlcGVhdFVuaXRTdHJ1Y3R1cmFsUmVwcmVzZW50YXRpb24nO1xyXG4gIC8qKlxyXG4gICAqIFRvZG8uXHJcbiAgICovXHJcbiAgcHVibGljIHR5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVG9kby5cclxuICAgKi9cclxuICBwdWJsaWMgcmVwcmVzZW50YXRpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRvZG8uXHJcbiAgICovXHJcbiAgcHVibGljIGF0dGFjaG1lbnQ/OiBmaGlyLkF0dGFjaG1lbnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFN1YnN0YW5jZVBvbHltZXJSZXBlYXRSZXBlYXRVbml0U3RydWN0dXJhbFJlcHJlc2VudGF0aW9uIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8U3Vic3RhbmNlUG9seW1lclJlcGVhdFJlcGVhdFVuaXRTdHJ1Y3R1cmFsUmVwcmVzZW50YXRpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsndHlwZSddKSB7IHRoaXMudHlwZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UudHlwZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3JlcHJlc2VudGF0aW9uJ10pIHsgdGhpcy5yZXByZXNlbnRhdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UucmVwcmVzZW50YXRpb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3JlcHJlc2VudGF0aW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMucmVwcmVzZW50YXRpb24pIHsgdGhpcy5yZXByZXNlbnRhdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9yZXByZXNlbnRhdGlvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnJlcHJlc2VudGF0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3JlcHJlc2VudGF0aW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydhdHRhY2htZW50J10pIHsgdGhpcy5hdHRhY2htZW50ID0gbmV3IGZoaXIuQXR0YWNobWVudChzb3VyY2UuYXR0YWNobWVudCk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdTdWJzdGFuY2VQb2x5bWVyLnJlcGVhdC5yZXBlYXRVbml0LnN0cnVjdHVyYWxSZXByZXNlbnRhdGlvbicgfVxyXG4gICAgdGhpcy52T1MoJ3R5cGUnLGV4cClcclxuICAgIHRoaXMudk9TKCdyZXByZXNlbnRhdGlvbicsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2F0dGFjaG1lbnQnLGV4cClcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBTdWJzdGFuY2VQb2x5bWVyUmVwZWF0UmVwZWF0VW5pdCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTdWJzdGFuY2VQb2x5bWVyUmVwZWF0UmVwZWF0VW5pdEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRvZG8uXHJcbiAgICovXHJcbiAgb3JpZW50YXRpb25PZlBvbHltZXJpc2F0aW9uPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUb2RvLlxyXG4gICAqL1xyXG4gIHJlcGVhdFVuaXQ/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3Vic3RhbmNlUG9seW1lci5yZXBlYXQucmVwZWF0VW5pdC5yZXBlYXRVbml0XHJcbiAgICovXHJcbiAgX3JlcGVhdFVuaXQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRvZG8uXHJcbiAgICovXHJcbiAgYW1vdW50PzogZmhpci5TdWJzdGFuY2VBbW91bnRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUb2RvLlxyXG4gICAqL1xyXG4gIGRlZ3JlZU9mUG9seW1lcmlzYXRpb24/OiBmaGlyLlN1YnN0YW5jZVBvbHltZXJSZXBlYXRSZXBlYXRVbml0RGVncmVlT2ZQb2x5bWVyaXNhdGlvbkFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVG9kby5cclxuICAgKi9cclxuICBzdHJ1Y3R1cmFsUmVwcmVzZW50YXRpb24/OiBmaGlyLlN1YnN0YW5jZVBvbHltZXJSZXBlYXRSZXBlYXRVbml0U3RydWN0dXJhbFJlcHJlc2VudGF0aW9uQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRvZG8uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3Vic3RhbmNlUG9seW1lclJlcGVhdFJlcGVhdFVuaXQgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdTdWJzdGFuY2VQb2x5bWVyUmVwZWF0UmVwZWF0VW5pdCc7XHJcbiAgLyoqXHJcbiAgICogVG9kby5cclxuICAgKi9cclxuICBwdWJsaWMgb3JpZW50YXRpb25PZlBvbHltZXJpc2F0aW9uPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRvZG8uXHJcbiAgICovXHJcbiAgcHVibGljIHJlcGVhdFVuaXQ/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRvZG8uXHJcbiAgICovXHJcbiAgcHVibGljIGFtb3VudD86IGZoaXIuU3Vic3RhbmNlQW1vdW50fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUb2RvLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZWdyZWVPZlBvbHltZXJpc2F0aW9uOiBmaGlyLlN1YnN0YW5jZVBvbHltZXJSZXBlYXRSZXBlYXRVbml0RGVncmVlT2ZQb2x5bWVyaXNhdGlvbltdO1xyXG4gIC8qKlxyXG4gICAqIFRvZG8uXHJcbiAgICovXHJcbiAgcHVibGljIHN0cnVjdHVyYWxSZXByZXNlbnRhdGlvbjogZmhpci5TdWJzdGFuY2VQb2x5bWVyUmVwZWF0UmVwZWF0VW5pdFN0cnVjdHVyYWxSZXByZXNlbnRhdGlvbltdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFN1YnN0YW5jZVBvbHltZXJSZXBlYXRSZXBlYXRVbml0IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8U3Vic3RhbmNlUG9seW1lclJlcGVhdFJlcGVhdFVuaXRBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnb3JpZW50YXRpb25PZlBvbHltZXJpc2F0aW9uJ10pIHsgdGhpcy5vcmllbnRhdGlvbk9mUG9seW1lcmlzYXRpb24gPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLm9yaWVudGF0aW9uT2ZQb2x5bWVyaXNhdGlvbik7IH1cclxuICAgIGlmIChzb3VyY2VbJ3JlcGVhdFVuaXQnXSkgeyB0aGlzLnJlcGVhdFVuaXQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnJlcGVhdFVuaXR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3JlcGVhdFVuaXQnXSkge1xyXG4gICAgICBpZiAodGhpcy5yZXBlYXRVbml0KSB7IHRoaXMucmVwZWF0VW5pdC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9yZXBlYXRVbml0ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMucmVwZWF0VW5pdCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9yZXBlYXRVbml0IGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydhbW91bnQnXSkgeyB0aGlzLmFtb3VudCA9IG5ldyBmaGlyLlN1YnN0YW5jZUFtb3VudChzb3VyY2UuYW1vdW50KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGVncmVlT2ZQb2x5bWVyaXNhdGlvbiddKSB7IHRoaXMuZGVncmVlT2ZQb2x5bWVyaXNhdGlvbiA9IHNvdXJjZS5kZWdyZWVPZlBvbHltZXJpc2F0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuU3Vic3RhbmNlUG9seW1lclJlcGVhdFJlcGVhdFVuaXREZWdyZWVPZlBvbHltZXJpc2F0aW9uKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZGVncmVlT2ZQb2x5bWVyaXNhdGlvbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydzdHJ1Y3R1cmFsUmVwcmVzZW50YXRpb24nXSkgeyB0aGlzLnN0cnVjdHVyYWxSZXByZXNlbnRhdGlvbiA9IHNvdXJjZS5zdHJ1Y3R1cmFsUmVwcmVzZW50YXRpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5TdWJzdGFuY2VQb2x5bWVyUmVwZWF0UmVwZWF0VW5pdFN0cnVjdHVyYWxSZXByZXNlbnRhdGlvbih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0cnVjdHVyYWxSZXByZXNlbnRhdGlvbiA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnU3Vic3RhbmNlUG9seW1lci5yZXBlYXQucmVwZWF0VW5pdCcgfVxyXG4gICAgdGhpcy52T1MoJ29yaWVudGF0aW9uT2ZQb2x5bWVyaXNhdGlvbicsZXhwKVxyXG4gICAgdGhpcy52T1MoJ3JlcGVhdFVuaXQnLGV4cClcclxuICAgIHRoaXMudk9TKCdhbW91bnQnLGV4cClcclxuICAgIHRoaXMudk9BKCdkZWdyZWVPZlBvbHltZXJpc2F0aW9uJyxleHApXHJcbiAgICB0aGlzLnZPQSgnc3RydWN0dXJhbFJlcHJlc2VudGF0aW9uJyxleHApXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgU3Vic3RhbmNlUG9seW1lclJlcGVhdCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTdWJzdGFuY2VQb2x5bWVyUmVwZWF0QXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVG9kby5cclxuICAgKi9cclxuICBudW1iZXJPZlVuaXRzPzogZmhpci5GaGlySW50ZWdlcnxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTdWJzdGFuY2VQb2x5bWVyLnJlcGVhdC5udW1iZXJPZlVuaXRzXHJcbiAgICovXHJcbiAgX251bWJlck9mVW5pdHM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRvZG8uXHJcbiAgICovXHJcbiAgYXZlcmFnZU1vbGVjdWxhckZvcm11bGE/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3Vic3RhbmNlUG9seW1lci5yZXBlYXQuYXZlcmFnZU1vbGVjdWxhckZvcm11bGFcclxuICAgKi9cclxuICBfYXZlcmFnZU1vbGVjdWxhckZvcm11bGE/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRvZG8uXHJcbiAgICovXHJcbiAgcmVwZWF0VW5pdEFtb3VudFR5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRvZG8uXHJcbiAgICovXHJcbiAgcmVwZWF0VW5pdD86IGZoaXIuU3Vic3RhbmNlUG9seW1lclJlcGVhdFJlcGVhdFVuaXRBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogVG9kby5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTdWJzdGFuY2VQb2x5bWVyUmVwZWF0IGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnU3Vic3RhbmNlUG9seW1lclJlcGVhdCc7XHJcbiAgLyoqXHJcbiAgICogVG9kby5cclxuICAgKi9cclxuICBwdWJsaWMgbnVtYmVyT2ZVbml0cz86IGZoaXIuRmhpckludGVnZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRvZG8uXHJcbiAgICovXHJcbiAgcHVibGljIGF2ZXJhZ2VNb2xlY3VsYXJGb3JtdWxhPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUb2RvLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZXBlYXRVbml0QW1vdW50VHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUb2RvLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZXBlYXRVbml0OiBmaGlyLlN1YnN0YW5jZVBvbHltZXJSZXBlYXRSZXBlYXRVbml0W107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgU3Vic3RhbmNlUG9seW1lclJlcGVhdCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFN1YnN0YW5jZVBvbHltZXJSZXBlYXRBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnbnVtYmVyT2ZVbml0cyddKSB7IHRoaXMubnVtYmVyT2ZVbml0cyA9IG5ldyBmaGlyLkZoaXJJbnRlZ2VyKHt2YWx1ZTogc291cmNlLm51bWJlck9mVW5pdHN9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX251bWJlck9mVW5pdHMnXSkge1xyXG4gICAgICBpZiAodGhpcy5udW1iZXJPZlVuaXRzKSB7IHRoaXMubnVtYmVyT2ZVbml0cy5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9udW1iZXJPZlVuaXRzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubnVtYmVyT2ZVbml0cyA9IG5ldyBmaGlyLkZoaXJJbnRlZ2VyKHNvdXJjZS5fbnVtYmVyT2ZVbml0cyBhcyBQYXJ0aWFsPGZoaXIuRmhpckludGVnZXJBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2F2ZXJhZ2VNb2xlY3VsYXJGb3JtdWxhJ10pIHsgdGhpcy5hdmVyYWdlTW9sZWN1bGFyRm9ybXVsYSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuYXZlcmFnZU1vbGVjdWxhckZvcm11bGF9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2F2ZXJhZ2VNb2xlY3VsYXJGb3JtdWxhJ10pIHtcclxuICAgICAgaWYgKHRoaXMuYXZlcmFnZU1vbGVjdWxhckZvcm11bGEpIHsgdGhpcy5hdmVyYWdlTW9sZWN1bGFyRm9ybXVsYS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9hdmVyYWdlTW9sZWN1bGFyRm9ybXVsYSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmF2ZXJhZ2VNb2xlY3VsYXJGb3JtdWxhID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2F2ZXJhZ2VNb2xlY3VsYXJGb3JtdWxhIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydyZXBlYXRVbml0QW1vdW50VHlwZSddKSB7IHRoaXMucmVwZWF0VW5pdEFtb3VudFR5cGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnJlcGVhdFVuaXRBbW91bnRUeXBlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVwZWF0VW5pdCddKSB7IHRoaXMucmVwZWF0VW5pdCA9IHNvdXJjZS5yZXBlYXRVbml0Lm1hcCgoeCkgPT4gbmV3IGZoaXIuU3Vic3RhbmNlUG9seW1lclJlcGVhdFJlcGVhdFVuaXQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZXBlYXRVbml0ID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdTdWJzdGFuY2VQb2x5bWVyLnJlcGVhdCcgfVxyXG4gICAgdGhpcy52T1MoJ251bWJlck9mVW5pdHMnLGV4cClcclxuICAgIHRoaXMudk9TKCdhdmVyYWdlTW9sZWN1bGFyRm9ybXVsYScsZXhwKVxyXG4gICAgdGhpcy52T1MoJ3JlcGVhdFVuaXRBbW91bnRUeXBlJyxleHApXHJcbiAgICB0aGlzLnZPQSgncmVwZWF0VW5pdCcsZXhwKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFN1YnN0YW5jZVBvbHltZXIgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3Vic3RhbmNlUG9seW1lckFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIlN1YnN0YW5jZVBvbHltZXJcInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVG9kby5cclxuICAgKi9cclxuICBjbGFzcz86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVG9kby5cclxuICAgKi9cclxuICBnZW9tZXRyeT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVG9kby5cclxuICAgKi9cclxuICBjb3BvbHltZXJDb25uZWN0aXZpdHk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVG9kby5cclxuICAgKi9cclxuICBtb2RpZmljYXRpb24/OiBmaGlyLkZoaXJTdHJpbmdbXXwoc3RyaW5nfG51bGwpW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTdWJzdGFuY2VQb2x5bWVyLm1vZGlmaWNhdGlvblxyXG4gICAqL1xyXG4gIF9tb2RpZmljYXRpb24/OihmaGlyLkZoaXJFbGVtZW50QXJnc3xudWxsKVtdO1xyXG4gIC8qKlxyXG4gICAqIFRvZG8uXHJcbiAgICovXHJcbiAgbW9ub21lclNldD86IGZoaXIuU3Vic3RhbmNlUG9seW1lck1vbm9tZXJTZXRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRvZG8uXHJcbiAgICovXHJcbiAgcmVwZWF0PzogZmhpci5TdWJzdGFuY2VQb2x5bWVyUmVwZWF0QXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRvZG8uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3Vic3RhbmNlUG9seW1lciBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnU3Vic3RhbmNlUG9seW1lcic7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJTdWJzdGFuY2VQb2x5bWVyXCI7XHJcbiAgLyoqXHJcbiAgICogVG9kby5cclxuICAgKi9cclxuICBwdWJsaWMgY2xhc3M/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVG9kby5cclxuICAgKi9cclxuICBwdWJsaWMgZ2VvbWV0cnk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVG9kby5cclxuICAgKi9cclxuICBwdWJsaWMgY29wb2x5bWVyQ29ubmVjdGl2aXR5OiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIFRvZG8uXHJcbiAgICovXHJcbiAgcHVibGljIG1vZGlmaWNhdGlvbjogZmhpci5GaGlyU3RyaW5nW107XHJcbiAgLyoqXHJcbiAgICogVG9kby5cclxuICAgKi9cclxuICBwdWJsaWMgbW9ub21lclNldDogZmhpci5TdWJzdGFuY2VQb2x5bWVyTW9ub21lclNldFtdO1xyXG4gIC8qKlxyXG4gICAqIFRvZG8uXHJcbiAgICovXHJcbiAgcHVibGljIHJlcGVhdDogZmhpci5TdWJzdGFuY2VQb2x5bWVyUmVwZWF0W107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgU3Vic3RhbmNlUG9seW1lciAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFN1YnN0YW5jZVBvbHltZXJBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnU3Vic3RhbmNlUG9seW1lcic7XHJcbiAgICBpZiAoc291cmNlWydjbGFzcyddKSB7IHRoaXMuY2xhc3MgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmNsYXNzKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZ2VvbWV0cnknXSkgeyB0aGlzLmdlb21ldHJ5ID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5nZW9tZXRyeSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvcG9seW1lckNvbm5lY3Rpdml0eSddKSB7IHRoaXMuY29wb2x5bWVyQ29ubmVjdGl2aXR5ID0gc291cmNlLmNvcG9seW1lckNvbm5lY3Rpdml0eS5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvcG9seW1lckNvbm5lY3Rpdml0eSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydtb2RpZmljYXRpb24nXSkgeyB0aGlzLm1vZGlmaWNhdGlvbiA9IHNvdXJjZS5tb2RpZmljYXRpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogeH0pKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubW9kaWZpY2F0aW9uID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ19tb2RpZmljYXRpb24nXSkge1xyXG4gICAgICBzb3VyY2UuX21vZGlmaWNhdGlvbi5mb3JFYWNoKCh4LGkpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5tb2RpZmljYXRpb24ubGVuZ3RoID49IGkpIHsgaWYgKHgpIHsgdGhpcy5tb2RpZmljYXRpb25baV0uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHgpOyB9IH1cclxuICAgICAgICBlbHNlIHsgaWYgKHgpIHsgdGhpcy5tb2RpZmljYXRpb24ucHVzaChuZXcgZmhpci5GaGlyU3RyaW5nKHggYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPikpOyB9IH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydtb25vbWVyU2V0J10pIHsgdGhpcy5tb25vbWVyU2V0ID0gc291cmNlLm1vbm9tZXJTZXQubWFwKCh4KSA9PiBuZXcgZmhpci5TdWJzdGFuY2VQb2x5bWVyTW9ub21lclNldCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm1vbm9tZXJTZXQgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVwZWF0J10pIHsgdGhpcy5yZXBlYXQgPSBzb3VyY2UucmVwZWF0Lm1hcCgoeCkgPT4gbmV3IGZoaXIuU3Vic3RhbmNlUG9seW1lclJlcGVhdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnJlcGVhdCA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnU3Vic3RhbmNlUG9seW1lcicgfVxyXG4gICAgdGhpcy52UlMoJ3Jlc291cmNlVHlwZScsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2NsYXNzJyxleHApXHJcbiAgICB0aGlzLnZPUygnZ2VvbWV0cnknLGV4cClcclxuICAgIHRoaXMudk9BKCdjb3BvbHltZXJDb25uZWN0aXZpdHknLGV4cClcclxuICAgIHRoaXMudk9BKCdtb2RpZmljYXRpb24nLGV4cClcclxuICAgIHRoaXMudk9BKCdtb25vbWVyU2V0JyxleHApXHJcbiAgICB0aGlzLnZPQSgncmVwZWF0JyxleHApXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=