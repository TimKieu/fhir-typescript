// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR ComplexType: SubstanceAmount
import * as fhir from '../fhir.js';
/**
 * Reference range of possible or expected values.
 */
export class SubstanceAmountReferenceRange extends fhir.FhirElement {
    /**
     * Default constructor for SubstanceAmountReferenceRange - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['lowLimit']) {
            this.lowLimit = new fhir.Quantity(source.lowLimit);
        }
        if (source['highLimit']) {
            this.highLimit = new fhir.Quantity(source.highLimit);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["lowLimit"]) {
            issues.push(...this.lowLimit.doModelValidation());
        }
        if (this["highLimit"]) {
            issues.push(...this.highLimit.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceAmountReferenceRange._fts_dataType = 'SubstanceAmountReferenceRange';
/**
 * Chemical substances are a single substance type whose primary defining element is the molecular structure. Chemical substances shall be defined on the basis of their complete covalent molecular structure; the presence of a salt (counter-ion) and/or solvates (water, alcohols) is also captured. Purity, grade, physical form or particle size are not taken into account in the definition of a chemical substance or in the assignment of a Substance ID.
 */
export class SubstanceAmount extends fhir.BackboneElement {
    /**
     * Default constructor for SubstanceAmount - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['amount']) {
            this.amount = source.amount;
        }
        else if (source['amountQuantity']) {
            this.amount = new fhir.Quantity(source.amountQuantity);
        }
        else if (source['amountRange']) {
            this.amount = new fhir.Range(source.amountRange);
        }
        else if (source['amountString']) {
            this.amount = new fhir.FhirString({ value: source.amountString });
        }
        if (source['amountType']) {
            this.amountType = new fhir.CodeableConcept(source.amountType);
        }
        if (source['amountText']) {
            this.amountText = new fhir.FhirString({ value: source.amountText });
        }
        if (source['_amountText']) {
            if (this.amountText) {
                this.amountText.addExtendedProperties(source._amountText);
            }
            else {
                this.amountText = new fhir.FhirString(source._amountText);
            }
        }
        if (source['referenceRange']) {
            this.referenceRange = new fhir.SubstanceAmountReferenceRange(source.referenceRange);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["amountType"]) {
            issues.push(...this.amountType.doModelValidation());
        }
        if (this["amountText"]) {
            issues.push(...this.amountText.doModelValidation());
        }
        if (this["referenceRange"]) {
            issues.push(...this.referenceRange.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceAmount._fts_dataType = 'SubstanceAmount';
/**
 * Internal flag to properly serialize choice-type element SubstanceAmount.amount[x]
 */
SubstanceAmount._fts_amountIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3Vic3RhbmNlQW1vdW50LmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9TdWJzdGFuY2VBbW91bnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsb0NBQW9DO0FBRXBDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBZ0JuQzs7R0FFRztBQUNILE1BQU0sT0FBTyw2QkFBOEIsU0FBUSxJQUFJLENBQUMsV0FBVztJQWFqRTs7T0FFRztJQUNILFlBQVksU0FBb0QsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDMUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztTQUFFO1FBQy9FLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1NBQUU7SUFDcEYsQ0FBQztJQUNEOztPQUVHO0lBQ2EsaUJBQWlCO1FBQy9CLElBQUksTUFBTSxHQUFtQixLQUFLLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUN2RCxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQzVFLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFD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LElBQUksQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNC5jb3JlIHZlcnNpb246IDQuMC4xXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBDb21wbGV4VHlwZTogU3Vic3RhbmNlQW1vdW50XHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFN1YnN0YW5jZUFtb3VudFJlZmVyZW5jZVJhbmdlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFN1YnN0YW5jZUFtb3VudFJlZmVyZW5jZVJhbmdlQXJncyBleHRlbmRzIGZoaXIuRmhpckVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBMb3dlciBsaW1pdCBwb3NzaWJsZSBvciBleHBlY3RlZC5cclxuICAgKi9cclxuICBsb3dMaW1pdD86IGZoaXIuUXVhbnRpdHlBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBVcHBlciBsaW1pdCBwb3NzaWJsZSBvciBleHBlY3RlZC5cclxuICAgKi9cclxuICBoaWdoTGltaXQ/OiBmaGlyLlF1YW50aXR5QXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZWZlcmVuY2UgcmFuZ2Ugb2YgcG9zc2libGUgb3IgZXhwZWN0ZWQgdmFsdWVzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFN1YnN0YW5jZUFtb3VudFJlZmVyZW5jZVJhbmdlIGV4dGVuZHMgZmhpci5GaGlyRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdTdWJzdGFuY2VBbW91bnRSZWZlcmVuY2VSYW5nZSc7XHJcbiAgLyoqXHJcbiAgICogTG93ZXIgbGltaXQgcG9zc2libGUgb3IgZXhwZWN0ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGxvd0xpbWl0PzogZmhpci5RdWFudGl0eXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVXBwZXIgbGltaXQgcG9zc2libGUgb3IgZXhwZWN0ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGhpZ2hMaW1pdD86IGZoaXIuUXVhbnRpdHl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFN1YnN0YW5jZUFtb3VudFJlZmVyZW5jZVJhbmdlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8U3Vic3RhbmNlQW1vdW50UmVmZXJlbmNlUmFuZ2VBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnbG93TGltaXQnXSkgeyB0aGlzLmxvd0xpbWl0ID0gbmV3IGZoaXIuUXVhbnRpdHkoc291cmNlLmxvd0xpbWl0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaGlnaExpbWl0J10pIHsgdGhpcy5oaWdoTGltaXQgPSBuZXcgZmhpci5RdWFudGl0eShzb3VyY2UuaGlnaExpbWl0KTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKHRoaXNbXCJsb3dMaW1pdFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmxvd0xpbWl0LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImhpZ2hMaW1pdFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmhpZ2hMaW1pdC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFN1YnN0YW5jZUFtb3VudCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTdWJzdGFuY2VBbW91bnRBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBVc2VkIHRvIGNhcHR1cmUgcXVhbnRpdGF0aXZlIHZhbHVlcyBmb3IgYSB2YXJpZXR5IG9mIGVsZW1lbnRzLiBJZiBvbmx5IGxpbWl0cyBhcmUgZ2l2ZW4sIHRoZSBhcml0aG1ldGljIG1lYW4gd291bGQgYmUgdGhlIGF2ZXJhZ2UuIElmIG9ubHkgYSBzaW5nbGUgZGVmaW5pdGUgdmFsdWUgZm9yIGEgZ2l2ZW4gZWxlbWVudCBpcyBnaXZlbiwgaXQgd291bGQgYmUgY2FwdHVyZWQgaW4gdGhpcyBmaWVsZC5cclxuICAgKi9cclxuICBhbW91bnQ/OiBmaGlyLlF1YW50aXR5fGZoaXIuUmFuZ2V8Zmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBVc2VkIHRvIGNhcHR1cmUgcXVhbnRpdGF0aXZlIHZhbHVlcyBmb3IgYSB2YXJpZXR5IG9mIGVsZW1lbnRzLiBJZiBvbmx5IGxpbWl0cyBhcmUgZ2l2ZW4sIHRoZSBhcml0aG1ldGljIG1lYW4gd291bGQgYmUgdGhlIGF2ZXJhZ2UuIElmIG9ubHkgYSBzaW5nbGUgZGVmaW5pdGUgdmFsdWUgZm9yIGEgZ2l2ZW4gZWxlbWVudCBpcyBnaXZlbiwgaXQgd291bGQgYmUgY2FwdHVyZWQgaW4gdGhpcyBmaWVsZC5cclxuICAgKi9cclxuICBhbW91bnRRdWFudGl0eT86IGZoaXIuUXVhbnRpdHlBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBVc2VkIHRvIGNhcHR1cmUgcXVhbnRpdGF0aXZlIHZhbHVlcyBmb3IgYSB2YXJpZXR5IG9mIGVsZW1lbnRzLiBJZiBvbmx5IGxpbWl0cyBhcmUgZ2l2ZW4sIHRoZSBhcml0aG1ldGljIG1lYW4gd291bGQgYmUgdGhlIGF2ZXJhZ2UuIElmIG9ubHkgYSBzaW5nbGUgZGVmaW5pdGUgdmFsdWUgZm9yIGEgZ2l2ZW4gZWxlbWVudCBpcyBnaXZlbiwgaXQgd291bGQgYmUgY2FwdHVyZWQgaW4gdGhpcyBmaWVsZC5cclxuICAgKi9cclxuICBhbW91bnRSYW5nZT86IGZoaXIuUmFuZ2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBVc2VkIHRvIGNhcHR1cmUgcXVhbnRpdGF0aXZlIHZhbHVlcyBmb3IgYSB2YXJpZXR5IG9mIGVsZW1lbnRzLiBJZiBvbmx5IGxpbWl0cyBhcmUgZ2l2ZW4sIHRoZSBhcml0aG1ldGljIG1lYW4gd291bGQgYmUgdGhlIGF2ZXJhZ2UuIElmIG9ubHkgYSBzaW5nbGUgZGVmaW5pdGUgdmFsdWUgZm9yIGEgZ2l2ZW4gZWxlbWVudCBpcyBnaXZlbiwgaXQgd291bGQgYmUgY2FwdHVyZWQgaW4gdGhpcyBmaWVsZC5cclxuICAgKi9cclxuICBhbW91bnRTdHJpbmc/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBNb3N0IGVsZW1lbnRzIHRoYXQgcmVxdWlyZSBhIHF1YW50aXRhdGl2ZSB2YWx1ZSB3aWxsIGFsc28gaGF2ZSBhIGZpZWxkIGNhbGxlZCBhbW91bnQgdHlwZS4gQW1vdW50IHR5cGUgc2hvdWxkIGFsd2F5cyBiZSBzcGVjaWZpZWQgYmVjYXVzZSB0aGUgYWN0dWFsIHZhbHVlIG9mIHRoZSBhbW91bnQgaXMgb2Z0ZW4gZGVwZW5kZW50IG9uIGl0LiBFWEFNUExFOiBJbiBjYXB0dXJpbmcgdGhlIGFjdHVhbCByZWxhdGl2ZSBhbW91bnRzIG9mIHN1YnN0YW5jZXMgb3IgbW9sZWN1bGFyIGZyYWdtZW50cyBpdCBpcyBlc3NlbnRpYWwgdG8gaW5kaWNhdGUgd2hldGhlciB0aGUgYW1vdW50IHJlZmVycyB0byBhIG1vbGUgcmF0aW8gb3Igd2VpZ2h0IHJhdGlvLiBGb3IgYW55IGdpdmVuIGVsZW1lbnQgYW4gZWZmb3J0IHNob3VsZCBiZSBtYWRlIHRvIHVzZSBzYW1lIHRoZSBhbW91bnQgdHlwZSBmb3IgYWxsIHJlbGF0ZWQgZGVmaW5pdGlvbmFsIGVsZW1lbnRzLlxyXG4gICAqL1xyXG4gIGFtb3VudFR5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgdGV4dHVhbCBjb21tZW50IG9uIGEgbnVtZXJpYyB2YWx1ZS5cclxuICAgKi9cclxuICBhbW91bnRUZXh0PzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFN1YnN0YW5jZUFtb3VudC5hbW91bnRUZXh0XHJcbiAgICovXHJcbiAgX2Ftb3VudFRleHQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFJlZmVyZW5jZSByYW5nZSBvZiBwb3NzaWJsZSBvciBleHBlY3RlZCB2YWx1ZXMuXHJcbiAgICovXHJcbiAgcmVmZXJlbmNlUmFuZ2U/OiBmaGlyLlN1YnN0YW5jZUFtb3VudFJlZmVyZW5jZVJhbmdlQXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVtaWNhbCBzdWJzdGFuY2VzIGFyZSBhIHNpbmdsZSBzdWJzdGFuY2UgdHlwZSB3aG9zZSBwcmltYXJ5IGRlZmluaW5nIGVsZW1lbnQgaXMgdGhlIG1vbGVjdWxhciBzdHJ1Y3R1cmUuIENoZW1pY2FsIHN1YnN0YW5jZXMgc2hhbGwgYmUgZGVmaW5lZCBvbiB0aGUgYmFzaXMgb2YgdGhlaXIgY29tcGxldGUgY292YWxlbnQgbW9sZWN1bGFyIHN0cnVjdHVyZTsgdGhlIHByZXNlbmNlIG9mIGEgc2FsdCAoY291bnRlci1pb24pIGFuZC9vciBzb2x2YXRlcyAod2F0ZXIsIGFsY29ob2xzKSBpcyBhbHNvIGNhcHR1cmVkLiBQdXJpdHksIGdyYWRlLCBwaHlzaWNhbCBmb3JtIG9yIHBhcnRpY2xlIHNpemUgYXJlIG5vdCB0YWtlbiBpbnRvIGFjY291bnQgaW4gdGhlIGRlZmluaXRpb24gb2YgYSBjaGVtaWNhbCBzdWJzdGFuY2Ugb3IgaW4gdGhlIGFzc2lnbm1lbnQgb2YgYSBTdWJzdGFuY2UgSUQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3Vic3RhbmNlQW1vdW50IGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnU3Vic3RhbmNlQW1vdW50JztcclxuICAvKipcclxuICAgKiBVc2VkIHRvIGNhcHR1cmUgcXVhbnRpdGF0aXZlIHZhbHVlcyBmb3IgYSB2YXJpZXR5IG9mIGVsZW1lbnRzLiBJZiBvbmx5IGxpbWl0cyBhcmUgZ2l2ZW4sIHRoZSBhcml0aG1ldGljIG1lYW4gd291bGQgYmUgdGhlIGF2ZXJhZ2UuIElmIG9ubHkgYSBzaW5nbGUgZGVmaW5pdGUgdmFsdWUgZm9yIGEgZ2l2ZW4gZWxlbWVudCBpcyBnaXZlbiwgaXQgd291bGQgYmUgY2FwdHVyZWQgaW4gdGhpcyBmaWVsZC5cclxuICAgKi9cclxuICBwdWJsaWMgYW1vdW50PzogKGZoaXIuUXVhbnRpdHl8Zmhpci5SYW5nZXxmaGlyLkZoaXJTdHJpbmcpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IFN1YnN0YW5jZUFtb3VudC5hbW91bnRbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfYW1vdW50SXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogTW9zdCBlbGVtZW50cyB0aGF0IHJlcXVpcmUgYSBxdWFudGl0YXRpdmUgdmFsdWUgd2lsbCBhbHNvIGhhdmUgYSBmaWVsZCBjYWxsZWQgYW1vdW50IHR5cGUuIEFtb3VudCB0eXBlIHNob3VsZCBhbHdheXMgYmUgc3BlY2lmaWVkIGJlY2F1c2UgdGhlIGFjdHVhbCB2YWx1ZSBvZiB0aGUgYW1vdW50IGlzIG9mdGVuIGRlcGVuZGVudCBvbiBpdC4gRVhBTVBMRTogSW4gY2FwdHVyaW5nIHRoZSBhY3R1YWwgcmVsYXRpdmUgYW1vdW50cyBvZiBzdWJzdGFuY2VzIG9yIG1vbGVjdWxhciBmcmFnbWVudHMgaXQgaXMgZXNzZW50aWFsIHRvIGluZGljYXRlIHdoZXRoZXIgdGhlIGFtb3VudCByZWZlcnMgdG8gYSBtb2xlIHJhdGlvIG9yIHdlaWdodCByYXRpby4gRm9yIGFueSBnaXZlbiBlbGVtZW50IGFuIGVmZm9ydCBzaG91bGQgYmUgbWFkZSB0byB1c2Ugc2FtZSB0aGUgYW1vdW50IHR5cGUgZm9yIGFsbCByZWxhdGVkIGRlZmluaXRpb25hbCBlbGVtZW50cy5cclxuICAgKi9cclxuICBwdWJsaWMgYW1vdW50VHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHRleHR1YWwgY29tbWVudCBvbiBhIG51bWVyaWMgdmFsdWUuXHJcbiAgICovXHJcbiAgcHVibGljIGFtb3VudFRleHQ/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFJlZmVyZW5jZSByYW5nZSBvZiBwb3NzaWJsZSBvciBleHBlY3RlZCB2YWx1ZXMuXHJcbiAgICovXHJcbiAgcHVibGljIHJlZmVyZW5jZVJhbmdlPzogZmhpci5TdWJzdGFuY2VBbW91bnRSZWZlcmVuY2VSYW5nZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgU3Vic3RhbmNlQW1vdW50IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8U3Vic3RhbmNlQW1vdW50QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2Ftb3VudCddKSB7IHRoaXMuYW1vdW50ID0gc291cmNlLmFtb3VudDsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydhbW91bnRRdWFudGl0eSddKSB7IHRoaXMuYW1vdW50ID0gbmV3IGZoaXIuUXVhbnRpdHkoc291cmNlLmFtb3VudFF1YW50aXR5KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydhbW91bnRSYW5nZSddKSB7IHRoaXMuYW1vdW50ID0gbmV3IGZoaXIuUmFuZ2Uoc291cmNlLmFtb3VudFJhbmdlKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydhbW91bnRTdHJpbmcnXSkgeyB0aGlzLmFtb3VudCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuYW1vdW50U3RyaW5nfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2Ftb3VudFR5cGUnXSkgeyB0aGlzLmFtb3VudFR5cGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmFtb3VudFR5cGUpOyB9XHJcbiAgICBpZiAoc291cmNlWydhbW91bnRUZXh0J10pIHsgdGhpcy5hbW91bnRUZXh0ID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5hbW91bnRUZXh0fSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19hbW91bnRUZXh0J10pIHtcclxuICAgICAgaWYgKHRoaXMuYW1vdW50VGV4dCkgeyB0aGlzLmFtb3VudFRleHQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fYW1vdW50VGV4dCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmFtb3VudFRleHQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fYW1vdW50VGV4dCBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVmZXJlbmNlUmFuZ2UnXSkgeyB0aGlzLnJlZmVyZW5jZVJhbmdlID0gbmV3IGZoaXIuU3Vic3RhbmNlQW1vdW50UmVmZXJlbmNlUmFuZ2Uoc291cmNlLnJlZmVyZW5jZVJhbmdlKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKHRoaXNbXCJhbW91bnRUeXBlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuYW1vdW50VHlwZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJhbW91bnRUZXh0XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuYW1vdW50VGV4dC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJyZWZlcmVuY2VSYW5nZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnJlZmVyZW5jZVJhbmdlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=