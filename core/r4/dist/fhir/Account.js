// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: Account
import * as fhir from '../fhir.js';
// @ts-ignore
import { AccountStatusCodings, } from '../fhirValueSets/AccountStatusCodings.js';
/**
 * Typically. this may be some form of insurance, internal charges, or self-pay.
 * Local or jurisdictional business rules may determine which coverage covers which types of billable items charged to the account, and in which order.
 * Where the order is important, a local/jurisdictional extension may be defined to specify the order for the type of charge.
 */
export class AccountCoverage extends fhir.BackboneElement {
    /**
     * Default constructor for AccountCoverage - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['coverage']) {
            this.coverage = new fhir.Reference(source.coverage);
        }
        else {
            this.coverage = null;
        }
        if (source['priority']) {
            this.priority = new fhir.FhirPositiveInt({ value: source.priority });
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['coverage']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property coverage:fhir.Reference fhir: Account.coverage.coverage:Reference', });
        }
        if (this["coverage"]) {
            issues.push(...this.coverage.doModelValidation());
        }
        if (this["priority"]) {
            issues.push(...this.priority.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
AccountCoverage._fts_dataType = 'AccountCoverage';
/**
 * The parties responsible for balancing the account if other payment options fall short.
 */
export class AccountGuarantor extends fhir.BackboneElement {
    /**
     * Default constructor for AccountGuarantor - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['party']) {
            this.party = new fhir.Reference(source.party);
        }
        else {
            this.party = null;
        }
        if (source['onHold']) {
            this.onHold = new fhir.FhirBoolean({ value: source.onHold });
        }
        if (source['period']) {
            this.period = new fhir.Period(source.period);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['party']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property party:fhir.Reference fhir: Account.guarantor.party:Reference', });
        }
        if (this["party"]) {
            issues.push(...this.party.doModelValidation());
        }
        if (this["onHold"]) {
            issues.push(...this.onHold.doModelValidation());
        }
        if (this["period"]) {
            issues.push(...this.period.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
AccountGuarantor._fts_dataType = 'AccountGuarantor';
/**
 * A financial tool for tracking value accrued for a particular purpose.  In the healthcare field, used to track charges for a patient, cost centers, etc.
 */
export class Account extends fhir.DomainResource {
    /**
     * Default constructor for Account - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'Account';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['status']) {
            this.status = source.status;
        }
        else {
            this.status = null;
        }
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type);
        }
        if (source['name']) {
            this.name = new fhir.FhirString({ value: source.name });
        }
        if (source['subject']) {
            this.subject = source.subject.map((x) => new fhir.Reference(x));
        }
        else {
            this.subject = [];
        }
        if (source['servicePeriod']) {
            this.servicePeriod = new fhir.Period(source.servicePeriod);
        }
        if (source['coverage']) {
            this.coverage = source.coverage.map((x) => new fhir.AccountCoverage(x));
        }
        else {
            this.coverage = [];
        }
        if (source['owner']) {
            this.owner = new fhir.Reference(source.owner);
        }
        if (source['description']) {
            this.description = new fhir.FhirString({ value: source.description });
        }
        if (source['guarantor']) {
            this.guarantor = source.guarantor.map((x) => new fhir.AccountGuarantor(x));
        }
        else {
            this.guarantor = [];
        }
        if (source['partOf']) {
            this.partOf = new fhir.Reference(source.partOf);
        }
    }
    /**
     * Required-bound Value Set for status (Account.status)
     */
    static statusRequiredCoding() {
        return AccountStatusCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType:"Account" fhir: Account.resourceType:"Account"', });
        }
        if (this["identifier"]) {
            this.identifier.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (!this['status']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property status:AccountStatusCodeType fhir: Account.status:code', });
        }
        if (this["type"]) {
            issues.push(...this.type.doModelValidation());
        }
        if (this["name"]) {
            issues.push(...this.name.doModelValidation());
        }
        if (this["subject"]) {
            this.subject.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["servicePeriod"]) {
            issues.push(...this.servicePeriod.doModelValidation());
        }
        if (this["coverage"]) {
            this.coverage.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["owner"]) {
            issues.push(...this.owner.doModelValidation());
        }
        if (this["description"]) {
            issues.push(...this.description.doModelValidation());
        }
        if (this["guarantor"]) {
            this.guarantor.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["partOf"]) {
            issues.push(...this.partOf.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
Account._fts_dataType = 'Account';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQWNjb3VudC5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvQWNjb3VudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQyx5QkFBeUI7QUFFekIsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFFbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSxvQkFBb0IsR0FBMkIsTUFBTSwwQ0FBMEMsQ0FBQztBQXNCekc7Ozs7R0FJRztBQUNILE1BQU0sT0FBTyxlQUFnQixTQUFRLElBQUksQ0FBQyxlQUFlO0lBY3ZEOztPQUVHO0lBQ0gsWUFBWSxTQUFzQyxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUM1RixLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQUU7YUFDM0U7WUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztTQUFFO1FBQzlCLElBQUksTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLFFBQVEsRUFBQyxDQUFDLENBQUM7U0FBRTtJQUNqRyxDQUFDO0lBQ0Q7O09BRUc7SUFDYSxpQkFBaUI7UUFDL0IsSUFBSSxNQUFNLEdBQW1CLEtBQUssQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQ3ZELElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFDckIsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRyxXQUFXLEVBQUUs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aGw3LmZoaXIucjQuY29yZSB2ZXJzaW9uOiA0LjAuMVxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IEFjY291bnRcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFjY291bnRTdGF0dXNDb2RpbmdzLCBBY2NvdW50U3RhdHVzQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQWNjb3VudFN0YXR1c0NvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFjY291bnRTdGF0dXNDb2RlcywgIEFjY291bnRTdGF0dXNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQWNjb3VudFN0YXR1c0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBBY2NvdW50VHlwZUNvZGluZ3MsIEFjY291bnRUeXBlQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQWNjb3VudFR5cGVDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBBY2NvdW50VHlwZUNvZGVzLCAgQWNjb3VudFR5cGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQWNjb3VudFR5cGVDb2Rlcy5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBBY2NvdW50Q292ZXJhZ2UgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQWNjb3VudENvdmVyYWdlQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBhcnR5KHMpIHRoYXQgY29udHJpYnV0ZSB0byBwYXltZW50IChvciBwYXJ0IG9mKSBvZiB0aGUgY2hhcmdlcyBhcHBsaWVkIHRvIHRoaXMgYWNjb3VudCAoaW5jbHVkaW5nIHNlbGYtcGF5KS5cclxuICAgKiBBIGNvdmVyYWdlIG1heSBvbmx5IGJlIHJlc3BvbnNpYmxlIGZvciBzcGVjaWZpYyB0eXBlcyBvZiBjaGFyZ2VzLCBhbmQgdGhlIHNlcXVlbmNlIG9mIHRoZSBjb3ZlcmFnZXMgaW4gdGhlIGFjY291bnQgY291bGQgYmUgaW1wb3J0YW50IHdoZW4gcHJvY2Vzc2luZyBiaWxsaW5nLlxyXG4gICAqL1xyXG4gIGNvdmVyYWdlOiBmaGlyLlJlZmVyZW5jZUFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBJdCBpcyBjb21tb24gaW4gc29tZSBqdXJpc2RpY3Rpb25zIGZvciB0aGVyZSB0byBiZSBtdWx0aXBsZSBjb3ZlcmFnZXMgYWxsb2NhdGVkIHRvIGFuIGFjY291bnQsIGFuZCBhIHNlcXVlbmNlIGlzIHJlcXVpcmVkIHRvIG9yZGVyIHRoZSBzZXR0bGluZyBvZiB0aGUgYWNjb3VudCAob2Z0ZW4gd2l0aCBpbnN1cmFuY2UgY2xhaW1pbmcpLlxyXG4gICAqL1xyXG4gIHByaW9yaXR5PzogZmhpci5GaGlyUG9zaXRpdmVJbnR8bnVtYmVyfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFR5cGljYWxseS4gdGhpcyBtYXkgYmUgc29tZSBmb3JtIG9mIGluc3VyYW5jZSwgaW50ZXJuYWwgY2hhcmdlcywgb3Igc2VsZi1wYXkuXHJcbiAqIExvY2FsIG9yIGp1cmlzZGljdGlvbmFsIGJ1c2luZXNzIHJ1bGVzIG1heSBkZXRlcm1pbmUgd2hpY2ggY292ZXJhZ2UgY292ZXJzIHdoaWNoIHR5cGVzIG9mIGJpbGxhYmxlIGl0ZW1zIGNoYXJnZWQgdG8gdGhlIGFjY291bnQsIGFuZCBpbiB3aGljaCBvcmRlci5cclxuICogV2hlcmUgdGhlIG9yZGVyIGlzIGltcG9ydGFudCwgYSBsb2NhbC9qdXJpc2RpY3Rpb25hbCBleHRlbnNpb24gbWF5IGJlIGRlZmluZWQgdG8gc3BlY2lmeSB0aGUgb3JkZXIgZm9yIHRoZSB0eXBlIG9mIGNoYXJnZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBBY2NvdW50Q292ZXJhZ2UgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdBY2NvdW50Q292ZXJhZ2UnO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXJ0eShzKSB0aGF0IGNvbnRyaWJ1dGUgdG8gcGF5bWVudCAob3IgcGFydCBvZikgb2YgdGhlIGNoYXJnZXMgYXBwbGllZCB0byB0aGlzIGFjY291bnQgKGluY2x1ZGluZyBzZWxmLXBheSkuXHJcbiAgICogQSBjb3ZlcmFnZSBtYXkgb25seSBiZSByZXNwb25zaWJsZSBmb3Igc3BlY2lmaWMgdHlwZXMgb2YgY2hhcmdlcywgYW5kIHRoZSBzZXF1ZW5jZSBvZiB0aGUgY292ZXJhZ2VzIGluIHRoZSBhY2NvdW50IGNvdWxkIGJlIGltcG9ydGFudCB3aGVuIHByb2Nlc3NpbmcgYmlsbGluZy5cclxuICAgKi9cclxuICBwdWJsaWMgY292ZXJhZ2U6IGZoaXIuUmVmZXJlbmNlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogSXQgaXMgY29tbW9uIGluIHNvbWUganVyaXNkaWN0aW9ucyBmb3IgdGhlcmUgdG8gYmUgbXVsdGlwbGUgY292ZXJhZ2VzIGFsbG9jYXRlZCB0byBhbiBhY2NvdW50LCBhbmQgYSBzZXF1ZW5jZSBpcyByZXF1aXJlZCB0byBvcmRlciB0aGUgc2V0dGxpbmcgb2YgdGhlIGFjY291bnQgKG9mdGVuIHdpdGggaW5zdXJhbmNlIGNsYWltaW5nKS5cclxuICAgKi9cclxuICBwdWJsaWMgcHJpb3JpdHk/OiBmaGlyLkZoaXJQb3NpdGl2ZUludHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQWNjb3VudENvdmVyYWdlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8QWNjb3VudENvdmVyYWdlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2NvdmVyYWdlJ10pIHsgdGhpcy5jb3ZlcmFnZSA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuY292ZXJhZ2UpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb3ZlcmFnZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3ByaW9yaXR5J10pIHsgdGhpcy5wcmlvcml0eSA9IG5ldyBmaGlyLkZoaXJQb3NpdGl2ZUludCh7dmFsdWU6IHNvdXJjZS5wcmlvcml0eX0pOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAoIXRoaXNbJ2NvdmVyYWdlJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBjb3ZlcmFnZTpmaGlyLlJlZmVyZW5jZSBmaGlyOiBBY2NvdW50LmNvdmVyYWdlLmNvdmVyYWdlOlJlZmVyZW5jZScsIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJjb3ZlcmFnZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmNvdmVyYWdlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInByaW9yaXR5XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucHJpb3JpdHkuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBBY2NvdW50R3VhcmFudG9yIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEFjY291bnRHdWFyYW50b3JBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgZW50aXR5IHdobyBpcyByZXNwb25zaWJsZS5cclxuICAgKi9cclxuICBwYXJ0eTogZmhpci5SZWZlcmVuY2VBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogQSBndWFyYW50b3IgbWF5IGJlIHBsYWNlZCBvbiBjcmVkaXQgaG9sZCBvciBvdGhlcndpc2UgaGF2ZSB0aGVpciByb2xlIHRlbXBvcmFyaWx5IHN1c3BlbmRlZC5cclxuICAgKi9cclxuICBvbkhvbGQ/OiBmaGlyLkZoaXJCb29sZWFufGJvb2xlYW58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0aW1lZnJhbWUgZHVyaW5nIHdoaWNoIHRoZSBndWFyYW50b3IgYWNjZXB0cyByZXNwb25zaWJpbGl0eSBmb3IgdGhlIGFjY291bnQuXHJcbiAgICovXHJcbiAgcGVyaW9kPzogZmhpci5QZXJpb2RBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBwYXJ0aWVzIHJlc3BvbnNpYmxlIGZvciBiYWxhbmNpbmcgdGhlIGFjY291bnQgaWYgb3RoZXIgcGF5bWVudCBvcHRpb25zIGZhbGwgc2hvcnQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQWNjb3VudEd1YXJhbnRvciBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0FjY291bnRHdWFyYW50b3InO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBlbnRpdHkgd2hvIGlzIHJlc3BvbnNpYmxlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXJ0eTogZmhpci5SZWZlcmVuY2V8bnVsbDtcclxuICAvKipcclxuICAgKiBBIGd1YXJhbnRvciBtYXkgYmUgcGxhY2VkIG9uIGNyZWRpdCBob2xkIG9yIG90aGVyd2lzZSBoYXZlIHRoZWlyIHJvbGUgdGVtcG9yYXJpbHkgc3VzcGVuZGVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvbkhvbGQ/OiBmaGlyLkZoaXJCb29sZWFufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdGltZWZyYW1lIGR1cmluZyB3aGljaCB0aGUgZ3VhcmFudG9yIGFjY2VwdHMgcmVzcG9uc2liaWxpdHkgZm9yIHRoZSBhY2NvdW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwZXJpb2Q/OiBmaGlyLlBlcmlvZHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQWNjb3VudEd1YXJhbnRvciAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEFjY291bnRHdWFyYW50b3JBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsncGFydHknXSkgeyB0aGlzLnBhcnR5ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5wYXJ0eSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnBhcnR5ID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnb25Ib2xkJ10pIHsgdGhpcy5vbkhvbGQgPSBuZXcgZmhpci5GaGlyQm9vbGVhbih7dmFsdWU6IHNvdXJjZS5vbkhvbGR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncGVyaW9kJ10pIHsgdGhpcy5wZXJpb2QgPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLnBlcmlvZCk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICghdGhpc1sncGFydHknXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCAgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHBhcnR5OmZoaXIuUmVmZXJlbmNlIGZoaXI6IEFjY291bnQuZ3VhcmFudG9yLnBhcnR5OlJlZmVyZW5jZScsIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJwYXJ0eVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnBhcnR5LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcIm9uSG9sZFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm9uSG9sZC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJwZXJpb2RcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5wZXJpb2QuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBBY2NvdW50IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEFjY291bnRBcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJBY2NvdW50XCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFVuaXF1ZSBpZGVudGlmaWVyIHVzZWQgdG8gcmVmZXJlbmNlIHRoZSBhY2NvdW50LiAgTWlnaHQgb3IgbWlnaHQgbm90IGJlIGludGVuZGVkIGZvciBodW1hbiB1c2UgKGUuZy4gY3JlZGl0IGNhcmQgbnVtYmVyKS5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIGJlY2F1c2UgdGhlIHN0YXR1cyBjb250YWlucyB0aGUgY29kZXMgaW5hY3RpdmUgYW5kIGVudGVyZWQtaW4tZXJyb3IgdGhhdCBtYXJrIHRoZSBBY2NvdW50IGFzIG5vdCBjdXJyZW50bHkgdmFsaWQuXHJcbiAgICovXHJcbiAgc3RhdHVzOiBBY2NvdW50U3RhdHVzQ29kZVR5cGV8bnVsbDtcclxuICAvKipcclxuICAgKiBDYXRlZ29yaXplcyB0aGUgYWNjb3VudCBmb3IgcmVwb3J0aW5nIGFuZCBzZWFyY2hpbmcgcHVycG9zZXMuXHJcbiAgICovXHJcbiAgdHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTmFtZSB1c2VkIGZvciB0aGUgYWNjb3VudCB3aGVuIGRpc3BsYXlpbmcgaXQgdG8gaHVtYW5zIGluIHJlcG9ydHMsIGV0Yy5cclxuICAgKi9cclxuICBuYW1lPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWNjb3VudHMgY2FuIGJlIGFwcGxpZWQgdG8gbm9uLXBhdGllbnRzIGZvciB0cmFja2luZyBvdGhlciBub24tcGF0aWVudCByZWxhdGVkIGFjdGl2aXRpZXMsIHN1Y2ggYXMgZ3JvdXAgc2VydmljZXMgKHBhdGllbnRzIG5vdCB0cmFja2VkLCBhbmQgY29zdHMgY2hhcmdlZCB0byBhbm90aGVyIGJvZHkpLCBvciBtaWdodCBub3QgYmUgYWxsb2NhdGVkLlxyXG4gICAqL1xyXG4gIHN1YmplY3Q/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSXQgaXMgcG9zc2libGUgZm9yIHRyYW5zYWN0aW9ucyB0byBiZSBwb3N0ZWQgb3V0c2lkZSB0aGUgc2VydmljZSBwZXJpb2QsIGFzIGxvbmcgYXMgdGhlIHNlcnZpY2Ugd2FzIHByb3ZpZGVkIHdpdGhpbiB0aGUgZGVmaW5lZCBzZXJ2aWNlIHBlcmlvZC5cclxuICAgKi9cclxuICBzZXJ2aWNlUGVyaW9kPzogZmhpci5QZXJpb2RBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUeXBpY2FsbHkuIHRoaXMgbWF5IGJlIHNvbWUgZm9ybSBvZiBpbnN1cmFuY2UsIGludGVybmFsIGNoYXJnZXMsIG9yIHNlbGYtcGF5LlxyXG4gICAqIExvY2FsIG9yIGp1cmlzZGljdGlvbmFsIGJ1c2luZXNzIHJ1bGVzIG1heSBkZXRlcm1pbmUgd2hpY2ggY292ZXJhZ2UgY292ZXJzIHdoaWNoIHR5cGVzIG9mIGJpbGxhYmxlIGl0ZW1zIGNoYXJnZWQgdG8gdGhlIGFjY291bnQsIGFuZCBpbiB3aGljaCBvcmRlci5cclxuICAgKiBXaGVyZSB0aGUgb3JkZXIgaXMgaW1wb3J0YW50LCBhIGxvY2FsL2p1cmlzZGljdGlvbmFsIGV4dGVuc2lvbiBtYXkgYmUgZGVmaW5lZCB0byBzcGVjaWZ5IHRoZSBvcmRlciBmb3IgdGhlIHR5cGUgb2YgY2hhcmdlLlxyXG4gICAqL1xyXG4gIGNvdmVyYWdlPzogZmhpci5BY2NvdW50Q292ZXJhZ2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB0aGUgc2VydmljZSBhcmVhLCBob3NwaXRhbCwgZGVwYXJ0bWVudCwgZXRjLiB3aXRoIHJlc3BvbnNpYmlsaXR5IGZvciBtYW5hZ2luZyB0aGUgQWNjb3VudC5cclxuICAgKi9cclxuICBvd25lcj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUHJvdmlkZXMgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiBhYm91dCB3aGF0IHRoZSBhY2NvdW50IHRyYWNrcyBhbmQgaG93IGl0IGlzIHVzZWQuXHJcbiAgICovXHJcbiAgZGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcGFydGllcyByZXNwb25zaWJsZSBmb3IgYmFsYW5jaW5nIHRoZSBhY2NvdW50IGlmIG90aGVyIHBheW1lbnQgb3B0aW9ucyBmYWxsIHNob3J0LlxyXG4gICAqL1xyXG4gIGd1YXJhbnRvcj86IGZoaXIuQWNjb3VudEd1YXJhbnRvckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUmVmZXJlbmNlIHRvIGEgcGFyZW50IEFjY291bnQuXHJcbiAgICovXHJcbiAgcGFydE9mPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgZmluYW5jaWFsIHRvb2wgZm9yIHRyYWNraW5nIHZhbHVlIGFjY3J1ZWQgZm9yIGEgcGFydGljdWxhciBwdXJwb3NlLiAgSW4gdGhlIGhlYWx0aGNhcmUgZmllbGQsIHVzZWQgdG8gdHJhY2sgY2hhcmdlcyBmb3IgYSBwYXRpZW50LCBjb3N0IGNlbnRlcnMsIGV0Yy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBBY2NvdW50IGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdBY2NvdW50JztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIkFjY291bnRcIjtcclxuICAvKipcclxuICAgKiBVbmlxdWUgaWRlbnRpZmllciB1c2VkIHRvIHJlZmVyZW5jZSB0aGUgYWNjb3VudC4gIE1pZ2h0IG9yIG1pZ2h0IG5vdCBiZSBpbnRlbmRlZCBmb3IgaHVtYW4gdXNlIChlLmcuIGNyZWRpdCBjYXJkIG51bWJlcikuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJbXTtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIGJlY2F1c2UgdGhlIHN0YXR1cyBjb250YWlucyB0aGUgY29kZXMgaW5hY3RpdmUgYW5kIGVudGVyZWQtaW4tZXJyb3IgdGhhdCBtYXJrIHRoZSBBY2NvdW50IGFzIG5vdCBjdXJyZW50bHkgdmFsaWQuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1czogQWNjb3VudFN0YXR1c0NvZGVUeXBlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogQ2F0ZWdvcml6ZXMgdGhlIGFjY291bnQgZm9yIHJlcG9ydGluZyBhbmQgc2VhcmNoaW5nIHB1cnBvc2VzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0eXBlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE5hbWUgdXNlZCBmb3IgdGhlIGFjY291bnQgd2hlbiBkaXNwbGF5aW5nIGl0IHRvIGh1bWFucyBpbiByZXBvcnRzLCBldGMuXHJcbiAgICovXHJcbiAgcHVibGljIG5hbWU/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFjY291bnRzIGNhbiBiZSBhcHBsaWVkIHRvIG5vbi1wYXRpZW50cyBmb3IgdHJhY2tpbmcgb3RoZXIgbm9uLXBhdGllbnQgcmVsYXRlZCBhY3Rpdml0aWVzLCBzdWNoIGFzIGdyb3VwIHNlcnZpY2VzIChwYXRpZW50cyBub3QgdHJhY2tlZCwgYW5kIGNvc3RzIGNoYXJnZWQgdG8gYW5vdGhlciBib2R5KSwgb3IgbWlnaHQgbm90IGJlIGFsbG9jYXRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgc3ViamVjdD86IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogSXQgaXMgcG9zc2libGUgZm9yIHRyYW5zYWN0aW9ucyB0byBiZSBwb3N0ZWQgb3V0c2lkZSB0aGUgc2VydmljZSBwZXJpb2QsIGFzIGxvbmcgYXMgdGhlIHNlcnZpY2Ugd2FzIHByb3ZpZGVkIHdpdGhpbiB0aGUgZGVmaW5lZCBzZXJ2aWNlIHBlcmlvZC5cclxuICAgKi9cclxuICBwdWJsaWMgc2VydmljZVBlcmlvZD86IGZoaXIuUGVyaW9kfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUeXBpY2FsbHkuIHRoaXMgbWF5IGJlIHNvbWUgZm9ybSBvZiBpbnN1cmFuY2UsIGludGVybmFsIGNoYXJnZXMsIG9yIHNlbGYtcGF5LlxyXG4gICAqIExvY2FsIG9yIGp1cmlzZGljdGlvbmFsIGJ1c2luZXNzIHJ1bGVzIG1heSBkZXRlcm1pbmUgd2hpY2ggY292ZXJhZ2UgY292ZXJzIHdoaWNoIHR5cGVzIG9mIGJpbGxhYmxlIGl0ZW1zIGNoYXJnZWQgdG8gdGhlIGFjY291bnQsIGFuZCBpbiB3aGljaCBvcmRlci5cclxuICAgKiBXaGVyZSB0aGUgb3JkZXIgaXMgaW1wb3J0YW50LCBhIGxvY2FsL2p1cmlzZGljdGlvbmFsIGV4dGVuc2lvbiBtYXkgYmUgZGVmaW5lZCB0byBzcGVjaWZ5IHRoZSBvcmRlciBmb3IgdGhlIHR5cGUgb2YgY2hhcmdlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb3ZlcmFnZT86IGZoaXIuQWNjb3VudENvdmVyYWdlW107XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHRoZSBzZXJ2aWNlIGFyZWEsIGhvc3BpdGFsLCBkZXBhcnRtZW50LCBldGMuIHdpdGggcmVzcG9uc2liaWxpdHkgZm9yIG1hbmFnaW5nIHRoZSBBY2NvdW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvd25lcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBQcm92aWRlcyBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIGFib3V0IHdoYXQgdGhlIGFjY291bnQgdHJhY2tzIGFuZCBob3cgaXQgaXMgdXNlZC5cclxuICAgKi9cclxuICBwdWJsaWMgZGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXJ0aWVzIHJlc3BvbnNpYmxlIGZvciBiYWxhbmNpbmcgdGhlIGFjY291bnQgaWYgb3RoZXIgcGF5bWVudCBvcHRpb25zIGZhbGwgc2hvcnQuXHJcbiAgICovXHJcbiAgcHVibGljIGd1YXJhbnRvcj86IGZoaXIuQWNjb3VudEd1YXJhbnRvcltdO1xyXG4gIC8qKlxyXG4gICAqIFJlZmVyZW5jZSB0byBhIHBhcmVudCBBY2NvdW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXJ0T2Y/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQWNjb3VudCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEFjY291bnRBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnQWNjb3VudCc7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gc291cmNlLmlkZW50aWZpZXIubWFwKCh4KSA9PiBuZXcgZmhpci5JZGVudGlmaWVyKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaWRlbnRpZmllciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydzdGF0dXMnXSkgeyB0aGlzLnN0YXR1cyA9IHNvdXJjZS5zdGF0dXM7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3R5cGUnXSkgeyB0aGlzLnR5cGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnR5cGUpOyB9XHJcbiAgICBpZiAoc291cmNlWyduYW1lJ10pIHsgdGhpcy5uYW1lID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5uYW1lfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N1YmplY3QnXSkgeyB0aGlzLnN1YmplY3QgPSBzb3VyY2Uuc3ViamVjdC5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN1YmplY3QgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2VydmljZVBlcmlvZCddKSB7IHRoaXMuc2VydmljZVBlcmlvZCA9IG5ldyBmaGlyLlBlcmlvZChzb3VyY2Uuc2VydmljZVBlcmlvZCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvdmVyYWdlJ10pIHsgdGhpcy5jb3ZlcmFnZSA9IHNvdXJjZS5jb3ZlcmFnZS5tYXAoKHgpID0+IG5ldyBmaGlyLkFjY291bnRDb3ZlcmFnZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvdmVyYWdlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ293bmVyJ10pIHsgdGhpcy5vd25lciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2Uub3duZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWydkZXNjcmlwdGlvbiddKSB7IHRoaXMuZGVzY3JpcHRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmRlc2NyaXB0aW9ufSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2d1YXJhbnRvciddKSB7IHRoaXMuZ3VhcmFudG9yID0gc291cmNlLmd1YXJhbnRvci5tYXAoKHgpID0+IG5ldyBmaGlyLkFjY291bnRHdWFyYW50b3IoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5ndWFyYW50b3IgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncGFydE9mJ10pIHsgdGhpcy5wYXJ0T2YgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnBhcnRPZik7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZWQtYm91bmQgVmFsdWUgU2V0IGZvciBzdGF0dXMgKEFjY291bnQuc3RhdHVzKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgc3RhdHVzUmVxdWlyZWRDb2RpbmcoKTpBY2NvdW50U3RhdHVzQ29kaW5nVHlwZSB7XHJcbiAgICByZXR1cm4gQWNjb3VudFN0YXR1c0NvZGluZ3M7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAoIXRoaXNbJ3Jlc291cmNlVHlwZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsICBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgcmVzb3VyY2VUeXBlOlwiQWNjb3VudFwiIGZoaXI6IEFjY291bnQucmVzb3VyY2VUeXBlOlwiQWNjb3VudFwiJywgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImlkZW50aWZpZXJcIl0pIHsgdGhpcy5pZGVudGlmaWVyLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKCF0aGlzWydzdGF0dXMnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCAgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHN0YXR1czpBY2NvdW50U3RhdHVzQ29kZVR5cGUgZmhpcjogQWNjb3VudC5zdGF0dXM6Y29kZScsIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJ0eXBlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMudHlwZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJuYW1lXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMubmFtZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJzdWJqZWN0XCJdKSB7IHRoaXMuc3ViamVjdC5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wic2VydmljZVBlcmlvZFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnNlcnZpY2VQZXJpb2QuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiY292ZXJhZ2VcIl0pIHsgdGhpcy5jb3ZlcmFnZS5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wib3duZXJcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5vd25lci5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJkZXNjcmlwdGlvblwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmRlc2NyaXB0aW9uLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImd1YXJhbnRvclwiXSkgeyB0aGlzLmd1YXJhbnRvci5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wicGFydE9mXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucGFydE9mLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=