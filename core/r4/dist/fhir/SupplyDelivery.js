// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: SupplyDelivery
import * as fhir from '../fhir.js';
// @ts-ignore
import { SupplydeliveryStatusCodes } from '../fhirValueSets/SupplydeliveryStatusCodes.js';
// @ts-ignore
import { SupplydeliveryTypeCodes } from '../fhirValueSets/SupplydeliveryTypeCodes.js';
/**
 * The item that is being delivered or has been supplied.
 */
export class SupplyDeliverySuppliedItem extends fhir.BackboneElement {
    /**
     * Default constructor for SupplyDeliverySuppliedItem - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['quantity']) {
            this.quantity = new fhir.Quantity(source.quantity);
        }
        if (source['item']) {
            this.item = source.item;
        }
        else if (source['itemCodeableConcept']) {
            this.item = new fhir.CodeableConcept(source.itemCodeableConcept);
        }
        else if (source['itemReference']) {
            this.item = new fhir.Reference(source.itemReference);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["quantity"]) {
            issues.push(...this.quantity.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SupplyDeliverySuppliedItem._fts_dataType = 'SupplyDeliverySuppliedItem';
/**
 * Internal flag to properly serialize choice-type element SupplyDelivery.suppliedItem.item[x]
 */
SupplyDeliverySuppliedItem._fts_itemIsChoice = true;
/**
 * Record of delivery of what is supplied.
 */
export class SupplyDelivery extends fhir.DomainResource {
    /**
     * Default constructor for SupplyDelivery - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'SupplyDelivery';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['basedOn']) {
            this.basedOn = source.basedOn.map((x) => new fhir.Reference(x));
        }
        else {
            this.basedOn = [];
        }
        if (source['partOf']) {
            this.partOf = source.partOf.map((x) => new fhir.Reference(x));
        }
        else {
            this.partOf = [];
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        if (source['patient']) {
            this.patient = new fhir.Reference(source.patient);
        }
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type);
        }
        if (source['suppliedItem']) {
            this.suppliedItem = new fhir.SupplyDeliverySuppliedItem(source.suppliedItem);
        }
        if (source['occurrence']) {
            this.occurrence = source.occurrence;
        }
        else if (source['occurrenceDateTime']) {
            this.occurrence = new fhir.FhirDateTime({ value: source.occurrenceDateTime });
        }
        else if (source['occurrencePeriod']) {
            this.occurrence = new fhir.Period(source.occurrencePeriod);
        }
        else if (source['occurrenceTiming']) {
            this.occurrence = new fhir.Timing(source.occurrenceTiming);
        }
        if (source['supplier']) {
            this.supplier = new fhir.Reference(source.supplier);
        }
        if (source['destination']) {
            this.destination = new fhir.Reference(source.destination);
        }
        if (source['receiver']) {
            this.receiver = source.receiver.map((x) => new fhir.Reference(x));
        }
        else {
            this.receiver = [];
        }
    }
    /**
     * Required-bound Value Set for status (SupplyDelivery.status)
     */
    static get statusRequiredCodes() {
        return SupplydeliveryStatusCodes;
    }
    /**
     * Required-bound Value Set for type (SupplyDelivery.type)
     */
    static get typeRequiredCodes() {
        return SupplydeliveryTypeCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType:"SupplyDelivery" fhir: SupplyDelivery.resourceType:"SupplyDelivery"' });
        }
        if (this["identifier"]) {
            this.identifier.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["basedOn"]) {
            this.basedOn.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["partOf"]) {
            this.partOf.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this['status'] && (!Object.values(SupplydeliveryStatusCodes).includes(this.status))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property status?:fhir.FhirCode<SupplydeliveryStatusCodeType> fhir: SupplyDelivery.status:code Required binding to: SupplydeliveryStatus' });
        }
        if (this["status"]) {
            issues.push(...this.status.doModelValidation());
        }
        if (this["patient"]) {
            issues.push(...this.patient.doModelValidation());
        }
        if (this['type'] && (!Object.values(SupplydeliveryTypeCodes).includes(this.type))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property type?:fhir.CodeableConcept fhir: SupplyDelivery.type:CodeableConcept Required binding to: SupplydeliveryType' });
        }
        if (this["type"]) {
            issues.push(...this.type.doModelValidation());
        }
        if (this["suppliedItem"]) {
            issues.push(...this.suppliedItem.doModelValidation());
        }
        if (this["supplier"]) {
            issues.push(...this.supplier.doModelValidation());
        }
        if (this["destination"]) {
            issues.push(...this.destination.doModelValidation());
        }
        if (this["receiver"]) {
            this.receiver.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SupplyDelivery._fts_dataType = 'SupplyDelivery';
/**
 * Internal flag to properly serialize choice-type element SupplyDelivery.occurrence[x]
 */
SupplyDelivery._fts_occurrenceIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3VwcGx5RGVsaXZlcnkuanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL1N1cHBseURlbGl2ZXJ5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQiwrQ0FBK0M7QUFDL0Msa0NBQWtDO0FBQ2xDLGdDQUFnQztBQUVoQyxPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQUluQyxhQUFhO0FBQ2IsT0FBTyxFQUFFLHlCQUF5QixFQUFpQyxNQUFNLCtDQUErQyxDQUFDO0FBR3pILGFBQWE7QUFDYixPQUFPLEVBQUUsdUJBQXVCLEVBQStCLE1BQU0sNkNBQTZDLENBQUM7QUF1Qm5IOztHQUVHO0FBQ0gsTUFBTSxPQUFPLDBCQUEyQixTQUFRLElBQUksQ0FBQyxlQUFlO0lBaUJsRTs7T0FFRztJQUNILFlBQVksU0FBaUQsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDdkcsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztTQUFFO1FBQy9FLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDO1NBQUU7YUFDM0MsSUFBSSxNQUFNLENBQUMscUJBQXFCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1NBQUU7YUFDeEcsSUFBSSxNQUFNLENBQUMsZUFBZSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUM7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QU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQ2xGLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7U0FBRTtRQUNsRyxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQXZIRDs7R0FFRztBQUM2Qiw0QkFBYSxHQUFVLGdCQUFnQixDQUFDO0FBc0N4RTs7R0FFRztBQUN1QixzQ0FBdUIsR0FBUSxJQUFJLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjQuY29yZSB2ZXJzaW9uOiA0LjAuMVxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IFN1cHBseURlbGl2ZXJ5XHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBTdXBwbHlkZWxpdmVyeVN0YXR1c0NvZGluZ3MsIFN1cHBseWRlbGl2ZXJ5U3RhdHVzQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvU3VwcGx5ZGVsaXZlcnlTdGF0dXNDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBTdXBwbHlkZWxpdmVyeVN0YXR1c0NvZGVzLCAgU3VwcGx5ZGVsaXZlcnlTdGF0dXNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvU3VwcGx5ZGVsaXZlcnlTdGF0dXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgU3VwcGx5ZGVsaXZlcnlUeXBlQ29kaW5ncywgU3VwcGx5ZGVsaXZlcnlUeXBlQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvU3VwcGx5ZGVsaXZlcnlUeXBlQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgU3VwcGx5ZGVsaXZlcnlUeXBlQ29kZXMsICBTdXBwbHlkZWxpdmVyeVR5cGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvU3VwcGx5ZGVsaXZlcnlUeXBlQ29kZXMuanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgU3VwcGx5RGVsaXZlcnlTdXBwbGllZEl0ZW0gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3VwcGx5RGVsaXZlcnlTdXBwbGllZEl0ZW1BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgYW1vdW50IG9mIHN1cHBseSB0aGF0IGhhcyBiZWVuIGRpc3BlbnNlZC4gSW5jbHVkZXMgdW5pdCBvZiBtZWFzdXJlLlxyXG4gICAqL1xyXG4gIHF1YW50aXR5PzogZmhpci5RdWFudGl0eUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgdGhlIG1lZGljYXRpb24sIHN1YnN0YW5jZSBvciBkZXZpY2UgYmVpbmcgZGlzcGVuc2VkLiBUaGlzIGlzIGVpdGhlciBhIGxpbmsgdG8gYSByZXNvdXJjZSByZXByZXNlbnRpbmcgdGhlIGRldGFpbHMgb2YgdGhlIGl0ZW0gb3IgYSBjb2RlIHRoYXQgaWRlbnRpZmllcyB0aGUgaXRlbSBmcm9tIGEga25vd24gbGlzdC5cclxuICAgKi9cclxuICBpdGVtPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8Zmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgdGhlIG1lZGljYXRpb24sIHN1YnN0YW5jZSBvciBkZXZpY2UgYmVpbmcgZGlzcGVuc2VkLiBUaGlzIGlzIGVpdGhlciBhIGxpbmsgdG8gYSByZXNvdXJjZSByZXByZXNlbnRpbmcgdGhlIGRldGFpbHMgb2YgdGhlIGl0ZW0gb3IgYSBjb2RlIHRoYXQgaWRlbnRpZmllcyB0aGUgaXRlbSBmcm9tIGEga25vd24gbGlzdC5cclxuICAgKi9cclxuICBpdGVtQ29kZWFibGVDb25jZXB0PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHRoZSBtZWRpY2F0aW9uLCBzdWJzdGFuY2Ugb3IgZGV2aWNlIGJlaW5nIGRpc3BlbnNlZC4gVGhpcyBpcyBlaXRoZXIgYSBsaW5rIHRvIGEgcmVzb3VyY2UgcmVwcmVzZW50aW5nIHRoZSBkZXRhaWxzIG9mIHRoZSBpdGVtIG9yIGEgY29kZSB0aGF0IGlkZW50aWZpZXMgdGhlIGl0ZW0gZnJvbSBhIGtub3duIGxpc3QuXHJcbiAgICovXHJcbiAgaXRlbVJlZmVyZW5jZT86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgaXRlbSB0aGF0IGlzIGJlaW5nIGRlbGl2ZXJlZCBvciBoYXMgYmVlbiBzdXBwbGllZC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTdXBwbHlEZWxpdmVyeVN1cHBsaWVkSXRlbSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1N1cHBseURlbGl2ZXJ5U3VwcGxpZWRJdGVtJztcclxuICAvKipcclxuICAgKiBUaGUgYW1vdW50IG9mIHN1cHBseSB0aGF0IGhhcyBiZWVuIGRpc3BlbnNlZC4gSW5jbHVkZXMgdW5pdCBvZiBtZWFzdXJlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBxdWFudGl0eT86IGZoaXIuUXVhbnRpdHl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgdGhlIG1lZGljYXRpb24sIHN1YnN0YW5jZSBvciBkZXZpY2UgYmVpbmcgZGlzcGVuc2VkLiBUaGlzIGlzIGVpdGhlciBhIGxpbmsgdG8gYSByZXNvdXJjZSByZXByZXNlbnRpbmcgdGhlIGRldGFpbHMgb2YgdGhlIGl0ZW0gb3IgYSBjb2RlIHRoYXQgaWRlbnRpZmllcyB0aGUgaXRlbSBmcm9tIGEga25vd24gbGlzdC5cclxuICAgKi9cclxuICBwdWJsaWMgaXRlbT86IChmaGlyLkNvZGVhYmxlQ29uY2VwdHxmaGlyLlJlZmVyZW5jZSl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgU3VwcGx5RGVsaXZlcnkuc3VwcGxpZWRJdGVtLml0ZW1beF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfaXRlbUlzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFN1cHBseURlbGl2ZXJ5U3VwcGxpZWRJdGVtIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8U3VwcGx5RGVsaXZlcnlTdXBwbGllZEl0ZW1BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsncXVhbnRpdHknXSkgeyB0aGlzLnF1YW50aXR5ID0gbmV3IGZoaXIuUXVhbnRpdHkoc291cmNlLnF1YW50aXR5KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaXRlbSddKSB7IHRoaXMuaXRlbSA9IHNvdXJjZS5pdGVtOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2l0ZW1Db2RlYWJsZUNvbmNlcHQnXSkgeyB0aGlzLml0ZW0gPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLml0ZW1Db2RlYWJsZUNvbmNlcHQpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2l0ZW1SZWZlcmVuY2UnXSkgeyB0aGlzLml0ZW0gPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLml0ZW1SZWZlcmVuY2UpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAodGhpc1tcInF1YW50aXR5XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucXVhbnRpdHkuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBTdXBwbHlEZWxpdmVyeSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTdXBwbHlEZWxpdmVyeUFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIlN1cHBseURlbGl2ZXJ5XCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaWRlbnRpZmllciBpcyB0eXBpY2FsbHkgYXNzaWduZWQgYnkgdGhlIGRpc3BlbnNlciwgYW5kIG1heSBiZSB1c2VkIHRvIHJlZmVyZW5jZSB0aGUgZGVsaXZlcnkgd2hlbiBleGNoYW5naW5nIGluZm9ybWF0aW9uIGFib3V0IGl0IHdpdGggb3RoZXIgc3lzdGVtcy5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHBsYW4sIHByb3Bvc2FsIG9yIG9yZGVyIHRoYXQgaXMgZnVsZmlsbGVkIGluIHdob2xlIG9yIGluIHBhcnQgYnkgdGhpcyBldmVudC5cclxuICAgKi9cclxuICBiYXNlZE9uPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE5vdCB0byBiZSB1c2VkIHRvIGxpbmsgYW4gZXZlbnQgdG8gYW4gRW5jb3VudGVyIC0gdXNlIEV2ZW50LmNvbnRleHQgZm9yIHRoYXQuXHJcbiAgICogW1RoZSBhbGxvd2VkIHJlZmVyZW5jZSByZXNvdXJjZXMgbWF5IGJlIGFkanVzdGVkIGFzIGFwcHJvcHJpYXRlIGZvciB0aGUgZXZlbnQgcmVzb3VyY2VdLlxyXG4gICAqL1xyXG4gIHBhcnRPZj86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIGJlY2F1c2UgdGhlIHN0YXR1cyBjb250YWlucyBjb2RlcyB0aGF0IG1hcmsgdGhlIHJlc291cmNlIGFzIG5vdCBjdXJyZW50bHkgdmFsaWQuXHJcbiAgICovXHJcbiAgc3RhdHVzPzogZmhpci5GaGlyQ29kZTxTdXBwbHlkZWxpdmVyeVN0YXR1c0NvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgbGluayB0byBhIHJlc291cmNlIHJlcHJlc2VudGluZyB0aGUgcGVyc29uIHdob20gdGhlIGRlbGl2ZXJlZCBpdGVtIGlzIGZvci5cclxuICAgKi9cclxuICBwYXRpZW50PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgdGhlIHR5cGUgb2YgZGlzcGVuc2luZyBldmVudCB0aGF0IGlzIHBlcmZvcm1lZC4gRXhhbXBsZXMgaW5jbHVkZTogVHJpYWwgRmlsbCwgQ29tcGxldGlvbiBvZiBUcmlhbCwgUGFydGlhbCBGaWxsLCBFbWVyZ2VuY3kgRmlsbCwgU2FtcGxlcywgZXRjLlxyXG4gICAqL1xyXG4gIHR5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpdGVtIHRoYXQgaXMgYmVpbmcgZGVsaXZlcmVkIG9yIGhhcyBiZWVuIHN1cHBsaWVkLlxyXG4gICAqL1xyXG4gIHN1cHBsaWVkSXRlbT86IGZoaXIuU3VwcGx5RGVsaXZlcnlTdXBwbGllZEl0ZW1BcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBbVGhlIGxpc3Qgb2YgdHlwZXMgbWF5IGJlIGNvbnN0cmFpbmVkIGFzIGFwcHJvcHJpYXRlIGZvciB0aGUgdHlwZSBvZiBldmVudF0uXHJcbiAgICovXHJcbiAgb2NjdXJyZW5jZT86IGZoaXIuRmhpckRhdGVUaW1lfGZoaXIuUGVyaW9kfGZoaXIuVGltaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBbVGhlIGxpc3Qgb2YgdHlwZXMgbWF5IGJlIGNvbnN0cmFpbmVkIGFzIGFwcHJvcHJpYXRlIGZvciB0aGUgdHlwZSBvZiBldmVudF0uXHJcbiAgICovXHJcbiAgb2NjdXJyZW5jZURhdGVUaW1lPzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBbVGhlIGxpc3Qgb2YgdHlwZXMgbWF5IGJlIGNvbnN0cmFpbmVkIGFzIGFwcHJvcHJpYXRlIGZvciB0aGUgdHlwZSBvZiBldmVudF0uXHJcbiAgICovXHJcbiAgb2NjdXJyZW5jZVBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogW1RoZSBsaXN0IG9mIHR5cGVzIG1heSBiZSBjb25zdHJhaW5lZCBhcyBhcHByb3ByaWF0ZSBmb3IgdGhlIHR5cGUgb2YgZXZlbnRdLlxyXG4gICAqL1xyXG4gIG9jY3VycmVuY2VUaW1pbmc/OiBmaGlyLlRpbWluZ0FyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpbmRpdmlkdWFsIHJlc3BvbnNpYmxlIGZvciBkaXNwZW5zaW5nIHRoZSBtZWRpY2F0aW9uLCBzdXBwbGllciBvciBkZXZpY2UuXHJcbiAgICovXHJcbiAgc3VwcGxpZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpY2F0aW9uIG9mIHRoZSBmYWNpbGl0eS9sb2NhdGlvbiB3aGVyZSB0aGUgU3VwcGx5IHdhcyBzaGlwcGVkIHRvLCBhcyBwYXJ0IG9mIHRoZSBkaXNwZW5zZSBldmVudC5cclxuICAgKi9cclxuICBkZXN0aW5hdGlvbj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgcGVyc29uIHdobyBwaWNrZWQgdXAgdGhlIFN1cHBseS5cclxuICAgKi9cclxuICByZWNlaXZlcj86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlY29yZCBvZiBkZWxpdmVyeSBvZiB3aGF0IGlzIHN1cHBsaWVkLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFN1cHBseURlbGl2ZXJ5IGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdTdXBwbHlEZWxpdmVyeSc7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJTdXBwbHlEZWxpdmVyeVwiO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaWRlbnRpZmllciBpcyB0eXBpY2FsbHkgYXNzaWduZWQgYnkgdGhlIGRpc3BlbnNlciwgYW5kIG1heSBiZSB1c2VkIHRvIHJlZmVyZW5jZSB0aGUgZGVsaXZlcnkgd2hlbiBleGNoYW5naW5nIGluZm9ybWF0aW9uIGFib3V0IGl0IHdpdGggb3RoZXIgc3lzdGVtcy5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcjogZmhpci5JZGVudGlmaWVyW107XHJcbiAgLyoqXHJcbiAgICogQSBwbGFuLCBwcm9wb3NhbCBvciBvcmRlciB0aGF0IGlzIGZ1bGZpbGxlZCBpbiB3aG9sZSBvciBpbiBwYXJ0IGJ5IHRoaXMgZXZlbnQuXHJcbiAgICovXHJcbiAgcHVibGljIGJhc2VkT246IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogTm90IHRvIGJlIHVzZWQgdG8gbGluayBhbiBldmVudCB0byBhbiBFbmNvdW50ZXIgLSB1c2UgRXZlbnQuY29udGV4dCBmb3IgdGhhdC5cclxuICAgKiBbVGhlIGFsbG93ZWQgcmVmZXJlbmNlIHJlc291cmNlcyBtYXkgYmUgYWRqdXN0ZWQgYXMgYXBwcm9wcmlhdGUgZm9yIHRoZSBldmVudCByZXNvdXJjZV0uXHJcbiAgICovXHJcbiAgcHVibGljIHBhcnRPZjogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIGJlY2F1c2UgdGhlIHN0YXR1cyBjb250YWlucyBjb2RlcyB0aGF0IG1hcmsgdGhlIHJlc291cmNlIGFzIG5vdCBjdXJyZW50bHkgdmFsaWQuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1cz86IGZoaXIuRmhpckNvZGU8U3VwcGx5ZGVsaXZlcnlTdGF0dXNDb2RlVHlwZT58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgbGluayB0byBhIHJlc291cmNlIHJlcHJlc2VudGluZyB0aGUgcGVyc29uIHdob20gdGhlIGRlbGl2ZXJlZCBpdGVtIGlzIGZvci5cclxuICAgKi9cclxuICBwdWJsaWMgcGF0aWVudD86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgdGhlIHR5cGUgb2YgZGlzcGVuc2luZyBldmVudCB0aGF0IGlzIHBlcmZvcm1lZC4gRXhhbXBsZXMgaW5jbHVkZTogVHJpYWwgRmlsbCwgQ29tcGxldGlvbiBvZiBUcmlhbCwgUGFydGlhbCBGaWxsLCBFbWVyZ2VuY3kgRmlsbCwgU2FtcGxlcywgZXRjLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0eXBlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpdGVtIHRoYXQgaXMgYmVpbmcgZGVsaXZlcmVkIG9yIGhhcyBiZWVuIHN1cHBsaWVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdXBwbGllZEl0ZW0/OiBmaGlyLlN1cHBseURlbGl2ZXJ5U3VwcGxpZWRJdGVtfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBbVGhlIGxpc3Qgb2YgdHlwZXMgbWF5IGJlIGNvbnN0cmFpbmVkIGFzIGFwcHJvcHJpYXRlIGZvciB0aGUgdHlwZSBvZiBldmVudF0uXHJcbiAgICovXHJcbiAgcHVibGljIG9jY3VycmVuY2U/OiAoZmhpci5GaGlyRGF0ZVRpbWV8Zmhpci5QZXJpb2R8Zmhpci5UaW1pbmcpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IFN1cHBseURlbGl2ZXJ5Lm9jY3VycmVuY2VbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfb2NjdXJyZW5jZUlzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpbmRpdmlkdWFsIHJlc3BvbnNpYmxlIGZvciBkaXNwZW5zaW5nIHRoZSBtZWRpY2F0aW9uLCBzdXBwbGllciBvciBkZXZpY2UuXHJcbiAgICovXHJcbiAgcHVibGljIHN1cHBsaWVyPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpY2F0aW9uIG9mIHRoZSBmYWNpbGl0eS9sb2NhdGlvbiB3aGVyZSB0aGUgU3VwcGx5IHdhcyBzaGlwcGVkIHRvLCBhcyBwYXJ0IG9mIHRoZSBkaXNwZW5zZSBldmVudC5cclxuICAgKi9cclxuICBwdWJsaWMgZGVzdGluYXRpb24/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgcGVyc29uIHdobyBwaWNrZWQgdXAgdGhlIFN1cHBseS5cclxuICAgKi9cclxuICBwdWJsaWMgcmVjZWl2ZXI6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgU3VwcGx5RGVsaXZlcnkgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxTdXBwbHlEZWxpdmVyeUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdTdXBwbHlEZWxpdmVyeSc7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gc291cmNlLmlkZW50aWZpZXIubWFwKCh4KSA9PiBuZXcgZmhpci5JZGVudGlmaWVyKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaWRlbnRpZmllciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydiYXNlZE9uJ10pIHsgdGhpcy5iYXNlZE9uID0gc291cmNlLmJhc2VkT24ubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5iYXNlZE9uID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3BhcnRPZiddKSB7IHRoaXMucGFydE9mID0gc291cmNlLnBhcnRPZi5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnBhcnRPZiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydzdGF0dXMnXSkgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPFN1cHBseWRlbGl2ZXJ5U3RhdHVzQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnN0YXR1c30pOyB9XHJcbiAgICBpZiAoc291cmNlWydwYXRpZW50J10pIHsgdGhpcy5wYXRpZW50ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5wYXRpZW50KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndHlwZSddKSB7IHRoaXMudHlwZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UudHlwZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N1cHBsaWVkSXRlbSddKSB7IHRoaXMuc3VwcGxpZWRJdGVtID0gbmV3IGZoaXIuU3VwcGx5RGVsaXZlcnlTdXBwbGllZEl0ZW0oc291cmNlLnN1cHBsaWVkSXRlbSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ29jY3VycmVuY2UnXSkgeyB0aGlzLm9jY3VycmVuY2UgPSBzb3VyY2Uub2NjdXJyZW5jZTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydvY2N1cnJlbmNlRGF0ZVRpbWUnXSkgeyB0aGlzLm9jY3VycmVuY2UgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2Uub2NjdXJyZW5jZURhdGVUaW1lfSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnb2NjdXJyZW5jZVBlcmlvZCddKSB7IHRoaXMub2NjdXJyZW5jZSA9IG5ldyBmaGlyLlBlcmlvZChzb3VyY2Uub2NjdXJyZW5jZVBlcmlvZCk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnb2NjdXJyZW5jZVRpbWluZyddKSB7IHRoaXMub2NjdXJyZW5jZSA9IG5ldyBmaGlyLlRpbWluZyhzb3VyY2Uub2NjdXJyZW5jZVRpbWluZyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N1cHBsaWVyJ10pIHsgdGhpcy5zdXBwbGllciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2Uuc3VwcGxpZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWydkZXN0aW5hdGlvbiddKSB7IHRoaXMuZGVzdGluYXRpb24gPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmRlc3RpbmF0aW9uKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVjZWl2ZXInXSkgeyB0aGlzLnJlY2VpdmVyID0gc291cmNlLnJlY2VpdmVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVjZWl2ZXIgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIHN0YXR1cyAoU3VwcGx5RGVsaXZlcnkuc3RhdHVzKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IHN0YXR1c1JlcXVpcmVkQ29kZXMoKSB7XHJcbiAgICByZXR1cm4gU3VwcGx5ZGVsaXZlcnlTdGF0dXNDb2RlcztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZWQtYm91bmQgVmFsdWUgU2V0IGZvciB0eXBlIChTdXBwbHlEZWxpdmVyeS50eXBlKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IHR5cGVSZXF1aXJlZENvZGVzKCkge1xyXG4gICAgcmV0dXJuIFN1cHBseWRlbGl2ZXJ5VHlwZUNvZGVzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKCF0aGlzWydyZXNvdXJjZVR5cGUnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgcmVzb3VyY2VUeXBlOlwiU3VwcGx5RGVsaXZlcnlcIiBmaGlyOiBTdXBwbHlEZWxpdmVyeS5yZXNvdXJjZVR5cGU6XCJTdXBwbHlEZWxpdmVyeVwiJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiaWRlbnRpZmllclwiXSkgeyB0aGlzLmlkZW50aWZpZXIuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImJhc2VkT25cIl0pIHsgdGhpcy5iYXNlZE9uLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJwYXJ0T2ZcIl0pIHsgdGhpcy5wYXJ0T2YuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1snc3RhdHVzJ10gJiYgKCFPYmplY3QudmFsdWVzKFN1cHBseWRlbGl2ZXJ5U3RhdHVzQ29kZXMpLmluY2x1ZGVzKHRoaXMuc3RhdHVzIGFzIGFueSkpKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdjb2RlLWludmFsaWQnLCBkaWFnbm9zdGljczogJ0ludmFsaWQgY29kZSBwcm9wZXJ0eSBzdGF0dXM/OmZoaXIuRmhpckNvZGU8U3VwcGx5ZGVsaXZlcnlTdGF0dXNDb2RlVHlwZT4gZmhpcjogU3VwcGx5RGVsaXZlcnkuc3RhdHVzOmNvZGUgUmVxdWlyZWQgYmluZGluZyB0bzogU3VwcGx5ZGVsaXZlcnlTdGF0dXMnIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJzdGF0dXNcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5zdGF0dXMuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wicGF0aWVudFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnBhdGllbnQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzWyd0eXBlJ10gJiYgKCFPYmplY3QudmFsdWVzKFN1cHBseWRlbGl2ZXJ5VHlwZUNvZGVzKS5pbmNsdWRlcyh0aGlzLnR5cGUgYXMgYW55KSkpIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ2NvZGUtaW52YWxpZCcsIGRpYWdub3N0aWNzOiAnSW52YWxpZCBjb2RlIHByb3BlcnR5IHR5cGU/OmZoaXIuQ29kZWFibGVDb25jZXB0IGZoaXI6IFN1cHBseURlbGl2ZXJ5LnR5cGU6Q29kZWFibGVDb25jZXB0IFJlcXVpcmVkIGJpbmRpbmcgdG86IFN1cHBseWRlbGl2ZXJ5VHlwZScgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInR5cGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy50eXBlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInN1cHBsaWVkSXRlbVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnN1cHBsaWVkSXRlbS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJzdXBwbGllclwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnN1cHBsaWVyLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImRlc3RpbmF0aW9uXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZGVzdGluYXRpb24uZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wicmVjZWl2ZXJcIl0pIHsgdGhpcy5yZWNlaXZlci5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbiJdfQ==