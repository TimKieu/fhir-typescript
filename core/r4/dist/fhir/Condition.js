// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: Condition
import * as fhir from '../fhir.js';
// @ts-ignore
import { ConditionClinicalVsValidation } from '../fhirValueSets/ConditionClinicalVsValidation.js';
// @ts-ignore
import { ConditionVerStatusVsValidation } from '../fhirValueSets/ConditionVerStatusVsValidation.js';
/**
 * Clinical stage or grade of a condition. May include formal severity assessments.
 */
export class ConditionStage extends fhir.BackboneElement {
    /**
     * Default constructor for ConditionStage - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['summary']) {
            this.summary = new fhir.CodeableConcept(source.summary, options);
        }
        if (source['assessment']) {
            this.assessment = source.assessment.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.assessment = [];
        }
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type, options);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Condition.stage';
        }
        iss.push(...this.vOS('summary', exp));
        iss.push(...this.vOA('assessment', exp));
        iss.push(...this.vOS('type', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ConditionStage._fts_dataType = 'ConditionStage';
/**
 * The evidence may be a simple list of coded symptoms/manifestations, or references to observations or formal assessments, or both.
 */
export class ConditionEvidence extends fhir.BackboneElement {
    /**
     * Default constructor for ConditionEvidence - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = source.code.map((x) => new fhir.CodeableConcept(x, options));
        }
        else {
            this.code = [];
        }
        if (source['detail']) {
            this.detail = source.detail.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.detail = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Condition.evidence';
        }
        iss.push(...this.vOA('code', exp));
        iss.push(...this.vOA('detail', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ConditionEvidence._fts_dataType = 'ConditionEvidence';
/**
 * A clinical condition, problem, diagnosis, or other event, situation, issue, or clinical concept that has risen to a level of concern.
 */
export class Condition extends fhir.DomainResource {
    /**
     * Default constructor for Condition - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'Condition';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x, options));
        }
        else {
            this.identifier = [];
        }
        if (source['clinicalStatus']) {
            this.clinicalStatus = new fhir.CodeableConcept(source.clinicalStatus, options);
        }
        if (source['verificationStatus']) {
            this.verificationStatus = new fhir.CodeableConcept(source.verificationStatus, options);
        }
        if (source['category']) {
            this.category = source.category.map((x) => new fhir.CodeableConcept(x, options));
        }
        else {
            this.category = [];
        }
        if (source['severity']) {
            this.severity = new fhir.CodeableConcept(source.severity, options);
        }
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code, options);
        }
        if (source['bodySite']) {
            this.bodySite = source.bodySite.map((x) => new fhir.CodeableConcept(x, options));
        }
        else {
            this.bodySite = [];
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject, options);
        }
        else {
            this.subject = null;
        }
        if (source['encounter']) {
            this.encounter = new fhir.Reference(source.encounter, options);
        }
        if (source['onset']) {
            this.onset = source.onset;
        }
        else if (source['onsetDateTime'] !== undefined) {
            this.onset = new fhir.FhirDateTime({ value: source.onsetDateTime }, options);
        }
        else if (source['onsetAge']) {
            this.onset = new fhir.Age(source.onsetAge, options);
        }
        else if (source['onsetPeriod']) {
            this.onset = new fhir.Period(source.onsetPeriod, options);
        }
        else if (source['onsetRange']) {
            this.onset = new fhir.Range(source.onsetRange, options);
        }
        else if (source['onsetString'] !== undefined) {
            this.onset = new fhir.FhirString({ value: source.onsetString }, options);
        }
        if (source['abatement']) {
            this.abatement = source.abatement;
        }
        else if (source['abatementDateTime'] !== undefined) {
            this.abatement = new fhir.FhirDateTime({ value: source.abatementDateTime }, options);
        }
        else if (source['abatementAge']) {
            this.abatement = new fhir.Age(source.abatementAge, options);
        }
        else if (source['abatementPeriod']) {
            this.abatement = new fhir.Period(source.abatementPeriod, options);
        }
        else if (source['abatementRange']) {
            this.abatement = new fhir.Range(source.abatementRange, options);
        }
        else if (source['abatementString'] !== undefined) {
            this.abatement = new fhir.FhirString({ value: source.abatementString }, options);
        }
        if (source['recordedDate'] !== undefined) {
            this.recordedDate = new fhir.FhirDateTime({ value: source.recordedDate }, options);
        }
        if (source['_recordedDate']) {
            if (this.recordedDate) {
                this.recordedDate.addExtendedProperties(source._recordedDate);
            }
            else {
                this.recordedDate = new fhir.FhirDateTime(source._recordedDate, options);
            }
        }
        if (source['recorder']) {
            this.recorder = new fhir.Reference(source.recorder, options);
        }
        if (source['asserter']) {
            this.asserter = new fhir.Reference(source.asserter, options);
        }
        if (source['stage']) {
            this.stage = source.stage.map((x) => new fhir.ConditionStage(x, options));
        }
        else {
            this.stage = [];
        }
        if (source['evidence']) {
            this.evidence = source.evidence.map((x) => new fhir.ConditionEvidence(x, options));
        }
        else {
            this.evidence = [];
        }
        if (source['note']) {
            this.note = source.note.map((x) => new fhir.Annotation(x, options));
        }
        else {
            this.note = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Condition';
        }
        iss.push(...this.vOA('identifier', exp));
        iss.push(...this.vOSV('clinicalStatus', exp, 'ConditionClinical', ConditionClinicalVsValidation, 'r'));
        iss.push(...this.vOSV('verificationStatus', exp, 'ConditionVerStatus', ConditionVerStatusVsValidation, 'r'));
        iss.push(...this.vOA('category', exp));
        iss.push(...this.vOS('severity', exp));
        iss.push(...this.vOS('code', exp));
        iss.push(...this.vOA('bodySite', exp));
        iss.push(...this.vRS('subject', exp));
        iss.push(...this.vOS('encounter', exp));
        iss.push(...this.vOS('onset', exp));
        iss.push(...this.vOS('abatement', exp));
        iss.push(...this.vOS('recordedDate', exp));
        iss.push(...this.vOS('recorder', exp));
        iss.push(...this.vOS('asserter', exp));
        iss.push(...this.vOA('stage', exp));
        iss.push(...this.vOA('evidence', exp));
        iss.push(...this.vOA('note', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
Condition._fts_dataType = 'Condition';
/**
 * Internal flag to properly serialize choice-type element Condition.onset[x]
 */
Condition._fts_onsetIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element Condition.abatement[x]
 */
Condition._fts_abatementIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29uZGl0aW9uLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9Db25kaXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsMkJBQTJCO0FBRTNCLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBZ0JuQyxhQUFhO0FBQ2IsT0FBTyxFQUFFLDZCQUE2QixFQUFFLE1BQU0sbURBQW1ELENBQUM7QUFHbEcsYUFBYTtBQUNiLE9BQU8sRUFBRSw4QkFBOEIsRUFBRSxNQUFNLG9EQUFvRCxDQUFDO0FBbUNwRzs7R0FFRztBQUNILE1BQU0sT0FBTyxjQUFlLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFpQnREOztPQUVHO0lBQ0gsWUFBWSxTQUFxQyxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUMzRixLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztTQUFFO1FBQzVGLElBQUksTUFBTSxDQUFDLFlBQVksQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDeEc7WUFBRSxJQUFJLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQztTQUFFO1FBQzlCLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLElB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LEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUMxQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN0QyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN0QyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNuQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN0QyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNsQyxPQUFPLEdBQUcsQ0FBQztJQUNiLENBQUM7O0FBMUpEOztHQUVHO0FBQzZCLHVCQUFhLEdBQVUsV0FBVyxDQUFDO0FBOENuRTs7R0FFRztBQUN1Qiw0QkFBa0IsR0FBUSxJQUFJLENBQUM7QUFLekQ7O0dBRUc7QUFDdUIsZ0NBQXNCLEdBQVEsSUFBSSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0LmNvcmUgdmVyc2lvbjogNC4wLjFcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBDb25kaXRpb25cclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbmRpdGlvblN0YWdlQ29kZXMsICBDb25kaXRpb25TdGFnZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db25kaXRpb25TdGFnZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDb25kaXRpb25TdGFnZVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uZGl0aW9uU3RhZ2VWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbmRpdGlvblN0YWdlVHlwZUNvZGVzLCAgQ29uZGl0aW9uU3RhZ2VUeXBlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbmRpdGlvblN0YWdlVHlwZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDb25kaXRpb25TdGFnZVR5cGVWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbmRpdGlvblN0YWdlVHlwZVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTWFuaWZlc3RhdGlvbk9yU3ltcHRvbUNvZGVzLCAgTWFuaWZlc3RhdGlvbk9yU3ltcHRvbUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9NYW5pZmVzdGF0aW9uT3JTeW1wdG9tQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE1hbmlmZXN0YXRpb25PclN5bXB0b21Wc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL01hbmlmZXN0YXRpb25PclN5bXB0b21Wc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbmRpdGlvbkNsaW5pY2FsQ29kZXMsICBDb25kaXRpb25DbGluaWNhbENvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db25kaXRpb25DbGluaWNhbENvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDb25kaXRpb25DbGluaWNhbFZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uZGl0aW9uQ2xpbmljYWxWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbmRpdGlvblZlclN0YXR1c0NvZGVzLCAgQ29uZGl0aW9uVmVyU3RhdHVzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbmRpdGlvblZlclN0YXR1c0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDb25kaXRpb25WZXJTdGF0dXNWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbmRpdGlvblZlclN0YXR1c1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29uZGl0aW9uQ2F0ZWdvcnlDb2RlcywgIENvbmRpdGlvbkNhdGVnb3J5Q29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbmRpdGlvbkNhdGVnb3J5Q29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbmRpdGlvbkNhdGVnb3J5VnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db25kaXRpb25DYXRlZ29yeVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29uZGl0aW9uU2V2ZXJpdHlDb2RlcywgIENvbmRpdGlvblNldmVyaXR5Q29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbmRpdGlvblNldmVyaXR5Q29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbmRpdGlvblNldmVyaXR5VnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db25kaXRpb25TZXZlcml0eVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29uZGl0aW9uQ29kZXMsICBDb25kaXRpb25Db2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uZGl0aW9uQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbmRpdGlvblZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uZGl0aW9uVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBCb2R5U2l0ZUNvZGVzLCAgQm9keVNpdGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQm9keVNpdGVDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQm9keVNpdGVWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0JvZHlTaXRlVnNWYWxpZGF0aW9uLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIENvbmRpdGlvblN0YWdlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENvbmRpdGlvblN0YWdlQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogQSBzaW1wbGUgc3VtbWFyeSBvZiB0aGUgc3RhZ2Ugc3VjaCBhcyBcIlN0YWdlIDNcIi4gVGhlIGRldGVybWluYXRpb24gb2YgdGhlIHN0YWdlIGlzIGRpc2Vhc2Utc3BlY2lmaWMuXHJcbiAgICovXHJcbiAgc3VtbWFyeT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUmVmZXJlbmNlIHRvIGEgZm9ybWFsIHJlY29yZCBvZiB0aGUgZXZpZGVuY2Ugb24gd2hpY2ggdGhlIHN0YWdpbmcgYXNzZXNzbWVudCBpcyBiYXNlZC5cclxuICAgKi9cclxuICBhc3Nlc3NtZW50PzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBraW5kIG9mIHN0YWdpbmcsIHN1Y2ggYXMgcGF0aG9sb2dpY2FsIG9yIGNsaW5pY2FsIHN0YWdpbmcuXHJcbiAgICovXHJcbiAgdHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDbGluaWNhbCBzdGFnZSBvciBncmFkZSBvZiBhIGNvbmRpdGlvbi4gTWF5IGluY2x1ZGUgZm9ybWFsIHNldmVyaXR5IGFzc2Vzc21lbnRzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENvbmRpdGlvblN0YWdlIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQ29uZGl0aW9uU3RhZ2UnO1xyXG4gIC8qKlxyXG4gICAqIEEgc2ltcGxlIHN1bW1hcnkgb2YgdGhlIHN0YWdlIHN1Y2ggYXMgXCJTdGFnZSAzXCIuIFRoZSBkZXRlcm1pbmF0aW9uIG9mIHRoZSBzdGFnZSBpcyBkaXNlYXNlLXNwZWNpZmljLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdW1tYXJ5PzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFJlZmVyZW5jZSB0byBhIGZvcm1hbCByZWNvcmQgb2YgdGhlIGV2aWRlbmNlIG9uIHdoaWNoIHRoZSBzdGFnaW5nIGFzc2Vzc21lbnQgaXMgYmFzZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGFzc2Vzc21lbnQ6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogVGhlIGtpbmQgb2Ygc3RhZ2luZywgc3VjaCBhcyBwYXRob2xvZ2ljYWwgb3IgY2xpbmljYWwgc3RhZ2luZy5cclxuICAgKi9cclxuICBwdWJsaWMgdHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBDb25kaXRpb25TdGFnZSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENvbmRpdGlvblN0YWdlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3N1bW1hcnknXSkgeyB0aGlzLnN1bW1hcnkgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnN1bW1hcnksIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydhc3Nlc3NtZW50J10pIHsgdGhpcy5hc3Nlc3NtZW50ID0gc291cmNlLmFzc2Vzc21lbnQubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5hc3Nlc3NtZW50ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3R5cGUnXSkgeyB0aGlzLnR5cGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnR5cGUsIG9wdGlvbnMpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnQ29uZGl0aW9uLnN0YWdlJyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnc3VtbWFyeScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnYXNzZXNzbWVudCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygndHlwZScsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQ29uZGl0aW9uRXZpZGVuY2UgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29uZGl0aW9uRXZpZGVuY2VBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBBIG1hbmlmZXN0YXRpb24gb3Igc3ltcHRvbSB0aGF0IGxlZCB0byB0aGUgcmVjb3JkaW5nIG9mIHRoaXMgY29uZGl0aW9uLlxyXG4gICAqL1xyXG4gIGNvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTGlua3MgdG8gb3RoZXIgcmVsZXZhbnQgaW5mb3JtYXRpb24sIGluY2x1ZGluZyBwYXRob2xvZ3kgcmVwb3J0cy5cclxuICAgKi9cclxuICBkZXRhaWw/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgZXZpZGVuY2UgbWF5IGJlIGEgc2ltcGxlIGxpc3Qgb2YgY29kZWQgc3ltcHRvbXMvbWFuaWZlc3RhdGlvbnMsIG9yIHJlZmVyZW5jZXMgdG8gb2JzZXJ2YXRpb25zIG9yIGZvcm1hbCBhc3Nlc3NtZW50cywgb3IgYm90aC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb25kaXRpb25FdmlkZW5jZSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0NvbmRpdGlvbkV2aWRlbmNlJztcclxuICAvKipcclxuICAgKiBBIG1hbmlmZXN0YXRpb24gb3Igc3ltcHRvbSB0aGF0IGxlZCB0byB0aGUgcmVjb3JkaW5nIG9mIHRoaXMgY29uZGl0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb2RlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIExpbmtzIHRvIG90aGVyIHJlbGV2YW50IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgcGF0aG9sb2d5IHJlcG9ydHMuXHJcbiAgICovXHJcbiAgcHVibGljIGRldGFpbDogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBDb25kaXRpb25FdmlkZW5jZSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENvbmRpdGlvbkV2aWRlbmNlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2NvZGUnXSkgeyB0aGlzLmNvZGUgPSBzb3VyY2UuY29kZS5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvZGUgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGV0YWlsJ10pIHsgdGhpcy5kZXRhaWwgPSBzb3VyY2UuZGV0YWlsLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZGV0YWlsID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdDb25kaXRpb24uZXZpZGVuY2UnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdjb2RlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdkZXRhaWwnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIENvbmRpdGlvbiB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBDb25kaXRpb25BcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJDb25kaXRpb25cInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBhIGJ1c2luZXNzIGlkZW50aWZpZXIsIG5vdCBhIHJlc291cmNlIGlkZW50aWZpZXIgKHNlZSBbZGlzY3Vzc2lvbl0ocmVzb3VyY2UuaHRtbCNpZGVudGlmaWVycykpLiAgSXQgaXMgYmVzdCBwcmFjdGljZSBmb3IgdGhlIGlkZW50aWZpZXIgdG8gb25seSBhcHBlYXIgb24gYSBzaW5nbGUgcmVzb3VyY2UgaW5zdGFuY2UsIGhvd2V2ZXIgYnVzaW5lc3MgcHJhY3RpY2VzIG1heSBvY2Nhc2lvbmFsbHkgZGljdGF0ZSB0aGF0IG11bHRpcGxlIHJlc291cmNlIGluc3RhbmNlcyB3aXRoIHRoZSBzYW1lIGlkZW50aWZpZXIgY2FuIGV4aXN0IC0gcG9zc2libHkgZXZlbiB3aXRoIGRpZmZlcmVudCByZXNvdXJjZSB0eXBlcy4gIEZvciBleGFtcGxlLCBtdWx0aXBsZSBQYXRpZW50IGFuZCBhIFBlcnNvbiByZXNvdXJjZSBpbnN0YW5jZSBtaWdodCBzaGFyZSB0aGUgc2FtZSBzb2NpYWwgaW5zdXJhbmNlIG51bWJlci5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0YSB0eXBlIGlzIENvZGVhYmxlQ29uY2VwdCBiZWNhdXNlIGNsaW5pY2FsU3RhdHVzIGhhcyBzb21lIGNsaW5pY2FsIGp1ZGdtZW50IGludm9sdmVkLCBzdWNoIHRoYXQgdGhlcmUgbWlnaHQgbmVlZCB0byBiZSBtb3JlIHNwZWNpZmljaXR5IHRoYW4gdGhlIHJlcXVpcmVkIEZISVIgdmFsdWUgc2V0IGFsbG93cy4gRm9yIGV4YW1wbGUsIGEgU05PTUVEIGNvZGluZyBtaWdodCBhbGxvdyBmb3IgYWRkaXRpb25hbCBzcGVjaWZpY2l0eS5cclxuICAgKi9cclxuICBjbGluaWNhbFN0YXR1cz86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogdmVyaWZpY2F0aW9uU3RhdHVzIGlzIG5vdCByZXF1aXJlZC4gIEZvciBleGFtcGxlLCB3aGVuIGEgcGF0aWVudCBoYXMgYWJkb21pbmFsIHBhaW4gaW4gdGhlIEVELCB0aGVyZSBpcyBub3QgbGlrZWx5IGdvaW5nIHRvIGJlIGEgdmVyaWZpY2F0aW9uIHN0YXR1cy5cclxuICAgKiBUaGUgZGF0YSB0eXBlIGlzIENvZGVhYmxlQ29uY2VwdCBiZWNhdXNlIHZlcmlmaWNhdGlvblN0YXR1cyBoYXMgc29tZSBjbGluaWNhbCBqdWRnbWVudCBpbnZvbHZlZCwgc3VjaCB0aGF0IHRoZXJlIG1pZ2h0IG5lZWQgdG8gYmUgbW9yZSBzcGVjaWZpY2l0eSB0aGFuIHRoZSByZXF1aXJlZCBGSElSIHZhbHVlIHNldCBhbGxvd3MuIEZvciBleGFtcGxlLCBhIFNOT01FRCBjb2RpbmcgbWlnaHQgYWxsb3cgZm9yIGFkZGl0aW9uYWwgc3BlY2lmaWNpdHkuXHJcbiAgICovXHJcbiAgdmVyaWZpY2F0aW9uU3RhdHVzPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgY2F0ZWdvcml6YXRpb24gaXMgb2Z0ZW4gaGlnaGx5IGNvbnRleHR1YWwgYW5kIG1heSBhcHBlYXIgcG9vcmx5IGRpZmZlcmVudGlhdGVkIG9yIG5vdCB2ZXJ5IHVzZWZ1bCBpbiBvdGhlciBjb250ZXh0cy5cclxuICAgKi9cclxuICBjYXRlZ29yeT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDb2Rpbmcgb2YgdGhlIHNldmVyaXR5IHdpdGggYSB0ZXJtaW5vbG9neSBpcyBwcmVmZXJyZWQsIHdoZXJlIHBvc3NpYmxlLlxyXG4gICAqL1xyXG4gIHNldmVyaXR5PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWNhdGlvbiBvZiB0aGUgY29uZGl0aW9uLCBwcm9ibGVtIG9yIGRpYWdub3Npcy5cclxuICAgKi9cclxuICBjb2RlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBPbmx5IHVzZWQgaWYgbm90IGltcGxpY2l0IGluIGNvZGUgZm91bmQgaW4gQ29uZGl0aW9uLmNvZGUuIElmIHRoZSB1c2UgY2FzZSByZXF1aXJlcyBhdHRyaWJ1dGVzIGZyb20gdGhlIEJvZHlTaXRlIHJlc291cmNlIChlLmcuIHRvIGlkZW50aWZ5IGFuZCB0cmFjayBzZXBhcmF0ZWx5KSB0aGVuIHVzZSB0aGUgc3RhbmRhcmQgZXh0ZW5zaW9uIFtib2R5U2l0ZV0oZXh0ZW5zaW9uLWJvZHlzaXRlLmh0bWwpLiAgTWF5IGJlIGEgc3VtbWFyeSBjb2RlLCBvciBhIHJlZmVyZW5jZSB0byBhIHZlcnkgcHJlY2lzZSBkZWZpbml0aW9uIG9mIHRoZSBsb2NhdGlvbiwgb3IgYm90aC5cclxuICAgKi9cclxuICBib2R5U2l0ZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgdGhlIHBhdGllbnQgb3IgZ3JvdXAgd2hvIHRoZSBjb25kaXRpb24gcmVjb3JkIGlzIGFzc29jaWF0ZWQgd2l0aC5cclxuICAgKi9cclxuICBzdWJqZWN0OiBmaGlyLlJlZmVyZW5jZUFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGlzIHdpbGwgdHlwaWNhbGx5IGJlIHRoZSBlbmNvdW50ZXIgdGhlIGV2ZW50IG9jY3VycmVkIHdpdGhpbiwgYnV0IHNvbWUgYWN0aXZpdGllcyBtYXkgYmUgaW5pdGlhdGVkIHByaW9yIHRvIG9yIGFmdGVyIHRoZSBvZmZpY2lhbCBjb21wbGV0aW9uIG9mIGFuIGVuY291bnRlciBidXQgc3RpbGwgYmUgdGllZCB0byB0aGUgY29udGV4dCBvZiB0aGUgZW5jb3VudGVyLiBUaGlzIHJlY29yZCBpbmRpY2F0ZXMgdGhlIGVuY291bnRlciB0aGlzIHBhcnRpY3VsYXIgcmVjb3JkIGlzIGFzc29jaWF0ZWQgd2l0aC4gIEluIHRoZSBjYXNlIG9mIGEgXCJuZXdcIiBkaWFnbm9zaXMgcmVmbGVjdGluZyBvbmdvaW5nL3JldmlzZWQgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGNvbmRpdGlvbiwgdGhpcyBtaWdodCBiZSBkaXN0aW5jdCBmcm9tIHRoZSBmaXJzdCBlbmNvdW50ZXIgaW4gd2hpY2ggdGhlIHVuZGVybHlpbmcgY29uZGl0aW9uIHdhcyBmaXJzdCBcImtub3duXCIuXHJcbiAgICovXHJcbiAgZW5jb3VudGVyPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBZ2UgaXMgZ2VuZXJhbGx5IHVzZWQgd2hlbiB0aGUgcGF0aWVudCByZXBvcnRzIGFuIGFnZSBhdCB3aGljaCB0aGUgQ29uZGl0aW9uIGJlZ2FuIHRvIG9jY3VyLlxyXG4gICAqL1xyXG4gIG9uc2V0PzogZmhpci5GaGlyRGF0ZVRpbWV8Zmhpci5BZ2V8Zmhpci5QZXJpb2R8Zmhpci5SYW5nZXxmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFnZSBpcyBnZW5lcmFsbHkgdXNlZCB3aGVuIHRoZSBwYXRpZW50IHJlcG9ydHMgYW4gYWdlIGF0IHdoaWNoIHRoZSBDb25kaXRpb24gYmVnYW4gdG8gb2NjdXIuXHJcbiAgICovXHJcbiAgb25zZXREYXRlVGltZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWdlIGlzIGdlbmVyYWxseSB1c2VkIHdoZW4gdGhlIHBhdGllbnQgcmVwb3J0cyBhbiBhZ2UgYXQgd2hpY2ggdGhlIENvbmRpdGlvbiBiZWdhbiB0byBvY2N1ci5cclxuICAgKi9cclxuICBvbnNldEFnZT86IGZoaXIuQWdlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWdlIGlzIGdlbmVyYWxseSB1c2VkIHdoZW4gdGhlIHBhdGllbnQgcmVwb3J0cyBhbiBhZ2UgYXQgd2hpY2ggdGhlIENvbmRpdGlvbiBiZWdhbiB0byBvY2N1ci5cclxuICAgKi9cclxuICBvbnNldFBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWdlIGlzIGdlbmVyYWxseSB1c2VkIHdoZW4gdGhlIHBhdGllbnQgcmVwb3J0cyBhbiBhZ2UgYXQgd2hpY2ggdGhlIENvbmRpdGlvbiBiZWdhbiB0byBvY2N1ci5cclxuICAgKi9cclxuICBvbnNldFJhbmdlPzogZmhpci5SYW5nZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFnZSBpcyBnZW5lcmFsbHkgdXNlZCB3aGVuIHRoZSBwYXRpZW50IHJlcG9ydHMgYW4gYWdlIGF0IHdoaWNoIHRoZSBDb25kaXRpb24gYmVnYW4gdG8gb2NjdXIuXHJcbiAgICovXHJcbiAgb25zZXRTdHJpbmc/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGVyZSBpcyBubyBleHBsaWNpdCBkaXN0aW5jdGlvbiBiZXR3ZWVuIHJlc29sdXRpb24gYW5kIHJlbWlzc2lvbiBiZWNhdXNlIGluIG1hbnkgY2FzZXMgdGhlIGRpc3RpbmN0aW9uIGlzIG5vdCBjbGVhci4gQWdlIGlzIGdlbmVyYWxseSB1c2VkIHdoZW4gdGhlIHBhdGllbnQgcmVwb3J0cyBhbiBhZ2UgYXQgd2hpY2ggdGhlIENvbmRpdGlvbiBhYmF0ZWQuICBJZiB0aGVyZSBpcyBubyBhYmF0ZW1lbnQgZWxlbWVudCwgaXQgaXMgdW5rbm93biB3aGV0aGVyIHRoZSBjb25kaXRpb24gaGFzIHJlc29sdmVkIG9yIGVudGVyZWQgcmVtaXNzaW9uOyBhcHBsaWNhdGlvbnMgYW5kIHVzZXJzIHNob3VsZCBnZW5lcmFsbHkgYXNzdW1lIHRoYXQgdGhlIGNvbmRpdGlvbiBpcyBzdGlsbCB2YWxpZC4gIFdoZW4gYWJhdGVtZW50U3RyaW5nIGV4aXN0cywgaXQgaW1wbGllcyB0aGUgY29uZGl0aW9uIGlzIGFiYXRlZC5cclxuICAgKi9cclxuICBhYmF0ZW1lbnQ/OiBmaGlyLkZoaXJEYXRlVGltZXxmaGlyLkFnZXxmaGlyLlBlcmlvZHxmaGlyLlJhbmdlfGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlcmUgaXMgbm8gZXhwbGljaXQgZGlzdGluY3Rpb24gYmV0d2VlbiByZXNvbHV0aW9uIGFuZCByZW1pc3Npb24gYmVjYXVzZSBpbiBtYW55IGNhc2VzIHRoZSBkaXN0aW5jdGlvbiBpcyBub3QgY2xlYXIuIEFnZSBpcyBnZW5lcmFsbHkgdXNlZCB3aGVuIHRoZSBwYXRpZW50IHJlcG9ydHMgYW4gYWdlIGF0IHdoaWNoIHRoZSBDb25kaXRpb24gYWJhdGVkLiAgSWYgdGhlcmUgaXMgbm8gYWJhdGVtZW50IGVsZW1lbnQsIGl0IGlzIHVua25vd24gd2hldGhlciB0aGUgY29uZGl0aW9uIGhhcyByZXNvbHZlZCBvciBlbnRlcmVkIHJlbWlzc2lvbjsgYXBwbGljYXRpb25zIGFuZCB1c2VycyBzaG91bGQgZ2VuZXJhbGx5IGFzc3VtZSB0aGF0IHRoZSBjb25kaXRpb24gaXMgc3RpbGwgdmFsaWQuICBXaGVuIGFiYXRlbWVudFN0cmluZyBleGlzdHMsIGl0IGltcGxpZXMgdGhlIGNvbmRpdGlvbiBpcyBhYmF0ZWQuXHJcbiAgICovXHJcbiAgYWJhdGVtZW50RGF0ZVRpbWU/OiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZXJlIGlzIG5vIGV4cGxpY2l0IGRpc3RpbmN0aW9uIGJldHdlZW4gcmVzb2x1dGlvbiBhbmQgcmVtaXNzaW9uIGJlY2F1c2UgaW4gbWFueSBjYXNlcyB0aGUgZGlzdGluY3Rpb24gaXMgbm90IGNsZWFyLiBBZ2UgaXMgZ2VuZXJhbGx5IHVzZWQgd2hlbiB0aGUgcGF0aWVudCByZXBvcnRzIGFuIGFnZSBhdCB3aGljaCB0aGUgQ29uZGl0aW9uIGFiYXRlZC4gIElmIHRoZXJlIGlzIG5vIGFiYXRlbWVudCBlbGVtZW50LCBpdCBpcyB1bmtub3duIHdoZXRoZXIgdGhlIGNvbmRpdGlvbiBoYXMgcmVzb2x2ZWQgb3IgZW50ZXJlZCByZW1pc3Npb247IGFwcGxpY2F0aW9ucyBhbmQgdXNlcnMgc2hvdWxkIGdlbmVyYWxseSBhc3N1bWUgdGhhdCB0aGUgY29uZGl0aW9uIGlzIHN0aWxsIHZhbGlkLiAgV2hlbiBhYmF0ZW1lbnRTdHJpbmcgZXhpc3RzLCBpdCBpbXBsaWVzIHRoZSBjb25kaXRpb24gaXMgYWJhdGVkLlxyXG4gICAqL1xyXG4gIGFiYXRlbWVudEFnZT86IGZoaXIuQWdlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlcmUgaXMgbm8gZXhwbGljaXQgZGlzdGluY3Rpb24gYmV0d2VlbiByZXNvbHV0aW9uIGFuZCByZW1pc3Npb24gYmVjYXVzZSBpbiBtYW55IGNhc2VzIHRoZSBkaXN0aW5jdGlvbiBpcyBub3QgY2xlYXIuIEFnZSBpcyBnZW5lcmFsbHkgdXNlZCB3aGVuIHRoZSBwYXRpZW50IHJlcG9ydHMgYW4gYWdlIGF0IHdoaWNoIHRoZSBDb25kaXRpb24gYWJhdGVkLiAgSWYgdGhlcmUgaXMgbm8gYWJhdGVtZW50IGVsZW1lbnQsIGl0IGlzIHVua25vd24gd2hldGhlciB0aGUgY29uZGl0aW9uIGhhcyByZXNvbHZlZCBvciBlbnRlcmVkIHJlbWlzc2lvbjsgYXBwbGljYXRpb25zIGFuZCB1c2VycyBzaG91bGQgZ2VuZXJhbGx5IGFzc3VtZSB0aGF0IHRoZSBjb25kaXRpb24gaXMgc3RpbGwgdmFsaWQuICBXaGVuIGFiYXRlbWVudFN0cmluZyBleGlzdHMsIGl0IGltcGxpZXMgdGhlIGNvbmRpdGlvbiBpcyBhYmF0ZWQuXHJcbiAgICovXHJcbiAgYWJhdGVtZW50UGVyaW9kPzogZmhpci5QZXJpb2RBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGVyZSBpcyBubyBleHBsaWNpdCBkaXN0aW5jdGlvbiBiZXR3ZWVuIHJlc29sdXRpb24gYW5kIHJlbWlzc2lvbiBiZWNhdXNlIGluIG1hbnkgY2FzZXMgdGhlIGRpc3RpbmN0aW9uIGlzIG5vdCBjbGVhci4gQWdlIGlzIGdlbmVyYWxseSB1c2VkIHdoZW4gdGhlIHBhdGllbnQgcmVwb3J0cyBhbiBhZ2UgYXQgd2hpY2ggdGhlIENvbmRpdGlvbiBhYmF0ZWQuICBJZiB0aGVyZSBpcyBubyBhYmF0ZW1lbnQgZWxlbWVudCwgaXQgaXMgdW5rbm93biB3aGV0aGVyIHRoZSBjb25kaXRpb24gaGFzIHJlc29sdmVkIG9yIGVudGVyZWQgcmVtaXNzaW9uOyBhcHBsaWNhdGlvbnMgYW5kIHVzZXJzIHNob3VsZCBnZW5lcmFsbHkgYXNzdW1lIHRoYXQgdGhlIGNvbmRpdGlvbiBpcyBzdGlsbCB2YWxpZC4gIFdoZW4gYWJhdGVtZW50U3RyaW5nIGV4aXN0cywgaXQgaW1wbGllcyB0aGUgY29uZGl0aW9uIGlzIGFiYXRlZC5cclxuICAgKi9cclxuICBhYmF0ZW1lbnRSYW5nZT86IGZoaXIuUmFuZ2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGVyZSBpcyBubyBleHBsaWNpdCBkaXN0aW5jdGlvbiBiZXR3ZWVuIHJlc29sdXRpb24gYW5kIHJlbWlzc2lvbiBiZWNhdXNlIGluIG1hbnkgY2FzZXMgdGhlIGRpc3RpbmN0aW9uIGlzIG5vdCBjbGVhci4gQWdlIGlzIGdlbmVyYWxseSB1c2VkIHdoZW4gdGhlIHBhdGllbnQgcmVwb3J0cyBhbiBhZ2UgYXQgd2hpY2ggdGhlIENvbmRpdGlvbiBhYmF0ZWQuICBJZiB0aGVyZSBpcyBubyBhYmF0ZW1lbnQgZWxlbWVudCwgaXQgaXMgdW5rbm93biB3aGV0aGVyIHRoZSBjb25kaXRpb24gaGFzIHJlc29sdmVkIG9yIGVudGVyZWQgcmVtaXNzaW9uOyBhcHBsaWNhdGlvbnMgYW5kIHVzZXJzIHNob3VsZCBnZW5lcmFsbHkgYXNzdW1lIHRoYXQgdGhlIGNvbmRpdGlvbiBpcyBzdGlsbCB2YWxpZC4gIFdoZW4gYWJhdGVtZW50U3RyaW5nIGV4aXN0cywgaXQgaW1wbGllcyB0aGUgY29uZGl0aW9uIGlzIGFiYXRlZC5cclxuICAgKi9cclxuICBhYmF0ZW1lbnRTdHJpbmc/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcmVjb3JkZWREYXRlIHJlcHJlc2VudHMgd2hlbiB0aGlzIHBhcnRpY3VsYXIgQ29uZGl0aW9uIHJlY29yZCB3YXMgY3JlYXRlZCBpbiB0aGUgc3lzdGVtLCB3aGljaCBpcyBvZnRlbiBhIHN5c3RlbS1nZW5lcmF0ZWQgZGF0ZS5cclxuICAgKi9cclxuICByZWNvcmRlZERhdGU/OiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDb25kaXRpb24ucmVjb3JkZWREYXRlXHJcbiAgICovXHJcbiAgX3JlY29yZGVkRGF0ZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogSW5kaXZpZHVhbCB3aG8gcmVjb3JkZWQgdGhlIHJlY29yZCBhbmQgdGFrZXMgcmVzcG9uc2liaWxpdHkgZm9yIGl0cyBjb250ZW50LlxyXG4gICAqL1xyXG4gIHJlY29yZGVyPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmRpdmlkdWFsIHdobyBpcyBtYWtpbmcgdGhlIGNvbmRpdGlvbiBzdGF0ZW1lbnQuXHJcbiAgICovXHJcbiAgYXNzZXJ0ZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENsaW5pY2FsIHN0YWdlIG9yIGdyYWRlIG9mIGEgY29uZGl0aW9uLiBNYXkgaW5jbHVkZSBmb3JtYWwgc2V2ZXJpdHkgYXNzZXNzbWVudHMuXHJcbiAgICovXHJcbiAgc3RhZ2U/OiBmaGlyLkNvbmRpdGlvblN0YWdlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZXZpZGVuY2UgbWF5IGJlIGEgc2ltcGxlIGxpc3Qgb2YgY29kZWQgc3ltcHRvbXMvbWFuaWZlc3RhdGlvbnMsIG9yIHJlZmVyZW5jZXMgdG8gb2JzZXJ2YXRpb25zIG9yIGZvcm1hbCBhc3Nlc3NtZW50cywgb3IgYm90aC5cclxuICAgKi9cclxuICBldmlkZW5jZT86IGZoaXIuQ29uZGl0aW9uRXZpZGVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFkZGl0aW9uYWwgaW5mb3JtYXRpb24gYWJvdXQgdGhlIENvbmRpdGlvbi4gVGhpcyBpcyBhIGdlbmVyYWwgbm90ZXMvY29tbWVudHMgZW50cnkgIGZvciBkZXNjcmlwdGlvbiBvZiB0aGUgQ29uZGl0aW9uLCBpdHMgZGlhZ25vc2lzIGFuZCBwcm9nbm9zaXMuXHJcbiAgICovXHJcbiAgbm90ZT86IGZoaXIuQW5ub3RhdGlvbkFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBIGNsaW5pY2FsIGNvbmRpdGlvbiwgcHJvYmxlbSwgZGlhZ25vc2lzLCBvciBvdGhlciBldmVudCwgc2l0dWF0aW9uLCBpc3N1ZSwgb3IgY2xpbmljYWwgY29uY2VwdCB0aGF0IGhhcyByaXNlbiB0byBhIGxldmVsIG9mIGNvbmNlcm4uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29uZGl0aW9uIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdDb25kaXRpb24nO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNvdXJjZVR5cGU6IFwiQ29uZGl0aW9uXCI7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBhIGJ1c2luZXNzIGlkZW50aWZpZXIsIG5vdCBhIHJlc291cmNlIGlkZW50aWZpZXIgKHNlZSBbZGlzY3Vzc2lvbl0ocmVzb3VyY2UuaHRtbCNpZGVudGlmaWVycykpLiAgSXQgaXMgYmVzdCBwcmFjdGljZSBmb3IgdGhlIGlkZW50aWZpZXIgdG8gb25seSBhcHBlYXIgb24gYSBzaW5nbGUgcmVzb3VyY2UgaW5zdGFuY2UsIGhvd2V2ZXIgYnVzaW5lc3MgcHJhY3RpY2VzIG1heSBvY2Nhc2lvbmFsbHkgZGljdGF0ZSB0aGF0IG11bHRpcGxlIHJlc291cmNlIGluc3RhbmNlcyB3aXRoIHRoZSBzYW1lIGlkZW50aWZpZXIgY2FuIGV4aXN0IC0gcG9zc2libHkgZXZlbiB3aXRoIGRpZmZlcmVudCByZXNvdXJjZSB0eXBlcy4gIEZvciBleGFtcGxlLCBtdWx0aXBsZSBQYXRpZW50IGFuZCBhIFBlcnNvbiByZXNvdXJjZSBpbnN0YW5jZSBtaWdodCBzaGFyZSB0aGUgc2FtZSBzb2NpYWwgaW5zdXJhbmNlIG51bWJlci5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcjogZmhpci5JZGVudGlmaWVyW107XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGEgdHlwZSBpcyBDb2RlYWJsZUNvbmNlcHQgYmVjYXVzZSBjbGluaWNhbFN0YXR1cyBoYXMgc29tZSBjbGluaWNhbCBqdWRnbWVudCBpbnZvbHZlZCwgc3VjaCB0aGF0IHRoZXJlIG1pZ2h0IG5lZWQgdG8gYmUgbW9yZSBzcGVjaWZpY2l0eSB0aGFuIHRoZSByZXF1aXJlZCBGSElSIHZhbHVlIHNldCBhbGxvd3MuIEZvciBleGFtcGxlLCBhIFNOT01FRCBjb2RpbmcgbWlnaHQgYWxsb3cgZm9yIGFkZGl0aW9uYWwgc3BlY2lmaWNpdHkuXHJcbiAgICovXHJcbiAgcHVibGljIGNsaW5pY2FsU3RhdHVzPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIHZlcmlmaWNhdGlvblN0YXR1cyBpcyBub3QgcmVxdWlyZWQuICBGb3IgZXhhbXBsZSwgd2hlbiBhIHBhdGllbnQgaGFzIGFiZG9taW5hbCBwYWluIGluIHRoZSBFRCwgdGhlcmUgaXMgbm90IGxpa2VseSBnb2luZyB0byBiZSBhIHZlcmlmaWNhdGlvbiBzdGF0dXMuXHJcbiAgICogVGhlIGRhdGEgdHlwZSBpcyBDb2RlYWJsZUNvbmNlcHQgYmVjYXVzZSB2ZXJpZmljYXRpb25TdGF0dXMgaGFzIHNvbWUgY2xpbmljYWwganVkZ21lbnQgaW52b2x2ZWQsIHN1Y2ggdGhhdCB0aGVyZSBtaWdodCBuZWVkIHRvIGJlIG1vcmUgc3BlY2lmaWNpdHkgdGhhbiB0aGUgcmVxdWlyZWQgRkhJUiB2YWx1ZSBzZXQgYWxsb3dzLiBGb3IgZXhhbXBsZSwgYSBTTk9NRUQgY29kaW5nIG1pZ2h0IGFsbG93IGZvciBhZGRpdGlvbmFsIHNwZWNpZmljaXR5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyB2ZXJpZmljYXRpb25TdGF0dXM/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNhdGVnb3JpemF0aW9uIGlzIG9mdGVuIGhpZ2hseSBjb250ZXh0dWFsIGFuZCBtYXkgYXBwZWFyIHBvb3JseSBkaWZmZXJlbnRpYXRlZCBvciBub3QgdmVyeSB1c2VmdWwgaW4gb3RoZXIgY29udGV4dHMuXHJcbiAgICovXHJcbiAgcHVibGljIGNhdGVnb3J5OiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIENvZGluZyBvZiB0aGUgc2V2ZXJpdHkgd2l0aCBhIHRlcm1pbm9sb2d5IGlzIHByZWZlcnJlZCwgd2hlcmUgcG9zc2libGUuXHJcbiAgICovXHJcbiAgcHVibGljIHNldmVyaXR5PzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpY2F0aW9uIG9mIHRoZSBjb25kaXRpb24sIHByb2JsZW0gb3IgZGlhZ25vc2lzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb2RlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE9ubHkgdXNlZCBpZiBub3QgaW1wbGljaXQgaW4gY29kZSBmb3VuZCBpbiBDb25kaXRpb24uY29kZS4gSWYgdGhlIHVzZSBjYXNlIHJlcXVpcmVzIGF0dHJpYnV0ZXMgZnJvbSB0aGUgQm9keVNpdGUgcmVzb3VyY2UgKGUuZy4gdG8gaWRlbnRpZnkgYW5kIHRyYWNrIHNlcGFyYXRlbHkpIHRoZW4gdXNlIHRoZSBzdGFuZGFyZCBleHRlbnNpb24gW2JvZHlTaXRlXShleHRlbnNpb24tYm9keXNpdGUuaHRtbCkuICBNYXkgYmUgYSBzdW1tYXJ5IGNvZGUsIG9yIGEgcmVmZXJlbmNlIHRvIGEgdmVyeSBwcmVjaXNlIGRlZmluaXRpb24gb2YgdGhlIGxvY2F0aW9uLCBvciBib3RoLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBib2R5U2l0ZTogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgdGhlIHBhdGllbnQgb3IgZ3JvdXAgd2hvIHRoZSBjb25kaXRpb24gcmVjb3JkIGlzIGFzc29jaWF0ZWQgd2l0aC5cclxuICAgKi9cclxuICBwdWJsaWMgc3ViamVjdDogZmhpci5SZWZlcmVuY2V8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGlzIHdpbGwgdHlwaWNhbGx5IGJlIHRoZSBlbmNvdW50ZXIgdGhlIGV2ZW50IG9jY3VycmVkIHdpdGhpbiwgYnV0IHNvbWUgYWN0aXZpdGllcyBtYXkgYmUgaW5pdGlhdGVkIHByaW9yIHRvIG9yIGFmdGVyIHRoZSBvZmZpY2lhbCBjb21wbGV0aW9uIG9mIGFuIGVuY291bnRlciBidXQgc3RpbGwgYmUgdGllZCB0byB0aGUgY29udGV4dCBvZiB0aGUgZW5jb3VudGVyLiBUaGlzIHJlY29yZCBpbmRpY2F0ZXMgdGhlIGVuY291bnRlciB0aGlzIHBhcnRpY3VsYXIgcmVjb3JkIGlzIGFzc29jaWF0ZWQgd2l0aC4gIEluIHRoZSBjYXNlIG9mIGEgXCJuZXdcIiBkaWFnbm9zaXMgcmVmbGVjdGluZyBvbmdvaW5nL3JldmlzZWQgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGNvbmRpdGlvbiwgdGhpcyBtaWdodCBiZSBkaXN0aW5jdCBmcm9tIHRoZSBmaXJzdCBlbmNvdW50ZXIgaW4gd2hpY2ggdGhlIHVuZGVybHlpbmcgY29uZGl0aW9uIHdhcyBmaXJzdCBcImtub3duXCIuXHJcbiAgICovXHJcbiAgcHVibGljIGVuY291bnRlcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBZ2UgaXMgZ2VuZXJhbGx5IHVzZWQgd2hlbiB0aGUgcGF0aWVudCByZXBvcnRzIGFuIGFnZSBhdCB3aGljaCB0aGUgQ29uZGl0aW9uIGJlZ2FuIHRvIG9jY3VyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvbnNldD86IChmaGlyLkZoaXJEYXRlVGltZXxmaGlyLkFnZXxmaGlyLlBlcmlvZHxmaGlyLlJhbmdlfGZoaXIuRmhpclN0cmluZyl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgQ29uZGl0aW9uLm9uc2V0W3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX29uc2V0SXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogVGhlcmUgaXMgbm8gZXhwbGljaXQgZGlzdGluY3Rpb24gYmV0d2VlbiByZXNvbHV0aW9uIGFuZCByZW1pc3Npb24gYmVjYXVzZSBpbiBtYW55IGNhc2VzIHRoZSBkaXN0aW5jdGlvbiBpcyBub3QgY2xlYXIuIEFnZSBpcyBnZW5lcmFsbHkgdXNlZCB3aGVuIHRoZSBwYXRpZW50IHJlcG9ydHMgYW4gYWdlIGF0IHdoaWNoIHRoZSBDb25kaXRpb24gYWJhdGVkLiAgSWYgdGhlcmUgaXMgbm8gYWJhdGVtZW50IGVsZW1lbnQsIGl0IGlzIHVua25vd24gd2hldGhlciB0aGUgY29uZGl0aW9uIGhhcyByZXNvbHZlZCBvciBlbnRlcmVkIHJlbWlzc2lvbjsgYXBwbGljYXRpb25zIGFuZCB1c2VycyBzaG91bGQgZ2VuZXJhbGx5IGFzc3VtZSB0aGF0IHRoZSBjb25kaXRpb24gaXMgc3RpbGwgdmFsaWQuICBXaGVuIGFiYXRlbWVudFN0cmluZyBleGlzdHMsIGl0IGltcGxpZXMgdGhlIGNvbmRpdGlvbiBpcyBhYmF0ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGFiYXRlbWVudD86IChmaGlyLkZoaXJEYXRlVGltZXxmaGlyLkFnZXxmaGlyLlBlcmlvZHxmaGlyLlJhbmdlfGZoaXIuRmhpclN0cmluZyl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgQ29uZGl0aW9uLmFiYXRlbWVudFt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c19hYmF0ZW1lbnRJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBUaGUgcmVjb3JkZWREYXRlIHJlcHJlc2VudHMgd2hlbiB0aGlzIHBhcnRpY3VsYXIgQ29uZGl0aW9uIHJlY29yZCB3YXMgY3JlYXRlZCBpbiB0aGUgc3lzdGVtLCB3aGljaCBpcyBvZnRlbiBhIHN5c3RlbS1nZW5lcmF0ZWQgZGF0ZS5cclxuICAgKi9cclxuICBwdWJsaWMgcmVjb3JkZWREYXRlPzogZmhpci5GaGlyRGF0ZVRpbWV8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGl2aWR1YWwgd2hvIHJlY29yZGVkIHRoZSByZWNvcmQgYW5kIHRha2VzIHJlc3BvbnNpYmlsaXR5IGZvciBpdHMgY29udGVudC5cclxuICAgKi9cclxuICBwdWJsaWMgcmVjb3JkZXI/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaXZpZHVhbCB3aG8gaXMgbWFraW5nIHRoZSBjb25kaXRpb24gc3RhdGVtZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhc3NlcnRlcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDbGluaWNhbCBzdGFnZSBvciBncmFkZSBvZiBhIGNvbmRpdGlvbi4gTWF5IGluY2x1ZGUgZm9ybWFsIHNldmVyaXR5IGFzc2Vzc21lbnRzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGFnZTogZmhpci5Db25kaXRpb25TdGFnZVtdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBldmlkZW5jZSBtYXkgYmUgYSBzaW1wbGUgbGlzdCBvZiBjb2RlZCBzeW1wdG9tcy9tYW5pZmVzdGF0aW9ucywgb3IgcmVmZXJlbmNlcyB0byBvYnNlcnZhdGlvbnMgb3IgZm9ybWFsIGFzc2Vzc21lbnRzLCBvciBib3RoLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBldmlkZW5jZTogZmhpci5Db25kaXRpb25FdmlkZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIEFkZGl0aW9uYWwgaW5mb3JtYXRpb24gYWJvdXQgdGhlIENvbmRpdGlvbi4gVGhpcyBpcyBhIGdlbmVyYWwgbm90ZXMvY29tbWVudHMgZW50cnkgIGZvciBkZXNjcmlwdGlvbiBvZiB0aGUgQ29uZGl0aW9uLCBpdHMgZGlhZ25vc2lzIGFuZCBwcm9nbm9zaXMuXHJcbiAgICovXHJcbiAgcHVibGljIG5vdGU6IGZoaXIuQW5ub3RhdGlvbltdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIENvbmRpdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENvbmRpdGlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdDb25kaXRpb24nO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IHNvdXJjZS5pZGVudGlmaWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuSWRlbnRpZmllcih4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmlkZW50aWZpZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY2xpbmljYWxTdGF0dXMnXSkgeyB0aGlzLmNsaW5pY2FsU3RhdHVzID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jbGluaWNhbFN0YXR1cywgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3ZlcmlmaWNhdGlvblN0YXR1cyddKSB7IHRoaXMudmVyaWZpY2F0aW9uU3RhdHVzID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS52ZXJpZmljYXRpb25TdGF0dXMsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydjYXRlZ29yeSddKSB7IHRoaXMuY2F0ZWdvcnkgPSBzb3VyY2UuY2F0ZWdvcnkubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jYXRlZ29yeSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydzZXZlcml0eSddKSB7IHRoaXMuc2V2ZXJpdHkgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnNldmVyaXR5LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY29kZSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2JvZHlTaXRlJ10pIHsgdGhpcy5ib2R5U2l0ZSA9IHNvdXJjZS5ib2R5U2l0ZS5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmJvZHlTaXRlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3N1YmplY3QnXSkgeyB0aGlzLnN1YmplY3QgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnN1YmplY3QsIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdWJqZWN0ID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZW5jb3VudGVyJ10pIHsgdGhpcy5lbmNvdW50ZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmVuY291bnRlciwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ29uc2V0J10pIHsgdGhpcy5vbnNldCA9IHNvdXJjZS5vbnNldDsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydvbnNldERhdGVUaW1lJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLm9uc2V0ID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLm9uc2V0RGF0ZVRpbWV9LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydvbnNldEFnZSddKSB7IHRoaXMub25zZXQgPSBuZXcgZmhpci5BZ2Uoc291cmNlLm9uc2V0QWdlLCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydvbnNldFBlcmlvZCddKSB7IHRoaXMub25zZXQgPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLm9uc2V0UGVyaW9kLCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydvbnNldFJhbmdlJ10pIHsgdGhpcy5vbnNldCA9IG5ldyBmaGlyLlJhbmdlKHNvdXJjZS5vbnNldFJhbmdlLCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydvbnNldFN0cmluZyddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5vbnNldCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2Uub25zZXRTdHJpbmd9LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYWJhdGVtZW50J10pIHsgdGhpcy5hYmF0ZW1lbnQgPSBzb3VyY2UuYWJhdGVtZW50OyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2FiYXRlbWVudERhdGVUaW1lJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLmFiYXRlbWVudCA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5hYmF0ZW1lbnREYXRlVGltZX0sIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2FiYXRlbWVudEFnZSddKSB7IHRoaXMuYWJhdGVtZW50ID0gbmV3IGZoaXIuQWdlKHNvdXJjZS5hYmF0ZW1lbnRBZ2UsIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2FiYXRlbWVudFBlcmlvZCddKSB7IHRoaXMuYWJhdGVtZW50ID0gbmV3IGZoaXIuUGVyaW9kKHNvdXJjZS5hYmF0ZW1lbnRQZXJpb2QsIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2FiYXRlbWVudFJhbmdlJ10pIHsgdGhpcy5hYmF0ZW1lbnQgPSBuZXcgZmhpci5SYW5nZShzb3VyY2UuYWJhdGVtZW50UmFuZ2UsIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2FiYXRlbWVudFN0cmluZyddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5hYmF0ZW1lbnQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmFiYXRlbWVudFN0cmluZ30sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydyZWNvcmRlZERhdGUnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMucmVjb3JkZWREYXRlID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLnJlY29yZGVkRGF0ZX0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfcmVjb3JkZWREYXRlJ10pIHtcclxuICAgICAgaWYgKHRoaXMucmVjb3JkZWREYXRlKSB7IHRoaXMucmVjb3JkZWREYXRlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3JlY29yZGVkRGF0ZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnJlY29yZGVkRGF0ZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZShzb3VyY2UuX3JlY29yZGVkRGF0ZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckRhdGVUaW1lQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydyZWNvcmRlciddKSB7IHRoaXMucmVjb3JkZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnJlY29yZGVyLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYXNzZXJ0ZXInXSkgeyB0aGlzLmFzc2VydGVyID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5hc3NlcnRlciwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0YWdlJ10pIHsgdGhpcy5zdGFnZSA9IHNvdXJjZS5zdGFnZS5tYXAoKHgpID0+IG5ldyBmaGlyLkNvbmRpdGlvblN0YWdlKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3RhZ2UgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZXZpZGVuY2UnXSkgeyB0aGlzLmV2aWRlbmNlID0gc291cmNlLmV2aWRlbmNlLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29uZGl0aW9uRXZpZGVuY2UoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5ldmlkZW5jZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydub3RlJ10pIHsgdGhpcy5ub3RlID0gc291cmNlLm5vdGUubWFwKCh4KSA9PiBuZXcgZmhpci5Bbm5vdGF0aW9uKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubm90ZSA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnQ29uZGl0aW9uJyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnaWRlbnRpZmllcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPU1YoJ2NsaW5pY2FsU3RhdHVzJyxleHAsJ0NvbmRpdGlvbkNsaW5pY2FsJyxDb25kaXRpb25DbGluaWNhbFZzVmFsaWRhdGlvbiwncicpKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TVigndmVyaWZpY2F0aW9uU3RhdHVzJyxleHAsJ0NvbmRpdGlvblZlclN0YXR1cycsQ29uZGl0aW9uVmVyU3RhdHVzVnNWYWxpZGF0aW9uLCdyJykpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2NhdGVnb3J5JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdzZXZlcml0eScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnY29kZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnYm9keVNpdGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ3N1YmplY3QnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2VuY291bnRlcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnb25zZXQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2FiYXRlbWVudCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygncmVjb3JkZWREYXRlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdyZWNvcmRlcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnYXNzZXJ0ZXInLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3N0YWdlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdldmlkZW5jZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnbm90ZScsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4iXX0=