// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: AllergyIntolerance
import * as fhir from '../fhir.js';
// @ts-ignore
import { ReactionEventSeverityCodes } from '../fhirValueSets/ReactionEventSeverityCodes.js';
// @ts-ignore
import { AllergyintoleranceClinicalCodes } from '../fhirValueSets/AllergyintoleranceClinicalCodes.js';
// @ts-ignore
import { AllergyintoleranceVerificationCodes } from '../fhirValueSets/AllergyintoleranceVerificationCodes.js';
// @ts-ignore
import { AllergyIntoleranceTypeCodes } from '../fhirValueSets/AllergyIntoleranceTypeCodes.js';
// @ts-ignore
import { AllergyIntoleranceCategoryCodes } from '../fhirValueSets/AllergyIntoleranceCategoryCodes.js';
// @ts-ignore
import { AllergyIntoleranceCriticalityCodes } from '../fhirValueSets/AllergyIntoleranceCriticalityCodes.js';
/**
 * Details about each adverse reaction event linked to exposure to the identified substance.
 */
export class AllergyIntoleranceReaction extends fhir.BackboneElement {
    /**
     * Default constructor for AllergyIntoleranceReaction - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['substance']) {
            this.substance = new fhir.CodeableConcept(source.substance);
        }
        if (source['manifestation']) {
            this.manifestation = source.manifestation.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.manifestation = [];
        }
        if (source['description']) {
            this.description = new fhir.FhirString({ value: source.description });
        }
        if (source['onset']) {
            this.onset = new fhir.FhirDateTime({ value: source.onset });
        }
        if (source['severity']) {
            this.severity = new fhir.FhirCode({ value: source.severity });
        }
        if (source['exposureRoute']) {
            this.exposureRoute = new fhir.CodeableConcept(source.exposureRoute);
        }
        if (source['note']) {
            this.note = source.note.map((x) => new fhir.Annotation(x));
        }
        else {
            this.note = [];
        }
    }
    /**
     * Required-bound Value Set for severity (AllergyIntolerance.reaction.severity)
     */
    static get severityRequiredCodes() {
        return ReactionEventSeverityCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["substance"]) {
            issues.push(...this.substance.doModelValidation());
        }
        if (!this['manifestation']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property manifestation:fhir.CodeableConcept[] fhir: AllergyIntolerance.reaction.manifestation:CodeableConcept' });
        }
        else if (!Array.isArray(this.manifestation)) {
            issues.push({ severity: 'error', code: 'structure', diagnostics: 'Found scalar in array property manifestation:fhir.CodeableConcept[] fhir: AllergyIntolerance.reaction.manifestation:CodeableConcept' });
        }
        else if (this.manifestation.length === 0) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property manifestation:fhir.CodeableConcept[] fhir: AllergyIntolerance.reaction.manifestation:CodeableConcept' });
        }
        if (this["manifestation"]) {
            this.manifestation.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["description"]) {
            issues.push(...this.description.doModelValidation());
        }
        if (this["onset"]) {
            issues.push(...this.onset.doModelValidation());
        }
        if (this['severity'] && (!Object.values(ReactionEventSeverityCodes).includes(this.severity))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property severity?:fhir.FhirCode<ReactionEventSeverityCodeType> fhir: AllergyIntolerance.reaction.severity:code Required binding to: ReactionEventSeverity' });
        }
        if (this["severity"]) {
            issues.push(...this.severity.doModelValidation());
        }
        if (this["exposureRoute"]) {
            issues.push(...this.exposureRoute.doModelValidation());
        }
        if (this["note"]) {
            this.note.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
AllergyIntoleranceReaction._fts_dataType = 'AllergyIntoleranceReaction';
/**
 * Risk of harmful or undesirable, physiological response which is unique to an individual and associated with exposure to a substance.
 */
export class AllergyIntolerance extends fhir.DomainResource {
    /**
     * Default constructor for AllergyIntolerance - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'AllergyIntolerance';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['clinicalStatus']) {
            this.clinicalStatus = new fhir.CodeableConcept(source.clinicalStatus);
        }
        if (source['verificationStatus']) {
            this.verificationStatus = new fhir.CodeableConcept(source.verificationStatus);
        }
        if (source['type']) {
            this.type = new fhir.FhirCode({ value: source.type });
        }
        if (source['category']) {
            this.category = source.category.map((x) => new fhir.FhirCode({ value: x }));
        }
        else {
            this.category = [];
        }
        if (source['criticality']) {
            this.criticality = new fhir.FhirCode({ value: source.criticality });
        }
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        if (source['patient']) {
            this.patient = new fhir.Reference(source.patient);
        }
        else {
            this.patient = null;
        }
        if (source['encounter']) {
            this.encounter = new fhir.Reference(source.encounter);
        }
        if (source['onset']) {
            this.onset = source.onset;
        }
        else if (source['onsetDateTime']) {
            this.onset = new fhir.FhirDateTime({ value: source.onsetDateTime });
        }
        else if (source['onsetAge']) {
            this.onset = new fhir.Age(source.onsetAge);
        }
        else if (source['onsetPeriod']) {
            this.onset = new fhir.Period(source.onsetPeriod);
        }
        else if (source['onsetRange']) {
            this.onset = new fhir.Range(source.onsetRange);
        }
        else if (source['onsetString']) {
            this.onset = new fhir.FhirString({ value: source.onsetString });
        }
        if (source['recordedDate']) {
            this.recordedDate = new fhir.FhirDateTime({ value: source.recordedDate });
        }
        if (source['recorder']) {
            this.recorder = new fhir.Reference(source.recorder);
        }
        if (source['asserter']) {
            this.asserter = new fhir.Reference(source.asserter);
        }
        if (source['lastOccurrence']) {
            this.lastOccurrence = new fhir.FhirDateTime({ value: source.lastOccurrence });
        }
        if (source['note']) {
            this.note = source.note.map((x) => new fhir.Annotation(x));
        }
        else {
            this.note = [];
        }
        if (source['reaction']) {
            this.reaction = source.reaction.map((x) => new fhir.AllergyIntoleranceReaction(x));
        }
        else {
            this.reaction = [];
        }
    }
    /**
     * Required-bound Value Set for clinicalStatus (AllergyIntolerance.clinicalStatus)
     */
    static get clinicalStatusRequiredCodes() {
        return AllergyintoleranceClinicalCodes;
    }
    /**
     * Required-bound Value Set for verificationStatus (AllergyIntolerance.verificationStatus)
     */
    static get verificationStatusRequiredCodes() {
        return AllergyintoleranceVerificationCodes;
    }
    /**
     * Required-bound Value Set for type (AllergyIntolerance.type)
     */
    static get typeRequiredCodes() {
        return AllergyIntoleranceTypeCodes;
    }
    /**
     * Required-bound Value Set for category (AllergyIntolerance.category)
     */
    static get categoryRequiredCodes() {
        return AllergyIntoleranceCategoryCodes;
    }
    /**
     * Required-bound Value Set for criticality (AllergyIntolerance.criticality)
     */
    static get criticalityRequiredCodes() {
        return AllergyIntoleranceCriticalityCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType:"AllergyIntolerance" fhir: AllergyIntolerance.resourceType:"AllergyIntolerance"' });
        }
        if (this["identifier"]) {
            this.identifier.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this['clinicalStatus'] && (!Object.values(AllergyintoleranceClinicalCodes).includes(this.clinicalStatus))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property clinicalStatus?:fhir.CodeableConcept fhir: AllergyIntolerance.clinicalStatus:CodeableConcept Required binding to: AllergyintoleranceClinical' });
        }
        if (this["clinicalStatus"]) {
            issues.push(...this.clinicalStatus.doModelValidation());
        }
        if (this['verificationStatus'] && (!Object.values(AllergyintoleranceVerificationCodes).includes(this.verificationStatus))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property verificationStatus?:fhir.CodeableConcept fhir: AllergyIntolerance.verificationStatus:CodeableConcept Required binding to: AllergyintoleranceVerification' });
        }
        if (this["verificationStatus"]) {
            issues.push(...this.verificationStatus.doModelValidation());
        }
        if (this['type'] && (!Object.values(AllergyIntoleranceTypeCodes).includes(this.type))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property type?:fhir.FhirCode<AllergyIntoleranceTypeCodeType> fhir: AllergyIntolerance.type:code Required binding to: AllergyIntoleranceType' });
        }
        if (this["type"]) {
            issues.push(...this.type.doModelValidation());
        }
        if (this['category']) {
            this.category.forEach((v) => {
                if (!Object.values(AllergyIntoleranceCategoryCodes).includes(v)) {
                    issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property category?:fhir.FhirCode<AllergyIntoleranceCategoryCodeType>[] fhir: AllergyIntolerance.category:code Required binding to: AllergyIntoleranceCategory' });
                }
            });
        }
        if (this["category"]) {
            this.category.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this['criticality'] && (!Object.values(AllergyIntoleranceCriticalityCodes).includes(this.criticality))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property criticality?:fhir.FhirCode<AllergyIntoleranceCriticalityCodeType> fhir: AllergyIntolerance.criticality:code Required binding to: AllergyIntoleranceCriticality' });
        }
        if (this["criticality"]) {
            issues.push(...this.criticality.doModelValidation());
        }
        if (this["code"]) {
            issues.push(...this.code.doModelValidation());
        }
        if (!this['patient']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property patient:fhir.Reference fhir: AllergyIntolerance.patient:Reference' });
        }
        if (this["patient"]) {
            issues.push(...this.patient.doModelValidation());
        }
        if (this["encounter"]) {
            issues.push(...this.encounter.doModelValidation());
        }
        if (this["recordedDate"]) {
            issues.push(...this.recordedDate.doModelValidation());
        }
        if (this["recorder"]) {
            issues.push(...this.recorder.doModelValidation());
        }
        if (this["asserter"]) {
            issues.push(...this.asserter.doModelValidation());
        }
        if (this["lastOccurrence"]) {
            issues.push(...this.lastOccurrence.doModelValidation());
        }
        if (this["note"]) {
            this.note.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["reaction"]) {
            this.reaction.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
AllergyIntolerance._fts_dataType = 'AllergyIntolerance';
/**
 * Internal flag to properly serialize choice-type element AllergyIntolerance.onset[x]
 */
AllergyIntolerance._fts_onsetIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQWxsZXJneUludG9sZXJhbmNlLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9BbGxlcmd5SW50b2xlcmFuY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsb0NBQW9DO0FBRXBDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBWW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsMEJBQTBCLEVBQWtDLE1BQU0sZ0RBQWdELENBQUM7QUFPNUgsYUFBYTtBQUNiLE9BQU8sRUFBRSwrQkFBK0IsRUFBdUMsTUFBTSxxREFBcUQsQ0FBQztBQUczSSxhQUFhO0FBQ2IsT0FBTyxFQUFFLG1DQUFtQyxFQUEyQyxNQUFNLHlEQUF5RCxDQUFDO0FBR3ZKLGFBQWE7QUFDYixPQUFPLEVBQUUsMkJBQTJCLEVBQW1DLE1BQU0saURBQWlELENBQUM7QUFHL0gsYUFBYTtBQUNiLE9BQU8sRUFBRSwrQkFBK0IsRUFBdUMsTUFBTSxxREFBcUQsQ0FBQztBQUczSSxhQUFhO0FBQ2IsT0FBTyxFQUFFLGtDQUFrQyxFQUEwQyxNQUFNLHdEQUF3RCxDQUFDO0FBdUNwSjs7R0FFRztBQUNILE1BQU0sT0FBTywwQkFBMkIsU0FBUSxJQUFJLENBQUMsZUFBZTtJQWlDbEU7O09BRUc7SUFDSCxZQUFZLFNBQWlELEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQ3ZHLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUM7U0FBRTtRQUN6RixJQUFJLE1BQU0sQ0FBQyxlQUFlLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxhQUFhLEdBQUcsTUFBTSxDQUFDLGFBQWEsQ0FBQyxHQUFH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VSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7U0FBRTthQUN2RSxJQUFJLE1BQU0sQ0FBQyxhQUFhLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQztTQUFFO2FBQ2hGLElBQUksTUFBTSxDQUFDLFlBQVksQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1NBQUU7YUFDN0UsSUFBSSxNQUFNLENBQUMsYUFBYSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsV0FBVyxFQUFDLENBQUMsQ0FBQztTQUFFO1FBQ2xHLElBQUksTUFBTSxDQUFDLGNBQWMsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLFlBQVksRUFBQyxDQUFDLENBQUM7U0FBRTtRQUN4RyxJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztTQUFFO1FBQ2hGLElBQUksTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQUU7UUFDaEYsSUFBSSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxjQUFjLEVBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDOUcsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQzlFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUM7U0FBRTtRQUN4QixJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLDBCQUEwQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUMxRztZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO1NBQUU7SUFDOUIsQ0FBQztJQUNEOztPQUVHO0lBQ0ksTUFBTSxLQUFLLDJCQUEyQjtRQUMzQyxPQUFPLCtCQUErQixDQUFDO0lBQ3pDLENBQUM7SUFDRDs7T0FFRztJQUNJLE1BQU0sS0FBSywrQkFBK0I7UUFDL0MsT0FBTyxtQ0FBbUMsQ0FBQztJQUM3QyxDQUFDO0lBQ0Q7O09BRUc7SUFDSSxNQUFNLEtBQUssaUJBQWlCO1FBQ2pDLE9BQU8sMkJBQTJCLENBQUM7SUFDckMsQ0FBQztJQUNEOztPQUVHO0lBQ0ksTUFBTSxLQUFLLHFCQUFxQjtRQUNyQyxPQUFPLCtCQUErQixDQUFDO0lBQ3pDLENBQUM7SUFDRDs7T0FFRztJQUNJLE1BQU0sS0FBSyx3QkFBd0I7UUFDeEMsT0FBTyxrQ0FBa0MsQ0FBQztJQUM1QyxDQUFDO0lBQ0Q7O09BRUc7SUFDYSxpQkFBaUI7UUFDL0IsSUFBSSxNQUFNLEdBQW1CLEtBQUssQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQ3ZELElBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLEVBQUU7WUFDekIsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQUUsd0hBQXdILEVBQUUsQ0FBQyxDQUFDO1NBQzdMO1FBQ0QsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtTQUFFO1FBQ3RHLElBQUksSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsK0JBQStCLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLGNBQXFCLENBQUMsQ0FBQyxFQUFFO1lBQ3BILE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxjQUFjLEVBQUUsV0FBVyxFQUFFLG9LQUFvSyxFQUFFLENBQUMsQ0FBQztTQUM3TztRQUNELElBQUksSUFBSSxDQUFDLGdCQUFnQixDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUN4RixJQUFJLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLG1DQUFtQyxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxrQkFBeUIsQ0FBQyxDQUFDLEVBQUU7WUFDaEksTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLGNBQWMsRUFBRSxXQUFXLEVBQUUsZ0xBQWdMLEVBQUUsQ0FBQyxDQUFDO1NBQ3pQO1FBQ0QsSUFBSSxJQUFJLENBQUMsb0JBQW9CLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFDaEcsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsMkJBQTJCLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQVcsQ0FBQyxDQUFDLEVBQUU7WUFDNUYsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLGNBQWMsRUFBRSxXQUFXLEVBQUUsMEpBQTBKLEVBQUUsQ0FBQyxDQUFDO1NBQ25PO1FBQ0QsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUNwRSxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUNwQixJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO2dCQUMxQixJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQywrQkFBK0IsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFRLENBQUMsRUFBRTtvQkFDdEUsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLGNBQWMsRUFBRSxXQUFXLEVBQUUsNEtBQTRLLEVBQUUsQ0FBQyxDQUFDO2lCQUNyUDtZQUNILENBQUMsQ0FBQyxDQUFDO1NBQ0o7UUFDRCxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQUU7UUFDbEcsSUFBSSxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsa0NBQWtDLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQWtCLENBQUMsQ0FBQyxFQUFFO1lBQ2pILE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxjQUFjLEVBQUUsV0FBVyxFQUFFLHNMQUFzTCxFQUFFLENBQUMsQ0FBQztTQUMvUDtRQUNELElBQUksSUFBSSxDQUFDLGFBQWEsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFDbEYsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUNwRSxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQ3BCLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUFFLDZGQUE2RixFQUFFLENBQUMsQ0FBQztTQUNsSztRQUNELElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFDMUUsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUM5RSxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQ3BGLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFDNUUsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUM1RSxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFDeEYsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtTQUFFO1FBQzFGLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7U0FBRTtRQUNsRyxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQTVMRDs7R0FFRztBQUM2QixnQ0FBYSxHQUFVLG9CQUFvQixDQUFDO0FBZ0Q1RTs7R0FFRztBQUN1QixxQ0FBa0IsR0FBUSxJQUFJLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjQuY29yZSB2ZXJzaW9uOiA0LjAuMVxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IEFsbGVyZ3lJbnRvbGVyYW5jZVxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgU3Vic3RhbmNlQ29kZUNvZGluZ3MsIFN1YnN0YW5jZUNvZGVDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9TdWJzdGFuY2VDb2RlQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgU3Vic3RhbmNlQ29kZUNvZGVzLCAgU3Vic3RhbmNlQ29kZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9TdWJzdGFuY2VDb2RlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENsaW5pY2FsRmluZGluZ3NDb2RpbmdzLCBDbGluaWNhbEZpbmRpbmdzQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ2xpbmljYWxGaW5kaW5nc0NvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENsaW5pY2FsRmluZGluZ3NDb2RlcywgIENsaW5pY2FsRmluZGluZ3NDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ2xpbmljYWxGaW5kaW5nc0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBSZWFjdGlvbkV2ZW50U2V2ZXJpdHlDb2RpbmdzLCBSZWFjdGlvbkV2ZW50U2V2ZXJpdHlDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9SZWFjdGlvbkV2ZW50U2V2ZXJpdHlDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBSZWFjdGlvbkV2ZW50U2V2ZXJpdHlDb2RlcywgIFJlYWN0aW9uRXZlbnRTZXZlcml0eUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9SZWFjdGlvbkV2ZW50U2V2ZXJpdHlDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUm91dGVDb2RpbmdzLCBSb3V0ZUNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1JvdXRlQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUm91dGVDb2RlcywgIFJvdXRlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1JvdXRlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFsbGVyZ3lpbnRvbGVyYW5jZUNsaW5pY2FsQ29kaW5ncywgQWxsZXJneWludG9sZXJhbmNlQ2xpbmljYWxDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BbGxlcmd5aW50b2xlcmFuY2VDbGluaWNhbENvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFsbGVyZ3lpbnRvbGVyYW5jZUNsaW5pY2FsQ29kZXMsICBBbGxlcmd5aW50b2xlcmFuY2VDbGluaWNhbENvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BbGxlcmd5aW50b2xlcmFuY2VDbGluaWNhbENvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBBbGxlcmd5aW50b2xlcmFuY2VWZXJpZmljYXRpb25Db2RpbmdzLCBBbGxlcmd5aW50b2xlcmFuY2VWZXJpZmljYXRpb25Db2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BbGxlcmd5aW50b2xlcmFuY2VWZXJpZmljYXRpb25Db2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBBbGxlcmd5aW50b2xlcmFuY2VWZXJpZmljYXRpb25Db2RlcywgIEFsbGVyZ3lpbnRvbGVyYW5jZVZlcmlmaWNhdGlvbkNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BbGxlcmd5aW50b2xlcmFuY2VWZXJpZmljYXRpb25Db2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQWxsZXJneUludG9sZXJhbmNlVHlwZUNvZGluZ3MsIEFsbGVyZ3lJbnRvbGVyYW5jZVR5cGVDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BbGxlcmd5SW50b2xlcmFuY2VUeXBlQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQWxsZXJneUludG9sZXJhbmNlVHlwZUNvZGVzLCAgQWxsZXJneUludG9sZXJhbmNlVHlwZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BbGxlcmd5SW50b2xlcmFuY2VUeXBlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFsbGVyZ3lJbnRvbGVyYW5jZUNhdGVnb3J5Q29kaW5ncywgQWxsZXJneUludG9sZXJhbmNlQ2F0ZWdvcnlDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BbGxlcmd5SW50b2xlcmFuY2VDYXRlZ29yeUNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFsbGVyZ3lJbnRvbGVyYW5jZUNhdGVnb3J5Q29kZXMsICBBbGxlcmd5SW50b2xlcmFuY2VDYXRlZ29yeUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BbGxlcmd5SW50b2xlcmFuY2VDYXRlZ29yeUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBBbGxlcmd5SW50b2xlcmFuY2VDcml0aWNhbGl0eUNvZGluZ3MsIEFsbGVyZ3lJbnRvbGVyYW5jZUNyaXRpY2FsaXR5Q29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQWxsZXJneUludG9sZXJhbmNlQ3JpdGljYWxpdHlDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBBbGxlcmd5SW50b2xlcmFuY2VDcml0aWNhbGl0eUNvZGVzLCAgQWxsZXJneUludG9sZXJhbmNlQ3JpdGljYWxpdHlDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQWxsZXJneUludG9sZXJhbmNlQ3JpdGljYWxpdHlDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQWxsZXJneWludG9sZXJhbmNlQ29kZUNvZGluZ3MsIEFsbGVyZ3lpbnRvbGVyYW5jZUNvZGVDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BbGxlcmd5aW50b2xlcmFuY2VDb2RlQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQWxsZXJneWludG9sZXJhbmNlQ29kZUNvZGVzLCAgQWxsZXJneWludG9sZXJhbmNlQ29kZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BbGxlcmd5aW50b2xlcmFuY2VDb2RlQ29kZXMuanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQWxsZXJneUludG9sZXJhbmNlUmVhY3Rpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQWxsZXJneUludG9sZXJhbmNlUmVhY3Rpb25BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBDb2Rpbmcgb2YgdGhlIHNwZWNpZmljIHN1YnN0YW5jZSAob3IgcGhhcm1hY2V1dGljYWwgcHJvZHVjdCkgd2l0aCBhIHRlcm1pbm9sb2d5IGNhcGFibGUgb2YgdHJpZ2dlcmluZyBkZWNpc2lvbiBzdXBwb3J0IHNob3VsZCBiZSB1c2VkIHdoZXJldmVyIHBvc3NpYmxlLiAgVGhlICdjb2RlJyBlbGVtZW50IGFsbG93cyBmb3IgdGhlIHVzZSBvZiBhIHNwZWNpZmljIHN1YnN0YW5jZSBvciBwaGFybWFjZXV0aWNhbCBwcm9kdWN0LCBvciBhIGdyb3VwIG9yIGNsYXNzIG9mIHN1YnN0YW5jZXMuIEluIHRoZSBjYXNlIG9mIGFuIGFsbGVyZ3kgb3IgaW50b2xlcmFuY2UgdG8gYSBjbGFzcyBvZiBzdWJzdGFuY2VzLCAoZm9yIGV4YW1wbGUsIFwicGVuaWNpbGxpbnNcIiksIHRoZSAncmVhY3Rpb24uc3Vic3RhbmNlJyBlbGVtZW50IGNvdWxkIGJlIHVzZWQgdG8gY29kZSB0aGUgc3BlY2lmaWMgc3Vic3RhbmNlIHRoYXQgd2FzIGlkZW50aWZpZWQgYXMgaGF2aW5nIGNhdXNlZCB0aGUgcmVhY3Rpb24gKGZvciBleGFtcGxlLCBcImFtb3h5Y2lsbGluXCIpLiBEdXBsaWNhdGlvbiBvZiB0aGUgdmFsdWUgaW4gdGhlICdjb2RlJyBhbmQgJ3JlYWN0aW9uLnN1YnN0YW5jZScgZWxlbWVudHMgaXMgYWNjZXB0YWJsZSB3aGVuIGEgc3BlY2lmaWMgc3Vic3RhbmNlIGhhcyBiZWVuIHJlY29yZGVkIGluICdjb2RlJy5cclxuICAgKi9cclxuICBzdWJzdGFuY2U/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE1hbmlmZXN0YXRpb24gY2FuIGJlIGV4cHJlc3NlZCBhcyBhIHNpbmdsZSB3b3JkLCBwaHJhc2Ugb3IgYnJpZWYgZGVzY3JpcHRpb24uIEZvciBleGFtcGxlOiBuYXVzZWEsIHJhc2ggb3Igbm8gcmVhY3Rpb24uIEl0IGlzIHByZWZlcmFibGUgdGhhdCBtYW5pZmVzdGF0aW9uIHNob3VsZCBiZSBjb2RlZCB3aXRoIGEgdGVybWlub2xvZ3ksIHdoZXJlIHBvc3NpYmxlLiBUaGUgdmFsdWVzIGVudGVyZWQgaGVyZSBtYXkgYmUgdXNlZCB0byBkaXNwbGF5IG9uIGFuIGFwcGxpY2F0aW9uIHNjcmVlbiBhcyBwYXJ0IG9mIGEgbGlzdCBvZiBhZHZlcnNlIHJlYWN0aW9ucywgYXMgcmVjb21tZW5kZWQgaW4gdGhlIFVLIE5IUyBDVUkgZ3VpZGVsaW5lcy4gIFRlcm1pbm9sb2dpZXMgY29tbW9ubHkgdXNlZCBpbmNsdWRlLCBidXQgYXJlIG5vdCBsaW1pdGVkIHRvLCBTTk9NRUQgQ1Qgb3IgSUNEMTAuXHJcbiAgICovXHJcbiAgbWFuaWZlc3RhdGlvbjogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118bnVsbDtcclxuICAvKipcclxuICAgKiBVc2UgdGhlIGRlc2NyaXB0aW9uIHRvIHByb3ZpZGUgYW55IGRldGFpbHMgb2YgYSBwYXJ0aWN1bGFyIGV2ZW50IG9mIHRoZSBvY2N1cnJlZCByZWFjdGlvbiBzdWNoIGFzIGNpcmN1bXN0YW5jZXMsIHJlYWN0aW9uIHNwZWNpZmljcywgd2hhdCBoYXBwZW5lZCBiZWZvcmUvYWZ0ZXIuIEluZm9ybWF0aW9uLCByZWxhdGVkIHRvIHRoZSBldmVudCwgYnV0IG5vdCBkZXNjcmliaW5nIGEgcGFydGljdWxhciBjYXJlIHNob3VsZCBiZSBjYXB0dXJlZCBpbiB0aGUgY29tbWVudCBmaWVsZC4gRm9yIGV4YW1wbGU6IGF0IHRoZSBhZ2Ugb2YgZm91ciwgdGhlIHBhdGllbnQgd2FzIGdpdmVuIHBlbmljaWxsaW4gZm9yIHN0cmVwIHRocm9hdCBhbmQgc3Vic2VxdWVudGx5IGRldmVsb3BlZCBzZXZlcmUgaGl2ZXMuXHJcbiAgICovXHJcbiAgZGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBSZWNvcmQgb2YgdGhlIGRhdGUgYW5kL29yIHRpbWUgb2YgdGhlIG9uc2V0IG9mIHRoZSBSZWFjdGlvbi5cclxuICAgKi9cclxuICBvbnNldD86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSXQgaXMgYWNrbm93bGVkZ2VkIHRoYXQgdGhpcyBhc3Nlc3NtZW50IGlzIHZlcnkgc3ViamVjdGl2ZS4gVGhlcmUgbWF5IGJlIHNvbWUgc3BlY2lmaWMgcHJhY3RpY2UgZG9tYWlucyB3aGVyZSBvYmplY3RpdmUgc2NhbGVzIGhhdmUgYmVlbiBhcHBsaWVkLiBPYmplY3RpdmUgc2NhbGVzIGNhbiBiZSBpbmNsdWRlZCBpbiB0aGlzIG1vZGVsIGFzIGV4dGVuc2lvbnMuXHJcbiAgICovXHJcbiAgc2V2ZXJpdHk/OiBmaGlyLkZoaXJDb2RlPFJlYWN0aW9uRXZlbnRTZXZlcml0eUNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENvZGluZyBvZiB0aGUgcm91dGUgb2YgZXhwb3N1cmUgd2l0aCBhIHRlcm1pbm9sb2d5IHNob3VsZCBiZSB1c2VkIHdoZXJldmVyIHBvc3NpYmxlLlxyXG4gICAqL1xyXG4gIGV4cG9zdXJlUm91dGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFVzZSB0aGlzIGZpZWxkIHRvIHJlY29yZCBpbmZvcm1hdGlvbiBpbmRpcmVjdGx5IHJlbGF0ZWQgdG8gYSBwYXJ0aWN1bGFyIGV2ZW50IGFuZCBub3QgY2FwdHVyZWQgaW4gdGhlIGRlc2NyaXB0aW9uLiBGb3IgZXhhbXBsZTogQ2xpbmljYWwgcmVjb3JkcyBhcmUgbm8gbG9uZ2VyIGF2YWlsYWJsZSwgcmVjb3JkZWQgYmFzZWQgb24gaW5mb3JtYXRpb24gcHJvdmlkZWQgdG8gdGhlIHBhdGllbnQgYnkgaGVyIG1vdGhlciBhbmQgaGVyIG1vdGhlciBpcyBkZWNlYXNlZC5cclxuICAgKi9cclxuICBub3RlPzogZmhpci5Bbm5vdGF0aW9uQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIERldGFpbHMgYWJvdXQgZWFjaCBhZHZlcnNlIHJlYWN0aW9uIGV2ZW50IGxpbmtlZCB0byBleHBvc3VyZSB0byB0aGUgaWRlbnRpZmllZCBzdWJzdGFuY2UuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQWxsZXJneUludG9sZXJhbmNlUmVhY3Rpb24gZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdBbGxlcmd5SW50b2xlcmFuY2VSZWFjdGlvbic7XHJcbiAgLyoqXHJcbiAgICogQ29kaW5nIG9mIHRoZSBzcGVjaWZpYyBzdWJzdGFuY2UgKG9yIHBoYXJtYWNldXRpY2FsIHByb2R1Y3QpIHdpdGggYSB0ZXJtaW5vbG9neSBjYXBhYmxlIG9mIHRyaWdnZXJpbmcgZGVjaXNpb24gc3VwcG9ydCBzaG91bGQgYmUgdXNlZCB3aGVyZXZlciBwb3NzaWJsZS4gIFRoZSAnY29kZScgZWxlbWVudCBhbGxvd3MgZm9yIHRoZSB1c2Ugb2YgYSBzcGVjaWZpYyBzdWJzdGFuY2Ugb3IgcGhhcm1hY2V1dGljYWwgcHJvZHVjdCwgb3IgYSBncm91cCBvciBjbGFzcyBvZiBzdWJzdGFuY2VzLiBJbiB0aGUgY2FzZSBvZiBhbiBhbGxlcmd5IG9yIGludG9sZXJhbmNlIHRvIGEgY2xhc3Mgb2Ygc3Vic3RhbmNlcywgKGZvciBleGFtcGxlLCBcInBlbmljaWxsaW5zXCIpLCB0aGUgJ3JlYWN0aW9uLnN1YnN0YW5jZScgZWxlbWVudCBjb3VsZCBiZSB1c2VkIHRvIGNvZGUgdGhlIHNwZWNpZmljIHN1YnN0YW5jZSB0aGF0IHdhcyBpZGVudGlmaWVkIGFzIGhhdmluZyBjYXVzZWQgdGhlIHJlYWN0aW9uIChmb3IgZXhhbXBsZSwgXCJhbW94eWNpbGxpblwiKS4gRHVwbGljYXRpb24gb2YgdGhlIHZhbHVlIGluIHRoZSAnY29kZScgYW5kICdyZWFjdGlvbi5zdWJzdGFuY2UnIGVsZW1lbnRzIGlzIGFjY2VwdGFibGUgd2hlbiBhIHNwZWNpZmljIHN1YnN0YW5jZSBoYXMgYmVlbiByZWNvcmRlZCBpbiAnY29kZScuXHJcbiAgICovXHJcbiAgcHVibGljIHN1YnN0YW5jZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBNYW5pZmVzdGF0aW9uIGNhbiBiZSBleHByZXNzZWQgYXMgYSBzaW5nbGUgd29yZCwgcGhyYXNlIG9yIGJyaWVmIGRlc2NyaXB0aW9uLiBGb3IgZXhhbXBsZTogbmF1c2VhLCByYXNoIG9yIG5vIHJlYWN0aW9uLiBJdCBpcyBwcmVmZXJhYmxlIHRoYXQgbWFuaWZlc3RhdGlvbiBzaG91bGQgYmUgY29kZWQgd2l0aCBhIHRlcm1pbm9sb2d5LCB3aGVyZSBwb3NzaWJsZS4gVGhlIHZhbHVlcyBlbnRlcmVkIGhlcmUgbWF5IGJlIHVzZWQgdG8gZGlzcGxheSBvbiBhbiBhcHBsaWNhdGlvbiBzY3JlZW4gYXMgcGFydCBvZiBhIGxpc3Qgb2YgYWR2ZXJzZSByZWFjdGlvbnMsIGFzIHJlY29tbWVuZGVkIGluIHRoZSBVSyBOSFMgQ1VJIGd1aWRlbGluZXMuICBUZXJtaW5vbG9naWVzIGNvbW1vbmx5IHVzZWQgaW5jbHVkZSwgYnV0IGFyZSBub3QgbGltaXRlZCB0bywgU05PTUVEIENUIG9yIElDRDEwLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtYW5pZmVzdGF0aW9uOiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIFVzZSB0aGUgZGVzY3JpcHRpb24gdG8gcHJvdmlkZSBhbnkgZGV0YWlscyBvZiBhIHBhcnRpY3VsYXIgZXZlbnQgb2YgdGhlIG9jY3VycmVkIHJlYWN0aW9uIHN1Y2ggYXMgY2lyY3Vtc3RhbmNlcywgcmVhY3Rpb24gc3BlY2lmaWNzLCB3aGF0IGhhcHBlbmVkIGJlZm9yZS9hZnRlci4gSW5mb3JtYXRpb24sIHJlbGF0ZWQgdG8gdGhlIGV2ZW50LCBidXQgbm90IGRlc2NyaWJpbmcgYSBwYXJ0aWN1bGFyIGNhcmUgc2hvdWxkIGJlIGNhcHR1cmVkIGluIHRoZSBjb21tZW50IGZpZWxkLiBGb3IgZXhhbXBsZTogYXQgdGhlIGFnZSBvZiBmb3VyLCB0aGUgcGF0aWVudCB3YXMgZ2l2ZW4gcGVuaWNpbGxpbiBmb3Igc3RyZXAgdGhyb2F0IGFuZCBzdWJzZXF1ZW50bHkgZGV2ZWxvcGVkIHNldmVyZSBoaXZlcy5cclxuICAgKi9cclxuICBwdWJsaWMgZGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFJlY29yZCBvZiB0aGUgZGF0ZSBhbmQvb3IgdGltZSBvZiB0aGUgb25zZXQgb2YgdGhlIFJlYWN0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvbnNldD86IGZoaXIuRmhpckRhdGVUaW1lfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJdCBpcyBhY2tub3dsZWRnZWQgdGhhdCB0aGlzIGFzc2Vzc21lbnQgaXMgdmVyeSBzdWJqZWN0aXZlLiBUaGVyZSBtYXkgYmUgc29tZSBzcGVjaWZpYyBwcmFjdGljZSBkb21haW5zIHdoZXJlIG9iamVjdGl2ZSBzY2FsZXMgaGF2ZSBiZWVuIGFwcGxpZWQuIE9iamVjdGl2ZSBzY2FsZXMgY2FuIGJlIGluY2x1ZGVkIGluIHRoaXMgbW9kZWwgYXMgZXh0ZW5zaW9ucy5cclxuICAgKi9cclxuICBwdWJsaWMgc2V2ZXJpdHk/OiBmaGlyLkZoaXJDb2RlPFJlYWN0aW9uRXZlbnRTZXZlcml0eUNvZGVUeXBlPnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ29kaW5nIG9mIHRoZSByb3V0ZSBvZiBleHBvc3VyZSB3aXRoIGEgdGVybWlub2xvZ3kgc2hvdWxkIGJlIHVzZWQgd2hlcmV2ZXIgcG9zc2libGUuXHJcbiAgICovXHJcbiAgcHVibGljIGV4cG9zdXJlUm91dGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVXNlIHRoaXMgZmllbGQgdG8gcmVjb3JkIGluZm9ybWF0aW9uIGluZGlyZWN0bHkgcmVsYXRlZCB0byBhIHBhcnRpY3VsYXIgZXZlbnQgYW5kIG5vdCBjYXB0dXJlZCBpbiB0aGUgZGVzY3JpcHRpb24uIEZvciBleGFtcGxlOiBDbGluaWNhbCByZWNvcmRzIGFyZSBubyBsb25nZXIgYXZhaWxhYmxlLCByZWNvcmRlZCBiYXNlZCBvbiBpbmZvcm1hdGlvbiBwcm92aWRlZCB0byB0aGUgcGF0aWVudCBieSBoZXIgbW90aGVyIGFuZCBoZXIgbW90aGVyIGlzIGRlY2Vhc2VkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBub3RlOiBmaGlyLkFubm90YXRpb25bXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBBbGxlcmd5SW50b2xlcmFuY2VSZWFjdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEFsbGVyZ3lJbnRvbGVyYW5jZVJlYWN0aW9uQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3N1YnN0YW5jZSddKSB7IHRoaXMuc3Vic3RhbmNlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5zdWJzdGFuY2UpOyB9XHJcbiAgICBpZiAoc291cmNlWydtYW5pZmVzdGF0aW9uJ10pIHsgdGhpcy5tYW5pZmVzdGF0aW9uID0gc291cmNlLm1hbmlmZXN0YXRpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5tYW5pZmVzdGF0aW9uID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2Rlc2NyaXB0aW9uJ10pIHsgdGhpcy5kZXNjcmlwdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuZGVzY3JpcHRpb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnb25zZXQnXSkgeyB0aGlzLm9uc2V0ID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLm9uc2V0fSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3NldmVyaXR5J10pIHsgdGhpcy5zZXZlcml0eSA9IG5ldyBmaGlyLkZoaXJDb2RlPFJlYWN0aW9uRXZlbnRTZXZlcml0eUNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5zZXZlcml0eX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydleHBvc3VyZVJvdXRlJ10pIHsgdGhpcy5leHBvc3VyZVJvdXRlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5leHBvc3VyZVJvdXRlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbm90ZSddKSB7IHRoaXMubm90ZSA9IHNvdXJjZS5ub3RlLm1hcCgoeCkgPT4gbmV3IGZoaXIuQW5ub3RhdGlvbih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm5vdGUgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIHNldmVyaXR5IChBbGxlcmd5SW50b2xlcmFuY2UucmVhY3Rpb24uc2V2ZXJpdHkpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgc2V2ZXJpdHlSZXF1aXJlZENvZGVzKCkge1xyXG4gICAgcmV0dXJuIFJlYWN0aW9uRXZlbnRTZXZlcml0eUNvZGVzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKHRoaXNbXCJzdWJzdGFuY2VcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5zdWJzdGFuY2UuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICghdGhpc1snbWFuaWZlc3RhdGlvbiddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBtYW5pZmVzdGF0aW9uOmZoaXIuQ29kZWFibGVDb25jZXB0W10gZmhpcjogQWxsZXJneUludG9sZXJhbmNlLnJlYWN0aW9uLm1hbmlmZXN0YXRpb246Q29kZWFibGVDb25jZXB0JyB9KTtcclxuICAgIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkodGhpcy5tYW5pZmVzdGF0aW9uKSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnc3RydWN0dXJlJywgZGlhZ25vc3RpY3M6ICdGb3VuZCBzY2FsYXIgaW4gYXJyYXkgcHJvcGVydHkgbWFuaWZlc3RhdGlvbjpmaGlyLkNvZGVhYmxlQ29uY2VwdFtdIGZoaXI6IEFsbGVyZ3lJbnRvbGVyYW5jZS5yZWFjdGlvbi5tYW5pZmVzdGF0aW9uOkNvZGVhYmxlQ29uY2VwdCcgfSk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMubWFuaWZlc3RhdGlvbi5sZW5ndGggPT09IDApIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IG1hbmlmZXN0YXRpb246Zmhpci5Db2RlYWJsZUNvbmNlcHRbXSBmaGlyOiBBbGxlcmd5SW50b2xlcmFuY2UucmVhY3Rpb24ubWFuaWZlc3RhdGlvbjpDb2RlYWJsZUNvbmNlcHQnIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJtYW5pZmVzdGF0aW9uXCJdKSB7IHRoaXMubWFuaWZlc3RhdGlvbi5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wiZGVzY3JpcHRpb25cIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5kZXNjcmlwdGlvbi5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJvbnNldFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm9uc2V0LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1snc2V2ZXJpdHknXSAmJiAoIU9iamVjdC52YWx1ZXMoUmVhY3Rpb25FdmVudFNldmVyaXR5Q29kZXMpLmluY2x1ZGVzKHRoaXMuc2V2ZXJpdHkgYXMgYW55KSkpIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ2NvZGUtaW52YWxpZCcsIGRpYWdub3N0aWNzOiAnSW52YWxpZCBjb2RlIHByb3BlcnR5IHNldmVyaXR5PzpmaGlyLkZoaXJDb2RlPFJlYWN0aW9uRXZlbnRTZXZlcml0eUNvZGVUeXBlPiBmaGlyOiBBbGxlcmd5SW50b2xlcmFuY2UucmVhY3Rpb24uc2V2ZXJpdHk6Y29kZSBSZXF1aXJlZCBiaW5kaW5nIHRvOiBSZWFjdGlvbkV2ZW50U2V2ZXJpdHknIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJzZXZlcml0eVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnNldmVyaXR5LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImV4cG9zdXJlUm91dGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5leHBvc3VyZVJvdXRlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcIm5vdGVcIl0pIHsgdGhpcy5ub3RlLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEFsbGVyZ3lJbnRvbGVyYW5jZSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBBbGxlcmd5SW50b2xlcmFuY2VBcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJBbGxlcmd5SW50b2xlcmFuY2VcInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBhIGJ1c2luZXNzIGlkZW50aWZpZXIsIG5vdCBhIHJlc291cmNlIGlkZW50aWZpZXIgKHNlZSBbZGlzY3Vzc2lvbl0ocmVzb3VyY2UuaHRtbCNpZGVudGlmaWVycykpLiAgSXQgaXMgYmVzdCBwcmFjdGljZSBmb3IgdGhlIGlkZW50aWZpZXIgdG8gb25seSBhcHBlYXIgb24gYSBzaW5nbGUgcmVzb3VyY2UgaW5zdGFuY2UsIGhvd2V2ZXIgYnVzaW5lc3MgcHJhY3RpY2VzIG1heSBvY2Nhc2lvbmFsbHkgZGljdGF0ZSB0aGF0IG11bHRpcGxlIHJlc291cmNlIGluc3RhbmNlcyB3aXRoIHRoZSBzYW1lIGlkZW50aWZpZXIgY2FuIGV4aXN0IC0gcG9zc2libHkgZXZlbiB3aXRoIGRpZmZlcmVudCByZXNvdXJjZSB0eXBlcy4gIEZvciBleGFtcGxlLCBtdWx0aXBsZSBQYXRpZW50IGFuZCBhIFBlcnNvbiByZXNvdXJjZSBpbnN0YW5jZSBtaWdodCBzaGFyZSB0aGUgc2FtZSBzb2NpYWwgaW5zdXJhbmNlIG51bWJlci5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBSZWZlciB0byBbZGlzY3Vzc2lvbl0oZXh0ZW5zaWJpbGl0eS5odG1sI1NwZWNpYWwtQ2FzZSkgaWYgY2xpbmNhbFN0YXR1cyBpcyBtaXNzaW5nIGRhdGEuXHJcbiAgICogVGhlIGRhdGEgdHlwZSBpcyBDb2RlYWJsZUNvbmNlcHQgYmVjYXVzZSBjbGluaWNhbFN0YXR1cyBoYXMgc29tZSBjbGluaWNhbCBqdWRnbWVudCBpbnZvbHZlZCwgc3VjaCB0aGF0IHRoZXJlIG1pZ2h0IG5lZWQgdG8gYmUgbW9yZSBzcGVjaWZpY2l0eSB0aGFuIHRoZSByZXF1aXJlZCBGSElSIHZhbHVlIHNldCBhbGxvd3MuIEZvciBleGFtcGxlLCBhIFNOT01FRCBjb2RpbmcgbWlnaHQgYWxsb3cgZm9yIGFkZGl0aW9uYWwgc3BlY2lmaWNpdHkuXHJcbiAgICovXHJcbiAgY2xpbmljYWxTdGF0dXM/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRhIHR5cGUgaXMgQ29kZWFibGVDb25jZXB0IGJlY2F1c2UgdmVyaWZpY2F0aW9uU3RhdHVzIGhhcyBzb21lIGNsaW5pY2FsIGp1ZGdtZW50IGludm9sdmVkLCBzdWNoIHRoYXQgdGhlcmUgbWlnaHQgbmVlZCB0byBiZSBtb3JlIHNwZWNpZmljaXR5IHRoYW4gdGhlIHJlcXVpcmVkIEZISVIgdmFsdWUgc2V0IGFsbG93cy4gRm9yIGV4YW1wbGUsIGEgU05PTUVEIGNvZGluZyBtaWdodCBhbGxvdyBmb3IgYWRkaXRpb25hbCBzcGVjaWZpY2l0eS5cclxuICAgKi9cclxuICB2ZXJpZmljYXRpb25TdGF0dXM/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFsbGVyZ2ljICh0eXBpY2FsbHkgaW1tdW5lLW1lZGlhdGVkKSByZWFjdGlvbnMgaGF2ZSBiZWVuIHRyYWRpdGlvbmFsbHkgcmVnYXJkZWQgYXMgYW4gaW5kaWNhdG9yIGZvciBwb3RlbnRpYWwgZXNjYWxhdGlvbiB0byBzaWduaWZpY2FudCBmdXR1cmUgcmlzay4gQ29udGVtcG9yYXJ5IGtub3dsZWRnZSBzdWdnZXN0cyB0aGF0IHNvbWUgcmVhY3Rpb25zIHByZXZpb3VzbHkgdGhvdWdodCB0byBiZSBpbW11bmUtbWVkaWF0ZWQgYXJlLCBpbiBmYWN0LCBub24taW1tdW5lLCBidXQgaW4gc29tZSBjYXNlcyBjYW4gc3RpbGwgcG9zZSBhIGxpZmUgdGhyZWF0ZW5pbmcgcmlzay4gSXQgaXMgYWNrbm93bGVkZ2VkIHRoYXQgbWFueSBjbGluaWNpYW5zIG1pZ2h0IG5vdCBiZSBpbiBhIHBvc2l0aW9uIHRvIGRpc3Rpbmd1aXNoIHRoZSBtZWNoYW5pc20gb2YgYSBwYXJ0aWN1bGFyIHJlYWN0aW9uLiBPZnRlbiB0aGUgdGVybSBcImFsbGVyZ3lcIiBpcyB1c2VkIHJhdGhlciBnZW5lcmljYWxseSBhbmQgbWF5IG92ZXJsYXAgd2l0aCB0aGUgdXNlIG9mIFwiaW50b2xlcmFuY2VcIiAtIGluIHByYWN0aWNlIHRoZSBib3VuZGFyaWVzIGJldHdlZW4gdGhlc2UgdHdvIGNvbmNlcHRzIG1pZ2h0IG5vdCBiZSB3ZWxsLWRlZmluZWQgb3IgdW5kZXJzdG9vZC4gVGhpcyBkYXRhIGVsZW1lbnQgaXMgaW5jbHVkZWQgbmV2ZXJ0aGVsZXNzLCBiZWNhdXNlIG1hbnkgbGVnYWN5IHN5c3RlbXMgaGF2ZSBjYXB0dXJlZCB0aGlzIGF0dHJpYnV0ZS4gSW1tdW5vbG9naWMgdGVzdGluZyBtYXkgcHJvdmlkZSBzdXBwb3J0aW5nIGV2aWRlbmNlIGZvciB0aGUgYmFzaXMgb2YgdGhlIHJlYWN0aW9uIGFuZCB0aGUgY2F1c2F0aXZlIHN1YnN0YW5jZSwgYnV0IG5vIHRlc3RzIGFyZSAxMDAlIHNlbnNpdGl2ZSBvciBzcGVjaWZpYyBmb3Igc2Vuc2l0aXZpdHkgdG8gYSBwYXJ0aWN1bGFyIHN1YnN0YW5jZS4gSWYsIGFzIGlzIGNvbW1vbmx5IHRoZSBjYXNlLCBpdCBpcyB1bmNsZWFyIHdoZXRoZXIgdGhlIHJlYWN0aW9uIGlzIGR1ZSB0byBhbiBhbGxlcmd5IG9yIGFuIGludG9sZXJhbmNlLCB0aGVuIHRoZSB0eXBlIGVsZW1lbnQgc2hvdWxkIGJlIG9taXR0ZWQgZnJvbSB0aGUgcmVzb3VyY2UuXHJcbiAgICovXHJcbiAgdHlwZT86IGZoaXIuRmhpckNvZGU8QWxsZXJneUludG9sZXJhbmNlVHlwZUNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZGF0YSBlbGVtZW50IGhhcyBiZWVuIGluY2x1ZGVkIGJlY2F1c2UgaXQgaXMgY3VycmVudGx5IGJlaW5nIGNhcHR1cmVkIGluIHNvbWUgY2xpbmljYWwgc3lzdGVtcy4gVGhpcyBkYXRhIGNhbiBiZSBkZXJpdmVkIGZyb20gdGhlIHN1YnN0YW5jZSB3aGVyZSBjb2Rpbmcgc3lzdGVtcyBhcmUgdXNlZCwgYW5kIGlzIGVmZmVjdGl2ZWx5IHJlZHVuZGFudCBpbiB0aGF0IHNpdHVhdGlvbi4gIFdoZW4gc2VhcmNoaW5nIG9uIGNhdGVnb3J5LCBjb25zaWRlciB0aGUgaW1wbGljYXRpb25zIG9mIEFsbGVyZ3lJbnRvbGVyYW5jZSByZXNvdXJjZXMgd2l0aG91dCBhIGNhdGVnb3J5LiAgRm9yIGV4YW1wbGUsIHdoZW4gc2VhcmNoaW5nIG9uIGNhdGVnb3J5ID0gbWVkaWNhdGlvbiwgbWVkaWNhdGlvbiBhbGxlcmdpZXMgdGhhdCBkb24ndCBoYXZlIGEgY2F0ZWdvcnkgdmFsdWVkIHdpbGwgbm90IGJlIHJldHVybmVkLiAgUmVmZXIgdG8gW3NlYXJjaF0oc2VhcmNoLmh0bWwpIGZvciBtb3JlIGluZm9ybWF0aW9uIG9uIGhvdyB0byBzZWFyY2ggY2F0ZWdvcnkgd2l0aCBhIDptaXNzaW5nIG1vZGlmaWVyIHRvIGdldCBhbGxlcmdpZXMgdGhhdCBkb24ndCBoYXZlIGEgY2F0ZWdvcnkuICBBZGRpdGlvbmFsbHksIGNhdGVnb3J5IHNob3VsZCBiZSB1c2VkIHdpdGggY2F1dGlvbiBiZWNhdXNlIGNhdGVnb3J5IGNhbiBiZSBzdWJqZWN0aXZlIGJhc2VkIG9uIHRoZSBzZW5kZXIuXHJcbiAgICovXHJcbiAgY2F0ZWdvcnk/OiBmaGlyLkZoaXJDb2RlPEFsbGVyZ3lJbnRvbGVyYW5jZUNhdGVnb3J5Q29kZVR5cGU+W118c3RyaW5nW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkZWZhdWx0IGNyaXRpY2FsaXR5IHZhbHVlIGZvciBhbnkgcHJvcGVuc2l0eSB0byBhbiBhZHZlcnNlIHJlYWN0aW9uIHNob3VsZCBiZSAnTG93IFJpc2snLCBpbmRpY2F0aW5nIGF0IHRoZSB2ZXJ5IGxlYXN0IGEgcmVsYXRpdmUgY29udHJhaW5kaWNhdGlvbiB0byBkZWxpYmVyYXRlIG9yIHZvbHVudGFyeSBleHBvc3VyZSB0byB0aGUgc3Vic3RhbmNlLiAnSGlnaCBSaXNrJyBpcyBmbGFnZ2VkIGlmIHRoZSBjbGluaWNpYW4gaGFzIGlkZW50aWZpZWQgYSBwcm9wZW5zaXR5IGZvciBhIG1vcmUgc2VyaW91cyBvciBwb3RlbnRpYWxseSBsaWZlLXRocmVhdGVuaW5nIHJlYWN0aW9uLCBzdWNoIGFzIGFuYXBoeWxheGlzLCBhbmQgaW1wbGllcyBhbiBhYnNvbHV0ZSBjb250cmFpbmRpY2F0aW9uIHRvIGRlbGliZXJhdGUgb3Igdm9sdW50YXJ5IGV4cG9zdXJlIHRvIHRoZSBzdWJzdGFuY2UuIElmIHRoaXMgZWxlbWVudCBpcyBtaXNzaW5nLCB0aGUgY3JpdGljYWxpdHkgaXMgdW5rbm93biAodGhvdWdoIGl0IG1heSBiZSBrbm93biBlbHNld2hlcmUpLiAgU3lzdGVtcyB0aGF0IGNhcHR1cmUgYSBzZXZlcml0eSBhdCB0aGUgY29uZGl0aW9uIGxldmVsIGFyZSBhY3R1YWxseSByZXByZXNlbnRpbmcgdGhlIGNvbmNlcHQgb2YgY3JpdGljYWxpdHkgd2hlcmVhcyB0aGUgc2V2ZXJpdHkgZG9jdW1lbnRlZCBhdCB0aGUgcmVhY3Rpb24gbGV2ZWwgaXMgcmVwcmVzZW50aW5nIHRoZSB0cnVlIHJlYWN0aW9uIHNldmVyaXR5LiAgRXhpc3Rpbmcgc3lzdGVtcyB0aGF0IGFyZSBjYXB0dXJpbmcgYm90aCBjb25kaXRpb24gY3JpdGljYWxpdHkgYW5kIHJlYWN0aW9uIHNldmVyaXR5IG1heSB1c2UgdGhlIHRlcm0gXCJzZXZlcml0eVwiIHRvIHJlcHJlc2VudCBib3RoLiAgQ3JpdGljYWxpdHkgaXMgdGhlIHdvcnN0IGl0IGNvdWxkIGJlIGluIHRoZSBmdXR1cmUgKGkuZS4gc2l0dWF0aW9uLWFnbm9zdGljKSB3aGVyZWFzIHNldmVyaXR5IGlzIHNpdHVhdGlvbi1kZXBlbmRlbnQuXHJcbiAgICovXHJcbiAgY3JpdGljYWxpdHk/OiBmaGlyLkZoaXJDb2RlPEFsbGVyZ3lJbnRvbGVyYW5jZUNyaXRpY2FsaXR5Q29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSXQgaXMgc3Ryb25nbHkgcmVjb21tZW5kZWQgdGhhdCB0aGlzIGVsZW1lbnQgYmUgcG9wdWxhdGVkIHVzaW5nIGEgdGVybWlub2xvZ3ksIHdoZXJlIHBvc3NpYmxlLiBGb3IgZXhhbXBsZSwgc29tZSB0ZXJtaW5vbG9naWVzIHVzZWQgaW5jbHVkZSBSeE5vcm0sIFNOT01FRCBDVCwgRE0rRCwgTkRGUlQsIElDRC05LCBJREMtMTAsIFVOSUksIGFuZCBBVEMuIFBsYWluIHRleHQgc2hvdWxkIG9ubHkgYmUgdXNlZCBpZiB0aGVyZSBpcyBubyBhcHByb3ByaWF0ZSB0ZXJtaW5vbG9neSBhdmFpbGFibGUuIEFkZGl0aW9uYWwgZGV0YWlscyBjYW4gYmUgc3BlY2lmaWVkIGluIHRoZSB0ZXh0LlxyXG4gICAqIFdoZW4gYSBzdWJzdGFuY2Ugb3IgcHJvZHVjdCBjb2RlIGlzIHNwZWNpZmllZCBmb3IgdGhlICdjb2RlJyBlbGVtZW50LCB0aGUgXCJkZWZhdWx0XCIgc2VtYW50aWMgY29udGV4dCBpcyB0aGF0IHRoaXMgaXMgYSBwb3NpdGl2ZSBzdGF0ZW1lbnQgb2YgYW4gYWxsZXJneSBvciBpbnRvbGVyYW5jZSAoZGVwZW5kaW5nIG9uIHRoZSB2YWx1ZSBvZiB0aGUgJ3R5cGUnIGVsZW1lbnQsIGlmIHByZXNlbnQpIGNvbmRpdGlvbiB0byB0aGUgc3BlY2lmaWVkIHN1YnN0YW5jZS9wcm9kdWN0LiAgSW4gdGhlIGNvcnJlc3BvbmRpbmcgU05PTUVEIENUIGFsbGVyZ3kgbW9kZWwsIHRoZSBzcGVjaWZpZWQgc3Vic3RhbmNlL3Byb2R1Y3QgaXMgdGhlIHRhcmdldCAoZGVzdGluYXRpb24pIG9mIHRoZSBcIkNhdXNhdGl2ZSBhZ2VudFwiIHJlbGF0aW9uc2hpcC5cclxuICAgKiBUaGUgJ3N1YnN0YW5jZUV4cG9zdXJlUmlzaycgZXh0ZW5zaW9uIGlzIGF2YWlsYWJsZSBhcyBhIHN0cnVjdHVyZWQgYW5kIG1vcmUgZmxleGlibGUgYWx0ZXJuYXRpdmUgdG8gdGhlICdjb2RlJyBlbGVtZW50IGZvciBtYWtpbmcgcG9zaXRpdmUgb3IgbmVnYXRpdmUgYWxsZXJneSBvciBpbnRvbGVyYW5jZSBzdGF0ZW1lbnRzLiAgVGhpcyBleHRlbnNpb24gcHJvdmlkZXMgdGhlIGNhcGFiaWxpdHkgdG8gbWFrZSBcIm5vIGtub3duIGFsbGVyZ3lcIiAob3IgXCJubyByaXNrIG9mIGFkdmVyc2UgcmVhY3Rpb25cIikgc3RhdGVtZW50cyByZWdhcmRpbmcgYW55IGNvZGVkIHN1YnN0YW5jZS9wcm9kdWN0IChpbmNsdWRpbmcgY2FzZXMgd2hlbiBhIHByZS1jb29yZGluYXRlZCBcIm5vIGFsbGVyZ3kgdG8geFwiIGNvbmNlcHQgZm9yIHRoYXQgc3Vic3RhbmNlL3Byb2R1Y3QgZG9lcyBub3QgZXhpc3QpLiAgSWYgdGhlICdzdWJzdGFuY2VFeHBvc3VyZVJpc2snIGV4dGVuc2lvbiBpcyBwcmVzZW50LCB0aGUgQWxsZXJneUludG9sZXJhbmNlLmNvZGUgZWxlbWVudCBTSEFMTCBiZSBvbWl0dGVkLlxyXG4gICAqL1xyXG4gIGNvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXRpZW50IHdobyBoYXMgdGhlIGFsbGVyZ3kgb3IgaW50b2xlcmFuY2UuXHJcbiAgICovXHJcbiAgcGF0aWVudDogZmhpci5SZWZlcmVuY2VBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGVuY291bnRlciB3aGVuIHRoZSBhbGxlcmd5IG9yIGludG9sZXJhbmNlIHdhcyBhc3NlcnRlZC5cclxuICAgKi9cclxuICBlbmNvdW50ZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEVzdGltYXRlZCBvciBhY3R1YWwgZGF0ZSwgIGRhdGUtdGltZSwgb3IgYWdlIHdoZW4gYWxsZXJneSBvciBpbnRvbGVyYW5jZSB3YXMgaWRlbnRpZmllZC5cclxuICAgKi9cclxuICBvbnNldD86IGZoaXIuRmhpckRhdGVUaW1lfGZoaXIuQWdlfGZoaXIuUGVyaW9kfGZoaXIuUmFuZ2V8Zmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFc3RpbWF0ZWQgb3IgYWN0dWFsIGRhdGUsICBkYXRlLXRpbWUsIG9yIGFnZSB3aGVuIGFsbGVyZ3kgb3IgaW50b2xlcmFuY2Ugd2FzIGlkZW50aWZpZWQuXHJcbiAgICovXHJcbiAgb25zZXREYXRlVGltZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXN0aW1hdGVkIG9yIGFjdHVhbCBkYXRlLCAgZGF0ZS10aW1lLCBvciBhZ2Ugd2hlbiBhbGxlcmd5IG9yIGludG9sZXJhbmNlIHdhcyBpZGVudGlmaWVkLlxyXG4gICAqL1xyXG4gIG9uc2V0QWdlPzogZmhpci5BZ2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFc3RpbWF0ZWQgb3IgYWN0dWFsIGRhdGUsICBkYXRlLXRpbWUsIG9yIGFnZSB3aGVuIGFsbGVyZ3kgb3IgaW50b2xlcmFuY2Ugd2FzIGlkZW50aWZpZWQuXHJcbiAgICovXHJcbiAgb25zZXRQZXJpb2Q/OiBmaGlyLlBlcmlvZEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEVzdGltYXRlZCBvciBhY3R1YWwgZGF0ZSwgIGRhdGUtdGltZSwgb3IgYWdlIHdoZW4gYWxsZXJneSBvciBpbnRvbGVyYW5jZSB3YXMgaWRlbnRpZmllZC5cclxuICAgKi9cclxuICBvbnNldFJhbmdlPzogZmhpci5SYW5nZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEVzdGltYXRlZCBvciBhY3R1YWwgZGF0ZSwgIGRhdGUtdGltZSwgb3IgYWdlIHdoZW4gYWxsZXJneSBvciBpbnRvbGVyYW5jZSB3YXMgaWRlbnRpZmllZC5cclxuICAgKi9cclxuICBvbnNldFN0cmluZz86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZWNvcmRlZERhdGUgcmVwcmVzZW50cyB3aGVuIHRoaXMgcGFydGljdWxhciBBbGxlcmd5SW50b2xlcmFuY2UgcmVjb3JkIHdhcyBjcmVhdGVkIGluIHRoZSBzeXN0ZW0sIHdoaWNoIGlzIG9mdGVuIGEgc3lzdGVtLWdlbmVyYXRlZCBkYXRlLlxyXG4gICAqL1xyXG4gIHJlY29yZGVkRGF0ZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaXZpZHVhbCB3aG8gcmVjb3JkZWQgdGhlIHJlY29yZCBhbmQgdGFrZXMgcmVzcG9uc2liaWxpdHkgZm9yIGl0cyBjb250ZW50LlxyXG4gICAqL1xyXG4gIHJlY29yZGVyPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcmVjb3JkZXIgdGFrZXMgcmVzcG9uc2liaWxpdHkgZm9yIHRoZSBjb250ZW50LCBidXQgY2FuIHJlZmVyZW5jZSB0aGUgc291cmNlIGZyb20gd2hlcmUgdGhleSBnb3QgaXQuXHJcbiAgICovXHJcbiAgYXNzZXJ0ZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZGF0ZSBtYXkgYmUgcmVwbGljYXRlZCBieSBvbmUgb2YgdGhlIE9uc2V0IG9mIFJlYWN0aW9uIGRhdGVzLiBXaGVyZSBhIHRleHR1YWwgcmVwcmVzZW50YXRpb24gb2YgdGhlIGRhdGUgb2YgbGFzdCBvY2N1cnJlbmNlIGlzIHJlcXVpcmVkIGUuZy4gJ0luIENoaWxkaG9vZCwgJzEwIHllYXJzIGFnbycgdGhlIENvbW1lbnQgZWxlbWVudCBzaG91bGQgYmUgdXNlZC5cclxuICAgKi9cclxuICBsYXN0T2NjdXJyZW5jZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRm9yIGV4YW1wbGU6IGluY2x1ZGluZyByZWFzb24gZm9yIGZsYWdnaW5nIGEgc2VyaW91c25lc3Mgb2YgJ0hpZ2ggUmlzayc7IGFuZCBpbnN0cnVjdGlvbnMgcmVsYXRlZCB0byBmdXR1cmUgZXhwb3N1cmUgb3IgYWRtaW5pc3RyYXRpb24gb2YgdGhlIHN1YnN0YW5jZSwgc3VjaCBhcyBhZG1pbmlzdHJhdGlvbiB3aXRoaW4gYW4gSW50ZW5zaXZlIENhcmUgVW5pdCBvciB1bmRlciBjb3J0aWNvc3Rlcm9pZCBjb3Zlci4gVGhlIG5vdGVzIHNob3VsZCBiZSByZWxhdGVkIHRvIGFuIGFsbGVyZ3kgb3IgaW50b2xlcmFuY2UgYXMgYSBjb25kaXRpb24gaW4gZ2VuZXJhbCBhbmQgbm90IHJlbGF0ZWQgdG8gYW55IHBhcnRpY3VsYXIgZXBpc29kZSBvZiBpdC4gRm9yIGVwaXNvZGUgbm90ZXMgYW5kIGRlc2NyaXB0aW9ucywgdXNlIEFsbGVyZ3lJbnRvbGVyYW5jZS5ldmVudC5kZXNjcmlwdGlvbiBhbmQgIEFsbGVyZ3lJbnRvbGVyYW5jZS5ldmVudC5ub3Rlcy5cclxuICAgKi9cclxuICBub3RlPzogZmhpci5Bbm5vdGF0aW9uQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZXRhaWxzIGFib3V0IGVhY2ggYWR2ZXJzZSByZWFjdGlvbiBldmVudCBsaW5rZWQgdG8gZXhwb3N1cmUgdG8gdGhlIGlkZW50aWZpZWQgc3Vic3RhbmNlLlxyXG4gICAqL1xyXG4gIHJlYWN0aW9uPzogZmhpci5BbGxlcmd5SW50b2xlcmFuY2VSZWFjdGlvbkFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSaXNrIG9mIGhhcm1mdWwgb3IgdW5kZXNpcmFibGUsIHBoeXNpb2xvZ2ljYWwgcmVzcG9uc2Ugd2hpY2ggaXMgdW5pcXVlIHRvIGFuIGluZGl2aWR1YWwgYW5kIGFzc29jaWF0ZWQgd2l0aCBleHBvc3VyZSB0byBhIHN1YnN0YW5jZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBBbGxlcmd5SW50b2xlcmFuY2UgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0FsbGVyZ3lJbnRvbGVyYW5jZSc7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJBbGxlcmd5SW50b2xlcmFuY2VcIjtcclxuICAvKipcclxuICAgKiBUaGlzIGlzIGEgYnVzaW5lc3MgaWRlbnRpZmllciwgbm90IGEgcmVzb3VyY2UgaWRlbnRpZmllciAoc2VlIFtkaXNjdXNzaW9uXShyZXNvdXJjZS5odG1sI2lkZW50aWZpZXJzKSkuICBJdCBpcyBiZXN0IHByYWN0aWNlIGZvciB0aGUgaWRlbnRpZmllciB0byBvbmx5IGFwcGVhciBvbiBhIHNpbmdsZSByZXNvdXJjZSBpbnN0YW5jZSwgaG93ZXZlciBidXNpbmVzcyBwcmFjdGljZXMgbWF5IG9jY2FzaW9uYWxseSBkaWN0YXRlIHRoYXQgbXVsdGlwbGUgcmVzb3VyY2UgaW5zdGFuY2VzIHdpdGggdGhlIHNhbWUgaWRlbnRpZmllciBjYW4gZXhpc3QgLSBwb3NzaWJseSBldmVuIHdpdGggZGlmZmVyZW50IHJlc291cmNlIHR5cGVzLiAgRm9yIGV4YW1wbGUsIG11bHRpcGxlIFBhdGllbnQgYW5kIGEgUGVyc29uIHJlc291cmNlIGluc3RhbmNlIG1pZ2h0IHNoYXJlIHRoZSBzYW1lIHNvY2lhbCBpbnN1cmFuY2UgbnVtYmVyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyOiBmaGlyLklkZW50aWZpZXJbXTtcclxuICAvKipcclxuICAgKiBSZWZlciB0byBbZGlzY3Vzc2lvbl0oZXh0ZW5zaWJpbGl0eS5odG1sI1NwZWNpYWwtQ2FzZSkgaWYgY2xpbmNhbFN0YXR1cyBpcyBtaXNzaW5nIGRhdGEuXHJcbiAgICogVGhlIGRhdGEgdHlwZSBpcyBDb2RlYWJsZUNvbmNlcHQgYmVjYXVzZSBjbGluaWNhbFN0YXR1cyBoYXMgc29tZSBjbGluaWNhbCBqdWRnbWVudCBpbnZvbHZlZCwgc3VjaCB0aGF0IHRoZXJlIG1pZ2h0IG5lZWQgdG8gYmUgbW9yZSBzcGVjaWZpY2l0eSB0aGFuIHRoZSByZXF1aXJlZCBGSElSIHZhbHVlIHNldCBhbGxvd3MuIEZvciBleGFtcGxlLCBhIFNOT01FRCBjb2RpbmcgbWlnaHQgYWxsb3cgZm9yIGFkZGl0aW9uYWwgc3BlY2lmaWNpdHkuXHJcbiAgICovXHJcbiAgcHVibGljIGNsaW5pY2FsU3RhdHVzPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRhIHR5cGUgaXMgQ29kZWFibGVDb25jZXB0IGJlY2F1c2UgdmVyaWZpY2F0aW9uU3RhdHVzIGhhcyBzb21lIGNsaW5pY2FsIGp1ZGdtZW50IGludm9sdmVkLCBzdWNoIHRoYXQgdGhlcmUgbWlnaHQgbmVlZCB0byBiZSBtb3JlIHNwZWNpZmljaXR5IHRoYW4gdGhlIHJlcXVpcmVkIEZISVIgdmFsdWUgc2V0IGFsbG93cy4gRm9yIGV4YW1wbGUsIGEgU05PTUVEIGNvZGluZyBtaWdodCBhbGxvdyBmb3IgYWRkaXRpb25hbCBzcGVjaWZpY2l0eS5cclxuICAgKi9cclxuICBwdWJsaWMgdmVyaWZpY2F0aW9uU3RhdHVzPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFsbGVyZ2ljICh0eXBpY2FsbHkgaW1tdW5lLW1lZGlhdGVkKSByZWFjdGlvbnMgaGF2ZSBiZWVuIHRyYWRpdGlvbmFsbHkgcmVnYXJkZWQgYXMgYW4gaW5kaWNhdG9yIGZvciBwb3RlbnRpYWwgZXNjYWxhdGlvbiB0byBzaWduaWZpY2FudCBmdXR1cmUgcmlzay4gQ29udGVtcG9yYXJ5IGtub3dsZWRnZSBzdWdnZXN0cyB0aGF0IHNvbWUgcmVhY3Rpb25zIHByZXZpb3VzbHkgdGhvdWdodCB0byBiZSBpbW11bmUtbWVkaWF0ZWQgYXJlLCBpbiBmYWN0LCBub24taW1tdW5lLCBidXQgaW4gc29tZSBjYXNlcyBjYW4gc3RpbGwgcG9zZSBhIGxpZmUgdGhyZWF0ZW5pbmcgcmlzay4gSXQgaXMgYWNrbm93bGVkZ2VkIHRoYXQgbWFueSBjbGluaWNpYW5zIG1pZ2h0IG5vdCBiZSBpbiBhIHBvc2l0aW9uIHRvIGRpc3Rpbmd1aXNoIHRoZSBtZWNoYW5pc20gb2YgYSBwYXJ0aWN1bGFyIHJlYWN0aW9uLiBPZnRlbiB0aGUgdGVybSBcImFsbGVyZ3lcIiBpcyB1c2VkIHJhdGhlciBnZW5lcmljYWxseSBhbmQgbWF5IG92ZXJsYXAgd2l0aCB0aGUgdXNlIG9mIFwiaW50b2xlcmFuY2VcIiAtIGluIHByYWN0aWNlIHRoZSBib3VuZGFyaWVzIGJldHdlZW4gdGhlc2UgdHdvIGNvbmNlcHRzIG1pZ2h0IG5vdCBiZSB3ZWxsLWRlZmluZWQgb3IgdW5kZXJzdG9vZC4gVGhpcyBkYXRhIGVsZW1lbnQgaXMgaW5jbHVkZWQgbmV2ZXJ0aGVsZXNzLCBiZWNhdXNlIG1hbnkgbGVnYWN5IHN5c3RlbXMgaGF2ZSBjYXB0dXJlZCB0aGlzIGF0dHJpYnV0ZS4gSW1tdW5vbG9naWMgdGVzdGluZyBtYXkgcHJvdmlkZSBzdXBwb3J0aW5nIGV2aWRlbmNlIGZvciB0aGUgYmFzaXMgb2YgdGhlIHJlYWN0aW9uIGFuZCB0aGUgY2F1c2F0aXZlIHN1YnN0YW5jZSwgYnV0IG5vIHRlc3RzIGFyZSAxMDAlIHNlbnNpdGl2ZSBvciBzcGVjaWZpYyBmb3Igc2Vuc2l0aXZpdHkgdG8gYSBwYXJ0aWN1bGFyIHN1YnN0YW5jZS4gSWYsIGFzIGlzIGNvbW1vbmx5IHRoZSBjYXNlLCBpdCBpcyB1bmNsZWFyIHdoZXRoZXIgdGhlIHJlYWN0aW9uIGlzIGR1ZSB0byBhbiBhbGxlcmd5IG9yIGFuIGludG9sZXJhbmNlLCB0aGVuIHRoZSB0eXBlIGVsZW1lbnQgc2hvdWxkIGJlIG9taXR0ZWQgZnJvbSB0aGUgcmVzb3VyY2UuXHJcbiAgICovXHJcbiAgcHVibGljIHR5cGU/OiBmaGlyLkZoaXJDb2RlPEFsbGVyZ3lJbnRvbGVyYW5jZVR5cGVDb2RlVHlwZT58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZGF0YSBlbGVtZW50IGhhcyBiZWVuIGluY2x1ZGVkIGJlY2F1c2UgaXQgaXMgY3VycmVudGx5IGJlaW5nIGNhcHR1cmVkIGluIHNvbWUgY2xpbmljYWwgc3lzdGVtcy4gVGhpcyBkYXRhIGNhbiBiZSBkZXJpdmVkIGZyb20gdGhlIHN1YnN0YW5jZSB3aGVyZSBjb2Rpbmcgc3lzdGVtcyBhcmUgdXNlZCwgYW5kIGlzIGVmZmVjdGl2ZWx5IHJlZHVuZGFudCBpbiB0aGF0IHNpdHVhdGlvbi4gIFdoZW4gc2VhcmNoaW5nIG9uIGNhdGVnb3J5LCBjb25zaWRlciB0aGUgaW1wbGljYXRpb25zIG9mIEFsbGVyZ3lJbnRvbGVyYW5jZSByZXNvdXJjZXMgd2l0aG91dCBhIGNhdGVnb3J5LiAgRm9yIGV4YW1wbGUsIHdoZW4gc2VhcmNoaW5nIG9uIGNhdGVnb3J5ID0gbWVkaWNhdGlvbiwgbWVkaWNhdGlvbiBhbGxlcmdpZXMgdGhhdCBkb24ndCBoYXZlIGEgY2F0ZWdvcnkgdmFsdWVkIHdpbGwgbm90IGJlIHJldHVybmVkLiAgUmVmZXIgdG8gW3NlYXJjaF0oc2VhcmNoLmh0bWwpIGZvciBtb3JlIGluZm9ybWF0aW9uIG9uIGhvdyB0byBzZWFyY2ggY2F0ZWdvcnkgd2l0aCBhIDptaXNzaW5nIG1vZGlmaWVyIHRvIGdldCBhbGxlcmdpZXMgdGhhdCBkb24ndCBoYXZlIGEgY2F0ZWdvcnkuICBBZGRpdGlvbmFsbHksIGNhdGVnb3J5IHNob3VsZCBiZSB1c2VkIHdpdGggY2F1dGlvbiBiZWNhdXNlIGNhdGVnb3J5IGNhbiBiZSBzdWJqZWN0aXZlIGJhc2VkIG9uIHRoZSBzZW5kZXIuXHJcbiAgICovXHJcbiAgcHVibGljIGNhdGVnb3J5OiBmaGlyLkZoaXJDb2RlPEFsbGVyZ3lJbnRvbGVyYW5jZUNhdGVnb3J5Q29kZVR5cGU+W107XHJcbiAgLyoqXHJcbiAgICogVGhlIGRlZmF1bHQgY3JpdGljYWxpdHkgdmFsdWUgZm9yIGFueSBwcm9wZW5zaXR5IHRvIGFuIGFkdmVyc2UgcmVhY3Rpb24gc2hvdWxkIGJlICdMb3cgUmlzaycsIGluZGljYXRpbmcgYXQgdGhlIHZlcnkgbGVhc3QgYSByZWxhdGl2ZSBjb250cmFpbmRpY2F0aW9uIHRvIGRlbGliZXJhdGUgb3Igdm9sdW50YXJ5IGV4cG9zdXJlIHRvIHRoZSBzdWJzdGFuY2UuICdIaWdoIFJpc2snIGlzIGZsYWdnZWQgaWYgdGhlIGNsaW5pY2lhbiBoYXMgaWRlbnRpZmllZCBhIHByb3BlbnNpdHkgZm9yIGEgbW9yZSBzZXJpb3VzIG9yIHBvdGVudGlhbGx5IGxpZmUtdGhyZWF0ZW5pbmcgcmVhY3Rpb24sIHN1Y2ggYXMgYW5hcGh5bGF4aXMsIGFuZCBpbXBsaWVzIGFuIGFic29sdXRlIGNvbnRyYWluZGljYXRpb24gdG8gZGVsaWJlcmF0ZSBvciB2b2x1bnRhcnkgZXhwb3N1cmUgdG8gdGhlIHN1YnN0YW5jZS4gSWYgdGhpcyBlbGVtZW50IGlzIG1pc3NpbmcsIHRoZSBjcml0aWNhbGl0eSBpcyB1bmtub3duICh0aG91Z2ggaXQgbWF5IGJlIGtub3duIGVsc2V3aGVyZSkuICBTeXN0ZW1zIHRoYXQgY2FwdHVyZSBhIHNldmVyaXR5IGF0IHRoZSBjb25kaXRpb24gbGV2ZWwgYXJlIGFjdHVhbGx5IHJlcHJlc2VudGluZyB0aGUgY29uY2VwdCBvZiBjcml0aWNhbGl0eSB3aGVyZWFzIHRoZSBzZXZlcml0eSBkb2N1bWVudGVkIGF0IHRoZSByZWFjdGlvbiBsZXZlbCBpcyByZXByZXNlbnRpbmcgdGhlIHRydWUgcmVhY3Rpb24gc2V2ZXJpdHkuICBFeGlzdGluZyBzeXN0ZW1zIHRoYXQgYXJlIGNhcHR1cmluZyBib3RoIGNvbmRpdGlvbiBjcml0aWNhbGl0eSBhbmQgcmVhY3Rpb24gc2V2ZXJpdHkgbWF5IHVzZSB0aGUgdGVybSBcInNldmVyaXR5XCIgdG8gcmVwcmVzZW50IGJvdGguICBDcml0aWNhbGl0eSBpcyB0aGUgd29yc3QgaXQgY291bGQgYmUgaW4gdGhlIGZ1dHVyZSAoaS5lLiBzaXR1YXRpb24tYWdub3N0aWMpIHdoZXJlYXMgc2V2ZXJpdHkgaXMgc2l0dWF0aW9uLWRlcGVuZGVudC5cclxuICAgKi9cclxuICBwdWJsaWMgY3JpdGljYWxpdHk/OiBmaGlyLkZoaXJDb2RlPEFsbGVyZ3lJbnRvbGVyYW5jZUNyaXRpY2FsaXR5Q29kZVR5cGU+fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJdCBpcyBzdHJvbmdseSByZWNvbW1lbmRlZCB0aGF0IHRoaXMgZWxlbWVudCBiZSBwb3B1bGF0ZWQgdXNpbmcgYSB0ZXJtaW5vbG9neSwgd2hlcmUgcG9zc2libGUuIEZvciBleGFtcGxlLCBzb21lIHRlcm1pbm9sb2dpZXMgdXNlZCBpbmNsdWRlIFJ4Tm9ybSwgU05PTUVEIENULCBETStELCBOREZSVCwgSUNELTksIElEQy0xMCwgVU5JSSwgYW5kIEFUQy4gUGxhaW4gdGV4dCBzaG91bGQgb25seSBiZSB1c2VkIGlmIHRoZXJlIGlzIG5vIGFwcHJvcHJpYXRlIHRlcm1pbm9sb2d5IGF2YWlsYWJsZS4gQWRkaXRpb25hbCBkZXRhaWxzIGNhbiBiZSBzcGVjaWZpZWQgaW4gdGhlIHRleHQuXHJcbiAgICogV2hlbiBhIHN1YnN0YW5jZSBvciBwcm9kdWN0IGNvZGUgaXMgc3BlY2lmaWVkIGZvciB0aGUgJ2NvZGUnIGVsZW1lbnQsIHRoZSBcImRlZmF1bHRcIiBzZW1hbnRpYyBjb250ZXh0IGlzIHRoYXQgdGhpcyBpcyBhIHBvc2l0aXZlIHN0YXRlbWVudCBvZiBhbiBhbGxlcmd5IG9yIGludG9sZXJhbmNlIChkZXBlbmRpbmcgb24gdGhlIHZhbHVlIG9mIHRoZSAndHlwZScgZWxlbWVudCwgaWYgcHJlc2VudCkgY29uZGl0aW9uIHRvIHRoZSBzcGVjaWZpZWQgc3Vic3RhbmNlL3Byb2R1Y3QuICBJbiB0aGUgY29ycmVzcG9uZGluZyBTTk9NRUQgQ1QgYWxsZXJneSBtb2RlbCwgdGhlIHNwZWNpZmllZCBzdWJzdGFuY2UvcHJvZHVjdCBpcyB0aGUgdGFyZ2V0IChkZXN0aW5hdGlvbikgb2YgdGhlIFwiQ2F1c2F0aXZlIGFnZW50XCIgcmVsYXRpb25zaGlwLlxyXG4gICAqIFRoZSAnc3Vic3RhbmNlRXhwb3N1cmVSaXNrJyBleHRlbnNpb24gaXMgYXZhaWxhYmxlIGFzIGEgc3RydWN0dXJlZCBhbmQgbW9yZSBmbGV4aWJsZSBhbHRlcm5hdGl2ZSB0byB0aGUgJ2NvZGUnIGVsZW1lbnQgZm9yIG1ha2luZyBwb3NpdGl2ZSBvciBuZWdhdGl2ZSBhbGxlcmd5IG9yIGludG9sZXJhbmNlIHN0YXRlbWVudHMuICBUaGlzIGV4dGVuc2lvbiBwcm92aWRlcyB0aGUgY2FwYWJpbGl0eSB0byBtYWtlIFwibm8ga25vd24gYWxsZXJneVwiIChvciBcIm5vIHJpc2sgb2YgYWR2ZXJzZSByZWFjdGlvblwiKSBzdGF0ZW1lbnRzIHJlZ2FyZGluZyBhbnkgY29kZWQgc3Vic3RhbmNlL3Byb2R1Y3QgKGluY2x1ZGluZyBjYXNlcyB3aGVuIGEgcHJlLWNvb3JkaW5hdGVkIFwibm8gYWxsZXJneSB0byB4XCIgY29uY2VwdCBmb3IgdGhhdCBzdWJzdGFuY2UvcHJvZHVjdCBkb2VzIG5vdCBleGlzdCkuICBJZiB0aGUgJ3N1YnN0YW5jZUV4cG9zdXJlUmlzaycgZXh0ZW5zaW9uIGlzIHByZXNlbnQsIHRoZSBBbGxlcmd5SW50b2xlcmFuY2UuY29kZSBlbGVtZW50IFNIQUxMIGJlIG9taXR0ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBhdGllbnQgd2hvIGhhcyB0aGUgYWxsZXJneSBvciBpbnRvbGVyYW5jZS5cclxuICAgKi9cclxuICBwdWJsaWMgcGF0aWVudDogZmhpci5SZWZlcmVuY2V8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgZW5jb3VudGVyIHdoZW4gdGhlIGFsbGVyZ3kgb3IgaW50b2xlcmFuY2Ugd2FzIGFzc2VydGVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBlbmNvdW50ZXI/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXN0aW1hdGVkIG9yIGFjdHVhbCBkYXRlLCAgZGF0ZS10aW1lLCBvciBhZ2Ugd2hlbiBhbGxlcmd5IG9yIGludG9sZXJhbmNlIHdhcyBpZGVudGlmaWVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvbnNldD86IChmaGlyLkZoaXJEYXRlVGltZXxmaGlyLkFnZXxmaGlyLlBlcmlvZHxmaGlyLlJhbmdlfGZoaXIuRmhpclN0cmluZyl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgQWxsZXJneUludG9sZXJhbmNlLm9uc2V0W3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX29uc2V0SXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlY29yZGVkRGF0ZSByZXByZXNlbnRzIHdoZW4gdGhpcyBwYXJ0aWN1bGFyIEFsbGVyZ3lJbnRvbGVyYW5jZSByZWNvcmQgd2FzIGNyZWF0ZWQgaW4gdGhlIHN5c3RlbSwgd2hpY2ggaXMgb2Z0ZW4gYSBzeXN0ZW0tZ2VuZXJhdGVkIGRhdGUuXHJcbiAgICovXHJcbiAgcHVibGljIHJlY29yZGVkRGF0ZT86IGZoaXIuRmhpckRhdGVUaW1lfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmRpdmlkdWFsIHdobyByZWNvcmRlZCB0aGUgcmVjb3JkIGFuZCB0YWtlcyByZXNwb25zaWJpbGl0eSBmb3IgaXRzIGNvbnRlbnQuXHJcbiAgICovXHJcbiAgcHVibGljIHJlY29yZGVyPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZWNvcmRlciB0YWtlcyByZXNwb25zaWJpbGl0eSBmb3IgdGhlIGNvbnRlbnQsIGJ1dCBjYW4gcmVmZXJlbmNlIHRoZSBzb3VyY2UgZnJvbSB3aGVyZSB0aGV5IGdvdCBpdC5cclxuICAgKi9cclxuICBwdWJsaWMgYXNzZXJ0ZXI/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBkYXRlIG1heSBiZSByZXBsaWNhdGVkIGJ5IG9uZSBvZiB0aGUgT25zZXQgb2YgUmVhY3Rpb24gZGF0ZXMuIFdoZXJlIGEgdGV4dHVhbCByZXByZXNlbnRhdGlvbiBvZiB0aGUgZGF0ZSBvZiBsYXN0IG9jY3VycmVuY2UgaXMgcmVxdWlyZWQgZS5nLiAnSW4gQ2hpbGRob29kLCAnMTAgeWVhcnMgYWdvJyB0aGUgQ29tbWVudCBlbGVtZW50IHNob3VsZCBiZSB1c2VkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBsYXN0T2NjdXJyZW5jZT86IGZoaXIuRmhpckRhdGVUaW1lfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBGb3IgZXhhbXBsZTogaW5jbHVkaW5nIHJlYXNvbiBmb3IgZmxhZ2dpbmcgYSBzZXJpb3VzbmVzcyBvZiAnSGlnaCBSaXNrJzsgYW5kIGluc3RydWN0aW9ucyByZWxhdGVkIHRvIGZ1dHVyZSBleHBvc3VyZSBvciBhZG1pbmlzdHJhdGlvbiBvZiB0aGUgc3Vic3RhbmNlLCBzdWNoIGFzIGFkbWluaXN0cmF0aW9uIHdpdGhpbiBhbiBJbnRlbnNpdmUgQ2FyZSBVbml0IG9yIHVuZGVyIGNvcnRpY29zdGVyb2lkIGNvdmVyLiBUaGUgbm90ZXMgc2hvdWxkIGJlIHJlbGF0ZWQgdG8gYW4gYWxsZXJneSBvciBpbnRvbGVyYW5jZSBhcyBhIGNvbmRpdGlvbiBpbiBnZW5lcmFsIGFuZCBub3QgcmVsYXRlZCB0byBhbnkgcGFydGljdWxhciBlcGlzb2RlIG9mIGl0LiBGb3IgZXBpc29kZSBub3RlcyBhbmQgZGVzY3JpcHRpb25zLCB1c2UgQWxsZXJneUludG9sZXJhbmNlLmV2ZW50LmRlc2NyaXB0aW9uIGFuZCAgQWxsZXJneUludG9sZXJhbmNlLmV2ZW50Lm5vdGVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBub3RlOiBmaGlyLkFubm90YXRpb25bXTtcclxuICAvKipcclxuICAgKiBEZXRhaWxzIGFib3V0IGVhY2ggYWR2ZXJzZSByZWFjdGlvbiBldmVudCBsaW5rZWQgdG8gZXhwb3N1cmUgdG8gdGhlIGlkZW50aWZpZWQgc3Vic3RhbmNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWFjdGlvbjogZmhpci5BbGxlcmd5SW50b2xlcmFuY2VSZWFjdGlvbltdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEFsbGVyZ3lJbnRvbGVyYW5jZSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEFsbGVyZ3lJbnRvbGVyYW5jZUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdBbGxlcmd5SW50b2xlcmFuY2UnO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IHNvdXJjZS5pZGVudGlmaWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuSWRlbnRpZmllcih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmlkZW50aWZpZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY2xpbmljYWxTdGF0dXMnXSkgeyB0aGlzLmNsaW5pY2FsU3RhdHVzID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jbGluaWNhbFN0YXR1cyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3ZlcmlmaWNhdGlvblN0YXR1cyddKSB7IHRoaXMudmVyaWZpY2F0aW9uU3RhdHVzID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS52ZXJpZmljYXRpb25TdGF0dXMpOyB9XHJcbiAgICBpZiAoc291cmNlWyd0eXBlJ10pIHsgdGhpcy50eXBlID0gbmV3IGZoaXIuRmhpckNvZGU8QWxsZXJneUludG9sZXJhbmNlVHlwZUNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS50eXBlfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NhdGVnb3J5J10pIHsgdGhpcy5jYXRlZ29yeSA9IHNvdXJjZS5jYXRlZ29yeS5tYXAoKHgpID0+IG5ldyBmaGlyLkZoaXJDb2RlPEFsbGVyZ3lJbnRvbGVyYW5jZUNhdGVnb3J5Q29kZVR5cGU+KHt2YWx1ZTogeH0pKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY2F0ZWdvcnkgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY3JpdGljYWxpdHknXSkgeyB0aGlzLmNyaXRpY2FsaXR5ID0gbmV3IGZoaXIuRmhpckNvZGU8QWxsZXJneUludG9sZXJhbmNlQ3JpdGljYWxpdHlDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2UuY3JpdGljYWxpdHl9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY29kZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3BhdGllbnQnXSkgeyB0aGlzLnBhdGllbnQgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnBhdGllbnQpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wYXRpZW50ID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZW5jb3VudGVyJ10pIHsgdGhpcy5lbmNvdW50ZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmVuY291bnRlcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ29uc2V0J10pIHsgdGhpcy5vbnNldCA9IHNvdXJjZS5vbnNldDsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydvbnNldERhdGVUaW1lJ10pIHsgdGhpcy5vbnNldCA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5vbnNldERhdGVUaW1lfSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnb25zZXRBZ2UnXSkgeyB0aGlzLm9uc2V0ID0gbmV3IGZoaXIuQWdlKHNvdXJjZS5vbnNldEFnZSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnb25zZXRQZXJpb2QnXSkgeyB0aGlzLm9uc2V0ID0gbmV3IGZoaXIuUGVyaW9kKHNvdXJjZS5vbnNldFBlcmlvZCk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnb25zZXRSYW5nZSddKSB7IHRoaXMub25zZXQgPSBuZXcgZmhpci5SYW5nZShzb3VyY2Uub25zZXRSYW5nZSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnb25zZXRTdHJpbmcnXSkgeyB0aGlzLm9uc2V0ID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5vbnNldFN0cmluZ30pOyB9XHJcbiAgICBpZiAoc291cmNlWydyZWNvcmRlZERhdGUnXSkgeyB0aGlzLnJlY29yZGVkRGF0ZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5yZWNvcmRlZERhdGV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVjb3JkZXInXSkgeyB0aGlzLnJlY29yZGVyID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5yZWNvcmRlcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ2Fzc2VydGVyJ10pIHsgdGhpcy5hc3NlcnRlciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuYXNzZXJ0ZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWydsYXN0T2NjdXJyZW5jZSddKSB7IHRoaXMubGFzdE9jY3VycmVuY2UgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2UubGFzdE9jY3VycmVuY2V9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbm90ZSddKSB7IHRoaXMubm90ZSA9IHNvdXJjZS5ub3RlLm1hcCgoeCkgPT4gbmV3IGZoaXIuQW5ub3RhdGlvbih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm5vdGUgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVhY3Rpb24nXSkgeyB0aGlzLnJlYWN0aW9uID0gc291cmNlLnJlYWN0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuQWxsZXJneUludG9sZXJhbmNlUmVhY3Rpb24oeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZWFjdGlvbiA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlcXVpcmVkLWJvdW5kIFZhbHVlIFNldCBmb3IgY2xpbmljYWxTdGF0dXMgKEFsbGVyZ3lJbnRvbGVyYW5jZS5jbGluaWNhbFN0YXR1cylcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCBjbGluaWNhbFN0YXR1c1JlcXVpcmVkQ29kZXMoKSB7XHJcbiAgICByZXR1cm4gQWxsZXJneWludG9sZXJhbmNlQ2xpbmljYWxDb2RlcztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZWQtYm91bmQgVmFsdWUgU2V0IGZvciB2ZXJpZmljYXRpb25TdGF0dXMgKEFsbGVyZ3lJbnRvbGVyYW5jZS52ZXJpZmljYXRpb25TdGF0dXMpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgdmVyaWZpY2F0aW9uU3RhdHVzUmVxdWlyZWRDb2RlcygpIHtcclxuICAgIHJldHVybiBBbGxlcmd5aW50b2xlcmFuY2VWZXJpZmljYXRpb25Db2RlcztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZWQtYm91bmQgVmFsdWUgU2V0IGZvciB0eXBlIChBbGxlcmd5SW50b2xlcmFuY2UudHlwZSlcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCB0eXBlUmVxdWlyZWRDb2RlcygpIHtcclxuICAgIHJldHVybiBBbGxlcmd5SW50b2xlcmFuY2VUeXBlQ29kZXM7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlcXVpcmVkLWJvdW5kIFZhbHVlIFNldCBmb3IgY2F0ZWdvcnkgKEFsbGVyZ3lJbnRvbGVyYW5jZS5jYXRlZ29yeSlcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCBjYXRlZ29yeVJlcXVpcmVkQ29kZXMoKSB7XHJcbiAgICByZXR1cm4gQWxsZXJneUludG9sZXJhbmNlQ2F0ZWdvcnlDb2RlcztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZWQtYm91bmQgVmFsdWUgU2V0IGZvciBjcml0aWNhbGl0eSAoQWxsZXJneUludG9sZXJhbmNlLmNyaXRpY2FsaXR5KVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IGNyaXRpY2FsaXR5UmVxdWlyZWRDb2RlcygpIHtcclxuICAgIHJldHVybiBBbGxlcmd5SW50b2xlcmFuY2VDcml0aWNhbGl0eUNvZGVzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKCF0aGlzWydyZXNvdXJjZVR5cGUnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgcmVzb3VyY2VUeXBlOlwiQWxsZXJneUludG9sZXJhbmNlXCIgZmhpcjogQWxsZXJneUludG9sZXJhbmNlLnJlc291cmNlVHlwZTpcIkFsbGVyZ3lJbnRvbGVyYW5jZVwiJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiaWRlbnRpZmllclwiXSkgeyB0aGlzLmlkZW50aWZpZXIuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1snY2xpbmljYWxTdGF0dXMnXSAmJiAoIU9iamVjdC52YWx1ZXMoQWxsZXJneWludG9sZXJhbmNlQ2xpbmljYWxDb2RlcykuaW5jbHVkZXModGhpcy5jbGluaWNhbFN0YXR1cyBhcyBhbnkpKSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnY29kZS1pbnZhbGlkJywgZGlhZ25vc3RpY3M6ICdJbnZhbGlkIGNvZGUgcHJvcGVydHkgY2xpbmljYWxTdGF0dXM/OmZoaXIuQ29kZWFibGVDb25jZXB0IGZoaXI6IEFsbGVyZ3lJbnRvbGVyYW5jZS5jbGluaWNhbFN0YXR1czpDb2RlYWJsZUNvbmNlcHQgUmVxdWlyZWQgYmluZGluZyB0bzogQWxsZXJneWludG9sZXJhbmNlQ2xpbmljYWwnIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJjbGluaWNhbFN0YXR1c1wiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmNsaW5pY2FsU3RhdHVzLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1sndmVyaWZpY2F0aW9uU3RhdHVzJ10gJiYgKCFPYmplY3QudmFsdWVzKEFsbGVyZ3lpbnRvbGVyYW5jZVZlcmlmaWNhdGlvbkNvZGVzKS5pbmNsdWRlcyh0aGlzLnZlcmlmaWNhdGlvblN0YXR1cyBhcyBhbnkpKSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnY29kZS1pbnZhbGlkJywgZGlhZ25vc3RpY3M6ICdJbnZhbGlkIGNvZGUgcHJvcGVydHkgdmVyaWZpY2F0aW9uU3RhdHVzPzpmaGlyLkNvZGVhYmxlQ29uY2VwdCBmaGlyOiBBbGxlcmd5SW50b2xlcmFuY2UudmVyaWZpY2F0aW9uU3RhdHVzOkNvZGVhYmxlQ29uY2VwdCBSZXF1aXJlZCBiaW5kaW5nIHRvOiBBbGxlcmd5aW50b2xlcmFuY2VWZXJpZmljYXRpb24nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJ2ZXJpZmljYXRpb25TdGF0dXNcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy52ZXJpZmljYXRpb25TdGF0dXMuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzWyd0eXBlJ10gJiYgKCFPYmplY3QudmFsdWVzKEFsbGVyZ3lJbnRvbGVyYW5jZVR5cGVDb2RlcykuaW5jbHVkZXModGhpcy50eXBlIGFzIGFueSkpKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdjb2RlLWludmFsaWQnLCBkaWFnbm9zdGljczogJ0ludmFsaWQgY29kZSBwcm9wZXJ0eSB0eXBlPzpmaGlyLkZoaXJDb2RlPEFsbGVyZ3lJbnRvbGVyYW5jZVR5cGVDb2RlVHlwZT4gZmhpcjogQWxsZXJneUludG9sZXJhbmNlLnR5cGU6Y29kZSBSZXF1aXJlZCBiaW5kaW5nIHRvOiBBbGxlcmd5SW50b2xlcmFuY2VUeXBlJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1widHlwZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnR5cGUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzWydjYXRlZ29yeSddKSB7XHJcbiAgICAgIHRoaXMuY2F0ZWdvcnkuZm9yRWFjaCgodikgPT4ge1xyXG4gICAgICAgIGlmICghT2JqZWN0LnZhbHVlcyhBbGxlcmd5SW50b2xlcmFuY2VDYXRlZ29yeUNvZGVzKS5pbmNsdWRlcyh2IGFzIGFueSkpIHtcclxuICAgICAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdjb2RlLWludmFsaWQnLCBkaWFnbm9zdGljczogJ0ludmFsaWQgY29kZSBwcm9wZXJ0eSBjYXRlZ29yeT86Zmhpci5GaGlyQ29kZTxBbGxlcmd5SW50b2xlcmFuY2VDYXRlZ29yeUNvZGVUeXBlPltdIGZoaXI6IEFsbGVyZ3lJbnRvbGVyYW5jZS5jYXRlZ29yeTpjb2RlIFJlcXVpcmVkIGJpbmRpbmcgdG86IEFsbGVyZ3lJbnRvbGVyYW5jZUNhdGVnb3J5JyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJjYXRlZ29yeVwiXSkgeyB0aGlzLmNhdGVnb3J5LmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbJ2NyaXRpY2FsaXR5J10gJiYgKCFPYmplY3QudmFsdWVzKEFsbGVyZ3lJbnRvbGVyYW5jZUNyaXRpY2FsaXR5Q29kZXMpLmluY2x1ZGVzKHRoaXMuY3JpdGljYWxpdHkgYXMgYW55KSkpIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ2NvZGUtaW52YWxpZCcsIGRpYWdub3N0aWNzOiAnSW52YWxpZCBjb2RlIHByb3BlcnR5IGNyaXRpY2FsaXR5PzpmaGlyLkZoaXJDb2RlPEFsbGVyZ3lJbnRvbGVyYW5jZUNyaXRpY2FsaXR5Q29kZVR5cGU+IGZoaXI6IEFsbGVyZ3lJbnRvbGVyYW5jZS5jcml0aWNhbGl0eTpjb2RlIFJlcXVpcmVkIGJpbmRpbmcgdG86IEFsbGVyZ3lJbnRvbGVyYW5jZUNyaXRpY2FsaXR5JyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiY3JpdGljYWxpdHlcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5jcml0aWNhbGl0eS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJjb2RlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY29kZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKCF0aGlzWydwYXRpZW50J10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHBhdGllbnQ6Zmhpci5SZWZlcmVuY2UgZmhpcjogQWxsZXJneUludG9sZXJhbmNlLnBhdGllbnQ6UmVmZXJlbmNlJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wicGF0aWVudFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnBhdGllbnQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiZW5jb3VudGVyXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZW5jb3VudGVyLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInJlY29yZGVkRGF0ZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnJlY29yZGVkRGF0ZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJyZWNvcmRlclwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnJlY29yZGVyLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImFzc2VydGVyXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuYXNzZXJ0ZXIuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wibGFzdE9jY3VycmVuY2VcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5sYXN0T2NjdXJyZW5jZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJub3RlXCJdKSB7IHRoaXMubm90ZS5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wicmVhY3Rpb25cIl0pIHsgdGhpcy5yZWFjdGlvbi5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbiJdfQ==