// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: PractitionerRole
import * as fhir from '../fhir.js';
// @ts-ignore
import { DaysOfWeekCodings, } from '../fhirValueSets/DaysOfWeekCodings.js';
// @ts-ignore
import { C80PracticeCodesCodings, } from '../fhirValueSets/C80PracticeCodesCodings.js';
/**
 * More detailed availability information may be provided in associated Schedule/Slot resources.
 */
export class PractitionerRoleAvailableTime extends fhir.BackboneElement {
    /**
     * Default constructor for PractitionerRoleAvailableTime - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['daysOfWeek']) {
            this.daysOfWeek = source.daysOfWeek.map((x) => x);
        }
        else {
            this.daysOfWeek = [];
        }
        if (source['allDay']) {
            this.allDay = new fhir.FhirBoolean({ value: source.allDay });
        }
        if (source['availableStartTime']) {
            this.availableStartTime = new fhir.FhirTime({ value: source.availableStartTime });
        }
        if (source['availableEndTime']) {
            this.availableEndTime = new fhir.FhirTime({ value: source.availableEndTime });
        }
    }
    /**
     * Required-bound Value Set for daysOfWeek (PractitionerRole.availableTime.daysOfWeek)
     */
    static daysOfWeekRequiredCoding() {
        return DaysOfWeekCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["allDay"]) {
            issues.push(...this.allDay.doModelValidation());
        }
        if (this["availableStartTime"]) {
            issues.push(...this.availableStartTime.doModelValidation());
        }
        if (this["availableEndTime"]) {
            issues.push(...this.availableEndTime.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
PractitionerRoleAvailableTime._fts_dataType = 'PractitionerRoleAvailableTime';
/**
 * The practitioner is not available or performing this role during this period of time due to the provided reason.
 */
export class PractitionerRoleNotAvailable extends fhir.BackboneElement {
    /**
     * Default constructor for PractitionerRoleNotAvailable - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['description']) {
            this.description = new fhir.FhirString({ value: source.description });
        }
        else {
            this.description = null;
        }
        if (source['during']) {
            this.during = new fhir.Period(source.during);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['description']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property description:fhir.FhirString fhir: PractitionerRole.notAvailable.description:string', });
        }
        if (this["description"]) {
            issues.push(...this.description.doModelValidation());
        }
        if (this["during"]) {
            issues.push(...this.during.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
PractitionerRoleNotAvailable._fts_dataType = 'PractitionerRoleNotAvailable';
/**
 * A specific set of Roles/Locations/specialties/services that a practitioner may perform at an organization for a period of time.
 */
export class PractitionerRole extends fhir.DomainResource {
    /**
     * Default constructor for PractitionerRole - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'PractitionerRole';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['active']) {
            this.active = new fhir.FhirBoolean({ value: source.active });
        }
        if (source['period']) {
            this.period = new fhir.Period(source.period);
        }
        if (source['practitioner']) {
            this.practitioner = new fhir.Reference(source.practitioner);
        }
        if (source['organization']) {
            this.organization = new fhir.Reference(source.organization);
        }
        if (source['code']) {
            this.code = source.code.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.code = [];
        }
        if (source['specialty']) {
            this.specialty = source.specialty.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.specialty = [];
        }
        if (source['location']) {
            this.location = source.location.map((x) => new fhir.Reference(x));
        }
        else {
            this.location = [];
        }
        if (source['healthcareService']) {
            this.healthcareService = source.healthcareService.map((x) => new fhir.Reference(x));
        }
        else {
            this.healthcareService = [];
        }
        if (source['telecom']) {
            this.telecom = source.telecom.map((x) => new fhir.ContactPoint(x));
        }
        else {
            this.telecom = [];
        }
        if (source['availableTime']) {
            this.availableTime = source.availableTime.map((x) => new fhir.PractitionerRoleAvailableTime(x));
        }
        else {
            this.availableTime = [];
        }
        if (source['notAvailable']) {
            this.notAvailable = source.notAvailable.map((x) => new fhir.PractitionerRoleNotAvailable(x));
        }
        else {
            this.notAvailable = [];
        }
        if (source['availabilityExceptions']) {
            this.availabilityExceptions = new fhir.FhirString({ value: source.availabilityExceptions });
        }
        if (source['endpoint']) {
            this.endpoint = source.endpoint.map((x) => new fhir.Reference(x));
        }
        else {
            this.endpoint = [];
        }
    }
    /**
     * Preferred-bound Value Set for specialty (PractitionerRole.specialty)
     */
    static specialtyPreferredCoding() {
        return C80PracticeCodesCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType:"PractitionerRole" fhir: PractitionerRole.resourceType:"PractitionerRole"', });
        }
        if (this["identifier"]) {
            this.identifier.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["active"]) {
            issues.push(...this.active.doModelValidation());
        }
        if (this["period"]) {
            issues.push(...this.period.doModelValidation());
        }
        if (this["practitioner"]) {
            issues.push(...this.practitioner.doModelValidation());
        }
        if (this["organization"]) {
            issues.push(...this.organization.doModelValidation());
        }
        if (this["code"]) {
            this.code.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["specialty"]) {
            this.specialty.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["location"]) {
            this.location.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["healthcareService"]) {
            this.healthcareService.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["telecom"]) {
            this.telecom.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["availableTime"]) {
            this.availableTime.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["notAvailable"]) {
            this.notAvailable.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["availabilityExceptions"]) {
            issues.push(...this.availabilityExceptions.doModelValidation());
        }
        if (this["endpoint"]) {
            this.endpoint.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
PractitionerRole._fts_dataType = 'PractitionerRole';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUHJhY3RpdGlvbmVyUm9sZS5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvUHJhY3RpdGlvbmVyUm9sZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQyxrQ0FBa0M7QUFFbEMsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFFbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSxpQkFBaUIsR0FBd0IsTUFBTSx1Q0FBdUMsQ0FBQztBQU9oRyxhQUFhO0FBQ2IsT0FBTyxFQUFFLHVCQUF1QixHQUE4QixNQUFNLDZDQUE2QyxDQUFDO0FBeUJsSDs7R0FFRztBQUNILE1BQU0sT0FBTyw2QkFBOEIsU0FBUSxJQUFJLENBQUMsZUFBZTtJQXFCckU7O09BRUc7SUFDSCxZQUFZLFNBQW9ELEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQzFHLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLENBQUMsWUFBWSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQzNFO1lBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxFQUFFLENBQUM7U0FBRTtRQUM5QixJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxNQUFNLEVBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDckYsSUFBSSxNQUFNLENBQUMsb0JBQW9CLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxD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QUMsRUFBRTtZQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQUU7UUFDNUcsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtTQUFFO1FBQzFHLElBQUksSUFBSSxDQUFDLHdCQUF3QixDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLHNCQUFzQixDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQ3hHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7U0FBRTtRQUNsRyxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQTNIRDs7R0FFRztBQUM2Qiw4QkFBYSxHQUFVLGtCQUFrQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0LmNvcmUgdmVyc2lvbjogNC4wLjFcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBQcmFjdGl0aW9uZXJSb2xlXHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEYXlzT2ZXZWVrQ29kaW5ncywgRGF5c09mV2Vla0NvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0RheXNPZldlZWtDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEYXlzT2ZXZWVrQ29kZXMsICBEYXlzT2ZXZWVrQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0RheXNPZldlZWtDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUHJhY3RpdGlvbmVyUm9sZUNvZGluZ3MsIFByYWN0aXRpb25lclJvbGVDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9QcmFjdGl0aW9uZXJSb2xlQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUHJhY3RpdGlvbmVyUm9sZUNvZGVzLCAgUHJhY3RpdGlvbmVyUm9sZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9QcmFjdGl0aW9uZXJSb2xlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEM4MFByYWN0aWNlQ29kZXNDb2RpbmdzLCBDODBQcmFjdGljZUNvZGVzQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQzgwUHJhY3RpY2VDb2Rlc0NvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEM4MFByYWN0aWNlQ29kZXNDb2RlcywgIEM4MFByYWN0aWNlQ29kZXNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQzgwUHJhY3RpY2VDb2Rlc0NvZGVzLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFByYWN0aXRpb25lclJvbGVBdmFpbGFibGVUaW1lIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFByYWN0aXRpb25lclJvbGVBdmFpbGFibGVUaW1lQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHdoaWNoIGRheXMgb2YgdGhlIHdlZWsgYXJlIGF2YWlsYWJsZSBiZXR3ZWVuIHRoZSBzdGFydCBhbmQgZW5kIFRpbWVzLlxyXG4gICAqL1xyXG4gIGRheXNPZldlZWs/OiBEYXlzT2ZXZWVrQ29kZVR5cGVbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSXMgdGhpcyBhbHdheXMgYXZhaWxhYmxlPyAoaGVuY2UgdGltZXMgYXJlIGlycmVsZXZhbnQpIGUuZy4gMjQgaG91ciBzZXJ2aWNlLlxyXG4gICAqL1xyXG4gIGFsbERheT86IGZoaXIuRmhpckJvb2xlYW58Ym9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRpbWV6b25lIGlzIGV4cGVjdGVkIHRvIGJlIGZvciB3aGVyZSB0aGlzIEhlYWx0aGNhcmVTZXJ2aWNlIGlzIHByb3ZpZGVkIGF0LlxyXG4gICAqL1xyXG4gIGF2YWlsYWJsZVN0YXJ0VGltZT86IGZoaXIuRmhpclRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdGltZXpvbmUgaXMgZXhwZWN0ZWQgdG8gYmUgZm9yIHdoZXJlIHRoaXMgSGVhbHRoY2FyZVNlcnZpY2UgaXMgcHJvdmlkZWQgYXQuXHJcbiAgICovXHJcbiAgYXZhaWxhYmxlRW5kVGltZT86IGZoaXIuRmhpclRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIE1vcmUgZGV0YWlsZWQgYXZhaWxhYmlsaXR5IGluZm9ybWF0aW9uIG1heSBiZSBwcm92aWRlZCBpbiBhc3NvY2lhdGVkIFNjaGVkdWxlL1Nsb3QgcmVzb3VyY2VzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFByYWN0aXRpb25lclJvbGVBdmFpbGFibGVUaW1lIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnUHJhY3RpdGlvbmVyUm9sZUF2YWlsYWJsZVRpbWUnO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB3aGljaCBkYXlzIG9mIHRoZSB3ZWVrIGFyZSBhdmFpbGFibGUgYmV0d2VlbiB0aGUgc3RhcnQgYW5kIGVuZCBUaW1lcy5cclxuICAgKi9cclxuICBwdWJsaWMgZGF5c09mV2Vlaz86IERheXNPZldlZWtDb2RlVHlwZVtdO1xyXG4gIC8qKlxyXG4gICAqIElzIHRoaXMgYWx3YXlzIGF2YWlsYWJsZT8gKGhlbmNlIHRpbWVzIGFyZSBpcnJlbGV2YW50KSBlLmcuIDI0IGhvdXIgc2VydmljZS5cclxuICAgKi9cclxuICBwdWJsaWMgYWxsRGF5PzogZmhpci5GaGlyQm9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRpbWV6b25lIGlzIGV4cGVjdGVkIHRvIGJlIGZvciB3aGVyZSB0aGlzIEhlYWx0aGNhcmVTZXJ2aWNlIGlzIHByb3ZpZGVkIGF0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhdmFpbGFibGVTdGFydFRpbWU/OiBmaGlyLkZoaXJUaW1lfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdGltZXpvbmUgaXMgZXhwZWN0ZWQgdG8gYmUgZm9yIHdoZXJlIHRoaXMgSGVhbHRoY2FyZVNlcnZpY2UgaXMgcHJvdmlkZWQgYXQuXHJcbiAgICovXHJcbiAgcHVibGljIGF2YWlsYWJsZUVuZFRpbWU/OiBmaGlyLkZoaXJUaW1lfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBQcmFjdGl0aW9uZXJSb2xlQXZhaWxhYmxlVGltZSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFByYWN0aXRpb25lclJvbGVBdmFpbGFibGVUaW1lQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2RheXNPZldlZWsnXSkgeyB0aGlzLmRheXNPZldlZWsgPSBzb3VyY2UuZGF5c09mV2Vlay5tYXAoKHgpID0+IHgpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5kYXlzT2ZXZWVrID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2FsbERheSddKSB7IHRoaXMuYWxsRGF5ID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oe3ZhbHVlOiBzb3VyY2UuYWxsRGF5fSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2F2YWlsYWJsZVN0YXJ0VGltZSddKSB7IHRoaXMuYXZhaWxhYmxlU3RhcnRUaW1lID0gbmV3IGZoaXIuRmhpclRpbWUoe3ZhbHVlOiBzb3VyY2UuYXZhaWxhYmxlU3RhcnRUaW1lfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2F2YWlsYWJsZUVuZFRpbWUnXSkgeyB0aGlzLmF2YWlsYWJsZUVuZFRpbWUgPSBuZXcgZmhpci5GaGlyVGltZSh7dmFsdWU6IHNvdXJjZS5hdmFpbGFibGVFbmRUaW1lfSk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZWQtYm91bmQgVmFsdWUgU2V0IGZvciBkYXlzT2ZXZWVrIChQcmFjdGl0aW9uZXJSb2xlLmF2YWlsYWJsZVRpbWUuZGF5c09mV2VlaylcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGRheXNPZldlZWtSZXF1aXJlZENvZGluZygpOkRheXNPZldlZWtDb2RpbmdUeXBlIHtcclxuICAgIHJldHVybiBEYXlzT2ZXZWVrQ29kaW5ncztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICh0aGlzW1wiYWxsRGF5XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuYWxsRGF5LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImF2YWlsYWJsZVN0YXJ0VGltZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmF2YWlsYWJsZVN0YXJ0VGltZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJhdmFpbGFibGVFbmRUaW1lXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuYXZhaWxhYmxlRW5kVGltZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFByYWN0aXRpb25lclJvbGVOb3RBdmFpbGFibGUgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgUHJhY3RpdGlvbmVyUm9sZU5vdEF2YWlsYWJsZUFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZWFzb24gdGhhdCBjYW4gYmUgcHJlc2VudGVkIHRvIHRoZSB1c2VyIGFzIHRvIHdoeSB0aGlzIHRpbWUgaXMgbm90IGF2YWlsYWJsZS5cclxuICAgKi9cclxuICBkZXNjcmlwdGlvbjogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU2VydmljZSBpcyBub3QgYXZhaWxhYmxlIChzZWFzb25hbGx5IG9yIGZvciBhIHB1YmxpYyBob2xpZGF5KSBmcm9tIHRoaXMgZGF0ZS5cclxuICAgKi9cclxuICBkdXJpbmc/OiBmaGlyLlBlcmlvZEFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlIHByYWN0aXRpb25lciBpcyBub3QgYXZhaWxhYmxlIG9yIHBlcmZvcm1pbmcgdGhpcyByb2xlIGR1cmluZyB0aGlzIHBlcmlvZCBvZiB0aW1lIGR1ZSB0byB0aGUgcHJvdmlkZWQgcmVhc29uLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFByYWN0aXRpb25lclJvbGVOb3RBdmFpbGFibGUgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdQcmFjdGl0aW9uZXJSb2xlTm90QXZhaWxhYmxlJztcclxuICAvKipcclxuICAgKiBUaGUgcmVhc29uIHRoYXQgY2FuIGJlIHByZXNlbnRlZCB0byB0aGUgdXNlciBhcyB0byB3aHkgdGhpcyB0aW1lIGlzIG5vdCBhdmFpbGFibGUuXHJcbiAgICovXHJcbiAgcHVibGljIGRlc2NyaXB0aW9uOiBmaGlyLkZoaXJTdHJpbmd8bnVsbDtcclxuICAvKipcclxuICAgKiBTZXJ2aWNlIGlzIG5vdCBhdmFpbGFibGUgKHNlYXNvbmFsbHkgb3IgZm9yIGEgcHVibGljIGhvbGlkYXkpIGZyb20gdGhpcyBkYXRlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkdXJpbmc/OiBmaGlyLlBlcmlvZHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgUHJhY3RpdGlvbmVyUm9sZU5vdEF2YWlsYWJsZSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFByYWN0aXRpb25lclJvbGVOb3RBdmFpbGFibGVBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnZGVzY3JpcHRpb24nXSkgeyB0aGlzLmRlc2NyaXB0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5kZXNjcmlwdGlvbn0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5kZXNjcmlwdGlvbiA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ2R1cmluZyddKSB7IHRoaXMuZHVyaW5nID0gbmV3IGZoaXIuUGVyaW9kKHNvdXJjZS5kdXJpbmcpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAoIXRoaXNbJ2Rlc2NyaXB0aW9uJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBkZXNjcmlwdGlvbjpmaGlyLkZoaXJTdHJpbmcgZmhpcjogUHJhY3RpdGlvbmVyUm9sZS5ub3RBdmFpbGFibGUuZGVzY3JpcHRpb246c3RyaW5nJywgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImRlc2NyaXB0aW9uXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZGVzY3JpcHRpb24uZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiZHVyaW5nXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZHVyaW5nLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgUHJhY3RpdGlvbmVyUm9sZSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBQcmFjdGl0aW9uZXJSb2xlQXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiUHJhY3RpdGlvbmVyUm9sZVwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBCdXNpbmVzcyBJZGVudGlmaWVycyB0aGF0IGFyZSBzcGVjaWZpYyB0byBhIHJvbGUvbG9jYXRpb24uXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhpcyB2YWx1ZSBpcyBmYWxzZSwgeW91IG1heSByZWZlciB0byB0aGUgcGVyaW9kIHRvIHNlZSB3aGVuIHRoZSByb2xlIHdhcyBpbiBhY3RpdmUgdXNlLiBJZiB0aGVyZSBpcyBubyBwZXJpb2Qgc3BlY2lmaWVkLCBubyBpbmZlcmVuY2UgY2FuIGJlIG1hZGUgYWJvdXQgd2hlbiBpdCB3YXMgYWN0aXZlLlxyXG4gICAqL1xyXG4gIGFjdGl2ZT86IGZoaXIuRmhpckJvb2xlYW58Ym9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBlcmlvZCBkdXJpbmcgd2hpY2ggdGhlIHBlcnNvbiBpcyBhdXRob3JpemVkIHRvIGFjdCBhcyBhIHByYWN0aXRpb25lciBpbiB0aGVzZSByb2xlKHMpIGZvciB0aGUgb3JnYW5pemF0aW9uLlxyXG4gICAqL1xyXG4gIHBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUHJhY3RpdGlvbmVyIHRoYXQgaXMgYWJsZSB0byBwcm92aWRlIHRoZSBkZWZpbmVkIHNlcnZpY2VzIGZvciB0aGUgb3JnYW5pemF0aW9uLlxyXG4gICAqL1xyXG4gIHByYWN0aXRpb25lcj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG9yZ2FuaXphdGlvbiB3aGVyZSB0aGUgUHJhY3RpdGlvbmVyIHBlcmZvcm1zIHRoZSByb2xlcyBhc3NvY2lhdGVkLlxyXG4gICAqL1xyXG4gIG9yZ2FuaXphdGlvbj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBwZXJzb24gbWF5IGhhdmUgbW9yZSB0aGFuIG9uZSByb2xlLlxyXG4gICAqL1xyXG4gIGNvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU3BlY2lmaWMgc3BlY2lhbHR5IG9mIHRoZSBwcmFjdGl0aW9uZXIuXHJcbiAgICovXHJcbiAgc3BlY2lhbHR5PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsb2NhdGlvbihzKSBhdCB3aGljaCB0aGlzIHByYWN0aXRpb25lciBwcm92aWRlcyBjYXJlLlxyXG4gICAqL1xyXG4gIGxvY2F0aW9uPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsaXN0IG9mIGhlYWx0aGNhcmUgc2VydmljZXMgdGhhdCB0aGlzIHdvcmtlciBwcm92aWRlcyBmb3IgdGhpcyByb2xlJ3MgT3JnYW5pemF0aW9uL0xvY2F0aW9uKHMpLlxyXG4gICAqL1xyXG4gIGhlYWx0aGNhcmVTZXJ2aWNlPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENvbnRhY3QgZGV0YWlscyB0aGF0IGFyZSBzcGVjaWZpYyB0byB0aGUgcm9sZS9sb2NhdGlvbi9zZXJ2aWNlLlxyXG4gICAqL1xyXG4gIHRlbGVjb20/OiBmaGlyLkNvbnRhY3RQb2ludEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTW9yZSBkZXRhaWxlZCBhdmFpbGFiaWxpdHkgaW5mb3JtYXRpb24gbWF5IGJlIHByb3ZpZGVkIGluIGFzc29jaWF0ZWQgU2NoZWR1bGUvU2xvdCByZXNvdXJjZXMuXHJcbiAgICovXHJcbiAgYXZhaWxhYmxlVGltZT86IGZoaXIuUHJhY3RpdGlvbmVyUm9sZUF2YWlsYWJsZVRpbWVBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwcmFjdGl0aW9uZXIgaXMgbm90IGF2YWlsYWJsZSBvciBwZXJmb3JtaW5nIHRoaXMgcm9sZSBkdXJpbmcgdGhpcyBwZXJpb2Qgb2YgdGltZSBkdWUgdG8gdGhlIHByb3ZpZGVkIHJlYXNvbi5cclxuICAgKi9cclxuICBub3RBdmFpbGFibGU/OiBmaGlyLlByYWN0aXRpb25lclJvbGVOb3RBdmFpbGFibGVBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgZGVzY3JpcHRpb24gb2Ygc2l0ZSBhdmFpbGFiaWxpdHkgZXhjZXB0aW9ucywgZS5nLiBwdWJsaWMgaG9saWRheSBhdmFpbGFiaWxpdHkuIFN1Y2NpbmN0bHkgZGVzY3JpYmluZyBhbGwgcG9zc2libGUgZXhjZXB0aW9ucyB0byBub3JtYWwgc2l0ZSBhdmFpbGFiaWxpdHkgYXMgZGV0YWlscyBpbiB0aGUgYXZhaWxhYmxlIFRpbWVzIGFuZCBub3QgYXZhaWxhYmxlIFRpbWVzLlxyXG4gICAqL1xyXG4gIGF2YWlsYWJpbGl0eUV4Y2VwdGlvbnM/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUZWNobmljYWwgZW5kcG9pbnRzIHByb3ZpZGluZyBhY2Nlc3MgdG8gc2VydmljZXMgb3BlcmF0ZWQgZm9yIHRoZSBwcmFjdGl0aW9uZXIgd2l0aCB0aGlzIHJvbGUuXHJcbiAgICovXHJcbiAgZW5kcG9pbnQ/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBIHNwZWNpZmljIHNldCBvZiBSb2xlcy9Mb2NhdGlvbnMvc3BlY2lhbHRpZXMvc2VydmljZXMgdGhhdCBhIHByYWN0aXRpb25lciBtYXkgcGVyZm9ybSBhdCBhbiBvcmdhbml6YXRpb24gZm9yIGEgcGVyaW9kIG9mIHRpbWUuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUHJhY3RpdGlvbmVyUm9sZSBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnUHJhY3RpdGlvbmVyUm9sZSc7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJQcmFjdGl0aW9uZXJSb2xlXCI7XHJcbiAgLyoqXHJcbiAgICogQnVzaW5lc3MgSWRlbnRpZmllcnMgdGhhdCBhcmUgc3BlY2lmaWMgdG8gYSByb2xlL2xvY2F0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyW107XHJcbiAgLyoqXHJcbiAgICogSWYgdGhpcyB2YWx1ZSBpcyBmYWxzZSwgeW91IG1heSByZWZlciB0byB0aGUgcGVyaW9kIHRvIHNlZSB3aGVuIHRoZSByb2xlIHdhcyBpbiBhY3RpdmUgdXNlLiBJZiB0aGVyZSBpcyBubyBwZXJpb2Qgc3BlY2lmaWVkLCBubyBpbmZlcmVuY2UgY2FuIGJlIG1hZGUgYWJvdXQgd2hlbiBpdCB3YXMgYWN0aXZlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhY3RpdmU/OiBmaGlyLkZoaXJCb29sZWFufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcGVyaW9kIGR1cmluZyB3aGljaCB0aGUgcGVyc29uIGlzIGF1dGhvcml6ZWQgdG8gYWN0IGFzIGEgcHJhY3RpdGlvbmVyIGluIHRoZXNlIHJvbGUocykgZm9yIHRoZSBvcmdhbml6YXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHBlcmlvZD86IGZoaXIuUGVyaW9kfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBQcmFjdGl0aW9uZXIgdGhhdCBpcyBhYmxlIHRvIHByb3ZpZGUgdGhlIGRlZmluZWQgc2VydmljZXMgZm9yIHRoZSBvcmdhbml6YXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHByYWN0aXRpb25lcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgb3JnYW5pemF0aW9uIHdoZXJlIHRoZSBQcmFjdGl0aW9uZXIgcGVyZm9ybXMgdGhlIHJvbGVzIGFzc29jaWF0ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIG9yZ2FuaXphdGlvbj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHBlcnNvbiBtYXkgaGF2ZSBtb3JlIHRoYW4gb25lIHJvbGUuXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIFNwZWNpZmljIHNwZWNpYWx0eSBvZiB0aGUgcHJhY3RpdGlvbmVyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzcGVjaWFsdHk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsb2NhdGlvbihzKSBhdCB3aGljaCB0aGlzIHByYWN0aXRpb25lciBwcm92aWRlcyBjYXJlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBsb2NhdGlvbj86IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogVGhlIGxpc3Qgb2YgaGVhbHRoY2FyZSBzZXJ2aWNlcyB0aGF0IHRoaXMgd29ya2VyIHByb3ZpZGVzIGZvciB0aGlzIHJvbGUncyBPcmdhbml6YXRpb24vTG9jYXRpb24ocykuXHJcbiAgICovXHJcbiAgcHVibGljIGhlYWx0aGNhcmVTZXJ2aWNlPzogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBDb250YWN0IGRldGFpbHMgdGhhdCBhcmUgc3BlY2lmaWMgdG8gdGhlIHJvbGUvbG9jYXRpb24vc2VydmljZS5cclxuICAgKi9cclxuICBwdWJsaWMgdGVsZWNvbT86IGZoaXIuQ29udGFjdFBvaW50W107XHJcbiAgLyoqXHJcbiAgICogTW9yZSBkZXRhaWxlZCBhdmFpbGFiaWxpdHkgaW5mb3JtYXRpb24gbWF5IGJlIHByb3ZpZGVkIGluIGFzc29jaWF0ZWQgU2NoZWR1bGUvU2xvdCByZXNvdXJjZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGF2YWlsYWJsZVRpbWU/OiBmaGlyLlByYWN0aXRpb25lclJvbGVBdmFpbGFibGVUaW1lW107XHJcbiAgLyoqXHJcbiAgICogVGhlIHByYWN0aXRpb25lciBpcyBub3QgYXZhaWxhYmxlIG9yIHBlcmZvcm1pbmcgdGhpcyByb2xlIGR1cmluZyB0aGlzIHBlcmlvZCBvZiB0aW1lIGR1ZSB0byB0aGUgcHJvdmlkZWQgcmVhc29uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBub3RBdmFpbGFibGU/OiBmaGlyLlByYWN0aXRpb25lclJvbGVOb3RBdmFpbGFibGVbXTtcclxuICAvKipcclxuICAgKiBBIGRlc2NyaXB0aW9uIG9mIHNpdGUgYXZhaWxhYmlsaXR5IGV4Y2VwdGlvbnMsIGUuZy4gcHVibGljIGhvbGlkYXkgYXZhaWxhYmlsaXR5LiBTdWNjaW5jdGx5IGRlc2NyaWJpbmcgYWxsIHBvc3NpYmxlIGV4Y2VwdGlvbnMgdG8gbm9ybWFsIHNpdGUgYXZhaWxhYmlsaXR5IGFzIGRldGFpbHMgaW4gdGhlIGF2YWlsYWJsZSBUaW1lcyBhbmQgbm90IGF2YWlsYWJsZSBUaW1lcy5cclxuICAgKi9cclxuICBwdWJsaWMgYXZhaWxhYmlsaXR5RXhjZXB0aW9ucz86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGVjaG5pY2FsIGVuZHBvaW50cyBwcm92aWRpbmcgYWNjZXNzIHRvIHNlcnZpY2VzIG9wZXJhdGVkIGZvciB0aGUgcHJhY3RpdGlvbmVyIHdpdGggdGhpcyByb2xlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBlbmRwb2ludD86IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgUHJhY3RpdGlvbmVyUm9sZSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFByYWN0aXRpb25lclJvbGVBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnUHJhY3RpdGlvbmVyUm9sZSc7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gc291cmNlLmlkZW50aWZpZXIubWFwKCh4KSA9PiBuZXcgZmhpci5JZGVudGlmaWVyKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaWRlbnRpZmllciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydhY3RpdmUnXSkgeyB0aGlzLmFjdGl2ZSA9IG5ldyBmaGlyLkZoaXJCb29sZWFuKHt2YWx1ZTogc291cmNlLmFjdGl2ZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydwZXJpb2QnXSkgeyB0aGlzLnBlcmlvZCA9IG5ldyBmaGlyLlBlcmlvZChzb3VyY2UucGVyaW9kKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJhY3RpdGlvbmVyJ10pIHsgdGhpcy5wcmFjdGl0aW9uZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnByYWN0aXRpb25lcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ29yZ2FuaXphdGlvbiddKSB7IHRoaXMub3JnYW5pemF0aW9uID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5vcmdhbml6YXRpb24pOyB9XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gc291cmNlLmNvZGUubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb2RlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3NwZWNpYWx0eSddKSB7IHRoaXMuc3BlY2lhbHR5ID0gc291cmNlLnNwZWNpYWx0eS5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnNwZWNpYWx0eSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydsb2NhdGlvbiddKSB7IHRoaXMubG9jYXRpb24gPSBzb3VyY2UubG9jYXRpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5sb2NhdGlvbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydoZWFsdGhjYXJlU2VydmljZSddKSB7IHRoaXMuaGVhbHRoY2FyZVNlcnZpY2UgPSBzb3VyY2UuaGVhbHRoY2FyZVNlcnZpY2UubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5oZWFsdGhjYXJlU2VydmljZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWyd0ZWxlY29tJ10pIHsgdGhpcy50ZWxlY29tID0gc291cmNlLnRlbGVjb20ubWFwKCh4KSA9PiBuZXcgZmhpci5Db250YWN0UG9pbnQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy50ZWxlY29tID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2F2YWlsYWJsZVRpbWUnXSkgeyB0aGlzLmF2YWlsYWJsZVRpbWUgPSBzb3VyY2UuYXZhaWxhYmxlVGltZS5tYXAoKHgpID0+IG5ldyBmaGlyLlByYWN0aXRpb25lclJvbGVBdmFpbGFibGVUaW1lKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYXZhaWxhYmxlVGltZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydub3RBdmFpbGFibGUnXSkgeyB0aGlzLm5vdEF2YWlsYWJsZSA9IHNvdXJjZS5ub3RBdmFpbGFibGUubWFwKCh4KSA9PiBuZXcgZmhpci5QcmFjdGl0aW9uZXJSb2xlTm90QXZhaWxhYmxlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubm90QXZhaWxhYmxlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2F2YWlsYWJpbGl0eUV4Y2VwdGlvbnMnXSkgeyB0aGlzLmF2YWlsYWJpbGl0eUV4Y2VwdGlvbnMgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmF2YWlsYWJpbGl0eUV4Y2VwdGlvbnN9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZW5kcG9pbnQnXSkgeyB0aGlzLmVuZHBvaW50ID0gc291cmNlLmVuZHBvaW50Lm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZW5kcG9pbnQgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBQcmVmZXJyZWQtYm91bmQgVmFsdWUgU2V0IGZvciBzcGVjaWFsdHkgKFByYWN0aXRpb25lclJvbGUuc3BlY2lhbHR5KVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgc3BlY2lhbHR5UHJlZmVycmVkQ29kaW5nKCk6QzgwUHJhY3RpY2VDb2Rlc0NvZGluZ1R5cGUge1xyXG4gICAgcmV0dXJuIEM4MFByYWN0aWNlQ29kZXNDb2RpbmdzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKCF0aGlzWydyZXNvdXJjZVR5cGUnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCAgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHJlc291cmNlVHlwZTpcIlByYWN0aXRpb25lclJvbGVcIiBmaGlyOiBQcmFjdGl0aW9uZXJSb2xlLnJlc291cmNlVHlwZTpcIlByYWN0aXRpb25lclJvbGVcIicsIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJpZGVudGlmaWVyXCJdKSB7IHRoaXMuaWRlbnRpZmllci5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wiYWN0aXZlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuYWN0aXZlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInBlcmlvZFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnBlcmlvZC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJwcmFjdGl0aW9uZXJcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5wcmFjdGl0aW9uZXIuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wib3JnYW5pemF0aW9uXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMub3JnYW5pemF0aW9uLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImNvZGVcIl0pIHsgdGhpcy5jb2RlLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJzcGVjaWFsdHlcIl0pIHsgdGhpcy5zcGVjaWFsdHkuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImxvY2F0aW9uXCJdKSB7IHRoaXMubG9jYXRpb24uZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImhlYWx0aGNhcmVTZXJ2aWNlXCJdKSB7IHRoaXMuaGVhbHRoY2FyZVNlcnZpY2UuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcInRlbGVjb21cIl0pIHsgdGhpcy50ZWxlY29tLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJhdmFpbGFibGVUaW1lXCJdKSB7IHRoaXMuYXZhaWxhYmxlVGltZS5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wibm90QXZhaWxhYmxlXCJdKSB7IHRoaXMubm90QXZhaWxhYmxlLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJhdmFpbGFiaWxpdHlFeGNlcHRpb25zXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuYXZhaWxhYmlsaXR5RXhjZXB0aW9ucy5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJlbmRwb2ludFwiXSkgeyB0aGlzLmVuZHBvaW50LmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuIl19