// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: PractitionerRole
import * as fhir from '../fhir.js';
// @ts-ignore
import { DaysOfWeekCodes } from '../fhirValueSets/DaysOfWeekCodes.js';
// @ts-ignore
import { C80PracticeCodings, } from '../fhirValueSets/C80PracticeCodings.js';
/**
 * More detailed availability information may be provided in associated Schedule/Slot resources.
 */
export class PractitionerRoleAvailableTime extends fhir.BackboneElement {
    /**
     * Default constructor for PractitionerRoleAvailableTime - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['daysOfWeek']) {
            this.daysOfWeek = source.daysOfWeek.map((x) => new fhir.FhirCode({ value: x }));
        }
        else {
            this.daysOfWeek = [];
        }
        if (source['_daysOfWeek']) {
            source._daysOfWeek.forEach((x, i) => {
                if (this.daysOfWeek.length >= i) {
                    if (x) {
                        this.daysOfWeek[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.daysOfWeek.push(new fhir.FhirCode(x));
                    }
                }
            });
        }
        if (source['allDay']) {
            this.allDay = new fhir.FhirBoolean({ value: source.allDay });
        }
        if (source['_allDay']) {
            if (this.allDay) {
                this.allDay.addExtendedProperties(source._allDay);
            }
            else {
                this.allDay = new fhir.FhirBoolean(source._allDay);
            }
        }
        if (source['availableStartTime']) {
            this.availableStartTime = new fhir.FhirTime({ value: source.availableStartTime });
        }
        if (source['_availableStartTime']) {
            if (this.availableStartTime) {
                this.availableStartTime.addExtendedProperties(source._availableStartTime);
            }
            else {
                this.availableStartTime = new fhir.FhirTime(source._availableStartTime);
            }
        }
        if (source['availableEndTime']) {
            this.availableEndTime = new fhir.FhirTime({ value: source.availableEndTime });
        }
        if (source['_availableEndTime']) {
            if (this.availableEndTime) {
                this.availableEndTime.addExtendedProperties(source._availableEndTime);
            }
            else {
                this.availableEndTime = new fhir.FhirTime(source._availableEndTime);
            }
        }
    }
    /**
     * Required-bound Value Set for daysOfWeek (PractitionerRole.availableTime.daysOfWeek)
     */
    static get daysOfWeekRequiredCodes() {
        return DaysOfWeekCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'PractitionerRole.availableTime';
        }
        if (this['daysOfWeek']) {
            this.daysOfWeek.forEach((v) => {
                if (!Object.values(DaysOfWeekCodes).includes(v.value)) {
                    issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'daysOfWeek (PractitionerRole.availableTime.daysOfWeek) of type code is missing code for Required binding to: DaysOfWeek', expression: [expression] });
                }
            });
        }
        if (this["daysOfWeek"]) {
            this.daysOfWeek.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.daysOfWeek[${i}]`)); });
        }
        if (this["allDay"]) {
            issues.push(...this.allDay.doModelValidation(expression + '.allDay'));
        }
        if (this["availableStartTime"]) {
            issues.push(...this.availableStartTime.doModelValidation(expression + '.availableStartTime'));
        }
        if (this["availableEndTime"]) {
            issues.push(...this.availableEndTime.doModelValidation(expression + '.availableEndTime'));
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
PractitionerRoleAvailableTime._fts_dataType = 'PractitionerRoleAvailableTime';
/**
 * The practitioner is not available or performing this role during this period of time due to the provided reason.
 */
export class PractitionerRoleNotAvailable extends fhir.BackboneElement {
    /**
     * Default constructor for PractitionerRoleNotAvailable - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['description']) {
            this.description = new fhir.FhirString({ value: source.description });
        }
        else {
            this.description = null;
        }
        if (source['_description']) {
            if (this.description) {
                this.description.addExtendedProperties(source._description);
            }
            else {
                this.description = new fhir.FhirString(source._description);
            }
        }
        if (source['during']) {
            this.during = new fhir.Period(source.during);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'PractitionerRole.notAvailable';
        }
        if (!this['description']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property description fhir: PractitionerRole.notAvailable.description:string', expression: [expression] });
        }
        if (this["description"]) {
            issues.push(...this.description.doModelValidation(expression + '.description'));
        }
        if (this["during"]) {
            issues.push(...this.during.doModelValidation(expression + '.during'));
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
PractitionerRoleNotAvailable._fts_dataType = 'PractitionerRoleNotAvailable';
/**
 * A specific set of Roles/Locations/specialties/services that a practitioner may perform at an organization for a period of time.
 */
export class PractitionerRole extends fhir.DomainResource {
    /**
     * Default constructor for PractitionerRole - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'PractitionerRole';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['active']) {
            this.active = new fhir.FhirBoolean({ value: source.active });
        }
        if (source['_active']) {
            if (this.active) {
                this.active.addExtendedProperties(source._active);
            }
            else {
                this.active = new fhir.FhirBoolean(source._active);
            }
        }
        if (source['period']) {
            this.period = new fhir.Period(source.period);
        }
        if (source['practitioner']) {
            this.practitioner = new fhir.Reference(source.practitioner);
        }
        if (source['organization']) {
            this.organization = new fhir.Reference(source.organization);
        }
        if (source['code']) {
            this.code = source.code.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.code = [];
        }
        if (source['specialty']) {
            this.specialty = source.specialty.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.specialty = [];
        }
        if (source['location']) {
            this.location = source.location.map((x) => new fhir.Reference(x));
        }
        else {
            this.location = [];
        }
        if (source['healthcareService']) {
            this.healthcareService = source.healthcareService.map((x) => new fhir.Reference(x));
        }
        else {
            this.healthcareService = [];
        }
        if (source['telecom']) {
            this.telecom = source.telecom.map((x) => new fhir.ContactPoint(x));
        }
        else {
            this.telecom = [];
        }
        if (source['availableTime']) {
            this.availableTime = source.availableTime.map((x) => new fhir.PractitionerRoleAvailableTime(x));
        }
        else {
            this.availableTime = [];
        }
        if (source['notAvailable']) {
            this.notAvailable = source.notAvailable.map((x) => new fhir.PractitionerRoleNotAvailable(x));
        }
        else {
            this.notAvailable = [];
        }
        if (source['availabilityExceptions']) {
            this.availabilityExceptions = new fhir.FhirString({ value: source.availabilityExceptions });
        }
        if (source['_availabilityExceptions']) {
            if (this.availabilityExceptions) {
                this.availabilityExceptions.addExtendedProperties(source._availabilityExceptions);
            }
            else {
                this.availabilityExceptions = new fhir.FhirString(source._availabilityExceptions);
            }
        }
        if (source['endpoint']) {
            this.endpoint = source.endpoint.map((x) => new fhir.Reference(x));
        }
        else {
            this.endpoint = [];
        }
    }
    /**
     * Preferred-bound Value Set for specialty (PractitionerRole.specialty)
     */
    static get specialtyPreferredCodings() {
        return C80PracticeCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'PractitionerRole';
        }
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType fhir: PractitionerRole.resourceType:"PractitionerRole"', expression: [expression] });
        }
        if (this["identifier"]) {
            this.identifier.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.identifier[${i}]`)); });
        }
        if (this["active"]) {
            issues.push(...this.active.doModelValidation(expression + '.active'));
        }
        if (this["period"]) {
            issues.push(...this.period.doModelValidation(expression + '.period'));
        }
        if (this["practitioner"]) {
            issues.push(...this.practitioner.doModelValidation(expression + '.practitioner'));
        }
        if (this["organization"]) {
            issues.push(...this.organization.doModelValidation(expression + '.organization'));
        }
        if (this["code"]) {
            this.code.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.code[${i}]`)); });
        }
        if (this["specialty"]) {
            this.specialty.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.specialty[${i}]`)); });
        }
        if (this["location"]) {
            this.location.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.location[${i}]`)); });
        }
        if (this["healthcareService"]) {
            this.healthcareService.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.healthcareService[${i}]`)); });
        }
        if (this["telecom"]) {
            this.telecom.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.telecom[${i}]`)); });
        }
        if (this["availableTime"]) {
            this.availableTime.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.availableTime[${i}]`)); });
        }
        if (this["notAvailable"]) {
            this.notAvailable.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.notAvailable[${i}]`)); });
        }
        if (this["availabilityExceptions"]) {
            issues.push(...this.availabilityExceptions.doModelValidation(expression + '.availabilityExceptions'));
        }
        if (this["endpoint"]) {
            this.endpoint.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.endpoint[${i}]`)); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
PractitionerRole._fts_dataType = 'PractitionerRole';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUHJhY3RpdGlvbmVyUm9sZS5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvUHJhY3RpdGlvbmVyUm9sZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQyxrQ0FBa0M7QUFFbEMsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFJbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSxlQUFlLEVBQXVCLE1BQU0scUNBQXFDLENBQUM7QUFLM0YsYUFBYTtBQUNiLE9BQU8sRUFBRSxrQkFBa0IsR0FBeUIsTUFBTSx3Q0FBd0MsQ0FBQztBQXlDbkc7O0dBRUc7QUFDSCxNQUFNLE9BQU8sNkJBQThCLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFxQnJFOztPQUVHO0lBQ0gsWUFBWSxTQUFvRCxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUMxRyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLFlBQVksQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFxQixFQUFDLEtBQUssRUFBRSxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUMzSDtZQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsRUFBRSxDQUFDO1NBQUU7UUFDOUIsSUFBSSxNQUFNLENBQUMsYUFBYSxDQUFDLEVBQUU7WUFDekIsTUFBTSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUU7Z0JBQ2pDLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUFFO29CQUFFLElBQUksQ0FBQyxFQUFFO3dCQUFFLElBQUksQ0FBQyxVQUFVLENB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Q0FBQyx3QkFBd0IsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLEdBQUMseUJBQXlCLENBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDNUksSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLENBQUMsVUFBVSxHQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7U0FBRTtRQUNoSSxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQXBJRDs7R0FFRztBQUM2Qiw4QkFBYSxHQUFVLGtCQUFrQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0LmNvcmUgdmVyc2lvbjogNC4wLjFcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBQcmFjdGl0aW9uZXJSb2xlXHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEYXlzT2ZXZWVrQ29kaW5ncywgRGF5c09mV2Vla0NvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0RheXNPZldlZWtDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEYXlzT2ZXZWVrQ29kZXMsICBEYXlzT2ZXZWVrQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0RheXNPZldlZWtDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUHJhY3RpdGlvbmVyUm9sZUNvZGluZ3MsIFByYWN0aXRpb25lclJvbGVDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9QcmFjdGl0aW9uZXJSb2xlQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUHJhY3RpdGlvbmVyUm9sZUNvZGVzLCAgUHJhY3RpdGlvbmVyUm9sZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9QcmFjdGl0aW9uZXJSb2xlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEM4MFByYWN0aWNlQ29kaW5ncywgQzgwUHJhY3RpY2VDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9DODBQcmFjdGljZUNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEM4MFByYWN0aWNlQ29kZXMsICBDODBQcmFjdGljZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9DODBQcmFjdGljZUNvZGVzLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFByYWN0aXRpb25lclJvbGVBdmFpbGFibGVUaW1lIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFByYWN0aXRpb25lclJvbGVBdmFpbGFibGVUaW1lQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHdoaWNoIGRheXMgb2YgdGhlIHdlZWsgYXJlIGF2YWlsYWJsZSBiZXR3ZWVuIHRoZSBzdGFydCBhbmQgZW5kIFRpbWVzLlxyXG4gICAqL1xyXG4gIGRheXNPZldlZWs/OiBmaGlyLkZoaXJDb2RlPERheXNPZldlZWtDb2RlVHlwZT5bXXxzdHJpbmdbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFByYWN0aXRpb25lclJvbGUuYXZhaWxhYmxlVGltZS5kYXlzT2ZXZWVrXHJcbiAgICovXHJcbiAgX2RheXNPZldlZWs/OihmaGlyLkZoaXJFbGVtZW50QXJnc3xudWxsKVtdO1xyXG4gIC8qKlxyXG4gICAqIElzIHRoaXMgYWx3YXlzIGF2YWlsYWJsZT8gKGhlbmNlIHRpbWVzIGFyZSBpcnJlbGV2YW50KSBlLmcuIDI0IGhvdXIgc2VydmljZS5cclxuICAgKi9cclxuICBhbGxEYXk/OiBmaGlyLkZoaXJCb29sZWFufGJvb2xlYW58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBQcmFjdGl0aW9uZXJSb2xlLmF2YWlsYWJsZVRpbWUuYWxsRGF5XHJcbiAgICovXHJcbiAgX2FsbERheT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRpbWV6b25lIGlzIGV4cGVjdGVkIHRvIGJlIGZvciB3aGVyZSB0aGlzIEhlYWx0aGNhcmVTZXJ2aWNlIGlzIHByb3ZpZGVkIGF0LlxyXG4gICAqL1xyXG4gIGF2YWlsYWJsZVN0YXJ0VGltZT86IGZoaXIuRmhpclRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogUHJhY3RpdGlvbmVyUm9sZS5hdmFpbGFibGVUaW1lLmF2YWlsYWJsZVN0YXJ0VGltZVxyXG4gICAqL1xyXG4gIF9hdmFpbGFibGVTdGFydFRpbWU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0aW1lem9uZSBpcyBleHBlY3RlZCB0byBiZSBmb3Igd2hlcmUgdGhpcyBIZWFsdGhjYXJlU2VydmljZSBpcyBwcm92aWRlZCBhdC5cclxuICAgKi9cclxuICBhdmFpbGFibGVFbmRUaW1lPzogZmhpci5GaGlyVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBQcmFjdGl0aW9uZXJSb2xlLmF2YWlsYWJsZVRpbWUuYXZhaWxhYmxlRW5kVGltZVxyXG4gICAqL1xyXG4gIF9hdmFpbGFibGVFbmRUaW1lPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIE1vcmUgZGV0YWlsZWQgYXZhaWxhYmlsaXR5IGluZm9ybWF0aW9uIG1heSBiZSBwcm92aWRlZCBpbiBhc3NvY2lhdGVkIFNjaGVkdWxlL1Nsb3QgcmVzb3VyY2VzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFByYWN0aXRpb25lclJvbGVBdmFpbGFibGVUaW1lIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnUHJhY3RpdGlvbmVyUm9sZUF2YWlsYWJsZVRpbWUnO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB3aGljaCBkYXlzIG9mIHRoZSB3ZWVrIGFyZSBhdmFpbGFibGUgYmV0d2VlbiB0aGUgc3RhcnQgYW5kIGVuZCBUaW1lcy5cclxuICAgKi9cclxuICBwdWJsaWMgZGF5c09mV2VlazogZmhpci5GaGlyQ29kZTxEYXlzT2ZXZWVrQ29kZVR5cGU+W107XHJcbiAgLyoqXHJcbiAgICogSXMgdGhpcyBhbHdheXMgYXZhaWxhYmxlPyAoaGVuY2UgdGltZXMgYXJlIGlycmVsZXZhbnQpIGUuZy4gMjQgaG91ciBzZXJ2aWNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhbGxEYXk/OiBmaGlyLkZoaXJCb29sZWFufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdGltZXpvbmUgaXMgZXhwZWN0ZWQgdG8gYmUgZm9yIHdoZXJlIHRoaXMgSGVhbHRoY2FyZVNlcnZpY2UgaXMgcHJvdmlkZWQgYXQuXHJcbiAgICovXHJcbiAgcHVibGljIGF2YWlsYWJsZVN0YXJ0VGltZT86IGZoaXIuRmhpclRpbWV8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0aW1lem9uZSBpcyBleHBlY3RlZCB0byBiZSBmb3Igd2hlcmUgdGhpcyBIZWFsdGhjYXJlU2VydmljZSBpcyBwcm92aWRlZCBhdC5cclxuICAgKi9cclxuICBwdWJsaWMgYXZhaWxhYmxlRW5kVGltZT86IGZoaXIuRmhpclRpbWV8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFByYWN0aXRpb25lclJvbGVBdmFpbGFibGVUaW1lIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8UHJhY3RpdGlvbmVyUm9sZUF2YWlsYWJsZVRpbWVBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnZGF5c09mV2VlayddKSB7IHRoaXMuZGF5c09mV2VlayA9IHNvdXJjZS5kYXlzT2ZXZWVrLm1hcCgoeCkgPT4gbmV3IGZoaXIuRmhpckNvZGU8RGF5c09mV2Vla0NvZGVUeXBlPih7dmFsdWU6IHh9KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmRheXNPZldlZWsgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2RheXNPZldlZWsnXSkge1xyXG4gICAgICBzb3VyY2UuX2RheXNPZldlZWsuZm9yRWFjaCgoeCxpKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGF5c09mV2Vlay5sZW5ndGggPj0gaSkgeyBpZiAoeCkgeyB0aGlzLmRheXNPZldlZWtbaV0uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHgpOyB9IH1cclxuICAgICAgICBlbHNlIHsgaWYgKHgpIHsgdGhpcy5kYXlzT2ZXZWVrLnB1c2gobmV3IGZoaXIuRmhpckNvZGU8RGF5c09mV2Vla0NvZGVUeXBlPih4IGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pKTsgfSB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnYWxsRGF5J10pIHsgdGhpcy5hbGxEYXkgPSBuZXcgZmhpci5GaGlyQm9vbGVhbih7dmFsdWU6IHNvdXJjZS5hbGxEYXl9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2FsbERheSddKSB7XHJcbiAgICAgIGlmICh0aGlzLmFsbERheSkgeyB0aGlzLmFsbERheS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9hbGxEYXkhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5hbGxEYXkgPSBuZXcgZmhpci5GaGlyQm9vbGVhbihzb3VyY2UuX2FsbERheSBhcyBQYXJ0aWFsPGZoaXIuRmhpckJvb2xlYW5BcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2F2YWlsYWJsZVN0YXJ0VGltZSddKSB7IHRoaXMuYXZhaWxhYmxlU3RhcnRUaW1lID0gbmV3IGZoaXIuRmhpclRpbWUoe3ZhbHVlOiBzb3VyY2UuYXZhaWxhYmxlU3RhcnRUaW1lfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19hdmFpbGFibGVTdGFydFRpbWUnXSkge1xyXG4gICAgICBpZiAodGhpcy5hdmFpbGFibGVTdGFydFRpbWUpIHsgdGhpcy5hdmFpbGFibGVTdGFydFRpbWUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fYXZhaWxhYmxlU3RhcnRUaW1lISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuYXZhaWxhYmxlU3RhcnRUaW1lID0gbmV3IGZoaXIuRmhpclRpbWUoc291cmNlLl9hdmFpbGFibGVTdGFydFRpbWUgYXMgUGFydGlhbDxmaGlyLkZoaXJUaW1lQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydhdmFpbGFibGVFbmRUaW1lJ10pIHsgdGhpcy5hdmFpbGFibGVFbmRUaW1lID0gbmV3IGZoaXIuRmhpclRpbWUoe3ZhbHVlOiBzb3VyY2UuYXZhaWxhYmxlRW5kVGltZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfYXZhaWxhYmxlRW5kVGltZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLmF2YWlsYWJsZUVuZFRpbWUpIHsgdGhpcy5hdmFpbGFibGVFbmRUaW1lLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2F2YWlsYWJsZUVuZFRpbWUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5hdmFpbGFibGVFbmRUaW1lID0gbmV3IGZoaXIuRmhpclRpbWUoc291cmNlLl9hdmFpbGFibGVFbmRUaW1lIGFzIFBhcnRpYWw8Zmhpci5GaGlyVGltZUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIGRheXNPZldlZWsgKFByYWN0aXRpb25lclJvbGUuYXZhaWxhYmxlVGltZS5kYXlzT2ZXZWVrKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IGRheXNPZldlZWtSZXF1aXJlZENvZGVzKCkge1xyXG4gICAgcmV0dXJuIERheXNPZldlZWtDb2RlcztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb246c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24pO1xyXG4gICAgaWYgKGV4cHJlc3Npb24gPT09ICcnKSB7IGV4cHJlc3Npb24gPSAnUHJhY3RpdGlvbmVyUm9sZS5hdmFpbGFibGVUaW1lJyB9XHJcbiAgICBpZiAodGhpc1snZGF5c09mV2VlayddKSB7XHJcbiAgICAgIHRoaXMuZGF5c09mV2Vlay5mb3JFYWNoKCh2KSA9PiB7XHJcbiAgICAgICAgaWYgKCFPYmplY3QudmFsdWVzKERheXNPZldlZWtDb2RlcykuaW5jbHVkZXModi52YWx1ZSBhcyBhbnkpKSB7XHJcbiAgICAgICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnY29kZS1pbnZhbGlkJywgZGlhZ25vc3RpY3M6ICdkYXlzT2ZXZWVrIChQcmFjdGl0aW9uZXJSb2xlLmF2YWlsYWJsZVRpbWUuZGF5c09mV2Vlaykgb2YgdHlwZSBjb2RlIGlzIG1pc3NpbmcgY29kZSBmb3IgUmVxdWlyZWQgYmluZGluZyB0bzogRGF5c09mV2VlaycsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJkYXlzT2ZXZWVrXCJdKSB7IHRoaXMuZGF5c09mV2Vlay5mb3JFYWNoKCh4LGkpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uK2AuZGF5c09mV2Vla1ske2l9XWApKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJhbGxEYXlcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5hbGxEYXkuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLmFsbERheScpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJhdmFpbGFibGVTdGFydFRpbWVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5hdmFpbGFibGVTdGFydFRpbWUuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLmF2YWlsYWJsZVN0YXJ0VGltZScpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJhdmFpbGFibGVFbmRUaW1lXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuYXZhaWxhYmxlRW5kVGltZS5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuYXZhaWxhYmxlRW5kVGltZScpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFByYWN0aXRpb25lclJvbGVOb3RBdmFpbGFibGUgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgUHJhY3RpdGlvbmVyUm9sZU5vdEF2YWlsYWJsZUFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZWFzb24gdGhhdCBjYW4gYmUgcHJlc2VudGVkIHRvIHRoZSB1c2VyIGFzIHRvIHdoeSB0aGlzIHRpbWUgaXMgbm90IGF2YWlsYWJsZS5cclxuICAgKi9cclxuICBkZXNjcmlwdGlvbjogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFByYWN0aXRpb25lclJvbGUubm90QXZhaWxhYmxlLmRlc2NyaXB0aW9uXHJcbiAgICovXHJcbiAgX2Rlc2NyaXB0aW9uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBTZXJ2aWNlIGlzIG5vdCBhdmFpbGFibGUgKHNlYXNvbmFsbHkgb3IgZm9yIGEgcHVibGljIGhvbGlkYXkpIGZyb20gdGhpcyBkYXRlLlxyXG4gICAqL1xyXG4gIGR1cmluZz86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgcHJhY3RpdGlvbmVyIGlzIG5vdCBhdmFpbGFibGUgb3IgcGVyZm9ybWluZyB0aGlzIHJvbGUgZHVyaW5nIHRoaXMgcGVyaW9kIG9mIHRpbWUgZHVlIHRvIHRoZSBwcm92aWRlZCByZWFzb24uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUHJhY3RpdGlvbmVyUm9sZU5vdEF2YWlsYWJsZSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1ByYWN0aXRpb25lclJvbGVOb3RBdmFpbGFibGUnO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZWFzb24gdGhhdCBjYW4gYmUgcHJlc2VudGVkIHRvIHRoZSB1c2VyIGFzIHRvIHdoeSB0aGlzIHRpbWUgaXMgbm90IGF2YWlsYWJsZS5cclxuICAgKi9cclxuICBwdWJsaWMgZGVzY3JpcHRpb246IGZoaXIuRmhpclN0cmluZ3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFNlcnZpY2UgaXMgbm90IGF2YWlsYWJsZSAoc2Vhc29uYWxseSBvciBmb3IgYSBwdWJsaWMgaG9saWRheSkgZnJvbSB0aGlzIGRhdGUuXHJcbiAgICovXHJcbiAgcHVibGljIGR1cmluZz86IGZoaXIuUGVyaW9kfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBQcmFjdGl0aW9uZXJSb2xlTm90QXZhaWxhYmxlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8UHJhY3RpdGlvbmVyUm9sZU5vdEF2YWlsYWJsZUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydkZXNjcmlwdGlvbiddKSB7IHRoaXMuZGVzY3JpcHRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmRlc2NyaXB0aW9ufSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmRlc2NyaXB0aW9uID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2Rlc2NyaXB0aW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZGVzY3JpcHRpb24pIHsgdGhpcy5kZXNjcmlwdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9kZXNjcmlwdGlvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRlc2NyaXB0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2Rlc2NyaXB0aW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydkdXJpbmcnXSkgeyB0aGlzLmR1cmluZyA9IG5ldyBmaGlyLlBlcmlvZChzb3VyY2UuZHVyaW5nKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdQcmFjdGl0aW9uZXJSb2xlLm5vdEF2YWlsYWJsZScgfVxyXG4gICAgaWYgKCF0aGlzWydkZXNjcmlwdGlvbiddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBkZXNjcmlwdGlvbiBmaGlyOiBQcmFjdGl0aW9uZXJSb2xlLm5vdEF2YWlsYWJsZS5kZXNjcmlwdGlvbjpzdHJpbmcnLCBleHByZXNzaW9uOiBbZXhwcmVzc2lvbl0gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImRlc2NyaXB0aW9uXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZGVzY3JpcHRpb24uZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLmRlc2NyaXB0aW9uJykpOyB9XHJcbiAgICBpZiAodGhpc1tcImR1cmluZ1wiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmR1cmluZy5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuZHVyaW5nJykpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgUHJhY3RpdGlvbmVyUm9sZSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBQcmFjdGl0aW9uZXJSb2xlQXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiUHJhY3RpdGlvbmVyUm9sZVwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBCdXNpbmVzcyBJZGVudGlmaWVycyB0aGF0IGFyZSBzcGVjaWZpYyB0byBhIHJvbGUvbG9jYXRpb24uXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhpcyB2YWx1ZSBpcyBmYWxzZSwgeW91IG1heSByZWZlciB0byB0aGUgcGVyaW9kIHRvIHNlZSB3aGVuIHRoZSByb2xlIHdhcyBpbiBhY3RpdmUgdXNlLiBJZiB0aGVyZSBpcyBubyBwZXJpb2Qgc3BlY2lmaWVkLCBubyBpbmZlcmVuY2UgY2FuIGJlIG1hZGUgYWJvdXQgd2hlbiBpdCB3YXMgYWN0aXZlLlxyXG4gICAqL1xyXG4gIGFjdGl2ZT86IGZoaXIuRmhpckJvb2xlYW58Ym9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFByYWN0aXRpb25lclJvbGUuYWN0aXZlXHJcbiAgICovXHJcbiAgX2FjdGl2ZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBlcmlvZCBkdXJpbmcgd2hpY2ggdGhlIHBlcnNvbiBpcyBhdXRob3JpemVkIHRvIGFjdCBhcyBhIHByYWN0aXRpb25lciBpbiB0aGVzZSByb2xlKHMpIGZvciB0aGUgb3JnYW5pemF0aW9uLlxyXG4gICAqL1xyXG4gIHBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUHJhY3RpdGlvbmVyIHRoYXQgaXMgYWJsZSB0byBwcm92aWRlIHRoZSBkZWZpbmVkIHNlcnZpY2VzIGZvciB0aGUgb3JnYW5pemF0aW9uLlxyXG4gICAqL1xyXG4gIHByYWN0aXRpb25lcj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG9yZ2FuaXphdGlvbiB3aGVyZSB0aGUgUHJhY3RpdGlvbmVyIHBlcmZvcm1zIHRoZSByb2xlcyBhc3NvY2lhdGVkLlxyXG4gICAqL1xyXG4gIG9yZ2FuaXphdGlvbj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBwZXJzb24gbWF5IGhhdmUgbW9yZSB0aGFuIG9uZSByb2xlLlxyXG4gICAqL1xyXG4gIGNvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU3BlY2lmaWMgc3BlY2lhbHR5IG9mIHRoZSBwcmFjdGl0aW9uZXIuXHJcbiAgICovXHJcbiAgc3BlY2lhbHR5PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsb2NhdGlvbihzKSBhdCB3aGljaCB0aGlzIHByYWN0aXRpb25lciBwcm92aWRlcyBjYXJlLlxyXG4gICAqL1xyXG4gIGxvY2F0aW9uPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsaXN0IG9mIGhlYWx0aGNhcmUgc2VydmljZXMgdGhhdCB0aGlzIHdvcmtlciBwcm92aWRlcyBmb3IgdGhpcyByb2xlJ3MgT3JnYW5pemF0aW9uL0xvY2F0aW9uKHMpLlxyXG4gICAqL1xyXG4gIGhlYWx0aGNhcmVTZXJ2aWNlPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENvbnRhY3QgZGV0YWlscyB0aGF0IGFyZSBzcGVjaWZpYyB0byB0aGUgcm9sZS9sb2NhdGlvbi9zZXJ2aWNlLlxyXG4gICAqL1xyXG4gIHRlbGVjb20/OiBmaGlyLkNvbnRhY3RQb2ludEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTW9yZSBkZXRhaWxlZCBhdmFpbGFiaWxpdHkgaW5mb3JtYXRpb24gbWF5IGJlIHByb3ZpZGVkIGluIGFzc29jaWF0ZWQgU2NoZWR1bGUvU2xvdCByZXNvdXJjZXMuXHJcbiAgICovXHJcbiAgYXZhaWxhYmxlVGltZT86IGZoaXIuUHJhY3RpdGlvbmVyUm9sZUF2YWlsYWJsZVRpbWVBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwcmFjdGl0aW9uZXIgaXMgbm90IGF2YWlsYWJsZSBvciBwZXJmb3JtaW5nIHRoaXMgcm9sZSBkdXJpbmcgdGhpcyBwZXJpb2Qgb2YgdGltZSBkdWUgdG8gdGhlIHByb3ZpZGVkIHJlYXNvbi5cclxuICAgKi9cclxuICBub3RBdmFpbGFibGU/OiBmaGlyLlByYWN0aXRpb25lclJvbGVOb3RBdmFpbGFibGVBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgZGVzY3JpcHRpb24gb2Ygc2l0ZSBhdmFpbGFiaWxpdHkgZXhjZXB0aW9ucywgZS5nLiBwdWJsaWMgaG9saWRheSBhdmFpbGFiaWxpdHkuIFN1Y2NpbmN0bHkgZGVzY3JpYmluZyBhbGwgcG9zc2libGUgZXhjZXB0aW9ucyB0byBub3JtYWwgc2l0ZSBhdmFpbGFiaWxpdHkgYXMgZGV0YWlscyBpbiB0aGUgYXZhaWxhYmxlIFRpbWVzIGFuZCBub3QgYXZhaWxhYmxlIFRpbWVzLlxyXG4gICAqL1xyXG4gIGF2YWlsYWJpbGl0eUV4Y2VwdGlvbnM/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogUHJhY3RpdGlvbmVyUm9sZS5hdmFpbGFiaWxpdHlFeGNlcHRpb25zXHJcbiAgICovXHJcbiAgX2F2YWlsYWJpbGl0eUV4Y2VwdGlvbnM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRlY2huaWNhbCBlbmRwb2ludHMgcHJvdmlkaW5nIGFjY2VzcyB0byBzZXJ2aWNlcyBvcGVyYXRlZCBmb3IgdGhlIHByYWN0aXRpb25lciB3aXRoIHRoaXMgcm9sZS5cclxuICAgKi9cclxuICBlbmRwb2ludD86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgc3BlY2lmaWMgc2V0IG9mIFJvbGVzL0xvY2F0aW9ucy9zcGVjaWFsdGllcy9zZXJ2aWNlcyB0aGF0IGEgcHJhY3RpdGlvbmVyIG1heSBwZXJmb3JtIGF0IGFuIG9yZ2FuaXphdGlvbiBmb3IgYSBwZXJpb2Qgb2YgdGltZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBQcmFjdGl0aW9uZXJSb2xlIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdQcmFjdGl0aW9uZXJSb2xlJztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIlByYWN0aXRpb25lclJvbGVcIjtcclxuICAvKipcclxuICAgKiBCdXNpbmVzcyBJZGVudGlmaWVycyB0aGF0IGFyZSBzcGVjaWZpYyB0byBhIHJvbGUvbG9jYXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI6IGZoaXIuSWRlbnRpZmllcltdO1xyXG4gIC8qKlxyXG4gICAqIElmIHRoaXMgdmFsdWUgaXMgZmFsc2UsIHlvdSBtYXkgcmVmZXIgdG8gdGhlIHBlcmlvZCB0byBzZWUgd2hlbiB0aGUgcm9sZSB3YXMgaW4gYWN0aXZlIHVzZS4gSWYgdGhlcmUgaXMgbm8gcGVyaW9kIHNwZWNpZmllZCwgbm8gaW5mZXJlbmNlIGNhbiBiZSBtYWRlIGFib3V0IHdoZW4gaXQgd2FzIGFjdGl2ZS5cclxuICAgKi9cclxuICBwdWJsaWMgYWN0aXZlPzogZmhpci5GaGlyQm9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBlcmlvZCBkdXJpbmcgd2hpY2ggdGhlIHBlcnNvbiBpcyBhdXRob3JpemVkIHRvIGFjdCBhcyBhIHByYWN0aXRpb25lciBpbiB0aGVzZSByb2xlKHMpIGZvciB0aGUgb3JnYW5pemF0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwZXJpb2Q/OiBmaGlyLlBlcmlvZHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUHJhY3RpdGlvbmVyIHRoYXQgaXMgYWJsZSB0byBwcm92aWRlIHRoZSBkZWZpbmVkIHNlcnZpY2VzIGZvciB0aGUgb3JnYW5pemF0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcmFjdGl0aW9uZXI/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG9yZ2FuaXphdGlvbiB3aGVyZSB0aGUgUHJhY3RpdGlvbmVyIHBlcmZvcm1zIHRoZSByb2xlcyBhc3NvY2lhdGVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvcmdhbml6YXRpb24/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBwZXJzb24gbWF5IGhhdmUgbW9yZSB0aGFuIG9uZSByb2xlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb2RlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIFNwZWNpZmljIHNwZWNpYWx0eSBvZiB0aGUgcHJhY3RpdGlvbmVyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzcGVjaWFsdHk6IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogVGhlIGxvY2F0aW9uKHMpIGF0IHdoaWNoIHRoaXMgcHJhY3RpdGlvbmVyIHByb3ZpZGVzIGNhcmUuXHJcbiAgICovXHJcbiAgcHVibGljIGxvY2F0aW9uOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsaXN0IG9mIGhlYWx0aGNhcmUgc2VydmljZXMgdGhhdCB0aGlzIHdvcmtlciBwcm92aWRlcyBmb3IgdGhpcyByb2xlJ3MgT3JnYW5pemF0aW9uL0xvY2F0aW9uKHMpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBoZWFsdGhjYXJlU2VydmljZTogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBDb250YWN0IGRldGFpbHMgdGhhdCBhcmUgc3BlY2lmaWMgdG8gdGhlIHJvbGUvbG9jYXRpb24vc2VydmljZS5cclxuICAgKi9cclxuICBwdWJsaWMgdGVsZWNvbTogZmhpci5Db250YWN0UG9pbnRbXTtcclxuICAvKipcclxuICAgKiBNb3JlIGRldGFpbGVkIGF2YWlsYWJpbGl0eSBpbmZvcm1hdGlvbiBtYXkgYmUgcHJvdmlkZWQgaW4gYXNzb2NpYXRlZCBTY2hlZHVsZS9TbG90IHJlc291cmNlcy5cclxuICAgKi9cclxuICBwdWJsaWMgYXZhaWxhYmxlVGltZTogZmhpci5QcmFjdGl0aW9uZXJSb2xlQXZhaWxhYmxlVGltZVtdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwcmFjdGl0aW9uZXIgaXMgbm90IGF2YWlsYWJsZSBvciBwZXJmb3JtaW5nIHRoaXMgcm9sZSBkdXJpbmcgdGhpcyBwZXJpb2Qgb2YgdGltZSBkdWUgdG8gdGhlIHByb3ZpZGVkIHJlYXNvbi5cclxuICAgKi9cclxuICBwdWJsaWMgbm90QXZhaWxhYmxlOiBmaGlyLlByYWN0aXRpb25lclJvbGVOb3RBdmFpbGFibGVbXTtcclxuICAvKipcclxuICAgKiBBIGRlc2NyaXB0aW9uIG9mIHNpdGUgYXZhaWxhYmlsaXR5IGV4Y2VwdGlvbnMsIGUuZy4gcHVibGljIGhvbGlkYXkgYXZhaWxhYmlsaXR5LiBTdWNjaW5jdGx5IGRlc2NyaWJpbmcgYWxsIHBvc3NpYmxlIGV4Y2VwdGlvbnMgdG8gbm9ybWFsIHNpdGUgYXZhaWxhYmlsaXR5IGFzIGRldGFpbHMgaW4gdGhlIGF2YWlsYWJsZSBUaW1lcyBhbmQgbm90IGF2YWlsYWJsZSBUaW1lcy5cclxuICAgKi9cclxuICBwdWJsaWMgYXZhaWxhYmlsaXR5RXhjZXB0aW9ucz86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGVjaG5pY2FsIGVuZHBvaW50cyBwcm92aWRpbmcgYWNjZXNzIHRvIHNlcnZpY2VzIG9wZXJhdGVkIGZvciB0aGUgcHJhY3RpdGlvbmVyIHdpdGggdGhpcyByb2xlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBlbmRwb2ludDogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBQcmFjdGl0aW9uZXJSb2xlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8UHJhY3RpdGlvbmVyUm9sZUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdQcmFjdGl0aW9uZXJSb2xlJztcclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBzb3VyY2UuaWRlbnRpZmllci5tYXAoKHgpID0+IG5ldyBmaGlyLklkZW50aWZpZXIoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pZGVudGlmaWVyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2FjdGl2ZSddKSB7IHRoaXMuYWN0aXZlID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oe3ZhbHVlOiBzb3VyY2UuYWN0aXZlfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19hY3RpdmUnXSkge1xyXG4gICAgICBpZiAodGhpcy5hY3RpdmUpIHsgdGhpcy5hY3RpdmUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fYWN0aXZlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuYWN0aXZlID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oc291cmNlLl9hY3RpdmUgYXMgUGFydGlhbDxmaGlyLkZoaXJCb29sZWFuQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydwZXJpb2QnXSkgeyB0aGlzLnBlcmlvZCA9IG5ldyBmaGlyLlBlcmlvZChzb3VyY2UucGVyaW9kKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJhY3RpdGlvbmVyJ10pIHsgdGhpcy5wcmFjdGl0aW9uZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnByYWN0aXRpb25lcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ29yZ2FuaXphdGlvbiddKSB7IHRoaXMub3JnYW5pemF0aW9uID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5vcmdhbml6YXRpb24pOyB9XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gc291cmNlLmNvZGUubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb2RlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3NwZWNpYWx0eSddKSB7IHRoaXMuc3BlY2lhbHR5ID0gc291cmNlLnNwZWNpYWx0eS5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnNwZWNpYWx0eSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydsb2NhdGlvbiddKSB7IHRoaXMubG9jYXRpb24gPSBzb3VyY2UubG9jYXRpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5sb2NhdGlvbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydoZWFsdGhjYXJlU2VydmljZSddKSB7IHRoaXMuaGVhbHRoY2FyZVNlcnZpY2UgPSBzb3VyY2UuaGVhbHRoY2FyZVNlcnZpY2UubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5oZWFsdGhjYXJlU2VydmljZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWyd0ZWxlY29tJ10pIHsgdGhpcy50ZWxlY29tID0gc291cmNlLnRlbGVjb20ubWFwKCh4KSA9PiBuZXcgZmhpci5Db250YWN0UG9pbnQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy50ZWxlY29tID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2F2YWlsYWJsZVRpbWUnXSkgeyB0aGlzLmF2YWlsYWJsZVRpbWUgPSBzb3VyY2UuYXZhaWxhYmxlVGltZS5tYXAoKHgpID0+IG5ldyBmaGlyLlByYWN0aXRpb25lclJvbGVBdmFpbGFibGVUaW1lKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYXZhaWxhYmxlVGltZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydub3RBdmFpbGFibGUnXSkgeyB0aGlzLm5vdEF2YWlsYWJsZSA9IHNvdXJjZS5ub3RBdmFpbGFibGUubWFwKCh4KSA9PiBuZXcgZmhpci5QcmFjdGl0aW9uZXJSb2xlTm90QXZhaWxhYmxlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubm90QXZhaWxhYmxlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2F2YWlsYWJpbGl0eUV4Y2VwdGlvbnMnXSkgeyB0aGlzLmF2YWlsYWJpbGl0eUV4Y2VwdGlvbnMgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmF2YWlsYWJpbGl0eUV4Y2VwdGlvbnN9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2F2YWlsYWJpbGl0eUV4Y2VwdGlvbnMnXSkge1xyXG4gICAgICBpZiAodGhpcy5hdmFpbGFiaWxpdHlFeGNlcHRpb25zKSB7IHRoaXMuYXZhaWxhYmlsaXR5RXhjZXB0aW9ucy5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9hdmFpbGFiaWxpdHlFeGNlcHRpb25zISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuYXZhaWxhYmlsaXR5RXhjZXB0aW9ucyA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9hdmFpbGFiaWxpdHlFeGNlcHRpb25zIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydlbmRwb2ludCddKSB7IHRoaXMuZW5kcG9pbnQgPSBzb3VyY2UuZW5kcG9pbnQubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5lbmRwb2ludCA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFByZWZlcnJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIHNwZWNpYWx0eSAoUHJhY3RpdGlvbmVyUm9sZS5zcGVjaWFsdHkpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgc3BlY2lhbHR5UHJlZmVycmVkQ29kaW5ncygpOkM4MFByYWN0aWNlQ29kaW5nVHlwZSB7XHJcbiAgICByZXR1cm4gQzgwUHJhY3RpY2VDb2RpbmdzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdQcmFjdGl0aW9uZXJSb2xlJyB9XHJcbiAgICBpZiAoIXRoaXNbJ3Jlc291cmNlVHlwZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSByZXNvdXJjZVR5cGUgZmhpcjogUHJhY3RpdGlvbmVyUm9sZS5yZXNvdXJjZVR5cGU6XCJQcmFjdGl0aW9uZXJSb2xlXCInLCBleHByZXNzaW9uOiBbZXhwcmVzc2lvbl0gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImlkZW50aWZpZXJcIl0pIHsgdGhpcy5pZGVudGlmaWVyLmZvckVhY2goKHgsaSkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rYC5pZGVudGlmaWVyWyR7aX1dYCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImFjdGl2ZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmFjdGl2ZS5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuYWN0aXZlJykpOyB9XHJcbiAgICBpZiAodGhpc1tcInBlcmlvZFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnBlcmlvZC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycucGVyaW9kJykpOyB9XHJcbiAgICBpZiAodGhpc1tcInByYWN0aXRpb25lclwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnByYWN0aXRpb25lci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycucHJhY3RpdGlvbmVyJykpOyB9XHJcbiAgICBpZiAodGhpc1tcIm9yZ2FuaXphdGlvblwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm9yZ2FuaXphdGlvbi5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycub3JnYW5pemF0aW9uJykpOyB9XHJcbiAgICBpZiAodGhpc1tcImNvZGVcIl0pIHsgdGhpcy5jb2RlLmZvckVhY2goKHgsaSkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rYC5jb2RlWyR7aX1dYCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcInNwZWNpYWx0eVwiXSkgeyB0aGlzLnNwZWNpYWx0eS5mb3JFYWNoKCh4LGkpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uK2Auc3BlY2lhbHR5WyR7aX1dYCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImxvY2F0aW9uXCJdKSB7IHRoaXMubG9jYXRpb24uZm9yRWFjaCgoeCxpKSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbitgLmxvY2F0aW9uWyR7aX1dYCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImhlYWx0aGNhcmVTZXJ2aWNlXCJdKSB7IHRoaXMuaGVhbHRoY2FyZVNlcnZpY2UuZm9yRWFjaCgoeCxpKSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbitgLmhlYWx0aGNhcmVTZXJ2aWNlWyR7aX1dYCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcInRlbGVjb21cIl0pIHsgdGhpcy50ZWxlY29tLmZvckVhY2goKHgsaSkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rYC50ZWxlY29tWyR7aX1dYCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImF2YWlsYWJsZVRpbWVcIl0pIHsgdGhpcy5hdmFpbGFibGVUaW1lLmZvckVhY2goKHgsaSkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rYC5hdmFpbGFibGVUaW1lWyR7aX1dYCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcIm5vdEF2YWlsYWJsZVwiXSkgeyB0aGlzLm5vdEF2YWlsYWJsZS5mb3JFYWNoKCh4LGkpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uK2Aubm90QXZhaWxhYmxlWyR7aX1dYCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImF2YWlsYWJpbGl0eUV4Y2VwdGlvbnNcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5hdmFpbGFiaWxpdHlFeGNlcHRpb25zLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5hdmFpbGFiaWxpdHlFeGNlcHRpb25zJykpOyB9XHJcbiAgICBpZiAodGhpc1tcImVuZHBvaW50XCJdKSB7IHRoaXMuZW5kcG9pbnQuZm9yRWFjaCgoeCxpKSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbitgLmVuZHBvaW50WyR7aX1dYCkpOyB9KSB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=