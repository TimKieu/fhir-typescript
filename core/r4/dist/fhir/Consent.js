// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: Consent
import * as fhir from '../fhir.js';
// @ts-ignore
import { SecurityRoleTypeCodings, } from '../fhirValueSets/SecurityRoleTypeCodings.js';
// @ts-ignore
import { ConsentDataMeaningCodes } from '../fhirValueSets/ConsentDataMeaningCodes.js';
// @ts-ignore
import { ConsentProvisionTypeCodes } from '../fhirValueSets/ConsentProvisionTypeCodes.js';
// @ts-ignore
import { SecurityLabelsCodings, } from '../fhirValueSets/SecurityLabelsCodings.js';
// @ts-ignore
import { V3PurposeOfUseCodings, } from '../fhirValueSets/V3PurposeOfUseCodings.js';
// @ts-ignore
import { ConsentContentClassCodings, } from '../fhirValueSets/ConsentContentClassCodings.js';
// @ts-ignore
import { ConsentStateCodes } from '../fhirValueSets/ConsentStateCodes.js';
// @ts-ignore
import { ConsentScopeCodings, } from '../fhirValueSets/ConsentScopeCodings.js';
// @ts-ignore
import { ConsentCategoryCodings, } from '../fhirValueSets/ConsentCategoryCodings.js';
// @ts-ignore
import { ConsentPolicyCodings, } from '../fhirValueSets/ConsentPolicyCodings.js';
/**
 * The references to the policies that are included in this consent scope. Policies may be organizational, but are often defined jurisdictionally, or in law.
 */
export class ConsentPolicy extends fhir.BackboneElement {
    /**
     * Default constructor for ConsentPolicy - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['authority']) {
            this.authority = new fhir.FhirUri({ value: source.authority });
        }
        if (source['_authority']) {
            if (this.authority) {
                this.authority.addExtendedProperties(source._authority);
            }
            else {
                this.authority = new fhir.FhirUri(source._authority);
            }
        }
        if (source['uri']) {
            this.uri = new fhir.FhirUri({ value: source.uri });
        }
        if (source['_uri']) {
            if (this.uri) {
                this.uri.addExtendedProperties(source._uri);
            }
            else {
                this.uri = new fhir.FhirUri(source._uri);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["authority"]) {
            issues.push(...this.authority.doModelValidation());
        }
        if (this["uri"]) {
            issues.push(...this.uri.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ConsentPolicy._fts_dataType = 'ConsentPolicy';
/**
 * Whether a treatment instruction (e.g. artificial respiration yes or no) was verified with the patient, his/her family or another authorized person.
 */
export class ConsentVerification extends fhir.BackboneElement {
    /**
     * Default constructor for ConsentVerification - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['verified']) {
            this.verified = new fhir.FhirBoolean({ value: source.verified });
        }
        else {
            this.verified = null;
        }
        if (source['_verified']) {
            if (this.verified) {
                this.verified.addExtendedProperties(source._verified);
            }
            else {
                this.verified = new fhir.FhirBoolean(source._verified);
            }
        }
        if (source['verifiedWith']) {
            this.verifiedWith = new fhir.Reference(source.verifiedWith);
        }
        if (source['verificationDate']) {
            this.verificationDate = new fhir.FhirDateTime({ value: source.verificationDate });
        }
        if (source['_verificationDate']) {
            if (this.verificationDate) {
                this.verificationDate.addExtendedProperties(source._verificationDate);
            }
            else {
                this.verificationDate = new fhir.FhirDateTime(source._verificationDate);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['verified']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property verified:fhir.FhirBoolean fhir: Consent.verification.verified:boolean' });
        }
        if (this["verified"]) {
            issues.push(...this.verified.doModelValidation());
        }
        if (this["verifiedWith"]) {
            issues.push(...this.verifiedWith.doModelValidation());
        }
        if (this["verificationDate"]) {
            issues.push(...this.verificationDate.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ConsentVerification._fts_dataType = 'ConsentVerification';
/**
 * Who or what is controlled by this rule. Use group to identify a set of actors by some property they share (e.g. 'admitting officers').
 */
export class ConsentProvisionActor extends fhir.BackboneElement {
    /**
     * Default constructor for ConsentProvisionActor - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['role']) {
            this.role = new fhir.CodeableConcept(source.role);
        }
        else {
            this.role = null;
        }
        if (source['reference']) {
            this.reference = new fhir.Reference(source.reference);
        }
        else {
            this.reference = null;
        }
    }
    /**
     * Extensible-bound Value Set for role (Consent.provision.actor.role)
     */
    static get roleExtensibleCodings() {
        return SecurityRoleTypeCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['role']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property role:fhir.CodeableConcept fhir: Consent.provision.actor.role:CodeableConcept' });
        }
        if (this["role"]) {
            issues.push(...this.role.doModelValidation());
        }
        if (!this['reference']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property reference:fhir.Reference fhir: Consent.provision.actor.reference:Reference' });
        }
        if (this["reference"]) {
            issues.push(...this.reference.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ConsentProvisionActor._fts_dataType = 'ConsentProvisionActor';
/**
 * The resources controlled by this rule if specific resources are referenced.
 */
export class ConsentProvisionData extends fhir.BackboneElement {
    /**
     * Default constructor for ConsentProvisionData - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['meaning']) {
            this.meaning = new fhir.FhirCode({ value: source.meaning });
        }
        else {
            this.meaning = null;
        }
        if (source['_meaning']) {
            if (this.meaning) {
                this.meaning.addExtendedProperties(source._meaning);
            }
            else {
                this.meaning = new fhir.FhirCode(source._meaning);
            }
        }
        if (source['reference']) {
            this.reference = new fhir.Reference(source.reference);
        }
        else {
            this.reference = null;
        }
    }
    /**
     * Required-bound Value Set for meaning (Consent.provision.data.meaning)
     */
    static get meaningRequiredCodes() {
        return ConsentDataMeaningCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['meaning']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property meaning:fhir.FhirCode<ConsentDataMeaningCodeType> fhir: Consent.provision.data.meaning:code' });
        }
        if (this['meaning'] && (!Object.values(ConsentDataMeaningCodes).includes(this.meaning))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property meaning:fhir.FhirCode<ConsentDataMeaningCodeType> fhir: Consent.provision.data.meaning:code Required binding to: ConsentDataMeaning' });
        }
        if (this["meaning"]) {
            issues.push(...this.meaning.doModelValidation());
        }
        if (!this['reference']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property reference:fhir.Reference fhir: Consent.provision.data.reference:Reference' });
        }
        if (this["reference"]) {
            issues.push(...this.reference.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ConsentProvisionData._fts_dataType = 'ConsentProvisionData';
/**
 * An exception to the base policy of this consent. An exception can be an addition or removal of access permissions.
 */
export class ConsentProvision extends fhir.BackboneElement {
    /**
     * Default constructor for ConsentProvision - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['type']) {
            this.type = new fhir.FhirCode({ value: source.type });
        }
        if (source['_type']) {
            if (this.type) {
                this.type.addExtendedProperties(source._type);
            }
            else {
                this.type = new fhir.FhirCode(source._type);
            }
        }
        if (source['period']) {
            this.period = new fhir.Period(source.period);
        }
        if (source['actor']) {
            this.actor = source.actor.map((x) => new fhir.ConsentProvisionActor(x));
        }
        else {
            this.actor = [];
        }
        if (source['action']) {
            this.action = source.action.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.action = [];
        }
        if (source['securityLabel']) {
            this.securityLabel = source.securityLabel.map((x) => new fhir.Coding(x));
        }
        else {
            this.securityLabel = [];
        }
        if (source['purpose']) {
            this.purpose = source.purpose.map((x) => new fhir.Coding(x));
        }
        else {
            this.purpose = [];
        }
        if (source['class']) {
            this.class = source.class.map((x) => new fhir.Coding(x));
        }
        else {
            this.class = [];
        }
        if (source['code']) {
            this.code = source.code.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.code = [];
        }
        if (source['dataPeriod']) {
            this.dataPeriod = new fhir.Period(source.dataPeriod);
        }
        if (source['data']) {
            this.data = source.data.map((x) => new fhir.ConsentProvisionData(x));
        }
        else {
            this.data = [];
        }
        if (source['provision']) {
            this.provision = source.provision.map((x) => new fhir.ConsentProvision(x));
        }
        else {
            this.provision = [];
        }
    }
    /**
     * Required-bound Value Set for type (Consent.provision.type)
     */
    static get typeRequiredCodes() {
        return ConsentProvisionTypeCodes;
    }
    /**
     * Extensible-bound Value Set for securityLabel (Consent.provision.securityLabel)
     */
    static get securityLabelExtensibleCodings() {
        return SecurityLabelsCodings;
    }
    /**
     * Extensible-bound Value Set for purpose (Consent.provision.purpose)
     */
    static get purposeExtensibleCodings() {
        return V3PurposeOfUseCodings;
    }
    /**
     * Extensible-bound Value Set for class (Consent.provision.class)
     */
    static get classExtensibleCodings() {
        return ConsentContentClassCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this['type'] && (!Object.values(ConsentProvisionTypeCodes).includes(this.type))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property type?:fhir.FhirCode<ConsentProvisionTypeCodeType> fhir: Consent.provision.type:code Required binding to: ConsentProvisionType' });
        }
        if (this["type"]) {
            issues.push(...this.type.doModelValidation());
        }
        if (this["period"]) {
            issues.push(...this.period.doModelValidation());
        }
        if (this["actor"]) {
            this.actor.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["action"]) {
            this.action.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["securityLabel"]) {
            this.securityLabel.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["purpose"]) {
            this.purpose.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["class"]) {
            this.class.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["code"]) {
            this.code.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["dataPeriod"]) {
            issues.push(...this.dataPeriod.doModelValidation());
        }
        if (this["data"]) {
            this.data.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["provision"]) {
            this.provision.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ConsentProvision._fts_dataType = 'ConsentProvision';
/**
 * A record of a healthcare consumer’s  choices, which permits or denies identified recipient(s) or recipient role(s) to perform one or more actions within a given policy context, for specific purposes and periods of time.
 */
export class Consent extends fhir.DomainResource {
    /**
     * Default constructor for Consent - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'Consent';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['scope']) {
            this.scope = new fhir.CodeableConcept(source.scope);
        }
        else {
            this.scope = null;
        }
        if (source['category']) {
            this.category = source.category.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.category = [];
        }
        if (source['patient']) {
            this.patient = new fhir.Reference(source.patient);
        }
        if (source['dateTime']) {
            this.dateTime = new fhir.FhirDateTime({ value: source.dateTime });
        }
        if (source['_dateTime']) {
            if (this.dateTime) {
                this.dateTime.addExtendedProperties(source._dateTime);
            }
            else {
                this.dateTime = new fhir.FhirDateTime(source._dateTime);
            }
        }
        if (source['performer']) {
            this.performer = source.performer.map((x) => new fhir.Reference(x));
        }
        else {
            this.performer = [];
        }
        if (source['organization']) {
            this.organization = source.organization.map((x) => new fhir.Reference(x));
        }
        else {
            this.organization = [];
        }
        if (source['source']) {
            this.source = source.source;
        }
        else if (source['sourceAttachment']) {
            this.source = new fhir.Attachment(source.sourceAttachment);
        }
        else if (source['sourceReference']) {
            this.source = new fhir.Reference(source.sourceReference);
        }
        if (source['policy']) {
            this.policy = source.policy.map((x) => new fhir.ConsentPolicy(x));
        }
        else {
            this.policy = [];
        }
        if (source['policyRule']) {
            this.policyRule = new fhir.CodeableConcept(source.policyRule);
        }
        if (source['verification']) {
            this.verification = source.verification.map((x) => new fhir.ConsentVerification(x));
        }
        else {
            this.verification = [];
        }
        if (source['provision']) {
            this.provision = new fhir.ConsentProvision(source.provision);
        }
    }
    /**
     * Required-bound Value Set for status (Consent.status)
     */
    static get statusRequiredCodes() {
        return ConsentStateCodes;
    }
    /**
     * Extensible-bound Value Set for scope (Consent.scope)
     */
    static get scopeExtensibleCodings() {
        return ConsentScopeCodings;
    }
    /**
     * Extensible-bound Value Set for category (Consent.category)
     */
    static get categoryExtensibleCodings() {
        return ConsentCategoryCodings;
    }
    /**
     * Extensible-bound Value Set for policyRule (Consent.policyRule)
     */
    static get policyRuleExtensibleCodings() {
        return ConsentPolicyCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType:"Consent" fhir: Consent.resourceType:"Consent"' });
        }
        if (this["identifier"]) {
            this.identifier.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (!this['status']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property status:fhir.FhirCode<ConsentStateCodeType> fhir: Consent.status:code' });
        }
        if (this['status'] && (!Object.values(ConsentStateCodes).includes(this.status))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property status:fhir.FhirCode<ConsentStateCodeType> fhir: Consent.status:code Required binding to: ConsentState' });
        }
        if (this["status"]) {
            issues.push(...this.status.doModelValidation());
        }
        if (!this['scope']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property scope:fhir.CodeableConcept fhir: Consent.scope:CodeableConcept' });
        }
        if (this["scope"]) {
            issues.push(...this.scope.doModelValidation());
        }
        if (!this['category']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property category:fhir.CodeableConcept[] fhir: Consent.category:CodeableConcept' });
        }
        else if (!Array.isArray(this.category)) {
            issues.push({ severity: 'error', code: 'structure', diagnostics: 'Found scalar in array property category:fhir.CodeableConcept[] fhir: Consent.category:CodeableConcept' });
        }
        else if (this.category.length === 0) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property category:fhir.CodeableConcept[] fhir: Consent.category:CodeableConcept' });
        }
        if (this["category"]) {
            this.category.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["patient"]) {
            issues.push(...this.patient.doModelValidation());
        }
        if (this["dateTime"]) {
            issues.push(...this.dateTime.doModelValidation());
        }
        if (this["performer"]) {
            this.performer.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["organization"]) {
            this.organization.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["policy"]) {
            this.policy.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["policyRule"]) {
            issues.push(...this.policyRule.doModelValidation());
        }
        if (this["verification"]) {
            this.verification.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["provision"]) {
            issues.push(...this.provision.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
Consent._fts_dataType = 'Consent';
/**
 * Internal flag to properly serialize choice-type element Consent.source[x]
 */
Consent._fts_sourceIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29uc2VudC5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvQ29uc2VudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQyx5QkFBeUI7QUFFekIsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFFbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSx1QkFBdUIsR0FBOEIsTUFBTSw2Q0FBNkMsQ0FBQztBQUtsSCxhQUFhO0FBQ2IsT0FBTyxFQUFFLHVCQUF1QixFQUErQixNQUFNLDZDQUE2QyxDQUFDO0FBR25ILGFBQWE7QUFDYixPQUFPLEVBQUUseUJBQXlCLEVBQWlDLE1BQU0sK0NBQStDLENBQUM7QUFLekgsYUFBYTtBQUNiLE9BQU8sRUFBRSxxQkFBcUIsR0FBNEIsTUFBTSwyQ0FBMkMsQ0FBQztBQUc1RyxhQUFhO0FBQ2IsT0FBTyxFQUFFLHFCQUFxQixHQUE0QixNQUFNLDJDQUEyQyxDQUFDO0FBRzVHLGFBQWE7QUFDYixPQUFPLEVBQUUsMEJBQTBCLEdBQWlDLE1BQU0sZ0RBQWdELENBQUM7QUFTM0gsYUFBYTtBQUNiLE9BQU8sRUFBRSxpQkFBaUIsRUFBeUIsTUFBTSx1Q0FBdUMsQ0FBQztBQUNqRyxhQUFhO0FBQ2IsT0FBTyxFQUFFLG1CQUFtQixHQUEwQixNQUFNLHlDQUF5QyxDQUFDO0FBR3RHLGFBQWE7QUFDYixPQUFPLEVBQUUsc0JBQXNCLEdBQTZCLE1BQU0sNENBQTRDLENBQUM7QUFHL0csYUFBYTtBQUNiLE9BQU8sRUFBRSxvQkFBb0IsR0FBMkIsTUFBTSwwQ0FBMEMsQ0FBQztBQXlCekc7O0dBRUc7QUFDSCxNQUFNLE9BQU8sYUFBYyxTQUFRLElBQUksQ0FBQyxlQUFlO0lBYXJEOztPQUVHO0lBQ0gsWUFBWSxTQUFvQyxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUMxRixLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FB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LENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtTQUFFO1FBQzFHLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7U0FBRTtRQUM5RixJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQ2hGLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7U0FBRTtRQUMxRyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQzlFLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBbktEOztHQUVHO0FBQzZCLHFCQUFhLEdBQVUsU0FBUyxDQUFDO0FBeUNqRTs7R0FFRztBQUN1QiwyQkFBbUIsR0FBUSxJQUFJLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjQuY29yZSB2ZXJzaW9uOiA0LjAuMVxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IENvbnNlbnRcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFNlY3VyaXR5Um9sZVR5cGVDb2RpbmdzLCBTZWN1cml0eVJvbGVUeXBlQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvU2VjdXJpdHlSb2xlVHlwZUNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFNlY3VyaXR5Um9sZVR5cGVDb2RlcywgIFNlY3VyaXR5Um9sZVR5cGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvU2VjdXJpdHlSb2xlVHlwZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDb25zZW50RGF0YU1lYW5pbmdDb2RpbmdzLCBDb25zZW50RGF0YU1lYW5pbmdDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db25zZW50RGF0YU1lYW5pbmdDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDb25zZW50RGF0YU1lYW5pbmdDb2RlcywgIENvbnNlbnREYXRhTWVhbmluZ0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db25zZW50RGF0YU1lYW5pbmdDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29uc2VudFByb3Zpc2lvblR5cGVDb2RpbmdzLCBDb25zZW50UHJvdmlzaW9uVHlwZUNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbnNlbnRQcm92aXNpb25UeXBlQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29uc2VudFByb3Zpc2lvblR5cGVDb2RlcywgIENvbnNlbnRQcm92aXNpb25UeXBlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbnNlbnRQcm92aXNpb25UeXBlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbnNlbnRBY3Rpb25Db2RpbmdzLCBDb25zZW50QWN0aW9uQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uc2VudEFjdGlvbkNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbnNlbnRBY3Rpb25Db2RlcywgIENvbnNlbnRBY3Rpb25Db2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uc2VudEFjdGlvbkNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBTZWN1cml0eUxhYmVsc0NvZGluZ3MsIFNlY3VyaXR5TGFiZWxzQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvU2VjdXJpdHlMYWJlbHNDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBTZWN1cml0eUxhYmVsc0NvZGVzLCAgU2VjdXJpdHlMYWJlbHNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvU2VjdXJpdHlMYWJlbHNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgVjNQdXJwb3NlT2ZVc2VDb2RpbmdzLCBWM1B1cnBvc2VPZlVzZUNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1YzUHVycG9zZU9mVXNlQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgVjNQdXJwb3NlT2ZVc2VDb2RlcywgIFYzUHVycG9zZU9mVXNlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1YzUHVycG9zZU9mVXNlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbnNlbnRDb250ZW50Q2xhc3NDb2RpbmdzLCBDb25zZW50Q29udGVudENsYXNzQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uc2VudENvbnRlbnRDbGFzc0NvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbnNlbnRDb250ZW50Q2xhc3NDb2RlcywgIENvbnNlbnRDb250ZW50Q2xhc3NDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uc2VudENvbnRlbnRDbGFzc0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDb25zZW50Q29udGVudENvZGluZ3MsIENvbnNlbnRDb250ZW50Q29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uc2VudENvbnRlbnRDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDb25zZW50Q29udGVudENvZGVzLCAgQ29uc2VudENvbnRlbnRDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uc2VudENvbnRlbnRDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29uc2VudFN0YXRlQ29kaW5ncywgQ29uc2VudFN0YXRlQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uc2VudFN0YXRlQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29uc2VudFN0YXRlQ29kZXMsICBDb25zZW50U3RhdGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uc2VudFN0YXRlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbnNlbnRTY29wZUNvZGluZ3MsIENvbnNlbnRTY29wZUNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbnNlbnRTY29wZUNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbnNlbnRTY29wZUNvZGVzLCAgQ29uc2VudFNjb3BlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbnNlbnRTY29wZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDb25zZW50Q2F0ZWdvcnlDb2RpbmdzLCBDb25zZW50Q2F0ZWdvcnlDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db25zZW50Q2F0ZWdvcnlDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDb25zZW50Q2F0ZWdvcnlDb2RlcywgIENvbnNlbnRDYXRlZ29yeUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db25zZW50Q2F0ZWdvcnlDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29uc2VudFBvbGljeUNvZGluZ3MsIENvbnNlbnRQb2xpY3lDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db25zZW50UG9saWN5Q29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29uc2VudFBvbGljeUNvZGVzLCAgQ29uc2VudFBvbGljeUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db25zZW50UG9saWN5Q29kZXMuanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQ29uc2VudFBvbGljeSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBDb25zZW50UG9saWN5QXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogRW50aXR5IG9yIE9yZ2FuaXphdGlvbiBoYXZpbmcgcmVndWxhdG9yeSBqdXJpc2RpY3Rpb24gb3IgYWNjb3VudGFiaWxpdHkgZm9yICBlbmZvcmNpbmcgcG9saWNpZXMgcGVydGFpbmluZyB0byBDb25zZW50IERpcmVjdGl2ZXMuXHJcbiAgICovXHJcbiAgYXV0aG9yaXR5PzogZmhpci5GaGlyVXJpfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENvbnNlbnQucG9saWN5LmF1dGhvcml0eVxyXG4gICAqL1xyXG4gIF9hdXRob3JpdHk/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBmb3IgZGlzY292ZXJhYmlsaXR5IC8gZG9jdW1lbnRhdGlvbiBhbmQgZG9lcyBub3QgbW9kaWZ5IG9yIHF1YWxpZnkgdGhlIHBvbGljeSBydWxlcy5cclxuICAgKi9cclxuICB1cmk/OiBmaGlyLkZoaXJVcml8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ29uc2VudC5wb2xpY3kudXJpXHJcbiAgICovXHJcbiAgX3VyaT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgcmVmZXJlbmNlcyB0byB0aGUgcG9saWNpZXMgdGhhdCBhcmUgaW5jbHVkZWQgaW4gdGhpcyBjb25zZW50IHNjb3BlLiBQb2xpY2llcyBtYXkgYmUgb3JnYW5pemF0aW9uYWwsIGJ1dCBhcmUgb2Z0ZW4gZGVmaW5lZCBqdXJpc2RpY3Rpb25hbGx5LCBvciBpbiBsYXcuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29uc2VudFBvbGljeSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0NvbnNlbnRQb2xpY3knO1xyXG4gIC8qKlxyXG4gICAqIEVudGl0eSBvciBPcmdhbml6YXRpb24gaGF2aW5nIHJlZ3VsYXRvcnkganVyaXNkaWN0aW9uIG9yIGFjY291bnRhYmlsaXR5IGZvciAgZW5mb3JjaW5nIHBvbGljaWVzIHBlcnRhaW5pbmcgdG8gQ29uc2VudCBEaXJlY3RpdmVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhdXRob3JpdHk/OiBmaGlyLkZoaXJVcml8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBmb3IgZGlzY292ZXJhYmlsaXR5IC8gZG9jdW1lbnRhdGlvbiBhbmQgZG9lcyBub3QgbW9kaWZ5IG9yIHF1YWxpZnkgdGhlIHBvbGljeSBydWxlcy5cclxuICAgKi9cclxuICBwdWJsaWMgdXJpPzogZmhpci5GaGlyVXJpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBDb25zZW50UG9saWN5IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8Q29uc2VudFBvbGljeUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydhdXRob3JpdHknXSkgeyB0aGlzLmF1dGhvcml0eSA9IG5ldyBmaGlyLkZoaXJVcmkoe3ZhbHVlOiBzb3VyY2UuYXV0aG9yaXR5fSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19hdXRob3JpdHknXSkge1xyXG4gICAgICBpZiAodGhpcy5hdXRob3JpdHkpIHsgdGhpcy5hdXRob3JpdHkuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fYXV0aG9yaXR5ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuYXV0aG9yaXR5ID0gbmV3IGZoaXIuRmhpclVyaShzb3VyY2UuX2F1dGhvcml0eSBhcyBQYXJ0aWFsPGZoaXIuRmhpclVyaUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsndXJpJ10pIHsgdGhpcy51cmkgPSBuZXcgZmhpci5GaGlyVXJpKHt2YWx1ZTogc291cmNlLnVyaX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfdXJpJ10pIHtcclxuICAgICAgaWYgKHRoaXMudXJpKSB7IHRoaXMudXJpLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3VyaSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnVyaSA9IG5ldyBmaGlyLkZoaXJVcmkoc291cmNlLl91cmkgYXMgUGFydGlhbDxmaGlyLkZoaXJVcmlBcmdzPik7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICh0aGlzW1wiYXV0aG9yaXR5XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuYXV0aG9yaXR5LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInVyaVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnVyaS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIENvbnNlbnRWZXJpZmljYXRpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29uc2VudFZlcmlmaWNhdGlvbkFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEhhcyB0aGUgaW5zdHJ1Y3Rpb24gYmVlbiB2ZXJpZmllZC5cclxuICAgKi9cclxuICB2ZXJpZmllZDogZmhpci5GaGlyQm9vbGVhbnxib29sZWFufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ29uc2VudC52ZXJpZmljYXRpb24udmVyaWZpZWRcclxuICAgKi9cclxuICBfdmVyaWZpZWQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFdobyB2ZXJpZmllZCB0aGUgaW5zdHJ1Y3Rpb24gKFBhdGllbnQsIFJlbGF0aXZlIG9yIG90aGVyIEF1dGhvcml6ZWQgUGVyc29uKS5cclxuICAgKi9cclxuICB2ZXJpZmllZFdpdGg/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERhdGUgdmVyaWZpY2F0aW9uIHdhcyBjb2xsZWN0ZWQuXHJcbiAgICovXHJcbiAgdmVyaWZpY2F0aW9uRGF0ZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENvbnNlbnQudmVyaWZpY2F0aW9uLnZlcmlmaWNhdGlvbkRhdGVcclxuICAgKi9cclxuICBfdmVyaWZpY2F0aW9uRGF0ZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBXaGV0aGVyIGEgdHJlYXRtZW50IGluc3RydWN0aW9uIChlLmcuIGFydGlmaWNpYWwgcmVzcGlyYXRpb24geWVzIG9yIG5vKSB3YXMgdmVyaWZpZWQgd2l0aCB0aGUgcGF0aWVudCwgaGlzL2hlciBmYW1pbHkgb3IgYW5vdGhlciBhdXRob3JpemVkIHBlcnNvbi5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb25zZW50VmVyaWZpY2F0aW9uIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQ29uc2VudFZlcmlmaWNhdGlvbic7XHJcbiAgLyoqXHJcbiAgICogSGFzIHRoZSBpbnN0cnVjdGlvbiBiZWVuIHZlcmlmaWVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB2ZXJpZmllZDogZmhpci5GaGlyQm9vbGVhbnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFdobyB2ZXJpZmllZCB0aGUgaW5zdHJ1Y3Rpb24gKFBhdGllbnQsIFJlbGF0aXZlIG9yIG90aGVyIEF1dGhvcml6ZWQgUGVyc29uKS5cclxuICAgKi9cclxuICBwdWJsaWMgdmVyaWZpZWRXaXRoPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERhdGUgdmVyaWZpY2F0aW9uIHdhcyBjb2xsZWN0ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHZlcmlmaWNhdGlvbkRhdGU/OiBmaGlyLkZoaXJEYXRlVGltZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQ29uc2VudFZlcmlmaWNhdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENvbnNlbnRWZXJpZmljYXRpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsndmVyaWZpZWQnXSkgeyB0aGlzLnZlcmlmaWVkID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oe3ZhbHVlOiBzb3VyY2UudmVyaWZpZWR9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudmVyaWZpZWQgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfdmVyaWZpZWQnXSkge1xyXG4gICAgICBpZiAodGhpcy52ZXJpZmllZCkgeyB0aGlzLnZlcmlmaWVkLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3ZlcmlmaWVkISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudmVyaWZpZWQgPSBuZXcgZmhpci5GaGlyQm9vbGVhbihzb3VyY2UuX3ZlcmlmaWVkIGFzIFBhcnRpYWw8Zmhpci5GaGlyQm9vbGVhbkFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsndmVyaWZpZWRXaXRoJ10pIHsgdGhpcy52ZXJpZmllZFdpdGggPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnZlcmlmaWVkV2l0aCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3ZlcmlmaWNhdGlvbkRhdGUnXSkgeyB0aGlzLnZlcmlmaWNhdGlvbkRhdGUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2UudmVyaWZpY2F0aW9uRGF0ZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfdmVyaWZpY2F0aW9uRGF0ZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnZlcmlmaWNhdGlvbkRhdGUpIHsgdGhpcy52ZXJpZmljYXRpb25EYXRlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3ZlcmlmaWNhdGlvbkRhdGUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy52ZXJpZmljYXRpb25EYXRlID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHNvdXJjZS5fdmVyaWZpY2F0aW9uRGF0ZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckRhdGVUaW1lQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAoIXRoaXNbJ3ZlcmlmaWVkJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHZlcmlmaWVkOmZoaXIuRmhpckJvb2xlYW4gZmhpcjogQ29uc2VudC52ZXJpZmljYXRpb24udmVyaWZpZWQ6Ym9vbGVhbicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInZlcmlmaWVkXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMudmVyaWZpZWQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1widmVyaWZpZWRXaXRoXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMudmVyaWZpZWRXaXRoLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInZlcmlmaWNhdGlvbkRhdGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy52ZXJpZmljYXRpb25EYXRlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQ29uc2VudFByb3Zpc2lvbkFjdG9yIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENvbnNlbnRQcm92aXNpb25BY3RvckFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEhvdyB0aGUgaW5kaXZpZHVhbCBpcyBpbnZvbHZlZCBpbiB0aGUgcmVzb3VyY2VzIGNvbnRlbnQgdGhhdCBpcyBkZXNjcmliZWQgaW4gdGhlIGV4Y2VwdGlvbi5cclxuICAgKi9cclxuICByb2xlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgcmVzb3VyY2UgdGhhdCBpZGVudGlmaWVzIHRoZSBhY3Rvci4gVG8gaWRlbnRpZnkgYWN0b3JzIGJ5IHR5cGUsIHVzZSBncm91cCB0byBpZGVudGlmeSBhIHNldCBvZiBhY3RvcnMgYnkgc29tZSBwcm9wZXJ0eSB0aGV5IHNoYXJlIChlLmcuICdhZG1pdHRpbmcgb2ZmaWNlcnMnKS5cclxuICAgKi9cclxuICByZWZlcmVuY2U6IGZoaXIuUmVmZXJlbmNlQXJnc3xudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogV2hvIG9yIHdoYXQgaXMgY29udHJvbGxlZCBieSB0aGlzIHJ1bGUuIFVzZSBncm91cCB0byBpZGVudGlmeSBhIHNldCBvZiBhY3RvcnMgYnkgc29tZSBwcm9wZXJ0eSB0aGV5IHNoYXJlIChlLmcuICdhZG1pdHRpbmcgb2ZmaWNlcnMnKS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb25zZW50UHJvdmlzaW9uQWN0b3IgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdDb25zZW50UHJvdmlzaW9uQWN0b3InO1xyXG4gIC8qKlxyXG4gICAqIEhvdyB0aGUgaW5kaXZpZHVhbCBpcyBpbnZvbHZlZCBpbiB0aGUgcmVzb3VyY2VzIGNvbnRlbnQgdGhhdCBpcyBkZXNjcmliZWQgaW4gdGhlIGV4Y2VwdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgcm9sZTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgcmVzb3VyY2UgdGhhdCBpZGVudGlmaWVzIHRoZSBhY3Rvci4gVG8gaWRlbnRpZnkgYWN0b3JzIGJ5IHR5cGUsIHVzZSBncm91cCB0byBpZGVudGlmeSBhIHNldCBvZiBhY3RvcnMgYnkgc29tZSBwcm9wZXJ0eSB0aGV5IHNoYXJlIChlLmcuICdhZG1pdHRpbmcgb2ZmaWNlcnMnKS5cclxuICAgKi9cclxuICBwdWJsaWMgcmVmZXJlbmNlOiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIENvbnNlbnRQcm92aXNpb25BY3RvciAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENvbnNlbnRQcm92aXNpb25BY3RvckFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydyb2xlJ10pIHsgdGhpcy5yb2xlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5yb2xlKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucm9sZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3JlZmVyZW5jZSddKSB7IHRoaXMucmVmZXJlbmNlID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5yZWZlcmVuY2UpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZWZlcmVuY2UgPSBudWxsOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEV4dGVuc2libGUtYm91bmQgVmFsdWUgU2V0IGZvciByb2xlIChDb25zZW50LnByb3Zpc2lvbi5hY3Rvci5yb2xlKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IHJvbGVFeHRlbnNpYmxlQ29kaW5ncygpOlNlY3VyaXR5Um9sZVR5cGVDb2RpbmdUeXBlIHtcclxuICAgIHJldHVybiBTZWN1cml0eVJvbGVUeXBlQ29kaW5ncztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICghdGhpc1sncm9sZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSByb2xlOmZoaXIuQ29kZWFibGVDb25jZXB0IGZoaXI6IENvbnNlbnQucHJvdmlzaW9uLmFjdG9yLnJvbGU6Q29kZWFibGVDb25jZXB0JyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wicm9sZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnJvbGUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICghdGhpc1sncmVmZXJlbmNlJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHJlZmVyZW5jZTpmaGlyLlJlZmVyZW5jZSBmaGlyOiBDb25zZW50LnByb3Zpc2lvbi5hY3Rvci5yZWZlcmVuY2U6UmVmZXJlbmNlJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wicmVmZXJlbmNlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucmVmZXJlbmNlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQ29uc2VudFByb3Zpc2lvbkRhdGEgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29uc2VudFByb3Zpc2lvbkRhdGFBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBIb3cgdGhlIHJlc291cmNlIHJlZmVyZW5jZSBpcyBpbnRlcnByZXRlZCB3aGVuIHRlc3RpbmcgY29uc2VudCByZXN0cmljdGlvbnMuXHJcbiAgICovXHJcbiAgbWVhbmluZzogZmhpci5GaGlyQ29kZTxDb25zZW50RGF0YU1lYW5pbmdDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ29uc2VudC5wcm92aXNpb24uZGF0YS5tZWFuaW5nXHJcbiAgICovXHJcbiAgX21lYW5pbmc/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEEgcmVmZXJlbmNlIHRvIGEgc3BlY2lmaWMgcmVzb3VyY2UgdGhhdCBkZWZpbmVzIHdoaWNoIHJlc291cmNlcyBhcmUgY292ZXJlZCBieSB0aGlzIGNvbnNlbnQuXHJcbiAgICovXHJcbiAgcmVmZXJlbmNlOiBmaGlyLlJlZmVyZW5jZUFyZ3N8bnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSByZXNvdXJjZXMgY29udHJvbGxlZCBieSB0aGlzIHJ1bGUgaWYgc3BlY2lmaWMgcmVzb3VyY2VzIGFyZSByZWZlcmVuY2VkLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENvbnNlbnRQcm92aXNpb25EYXRhIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQ29uc2VudFByb3Zpc2lvbkRhdGEnO1xyXG4gIC8qKlxyXG4gICAqIEhvdyB0aGUgcmVzb3VyY2UgcmVmZXJlbmNlIGlzIGludGVycHJldGVkIHdoZW4gdGVzdGluZyBjb25zZW50IHJlc3RyaWN0aW9ucy5cclxuICAgKi9cclxuICBwdWJsaWMgbWVhbmluZzogZmhpci5GaGlyQ29kZTxDb25zZW50RGF0YU1lYW5pbmdDb2RlVHlwZT58bnVsbDtcclxuICAvKipcclxuICAgKiBBIHJlZmVyZW5jZSB0byBhIHNwZWNpZmljIHJlc291cmNlIHRoYXQgZGVmaW5lcyB3aGljaCByZXNvdXJjZXMgYXJlIGNvdmVyZWQgYnkgdGhpcyBjb25zZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWZlcmVuY2U6IGZoaXIuUmVmZXJlbmNlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQ29uc2VudFByb3Zpc2lvbkRhdGEgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxDb25zZW50UHJvdmlzaW9uRGF0YUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydtZWFuaW5nJ10pIHsgdGhpcy5tZWFuaW5nID0gbmV3IGZoaXIuRmhpckNvZGU8Q29uc2VudERhdGFNZWFuaW5nQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLm1lYW5pbmd9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubWVhbmluZyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19tZWFuaW5nJ10pIHtcclxuICAgICAgaWYgKHRoaXMubWVhbmluZykgeyB0aGlzLm1lYW5pbmcuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbWVhbmluZyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLm1lYW5pbmcgPSBuZXcgZmhpci5GaGlyQ29kZTxDb25zZW50RGF0YU1lYW5pbmdDb2RlVHlwZT4oc291cmNlLl9tZWFuaW5nIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydyZWZlcmVuY2UnXSkgeyB0aGlzLnJlZmVyZW5jZSA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UucmVmZXJlbmNlKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVmZXJlbmNlID0gbnVsbDsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIG1lYW5pbmcgKENvbnNlbnQucHJvdmlzaW9uLmRhdGEubWVhbmluZylcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCBtZWFuaW5nUmVxdWlyZWRDb2RlcygpIHtcclxuICAgIHJldHVybiBDb25zZW50RGF0YU1lYW5pbmdDb2RlcztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICghdGhpc1snbWVhbmluZyddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBtZWFuaW5nOmZoaXIuRmhpckNvZGU8Q29uc2VudERhdGFNZWFuaW5nQ29kZVR5cGU+IGZoaXI6IENvbnNlbnQucHJvdmlzaW9uLmRhdGEubWVhbmluZzpjb2RlJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzWydtZWFuaW5nJ10gJiYgKCFPYmplY3QudmFsdWVzKENvbnNlbnREYXRhTWVhbmluZ0NvZGVzKS5pbmNsdWRlcyh0aGlzLm1lYW5pbmcgYXMgYW55KSkpIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ2NvZGUtaW52YWxpZCcsIGRpYWdub3N0aWNzOiAnSW52YWxpZCBjb2RlIHByb3BlcnR5IG1lYW5pbmc6Zmhpci5GaGlyQ29kZTxDb25zZW50RGF0YU1lYW5pbmdDb2RlVHlwZT4gZmhpcjogQ29uc2VudC5wcm92aXNpb24uZGF0YS5tZWFuaW5nOmNvZGUgUmVxdWlyZWQgYmluZGluZyB0bzogQ29uc2VudERhdGFNZWFuaW5nJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wibWVhbmluZ1wiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm1lYW5pbmcuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICghdGhpc1sncmVmZXJlbmNlJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHJlZmVyZW5jZTpmaGlyLlJlZmVyZW5jZSBmaGlyOiBDb25zZW50LnByb3Zpc2lvbi5kYXRhLnJlZmVyZW5jZTpSZWZlcmVuY2UnIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJyZWZlcmVuY2VcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5yZWZlcmVuY2UuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBDb25zZW50UHJvdmlzaW9uIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENvbnNlbnRQcm92aXNpb25BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBBY3Rpb24gIHRvIHRha2UgLSBwZXJtaXQgb3IgZGVueSAtIHdoZW4gdGhlIHJ1bGUgY29uZGl0aW9ucyBhcmUgbWV0LiAgTm90IHBlcm1pdHRlZCBpbiByb290IHJ1bGUsIHJlcXVpcmVkIGluIGFsbCBuZXN0ZWQgcnVsZXMuXHJcbiAgICovXHJcbiAgdHlwZT86IGZoaXIuRmhpckNvZGU8Q29uc2VudFByb3Zpc2lvblR5cGVDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ29uc2VudC5wcm92aXNpb24udHlwZVxyXG4gICAqL1xyXG4gIF90eXBlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgdGltZWZyYW1lIGluIHRoaXMgcnVsZSBpcyB2YWxpZC5cclxuICAgKi9cclxuICBwZXJpb2Q/OiBmaGlyLlBlcmlvZEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFdobyBvciB3aGF0IGlzIGNvbnRyb2xsZWQgYnkgdGhpcyBydWxlLiBVc2UgZ3JvdXAgdG8gaWRlbnRpZnkgYSBzZXQgb2YgYWN0b3JzIGJ5IHNvbWUgcHJvcGVydHkgdGhleSBzaGFyZSAoZS5nLiAnYWRtaXR0aW5nIG9mZmljZXJzJykuXHJcbiAgICovXHJcbiAgYWN0b3I/OiBmaGlyLkNvbnNlbnRQcm92aXNpb25BY3RvckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTm90ZSB0aGF0IHRoaXMgaXMgdGhlIGRpcmVjdCBhY3Rpb24gKG5vdCB0aGUgZ3JvdW5kcyBmb3IgdGhlIGFjdGlvbiBjb3ZlcmVkIGluIHRoZSBwdXJwb3NlIGVsZW1lbnQpLiBBdCBwcmVzZW50LCB0aGUgb25seSBhY3Rpb24gaW4gdGhlIHVuZGVyc3Rvb2QgYW5kIHRlc3RlZCBzY29wZSBvZiB0aGlzIHJlc291cmNlIGlzICdyZWFkJy5cclxuICAgKi9cclxuICBhY3Rpb24/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhlIGNvbnNlbnQgc3BlY2lmaWVzIGEgc2VjdXJpdHkgbGFiZWwgb2YgXCJSXCIgdGhlbiBpdCBhcHBsaWVzIHRvIGFsbCByZXNvdXJjZXMgdGhhdCBhcmUgbGFiZWxlZCBcIlJcIiBvciBsb3dlci4gRS5nLiBmb3IgQ29uZmlkZW50aWFsaXR5LCBpdCdzIGEgaGlnaCB3YXRlciBtYXJrLiBGb3Igb3RoZXIga2luZHMgb2Ygc2VjdXJpdHkgbGFiZWxzLCBzdWJzdW1wdGlvbiBsb2dpYyBhcHBsaWVzLiBXaGVuIHRoZSBwdXJwb3NlIG9mIHVzZSB0YWcgaXMgb24gdGhlIGRhdGEsIGFjY2VzcyByZXF1ZXN0IHB1cnBvc2Ugb2YgdXNlIHNoYWxsIG5vdCBjb25mbGljdC5cclxuICAgKi9cclxuICBzZWN1cml0eUxhYmVsPzogZmhpci5Db2RpbmdBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFdoZW4gdGhlIHB1cnBvc2Ugb2YgdXNlIHRhZyBpcyBvbiB0aGUgZGF0YSwgYWNjZXNzIHJlcXVlc3QgcHVycG9zZSBvZiB1c2Ugc2hhbGwgbm90IGNvbmZsaWN0LlxyXG4gICAqL1xyXG4gIHB1cnBvc2U/OiBmaGlyLkNvZGluZ0FyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTXVsdGlwbGUgdHlwZXMgYXJlIG9yJ2VkIHRvZ2V0aGVyLiBUaGUgaW50ZW50aW9uIG9mIHRoZSBjb250ZW50VHlwZSBlbGVtZW50IGlzIHRoYXQgdGhlIGNvZGVzIHJlZmVyIHRvIHByb2ZpbGVzIG9yIGRvY3VtZW50IHR5cGVzIGRlZmluZWQgaW4gYSBzdGFuZGFyZCBvciBhbiBpbXBsZW1lbnRhdGlvbiBndWlkZSBzb21ld2hlcmUuXHJcbiAgICovXHJcbiAgY2xhc3M/OiBmaGlyLkNvZGluZ0FyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVHlwaWNhbCB1c2Ugb2YgdGhpcyBpcyBhIERvY3VtZW50IGNvZGUgd2l0aCBjbGFzcyA9IENEQS5cclxuICAgKi9cclxuICBjb2RlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaGFzIGEgZGlmZmVyZW50IHNlbnNlIHRvIHRoZSBDb25zZW50LnBlcmlvZCAtIHRoYXQgaXMgd2hlbiB0aGUgY29uc2VudCBhZ3JlZW1lbnQgaG9sZHMuIFRoaXMgaXMgdGhlIHRpbWUgcGVyaW9kIG9mIHRoZSBkYXRhIHRoYXQgaXMgY29udHJvbGxlZCBieSB0aGUgYWdyZWVtZW50LlxyXG4gICAqL1xyXG4gIGRhdGFQZXJpb2Q/OiBmaGlyLlBlcmlvZEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZXNvdXJjZXMgY29udHJvbGxlZCBieSB0aGlzIHJ1bGUgaWYgc3BlY2lmaWMgcmVzb3VyY2VzIGFyZSByZWZlcmVuY2VkLlxyXG4gICAqL1xyXG4gIGRhdGE/OiBmaGlyLkNvbnNlbnRQcm92aXNpb25EYXRhQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBSdWxlcyB3aGljaCBwcm92aWRlIGV4Y2VwdGlvbnMgdG8gdGhlIGJhc2UgcnVsZSBvciBzdWJydWxlcy5cclxuICAgKi9cclxuICBwcm92aXNpb24/OiBmaGlyLkNvbnNlbnRQcm92aXNpb25BcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQW4gZXhjZXB0aW9uIHRvIHRoZSBiYXNlIHBvbGljeSBvZiB0aGlzIGNvbnNlbnQuIEFuIGV4Y2VwdGlvbiBjYW4gYmUgYW4gYWRkaXRpb24gb3IgcmVtb3ZhbCBvZiBhY2Nlc3MgcGVybWlzc2lvbnMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29uc2VudFByb3Zpc2lvbiBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0NvbnNlbnRQcm92aXNpb24nO1xyXG4gIC8qKlxyXG4gICAqIEFjdGlvbiAgdG8gdGFrZSAtIHBlcm1pdCBvciBkZW55IC0gd2hlbiB0aGUgcnVsZSBjb25kaXRpb25zIGFyZSBtZXQuICBOb3QgcGVybWl0dGVkIGluIHJvb3QgcnVsZSwgcmVxdWlyZWQgaW4gYWxsIG5lc3RlZCBydWxlcy5cclxuICAgKi9cclxuICBwdWJsaWMgdHlwZT86IGZoaXIuRmhpckNvZGU8Q29uc2VudFByb3Zpc2lvblR5cGVDb2RlVHlwZT58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0aW1lZnJhbWUgaW4gdGhpcyBydWxlIGlzIHZhbGlkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwZXJpb2Q/OiBmaGlyLlBlcmlvZHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogV2hvIG9yIHdoYXQgaXMgY29udHJvbGxlZCBieSB0aGlzIHJ1bGUuIFVzZSBncm91cCB0byBpZGVudGlmeSBhIHNldCBvZiBhY3RvcnMgYnkgc29tZSBwcm9wZXJ0eSB0aGV5IHNoYXJlIChlLmcuICdhZG1pdHRpbmcgb2ZmaWNlcnMnKS5cclxuICAgKi9cclxuICBwdWJsaWMgYWN0b3I6IGZoaXIuQ29uc2VudFByb3Zpc2lvbkFjdG9yW107XHJcbiAgLyoqXHJcbiAgICogTm90ZSB0aGF0IHRoaXMgaXMgdGhlIGRpcmVjdCBhY3Rpb24gKG5vdCB0aGUgZ3JvdW5kcyBmb3IgdGhlIGFjdGlvbiBjb3ZlcmVkIGluIHRoZSBwdXJwb3NlIGVsZW1lbnQpLiBBdCBwcmVzZW50LCB0aGUgb25seSBhY3Rpb24gaW4gdGhlIHVuZGVyc3Rvb2QgYW5kIHRlc3RlZCBzY29wZSBvZiB0aGlzIHJlc291cmNlIGlzICdyZWFkJy5cclxuICAgKi9cclxuICBwdWJsaWMgYWN0aW9uOiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIElmIHRoZSBjb25zZW50IHNwZWNpZmllcyBhIHNlY3VyaXR5IGxhYmVsIG9mIFwiUlwiIHRoZW4gaXQgYXBwbGllcyB0byBhbGwgcmVzb3VyY2VzIHRoYXQgYXJlIGxhYmVsZWQgXCJSXCIgb3IgbG93ZXIuIEUuZy4gZm9yIENvbmZpZGVudGlhbGl0eSwgaXQncyBhIGhpZ2ggd2F0ZXIgbWFyay4gRm9yIG90aGVyIGtpbmRzIG9mIHNlY3VyaXR5IGxhYmVscywgc3Vic3VtcHRpb24gbG9naWMgYXBwbGllcy4gV2hlbiB0aGUgcHVycG9zZSBvZiB1c2UgdGFnIGlzIG9uIHRoZSBkYXRhLCBhY2Nlc3MgcmVxdWVzdCBwdXJwb3NlIG9mIHVzZSBzaGFsbCBub3QgY29uZmxpY3QuXHJcbiAgICovXHJcbiAgcHVibGljIHNlY3VyaXR5TGFiZWw6IGZoaXIuQ29kaW5nW107XHJcbiAgLyoqXHJcbiAgICogV2hlbiB0aGUgcHVycG9zZSBvZiB1c2UgdGFnIGlzIG9uIHRoZSBkYXRhLCBhY2Nlc3MgcmVxdWVzdCBwdXJwb3NlIG9mIHVzZSBzaGFsbCBub3QgY29uZmxpY3QuXHJcbiAgICovXHJcbiAgcHVibGljIHB1cnBvc2U6IGZoaXIuQ29kaW5nW107XHJcbiAgLyoqXHJcbiAgICogTXVsdGlwbGUgdHlwZXMgYXJlIG9yJ2VkIHRvZ2V0aGVyLiBUaGUgaW50ZW50aW9uIG9mIHRoZSBjb250ZW50VHlwZSBlbGVtZW50IGlzIHRoYXQgdGhlIGNvZGVzIHJlZmVyIHRvIHByb2ZpbGVzIG9yIGRvY3VtZW50IHR5cGVzIGRlZmluZWQgaW4gYSBzdGFuZGFyZCBvciBhbiBpbXBsZW1lbnRhdGlvbiBndWlkZSBzb21ld2hlcmUuXHJcbiAgICovXHJcbiAgcHVibGljIGNsYXNzOiBmaGlyLkNvZGluZ1tdO1xyXG4gIC8qKlxyXG4gICAqIFR5cGljYWwgdXNlIG9mIHRoaXMgaXMgYSBEb2N1bWVudCBjb2RlIHdpdGggY2xhc3MgPSBDREEuXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGU6IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogVGhpcyBoYXMgYSBkaWZmZXJlbnQgc2Vuc2UgdG8gdGhlIENvbnNlbnQucGVyaW9kIC0gdGhhdCBpcyB3aGVuIHRoZSBjb25zZW50IGFncmVlbWVudCBob2xkcy4gVGhpcyBpcyB0aGUgdGltZSBwZXJpb2Qgb2YgdGhlIGRhdGEgdGhhdCBpcyBjb250cm9sbGVkIGJ5IHRoZSBhZ3JlZW1lbnQuXHJcbiAgICovXHJcbiAgcHVibGljIGRhdGFQZXJpb2Q/OiBmaGlyLlBlcmlvZHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlc291cmNlcyBjb250cm9sbGVkIGJ5IHRoaXMgcnVsZSBpZiBzcGVjaWZpYyByZXNvdXJjZXMgYXJlIHJlZmVyZW5jZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGRhdGE6IGZoaXIuQ29uc2VudFByb3Zpc2lvbkRhdGFbXTtcclxuICAvKipcclxuICAgKiBSdWxlcyB3aGljaCBwcm92aWRlIGV4Y2VwdGlvbnMgdG8gdGhlIGJhc2UgcnVsZSBvciBzdWJydWxlcy5cclxuICAgKi9cclxuICBwdWJsaWMgcHJvdmlzaW9uOiBmaGlyLkNvbnNlbnRQcm92aXNpb25bXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBDb25zZW50UHJvdmlzaW9uIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8Q29uc2VudFByb3Zpc2lvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWyd0eXBlJ10pIHsgdGhpcy50eXBlID0gbmV3IGZoaXIuRmhpckNvZGU8Q29uc2VudFByb3Zpc2lvblR5cGVDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2UudHlwZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfdHlwZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnR5cGUpIHsgdGhpcy50eXBlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3R5cGUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy50eXBlID0gbmV3IGZoaXIuRmhpckNvZGU8Q29uc2VudFByb3Zpc2lvblR5cGVDb2RlVHlwZT4oc291cmNlLl90eXBlIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydwZXJpb2QnXSkgeyB0aGlzLnBlcmlvZCA9IG5ldyBmaGlyLlBlcmlvZChzb3VyY2UucGVyaW9kKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYWN0b3InXSkgeyB0aGlzLmFjdG9yID0gc291cmNlLmFjdG9yLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29uc2VudFByb3Zpc2lvbkFjdG9yKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYWN0b3IgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYWN0aW9uJ10pIHsgdGhpcy5hY3Rpb24gPSBzb3VyY2UuYWN0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYWN0aW9uID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3NlY3VyaXR5TGFiZWwnXSkgeyB0aGlzLnNlY3VyaXR5TGFiZWwgPSBzb3VyY2Uuc2VjdXJpdHlMYWJlbC5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGluZyh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnNlY3VyaXR5TGFiZWwgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHVycG9zZSddKSB7IHRoaXMucHVycG9zZSA9IHNvdXJjZS5wdXJwb3NlLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kaW5nKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucHVycG9zZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydjbGFzcyddKSB7IHRoaXMuY2xhc3MgPSBzb3VyY2UuY2xhc3MubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RpbmcoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jbGFzcyA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gc291cmNlLmNvZGUubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb2RlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2RhdGFQZXJpb2QnXSkgeyB0aGlzLmRhdGFQZXJpb2QgPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLmRhdGFQZXJpb2QpOyB9XHJcbiAgICBpZiAoc291cmNlWydkYXRhJ10pIHsgdGhpcy5kYXRhID0gc291cmNlLmRhdGEubWFwKCh4KSA9PiBuZXcgZmhpci5Db25zZW50UHJvdmlzaW9uRGF0YSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmRhdGEgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJvdmlzaW9uJ10pIHsgdGhpcy5wcm92aXNpb24gPSBzb3VyY2UucHJvdmlzaW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29uc2VudFByb3Zpc2lvbih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnByb3Zpc2lvbiA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlcXVpcmVkLWJvdW5kIFZhbHVlIFNldCBmb3IgdHlwZSAoQ29uc2VudC5wcm92aXNpb24udHlwZSlcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCB0eXBlUmVxdWlyZWRDb2RlcygpIHtcclxuICAgIHJldHVybiBDb25zZW50UHJvdmlzaW9uVHlwZUNvZGVzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBFeHRlbnNpYmxlLWJvdW5kIFZhbHVlIFNldCBmb3Igc2VjdXJpdHlMYWJlbCAoQ29uc2VudC5wcm92aXNpb24uc2VjdXJpdHlMYWJlbClcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCBzZWN1cml0eUxhYmVsRXh0ZW5zaWJsZUNvZGluZ3MoKTpTZWN1cml0eUxhYmVsc0NvZGluZ1R5cGUge1xyXG4gICAgcmV0dXJuIFNlY3VyaXR5TGFiZWxzQ29kaW5ncztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5zaWJsZS1ib3VuZCBWYWx1ZSBTZXQgZm9yIHB1cnBvc2UgKENvbnNlbnQucHJvdmlzaW9uLnB1cnBvc2UpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgcHVycG9zZUV4dGVuc2libGVDb2RpbmdzKCk6VjNQdXJwb3NlT2ZVc2VDb2RpbmdUeXBlIHtcclxuICAgIHJldHVybiBWM1B1cnBvc2VPZlVzZUNvZGluZ3M7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEV4dGVuc2libGUtYm91bmQgVmFsdWUgU2V0IGZvciBjbGFzcyAoQ29uc2VudC5wcm92aXNpb24uY2xhc3MpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgY2xhc3NFeHRlbnNpYmxlQ29kaW5ncygpOkNvbnNlbnRDb250ZW50Q2xhc3NDb2RpbmdUeXBlIHtcclxuICAgIHJldHVybiBDb25zZW50Q29udGVudENsYXNzQ29kaW5ncztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICh0aGlzWyd0eXBlJ10gJiYgKCFPYmplY3QudmFsdWVzKENvbnNlbnRQcm92aXNpb25UeXBlQ29kZXMpLmluY2x1ZGVzKHRoaXMudHlwZSBhcyBhbnkpKSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnY29kZS1pbnZhbGlkJywgZGlhZ25vc3RpY3M6ICdJbnZhbGlkIGNvZGUgcHJvcGVydHkgdHlwZT86Zmhpci5GaGlyQ29kZTxDb25zZW50UHJvdmlzaW9uVHlwZUNvZGVUeXBlPiBmaGlyOiBDb25zZW50LnByb3Zpc2lvbi50eXBlOmNvZGUgUmVxdWlyZWQgYmluZGluZyB0bzogQ29uc2VudFByb3Zpc2lvblR5cGUnIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJ0eXBlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMudHlwZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJwZXJpb2RcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5wZXJpb2QuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiYWN0b3JcIl0pIHsgdGhpcy5hY3Rvci5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wiYWN0aW9uXCJdKSB7IHRoaXMuYWN0aW9uLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJzZWN1cml0eUxhYmVsXCJdKSB7IHRoaXMuc2VjdXJpdHlMYWJlbC5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wicHVycG9zZVwiXSkgeyB0aGlzLnB1cnBvc2UuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImNsYXNzXCJdKSB7IHRoaXMuY2xhc3MuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImNvZGVcIl0pIHsgdGhpcy5jb2RlLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJkYXRhUGVyaW9kXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZGF0YVBlcmlvZC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJkYXRhXCJdKSB7IHRoaXMuZGF0YS5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wicHJvdmlzaW9uXCJdKSB7IHRoaXMucHJvdmlzaW9uLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIENvbnNlbnQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29uc2VudEFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIkNvbnNlbnRcInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpZGVudGlmaWVyIGlkZW50aWZpZXMgdGhpcyBjb3B5IG9mIHRoZSBjb25zZW50LiBXaGVyZSB0aGlzIGlkZW50aWZpZXIgaXMgYWxzbyB1c2VkIGVsc2V3aGVyZSBhcyB0aGUgaWRlbnRpZmllciBmb3IgYSBjb25zZW50IHJlY29yZCAoZS5nLiBhIENEQSBjb25zZW50IGRvY3VtZW50KSB0aGVuIHRoZSBjb25zZW50IGRldGFpbHMgYXJlIGV4cGVjdGVkIHRvIGJlIHRoZSBzYW1lLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgYmVjYXVzZSB0aGUgc3RhdHVzIGNvbnRhaW5zIHRoZSBjb2RlcyByZWplY3RlZCBhbmQgZW50ZXJlZC1pbi1lcnJvciB0aGF0IG1hcmsgdGhlIENvbnNlbnQgYXMgbm90IGN1cnJlbnRseSB2YWxpZC5cclxuICAgKi9cclxuICBzdGF0dXM6IGZoaXIuRmhpckNvZGU8Q29uc2VudFN0YXRlQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENvbnNlbnQuc3RhdHVzXHJcbiAgICovXHJcbiAgX3N0YXR1cz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQSBzZWxlY3RvciBvZiB0aGUgdHlwZSBvZiBjb25zZW50IGJlaW5nIHByZXNlbnRlZDogQURSLCBQcml2YWN5LCBUcmVhdG1lbnQsIFJlc2VhcmNoLiAgVGhpcyBsaXN0IGlzIG5vdyBleHRlbnNpYmxlLlxyXG4gICAqL1xyXG4gIHNjb3BlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBBIGNsYXNzaWZpY2F0aW9uIG9mIHRoZSB0eXBlIG9mIGNvbnNlbnRzIGZvdW5kIGluIHRoZSBzdGF0ZW1lbnQuIFRoaXMgZWxlbWVudCBzdXBwb3J0cyBpbmRleGluZyBhbmQgcmV0cmlldmFsIG9mIGNvbnNlbnQgc3RhdGVtZW50cy5cclxuICAgKi9cclxuICBjYXRlZ29yeTogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118bnVsbDtcclxuICAvKipcclxuICAgKiBDb21tb25seSwgdGhlIHBhdGllbnQgdGhlIGNvbnNlbnQgcGVydGFpbnMgdG8gaXMgdGhlIGF1dGhvciwgYnV0IGZvciB5b3VuZyBhbmQgb2xkIHBlb3BsZSwgaXQgbWF5IGJlIHNvbWUgb3RoZXIgcGVyc29uLlxyXG4gICAqL1xyXG4gIHBhdGllbnQ/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaXMgbm90IHRoZSB0aW1lIG9mIHRoZSBvcmlnaW5hbCBjb25zZW50LCBidXQgdGhlIHRpbWUgdGhhdCB0aGlzIHN0YXRlbWVudCB3YXMgbWFkZSBvciBkZXJpdmVkLlxyXG4gICAqL1xyXG4gIGRhdGVUaW1lPzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ29uc2VudC5kYXRlVGltZVxyXG4gICAqL1xyXG4gIF9kYXRlVGltZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQ29tbW9ubHksIHRoZSBwYXRpZW50IHRoZSBjb25zZW50IHBlcnRhaW5zIHRvIGlzIHRoZSBjb25zZW50b3IsIGJ1dCBwYXJ0aWN1bGFybHkgZm9yIHlvdW5nIGFuZCBvbGQgcGVvcGxlLCBpdCBtYXkgYmUgc29tZSBvdGhlciBwZXJzb24gLSBlLmcuIGEgbGVnYWwgZ3VhcmRpYW4uXHJcbiAgICovXHJcbiAgcGVyZm9ybWVyPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBvcmdhbml6YXRpb24gdGhhdCBtYW5hZ2VzIHRoZSBjb25zZW50LCBhbmQgdGhlIGZyYW1ld29yayB3aXRoaW4gd2hpY2ggaXQgaXMgZXhlY3V0ZWQuXHJcbiAgICovXHJcbiAgb3JnYW5pemF0aW9uPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzb3VyY2UgY2FuIGJlIGNvbnRhaW5lZCBpbmxpbmUgKEF0dGFjaG1lbnQpLCByZWZlcmVuY2VkIGRpcmVjdGx5IChDb25zZW50KSwgcmVmZXJlbmNlZCBpbiBhIGNvbnNlbnQgcmVwb3NpdG9yeSAoRG9jdW1lbnRSZWZlcmVuY2UpLCBvciBzaW1wbHkgYnkgYW4gaWRlbnRpZmllciAoSWRlbnRpZmllciksIGUuZy4gYSBDREEgZG9jdW1lbnQgaWQuXHJcbiAgICovXHJcbiAgc291cmNlPzogZmhpci5BdHRhY2htZW50fGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc291cmNlIGNhbiBiZSBjb250YWluZWQgaW5saW5lIChBdHRhY2htZW50KSwgcmVmZXJlbmNlZCBkaXJlY3RseSAoQ29uc2VudCksIHJlZmVyZW5jZWQgaW4gYSBjb25zZW50IHJlcG9zaXRvcnkgKERvY3VtZW50UmVmZXJlbmNlKSwgb3Igc2ltcGx5IGJ5IGFuIGlkZW50aWZpZXIgKElkZW50aWZpZXIpLCBlLmcuIGEgQ0RBIGRvY3VtZW50IGlkLlxyXG4gICAqL1xyXG4gIHNvdXJjZUF0dGFjaG1lbnQ/OiBmaGlyLkF0dGFjaG1lbnRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc291cmNlIGNhbiBiZSBjb250YWluZWQgaW5saW5lIChBdHRhY2htZW50KSwgcmVmZXJlbmNlZCBkaXJlY3RseSAoQ29uc2VudCksIHJlZmVyZW5jZWQgaW4gYSBjb25zZW50IHJlcG9zaXRvcnkgKERvY3VtZW50UmVmZXJlbmNlKSwgb3Igc2ltcGx5IGJ5IGFuIGlkZW50aWZpZXIgKElkZW50aWZpZXIpLCBlLmcuIGEgQ0RBIGRvY3VtZW50IGlkLlxyXG4gICAqL1xyXG4gIHNvdXJjZVJlZmVyZW5jZT86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlZmVyZW5jZXMgdG8gdGhlIHBvbGljaWVzIHRoYXQgYXJlIGluY2x1ZGVkIGluIHRoaXMgY29uc2VudCBzY29wZS4gUG9saWNpZXMgbWF5IGJlIG9yZ2FuaXphdGlvbmFsLCBidXQgYXJlIG9mdGVuIGRlZmluZWQganVyaXNkaWN0aW9uYWxseSwgb3IgaW4gbGF3LlxyXG4gICAqL1xyXG4gIHBvbGljeT86IGZoaXIuQ29uc2VudFBvbGljeUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhlIHBvbGljeVJ1bGUgaXMgYWJzZW50LCBjb21wdXRhYmxlIGNvbnNlbnQgd291bGQgbmVlZCB0byBiZSBjb25zdHJ1Y3RlZCBmcm9tIHRoZSBlbGVtZW50cyBvZiB0aGUgQ29uc2VudCByZXNvdXJjZS5cclxuICAgKi9cclxuICBwb2xpY3lSdWxlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBXaGV0aGVyIGEgdHJlYXRtZW50IGluc3RydWN0aW9uIChlLmcuIGFydGlmaWNpYWwgcmVzcGlyYXRpb24geWVzIG9yIG5vKSB3YXMgdmVyaWZpZWQgd2l0aCB0aGUgcGF0aWVudCwgaGlzL2hlciBmYW1pbHkgb3IgYW5vdGhlciBhdXRob3JpemVkIHBlcnNvbi5cclxuICAgKi9cclxuICB2ZXJpZmljYXRpb24/OiBmaGlyLkNvbnNlbnRWZXJpZmljYXRpb25BcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFuIGV4Y2VwdGlvbiB0byB0aGUgYmFzZSBwb2xpY3kgb2YgdGhpcyBjb25zZW50LiBBbiBleGNlcHRpb24gY2FuIGJlIGFuIGFkZGl0aW9uIG9yIHJlbW92YWwgb2YgYWNjZXNzIHBlcm1pc3Npb25zLlxyXG4gICAqL1xyXG4gIHByb3Zpc2lvbj86IGZoaXIuQ29uc2VudFByb3Zpc2lvbkFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQSByZWNvcmQgb2YgYSBoZWFsdGhjYXJlIGNvbnN1bWVy4oCZcyAgY2hvaWNlcywgd2hpY2ggcGVybWl0cyBvciBkZW5pZXMgaWRlbnRpZmllZCByZWNpcGllbnQocykgb3IgcmVjaXBpZW50IHJvbGUocykgdG8gcGVyZm9ybSBvbmUgb3IgbW9yZSBhY3Rpb25zIHdpdGhpbiBhIGdpdmVuIHBvbGljeSBjb250ZXh0LCBmb3Igc3BlY2lmaWMgcHVycG9zZXMgYW5kIHBlcmlvZHMgb2YgdGltZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb25zZW50IGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdDb25zZW50JztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIkNvbnNlbnRcIjtcclxuICAvKipcclxuICAgKiBUaGlzIGlkZW50aWZpZXIgaWRlbnRpZmllcyB0aGlzIGNvcHkgb2YgdGhlIGNvbnNlbnQuIFdoZXJlIHRoaXMgaWRlbnRpZmllciBpcyBhbHNvIHVzZWQgZWxzZXdoZXJlIGFzIHRoZSBpZGVudGlmaWVyIGZvciBhIGNvbnNlbnQgcmVjb3JkIChlLmcuIGEgQ0RBIGNvbnNlbnQgZG9jdW1lbnQpIHRoZW4gdGhlIGNvbnNlbnQgZGV0YWlscyBhcmUgZXhwZWN0ZWQgdG8gYmUgdGhlIHNhbWUuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI6IGZoaXIuSWRlbnRpZmllcltdO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgYmVjYXVzZSB0aGUgc3RhdHVzIGNvbnRhaW5zIHRoZSBjb2RlcyByZWplY3RlZCBhbmQgZW50ZXJlZC1pbi1lcnJvciB0aGF0IG1hcmsgdGhlIENvbnNlbnQgYXMgbm90IGN1cnJlbnRseSB2YWxpZC5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPENvbnNlbnRTdGF0ZUNvZGVUeXBlPnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEEgc2VsZWN0b3Igb2YgdGhlIHR5cGUgb2YgY29uc2VudCBiZWluZyBwcmVzZW50ZWQ6IEFEUiwgUHJpdmFjeSwgVHJlYXRtZW50LCBSZXNlYXJjaC4gIFRoaXMgbGlzdCBpcyBub3cgZXh0ZW5zaWJsZS5cclxuICAgKi9cclxuICBwdWJsaWMgc2NvcGU6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogQSBjbGFzc2lmaWNhdGlvbiBvZiB0aGUgdHlwZSBvZiBjb25zZW50cyBmb3VuZCBpbiB0aGUgc3RhdGVtZW50LiBUaGlzIGVsZW1lbnQgc3VwcG9ydHMgaW5kZXhpbmcgYW5kIHJldHJpZXZhbCBvZiBjb25zZW50IHN0YXRlbWVudHMuXHJcbiAgICovXHJcbiAgcHVibGljIGNhdGVnb3J5OiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIENvbW1vbmx5LCB0aGUgcGF0aWVudCB0aGUgY29uc2VudCBwZXJ0YWlucyB0byBpcyB0aGUgYXV0aG9yLCBidXQgZm9yIHlvdW5nIGFuZCBvbGQgcGVvcGxlLCBpdCBtYXkgYmUgc29tZSBvdGhlciBwZXJzb24uXHJcbiAgICovXHJcbiAgcHVibGljIHBhdGllbnQ/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBub3QgdGhlIHRpbWUgb2YgdGhlIG9yaWdpbmFsIGNvbnNlbnQsIGJ1dCB0aGUgdGltZSB0aGF0IHRoaXMgc3RhdGVtZW50IHdhcyBtYWRlIG9yIGRlcml2ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGRhdGVUaW1lPzogZmhpci5GaGlyRGF0ZVRpbWV8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENvbW1vbmx5LCB0aGUgcGF0aWVudCB0aGUgY29uc2VudCBwZXJ0YWlucyB0byBpcyB0aGUgY29uc2VudG9yLCBidXQgcGFydGljdWxhcmx5IGZvciB5b3VuZyBhbmQgb2xkIHBlb3BsZSwgaXQgbWF5IGJlIHNvbWUgb3RoZXIgcGVyc29uIC0gZS5nLiBhIGxlZ2FsIGd1YXJkaWFuLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwZXJmb3JtZXI6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogVGhlIG9yZ2FuaXphdGlvbiB0aGF0IG1hbmFnZXMgdGhlIGNvbnNlbnQsIGFuZCB0aGUgZnJhbWV3b3JrIHdpdGhpbiB3aGljaCBpdCBpcyBleGVjdXRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgb3JnYW5pemF0aW9uOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzb3VyY2UgY2FuIGJlIGNvbnRhaW5lZCBpbmxpbmUgKEF0dGFjaG1lbnQpLCByZWZlcmVuY2VkIGRpcmVjdGx5IChDb25zZW50KSwgcmVmZXJlbmNlZCBpbiBhIGNvbnNlbnQgcmVwb3NpdG9yeSAoRG9jdW1lbnRSZWZlcmVuY2UpLCBvciBzaW1wbHkgYnkgYW4gaWRlbnRpZmllciAoSWRlbnRpZmllciksIGUuZy4gYSBDREEgZG9jdW1lbnQgaWQuXHJcbiAgICovXHJcbiAgcHVibGljIHNvdXJjZT86IChmaGlyLkF0dGFjaG1lbnR8Zmhpci5SZWZlcmVuY2UpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IENvbnNlbnQuc291cmNlW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX3NvdXJjZUlzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZWZlcmVuY2VzIHRvIHRoZSBwb2xpY2llcyB0aGF0IGFyZSBpbmNsdWRlZCBpbiB0aGlzIGNvbnNlbnQgc2NvcGUuIFBvbGljaWVzIG1heSBiZSBvcmdhbml6YXRpb25hbCwgYnV0IGFyZSBvZnRlbiBkZWZpbmVkIGp1cmlzZGljdGlvbmFsbHksIG9yIGluIGxhdy5cclxuICAgKi9cclxuICBwdWJsaWMgcG9saWN5OiBmaGlyLkNvbnNlbnRQb2xpY3lbXTtcclxuICAvKipcclxuICAgKiBJZiB0aGUgcG9saWN5UnVsZSBpcyBhYnNlbnQsIGNvbXB1dGFibGUgY29uc2VudCB3b3VsZCBuZWVkIHRvIGJlIGNvbnN0cnVjdGVkIGZyb20gdGhlIGVsZW1lbnRzIG9mIHRoZSBDb25zZW50IHJlc291cmNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwb2xpY3lSdWxlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFdoZXRoZXIgYSB0cmVhdG1lbnQgaW5zdHJ1Y3Rpb24gKGUuZy4gYXJ0aWZpY2lhbCByZXNwaXJhdGlvbiB5ZXMgb3Igbm8pIHdhcyB2ZXJpZmllZCB3aXRoIHRoZSBwYXRpZW50LCBoaXMvaGVyIGZhbWlseSBvciBhbm90aGVyIGF1dGhvcml6ZWQgcGVyc29uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB2ZXJpZmljYXRpb246IGZoaXIuQ29uc2VudFZlcmlmaWNhdGlvbltdO1xyXG4gIC8qKlxyXG4gICAqIEFuIGV4Y2VwdGlvbiB0byB0aGUgYmFzZSBwb2xpY3kgb2YgdGhpcyBjb25zZW50LiBBbiBleGNlcHRpb24gY2FuIGJlIGFuIGFkZGl0aW9uIG9yIHJlbW92YWwgb2YgYWNjZXNzIHBlcm1pc3Npb25zLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcm92aXNpb24/OiBmaGlyLkNvbnNlbnRQcm92aXNpb258dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIENvbnNlbnQgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxDb25zZW50QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ0NvbnNlbnQnO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IHNvdXJjZS5pZGVudGlmaWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuSWRlbnRpZmllcih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmlkZW50aWZpZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RhdHVzJ10pIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxDb25zZW50U3RhdGVDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2Uuc3RhdHVzfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zdGF0dXMnXSkge1xyXG4gICAgICBpZiAodGhpcy5zdGF0dXMpIHsgdGhpcy5zdGF0dXMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc3RhdHVzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8Q29uc2VudFN0YXRlQ29kZVR5cGU+KHNvdXJjZS5fc3RhdHVzIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydzY29wZSddKSB7IHRoaXMuc2NvcGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnNjb3BlKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc2NvcGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydjYXRlZ29yeSddKSB7IHRoaXMuY2F0ZWdvcnkgPSBzb3VyY2UuY2F0ZWdvcnkubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jYXRlZ29yeSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwYXRpZW50J10pIHsgdGhpcy5wYXRpZW50ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5wYXRpZW50KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGF0ZVRpbWUnXSkgeyB0aGlzLmRhdGVUaW1lID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLmRhdGVUaW1lfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19kYXRlVGltZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLmRhdGVUaW1lKSB7IHRoaXMuZGF0ZVRpbWUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZGF0ZVRpbWUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5kYXRlVGltZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZShzb3VyY2UuX2RhdGVUaW1lIGFzIFBhcnRpYWw8Zmhpci5GaGlyRGF0ZVRpbWVBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3BlcmZvcm1lciddKSB7IHRoaXMucGVyZm9ybWVyID0gc291cmNlLnBlcmZvcm1lci5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnBlcmZvcm1lciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydvcmdhbml6YXRpb24nXSkgeyB0aGlzLm9yZ2FuaXphdGlvbiA9IHNvdXJjZS5vcmdhbml6YXRpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5vcmdhbml6YXRpb24gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc291cmNlJ10pIHsgdGhpcy5zb3VyY2UgPSBzb3VyY2Uuc291cmNlOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3NvdXJjZUF0dGFjaG1lbnQnXSkgeyB0aGlzLnNvdXJjZSA9IG5ldyBmaGlyLkF0dGFjaG1lbnQoc291cmNlLnNvdXJjZUF0dGFjaG1lbnQpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3NvdXJjZVJlZmVyZW5jZSddKSB7IHRoaXMuc291cmNlID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5zb3VyY2VSZWZlcmVuY2UpOyB9XHJcbiAgICBpZiAoc291cmNlWydwb2xpY3knXSkgeyB0aGlzLnBvbGljeSA9IHNvdXJjZS5wb2xpY3kubWFwKCh4KSA9PiBuZXcgZmhpci5Db25zZW50UG9saWN5KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucG9saWN5ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3BvbGljeVJ1bGUnXSkgeyB0aGlzLnBvbGljeVJ1bGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnBvbGljeVJ1bGUpOyB9XHJcbiAgICBpZiAoc291cmNlWyd2ZXJpZmljYXRpb24nXSkgeyB0aGlzLnZlcmlmaWNhdGlvbiA9IHNvdXJjZS52ZXJpZmljYXRpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5Db25zZW50VmVyaWZpY2F0aW9uKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudmVyaWZpY2F0aW9uID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3Byb3Zpc2lvbiddKSB7IHRoaXMucHJvdmlzaW9uID0gbmV3IGZoaXIuQ29uc2VudFByb3Zpc2lvbihzb3VyY2UucHJvdmlzaW9uKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIHN0YXR1cyAoQ29uc2VudC5zdGF0dXMpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgc3RhdHVzUmVxdWlyZWRDb2RlcygpIHtcclxuICAgIHJldHVybiBDb25zZW50U3RhdGVDb2RlcztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5zaWJsZS1ib3VuZCBWYWx1ZSBTZXQgZm9yIHNjb3BlIChDb25zZW50LnNjb3BlKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IHNjb3BlRXh0ZW5zaWJsZUNvZGluZ3MoKTpDb25zZW50U2NvcGVDb2RpbmdUeXBlIHtcclxuICAgIHJldHVybiBDb25zZW50U2NvcGVDb2RpbmdzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBFeHRlbnNpYmxlLWJvdW5kIFZhbHVlIFNldCBmb3IgY2F0ZWdvcnkgKENvbnNlbnQuY2F0ZWdvcnkpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgY2F0ZWdvcnlFeHRlbnNpYmxlQ29kaW5ncygpOkNvbnNlbnRDYXRlZ29yeUNvZGluZ1R5cGUge1xyXG4gICAgcmV0dXJuIENvbnNlbnRDYXRlZ29yeUNvZGluZ3M7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEV4dGVuc2libGUtYm91bmQgVmFsdWUgU2V0IGZvciBwb2xpY3lSdWxlIChDb25zZW50LnBvbGljeVJ1bGUpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgcG9saWN5UnVsZUV4dGVuc2libGVDb2RpbmdzKCk6Q29uc2VudFBvbGljeUNvZGluZ1R5cGUge1xyXG4gICAgcmV0dXJuIENvbnNlbnRQb2xpY3lDb2RpbmdzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKCF0aGlzWydyZXNvdXJjZVR5cGUnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgcmVzb3VyY2VUeXBlOlwiQ29uc2VudFwiIGZoaXI6IENvbnNlbnQucmVzb3VyY2VUeXBlOlwiQ29uc2VudFwiJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiaWRlbnRpZmllclwiXSkgeyB0aGlzLmlkZW50aWZpZXIuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAoIXRoaXNbJ3N0YXR1cyddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBzdGF0dXM6Zmhpci5GaGlyQ29kZTxDb25zZW50U3RhdGVDb2RlVHlwZT4gZmhpcjogQ29uc2VudC5zdGF0dXM6Y29kZScgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1snc3RhdHVzJ10gJiYgKCFPYmplY3QudmFsdWVzKENvbnNlbnRTdGF0ZUNvZGVzKS5pbmNsdWRlcyh0aGlzLnN0YXR1cyBhcyBhbnkpKSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnY29kZS1pbnZhbGlkJywgZGlhZ25vc3RpY3M6ICdJbnZhbGlkIGNvZGUgcHJvcGVydHkgc3RhdHVzOmZoaXIuRmhpckNvZGU8Q29uc2VudFN0YXRlQ29kZVR5cGU+IGZoaXI6IENvbnNlbnQuc3RhdHVzOmNvZGUgUmVxdWlyZWQgYmluZGluZyB0bzogQ29uc2VudFN0YXRlJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wic3RhdHVzXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc3RhdHVzLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAoIXRoaXNbJ3Njb3BlJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHNjb3BlOmZoaXIuQ29kZWFibGVDb25jZXB0IGZoaXI6IENvbnNlbnQuc2NvcGU6Q29kZWFibGVDb25jZXB0JyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wic2NvcGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5zY29wZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKCF0aGlzWydjYXRlZ29yeSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBjYXRlZ29yeTpmaGlyLkNvZGVhYmxlQ29uY2VwdFtdIGZoaXI6IENvbnNlbnQuY2F0ZWdvcnk6Q29kZWFibGVDb25jZXB0JyB9KTtcclxuICAgIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkodGhpcy5jYXRlZ29yeSkpIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3N0cnVjdHVyZScsIGRpYWdub3N0aWNzOiAnRm91bmQgc2NhbGFyIGluIGFycmF5IHByb3BlcnR5IGNhdGVnb3J5OmZoaXIuQ29kZWFibGVDb25jZXB0W10gZmhpcjogQ29uc2VudC5jYXRlZ29yeTpDb2RlYWJsZUNvbmNlcHQnIH0pO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmNhdGVnb3J5Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgY2F0ZWdvcnk6Zmhpci5Db2RlYWJsZUNvbmNlcHRbXSBmaGlyOiBDb25zZW50LmNhdGVnb3J5OkNvZGVhYmxlQ29uY2VwdCcgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImNhdGVnb3J5XCJdKSB7IHRoaXMuY2F0ZWdvcnkuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcInBhdGllbnRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5wYXRpZW50LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImRhdGVUaW1lXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZGF0ZVRpbWUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wicGVyZm9ybWVyXCJdKSB7IHRoaXMucGVyZm9ybWVyLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJvcmdhbml6YXRpb25cIl0pIHsgdGhpcy5vcmdhbml6YXRpb24uZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcInBvbGljeVwiXSkgeyB0aGlzLnBvbGljeS5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wicG9saWN5UnVsZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnBvbGljeVJ1bGUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1widmVyaWZpY2F0aW9uXCJdKSB7IHRoaXMudmVyaWZpY2F0aW9uLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJwcm92aXNpb25cIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5wcm92aXNpb24uZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbiJdfQ==