// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: Consent
import * as fhir from '../fhir.js';
// @ts-ignore
import { SecurityRoleTypeCodings, } from '../fhirValueSets/SecurityRoleTypeCodings.js';
// @ts-ignore
import { ConsentDataMeaningCodes } from '../fhirValueSets/ConsentDataMeaningCodes.js';
// @ts-ignore
import { ConsentProvisionTypeCodes } from '../fhirValueSets/ConsentProvisionTypeCodes.js';
// @ts-ignore
import { SecurityLabelsCodings, } from '../fhirValueSets/SecurityLabelsCodings.js';
// @ts-ignore
import { V3PurposeOfUseCodings, } from '../fhirValueSets/V3PurposeOfUseCodings.js';
// @ts-ignore
import { ConsentContentClassCodings, } from '../fhirValueSets/ConsentContentClassCodings.js';
// @ts-ignore
import { ConsentStateCodesCodes } from '../fhirValueSets/ConsentStateCodesCodes.js';
// @ts-ignore
import { ConsentScopeCodings, } from '../fhirValueSets/ConsentScopeCodings.js';
// @ts-ignore
import { ConsentCategoryCodings, } from '../fhirValueSets/ConsentCategoryCodings.js';
// @ts-ignore
import { ConsentPolicyCodings, } from '../fhirValueSets/ConsentPolicyCodings.js';
/**
 * The references to the policies that are included in this consent scope. Policies may be organizational, but are often defined jurisdictionally, or in law.
 */
export class ConsentPolicy extends fhir.BackboneElement {
    /**
     * Default constructor for ConsentPolicy - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['authority']) {
            this.authority = new fhir.FhirUri({ value: source.authority });
        }
        if (source['uri']) {
            this.uri = new fhir.FhirUri({ value: source.uri });
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["authority"]) {
            issues.push(...this.authority.doModelValidation());
        }
        if (this["uri"]) {
            issues.push(...this.uri.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ConsentPolicy._fts_dataType = 'ConsentPolicy';
/**
 * Whether a treatment instruction (e.g. artificial respiration yes or no) was verified with the patient, his/her family or another authorized person.
 */
export class ConsentVerification extends fhir.BackboneElement {
    /**
     * Default constructor for ConsentVerification - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['verified']) {
            this.verified = new fhir.FhirBoolean({ value: source.verified });
        }
        else {
            this.verified = null;
        }
        if (source['verifiedWith']) {
            this.verifiedWith = new fhir.Reference(source.verifiedWith);
        }
        if (source['verificationDate']) {
            this.verificationDate = new fhir.FhirDateTime({ value: source.verificationDate });
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['verified']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property verified:fhir.FhirBoolean fhir: Consent.verification.verified:boolean' });
        }
        if (this["verified"]) {
            issues.push(...this.verified.doModelValidation());
        }
        if (this["verifiedWith"]) {
            issues.push(...this.verifiedWith.doModelValidation());
        }
        if (this["verificationDate"]) {
            issues.push(...this.verificationDate.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ConsentVerification._fts_dataType = 'ConsentVerification';
/**
 * Who or what is controlled by this rule. Use group to identify a set of actors by some property they share (e.g. 'admitting officers').
 */
export class ConsentProvisionActor extends fhir.BackboneElement {
    /**
     * Default constructor for ConsentProvisionActor - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['role']) {
            this.role = new fhir.CodeableConcept(source.role);
        }
        else {
            this.role = null;
        }
        if (source['reference']) {
            this.reference = new fhir.Reference(source.reference);
        }
        else {
            this.reference = null;
        }
    }
    /**
     * Extensible-bound Value Set for role (Consent.provision.actor.role)
     */
    static get roleExtensibleCodings() {
        return SecurityRoleTypeCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['role']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property role:fhir.CodeableConcept fhir: Consent.provision.actor.role:CodeableConcept' });
        }
        if (this["role"]) {
            issues.push(...this.role.doModelValidation());
        }
        if (!this['reference']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property reference:fhir.Reference fhir: Consent.provision.actor.reference:Reference' });
        }
        if (this["reference"]) {
            issues.push(...this.reference.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ConsentProvisionActor._fts_dataType = 'ConsentProvisionActor';
/**
 * The resources controlled by this rule if specific resources are referenced.
 */
export class ConsentProvisionData extends fhir.BackboneElement {
    /**
     * Default constructor for ConsentProvisionData - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['meaning']) {
            this.meaning = new fhir.FhirCode({ value: source.meaning });
        }
        else {
            this.meaning = null;
        }
        if (source['reference']) {
            this.reference = new fhir.Reference(source.reference);
        }
        else {
            this.reference = null;
        }
    }
    /**
     * Required-bound Value Set for meaning (Consent.provision.data.meaning)
     */
    static get meaningRequiredCodes() {
        return ConsentDataMeaningCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['meaning']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property meaning:fhir.FhirCode<ConsentDataMeaningCodeType> fhir: Consent.provision.data.meaning:code' });
        }
        if (this['meaning'] && (!Object.values(ConsentDataMeaningCodes).includes(this.meaning))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property meaning:fhir.FhirCode<ConsentDataMeaningCodeType> fhir: Consent.provision.data.meaning:code Required binding to: ConsentDataMeaning' });
        }
        if (this["meaning"]) {
            issues.push(...this.meaning.doModelValidation());
        }
        if (!this['reference']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property reference:fhir.Reference fhir: Consent.provision.data.reference:Reference' });
        }
        if (this["reference"]) {
            issues.push(...this.reference.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ConsentProvisionData._fts_dataType = 'ConsentProvisionData';
/**
 * An exception to the base policy of this consent. An exception can be an addition or removal of access permissions.
 */
export class ConsentProvision extends fhir.BackboneElement {
    /**
     * Default constructor for ConsentProvision - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['type']) {
            this.type = new fhir.FhirCode({ value: source.type });
        }
        if (source['period']) {
            this.period = new fhir.Period(source.period);
        }
        if (source['actor']) {
            this.actor = source.actor.map((x) => new fhir.ConsentProvisionActor(x));
        }
        else {
            this.actor = [];
        }
        if (source['action']) {
            this.action = source.action.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.action = [];
        }
        if (source['securityLabel']) {
            this.securityLabel = source.securityLabel.map((x) => new fhir.Coding(x));
        }
        else {
            this.securityLabel = [];
        }
        if (source['purpose']) {
            this.purpose = source.purpose.map((x) => new fhir.Coding(x));
        }
        else {
            this.purpose = [];
        }
        if (source['class']) {
            this.class = source.class.map((x) => new fhir.Coding(x));
        }
        else {
            this.class = [];
        }
        if (source['code']) {
            this.code = source.code.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.code = [];
        }
        if (source['dataPeriod']) {
            this.dataPeriod = new fhir.Period(source.dataPeriod);
        }
        if (source['data']) {
            this.data = source.data.map((x) => new fhir.ConsentProvisionData(x));
        }
        else {
            this.data = [];
        }
        if (source['provision']) {
            this.provision = source.provision.map((x) => new fhir.ConsentProvision(x));
        }
        else {
            this.provision = [];
        }
    }
    /**
     * Required-bound Value Set for type (Consent.provision.type)
     */
    static get typeRequiredCodes() {
        return ConsentProvisionTypeCodes;
    }
    /**
     * Extensible-bound Value Set for securityLabel (Consent.provision.securityLabel)
     */
    static get securityLabelExtensibleCodings() {
        return SecurityLabelsCodings;
    }
    /**
     * Extensible-bound Value Set for purpose (Consent.provision.purpose)
     */
    static get purposeExtensibleCodings() {
        return V3PurposeOfUseCodings;
    }
    /**
     * Extensible-bound Value Set for class (Consent.provision.class)
     */
    static get classExtensibleCodings() {
        return ConsentContentClassCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this['type'] && (!Object.values(ConsentProvisionTypeCodes).includes(this.type))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property type?:fhir.FhirCode<ConsentProvisionTypeCodeType> fhir: Consent.provision.type:code Required binding to: ConsentProvisionType' });
        }
        if (this["type"]) {
            issues.push(...this.type.doModelValidation());
        }
        if (this["period"]) {
            issues.push(...this.period.doModelValidation());
        }
        if (this["actor"]) {
            this.actor.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["action"]) {
            this.action.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["securityLabel"]) {
            this.securityLabel.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["purpose"]) {
            this.purpose.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["class"]) {
            this.class.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["code"]) {
            this.code.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["dataPeriod"]) {
            issues.push(...this.dataPeriod.doModelValidation());
        }
        if (this["data"]) {
            this.data.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["provision"]) {
            this.provision.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ConsentProvision._fts_dataType = 'ConsentProvision';
/**
 * A record of a healthcare consumer’s  choices, which permits or denies identified recipient(s) or recipient role(s) to perform one or more actions within a given policy context, for specific purposes and periods of time.
 */
export class Consent extends fhir.DomainResource {
    /**
     * Default constructor for Consent - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'Consent';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['scope']) {
            this.scope = new fhir.CodeableConcept(source.scope);
        }
        else {
            this.scope = null;
        }
        if (source['category']) {
            this.category = source.category.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.category = [];
        }
        if (source['patient']) {
            this.patient = new fhir.Reference(source.patient);
        }
        if (source['dateTime']) {
            this.dateTime = new fhir.FhirDateTime({ value: source.dateTime });
        }
        if (source['performer']) {
            this.performer = source.performer.map((x) => new fhir.Reference(x));
        }
        else {
            this.performer = [];
        }
        if (source['organization']) {
            this.organization = source.organization.map((x) => new fhir.Reference(x));
        }
        else {
            this.organization = [];
        }
        if (source['source']) {
            this.source = source.source;
        }
        else if (source['sourceAttachment']) {
            this.source = new fhir.Attachment(source.sourceAttachment);
        }
        else if (source['sourceReference']) {
            this.source = new fhir.Reference(source.sourceReference);
        }
        if (source['policy']) {
            this.policy = source.policy.map((x) => new fhir.ConsentPolicy(x));
        }
        else {
            this.policy = [];
        }
        if (source['policyRule']) {
            this.policyRule = new fhir.CodeableConcept(source.policyRule);
        }
        if (source['verification']) {
            this.verification = source.verification.map((x) => new fhir.ConsentVerification(x));
        }
        else {
            this.verification = [];
        }
        if (source['provision']) {
            this.provision = new fhir.ConsentProvision(source.provision);
        }
    }
    /**
     * Required-bound Value Set for status (Consent.status)
     */
    static get statusRequiredCodes() {
        return ConsentStateCodesCodes;
    }
    /**
     * Extensible-bound Value Set for scope (Consent.scope)
     */
    static get scopeExtensibleCodings() {
        return ConsentScopeCodings;
    }
    /**
     * Extensible-bound Value Set for category (Consent.category)
     */
    static get categoryExtensibleCodings() {
        return ConsentCategoryCodings;
    }
    /**
     * Extensible-bound Value Set for policyRule (Consent.policyRule)
     */
    static get policyRuleExtensibleCodings() {
        return ConsentPolicyCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType:"Consent" fhir: Consent.resourceType:"Consent"' });
        }
        if (this["identifier"]) {
            this.identifier.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (!this['status']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property status:fhir.FhirCode<ConsentStateCodesCodeType> fhir: Consent.status:code' });
        }
        if (this['status'] && (!Object.values(ConsentStateCodesCodes).includes(this.status))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property status:fhir.FhirCode<ConsentStateCodesCodeType> fhir: Consent.status:code Required binding to: ConsentStateCodes' });
        }
        if (this["status"]) {
            issues.push(...this.status.doModelValidation());
        }
        if (!this['scope']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property scope:fhir.CodeableConcept fhir: Consent.scope:CodeableConcept' });
        }
        if (this["scope"]) {
            issues.push(...this.scope.doModelValidation());
        }
        if (!this['category']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property category:fhir.CodeableConcept[] fhir: Consent.category:CodeableConcept' });
        }
        else if (!Array.isArray(this.category)) {
            issues.push({ severity: 'error', code: 'structure', diagnostics: 'Found scalar in array property category:fhir.CodeableConcept[] fhir: Consent.category:CodeableConcept' });
        }
        else if (this.category.length === 0) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property category:fhir.CodeableConcept[] fhir: Consent.category:CodeableConcept' });
        }
        if (this["category"]) {
            this.category.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["patient"]) {
            issues.push(...this.patient.doModelValidation());
        }
        if (this["dateTime"]) {
            issues.push(...this.dateTime.doModelValidation());
        }
        if (this["performer"]) {
            this.performer.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["organization"]) {
            this.organization.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["policy"]) {
            this.policy.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["policyRule"]) {
            issues.push(...this.policyRule.doModelValidation());
        }
        if (this["verification"]) {
            this.verification.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["provision"]) {
            issues.push(...this.provision.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
Consent._fts_dataType = 'Consent';
/**
 * Internal flag to properly serialize choice-type element Consent.source[x]
 */
Consent._fts_sourceIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29uc2VudC5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvQ29uc2VudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQyx5QkFBeUI7QUFFekIsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFFbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSx1QkFBdUIsR0FBOEIsTUFBTSw2Q0FBNkMsQ0FBQztBQUtsSCxhQUFhO0FBQ2IsT0FBTyxFQUFFLHVCQUF1QixFQUErQixNQUFNLDZDQUE2QyxDQUFDO0FBR25ILGFBQWE7QUFDYixPQUFPLEVBQUUseUJBQXlCLEVBQWlDLE1BQU0sK0NBQStDLENBQUM7QUFLekgsYUFBYTtBQUNiLE9BQU8sRUFBRSxxQkFBcUIsR0FBNEIsTUFBTSwyQ0FBMkMsQ0FBQztBQUc1RyxhQUFhO0FBQ2IsT0FBTyxFQUFFLHFCQUFxQixHQUE0QixNQUFNLDJDQUEyQyxDQUFDO0FBRzVHLGFBQWE7QUFDYixPQUFPLEVBQUUsMEJBQTBCLEdBQWlDLE1BQU0sZ0RBQWdELENBQUM7QUFTM0gsYUFBYTtBQUNiLE9BQU8sRUFBRSxzQkFBc0IsRUFBOEIsTUFBTSw0Q0FBNEMsQ0FBQztBQUNoSCxhQUFhO0FBQ2IsT0FBTyxFQUFFLG1CQUFtQixHQUEwQixNQUFNLHlDQUF5QyxDQUFDO0FBR3RHLGFBQWE7QUFDYixPQUFPLEVBQUUsc0JBQXNCLEdBQTZCLE1BQU0sNENBQTRDLENBQUM7QUFHL0csYUFBYTtBQUNiLE9BQU8sRUFBRSxvQkFBb0IsR0FBMkIsTUFBTSwwQ0FBMEMsQ0FBQztBQWlCekc7O0dBRUc7QUFDSCxNQUFNLE9BQU8sYUFBYyxTQUFRLElBQUksQ0FBQyxlQUFlO0lBYXJEOztPQUVHO0lBQ0gsWUFBWSxTQUFvQyxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUMxRixLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FB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R0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQUU7UUFDMUcsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtTQUFFO1FBQzlGLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFDaEYsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtTQUFFO1FBQzFHLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFDOUUsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQzs7QUEzSkQ7O0dBRUc7QUFDNkIscUJBQWEsR0FBVSxTQUFTLENBQUM7QUF5Q2pFOztHQUVHO0FBQ3VCLDJCQUFtQixHQUFRLElBQUksQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNC5jb3JlIHZlcnNpb246IDQuMC4xXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogQ29uc2VudFxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgU2VjdXJpdHlSb2xlVHlwZUNvZGluZ3MsIFNlY3VyaXR5Um9sZVR5cGVDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9TZWN1cml0eVJvbGVUeXBlQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgU2VjdXJpdHlSb2xlVHlwZUNvZGVzLCAgU2VjdXJpdHlSb2xlVHlwZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9TZWN1cml0eVJvbGVUeXBlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbnNlbnREYXRhTWVhbmluZ0NvZGluZ3MsIENvbnNlbnREYXRhTWVhbmluZ0NvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbnNlbnREYXRhTWVhbmluZ0NvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbnNlbnREYXRhTWVhbmluZ0NvZGVzLCAgQ29uc2VudERhdGFNZWFuaW5nQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbnNlbnREYXRhTWVhbmluZ0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDb25zZW50UHJvdmlzaW9uVHlwZUNvZGluZ3MsIENvbnNlbnRQcm92aXNpb25UeXBlQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uc2VudFByb3Zpc2lvblR5cGVDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDb25zZW50UHJvdmlzaW9uVHlwZUNvZGVzLCAgQ29uc2VudFByb3Zpc2lvblR5cGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uc2VudFByb3Zpc2lvblR5cGVDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29uc2VudEFjdGlvbkNvZGluZ3MsIENvbnNlbnRBY3Rpb25Db2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db25zZW50QWN0aW9uQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29uc2VudEFjdGlvbkNvZGVzLCAgQ29uc2VudEFjdGlvbkNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db25zZW50QWN0aW9uQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFNlY3VyaXR5TGFiZWxzQ29kaW5ncywgU2VjdXJpdHlMYWJlbHNDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9TZWN1cml0eUxhYmVsc0NvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFNlY3VyaXR5TGFiZWxzQ29kZXMsICBTZWN1cml0eUxhYmVsc0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9TZWN1cml0eUxhYmVsc0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBWM1B1cnBvc2VPZlVzZUNvZGluZ3MsIFYzUHVycG9zZU9mVXNlQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVjNQdXJwb3NlT2ZVc2VDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBWM1B1cnBvc2VPZlVzZUNvZGVzLCAgVjNQdXJwb3NlT2ZVc2VDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVjNQdXJwb3NlT2ZVc2VDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29uc2VudENvbnRlbnRDbGFzc0NvZGluZ3MsIENvbnNlbnRDb250ZW50Q2xhc3NDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db25zZW50Q29udGVudENsYXNzQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29uc2VudENvbnRlbnRDbGFzc0NvZGVzLCAgQ29uc2VudENvbnRlbnRDbGFzc0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db25zZW50Q29udGVudENsYXNzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbnNlbnRDb250ZW50Q29kZUNvZGluZ3MsIENvbnNlbnRDb250ZW50Q29kZUNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbnNlbnRDb250ZW50Q29kZUNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbnNlbnRDb250ZW50Q29kZUNvZGVzLCAgQ29uc2VudENvbnRlbnRDb2RlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbnNlbnRDb250ZW50Q29kZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDb25zZW50U3RhdGVDb2Rlc0NvZGluZ3MsIENvbnNlbnRTdGF0ZUNvZGVzQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uc2VudFN0YXRlQ29kZXNDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDb25zZW50U3RhdGVDb2Rlc0NvZGVzLCAgQ29uc2VudFN0YXRlQ29kZXNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uc2VudFN0YXRlQ29kZXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29uc2VudFNjb3BlQ29kaW5ncywgQ29uc2VudFNjb3BlQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uc2VudFNjb3BlQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29uc2VudFNjb3BlQ29kZXMsICBDb25zZW50U2NvcGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uc2VudFNjb3BlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbnNlbnRDYXRlZ29yeUNvZGluZ3MsIENvbnNlbnRDYXRlZ29yeUNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbnNlbnRDYXRlZ29yeUNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbnNlbnRDYXRlZ29yeUNvZGVzLCAgQ29uc2VudENhdGVnb3J5Q29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbnNlbnRDYXRlZ29yeUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDb25zZW50UG9saWN5Q29kaW5ncywgQ29uc2VudFBvbGljeUNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbnNlbnRQb2xpY3lDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDb25zZW50UG9saWN5Q29kZXMsICBDb25zZW50UG9saWN5Q29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbnNlbnRQb2xpY3lDb2Rlcy5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBDb25zZW50UG9saWN5IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENvbnNlbnRQb2xpY3lBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBFbnRpdHkgb3IgT3JnYW5pemF0aW9uIGhhdmluZyByZWd1bGF0b3J5IGp1cmlzZGljdGlvbiBvciBhY2NvdW50YWJpbGl0eSBmb3IgIGVuZm9yY2luZyBwb2xpY2llcyBwZXJ0YWluaW5nIHRvIENvbnNlbnQgRGlyZWN0aXZlcy5cclxuICAgKi9cclxuICBhdXRob3JpdHk/OiBmaGlyLkZoaXJVcml8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgZm9yIGRpc2NvdmVyYWJpbGl0eSAvIGRvY3VtZW50YXRpb24gYW5kIGRvZXMgbm90IG1vZGlmeSBvciBxdWFsaWZ5IHRoZSBwb2xpY3kgcnVsZXMuXHJcbiAgICovXHJcbiAgdXJpPzogZmhpci5GaGlyVXJpfHN0cmluZ3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgcmVmZXJlbmNlcyB0byB0aGUgcG9saWNpZXMgdGhhdCBhcmUgaW5jbHVkZWQgaW4gdGhpcyBjb25zZW50IHNjb3BlLiBQb2xpY2llcyBtYXkgYmUgb3JnYW5pemF0aW9uYWwsIGJ1dCBhcmUgb2Z0ZW4gZGVmaW5lZCBqdXJpc2RpY3Rpb25hbGx5LCBvciBpbiBsYXcuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29uc2VudFBvbGljeSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0NvbnNlbnRQb2xpY3knO1xyXG4gIC8qKlxyXG4gICAqIEVudGl0eSBvciBPcmdhbml6YXRpb24gaGF2aW5nIHJlZ3VsYXRvcnkganVyaXNkaWN0aW9uIG9yIGFjY291bnRhYmlsaXR5IGZvciAgZW5mb3JjaW5nIHBvbGljaWVzIHBlcnRhaW5pbmcgdG8gQ29uc2VudCBEaXJlY3RpdmVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhdXRob3JpdHk/OiBmaGlyLkZoaXJVcml8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBmb3IgZGlzY292ZXJhYmlsaXR5IC8gZG9jdW1lbnRhdGlvbiBhbmQgZG9lcyBub3QgbW9kaWZ5IG9yIHF1YWxpZnkgdGhlIHBvbGljeSBydWxlcy5cclxuICAgKi9cclxuICBwdWJsaWMgdXJpPzogZmhpci5GaGlyVXJpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBDb25zZW50UG9saWN5IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8Q29uc2VudFBvbGljeUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydhdXRob3JpdHknXSkgeyB0aGlzLmF1dGhvcml0eSA9IG5ldyBmaGlyLkZoaXJVcmkoe3ZhbHVlOiBzb3VyY2UuYXV0aG9yaXR5fSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3VyaSddKSB7IHRoaXMudXJpID0gbmV3IGZoaXIuRmhpclVyaSh7dmFsdWU6IHNvdXJjZS51cml9KTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKHRoaXNbXCJhdXRob3JpdHlcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5hdXRob3JpdHkuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1widXJpXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMudXJpLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQ29uc2VudFZlcmlmaWNhdGlvbiB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBDb25zZW50VmVyaWZpY2F0aW9uQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogSGFzIHRoZSBpbnN0cnVjdGlvbiBiZWVuIHZlcmlmaWVkLlxyXG4gICAqL1xyXG4gIHZlcmlmaWVkOiBmaGlyLkZoaXJCb29sZWFufGJvb2xlYW58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFdobyB2ZXJpZmllZCB0aGUgaW5zdHJ1Y3Rpb24gKFBhdGllbnQsIFJlbGF0aXZlIG9yIG90aGVyIEF1dGhvcml6ZWQgUGVyc29uKS5cclxuICAgKi9cclxuICB2ZXJpZmllZFdpdGg/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERhdGUgdmVyaWZpY2F0aW9uIHdhcyBjb2xsZWN0ZWQuXHJcbiAgICovXHJcbiAgdmVyaWZpY2F0aW9uRGF0ZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBXaGV0aGVyIGEgdHJlYXRtZW50IGluc3RydWN0aW9uIChlLmcuIGFydGlmaWNpYWwgcmVzcGlyYXRpb24geWVzIG9yIG5vKSB3YXMgdmVyaWZpZWQgd2l0aCB0aGUgcGF0aWVudCwgaGlzL2hlciBmYW1pbHkgb3IgYW5vdGhlciBhdXRob3JpemVkIHBlcnNvbi5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb25zZW50VmVyaWZpY2F0aW9uIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQ29uc2VudFZlcmlmaWNhdGlvbic7XHJcbiAgLyoqXHJcbiAgICogSGFzIHRoZSBpbnN0cnVjdGlvbiBiZWVuIHZlcmlmaWVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB2ZXJpZmllZDogZmhpci5GaGlyQm9vbGVhbnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFdobyB2ZXJpZmllZCB0aGUgaW5zdHJ1Y3Rpb24gKFBhdGllbnQsIFJlbGF0aXZlIG9yIG90aGVyIEF1dGhvcml6ZWQgUGVyc29uKS5cclxuICAgKi9cclxuICBwdWJsaWMgdmVyaWZpZWRXaXRoPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERhdGUgdmVyaWZpY2F0aW9uIHdhcyBjb2xsZWN0ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHZlcmlmaWNhdGlvbkRhdGU/OiBmaGlyLkZoaXJEYXRlVGltZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQ29uc2VudFZlcmlmaWNhdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENvbnNlbnRWZXJpZmljYXRpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsndmVyaWZpZWQnXSkgeyB0aGlzLnZlcmlmaWVkID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oe3ZhbHVlOiBzb3VyY2UudmVyaWZpZWR9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudmVyaWZpZWQgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWyd2ZXJpZmllZFdpdGgnXSkgeyB0aGlzLnZlcmlmaWVkV2l0aCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UudmVyaWZpZWRXaXRoKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndmVyaWZpY2F0aW9uRGF0ZSddKSB7IHRoaXMudmVyaWZpY2F0aW9uRGF0ZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS52ZXJpZmljYXRpb25EYXRlfSk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICghdGhpc1sndmVyaWZpZWQnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgdmVyaWZpZWQ6Zmhpci5GaGlyQm9vbGVhbiBmaGlyOiBDb25zZW50LnZlcmlmaWNhdGlvbi52ZXJpZmllZDpib29sZWFuJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1widmVyaWZpZWRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy52ZXJpZmllZC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJ2ZXJpZmllZFdpdGhcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy52ZXJpZmllZFdpdGguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1widmVyaWZpY2F0aW9uRGF0ZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnZlcmlmaWNhdGlvbkRhdGUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBDb25zZW50UHJvdmlzaW9uQWN0b3IgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29uc2VudFByb3Zpc2lvbkFjdG9yQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogSG93IHRoZSBpbmRpdmlkdWFsIGlzIGludm9sdmVkIGluIHRoZSByZXNvdXJjZXMgY29udGVudCB0aGF0IGlzIGRlc2NyaWJlZCBpbiB0aGUgZXhjZXB0aW9uLlxyXG4gICAqL1xyXG4gIHJvbGU6IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZXNvdXJjZSB0aGF0IGlkZW50aWZpZXMgdGhlIGFjdG9yLiBUbyBpZGVudGlmeSBhY3RvcnMgYnkgdHlwZSwgdXNlIGdyb3VwIHRvIGlkZW50aWZ5IGEgc2V0IG9mIGFjdG9ycyBieSBzb21lIHByb3BlcnR5IHRoZXkgc2hhcmUgKGUuZy4gJ2FkbWl0dGluZyBvZmZpY2VycycpLlxyXG4gICAqL1xyXG4gIHJlZmVyZW5jZTogZmhpci5SZWZlcmVuY2VBcmdzfG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBXaG8gb3Igd2hhdCBpcyBjb250cm9sbGVkIGJ5IHRoaXMgcnVsZS4gVXNlIGdyb3VwIHRvIGlkZW50aWZ5IGEgc2V0IG9mIGFjdG9ycyBieSBzb21lIHByb3BlcnR5IHRoZXkgc2hhcmUgKGUuZy4gJ2FkbWl0dGluZyBvZmZpY2VycycpLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENvbnNlbnRQcm92aXNpb25BY3RvciBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0NvbnNlbnRQcm92aXNpb25BY3Rvcic7XHJcbiAgLyoqXHJcbiAgICogSG93IHRoZSBpbmRpdmlkdWFsIGlzIGludm9sdmVkIGluIHRoZSByZXNvdXJjZXMgY29udGVudCB0aGF0IGlzIGRlc2NyaWJlZCBpbiB0aGUgZXhjZXB0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByb2xlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZXNvdXJjZSB0aGF0IGlkZW50aWZpZXMgdGhlIGFjdG9yLiBUbyBpZGVudGlmeSBhY3RvcnMgYnkgdHlwZSwgdXNlIGdyb3VwIHRvIGlkZW50aWZ5IGEgc2V0IG9mIGFjdG9ycyBieSBzb21lIHByb3BlcnR5IHRoZXkgc2hhcmUgKGUuZy4gJ2FkbWl0dGluZyBvZmZpY2VycycpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWZlcmVuY2U6IGZoaXIuUmVmZXJlbmNlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQ29uc2VudFByb3Zpc2lvbkFjdG9yIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8Q29uc2VudFByb3Zpc2lvbkFjdG9yQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3JvbGUnXSkgeyB0aGlzLnJvbGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnJvbGUpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yb2xlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVmZXJlbmNlJ10pIHsgdGhpcy5yZWZlcmVuY2UgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnJlZmVyZW5jZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnJlZmVyZW5jZSA9IG51bGw7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5zaWJsZS1ib3VuZCBWYWx1ZSBTZXQgZm9yIHJvbGUgKENvbnNlbnQucHJvdmlzaW9uLmFjdG9yLnJvbGUpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgcm9sZUV4dGVuc2libGVDb2RpbmdzKCkge1xyXG4gICAgcmV0dXJuIFNlY3VyaXR5Um9sZVR5cGVDb2RpbmdzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKCF0aGlzWydyb2xlJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHJvbGU6Zmhpci5Db2RlYWJsZUNvbmNlcHQgZmhpcjogQ29uc2VudC5wcm92aXNpb24uYWN0b3Iucm9sZTpDb2RlYWJsZUNvbmNlcHQnIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJyb2xlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucm9sZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKCF0aGlzWydyZWZlcmVuY2UnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgcmVmZXJlbmNlOmZoaXIuUmVmZXJlbmNlIGZoaXI6IENvbnNlbnQucHJvdmlzaW9uLmFjdG9yLnJlZmVyZW5jZTpSZWZlcmVuY2UnIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJyZWZlcmVuY2VcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5yZWZlcmVuY2UuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBDb25zZW50UHJvdmlzaW9uRGF0YSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBDb25zZW50UHJvdmlzaW9uRGF0YUFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEhvdyB0aGUgcmVzb3VyY2UgcmVmZXJlbmNlIGlzIGludGVycHJldGVkIHdoZW4gdGVzdGluZyBjb25zZW50IHJlc3RyaWN0aW9ucy5cclxuICAgKi9cclxuICBtZWFuaW5nOiBmaGlyLkZoaXJDb2RlPENvbnNlbnREYXRhTWVhbmluZ0NvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgcmVmZXJlbmNlIHRvIGEgc3BlY2lmaWMgcmVzb3VyY2UgdGhhdCBkZWZpbmVzIHdoaWNoIHJlc291cmNlcyBhcmUgY292ZXJlZCBieSB0aGlzIGNvbnNlbnQuXHJcbiAgICovXHJcbiAgcmVmZXJlbmNlOiBmaGlyLlJlZmVyZW5jZUFyZ3N8bnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSByZXNvdXJjZXMgY29udHJvbGxlZCBieSB0aGlzIHJ1bGUgaWYgc3BlY2lmaWMgcmVzb3VyY2VzIGFyZSByZWZlcmVuY2VkLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENvbnNlbnRQcm92aXNpb25EYXRhIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQ29uc2VudFByb3Zpc2lvbkRhdGEnO1xyXG4gIC8qKlxyXG4gICAqIEhvdyB0aGUgcmVzb3VyY2UgcmVmZXJlbmNlIGlzIGludGVycHJldGVkIHdoZW4gdGVzdGluZyBjb25zZW50IHJlc3RyaWN0aW9ucy5cclxuICAgKi9cclxuICBwdWJsaWMgbWVhbmluZzogZmhpci5GaGlyQ29kZTxDb25zZW50RGF0YU1lYW5pbmdDb2RlVHlwZT58bnVsbDtcclxuICAvKipcclxuICAgKiBBIHJlZmVyZW5jZSB0byBhIHNwZWNpZmljIHJlc291cmNlIHRoYXQgZGVmaW5lcyB3aGljaCByZXNvdXJjZXMgYXJlIGNvdmVyZWQgYnkgdGhpcyBjb25zZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWZlcmVuY2U6IGZoaXIuUmVmZXJlbmNlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQ29uc2VudFByb3Zpc2lvbkRhdGEgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxDb25zZW50UHJvdmlzaW9uRGF0YUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydtZWFuaW5nJ10pIHsgdGhpcy5tZWFuaW5nID0gbmV3IGZoaXIuRmhpckNvZGU8Q29uc2VudERhdGFNZWFuaW5nQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLm1lYW5pbmd9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubWVhbmluZyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3JlZmVyZW5jZSddKSB7IHRoaXMucmVmZXJlbmNlID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5yZWZlcmVuY2UpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZWZlcmVuY2UgPSBudWxsOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlcXVpcmVkLWJvdW5kIFZhbHVlIFNldCBmb3IgbWVhbmluZyAoQ29uc2VudC5wcm92aXNpb24uZGF0YS5tZWFuaW5nKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IG1lYW5pbmdSZXF1aXJlZENvZGVzKCkge1xyXG4gICAgcmV0dXJuIENvbnNlbnREYXRhTWVhbmluZ0NvZGVzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKCF0aGlzWydtZWFuaW5nJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IG1lYW5pbmc6Zmhpci5GaGlyQ29kZTxDb25zZW50RGF0YU1lYW5pbmdDb2RlVHlwZT4gZmhpcjogQ29uc2VudC5wcm92aXNpb24uZGF0YS5tZWFuaW5nOmNvZGUnIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbJ21lYW5pbmcnXSAmJiAoIU9iamVjdC52YWx1ZXMoQ29uc2VudERhdGFNZWFuaW5nQ29kZXMpLmluY2x1ZGVzKHRoaXMubWVhbmluZyBhcyBhbnkpKSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnY29kZS1pbnZhbGlkJywgZGlhZ25vc3RpY3M6ICdJbnZhbGlkIGNvZGUgcHJvcGVydHkgbWVhbmluZzpmaGlyLkZoaXJDb2RlPENvbnNlbnREYXRhTWVhbmluZ0NvZGVUeXBlPiBmaGlyOiBDb25zZW50LnByb3Zpc2lvbi5kYXRhLm1lYW5pbmc6Y29kZSBSZXF1aXJlZCBiaW5kaW5nIHRvOiBDb25zZW50RGF0YU1lYW5pbmcnIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJtZWFuaW5nXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMubWVhbmluZy5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKCF0aGlzWydyZWZlcmVuY2UnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgcmVmZXJlbmNlOmZoaXIuUmVmZXJlbmNlIGZoaXI6IENvbnNlbnQucHJvdmlzaW9uLmRhdGEucmVmZXJlbmNlOlJlZmVyZW5jZScgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInJlZmVyZW5jZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnJlZmVyZW5jZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIENvbnNlbnRQcm92aXNpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29uc2VudFByb3Zpc2lvbkFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEFjdGlvbiAgdG8gdGFrZSAtIHBlcm1pdCBvciBkZW55IC0gd2hlbiB0aGUgcnVsZSBjb25kaXRpb25zIGFyZSBtZXQuICBOb3QgcGVybWl0dGVkIGluIHJvb3QgcnVsZSwgcmVxdWlyZWQgaW4gYWxsIG5lc3RlZCBydWxlcy5cclxuICAgKi9cclxuICB0eXBlPzogZmhpci5GaGlyQ29kZTxDb25zZW50UHJvdmlzaW9uVHlwZUNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0aW1lZnJhbWUgaW4gdGhpcyBydWxlIGlzIHZhbGlkLlxyXG4gICAqL1xyXG4gIHBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogV2hvIG9yIHdoYXQgaXMgY29udHJvbGxlZCBieSB0aGlzIHJ1bGUuIFVzZSBncm91cCB0byBpZGVudGlmeSBhIHNldCBvZiBhY3RvcnMgYnkgc29tZSBwcm9wZXJ0eSB0aGV5IHNoYXJlIChlLmcuICdhZG1pdHRpbmcgb2ZmaWNlcnMnKS5cclxuICAgKi9cclxuICBhY3Rvcj86IGZoaXIuQ29uc2VudFByb3Zpc2lvbkFjdG9yQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBOb3RlIHRoYXQgdGhpcyBpcyB0aGUgZGlyZWN0IGFjdGlvbiAobm90IHRoZSBncm91bmRzIGZvciB0aGUgYWN0aW9uIGNvdmVyZWQgaW4gdGhlIHB1cnBvc2UgZWxlbWVudCkuIEF0IHByZXNlbnQsIHRoZSBvbmx5IGFjdGlvbiBpbiB0aGUgdW5kZXJzdG9vZCBhbmQgdGVzdGVkIHNjb3BlIG9mIHRoaXMgcmVzb3VyY2UgaXMgJ3JlYWQnLlxyXG4gICAqL1xyXG4gIGFjdGlvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiB0aGUgY29uc2VudCBzcGVjaWZpZXMgYSBzZWN1cml0eSBsYWJlbCBvZiBcIlJcIiB0aGVuIGl0IGFwcGxpZXMgdG8gYWxsIHJlc291cmNlcyB0aGF0IGFyZSBsYWJlbGVkIFwiUlwiIG9yIGxvd2VyLiBFLmcuIGZvciBDb25maWRlbnRpYWxpdHksIGl0J3MgYSBoaWdoIHdhdGVyIG1hcmsuIEZvciBvdGhlciBraW5kcyBvZiBzZWN1cml0eSBsYWJlbHMsIHN1YnN1bXB0aW9uIGxvZ2ljIGFwcGxpZXMuIFdoZW4gdGhlIHB1cnBvc2Ugb2YgdXNlIHRhZyBpcyBvbiB0aGUgZGF0YSwgYWNjZXNzIHJlcXVlc3QgcHVycG9zZSBvZiB1c2Ugc2hhbGwgbm90IGNvbmZsaWN0LlxyXG4gICAqL1xyXG4gIHNlY3VyaXR5TGFiZWw/OiBmaGlyLkNvZGluZ0FyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogV2hlbiB0aGUgcHVycG9zZSBvZiB1c2UgdGFnIGlzIG9uIHRoZSBkYXRhLCBhY2Nlc3MgcmVxdWVzdCBwdXJwb3NlIG9mIHVzZSBzaGFsbCBub3QgY29uZmxpY3QuXHJcbiAgICovXHJcbiAgcHVycG9zZT86IGZoaXIuQ29kaW5nQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBNdWx0aXBsZSB0eXBlcyBhcmUgb3InZWQgdG9nZXRoZXIuIFRoZSBpbnRlbnRpb24gb2YgdGhlIGNvbnRlbnRUeXBlIGVsZW1lbnQgaXMgdGhhdCB0aGUgY29kZXMgcmVmZXIgdG8gcHJvZmlsZXMgb3IgZG9jdW1lbnQgdHlwZXMgZGVmaW5lZCBpbiBhIHN0YW5kYXJkIG9yIGFuIGltcGxlbWVudGF0aW9uIGd1aWRlIHNvbWV3aGVyZS5cclxuICAgKi9cclxuICBjbGFzcz86IGZoaXIuQ29kaW5nQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUeXBpY2FsIHVzZSBvZiB0aGlzIGlzIGEgRG9jdW1lbnQgY29kZSB3aXRoIGNsYXNzID0gQ0RBLlxyXG4gICAqL1xyXG4gIGNvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBoYXMgYSBkaWZmZXJlbnQgc2Vuc2UgdG8gdGhlIENvbnNlbnQucGVyaW9kIC0gdGhhdCBpcyB3aGVuIHRoZSBjb25zZW50IGFncmVlbWVudCBob2xkcy4gVGhpcyBpcyB0aGUgdGltZSBwZXJpb2Qgb2YgdGhlIGRhdGEgdGhhdCBpcyBjb250cm9sbGVkIGJ5IHRoZSBhZ3JlZW1lbnQuXHJcbiAgICovXHJcbiAgZGF0YVBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlc291cmNlcyBjb250cm9sbGVkIGJ5IHRoaXMgcnVsZSBpZiBzcGVjaWZpYyByZXNvdXJjZXMgYXJlIHJlZmVyZW5jZWQuXHJcbiAgICovXHJcbiAgZGF0YT86IGZoaXIuQ29uc2VudFByb3Zpc2lvbkRhdGFBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFJ1bGVzIHdoaWNoIHByb3ZpZGUgZXhjZXB0aW9ucyB0byB0aGUgYmFzZSBydWxlIG9yIHN1YnJ1bGVzLlxyXG4gICAqL1xyXG4gIHByb3Zpc2lvbj86IGZoaXIuQ29uc2VudFByb3Zpc2lvbkFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBbiBleGNlcHRpb24gdG8gdGhlIGJhc2UgcG9saWN5IG9mIHRoaXMgY29uc2VudC4gQW4gZXhjZXB0aW9uIGNhbiBiZSBhbiBhZGRpdGlvbiBvciByZW1vdmFsIG9mIGFjY2VzcyBwZXJtaXNzaW9ucy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb25zZW50UHJvdmlzaW9uIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQ29uc2VudFByb3Zpc2lvbic7XHJcbiAgLyoqXHJcbiAgICogQWN0aW9uICB0byB0YWtlIC0gcGVybWl0IG9yIGRlbnkgLSB3aGVuIHRoZSBydWxlIGNvbmRpdGlvbnMgYXJlIG1ldC4gIE5vdCBwZXJtaXR0ZWQgaW4gcm9vdCBydWxlLCByZXF1aXJlZCBpbiBhbGwgbmVzdGVkIHJ1bGVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0eXBlPzogZmhpci5GaGlyQ29kZTxDb25zZW50UHJvdmlzaW9uVHlwZUNvZGVUeXBlPnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRpbWVmcmFtZSBpbiB0aGlzIHJ1bGUgaXMgdmFsaWQuXHJcbiAgICovXHJcbiAgcHVibGljIHBlcmlvZD86IGZoaXIuUGVyaW9kfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBXaG8gb3Igd2hhdCBpcyBjb250cm9sbGVkIGJ5IHRoaXMgcnVsZS4gVXNlIGdyb3VwIHRvIGlkZW50aWZ5IGEgc2V0IG9mIGFjdG9ycyBieSBzb21lIHByb3BlcnR5IHRoZXkgc2hhcmUgKGUuZy4gJ2FkbWl0dGluZyBvZmZpY2VycycpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhY3RvcjogZmhpci5Db25zZW50UHJvdmlzaW9uQWN0b3JbXTtcclxuICAvKipcclxuICAgKiBOb3RlIHRoYXQgdGhpcyBpcyB0aGUgZGlyZWN0IGFjdGlvbiAobm90IHRoZSBncm91bmRzIGZvciB0aGUgYWN0aW9uIGNvdmVyZWQgaW4gdGhlIHB1cnBvc2UgZWxlbWVudCkuIEF0IHByZXNlbnQsIHRoZSBvbmx5IGFjdGlvbiBpbiB0aGUgdW5kZXJzdG9vZCBhbmQgdGVzdGVkIHNjb3BlIG9mIHRoaXMgcmVzb3VyY2UgaXMgJ3JlYWQnLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhY3Rpb246IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogSWYgdGhlIGNvbnNlbnQgc3BlY2lmaWVzIGEgc2VjdXJpdHkgbGFiZWwgb2YgXCJSXCIgdGhlbiBpdCBhcHBsaWVzIHRvIGFsbCByZXNvdXJjZXMgdGhhdCBhcmUgbGFiZWxlZCBcIlJcIiBvciBsb3dlci4gRS5nLiBmb3IgQ29uZmlkZW50aWFsaXR5LCBpdCdzIGEgaGlnaCB3YXRlciBtYXJrLiBGb3Igb3RoZXIga2luZHMgb2Ygc2VjdXJpdHkgbGFiZWxzLCBzdWJzdW1wdGlvbiBsb2dpYyBhcHBsaWVzLiBXaGVuIHRoZSBwdXJwb3NlIG9mIHVzZSB0YWcgaXMgb24gdGhlIGRhdGEsIGFjY2VzcyByZXF1ZXN0IHB1cnBvc2Ugb2YgdXNlIHNoYWxsIG5vdCBjb25mbGljdC5cclxuICAgKi9cclxuICBwdWJsaWMgc2VjdXJpdHlMYWJlbDogZmhpci5Db2RpbmdbXTtcclxuICAvKipcclxuICAgKiBXaGVuIHRoZSBwdXJwb3NlIG9mIHVzZSB0YWcgaXMgb24gdGhlIGRhdGEsIGFjY2VzcyByZXF1ZXN0IHB1cnBvc2Ugb2YgdXNlIHNoYWxsIG5vdCBjb25mbGljdC5cclxuICAgKi9cclxuICBwdWJsaWMgcHVycG9zZTogZmhpci5Db2RpbmdbXTtcclxuICAvKipcclxuICAgKiBNdWx0aXBsZSB0eXBlcyBhcmUgb3InZWQgdG9nZXRoZXIuIFRoZSBpbnRlbnRpb24gb2YgdGhlIGNvbnRlbnRUeXBlIGVsZW1lbnQgaXMgdGhhdCB0aGUgY29kZXMgcmVmZXIgdG8gcHJvZmlsZXMgb3IgZG9jdW1lbnQgdHlwZXMgZGVmaW5lZCBpbiBhIHN0YW5kYXJkIG9yIGFuIGltcGxlbWVudGF0aW9uIGd1aWRlIHNvbWV3aGVyZS5cclxuICAgKi9cclxuICBwdWJsaWMgY2xhc3M6IGZoaXIuQ29kaW5nW107XHJcbiAgLyoqXHJcbiAgICogVHlwaWNhbCB1c2Ugb2YgdGhpcyBpcyBhIERvY3VtZW50IGNvZGUgd2l0aCBjbGFzcyA9IENEQS5cclxuICAgKi9cclxuICBwdWJsaWMgY29kZTogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBUaGlzIGhhcyBhIGRpZmZlcmVudCBzZW5zZSB0byB0aGUgQ29uc2VudC5wZXJpb2QgLSB0aGF0IGlzIHdoZW4gdGhlIGNvbnNlbnQgYWdyZWVtZW50IGhvbGRzLiBUaGlzIGlzIHRoZSB0aW1lIHBlcmlvZCBvZiB0aGUgZGF0YSB0aGF0IGlzIGNvbnRyb2xsZWQgYnkgdGhlIGFncmVlbWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgZGF0YVBlcmlvZD86IGZoaXIuUGVyaW9kfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcmVzb3VyY2VzIGNvbnRyb2xsZWQgYnkgdGhpcyBydWxlIGlmIHNwZWNpZmljIHJlc291cmNlcyBhcmUgcmVmZXJlbmNlZC5cclxuICAgKi9cclxuICBwdWJsaWMgZGF0YTogZmhpci5Db25zZW50UHJvdmlzaW9uRGF0YVtdO1xyXG4gIC8qKlxyXG4gICAqIFJ1bGVzIHdoaWNoIHByb3ZpZGUgZXhjZXB0aW9ucyB0byB0aGUgYmFzZSBydWxlIG9yIHN1YnJ1bGVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcm92aXNpb246IGZoaXIuQ29uc2VudFByb3Zpc2lvbltdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIENvbnNlbnRQcm92aXNpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxDb25zZW50UHJvdmlzaW9uQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3R5cGUnXSkgeyB0aGlzLnR5cGUgPSBuZXcgZmhpci5GaGlyQ29kZTxDb25zZW50UHJvdmlzaW9uVHlwZUNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS50eXBlfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3BlcmlvZCddKSB7IHRoaXMucGVyaW9kID0gbmV3IGZoaXIuUGVyaW9kKHNvdXJjZS5wZXJpb2QpOyB9XHJcbiAgICBpZiAoc291cmNlWydhY3RvciddKSB7IHRoaXMuYWN0b3IgPSBzb3VyY2UuYWN0b3IubWFwKCh4KSA9PiBuZXcgZmhpci5Db25zZW50UHJvdmlzaW9uQWN0b3IoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5hY3RvciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydhY3Rpb24nXSkgeyB0aGlzLmFjdGlvbiA9IHNvdXJjZS5hY3Rpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5hY3Rpb24gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2VjdXJpdHlMYWJlbCddKSB7IHRoaXMuc2VjdXJpdHlMYWJlbCA9IHNvdXJjZS5zZWN1cml0eUxhYmVsLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kaW5nKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc2VjdXJpdHlMYWJlbCA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwdXJwb3NlJ10pIHsgdGhpcy5wdXJwb3NlID0gc291cmNlLnB1cnBvc2UubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RpbmcoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wdXJwb3NlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2NsYXNzJ10pIHsgdGhpcy5jbGFzcyA9IHNvdXJjZS5jbGFzcy5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGluZyh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNsYXNzID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvZGUnXSkgeyB0aGlzLmNvZGUgPSBzb3VyY2UuY29kZS5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvZGUgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGF0YVBlcmlvZCddKSB7IHRoaXMuZGF0YVBlcmlvZCA9IG5ldyBmaGlyLlBlcmlvZChzb3VyY2UuZGF0YVBlcmlvZCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2RhdGEnXSkgeyB0aGlzLmRhdGEgPSBzb3VyY2UuZGF0YS5tYXAoKHgpID0+IG5ldyBmaGlyLkNvbnNlbnRQcm92aXNpb25EYXRhKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZGF0YSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwcm92aXNpb24nXSkgeyB0aGlzLnByb3Zpc2lvbiA9IHNvdXJjZS5wcm92aXNpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5Db25zZW50UHJvdmlzaW9uKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucHJvdmlzaW9uID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZWQtYm91bmQgVmFsdWUgU2V0IGZvciB0eXBlIChDb25zZW50LnByb3Zpc2lvbi50eXBlKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IHR5cGVSZXF1aXJlZENvZGVzKCkge1xyXG4gICAgcmV0dXJuIENvbnNlbnRQcm92aXNpb25UeXBlQ29kZXM7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEV4dGVuc2libGUtYm91bmQgVmFsdWUgU2V0IGZvciBzZWN1cml0eUxhYmVsIChDb25zZW50LnByb3Zpc2lvbi5zZWN1cml0eUxhYmVsKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IHNlY3VyaXR5TGFiZWxFeHRlbnNpYmxlQ29kaW5ncygpIHtcclxuICAgIHJldHVybiBTZWN1cml0eUxhYmVsc0NvZGluZ3M7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEV4dGVuc2libGUtYm91bmQgVmFsdWUgU2V0IGZvciBwdXJwb3NlIChDb25zZW50LnByb3Zpc2lvbi5wdXJwb3NlKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IHB1cnBvc2VFeHRlbnNpYmxlQ29kaW5ncygpIHtcclxuICAgIHJldHVybiBWM1B1cnBvc2VPZlVzZUNvZGluZ3M7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEV4dGVuc2libGUtYm91bmQgVmFsdWUgU2V0IGZvciBjbGFzcyAoQ29uc2VudC5wcm92aXNpb24uY2xhc3MpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgY2xhc3NFeHRlbnNpYmxlQ29kaW5ncygpIHtcclxuICAgIHJldHVybiBDb25zZW50Q29udGVudENsYXNzQ29kaW5ncztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICh0aGlzWyd0eXBlJ10gJiYgKCFPYmplY3QudmFsdWVzKENvbnNlbnRQcm92aXNpb25UeXBlQ29kZXMpLmluY2x1ZGVzKHRoaXMudHlwZSBhcyBhbnkpKSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnY29kZS1pbnZhbGlkJywgZGlhZ25vc3RpY3M6ICdJbnZhbGlkIGNvZGUgcHJvcGVydHkgdHlwZT86Zmhpci5GaGlyQ29kZTxDb25zZW50UHJvdmlzaW9uVHlwZUNvZGVUeXBlPiBmaGlyOiBDb25zZW50LnByb3Zpc2lvbi50eXBlOmNvZGUgUmVxdWlyZWQgYmluZGluZyB0bzogQ29uc2VudFByb3Zpc2lvblR5cGUnIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJ0eXBlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMudHlwZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJwZXJpb2RcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5wZXJpb2QuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiYWN0b3JcIl0pIHsgdGhpcy5hY3Rvci5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wiYWN0aW9uXCJdKSB7IHRoaXMuYWN0aW9uLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJzZWN1cml0eUxhYmVsXCJdKSB7IHRoaXMuc2VjdXJpdHlMYWJlbC5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wicHVycG9zZVwiXSkgeyB0aGlzLnB1cnBvc2UuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImNsYXNzXCJdKSB7IHRoaXMuY2xhc3MuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImNvZGVcIl0pIHsgdGhpcy5jb2RlLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJkYXRhUGVyaW9kXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZGF0YVBlcmlvZC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJkYXRhXCJdKSB7IHRoaXMuZGF0YS5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wicHJvdmlzaW9uXCJdKSB7IHRoaXMucHJvdmlzaW9uLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIENvbnNlbnQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29uc2VudEFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIkNvbnNlbnRcInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpZGVudGlmaWVyIGlkZW50aWZpZXMgdGhpcyBjb3B5IG9mIHRoZSBjb25zZW50LiBXaGVyZSB0aGlzIGlkZW50aWZpZXIgaXMgYWxzbyB1c2VkIGVsc2V3aGVyZSBhcyB0aGUgaWRlbnRpZmllciBmb3IgYSBjb25zZW50IHJlY29yZCAoZS5nLiBhIENEQSBjb25zZW50IGRvY3VtZW50KSB0aGVuIHRoZSBjb25zZW50IGRldGFpbHMgYXJlIGV4cGVjdGVkIHRvIGJlIHRoZSBzYW1lLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgYmVjYXVzZSB0aGUgc3RhdHVzIGNvbnRhaW5zIHRoZSBjb2RlcyByZWplY3RlZCBhbmQgZW50ZXJlZC1pbi1lcnJvciB0aGF0IG1hcmsgdGhlIENvbnNlbnQgYXMgbm90IGN1cnJlbnRseSB2YWxpZC5cclxuICAgKi9cclxuICBzdGF0dXM6IGZoaXIuRmhpckNvZGU8Q29uc2VudFN0YXRlQ29kZXNDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHNlbGVjdG9yIG9mIHRoZSB0eXBlIG9mIGNvbnNlbnQgYmVpbmcgcHJlc2VudGVkOiBBRFIsIFByaXZhY3ksIFRyZWF0bWVudCwgUmVzZWFyY2guICBUaGlzIGxpc3QgaXMgbm93IGV4dGVuc2libGUuXHJcbiAgICovXHJcbiAgc2NvcGU6IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIEEgY2xhc3NpZmljYXRpb24gb2YgdGhlIHR5cGUgb2YgY29uc2VudHMgZm91bmQgaW4gdGhlIHN0YXRlbWVudC4gVGhpcyBlbGVtZW50IHN1cHBvcnRzIGluZGV4aW5nIGFuZCByZXRyaWV2YWwgb2YgY29uc2VudCBzdGF0ZW1lbnRzLlxyXG4gICAqL1xyXG4gIGNhdGVnb3J5OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIENvbW1vbmx5LCB0aGUgcGF0aWVudCB0aGUgY29uc2VudCBwZXJ0YWlucyB0byBpcyB0aGUgYXV0aG9yLCBidXQgZm9yIHlvdW5nIGFuZCBvbGQgcGVvcGxlLCBpdCBtYXkgYmUgc29tZSBvdGhlciBwZXJzb24uXHJcbiAgICovXHJcbiAgcGF0aWVudD86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBub3QgdGhlIHRpbWUgb2YgdGhlIG9yaWdpbmFsIGNvbnNlbnQsIGJ1dCB0aGUgdGltZSB0aGF0IHRoaXMgc3RhdGVtZW50IHdhcyBtYWRlIG9yIGRlcml2ZWQuXHJcbiAgICovXHJcbiAgZGF0ZVRpbWU/OiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENvbW1vbmx5LCB0aGUgcGF0aWVudCB0aGUgY29uc2VudCBwZXJ0YWlucyB0byBpcyB0aGUgY29uc2VudG9yLCBidXQgcGFydGljdWxhcmx5IGZvciB5b3VuZyBhbmQgb2xkIHBlb3BsZSwgaXQgbWF5IGJlIHNvbWUgb3RoZXIgcGVyc29uIC0gZS5nLiBhIGxlZ2FsIGd1YXJkaWFuLlxyXG4gICAqL1xyXG4gIHBlcmZvcm1lcj86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgb3JnYW5pemF0aW9uIHRoYXQgbWFuYWdlcyB0aGUgY29uc2VudCwgYW5kIHRoZSBmcmFtZXdvcmsgd2l0aGluIHdoaWNoIGl0IGlzIGV4ZWN1dGVkLlxyXG4gICAqL1xyXG4gIG9yZ2FuaXphdGlvbj86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc291cmNlIGNhbiBiZSBjb250YWluZWQgaW5saW5lIChBdHRhY2htZW50KSwgcmVmZXJlbmNlZCBkaXJlY3RseSAoQ29uc2VudCksIHJlZmVyZW5jZWQgaW4gYSBjb25zZW50IHJlcG9zaXRvcnkgKERvY3VtZW50UmVmZXJlbmNlKSwgb3Igc2ltcGx5IGJ5IGFuIGlkZW50aWZpZXIgKElkZW50aWZpZXIpLCBlLmcuIGEgQ0RBIGRvY3VtZW50IGlkLlxyXG4gICAqL1xyXG4gIHNvdXJjZT86IGZoaXIuQXR0YWNobWVudHxmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNvdXJjZSBjYW4gYmUgY29udGFpbmVkIGlubGluZSAoQXR0YWNobWVudCksIHJlZmVyZW5jZWQgZGlyZWN0bHkgKENvbnNlbnQpLCByZWZlcmVuY2VkIGluIGEgY29uc2VudCByZXBvc2l0b3J5IChEb2N1bWVudFJlZmVyZW5jZSksIG9yIHNpbXBseSBieSBhbiBpZGVudGlmaWVyIChJZGVudGlmaWVyKSwgZS5nLiBhIENEQSBkb2N1bWVudCBpZC5cclxuICAgKi9cclxuICBzb3VyY2VBdHRhY2htZW50PzogZmhpci5BdHRhY2htZW50QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNvdXJjZSBjYW4gYmUgY29udGFpbmVkIGlubGluZSAoQXR0YWNobWVudCksIHJlZmVyZW5jZWQgZGlyZWN0bHkgKENvbnNlbnQpLCByZWZlcmVuY2VkIGluIGEgY29uc2VudCByZXBvc2l0b3J5IChEb2N1bWVudFJlZmVyZW5jZSksIG9yIHNpbXBseSBieSBhbiBpZGVudGlmaWVyIChJZGVudGlmaWVyKSwgZS5nLiBhIENEQSBkb2N1bWVudCBpZC5cclxuICAgKi9cclxuICBzb3VyY2VSZWZlcmVuY2U/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZWZlcmVuY2VzIHRvIHRoZSBwb2xpY2llcyB0aGF0IGFyZSBpbmNsdWRlZCBpbiB0aGlzIGNvbnNlbnQgc2NvcGUuIFBvbGljaWVzIG1heSBiZSBvcmdhbml6YXRpb25hbCwgYnV0IGFyZSBvZnRlbiBkZWZpbmVkIGp1cmlzZGljdGlvbmFsbHksIG9yIGluIGxhdy5cclxuICAgKi9cclxuICBwb2xpY3k/OiBmaGlyLkNvbnNlbnRQb2xpY3lBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIHRoZSBwb2xpY3lSdWxlIGlzIGFic2VudCwgY29tcHV0YWJsZSBjb25zZW50IHdvdWxkIG5lZWQgdG8gYmUgY29uc3RydWN0ZWQgZnJvbSB0aGUgZWxlbWVudHMgb2YgdGhlIENvbnNlbnQgcmVzb3VyY2UuXHJcbiAgICovXHJcbiAgcG9saWN5UnVsZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogV2hldGhlciBhIHRyZWF0bWVudCBpbnN0cnVjdGlvbiAoZS5nLiBhcnRpZmljaWFsIHJlc3BpcmF0aW9uIHllcyBvciBubykgd2FzIHZlcmlmaWVkIHdpdGggdGhlIHBhdGllbnQsIGhpcy9oZXIgZmFtaWx5IG9yIGFub3RoZXIgYXV0aG9yaXplZCBwZXJzb24uXHJcbiAgICovXHJcbiAgdmVyaWZpY2F0aW9uPzogZmhpci5Db25zZW50VmVyaWZpY2F0aW9uQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBbiBleGNlcHRpb24gdG8gdGhlIGJhc2UgcG9saWN5IG9mIHRoaXMgY29uc2VudC4gQW4gZXhjZXB0aW9uIGNhbiBiZSBhbiBhZGRpdGlvbiBvciByZW1vdmFsIG9mIGFjY2VzcyBwZXJtaXNzaW9ucy5cclxuICAgKi9cclxuICBwcm92aXNpb24/OiBmaGlyLkNvbnNlbnRQcm92aXNpb25BcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgcmVjb3JkIG9mIGEgaGVhbHRoY2FyZSBjb25zdW1lcuKAmXMgIGNob2ljZXMsIHdoaWNoIHBlcm1pdHMgb3IgZGVuaWVzIGlkZW50aWZpZWQgcmVjaXBpZW50KHMpIG9yIHJlY2lwaWVudCByb2xlKHMpIHRvIHBlcmZvcm0gb25lIG9yIG1vcmUgYWN0aW9ucyB3aXRoaW4gYSBnaXZlbiBwb2xpY3kgY29udGV4dCwgZm9yIHNwZWNpZmljIHB1cnBvc2VzIGFuZCBwZXJpb2RzIG9mIHRpbWUuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29uc2VudCBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQ29uc2VudCc7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJDb25zZW50XCI7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpZGVudGlmaWVyIGlkZW50aWZpZXMgdGhpcyBjb3B5IG9mIHRoZSBjb25zZW50LiBXaGVyZSB0aGlzIGlkZW50aWZpZXIgaXMgYWxzbyB1c2VkIGVsc2V3aGVyZSBhcyB0aGUgaWRlbnRpZmllciBmb3IgYSBjb25zZW50IHJlY29yZCAoZS5nLiBhIENEQSBjb25zZW50IGRvY3VtZW50KSB0aGVuIHRoZSBjb25zZW50IGRldGFpbHMgYXJlIGV4cGVjdGVkIHRvIGJlIHRoZSBzYW1lLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyOiBmaGlyLklkZW50aWZpZXJbXTtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIGJlY2F1c2UgdGhlIHN0YXR1cyBjb250YWlucyB0aGUgY29kZXMgcmVqZWN0ZWQgYW5kIGVudGVyZWQtaW4tZXJyb3IgdGhhdCBtYXJrIHRoZSBDb25zZW50IGFzIG5vdCBjdXJyZW50bHkgdmFsaWQuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1czogZmhpci5GaGlyQ29kZTxDb25zZW50U3RhdGVDb2Rlc0NvZGVUeXBlPnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEEgc2VsZWN0b3Igb2YgdGhlIHR5cGUgb2YgY29uc2VudCBiZWluZyBwcmVzZW50ZWQ6IEFEUiwgUHJpdmFjeSwgVHJlYXRtZW50LCBSZXNlYXJjaC4gIFRoaXMgbGlzdCBpcyBub3cgZXh0ZW5zaWJsZS5cclxuICAgKi9cclxuICBwdWJsaWMgc2NvcGU6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogQSBjbGFzc2lmaWNhdGlvbiBvZiB0aGUgdHlwZSBvZiBjb25zZW50cyBmb3VuZCBpbiB0aGUgc3RhdGVtZW50LiBUaGlzIGVsZW1lbnQgc3VwcG9ydHMgaW5kZXhpbmcgYW5kIHJldHJpZXZhbCBvZiBjb25zZW50IHN0YXRlbWVudHMuXHJcbiAgICovXHJcbiAgcHVibGljIGNhdGVnb3J5OiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIENvbW1vbmx5LCB0aGUgcGF0aWVudCB0aGUgY29uc2VudCBwZXJ0YWlucyB0byBpcyB0aGUgYXV0aG9yLCBidXQgZm9yIHlvdW5nIGFuZCBvbGQgcGVvcGxlLCBpdCBtYXkgYmUgc29tZSBvdGhlciBwZXJzb24uXHJcbiAgICovXHJcbiAgcHVibGljIHBhdGllbnQ/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBub3QgdGhlIHRpbWUgb2YgdGhlIG9yaWdpbmFsIGNvbnNlbnQsIGJ1dCB0aGUgdGltZSB0aGF0IHRoaXMgc3RhdGVtZW50IHdhcyBtYWRlIG9yIGRlcml2ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGRhdGVUaW1lPzogZmhpci5GaGlyRGF0ZVRpbWV8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENvbW1vbmx5LCB0aGUgcGF0aWVudCB0aGUgY29uc2VudCBwZXJ0YWlucyB0byBpcyB0aGUgY29uc2VudG9yLCBidXQgcGFydGljdWxhcmx5IGZvciB5b3VuZyBhbmQgb2xkIHBlb3BsZSwgaXQgbWF5IGJlIHNvbWUgb3RoZXIgcGVyc29uIC0gZS5nLiBhIGxlZ2FsIGd1YXJkaWFuLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwZXJmb3JtZXI6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogVGhlIG9yZ2FuaXphdGlvbiB0aGF0IG1hbmFnZXMgdGhlIGNvbnNlbnQsIGFuZCB0aGUgZnJhbWV3b3JrIHdpdGhpbiB3aGljaCBpdCBpcyBleGVjdXRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgb3JnYW5pemF0aW9uOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzb3VyY2UgY2FuIGJlIGNvbnRhaW5lZCBpbmxpbmUgKEF0dGFjaG1lbnQpLCByZWZlcmVuY2VkIGRpcmVjdGx5IChDb25zZW50KSwgcmVmZXJlbmNlZCBpbiBhIGNvbnNlbnQgcmVwb3NpdG9yeSAoRG9jdW1lbnRSZWZlcmVuY2UpLCBvciBzaW1wbHkgYnkgYW4gaWRlbnRpZmllciAoSWRlbnRpZmllciksIGUuZy4gYSBDREEgZG9jdW1lbnQgaWQuXHJcbiAgICovXHJcbiAgcHVibGljIHNvdXJjZT86IChmaGlyLkF0dGFjaG1lbnR8Zmhpci5SZWZlcmVuY2UpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IENvbnNlbnQuc291cmNlW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX3NvdXJjZUlzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZWZlcmVuY2VzIHRvIHRoZSBwb2xpY2llcyB0aGF0IGFyZSBpbmNsdWRlZCBpbiB0aGlzIGNvbnNlbnQgc2NvcGUuIFBvbGljaWVzIG1heSBiZSBvcmdhbml6YXRpb25hbCwgYnV0IGFyZSBvZnRlbiBkZWZpbmVkIGp1cmlzZGljdGlvbmFsbHksIG9yIGluIGxhdy5cclxuICAgKi9cclxuICBwdWJsaWMgcG9saWN5OiBmaGlyLkNvbnNlbnRQb2xpY3lbXTtcclxuICAvKipcclxuICAgKiBJZiB0aGUgcG9saWN5UnVsZSBpcyBhYnNlbnQsIGNvbXB1dGFibGUgY29uc2VudCB3b3VsZCBuZWVkIHRvIGJlIGNvbnN0cnVjdGVkIGZyb20gdGhlIGVsZW1lbnRzIG9mIHRoZSBDb25zZW50IHJlc291cmNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwb2xpY3lSdWxlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFdoZXRoZXIgYSB0cmVhdG1lbnQgaW5zdHJ1Y3Rpb24gKGUuZy4gYXJ0aWZpY2lhbCByZXNwaXJhdGlvbiB5ZXMgb3Igbm8pIHdhcyB2ZXJpZmllZCB3aXRoIHRoZSBwYXRpZW50LCBoaXMvaGVyIGZhbWlseSBvciBhbm90aGVyIGF1dGhvcml6ZWQgcGVyc29uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB2ZXJpZmljYXRpb246IGZoaXIuQ29uc2VudFZlcmlmaWNhdGlvbltdO1xyXG4gIC8qKlxyXG4gICAqIEFuIGV4Y2VwdGlvbiB0byB0aGUgYmFzZSBwb2xpY3kgb2YgdGhpcyBjb25zZW50LiBBbiBleGNlcHRpb24gY2FuIGJlIGFuIGFkZGl0aW9uIG9yIHJlbW92YWwgb2YgYWNjZXNzIHBlcm1pc3Npb25zLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcm92aXNpb24/OiBmaGlyLkNvbnNlbnRQcm92aXNpb258dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIENvbnNlbnQgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxDb25zZW50QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ0NvbnNlbnQnO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IHNvdXJjZS5pZGVudGlmaWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuSWRlbnRpZmllcih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmlkZW50aWZpZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RhdHVzJ10pIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxDb25zZW50U3RhdGVDb2Rlc0NvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5zdGF0dXN9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2NvcGUnXSkgeyB0aGlzLnNjb3BlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5zY29wZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnNjb3BlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY2F0ZWdvcnknXSkgeyB0aGlzLmNhdGVnb3J5ID0gc291cmNlLmNhdGVnb3J5Lm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY2F0ZWdvcnkgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncGF0aWVudCddKSB7IHRoaXMucGF0aWVudCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UucGF0aWVudCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2RhdGVUaW1lJ10pIHsgdGhpcy5kYXRlVGltZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5kYXRlVGltZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydwZXJmb3JtZXInXSkgeyB0aGlzLnBlcmZvcm1lciA9IHNvdXJjZS5wZXJmb3JtZXIubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wZXJmb3JtZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnb3JnYW5pemF0aW9uJ10pIHsgdGhpcy5vcmdhbml6YXRpb24gPSBzb3VyY2Uub3JnYW5pemF0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMub3JnYW5pemF0aW9uID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3NvdXJjZSddKSB7IHRoaXMuc291cmNlID0gc291cmNlLnNvdXJjZTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydzb3VyY2VBdHRhY2htZW50J10pIHsgdGhpcy5zb3VyY2UgPSBuZXcgZmhpci5BdHRhY2htZW50KHNvdXJjZS5zb3VyY2VBdHRhY2htZW50KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydzb3VyY2VSZWZlcmVuY2UnXSkgeyB0aGlzLnNvdXJjZSA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2Uuc291cmNlUmVmZXJlbmNlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncG9saWN5J10pIHsgdGhpcy5wb2xpY3kgPSBzb3VyY2UucG9saWN5Lm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29uc2VudFBvbGljeSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnBvbGljeSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwb2xpY3lSdWxlJ10pIHsgdGhpcy5wb2xpY3lSdWxlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5wb2xpY3lSdWxlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndmVyaWZpY2F0aW9uJ10pIHsgdGhpcy52ZXJpZmljYXRpb24gPSBzb3VyY2UudmVyaWZpY2F0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29uc2VudFZlcmlmaWNhdGlvbih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnZlcmlmaWNhdGlvbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwcm92aXNpb24nXSkgeyB0aGlzLnByb3Zpc2lvbiA9IG5ldyBmaGlyLkNvbnNlbnRQcm92aXNpb24oc291cmNlLnByb3Zpc2lvbik7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZWQtYm91bmQgVmFsdWUgU2V0IGZvciBzdGF0dXMgKENvbnNlbnQuc3RhdHVzKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IHN0YXR1c1JlcXVpcmVkQ29kZXMoKSB7XHJcbiAgICByZXR1cm4gQ29uc2VudFN0YXRlQ29kZXNDb2RlcztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5zaWJsZS1ib3VuZCBWYWx1ZSBTZXQgZm9yIHNjb3BlIChDb25zZW50LnNjb3BlKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IHNjb3BlRXh0ZW5zaWJsZUNvZGluZ3MoKSB7XHJcbiAgICByZXR1cm4gQ29uc2VudFNjb3BlQ29kaW5ncztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5zaWJsZS1ib3VuZCBWYWx1ZSBTZXQgZm9yIGNhdGVnb3J5IChDb25zZW50LmNhdGVnb3J5KVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IGNhdGVnb3J5RXh0ZW5zaWJsZUNvZGluZ3MoKSB7XHJcbiAgICByZXR1cm4gQ29uc2VudENhdGVnb3J5Q29kaW5ncztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5zaWJsZS1ib3VuZCBWYWx1ZSBTZXQgZm9yIHBvbGljeVJ1bGUgKENvbnNlbnQucG9saWN5UnVsZSlcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCBwb2xpY3lSdWxlRXh0ZW5zaWJsZUNvZGluZ3MoKSB7XHJcbiAgICByZXR1cm4gQ29uc2VudFBvbGljeUNvZGluZ3M7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAoIXRoaXNbJ3Jlc291cmNlVHlwZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSByZXNvdXJjZVR5cGU6XCJDb25zZW50XCIgZmhpcjogQ29uc2VudC5yZXNvdXJjZVR5cGU6XCJDb25zZW50XCInIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJpZGVudGlmaWVyXCJdKSB7IHRoaXMuaWRlbnRpZmllci5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICghdGhpc1snc3RhdHVzJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHN0YXR1czpmaGlyLkZoaXJDb2RlPENvbnNlbnRTdGF0ZUNvZGVzQ29kZVR5cGU+IGZoaXI6IENvbnNlbnQuc3RhdHVzOmNvZGUnIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbJ3N0YXR1cyddICYmICghT2JqZWN0LnZhbHVlcyhDb25zZW50U3RhdGVDb2Rlc0NvZGVzKS5pbmNsdWRlcyh0aGlzLnN0YXR1cyBhcyBhbnkpKSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnY29kZS1pbnZhbGlkJywgZGlhZ25vc3RpY3M6ICdJbnZhbGlkIGNvZGUgcHJvcGVydHkgc3RhdHVzOmZoaXIuRmhpckNvZGU8Q29uc2VudFN0YXRlQ29kZXNDb2RlVHlwZT4gZmhpcjogQ29uc2VudC5zdGF0dXM6Y29kZSBSZXF1aXJlZCBiaW5kaW5nIHRvOiBDb25zZW50U3RhdGVDb2RlcycgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInN0YXR1c1wiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnN0YXR1cy5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKCF0aGlzWydzY29wZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBzY29wZTpmaGlyLkNvZGVhYmxlQ29uY2VwdCBmaGlyOiBDb25zZW50LnNjb3BlOkNvZGVhYmxlQ29uY2VwdCcgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInNjb3BlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc2NvcGUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICghdGhpc1snY2F0ZWdvcnknXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgY2F0ZWdvcnk6Zmhpci5Db2RlYWJsZUNvbmNlcHRbXSBmaGlyOiBDb25zZW50LmNhdGVnb3J5OkNvZGVhYmxlQ29uY2VwdCcgfSk7XHJcbiAgICB9IGVsc2UgaWYgKCFBcnJheS5pc0FycmF5KHRoaXMuY2F0ZWdvcnkpKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdzdHJ1Y3R1cmUnLCBkaWFnbm9zdGljczogJ0ZvdW5kIHNjYWxhciBpbiBhcnJheSBwcm9wZXJ0eSBjYXRlZ29yeTpmaGlyLkNvZGVhYmxlQ29uY2VwdFtdIGZoaXI6IENvbnNlbnQuY2F0ZWdvcnk6Q29kZWFibGVDb25jZXB0JyB9KTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5jYXRlZ29yeS5sZW5ndGggPT09IDApIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IGNhdGVnb3J5OmZoaXIuQ29kZWFibGVDb25jZXB0W10gZmhpcjogQ29uc2VudC5jYXRlZ29yeTpDb2RlYWJsZUNvbmNlcHQnIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJjYXRlZ29yeVwiXSkgeyB0aGlzLmNhdGVnb3J5LmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJwYXRpZW50XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucGF0aWVudC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJkYXRlVGltZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmRhdGVUaW1lLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInBlcmZvcm1lclwiXSkgeyB0aGlzLnBlcmZvcm1lci5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wib3JnYW5pemF0aW9uXCJdKSB7IHRoaXMub3JnYW5pemF0aW9uLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJwb2xpY3lcIl0pIHsgdGhpcy5wb2xpY3kuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcInBvbGljeVJ1bGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5wb2xpY3lSdWxlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInZlcmlmaWNhdGlvblwiXSkgeyB0aGlzLnZlcmlmaWNhdGlvbi5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wicHJvdmlzaW9uXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucHJvdmlzaW9uLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=