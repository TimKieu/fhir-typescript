// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: Composition
import * as fhir from '../fhir.js';
// @ts-ignore
import { CompositionAttestationModeCodes } from '../fhirValueSets/CompositionAttestationModeCodes.js';
// @ts-ignore
import { DocumentRelationshipTypeCodes } from '../fhirValueSets/DocumentRelationshipTypeCodes.js';
// @ts-ignore
import { ListModeCodes } from '../fhirValueSets/ListModeCodes.js';
// @ts-ignore
import { ListOrderCodings, } from '../fhirValueSets/ListOrderCodings.js';
// @ts-ignore
import { ListEmptyReasonCodings, } from '../fhirValueSets/ListEmptyReasonCodings.js';
// @ts-ignore
import { CompositionStatusCodes } from '../fhirValueSets/CompositionStatusCodes.js';
// @ts-ignore
import { DocTypeCodings, } from '../fhirValueSets/DocTypeCodings.js';
// @ts-ignore
import { V3ConfidentialityClassificationCodes } from '../fhirValueSets/V3ConfidentialityClassificationCodes.js';
/**
 * Only list each attester once.
 */
export class CompositionAttester extends fhir.BackboneElement {
    /**
     * Default constructor for CompositionAttester - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['mode']) {
            this.mode = new fhir.FhirCode({ value: source.mode });
        }
        else {
            this.mode = null;
        }
        if (source['_mode']) {
            if (this.mode) {
                this.mode.addExtendedProperties(source._mode);
            }
            else {
                this.mode = new fhir.FhirCode(source._mode);
            }
        }
        if (source['time']) {
            this.time = new fhir.FhirDateTime({ value: source.time });
        }
        if (source['_time']) {
            if (this.time) {
                this.time.addExtendedProperties(source._time);
            }
            else {
                this.time = new fhir.FhirDateTime(source._time);
            }
        }
        if (source['party']) {
            this.party = new fhir.Reference(source.party);
        }
    }
    /**
     * Required-bound Value Set for mode (Composition.attester.mode)
     */
    static get modeRequiredCodes() {
        return CompositionAttestationModeCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'Composition.attester';
        }
        if (!this['mode']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property mode fhir: Composition.attester.mode:code', expression: [expression] });
        }
        if (this['mode'] && (!Object.values(CompositionAttestationModeCodes).includes(this.mode.value))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property mode fhir: Composition.attester.mode:code Required binding to: CompositionAttestationMode', expression: [expression] });
        }
        if (this["mode"]) {
            issues.push(...this.mode.doModelValidation(expression + '.mode'));
        }
        if (this["time"]) {
            issues.push(...this.time.doModelValidation(expression + '.time'));
        }
        if (this["party"]) {
            issues.push(...this.party.doModelValidation(expression + '.party'));
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
CompositionAttester._fts_dataType = 'CompositionAttester';
/**
 * A document is a version specific composition.
 */
export class CompositionRelatesTo extends fhir.BackboneElement {
    /**
     * Default constructor for CompositionRelatesTo - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.FhirCode({ value: source.code });
        }
        else {
            this.code = null;
        }
        if (source['_code']) {
            if (this.code) {
                this.code.addExtendedProperties(source._code);
            }
            else {
                this.code = new fhir.FhirCode(source._code);
            }
        }
        if (source['target']) {
            this.target = source.target;
        }
        else if (source['targetIdentifier']) {
            this.target = new fhir.Identifier(source.targetIdentifier);
        }
        else if (source['targetReference']) {
            this.target = new fhir.Reference(source.targetReference);
        }
        else {
            this.target = null;
        }
    }
    /**
     * Required-bound Value Set for code (Composition.relatesTo.code)
     */
    static get codeRequiredCodes() {
        return DocumentRelationshipTypeCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'Composition.relatesTo';
        }
        if (!this['code']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property code fhir: Composition.relatesTo.code:code', expression: [expression] });
        }
        if (this['code'] && (!Object.values(DocumentRelationshipTypeCodes).includes(this.code.value))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property code fhir: Composition.relatesTo.code:code Required binding to: DocumentRelationshipType', expression: [expression] });
        }
        if (this["code"]) {
            issues.push(...this.code.doModelValidation(expression + '.code'));
        }
        if (!this['target']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property target fhir: Composition.relatesTo.target[x]:', expression: [expression] });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
CompositionRelatesTo._fts_dataType = 'CompositionRelatesTo';
/**
 * Internal flag to properly serialize choice-type element Composition.relatesTo.target[x]
 */
CompositionRelatesTo._fts_targetIsChoice = true;
/**
 * The event needs to be consistent with the type element, though can provide further information if desired.
 */
export class CompositionEvent extends fhir.BackboneElement {
    /**
     * Default constructor for CompositionEvent - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = source.code.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.code = [];
        }
        if (source['period']) {
            this.period = new fhir.Period(source.period);
        }
        if (source['detail']) {
            this.detail = source.detail.map((x) => new fhir.Reference(x));
        }
        else {
            this.detail = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'Composition.event';
        }
        if (this["code"]) {
            this.code.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.code[${i}]`)); });
        }
        if (this["period"]) {
            issues.push(...this.period.doModelValidation(expression + '.period'));
        }
        if (this["detail"]) {
            this.detail.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.detail[${i}]`)); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
CompositionEvent._fts_dataType = 'CompositionEvent';
/**
 * The root of the sections that make up the composition.
 */
export class CompositionSection extends fhir.BackboneElement {
    /**
     * Default constructor for CompositionSection - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['title']) {
            this.title = new fhir.FhirString({ value: source.title });
        }
        if (source['_title']) {
            if (this.title) {
                this.title.addExtendedProperties(source._title);
            }
            else {
                this.title = new fhir.FhirString(source._title);
            }
        }
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        if (source['author']) {
            this.author = source.author.map((x) => new fhir.Reference(x));
        }
        else {
            this.author = [];
        }
        if (source['focus']) {
            this.focus = new fhir.Reference(source.focus);
        }
        if (source['text']) {
            this.text = new fhir.Narrative(source.text);
        }
        if (source['mode']) {
            this.mode = new fhir.FhirCode({ value: source.mode });
        }
        if (source['_mode']) {
            if (this.mode) {
                this.mode.addExtendedProperties(source._mode);
            }
            else {
                this.mode = new fhir.FhirCode(source._mode);
            }
        }
        if (source['orderedBy']) {
            this.orderedBy = new fhir.CodeableConcept(source.orderedBy);
        }
        if (source['entry']) {
            this.entry = source.entry.map((x) => new fhir.Reference(x));
        }
        else {
            this.entry = [];
        }
        if (source['emptyReason']) {
            this.emptyReason = new fhir.CodeableConcept(source.emptyReason);
        }
        if (source['section']) {
            this.section = source.section.map((x) => new fhir.CompositionSection(x));
        }
        else {
            this.section = [];
        }
    }
    /**
     * Required-bound Value Set for mode (Composition.section.mode)
     */
    static get modeRequiredCodes() {
        return ListModeCodes;
    }
    /**
     * Preferred-bound Value Set for orderedBy (Composition.section.orderedBy)
     */
    static get orderedByPreferredCodings() {
        return ListOrderCodings;
    }
    /**
     * Preferred-bound Value Set for emptyReason (Composition.section.emptyReason)
     */
    static get emptyReasonPreferredCodings() {
        return ListEmptyReasonCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'Composition.section';
        }
        if (this["title"]) {
            issues.push(...this.title.doModelValidation(expression + '.title'));
        }
        if (this["code"]) {
            issues.push(...this.code.doModelValidation(expression + '.code'));
        }
        if (this["author"]) {
            this.author.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.author[${i}]`)); });
        }
        if (this["focus"]) {
            issues.push(...this.focus.doModelValidation(expression + '.focus'));
        }
        if (this["text"]) {
            issues.push(...this.text.doModelValidation(expression + '.text'));
        }
        if (this['mode'] && (!Object.values(ListModeCodes).includes(this.mode.value))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property mode fhir: Composition.section.mode:code Required binding to: ListMode', expression: [expression] });
        }
        if (this["mode"]) {
            issues.push(...this.mode.doModelValidation(expression + '.mode'));
        }
        if (this["orderedBy"]) {
            issues.push(...this.orderedBy.doModelValidation(expression + '.orderedBy'));
        }
        if (this["entry"]) {
            this.entry.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.entry[${i}]`)); });
        }
        if (this["emptyReason"]) {
            issues.push(...this.emptyReason.doModelValidation(expression + '.emptyReason'));
        }
        if (this["section"]) {
            this.section.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.section[${i}]`)); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
CompositionSection._fts_dataType = 'CompositionSection';
/**
 * A set of healthcare-related information that is assembled together into a single logical package that provides a single coherent statement of meaning, establishes its own context and that has clinical attestation with regard to who is making the statement. A Composition defines the structure and narrative content necessary for a document. However, a Composition alone does not constitute a document. Rather, the Composition must be the first entry in a Bundle where Bundle.type=document, and any other resources referenced from Composition must be included as subsequent entries in the Bundle (for example Patient, Practitioner, Encounter, etc.).
 */
export class Composition extends fhir.DomainResource {
    /**
     * Default constructor for Composition - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'Composition';
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier);
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type);
        }
        else {
            this.type = null;
        }
        if (source['category']) {
            this.category = source.category.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.category = [];
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject);
        }
        if (source['encounter']) {
            this.encounter = new fhir.Reference(source.encounter);
        }
        if (source['date']) {
            this.date = new fhir.FhirDateTime({ value: source.date });
        }
        else {
            this.date = null;
        }
        if (source['_date']) {
            if (this.date) {
                this.date.addExtendedProperties(source._date);
            }
            else {
                this.date = new fhir.FhirDateTime(source._date);
            }
        }
        if (source['author']) {
            this.author = source.author.map((x) => new fhir.Reference(x));
        }
        else {
            this.author = [];
        }
        if (source['title']) {
            this.title = new fhir.FhirString({ value: source.title });
        }
        else {
            this.title = null;
        }
        if (source['_title']) {
            if (this.title) {
                this.title.addExtendedProperties(source._title);
            }
            else {
                this.title = new fhir.FhirString(source._title);
            }
        }
        if (source['confidentiality']) {
            this.confidentiality = new fhir.FhirCode({ value: source.confidentiality });
        }
        if (source['_confidentiality']) {
            if (this.confidentiality) {
                this.confidentiality.addExtendedProperties(source._confidentiality);
            }
            else {
                this.confidentiality = new fhir.FhirCode(source._confidentiality);
            }
        }
        if (source['attester']) {
            this.attester = source.attester.map((x) => new fhir.CompositionAttester(x));
        }
        else {
            this.attester = [];
        }
        if (source['custodian']) {
            this.custodian = new fhir.Reference(source.custodian);
        }
        if (source['relatesTo']) {
            this.relatesTo = source.relatesTo.map((x) => new fhir.CompositionRelatesTo(x));
        }
        else {
            this.relatesTo = [];
        }
        if (source['event']) {
            this.event = source.event.map((x) => new fhir.CompositionEvent(x));
        }
        else {
            this.event = [];
        }
        if (source['section']) {
            this.section = source.section.map((x) => new fhir.CompositionSection(x));
        }
        else {
            this.section = [];
        }
    }
    /**
     * Required-bound Value Set for status (Composition.status)
     */
    static get statusRequiredCodes() {
        return CompositionStatusCodes;
    }
    /**
     * Preferred-bound Value Set for type (Composition.type)
     */
    static get typePreferredCodings() {
        return DocTypeCodings;
    }
    /**
     * Required-bound Value Set for confidentiality (Composition.confidentiality)
     */
    static get confidentialityRequiredCodes() {
        return V3ConfidentialityClassificationCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'Composition';
        }
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType fhir: Composition.resourceType:"Composition"', expression: [expression] });
        }
        if (this["identifier"]) {
            issues.push(...this.identifier.doModelValidation(expression + '.identifier'));
        }
        if (!this['status']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property status fhir: Composition.status:code', expression: [expression] });
        }
        if (this['status'] && (!Object.values(CompositionStatusCodes).includes(this.status.value))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property status fhir: Composition.status:code Required binding to: CompositionStatus', expression: [expression] });
        }
        if (this["status"]) {
            issues.push(...this.status.doModelValidation(expression + '.status'));
        }
        if (!this['type']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property type fhir: Composition.type:CodeableConcept', expression: [expression] });
        }
        if (this["type"]) {
            issues.push(...this.type.doModelValidation(expression + '.type'));
        }
        if (this["category"]) {
            this.category.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.category[${i}]`)); });
        }
        if (this["subject"]) {
            issues.push(...this.subject.doModelValidation(expression + '.subject'));
        }
        if (this["encounter"]) {
            issues.push(...this.encounter.doModelValidation(expression + '.encounter'));
        }
        if (!this['date']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property date fhir: Composition.date:dateTime', expression: [expression] });
        }
        if (this["date"]) {
            issues.push(...this.date.doModelValidation(expression + '.date'));
        }
        if (!this['author']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property author fhir: Composition.author:Reference', expression: [expression] });
        }
        else if (!Array.isArray(this.author)) {
            issues.push({ severity: 'error', code: 'structure', diagnostics: 'Found scalar in array property author fhir: Composition.author:Reference', expression: [expression] });
        }
        else if (this.author.length === 0) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property author fhir: Composition.author:Reference', expression: [expression] });
        }
        if (this["author"]) {
            this.author.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.author[${i}]`)); });
        }
        if (!this['title']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property title fhir: Composition.title:string', expression: [expression] });
        }
        if (this["title"]) {
            issues.push(...this.title.doModelValidation(expression + '.title'));
        }
        if (this['confidentiality'] && (!Object.values(V3ConfidentialityClassificationCodes).includes(this.confidentiality.value))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property confidentiality fhir: Composition.confidentiality:code Required binding to: V3ConfidentialityClassification', expression: [expression] });
        }
        if (this["confidentiality"]) {
            issues.push(...this.confidentiality.doModelValidation(expression + '.confidentiality'));
        }
        if (this["attester"]) {
            this.attester.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.attester[${i}]`)); });
        }
        if (this["custodian"]) {
            issues.push(...this.custodian.doModelValidation(expression + '.custodian'));
        }
        if (this["relatesTo"]) {
            this.relatesTo.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.relatesTo[${i}]`)); });
        }
        if (this["event"]) {
            this.event.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.event[${i}]`)); });
        }
        if (this["section"]) {
            this.section.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.section[${i}]`)); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
Composition._fts_dataType = 'Composition';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29tcG9zaXRpb24uanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL0NvbXBvc2l0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQiwrQ0FBK0M7QUFDL0Msa0NBQWtDO0FBQ2xDLDZCQUE2QjtBQUU3QixPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQUluQyxhQUFhO0FBQ2IsT0FBTyxFQUFFLCtCQUErQixFQUF1QyxNQUFNLHFEQUFxRCxDQUFDO0FBRzNJLGFBQWE7QUFDYixPQUFPLEVBQUUsNkJBQTZCLEVBQXFDLE1BQU0sbURBQW1ELENBQUM7QUFXckksYUFBYTtBQUNiLE9BQU8sRUFBRSxhQUFhLEVBQXFCLE1BQU0sbUNBQW1DLENBQUM7QUFDckYsYUFBYTtBQUNiLE9BQU8sRUFBRSxnQkFBZ0IsR0FBdUIsTUFBTSxzQ0FBc0MsQ0FBQztBQUc3RixhQUFhO0FBQ2IsT0FBTyxFQUFFLHNCQUFzQixHQUE2QixNQUFNLDRDQUE0QyxDQUFDO0FBSy9HLGFBQWE7QUFDYixPQUFPLEVBQUUsc0JBQXNCLEVBQThCLE1BQU0sNENBQTRDLENBQUM7QUFDaEgsYUFBYTtBQUNiLE9BQU8sRUFBRSxjQUFjLEdBQXFCLE1BQU0sb0NBQW9DLENBQUM7QUFTdkYsYUFBYTtBQUNiLE9BQU8sRUFBRSxvQ0FBb0MsRUFBNEMsTUFBTSwwREFBMEQsQ0FBQztBQTJCMUo7O0dBRUc7QUFDSCxNQUFNLE9BQU8sbUJBQW9CLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFpQjNEOztPQUVHO0lBQ0gsWUFBWSxTQUEwQyxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUNoRyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQXFDLEVBQUMsS0FBSyxFQUFFLE1BQU0s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Q0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQUU7UUFDbkksSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLENBQUMsVUFBVSxHQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7U0FBRTtRQUN2SCxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLEdBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtTQUFFO1FBQzdILE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBekxEOztHQUVHO0FBQzZCLHlCQUFhLEdBQVUsYUFBYSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0LmNvcmUgdmVyc2lvbjogNC4wLjFcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBDb21wb3NpdGlvblxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29tcG9zaXRpb25BdHRlc3RhdGlvbk1vZGVDb2RpbmdzLCBDb21wb3NpdGlvbkF0dGVzdGF0aW9uTW9kZUNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbXBvc2l0aW9uQXR0ZXN0YXRpb25Nb2RlQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29tcG9zaXRpb25BdHRlc3RhdGlvbk1vZGVDb2RlcywgIENvbXBvc2l0aW9uQXR0ZXN0YXRpb25Nb2RlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbXBvc2l0aW9uQXR0ZXN0YXRpb25Nb2RlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IERvY3VtZW50UmVsYXRpb25zaGlwVHlwZUNvZGluZ3MsIERvY3VtZW50UmVsYXRpb25zaGlwVHlwZUNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0RvY3VtZW50UmVsYXRpb25zaGlwVHlwZUNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IERvY3VtZW50UmVsYXRpb25zaGlwVHlwZUNvZGVzLCAgRG9jdW1lbnRSZWxhdGlvbnNoaXBUeXBlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0RvY3VtZW50UmVsYXRpb25zaGlwVHlwZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBWM0FjdENvZGluZ3MsIFYzQWN0Q29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVjNBY3RDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBWM0FjdENvZGVzLCAgVjNBY3RDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVjNBY3RDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRG9jU2VjdGlvbkNvZGluZ3MsIERvY1NlY3Rpb25Db2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Eb2NTZWN0aW9uQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRG9jU2VjdGlvbkNvZGVzLCAgRG9jU2VjdGlvbkNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Eb2NTZWN0aW9uQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IExpc3RNb2RlQ29kaW5ncywgTGlzdE1vZGVDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9MaXN0TW9kZUNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IExpc3RNb2RlQ29kZXMsICBMaXN0TW9kZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9MaXN0TW9kZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBMaXN0T3JkZXJDb2RpbmdzLCBMaXN0T3JkZXJDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9MaXN0T3JkZXJDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBMaXN0T3JkZXJDb2RlcywgIExpc3RPcmRlckNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9MaXN0T3JkZXJDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTGlzdEVtcHR5UmVhc29uQ29kaW5ncywgTGlzdEVtcHR5UmVhc29uQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTGlzdEVtcHR5UmVhc29uQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTGlzdEVtcHR5UmVhc29uQ29kZXMsICBMaXN0RW1wdHlSZWFzb25Db2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTGlzdEVtcHR5UmVhc29uQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbXBvc2l0aW9uU3RhdHVzQ29kaW5ncywgQ29tcG9zaXRpb25TdGF0dXNDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db21wb3NpdGlvblN0YXR1c0NvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbXBvc2l0aW9uU3RhdHVzQ29kZXMsICBDb21wb3NpdGlvblN0YXR1c0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db21wb3NpdGlvblN0YXR1c0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEb2NUeXBlQ29kaW5ncywgRG9jVHlwZUNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0RvY1R5cGVDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEb2NUeXBlQ29kZXMsICBEb2NUeXBlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0RvY1R5cGVDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRG9jdW1lbnRDbGFzc0NvZGluZ3MsIERvY3VtZW50Q2xhc3NDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Eb2N1bWVudENsYXNzQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRG9jdW1lbnRDbGFzc0NvZGVzLCAgRG9jdW1lbnRDbGFzc0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Eb2N1bWVudENsYXNzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFYzQ29uZmlkZW50aWFsaXR5Q2xhc3NpZmljYXRpb25Db2RpbmdzLCBWM0NvbmZpZGVudGlhbGl0eUNsYXNzaWZpY2F0aW9uQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVjNDb25maWRlbnRpYWxpdHlDbGFzc2lmaWNhdGlvbkNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFYzQ29uZmlkZW50aWFsaXR5Q2xhc3NpZmljYXRpb25Db2RlcywgIFYzQ29uZmlkZW50aWFsaXR5Q2xhc3NpZmljYXRpb25Db2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVjNDb25maWRlbnRpYWxpdHlDbGFzc2lmaWNhdGlvbkNvZGVzLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIENvbXBvc2l0aW9uQXR0ZXN0ZXIgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29tcG9zaXRpb25BdHRlc3RlckFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0eXBlIG9mIGF0dGVzdGF0aW9uIHRoZSBhdXRoZW50aWNhdG9yIG9mZmVycy5cclxuICAgKi9cclxuICBtb2RlOiBmaGlyLkZoaXJDb2RlPENvbXBvc2l0aW9uQXR0ZXN0YXRpb25Nb2RlQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENvbXBvc2l0aW9uLmF0dGVzdGVyLm1vZGVcclxuICAgKi9cclxuICBfbW9kZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogV2hlbiB0aGUgY29tcG9zaXRpb24gd2FzIGF0dGVzdGVkIGJ5IHRoZSBwYXJ0eS5cclxuICAgKi9cclxuICB0aW1lPzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ29tcG9zaXRpb24uYXR0ZXN0ZXIudGltZVxyXG4gICAqL1xyXG4gIF90aW1lPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBXaG8gYXR0ZXN0ZWQgdGhlIGNvbXBvc2l0aW9uIGluIHRoZSBzcGVjaWZpZWQgd2F5LlxyXG4gICAqL1xyXG4gIHBhcnR5PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIE9ubHkgbGlzdCBlYWNoIGF0dGVzdGVyIG9uY2UuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29tcG9zaXRpb25BdHRlc3RlciBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0NvbXBvc2l0aW9uQXR0ZXN0ZXInO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0eXBlIG9mIGF0dGVzdGF0aW9uIHRoZSBhdXRoZW50aWNhdG9yIG9mZmVycy5cclxuICAgKi9cclxuICBwdWJsaWMgbW9kZTogZmhpci5GaGlyQ29kZTxDb21wb3NpdGlvbkF0dGVzdGF0aW9uTW9kZUNvZGVUeXBlPnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFdoZW4gdGhlIGNvbXBvc2l0aW9uIHdhcyBhdHRlc3RlZCBieSB0aGUgcGFydHkuXHJcbiAgICovXHJcbiAgcHVibGljIHRpbWU/OiBmaGlyLkZoaXJEYXRlVGltZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogV2hvIGF0dGVzdGVkIHRoZSBjb21wb3NpdGlvbiBpbiB0aGUgc3BlY2lmaWVkIHdheS5cclxuICAgKi9cclxuICBwdWJsaWMgcGFydHk/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQ29tcG9zaXRpb25BdHRlc3RlciAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENvbXBvc2l0aW9uQXR0ZXN0ZXJBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnbW9kZSddKSB7IHRoaXMubW9kZSA9IG5ldyBmaGlyLkZoaXJDb2RlPENvbXBvc2l0aW9uQXR0ZXN0YXRpb25Nb2RlQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLm1vZGV9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubW9kZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19tb2RlJ10pIHtcclxuICAgICAgaWYgKHRoaXMubW9kZSkgeyB0aGlzLm1vZGUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbW9kZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLm1vZGUgPSBuZXcgZmhpci5GaGlyQ29kZTxDb21wb3NpdGlvbkF0dGVzdGF0aW9uTW9kZUNvZGVUeXBlPihzb3VyY2UuX21vZGUgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3RpbWUnXSkgeyB0aGlzLnRpbWUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2UudGltZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfdGltZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnRpbWUpIHsgdGhpcy50aW1lLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3RpbWUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy50aW1lID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHNvdXJjZS5fdGltZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckRhdGVUaW1lQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydwYXJ0eSddKSB7IHRoaXMucGFydHkgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnBhcnR5KTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIG1vZGUgKENvbXBvc2l0aW9uLmF0dGVzdGVyLm1vZGUpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgbW9kZVJlcXVpcmVkQ29kZXMoKSB7XHJcbiAgICByZXR1cm4gQ29tcG9zaXRpb25BdHRlc3RhdGlvbk1vZGVDb2RlcztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb246c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24pO1xyXG4gICAgaWYgKGV4cHJlc3Npb24gPT09ICcnKSB7IGV4cHJlc3Npb24gPSAnQ29tcG9zaXRpb24uYXR0ZXN0ZXInIH1cclxuICAgIGlmICghdGhpc1snbW9kZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBtb2RlIGZoaXI6IENvbXBvc2l0aW9uLmF0dGVzdGVyLm1vZGU6Y29kZScsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzWydtb2RlJ10gJiYgKCFPYmplY3QudmFsdWVzKENvbXBvc2l0aW9uQXR0ZXN0YXRpb25Nb2RlQ29kZXMpLmluY2x1ZGVzKHRoaXMubW9kZS52YWx1ZSBhcyBhbnkpKSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnY29kZS1pbnZhbGlkJywgZGlhZ25vc3RpY3M6ICdJbnZhbGlkIGNvZGUgcHJvcGVydHkgbW9kZSBmaGlyOiBDb21wb3NpdGlvbi5hdHRlc3Rlci5tb2RlOmNvZGUgUmVxdWlyZWQgYmluZGluZyB0bzogQ29tcG9zaXRpb25BdHRlc3RhdGlvbk1vZGUnLCBleHByZXNzaW9uOiBbZXhwcmVzc2lvbl0gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcIm1vZGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5tb2RlLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5tb2RlJykpOyB9XHJcbiAgICBpZiAodGhpc1tcInRpbWVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy50aW1lLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy50aW1lJykpOyB9XHJcbiAgICBpZiAodGhpc1tcInBhcnR5XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucGFydHkuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLnBhcnR5JykpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQ29tcG9zaXRpb25SZWxhdGVzVG8gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29tcG9zaXRpb25SZWxhdGVzVG9BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBJZiB0aGlzIGRvY3VtZW50IGFwcGVuZHMgYW5vdGhlciBkb2N1bWVudCwgdGhlbiB0aGUgZG9jdW1lbnQgY2Fubm90IGJlIGZ1bGx5IHVuZGVyc3Rvb2Qgd2l0aG91dCBhbHNvIGFjY2Vzc2luZyB0aGUgcmVmZXJlbmNlZCBkb2N1bWVudC5cclxuICAgKi9cclxuICBjb2RlOiBmaGlyLkZoaXJDb2RlPERvY3VtZW50UmVsYXRpb25zaGlwVHlwZUNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDb21wb3NpdGlvbi5yZWxhdGVzVG8uY29kZVxyXG4gICAqL1xyXG4gIF9jb2RlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgdGFyZ2V0IGNvbXBvc2l0aW9uL2RvY3VtZW50IG9mIHRoaXMgcmVsYXRpb25zaGlwLlxyXG4gICAqL1xyXG4gIHRhcmdldD86IGZoaXIuSWRlbnRpZmllcnxmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRhcmdldCBjb21wb3NpdGlvbi9kb2N1bWVudCBvZiB0aGlzIHJlbGF0aW9uc2hpcC5cclxuICAgKi9cclxuICB0YXJnZXRJZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRhcmdldCBjb21wb3NpdGlvbi9kb2N1bWVudCBvZiB0aGlzIHJlbGF0aW9uc2hpcC5cclxuICAgKi9cclxuICB0YXJnZXRSZWZlcmVuY2U/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQSBkb2N1bWVudCBpcyBhIHZlcnNpb24gc3BlY2lmaWMgY29tcG9zaXRpb24uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29tcG9zaXRpb25SZWxhdGVzVG8gZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdDb21wb3NpdGlvblJlbGF0ZXNUbyc7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhpcyBkb2N1bWVudCBhcHBlbmRzIGFub3RoZXIgZG9jdW1lbnQsIHRoZW4gdGhlIGRvY3VtZW50IGNhbm5vdCBiZSBmdWxseSB1bmRlcnN0b29kIHdpdGhvdXQgYWxzbyBhY2Nlc3NpbmcgdGhlIHJlZmVyZW5jZWQgZG9jdW1lbnQuXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGU6IGZoaXIuRmhpckNvZGU8RG9jdW1lbnRSZWxhdGlvbnNoaXBUeXBlQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRhcmdldCBjb21wb3NpdGlvbi9kb2N1bWVudCBvZiB0aGlzIHJlbGF0aW9uc2hpcC5cclxuICAgKi9cclxuICBwdWJsaWMgdGFyZ2V0OiAoZmhpci5JZGVudGlmaWVyfGZoaXIuUmVmZXJlbmNlKXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgQ29tcG9zaXRpb24ucmVsYXRlc1RvLnRhcmdldFt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c190YXJnZXRJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBDb21wb3NpdGlvblJlbGF0ZXNUbyAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENvbXBvc2l0aW9uUmVsYXRlc1RvQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2NvZGUnXSkgeyB0aGlzLmNvZGUgPSBuZXcgZmhpci5GaGlyQ29kZTxEb2N1bWVudFJlbGF0aW9uc2hpcFR5cGVDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2UuY29kZX0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb2RlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2NvZGUnXSkge1xyXG4gICAgICBpZiAodGhpcy5jb2RlKSB7IHRoaXMuY29kZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9jb2RlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkZoaXJDb2RlPERvY3VtZW50UmVsYXRpb25zaGlwVHlwZUNvZGVUeXBlPihzb3VyY2UuX2NvZGUgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3RhcmdldCddKSB7IHRoaXMudGFyZ2V0ID0gc291cmNlLnRhcmdldDsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd0YXJnZXRJZGVudGlmaWVyJ10pIHsgdGhpcy50YXJnZXQgPSBuZXcgZmhpci5JZGVudGlmaWVyKHNvdXJjZS50YXJnZXRJZGVudGlmaWVyKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd0YXJnZXRSZWZlcmVuY2UnXSkgeyB0aGlzLnRhcmdldCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UudGFyZ2V0UmVmZXJlbmNlKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudGFyZ2V0ID0gbnVsbDsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIGNvZGUgKENvbXBvc2l0aW9uLnJlbGF0ZXNUby5jb2RlKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IGNvZGVSZXF1aXJlZENvZGVzKCkge1xyXG4gICAgcmV0dXJuIERvY3VtZW50UmVsYXRpb25zaGlwVHlwZUNvZGVzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdDb21wb3NpdGlvbi5yZWxhdGVzVG8nIH1cclxuICAgIGlmICghdGhpc1snY29kZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBjb2RlIGZoaXI6IENvbXBvc2l0aW9uLnJlbGF0ZXNUby5jb2RlOmNvZGUnLCBleHByZXNzaW9uOiBbZXhwcmVzc2lvbl0gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1snY29kZSddICYmICghT2JqZWN0LnZhbHVlcyhEb2N1bWVudFJlbGF0aW9uc2hpcFR5cGVDb2RlcykuaW5jbHVkZXModGhpcy5jb2RlLnZhbHVlIGFzIGFueSkpKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdjb2RlLWludmFsaWQnLCBkaWFnbm9zdGljczogJ0ludmFsaWQgY29kZSBwcm9wZXJ0eSBjb2RlIGZoaXI6IENvbXBvc2l0aW9uLnJlbGF0ZXNUby5jb2RlOmNvZGUgUmVxdWlyZWQgYmluZGluZyB0bzogRG9jdW1lbnRSZWxhdGlvbnNoaXBUeXBlJywgZXhwcmVzc2lvbjogW2V4cHJlc3Npb25dIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJjb2RlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY29kZS5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuY29kZScpKTsgfVxyXG4gICAgaWYgKCF0aGlzWyd0YXJnZXQnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgdGFyZ2V0IGZoaXI6IENvbXBvc2l0aW9uLnJlbGF0ZXNUby50YXJnZXRbeF06JywgZXhwcmVzc2lvbjogW2V4cHJlc3Npb25dIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIENvbXBvc2l0aW9uRXZlbnQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29tcG9zaXRpb25FdmVudEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEFuIGV2ZW50IGNhbiBmdXJ0aGVyIHNwZWNpYWxpemUgdGhlIGFjdCBpbmhlcmVudCBpbiB0aGUgdHlwZUNvZGUsIHN1Y2ggYXMgd2hlcmUgaXQgaXMgc2ltcGx5IFwiUHJvY2VkdXJlIFJlcG9ydFwiIGFuZCB0aGUgcHJvY2VkdXJlIHdhcyBhIFwiY29sb25vc2NvcHlcIi4gSWYgb25lIG9yIG1vcmUgZXZlbnRDb2RlcyBhcmUgaW5jbHVkZWQsIHRoZXkgU0hBTEwgTk9UIGNvbmZsaWN0IHdpdGggdGhlIHZhbHVlcyBpbmhlcmVudCBpbiB0aGUgY2xhc3NDb2RlLCBwcmFjdGljZVNldHRpbmdDb2RlIG9yIHR5cGVDb2RlLCBhcyBzdWNoIGEgY29uZmxpY3Qgd291bGQgY3JlYXRlIGFuIGFtYmlndW91cyBzaXR1YXRpb24uIFRoaXMgc2hvcnQgbGlzdCBvZiBjb2RlcyBpcyBwcm92aWRlZCB0byBiZSB1c2VkIGFzIGtleSB3b3JkcyBmb3IgY2VydGFpbiB0eXBlcyBvZiBxdWVyaWVzLlxyXG4gICAqL1xyXG4gIGNvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBlcmlvZCBvZiB0aW1lIGNvdmVyZWQgYnkgdGhlIGRvY3VtZW50YXRpb24uIFRoZXJlIGlzIG5vIGFzc2VydGlvbiB0aGF0IHRoZSBkb2N1bWVudGF0aW9uIGlzIGEgY29tcGxldGUgcmVwcmVzZW50YXRpb24gZm9yIHRoaXMgcGVyaW9kLCBvbmx5IHRoYXQgaXQgZG9jdW1lbnRzIGV2ZW50cyBkdXJpbmcgdGhpcyB0aW1lLlxyXG4gICAqL1xyXG4gIHBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRlc2NyaXB0aW9uIGFuZC9vciByZWZlcmVuY2Ugb2YgdGhlIGV2ZW50KHMpIGJlaW5nIGRvY3VtZW50ZWQuIEZvciBleGFtcGxlLCB0aGlzIGNvdWxkIGJlIHVzZWQgdG8gZG9jdW1lbnQgc3VjaCBhIGNvbG9ub3Njb3B5IG9yIGFuIGFwcGVuZGVjdG9teS5cclxuICAgKi9cclxuICBkZXRhaWw/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgZXZlbnQgbmVlZHMgdG8gYmUgY29uc2lzdGVudCB3aXRoIHRoZSB0eXBlIGVsZW1lbnQsIHRob3VnaCBjYW4gcHJvdmlkZSBmdXJ0aGVyIGluZm9ybWF0aW9uIGlmIGRlc2lyZWQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29tcG9zaXRpb25FdmVudCBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0NvbXBvc2l0aW9uRXZlbnQnO1xyXG4gIC8qKlxyXG4gICAqIEFuIGV2ZW50IGNhbiBmdXJ0aGVyIHNwZWNpYWxpemUgdGhlIGFjdCBpbmhlcmVudCBpbiB0aGUgdHlwZUNvZGUsIHN1Y2ggYXMgd2hlcmUgaXQgaXMgc2ltcGx5IFwiUHJvY2VkdXJlIFJlcG9ydFwiIGFuZCB0aGUgcHJvY2VkdXJlIHdhcyBhIFwiY29sb25vc2NvcHlcIi4gSWYgb25lIG9yIG1vcmUgZXZlbnRDb2RlcyBhcmUgaW5jbHVkZWQsIHRoZXkgU0hBTEwgTk9UIGNvbmZsaWN0IHdpdGggdGhlIHZhbHVlcyBpbmhlcmVudCBpbiB0aGUgY2xhc3NDb2RlLCBwcmFjdGljZVNldHRpbmdDb2RlIG9yIHR5cGVDb2RlLCBhcyBzdWNoIGEgY29uZmxpY3Qgd291bGQgY3JlYXRlIGFuIGFtYmlndW91cyBzaXR1YXRpb24uIFRoaXMgc2hvcnQgbGlzdCBvZiBjb2RlcyBpcyBwcm92aWRlZCB0byBiZSB1c2VkIGFzIGtleSB3b3JkcyBmb3IgY2VydGFpbiB0eXBlcyBvZiBxdWVyaWVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb2RlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwZXJpb2Qgb2YgdGltZSBjb3ZlcmVkIGJ5IHRoZSBkb2N1bWVudGF0aW9uLiBUaGVyZSBpcyBubyBhc3NlcnRpb24gdGhhdCB0aGUgZG9jdW1lbnRhdGlvbiBpcyBhIGNvbXBsZXRlIHJlcHJlc2VudGF0aW9uIGZvciB0aGlzIHBlcmlvZCwgb25seSB0aGF0IGl0IGRvY3VtZW50cyBldmVudHMgZHVyaW5nIHRoaXMgdGltZS5cclxuICAgKi9cclxuICBwdWJsaWMgcGVyaW9kPzogZmhpci5QZXJpb2R8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkZXNjcmlwdGlvbiBhbmQvb3IgcmVmZXJlbmNlIG9mIHRoZSBldmVudChzKSBiZWluZyBkb2N1bWVudGVkLiBGb3IgZXhhbXBsZSwgdGhpcyBjb3VsZCBiZSB1c2VkIHRvIGRvY3VtZW50IHN1Y2ggYSBjb2xvbm9zY29weSBvciBhbiBhcHBlbmRlY3RvbXkuXHJcbiAgICovXHJcbiAgcHVibGljIGRldGFpbDogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBDb21wb3NpdGlvbkV2ZW50IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8Q29tcG9zaXRpb25FdmVudEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gc291cmNlLmNvZGUubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb2RlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3BlcmlvZCddKSB7IHRoaXMucGVyaW9kID0gbmV3IGZoaXIuUGVyaW9kKHNvdXJjZS5wZXJpb2QpOyB9XHJcbiAgICBpZiAoc291cmNlWydkZXRhaWwnXSkgeyB0aGlzLmRldGFpbCA9IHNvdXJjZS5kZXRhaWwubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5kZXRhaWwgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdDb21wb3NpdGlvbi5ldmVudCcgfVxyXG4gICAgaWYgKHRoaXNbXCJjb2RlXCJdKSB7IHRoaXMuY29kZS5mb3JFYWNoKCh4LGkpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uK2AuY29kZVske2l9XWApKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJwZXJpb2RcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5wZXJpb2QuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLnBlcmlvZCcpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJkZXRhaWxcIl0pIHsgdGhpcy5kZXRhaWwuZm9yRWFjaCgoeCxpKSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbitgLmRldGFpbFske2l9XWApKTsgfSkgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIENvbXBvc2l0aW9uU2VjdGlvbiB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBDb21wb3NpdGlvblNlY3Rpb25BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgdGl0bGUgaWRlbnRpZmllcyB0aGUgc2VjdGlvbiBmb3IgYSBodW1hbiByZWFkZXIuIFRoZSB0aXRsZSBtdXN0IGJlIGNvbnNpc3RlbnQgd2l0aCB0aGUgbmFycmF0aXZlIG9mIHRoZSByZXNvdXJjZSB0aGF0IGlzIHRoZSB0YXJnZXQgb2YgdGhlIHNlY3Rpb24uY29udGVudCByZWZlcmVuY2UuIEdlbmVyYWxseSwgc2VjdGlvbnMgU0hPVUxEIGhhdmUgdGl0bGVzLCBidXQgaW4gc29tZSBkb2N1bWVudHMsIGl0IGlzIHVubmVjZXNzYXJ5IG9yIGluYXBwcm9wcmlhdGUuIFR5cGljYWxseSwgdGhpcyBpcyB3aGVyZSBhIHNlY3Rpb24gaGFzIHN1YnNlY3Rpb25zIHRoYXQgaGF2ZSB0aGVpciBvd24gYWRlcXVhdGVseSBkaXN0aW5ndWlzaGluZyB0aXRsZSwgIG9yIGRvY3VtZW50cyB0aGF0IG9ubHkgaGF2ZSBhIHNpbmdsZSBzZWN0aW9uLiBNb3N0IEltcGxlbWVudGF0aW9uIEd1aWRlcyB3aWxsIG1ha2Ugc2VjdGlvbiB0aXRsZSB0byBiZSBhIHJlcXVpcmVkIGVsZW1lbnQuXHJcbiAgICovXHJcbiAgdGl0bGU/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ29tcG9zaXRpb24uc2VjdGlvbi50aXRsZVxyXG4gICAqL1xyXG4gIF90aXRsZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNvZGUgaWRlbnRpZmllcyB0aGUgc2VjdGlvbiBmb3IgYW4gYXV0b21hdGVkIHByb2Nlc3NvciBvZiB0aGUgZG9jdW1lbnQuIFRoaXMgaXMgcGFydGljdWxhcmx5IHJlbGV2YW50IHdoZW4gdXNpbmcgcHJvZmlsZXMgdG8gY29udHJvbCB0aGUgc3RydWN0dXJlIG9mIHRoZSBkb2N1bWVudC4gICBcclxuICAgKiBJZiB0aGUgc2VjdGlvbiBoYXMgY29udGVudCAoaW5zdGVhZCBvZiBzdWItc2VjdGlvbnMpLCB0aGUgc2VjdGlvbi5jb2RlIGRvZXMgbm90IGNoYW5nZSB0aGUgbWVhbmluZyBvciBpbnRlcnByZXRhdGlvbiBvZiB0aGUgcmVzb3VyY2UgdGhhdCBpcyB0aGUgY29udGVudCBvZiB0aGUgc2VjdGlvbiBpbiB0aGUgY29tbWVudHMgZm9yIHRoZSBzZWN0aW9uLmNvZGUuXHJcbiAgICovXHJcbiAgY29kZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB3aG8gaXMgcmVzcG9uc2libGUgZm9yIHRoZSBpbmZvcm1hdGlvbiBpbiB0aGlzIHNlY3Rpb24sIG5vdCBuZWNlc3NhcmlseSB3aG8gdHlwZWQgaXQgaW4uXHJcbiAgICovXHJcbiAgYXV0aG9yPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFR5cGljYWxseSwgc2VjdGlvbnMgaW4gYSBkb3VtZW50IGFyZSBhYm91dCB0aGUgc3ViamVjdCBvZiB0aGUgZG9jdW1lbnQsIHdoZXRoZXIgdGhhdCBpcyBhICBwYXRpZW50LCBvciBncm91cCBvZiBwYXRpZW50cywgbG9jYXRpb24sIG9yIGRldmljZSwgb3Igd2hhdGV2ZXIuIEZvciBzb21lIGtpbmQgb2YgZG9jdW1lbnRzLCBzb21lIHNlY3Rpb25zIGFjdHVhbGx5IGNvbnRhaW4gZGF0YSBhYm91dCByZWxhdGVkIGVudGl0aWVzLiBUeXBpY2FsIGV4YW1wbGVzIGFyZSAgYSBzZWN0aW9uIGluIGEgbmV3Ym9ybiBkaXNjaGFyZ2Ugc3VtbWFyeSBjb25jZXJuaW5nIHRoZSBtb3RoZXIsIG9yIGZhbWlseSBoaXN0b3J5IGRvY3VtZW50cywgd2l0aCBhIHNlY3Rpb24gYWJvdXQgZWFjaCBmYW1pbHkgbWVtYmVyLCB0aG91Z2ggdGhlcmUgYXJlIG1hbnkgb3RoZXIgZXhhbXBsZXMuXHJcbiAgICovXHJcbiAgZm9jdXM/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERvY3VtZW50IHByb2ZpbGVzIG1heSBkZWZpbmUgd2hhdCBjb250ZW50IHNob3VsZCBiZSByZXByZXNlbnRlZCBpbiB0aGUgbmFycmF0aXZlIHRvIGVuc3VyZSBjbGluaWNhbCBzYWZldHkuXHJcbiAgICovXHJcbiAgdGV4dD86IGZoaXIuTmFycmF0aXZlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IGlzIGxhYmVsZWQgYXMgYSBtb2RpZmllciBiZWNhdXNlIGEgY2hhbmdlIGxpc3QgbXVzdCBub3QgYmUgbWlzdW5kZXJzdG9vZCBhcyBhIGNvbXBsZXRlIGxpc3QuXHJcbiAgICovXHJcbiAgbW9kZT86IGZoaXIuRmhpckNvZGU8TGlzdE1vZGVDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ29tcG9zaXRpb24uc2VjdGlvbi5tb2RlXHJcbiAgICovXHJcbiAgX21vZGU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEFwcGxpY2F0aW9ucyBTSE9VTEQgcmVuZGVyIG9yZGVyZWQgbGlzdHMgaW4gdGhlIG9yZGVyIHByb3ZpZGVkLCBidXQgTUFZIGFsbG93IHVzZXJzIHRvIHJlLW9yZGVyIGJhc2VkIG9uIHRoZWlyIG93biBwcmVmZXJlbmNlcyBhcyB3ZWxsLiBJZiB0aGVyZSBpcyBubyBvcmRlciBzcGVjaWZpZWQsIHRoZSBvcmRlciBpcyB1bmtub3duLCB0aG91Z2ggdGhlcmUgbWF5IHN0aWxsIGJlIHNvbWUgb3JkZXIuXHJcbiAgICovXHJcbiAgb3JkZXJlZEJ5PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiB0aGVyZSBhcmUgbm8gZW50cmllcyBpbiB0aGUgbGlzdCwgYW4gZW1wdHlSZWFzb24gU0hPVUxEIGJlIHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGVudHJ5PzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB2YXJpb3VzIHJlYXNvbnMgZm9yIGFuIGVtcHR5IHNlY3Rpb24gbWFrZSBhIHNpZ25pZmljYW50IGludGVycHJldGF0aW9uIHRvIGl0cyBpbnRlcnByZXRhdGlvbi4gTm90ZSB0aGF0IHRoaXMgY29kZSBpcyBmb3IgdXNlIHdoZW4gdGhlIGVudGlyZSBzZWN0aW9uIGNvbnRlbnQgaGFzIGJlZW4gc3VwcHJlc3NlZCwgYW5kIG5vdCBmb3Igd2hlbiBpbmRpdmlkdWFsIGl0ZW1zIGFyZSBvbWl0dGVkIC0gaW1wbGVtZW50ZXJzIG1heSBjb25zaWRlciB1c2luZyBhIHRleHQgbm90ZSBvciBhIGZsYWcgb24gYW4gZW50cnkgaW4gdGhlc2UgY2FzZXMuXHJcbiAgICovXHJcbiAgZW1wdHlSZWFzb24/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE5lc3RlZCBzZWN0aW9ucyBhcmUgcHJpbWFyaWx5IHVzZWQgdG8gaGVscCBodW1hbiByZWFkZXJzIG5hdmlnYXRlIHRvIHBhcnRpY3VsYXIgcG9ydGlvbnMgb2YgdGhlIGRvY3VtZW50LlxyXG4gICAqL1xyXG4gIHNlY3Rpb24/OiBmaGlyLkNvbXBvc2l0aW9uU2VjdGlvbkFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgcm9vdCBvZiB0aGUgc2VjdGlvbnMgdGhhdCBtYWtlIHVwIHRoZSBjb21wb3NpdGlvbi5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb21wb3NpdGlvblNlY3Rpb24gZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdDb21wb3NpdGlvblNlY3Rpb24nO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0aXRsZSBpZGVudGlmaWVzIHRoZSBzZWN0aW9uIGZvciBhIGh1bWFuIHJlYWRlci4gVGhlIHRpdGxlIG11c3QgYmUgY29uc2lzdGVudCB3aXRoIHRoZSBuYXJyYXRpdmUgb2YgdGhlIHJlc291cmNlIHRoYXQgaXMgdGhlIHRhcmdldCBvZiB0aGUgc2VjdGlvbi5jb250ZW50IHJlZmVyZW5jZS4gR2VuZXJhbGx5LCBzZWN0aW9ucyBTSE9VTEQgaGF2ZSB0aXRsZXMsIGJ1dCBpbiBzb21lIGRvY3VtZW50cywgaXQgaXMgdW5uZWNlc3Nhcnkgb3IgaW5hcHByb3ByaWF0ZS4gVHlwaWNhbGx5LCB0aGlzIGlzIHdoZXJlIGEgc2VjdGlvbiBoYXMgc3Vic2VjdGlvbnMgdGhhdCBoYXZlIHRoZWlyIG93biBhZGVxdWF0ZWx5IGRpc3Rpbmd1aXNoaW5nIHRpdGxlLCAgb3IgZG9jdW1lbnRzIHRoYXQgb25seSBoYXZlIGEgc2luZ2xlIHNlY3Rpb24uIE1vc3QgSW1wbGVtZW50YXRpb24gR3VpZGVzIHdpbGwgbWFrZSBzZWN0aW9uIHRpdGxlIHRvIGJlIGEgcmVxdWlyZWQgZWxlbWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgdGl0bGU/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjb2RlIGlkZW50aWZpZXMgdGhlIHNlY3Rpb24gZm9yIGFuIGF1dG9tYXRlZCBwcm9jZXNzb3Igb2YgdGhlIGRvY3VtZW50LiBUaGlzIGlzIHBhcnRpY3VsYXJseSByZWxldmFudCB3aGVuIHVzaW5nIHByb2ZpbGVzIHRvIGNvbnRyb2wgdGhlIHN0cnVjdHVyZSBvZiB0aGUgZG9jdW1lbnQuICAgXHJcbiAgICogSWYgdGhlIHNlY3Rpb24gaGFzIGNvbnRlbnQgKGluc3RlYWQgb2Ygc3ViLXNlY3Rpb25zKSwgdGhlIHNlY3Rpb24uY29kZSBkb2VzIG5vdCBjaGFuZ2UgdGhlIG1lYW5pbmcgb3IgaW50ZXJwcmV0YXRpb24gb2YgdGhlIHJlc291cmNlIHRoYXQgaXMgdGhlIGNvbnRlbnQgb2YgdGhlIHNlY3Rpb24gaW4gdGhlIGNvbW1lbnRzIGZvciB0aGUgc2VjdGlvbi5jb2RlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb2RlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgd2hvIGlzIHJlc3BvbnNpYmxlIGZvciB0aGUgaW5mb3JtYXRpb24gaW4gdGhpcyBzZWN0aW9uLCBub3QgbmVjZXNzYXJpbHkgd2hvIHR5cGVkIGl0IGluLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhdXRob3I6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogVHlwaWNhbGx5LCBzZWN0aW9ucyBpbiBhIGRvdW1lbnQgYXJlIGFib3V0IHRoZSBzdWJqZWN0IG9mIHRoZSBkb2N1bWVudCwgd2hldGhlciB0aGF0IGlzIGEgIHBhdGllbnQsIG9yIGdyb3VwIG9mIHBhdGllbnRzLCBsb2NhdGlvbiwgb3IgZGV2aWNlLCBvciB3aGF0ZXZlci4gRm9yIHNvbWUga2luZCBvZiBkb2N1bWVudHMsIHNvbWUgc2VjdGlvbnMgYWN0dWFsbHkgY29udGFpbiBkYXRhIGFib3V0IHJlbGF0ZWQgZW50aXRpZXMuIFR5cGljYWwgZXhhbXBsZXMgYXJlICBhIHNlY3Rpb24gaW4gYSBuZXdib3JuIGRpc2NoYXJnZSBzdW1tYXJ5IGNvbmNlcm5pbmcgdGhlIG1vdGhlciwgb3IgZmFtaWx5IGhpc3RvcnkgZG9jdW1lbnRzLCB3aXRoIGEgc2VjdGlvbiBhYm91dCBlYWNoIGZhbWlseSBtZW1iZXIsIHRob3VnaCB0aGVyZSBhcmUgbWFueSBvdGhlciBleGFtcGxlcy5cclxuICAgKi9cclxuICBwdWJsaWMgZm9jdXM/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRG9jdW1lbnQgcHJvZmlsZXMgbWF5IGRlZmluZSB3aGF0IGNvbnRlbnQgc2hvdWxkIGJlIHJlcHJlc2VudGVkIGluIHRoZSBuYXJyYXRpdmUgdG8gZW5zdXJlIGNsaW5pY2FsIHNhZmV0eS5cclxuICAgKi9cclxuICBwdWJsaWMgdGV4dD86IGZoaXIuTmFycmF0aXZlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIGJlY2F1c2UgYSBjaGFuZ2UgbGlzdCBtdXN0IG5vdCBiZSBtaXN1bmRlcnN0b29kIGFzIGEgY29tcGxldGUgbGlzdC5cclxuICAgKi9cclxuICBwdWJsaWMgbW9kZT86IGZoaXIuRmhpckNvZGU8TGlzdE1vZGVDb2RlVHlwZT58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFwcGxpY2F0aW9ucyBTSE9VTEQgcmVuZGVyIG9yZGVyZWQgbGlzdHMgaW4gdGhlIG9yZGVyIHByb3ZpZGVkLCBidXQgTUFZIGFsbG93IHVzZXJzIHRvIHJlLW9yZGVyIGJhc2VkIG9uIHRoZWlyIG93biBwcmVmZXJlbmNlcyBhcyB3ZWxsLiBJZiB0aGVyZSBpcyBubyBvcmRlciBzcGVjaWZpZWQsIHRoZSBvcmRlciBpcyB1bmtub3duLCB0aG91Z2ggdGhlcmUgbWF5IHN0aWxsIGJlIHNvbWUgb3JkZXIuXHJcbiAgICovXHJcbiAgcHVibGljIG9yZGVyZWRCeT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiB0aGVyZSBhcmUgbm8gZW50cmllcyBpbiB0aGUgbGlzdCwgYW4gZW1wdHlSZWFzb24gU0hPVUxEIGJlIHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBlbnRyeTogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBUaGUgdmFyaW91cyByZWFzb25zIGZvciBhbiBlbXB0eSBzZWN0aW9uIG1ha2UgYSBzaWduaWZpY2FudCBpbnRlcnByZXRhdGlvbiB0byBpdHMgaW50ZXJwcmV0YXRpb24uIE5vdGUgdGhhdCB0aGlzIGNvZGUgaXMgZm9yIHVzZSB3aGVuIHRoZSBlbnRpcmUgc2VjdGlvbiBjb250ZW50IGhhcyBiZWVuIHN1cHByZXNzZWQsIGFuZCBub3QgZm9yIHdoZW4gaW5kaXZpZHVhbCBpdGVtcyBhcmUgb21pdHRlZCAtIGltcGxlbWVudGVycyBtYXkgY29uc2lkZXIgdXNpbmcgYSB0ZXh0IG5vdGUgb3IgYSBmbGFnIG9uIGFuIGVudHJ5IGluIHRoZXNlIGNhc2VzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBlbXB0eVJlYXNvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBOZXN0ZWQgc2VjdGlvbnMgYXJlIHByaW1hcmlseSB1c2VkIHRvIGhlbHAgaHVtYW4gcmVhZGVycyBuYXZpZ2F0ZSB0byBwYXJ0aWN1bGFyIHBvcnRpb25zIG9mIHRoZSBkb2N1bWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgc2VjdGlvbjogZmhpci5Db21wb3NpdGlvblNlY3Rpb25bXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBDb21wb3NpdGlvblNlY3Rpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxDb21wb3NpdGlvblNlY3Rpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsndGl0bGUnXSkgeyB0aGlzLnRpdGxlID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS50aXRsZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfdGl0bGUnXSkge1xyXG4gICAgICBpZiAodGhpcy50aXRsZSkgeyB0aGlzLnRpdGxlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3RpdGxlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudGl0bGUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fdGl0bGUgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2NvZGUnXSkgeyB0aGlzLmNvZGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmNvZGUpOyB9XHJcbiAgICBpZiAoc291cmNlWydhdXRob3InXSkgeyB0aGlzLmF1dGhvciA9IHNvdXJjZS5hdXRob3IubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5hdXRob3IgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZm9jdXMnXSkgeyB0aGlzLmZvY3VzID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5mb2N1cyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3RleHQnXSkgeyB0aGlzLnRleHQgPSBuZXcgZmhpci5OYXJyYXRpdmUoc291cmNlLnRleHQpOyB9XHJcbiAgICBpZiAoc291cmNlWydtb2RlJ10pIHsgdGhpcy5tb2RlID0gbmV3IGZoaXIuRmhpckNvZGU8TGlzdE1vZGVDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2UubW9kZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfbW9kZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLm1vZGUpIHsgdGhpcy5tb2RlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX21vZGUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5tb2RlID0gbmV3IGZoaXIuRmhpckNvZGU8TGlzdE1vZGVDb2RlVHlwZT4oc291cmNlLl9tb2RlIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydvcmRlcmVkQnknXSkgeyB0aGlzLm9yZGVyZWRCeSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2Uub3JkZXJlZEJ5KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZW50cnknXSkgeyB0aGlzLmVudHJ5ID0gc291cmNlLmVudHJ5Lm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZW50cnkgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZW1wdHlSZWFzb24nXSkgeyB0aGlzLmVtcHR5UmVhc29uID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5lbXB0eVJlYXNvbik7IH1cclxuICAgIGlmIChzb3VyY2VbJ3NlY3Rpb24nXSkgeyB0aGlzLnNlY3Rpb24gPSBzb3VyY2Uuc2VjdGlvbi5tYXAoKHgpID0+IG5ldyBmaGlyLkNvbXBvc2l0aW9uU2VjdGlvbih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnNlY3Rpb24gPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIG1vZGUgKENvbXBvc2l0aW9uLnNlY3Rpb24ubW9kZSlcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCBtb2RlUmVxdWlyZWRDb2RlcygpIHtcclxuICAgIHJldHVybiBMaXN0TW9kZUNvZGVzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBQcmVmZXJyZWQtYm91bmQgVmFsdWUgU2V0IGZvciBvcmRlcmVkQnkgKENvbXBvc2l0aW9uLnNlY3Rpb24ub3JkZXJlZEJ5KVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IG9yZGVyZWRCeVByZWZlcnJlZENvZGluZ3MoKTpMaXN0T3JkZXJDb2RpbmdUeXBlIHtcclxuICAgIHJldHVybiBMaXN0T3JkZXJDb2RpbmdzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBQcmVmZXJyZWQtYm91bmQgVmFsdWUgU2V0IGZvciBlbXB0eVJlYXNvbiAoQ29tcG9zaXRpb24uc2VjdGlvbi5lbXB0eVJlYXNvbilcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCBlbXB0eVJlYXNvblByZWZlcnJlZENvZGluZ3MoKTpMaXN0RW1wdHlSZWFzb25Db2RpbmdUeXBlIHtcclxuICAgIHJldHVybiBMaXN0RW1wdHlSZWFzb25Db2RpbmdzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdDb21wb3NpdGlvbi5zZWN0aW9uJyB9XHJcbiAgICBpZiAodGhpc1tcInRpdGxlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMudGl0bGUuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLnRpdGxlJykpOyB9XHJcbiAgICBpZiAodGhpc1tcImNvZGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5jb2RlLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5jb2RlJykpOyB9XHJcbiAgICBpZiAodGhpc1tcImF1dGhvclwiXSkgeyB0aGlzLmF1dGhvci5mb3JFYWNoKCh4LGkpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uK2AuYXV0aG9yWyR7aX1dYCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImZvY3VzXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZm9jdXMuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLmZvY3VzJykpOyB9XHJcbiAgICBpZiAodGhpc1tcInRleHRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy50ZXh0LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy50ZXh0JykpOyB9XHJcbiAgICBpZiAodGhpc1snbW9kZSddICYmICghT2JqZWN0LnZhbHVlcyhMaXN0TW9kZUNvZGVzKS5pbmNsdWRlcyh0aGlzLm1vZGUudmFsdWUgYXMgYW55KSkpIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ2NvZGUtaW52YWxpZCcsIGRpYWdub3N0aWNzOiAnSW52YWxpZCBjb2RlIHByb3BlcnR5IG1vZGUgZmhpcjogQ29tcG9zaXRpb24uc2VjdGlvbi5tb2RlOmNvZGUgUmVxdWlyZWQgYmluZGluZyB0bzogTGlzdE1vZGUnLCBleHByZXNzaW9uOiBbZXhwcmVzc2lvbl0gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcIm1vZGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5tb2RlLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5tb2RlJykpOyB9XHJcbiAgICBpZiAodGhpc1tcIm9yZGVyZWRCeVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm9yZGVyZWRCeS5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycub3JkZXJlZEJ5JykpOyB9XHJcbiAgICBpZiAodGhpc1tcImVudHJ5XCJdKSB7IHRoaXMuZW50cnkuZm9yRWFjaCgoeCxpKSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbitgLmVudHJ5WyR7aX1dYCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImVtcHR5UmVhc29uXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZW1wdHlSZWFzb24uZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLmVtcHR5UmVhc29uJykpOyB9XHJcbiAgICBpZiAodGhpc1tcInNlY3Rpb25cIl0pIHsgdGhpcy5zZWN0aW9uLmZvckVhY2goKHgsaSkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rYC5zZWN0aW9uWyR7aX1dYCkpOyB9KSB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQ29tcG9zaXRpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29tcG9zaXRpb25BcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJDb21wb3NpdGlvblwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTaW1pbGFyIHRvIENsaW5pY2FsRG9jdW1lbnQvc2V0SWQgaW4gQ0RBLiBTZWUgZGlzY3Vzc2lvbiBpbiByZXNvdXJjZSBkZWZpbml0aW9uIGZvciBob3cgdGhlc2UgcmVsYXRlLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiBhIGNvbXBvc2l0aW9uIGlzIG1hcmtlZCBhcyB3aXRoZHJhd24sIHRoZSBjb21wb3NpdGlvbnMvZG9jdW1lbnRzIGluIHRoZSBzZXJpZXMsIG9yIGRhdGEgZnJvbSB0aGUgY29tcG9zaXRpb24gb3IgZG9jdW1lbnQgc2VyaWVzLCBzaG91bGQgbmV2ZXIgYmUgZGlzcGxheWVkIHRvIGEgdXNlciB3aXRob3V0IGJlaW5nIGNsZWFybHkgbWFya2VkIGFzIHVudHJ1c3R3b3J0aHkuIFRoZSBmbGFnIFwiZW50ZXJlZC1pbi1lcnJvclwiIGlzIHdoeSB0aGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIG9mIG90aGVyIGVsZW1lbnRzLiAgIFxyXG4gICAqIFNvbWUgcmVwb3J0aW5nIHdvcmsgZmxvd3MgcmVxdWlyZSB0aGF0IHRoZSBvcmlnaW5hbCBuYXJyYXRpdmUgb2YgYSBmaW5hbCBkb2N1bWVudCBuZXZlciBiZSBhbHRlcmVkOyBpbnN0ZWFkLCBvbmx5IG5ldyBuYXJyYXRpdmUgY2FuIGJlIGFkZGVkLiBUaGUgY29tcG9zaXRpb24gcmVzb3VyY2UgaGFzIG5vIGV4cGxpY2l0IHN0YXR1cyBmb3IgZXhwbGljaXRseSBub3Rpbmcgd2hldGhlciB0aGlzIGJ1c2luZXNzIHJ1bGUgaXMgaW4gZWZmZWN0LiBUaGlzIHdvdWxkIGJlIGhhbmRsZWQgYnkgYW4gZXh0ZW5zaW9uIGlmIHJlcXVpcmVkLlxyXG4gICAqL1xyXG4gIHN0YXR1czogZmhpci5GaGlyQ29kZTxDb21wb3NpdGlvblN0YXR1c0NvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDb21wb3NpdGlvbi5zdGF0dXNcclxuICAgKi9cclxuICBfc3RhdHVzPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBGb3IgQ29tcG9zaXRpb24gdHlwZSwgTE9JTkMgaXMgdWJpcXVpdG91cyBhbmQgc3Ryb25nbHkgZW5kb3JzZWQgYnkgSEw3LiBNb3N0IGltcGxlbWVudGF0aW9uIGd1aWRlcyB3aWxsIHJlcXVpcmUgYSBzcGVjaWZpYyBMT0lOQyBjb2RlLCBvciB1c2UgTE9JTkMgYXMgYW4gZXh0ZW5zaWJsZSBiaW5kaW5nLlxyXG4gICAqL1xyXG4gIHR5cGU6IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaXMgYSBtZXRhZGF0YSBmaWVsZCBmcm9tIFtYRFMvTUhEXShodHRwOi8vd2lraS5paGUubmV0L2luZGV4LnBocD90aXRsZT1Nb2JpbGVfYWNjZXNzX3RvX0hlYWx0aF9Eb2N1bWVudHNfKE1IRCkpLlxyXG4gICAqL1xyXG4gIGNhdGVnb3J5PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEZvciBjbGluaWNhbCBkb2N1bWVudHMsIHRoaXMgaXMgdXN1YWxseSB0aGUgcGF0aWVudC5cclxuICAgKi9cclxuICBzdWJqZWN0PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgdGhlIGNsaW5pY2FsIGVuY291bnRlciBvciB0eXBlIG9mIGNhcmUgdGhpcyBkb2N1bWVudGF0aW9uIGlzIGFzc29jaWF0ZWQgd2l0aC5cclxuICAgKi9cclxuICBlbmNvdW50ZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBMYXN0IE1vZGlmaWVkIERhdGUgb24gdGhlIGNvbXBvc2l0aW9uIG1heSBiZSBhZnRlciB0aGUgZGF0ZSBvZiB0aGUgZG9jdW1lbnQgd2FzIGF0dGVzdGVkIHdpdGhvdXQgYmVpbmcgY2hhbmdlZC5cclxuICAgKi9cclxuICBkYXRlOiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDb21wb3NpdGlvbi5kYXRlXHJcbiAgICovXHJcbiAgX2RhdGU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgd2hvIGlzIHJlc3BvbnNpYmxlIGZvciB0aGUgaW5mb3JtYXRpb24gaW4gdGhlIGNvbXBvc2l0aW9uLCBub3QgbmVjZXNzYXJpbHkgd2hvIHR5cGVkIGl0IGluLlxyXG4gICAqL1xyXG4gIGF1dGhvcjogZmhpci5SZWZlcmVuY2VBcmdzW118bnVsbDtcclxuICAvKipcclxuICAgKiBGb3IgbWFueSBjb21wb3NpdGlvbnMsIHRoZSB0aXRsZSBpcyB0aGUgc2FtZSBhcyB0aGUgdGV4dCBvciBhIGRpc3BsYXkgbmFtZSBvZiBDb21wb3NpdGlvbi50eXBlIChlLmcuIGEgXCJjb25zdWx0YXRpb25cIiBvciBcInByb2dyZXNzIG5vdGVcIikuIE5vdGUgdGhhdCBDREEgZG9lcyBub3QgbWFrZSB0aXRsZSBtYW5kYXRvcnksIGJ1dCB0aGVyZSBhcmUgbm8ga25vd24gY2FzZXMgd2hlcmUgaXQgaXMgdXNlZnVsIGZvciB0aXRsZSB0byBiZSBvbWl0dGVkLCBzbyBpdCBpcyBtYW5kYXRvcnkgaGVyZS4gRmVlZGJhY2sgb24gdGhpcyByZXF1aXJlbWVudCBpcyB3ZWxjb21lIGR1cmluZyB0aGUgdHJpYWwgdXNlIHBlcmlvZC5cclxuICAgKi9cclxuICB0aXRsZTogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENvbXBvc2l0aW9uLnRpdGxlXHJcbiAgICovXHJcbiAgX3RpdGxlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgZXhhY3QgdXNlIG9mIHRoaXMgZWxlbWVudCwgYW5kIGVuZm9yY2VtZW50IGFuZCBpc3N1ZXMgcmVsYXRlZCB0byBoaWdobHkgc2Vuc2l0aXZlIGRvY3VtZW50cyBhcmUgb3V0IG9mIHNjb3BlIGZvciB0aGUgYmFzZSBzcGVjaWZpY2F0aW9uLCBhbmQgZGVsZWdhdGVkIHRvIGltcGxlbWVudGF0aW9uIHByb2ZpbGVzIChzZWUgc2VjdXJpdHkgc2VjdGlvbikuICBUaGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIGJlY2F1c2UgaGlnaGx5IGNvbmZpZGVudGlhbCBkb2N1bWVudHMgbXVzdCBub3QgYmUgdHJlYXRlZCBhcyBpZiB0aGV5IGFyZSBub3QuXHJcbiAgICovXHJcbiAgY29uZmlkZW50aWFsaXR5PzogZmhpci5GaGlyQ29kZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDb21wb3NpdGlvbi5jb25maWRlbnRpYWxpdHlcclxuICAgKi9cclxuICBfY29uZmlkZW50aWFsaXR5PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBPbmx5IGxpc3QgZWFjaCBhdHRlc3RlciBvbmNlLlxyXG4gICAqL1xyXG4gIGF0dGVzdGVyPzogZmhpci5Db21wb3NpdGlvbkF0dGVzdGVyQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGlzIHVzZWZ1bCB3aGVuIGRvY3VtZW50cyBhcmUgZGVyaXZlZCBmcm9tIGEgY29tcG9zaXRpb24gLSBwcm92aWRlcyBndWlkYW5jZSBmb3IgaG93IHRvIGdldCB0aGUgbGF0ZXN0IHZlcnNpb24gb2YgdGhlIGRvY3VtZW50LiBUaGlzIGlzIG9wdGlvbmFsIGJlY2F1c2UgdGhpcyBpcyBzb21ldGltZXMgbm90IGtub3duIGJ5IHRoZSBhdXRob3Jpbmcgc3lzdGVtLCBhbmQgY2FuIGJlIGluZmVycmVkIGJ5IGNvbnRleHQuIEhvd2V2ZXIsIGl0IGlzIGltcG9ydGFudCB0aGF0IHRoaXMgaW5mb3JtYXRpb24gYmUga25vd24gd2hlbiB3b3JraW5nIHdpdGggYSBkZXJpdmVkIGRvY3VtZW50LCBzbyBwcm92aWRpbmcgYSBjdXN0b2RpYW4gaXMgZW5jb3VyYWdlZC5cclxuICAgKi9cclxuICBjdXN0b2RpYW4/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgZG9jdW1lbnQgaXMgYSB2ZXJzaW9uIHNwZWNpZmljIGNvbXBvc2l0aW9uLlxyXG4gICAqL1xyXG4gIHJlbGF0ZXNUbz86IGZoaXIuQ29tcG9zaXRpb25SZWxhdGVzVG9BcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBldmVudCBuZWVkcyB0byBiZSBjb25zaXN0ZW50IHdpdGggdGhlIHR5cGUgZWxlbWVudCwgdGhvdWdoIGNhbiBwcm92aWRlIGZ1cnRoZXIgaW5mb3JtYXRpb24gaWYgZGVzaXJlZC5cclxuICAgKi9cclxuICBldmVudD86IGZoaXIuQ29tcG9zaXRpb25FdmVudEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJvb3Qgb2YgdGhlIHNlY3Rpb25zIHRoYXQgbWFrZSB1cCB0aGUgY29tcG9zaXRpb24uXHJcbiAgICovXHJcbiAgc2VjdGlvbj86IGZoaXIuQ29tcG9zaXRpb25TZWN0aW9uQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgc2V0IG9mIGhlYWx0aGNhcmUtcmVsYXRlZCBpbmZvcm1hdGlvbiB0aGF0IGlzIGFzc2VtYmxlZCB0b2dldGhlciBpbnRvIGEgc2luZ2xlIGxvZ2ljYWwgcGFja2FnZSB0aGF0IHByb3ZpZGVzIGEgc2luZ2xlIGNvaGVyZW50IHN0YXRlbWVudCBvZiBtZWFuaW5nLCBlc3RhYmxpc2hlcyBpdHMgb3duIGNvbnRleHQgYW5kIHRoYXQgaGFzIGNsaW5pY2FsIGF0dGVzdGF0aW9uIHdpdGggcmVnYXJkIHRvIHdobyBpcyBtYWtpbmcgdGhlIHN0YXRlbWVudC4gQSBDb21wb3NpdGlvbiBkZWZpbmVzIHRoZSBzdHJ1Y3R1cmUgYW5kIG5hcnJhdGl2ZSBjb250ZW50IG5lY2Vzc2FyeSBmb3IgYSBkb2N1bWVudC4gSG93ZXZlciwgYSBDb21wb3NpdGlvbiBhbG9uZSBkb2VzIG5vdCBjb25zdGl0dXRlIGEgZG9jdW1lbnQuIFJhdGhlciwgdGhlIENvbXBvc2l0aW9uIG11c3QgYmUgdGhlIGZpcnN0IGVudHJ5IGluIGEgQnVuZGxlIHdoZXJlIEJ1bmRsZS50eXBlPWRvY3VtZW50LCBhbmQgYW55IG90aGVyIHJlc291cmNlcyByZWZlcmVuY2VkIGZyb20gQ29tcG9zaXRpb24gbXVzdCBiZSBpbmNsdWRlZCBhcyBzdWJzZXF1ZW50IGVudHJpZXMgaW4gdGhlIEJ1bmRsZSAoZm9yIGV4YW1wbGUgUGF0aWVudCwgUHJhY3RpdGlvbmVyLCBFbmNvdW50ZXIsIGV0Yy4pLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENvbXBvc2l0aW9uIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdDb21wb3NpdGlvbic7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJDb21wb3NpdGlvblwiO1xyXG4gIC8qKlxyXG4gICAqIFNpbWlsYXIgdG8gQ2xpbmljYWxEb2N1bWVudC9zZXRJZCBpbiBDREEuIFNlZSBkaXNjdXNzaW9uIGluIHJlc291cmNlIGRlZmluaXRpb24gZm9yIGhvdyB0aGVzZSByZWxhdGUuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIGEgY29tcG9zaXRpb24gaXMgbWFya2VkIGFzIHdpdGhkcmF3biwgdGhlIGNvbXBvc2l0aW9ucy9kb2N1bWVudHMgaW4gdGhlIHNlcmllcywgb3IgZGF0YSBmcm9tIHRoZSBjb21wb3NpdGlvbiBvciBkb2N1bWVudCBzZXJpZXMsIHNob3VsZCBuZXZlciBiZSBkaXNwbGF5ZWQgdG8gYSB1c2VyIHdpdGhvdXQgYmVpbmcgY2xlYXJseSBtYXJrZWQgYXMgdW50cnVzdHdvcnRoeS4gVGhlIGZsYWcgXCJlbnRlcmVkLWluLWVycm9yXCIgaXMgd2h5IHRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgb2Ygb3RoZXIgZWxlbWVudHMuICAgXHJcbiAgICogU29tZSByZXBvcnRpbmcgd29yayBmbG93cyByZXF1aXJlIHRoYXQgdGhlIG9yaWdpbmFsIG5hcnJhdGl2ZSBvZiBhIGZpbmFsIGRvY3VtZW50IG5ldmVyIGJlIGFsdGVyZWQ7IGluc3RlYWQsIG9ubHkgbmV3IG5hcnJhdGl2ZSBjYW4gYmUgYWRkZWQuIFRoZSBjb21wb3NpdGlvbiByZXNvdXJjZSBoYXMgbm8gZXhwbGljaXQgc3RhdHVzIGZvciBleHBsaWNpdGx5IG5vdGluZyB3aGV0aGVyIHRoaXMgYnVzaW5lc3MgcnVsZSBpcyBpbiBlZmZlY3QuIFRoaXMgd291bGQgYmUgaGFuZGxlZCBieSBhbiBleHRlbnNpb24gaWYgcmVxdWlyZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1czogZmhpci5GaGlyQ29kZTxDb21wb3NpdGlvblN0YXR1c0NvZGVUeXBlPnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEZvciBDb21wb3NpdGlvbiB0eXBlLCBMT0lOQyBpcyB1YmlxdWl0b3VzIGFuZCBzdHJvbmdseSBlbmRvcnNlZCBieSBITDcuIE1vc3QgaW1wbGVtZW50YXRpb24gZ3VpZGVzIHdpbGwgcmVxdWlyZSBhIHNwZWNpZmljIExPSU5DIGNvZGUsIG9yIHVzZSBMT0lOQyBhcyBhbiBleHRlbnNpYmxlIGJpbmRpbmcuXHJcbiAgICovXHJcbiAgcHVibGljIHR5cGU6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBhIG1ldGFkYXRhIGZpZWxkIGZyb20gW1hEUy9NSERdKGh0dHA6Ly93aWtpLmloZS5uZXQvaW5kZXgucGhwP3RpdGxlPU1vYmlsZV9hY2Nlc3NfdG9fSGVhbHRoX0RvY3VtZW50c18oTUhEKSkuXHJcbiAgICovXHJcbiAgcHVibGljIGNhdGVnb3J5OiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIEZvciBjbGluaWNhbCBkb2N1bWVudHMsIHRoaXMgaXMgdXN1YWxseSB0aGUgcGF0aWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgc3ViamVjdD86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgdGhlIGNsaW5pY2FsIGVuY291bnRlciBvciB0eXBlIG9mIGNhcmUgdGhpcyBkb2N1bWVudGF0aW9uIGlzIGFzc29jaWF0ZWQgd2l0aC5cclxuICAgKi9cclxuICBwdWJsaWMgZW5jb3VudGVyPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBMYXN0IE1vZGlmaWVkIERhdGUgb24gdGhlIGNvbXBvc2l0aW9uIG1heSBiZSBhZnRlciB0aGUgZGF0ZSBvZiB0aGUgZG9jdW1lbnQgd2FzIGF0dGVzdGVkIHdpdGhvdXQgYmVpbmcgY2hhbmdlZC5cclxuICAgKi9cclxuICBwdWJsaWMgZGF0ZTogZmhpci5GaGlyRGF0ZVRpbWV8bnVsbDtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHdobyBpcyByZXNwb25zaWJsZSBmb3IgdGhlIGluZm9ybWF0aW9uIGluIHRoZSBjb21wb3NpdGlvbiwgbm90IG5lY2Vzc2FyaWx5IHdobyB0eXBlZCBpdCBpbi5cclxuICAgKi9cclxuICBwdWJsaWMgYXV0aG9yOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIEZvciBtYW55IGNvbXBvc2l0aW9ucywgdGhlIHRpdGxlIGlzIHRoZSBzYW1lIGFzIHRoZSB0ZXh0IG9yIGEgZGlzcGxheSBuYW1lIG9mIENvbXBvc2l0aW9uLnR5cGUgKGUuZy4gYSBcImNvbnN1bHRhdGlvblwiIG9yIFwicHJvZ3Jlc3Mgbm90ZVwiKS4gTm90ZSB0aGF0IENEQSBkb2VzIG5vdCBtYWtlIHRpdGxlIG1hbmRhdG9yeSwgYnV0IHRoZXJlIGFyZSBubyBrbm93biBjYXNlcyB3aGVyZSBpdCBpcyB1c2VmdWwgZm9yIHRpdGxlIHRvIGJlIG9taXR0ZWQsIHNvIGl0IGlzIG1hbmRhdG9yeSBoZXJlLiBGZWVkYmFjayBvbiB0aGlzIHJlcXVpcmVtZW50IGlzIHdlbGNvbWUgZHVyaW5nIHRoZSB0cmlhbCB1c2UgcGVyaW9kLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0aXRsZTogZmhpci5GaGlyU3RyaW5nfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGV4YWN0IHVzZSBvZiB0aGlzIGVsZW1lbnQsIGFuZCBlbmZvcmNlbWVudCBhbmQgaXNzdWVzIHJlbGF0ZWQgdG8gaGlnaGx5IHNlbnNpdGl2ZSBkb2N1bWVudHMgYXJlIG91dCBvZiBzY29wZSBmb3IgdGhlIGJhc2Ugc3BlY2lmaWNhdGlvbiwgYW5kIGRlbGVnYXRlZCB0byBpbXBsZW1lbnRhdGlvbiBwcm9maWxlcyAoc2VlIHNlY3VyaXR5IHNlY3Rpb24pLiAgVGhpcyBlbGVtZW50IGlzIGxhYmVsZWQgYXMgYSBtb2RpZmllciBiZWNhdXNlIGhpZ2hseSBjb25maWRlbnRpYWwgZG9jdW1lbnRzIG11c3Qgbm90IGJlIHRyZWF0ZWQgYXMgaWYgdGhleSBhcmUgbm90LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25maWRlbnRpYWxpdHk/OiBmaGlyLkZoaXJDb2RlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBPbmx5IGxpc3QgZWFjaCBhdHRlc3RlciBvbmNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhdHRlc3RlcjogZmhpci5Db21wb3NpdGlvbkF0dGVzdGVyW107XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyB1c2VmdWwgd2hlbiBkb2N1bWVudHMgYXJlIGRlcml2ZWQgZnJvbSBhIGNvbXBvc2l0aW9uIC0gcHJvdmlkZXMgZ3VpZGFuY2UgZm9yIGhvdyB0byBnZXQgdGhlIGxhdGVzdCB2ZXJzaW9uIG9mIHRoZSBkb2N1bWVudC4gVGhpcyBpcyBvcHRpb25hbCBiZWNhdXNlIHRoaXMgaXMgc29tZXRpbWVzIG5vdCBrbm93biBieSB0aGUgYXV0aG9yaW5nIHN5c3RlbSwgYW5kIGNhbiBiZSBpbmZlcnJlZCBieSBjb250ZXh0LiBIb3dldmVyLCBpdCBpcyBpbXBvcnRhbnQgdGhhdCB0aGlzIGluZm9ybWF0aW9uIGJlIGtub3duIHdoZW4gd29ya2luZyB3aXRoIGEgZGVyaXZlZCBkb2N1bWVudCwgc28gcHJvdmlkaW5nIGEgY3VzdG9kaWFuIGlzIGVuY291cmFnZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGN1c3RvZGlhbj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGRvY3VtZW50IGlzIGEgdmVyc2lvbiBzcGVjaWZpYyBjb21wb3NpdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgcmVsYXRlc1RvOiBmaGlyLkNvbXBvc2l0aW9uUmVsYXRlc1RvW107XHJcbiAgLyoqXHJcbiAgICogVGhlIGV2ZW50IG5lZWRzIHRvIGJlIGNvbnNpc3RlbnQgd2l0aCB0aGUgdHlwZSBlbGVtZW50LCB0aG91Z2ggY2FuIHByb3ZpZGUgZnVydGhlciBpbmZvcm1hdGlvbiBpZiBkZXNpcmVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBldmVudDogZmhpci5Db21wb3NpdGlvbkV2ZW50W107XHJcbiAgLyoqXHJcbiAgICogVGhlIHJvb3Qgb2YgdGhlIHNlY3Rpb25zIHRoYXQgbWFrZSB1cCB0aGUgY29tcG9zaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHNlY3Rpb246IGZoaXIuQ29tcG9zaXRpb25TZWN0aW9uW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQ29tcG9zaXRpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxDb21wb3NpdGlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdDb21wb3NpdGlvbic7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gbmV3IGZoaXIuSWRlbnRpZmllcihzb3VyY2UuaWRlbnRpZmllcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0YXR1cyddKSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8Q29tcG9zaXRpb25TdGF0dXNDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2Uuc3RhdHVzfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zdGF0dXMnXSkge1xyXG4gICAgICBpZiAodGhpcy5zdGF0dXMpIHsgdGhpcy5zdGF0dXMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc3RhdHVzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8Q29tcG9zaXRpb25TdGF0dXNDb2RlVHlwZT4oc291cmNlLl9zdGF0dXMgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3R5cGUnXSkgeyB0aGlzLnR5cGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnR5cGUpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy50eXBlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY2F0ZWdvcnknXSkgeyB0aGlzLmNhdGVnb3J5ID0gc291cmNlLmNhdGVnb3J5Lm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY2F0ZWdvcnkgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3ViamVjdCddKSB7IHRoaXMuc3ViamVjdCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2Uuc3ViamVjdCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2VuY291bnRlciddKSB7IHRoaXMuZW5jb3VudGVyID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5lbmNvdW50ZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWydkYXRlJ10pIHsgdGhpcy5kYXRlID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLmRhdGV9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZGF0ZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19kYXRlJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZGF0ZSkgeyB0aGlzLmRhdGUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZGF0ZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRhdGUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoc291cmNlLl9kYXRlIGFzIFBhcnRpYWw8Zmhpci5GaGlyRGF0ZVRpbWVBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2F1dGhvciddKSB7IHRoaXMuYXV0aG9yID0gc291cmNlLmF1dGhvci5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmF1dGhvciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWyd0aXRsZSddKSB7IHRoaXMudGl0bGUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnRpdGxlfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnRpdGxlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3RpdGxlJ10pIHtcclxuICAgICAgaWYgKHRoaXMudGl0bGUpIHsgdGhpcy50aXRsZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl90aXRsZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnRpdGxlID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3RpdGxlIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydjb25maWRlbnRpYWxpdHknXSkgeyB0aGlzLmNvbmZpZGVudGlhbGl0eSA9IG5ldyBmaGlyLkZoaXJDb2RlKHt2YWx1ZTogc291cmNlLmNvbmZpZGVudGlhbGl0eX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfY29uZmlkZW50aWFsaXR5J10pIHtcclxuICAgICAgaWYgKHRoaXMuY29uZmlkZW50aWFsaXR5KSB7IHRoaXMuY29uZmlkZW50aWFsaXR5LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2NvbmZpZGVudGlhbGl0eSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmNvbmZpZGVudGlhbGl0eSA9IG5ldyBmaGlyLkZoaXJDb2RlKHNvdXJjZS5fY29uZmlkZW50aWFsaXR5IGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnYXR0ZXN0ZXInXSkgeyB0aGlzLmF0dGVzdGVyID0gc291cmNlLmF0dGVzdGVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29tcG9zaXRpb25BdHRlc3Rlcih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmF0dGVzdGVyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2N1c3RvZGlhbiddKSB7IHRoaXMuY3VzdG9kaWFuID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5jdXN0b2RpYW4pOyB9XHJcbiAgICBpZiAoc291cmNlWydyZWxhdGVzVG8nXSkgeyB0aGlzLnJlbGF0ZXNUbyA9IHNvdXJjZS5yZWxhdGVzVG8ubWFwKCh4KSA9PiBuZXcgZmhpci5Db21wb3NpdGlvblJlbGF0ZXNUbyh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnJlbGF0ZXNUbyA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydldmVudCddKSB7IHRoaXMuZXZlbnQgPSBzb3VyY2UuZXZlbnQubWFwKCh4KSA9PiBuZXcgZmhpci5Db21wb3NpdGlvbkV2ZW50KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZXZlbnQgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2VjdGlvbiddKSB7IHRoaXMuc2VjdGlvbiA9IHNvdXJjZS5zZWN0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29tcG9zaXRpb25TZWN0aW9uKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc2VjdGlvbiA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlcXVpcmVkLWJvdW5kIFZhbHVlIFNldCBmb3Igc3RhdHVzIChDb21wb3NpdGlvbi5zdGF0dXMpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgc3RhdHVzUmVxdWlyZWRDb2RlcygpIHtcclxuICAgIHJldHVybiBDb21wb3NpdGlvblN0YXR1c0NvZGVzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBQcmVmZXJyZWQtYm91bmQgVmFsdWUgU2V0IGZvciB0eXBlIChDb21wb3NpdGlvbi50eXBlKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IHR5cGVQcmVmZXJyZWRDb2RpbmdzKCk6RG9jVHlwZUNvZGluZ1R5cGUge1xyXG4gICAgcmV0dXJuIERvY1R5cGVDb2RpbmdzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIGNvbmZpZGVudGlhbGl0eSAoQ29tcG9zaXRpb24uY29uZmlkZW50aWFsaXR5KVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IGNvbmZpZGVudGlhbGl0eVJlcXVpcmVkQ29kZXMoKSB7XHJcbiAgICByZXR1cm4gVjNDb25maWRlbnRpYWxpdHlDbGFzc2lmaWNhdGlvbkNvZGVzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdDb21wb3NpdGlvbicgfVxyXG4gICAgaWYgKCF0aGlzWydyZXNvdXJjZVR5cGUnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgcmVzb3VyY2VUeXBlIGZoaXI6IENvbXBvc2l0aW9uLnJlc291cmNlVHlwZTpcIkNvbXBvc2l0aW9uXCInLCBleHByZXNzaW9uOiBbZXhwcmVzc2lvbl0gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImlkZW50aWZpZXJcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5pZGVudGlmaWVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5pZGVudGlmaWVyJykpOyB9XHJcbiAgICBpZiAoIXRoaXNbJ3N0YXR1cyddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBzdGF0dXMgZmhpcjogQ29tcG9zaXRpb24uc3RhdHVzOmNvZGUnLCBleHByZXNzaW9uOiBbZXhwcmVzc2lvbl0gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1snc3RhdHVzJ10gJiYgKCFPYmplY3QudmFsdWVzKENvbXBvc2l0aW9uU3RhdHVzQ29kZXMpLmluY2x1ZGVzKHRoaXMuc3RhdHVzLnZhbHVlIGFzIGFueSkpKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdjb2RlLWludmFsaWQnLCBkaWFnbm9zdGljczogJ0ludmFsaWQgY29kZSBwcm9wZXJ0eSBzdGF0dXMgZmhpcjogQ29tcG9zaXRpb24uc3RhdHVzOmNvZGUgUmVxdWlyZWQgYmluZGluZyB0bzogQ29tcG9zaXRpb25TdGF0dXMnLCBleHByZXNzaW9uOiBbZXhwcmVzc2lvbl0gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInN0YXR1c1wiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnN0YXR1cy5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuc3RhdHVzJykpOyB9XHJcbiAgICBpZiAoIXRoaXNbJ3R5cGUnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgdHlwZSBmaGlyOiBDb21wb3NpdGlvbi50eXBlOkNvZGVhYmxlQ29uY2VwdCcsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1widHlwZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnR5cGUuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLnR5cGUnKSk7IH1cclxuICAgIGlmICh0aGlzW1wiY2F0ZWdvcnlcIl0pIHsgdGhpcy5jYXRlZ29yeS5mb3JFYWNoKCh4LGkpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uK2AuY2F0ZWdvcnlbJHtpfV1gKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wic3ViamVjdFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnN1YmplY3QuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLnN1YmplY3QnKSk7IH1cclxuICAgIGlmICh0aGlzW1wiZW5jb3VudGVyXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZW5jb3VudGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5lbmNvdW50ZXInKSk7IH1cclxuICAgIGlmICghdGhpc1snZGF0ZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBkYXRlIGZoaXI6IENvbXBvc2l0aW9uLmRhdGU6ZGF0ZVRpbWUnLCBleHByZXNzaW9uOiBbZXhwcmVzc2lvbl0gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImRhdGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5kYXRlLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5kYXRlJykpOyB9XHJcbiAgICBpZiAoIXRoaXNbJ2F1dGhvciddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBhdXRob3IgZmhpcjogQ29tcG9zaXRpb24uYXV0aG9yOlJlZmVyZW5jZScsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkodGhpcy5hdXRob3IpKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdzdHJ1Y3R1cmUnLCBkaWFnbm9zdGljczogJ0ZvdW5kIHNjYWxhciBpbiBhcnJheSBwcm9wZXJ0eSBhdXRob3IgZmhpcjogQ29tcG9zaXRpb24uYXV0aG9yOlJlZmVyZW5jZScsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5hdXRob3IubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBhdXRob3IgZmhpcjogQ29tcG9zaXRpb24uYXV0aG9yOlJlZmVyZW5jZScsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiYXV0aG9yXCJdKSB7IHRoaXMuYXV0aG9yLmZvckVhY2goKHgsaSkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rYC5hdXRob3JbJHtpfV1gKSk7IH0pIH1cclxuICAgIGlmICghdGhpc1sndGl0bGUnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgdGl0bGUgZmhpcjogQ29tcG9zaXRpb24udGl0bGU6c3RyaW5nJywgZXhwcmVzc2lvbjogW2V4cHJlc3Npb25dIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJ0aXRsZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnRpdGxlLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy50aXRsZScpKTsgfVxyXG4gICAgaWYgKHRoaXNbJ2NvbmZpZGVudGlhbGl0eSddICYmICghT2JqZWN0LnZhbHVlcyhWM0NvbmZpZGVudGlhbGl0eUNsYXNzaWZpY2F0aW9uQ29kZXMpLmluY2x1ZGVzKHRoaXMuY29uZmlkZW50aWFsaXR5LnZhbHVlIGFzIGFueSkpKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdjb2RlLWludmFsaWQnLCBkaWFnbm9zdGljczogJ0ludmFsaWQgY29kZSBwcm9wZXJ0eSBjb25maWRlbnRpYWxpdHkgZmhpcjogQ29tcG9zaXRpb24uY29uZmlkZW50aWFsaXR5OmNvZGUgUmVxdWlyZWQgYmluZGluZyB0bzogVjNDb25maWRlbnRpYWxpdHlDbGFzc2lmaWNhdGlvbicsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiY29uZmlkZW50aWFsaXR5XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY29uZmlkZW50aWFsaXR5LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5jb25maWRlbnRpYWxpdHknKSk7IH1cclxuICAgIGlmICh0aGlzW1wiYXR0ZXN0ZXJcIl0pIHsgdGhpcy5hdHRlc3Rlci5mb3JFYWNoKCh4LGkpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uK2AuYXR0ZXN0ZXJbJHtpfV1gKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wiY3VzdG9kaWFuXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY3VzdG9kaWFuLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5jdXN0b2RpYW4nKSk7IH1cclxuICAgIGlmICh0aGlzW1wicmVsYXRlc1RvXCJdKSB7IHRoaXMucmVsYXRlc1RvLmZvckVhY2goKHgsaSkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rYC5yZWxhdGVzVG9bJHtpfV1gKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wiZXZlbnRcIl0pIHsgdGhpcy5ldmVudC5mb3JFYWNoKCh4LGkpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uK2AuZXZlbnRbJHtpfV1gKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wic2VjdGlvblwiXSkgeyB0aGlzLnNlY3Rpb24uZm9yRWFjaCgoeCxpKSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbitgLnNlY3Rpb25bJHtpfV1gKSk7IH0pIH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbiJdfQ==