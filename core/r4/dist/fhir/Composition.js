// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: Composition
import * as fhir from '../fhir.js';
// @ts-ignore
import { CompositionAttestationModeCodes } from '../fhirValueSets/CompositionAttestationModeCodes.js';
// @ts-ignore
import { DocumentRelationshipTypeCodes } from '../fhirValueSets/DocumentRelationshipTypeCodes.js';
// @ts-ignore
import { ListModeCodes } from '../fhirValueSets/ListModeCodes.js';
// @ts-ignore
import { ListOrderCodings, } from '../fhirValueSets/ListOrderCodings.js';
// @ts-ignore
import { ListEmptyReasonCodings, } from '../fhirValueSets/ListEmptyReasonCodings.js';
// @ts-ignore
import { CompositionStatusCodes } from '../fhirValueSets/CompositionStatusCodes.js';
// @ts-ignore
import { DocTypeCodings, } from '../fhirValueSets/DocTypeCodings.js';
// @ts-ignore
import { V3ConfidentialityClassificationCodes } from '../fhirValueSets/V3ConfidentialityClassificationCodes.js';
/**
 * Only list each attester once.
 */
export class CompositionAttester extends fhir.BackboneElement {
    /**
     * Default constructor for CompositionAttester - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['mode']) {
            this.mode = new fhir.FhirCode({ value: source.mode });
        }
        else {
            this.mode = null;
        }
        if (source['_mode']) {
            if (this.mode) {
                this.mode.addExtendedProperties(source._mode);
            }
            else {
                this.mode = new fhir.FhirCode(source._mode);
            }
        }
        if (source['time']) {
            this.time = new fhir.FhirDateTime({ value: source.time });
        }
        if (source['_time']) {
            if (this.time) {
                this.time.addExtendedProperties(source._time);
            }
            else {
                this.time = new fhir.FhirDateTime(source._time);
            }
        }
        if (source['party']) {
            this.party = new fhir.Reference(source.party);
        }
    }
    /**
     * Required-bound Value Set for mode (Composition.attester.mode)
     */
    static get modeRequiredCodes() {
        return CompositionAttestationModeCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'Composition.attester';
        }
        if (!this['mode']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property mode fhir: Composition.attester.mode:code', expression: [expression] });
        }
        if (this['mode'] && (!Object.values(CompositionAttestationModeCodes).includes(this.mode.value))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'mode (Composition.attester.mode) of type code is missing code for Required binding to: CompositionAttestationMode', expression: [expression] });
        }
        if (this["mode"]) {
            issues.push(...this.mode.doModelValidation(expression + '.mode'));
        }
        if (this["time"]) {
            issues.push(...this.time.doModelValidation(expression + '.time'));
        }
        if (this["party"]) {
            issues.push(...this.party.doModelValidation(expression + '.party'));
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
CompositionAttester._fts_dataType = 'CompositionAttester';
/**
 * A document is a version specific composition.
 */
export class CompositionRelatesTo extends fhir.BackboneElement {
    /**
     * Default constructor for CompositionRelatesTo - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.FhirCode({ value: source.code });
        }
        else {
            this.code = null;
        }
        if (source['_code']) {
            if (this.code) {
                this.code.addExtendedProperties(source._code);
            }
            else {
                this.code = new fhir.FhirCode(source._code);
            }
        }
        if (source['target']) {
            this.target = source.target;
        }
        else if (source['targetIdentifier']) {
            this.target = new fhir.Identifier(source.targetIdentifier);
        }
        else if (source['targetReference']) {
            this.target = new fhir.Reference(source.targetReference);
        }
        else {
            this.target = null;
        }
    }
    /**
     * Required-bound Value Set for code (Composition.relatesTo.code)
     */
    static get codeRequiredCodes() {
        return DocumentRelationshipTypeCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'Composition.relatesTo';
        }
        if (!this['code']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property code fhir: Composition.relatesTo.code:code', expression: [expression] });
        }
        if (this['code'] && (!Object.values(DocumentRelationshipTypeCodes).includes(this.code.value))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'code (Composition.relatesTo.code) of type code is missing code for Required binding to: DocumentRelationshipType', expression: [expression] });
        }
        if (this["code"]) {
            issues.push(...this.code.doModelValidation(expression + '.code'));
        }
        if (!this['target']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property target fhir: Composition.relatesTo.target[x]:', expression: [expression] });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
CompositionRelatesTo._fts_dataType = 'CompositionRelatesTo';
/**
 * Internal flag to properly serialize choice-type element Composition.relatesTo.target[x]
 */
CompositionRelatesTo._fts_targetIsChoice = true;
/**
 * The event needs to be consistent with the type element, though can provide further information if desired.
 */
export class CompositionEvent extends fhir.BackboneElement {
    /**
     * Default constructor for CompositionEvent - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = source.code.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.code = [];
        }
        if (source['period']) {
            this.period = new fhir.Period(source.period);
        }
        if (source['detail']) {
            this.detail = source.detail.map((x) => new fhir.Reference(x));
        }
        else {
            this.detail = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'Composition.event';
        }
        if (this["code"]) {
            this.code.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.code[${i}]`)); });
        }
        if (this["period"]) {
            issues.push(...this.period.doModelValidation(expression + '.period'));
        }
        if (this["detail"]) {
            this.detail.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.detail[${i}]`)); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
CompositionEvent._fts_dataType = 'CompositionEvent';
/**
 * The root of the sections that make up the composition.
 */
export class CompositionSection extends fhir.BackboneElement {
    /**
     * Default constructor for CompositionSection - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['title']) {
            this.title = new fhir.FhirString({ value: source.title });
        }
        if (source['_title']) {
            if (this.title) {
                this.title.addExtendedProperties(source._title);
            }
            else {
                this.title = new fhir.FhirString(source._title);
            }
        }
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        if (source['author']) {
            this.author = source.author.map((x) => new fhir.Reference(x));
        }
        else {
            this.author = [];
        }
        if (source['focus']) {
            this.focus = new fhir.Reference(source.focus);
        }
        if (source['text']) {
            this.text = new fhir.Narrative(source.text);
        }
        if (source['mode']) {
            this.mode = new fhir.FhirCode({ value: source.mode });
        }
        if (source['_mode']) {
            if (this.mode) {
                this.mode.addExtendedProperties(source._mode);
            }
            else {
                this.mode = new fhir.FhirCode(source._mode);
            }
        }
        if (source['orderedBy']) {
            this.orderedBy = new fhir.CodeableConcept(source.orderedBy);
        }
        if (source['entry']) {
            this.entry = source.entry.map((x) => new fhir.Reference(x));
        }
        else {
            this.entry = [];
        }
        if (source['emptyReason']) {
            this.emptyReason = new fhir.CodeableConcept(source.emptyReason);
        }
        if (source['section']) {
            this.section = source.section.map((x) => new fhir.CompositionSection(x));
        }
        else {
            this.section = [];
        }
    }
    /**
     * Required-bound Value Set for mode (Composition.section.mode)
     */
    static get modeRequiredCodes() {
        return ListModeCodes;
    }
    /**
     * Preferred-bound Value Set for orderedBy (Composition.section.orderedBy)
     */
    static get orderedByPreferredCodings() {
        return ListOrderCodings;
    }
    /**
     * Preferred-bound Value Set for emptyReason (Composition.section.emptyReason)
     */
    static get emptyReasonPreferredCodings() {
        return ListEmptyReasonCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'Composition.section';
        }
        if (this["title"]) {
            issues.push(...this.title.doModelValidation(expression + '.title'));
        }
        if (this["code"]) {
            issues.push(...this.code.doModelValidation(expression + '.code'));
        }
        if (this["author"]) {
            this.author.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.author[${i}]`)); });
        }
        if (this["focus"]) {
            issues.push(...this.focus.doModelValidation(expression + '.focus'));
        }
        if (this["text"]) {
            issues.push(...this.text.doModelValidation(expression + '.text'));
        }
        if (this['mode'] && (!Object.values(ListModeCodes).includes(this.mode.value))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'mode (Composition.section.mode) of type code is missing code for Required binding to: ListMode', expression: [expression] });
        }
        if (this["mode"]) {
            issues.push(...this.mode.doModelValidation(expression + '.mode'));
        }
        if (this["orderedBy"]) {
            issues.push(...this.orderedBy.doModelValidation(expression + '.orderedBy'));
        }
        if (this["entry"]) {
            this.entry.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.entry[${i}]`)); });
        }
        if (this["emptyReason"]) {
            issues.push(...this.emptyReason.doModelValidation(expression + '.emptyReason'));
        }
        if (this["section"]) {
            this.section.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.section[${i}]`)); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
CompositionSection._fts_dataType = 'CompositionSection';
/**
 * A set of healthcare-related information that is assembled together into a single logical package that provides a single coherent statement of meaning, establishes its own context and that has clinical attestation with regard to who is making the statement. A Composition defines the structure and narrative content necessary for a document. However, a Composition alone does not constitute a document. Rather, the Composition must be the first entry in a Bundle where Bundle.type=document, and any other resources referenced from Composition must be included as subsequent entries in the Bundle (for example Patient, Practitioner, Encounter, etc.).
 */
export class Composition extends fhir.DomainResource {
    /**
     * Default constructor for Composition - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'Composition';
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier);
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type);
        }
        else {
            this.type = null;
        }
        if (source['category']) {
            this.category = source.category.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.category = [];
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject);
        }
        if (source['encounter']) {
            this.encounter = new fhir.Reference(source.encounter);
        }
        if (source['date']) {
            this.date = new fhir.FhirDateTime({ value: source.date });
        }
        else {
            this.date = null;
        }
        if (source['_date']) {
            if (this.date) {
                this.date.addExtendedProperties(source._date);
            }
            else {
                this.date = new fhir.FhirDateTime(source._date);
            }
        }
        if (source['author']) {
            this.author = source.author.map((x) => new fhir.Reference(x));
        }
        else {
            this.author = [];
        }
        if (source['title']) {
            this.title = new fhir.FhirString({ value: source.title });
        }
        else {
            this.title = null;
        }
        if (source['_title']) {
            if (this.title) {
                this.title.addExtendedProperties(source._title);
            }
            else {
                this.title = new fhir.FhirString(source._title);
            }
        }
        if (source['confidentiality']) {
            this.confidentiality = new fhir.FhirCode({ value: source.confidentiality });
        }
        if (source['_confidentiality']) {
            if (this.confidentiality) {
                this.confidentiality.addExtendedProperties(source._confidentiality);
            }
            else {
                this.confidentiality = new fhir.FhirCode(source._confidentiality);
            }
        }
        if (source['attester']) {
            this.attester = source.attester.map((x) => new fhir.CompositionAttester(x));
        }
        else {
            this.attester = [];
        }
        if (source['custodian']) {
            this.custodian = new fhir.Reference(source.custodian);
        }
        if (source['relatesTo']) {
            this.relatesTo = source.relatesTo.map((x) => new fhir.CompositionRelatesTo(x));
        }
        else {
            this.relatesTo = [];
        }
        if (source['event']) {
            this.event = source.event.map((x) => new fhir.CompositionEvent(x));
        }
        else {
            this.event = [];
        }
        if (source['section']) {
            this.section = source.section.map((x) => new fhir.CompositionSection(x));
        }
        else {
            this.section = [];
        }
    }
    /**
     * Required-bound Value Set for status (Composition.status)
     */
    static get statusRequiredCodes() {
        return CompositionStatusCodes;
    }
    /**
     * Preferred-bound Value Set for type (Composition.type)
     */
    static get typePreferredCodings() {
        return DocTypeCodings;
    }
    /**
     * Required-bound Value Set for confidentiality (Composition.confidentiality)
     */
    static get confidentialityRequiredCodes() {
        return V3ConfidentialityClassificationCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'Composition';
        }
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType fhir: Composition.resourceType:"Composition"', expression: [expression] });
        }
        if (this["identifier"]) {
            issues.push(...this.identifier.doModelValidation(expression + '.identifier'));
        }
        if (!this['status']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property status fhir: Composition.status:code', expression: [expression] });
        }
        if (this['status'] && (!Object.values(CompositionStatusCodes).includes(this.status.value))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'status (Composition.status) of type code is missing code for Required binding to: CompositionStatus', expression: [expression] });
        }
        if (this["status"]) {
            issues.push(...this.status.doModelValidation(expression + '.status'));
        }
        if (!this['type']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property type fhir: Composition.type:CodeableConcept', expression: [expression] });
        }
        if (this["type"]) {
            issues.push(...this.type.doModelValidation(expression + '.type'));
        }
        if (this["category"]) {
            this.category.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.category[${i}]`)); });
        }
        if (this["subject"]) {
            issues.push(...this.subject.doModelValidation(expression + '.subject'));
        }
        if (this["encounter"]) {
            issues.push(...this.encounter.doModelValidation(expression + '.encounter'));
        }
        if (!this['date']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property date fhir: Composition.date:dateTime', expression: [expression] });
        }
        if (this["date"]) {
            issues.push(...this.date.doModelValidation(expression + '.date'));
        }
        if (!this['author']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property author fhir: Composition.author:Reference', expression: [expression] });
        }
        else if (!Array.isArray(this.author)) {
            issues.push({ severity: 'error', code: 'structure', diagnostics: 'Found scalar in array property author fhir: Composition.author:Reference', expression: [expression] });
        }
        else if (this.author.length === 0) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property author fhir: Composition.author:Reference', expression: [expression] });
        }
        if (this["author"]) {
            this.author.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.author[${i}]`)); });
        }
        if (!this['title']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property title fhir: Composition.title:string', expression: [expression] });
        }
        if (this["title"]) {
            issues.push(...this.title.doModelValidation(expression + '.title'));
        }
        if (this['confidentiality'] && (!Object.values(V3ConfidentialityClassificationCodes).includes(this.confidentiality.value))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'confidentiality (Composition.confidentiality) of type code is missing code for Required binding to: V3ConfidentialityClassification', expression: [expression] });
        }
        if (this["confidentiality"]) {
            issues.push(...this.confidentiality.doModelValidation(expression + '.confidentiality'));
        }
        if (this["attester"]) {
            this.attester.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.attester[${i}]`)); });
        }
        if (this["custodian"]) {
            issues.push(...this.custodian.doModelValidation(expression + '.custodian'));
        }
        if (this["relatesTo"]) {
            this.relatesTo.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.relatesTo[${i}]`)); });
        }
        if (this["event"]) {
            this.event.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.event[${i}]`)); });
        }
        if (this["section"]) {
            this.section.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.section[${i}]`)); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
Composition._fts_dataType = 'Composition';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29tcG9zaXRpb24uanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL0NvbXBvc2l0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQiwrQ0FBK0M7QUFDL0Msa0NBQWtDO0FBQ2xDLDZCQUE2QjtBQUU3QixPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQUluQyxhQUFhO0FBQ2IsT0FBTyxFQUFFLCtCQUErQixFQUF1QyxNQUFNLHFEQUFxRCxDQUFDO0FBRzNJLGFBQWE7QUFDYixPQUFPLEVBQUUsNkJBQTZCLEVBQXFDLE1BQU0sbURBQW1ELENBQUM7QUFXckksYUFBYTtBQUNiLE9BQU8sRUFBRSxhQUFhLEVBQXFCLE1BQU0sbUNBQW1DLENBQUM7QUFDckYsYUFBYTtBQUNiLE9BQU8sRUFBRSxnQkFBZ0IsR0FBdUIsTUFBTSxzQ0FBc0MsQ0FBQztBQUc3RixhQUFhO0FBQ2IsT0FBTyxFQUFFLHNCQUFzQixHQUE2QixNQUFNLDRDQUE0QyxDQUFDO0FBSy9HLGFBQWE7QUFDYixPQUFPLEVBQUUsc0JBQXNCLEVBQThCLE1BQU0sNENBQTRDLENBQUM7QUFDaEgsYUFBYTtBQUNiLE9BQU8sRUFBRSxjQUFjLEdBQXFCLE1BQU0sb0NBQW9DLENBQUM7QUFTdkYsYUFBYTtBQUNiLE9BQU8sRUFBRSxvQ0FBb0MsRUFBNEMsTUFBTSwwREFBMEQsQ0FBQztBQTJCMUo7O0dBRUc7QUFDSCxNQUFNLE9BQU8sbUJBQW9CLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFpQjNEOztPQUVHO0lBQ0gsWUFBWSxTQUEwQyxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUNoRyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQXFDLEVBQUMsS0FBSyxFQUFFLE1BQU0s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Q0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQUU7UUFDbkksSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLENBQUMsVUFBVSxHQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7U0FBRTtRQUN2SCxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLEdBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtTQUFFO1FBQzdILE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBekxEOztHQUVHO0FBQzZCLHlCQUFhLEdBQVUsYUFBYSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0LmNvcmUgdmVyc2lvbjogNC4wLjFcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBDb21wb3NpdGlvblxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29tcG9zaXRpb25BdHRlc3RhdGlvbk1vZGVDb2RpbmdzLCBDb21wb3NpdGlvbkF0dGVzdGF0aW9uTW9kZUNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbXBvc2l0aW9uQXR0ZXN0YXRpb25Nb2RlQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29tcG9zaXRpb25BdHRlc3RhdGlvbk1vZGVDb2RlcywgIENvbXBvc2l0aW9uQXR0ZXN0YXRpb25Nb2RlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbXBvc2l0aW9uQXR0ZXN0YXRpb25Nb2RlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IERvY3VtZW50UmVsYXRpb25zaGlwVHlwZUNvZGluZ3MsIERvY3VtZW50UmVsYXRpb25zaGlwVHlwZUNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0RvY3VtZW50UmVsYXRpb25zaGlwVHlwZUNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IERvY3VtZW50UmVsYXRpb25zaGlwVHlwZUNvZGVzLCAgRG9jdW1lbnRSZWxhdGlvbnNoaXBUeXBlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0RvY3VtZW50UmVsYXRpb25zaGlwVHlwZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBWM0FjdENvZGluZ3MsIFYzQWN0Q29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVjNBY3RDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBWM0FjdENvZGVzLCAgVjNBY3RDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVjNBY3RDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRG9jU2VjdGlvbkNvZGluZ3MsIERvY1NlY3Rpb25Db2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Eb2NTZWN0aW9uQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRG9jU2VjdGlvbkNvZGVzLCAgRG9jU2VjdGlvbkNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Eb2NTZWN0aW9uQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IExpc3RNb2RlQ29kaW5ncywgTGlzdE1vZGVDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9MaXN0TW9kZUNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IExpc3RNb2RlQ29kZXMsICBMaXN0TW9kZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9MaXN0TW9kZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBMaXN0T3JkZXJDb2RpbmdzLCBMaXN0T3JkZXJDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9MaXN0T3JkZXJDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBMaXN0T3JkZXJDb2RlcywgIExpc3RPcmRlckNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9MaXN0T3JkZXJDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTGlzdEVtcHR5UmVhc29uQ29kaW5ncywgTGlzdEVtcHR5UmVhc29uQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTGlzdEVtcHR5UmVhc29uQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTGlzdEVtcHR5UmVhc29uQ29kZXMsICBMaXN0RW1wdHlSZWFzb25Db2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTGlzdEVtcHR5UmVhc29uQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbXBvc2l0aW9uU3RhdHVzQ29kaW5ncywgQ29tcG9zaXRpb25TdGF0dXNDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db21wb3NpdGlvblN0YXR1c0NvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbXBvc2l0aW9uU3RhdHVzQ29kZXMsICBDb21wb3NpdGlvblN0YXR1c0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db21wb3NpdGlvblN0YXR1c0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEb2NUeXBlQ29kaW5ncywgRG9jVHlwZUNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0RvY1R5cGVDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEb2NUeXBlQ29kZXMsICBEb2NUeXBlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0RvY1R5cGVDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRG9jdW1lbnRDbGFzc0NvZGluZ3MsIERvY3VtZW50Q2xhc3NDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Eb2N1bWVudENsYXNzQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRG9jdW1lbnRDbGFzc0NvZGVzLCAgRG9jdW1lbnRDbGFzc0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Eb2N1bWVudENsYXNzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFYzQ29uZmlkZW50aWFsaXR5Q2xhc3NpZmljYXRpb25Db2RpbmdzLCBWM0NvbmZpZGVudGlhbGl0eUNsYXNzaWZpY2F0aW9uQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVjNDb25maWRlbnRpYWxpdHlDbGFzc2lmaWNhdGlvbkNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFYzQ29uZmlkZW50aWFsaXR5Q2xhc3NpZmljYXRpb25Db2RlcywgIFYzQ29uZmlkZW50aWFsaXR5Q2xhc3NpZmljYXRpb25Db2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVjNDb25maWRlbnRpYWxpdHlDbGFzc2lmaWNhdGlvbkNvZGVzLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIENvbXBvc2l0aW9uQXR0ZXN0ZXIgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29tcG9zaXRpb25BdHRlc3RlckFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0eXBlIG9mIGF0dGVzdGF0aW9uIHRoZSBhdXRoZW50aWNhdG9yIG9mZmVycy5cclxuICAgKi9cclxuICBtb2RlOiBmaGlyLkZoaXJDb2RlPENvbXBvc2l0aW9uQXR0ZXN0YXRpb25Nb2RlQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENvbXBvc2l0aW9uLmF0dGVzdGVyLm1vZGVcclxuICAgKi9cclxuICBfbW9kZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogV2hlbiB0aGUgY29tcG9zaXRpb24gd2FzIGF0dGVzdGVkIGJ5IHRoZSBwYXJ0eS5cclxuICAgKi9cclxuICB0aW1lPzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ29tcG9zaXRpb24uYXR0ZXN0ZXIudGltZVxyXG4gICAqL1xyXG4gIF90aW1lPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBXaG8gYXR0ZXN0ZWQgdGhlIGNvbXBvc2l0aW9uIGluIHRoZSBzcGVjaWZpZWQgd2F5LlxyXG4gICAqL1xyXG4gIHBhcnR5PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIE9ubHkgbGlzdCBlYWNoIGF0dGVzdGVyIG9uY2UuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29tcG9zaXRpb25BdHRlc3RlciBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0NvbXBvc2l0aW9uQXR0ZXN0ZXInO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0eXBlIG9mIGF0dGVzdGF0aW9uIHRoZSBhdXRoZW50aWNhdG9yIG9mZmVycy5cclxuICAgKi9cclxuICBwdWJsaWMgbW9kZTogZmhpci5GaGlyQ29kZTxDb21wb3NpdGlvbkF0dGVzdGF0aW9uTW9kZUNvZGVUeXBlPnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFdoZW4gdGhlIGNvbXBvc2l0aW9uIHdhcyBhdHRlc3RlZCBieSB0aGUgcGFydHkuXHJcbiAgICovXHJcbiAgcHVibGljIHRpbWU/OiBmaGlyLkZoaXJEYXRlVGltZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogV2hvIGF0dGVzdGVkIHRoZSBjb21wb3NpdGlvbiBpbiB0aGUgc3BlY2lmaWVkIHdheS5cclxuICAgKi9cclxuICBwdWJsaWMgcGFydHk/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQ29tcG9zaXRpb25BdHRlc3RlciAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENvbXBvc2l0aW9uQXR0ZXN0ZXJBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnbW9kZSddKSB7IHRoaXMubW9kZSA9IG5ldyBmaGlyLkZoaXJDb2RlPENvbXBvc2l0aW9uQXR0ZXN0YXRpb25Nb2RlQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLm1vZGV9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubW9kZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19tb2RlJ10pIHtcclxuICAgICAgaWYgKHRoaXMubW9kZSkgeyB0aGlzLm1vZGUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbW9kZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLm1vZGUgPSBuZXcgZmhpci5GaGlyQ29kZTxDb21wb3NpdGlvbkF0dGVzdGF0aW9uTW9kZUNvZGVUeXBlPihzb3VyY2UuX21vZGUgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3RpbWUnXSkgeyB0aGlzLnRpbWUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2UudGltZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfdGltZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnRpbWUpIHsgdGhpcy50aW1lLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3RpbWUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy50aW1lID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHNvdXJjZS5fdGltZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckRhdGVUaW1lQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydwYXJ0eSddKSB7IHRoaXMucGFydHkgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnBhcnR5KTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIG1vZGUgKENvbXBvc2l0aW9uLmF0dGVzdGVyLm1vZGUpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgbW9kZVJlcXVpcmVkQ29kZXMoKSB7XHJcbiAgICByZXR1cm4gQ29tcG9zaXRpb25BdHRlc3RhdGlvbk1vZGVDb2RlcztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb246c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24pO1xyXG4gICAgaWYgKGV4cHJlc3Npb24gPT09ICcnKSB7IGV4cHJlc3Npb24gPSAnQ29tcG9zaXRpb24uYXR0ZXN0ZXInIH1cclxuICAgIGlmICghdGhpc1snbW9kZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBtb2RlIGZoaXI6IENvbXBvc2l0aW9uLmF0dGVzdGVyLm1vZGU6Y29kZScsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzWydtb2RlJ10gJiYgKCFPYmplY3QudmFsdWVzKENvbXBvc2l0aW9uQXR0ZXN0YXRpb25Nb2RlQ29kZXMpLmluY2x1ZGVzKHRoaXMubW9kZS52YWx1ZSBhcyBhbnkpKSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnY29kZS1pbnZhbGlkJywgZGlhZ25vc3RpY3M6ICdtb2RlIChDb21wb3NpdGlvbi5hdHRlc3Rlci5tb2RlKSBvZiB0eXBlIGNvZGUgaXMgbWlzc2luZyBjb2RlIGZvciBSZXF1aXJlZCBiaW5kaW5nIHRvOiBDb21wb3NpdGlvbkF0dGVzdGF0aW9uTW9kZScsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wibW9kZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm1vZGUuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLm1vZGUnKSk7IH1cclxuICAgIGlmICh0aGlzW1widGltZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnRpbWUuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLnRpbWUnKSk7IH1cclxuICAgIGlmICh0aGlzW1wicGFydHlcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5wYXJ0eS5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycucGFydHknKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBDb21wb3NpdGlvblJlbGF0ZXNUbyB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBDb21wb3NpdGlvblJlbGF0ZXNUb0FyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIElmIHRoaXMgZG9jdW1lbnQgYXBwZW5kcyBhbm90aGVyIGRvY3VtZW50LCB0aGVuIHRoZSBkb2N1bWVudCBjYW5ub3QgYmUgZnVsbHkgdW5kZXJzdG9vZCB3aXRob3V0IGFsc28gYWNjZXNzaW5nIHRoZSByZWZlcmVuY2VkIGRvY3VtZW50LlxyXG4gICAqL1xyXG4gIGNvZGU6IGZoaXIuRmhpckNvZGU8RG9jdW1lbnRSZWxhdGlvbnNoaXBUeXBlQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENvbXBvc2l0aW9uLnJlbGF0ZXNUby5jb2RlXHJcbiAgICovXHJcbiAgX2NvZGU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0YXJnZXQgY29tcG9zaXRpb24vZG9jdW1lbnQgb2YgdGhpcyByZWxhdGlvbnNoaXAuXHJcbiAgICovXHJcbiAgdGFyZ2V0PzogZmhpci5JZGVudGlmaWVyfGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdGFyZ2V0IGNvbXBvc2l0aW9uL2RvY3VtZW50IG9mIHRoaXMgcmVsYXRpb25zaGlwLlxyXG4gICAqL1xyXG4gIHRhcmdldElkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdGFyZ2V0IGNvbXBvc2l0aW9uL2RvY3VtZW50IG9mIHRoaXMgcmVsYXRpb25zaGlwLlxyXG4gICAqL1xyXG4gIHRhcmdldFJlZmVyZW5jZT86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBIGRvY3VtZW50IGlzIGEgdmVyc2lvbiBzcGVjaWZpYyBjb21wb3NpdGlvbi5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb21wb3NpdGlvblJlbGF0ZXNUbyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0NvbXBvc2l0aW9uUmVsYXRlc1RvJztcclxuICAvKipcclxuICAgKiBJZiB0aGlzIGRvY3VtZW50IGFwcGVuZHMgYW5vdGhlciBkb2N1bWVudCwgdGhlbiB0aGUgZG9jdW1lbnQgY2Fubm90IGJlIGZ1bGx5IHVuZGVyc3Rvb2Qgd2l0aG91dCBhbHNvIGFjY2Vzc2luZyB0aGUgcmVmZXJlbmNlZCBkb2N1bWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgY29kZTogZmhpci5GaGlyQ29kZTxEb2N1bWVudFJlbGF0aW9uc2hpcFR5cGVDb2RlVHlwZT58bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgdGFyZ2V0IGNvbXBvc2l0aW9uL2RvY3VtZW50IG9mIHRoaXMgcmVsYXRpb25zaGlwLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0YXJnZXQ6IChmaGlyLklkZW50aWZpZXJ8Zmhpci5SZWZlcmVuY2UpfG51bGw7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBDb21wb3NpdGlvbi5yZWxhdGVzVG8udGFyZ2V0W3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX3RhcmdldElzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIENvbXBvc2l0aW9uUmVsYXRlc1RvIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8Q29tcG9zaXRpb25SZWxhdGVzVG9BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkZoaXJDb2RlPERvY3VtZW50UmVsYXRpb25zaGlwVHlwZUNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5jb2RlfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvZGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfY29kZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLmNvZGUpIHsgdGhpcy5jb2RlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2NvZGUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5jb2RlID0gbmV3IGZoaXIuRmhpckNvZGU8RG9jdW1lbnRSZWxhdGlvbnNoaXBUeXBlQ29kZVR5cGU+KHNvdXJjZS5fY29kZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsndGFyZ2V0J10pIHsgdGhpcy50YXJnZXQgPSBzb3VyY2UudGFyZ2V0OyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3RhcmdldElkZW50aWZpZXInXSkgeyB0aGlzLnRhcmdldCA9IG5ldyBmaGlyLklkZW50aWZpZXIoc291cmNlLnRhcmdldElkZW50aWZpZXIpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3RhcmdldFJlZmVyZW5jZSddKSB7IHRoaXMudGFyZ2V0ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS50YXJnZXRSZWZlcmVuY2UpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy50YXJnZXQgPSBudWxsOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlcXVpcmVkLWJvdW5kIFZhbHVlIFNldCBmb3IgY29kZSAoQ29tcG9zaXRpb24ucmVsYXRlc1RvLmNvZGUpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgY29kZVJlcXVpcmVkQ29kZXMoKSB7XHJcbiAgICByZXR1cm4gRG9jdW1lbnRSZWxhdGlvbnNoaXBUeXBlQ29kZXM7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKTtcclxuICAgIGlmIChleHByZXNzaW9uID09PSAnJykgeyBleHByZXNzaW9uID0gJ0NvbXBvc2l0aW9uLnJlbGF0ZXNUbycgfVxyXG4gICAgaWYgKCF0aGlzWydjb2RlJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IGNvZGUgZmhpcjogQ29tcG9zaXRpb24ucmVsYXRlc1RvLmNvZGU6Y29kZScsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzWydjb2RlJ10gJiYgKCFPYmplY3QudmFsdWVzKERvY3VtZW50UmVsYXRpb25zaGlwVHlwZUNvZGVzKS5pbmNsdWRlcyh0aGlzLmNvZGUudmFsdWUgYXMgYW55KSkpIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ2NvZGUtaW52YWxpZCcsIGRpYWdub3N0aWNzOiAnY29kZSAoQ29tcG9zaXRpb24ucmVsYXRlc1RvLmNvZGUpIG9mIHR5cGUgY29kZSBpcyBtaXNzaW5nIGNvZGUgZm9yIFJlcXVpcmVkIGJpbmRpbmcgdG86IERvY3VtZW50UmVsYXRpb25zaGlwVHlwZScsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiY29kZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmNvZGUuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLmNvZGUnKSk7IH1cclxuICAgIGlmICghdGhpc1sndGFyZ2V0J10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHRhcmdldCBmaGlyOiBDb21wb3NpdGlvbi5yZWxhdGVzVG8udGFyZ2V0W3hdOicsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBDb21wb3NpdGlvbkV2ZW50IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENvbXBvc2l0aW9uRXZlbnRBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBBbiBldmVudCBjYW4gZnVydGhlciBzcGVjaWFsaXplIHRoZSBhY3QgaW5oZXJlbnQgaW4gdGhlIHR5cGVDb2RlLCBzdWNoIGFzIHdoZXJlIGl0IGlzIHNpbXBseSBcIlByb2NlZHVyZSBSZXBvcnRcIiBhbmQgdGhlIHByb2NlZHVyZSB3YXMgYSBcImNvbG9ub3Njb3B5XCIuIElmIG9uZSBvciBtb3JlIGV2ZW50Q29kZXMgYXJlIGluY2x1ZGVkLCB0aGV5IFNIQUxMIE5PVCBjb25mbGljdCB3aXRoIHRoZSB2YWx1ZXMgaW5oZXJlbnQgaW4gdGhlIGNsYXNzQ29kZSwgcHJhY3RpY2VTZXR0aW5nQ29kZSBvciB0eXBlQ29kZSwgYXMgc3VjaCBhIGNvbmZsaWN0IHdvdWxkIGNyZWF0ZSBhbiBhbWJpZ3VvdXMgc2l0dWF0aW9uLiBUaGlzIHNob3J0IGxpc3Qgb2YgY29kZXMgaXMgcHJvdmlkZWQgdG8gYmUgdXNlZCBhcyBrZXkgd29yZHMgZm9yIGNlcnRhaW4gdHlwZXMgb2YgcXVlcmllcy5cclxuICAgKi9cclxuICBjb2RlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwZXJpb2Qgb2YgdGltZSBjb3ZlcmVkIGJ5IHRoZSBkb2N1bWVudGF0aW9uLiBUaGVyZSBpcyBubyBhc3NlcnRpb24gdGhhdCB0aGUgZG9jdW1lbnRhdGlvbiBpcyBhIGNvbXBsZXRlIHJlcHJlc2VudGF0aW9uIGZvciB0aGlzIHBlcmlvZCwgb25seSB0aGF0IGl0IGRvY3VtZW50cyBldmVudHMgZHVyaW5nIHRoaXMgdGltZS5cclxuICAgKi9cclxuICBwZXJpb2Q/OiBmaGlyLlBlcmlvZEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkZXNjcmlwdGlvbiBhbmQvb3IgcmVmZXJlbmNlIG9mIHRoZSBldmVudChzKSBiZWluZyBkb2N1bWVudGVkLiBGb3IgZXhhbXBsZSwgdGhpcyBjb3VsZCBiZSB1c2VkIHRvIGRvY3VtZW50IHN1Y2ggYSBjb2xvbm9zY29weSBvciBhbiBhcHBlbmRlY3RvbXkuXHJcbiAgICovXHJcbiAgZGV0YWlsPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlIGV2ZW50IG5lZWRzIHRvIGJlIGNvbnNpc3RlbnQgd2l0aCB0aGUgdHlwZSBlbGVtZW50LCB0aG91Z2ggY2FuIHByb3ZpZGUgZnVydGhlciBpbmZvcm1hdGlvbiBpZiBkZXNpcmVkLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENvbXBvc2l0aW9uRXZlbnQgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdDb21wb3NpdGlvbkV2ZW50JztcclxuICAvKipcclxuICAgKiBBbiBldmVudCBjYW4gZnVydGhlciBzcGVjaWFsaXplIHRoZSBhY3QgaW5oZXJlbnQgaW4gdGhlIHR5cGVDb2RlLCBzdWNoIGFzIHdoZXJlIGl0IGlzIHNpbXBseSBcIlByb2NlZHVyZSBSZXBvcnRcIiBhbmQgdGhlIHByb2NlZHVyZSB3YXMgYSBcImNvbG9ub3Njb3B5XCIuIElmIG9uZSBvciBtb3JlIGV2ZW50Q29kZXMgYXJlIGluY2x1ZGVkLCB0aGV5IFNIQUxMIE5PVCBjb25mbGljdCB3aXRoIHRoZSB2YWx1ZXMgaW5oZXJlbnQgaW4gdGhlIGNsYXNzQ29kZSwgcHJhY3RpY2VTZXR0aW5nQ29kZSBvciB0eXBlQ29kZSwgYXMgc3VjaCBhIGNvbmZsaWN0IHdvdWxkIGNyZWF0ZSBhbiBhbWJpZ3VvdXMgc2l0dWF0aW9uLiBUaGlzIHNob3J0IGxpc3Qgb2YgY29kZXMgaXMgcHJvdmlkZWQgdG8gYmUgdXNlZCBhcyBrZXkgd29yZHMgZm9yIGNlcnRhaW4gdHlwZXMgb2YgcXVlcmllcy5cclxuICAgKi9cclxuICBwdWJsaWMgY29kZTogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBUaGUgcGVyaW9kIG9mIHRpbWUgY292ZXJlZCBieSB0aGUgZG9jdW1lbnRhdGlvbi4gVGhlcmUgaXMgbm8gYXNzZXJ0aW9uIHRoYXQgdGhlIGRvY3VtZW50YXRpb24gaXMgYSBjb21wbGV0ZSByZXByZXNlbnRhdGlvbiBmb3IgdGhpcyBwZXJpb2QsIG9ubHkgdGhhdCBpdCBkb2N1bWVudHMgZXZlbnRzIGR1cmluZyB0aGlzIHRpbWUuXHJcbiAgICovXHJcbiAgcHVibGljIHBlcmlvZD86IGZoaXIuUGVyaW9kfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGVzY3JpcHRpb24gYW5kL29yIHJlZmVyZW5jZSBvZiB0aGUgZXZlbnQocykgYmVpbmcgZG9jdW1lbnRlZC4gRm9yIGV4YW1wbGUsIHRoaXMgY291bGQgYmUgdXNlZCB0byBkb2N1bWVudCBzdWNoIGEgY29sb25vc2NvcHkgb3IgYW4gYXBwZW5kZWN0b215LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZXRhaWw6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQ29tcG9zaXRpb25FdmVudCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENvbXBvc2l0aW9uRXZlbnRBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IHNvdXJjZS5jb2RlLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY29kZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwZXJpb2QnXSkgeyB0aGlzLnBlcmlvZCA9IG5ldyBmaGlyLlBlcmlvZChzb3VyY2UucGVyaW9kKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGV0YWlsJ10pIHsgdGhpcy5kZXRhaWwgPSBzb3VyY2UuZGV0YWlsLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZGV0YWlsID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb246c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24pO1xyXG4gICAgaWYgKGV4cHJlc3Npb24gPT09ICcnKSB7IGV4cHJlc3Npb24gPSAnQ29tcG9zaXRpb24uZXZlbnQnIH1cclxuICAgIGlmICh0aGlzW1wiY29kZVwiXSkgeyB0aGlzLmNvZGUuZm9yRWFjaCgoeCxpKSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbitgLmNvZGVbJHtpfV1gKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wicGVyaW9kXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucGVyaW9kLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5wZXJpb2QnKSk7IH1cclxuICAgIGlmICh0aGlzW1wiZGV0YWlsXCJdKSB7IHRoaXMuZGV0YWlsLmZvckVhY2goKHgsaSkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rYC5kZXRhaWxbJHtpfV1gKSk7IH0pIH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBDb21wb3NpdGlvblNlY3Rpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29tcG9zaXRpb25TZWN0aW9uQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRpdGxlIGlkZW50aWZpZXMgdGhlIHNlY3Rpb24gZm9yIGEgaHVtYW4gcmVhZGVyLiBUaGUgdGl0bGUgbXVzdCBiZSBjb25zaXN0ZW50IHdpdGggdGhlIG5hcnJhdGl2ZSBvZiB0aGUgcmVzb3VyY2UgdGhhdCBpcyB0aGUgdGFyZ2V0IG9mIHRoZSBzZWN0aW9uLmNvbnRlbnQgcmVmZXJlbmNlLiBHZW5lcmFsbHksIHNlY3Rpb25zIFNIT1VMRCBoYXZlIHRpdGxlcywgYnV0IGluIHNvbWUgZG9jdW1lbnRzLCBpdCBpcyB1bm5lY2Vzc2FyeSBvciBpbmFwcHJvcHJpYXRlLiBUeXBpY2FsbHksIHRoaXMgaXMgd2hlcmUgYSBzZWN0aW9uIGhhcyBzdWJzZWN0aW9ucyB0aGF0IGhhdmUgdGhlaXIgb3duIGFkZXF1YXRlbHkgZGlzdGluZ3Vpc2hpbmcgdGl0bGUsICBvciBkb2N1bWVudHMgdGhhdCBvbmx5IGhhdmUgYSBzaW5nbGUgc2VjdGlvbi4gTW9zdCBJbXBsZW1lbnRhdGlvbiBHdWlkZXMgd2lsbCBtYWtlIHNlY3Rpb24gdGl0bGUgdG8gYmUgYSByZXF1aXJlZCBlbGVtZW50LlxyXG4gICAqL1xyXG4gIHRpdGxlPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENvbXBvc2l0aW9uLnNlY3Rpb24udGl0bGVcclxuICAgKi9cclxuICBfdGl0bGU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjb2RlIGlkZW50aWZpZXMgdGhlIHNlY3Rpb24gZm9yIGFuIGF1dG9tYXRlZCBwcm9jZXNzb3Igb2YgdGhlIGRvY3VtZW50LiBUaGlzIGlzIHBhcnRpY3VsYXJseSByZWxldmFudCB3aGVuIHVzaW5nIHByb2ZpbGVzIHRvIGNvbnRyb2wgdGhlIHN0cnVjdHVyZSBvZiB0aGUgZG9jdW1lbnQuICAgXHJcbiAgICogSWYgdGhlIHNlY3Rpb24gaGFzIGNvbnRlbnQgKGluc3RlYWQgb2Ygc3ViLXNlY3Rpb25zKSwgdGhlIHNlY3Rpb24uY29kZSBkb2VzIG5vdCBjaGFuZ2UgdGhlIG1lYW5pbmcgb3IgaW50ZXJwcmV0YXRpb24gb2YgdGhlIHJlc291cmNlIHRoYXQgaXMgdGhlIGNvbnRlbnQgb2YgdGhlIHNlY3Rpb24gaW4gdGhlIGNvbW1lbnRzIGZvciB0aGUgc2VjdGlvbi5jb2RlLlxyXG4gICAqL1xyXG4gIGNvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgd2hvIGlzIHJlc3BvbnNpYmxlIGZvciB0aGUgaW5mb3JtYXRpb24gaW4gdGhpcyBzZWN0aW9uLCBub3QgbmVjZXNzYXJpbHkgd2hvIHR5cGVkIGl0IGluLlxyXG4gICAqL1xyXG4gIGF1dGhvcj86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUeXBpY2FsbHksIHNlY3Rpb25zIGluIGEgZG91bWVudCBhcmUgYWJvdXQgdGhlIHN1YmplY3Qgb2YgdGhlIGRvY3VtZW50LCB3aGV0aGVyIHRoYXQgaXMgYSAgcGF0aWVudCwgb3IgZ3JvdXAgb2YgcGF0aWVudHMsIGxvY2F0aW9uLCBvciBkZXZpY2UsIG9yIHdoYXRldmVyLiBGb3Igc29tZSBraW5kIG9mIGRvY3VtZW50cywgc29tZSBzZWN0aW9ucyBhY3R1YWxseSBjb250YWluIGRhdGEgYWJvdXQgcmVsYXRlZCBlbnRpdGllcy4gVHlwaWNhbCBleGFtcGxlcyBhcmUgIGEgc2VjdGlvbiBpbiBhIG5ld2Jvcm4gZGlzY2hhcmdlIHN1bW1hcnkgY29uY2VybmluZyB0aGUgbW90aGVyLCBvciBmYW1pbHkgaGlzdG9yeSBkb2N1bWVudHMsIHdpdGggYSBzZWN0aW9uIGFib3V0IGVhY2ggZmFtaWx5IG1lbWJlciwgdGhvdWdoIHRoZXJlIGFyZSBtYW55IG90aGVyIGV4YW1wbGVzLlxyXG4gICAqL1xyXG4gIGZvY3VzPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEb2N1bWVudCBwcm9maWxlcyBtYXkgZGVmaW5lIHdoYXQgY29udGVudCBzaG91bGQgYmUgcmVwcmVzZW50ZWQgaW4gdGhlIG5hcnJhdGl2ZSB0byBlbnN1cmUgY2xpbmljYWwgc2FmZXR5LlxyXG4gICAqL1xyXG4gIHRleHQ/OiBmaGlyLk5hcnJhdGl2ZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgYmVjYXVzZSBhIGNoYW5nZSBsaXN0IG11c3Qgbm90IGJlIG1pc3VuZGVyc3Rvb2QgYXMgYSBjb21wbGV0ZSBsaXN0LlxyXG4gICAqL1xyXG4gIG1vZGU/OiBmaGlyLkZoaXJDb2RlPExpc3RNb2RlQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENvbXBvc2l0aW9uLnNlY3Rpb24ubW9kZVxyXG4gICAqL1xyXG4gIF9tb2RlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBBcHBsaWNhdGlvbnMgU0hPVUxEIHJlbmRlciBvcmRlcmVkIGxpc3RzIGluIHRoZSBvcmRlciBwcm92aWRlZCwgYnV0IE1BWSBhbGxvdyB1c2VycyB0byByZS1vcmRlciBiYXNlZCBvbiB0aGVpciBvd24gcHJlZmVyZW5jZXMgYXMgd2VsbC4gSWYgdGhlcmUgaXMgbm8gb3JkZXIgc3BlY2lmaWVkLCB0aGUgb3JkZXIgaXMgdW5rbm93biwgdGhvdWdoIHRoZXJlIG1heSBzdGlsbCBiZSBzb21lIG9yZGVyLlxyXG4gICAqL1xyXG4gIG9yZGVyZWRCeT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhlcmUgYXJlIG5vIGVudHJpZXMgaW4gdGhlIGxpc3QsIGFuIGVtcHR5UmVhc29uIFNIT1VMRCBiZSBwcm92aWRlZC5cclxuICAgKi9cclxuICBlbnRyeT86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdmFyaW91cyByZWFzb25zIGZvciBhbiBlbXB0eSBzZWN0aW9uIG1ha2UgYSBzaWduaWZpY2FudCBpbnRlcnByZXRhdGlvbiB0byBpdHMgaW50ZXJwcmV0YXRpb24uIE5vdGUgdGhhdCB0aGlzIGNvZGUgaXMgZm9yIHVzZSB3aGVuIHRoZSBlbnRpcmUgc2VjdGlvbiBjb250ZW50IGhhcyBiZWVuIHN1cHByZXNzZWQsIGFuZCBub3QgZm9yIHdoZW4gaW5kaXZpZHVhbCBpdGVtcyBhcmUgb21pdHRlZCAtIGltcGxlbWVudGVycyBtYXkgY29uc2lkZXIgdXNpbmcgYSB0ZXh0IG5vdGUgb3IgYSBmbGFnIG9uIGFuIGVudHJ5IGluIHRoZXNlIGNhc2VzLlxyXG4gICAqL1xyXG4gIGVtcHR5UmVhc29uPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBOZXN0ZWQgc2VjdGlvbnMgYXJlIHByaW1hcmlseSB1c2VkIHRvIGhlbHAgaHVtYW4gcmVhZGVycyBuYXZpZ2F0ZSB0byBwYXJ0aWN1bGFyIHBvcnRpb25zIG9mIHRoZSBkb2N1bWVudC5cclxuICAgKi9cclxuICBzZWN0aW9uPzogZmhpci5Db21wb3NpdGlvblNlY3Rpb25BcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlIHJvb3Qgb2YgdGhlIHNlY3Rpb25zIHRoYXQgbWFrZSB1cCB0aGUgY29tcG9zaXRpb24uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29tcG9zaXRpb25TZWN0aW9uIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQ29tcG9zaXRpb25TZWN0aW9uJztcclxuICAvKipcclxuICAgKiBUaGUgdGl0bGUgaWRlbnRpZmllcyB0aGUgc2VjdGlvbiBmb3IgYSBodW1hbiByZWFkZXIuIFRoZSB0aXRsZSBtdXN0IGJlIGNvbnNpc3RlbnQgd2l0aCB0aGUgbmFycmF0aXZlIG9mIHRoZSByZXNvdXJjZSB0aGF0IGlzIHRoZSB0YXJnZXQgb2YgdGhlIHNlY3Rpb24uY29udGVudCByZWZlcmVuY2UuIEdlbmVyYWxseSwgc2VjdGlvbnMgU0hPVUxEIGhhdmUgdGl0bGVzLCBidXQgaW4gc29tZSBkb2N1bWVudHMsIGl0IGlzIHVubmVjZXNzYXJ5IG9yIGluYXBwcm9wcmlhdGUuIFR5cGljYWxseSwgdGhpcyBpcyB3aGVyZSBhIHNlY3Rpb24gaGFzIHN1YnNlY3Rpb25zIHRoYXQgaGF2ZSB0aGVpciBvd24gYWRlcXVhdGVseSBkaXN0aW5ndWlzaGluZyB0aXRsZSwgIG9yIGRvY3VtZW50cyB0aGF0IG9ubHkgaGF2ZSBhIHNpbmdsZSBzZWN0aW9uLiBNb3N0IEltcGxlbWVudGF0aW9uIEd1aWRlcyB3aWxsIG1ha2Ugc2VjdGlvbiB0aXRsZSB0byBiZSBhIHJlcXVpcmVkIGVsZW1lbnQuXHJcbiAgICovXHJcbiAgcHVibGljIHRpdGxlPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgY29kZSBpZGVudGlmaWVzIHRoZSBzZWN0aW9uIGZvciBhbiBhdXRvbWF0ZWQgcHJvY2Vzc29yIG9mIHRoZSBkb2N1bWVudC4gVGhpcyBpcyBwYXJ0aWN1bGFybHkgcmVsZXZhbnQgd2hlbiB1c2luZyBwcm9maWxlcyB0byBjb250cm9sIHRoZSBzdHJ1Y3R1cmUgb2YgdGhlIGRvY3VtZW50LiAgIFxyXG4gICAqIElmIHRoZSBzZWN0aW9uIGhhcyBjb250ZW50IChpbnN0ZWFkIG9mIHN1Yi1zZWN0aW9ucyksIHRoZSBzZWN0aW9uLmNvZGUgZG9lcyBub3QgY2hhbmdlIHRoZSBtZWFuaW5nIG9yIGludGVycHJldGF0aW9uIG9mIHRoZSByZXNvdXJjZSB0aGF0IGlzIHRoZSBjb250ZW50IG9mIHRoZSBzZWN0aW9uIGluIHRoZSBjb21tZW50cyBmb3IgdGhlIHNlY3Rpb24uY29kZS5cclxuICAgKi9cclxuICBwdWJsaWMgY29kZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHdobyBpcyByZXNwb25zaWJsZSBmb3IgdGhlIGluZm9ybWF0aW9uIGluIHRoaXMgc2VjdGlvbiwgbm90IG5lY2Vzc2FyaWx5IHdobyB0eXBlZCBpdCBpbi5cclxuICAgKi9cclxuICBwdWJsaWMgYXV0aG9yOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIFR5cGljYWxseSwgc2VjdGlvbnMgaW4gYSBkb3VtZW50IGFyZSBhYm91dCB0aGUgc3ViamVjdCBvZiB0aGUgZG9jdW1lbnQsIHdoZXRoZXIgdGhhdCBpcyBhICBwYXRpZW50LCBvciBncm91cCBvZiBwYXRpZW50cywgbG9jYXRpb24sIG9yIGRldmljZSwgb3Igd2hhdGV2ZXIuIEZvciBzb21lIGtpbmQgb2YgZG9jdW1lbnRzLCBzb21lIHNlY3Rpb25zIGFjdHVhbGx5IGNvbnRhaW4gZGF0YSBhYm91dCByZWxhdGVkIGVudGl0aWVzLiBUeXBpY2FsIGV4YW1wbGVzIGFyZSAgYSBzZWN0aW9uIGluIGEgbmV3Ym9ybiBkaXNjaGFyZ2Ugc3VtbWFyeSBjb25jZXJuaW5nIHRoZSBtb3RoZXIsIG9yIGZhbWlseSBoaXN0b3J5IGRvY3VtZW50cywgd2l0aCBhIHNlY3Rpb24gYWJvdXQgZWFjaCBmYW1pbHkgbWVtYmVyLCB0aG91Z2ggdGhlcmUgYXJlIG1hbnkgb3RoZXIgZXhhbXBsZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGZvY3VzPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERvY3VtZW50IHByb2ZpbGVzIG1heSBkZWZpbmUgd2hhdCBjb250ZW50IHNob3VsZCBiZSByZXByZXNlbnRlZCBpbiB0aGUgbmFycmF0aXZlIHRvIGVuc3VyZSBjbGluaWNhbCBzYWZldHkuXHJcbiAgICovXHJcbiAgcHVibGljIHRleHQ/OiBmaGlyLk5hcnJhdGl2ZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IGlzIGxhYmVsZWQgYXMgYSBtb2RpZmllciBiZWNhdXNlIGEgY2hhbmdlIGxpc3QgbXVzdCBub3QgYmUgbWlzdW5kZXJzdG9vZCBhcyBhIGNvbXBsZXRlIGxpc3QuXHJcbiAgICovXHJcbiAgcHVibGljIG1vZGU/OiBmaGlyLkZoaXJDb2RlPExpc3RNb2RlQ29kZVR5cGU+fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBcHBsaWNhdGlvbnMgU0hPVUxEIHJlbmRlciBvcmRlcmVkIGxpc3RzIGluIHRoZSBvcmRlciBwcm92aWRlZCwgYnV0IE1BWSBhbGxvdyB1c2VycyB0byByZS1vcmRlciBiYXNlZCBvbiB0aGVpciBvd24gcHJlZmVyZW5jZXMgYXMgd2VsbC4gSWYgdGhlcmUgaXMgbm8gb3JkZXIgc3BlY2lmaWVkLCB0aGUgb3JkZXIgaXMgdW5rbm93biwgdGhvdWdoIHRoZXJlIG1heSBzdGlsbCBiZSBzb21lIG9yZGVyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvcmRlcmVkQnk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhlcmUgYXJlIG5vIGVudHJpZXMgaW4gdGhlIGxpc3QsIGFuIGVtcHR5UmVhc29uIFNIT1VMRCBiZSBwcm92aWRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgZW50cnk6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogVGhlIHZhcmlvdXMgcmVhc29ucyBmb3IgYW4gZW1wdHkgc2VjdGlvbiBtYWtlIGEgc2lnbmlmaWNhbnQgaW50ZXJwcmV0YXRpb24gdG8gaXRzIGludGVycHJldGF0aW9uLiBOb3RlIHRoYXQgdGhpcyBjb2RlIGlzIGZvciB1c2Ugd2hlbiB0aGUgZW50aXJlIHNlY3Rpb24gY29udGVudCBoYXMgYmVlbiBzdXBwcmVzc2VkLCBhbmQgbm90IGZvciB3aGVuIGluZGl2aWR1YWwgaXRlbXMgYXJlIG9taXR0ZWQgLSBpbXBsZW1lbnRlcnMgbWF5IGNvbnNpZGVyIHVzaW5nIGEgdGV4dCBub3RlIG9yIGEgZmxhZyBvbiBhbiBlbnRyeSBpbiB0aGVzZSBjYXNlcy5cclxuICAgKi9cclxuICBwdWJsaWMgZW1wdHlSZWFzb24/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTmVzdGVkIHNlY3Rpb25zIGFyZSBwcmltYXJpbHkgdXNlZCB0byBoZWxwIGh1bWFuIHJlYWRlcnMgbmF2aWdhdGUgdG8gcGFydGljdWxhciBwb3J0aW9ucyBvZiB0aGUgZG9jdW1lbnQuXHJcbiAgICovXHJcbiAgcHVibGljIHNlY3Rpb246IGZoaXIuQ29tcG9zaXRpb25TZWN0aW9uW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQ29tcG9zaXRpb25TZWN0aW9uIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8Q29tcG9zaXRpb25TZWN0aW9uQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3RpdGxlJ10pIHsgdGhpcy50aXRsZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UudGl0bGV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3RpdGxlJ10pIHtcclxuICAgICAgaWYgKHRoaXMudGl0bGUpIHsgdGhpcy50aXRsZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl90aXRsZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnRpdGxlID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3RpdGxlIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jb2RlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYXV0aG9yJ10pIHsgdGhpcy5hdXRob3IgPSBzb3VyY2UuYXV0aG9yLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYXV0aG9yID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2ZvY3VzJ10pIHsgdGhpcy5mb2N1cyA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuZm9jdXMpOyB9XHJcbiAgICBpZiAoc291cmNlWyd0ZXh0J10pIHsgdGhpcy50ZXh0ID0gbmV3IGZoaXIuTmFycmF0aXZlKHNvdXJjZS50ZXh0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbW9kZSddKSB7IHRoaXMubW9kZSA9IG5ldyBmaGlyLkZoaXJDb2RlPExpc3RNb2RlQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLm1vZGV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX21vZGUnXSkge1xyXG4gICAgICBpZiAodGhpcy5tb2RlKSB7IHRoaXMubW9kZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9tb2RlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubW9kZSA9IG5ldyBmaGlyLkZoaXJDb2RlPExpc3RNb2RlQ29kZVR5cGU+KHNvdXJjZS5fbW9kZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnb3JkZXJlZEJ5J10pIHsgdGhpcy5vcmRlcmVkQnkgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLm9yZGVyZWRCeSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2VudHJ5J10pIHsgdGhpcy5lbnRyeSA9IHNvdXJjZS5lbnRyeS5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmVudHJ5ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2VtcHR5UmVhc29uJ10pIHsgdGhpcy5lbXB0eVJlYXNvbiA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuZW1wdHlSZWFzb24pOyB9XHJcbiAgICBpZiAoc291cmNlWydzZWN0aW9uJ10pIHsgdGhpcy5zZWN0aW9uID0gc291cmNlLnNlY3Rpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5Db21wb3NpdGlvblNlY3Rpb24oeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zZWN0aW9uID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZWQtYm91bmQgVmFsdWUgU2V0IGZvciBtb2RlIChDb21wb3NpdGlvbi5zZWN0aW9uLm1vZGUpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgbW9kZVJlcXVpcmVkQ29kZXMoKSB7XHJcbiAgICByZXR1cm4gTGlzdE1vZGVDb2RlcztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogUHJlZmVycmVkLWJvdW5kIFZhbHVlIFNldCBmb3Igb3JkZXJlZEJ5IChDb21wb3NpdGlvbi5zZWN0aW9uLm9yZGVyZWRCeSlcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCBvcmRlcmVkQnlQcmVmZXJyZWRDb2RpbmdzKCk6TGlzdE9yZGVyQ29kaW5nVHlwZSB7XHJcbiAgICByZXR1cm4gTGlzdE9yZGVyQ29kaW5ncztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogUHJlZmVycmVkLWJvdW5kIFZhbHVlIFNldCBmb3IgZW1wdHlSZWFzb24gKENvbXBvc2l0aW9uLnNlY3Rpb24uZW1wdHlSZWFzb24pXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgZW1wdHlSZWFzb25QcmVmZXJyZWRDb2RpbmdzKCk6TGlzdEVtcHR5UmVhc29uQ29kaW5nVHlwZSB7XHJcbiAgICByZXR1cm4gTGlzdEVtcHR5UmVhc29uQ29kaW5ncztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb246c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24pO1xyXG4gICAgaWYgKGV4cHJlc3Npb24gPT09ICcnKSB7IGV4cHJlc3Npb24gPSAnQ29tcG9zaXRpb24uc2VjdGlvbicgfVxyXG4gICAgaWYgKHRoaXNbXCJ0aXRsZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnRpdGxlLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy50aXRsZScpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJjb2RlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY29kZS5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuY29kZScpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJhdXRob3JcIl0pIHsgdGhpcy5hdXRob3IuZm9yRWFjaCgoeCxpKSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbitgLmF1dGhvclske2l9XWApKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJmb2N1c1wiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmZvY3VzLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5mb2N1cycpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJ0ZXh0XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMudGV4dC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycudGV4dCcpKTsgfVxyXG4gICAgaWYgKHRoaXNbJ21vZGUnXSAmJiAoIU9iamVjdC52YWx1ZXMoTGlzdE1vZGVDb2RlcykuaW5jbHVkZXModGhpcy5tb2RlLnZhbHVlIGFzIGFueSkpKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdjb2RlLWludmFsaWQnLCBkaWFnbm9zdGljczogJ21vZGUgKENvbXBvc2l0aW9uLnNlY3Rpb24ubW9kZSkgb2YgdHlwZSBjb2RlIGlzIG1pc3NpbmcgY29kZSBmb3IgUmVxdWlyZWQgYmluZGluZyB0bzogTGlzdE1vZGUnLCBleHByZXNzaW9uOiBbZXhwcmVzc2lvbl0gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcIm1vZGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5tb2RlLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5tb2RlJykpOyB9XHJcbiAgICBpZiAodGhpc1tcIm9yZGVyZWRCeVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm9yZGVyZWRCeS5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycub3JkZXJlZEJ5JykpOyB9XHJcbiAgICBpZiAodGhpc1tcImVudHJ5XCJdKSB7IHRoaXMuZW50cnkuZm9yRWFjaCgoeCxpKSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbitgLmVudHJ5WyR7aX1dYCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImVtcHR5UmVhc29uXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZW1wdHlSZWFzb24uZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLmVtcHR5UmVhc29uJykpOyB9XHJcbiAgICBpZiAodGhpc1tcInNlY3Rpb25cIl0pIHsgdGhpcy5zZWN0aW9uLmZvckVhY2goKHgsaSkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rYC5zZWN0aW9uWyR7aX1dYCkpOyB9KSB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQ29tcG9zaXRpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29tcG9zaXRpb25BcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJDb21wb3NpdGlvblwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTaW1pbGFyIHRvIENsaW5pY2FsRG9jdW1lbnQvc2V0SWQgaW4gQ0RBLiBTZWUgZGlzY3Vzc2lvbiBpbiByZXNvdXJjZSBkZWZpbml0aW9uIGZvciBob3cgdGhlc2UgcmVsYXRlLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiBhIGNvbXBvc2l0aW9uIGlzIG1hcmtlZCBhcyB3aXRoZHJhd24sIHRoZSBjb21wb3NpdGlvbnMvZG9jdW1lbnRzIGluIHRoZSBzZXJpZXMsIG9yIGRhdGEgZnJvbSB0aGUgY29tcG9zaXRpb24gb3IgZG9jdW1lbnQgc2VyaWVzLCBzaG91bGQgbmV2ZXIgYmUgZGlzcGxheWVkIHRvIGEgdXNlciB3aXRob3V0IGJlaW5nIGNsZWFybHkgbWFya2VkIGFzIHVudHJ1c3R3b3J0aHkuIFRoZSBmbGFnIFwiZW50ZXJlZC1pbi1lcnJvclwiIGlzIHdoeSB0aGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIG9mIG90aGVyIGVsZW1lbnRzLiAgIFxyXG4gICAqIFNvbWUgcmVwb3J0aW5nIHdvcmsgZmxvd3MgcmVxdWlyZSB0aGF0IHRoZSBvcmlnaW5hbCBuYXJyYXRpdmUgb2YgYSBmaW5hbCBkb2N1bWVudCBuZXZlciBiZSBhbHRlcmVkOyBpbnN0ZWFkLCBvbmx5IG5ldyBuYXJyYXRpdmUgY2FuIGJlIGFkZGVkLiBUaGUgY29tcG9zaXRpb24gcmVzb3VyY2UgaGFzIG5vIGV4cGxpY2l0IHN0YXR1cyBmb3IgZXhwbGljaXRseSBub3Rpbmcgd2hldGhlciB0aGlzIGJ1c2luZXNzIHJ1bGUgaXMgaW4gZWZmZWN0LiBUaGlzIHdvdWxkIGJlIGhhbmRsZWQgYnkgYW4gZXh0ZW5zaW9uIGlmIHJlcXVpcmVkLlxyXG4gICAqL1xyXG4gIHN0YXR1czogZmhpci5GaGlyQ29kZTxDb21wb3NpdGlvblN0YXR1c0NvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDb21wb3NpdGlvbi5zdGF0dXNcclxuICAgKi9cclxuICBfc3RhdHVzPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBGb3IgQ29tcG9zaXRpb24gdHlwZSwgTE9JTkMgaXMgdWJpcXVpdG91cyBhbmQgc3Ryb25nbHkgZW5kb3JzZWQgYnkgSEw3LiBNb3N0IGltcGxlbWVudGF0aW9uIGd1aWRlcyB3aWxsIHJlcXVpcmUgYSBzcGVjaWZpYyBMT0lOQyBjb2RlLCBvciB1c2UgTE9JTkMgYXMgYW4gZXh0ZW5zaWJsZSBiaW5kaW5nLlxyXG4gICAqL1xyXG4gIHR5cGU6IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaXMgYSBtZXRhZGF0YSBmaWVsZCBmcm9tIFtYRFMvTUhEXShodHRwOi8vd2lraS5paGUubmV0L2luZGV4LnBocD90aXRsZT1Nb2JpbGVfYWNjZXNzX3RvX0hlYWx0aF9Eb2N1bWVudHNfKE1IRCkpLlxyXG4gICAqL1xyXG4gIGNhdGVnb3J5PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEZvciBjbGluaWNhbCBkb2N1bWVudHMsIHRoaXMgaXMgdXN1YWxseSB0aGUgcGF0aWVudC5cclxuICAgKi9cclxuICBzdWJqZWN0PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgdGhlIGNsaW5pY2FsIGVuY291bnRlciBvciB0eXBlIG9mIGNhcmUgdGhpcyBkb2N1bWVudGF0aW9uIGlzIGFzc29jaWF0ZWQgd2l0aC5cclxuICAgKi9cclxuICBlbmNvdW50ZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBMYXN0IE1vZGlmaWVkIERhdGUgb24gdGhlIGNvbXBvc2l0aW9uIG1heSBiZSBhZnRlciB0aGUgZGF0ZSBvZiB0aGUgZG9jdW1lbnQgd2FzIGF0dGVzdGVkIHdpdGhvdXQgYmVpbmcgY2hhbmdlZC5cclxuICAgKi9cclxuICBkYXRlOiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDb21wb3NpdGlvbi5kYXRlXHJcbiAgICovXHJcbiAgX2RhdGU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgd2hvIGlzIHJlc3BvbnNpYmxlIGZvciB0aGUgaW5mb3JtYXRpb24gaW4gdGhlIGNvbXBvc2l0aW9uLCBub3QgbmVjZXNzYXJpbHkgd2hvIHR5cGVkIGl0IGluLlxyXG4gICAqL1xyXG4gIGF1dGhvcjogZmhpci5SZWZlcmVuY2VBcmdzW118bnVsbDtcclxuICAvKipcclxuICAgKiBGb3IgbWFueSBjb21wb3NpdGlvbnMsIHRoZSB0aXRsZSBpcyB0aGUgc2FtZSBhcyB0aGUgdGV4dCBvciBhIGRpc3BsYXkgbmFtZSBvZiBDb21wb3NpdGlvbi50eXBlIChlLmcuIGEgXCJjb25zdWx0YXRpb25cIiBvciBcInByb2dyZXNzIG5vdGVcIikuIE5vdGUgdGhhdCBDREEgZG9lcyBub3QgbWFrZSB0aXRsZSBtYW5kYXRvcnksIGJ1dCB0aGVyZSBhcmUgbm8ga25vd24gY2FzZXMgd2hlcmUgaXQgaXMgdXNlZnVsIGZvciB0aXRsZSB0byBiZSBvbWl0dGVkLCBzbyBpdCBpcyBtYW5kYXRvcnkgaGVyZS4gRmVlZGJhY2sgb24gdGhpcyByZXF1aXJlbWVudCBpcyB3ZWxjb21lIGR1cmluZyB0aGUgdHJpYWwgdXNlIHBlcmlvZC5cclxuICAgKi9cclxuICB0aXRsZTogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENvbXBvc2l0aW9uLnRpdGxlXHJcbiAgICovXHJcbiAgX3RpdGxlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgZXhhY3QgdXNlIG9mIHRoaXMgZWxlbWVudCwgYW5kIGVuZm9yY2VtZW50IGFuZCBpc3N1ZXMgcmVsYXRlZCB0byBoaWdobHkgc2Vuc2l0aXZlIGRvY3VtZW50cyBhcmUgb3V0IG9mIHNjb3BlIGZvciB0aGUgYmFzZSBzcGVjaWZpY2F0aW9uLCBhbmQgZGVsZWdhdGVkIHRvIGltcGxlbWVudGF0aW9uIHByb2ZpbGVzIChzZWUgc2VjdXJpdHkgc2VjdGlvbikuICBUaGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIGJlY2F1c2UgaGlnaGx5IGNvbmZpZGVudGlhbCBkb2N1bWVudHMgbXVzdCBub3QgYmUgdHJlYXRlZCBhcyBpZiB0aGV5IGFyZSBub3QuXHJcbiAgICovXHJcbiAgY29uZmlkZW50aWFsaXR5PzogZmhpci5GaGlyQ29kZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDb21wb3NpdGlvbi5jb25maWRlbnRpYWxpdHlcclxuICAgKi9cclxuICBfY29uZmlkZW50aWFsaXR5PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBPbmx5IGxpc3QgZWFjaCBhdHRlc3RlciBvbmNlLlxyXG4gICAqL1xyXG4gIGF0dGVzdGVyPzogZmhpci5Db21wb3NpdGlvbkF0dGVzdGVyQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGlzIHVzZWZ1bCB3aGVuIGRvY3VtZW50cyBhcmUgZGVyaXZlZCBmcm9tIGEgY29tcG9zaXRpb24gLSBwcm92aWRlcyBndWlkYW5jZSBmb3IgaG93IHRvIGdldCB0aGUgbGF0ZXN0IHZlcnNpb24gb2YgdGhlIGRvY3VtZW50LiBUaGlzIGlzIG9wdGlvbmFsIGJlY2F1c2UgdGhpcyBpcyBzb21ldGltZXMgbm90IGtub3duIGJ5IHRoZSBhdXRob3Jpbmcgc3lzdGVtLCBhbmQgY2FuIGJlIGluZmVycmVkIGJ5IGNvbnRleHQuIEhvd2V2ZXIsIGl0IGlzIGltcG9ydGFudCB0aGF0IHRoaXMgaW5mb3JtYXRpb24gYmUga25vd24gd2hlbiB3b3JraW5nIHdpdGggYSBkZXJpdmVkIGRvY3VtZW50LCBzbyBwcm92aWRpbmcgYSBjdXN0b2RpYW4gaXMgZW5jb3VyYWdlZC5cclxuICAgKi9cclxuICBjdXN0b2RpYW4/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgZG9jdW1lbnQgaXMgYSB2ZXJzaW9uIHNwZWNpZmljIGNvbXBvc2l0aW9uLlxyXG4gICAqL1xyXG4gIHJlbGF0ZXNUbz86IGZoaXIuQ29tcG9zaXRpb25SZWxhdGVzVG9BcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBldmVudCBuZWVkcyB0byBiZSBjb25zaXN0ZW50IHdpdGggdGhlIHR5cGUgZWxlbWVudCwgdGhvdWdoIGNhbiBwcm92aWRlIGZ1cnRoZXIgaW5mb3JtYXRpb24gaWYgZGVzaXJlZC5cclxuICAgKi9cclxuICBldmVudD86IGZoaXIuQ29tcG9zaXRpb25FdmVudEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJvb3Qgb2YgdGhlIHNlY3Rpb25zIHRoYXQgbWFrZSB1cCB0aGUgY29tcG9zaXRpb24uXHJcbiAgICovXHJcbiAgc2VjdGlvbj86IGZoaXIuQ29tcG9zaXRpb25TZWN0aW9uQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgc2V0IG9mIGhlYWx0aGNhcmUtcmVsYXRlZCBpbmZvcm1hdGlvbiB0aGF0IGlzIGFzc2VtYmxlZCB0b2dldGhlciBpbnRvIGEgc2luZ2xlIGxvZ2ljYWwgcGFja2FnZSB0aGF0IHByb3ZpZGVzIGEgc2luZ2xlIGNvaGVyZW50IHN0YXRlbWVudCBvZiBtZWFuaW5nLCBlc3RhYmxpc2hlcyBpdHMgb3duIGNvbnRleHQgYW5kIHRoYXQgaGFzIGNsaW5pY2FsIGF0dGVzdGF0aW9uIHdpdGggcmVnYXJkIHRvIHdobyBpcyBtYWtpbmcgdGhlIHN0YXRlbWVudC4gQSBDb21wb3NpdGlvbiBkZWZpbmVzIHRoZSBzdHJ1Y3R1cmUgYW5kIG5hcnJhdGl2ZSBjb250ZW50IG5lY2Vzc2FyeSBmb3IgYSBkb2N1bWVudC4gSG93ZXZlciwgYSBDb21wb3NpdGlvbiBhbG9uZSBkb2VzIG5vdCBjb25zdGl0dXRlIGEgZG9jdW1lbnQuIFJhdGhlciwgdGhlIENvbXBvc2l0aW9uIG11c3QgYmUgdGhlIGZpcnN0IGVudHJ5IGluIGEgQnVuZGxlIHdoZXJlIEJ1bmRsZS50eXBlPWRvY3VtZW50LCBhbmQgYW55IG90aGVyIHJlc291cmNlcyByZWZlcmVuY2VkIGZyb20gQ29tcG9zaXRpb24gbXVzdCBiZSBpbmNsdWRlZCBhcyBzdWJzZXF1ZW50IGVudHJpZXMgaW4gdGhlIEJ1bmRsZSAoZm9yIGV4YW1wbGUgUGF0aWVudCwgUHJhY3RpdGlvbmVyLCBFbmNvdW50ZXIsIGV0Yy4pLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENvbXBvc2l0aW9uIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdDb21wb3NpdGlvbic7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJDb21wb3NpdGlvblwiO1xyXG4gIC8qKlxyXG4gICAqIFNpbWlsYXIgdG8gQ2xpbmljYWxEb2N1bWVudC9zZXRJZCBpbiBDREEuIFNlZSBkaXNjdXNzaW9uIGluIHJlc291cmNlIGRlZmluaXRpb24gZm9yIGhvdyB0aGVzZSByZWxhdGUuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIGEgY29tcG9zaXRpb24gaXMgbWFya2VkIGFzIHdpdGhkcmF3biwgdGhlIGNvbXBvc2l0aW9ucy9kb2N1bWVudHMgaW4gdGhlIHNlcmllcywgb3IgZGF0YSBmcm9tIHRoZSBjb21wb3NpdGlvbiBvciBkb2N1bWVudCBzZXJpZXMsIHNob3VsZCBuZXZlciBiZSBkaXNwbGF5ZWQgdG8gYSB1c2VyIHdpdGhvdXQgYmVpbmcgY2xlYXJseSBtYXJrZWQgYXMgdW50cnVzdHdvcnRoeS4gVGhlIGZsYWcgXCJlbnRlcmVkLWluLWVycm9yXCIgaXMgd2h5IHRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgb2Ygb3RoZXIgZWxlbWVudHMuICAgXHJcbiAgICogU29tZSByZXBvcnRpbmcgd29yayBmbG93cyByZXF1aXJlIHRoYXQgdGhlIG9yaWdpbmFsIG5hcnJhdGl2ZSBvZiBhIGZpbmFsIGRvY3VtZW50IG5ldmVyIGJlIGFsdGVyZWQ7IGluc3RlYWQsIG9ubHkgbmV3IG5hcnJhdGl2ZSBjYW4gYmUgYWRkZWQuIFRoZSBjb21wb3NpdGlvbiByZXNvdXJjZSBoYXMgbm8gZXhwbGljaXQgc3RhdHVzIGZvciBleHBsaWNpdGx5IG5vdGluZyB3aGV0aGVyIHRoaXMgYnVzaW5lc3MgcnVsZSBpcyBpbiBlZmZlY3QuIFRoaXMgd291bGQgYmUgaGFuZGxlZCBieSBhbiBleHRlbnNpb24gaWYgcmVxdWlyZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1czogZmhpci5GaGlyQ29kZTxDb21wb3NpdGlvblN0YXR1c0NvZGVUeXBlPnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEZvciBDb21wb3NpdGlvbiB0eXBlLCBMT0lOQyBpcyB1YmlxdWl0b3VzIGFuZCBzdHJvbmdseSBlbmRvcnNlZCBieSBITDcuIE1vc3QgaW1wbGVtZW50YXRpb24gZ3VpZGVzIHdpbGwgcmVxdWlyZSBhIHNwZWNpZmljIExPSU5DIGNvZGUsIG9yIHVzZSBMT0lOQyBhcyBhbiBleHRlbnNpYmxlIGJpbmRpbmcuXHJcbiAgICovXHJcbiAgcHVibGljIHR5cGU6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBhIG1ldGFkYXRhIGZpZWxkIGZyb20gW1hEUy9NSERdKGh0dHA6Ly93aWtpLmloZS5uZXQvaW5kZXgucGhwP3RpdGxlPU1vYmlsZV9hY2Nlc3NfdG9fSGVhbHRoX0RvY3VtZW50c18oTUhEKSkuXHJcbiAgICovXHJcbiAgcHVibGljIGNhdGVnb3J5OiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIEZvciBjbGluaWNhbCBkb2N1bWVudHMsIHRoaXMgaXMgdXN1YWxseSB0aGUgcGF0aWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgc3ViamVjdD86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgdGhlIGNsaW5pY2FsIGVuY291bnRlciBvciB0eXBlIG9mIGNhcmUgdGhpcyBkb2N1bWVudGF0aW9uIGlzIGFzc29jaWF0ZWQgd2l0aC5cclxuICAgKi9cclxuICBwdWJsaWMgZW5jb3VudGVyPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBMYXN0IE1vZGlmaWVkIERhdGUgb24gdGhlIGNvbXBvc2l0aW9uIG1heSBiZSBhZnRlciB0aGUgZGF0ZSBvZiB0aGUgZG9jdW1lbnQgd2FzIGF0dGVzdGVkIHdpdGhvdXQgYmVpbmcgY2hhbmdlZC5cclxuICAgKi9cclxuICBwdWJsaWMgZGF0ZTogZmhpci5GaGlyRGF0ZVRpbWV8bnVsbDtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHdobyBpcyByZXNwb25zaWJsZSBmb3IgdGhlIGluZm9ybWF0aW9uIGluIHRoZSBjb21wb3NpdGlvbiwgbm90IG5lY2Vzc2FyaWx5IHdobyB0eXBlZCBpdCBpbi5cclxuICAgKi9cclxuICBwdWJsaWMgYXV0aG9yOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIEZvciBtYW55IGNvbXBvc2l0aW9ucywgdGhlIHRpdGxlIGlzIHRoZSBzYW1lIGFzIHRoZSB0ZXh0IG9yIGEgZGlzcGxheSBuYW1lIG9mIENvbXBvc2l0aW9uLnR5cGUgKGUuZy4gYSBcImNvbnN1bHRhdGlvblwiIG9yIFwicHJvZ3Jlc3Mgbm90ZVwiKS4gTm90ZSB0aGF0IENEQSBkb2VzIG5vdCBtYWtlIHRpdGxlIG1hbmRhdG9yeSwgYnV0IHRoZXJlIGFyZSBubyBrbm93biBjYXNlcyB3aGVyZSBpdCBpcyB1c2VmdWwgZm9yIHRpdGxlIHRvIGJlIG9taXR0ZWQsIHNvIGl0IGlzIG1hbmRhdG9yeSBoZXJlLiBGZWVkYmFjayBvbiB0aGlzIHJlcXVpcmVtZW50IGlzIHdlbGNvbWUgZHVyaW5nIHRoZSB0cmlhbCB1c2UgcGVyaW9kLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0aXRsZTogZmhpci5GaGlyU3RyaW5nfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGV4YWN0IHVzZSBvZiB0aGlzIGVsZW1lbnQsIGFuZCBlbmZvcmNlbWVudCBhbmQgaXNzdWVzIHJlbGF0ZWQgdG8gaGlnaGx5IHNlbnNpdGl2ZSBkb2N1bWVudHMgYXJlIG91dCBvZiBzY29wZSBmb3IgdGhlIGJhc2Ugc3BlY2lmaWNhdGlvbiwgYW5kIGRlbGVnYXRlZCB0byBpbXBsZW1lbnRhdGlvbiBwcm9maWxlcyAoc2VlIHNlY3VyaXR5IHNlY3Rpb24pLiAgVGhpcyBlbGVtZW50IGlzIGxhYmVsZWQgYXMgYSBtb2RpZmllciBiZWNhdXNlIGhpZ2hseSBjb25maWRlbnRpYWwgZG9jdW1lbnRzIG11c3Qgbm90IGJlIHRyZWF0ZWQgYXMgaWYgdGhleSBhcmUgbm90LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25maWRlbnRpYWxpdHk/OiBmaGlyLkZoaXJDb2RlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBPbmx5IGxpc3QgZWFjaCBhdHRlc3RlciBvbmNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhdHRlc3RlcjogZmhpci5Db21wb3NpdGlvbkF0dGVzdGVyW107XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyB1c2VmdWwgd2hlbiBkb2N1bWVudHMgYXJlIGRlcml2ZWQgZnJvbSBhIGNvbXBvc2l0aW9uIC0gcHJvdmlkZXMgZ3VpZGFuY2UgZm9yIGhvdyB0byBnZXQgdGhlIGxhdGVzdCB2ZXJzaW9uIG9mIHRoZSBkb2N1bWVudC4gVGhpcyBpcyBvcHRpb25hbCBiZWNhdXNlIHRoaXMgaXMgc29tZXRpbWVzIG5vdCBrbm93biBieSB0aGUgYXV0aG9yaW5nIHN5c3RlbSwgYW5kIGNhbiBiZSBpbmZlcnJlZCBieSBjb250ZXh0LiBIb3dldmVyLCBpdCBpcyBpbXBvcnRhbnQgdGhhdCB0aGlzIGluZm9ybWF0aW9uIGJlIGtub3duIHdoZW4gd29ya2luZyB3aXRoIGEgZGVyaXZlZCBkb2N1bWVudCwgc28gcHJvdmlkaW5nIGEgY3VzdG9kaWFuIGlzIGVuY291cmFnZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGN1c3RvZGlhbj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGRvY3VtZW50IGlzIGEgdmVyc2lvbiBzcGVjaWZpYyBjb21wb3NpdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgcmVsYXRlc1RvOiBmaGlyLkNvbXBvc2l0aW9uUmVsYXRlc1RvW107XHJcbiAgLyoqXHJcbiAgICogVGhlIGV2ZW50IG5lZWRzIHRvIGJlIGNvbnNpc3RlbnQgd2l0aCB0aGUgdHlwZSBlbGVtZW50LCB0aG91Z2ggY2FuIHByb3ZpZGUgZnVydGhlciBpbmZvcm1hdGlvbiBpZiBkZXNpcmVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBldmVudDogZmhpci5Db21wb3NpdGlvbkV2ZW50W107XHJcbiAgLyoqXHJcbiAgICogVGhlIHJvb3Qgb2YgdGhlIHNlY3Rpb25zIHRoYXQgbWFrZSB1cCB0aGUgY29tcG9zaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHNlY3Rpb246IGZoaXIuQ29tcG9zaXRpb25TZWN0aW9uW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQ29tcG9zaXRpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxDb21wb3NpdGlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdDb21wb3NpdGlvbic7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gbmV3IGZoaXIuSWRlbnRpZmllcihzb3VyY2UuaWRlbnRpZmllcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0YXR1cyddKSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8Q29tcG9zaXRpb25TdGF0dXNDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2Uuc3RhdHVzfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zdGF0dXMnXSkge1xyXG4gICAgICBpZiAodGhpcy5zdGF0dXMpIHsgdGhpcy5zdGF0dXMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc3RhdHVzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8Q29tcG9zaXRpb25TdGF0dXNDb2RlVHlwZT4oc291cmNlLl9zdGF0dXMgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3R5cGUnXSkgeyB0aGlzLnR5cGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnR5cGUpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy50eXBlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY2F0ZWdvcnknXSkgeyB0aGlzLmNhdGVnb3J5ID0gc291cmNlLmNhdGVnb3J5Lm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY2F0ZWdvcnkgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3ViamVjdCddKSB7IHRoaXMuc3ViamVjdCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2Uuc3ViamVjdCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2VuY291bnRlciddKSB7IHRoaXMuZW5jb3VudGVyID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5lbmNvdW50ZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWydkYXRlJ10pIHsgdGhpcy5kYXRlID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLmRhdGV9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZGF0ZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19kYXRlJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZGF0ZSkgeyB0aGlzLmRhdGUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZGF0ZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRhdGUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoc291cmNlLl9kYXRlIGFzIFBhcnRpYWw8Zmhpci5GaGlyRGF0ZVRpbWVBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2F1dGhvciddKSB7IHRoaXMuYXV0aG9yID0gc291cmNlLmF1dGhvci5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmF1dGhvciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWyd0aXRsZSddKSB7IHRoaXMudGl0bGUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnRpdGxlfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnRpdGxlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3RpdGxlJ10pIHtcclxuICAgICAgaWYgKHRoaXMudGl0bGUpIHsgdGhpcy50aXRsZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl90aXRsZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnRpdGxlID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3RpdGxlIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydjb25maWRlbnRpYWxpdHknXSkgeyB0aGlzLmNvbmZpZGVudGlhbGl0eSA9IG5ldyBmaGlyLkZoaXJDb2RlKHt2YWx1ZTogc291cmNlLmNvbmZpZGVudGlhbGl0eX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfY29uZmlkZW50aWFsaXR5J10pIHtcclxuICAgICAgaWYgKHRoaXMuY29uZmlkZW50aWFsaXR5KSB7IHRoaXMuY29uZmlkZW50aWFsaXR5LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2NvbmZpZGVudGlhbGl0eSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmNvbmZpZGVudGlhbGl0eSA9IG5ldyBmaGlyLkZoaXJDb2RlKHNvdXJjZS5fY29uZmlkZW50aWFsaXR5IGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnYXR0ZXN0ZXInXSkgeyB0aGlzLmF0dGVzdGVyID0gc291cmNlLmF0dGVzdGVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29tcG9zaXRpb25BdHRlc3Rlcih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmF0dGVzdGVyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2N1c3RvZGlhbiddKSB7IHRoaXMuY3VzdG9kaWFuID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5jdXN0b2RpYW4pOyB9XHJcbiAgICBpZiAoc291cmNlWydyZWxhdGVzVG8nXSkgeyB0aGlzLnJlbGF0ZXNUbyA9IHNvdXJjZS5yZWxhdGVzVG8ubWFwKCh4KSA9PiBuZXcgZmhpci5Db21wb3NpdGlvblJlbGF0ZXNUbyh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnJlbGF0ZXNUbyA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydldmVudCddKSB7IHRoaXMuZXZlbnQgPSBzb3VyY2UuZXZlbnQubWFwKCh4KSA9PiBuZXcgZmhpci5Db21wb3NpdGlvbkV2ZW50KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZXZlbnQgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2VjdGlvbiddKSB7IHRoaXMuc2VjdGlvbiA9IHNvdXJjZS5zZWN0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29tcG9zaXRpb25TZWN0aW9uKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc2VjdGlvbiA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlcXVpcmVkLWJvdW5kIFZhbHVlIFNldCBmb3Igc3RhdHVzIChDb21wb3NpdGlvbi5zdGF0dXMpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgc3RhdHVzUmVxdWlyZWRDb2RlcygpIHtcclxuICAgIHJldHVybiBDb21wb3NpdGlvblN0YXR1c0NvZGVzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBQcmVmZXJyZWQtYm91bmQgVmFsdWUgU2V0IGZvciB0eXBlIChDb21wb3NpdGlvbi50eXBlKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IHR5cGVQcmVmZXJyZWRDb2RpbmdzKCk6RG9jVHlwZUNvZGluZ1R5cGUge1xyXG4gICAgcmV0dXJuIERvY1R5cGVDb2RpbmdzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIGNvbmZpZGVudGlhbGl0eSAoQ29tcG9zaXRpb24uY29uZmlkZW50aWFsaXR5KVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IGNvbmZpZGVudGlhbGl0eVJlcXVpcmVkQ29kZXMoKSB7XHJcbiAgICByZXR1cm4gVjNDb25maWRlbnRpYWxpdHlDbGFzc2lmaWNhdGlvbkNvZGVzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdDb21wb3NpdGlvbicgfVxyXG4gICAgaWYgKCF0aGlzWydyZXNvdXJjZVR5cGUnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgcmVzb3VyY2VUeXBlIGZoaXI6IENvbXBvc2l0aW9uLnJlc291cmNlVHlwZTpcIkNvbXBvc2l0aW9uXCInLCBleHByZXNzaW9uOiBbZXhwcmVzc2lvbl0gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImlkZW50aWZpZXJcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5pZGVudGlmaWVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5pZGVudGlmaWVyJykpOyB9XHJcbiAgICBpZiAoIXRoaXNbJ3N0YXR1cyddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBzdGF0dXMgZmhpcjogQ29tcG9zaXRpb24uc3RhdHVzOmNvZGUnLCBleHByZXNzaW9uOiBbZXhwcmVzc2lvbl0gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1snc3RhdHVzJ10gJiYgKCFPYmplY3QudmFsdWVzKENvbXBvc2l0aW9uU3RhdHVzQ29kZXMpLmluY2x1ZGVzKHRoaXMuc3RhdHVzLnZhbHVlIGFzIGFueSkpKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdjb2RlLWludmFsaWQnLCBkaWFnbm9zdGljczogJ3N0YXR1cyAoQ29tcG9zaXRpb24uc3RhdHVzKSBvZiB0eXBlIGNvZGUgaXMgbWlzc2luZyBjb2RlIGZvciBSZXF1aXJlZCBiaW5kaW5nIHRvOiBDb21wb3NpdGlvblN0YXR1cycsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wic3RhdHVzXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc3RhdHVzLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5zdGF0dXMnKSk7IH1cclxuICAgIGlmICghdGhpc1sndHlwZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSB0eXBlIGZoaXI6IENvbXBvc2l0aW9uLnR5cGU6Q29kZWFibGVDb25jZXB0JywgZXhwcmVzc2lvbjogW2V4cHJlc3Npb25dIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJ0eXBlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMudHlwZS5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycudHlwZScpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJjYXRlZ29yeVwiXSkgeyB0aGlzLmNhdGVnb3J5LmZvckVhY2goKHgsaSkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rYC5jYXRlZ29yeVske2l9XWApKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJzdWJqZWN0XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc3ViamVjdC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuc3ViamVjdCcpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJlbmNvdW50ZXJcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5lbmNvdW50ZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLmVuY291bnRlcicpKTsgfVxyXG4gICAgaWYgKCF0aGlzWydkYXRlJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IGRhdGUgZmhpcjogQ29tcG9zaXRpb24uZGF0ZTpkYXRlVGltZScsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiZGF0ZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmRhdGUuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLmRhdGUnKSk7IH1cclxuICAgIGlmICghdGhpc1snYXV0aG9yJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IGF1dGhvciBmaGlyOiBDb21wb3NpdGlvbi5hdXRob3I6UmVmZXJlbmNlJywgZXhwcmVzc2lvbjogW2V4cHJlc3Npb25dIH0pO1xyXG4gICAgfSBlbHNlIGlmICghQXJyYXkuaXNBcnJheSh0aGlzLmF1dGhvcikpIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3N0cnVjdHVyZScsIGRpYWdub3N0aWNzOiAnRm91bmQgc2NhbGFyIGluIGFycmF5IHByb3BlcnR5IGF1dGhvciBmaGlyOiBDb21wb3NpdGlvbi5hdXRob3I6UmVmZXJlbmNlJywgZXhwcmVzc2lvbjogW2V4cHJlc3Npb25dIH0pO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmF1dGhvci5sZW5ndGggPT09IDApIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IGF1dGhvciBmaGlyOiBDb21wb3NpdGlvbi5hdXRob3I6UmVmZXJlbmNlJywgZXhwcmVzc2lvbjogW2V4cHJlc3Npb25dIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJhdXRob3JcIl0pIHsgdGhpcy5hdXRob3IuZm9yRWFjaCgoeCxpKSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbitgLmF1dGhvclske2l9XWApKTsgfSkgfVxyXG4gICAgaWYgKCF0aGlzWyd0aXRsZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSB0aXRsZSBmaGlyOiBDb21wb3NpdGlvbi50aXRsZTpzdHJpbmcnLCBleHByZXNzaW9uOiBbZXhwcmVzc2lvbl0gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInRpdGxlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMudGl0bGUuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLnRpdGxlJykpOyB9XHJcbiAgICBpZiAodGhpc1snY29uZmlkZW50aWFsaXR5J10gJiYgKCFPYmplY3QudmFsdWVzKFYzQ29uZmlkZW50aWFsaXR5Q2xhc3NpZmljYXRpb25Db2RlcykuaW5jbHVkZXModGhpcy5jb25maWRlbnRpYWxpdHkudmFsdWUgYXMgYW55KSkpIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ2NvZGUtaW52YWxpZCcsIGRpYWdub3N0aWNzOiAnY29uZmlkZW50aWFsaXR5IChDb21wb3NpdGlvbi5jb25maWRlbnRpYWxpdHkpIG9mIHR5cGUgY29kZSBpcyBtaXNzaW5nIGNvZGUgZm9yIFJlcXVpcmVkIGJpbmRpbmcgdG86IFYzQ29uZmlkZW50aWFsaXR5Q2xhc3NpZmljYXRpb24nLCBleHByZXNzaW9uOiBbZXhwcmVzc2lvbl0gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImNvbmZpZGVudGlhbGl0eVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmNvbmZpZGVudGlhbGl0eS5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuY29uZmlkZW50aWFsaXR5JykpOyB9XHJcbiAgICBpZiAodGhpc1tcImF0dGVzdGVyXCJdKSB7IHRoaXMuYXR0ZXN0ZXIuZm9yRWFjaCgoeCxpKSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbitgLmF0dGVzdGVyWyR7aX1dYCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImN1c3RvZGlhblwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmN1c3RvZGlhbi5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuY3VzdG9kaWFuJykpOyB9XHJcbiAgICBpZiAodGhpc1tcInJlbGF0ZXNUb1wiXSkgeyB0aGlzLnJlbGF0ZXNUby5mb3JFYWNoKCh4LGkpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uK2AucmVsYXRlc1RvWyR7aX1dYCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImV2ZW50XCJdKSB7IHRoaXMuZXZlbnQuZm9yRWFjaCgoeCxpKSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbitgLmV2ZW50WyR7aX1dYCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcInNlY3Rpb25cIl0pIHsgdGhpcy5zZWN0aW9uLmZvckVhY2goKHgsaSkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rYC5zZWN0aW9uWyR7aX1dYCkpOyB9KSB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=