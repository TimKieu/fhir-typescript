// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: ClinicalImpression
import * as fhir from '../fhir.js';
// @ts-ignore
import { ClinicalimpressionStatusVsValidation } from '../fhirValueSets/ClinicalimpressionStatusVsValidation.js';
/**
 * One or more sets of investigations (signs, symptoms, etc.). The actual grouping of investigations varies greatly depending on the type and context of the assessment. These investigations may include data generated during the assessment process, or data previously generated and recorded that is pertinent to the outcomes.
 */
export class ClinicalImpressionInvestigation extends fhir.BackboneElement {
    /**
     * Default constructor for ClinicalImpressionInvestigation - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        else {
            this.code = null;
        }
        if (source['item']) {
            this.item = source.item.map((x) => new fhir.Reference(x));
        }
        else {
            this.item = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ClinicalImpression.investigation';
        }
        iss.push(...this.vRS('code', exp));
        iss.push(...this.vOA('item', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ClinicalImpressionInvestigation._fts_dataType = 'ClinicalImpressionInvestigation';
/**
 * Specific findings or diagnoses that were considered likely or relevant to ongoing treatment.
 */
export class ClinicalImpressionFinding extends fhir.BackboneElement {
    /**
     * Default constructor for ClinicalImpressionFinding - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['itemCodeableConcept']) {
            this.itemCodeableConcept = new fhir.CodeableConcept(source.itemCodeableConcept);
        }
        if (source['itemReference']) {
            this.itemReference = new fhir.Reference(source.itemReference);
        }
        if (source['basis']) {
            this.basis = new fhir.FhirString({ value: source.basis });
        }
        if (source['_basis']) {
            if (this.basis) {
                this.basis.addExtendedProperties(source._basis);
            }
            else {
                this.basis = new fhir.FhirString(source._basis);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ClinicalImpression.finding';
        }
        iss.push(...this.vOS('itemCodeableConcept', exp));
        iss.push(...this.vOS('itemReference', exp));
        iss.push(...this.vOS('basis', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ClinicalImpressionFinding._fts_dataType = 'ClinicalImpressionFinding';
/**
 * A record of a clinical assessment performed to determine what problem(s) may affect the patient and before planning the treatments or management strategies that are best to manage a patient's condition. Assessments are often 1:1 with a clinical consultation / encounter,  but this varies greatly depending on the clinical workflow. This resource is called "ClinicalImpression" rather than "ClinicalAssessment" to avoid confusion with the recording of assessment tools such as Apgar score.
 */
export class ClinicalImpression extends fhir.DomainResource {
    /**
     * Default constructor for ClinicalImpression - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'ClinicalImpression';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['statusReason']) {
            this.statusReason = new fhir.CodeableConcept(source.statusReason);
        }
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        if (source['description']) {
            this.description = new fhir.FhirString({ value: source.description });
        }
        if (source['_description']) {
            if (this.description) {
                this.description.addExtendedProperties(source._description);
            }
            else {
                this.description = new fhir.FhirString(source._description);
            }
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject);
        }
        else {
            this.subject = null;
        }
        if (source['encounter']) {
            this.encounter = new fhir.Reference(source.encounter);
        }
        if (source['effective']) {
            this.effective = source.effective;
        }
        else if (source['effectiveDateTime']) {
            this.effective = new fhir.FhirDateTime({ value: source.effectiveDateTime });
        }
        else if (source['effectivePeriod']) {
            this.effective = new fhir.Period(source.effectivePeriod);
        }
        if (source['date']) {
            this.date = new fhir.FhirDateTime({ value: source.date });
        }
        if (source['_date']) {
            if (this.date) {
                this.date.addExtendedProperties(source._date);
            }
            else {
                this.date = new fhir.FhirDateTime(source._date);
            }
        }
        if (source['assessor']) {
            this.assessor = new fhir.Reference(source.assessor);
        }
        if (source['previous']) {
            this.previous = new fhir.Reference(source.previous);
        }
        if (source['problem']) {
            this.problem = source.problem.map((x) => new fhir.Reference(x));
        }
        else {
            this.problem = [];
        }
        if (source['investigation']) {
            this.investigation = source.investigation.map((x) => new fhir.ClinicalImpressionInvestigation(x));
        }
        else {
            this.investigation = [];
        }
        if (source['protocol']) {
            this.protocol = source.protocol.map((x) => new fhir.FhirUri({ value: x }));
        }
        else {
            this.protocol = [];
        }
        if (source['_protocol']) {
            source._protocol.forEach((x, i) => {
                if (this.protocol.length >= i) {
                    if (x) {
                        this.protocol[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.protocol.push(new fhir.FhirUri(x));
                    }
                }
            });
        }
        if (source['summary']) {
            this.summary = new fhir.FhirString({ value: source.summary });
        }
        if (source['_summary']) {
            if (this.summary) {
                this.summary.addExtendedProperties(source._summary);
            }
            else {
                this.summary = new fhir.FhirString(source._summary);
            }
        }
        if (source['finding']) {
            this.finding = source.finding.map((x) => new fhir.ClinicalImpressionFinding(x));
        }
        else {
            this.finding = [];
        }
        if (source['prognosisCodeableConcept']) {
            this.prognosisCodeableConcept = source.prognosisCodeableConcept.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.prognosisCodeableConcept = [];
        }
        if (source['prognosisReference']) {
            this.prognosisReference = source.prognosisReference.map((x) => new fhir.Reference(x));
        }
        else {
            this.prognosisReference = [];
        }
        if (source['supportingInfo']) {
            this.supportingInfo = source.supportingInfo.map((x) => new fhir.Reference(x));
        }
        else {
            this.supportingInfo = [];
        }
        if (source['note']) {
            this.note = source.note.map((x) => new fhir.Annotation(x));
        }
        else {
            this.note = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ClinicalImpression';
        }
        iss.push(...this.vRPS('resourceType', exp));
        iss.push(...this.vOA('identifier', exp));
        iss.push(...this.vRSV('status', exp, 'ClinicalimpressionStatus', ClinicalimpressionStatusVsValidation, 'r'));
        iss.push(...this.vOS('statusReason', exp));
        iss.push(...this.vOS('code', exp));
        iss.push(...this.vOS('description', exp));
        iss.push(...this.vRS('subject', exp));
        iss.push(...this.vOS('encounter', exp));
        iss.push(...this.vOS('effective', exp));
        iss.push(...this.vOS('date', exp));
        iss.push(...this.vOS('assessor', exp));
        iss.push(...this.vOS('previous', exp));
        iss.push(...this.vOA('problem', exp));
        iss.push(...this.vOA('investigation', exp));
        iss.push(...this.vOA('protocol', exp));
        iss.push(...this.vOS('summary', exp));
        iss.push(...this.vOA('finding', exp));
        iss.push(...this.vOA('prognosisCodeableConcept', exp));
        iss.push(...this.vOA('prognosisReference', exp));
        iss.push(...this.vOA('supportingInfo', exp));
        iss.push(...this.vOA('note', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ClinicalImpression._fts_dataType = 'ClinicalImpression';
/**
 * Internal flag to properly serialize choice-type element ClinicalImpression.effective[x]
 */
ClinicalImpression._fts_effectiveIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ2xpbmljYWxJbXByZXNzaW9uLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9DbGluaWNhbEltcHJlc3Npb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsb0NBQW9DO0FBRXBDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBWW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsb0NBQW9DLEVBQUUsTUFBTSwwREFBMEQsQ0FBQztBQW1CaEg7O0dBRUc7QUFDSCxNQUFNLE9BQU8sK0JBQWdDLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFhdkU7O09BRUc7SUFDSCxZQUFZLFNBQXNELEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQzVHLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7U0FBRTthQUNyRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDMUIsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQzdFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUM7U0FBRTtJQUMxQixDQUFDO0lBQ0Q7O09BRUc7SUFDYSxpQkFBaUIsQ0FBQyxNQUFhLEVBQUU7UUFDL0MsSUFBSSxHQUFHLEdBQW1CLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLENBQUMsQ0FBQztR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R0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDekMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDckMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDckMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsZUFBZSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDM0MsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDckMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDckMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsMEJBQTBCLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN0RCxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ2hELEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDNUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbEMsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDOztBQXZMRDs7R0FFRztBQUM2QixnQ0FBYSxHQUFVLG9CQUFvQixDQUFDO0FBc0M1RTs7R0FFRztBQUN1Qix5Q0FBc0IsR0FBUSxJQUFJLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjQuY29yZSB2ZXJzaW9uOiA0LjAuMVxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IENsaW5pY2FsSW1wcmVzc2lvblxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgSW52ZXN0aWdhdGlvblNldHNDb2RlcywgIEludmVzdGlnYXRpb25TZXRzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0ludmVzdGlnYXRpb25TZXRzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEludmVzdGlnYXRpb25TZXRzVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9JbnZlc3RpZ2F0aW9uU2V0c1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29uZGl0aW9uQ29kZXMsICBDb25kaXRpb25Db2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uZGl0aW9uQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbmRpdGlvblZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uZGl0aW9uVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDbGluaWNhbGltcHJlc3Npb25TdGF0dXNDb2RlcywgIENsaW5pY2FsaW1wcmVzc2lvblN0YXR1c0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9DbGluaWNhbGltcHJlc3Npb25TdGF0dXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ2xpbmljYWxpbXByZXNzaW9uU3RhdHVzVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9DbGluaWNhbGltcHJlc3Npb25TdGF0dXNWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENsaW5pY2FsaW1wcmVzc2lvblByb2dub3Npc0NvZGVzLCAgQ2xpbmljYWxpbXByZXNzaW9uUHJvZ25vc2lzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NsaW5pY2FsaW1wcmVzc2lvblByb2dub3Npc0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDbGluaWNhbGltcHJlc3Npb25Qcm9nbm9zaXNWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NsaW5pY2FsaW1wcmVzc2lvblByb2dub3Npc1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBDbGluaWNhbEltcHJlc3Npb25JbnZlc3RpZ2F0aW9uIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENsaW5pY2FsSW1wcmVzc2lvbkludmVzdGlnYXRpb25BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBBIG5hbWUvY29kZSBmb3IgdGhlIGdyb3VwIChcInNldFwiKSBvZiBpbnZlc3RpZ2F0aW9ucy4gVHlwaWNhbGx5LCB0aGlzIHdpbGwgYmUgc29tZXRoaW5nIGxpa2UgXCJzaWduc1wiLCBcInN5bXB0b21zXCIsIFwiY2xpbmljYWxcIiwgXCJkaWFnbm9zdGljXCIsIGJ1dCB0aGUgbGlzdCBpcyBub3QgY29uc3RyYWluZWQsIGFuZCBvdGhlcnMgc3VjaCBncm91cHMgc3VjaCBhcyAoZXhwb3N1cmV8ZmFtaWx5fHRyYXZlbHxudXRyaXRpb25hbCkgaGlzdG9yeSBtYXkgYmUgdXNlZC5cclxuICAgKi9cclxuICBjb2RlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBNb3N0IGludmVzdGlnYXRpb25zIGFyZSBvYnNlcnZhdGlvbnMgb2Ygb25lIGtpbmQgb3IgYW5vdGhlciBidXQgc29tZSBvdGhlciBzcGVjaWZpYyB0eXBlcyBvZiBkYXRhIGNvbGxlY3Rpb24gcmVzb3VyY2VzIGNhbiBhbHNvIGJlIHVzZWQuXHJcbiAgICovXHJcbiAgaXRlbT86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIE9uZSBvciBtb3JlIHNldHMgb2YgaW52ZXN0aWdhdGlvbnMgKHNpZ25zLCBzeW1wdG9tcywgZXRjLikuIFRoZSBhY3R1YWwgZ3JvdXBpbmcgb2YgaW52ZXN0aWdhdGlvbnMgdmFyaWVzIGdyZWF0bHkgZGVwZW5kaW5nIG9uIHRoZSB0eXBlIGFuZCBjb250ZXh0IG9mIHRoZSBhc3Nlc3NtZW50LiBUaGVzZSBpbnZlc3RpZ2F0aW9ucyBtYXkgaW5jbHVkZSBkYXRhIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGFzc2Vzc21lbnQgcHJvY2Vzcywgb3IgZGF0YSBwcmV2aW91c2x5IGdlbmVyYXRlZCBhbmQgcmVjb3JkZWQgdGhhdCBpcyBwZXJ0aW5lbnQgdG8gdGhlIG91dGNvbWVzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENsaW5pY2FsSW1wcmVzc2lvbkludmVzdGlnYXRpb24gZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdDbGluaWNhbEltcHJlc3Npb25JbnZlc3RpZ2F0aW9uJztcclxuICAvKipcclxuICAgKiBBIG5hbWUvY29kZSBmb3IgdGhlIGdyb3VwIChcInNldFwiKSBvZiBpbnZlc3RpZ2F0aW9ucy4gVHlwaWNhbGx5LCB0aGlzIHdpbGwgYmUgc29tZXRoaW5nIGxpa2UgXCJzaWduc1wiLCBcInN5bXB0b21zXCIsIFwiY2xpbmljYWxcIiwgXCJkaWFnbm9zdGljXCIsIGJ1dCB0aGUgbGlzdCBpcyBub3QgY29uc3RyYWluZWQsIGFuZCBvdGhlcnMgc3VjaCBncm91cHMgc3VjaCBhcyAoZXhwb3N1cmV8ZmFtaWx5fHRyYXZlbHxudXRyaXRpb25hbCkgaGlzdG9yeSBtYXkgYmUgdXNlZC5cclxuICAgKi9cclxuICBwdWJsaWMgY29kZTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBNb3N0IGludmVzdGlnYXRpb25zIGFyZSBvYnNlcnZhdGlvbnMgb2Ygb25lIGtpbmQgb3IgYW5vdGhlciBidXQgc29tZSBvdGhlciBzcGVjaWZpYyB0eXBlcyBvZiBkYXRhIGNvbGxlY3Rpb24gcmVzb3VyY2VzIGNhbiBhbHNvIGJlIHVzZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGl0ZW06IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQ2xpbmljYWxJbXByZXNzaW9uSW52ZXN0aWdhdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENsaW5pY2FsSW1wcmVzc2lvbkludmVzdGlnYXRpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY29kZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvZGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydpdGVtJ10pIHsgdGhpcy5pdGVtID0gc291cmNlLml0ZW0ubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pdGVtID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdDbGluaWNhbEltcHJlc3Npb24uaW52ZXN0aWdhdGlvbicgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ2NvZGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2l0ZW0nLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIENsaW5pY2FsSW1wcmVzc2lvbkZpbmRpbmcgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2xpbmljYWxJbXByZXNzaW9uRmluZGluZ0FyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFNwZWNpZmljIHRleHQgb3IgY29kZSBmb3IgZmluZGluZyBvciBkaWFnbm9zaXMsIHdoaWNoIG1heSBpbmNsdWRlIHJ1bGVkLW91dCBvciByZXNvbHZlZCBjb25kaXRpb25zLlxyXG4gICAqL1xyXG4gIGl0ZW1Db2RlYWJsZUNvbmNlcHQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFNwZWNpZmljIHJlZmVyZW5jZSBmb3IgZmluZGluZyBvciBkaWFnbm9zaXMsIHdoaWNoIG1heSBpbmNsdWRlIHJ1bGVkLW91dCBvciByZXNvbHZlZCBjb25kaXRpb25zLlxyXG4gICAqL1xyXG4gIGl0ZW1SZWZlcmVuY2U/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFdoaWNoIGludmVzdGlnYXRpb25zIHN1cHBvcnQgZmluZGluZyBvciBkaWFnbm9zaXMuXHJcbiAgICovXHJcbiAgYmFzaXM/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ2xpbmljYWxJbXByZXNzaW9uLmZpbmRpbmcuYmFzaXNcclxuICAgKi9cclxuICBfYmFzaXM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG59XHJcblxyXG4vKipcclxuICogU3BlY2lmaWMgZmluZGluZ3Mgb3IgZGlhZ25vc2VzIHRoYXQgd2VyZSBjb25zaWRlcmVkIGxpa2VseSBvciByZWxldmFudCB0byBvbmdvaW5nIHRyZWF0bWVudC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDbGluaWNhbEltcHJlc3Npb25GaW5kaW5nIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQ2xpbmljYWxJbXByZXNzaW9uRmluZGluZyc7XHJcbiAgLyoqXHJcbiAgICogU3BlY2lmaWMgdGV4dCBvciBjb2RlIGZvciBmaW5kaW5nIG9yIGRpYWdub3Npcywgd2hpY2ggbWF5IGluY2x1ZGUgcnVsZWQtb3V0IG9yIHJlc29sdmVkIGNvbmRpdGlvbnMuXHJcbiAgICovXHJcbiAgcHVibGljIGl0ZW1Db2RlYWJsZUNvbmNlcHQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU3BlY2lmaWMgcmVmZXJlbmNlIGZvciBmaW5kaW5nIG9yIGRpYWdub3Npcywgd2hpY2ggbWF5IGluY2x1ZGUgcnVsZWQtb3V0IG9yIHJlc29sdmVkIGNvbmRpdGlvbnMuXHJcbiAgICovXHJcbiAgcHVibGljIGl0ZW1SZWZlcmVuY2U/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogV2hpY2ggaW52ZXN0aWdhdGlvbnMgc3VwcG9ydCBmaW5kaW5nIG9yIGRpYWdub3Npcy5cclxuICAgKi9cclxuICBwdWJsaWMgYmFzaXM/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIENsaW5pY2FsSW1wcmVzc2lvbkZpbmRpbmcgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxDbGluaWNhbEltcHJlc3Npb25GaW5kaW5nQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2l0ZW1Db2RlYWJsZUNvbmNlcHQnXSkgeyB0aGlzLml0ZW1Db2RlYWJsZUNvbmNlcHQgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLml0ZW1Db2RlYWJsZUNvbmNlcHQpOyB9XHJcbiAgICBpZiAoc291cmNlWydpdGVtUmVmZXJlbmNlJ10pIHsgdGhpcy5pdGVtUmVmZXJlbmNlID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5pdGVtUmVmZXJlbmNlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYmFzaXMnXSkgeyB0aGlzLmJhc2lzID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5iYXNpc30pOyB9XHJcbiAgICBpZiAoc291cmNlWydfYmFzaXMnXSkge1xyXG4gICAgICBpZiAodGhpcy5iYXNpcykgeyB0aGlzLmJhc2lzLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2Jhc2lzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuYmFzaXMgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fYmFzaXMgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdDbGluaWNhbEltcHJlc3Npb24uZmluZGluZycgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2l0ZW1Db2RlYWJsZUNvbmNlcHQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2l0ZW1SZWZlcmVuY2UnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2Jhc2lzJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBDbGluaWNhbEltcHJlc3Npb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2xpbmljYWxJbXByZXNzaW9uQXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiQ2xpbmljYWxJbXByZXNzaW9uXCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaXMgYSBidXNpbmVzcyBpZGVudGlmaWVyLCBub3QgYSByZXNvdXJjZSBpZGVudGlmaWVyIChzZWUgW2Rpc2N1c3Npb25dKHJlc291cmNlLmh0bWwjaWRlbnRpZmllcnMpKS4gIEl0IGlzIGJlc3QgcHJhY3RpY2UgZm9yIHRoZSBpZGVudGlmaWVyIHRvIG9ubHkgYXBwZWFyIG9uIGEgc2luZ2xlIHJlc291cmNlIGluc3RhbmNlLCBob3dldmVyIGJ1c2luZXNzIHByYWN0aWNlcyBtYXkgb2NjYXNpb25hbGx5IGRpY3RhdGUgdGhhdCBtdWx0aXBsZSByZXNvdXJjZSBpbnN0YW5jZXMgd2l0aCB0aGUgc2FtZSBpZGVudGlmaWVyIGNhbiBleGlzdCAtIHBvc3NpYmx5IGV2ZW4gd2l0aCBkaWZmZXJlbnQgcmVzb3VyY2UgdHlwZXMuICBGb3IgZXhhbXBsZSwgbXVsdGlwbGUgUGF0aWVudCBhbmQgYSBQZXJzb24gcmVzb3VyY2UgaW5zdGFuY2UgbWlnaHQgc2hhcmUgdGhlIHNhbWUgc29jaWFsIGluc3VyYW5jZSBudW1iZXIuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IGlzIGxhYmVsZWQgYXMgYSBtb2RpZmllciBiZWNhdXNlIHRoZSBzdGF0dXMgY29udGFpbnMgdGhlIGNvZGUgZW50ZXJlZC1pbi1lcnJvciB0aGF0IG1hcmtzIHRoZSBjbGluaWNhbCBpbXByZXNzaW9uIGFzIG5vdCBjdXJyZW50bHkgdmFsaWQuXHJcbiAgICovXHJcbiAgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPENsaW5pY2FsaW1wcmVzc2lvblN0YXR1c0NvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDbGluaWNhbEltcHJlc3Npb24uc3RhdHVzXHJcbiAgICovXHJcbiAgX3N0YXR1cz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBnZW5lcmFsbHkgb25seSB1c2VkIGZvciBcImV4Y2VwdGlvblwiIHN0YXR1c2VzIHN1Y2ggYXMgXCJub3QtZG9uZVwiLCBcInN1c3BlbmRlZFwiIG9yIFwiY2FuY2VsbGVkXCIuXHJcbiAgICogW2Rpc3RpbmN0IHJlYXNvbiBjb2RlcyBmb3IgZGlmZmVyZW50IHN0YXR1c2VzIGNhbiBiZSBlbmZvcmNlZCB1c2luZyBpbnZhcmlhbnRzIGlmIHRoZXkgYXJlIHVuaXZlcnNhbCBiaW5kaW5nc10uXHJcbiAgICovXHJcbiAgc3RhdHVzUmVhc29uPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGlzIHByZXNlbnQgYXMgYSBwbGFjZS1ob2xkZXIgb25seSBhbmQgbWF5IGJlIHJlbW92ZWQgYmFzZWQgb24gZmVlZGJhY2svd29yayBncm91cCBvcGluaW9uLlxyXG4gICAqL1xyXG4gIGNvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgc3VtbWFyeSBvZiB0aGUgY29udGV4dCBhbmQvb3IgY2F1c2Ugb2YgdGhlIGFzc2Vzc21lbnQgLSB3aHkgLyB3aGVyZSBpdCB3YXMgcGVyZm9ybWVkLCBhbmQgd2hhdCBwYXRpZW50IGV2ZW50cy9zdGF0dXMgcHJvbXB0ZWQgaXQuXHJcbiAgICovXHJcbiAgZGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ2xpbmljYWxJbXByZXNzaW9uLmRlc2NyaXB0aW9uXHJcbiAgICovXHJcbiAgX2Rlc2NyaXB0aW9uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgcGF0aWVudCBvciBncm91cCBvZiBpbmRpdmlkdWFscyBhc3Nlc3NlZCBhcyBwYXJ0IG9mIHRoaXMgcmVjb3JkLlxyXG4gICAqL1xyXG4gIHN1YmplY3Q6IGZoaXIuUmVmZXJlbmNlQXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgd2lsbCB0eXBpY2FsbHkgYmUgdGhlIGVuY291bnRlciB0aGUgZXZlbnQgb2NjdXJyZWQgd2l0aGluLCBidXQgc29tZSBhY3Rpdml0aWVzIG1heSBiZSBpbml0aWF0ZWQgcHJpb3IgdG8gb3IgYWZ0ZXIgdGhlIG9mZmljaWFsIGNvbXBsZXRpb24gb2YgYW4gZW5jb3VudGVyIGJ1dCBzdGlsbCBiZSB0aWVkIHRvIHRoZSBjb250ZXh0IG9mIHRoZSBlbmNvdW50ZXIuXHJcbiAgICovXHJcbiAgZW5jb3VudGVyPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIFNIT1VMRCBiZSBhY2N1cmF0ZSB0byBhdCBsZWFzdCB0aGUgbWludXRlLCB0aG91Z2ggc29tZSBhc3Nlc3NtZW50cyBvbmx5IGhhdmUgYSBrbm93biBkYXRlLlxyXG4gICAqL1xyXG4gIGVmZmVjdGl2ZT86IGZoaXIuRmhpckRhdGVUaW1lfGZoaXIuUGVyaW9kfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIFNIT1VMRCBiZSBhY2N1cmF0ZSB0byBhdCBsZWFzdCB0aGUgbWludXRlLCB0aG91Z2ggc29tZSBhc3Nlc3NtZW50cyBvbmx5IGhhdmUgYSBrbm93biBkYXRlLlxyXG4gICAqL1xyXG4gIGVmZmVjdGl2ZURhdGVUaW1lPzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIFNIT1VMRCBiZSBhY2N1cmF0ZSB0byBhdCBsZWFzdCB0aGUgbWludXRlLCB0aG91Z2ggc29tZSBhc3Nlc3NtZW50cyBvbmx5IGhhdmUgYSBrbm93biBkYXRlLlxyXG4gICAqL1xyXG4gIGVmZmVjdGl2ZVBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHdoZW4gdGhlIGRvY3VtZW50YXRpb24gb2YgdGhlIGFzc2Vzc21lbnQgd2FzIGNvbXBsZXRlLlxyXG4gICAqL1xyXG4gIGRhdGU/OiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDbGluaWNhbEltcHJlc3Npb24uZGF0ZVxyXG4gICAqL1xyXG4gIF9kYXRlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgY2xpbmljaWFuIHBlcmZvcm1pbmcgdGhlIGFzc2Vzc21lbnQuXHJcbiAgICovXHJcbiAgYXNzZXNzb3I/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEl0IGlzIGFsd2F5cyBsaWtlbHkgdGhhdCBtdWx0aXBsZSBwcmV2aW91cyBhc3Nlc3NtZW50cyBleGlzdCBmb3IgYSBwYXRpZW50LiBUaGUgcG9pbnQgb2YgcXVvdGluZyBhIHByZXZpb3VzIGFzc2Vzc21lbnQgaXMgdGhhdCB0aGlzIGFzc2Vzc21lbnQgaXMgcmVsYXRpdmUgdG8gaXQgKHNlZSByZXNvbHZlZCkuXHJcbiAgICovXHJcbiAgcHJldmlvdXM/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIGUuZy4gVGhlIHBhdGllbnQgaXMgYSBwcmVnbmFudCwgaGFzIGNvbmdlc3RpdmUgaGVhcnQgZmFpbHVyZSwgaGFzIGFuIOKAjkFkZW5vY2FyY2lub21hLCBhbmQgaXMgYWxsZXJnaWMgdG8gcGVuaWNpbGxpbi5cclxuICAgKi9cclxuICBwcm9ibGVtPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE9uZSBvciBtb3JlIHNldHMgb2YgaW52ZXN0aWdhdGlvbnMgKHNpZ25zLCBzeW1wdG9tcywgZXRjLikuIFRoZSBhY3R1YWwgZ3JvdXBpbmcgb2YgaW52ZXN0aWdhdGlvbnMgdmFyaWVzIGdyZWF0bHkgZGVwZW5kaW5nIG9uIHRoZSB0eXBlIGFuZCBjb250ZXh0IG9mIHRoZSBhc3Nlc3NtZW50LiBUaGVzZSBpbnZlc3RpZ2F0aW9ucyBtYXkgaW5jbHVkZSBkYXRhIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGFzc2Vzc21lbnQgcHJvY2Vzcywgb3IgZGF0YSBwcmV2aW91c2x5IGdlbmVyYXRlZCBhbmQgcmVjb3JkZWQgdGhhdCBpcyBwZXJ0aW5lbnQgdG8gdGhlIG91dGNvbWVzLlxyXG4gICAqL1xyXG4gIGludmVzdGlnYXRpb24/OiBmaGlyLkNsaW5pY2FsSW1wcmVzc2lvbkludmVzdGlnYXRpb25BcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFJlZmVyZW5jZSB0byBhIHNwZWNpZmljIHB1Ymxpc2hlZCBjbGluaWNhbCBwcm90b2NvbCB0aGF0IHdhcyBmb2xsb3dlZCBkdXJpbmcgdGhpcyBhc3Nlc3NtZW50LCBhbmQvb3IgdGhhdCBwcm92aWRlcyBldmlkZW5jZSBpbiBzdXBwb3J0IG9mIHRoZSBkaWFnbm9zaXMuXHJcbiAgICovXHJcbiAgcHJvdG9jb2w/OiBmaGlyLkZoaXJVcmlbXXwoc3RyaW5nfG51bGwpW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDbGluaWNhbEltcHJlc3Npb24ucHJvdG9jb2xcclxuICAgKi9cclxuICBfcHJvdG9jb2w/OihmaGlyLkZoaXJFbGVtZW50QXJnc3xudWxsKVtdO1xyXG4gIC8qKlxyXG4gICAqIEEgdGV4dCBzdW1tYXJ5IG9mIHRoZSBpbnZlc3RpZ2F0aW9ucyBhbmQgdGhlIGRpYWdub3Npcy5cclxuICAgKi9cclxuICBzdW1tYXJ5PzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENsaW5pY2FsSW1wcmVzc2lvbi5zdW1tYXJ5XHJcbiAgICovXHJcbiAgX3N1bW1hcnk/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFNwZWNpZmljIGZpbmRpbmdzIG9yIGRpYWdub3NlcyB0aGF0IHdlcmUgY29uc2lkZXJlZCBsaWtlbHkgb3IgcmVsZXZhbnQgdG8gb25nb2luZyB0cmVhdG1lbnQuXHJcbiAgICovXHJcbiAgZmluZGluZz86IGZoaXIuQ2xpbmljYWxJbXByZXNzaW9uRmluZGluZ0FyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXN0aW1hdGUgb2YgbGlrZWx5IG91dGNvbWUuXHJcbiAgICovXHJcbiAgcHJvZ25vc2lzQ29kZWFibGVDb25jZXB0PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFJpc2tBc3Nlc3NtZW50IGV4cHJlc3NpbmcgbGlrZWx5IG91dGNvbWUuXHJcbiAgICovXHJcbiAgcHJvZ25vc2lzUmVmZXJlbmNlPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZm9ybWF0aW9uIHN1cHBvcnRpbmcgdGhlIGNsaW5pY2FsIGltcHJlc3Npb24uXHJcbiAgICovXHJcbiAgc3VwcG9ydGluZ0luZm8/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRG9uJ3QgdXNlIHRoaXMgZWxlbWVudCBmb3IgY29udGVudCB0aGF0IHNob3VsZCBtb3JlIHByb3Blcmx5IGFwcGVhciBhcyBvbmUgb2YgdGhlIHNwZWNpZmljIGVsZW1lbnRzIG9mIHRoZSBpbXByZXNzaW9uLlxyXG4gICAqL1xyXG4gIG5vdGU/OiBmaGlyLkFubm90YXRpb25BcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQSByZWNvcmQgb2YgYSBjbGluaWNhbCBhc3Nlc3NtZW50IHBlcmZvcm1lZCB0byBkZXRlcm1pbmUgd2hhdCBwcm9ibGVtKHMpIG1heSBhZmZlY3QgdGhlIHBhdGllbnQgYW5kIGJlZm9yZSBwbGFubmluZyB0aGUgdHJlYXRtZW50cyBvciBtYW5hZ2VtZW50IHN0cmF0ZWdpZXMgdGhhdCBhcmUgYmVzdCB0byBtYW5hZ2UgYSBwYXRpZW50J3MgY29uZGl0aW9uLiBBc3Nlc3NtZW50cyBhcmUgb2Z0ZW4gMToxIHdpdGggYSBjbGluaWNhbCBjb25zdWx0YXRpb24gLyBlbmNvdW50ZXIsICBidXQgdGhpcyB2YXJpZXMgZ3JlYXRseSBkZXBlbmRpbmcgb24gdGhlIGNsaW5pY2FsIHdvcmtmbG93LiBUaGlzIHJlc291cmNlIGlzIGNhbGxlZCBcIkNsaW5pY2FsSW1wcmVzc2lvblwiIHJhdGhlciB0aGFuIFwiQ2xpbmljYWxBc3Nlc3NtZW50XCIgdG8gYXZvaWQgY29uZnVzaW9uIHdpdGggdGhlIHJlY29yZGluZyBvZiBhc3Nlc3NtZW50IHRvb2xzIHN1Y2ggYXMgQXBnYXIgc2NvcmUuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ2xpbmljYWxJbXByZXNzaW9uIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdDbGluaWNhbEltcHJlc3Npb24nO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNvdXJjZVR5cGU6IFwiQ2xpbmljYWxJbXByZXNzaW9uXCI7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBhIGJ1c2luZXNzIGlkZW50aWZpZXIsIG5vdCBhIHJlc291cmNlIGlkZW50aWZpZXIgKHNlZSBbZGlzY3Vzc2lvbl0ocmVzb3VyY2UuaHRtbCNpZGVudGlmaWVycykpLiAgSXQgaXMgYmVzdCBwcmFjdGljZSBmb3IgdGhlIGlkZW50aWZpZXIgdG8gb25seSBhcHBlYXIgb24gYSBzaW5nbGUgcmVzb3VyY2UgaW5zdGFuY2UsIGhvd2V2ZXIgYnVzaW5lc3MgcHJhY3RpY2VzIG1heSBvY2Nhc2lvbmFsbHkgZGljdGF0ZSB0aGF0IG11bHRpcGxlIHJlc291cmNlIGluc3RhbmNlcyB3aXRoIHRoZSBzYW1lIGlkZW50aWZpZXIgY2FuIGV4aXN0IC0gcG9zc2libHkgZXZlbiB3aXRoIGRpZmZlcmVudCByZXNvdXJjZSB0eXBlcy4gIEZvciBleGFtcGxlLCBtdWx0aXBsZSBQYXRpZW50IGFuZCBhIFBlcnNvbiByZXNvdXJjZSBpbnN0YW5jZSBtaWdodCBzaGFyZSB0aGUgc2FtZSBzb2NpYWwgaW5zdXJhbmNlIG51bWJlci5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcjogZmhpci5JZGVudGlmaWVyW107XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IGlzIGxhYmVsZWQgYXMgYSBtb2RpZmllciBiZWNhdXNlIHRoZSBzdGF0dXMgY29udGFpbnMgdGhlIGNvZGUgZW50ZXJlZC1pbi1lcnJvciB0aGF0IG1hcmtzIHRoZSBjbGluaWNhbCBpbXByZXNzaW9uIGFzIG5vdCBjdXJyZW50bHkgdmFsaWQuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1czogZmhpci5GaGlyQ29kZTxDbGluaWNhbGltcHJlc3Npb25TdGF0dXNDb2RlVHlwZT58bnVsbDtcclxuICAvKipcclxuICAgKiBUaGlzIGlzIGdlbmVyYWxseSBvbmx5IHVzZWQgZm9yIFwiZXhjZXB0aW9uXCIgc3RhdHVzZXMgc3VjaCBhcyBcIm5vdC1kb25lXCIsIFwic3VzcGVuZGVkXCIgb3IgXCJjYW5jZWxsZWRcIi5cclxuICAgKiBbZGlzdGluY3QgcmVhc29uIGNvZGVzIGZvciBkaWZmZXJlbnQgc3RhdHVzZXMgY2FuIGJlIGVuZm9yY2VkIHVzaW5nIGludmFyaWFudHMgaWYgdGhleSBhcmUgdW5pdmVyc2FsIGJpbmRpbmdzXS5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdHVzUmVhc29uPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaXMgcHJlc2VudCBhcyBhIHBsYWNlLWhvbGRlciBvbmx5IGFuZCBtYXkgYmUgcmVtb3ZlZCBiYXNlZCBvbiBmZWVkYmFjay93b3JrIGdyb3VwIG9waW5pb24uXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBzdW1tYXJ5IG9mIHRoZSBjb250ZXh0IGFuZC9vciBjYXVzZSBvZiB0aGUgYXNzZXNzbWVudCAtIHdoeSAvIHdoZXJlIGl0IHdhcyBwZXJmb3JtZWQsIGFuZCB3aGF0IHBhdGllbnQgZXZlbnRzL3N0YXR1cyBwcm9tcHRlZCBpdC5cclxuICAgKi9cclxuICBwdWJsaWMgZGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXRpZW50IG9yIGdyb3VwIG9mIGluZGl2aWR1YWxzIGFzc2Vzc2VkIGFzIHBhcnQgb2YgdGhpcyByZWNvcmQuXHJcbiAgICovXHJcbiAgcHVibGljIHN1YmplY3Q6IGZoaXIuUmVmZXJlbmNlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhpcyB3aWxsIHR5cGljYWxseSBiZSB0aGUgZW5jb3VudGVyIHRoZSBldmVudCBvY2N1cnJlZCB3aXRoaW4sIGJ1dCBzb21lIGFjdGl2aXRpZXMgbWF5IGJlIGluaXRpYXRlZCBwcmlvciB0byBvciBhZnRlciB0aGUgb2ZmaWNpYWwgY29tcGxldGlvbiBvZiBhbiBlbmNvdW50ZXIgYnV0IHN0aWxsIGJlIHRpZWQgdG8gdGhlIGNvbnRleHQgb2YgdGhlIGVuY291bnRlci5cclxuICAgKi9cclxuICBwdWJsaWMgZW5jb3VudGVyPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgU0hPVUxEIGJlIGFjY3VyYXRlIHRvIGF0IGxlYXN0IHRoZSBtaW51dGUsIHRob3VnaCBzb21lIGFzc2Vzc21lbnRzIG9ubHkgaGF2ZSBhIGtub3duIGRhdGUuXHJcbiAgICovXHJcbiAgcHVibGljIGVmZmVjdGl2ZT86IChmaGlyLkZoaXJEYXRlVGltZXxmaGlyLlBlcmlvZCl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgQ2xpbmljYWxJbXByZXNzaW9uLmVmZmVjdGl2ZVt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c19lZmZlY3RpdmVJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgd2hlbiB0aGUgZG9jdW1lbnRhdGlvbiBvZiB0aGUgYXNzZXNzbWVudCB3YXMgY29tcGxldGUuXHJcbiAgICovXHJcbiAgcHVibGljIGRhdGU/OiBmaGlyLkZoaXJEYXRlVGltZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNsaW5pY2lhbiBwZXJmb3JtaW5nIHRoZSBhc3Nlc3NtZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhc3Nlc3Nvcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJdCBpcyBhbHdheXMgbGlrZWx5IHRoYXQgbXVsdGlwbGUgcHJldmlvdXMgYXNzZXNzbWVudHMgZXhpc3QgZm9yIGEgcGF0aWVudC4gVGhlIHBvaW50IG9mIHF1b3RpbmcgYSBwcmV2aW91cyBhc3Nlc3NtZW50IGlzIHRoYXQgdGhpcyBhc3Nlc3NtZW50IGlzIHJlbGF0aXZlIHRvIGl0IChzZWUgcmVzb2x2ZWQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcmV2aW91cz86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBlLmcuIFRoZSBwYXRpZW50IGlzIGEgcHJlZ25hbnQsIGhhcyBjb25nZXN0aXZlIGhlYXJ0IGZhaWx1cmUsIGhhcyBhbiDigI5BZGVub2NhcmNpbm9tYSwgYW5kIGlzIGFsbGVyZ2ljIHRvIHBlbmljaWxsaW4uXHJcbiAgICovXHJcbiAgcHVibGljIHByb2JsZW06IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogT25lIG9yIG1vcmUgc2V0cyBvZiBpbnZlc3RpZ2F0aW9ucyAoc2lnbnMsIHN5bXB0b21zLCBldGMuKS4gVGhlIGFjdHVhbCBncm91cGluZyBvZiBpbnZlc3RpZ2F0aW9ucyB2YXJpZXMgZ3JlYXRseSBkZXBlbmRpbmcgb24gdGhlIHR5cGUgYW5kIGNvbnRleHQgb2YgdGhlIGFzc2Vzc21lbnQuIFRoZXNlIGludmVzdGlnYXRpb25zIG1heSBpbmNsdWRlIGRhdGEgZ2VuZXJhdGVkIGR1cmluZyB0aGUgYXNzZXNzbWVudCBwcm9jZXNzLCBvciBkYXRhIHByZXZpb3VzbHkgZ2VuZXJhdGVkIGFuZCByZWNvcmRlZCB0aGF0IGlzIHBlcnRpbmVudCB0byB0aGUgb3V0Y29tZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGludmVzdGlnYXRpb246IGZoaXIuQ2xpbmljYWxJbXByZXNzaW9uSW52ZXN0aWdhdGlvbltdO1xyXG4gIC8qKlxyXG4gICAqIFJlZmVyZW5jZSB0byBhIHNwZWNpZmljIHB1Ymxpc2hlZCBjbGluaWNhbCBwcm90b2NvbCB0aGF0IHdhcyBmb2xsb3dlZCBkdXJpbmcgdGhpcyBhc3Nlc3NtZW50LCBhbmQvb3IgdGhhdCBwcm92aWRlcyBldmlkZW5jZSBpbiBzdXBwb3J0IG9mIHRoZSBkaWFnbm9zaXMuXHJcbiAgICovXHJcbiAgcHVibGljIHByb3RvY29sOiBmaGlyLkZoaXJVcmlbXTtcclxuICAvKipcclxuICAgKiBBIHRleHQgc3VtbWFyeSBvZiB0aGUgaW52ZXN0aWdhdGlvbnMgYW5kIHRoZSBkaWFnbm9zaXMuXHJcbiAgICovXHJcbiAgcHVibGljIHN1bW1hcnk/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFNwZWNpZmljIGZpbmRpbmdzIG9yIGRpYWdub3NlcyB0aGF0IHdlcmUgY29uc2lkZXJlZCBsaWtlbHkgb3IgcmVsZXZhbnQgdG8gb25nb2luZyB0cmVhdG1lbnQuXHJcbiAgICovXHJcbiAgcHVibGljIGZpbmRpbmc6IGZoaXIuQ2xpbmljYWxJbXByZXNzaW9uRmluZGluZ1tdO1xyXG4gIC8qKlxyXG4gICAqIEVzdGltYXRlIG9mIGxpa2VseSBvdXRjb21lLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcm9nbm9zaXNDb2RlYWJsZUNvbmNlcHQ6IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogUmlza0Fzc2Vzc21lbnQgZXhwcmVzc2luZyBsaWtlbHkgb3V0Y29tZS5cclxuICAgKi9cclxuICBwdWJsaWMgcHJvZ25vc2lzUmVmZXJlbmNlOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIEluZm9ybWF0aW9uIHN1cHBvcnRpbmcgdGhlIGNsaW5pY2FsIGltcHJlc3Npb24uXHJcbiAgICovXHJcbiAgcHVibGljIHN1cHBvcnRpbmdJbmZvOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIERvbid0IHVzZSB0aGlzIGVsZW1lbnQgZm9yIGNvbnRlbnQgdGhhdCBzaG91bGQgbW9yZSBwcm9wZXJseSBhcHBlYXIgYXMgb25lIG9mIHRoZSBzcGVjaWZpYyBlbGVtZW50cyBvZiB0aGUgaW1wcmVzc2lvbi5cclxuICAgKi9cclxuICBwdWJsaWMgbm90ZTogZmhpci5Bbm5vdGF0aW9uW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQ2xpbmljYWxJbXByZXNzaW9uIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8Q2xpbmljYWxJbXByZXNzaW9uQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ0NsaW5pY2FsSW1wcmVzc2lvbic7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gc291cmNlLmlkZW50aWZpZXIubWFwKCh4KSA9PiBuZXcgZmhpci5JZGVudGlmaWVyKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaWRlbnRpZmllciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydzdGF0dXMnXSkgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPENsaW5pY2FsaW1wcmVzc2lvblN0YXR1c0NvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5zdGF0dXN9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3N0YXR1cyddKSB7XHJcbiAgICAgIGlmICh0aGlzLnN0YXR1cykgeyB0aGlzLnN0YXR1cy5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zdGF0dXMhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxDbGluaWNhbGltcHJlc3Npb25TdGF0dXNDb2RlVHlwZT4oc291cmNlLl9zdGF0dXMgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3N0YXR1c1JlYXNvbiddKSB7IHRoaXMuc3RhdHVzUmVhc29uID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5zdGF0dXNSZWFzb24pOyB9XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jb2RlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGVzY3JpcHRpb24nXSkgeyB0aGlzLmRlc2NyaXB0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5kZXNjcmlwdGlvbn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfZGVzY3JpcHRpb24nXSkge1xyXG4gICAgICBpZiAodGhpcy5kZXNjcmlwdGlvbikgeyB0aGlzLmRlc2NyaXB0aW9uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2Rlc2NyaXB0aW9uISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZGVzY3JpcHRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fZGVzY3JpcHRpb24gYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3N1YmplY3QnXSkgeyB0aGlzLnN1YmplY3QgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnN1YmplY3QpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdWJqZWN0ID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZW5jb3VudGVyJ10pIHsgdGhpcy5lbmNvdW50ZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmVuY291bnRlcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ2VmZmVjdGl2ZSddKSB7IHRoaXMuZWZmZWN0aXZlID0gc291cmNlLmVmZmVjdGl2ZTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydlZmZlY3RpdmVEYXRlVGltZSddKSB7IHRoaXMuZWZmZWN0aXZlID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLmVmZmVjdGl2ZURhdGVUaW1lfSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnZWZmZWN0aXZlUGVyaW9kJ10pIHsgdGhpcy5lZmZlY3RpdmUgPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLmVmZmVjdGl2ZVBlcmlvZCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2RhdGUnXSkgeyB0aGlzLmRhdGUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2UuZGF0ZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfZGF0ZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLmRhdGUpIHsgdGhpcy5kYXRlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2RhdGUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5kYXRlID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHNvdXJjZS5fZGF0ZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckRhdGVUaW1lQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydhc3Nlc3NvciddKSB7IHRoaXMuYXNzZXNzb3IgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmFzc2Vzc29yKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJldmlvdXMnXSkgeyB0aGlzLnByZXZpb3VzID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5wcmV2aW91cyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3Byb2JsZW0nXSkgeyB0aGlzLnByb2JsZW0gPSBzb3VyY2UucHJvYmxlbS5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnByb2JsZW0gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaW52ZXN0aWdhdGlvbiddKSB7IHRoaXMuaW52ZXN0aWdhdGlvbiA9IHNvdXJjZS5pbnZlc3RpZ2F0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ2xpbmljYWxJbXByZXNzaW9uSW52ZXN0aWdhdGlvbih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmludmVzdGlnYXRpb24gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJvdG9jb2wnXSkgeyB0aGlzLnByb3RvY29sID0gc291cmNlLnByb3RvY29sLm1hcCgoeCkgPT4gbmV3IGZoaXIuRmhpclVyaSh7dmFsdWU6IHh9KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnByb3RvY29sID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ19wcm90b2NvbCddKSB7XHJcbiAgICAgIHNvdXJjZS5fcHJvdG9jb2wuZm9yRWFjaCgoeCxpKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvdG9jb2wubGVuZ3RoID49IGkpIHsgaWYgKHgpIHsgdGhpcy5wcm90b2NvbFtpXS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoeCk7IH0gfVxyXG4gICAgICAgIGVsc2UgeyBpZiAoeCkgeyB0aGlzLnByb3RvY29sLnB1c2gobmV3IGZoaXIuRmhpclVyaSh4IGFzIFBhcnRpYWw8Zmhpci5GaGlyVXJpQXJncz4pKTsgfSB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3VtbWFyeSddKSB7IHRoaXMuc3VtbWFyeSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2Uuc3VtbWFyeX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfc3VtbWFyeSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnN1bW1hcnkpIHsgdGhpcy5zdW1tYXJ5LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3N1bW1hcnkhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zdW1tYXJ5ID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3N1bW1hcnkgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2ZpbmRpbmcnXSkgeyB0aGlzLmZpbmRpbmcgPSBzb3VyY2UuZmluZGluZy5tYXAoKHgpID0+IG5ldyBmaGlyLkNsaW5pY2FsSW1wcmVzc2lvbkZpbmRpbmcoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5maW5kaW5nID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3Byb2dub3Npc0NvZGVhYmxlQ29uY2VwdCddKSB7IHRoaXMucHJvZ25vc2lzQ29kZWFibGVDb25jZXB0ID0gc291cmNlLnByb2dub3Npc0NvZGVhYmxlQ29uY2VwdC5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnByb2dub3Npc0NvZGVhYmxlQ29uY2VwdCA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwcm9nbm9zaXNSZWZlcmVuY2UnXSkgeyB0aGlzLnByb2dub3Npc1JlZmVyZW5jZSA9IHNvdXJjZS5wcm9nbm9zaXNSZWZlcmVuY2UubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wcm9nbm9zaXNSZWZlcmVuY2UgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3VwcG9ydGluZ0luZm8nXSkgeyB0aGlzLnN1cHBvcnRpbmdJbmZvID0gc291cmNlLnN1cHBvcnRpbmdJbmZvLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3VwcG9ydGluZ0luZm8gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbm90ZSddKSB7IHRoaXMubm90ZSA9IHNvdXJjZS5ub3RlLm1hcCgoeCkgPT4gbmV3IGZoaXIuQW5ub3RhdGlvbih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm5vdGUgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0NsaW5pY2FsSW1wcmVzc2lvbicgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlBTKCdyZXNvdXJjZVR5cGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2lkZW50aWZpZXInLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlNWKCdzdGF0dXMnLGV4cCwnQ2xpbmljYWxpbXByZXNzaW9uU3RhdHVzJyxDbGluaWNhbGltcHJlc3Npb25TdGF0dXNWc1ZhbGlkYXRpb24sJ3InKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnc3RhdHVzUmVhc29uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdjb2RlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdkZXNjcmlwdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygnc3ViamVjdCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnZW5jb3VudGVyJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdlZmZlY3RpdmUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2RhdGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2Fzc2Vzc29yJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdwcmV2aW91cycsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgncHJvYmxlbScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnaW52ZXN0aWdhdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgncHJvdG9jb2wnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3N1bW1hcnknLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2ZpbmRpbmcnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3Byb2dub3Npc0NvZGVhYmxlQ29uY2VwdCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgncHJvZ25vc2lzUmVmZXJlbmNlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdzdXBwb3J0aW5nSW5mbycsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnbm90ZScsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4iXX0=