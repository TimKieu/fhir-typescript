// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: ClinicalImpression
import * as fhir from '../fhir.js';
// @ts-ignore
import { ClinicalimpressionStatusVsValidation } from '../fhirValueSets/ClinicalimpressionStatusVsValidation.js';
/**
 * One or more sets of investigations (signs, symptoms, etc.). The actual grouping of investigations varies greatly depending on the type and context of the assessment. These investigations may include data generated during the assessment process, or data previously generated and recorded that is pertinent to the outcomes.
 */
export class ClinicalImpressionInvestigation extends fhir.BackboneElement {
    /**
     * Default constructor for ClinicalImpressionInvestigation - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        else {
            this.code = null;
        }
        if (source['item']) {
            this.item = source.item.map((x) => new fhir.Reference(x));
        }
        else {
            this.item = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'ClinicalImpression.investigation';
        }
        this.vReqS('code', expression);
        this.vOptA('item', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ClinicalImpressionInvestigation._fts_dataType = 'ClinicalImpressionInvestigation';
/**
 * Specific findings or diagnoses that were considered likely or relevant to ongoing treatment.
 */
export class ClinicalImpressionFinding extends fhir.BackboneElement {
    /**
     * Default constructor for ClinicalImpressionFinding - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['itemCodeableConcept']) {
            this.itemCodeableConcept = new fhir.CodeableConcept(source.itemCodeableConcept);
        }
        if (source['itemReference']) {
            this.itemReference = new fhir.Reference(source.itemReference);
        }
        if (source['basis']) {
            this.basis = new fhir.FhirString({ value: source.basis });
        }
        if (source['_basis']) {
            if (this.basis) {
                this.basis.addExtendedProperties(source._basis);
            }
            else {
                this.basis = new fhir.FhirString(source._basis);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'ClinicalImpression.finding';
        }
        this.vOptS('itemCodeableConcept', expression);
        this.vOptS('itemReference', expression);
        this.vOptS('basis', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ClinicalImpressionFinding._fts_dataType = 'ClinicalImpressionFinding';
/**
 * A record of a clinical assessment performed to determine what problem(s) may affect the patient and before planning the treatments or management strategies that are best to manage a patient's condition. Assessments are often 1:1 with a clinical consultation / encounter,  but this varies greatly depending on the clinical workflow. This resource is called "ClinicalImpression" rather than "ClinicalAssessment" to avoid confusion with the recording of assessment tools such as Apgar score.
 */
export class ClinicalImpression extends fhir.DomainResource {
    /**
     * Default constructor for ClinicalImpression - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'ClinicalImpression';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['statusReason']) {
            this.statusReason = new fhir.CodeableConcept(source.statusReason);
        }
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        if (source['description']) {
            this.description = new fhir.FhirString({ value: source.description });
        }
        if (source['_description']) {
            if (this.description) {
                this.description.addExtendedProperties(source._description);
            }
            else {
                this.description = new fhir.FhirString(source._description);
            }
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject);
        }
        else {
            this.subject = null;
        }
        if (source['encounter']) {
            this.encounter = new fhir.Reference(source.encounter);
        }
        if (source['effective']) {
            this.effective = source.effective;
        }
        else if (source['effectiveDateTime']) {
            this.effective = new fhir.FhirDateTime({ value: source.effectiveDateTime });
        }
        else if (source['effectivePeriod']) {
            this.effective = new fhir.Period(source.effectivePeriod);
        }
        if (source['date']) {
            this.date = new fhir.FhirDateTime({ value: source.date });
        }
        if (source['_date']) {
            if (this.date) {
                this.date.addExtendedProperties(source._date);
            }
            else {
                this.date = new fhir.FhirDateTime(source._date);
            }
        }
        if (source['assessor']) {
            this.assessor = new fhir.Reference(source.assessor);
        }
        if (source['previous']) {
            this.previous = new fhir.Reference(source.previous);
        }
        if (source['problem']) {
            this.problem = source.problem.map((x) => new fhir.Reference(x));
        }
        else {
            this.problem = [];
        }
        if (source['investigation']) {
            this.investigation = source.investigation.map((x) => new fhir.ClinicalImpressionInvestigation(x));
        }
        else {
            this.investigation = [];
        }
        if (source['protocol']) {
            this.protocol = source.protocol.map((x) => new fhir.FhirUri({ value: x }));
        }
        else {
            this.protocol = [];
        }
        if (source['_protocol']) {
            source._protocol.forEach((x, i) => {
                if (this.protocol.length >= i) {
                    if (x) {
                        this.protocol[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.protocol.push(new fhir.FhirUri(x));
                    }
                }
            });
        }
        if (source['summary']) {
            this.summary = new fhir.FhirString({ value: source.summary });
        }
        if (source['_summary']) {
            if (this.summary) {
                this.summary.addExtendedProperties(source._summary);
            }
            else {
                this.summary = new fhir.FhirString(source._summary);
            }
        }
        if (source['finding']) {
            this.finding = source.finding.map((x) => new fhir.ClinicalImpressionFinding(x));
        }
        else {
            this.finding = [];
        }
        if (source['prognosisCodeableConcept']) {
            this.prognosisCodeableConcept = source.prognosisCodeableConcept.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.prognosisCodeableConcept = [];
        }
        if (source['prognosisReference']) {
            this.prognosisReference = source.prognosisReference.map((x) => new fhir.Reference(x));
        }
        else {
            this.prognosisReference = [];
        }
        if (source['supportingInfo']) {
            this.supportingInfo = source.supportingInfo.map((x) => new fhir.Reference(x));
        }
        else {
            this.supportingInfo = [];
        }
        if (source['note']) {
            this.note = source.note.map((x) => new fhir.Annotation(x));
        }
        else {
            this.note = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'ClinicalImpression';
        }
        this.vReqS('resourceType', expression);
        this.vOptA('identifier', expression);
        this.vReqSV('status', expression, 'ClinicalimpressionStatus', ClinicalimpressionStatusVsValidation, 'r');
        this.vOptS('statusReason', expression);
        this.vOptS('code', expression);
        this.vOptS('description', expression);
        this.vReqS('subject', expression);
        this.vOptS('encounter', expression);
        this.vOptS('effective', expression);
        this.vOptS('date', expression);
        this.vOptS('assessor', expression);
        this.vOptS('previous', expression);
        this.vOptA('problem', expression);
        this.vOptA('investigation', expression);
        this.vOptA('protocol', expression);
        this.vOptS('summary', expression);
        this.vOptA('finding', expression);
        this.vOptA('prognosisCodeableConcept', expression);
        this.vOptA('prognosisReference', expression);
        this.vOptA('supportingInfo', expression);
        this.vOptA('note', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ClinicalImpression._fts_dataType = 'ClinicalImpression';
/**
 * Internal flag to properly serialize choice-type element ClinicalImpression.effective[x]
 */
ClinicalImpression._fts_effectiveIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ2xpbmljYWxJbXByZXNzaW9uLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9DbGluaWNhbEltcHJlc3Npb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsb0NBQW9DO0FBRXBDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBWW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsb0NBQW9DLEVBQUUsTUFBTSwwREFBMEQsQ0FBQztBQW1CaEg7O0dBRUc7QUFDSCxNQUFNLE9BQU8sK0JBQWdDLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFhdkU7O09BRUc7SUFDSCxZQUFZLFNBQXNELEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQzVHLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7U0FBRTthQUNyRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDMUIsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQzdFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUM7U0FBRTtJQUMxQixDQUFDO0lBQ0Q7O09BRUc7SUFDYSxpQkFBaUIsQ0FBQyxhQUFvQixFQUFFO1FBQ3RELElBQUksTUFBTSxHQUFtQixLQUFLLENBQUMsaUJBQWlCLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDakUsSUFBSSxVQUFVLEtBQUssRUFBRSxFQUFFO1lBQUUsVUFBVSxHQUFHLGtDQUFrQyxDQUFBO1NBQUU7UUFDMUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDN0IsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDN0IsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQzs7QUEvQkQ7O0dBRUc7QUFDNkIsNkNBQWEsR0FBVSxpQ0FBaUMsQ0FBQztBQW9EM0Y7O0dBRUc7QUFDSCxNQUFNLE9BQU8seUJBQTBCLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFpQmpFOztPQUVHO0lBQ0gsWUFBWSxTQUFnRCxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUN0RyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLHFCQUFxQixDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsbUJBQW1CLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1NBQUU7UUFDdkgsSUFBSSxNQUFNLENBQUMsZUFBZSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUM7U0FBRTtRQUMvRixJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxLQUFLLEVBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDakYsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDcEIsSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFO2dCQUFFLElBQUksQ0FBQyxLQUFLLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLE1BQU8sQ0FBQyxDQUFDO2FBQUU7aUJBQ2hFO2dCQUFFLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxNQUFzQyxDQUFDLENBQUM7YUFBRTtTQUMxRjtJQUNILENBQUM7SUFDRDs7T0FFRztJQUNhLGlCQUFpQixDQUFDLGFBQW9CLEVBQUU7UUFDdEQsSUFBSSxNQUFNLEdBQW1CLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNqRSxJQUFJLFVBQVUsS0FBSyxFQUFFLEVBQUU7WUFBRSxVQUFVLEdBQUcsNEJBQTRCLENBQUE7U0FBRTtRQUNwRSxJQUFJLENBQUMsS0FBSyxDQUFDLHFCQUFxQixFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQzVDLElBQUksQ0FBQyxLQUFLLENBQUMsZUFBZSxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ3RDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQzlCLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBdkNEOztHQUVHO0FBQzZCLHVDQUFhLEdBQVUsMkJBQTJCLENBQUM7QUE2SnJGOztHQUVHO0FBQ0gsTUFBTSxPQUFPLGtCQUFtQixTQUFRLElBQUksQ0FBQyxjQUFjO0lBOEZ6RDs7T0FFRztJQUNILFlBQVksU0FBeUMsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDL0YsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLENBQUMsWUFBWSxHQUFHLG9CQUFvQixDQUFDO1FBQ3pDLElBQUksTUFBTSxDQUFDLFlBQVksQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUNoRztZQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsRUFBRSxDQUFDO1NBQUU7UUFDOUIsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBbUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLE1BQU0sRUFBQyxDQUFDLENBQUM7U0FBRTthQUMvRztZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDNUIsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFDckIsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO2dCQUFFLElBQUksQ0FBQyxNQUFNLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLE9BQVEsQ0FBQyxDQUFDO2FBQUU7aUJBQ25FO2dCQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFtQyxNQUFNLENBQUMsT0FBaUMsQ0FBQyxDQUFDO2FBQUU7U0FDdEg7UUFDRCxJQUFJLE1BQU0sQ0FBQyxjQUFjLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQztTQUFFO1FBQ2xHLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQUU7UUFDMUUsSUFBSSxNQUFNLENBQUMsYUFBYSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsV0FBVyxFQUFDLENBQUMsQ0FBQztTQUFFO1FBQ25HLElBQUksTUFBTSxDQUFDLGNBQWMsQ0FBQyxFQUFFO1lBQzFCLElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRTtnQkFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxZQUFhLENBQUMsQ0FBQzthQUFFO2lCQUNsRjtnQkFBRSxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsWUFBNEMsQ0FBQyxDQUFDO2FBQUU7U0FDdEc7UUFDRCxJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztTQUFFO2FBQ3hFO1lBQUUsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7U0FBRTtRQUM3QixJQUFJLE1BQU0sQ0FBQyxXQUFXLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQztTQUFFO1FBQ25GLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDO1NBQUU7YUFDMUQsSUFBSSxNQUFNLENBQUMsbUJBQW1CLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxpQkFBaUIsRUFBQyxDQUFDLENBQUM7U0FBRTthQUMvRyxJQUFJLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1NBQUU7UUFDakcsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsSUFBSSxFQUFDLENBQUMsQ0FBQztTQUFFO1FBQ2hGLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQ25CLElBQUksSUFBSSxDQUFDLElBQUksRUFBRTtnQkFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxLQUFNLENBQUMsQ0FBQzthQUFFO2lCQUM3RDtnQkFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsS0FBdUMsQ0FBQyxDQUFDO2FBQUU7U0FDNUY7UUFDRCxJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztTQUFFO1FBQ2hGLElBQUksTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQUU7UUFDaEYsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQ3RGO1lBQUUsSUFBSSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7U0FBRTtRQUMzQixJQUFJLE1BQU0sQ0FBQyxlQUFlLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxhQUFhLEdBQUcsTUFBTSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLCtCQUErQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUM5SDtZQUFFLElBQUksQ0FBQyxhQUFhLEdBQUcsRUFBRSxDQUFDO1NBQUU7UUFDakMsSUFBSSxNQUFNLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBQyxLQUFLLEVBQUUsQ0FBQyxFQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDaEc7WUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztTQUFFO1FBQzVCLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQ3ZCLE1BQU0sQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFO2dCQUMvQixJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBRTtvQkFBRSxJQUFJLENBQUMsRUFBRTt3QkFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxDQUFDO3FCQUFFO2lCQUFFO3FCQUNuRjtvQkFBRSxJQUFJLENBQUMsRUFBRTt3QkFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBOEIsQ0FBQyxDQUFDLENBQUM7cUJBQUU7aUJBQUU7WUFDM0YsQ0FBQyxDQUFDLENBQUM7U0FDSjtRQUNELElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLE9BQU8sRUFBQyxDQUFDLENBQUM7U0FBRTtRQUN2RixJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUN0QixJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUU7Z0JBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsUUFBUyxDQUFDLENBQUM7YUFBRTtpQkFDdEU7Z0JBQUUsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLFFBQXdDLENBQUMsQ0FBQzthQUFFO1NBQzlGO1FBQ0QsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDdEc7WUFBRSxJQUFJLENBQUMsT0FBTyxHQUFHLEVBQUUsQ0FBQztTQUFFO1FBQzNCLElBQUksTUFBTSxDQUFDLDBCQUEwQixDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsd0JBQXdCLEdBQUcsTUFBTSxDQUFDLHdCQUF3QixDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUMvSTtZQUFFLElBQUksQ0FBQyx3QkFBd0IsR0FBRyxFQUFFLENBQUM7U0FBRTtRQUM1QyxJQUFJLE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLGtCQUFrQixHQUFHLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDdkg7WUFBRSxJQUFJLENBQUMsa0JBQWtCLEdBQUcsRUFBRSxDQUFDO1NBQUU7UUFDdEMsSUFBSSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxjQUFjLEdBQUcsTUFBTSxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDM0c7WUFBRSxJQUFJLENBQUMsY0FBYyxHQUFHLEVBQUUsQ0FBQztTQUFFO1FBQ2xDLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUM5RTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDO1NBQUU7SUFDMUIsQ0FBQztJQUNEOztPQUVHO0lBQ2EsaUJBQWlCLENBQUMsYUFBb0IsRUFBRTtRQUN0RCxJQUFJLE1BQU0sR0FBbUIsS0FBSyxDQUFDLGlCQUFpQixDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ2pFLElBQUksVUFBVSxLQUFLLEVBQUUsRUFBRTtZQUFFLFVBQVUsR0FBRyxvQkFBb0IsQ0FBQTtTQUFFO1FBQzVELElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ3JDLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ25DLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFDLFVBQVUsRUFBQywwQkFBMEIsRUFBQyxvQ0FBb0MsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUNwRyxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQWMsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUNyQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUM3QixJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUNwQyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUNoQyxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUNsQyxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUNsQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUM3QixJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUNqQyxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUNqQyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUNoQyxJQUFJLENBQUMsS0FBSyxDQUFDLGVBQWUsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUN0QyxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUNqQyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUNoQyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUNoQyxJQUFJLENBQUMsS0FBSyxDQUFDLDBCQUEwQixFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ2pELElBQUksQ0FBQyxLQUFLLENBQUMsb0JBQW9CLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDM0MsSUFBSSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUN2QyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUM3QixPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQXZMRDs7R0FFRztBQUM2QixnQ0FBYSxHQUFVLG9CQUFvQixDQUFDO0FBc0M1RTs7R0FFRztBQUN1Qix5Q0FBc0IsR0FBUSxJQUFJLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjQuY29yZSB2ZXJzaW9uOiA0LjAuMVxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IENsaW5pY2FsSW1wcmVzc2lvblxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgSW52ZXN0aWdhdGlvblNldHNDb2RlcywgIEludmVzdGlnYXRpb25TZXRzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0ludmVzdGlnYXRpb25TZXRzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEludmVzdGlnYXRpb25TZXRzVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9JbnZlc3RpZ2F0aW9uU2V0c1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29uZGl0aW9uQ29kZXMsICBDb25kaXRpb25Db2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uZGl0aW9uQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbmRpdGlvblZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uZGl0aW9uVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDbGluaWNhbGltcHJlc3Npb25TdGF0dXNDb2RlcywgIENsaW5pY2FsaW1wcmVzc2lvblN0YXR1c0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9DbGluaWNhbGltcHJlc3Npb25TdGF0dXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ2xpbmljYWxpbXByZXNzaW9uU3RhdHVzVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9DbGluaWNhbGltcHJlc3Npb25TdGF0dXNWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENsaW5pY2FsaW1wcmVzc2lvblByb2dub3Npc0NvZGVzLCAgQ2xpbmljYWxpbXByZXNzaW9uUHJvZ25vc2lzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NsaW5pY2FsaW1wcmVzc2lvblByb2dub3Npc0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDbGluaWNhbGltcHJlc3Npb25Qcm9nbm9zaXNWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NsaW5pY2FsaW1wcmVzc2lvblByb2dub3Npc1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBDbGluaWNhbEltcHJlc3Npb25JbnZlc3RpZ2F0aW9uIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENsaW5pY2FsSW1wcmVzc2lvbkludmVzdGlnYXRpb25BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBBIG5hbWUvY29kZSBmb3IgdGhlIGdyb3VwIChcInNldFwiKSBvZiBpbnZlc3RpZ2F0aW9ucy4gVHlwaWNhbGx5LCB0aGlzIHdpbGwgYmUgc29tZXRoaW5nIGxpa2UgXCJzaWduc1wiLCBcInN5bXB0b21zXCIsIFwiY2xpbmljYWxcIiwgXCJkaWFnbm9zdGljXCIsIGJ1dCB0aGUgbGlzdCBpcyBub3QgY29uc3RyYWluZWQsIGFuZCBvdGhlcnMgc3VjaCBncm91cHMgc3VjaCBhcyAoZXhwb3N1cmV8ZmFtaWx5fHRyYXZlbHxudXRyaXRpb25hbCkgaGlzdG9yeSBtYXkgYmUgdXNlZC5cclxuICAgKi9cclxuICBjb2RlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBNb3N0IGludmVzdGlnYXRpb25zIGFyZSBvYnNlcnZhdGlvbnMgb2Ygb25lIGtpbmQgb3IgYW5vdGhlciBidXQgc29tZSBvdGhlciBzcGVjaWZpYyB0eXBlcyBvZiBkYXRhIGNvbGxlY3Rpb24gcmVzb3VyY2VzIGNhbiBhbHNvIGJlIHVzZWQuXHJcbiAgICovXHJcbiAgaXRlbT86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIE9uZSBvciBtb3JlIHNldHMgb2YgaW52ZXN0aWdhdGlvbnMgKHNpZ25zLCBzeW1wdG9tcywgZXRjLikuIFRoZSBhY3R1YWwgZ3JvdXBpbmcgb2YgaW52ZXN0aWdhdGlvbnMgdmFyaWVzIGdyZWF0bHkgZGVwZW5kaW5nIG9uIHRoZSB0eXBlIGFuZCBjb250ZXh0IG9mIHRoZSBhc3Nlc3NtZW50LiBUaGVzZSBpbnZlc3RpZ2F0aW9ucyBtYXkgaW5jbHVkZSBkYXRhIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGFzc2Vzc21lbnQgcHJvY2Vzcywgb3IgZGF0YSBwcmV2aW91c2x5IGdlbmVyYXRlZCBhbmQgcmVjb3JkZWQgdGhhdCBpcyBwZXJ0aW5lbnQgdG8gdGhlIG91dGNvbWVzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENsaW5pY2FsSW1wcmVzc2lvbkludmVzdGlnYXRpb24gZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdDbGluaWNhbEltcHJlc3Npb25JbnZlc3RpZ2F0aW9uJztcclxuICAvKipcclxuICAgKiBBIG5hbWUvY29kZSBmb3IgdGhlIGdyb3VwIChcInNldFwiKSBvZiBpbnZlc3RpZ2F0aW9ucy4gVHlwaWNhbGx5LCB0aGlzIHdpbGwgYmUgc29tZXRoaW5nIGxpa2UgXCJzaWduc1wiLCBcInN5bXB0b21zXCIsIFwiY2xpbmljYWxcIiwgXCJkaWFnbm9zdGljXCIsIGJ1dCB0aGUgbGlzdCBpcyBub3QgY29uc3RyYWluZWQsIGFuZCBvdGhlcnMgc3VjaCBncm91cHMgc3VjaCBhcyAoZXhwb3N1cmV8ZmFtaWx5fHRyYXZlbHxudXRyaXRpb25hbCkgaGlzdG9yeSBtYXkgYmUgdXNlZC5cclxuICAgKi9cclxuICBwdWJsaWMgY29kZTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBNb3N0IGludmVzdGlnYXRpb25zIGFyZSBvYnNlcnZhdGlvbnMgb2Ygb25lIGtpbmQgb3IgYW5vdGhlciBidXQgc29tZSBvdGhlciBzcGVjaWZpYyB0eXBlcyBvZiBkYXRhIGNvbGxlY3Rpb24gcmVzb3VyY2VzIGNhbiBhbHNvIGJlIHVzZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGl0ZW06IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQ2xpbmljYWxJbXByZXNzaW9uSW52ZXN0aWdhdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENsaW5pY2FsSW1wcmVzc2lvbkludmVzdGlnYXRpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY29kZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvZGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydpdGVtJ10pIHsgdGhpcy5pdGVtID0gc291cmNlLml0ZW0ubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pdGVtID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb246c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24pO1xyXG4gICAgaWYgKGV4cHJlc3Npb24gPT09ICcnKSB7IGV4cHJlc3Npb24gPSAnQ2xpbmljYWxJbXByZXNzaW9uLmludmVzdGlnYXRpb24nIH1cclxuICAgIHRoaXMudlJlcVMoJ2NvZGUnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRBKCdpdGVtJyxleHByZXNzaW9uKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIENsaW5pY2FsSW1wcmVzc2lvbkZpbmRpbmcgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2xpbmljYWxJbXByZXNzaW9uRmluZGluZ0FyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFNwZWNpZmljIHRleHQgb3IgY29kZSBmb3IgZmluZGluZyBvciBkaWFnbm9zaXMsIHdoaWNoIG1heSBpbmNsdWRlIHJ1bGVkLW91dCBvciByZXNvbHZlZCBjb25kaXRpb25zLlxyXG4gICAqL1xyXG4gIGl0ZW1Db2RlYWJsZUNvbmNlcHQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFNwZWNpZmljIHJlZmVyZW5jZSBmb3IgZmluZGluZyBvciBkaWFnbm9zaXMsIHdoaWNoIG1heSBpbmNsdWRlIHJ1bGVkLW91dCBvciByZXNvbHZlZCBjb25kaXRpb25zLlxyXG4gICAqL1xyXG4gIGl0ZW1SZWZlcmVuY2U/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFdoaWNoIGludmVzdGlnYXRpb25zIHN1cHBvcnQgZmluZGluZyBvciBkaWFnbm9zaXMuXHJcbiAgICovXHJcbiAgYmFzaXM/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ2xpbmljYWxJbXByZXNzaW9uLmZpbmRpbmcuYmFzaXNcclxuICAgKi9cclxuICBfYmFzaXM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG59XHJcblxyXG4vKipcclxuICogU3BlY2lmaWMgZmluZGluZ3Mgb3IgZGlhZ25vc2VzIHRoYXQgd2VyZSBjb25zaWRlcmVkIGxpa2VseSBvciByZWxldmFudCB0byBvbmdvaW5nIHRyZWF0bWVudC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDbGluaWNhbEltcHJlc3Npb25GaW5kaW5nIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQ2xpbmljYWxJbXByZXNzaW9uRmluZGluZyc7XHJcbiAgLyoqXHJcbiAgICogU3BlY2lmaWMgdGV4dCBvciBjb2RlIGZvciBmaW5kaW5nIG9yIGRpYWdub3Npcywgd2hpY2ggbWF5IGluY2x1ZGUgcnVsZWQtb3V0IG9yIHJlc29sdmVkIGNvbmRpdGlvbnMuXHJcbiAgICovXHJcbiAgcHVibGljIGl0ZW1Db2RlYWJsZUNvbmNlcHQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU3BlY2lmaWMgcmVmZXJlbmNlIGZvciBmaW5kaW5nIG9yIGRpYWdub3Npcywgd2hpY2ggbWF5IGluY2x1ZGUgcnVsZWQtb3V0IG9yIHJlc29sdmVkIGNvbmRpdGlvbnMuXHJcbiAgICovXHJcbiAgcHVibGljIGl0ZW1SZWZlcmVuY2U/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogV2hpY2ggaW52ZXN0aWdhdGlvbnMgc3VwcG9ydCBmaW5kaW5nIG9yIGRpYWdub3Npcy5cclxuICAgKi9cclxuICBwdWJsaWMgYmFzaXM/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIENsaW5pY2FsSW1wcmVzc2lvbkZpbmRpbmcgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxDbGluaWNhbEltcHJlc3Npb25GaW5kaW5nQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2l0ZW1Db2RlYWJsZUNvbmNlcHQnXSkgeyB0aGlzLml0ZW1Db2RlYWJsZUNvbmNlcHQgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLml0ZW1Db2RlYWJsZUNvbmNlcHQpOyB9XHJcbiAgICBpZiAoc291cmNlWydpdGVtUmVmZXJlbmNlJ10pIHsgdGhpcy5pdGVtUmVmZXJlbmNlID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5pdGVtUmVmZXJlbmNlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYmFzaXMnXSkgeyB0aGlzLmJhc2lzID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5iYXNpc30pOyB9XHJcbiAgICBpZiAoc291cmNlWydfYmFzaXMnXSkge1xyXG4gICAgICBpZiAodGhpcy5iYXNpcykgeyB0aGlzLmJhc2lzLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2Jhc2lzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuYmFzaXMgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fYmFzaXMgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb246c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24pO1xyXG4gICAgaWYgKGV4cHJlc3Npb24gPT09ICcnKSB7IGV4cHJlc3Npb24gPSAnQ2xpbmljYWxJbXByZXNzaW9uLmZpbmRpbmcnIH1cclxuICAgIHRoaXMudk9wdFMoJ2l0ZW1Db2RlYWJsZUNvbmNlcHQnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdpdGVtUmVmZXJlbmNlJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnYmFzaXMnLGV4cHJlc3Npb24pXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQ2xpbmljYWxJbXByZXNzaW9uIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENsaW5pY2FsSW1wcmVzc2lvbkFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIkNsaW5pY2FsSW1wcmVzc2lvblwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGlzIGEgYnVzaW5lc3MgaWRlbnRpZmllciwgbm90IGEgcmVzb3VyY2UgaWRlbnRpZmllciAoc2VlIFtkaXNjdXNzaW9uXShyZXNvdXJjZS5odG1sI2lkZW50aWZpZXJzKSkuICBJdCBpcyBiZXN0IHByYWN0aWNlIGZvciB0aGUgaWRlbnRpZmllciB0byBvbmx5IGFwcGVhciBvbiBhIHNpbmdsZSByZXNvdXJjZSBpbnN0YW5jZSwgaG93ZXZlciBidXNpbmVzcyBwcmFjdGljZXMgbWF5IG9jY2FzaW9uYWxseSBkaWN0YXRlIHRoYXQgbXVsdGlwbGUgcmVzb3VyY2UgaW5zdGFuY2VzIHdpdGggdGhlIHNhbWUgaWRlbnRpZmllciBjYW4gZXhpc3QgLSBwb3NzaWJseSBldmVuIHdpdGggZGlmZmVyZW50IHJlc291cmNlIHR5cGVzLiAgRm9yIGV4YW1wbGUsIG11bHRpcGxlIFBhdGllbnQgYW5kIGEgUGVyc29uIHJlc291cmNlIGluc3RhbmNlIG1pZ2h0IHNoYXJlIHRoZSBzYW1lIHNvY2lhbCBpbnN1cmFuY2UgbnVtYmVyLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgYmVjYXVzZSB0aGUgc3RhdHVzIGNvbnRhaW5zIHRoZSBjb2RlIGVudGVyZWQtaW4tZXJyb3IgdGhhdCBtYXJrcyB0aGUgY2xpbmljYWwgaW1wcmVzc2lvbiBhcyBub3QgY3VycmVudGx5IHZhbGlkLlxyXG4gICAqL1xyXG4gIHN0YXR1czogZmhpci5GaGlyQ29kZTxDbGluaWNhbGltcHJlc3Npb25TdGF0dXNDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ2xpbmljYWxJbXByZXNzaW9uLnN0YXR1c1xyXG4gICAqL1xyXG4gIF9zdGF0dXM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaXMgZ2VuZXJhbGx5IG9ubHkgdXNlZCBmb3IgXCJleGNlcHRpb25cIiBzdGF0dXNlcyBzdWNoIGFzIFwibm90LWRvbmVcIiwgXCJzdXNwZW5kZWRcIiBvciBcImNhbmNlbGxlZFwiLlxyXG4gICAqIFtkaXN0aW5jdCByZWFzb24gY29kZXMgZm9yIGRpZmZlcmVudCBzdGF0dXNlcyBjYW4gYmUgZW5mb3JjZWQgdXNpbmcgaW52YXJpYW50cyBpZiB0aGV5IGFyZSB1bml2ZXJzYWwgYmluZGluZ3NdLlxyXG4gICAqL1xyXG4gIHN0YXR1c1JlYXNvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBwcmVzZW50IGFzIGEgcGxhY2UtaG9sZGVyIG9ubHkgYW5kIG1heSBiZSByZW1vdmVkIGJhc2VkIG9uIGZlZWRiYWNrL3dvcmsgZ3JvdXAgb3Bpbmlvbi5cclxuICAgKi9cclxuICBjb2RlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHN1bW1hcnkgb2YgdGhlIGNvbnRleHQgYW5kL29yIGNhdXNlIG9mIHRoZSBhc3Nlc3NtZW50IC0gd2h5IC8gd2hlcmUgaXQgd2FzIHBlcmZvcm1lZCwgYW5kIHdoYXQgcGF0aWVudCBldmVudHMvc3RhdHVzIHByb21wdGVkIGl0LlxyXG4gICAqL1xyXG4gIGRlc2NyaXB0aW9uPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENsaW5pY2FsSW1wcmVzc2lvbi5kZXNjcmlwdGlvblxyXG4gICAqL1xyXG4gIF9kZXNjcmlwdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBhdGllbnQgb3IgZ3JvdXAgb2YgaW5kaXZpZHVhbHMgYXNzZXNzZWQgYXMgcGFydCBvZiB0aGlzIHJlY29yZC5cclxuICAgKi9cclxuICBzdWJqZWN0OiBmaGlyLlJlZmVyZW5jZUFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGlzIHdpbGwgdHlwaWNhbGx5IGJlIHRoZSBlbmNvdW50ZXIgdGhlIGV2ZW50IG9jY3VycmVkIHdpdGhpbiwgYnV0IHNvbWUgYWN0aXZpdGllcyBtYXkgYmUgaW5pdGlhdGVkIHByaW9yIHRvIG9yIGFmdGVyIHRoZSBvZmZpY2lhbCBjb21wbGV0aW9uIG9mIGFuIGVuY291bnRlciBidXQgc3RpbGwgYmUgdGllZCB0byB0aGUgY29udGV4dCBvZiB0aGUgZW5jb3VudGVyLlxyXG4gICAqL1xyXG4gIGVuY291bnRlcj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBTSE9VTEQgYmUgYWNjdXJhdGUgdG8gYXQgbGVhc3QgdGhlIG1pbnV0ZSwgdGhvdWdoIHNvbWUgYXNzZXNzbWVudHMgb25seSBoYXZlIGEga25vd24gZGF0ZS5cclxuICAgKi9cclxuICBlZmZlY3RpdmU/OiBmaGlyLkZoaXJEYXRlVGltZXxmaGlyLlBlcmlvZHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBTSE9VTEQgYmUgYWNjdXJhdGUgdG8gYXQgbGVhc3QgdGhlIG1pbnV0ZSwgdGhvdWdoIHNvbWUgYXNzZXNzbWVudHMgb25seSBoYXZlIGEga25vd24gZGF0ZS5cclxuICAgKi9cclxuICBlZmZlY3RpdmVEYXRlVGltZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBTSE9VTEQgYmUgYWNjdXJhdGUgdG8gYXQgbGVhc3QgdGhlIG1pbnV0ZSwgdGhvdWdoIHNvbWUgYXNzZXNzbWVudHMgb25seSBoYXZlIGEga25vd24gZGF0ZS5cclxuICAgKi9cclxuICBlZmZlY3RpdmVQZXJpb2Q/OiBmaGlyLlBlcmlvZEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB3aGVuIHRoZSBkb2N1bWVudGF0aW9uIG9mIHRoZSBhc3Nlc3NtZW50IHdhcyBjb21wbGV0ZS5cclxuICAgKi9cclxuICBkYXRlPzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ2xpbmljYWxJbXByZXNzaW9uLmRhdGVcclxuICAgKi9cclxuICBfZGF0ZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNsaW5pY2lhbiBwZXJmb3JtaW5nIHRoZSBhc3Nlc3NtZW50LlxyXG4gICAqL1xyXG4gIGFzc2Vzc29yPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJdCBpcyBhbHdheXMgbGlrZWx5IHRoYXQgbXVsdGlwbGUgcHJldmlvdXMgYXNzZXNzbWVudHMgZXhpc3QgZm9yIGEgcGF0aWVudC4gVGhlIHBvaW50IG9mIHF1b3RpbmcgYSBwcmV2aW91cyBhc3Nlc3NtZW50IGlzIHRoYXQgdGhpcyBhc3Nlc3NtZW50IGlzIHJlbGF0aXZlIHRvIGl0IChzZWUgcmVzb2x2ZWQpLlxyXG4gICAqL1xyXG4gIHByZXZpb3VzPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBlLmcuIFRoZSBwYXRpZW50IGlzIGEgcHJlZ25hbnQsIGhhcyBjb25nZXN0aXZlIGhlYXJ0IGZhaWx1cmUsIGhhcyBhbiDigI5BZGVub2NhcmNpbm9tYSwgYW5kIGlzIGFsbGVyZ2ljIHRvIHBlbmljaWxsaW4uXHJcbiAgICovXHJcbiAgcHJvYmxlbT86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBPbmUgb3IgbW9yZSBzZXRzIG9mIGludmVzdGlnYXRpb25zIChzaWducywgc3ltcHRvbXMsIGV0Yy4pLiBUaGUgYWN0dWFsIGdyb3VwaW5nIG9mIGludmVzdGlnYXRpb25zIHZhcmllcyBncmVhdGx5IGRlcGVuZGluZyBvbiB0aGUgdHlwZSBhbmQgY29udGV4dCBvZiB0aGUgYXNzZXNzbWVudC4gVGhlc2UgaW52ZXN0aWdhdGlvbnMgbWF5IGluY2x1ZGUgZGF0YSBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBhc3Nlc3NtZW50IHByb2Nlc3MsIG9yIGRhdGEgcHJldmlvdXNseSBnZW5lcmF0ZWQgYW5kIHJlY29yZGVkIHRoYXQgaXMgcGVydGluZW50IHRvIHRoZSBvdXRjb21lcy5cclxuICAgKi9cclxuICBpbnZlc3RpZ2F0aW9uPzogZmhpci5DbGluaWNhbEltcHJlc3Npb25JbnZlc3RpZ2F0aW9uQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBSZWZlcmVuY2UgdG8gYSBzcGVjaWZpYyBwdWJsaXNoZWQgY2xpbmljYWwgcHJvdG9jb2wgdGhhdCB3YXMgZm9sbG93ZWQgZHVyaW5nIHRoaXMgYXNzZXNzbWVudCwgYW5kL29yIHRoYXQgcHJvdmlkZXMgZXZpZGVuY2UgaW4gc3VwcG9ydCBvZiB0aGUgZGlhZ25vc2lzLlxyXG4gICAqL1xyXG4gIHByb3RvY29sPzogZmhpci5GaGlyVXJpW118KHN0cmluZ3xudWxsKVtdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ2xpbmljYWxJbXByZXNzaW9uLnByb3RvY29sXHJcbiAgICovXHJcbiAgX3Byb3RvY29sPzooZmhpci5GaGlyRWxlbWVudEFyZ3N8bnVsbClbXTtcclxuICAvKipcclxuICAgKiBBIHRleHQgc3VtbWFyeSBvZiB0aGUgaW52ZXN0aWdhdGlvbnMgYW5kIHRoZSBkaWFnbm9zaXMuXHJcbiAgICovXHJcbiAgc3VtbWFyeT86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDbGluaWNhbEltcHJlc3Npb24uc3VtbWFyeVxyXG4gICAqL1xyXG4gIF9zdW1tYXJ5PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBTcGVjaWZpYyBmaW5kaW5ncyBvciBkaWFnbm9zZXMgdGhhdCB3ZXJlIGNvbnNpZGVyZWQgbGlrZWx5IG9yIHJlbGV2YW50IHRvIG9uZ29pbmcgdHJlYXRtZW50LlxyXG4gICAqL1xyXG4gIGZpbmRpbmc/OiBmaGlyLkNsaW5pY2FsSW1wcmVzc2lvbkZpbmRpbmdBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEVzdGltYXRlIG9mIGxpa2VseSBvdXRjb21lLlxyXG4gICAqL1xyXG4gIHByb2dub3Npc0NvZGVhYmxlQ29uY2VwdD86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBSaXNrQXNzZXNzbWVudCBleHByZXNzaW5nIGxpa2VseSBvdXRjb21lLlxyXG4gICAqL1xyXG4gIHByb2dub3Npc1JlZmVyZW5jZT86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmZvcm1hdGlvbiBzdXBwb3J0aW5nIHRoZSBjbGluaWNhbCBpbXByZXNzaW9uLlxyXG4gICAqL1xyXG4gIHN1cHBvcnRpbmdJbmZvPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERvbid0IHVzZSB0aGlzIGVsZW1lbnQgZm9yIGNvbnRlbnQgdGhhdCBzaG91bGQgbW9yZSBwcm9wZXJseSBhcHBlYXIgYXMgb25lIG9mIHRoZSBzcGVjaWZpYyBlbGVtZW50cyBvZiB0aGUgaW1wcmVzc2lvbi5cclxuICAgKi9cclxuICBub3RlPzogZmhpci5Bbm5vdGF0aW9uQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgcmVjb3JkIG9mIGEgY2xpbmljYWwgYXNzZXNzbWVudCBwZXJmb3JtZWQgdG8gZGV0ZXJtaW5lIHdoYXQgcHJvYmxlbShzKSBtYXkgYWZmZWN0IHRoZSBwYXRpZW50IGFuZCBiZWZvcmUgcGxhbm5pbmcgdGhlIHRyZWF0bWVudHMgb3IgbWFuYWdlbWVudCBzdHJhdGVnaWVzIHRoYXQgYXJlIGJlc3QgdG8gbWFuYWdlIGEgcGF0aWVudCdzIGNvbmRpdGlvbi4gQXNzZXNzbWVudHMgYXJlIG9mdGVuIDE6MSB3aXRoIGEgY2xpbmljYWwgY29uc3VsdGF0aW9uIC8gZW5jb3VudGVyLCAgYnV0IHRoaXMgdmFyaWVzIGdyZWF0bHkgZGVwZW5kaW5nIG9uIHRoZSBjbGluaWNhbCB3b3JrZmxvdy4gVGhpcyByZXNvdXJjZSBpcyBjYWxsZWQgXCJDbGluaWNhbEltcHJlc3Npb25cIiByYXRoZXIgdGhhbiBcIkNsaW5pY2FsQXNzZXNzbWVudFwiIHRvIGF2b2lkIGNvbmZ1c2lvbiB3aXRoIHRoZSByZWNvcmRpbmcgb2YgYXNzZXNzbWVudCB0b29scyBzdWNoIGFzIEFwZ2FyIHNjb3JlLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENsaW5pY2FsSW1wcmVzc2lvbiBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQ2xpbmljYWxJbXByZXNzaW9uJztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIkNsaW5pY2FsSW1wcmVzc2lvblwiO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaXMgYSBidXNpbmVzcyBpZGVudGlmaWVyLCBub3QgYSByZXNvdXJjZSBpZGVudGlmaWVyIChzZWUgW2Rpc2N1c3Npb25dKHJlc291cmNlLmh0bWwjaWRlbnRpZmllcnMpKS4gIEl0IGlzIGJlc3QgcHJhY3RpY2UgZm9yIHRoZSBpZGVudGlmaWVyIHRvIG9ubHkgYXBwZWFyIG9uIGEgc2luZ2xlIHJlc291cmNlIGluc3RhbmNlLCBob3dldmVyIGJ1c2luZXNzIHByYWN0aWNlcyBtYXkgb2NjYXNpb25hbGx5IGRpY3RhdGUgdGhhdCBtdWx0aXBsZSByZXNvdXJjZSBpbnN0YW5jZXMgd2l0aCB0aGUgc2FtZSBpZGVudGlmaWVyIGNhbiBleGlzdCAtIHBvc3NpYmx5IGV2ZW4gd2l0aCBkaWZmZXJlbnQgcmVzb3VyY2UgdHlwZXMuICBGb3IgZXhhbXBsZSwgbXVsdGlwbGUgUGF0aWVudCBhbmQgYSBQZXJzb24gcmVzb3VyY2UgaW5zdGFuY2UgbWlnaHQgc2hhcmUgdGhlIHNhbWUgc29jaWFsIGluc3VyYW5jZSBudW1iZXIuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI6IGZoaXIuSWRlbnRpZmllcltdO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgYmVjYXVzZSB0aGUgc3RhdHVzIGNvbnRhaW5zIHRoZSBjb2RlIGVudGVyZWQtaW4tZXJyb3IgdGhhdCBtYXJrcyB0aGUgY2xpbmljYWwgaW1wcmVzc2lvbiBhcyBub3QgY3VycmVudGx5IHZhbGlkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0dXM6IGZoaXIuRmhpckNvZGU8Q2xpbmljYWxpbXByZXNzaW9uU3RhdHVzQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBnZW5lcmFsbHkgb25seSB1c2VkIGZvciBcImV4Y2VwdGlvblwiIHN0YXR1c2VzIHN1Y2ggYXMgXCJub3QtZG9uZVwiLCBcInN1c3BlbmRlZFwiIG9yIFwiY2FuY2VsbGVkXCIuXHJcbiAgICogW2Rpc3RpbmN0IHJlYXNvbiBjb2RlcyBmb3IgZGlmZmVyZW50IHN0YXR1c2VzIGNhbiBiZSBlbmZvcmNlZCB1c2luZyBpbnZhcmlhbnRzIGlmIHRoZXkgYXJlIHVuaXZlcnNhbCBiaW5kaW5nc10uXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1c1JlYXNvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGlzIHByZXNlbnQgYXMgYSBwbGFjZS1ob2xkZXIgb25seSBhbmQgbWF5IGJlIHJlbW92ZWQgYmFzZWQgb24gZmVlZGJhY2svd29yayBncm91cCBvcGluaW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb2RlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgc3VtbWFyeSBvZiB0aGUgY29udGV4dCBhbmQvb3IgY2F1c2Ugb2YgdGhlIGFzc2Vzc21lbnQgLSB3aHkgLyB3aGVyZSBpdCB3YXMgcGVyZm9ybWVkLCBhbmQgd2hhdCBwYXRpZW50IGV2ZW50cy9zdGF0dXMgcHJvbXB0ZWQgaXQuXHJcbiAgICovXHJcbiAgcHVibGljIGRlc2NyaXB0aW9uPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcGF0aWVudCBvciBncm91cCBvZiBpbmRpdmlkdWFscyBhc3Nlc3NlZCBhcyBwYXJ0IG9mIHRoaXMgcmVjb3JkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdWJqZWN0OiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgd2lsbCB0eXBpY2FsbHkgYmUgdGhlIGVuY291bnRlciB0aGUgZXZlbnQgb2NjdXJyZWQgd2l0aGluLCBidXQgc29tZSBhY3Rpdml0aWVzIG1heSBiZSBpbml0aWF0ZWQgcHJpb3IgdG8gb3IgYWZ0ZXIgdGhlIG9mZmljaWFsIGNvbXBsZXRpb24gb2YgYW4gZW5jb3VudGVyIGJ1dCBzdGlsbCBiZSB0aWVkIHRvIHRoZSBjb250ZXh0IG9mIHRoZSBlbmNvdW50ZXIuXHJcbiAgICovXHJcbiAgcHVibGljIGVuY291bnRlcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIFNIT1VMRCBiZSBhY2N1cmF0ZSB0byBhdCBsZWFzdCB0aGUgbWludXRlLCB0aG91Z2ggc29tZSBhc3Nlc3NtZW50cyBvbmx5IGhhdmUgYSBrbm93biBkYXRlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBlZmZlY3RpdmU/OiAoZmhpci5GaGlyRGF0ZVRpbWV8Zmhpci5QZXJpb2QpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IENsaW5pY2FsSW1wcmVzc2lvbi5lZmZlY3RpdmVbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfZWZmZWN0aXZlSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHdoZW4gdGhlIGRvY3VtZW50YXRpb24gb2YgdGhlIGFzc2Vzc21lbnQgd2FzIGNvbXBsZXRlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkYXRlPzogZmhpci5GaGlyRGF0ZVRpbWV8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjbGluaWNpYW4gcGVyZm9ybWluZyB0aGUgYXNzZXNzbWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgYXNzZXNzb3I/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSXQgaXMgYWx3YXlzIGxpa2VseSB0aGF0IG11bHRpcGxlIHByZXZpb3VzIGFzc2Vzc21lbnRzIGV4aXN0IGZvciBhIHBhdGllbnQuIFRoZSBwb2ludCBvZiBxdW90aW5nIGEgcHJldmlvdXMgYXNzZXNzbWVudCBpcyB0aGF0IHRoaXMgYXNzZXNzbWVudCBpcyByZWxhdGl2ZSB0byBpdCAoc2VlIHJlc29sdmVkKS5cclxuICAgKi9cclxuICBwdWJsaWMgcHJldmlvdXM/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogZS5nLiBUaGUgcGF0aWVudCBpcyBhIHByZWduYW50LCBoYXMgY29uZ2VzdGl2ZSBoZWFydCBmYWlsdXJlLCBoYXMgYW4g4oCOQWRlbm9jYXJjaW5vbWEsIGFuZCBpcyBhbGxlcmdpYyB0byBwZW5pY2lsbGluLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcm9ibGVtOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIE9uZSBvciBtb3JlIHNldHMgb2YgaW52ZXN0aWdhdGlvbnMgKHNpZ25zLCBzeW1wdG9tcywgZXRjLikuIFRoZSBhY3R1YWwgZ3JvdXBpbmcgb2YgaW52ZXN0aWdhdGlvbnMgdmFyaWVzIGdyZWF0bHkgZGVwZW5kaW5nIG9uIHRoZSB0eXBlIGFuZCBjb250ZXh0IG9mIHRoZSBhc3Nlc3NtZW50LiBUaGVzZSBpbnZlc3RpZ2F0aW9ucyBtYXkgaW5jbHVkZSBkYXRhIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGFzc2Vzc21lbnQgcHJvY2Vzcywgb3IgZGF0YSBwcmV2aW91c2x5IGdlbmVyYXRlZCBhbmQgcmVjb3JkZWQgdGhhdCBpcyBwZXJ0aW5lbnQgdG8gdGhlIG91dGNvbWVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpbnZlc3RpZ2F0aW9uOiBmaGlyLkNsaW5pY2FsSW1wcmVzc2lvbkludmVzdGlnYXRpb25bXTtcclxuICAvKipcclxuICAgKiBSZWZlcmVuY2UgdG8gYSBzcGVjaWZpYyBwdWJsaXNoZWQgY2xpbmljYWwgcHJvdG9jb2wgdGhhdCB3YXMgZm9sbG93ZWQgZHVyaW5nIHRoaXMgYXNzZXNzbWVudCwgYW5kL29yIHRoYXQgcHJvdmlkZXMgZXZpZGVuY2UgaW4gc3VwcG9ydCBvZiB0aGUgZGlhZ25vc2lzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcm90b2NvbDogZmhpci5GaGlyVXJpW107XHJcbiAgLyoqXHJcbiAgICogQSB0ZXh0IHN1bW1hcnkgb2YgdGhlIGludmVzdGlnYXRpb25zIGFuZCB0aGUgZGlhZ25vc2lzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdW1tYXJ5PzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTcGVjaWZpYyBmaW5kaW5ncyBvciBkaWFnbm9zZXMgdGhhdCB3ZXJlIGNvbnNpZGVyZWQgbGlrZWx5IG9yIHJlbGV2YW50IHRvIG9uZ29pbmcgdHJlYXRtZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBmaW5kaW5nOiBmaGlyLkNsaW5pY2FsSW1wcmVzc2lvbkZpbmRpbmdbXTtcclxuICAvKipcclxuICAgKiBFc3RpbWF0ZSBvZiBsaWtlbHkgb3V0Y29tZS5cclxuICAgKi9cclxuICBwdWJsaWMgcHJvZ25vc2lzQ29kZWFibGVDb25jZXB0OiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIFJpc2tBc3Nlc3NtZW50IGV4cHJlc3NpbmcgbGlrZWx5IG91dGNvbWUuXHJcbiAgICovXHJcbiAgcHVibGljIHByb2dub3Npc1JlZmVyZW5jZTogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBJbmZvcm1hdGlvbiBzdXBwb3J0aW5nIHRoZSBjbGluaWNhbCBpbXByZXNzaW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdXBwb3J0aW5nSW5mbzogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBEb24ndCB1c2UgdGhpcyBlbGVtZW50IGZvciBjb250ZW50IHRoYXQgc2hvdWxkIG1vcmUgcHJvcGVybHkgYXBwZWFyIGFzIG9uZSBvZiB0aGUgc3BlY2lmaWMgZWxlbWVudHMgb2YgdGhlIGltcHJlc3Npb24uXHJcbiAgICovXHJcbiAgcHVibGljIG5vdGU6IGZoaXIuQW5ub3RhdGlvbltdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIENsaW5pY2FsSW1wcmVzc2lvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENsaW5pY2FsSW1wcmVzc2lvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdDbGluaWNhbEltcHJlc3Npb24nO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IHNvdXJjZS5pZGVudGlmaWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuSWRlbnRpZmllcih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmlkZW50aWZpZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RhdHVzJ10pIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxDbGluaWNhbGltcHJlc3Npb25TdGF0dXNDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2Uuc3RhdHVzfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zdGF0dXMnXSkge1xyXG4gICAgICBpZiAodGhpcy5zdGF0dXMpIHsgdGhpcy5zdGF0dXMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc3RhdHVzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8Q2xpbmljYWxpbXByZXNzaW9uU3RhdHVzQ29kZVR5cGU+KHNvdXJjZS5fc3RhdHVzIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydzdGF0dXNSZWFzb24nXSkgeyB0aGlzLnN0YXR1c1JlYXNvbiA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2Uuc3RhdHVzUmVhc29uKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY29kZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2Rlc2NyaXB0aW9uJ10pIHsgdGhpcy5kZXNjcmlwdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuZGVzY3JpcHRpb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2Rlc2NyaXB0aW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZGVzY3JpcHRpb24pIHsgdGhpcy5kZXNjcmlwdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9kZXNjcmlwdGlvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRlc2NyaXB0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2Rlc2NyaXB0aW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydzdWJqZWN0J10pIHsgdGhpcy5zdWJqZWN0ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5zdWJqZWN0KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3ViamVjdCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ2VuY291bnRlciddKSB7IHRoaXMuZW5jb3VudGVyID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5lbmNvdW50ZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWydlZmZlY3RpdmUnXSkgeyB0aGlzLmVmZmVjdGl2ZSA9IHNvdXJjZS5lZmZlY3RpdmU7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnZWZmZWN0aXZlRGF0ZVRpbWUnXSkgeyB0aGlzLmVmZmVjdGl2ZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5lZmZlY3RpdmVEYXRlVGltZX0pOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2VmZmVjdGl2ZVBlcmlvZCddKSB7IHRoaXMuZWZmZWN0aXZlID0gbmV3IGZoaXIuUGVyaW9kKHNvdXJjZS5lZmZlY3RpdmVQZXJpb2QpOyB9XHJcbiAgICBpZiAoc291cmNlWydkYXRlJ10pIHsgdGhpcy5kYXRlID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLmRhdGV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2RhdGUnXSkge1xyXG4gICAgICBpZiAodGhpcy5kYXRlKSB7IHRoaXMuZGF0ZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9kYXRlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZGF0ZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZShzb3VyY2UuX2RhdGUgYXMgUGFydGlhbDxmaGlyLkZoaXJEYXRlVGltZUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnYXNzZXNzb3InXSkgeyB0aGlzLmFzc2Vzc29yID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5hc3Nlc3Nvcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ3ByZXZpb3VzJ10pIHsgdGhpcy5wcmV2aW91cyA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UucHJldmlvdXMpOyB9XHJcbiAgICBpZiAoc291cmNlWydwcm9ibGVtJ10pIHsgdGhpcy5wcm9ibGVtID0gc291cmNlLnByb2JsZW0ubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wcm9ibGVtID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2ludmVzdGlnYXRpb24nXSkgeyB0aGlzLmludmVzdGlnYXRpb24gPSBzb3VyY2UuaW52ZXN0aWdhdGlvbi5tYXAoKHgpID0+IG5ldyBmaGlyLkNsaW5pY2FsSW1wcmVzc2lvbkludmVzdGlnYXRpb24oeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pbnZlc3RpZ2F0aW9uID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3Byb3RvY29sJ10pIHsgdGhpcy5wcm90b2NvbCA9IHNvdXJjZS5wcm90b2NvbC5tYXAoKHgpID0+IG5ldyBmaGlyLkZoaXJVcmkoe3ZhbHVlOiB4fSkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wcm90b2NvbCA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydfcHJvdG9jb2wnXSkge1xyXG4gICAgICBzb3VyY2UuX3Byb3RvY29sLmZvckVhY2goKHgsaSkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3RvY29sLmxlbmd0aCA+PSBpKSB7IGlmICh4KSB7IHRoaXMucHJvdG9jb2xbaV0uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHgpOyB9IH1cclxuICAgICAgICBlbHNlIHsgaWYgKHgpIHsgdGhpcy5wcm90b2NvbC5wdXNoKG5ldyBmaGlyLkZoaXJVcmkoeCBhcyBQYXJ0aWFsPGZoaXIuRmhpclVyaUFyZ3M+KSk7IH0gfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3N1bW1hcnknXSkgeyB0aGlzLnN1bW1hcnkgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnN1bW1hcnl9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3N1bW1hcnknXSkge1xyXG4gICAgICBpZiAodGhpcy5zdW1tYXJ5KSB7IHRoaXMuc3VtbWFyeS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zdW1tYXJ5ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3VtbWFyeSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9zdW1tYXJ5IGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydmaW5kaW5nJ10pIHsgdGhpcy5maW5kaW5nID0gc291cmNlLmZpbmRpbmcubWFwKCh4KSA9PiBuZXcgZmhpci5DbGluaWNhbEltcHJlc3Npb25GaW5kaW5nKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZmluZGluZyA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwcm9nbm9zaXNDb2RlYWJsZUNvbmNlcHQnXSkgeyB0aGlzLnByb2dub3Npc0NvZGVhYmxlQ29uY2VwdCA9IHNvdXJjZS5wcm9nbm9zaXNDb2RlYWJsZUNvbmNlcHQubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wcm9nbm9zaXNDb2RlYWJsZUNvbmNlcHQgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJvZ25vc2lzUmVmZXJlbmNlJ10pIHsgdGhpcy5wcm9nbm9zaXNSZWZlcmVuY2UgPSBzb3VyY2UucHJvZ25vc2lzUmVmZXJlbmNlLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucHJvZ25vc2lzUmVmZXJlbmNlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3N1cHBvcnRpbmdJbmZvJ10pIHsgdGhpcy5zdXBwb3J0aW5nSW5mbyA9IHNvdXJjZS5zdXBwb3J0aW5nSW5mby5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN1cHBvcnRpbmdJbmZvID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ25vdGUnXSkgeyB0aGlzLm5vdGUgPSBzb3VyY2Uubm90ZS5tYXAoKHgpID0+IG5ldyBmaGlyLkFubm90YXRpb24oeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5ub3RlID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb246c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24pO1xyXG4gICAgaWYgKGV4cHJlc3Npb24gPT09ICcnKSB7IGV4cHJlc3Npb24gPSAnQ2xpbmljYWxJbXByZXNzaW9uJyB9XHJcbiAgICB0aGlzLnZSZXFTKCdyZXNvdXJjZVR5cGUnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRBKCdpZGVudGlmaWVyJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52UmVxU1YoJ3N0YXR1cycsZXhwcmVzc2lvbiwnQ2xpbmljYWxpbXByZXNzaW9uU3RhdHVzJyxDbGluaWNhbGltcHJlc3Npb25TdGF0dXNWc1ZhbGlkYXRpb24sJ3InKVxyXG4gICAgdGhpcy52T3B0Uygnc3RhdHVzUmVhc29uJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnY29kZScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ2Rlc2NyaXB0aW9uJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52UmVxUygnc3ViamVjdCcsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ2VuY291bnRlcicsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ2VmZmVjdGl2ZScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ2RhdGUnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdhc3Nlc3NvcicsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ3ByZXZpb3VzJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0QSgncHJvYmxlbScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdEEoJ2ludmVzdGlnYXRpb24nLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRBKCdwcm90b2NvbCcsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ3N1bW1hcnknLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRBKCdmaW5kaW5nJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0QSgncHJvZ25vc2lzQ29kZWFibGVDb25jZXB0JyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0QSgncHJvZ25vc2lzUmVmZXJlbmNlJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0QSgnc3VwcG9ydGluZ0luZm8nLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRBKCdub3RlJyxleHByZXNzaW9uKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuIl19