// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: SubstanceNucleicAcid
import * as fhir from '../fhir.js';
/**
 * The linkages between sugar residues will also be captured.
 */
export class SubstanceNucleicAcidSubunitLinkage extends fhir.BackboneElement {
    /**
     * Default constructor for SubstanceNucleicAcidSubunitLinkage - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['connectivity']) {
            this.connectivity = new fhir.FhirString({ value: source.connectivity });
        }
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier);
        }
        if (source['name']) {
            this.name = new fhir.FhirString({ value: source.name });
        }
        if (source['residueSite']) {
            this.residueSite = new fhir.FhirString({ value: source.residueSite });
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["connectivity"]) {
            issues.push(...this.connectivity.doModelValidation());
        }
        if (this["identifier"]) {
            issues.push(...this.identifier.doModelValidation());
        }
        if (this["name"]) {
            issues.push(...this.name.doModelValidation());
        }
        if (this["residueSite"]) {
            issues.push(...this.residueSite.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceNucleicAcidSubunitLinkage._fts_dataType = 'SubstanceNucleicAcidSubunitLinkage';
/**
 * 5.3.6.8.1 Sugar ID (Mandatory).
 */
export class SubstanceNucleicAcidSubunitSugar extends fhir.BackboneElement {
    /**
     * Default constructor for SubstanceNucleicAcidSubunitSugar - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier);
        }
        if (source['name']) {
            this.name = new fhir.FhirString({ value: source.name });
        }
        if (source['residueSite']) {
            this.residueSite = new fhir.FhirString({ value: source.residueSite });
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["identifier"]) {
            issues.push(...this.identifier.doModelValidation());
        }
        if (this["name"]) {
            issues.push(...this.name.doModelValidation());
        }
        if (this["residueSite"]) {
            issues.push(...this.residueSite.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceNucleicAcidSubunitSugar._fts_dataType = 'SubstanceNucleicAcidSubunitSugar';
/**
 * Subunits are listed in order of decreasing length; sequences of the same length will be ordered by molecular weight; subunits that have identical sequences will be repeated multiple times.
 */
export class SubstanceNucleicAcidSubunit extends fhir.BackboneElement {
    /**
     * Default constructor for SubstanceNucleicAcidSubunit - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['subunit']) {
            this.subunit = new fhir.FhirInteger({ value: source.subunit });
        }
        if (source['sequence']) {
            this.sequence = new fhir.FhirString({ value: source.sequence });
        }
        if (source['length']) {
            this.length = new fhir.FhirInteger({ value: source.length });
        }
        if (source['sequenceAttachment']) {
            this.sequenceAttachment = new fhir.Attachment(source.sequenceAttachment);
        }
        if (source['fivePrime']) {
            this.fivePrime = new fhir.CodeableConcept(source.fivePrime);
        }
        if (source['threePrime']) {
            this.threePrime = new fhir.CodeableConcept(source.threePrime);
        }
        if (source['linkage']) {
            this.linkage = source.linkage.map((x) => new fhir.SubstanceNucleicAcidSubunitLinkage(x));
        }
        else {
            this.linkage = [];
        }
        if (source['sugar']) {
            this.sugar = source.sugar.map((x) => new fhir.SubstanceNucleicAcidSubunitSugar(x));
        }
        else {
            this.sugar = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["subunit"]) {
            issues.push(...this.subunit.doModelValidation());
        }
        if (this["sequence"]) {
            issues.push(...this.sequence.doModelValidation());
        }
        if (this["length"]) {
            issues.push(...this.length.doModelValidation());
        }
        if (this["sequenceAttachment"]) {
            issues.push(...this.sequenceAttachment.doModelValidation());
        }
        if (this["fivePrime"]) {
            issues.push(...this.fivePrime.doModelValidation());
        }
        if (this["threePrime"]) {
            issues.push(...this.threePrime.doModelValidation());
        }
        if (this["linkage"]) {
            this.linkage.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["sugar"]) {
            this.sugar.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceNucleicAcidSubunit._fts_dataType = 'SubstanceNucleicAcidSubunit';
/**
 * Nucleic acids are defined by three distinct elements: the base, sugar and linkage. Individual substance/moiety IDs will be created for each of these elements. The nucleotide sequence will be always entered in the 5’-3’ direction.
 */
export class SubstanceNucleicAcid extends fhir.DomainResource {
    /**
     * Default constructor for SubstanceNucleicAcid - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'SubstanceNucleicAcid';
        if (source['sequenceType']) {
            this.sequenceType = new fhir.CodeableConcept(source.sequenceType);
        }
        if (source['numberOfSubunits']) {
            this.numberOfSubunits = new fhir.FhirInteger({ value: source.numberOfSubunits });
        }
        if (source['areaOfHybridisation']) {
            this.areaOfHybridisation = new fhir.FhirString({ value: source.areaOfHybridisation });
        }
        if (source['oligoNucleotideType']) {
            this.oligoNucleotideType = new fhir.CodeableConcept(source.oligoNucleotideType);
        }
        if (source['subunit']) {
            this.subunit = source.subunit.map((x) => new fhir.SubstanceNucleicAcidSubunit(x));
        }
        else {
            this.subunit = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType:"SubstanceNucleicAcid" fhir: SubstanceNucleicAcid.resourceType:"SubstanceNucleicAcid"' });
        }
        if (this["sequenceType"]) {
            issues.push(...this.sequenceType.doModelValidation());
        }
        if (this["numberOfSubunits"]) {
            issues.push(...this.numberOfSubunits.doModelValidation());
        }
        if (this["areaOfHybridisation"]) {
            issues.push(...this.areaOfHybridisation.doModelValidation());
        }
        if (this["oligoNucleotideType"]) {
            issues.push(...this.oligoNucleotideType.doModelValidation());
        }
        if (this["subunit"]) {
            this.subunit.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceNucleicAcid._fts_dataType = 'SubstanceNucleicAcid';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3Vic3RhbmNlTnVjbGVpY0FjaWQuanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL1N1YnN0YW5jZU51Y2xlaWNBY2lkLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQiwrQ0FBK0M7QUFDL0Msa0NBQWtDO0FBQ2xDLHNDQUFzQztBQUV0QyxPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQXdCbkM7O0dBRUc7QUFDSCxNQUFNLE9BQU8sa0NBQW1DLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFxQjFFOztPQUVHO0lBQ0gsWUFBWSxTQUF5RCxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUMvRyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLGNBQWMsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLFlBQVksRUFBQyxDQUFDLENBQUM7U0FBRTtRQUN0RyxJQUFJLE1BQU0sQ0FBQyxZQUFZLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQztTQUFFO1FBQ3ZGLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLElBQUksRUFBQyxDQUFDLENBQUM7U0FBRTtRQUM5RSxJQUFJLE1BQU0sQ0FBQyxhQUFhLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxXQUFXLEVBQUMsQ0FBQyxDQUFDO1NBQUU7SUFDckcsQ0FB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QkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUNwRixJQUFJLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUM1RixJQUFJLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUNsRyxJQUFJLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUNsRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQUU7UUFDaEcsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQzs7QUF2REQ7O0dBRUc7QUFDNkIsa0NBQWEsR0FBVSxzQkFBc0IsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNC5jb3JlIHZlcnNpb246IDQuMC4xXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogU3Vic3RhbmNlTnVjbGVpY0FjaWRcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0TGlua2FnZSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXRMaW5rYWdlQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIGVudGl0eSB0aGF0IGxpbmtzIHRoZSBzdWdhciByZXNpZHVlcyB0b2dldGhlciBzaG91bGQgYWxzbyBiZSBjYXB0dXJlZCBmb3IgbmVhcmx5IGFsbCBuYXR1cmFsbHkgb2NjdXJyaW5nIG51Y2xlaWMgYWNpZCB0aGUgbGlua2FnZSBpcyBhIHBob3NwaGF0ZSBncm91cC4gRm9yIG1hbnkgc3ludGhldGljIG9saWdvbnVjbGVvdGlkZXMgcGhvc3Bob3JvdGhpb2F0ZSBsaW5rYWdlcyBhcmUgb2Z0ZW4gc2Vlbi4gTGlua2FnZSBjb25uZWN0aXZpdHkgaXMgYXNzdW1lZCB0byBiZSAz4oCZLTXigJkuIElmIHRoZSBsaW5rYWdlIGlzIGVpdGhlciAz4oCZLTPigJkgb3IgNeKAmS014oCZIHRoaXMgc2hvdWxkIGJlIHNwZWNpZmllZC5cclxuICAgKi9cclxuICBjb25uZWN0aXZpdHk/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFYWNoIGxpbmthZ2Ugd2lsbCBiZSByZWdpc3RlcmVkIGFzIGEgZnJhZ21lbnQgYW5kIGhhdmUgYW4gSUQuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEVhY2ggbGlua2FnZSB3aWxsIGJlIHJlZ2lzdGVyZWQgYXMgYSBmcmFnbWVudCBhbmQgaGF2ZSBhdCBsZWFzdCBvbmUgbmFtZS4gQSBzaW5nbGUgbmFtZSBzaGFsbCBiZSBhc3NpZ25lZCB0byBlYWNoIGxpbmthZ2UuXHJcbiAgICovXHJcbiAgbmFtZT86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFJlc2lkdWVzIHNoYWxsIGJlIGNhcHR1cmVkIGFzIGRlc2NyaWJlZCBpbiA1LjMuNi44LjMuXHJcbiAgICovXHJcbiAgcmVzaWR1ZVNpdGU/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBsaW5rYWdlcyBiZXR3ZWVuIHN1Z2FyIHJlc2lkdWVzIHdpbGwgYWxzbyBiZSBjYXB0dXJlZC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXRMaW5rYWdlIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0TGlua2FnZSc7XHJcbiAgLyoqXHJcbiAgICogVGhlIGVudGl0eSB0aGF0IGxpbmtzIHRoZSBzdWdhciByZXNpZHVlcyB0b2dldGhlciBzaG91bGQgYWxzbyBiZSBjYXB0dXJlZCBmb3IgbmVhcmx5IGFsbCBuYXR1cmFsbHkgb2NjdXJyaW5nIG51Y2xlaWMgYWNpZCB0aGUgbGlua2FnZSBpcyBhIHBob3NwaGF0ZSBncm91cC4gRm9yIG1hbnkgc3ludGhldGljIG9saWdvbnVjbGVvdGlkZXMgcGhvc3Bob3JvdGhpb2F0ZSBsaW5rYWdlcyBhcmUgb2Z0ZW4gc2Vlbi4gTGlua2FnZSBjb25uZWN0aXZpdHkgaXMgYXNzdW1lZCB0byBiZSAz4oCZLTXigJkuIElmIHRoZSBsaW5rYWdlIGlzIGVpdGhlciAz4oCZLTPigJkgb3IgNeKAmS014oCZIHRoaXMgc2hvdWxkIGJlIHNwZWNpZmllZC5cclxuICAgKi9cclxuICBwdWJsaWMgY29ubmVjdGl2aXR5PzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFYWNoIGxpbmthZ2Ugd2lsbCBiZSByZWdpc3RlcmVkIGFzIGEgZnJhZ21lbnQgYW5kIGhhdmUgYW4gSUQuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEVhY2ggbGlua2FnZSB3aWxsIGJlIHJlZ2lzdGVyZWQgYXMgYSBmcmFnbWVudCBhbmQgaGF2ZSBhdCBsZWFzdCBvbmUgbmFtZS4gQSBzaW5nbGUgbmFtZSBzaGFsbCBiZSBhc3NpZ25lZCB0byBlYWNoIGxpbmthZ2UuXHJcbiAgICovXHJcbiAgcHVibGljIG5hbWU/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFJlc2lkdWVzIHNoYWxsIGJlIGNhcHR1cmVkIGFzIGRlc2NyaWJlZCBpbiA1LjMuNi44LjMuXHJcbiAgICovXHJcbiAgcHVibGljIHJlc2lkdWVTaXRlPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXRMaW5rYWdlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8U3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0TGlua2FnZUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydjb25uZWN0aXZpdHknXSkgeyB0aGlzLmNvbm5lY3Rpdml0eSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuY29ubmVjdGl2aXR5fSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBuZXcgZmhpci5JZGVudGlmaWVyKHNvdXJjZS5pZGVudGlmaWVyKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbmFtZSddKSB7IHRoaXMubmFtZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UubmFtZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydyZXNpZHVlU2l0ZSddKSB7IHRoaXMucmVzaWR1ZVNpdGUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnJlc2lkdWVTaXRlfSk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICh0aGlzW1wiY29ubmVjdGl2aXR5XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY29ubmVjdGl2aXR5LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImlkZW50aWZpZXJcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5pZGVudGlmaWVyLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcIm5hbWVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5uYW1lLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInJlc2lkdWVTaXRlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucmVzaWR1ZVNpdGUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXRTdWdhciB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXRTdWdhckFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBTdWJzdGFuY2UgSUQgb2YgdGhlIHN1Z2FyIG9yIHN1Z2FyLWxpa2UgY29tcG9uZW50IHRoYXQgbWFrZSB1cCB0aGUgbnVjbGVvdGlkZS5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG5hbWUgb2YgdGhlIHN1Z2FyIG9yIHN1Z2FyLWxpa2UgY29tcG9uZW50IHRoYXQgbWFrZSB1cCB0aGUgbnVjbGVvdGlkZS5cclxuICAgKi9cclxuICBuYW1lPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlc2lkdWVzIHRoYXQgY29udGFpbiBhIGdpdmVuIHN1Z2FyIHdpbGwgYmUgY2FwdHVyZWQuIFRoZSBvcmRlciBvZiBnaXZlbiByZXNpZHVlcyB3aWxsIGJlIGNhcHR1cmVkIGluIHRoZSA14oCYLTPigJhkaXJlY3Rpb24gY29uc2lzdGVudCB3aXRoIHRoZSBiYXNlIHNlcXVlbmNlcyBsaXN0ZWQgYWJvdmUuXHJcbiAgICovXHJcbiAgcmVzaWR1ZVNpdGU/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIDUuMy42LjguMSBTdWdhciBJRCAoTWFuZGF0b3J5KS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXRTdWdhciBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1N1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdFN1Z2FyJztcclxuICAvKipcclxuICAgKiBUaGUgU3Vic3RhbmNlIElEIG9mIHRoZSBzdWdhciBvciBzdWdhci1saWtlIGNvbXBvbmVudCB0aGF0IG1ha2UgdXAgdGhlIG51Y2xlb3RpZGUuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBzdWdhciBvciBzdWdhci1saWtlIGNvbXBvbmVudCB0aGF0IG1ha2UgdXAgdGhlIG51Y2xlb3RpZGUuXHJcbiAgICovXHJcbiAgcHVibGljIG5hbWU/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZXNpZHVlcyB0aGF0IGNvbnRhaW4gYSBnaXZlbiBzdWdhciB3aWxsIGJlIGNhcHR1cmVkLiBUaGUgb3JkZXIgb2YgZ2l2ZW4gcmVzaWR1ZXMgd2lsbCBiZSBjYXB0dXJlZCBpbiB0aGUgNeKAmC0z4oCYZGlyZWN0aW9uIGNvbnNpc3RlbnQgd2l0aCB0aGUgYmFzZSBzZXF1ZW5jZXMgbGlzdGVkIGFib3ZlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZXNpZHVlU2l0ZT86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0U3VnYXIgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXRTdWdhckFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gbmV3IGZoaXIuSWRlbnRpZmllcihzb3VyY2UuaWRlbnRpZmllcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ25hbWUnXSkgeyB0aGlzLm5hbWUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLm5hbWV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVzaWR1ZVNpdGUnXSkgeyB0aGlzLnJlc2lkdWVTaXRlID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5yZXNpZHVlU2l0ZX0pOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAodGhpc1tcImlkZW50aWZpZXJcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5pZGVudGlmaWVyLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcIm5hbWVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5uYW1lLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInJlc2lkdWVTaXRlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucmVzaWR1ZVNpdGUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0QXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogSW5kZXggb2YgbGluZWFyIHNlcXVlbmNlcyBvZiBudWNsZWljIGFjaWRzIGluIG9yZGVyIG9mIGRlY3JlYXNpbmcgbGVuZ3RoLiBTZXF1ZW5jZXMgb2YgdGhlIHNhbWUgbGVuZ3RoIHdpbGwgYmUgb3JkZXJlZCBieSBtb2xlY3VsYXIgd2VpZ2h0LiBTdWJ1bml0cyB0aGF0IGhhdmUgaWRlbnRpY2FsIHNlcXVlbmNlcyB3aWxsIGJlIHJlcGVhdGVkIGFuZCBoYXZlIHNlcXVlbnRpYWwgc3Vic2NyaXB0cy5cclxuICAgKi9cclxuICBzdWJ1bml0PzogZmhpci5GaGlySW50ZWdlcnxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFjdHVhbCBudWNsZW90aWRlIHNlcXVlbmNlIG5vdGF0aW9uIGZyb20gNScgdG8gMycgZW5kIHVzaW5nIHN0YW5kYXJkIHNpbmdsZSBsZXR0ZXIgY29kZXMuIEluIGFkZGl0aW9uIHRvIHRoZSBiYXNlIHNlcXVlbmNlLCBzdWdhciBhbmQgdHlwZSBvZiBwaG9zcGhhdGUgb3Igbm9uLXBob3NwaGF0ZSBsaW5rYWdlIHNob3VsZCBhbHNvIGJlIGNhcHR1cmVkLlxyXG4gICAqL1xyXG4gIHNlcXVlbmNlPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGxlbmd0aCBvZiB0aGUgc2VxdWVuY2Ugc2hhbGwgYmUgY2FwdHVyZWQuXHJcbiAgICovXHJcbiAgbGVuZ3RoPzogZmhpci5GaGlySW50ZWdlcnxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIChUQkMpLlxyXG4gICAqL1xyXG4gIHNlcXVlbmNlQXR0YWNobWVudD86IGZoaXIuQXR0YWNobWVudEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBudWNsZW90aWRlIHByZXNlbnQgYXQgdGhlIDXigJkgdGVybWluYWwgc2hhbGwgYmUgc3BlY2lmaWVkIGJhc2VkIG9uIGEgY29udHJvbGxlZCB2b2NhYnVsYXJ5LiBTaW5jZSB0aGUgc2VxdWVuY2UgaXMgcmVwcmVzZW50ZWQgZnJvbSB0aGUgNScgdG8gdGhlIDMnIGVuZCwgdGhlIDXigJkgcHJpbWUgbnVjbGVvdGlkZSBpcyB0aGUgbGV0dGVyIGF0IHRoZSBmaXJzdCBwb3NpdGlvbiBpbiB0aGUgc2VxdWVuY2UuIEEgc2VwYXJhdGUgcmVwcmVzZW50YXRpb24gd291bGQgYmUgcmVkdW5kYW50LlxyXG4gICAqL1xyXG4gIGZpdmVQcmltZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG51Y2xlb3RpZGUgcHJlc2VudCBhdCB0aGUgM+KAmSB0ZXJtaW5hbCBzaGFsbCBiZSBzcGVjaWZpZWQgYmFzZWQgb24gYSBjb250cm9sbGVkIHZvY2FidWxhcnkuIFNpbmNlIHRoZSBzZXF1ZW5jZSBpcyByZXByZXNlbnRlZCBmcm9tIHRoZSA1JyB0byB0aGUgMycgZW5kLCB0aGUgNeKAmSBwcmltZSBudWNsZW90aWRlIGlzIHRoZSBsZXR0ZXIgYXQgdGhlIGxhc3QgcG9zaXRpb24gaW4gdGhlIHNlcXVlbmNlLiBBIHNlcGFyYXRlIHJlcHJlc2VudGF0aW9uIHdvdWxkIGJlIHJlZHVuZGFudC5cclxuICAgKi9cclxuICB0aHJlZVByaW1lPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbGlua2FnZXMgYmV0d2VlbiBzdWdhciByZXNpZHVlcyB3aWxsIGFsc28gYmUgY2FwdHVyZWQuXHJcbiAgICovXHJcbiAgbGlua2FnZT86IGZoaXIuU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0TGlua2FnZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogNS4zLjYuOC4xIFN1Z2FyIElEIChNYW5kYXRvcnkpLlxyXG4gICAqL1xyXG4gIHN1Z2FyPzogZmhpci5TdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXRTdWdhckFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTdWJ1bml0cyBhcmUgbGlzdGVkIGluIG9yZGVyIG9mIGRlY3JlYXNpbmcgbGVuZ3RoOyBzZXF1ZW5jZXMgb2YgdGhlIHNhbWUgbGVuZ3RoIHdpbGwgYmUgb3JkZXJlZCBieSBtb2xlY3VsYXIgd2VpZ2h0OyBzdWJ1bml0cyB0aGF0IGhhdmUgaWRlbnRpY2FsIHNlcXVlbmNlcyB3aWxsIGJlIHJlcGVhdGVkIG11bHRpcGxlIHRpbWVzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFN1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdCBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1N1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdCc7XHJcbiAgLyoqXHJcbiAgICogSW5kZXggb2YgbGluZWFyIHNlcXVlbmNlcyBvZiBudWNsZWljIGFjaWRzIGluIG9yZGVyIG9mIGRlY3JlYXNpbmcgbGVuZ3RoLiBTZXF1ZW5jZXMgb2YgdGhlIHNhbWUgbGVuZ3RoIHdpbGwgYmUgb3JkZXJlZCBieSBtb2xlY3VsYXIgd2VpZ2h0LiBTdWJ1bml0cyB0aGF0IGhhdmUgaWRlbnRpY2FsIHNlcXVlbmNlcyB3aWxsIGJlIHJlcGVhdGVkIGFuZCBoYXZlIHNlcXVlbnRpYWwgc3Vic2NyaXB0cy5cclxuICAgKi9cclxuICBwdWJsaWMgc3VidW5pdD86IGZoaXIuRmhpckludGVnZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFjdHVhbCBudWNsZW90aWRlIHNlcXVlbmNlIG5vdGF0aW9uIGZyb20gNScgdG8gMycgZW5kIHVzaW5nIHN0YW5kYXJkIHNpbmdsZSBsZXR0ZXIgY29kZXMuIEluIGFkZGl0aW9uIHRvIHRoZSBiYXNlIHNlcXVlbmNlLCBzdWdhciBhbmQgdHlwZSBvZiBwaG9zcGhhdGUgb3Igbm9uLXBob3NwaGF0ZSBsaW5rYWdlIHNob3VsZCBhbHNvIGJlIGNhcHR1cmVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXF1ZW5jZT86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGxlbmd0aCBvZiB0aGUgc2VxdWVuY2Ugc2hhbGwgYmUgY2FwdHVyZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGxlbmd0aD86IGZoaXIuRmhpckludGVnZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIChUQkMpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXF1ZW5jZUF0dGFjaG1lbnQ/OiBmaGlyLkF0dGFjaG1lbnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBudWNsZW90aWRlIHByZXNlbnQgYXQgdGhlIDXigJkgdGVybWluYWwgc2hhbGwgYmUgc3BlY2lmaWVkIGJhc2VkIG9uIGEgY29udHJvbGxlZCB2b2NhYnVsYXJ5LiBTaW5jZSB0aGUgc2VxdWVuY2UgaXMgcmVwcmVzZW50ZWQgZnJvbSB0aGUgNScgdG8gdGhlIDMnIGVuZCwgdGhlIDXigJkgcHJpbWUgbnVjbGVvdGlkZSBpcyB0aGUgbGV0dGVyIGF0IHRoZSBmaXJzdCBwb3NpdGlvbiBpbiB0aGUgc2VxdWVuY2UuIEEgc2VwYXJhdGUgcmVwcmVzZW50YXRpb24gd291bGQgYmUgcmVkdW5kYW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBmaXZlUHJpbWU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG51Y2xlb3RpZGUgcHJlc2VudCBhdCB0aGUgM+KAmSB0ZXJtaW5hbCBzaGFsbCBiZSBzcGVjaWZpZWQgYmFzZWQgb24gYSBjb250cm9sbGVkIHZvY2FidWxhcnkuIFNpbmNlIHRoZSBzZXF1ZW5jZSBpcyByZXByZXNlbnRlZCBmcm9tIHRoZSA1JyB0byB0aGUgMycgZW5kLCB0aGUgNeKAmSBwcmltZSBudWNsZW90aWRlIGlzIHRoZSBsZXR0ZXIgYXQgdGhlIGxhc3QgcG9zaXRpb24gaW4gdGhlIHNlcXVlbmNlLiBBIHNlcGFyYXRlIHJlcHJlc2VudGF0aW9uIHdvdWxkIGJlIHJlZHVuZGFudC5cclxuICAgKi9cclxuICBwdWJsaWMgdGhyZWVQcmltZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbGlua2FnZXMgYmV0d2VlbiBzdWdhciByZXNpZHVlcyB3aWxsIGFsc28gYmUgY2FwdHVyZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGxpbmthZ2U6IGZoaXIuU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0TGlua2FnZVtdO1xyXG4gIC8qKlxyXG4gICAqIDUuMy42LjguMSBTdWdhciBJRCAoTWFuZGF0b3J5KS5cclxuICAgKi9cclxuICBwdWJsaWMgc3VnYXI6IGZoaXIuU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0U3VnYXJbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXQgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXRBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnc3VidW5pdCddKSB7IHRoaXMuc3VidW5pdCA9IG5ldyBmaGlyLkZoaXJJbnRlZ2VyKHt2YWx1ZTogc291cmNlLnN1YnVuaXR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2VxdWVuY2UnXSkgeyB0aGlzLnNlcXVlbmNlID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5zZXF1ZW5jZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydsZW5ndGgnXSkgeyB0aGlzLmxlbmd0aCA9IG5ldyBmaGlyLkZoaXJJbnRlZ2VyKHt2YWx1ZTogc291cmNlLmxlbmd0aH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydzZXF1ZW5jZUF0dGFjaG1lbnQnXSkgeyB0aGlzLnNlcXVlbmNlQXR0YWNobWVudCA9IG5ldyBmaGlyLkF0dGFjaG1lbnQoc291cmNlLnNlcXVlbmNlQXR0YWNobWVudCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2ZpdmVQcmltZSddKSB7IHRoaXMuZml2ZVByaW1lID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5maXZlUHJpbWUpOyB9XHJcbiAgICBpZiAoc291cmNlWyd0aHJlZVByaW1lJ10pIHsgdGhpcy50aHJlZVByaW1lID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS50aHJlZVByaW1lKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbGlua2FnZSddKSB7IHRoaXMubGlua2FnZSA9IHNvdXJjZS5saW5rYWdlLm1hcCgoeCkgPT4gbmV3IGZoaXIuU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0TGlua2FnZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmxpbmthZ2UgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3VnYXInXSkgeyB0aGlzLnN1Z2FyID0gc291cmNlLnN1Z2FyLm1hcCgoeCkgPT4gbmV3IGZoaXIuU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0U3VnYXIoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdWdhciA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAodGhpc1tcInN1YnVuaXRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5zdWJ1bml0LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInNlcXVlbmNlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc2VxdWVuY2UuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wibGVuZ3RoXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMubGVuZ3RoLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInNlcXVlbmNlQXR0YWNobWVudFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnNlcXVlbmNlQXR0YWNobWVudC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJmaXZlUHJpbWVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5maXZlUHJpbWUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1widGhyZWVQcmltZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnRocmVlUHJpbWUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wibGlua2FnZVwiXSkgeyB0aGlzLmxpbmthZ2UuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcInN1Z2FyXCJdKSB7IHRoaXMuc3VnYXIuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgU3Vic3RhbmNlTnVjbGVpY0FjaWQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3Vic3RhbmNlTnVjbGVpY0FjaWRBcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJTdWJzdGFuY2VOdWNsZWljQWNpZFwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdHlwZSBvZiB0aGUgc2VxdWVuY2Ugc2hhbGwgYmUgc3BlY2lmaWVkIGJhc2VkIG9uIGEgY29udHJvbGxlZCB2b2NhYnVsYXJ5LlxyXG4gICAqL1xyXG4gIHNlcXVlbmNlVHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG51bWJlciBvZiBsaW5lYXIgc2VxdWVuY2VzIG9mIG51Y2xlb3RpZGVzIGxpbmtlZCB0aHJvdWdoIHBob3NwaG9kaWVzdGVyIGJvbmRzIHNoYWxsIGJlIGRlc2NyaWJlZC4gU3VidW5pdHMgd291bGQgYmUgc3RyYW5kcyBvZiBudWNsZWljIGFjaWRzIHRoYXQgYXJlIHRpZ2h0bHkgYXNzb2NpYXRlZCB0eXBpY2FsbHkgdGhyb3VnaCBXYXRzb24tQ3JpY2sgYmFzZSBwYWlyaW5nLiBOT1RFOiBJZiBub3Qgc3BlY2lmaWVkIGluIHRoZSByZWZlcmVuY2Ugc291cmNlLCB0aGUgYXNzdW1wdGlvbiBpcyB0aGF0IHRoZXJlIGlzIDEgc3VidW5pdC5cclxuICAgKi9cclxuICBudW1iZXJPZlN1YnVuaXRzPzogZmhpci5GaGlySW50ZWdlcnxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBhcmVhIG9mIGh5YnJpZGlzYXRpb24gc2hhbGwgYmUgZGVzY3JpYmVkIGlmIGFwcGxpY2FibGUgZm9yIGRvdWJsZSBzdHJhbmRlZCBSTkEgb3IgRE5BLiBUaGUgbnVtYmVyIGFzc29jaWF0ZWQgd2l0aCB0aGUgc3VidW5pdCBmb2xsb3dlZCBieSB0aGUgbnVtYmVyIGFzc29jaWF0ZWQgdG8gdGhlIHJlc2lkdWUgc2hhbGwgYmUgc3BlY2lmaWVkIGluIGluY3JlYXNpbmcgb3JkZXIuIFRoZSB1bmRlcnNjb3JlIOKAnOKAnSBzaGFsbCBiZSB1c2VkIGFzIHNlcGFyYXRvciBhcyBmb2xsb3dzOiDigJxTdWJ1bml0bnVtYmVyIFJlc2lkdWXigJ0uXHJcbiAgICovXHJcbiAgYXJlYU9mSHlicmlkaXNhdGlvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIChUQkMpLlxyXG4gICAqL1xyXG4gIG9saWdvTnVjbGVvdGlkZVR5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFN1YnVuaXRzIGFyZSBsaXN0ZWQgaW4gb3JkZXIgb2YgZGVjcmVhc2luZyBsZW5ndGg7IHNlcXVlbmNlcyBvZiB0aGUgc2FtZSBsZW5ndGggd2lsbCBiZSBvcmRlcmVkIGJ5IG1vbGVjdWxhciB3ZWlnaHQ7IHN1YnVuaXRzIHRoYXQgaGF2ZSBpZGVudGljYWwgc2VxdWVuY2VzIHdpbGwgYmUgcmVwZWF0ZWQgbXVsdGlwbGUgdGltZXMuXHJcbiAgICovXHJcbiAgc3VidW5pdD86IGZoaXIuU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0QXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIE51Y2xlaWMgYWNpZHMgYXJlIGRlZmluZWQgYnkgdGhyZWUgZGlzdGluY3QgZWxlbWVudHM6IHRoZSBiYXNlLCBzdWdhciBhbmQgbGlua2FnZS4gSW5kaXZpZHVhbCBzdWJzdGFuY2UvbW9pZXR5IElEcyB3aWxsIGJlIGNyZWF0ZWQgZm9yIGVhY2ggb2YgdGhlc2UgZWxlbWVudHMuIFRoZSBudWNsZW90aWRlIHNlcXVlbmNlIHdpbGwgYmUgYWx3YXlzIGVudGVyZWQgaW4gdGhlIDXigJktM+KAmSBkaXJlY3Rpb24uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3Vic3RhbmNlTnVjbGVpY0FjaWQgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1N1YnN0YW5jZU51Y2xlaWNBY2lkJztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIlN1YnN0YW5jZU51Y2xlaWNBY2lkXCI7XHJcbiAgLyoqXHJcbiAgICogVGhlIHR5cGUgb2YgdGhlIHNlcXVlbmNlIHNoYWxsIGJlIHNwZWNpZmllZCBiYXNlZCBvbiBhIGNvbnRyb2xsZWQgdm9jYWJ1bGFyeS5cclxuICAgKi9cclxuICBwdWJsaWMgc2VxdWVuY2VUeXBlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBudW1iZXIgb2YgbGluZWFyIHNlcXVlbmNlcyBvZiBudWNsZW90aWRlcyBsaW5rZWQgdGhyb3VnaCBwaG9zcGhvZGllc3RlciBib25kcyBzaGFsbCBiZSBkZXNjcmliZWQuIFN1YnVuaXRzIHdvdWxkIGJlIHN0cmFuZHMgb2YgbnVjbGVpYyBhY2lkcyB0aGF0IGFyZSB0aWdodGx5IGFzc29jaWF0ZWQgdHlwaWNhbGx5IHRocm91Z2ggV2F0c29uLUNyaWNrIGJhc2UgcGFpcmluZy4gTk9URTogSWYgbm90IHNwZWNpZmllZCBpbiB0aGUgcmVmZXJlbmNlIHNvdXJjZSwgdGhlIGFzc3VtcHRpb24gaXMgdGhhdCB0aGVyZSBpcyAxIHN1YnVuaXQuXHJcbiAgICovXHJcbiAgcHVibGljIG51bWJlck9mU3VidW5pdHM/OiBmaGlyLkZoaXJJbnRlZ2VyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgYXJlYSBvZiBoeWJyaWRpc2F0aW9uIHNoYWxsIGJlIGRlc2NyaWJlZCBpZiBhcHBsaWNhYmxlIGZvciBkb3VibGUgc3RyYW5kZWQgUk5BIG9yIEROQS4gVGhlIG51bWJlciBhc3NvY2lhdGVkIHdpdGggdGhlIHN1YnVuaXQgZm9sbG93ZWQgYnkgdGhlIG51bWJlciBhc3NvY2lhdGVkIHRvIHRoZSByZXNpZHVlIHNoYWxsIGJlIHNwZWNpZmllZCBpbiBpbmNyZWFzaW5nIG9yZGVyLiBUaGUgdW5kZXJzY29yZSDigJzigJ0gc2hhbGwgYmUgdXNlZCBhcyBzZXBhcmF0b3IgYXMgZm9sbG93czog4oCcU3VidW5pdG51bWJlciBSZXNpZHVl4oCdLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhcmVhT2ZIeWJyaWRpc2F0aW9uPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiAoVEJDKS5cclxuICAgKi9cclxuICBwdWJsaWMgb2xpZ29OdWNsZW90aWRlVHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTdWJ1bml0cyBhcmUgbGlzdGVkIGluIG9yZGVyIG9mIGRlY3JlYXNpbmcgbGVuZ3RoOyBzZXF1ZW5jZXMgb2YgdGhlIHNhbWUgbGVuZ3RoIHdpbGwgYmUgb3JkZXJlZCBieSBtb2xlY3VsYXIgd2VpZ2h0OyBzdWJ1bml0cyB0aGF0IGhhdmUgaWRlbnRpY2FsIHNlcXVlbmNlcyB3aWxsIGJlIHJlcGVhdGVkIG11bHRpcGxlIHRpbWVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdWJ1bml0OiBmaGlyLlN1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdFtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFN1YnN0YW5jZU51Y2xlaWNBY2lkIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8U3Vic3RhbmNlTnVjbGVpY0FjaWRBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnU3Vic3RhbmNlTnVjbGVpY0FjaWQnO1xyXG4gICAgaWYgKHNvdXJjZVsnc2VxdWVuY2VUeXBlJ10pIHsgdGhpcy5zZXF1ZW5jZVR5cGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnNlcXVlbmNlVHlwZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ251bWJlck9mU3VidW5pdHMnXSkgeyB0aGlzLm51bWJlck9mU3VidW5pdHMgPSBuZXcgZmhpci5GaGlySW50ZWdlcih7dmFsdWU6IHNvdXJjZS5udW1iZXJPZlN1YnVuaXRzfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2FyZWFPZkh5YnJpZGlzYXRpb24nXSkgeyB0aGlzLmFyZWFPZkh5YnJpZGlzYXRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmFyZWFPZkh5YnJpZGlzYXRpb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnb2xpZ29OdWNsZW90aWRlVHlwZSddKSB7IHRoaXMub2xpZ29OdWNsZW90aWRlVHlwZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2Uub2xpZ29OdWNsZW90aWRlVHlwZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N1YnVuaXQnXSkgeyB0aGlzLnN1YnVuaXQgPSBzb3VyY2Uuc3VidW5pdC5tYXAoKHgpID0+IG5ldyBmaGlyLlN1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN1YnVuaXQgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKCF0aGlzWydyZXNvdXJjZVR5cGUnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgcmVzb3VyY2VUeXBlOlwiU3Vic3RhbmNlTnVjbGVpY0FjaWRcIiBmaGlyOiBTdWJzdGFuY2VOdWNsZWljQWNpZC5yZXNvdXJjZVR5cGU6XCJTdWJzdGFuY2VOdWNsZWljQWNpZFwiJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wic2VxdWVuY2VUeXBlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc2VxdWVuY2VUeXBlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcIm51bWJlck9mU3VidW5pdHNcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5udW1iZXJPZlN1YnVuaXRzLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImFyZWFPZkh5YnJpZGlzYXRpb25cIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5hcmVhT2ZIeWJyaWRpc2F0aW9uLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcIm9saWdvTnVjbGVvdGlkZVR5cGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5vbGlnb051Y2xlb3RpZGVUeXBlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInN1YnVuaXRcIl0pIHsgdGhpcy5zdWJ1bml0LmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuIl19