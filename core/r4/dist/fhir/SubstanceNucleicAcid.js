// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: SubstanceNucleicAcid
import * as fhir from '../fhir.js';
/**
 * The linkages between sugar residues will also be captured.
 */
export class SubstanceNucleicAcidSubunitLinkage extends fhir.BackboneElement {
    /**
     * Default constructor for SubstanceNucleicAcidSubunitLinkage - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['connectivity']) {
            this.connectivity = new fhir.FhirString({ value: source.connectivity });
        }
        if (source['_connectivity']) {
            if (this.connectivity) {
                this.connectivity.addExtendedProperties(source._connectivity);
            }
            else {
                this.connectivity = new fhir.FhirString(source._connectivity);
            }
        }
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier);
        }
        if (source['name']) {
            this.name = new fhir.FhirString({ value: source.name });
        }
        if (source['_name']) {
            if (this.name) {
                this.name.addExtendedProperties(source._name);
            }
            else {
                this.name = new fhir.FhirString(source._name);
            }
        }
        if (source['residueSite']) {
            this.residueSite = new fhir.FhirString({ value: source.residueSite });
        }
        if (source['_residueSite']) {
            if (this.residueSite) {
                this.residueSite.addExtendedProperties(source._residueSite);
            }
            else {
                this.residueSite = new fhir.FhirString(source._residueSite);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'SubstanceNucleicAcid.subunit.linkage';
        }
        if (this["connectivity"]) {
            issues.push(...this.connectivity.doModelValidation(expression + '.connectivity'));
        }
        if (this["identifier"]) {
            issues.push(...this.identifier.doModelValidation(expression + '.identifier'));
        }
        if (this["name"]) {
            issues.push(...this.name.doModelValidation(expression + '.name'));
        }
        if (this["residueSite"]) {
            issues.push(...this.residueSite.doModelValidation(expression + '.residueSite'));
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceNucleicAcidSubunitLinkage._fts_dataType = 'SubstanceNucleicAcidSubunitLinkage';
/**
 * 5.3.6.8.1 Sugar ID (Mandatory).
 */
export class SubstanceNucleicAcidSubunitSugar extends fhir.BackboneElement {
    /**
     * Default constructor for SubstanceNucleicAcidSubunitSugar - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier);
        }
        if (source['name']) {
            this.name = new fhir.FhirString({ value: source.name });
        }
        if (source['_name']) {
            if (this.name) {
                this.name.addExtendedProperties(source._name);
            }
            else {
                this.name = new fhir.FhirString(source._name);
            }
        }
        if (source['residueSite']) {
            this.residueSite = new fhir.FhirString({ value: source.residueSite });
        }
        if (source['_residueSite']) {
            if (this.residueSite) {
                this.residueSite.addExtendedProperties(source._residueSite);
            }
            else {
                this.residueSite = new fhir.FhirString(source._residueSite);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'SubstanceNucleicAcid.subunit.sugar';
        }
        if (this["identifier"]) {
            issues.push(...this.identifier.doModelValidation(expression + '.identifier'));
        }
        if (this["name"]) {
            issues.push(...this.name.doModelValidation(expression + '.name'));
        }
        if (this["residueSite"]) {
            issues.push(...this.residueSite.doModelValidation(expression + '.residueSite'));
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceNucleicAcidSubunitSugar._fts_dataType = 'SubstanceNucleicAcidSubunitSugar';
/**
 * Subunits are listed in order of decreasing length; sequences of the same length will be ordered by molecular weight; subunits that have identical sequences will be repeated multiple times.
 */
export class SubstanceNucleicAcidSubunit extends fhir.BackboneElement {
    /**
     * Default constructor for SubstanceNucleicAcidSubunit - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['subunit']) {
            this.subunit = new fhir.FhirInteger({ value: source.subunit });
        }
        if (source['_subunit']) {
            if (this.subunit) {
                this.subunit.addExtendedProperties(source._subunit);
            }
            else {
                this.subunit = new fhir.FhirInteger(source._subunit);
            }
        }
        if (source['sequence']) {
            this.sequence = new fhir.FhirString({ value: source.sequence });
        }
        if (source['_sequence']) {
            if (this.sequence) {
                this.sequence.addExtendedProperties(source._sequence);
            }
            else {
                this.sequence = new fhir.FhirString(source._sequence);
            }
        }
        if (source['length']) {
            this.length = new fhir.FhirInteger({ value: source.length });
        }
        if (source['_length']) {
            if (this.length) {
                this.length.addExtendedProperties(source._length);
            }
            else {
                this.length = new fhir.FhirInteger(source._length);
            }
        }
        if (source['sequenceAttachment']) {
            this.sequenceAttachment = new fhir.Attachment(source.sequenceAttachment);
        }
        if (source['fivePrime']) {
            this.fivePrime = new fhir.CodeableConcept(source.fivePrime);
        }
        if (source['threePrime']) {
            this.threePrime = new fhir.CodeableConcept(source.threePrime);
        }
        if (source['linkage']) {
            this.linkage = source.linkage.map((x) => new fhir.SubstanceNucleicAcidSubunitLinkage(x));
        }
        else {
            this.linkage = [];
        }
        if (source['sugar']) {
            this.sugar = source.sugar.map((x) => new fhir.SubstanceNucleicAcidSubunitSugar(x));
        }
        else {
            this.sugar = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'SubstanceNucleicAcid.subunit';
        }
        if (this["subunit"]) {
            issues.push(...this.subunit.doModelValidation(expression + '.subunit'));
        }
        if (this["sequence"]) {
            issues.push(...this.sequence.doModelValidation(expression + '.sequence'));
        }
        if (this["length"]) {
            issues.push(...this.length.doModelValidation(expression + '.length'));
        }
        if (this["sequenceAttachment"]) {
            issues.push(...this.sequenceAttachment.doModelValidation(expression + '.sequenceAttachment'));
        }
        if (this["fivePrime"]) {
            issues.push(...this.fivePrime.doModelValidation(expression + '.fivePrime'));
        }
        if (this["threePrime"]) {
            issues.push(...this.threePrime.doModelValidation(expression + '.threePrime'));
        }
        if (this["linkage"]) {
            this.linkage.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.linkage[${i}]`)); });
        }
        if (this["sugar"]) {
            this.sugar.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.sugar[${i}]`)); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceNucleicAcidSubunit._fts_dataType = 'SubstanceNucleicAcidSubunit';
/**
 * Nucleic acids are defined by three distinct elements: the base, sugar and linkage. Individual substance/moiety IDs will be created for each of these elements. The nucleotide sequence will be always entered in the 5’-3’ direction.
 */
export class SubstanceNucleicAcid extends fhir.DomainResource {
    /**
     * Default constructor for SubstanceNucleicAcid - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'SubstanceNucleicAcid';
        if (source['sequenceType']) {
            this.sequenceType = new fhir.CodeableConcept(source.sequenceType);
        }
        if (source['numberOfSubunits']) {
            this.numberOfSubunits = new fhir.FhirInteger({ value: source.numberOfSubunits });
        }
        if (source['_numberOfSubunits']) {
            if (this.numberOfSubunits) {
                this.numberOfSubunits.addExtendedProperties(source._numberOfSubunits);
            }
            else {
                this.numberOfSubunits = new fhir.FhirInteger(source._numberOfSubunits);
            }
        }
        if (source['areaOfHybridisation']) {
            this.areaOfHybridisation = new fhir.FhirString({ value: source.areaOfHybridisation });
        }
        if (source['_areaOfHybridisation']) {
            if (this.areaOfHybridisation) {
                this.areaOfHybridisation.addExtendedProperties(source._areaOfHybridisation);
            }
            else {
                this.areaOfHybridisation = new fhir.FhirString(source._areaOfHybridisation);
            }
        }
        if (source['oligoNucleotideType']) {
            this.oligoNucleotideType = new fhir.CodeableConcept(source.oligoNucleotideType);
        }
        if (source['subunit']) {
            this.subunit = source.subunit.map((x) => new fhir.SubstanceNucleicAcidSubunit(x));
        }
        else {
            this.subunit = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'SubstanceNucleicAcid';
        }
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType fhir: SubstanceNucleicAcid.resourceType:"SubstanceNucleicAcid"', expression: [expression] });
        }
        if (this["sequenceType"]) {
            issues.push(...this.sequenceType.doModelValidation(expression + '.sequenceType'));
        }
        if (this["numberOfSubunits"]) {
            issues.push(...this.numberOfSubunits.doModelValidation(expression + '.numberOfSubunits'));
        }
        if (this["areaOfHybridisation"]) {
            issues.push(...this.areaOfHybridisation.doModelValidation(expression + '.areaOfHybridisation'));
        }
        if (this["oligoNucleotideType"]) {
            issues.push(...this.oligoNucleotideType.doModelValidation(expression + '.oligoNucleotideType'));
        }
        if (this["subunit"]) {
            this.subunit.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.subunit[${i}]`)); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceNucleicAcid._fts_dataType = 'SubstanceNucleicAcid';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3Vic3RhbmNlTnVjbGVpY0FjaWQuanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL1N1YnN0YW5jZU51Y2xlaWNBY2lkLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQiwrQ0FBK0M7QUFDL0Msa0NBQWtDO0FBQ2xDLHNDQUFzQztBQUV0QyxPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQW9DbkM7O0dBRUc7QUFDSCxNQUFNLE9BQU8sa0NBQW1DLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFxQjFFOztPQUVHO0lBQ0gsWUFBWSxTQUF5RCxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUMvRyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLGNBQWMsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLFlBQVksRUFBQyxDQUFDLENBQUM7U0FBRTtRQUN0RyxJQUFJLE1BQU0sQ0FBQyxlQUFlLENBQUMsRUFBRTtZQUMzQixJQUFJLElBQUksQ0FBQyxZQUFZLEVBQUU7Z0JBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsYUFBYyxDQUFDLENBQUM7YUFBRTtpQkFDckY7Z0JBQUUsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLGFBQTZDLENBQUMsQ0FBQzthQUFFO1NBQ3hHO1FBQ0QsSUFBSSxNQUFNLENBQUMsWUFBWSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUM7U0FBRTtRQUN2RixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJ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QUFFLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLEdBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtTQUFFO1FBQzdILE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBaEVEOztHQUVHO0FBQzZCLGtDQUFhLEdBQVUsc0JBQXNCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjQuY29yZSB2ZXJzaW9uOiA0LjAuMVxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IFN1YnN0YW5jZU51Y2xlaWNBY2lkXHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFN1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdExpbmthZ2UgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0TGlua2FnZUFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBlbnRpdHkgdGhhdCBsaW5rcyB0aGUgc3VnYXIgcmVzaWR1ZXMgdG9nZXRoZXIgc2hvdWxkIGFsc28gYmUgY2FwdHVyZWQgZm9yIG5lYXJseSBhbGwgbmF0dXJhbGx5IG9jY3VycmluZyBudWNsZWljIGFjaWQgdGhlIGxpbmthZ2UgaXMgYSBwaG9zcGhhdGUgZ3JvdXAuIEZvciBtYW55IHN5bnRoZXRpYyBvbGlnb251Y2xlb3RpZGVzIHBob3NwaG9yb3RoaW9hdGUgbGlua2FnZXMgYXJlIG9mdGVuIHNlZW4uIExpbmthZ2UgY29ubmVjdGl2aXR5IGlzIGFzc3VtZWQgdG8gYmUgM+KAmS014oCZLiBJZiB0aGUgbGlua2FnZSBpcyBlaXRoZXIgM+KAmS0z4oCZIG9yIDXigJktNeKAmSB0aGlzIHNob3VsZCBiZSBzcGVjaWZpZWQuXHJcbiAgICovXHJcbiAgY29ubmVjdGl2aXR5PzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFN1YnN0YW5jZU51Y2xlaWNBY2lkLnN1YnVuaXQubGlua2FnZS5jb25uZWN0aXZpdHlcclxuICAgKi9cclxuICBfY29ubmVjdGl2aXR5PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBFYWNoIGxpbmthZ2Ugd2lsbCBiZSByZWdpc3RlcmVkIGFzIGEgZnJhZ21lbnQgYW5kIGhhdmUgYW4gSUQuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEVhY2ggbGlua2FnZSB3aWxsIGJlIHJlZ2lzdGVyZWQgYXMgYSBmcmFnbWVudCBhbmQgaGF2ZSBhdCBsZWFzdCBvbmUgbmFtZS4gQSBzaW5nbGUgbmFtZSBzaGFsbCBiZSBhc3NpZ25lZCB0byBlYWNoIGxpbmthZ2UuXHJcbiAgICovXHJcbiAgbmFtZT86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTdWJzdGFuY2VOdWNsZWljQWNpZC5zdWJ1bml0LmxpbmthZ2UubmFtZVxyXG4gICAqL1xyXG4gIF9uYW1lPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBSZXNpZHVlcyBzaGFsbCBiZSBjYXB0dXJlZCBhcyBkZXNjcmliZWQgaW4gNS4zLjYuOC4zLlxyXG4gICAqL1xyXG4gIHJlc2lkdWVTaXRlPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFN1YnN0YW5jZU51Y2xlaWNBY2lkLnN1YnVuaXQubGlua2FnZS5yZXNpZHVlU2l0ZVxyXG4gICAqL1xyXG4gIF9yZXNpZHVlU2l0ZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgbGlua2FnZXMgYmV0d2VlbiBzdWdhciByZXNpZHVlcyB3aWxsIGFsc28gYmUgY2FwdHVyZWQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0TGlua2FnZSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1N1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdExpbmthZ2UnO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBlbnRpdHkgdGhhdCBsaW5rcyB0aGUgc3VnYXIgcmVzaWR1ZXMgdG9nZXRoZXIgc2hvdWxkIGFsc28gYmUgY2FwdHVyZWQgZm9yIG5lYXJseSBhbGwgbmF0dXJhbGx5IG9jY3VycmluZyBudWNsZWljIGFjaWQgdGhlIGxpbmthZ2UgaXMgYSBwaG9zcGhhdGUgZ3JvdXAuIEZvciBtYW55IHN5bnRoZXRpYyBvbGlnb251Y2xlb3RpZGVzIHBob3NwaG9yb3RoaW9hdGUgbGlua2FnZXMgYXJlIG9mdGVuIHNlZW4uIExpbmthZ2UgY29ubmVjdGl2aXR5IGlzIGFzc3VtZWQgdG8gYmUgM+KAmS014oCZLiBJZiB0aGUgbGlua2FnZSBpcyBlaXRoZXIgM+KAmS0z4oCZIG9yIDXigJktNeKAmSB0aGlzIHNob3VsZCBiZSBzcGVjaWZpZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGNvbm5lY3Rpdml0eT86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRWFjaCBsaW5rYWdlIHdpbGwgYmUgcmVnaXN0ZXJlZCBhcyBhIGZyYWdtZW50IGFuZCBoYXZlIGFuIElELlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFYWNoIGxpbmthZ2Ugd2lsbCBiZSByZWdpc3RlcmVkIGFzIGEgZnJhZ21lbnQgYW5kIGhhdmUgYXQgbGVhc3Qgb25lIG5hbWUuIEEgc2luZ2xlIG5hbWUgc2hhbGwgYmUgYXNzaWduZWQgdG8gZWFjaCBsaW5rYWdlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBuYW1lPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBSZXNpZHVlcyBzaGFsbCBiZSBjYXB0dXJlZCBhcyBkZXNjcmliZWQgaW4gNS4zLjYuOC4zLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZXNpZHVlU2l0ZT86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0TGlua2FnZSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFN1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdExpbmthZ2VBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnY29ubmVjdGl2aXR5J10pIHsgdGhpcy5jb25uZWN0aXZpdHkgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmNvbm5lY3Rpdml0eX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfY29ubmVjdGl2aXR5J10pIHtcclxuICAgICAgaWYgKHRoaXMuY29ubmVjdGl2aXR5KSB7IHRoaXMuY29ubmVjdGl2aXR5LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2Nvbm5lY3Rpdml0eSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmNvbm5lY3Rpdml0eSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9jb25uZWN0aXZpdHkgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBuZXcgZmhpci5JZGVudGlmaWVyKHNvdXJjZS5pZGVudGlmaWVyKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbmFtZSddKSB7IHRoaXMubmFtZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UubmFtZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfbmFtZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLm5hbWUpIHsgdGhpcy5uYW1lLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX25hbWUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5uYW1lID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX25hbWUgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3Jlc2lkdWVTaXRlJ10pIHsgdGhpcy5yZXNpZHVlU2l0ZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UucmVzaWR1ZVNpdGV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3Jlc2lkdWVTaXRlJ10pIHtcclxuICAgICAgaWYgKHRoaXMucmVzaWR1ZVNpdGUpIHsgdGhpcy5yZXNpZHVlU2l0ZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9yZXNpZHVlU2l0ZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnJlc2lkdWVTaXRlID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3Jlc2lkdWVTaXRlIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKTtcclxuICAgIGlmIChleHByZXNzaW9uID09PSAnJykgeyBleHByZXNzaW9uID0gJ1N1YnN0YW5jZU51Y2xlaWNBY2lkLnN1YnVuaXQubGlua2FnZScgfVxyXG4gICAgaWYgKHRoaXNbXCJjb25uZWN0aXZpdHlcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5jb25uZWN0aXZpdHkuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLmNvbm5lY3Rpdml0eScpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJpZGVudGlmaWVyXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuaWRlbnRpZmllci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuaWRlbnRpZmllcicpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJuYW1lXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMubmFtZS5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycubmFtZScpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJyZXNpZHVlU2l0ZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnJlc2lkdWVTaXRlLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5yZXNpZHVlU2l0ZScpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFN1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdFN1Z2FyIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFN1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdFN1Z2FyQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIFN1YnN0YW5jZSBJRCBvZiB0aGUgc3VnYXIgb3Igc3VnYXItbGlrZSBjb21wb25lbnQgdGhhdCBtYWtlIHVwIHRoZSBudWNsZW90aWRlLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbmFtZSBvZiB0aGUgc3VnYXIgb3Igc3VnYXItbGlrZSBjb21wb25lbnQgdGhhdCBtYWtlIHVwIHRoZSBudWNsZW90aWRlLlxyXG4gICAqL1xyXG4gIG5hbWU/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3Vic3RhbmNlTnVjbGVpY0FjaWQuc3VidW5pdC5zdWdhci5uYW1lXHJcbiAgICovXHJcbiAgX25hbWU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZXNpZHVlcyB0aGF0IGNvbnRhaW4gYSBnaXZlbiBzdWdhciB3aWxsIGJlIGNhcHR1cmVkLiBUaGUgb3JkZXIgb2YgZ2l2ZW4gcmVzaWR1ZXMgd2lsbCBiZSBjYXB0dXJlZCBpbiB0aGUgNeKAmC0z4oCYZGlyZWN0aW9uIGNvbnNpc3RlbnQgd2l0aCB0aGUgYmFzZSBzZXF1ZW5jZXMgbGlzdGVkIGFib3ZlLlxyXG4gICAqL1xyXG4gIHJlc2lkdWVTaXRlPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFN1YnN0YW5jZU51Y2xlaWNBY2lkLnN1YnVuaXQuc3VnYXIucmVzaWR1ZVNpdGVcclxuICAgKi9cclxuICBfcmVzaWR1ZVNpdGU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG59XHJcblxyXG4vKipcclxuICogNS4zLjYuOC4xIFN1Z2FyIElEIChNYW5kYXRvcnkpLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFN1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdFN1Z2FyIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0U3VnYXInO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBTdWJzdGFuY2UgSUQgb2YgdGhlIHN1Z2FyIG9yIHN1Z2FyLWxpa2UgY29tcG9uZW50IHRoYXQgbWFrZSB1cCB0aGUgbnVjbGVvdGlkZS5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG5hbWUgb2YgdGhlIHN1Z2FyIG9yIHN1Z2FyLWxpa2UgY29tcG9uZW50IHRoYXQgbWFrZSB1cCB0aGUgbnVjbGVvdGlkZS5cclxuICAgKi9cclxuICBwdWJsaWMgbmFtZT86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlc2lkdWVzIHRoYXQgY29udGFpbiBhIGdpdmVuIHN1Z2FyIHdpbGwgYmUgY2FwdHVyZWQuIFRoZSBvcmRlciBvZiBnaXZlbiByZXNpZHVlcyB3aWxsIGJlIGNhcHR1cmVkIGluIHRoZSA14oCYLTPigJhkaXJlY3Rpb24gY29uc2lzdGVudCB3aXRoIHRoZSBiYXNlIHNlcXVlbmNlcyBsaXN0ZWQgYWJvdmUuXHJcbiAgICovXHJcbiAgcHVibGljIHJlc2lkdWVTaXRlPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXRTdWdhciAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFN1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdFN1Z2FyQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBuZXcgZmhpci5JZGVudGlmaWVyKHNvdXJjZS5pZGVudGlmaWVyKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbmFtZSddKSB7IHRoaXMubmFtZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UubmFtZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfbmFtZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLm5hbWUpIHsgdGhpcy5uYW1lLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX25hbWUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5uYW1lID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX25hbWUgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3Jlc2lkdWVTaXRlJ10pIHsgdGhpcy5yZXNpZHVlU2l0ZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UucmVzaWR1ZVNpdGV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3Jlc2lkdWVTaXRlJ10pIHtcclxuICAgICAgaWYgKHRoaXMucmVzaWR1ZVNpdGUpIHsgdGhpcy5yZXNpZHVlU2l0ZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9yZXNpZHVlU2l0ZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnJlc2lkdWVTaXRlID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3Jlc2lkdWVTaXRlIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKTtcclxuICAgIGlmIChleHByZXNzaW9uID09PSAnJykgeyBleHByZXNzaW9uID0gJ1N1YnN0YW5jZU51Y2xlaWNBY2lkLnN1YnVuaXQuc3VnYXInIH1cclxuICAgIGlmICh0aGlzW1wiaWRlbnRpZmllclwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmlkZW50aWZpZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLmlkZW50aWZpZXInKSk7IH1cclxuICAgIGlmICh0aGlzW1wibmFtZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm5hbWUuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLm5hbWUnKSk7IH1cclxuICAgIGlmICh0aGlzW1wicmVzaWR1ZVNpdGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5yZXNpZHVlU2l0ZS5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycucmVzaWR1ZVNpdGUnKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0QXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogSW5kZXggb2YgbGluZWFyIHNlcXVlbmNlcyBvZiBudWNsZWljIGFjaWRzIGluIG9yZGVyIG9mIGRlY3JlYXNpbmcgbGVuZ3RoLiBTZXF1ZW5jZXMgb2YgdGhlIHNhbWUgbGVuZ3RoIHdpbGwgYmUgb3JkZXJlZCBieSBtb2xlY3VsYXIgd2VpZ2h0LiBTdWJ1bml0cyB0aGF0IGhhdmUgaWRlbnRpY2FsIHNlcXVlbmNlcyB3aWxsIGJlIHJlcGVhdGVkIGFuZCBoYXZlIHNlcXVlbnRpYWwgc3Vic2NyaXB0cy5cclxuICAgKi9cclxuICBzdWJ1bml0PzogZmhpci5GaGlySW50ZWdlcnxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTdWJzdGFuY2VOdWNsZWljQWNpZC5zdWJ1bml0LnN1YnVuaXRcclxuICAgKi9cclxuICBfc3VidW5pdD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQWN0dWFsIG51Y2xlb3RpZGUgc2VxdWVuY2Ugbm90YXRpb24gZnJvbSA1JyB0byAzJyBlbmQgdXNpbmcgc3RhbmRhcmQgc2luZ2xlIGxldHRlciBjb2Rlcy4gSW4gYWRkaXRpb24gdG8gdGhlIGJhc2Ugc2VxdWVuY2UsIHN1Z2FyIGFuZCB0eXBlIG9mIHBob3NwaGF0ZSBvciBub24tcGhvc3BoYXRlIGxpbmthZ2Ugc2hvdWxkIGFsc28gYmUgY2FwdHVyZWQuXHJcbiAgICovXHJcbiAgc2VxdWVuY2U/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3Vic3RhbmNlTnVjbGVpY0FjaWQuc3VidW5pdC5zZXF1ZW5jZVxyXG4gICAqL1xyXG4gIF9zZXF1ZW5jZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGxlbmd0aCBvZiB0aGUgc2VxdWVuY2Ugc2hhbGwgYmUgY2FwdHVyZWQuXHJcbiAgICovXHJcbiAgbGVuZ3RoPzogZmhpci5GaGlySW50ZWdlcnxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTdWJzdGFuY2VOdWNsZWljQWNpZC5zdWJ1bml0Lmxlbmd0aFxyXG4gICAqL1xyXG4gIF9sZW5ndGg/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIChUQkMpLlxyXG4gICAqL1xyXG4gIHNlcXVlbmNlQXR0YWNobWVudD86IGZoaXIuQXR0YWNobWVudEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBudWNsZW90aWRlIHByZXNlbnQgYXQgdGhlIDXigJkgdGVybWluYWwgc2hhbGwgYmUgc3BlY2lmaWVkIGJhc2VkIG9uIGEgY29udHJvbGxlZCB2b2NhYnVsYXJ5LiBTaW5jZSB0aGUgc2VxdWVuY2UgaXMgcmVwcmVzZW50ZWQgZnJvbSB0aGUgNScgdG8gdGhlIDMnIGVuZCwgdGhlIDXigJkgcHJpbWUgbnVjbGVvdGlkZSBpcyB0aGUgbGV0dGVyIGF0IHRoZSBmaXJzdCBwb3NpdGlvbiBpbiB0aGUgc2VxdWVuY2UuIEEgc2VwYXJhdGUgcmVwcmVzZW50YXRpb24gd291bGQgYmUgcmVkdW5kYW50LlxyXG4gICAqL1xyXG4gIGZpdmVQcmltZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG51Y2xlb3RpZGUgcHJlc2VudCBhdCB0aGUgM+KAmSB0ZXJtaW5hbCBzaGFsbCBiZSBzcGVjaWZpZWQgYmFzZWQgb24gYSBjb250cm9sbGVkIHZvY2FidWxhcnkuIFNpbmNlIHRoZSBzZXF1ZW5jZSBpcyByZXByZXNlbnRlZCBmcm9tIHRoZSA1JyB0byB0aGUgMycgZW5kLCB0aGUgNeKAmSBwcmltZSBudWNsZW90aWRlIGlzIHRoZSBsZXR0ZXIgYXQgdGhlIGxhc3QgcG9zaXRpb24gaW4gdGhlIHNlcXVlbmNlLiBBIHNlcGFyYXRlIHJlcHJlc2VudGF0aW9uIHdvdWxkIGJlIHJlZHVuZGFudC5cclxuICAgKi9cclxuICB0aHJlZVByaW1lPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbGlua2FnZXMgYmV0d2VlbiBzdWdhciByZXNpZHVlcyB3aWxsIGFsc28gYmUgY2FwdHVyZWQuXHJcbiAgICovXHJcbiAgbGlua2FnZT86IGZoaXIuU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0TGlua2FnZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogNS4zLjYuOC4xIFN1Z2FyIElEIChNYW5kYXRvcnkpLlxyXG4gICAqL1xyXG4gIHN1Z2FyPzogZmhpci5TdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXRTdWdhckFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTdWJ1bml0cyBhcmUgbGlzdGVkIGluIG9yZGVyIG9mIGRlY3JlYXNpbmcgbGVuZ3RoOyBzZXF1ZW5jZXMgb2YgdGhlIHNhbWUgbGVuZ3RoIHdpbGwgYmUgb3JkZXJlZCBieSBtb2xlY3VsYXIgd2VpZ2h0OyBzdWJ1bml0cyB0aGF0IGhhdmUgaWRlbnRpY2FsIHNlcXVlbmNlcyB3aWxsIGJlIHJlcGVhdGVkIG11bHRpcGxlIHRpbWVzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFN1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdCBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1N1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdCc7XHJcbiAgLyoqXHJcbiAgICogSW5kZXggb2YgbGluZWFyIHNlcXVlbmNlcyBvZiBudWNsZWljIGFjaWRzIGluIG9yZGVyIG9mIGRlY3JlYXNpbmcgbGVuZ3RoLiBTZXF1ZW5jZXMgb2YgdGhlIHNhbWUgbGVuZ3RoIHdpbGwgYmUgb3JkZXJlZCBieSBtb2xlY3VsYXIgd2VpZ2h0LiBTdWJ1bml0cyB0aGF0IGhhdmUgaWRlbnRpY2FsIHNlcXVlbmNlcyB3aWxsIGJlIHJlcGVhdGVkIGFuZCBoYXZlIHNlcXVlbnRpYWwgc3Vic2NyaXB0cy5cclxuICAgKi9cclxuICBwdWJsaWMgc3VidW5pdD86IGZoaXIuRmhpckludGVnZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFjdHVhbCBudWNsZW90aWRlIHNlcXVlbmNlIG5vdGF0aW9uIGZyb20gNScgdG8gMycgZW5kIHVzaW5nIHN0YW5kYXJkIHNpbmdsZSBsZXR0ZXIgY29kZXMuIEluIGFkZGl0aW9uIHRvIHRoZSBiYXNlIHNlcXVlbmNlLCBzdWdhciBhbmQgdHlwZSBvZiBwaG9zcGhhdGUgb3Igbm9uLXBob3NwaGF0ZSBsaW5rYWdlIHNob3VsZCBhbHNvIGJlIGNhcHR1cmVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXF1ZW5jZT86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGxlbmd0aCBvZiB0aGUgc2VxdWVuY2Ugc2hhbGwgYmUgY2FwdHVyZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGxlbmd0aD86IGZoaXIuRmhpckludGVnZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIChUQkMpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXF1ZW5jZUF0dGFjaG1lbnQ/OiBmaGlyLkF0dGFjaG1lbnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBudWNsZW90aWRlIHByZXNlbnQgYXQgdGhlIDXigJkgdGVybWluYWwgc2hhbGwgYmUgc3BlY2lmaWVkIGJhc2VkIG9uIGEgY29udHJvbGxlZCB2b2NhYnVsYXJ5LiBTaW5jZSB0aGUgc2VxdWVuY2UgaXMgcmVwcmVzZW50ZWQgZnJvbSB0aGUgNScgdG8gdGhlIDMnIGVuZCwgdGhlIDXigJkgcHJpbWUgbnVjbGVvdGlkZSBpcyB0aGUgbGV0dGVyIGF0IHRoZSBmaXJzdCBwb3NpdGlvbiBpbiB0aGUgc2VxdWVuY2UuIEEgc2VwYXJhdGUgcmVwcmVzZW50YXRpb24gd291bGQgYmUgcmVkdW5kYW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBmaXZlUHJpbWU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG51Y2xlb3RpZGUgcHJlc2VudCBhdCB0aGUgM+KAmSB0ZXJtaW5hbCBzaGFsbCBiZSBzcGVjaWZpZWQgYmFzZWQgb24gYSBjb250cm9sbGVkIHZvY2FidWxhcnkuIFNpbmNlIHRoZSBzZXF1ZW5jZSBpcyByZXByZXNlbnRlZCBmcm9tIHRoZSA1JyB0byB0aGUgMycgZW5kLCB0aGUgNeKAmSBwcmltZSBudWNsZW90aWRlIGlzIHRoZSBsZXR0ZXIgYXQgdGhlIGxhc3QgcG9zaXRpb24gaW4gdGhlIHNlcXVlbmNlLiBBIHNlcGFyYXRlIHJlcHJlc2VudGF0aW9uIHdvdWxkIGJlIHJlZHVuZGFudC5cclxuICAgKi9cclxuICBwdWJsaWMgdGhyZWVQcmltZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbGlua2FnZXMgYmV0d2VlbiBzdWdhciByZXNpZHVlcyB3aWxsIGFsc28gYmUgY2FwdHVyZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGxpbmthZ2U6IGZoaXIuU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0TGlua2FnZVtdO1xyXG4gIC8qKlxyXG4gICAqIDUuMy42LjguMSBTdWdhciBJRCAoTWFuZGF0b3J5KS5cclxuICAgKi9cclxuICBwdWJsaWMgc3VnYXI6IGZoaXIuU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0U3VnYXJbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXQgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXRBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnc3VidW5pdCddKSB7IHRoaXMuc3VidW5pdCA9IG5ldyBmaGlyLkZoaXJJbnRlZ2VyKHt2YWx1ZTogc291cmNlLnN1YnVuaXR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3N1YnVuaXQnXSkge1xyXG4gICAgICBpZiAodGhpcy5zdWJ1bml0KSB7IHRoaXMuc3VidW5pdC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zdWJ1bml0ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3VidW5pdCA9IG5ldyBmaGlyLkZoaXJJbnRlZ2VyKHNvdXJjZS5fc3VidW5pdCBhcyBQYXJ0aWFsPGZoaXIuRmhpckludGVnZXJBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3NlcXVlbmNlJ10pIHsgdGhpcy5zZXF1ZW5jZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2Uuc2VxdWVuY2V9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3NlcXVlbmNlJ10pIHtcclxuICAgICAgaWYgKHRoaXMuc2VxdWVuY2UpIHsgdGhpcy5zZXF1ZW5jZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zZXF1ZW5jZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnNlcXVlbmNlID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3NlcXVlbmNlIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydsZW5ndGgnXSkgeyB0aGlzLmxlbmd0aCA9IG5ldyBmaGlyLkZoaXJJbnRlZ2VyKHt2YWx1ZTogc291cmNlLmxlbmd0aH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfbGVuZ3RoJ10pIHtcclxuICAgICAgaWYgKHRoaXMubGVuZ3RoKSB7IHRoaXMubGVuZ3RoLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2xlbmd0aCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmxlbmd0aCA9IG5ldyBmaGlyLkZoaXJJbnRlZ2VyKHNvdXJjZS5fbGVuZ3RoIGFzIFBhcnRpYWw8Zmhpci5GaGlySW50ZWdlckFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2VxdWVuY2VBdHRhY2htZW50J10pIHsgdGhpcy5zZXF1ZW5jZUF0dGFjaG1lbnQgPSBuZXcgZmhpci5BdHRhY2htZW50KHNvdXJjZS5zZXF1ZW5jZUF0dGFjaG1lbnQpOyB9XHJcbiAgICBpZiAoc291cmNlWydmaXZlUHJpbWUnXSkgeyB0aGlzLmZpdmVQcmltZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuZml2ZVByaW1lKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndGhyZWVQcmltZSddKSB7IHRoaXMudGhyZWVQcmltZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UudGhyZWVQcmltZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2xpbmthZ2UnXSkgeyB0aGlzLmxpbmthZ2UgPSBzb3VyY2UubGlua2FnZS5tYXAoKHgpID0+IG5ldyBmaGlyLlN1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdExpbmthZ2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5saW5rYWdlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3N1Z2FyJ10pIHsgdGhpcy5zdWdhciA9IHNvdXJjZS5zdWdhci5tYXAoKHgpID0+IG5ldyBmaGlyLlN1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdFN1Z2FyKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3VnYXIgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdTdWJzdGFuY2VOdWNsZWljQWNpZC5zdWJ1bml0JyB9XHJcbiAgICBpZiAodGhpc1tcInN1YnVuaXRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5zdWJ1bml0LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5zdWJ1bml0JykpOyB9XHJcbiAgICBpZiAodGhpc1tcInNlcXVlbmNlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc2VxdWVuY2UuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLnNlcXVlbmNlJykpOyB9XHJcbiAgICBpZiAodGhpc1tcImxlbmd0aFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmxlbmd0aC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycubGVuZ3RoJykpOyB9XHJcbiAgICBpZiAodGhpc1tcInNlcXVlbmNlQXR0YWNobWVudFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnNlcXVlbmNlQXR0YWNobWVudC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuc2VxdWVuY2VBdHRhY2htZW50JykpOyB9XHJcbiAgICBpZiAodGhpc1tcImZpdmVQcmltZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmZpdmVQcmltZS5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuZml2ZVByaW1lJykpOyB9XHJcbiAgICBpZiAodGhpc1tcInRocmVlUHJpbWVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy50aHJlZVByaW1lLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy50aHJlZVByaW1lJykpOyB9XHJcbiAgICBpZiAodGhpc1tcImxpbmthZ2VcIl0pIHsgdGhpcy5saW5rYWdlLmZvckVhY2goKHgsaSkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rYC5saW5rYWdlWyR7aX1dYCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcInN1Z2FyXCJdKSB7IHRoaXMuc3VnYXIuZm9yRWFjaCgoeCxpKSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbitgLnN1Z2FyWyR7aX1dYCkpOyB9KSB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgU3Vic3RhbmNlTnVjbGVpY0FjaWQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3Vic3RhbmNlTnVjbGVpY0FjaWRBcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJTdWJzdGFuY2VOdWNsZWljQWNpZFwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdHlwZSBvZiB0aGUgc2VxdWVuY2Ugc2hhbGwgYmUgc3BlY2lmaWVkIGJhc2VkIG9uIGEgY29udHJvbGxlZCB2b2NhYnVsYXJ5LlxyXG4gICAqL1xyXG4gIHNlcXVlbmNlVHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG51bWJlciBvZiBsaW5lYXIgc2VxdWVuY2VzIG9mIG51Y2xlb3RpZGVzIGxpbmtlZCB0aHJvdWdoIHBob3NwaG9kaWVzdGVyIGJvbmRzIHNoYWxsIGJlIGRlc2NyaWJlZC4gU3VidW5pdHMgd291bGQgYmUgc3RyYW5kcyBvZiBudWNsZWljIGFjaWRzIHRoYXQgYXJlIHRpZ2h0bHkgYXNzb2NpYXRlZCB0eXBpY2FsbHkgdGhyb3VnaCBXYXRzb24tQ3JpY2sgYmFzZSBwYWlyaW5nLiBOT1RFOiBJZiBub3Qgc3BlY2lmaWVkIGluIHRoZSByZWZlcmVuY2Ugc291cmNlLCB0aGUgYXNzdW1wdGlvbiBpcyB0aGF0IHRoZXJlIGlzIDEgc3VidW5pdC5cclxuICAgKi9cclxuICBudW1iZXJPZlN1YnVuaXRzPzogZmhpci5GaGlySW50ZWdlcnxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTdWJzdGFuY2VOdWNsZWljQWNpZC5udW1iZXJPZlN1YnVuaXRzXHJcbiAgICovXHJcbiAgX251bWJlck9mU3VidW5pdHM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBhcmVhIG9mIGh5YnJpZGlzYXRpb24gc2hhbGwgYmUgZGVzY3JpYmVkIGlmIGFwcGxpY2FibGUgZm9yIGRvdWJsZSBzdHJhbmRlZCBSTkEgb3IgRE5BLiBUaGUgbnVtYmVyIGFzc29jaWF0ZWQgd2l0aCB0aGUgc3VidW5pdCBmb2xsb3dlZCBieSB0aGUgbnVtYmVyIGFzc29jaWF0ZWQgdG8gdGhlIHJlc2lkdWUgc2hhbGwgYmUgc3BlY2lmaWVkIGluIGluY3JlYXNpbmcgb3JkZXIuIFRoZSB1bmRlcnNjb3JlIOKAnOKAnSBzaGFsbCBiZSB1c2VkIGFzIHNlcGFyYXRvciBhcyBmb2xsb3dzOiDigJxTdWJ1bml0bnVtYmVyIFJlc2lkdWXigJ0uXHJcbiAgICovXHJcbiAgYXJlYU9mSHlicmlkaXNhdGlvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTdWJzdGFuY2VOdWNsZWljQWNpZC5hcmVhT2ZIeWJyaWRpc2F0aW9uXHJcbiAgICovXHJcbiAgX2FyZWFPZkh5YnJpZGlzYXRpb24/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIChUQkMpLlxyXG4gICAqL1xyXG4gIG9saWdvTnVjbGVvdGlkZVR5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFN1YnVuaXRzIGFyZSBsaXN0ZWQgaW4gb3JkZXIgb2YgZGVjcmVhc2luZyBsZW5ndGg7IHNlcXVlbmNlcyBvZiB0aGUgc2FtZSBsZW5ndGggd2lsbCBiZSBvcmRlcmVkIGJ5IG1vbGVjdWxhciB3ZWlnaHQ7IHN1YnVuaXRzIHRoYXQgaGF2ZSBpZGVudGljYWwgc2VxdWVuY2VzIHdpbGwgYmUgcmVwZWF0ZWQgbXVsdGlwbGUgdGltZXMuXHJcbiAgICovXHJcbiAgc3VidW5pdD86IGZoaXIuU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0QXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIE51Y2xlaWMgYWNpZHMgYXJlIGRlZmluZWQgYnkgdGhyZWUgZGlzdGluY3QgZWxlbWVudHM6IHRoZSBiYXNlLCBzdWdhciBhbmQgbGlua2FnZS4gSW5kaXZpZHVhbCBzdWJzdGFuY2UvbW9pZXR5IElEcyB3aWxsIGJlIGNyZWF0ZWQgZm9yIGVhY2ggb2YgdGhlc2UgZWxlbWVudHMuIFRoZSBudWNsZW90aWRlIHNlcXVlbmNlIHdpbGwgYmUgYWx3YXlzIGVudGVyZWQgaW4gdGhlIDXigJktM+KAmSBkaXJlY3Rpb24uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3Vic3RhbmNlTnVjbGVpY0FjaWQgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1N1YnN0YW5jZU51Y2xlaWNBY2lkJztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIlN1YnN0YW5jZU51Y2xlaWNBY2lkXCI7XHJcbiAgLyoqXHJcbiAgICogVGhlIHR5cGUgb2YgdGhlIHNlcXVlbmNlIHNoYWxsIGJlIHNwZWNpZmllZCBiYXNlZCBvbiBhIGNvbnRyb2xsZWQgdm9jYWJ1bGFyeS5cclxuICAgKi9cclxuICBwdWJsaWMgc2VxdWVuY2VUeXBlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBudW1iZXIgb2YgbGluZWFyIHNlcXVlbmNlcyBvZiBudWNsZW90aWRlcyBsaW5rZWQgdGhyb3VnaCBwaG9zcGhvZGllc3RlciBib25kcyBzaGFsbCBiZSBkZXNjcmliZWQuIFN1YnVuaXRzIHdvdWxkIGJlIHN0cmFuZHMgb2YgbnVjbGVpYyBhY2lkcyB0aGF0IGFyZSB0aWdodGx5IGFzc29jaWF0ZWQgdHlwaWNhbGx5IHRocm91Z2ggV2F0c29uLUNyaWNrIGJhc2UgcGFpcmluZy4gTk9URTogSWYgbm90IHNwZWNpZmllZCBpbiB0aGUgcmVmZXJlbmNlIHNvdXJjZSwgdGhlIGFzc3VtcHRpb24gaXMgdGhhdCB0aGVyZSBpcyAxIHN1YnVuaXQuXHJcbiAgICovXHJcbiAgcHVibGljIG51bWJlck9mU3VidW5pdHM/OiBmaGlyLkZoaXJJbnRlZ2VyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgYXJlYSBvZiBoeWJyaWRpc2F0aW9uIHNoYWxsIGJlIGRlc2NyaWJlZCBpZiBhcHBsaWNhYmxlIGZvciBkb3VibGUgc3RyYW5kZWQgUk5BIG9yIEROQS4gVGhlIG51bWJlciBhc3NvY2lhdGVkIHdpdGggdGhlIHN1YnVuaXQgZm9sbG93ZWQgYnkgdGhlIG51bWJlciBhc3NvY2lhdGVkIHRvIHRoZSByZXNpZHVlIHNoYWxsIGJlIHNwZWNpZmllZCBpbiBpbmNyZWFzaW5nIG9yZGVyLiBUaGUgdW5kZXJzY29yZSDigJzigJ0gc2hhbGwgYmUgdXNlZCBhcyBzZXBhcmF0b3IgYXMgZm9sbG93czog4oCcU3VidW5pdG51bWJlciBSZXNpZHVl4oCdLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhcmVhT2ZIeWJyaWRpc2F0aW9uPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiAoVEJDKS5cclxuICAgKi9cclxuICBwdWJsaWMgb2xpZ29OdWNsZW90aWRlVHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTdWJ1bml0cyBhcmUgbGlzdGVkIGluIG9yZGVyIG9mIGRlY3JlYXNpbmcgbGVuZ3RoOyBzZXF1ZW5jZXMgb2YgdGhlIHNhbWUgbGVuZ3RoIHdpbGwgYmUgb3JkZXJlZCBieSBtb2xlY3VsYXIgd2VpZ2h0OyBzdWJ1bml0cyB0aGF0IGhhdmUgaWRlbnRpY2FsIHNlcXVlbmNlcyB3aWxsIGJlIHJlcGVhdGVkIG11bHRpcGxlIHRpbWVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdWJ1bml0OiBmaGlyLlN1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdFtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFN1YnN0YW5jZU51Y2xlaWNBY2lkIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8U3Vic3RhbmNlTnVjbGVpY0FjaWRBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnU3Vic3RhbmNlTnVjbGVpY0FjaWQnO1xyXG4gICAgaWYgKHNvdXJjZVsnc2VxdWVuY2VUeXBlJ10pIHsgdGhpcy5zZXF1ZW5jZVR5cGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnNlcXVlbmNlVHlwZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ251bWJlck9mU3VidW5pdHMnXSkgeyB0aGlzLm51bWJlck9mU3VidW5pdHMgPSBuZXcgZmhpci5GaGlySW50ZWdlcih7dmFsdWU6IHNvdXJjZS5udW1iZXJPZlN1YnVuaXRzfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19udW1iZXJPZlN1YnVuaXRzJ10pIHtcclxuICAgICAgaWYgKHRoaXMubnVtYmVyT2ZTdWJ1bml0cykgeyB0aGlzLm51bWJlck9mU3VidW5pdHMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbnVtYmVyT2ZTdWJ1bml0cyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLm51bWJlck9mU3VidW5pdHMgPSBuZXcgZmhpci5GaGlySW50ZWdlcihzb3VyY2UuX251bWJlck9mU3VidW5pdHMgYXMgUGFydGlhbDxmaGlyLkZoaXJJbnRlZ2VyQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydhcmVhT2ZIeWJyaWRpc2F0aW9uJ10pIHsgdGhpcy5hcmVhT2ZIeWJyaWRpc2F0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5hcmVhT2ZIeWJyaWRpc2F0aW9ufSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19hcmVhT2ZIeWJyaWRpc2F0aW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMuYXJlYU9mSHlicmlkaXNhdGlvbikgeyB0aGlzLmFyZWFPZkh5YnJpZGlzYXRpb24uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fYXJlYU9mSHlicmlkaXNhdGlvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmFyZWFPZkh5YnJpZGlzYXRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fYXJlYU9mSHlicmlkaXNhdGlvbiBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnb2xpZ29OdWNsZW90aWRlVHlwZSddKSB7IHRoaXMub2xpZ29OdWNsZW90aWRlVHlwZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2Uub2xpZ29OdWNsZW90aWRlVHlwZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N1YnVuaXQnXSkgeyB0aGlzLnN1YnVuaXQgPSBzb3VyY2Uuc3VidW5pdC5tYXAoKHgpID0+IG5ldyBmaGlyLlN1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN1YnVuaXQgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdTdWJzdGFuY2VOdWNsZWljQWNpZCcgfVxyXG4gICAgaWYgKCF0aGlzWydyZXNvdXJjZVR5cGUnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgcmVzb3VyY2VUeXBlIGZoaXI6IFN1YnN0YW5jZU51Y2xlaWNBY2lkLnJlc291cmNlVHlwZTpcIlN1YnN0YW5jZU51Y2xlaWNBY2lkXCInLCBleHByZXNzaW9uOiBbZXhwcmVzc2lvbl0gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInNlcXVlbmNlVHlwZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnNlcXVlbmNlVHlwZS5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuc2VxdWVuY2VUeXBlJykpOyB9XHJcbiAgICBpZiAodGhpc1tcIm51bWJlck9mU3VidW5pdHNcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5udW1iZXJPZlN1YnVuaXRzLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5udW1iZXJPZlN1YnVuaXRzJykpOyB9XHJcbiAgICBpZiAodGhpc1tcImFyZWFPZkh5YnJpZGlzYXRpb25cIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5hcmVhT2ZIeWJyaWRpc2F0aW9uLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5hcmVhT2ZIeWJyaWRpc2F0aW9uJykpOyB9XHJcbiAgICBpZiAodGhpc1tcIm9saWdvTnVjbGVvdGlkZVR5cGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5vbGlnb051Y2xlb3RpZGVUeXBlLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5vbGlnb051Y2xlb3RpZGVUeXBlJykpOyB9XHJcbiAgICBpZiAodGhpc1tcInN1YnVuaXRcIl0pIHsgdGhpcy5zdWJ1bml0LmZvckVhY2goKHgsaSkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rYC5zdWJ1bml0WyR7aX1dYCkpOyB9KSB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=