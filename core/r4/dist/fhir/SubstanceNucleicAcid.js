// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: SubstanceNucleicAcid
import * as fhir from '../fhir.js';
/**
 * The linkages between sugar residues will also be captured.
 */
export class SubstanceNucleicAcidSubunitLinkage extends fhir.BackboneElement {
    /**
     * Default constructor for SubstanceNucleicAcidSubunitLinkage - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['connectivity']) {
            this.connectivity = new fhir.FhirString({ value: source.connectivity });
        }
        if (source['_connectivity']) {
            if (this.connectivity) {
                this.connectivity.addExtendedProperties(source._connectivity);
            }
            else {
                this.connectivity = new fhir.FhirString(source._connectivity);
            }
        }
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier);
        }
        if (source['name']) {
            this.name = new fhir.FhirString({ value: source.name });
        }
        if (source['_name']) {
            if (this.name) {
                this.name.addExtendedProperties(source._name);
            }
            else {
                this.name = new fhir.FhirString(source._name);
            }
        }
        if (source['residueSite']) {
            this.residueSite = new fhir.FhirString({ value: source.residueSite });
        }
        if (source['_residueSite']) {
            if (this.residueSite) {
                this.residueSite.addExtendedProperties(source._residueSite);
            }
            else {
                this.residueSite = new fhir.FhirString(source._residueSite);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SubstanceNucleicAcid.subunit.linkage';
        }
        iss.push(...this.vOS('connectivity', exp));
        iss.push(...this.vOS('identifier', exp));
        iss.push(...this.vOS('name', exp));
        iss.push(...this.vOS('residueSite', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceNucleicAcidSubunitLinkage._fts_dataType = 'SubstanceNucleicAcidSubunitLinkage';
/**
 * 5.3.6.8.1 Sugar ID (Mandatory).
 */
export class SubstanceNucleicAcidSubunitSugar extends fhir.BackboneElement {
    /**
     * Default constructor for SubstanceNucleicAcidSubunitSugar - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier);
        }
        if (source['name']) {
            this.name = new fhir.FhirString({ value: source.name });
        }
        if (source['_name']) {
            if (this.name) {
                this.name.addExtendedProperties(source._name);
            }
            else {
                this.name = new fhir.FhirString(source._name);
            }
        }
        if (source['residueSite']) {
            this.residueSite = new fhir.FhirString({ value: source.residueSite });
        }
        if (source['_residueSite']) {
            if (this.residueSite) {
                this.residueSite.addExtendedProperties(source._residueSite);
            }
            else {
                this.residueSite = new fhir.FhirString(source._residueSite);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SubstanceNucleicAcid.subunit.sugar';
        }
        iss.push(...this.vOS('identifier', exp));
        iss.push(...this.vOS('name', exp));
        iss.push(...this.vOS('residueSite', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceNucleicAcidSubunitSugar._fts_dataType = 'SubstanceNucleicAcidSubunitSugar';
/**
 * Subunits are listed in order of decreasing length; sequences of the same length will be ordered by molecular weight; subunits that have identical sequences will be repeated multiple times.
 */
export class SubstanceNucleicAcidSubunit extends fhir.BackboneElement {
    /**
     * Default constructor for SubstanceNucleicAcidSubunit - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['subunit']) {
            this.subunit = new fhir.FhirInteger({ value: source.subunit });
        }
        if (source['_subunit']) {
            if (this.subunit) {
                this.subunit.addExtendedProperties(source._subunit);
            }
            else {
                this.subunit = new fhir.FhirInteger(source._subunit);
            }
        }
        if (source['sequence']) {
            this.sequence = new fhir.FhirString({ value: source.sequence });
        }
        if (source['_sequence']) {
            if (this.sequence) {
                this.sequence.addExtendedProperties(source._sequence);
            }
            else {
                this.sequence = new fhir.FhirString(source._sequence);
            }
        }
        if (source['length']) {
            this.length = new fhir.FhirInteger({ value: source.length });
        }
        if (source['_length']) {
            if (this.length) {
                this.length.addExtendedProperties(source._length);
            }
            else {
                this.length = new fhir.FhirInteger(source._length);
            }
        }
        if (source['sequenceAttachment']) {
            this.sequenceAttachment = new fhir.Attachment(source.sequenceAttachment);
        }
        if (source['fivePrime']) {
            this.fivePrime = new fhir.CodeableConcept(source.fivePrime);
        }
        if (source['threePrime']) {
            this.threePrime = new fhir.CodeableConcept(source.threePrime);
        }
        if (source['linkage']) {
            this.linkage = source.linkage.map((x) => new fhir.SubstanceNucleicAcidSubunitLinkage(x));
        }
        else {
            this.linkage = [];
        }
        if (source['sugar']) {
            this.sugar = source.sugar.map((x) => new fhir.SubstanceNucleicAcidSubunitSugar(x));
        }
        else {
            this.sugar = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SubstanceNucleicAcid.subunit';
        }
        iss.push(...this.vOS('subunit', exp));
        iss.push(...this.vOS('sequence', exp));
        iss.push(...this.vOS('length', exp));
        iss.push(...this.vOS('sequenceAttachment', exp));
        iss.push(...this.vOS('fivePrime', exp));
        iss.push(...this.vOS('threePrime', exp));
        iss.push(...this.vOA('linkage', exp));
        iss.push(...this.vOA('sugar', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceNucleicAcidSubunit._fts_dataType = 'SubstanceNucleicAcidSubunit';
/**
 * Nucleic acids are defined by three distinct elements: the base, sugar and linkage. Individual substance/moiety IDs will be created for each of these elements. The nucleotide sequence will be always entered in the 5’-3’ direction.
 */
export class SubstanceNucleicAcid extends fhir.DomainResource {
    /**
     * Default constructor for SubstanceNucleicAcid - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'SubstanceNucleicAcid';
        if (source['sequenceType']) {
            this.sequenceType = new fhir.CodeableConcept(source.sequenceType);
        }
        if (source['numberOfSubunits']) {
            this.numberOfSubunits = new fhir.FhirInteger({ value: source.numberOfSubunits });
        }
        if (source['_numberOfSubunits']) {
            if (this.numberOfSubunits) {
                this.numberOfSubunits.addExtendedProperties(source._numberOfSubunits);
            }
            else {
                this.numberOfSubunits = new fhir.FhirInteger(source._numberOfSubunits);
            }
        }
        if (source['areaOfHybridisation']) {
            this.areaOfHybridisation = new fhir.FhirString({ value: source.areaOfHybridisation });
        }
        if (source['_areaOfHybridisation']) {
            if (this.areaOfHybridisation) {
                this.areaOfHybridisation.addExtendedProperties(source._areaOfHybridisation);
            }
            else {
                this.areaOfHybridisation = new fhir.FhirString(source._areaOfHybridisation);
            }
        }
        if (source['oligoNucleotideType']) {
            this.oligoNucleotideType = new fhir.CodeableConcept(source.oligoNucleotideType);
        }
        if (source['subunit']) {
            this.subunit = source.subunit.map((x) => new fhir.SubstanceNucleicAcidSubunit(x));
        }
        else {
            this.subunit = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SubstanceNucleicAcid';
        }
        iss.push(...this.vRPS('resourceType', exp));
        iss.push(...this.vOS('sequenceType', exp));
        iss.push(...this.vOS('numberOfSubunits', exp));
        iss.push(...this.vOS('areaOfHybridisation', exp));
        iss.push(...this.vOS('oligoNucleotideType', exp));
        iss.push(...this.vOA('subunit', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceNucleicAcid._fts_dataType = 'SubstanceNucleicAcid';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3Vic3RhbmNlTnVjbGVpY0FjaWQuanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL1N1YnN0YW5jZU51Y2xlaWNBY2lkLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQiwrQ0FBK0M7QUFDL0Msa0NBQWtDO0FBQ2xDLHNDQUFzQztBQUV0QyxPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQW9DbkM7O0dBRUc7QUFDSCxNQUFNLE9BQU8sa0NBQW1DLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFxQjFFOztPQUVHO0lBQ0gsWUFBWSxTQUF5RCxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUMvRyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLGNBQWMsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLFlBQVksRUFBQyxDQUFDLENBQUM7U0FBRTtRQUN0RyxJQUFJLE1BQU0sQ0FBQyxlQUFlLENBQUMsRUFBRTtZQUMzQixJQUFJLElBQUksQ0FBQyxZQUFZLEVBQUU7Z0JBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsYUFBYyxDQUFDLENBQUM7YUFBRTtpQkFDckY7Z0JBQUUsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLGFBQTZDLENBQUMsQ0FBQzthQUFFO1NBQ3hHO1FBQ0QsSUFBSSxNQUFNLENBQUMsWUFBWSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUM7U0FBRTtRQUN2RixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJ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c0IsQ0FBQTtTQUFFO1FBQ2hELEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzNDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGtCQUFrQixFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDOUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMscUJBQXFCLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNqRCxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ2pELEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3JDLE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQzs7QUE5REQ7O0dBRUc7QUFDNkIsa0NBQWEsR0FBVSxzQkFBc0IsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNC5jb3JlIHZlcnNpb246IDQuMC4xXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogU3Vic3RhbmNlTnVjbGVpY0FjaWRcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0TGlua2FnZSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXRMaW5rYWdlQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIGVudGl0eSB0aGF0IGxpbmtzIHRoZSBzdWdhciByZXNpZHVlcyB0b2dldGhlciBzaG91bGQgYWxzbyBiZSBjYXB0dXJlZCBmb3IgbmVhcmx5IGFsbCBuYXR1cmFsbHkgb2NjdXJyaW5nIG51Y2xlaWMgYWNpZCB0aGUgbGlua2FnZSBpcyBhIHBob3NwaGF0ZSBncm91cC4gRm9yIG1hbnkgc3ludGhldGljIG9saWdvbnVjbGVvdGlkZXMgcGhvc3Bob3JvdGhpb2F0ZSBsaW5rYWdlcyBhcmUgb2Z0ZW4gc2Vlbi4gTGlua2FnZSBjb25uZWN0aXZpdHkgaXMgYXNzdW1lZCB0byBiZSAz4oCZLTXigJkuIElmIHRoZSBsaW5rYWdlIGlzIGVpdGhlciAz4oCZLTPigJkgb3IgNeKAmS014oCZIHRoaXMgc2hvdWxkIGJlIHNwZWNpZmllZC5cclxuICAgKi9cclxuICBjb25uZWN0aXZpdHk/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3Vic3RhbmNlTnVjbGVpY0FjaWQuc3VidW5pdC5saW5rYWdlLmNvbm5lY3Rpdml0eVxyXG4gICAqL1xyXG4gIF9jb25uZWN0aXZpdHk/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEVhY2ggbGlua2FnZSB3aWxsIGJlIHJlZ2lzdGVyZWQgYXMgYSBmcmFnbWVudCBhbmQgaGF2ZSBhbiBJRC5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRWFjaCBsaW5rYWdlIHdpbGwgYmUgcmVnaXN0ZXJlZCBhcyBhIGZyYWdtZW50IGFuZCBoYXZlIGF0IGxlYXN0IG9uZSBuYW1lLiBBIHNpbmdsZSBuYW1lIHNoYWxsIGJlIGFzc2lnbmVkIHRvIGVhY2ggbGlua2FnZS5cclxuICAgKi9cclxuICBuYW1lPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFN1YnN0YW5jZU51Y2xlaWNBY2lkLnN1YnVuaXQubGlua2FnZS5uYW1lXHJcbiAgICovXHJcbiAgX25hbWU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFJlc2lkdWVzIHNoYWxsIGJlIGNhcHR1cmVkIGFzIGRlc2NyaWJlZCBpbiA1LjMuNi44LjMuXHJcbiAgICovXHJcbiAgcmVzaWR1ZVNpdGU/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3Vic3RhbmNlTnVjbGVpY0FjaWQuc3VidW5pdC5saW5rYWdlLnJlc2lkdWVTaXRlXHJcbiAgICovXHJcbiAgX3Jlc2lkdWVTaXRlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBsaW5rYWdlcyBiZXR3ZWVuIHN1Z2FyIHJlc2lkdWVzIHdpbGwgYWxzbyBiZSBjYXB0dXJlZC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXRMaW5rYWdlIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0TGlua2FnZSc7XHJcbiAgLyoqXHJcbiAgICogVGhlIGVudGl0eSB0aGF0IGxpbmtzIHRoZSBzdWdhciByZXNpZHVlcyB0b2dldGhlciBzaG91bGQgYWxzbyBiZSBjYXB0dXJlZCBmb3IgbmVhcmx5IGFsbCBuYXR1cmFsbHkgb2NjdXJyaW5nIG51Y2xlaWMgYWNpZCB0aGUgbGlua2FnZSBpcyBhIHBob3NwaGF0ZSBncm91cC4gRm9yIG1hbnkgc3ludGhldGljIG9saWdvbnVjbGVvdGlkZXMgcGhvc3Bob3JvdGhpb2F0ZSBsaW5rYWdlcyBhcmUgb2Z0ZW4gc2Vlbi4gTGlua2FnZSBjb25uZWN0aXZpdHkgaXMgYXNzdW1lZCB0byBiZSAz4oCZLTXigJkuIElmIHRoZSBsaW5rYWdlIGlzIGVpdGhlciAz4oCZLTPigJkgb3IgNeKAmS014oCZIHRoaXMgc2hvdWxkIGJlIHNwZWNpZmllZC5cclxuICAgKi9cclxuICBwdWJsaWMgY29ubmVjdGl2aXR5PzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFYWNoIGxpbmthZ2Ugd2lsbCBiZSByZWdpc3RlcmVkIGFzIGEgZnJhZ21lbnQgYW5kIGhhdmUgYW4gSUQuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEVhY2ggbGlua2FnZSB3aWxsIGJlIHJlZ2lzdGVyZWQgYXMgYSBmcmFnbWVudCBhbmQgaGF2ZSBhdCBsZWFzdCBvbmUgbmFtZS4gQSBzaW5nbGUgbmFtZSBzaGFsbCBiZSBhc3NpZ25lZCB0byBlYWNoIGxpbmthZ2UuXHJcbiAgICovXHJcbiAgcHVibGljIG5hbWU/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFJlc2lkdWVzIHNoYWxsIGJlIGNhcHR1cmVkIGFzIGRlc2NyaWJlZCBpbiA1LjMuNi44LjMuXHJcbiAgICovXHJcbiAgcHVibGljIHJlc2lkdWVTaXRlPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXRMaW5rYWdlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8U3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0TGlua2FnZUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydjb25uZWN0aXZpdHknXSkgeyB0aGlzLmNvbm5lY3Rpdml0eSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuY29ubmVjdGl2aXR5fSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19jb25uZWN0aXZpdHknXSkge1xyXG4gICAgICBpZiAodGhpcy5jb25uZWN0aXZpdHkpIHsgdGhpcy5jb25uZWN0aXZpdHkuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fY29ubmVjdGl2aXR5ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuY29ubmVjdGl2aXR5ID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2Nvbm5lY3Rpdml0eSBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IG5ldyBmaGlyLklkZW50aWZpZXIoc291cmNlLmlkZW50aWZpZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWyduYW1lJ10pIHsgdGhpcy5uYW1lID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5uYW1lfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19uYW1lJ10pIHtcclxuICAgICAgaWYgKHRoaXMubmFtZSkgeyB0aGlzLm5hbWUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbmFtZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLm5hbWUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fbmFtZSBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVzaWR1ZVNpdGUnXSkgeyB0aGlzLnJlc2lkdWVTaXRlID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5yZXNpZHVlU2l0ZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfcmVzaWR1ZVNpdGUnXSkge1xyXG4gICAgICBpZiAodGhpcy5yZXNpZHVlU2l0ZSkgeyB0aGlzLnJlc2lkdWVTaXRlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3Jlc2lkdWVTaXRlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMucmVzaWR1ZVNpdGUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fcmVzaWR1ZVNpdGUgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdTdWJzdGFuY2VOdWNsZWljQWNpZC5zdWJ1bml0LmxpbmthZ2UnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdjb25uZWN0aXZpdHknLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2lkZW50aWZpZXInLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ25hbWUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3Jlc2lkdWVTaXRlJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXRTdWdhciB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXRTdWdhckFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBTdWJzdGFuY2UgSUQgb2YgdGhlIHN1Z2FyIG9yIHN1Z2FyLWxpa2UgY29tcG9uZW50IHRoYXQgbWFrZSB1cCB0aGUgbnVjbGVvdGlkZS5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG5hbWUgb2YgdGhlIHN1Z2FyIG9yIHN1Z2FyLWxpa2UgY29tcG9uZW50IHRoYXQgbWFrZSB1cCB0aGUgbnVjbGVvdGlkZS5cclxuICAgKi9cclxuICBuYW1lPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFN1YnN0YW5jZU51Y2xlaWNBY2lkLnN1YnVuaXQuc3VnYXIubmFtZVxyXG4gICAqL1xyXG4gIF9uYW1lPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgcmVzaWR1ZXMgdGhhdCBjb250YWluIGEgZ2l2ZW4gc3VnYXIgd2lsbCBiZSBjYXB0dXJlZC4gVGhlIG9yZGVyIG9mIGdpdmVuIHJlc2lkdWVzIHdpbGwgYmUgY2FwdHVyZWQgaW4gdGhlIDXigJgtM+KAmGRpcmVjdGlvbiBjb25zaXN0ZW50IHdpdGggdGhlIGJhc2Ugc2VxdWVuY2VzIGxpc3RlZCBhYm92ZS5cclxuICAgKi9cclxuICByZXNpZHVlU2l0ZT86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTdWJzdGFuY2VOdWNsZWljQWNpZC5zdWJ1bml0LnN1Z2FyLnJlc2lkdWVTaXRlXHJcbiAgICovXHJcbiAgX3Jlc2lkdWVTaXRlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIDUuMy42LjguMSBTdWdhciBJRCAoTWFuZGF0b3J5KS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXRTdWdhciBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1N1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdFN1Z2FyJztcclxuICAvKipcclxuICAgKiBUaGUgU3Vic3RhbmNlIElEIG9mIHRoZSBzdWdhciBvciBzdWdhci1saWtlIGNvbXBvbmVudCB0aGF0IG1ha2UgdXAgdGhlIG51Y2xlb3RpZGUuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBzdWdhciBvciBzdWdhci1saWtlIGNvbXBvbmVudCB0aGF0IG1ha2UgdXAgdGhlIG51Y2xlb3RpZGUuXHJcbiAgICovXHJcbiAgcHVibGljIG5hbWU/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZXNpZHVlcyB0aGF0IGNvbnRhaW4gYSBnaXZlbiBzdWdhciB3aWxsIGJlIGNhcHR1cmVkLiBUaGUgb3JkZXIgb2YgZ2l2ZW4gcmVzaWR1ZXMgd2lsbCBiZSBjYXB0dXJlZCBpbiB0aGUgNeKAmC0z4oCYZGlyZWN0aW9uIGNvbnNpc3RlbnQgd2l0aCB0aGUgYmFzZSBzZXF1ZW5jZXMgbGlzdGVkIGFib3ZlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZXNpZHVlU2l0ZT86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0U3VnYXIgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXRTdWdhckFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gbmV3IGZoaXIuSWRlbnRpZmllcihzb3VyY2UuaWRlbnRpZmllcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ25hbWUnXSkgeyB0aGlzLm5hbWUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLm5hbWV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX25hbWUnXSkge1xyXG4gICAgICBpZiAodGhpcy5uYW1lKSB7IHRoaXMubmFtZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9uYW1lISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubmFtZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9uYW1lIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydyZXNpZHVlU2l0ZSddKSB7IHRoaXMucmVzaWR1ZVNpdGUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnJlc2lkdWVTaXRlfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19yZXNpZHVlU2l0ZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnJlc2lkdWVTaXRlKSB7IHRoaXMucmVzaWR1ZVNpdGUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fcmVzaWR1ZVNpdGUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5yZXNpZHVlU2l0ZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9yZXNpZHVlU2l0ZSBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ1N1YnN0YW5jZU51Y2xlaWNBY2lkLnN1YnVuaXQuc3VnYXInIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdpZGVudGlmaWVyJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCduYW1lJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdyZXNpZHVlU2l0ZScsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFN1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEluZGV4IG9mIGxpbmVhciBzZXF1ZW5jZXMgb2YgbnVjbGVpYyBhY2lkcyBpbiBvcmRlciBvZiBkZWNyZWFzaW5nIGxlbmd0aC4gU2VxdWVuY2VzIG9mIHRoZSBzYW1lIGxlbmd0aCB3aWxsIGJlIG9yZGVyZWQgYnkgbW9sZWN1bGFyIHdlaWdodC4gU3VidW5pdHMgdGhhdCBoYXZlIGlkZW50aWNhbCBzZXF1ZW5jZXMgd2lsbCBiZSByZXBlYXRlZCBhbmQgaGF2ZSBzZXF1ZW50aWFsIHN1YnNjcmlwdHMuXHJcbiAgICovXHJcbiAgc3VidW5pdD86IGZoaXIuRmhpckludGVnZXJ8bnVtYmVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3Vic3RhbmNlTnVjbGVpY0FjaWQuc3VidW5pdC5zdWJ1bml0XHJcbiAgICovXHJcbiAgX3N1YnVuaXQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEFjdHVhbCBudWNsZW90aWRlIHNlcXVlbmNlIG5vdGF0aW9uIGZyb20gNScgdG8gMycgZW5kIHVzaW5nIHN0YW5kYXJkIHNpbmdsZSBsZXR0ZXIgY29kZXMuIEluIGFkZGl0aW9uIHRvIHRoZSBiYXNlIHNlcXVlbmNlLCBzdWdhciBhbmQgdHlwZSBvZiBwaG9zcGhhdGUgb3Igbm9uLXBob3NwaGF0ZSBsaW5rYWdlIHNob3VsZCBhbHNvIGJlIGNhcHR1cmVkLlxyXG4gICAqL1xyXG4gIHNlcXVlbmNlPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFN1YnN0YW5jZU51Y2xlaWNBY2lkLnN1YnVuaXQuc2VxdWVuY2VcclxuICAgKi9cclxuICBfc2VxdWVuY2U/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsZW5ndGggb2YgdGhlIHNlcXVlbmNlIHNoYWxsIGJlIGNhcHR1cmVkLlxyXG4gICAqL1xyXG4gIGxlbmd0aD86IGZoaXIuRmhpckludGVnZXJ8bnVtYmVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3Vic3RhbmNlTnVjbGVpY0FjaWQuc3VidW5pdC5sZW5ndGhcclxuICAgKi9cclxuICBfbGVuZ3RoPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiAoVEJDKS5cclxuICAgKi9cclxuICBzZXF1ZW5jZUF0dGFjaG1lbnQ/OiBmaGlyLkF0dGFjaG1lbnRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbnVjbGVvdGlkZSBwcmVzZW50IGF0IHRoZSA14oCZIHRlcm1pbmFsIHNoYWxsIGJlIHNwZWNpZmllZCBiYXNlZCBvbiBhIGNvbnRyb2xsZWQgdm9jYWJ1bGFyeS4gU2luY2UgdGhlIHNlcXVlbmNlIGlzIHJlcHJlc2VudGVkIGZyb20gdGhlIDUnIHRvIHRoZSAzJyBlbmQsIHRoZSA14oCZIHByaW1lIG51Y2xlb3RpZGUgaXMgdGhlIGxldHRlciBhdCB0aGUgZmlyc3QgcG9zaXRpb24gaW4gdGhlIHNlcXVlbmNlLiBBIHNlcGFyYXRlIHJlcHJlc2VudGF0aW9uIHdvdWxkIGJlIHJlZHVuZGFudC5cclxuICAgKi9cclxuICBmaXZlUHJpbWU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBudWNsZW90aWRlIHByZXNlbnQgYXQgdGhlIDPigJkgdGVybWluYWwgc2hhbGwgYmUgc3BlY2lmaWVkIGJhc2VkIG9uIGEgY29udHJvbGxlZCB2b2NhYnVsYXJ5LiBTaW5jZSB0aGUgc2VxdWVuY2UgaXMgcmVwcmVzZW50ZWQgZnJvbSB0aGUgNScgdG8gdGhlIDMnIGVuZCwgdGhlIDXigJkgcHJpbWUgbnVjbGVvdGlkZSBpcyB0aGUgbGV0dGVyIGF0IHRoZSBsYXN0IHBvc2l0aW9uIGluIHRoZSBzZXF1ZW5jZS4gQSBzZXBhcmF0ZSByZXByZXNlbnRhdGlvbiB3b3VsZCBiZSByZWR1bmRhbnQuXHJcbiAgICovXHJcbiAgdGhyZWVQcmltZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGxpbmthZ2VzIGJldHdlZW4gc3VnYXIgcmVzaWR1ZXMgd2lsbCBhbHNvIGJlIGNhcHR1cmVkLlxyXG4gICAqL1xyXG4gIGxpbmthZ2U/OiBmaGlyLlN1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdExpbmthZ2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIDUuMy42LjguMSBTdWdhciBJRCAoTWFuZGF0b3J5KS5cclxuICAgKi9cclxuICBzdWdhcj86IGZoaXIuU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0U3VnYXJBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogU3VidW5pdHMgYXJlIGxpc3RlZCBpbiBvcmRlciBvZiBkZWNyZWFzaW5nIGxlbmd0aDsgc2VxdWVuY2VzIG9mIHRoZSBzYW1lIGxlbmd0aCB3aWxsIGJlIG9yZGVyZWQgYnkgbW9sZWN1bGFyIHdlaWdodDsgc3VidW5pdHMgdGhhdCBoYXZlIGlkZW50aWNhbCBzZXF1ZW5jZXMgd2lsbCBiZSByZXBlYXRlZCBtdWx0aXBsZSB0aW1lcy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXQgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXQnO1xyXG4gIC8qKlxyXG4gICAqIEluZGV4IG9mIGxpbmVhciBzZXF1ZW5jZXMgb2YgbnVjbGVpYyBhY2lkcyBpbiBvcmRlciBvZiBkZWNyZWFzaW5nIGxlbmd0aC4gU2VxdWVuY2VzIG9mIHRoZSBzYW1lIGxlbmd0aCB3aWxsIGJlIG9yZGVyZWQgYnkgbW9sZWN1bGFyIHdlaWdodC4gU3VidW5pdHMgdGhhdCBoYXZlIGlkZW50aWNhbCBzZXF1ZW5jZXMgd2lsbCBiZSByZXBlYXRlZCBhbmQgaGF2ZSBzZXF1ZW50aWFsIHN1YnNjcmlwdHMuXHJcbiAgICovXHJcbiAgcHVibGljIHN1YnVuaXQ/OiBmaGlyLkZoaXJJbnRlZ2VyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBY3R1YWwgbnVjbGVvdGlkZSBzZXF1ZW5jZSBub3RhdGlvbiBmcm9tIDUnIHRvIDMnIGVuZCB1c2luZyBzdGFuZGFyZCBzaW5nbGUgbGV0dGVyIGNvZGVzLiBJbiBhZGRpdGlvbiB0byB0aGUgYmFzZSBzZXF1ZW5jZSwgc3VnYXIgYW5kIHR5cGUgb2YgcGhvc3BoYXRlIG9yIG5vbi1waG9zcGhhdGUgbGlua2FnZSBzaG91bGQgYWxzbyBiZSBjYXB0dXJlZC5cclxuICAgKi9cclxuICBwdWJsaWMgc2VxdWVuY2U/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsZW5ndGggb2YgdGhlIHNlcXVlbmNlIHNoYWxsIGJlIGNhcHR1cmVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBsZW5ndGg/OiBmaGlyLkZoaXJJbnRlZ2VyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiAoVEJDKS5cclxuICAgKi9cclxuICBwdWJsaWMgc2VxdWVuY2VBdHRhY2htZW50PzogZmhpci5BdHRhY2htZW50fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbnVjbGVvdGlkZSBwcmVzZW50IGF0IHRoZSA14oCZIHRlcm1pbmFsIHNoYWxsIGJlIHNwZWNpZmllZCBiYXNlZCBvbiBhIGNvbnRyb2xsZWQgdm9jYWJ1bGFyeS4gU2luY2UgdGhlIHNlcXVlbmNlIGlzIHJlcHJlc2VudGVkIGZyb20gdGhlIDUnIHRvIHRoZSAzJyBlbmQsIHRoZSA14oCZIHByaW1lIG51Y2xlb3RpZGUgaXMgdGhlIGxldHRlciBhdCB0aGUgZmlyc3QgcG9zaXRpb24gaW4gdGhlIHNlcXVlbmNlLiBBIHNlcGFyYXRlIHJlcHJlc2VudGF0aW9uIHdvdWxkIGJlIHJlZHVuZGFudC5cclxuICAgKi9cclxuICBwdWJsaWMgZml2ZVByaW1lPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBudWNsZW90aWRlIHByZXNlbnQgYXQgdGhlIDPigJkgdGVybWluYWwgc2hhbGwgYmUgc3BlY2lmaWVkIGJhc2VkIG9uIGEgY29udHJvbGxlZCB2b2NhYnVsYXJ5LiBTaW5jZSB0aGUgc2VxdWVuY2UgaXMgcmVwcmVzZW50ZWQgZnJvbSB0aGUgNScgdG8gdGhlIDMnIGVuZCwgdGhlIDXigJkgcHJpbWUgbnVjbGVvdGlkZSBpcyB0aGUgbGV0dGVyIGF0IHRoZSBsYXN0IHBvc2l0aW9uIGluIHRoZSBzZXF1ZW5jZS4gQSBzZXBhcmF0ZSByZXByZXNlbnRhdGlvbiB3b3VsZCBiZSByZWR1bmRhbnQuXHJcbiAgICovXHJcbiAgcHVibGljIHRocmVlUHJpbWU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGxpbmthZ2VzIGJldHdlZW4gc3VnYXIgcmVzaWR1ZXMgd2lsbCBhbHNvIGJlIGNhcHR1cmVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBsaW5rYWdlOiBmaGlyLlN1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdExpbmthZ2VbXTtcclxuICAvKipcclxuICAgKiA1LjMuNi44LjEgU3VnYXIgSUQgKE1hbmRhdG9yeSkuXHJcbiAgICovXHJcbiAgcHVibGljIHN1Z2FyOiBmaGlyLlN1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdFN1Z2FyW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8U3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3N1YnVuaXQnXSkgeyB0aGlzLnN1YnVuaXQgPSBuZXcgZmhpci5GaGlySW50ZWdlcih7dmFsdWU6IHNvdXJjZS5zdWJ1bml0fSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zdWJ1bml0J10pIHtcclxuICAgICAgaWYgKHRoaXMuc3VidW5pdCkgeyB0aGlzLnN1YnVuaXQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc3VidW5pdCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnN1YnVuaXQgPSBuZXcgZmhpci5GaGlySW50ZWdlcihzb3VyY2UuX3N1YnVuaXQgYXMgUGFydGlhbDxmaGlyLkZoaXJJbnRlZ2VyQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydzZXF1ZW5jZSddKSB7IHRoaXMuc2VxdWVuY2UgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnNlcXVlbmNlfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zZXF1ZW5jZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnNlcXVlbmNlKSB7IHRoaXMuc2VxdWVuY2UuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc2VxdWVuY2UhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zZXF1ZW5jZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9zZXF1ZW5jZSBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnbGVuZ3RoJ10pIHsgdGhpcy5sZW5ndGggPSBuZXcgZmhpci5GaGlySW50ZWdlcih7dmFsdWU6IHNvdXJjZS5sZW5ndGh9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2xlbmd0aCddKSB7XHJcbiAgICAgIGlmICh0aGlzLmxlbmd0aCkgeyB0aGlzLmxlbmd0aC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9sZW5ndGghKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5sZW5ndGggPSBuZXcgZmhpci5GaGlySW50ZWdlcihzb3VyY2UuX2xlbmd0aCBhcyBQYXJ0aWFsPGZoaXIuRmhpckludGVnZXJBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3NlcXVlbmNlQXR0YWNobWVudCddKSB7IHRoaXMuc2VxdWVuY2VBdHRhY2htZW50ID0gbmV3IGZoaXIuQXR0YWNobWVudChzb3VyY2Uuc2VxdWVuY2VBdHRhY2htZW50KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZml2ZVByaW1lJ10pIHsgdGhpcy5maXZlUHJpbWUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmZpdmVQcmltZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3RocmVlUHJpbWUnXSkgeyB0aGlzLnRocmVlUHJpbWUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnRocmVlUHJpbWUpOyB9XHJcbiAgICBpZiAoc291cmNlWydsaW5rYWdlJ10pIHsgdGhpcy5saW5rYWdlID0gc291cmNlLmxpbmthZ2UubWFwKCh4KSA9PiBuZXcgZmhpci5TdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXRMaW5rYWdlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubGlua2FnZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydzdWdhciddKSB7IHRoaXMuc3VnYXIgPSBzb3VyY2Uuc3VnYXIubWFwKCh4KSA9PiBuZXcgZmhpci5TdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXRTdWdhcih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN1Z2FyID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdTdWJzdGFuY2VOdWNsZWljQWNpZC5zdWJ1bml0JyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnc3VidW5pdCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnc2VxdWVuY2UnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2xlbmd0aCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnc2VxdWVuY2VBdHRhY2htZW50JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdmaXZlUHJpbWUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3RocmVlUHJpbWUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2xpbmthZ2UnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3N1Z2FyJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBTdWJzdGFuY2VOdWNsZWljQWNpZCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTdWJzdGFuY2VOdWNsZWljQWNpZEFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIlN1YnN0YW5jZU51Y2xlaWNBY2lkXCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0eXBlIG9mIHRoZSBzZXF1ZW5jZSBzaGFsbCBiZSBzcGVjaWZpZWQgYmFzZWQgb24gYSBjb250cm9sbGVkIHZvY2FidWxhcnkuXHJcbiAgICovXHJcbiAgc2VxdWVuY2VUeXBlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbnVtYmVyIG9mIGxpbmVhciBzZXF1ZW5jZXMgb2YgbnVjbGVvdGlkZXMgbGlua2VkIHRocm91Z2ggcGhvc3Bob2RpZXN0ZXIgYm9uZHMgc2hhbGwgYmUgZGVzY3JpYmVkLiBTdWJ1bml0cyB3b3VsZCBiZSBzdHJhbmRzIG9mIG51Y2xlaWMgYWNpZHMgdGhhdCBhcmUgdGlnaHRseSBhc3NvY2lhdGVkIHR5cGljYWxseSB0aHJvdWdoIFdhdHNvbi1DcmljayBiYXNlIHBhaXJpbmcuIE5PVEU6IElmIG5vdCBzcGVjaWZpZWQgaW4gdGhlIHJlZmVyZW5jZSBzb3VyY2UsIHRoZSBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlcmUgaXMgMSBzdWJ1bml0LlxyXG4gICAqL1xyXG4gIG51bWJlck9mU3VidW5pdHM/OiBmaGlyLkZoaXJJbnRlZ2VyfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFN1YnN0YW5jZU51Y2xlaWNBY2lkLm51bWJlck9mU3VidW5pdHNcclxuICAgKi9cclxuICBfbnVtYmVyT2ZTdWJ1bml0cz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGFyZWEgb2YgaHlicmlkaXNhdGlvbiBzaGFsbCBiZSBkZXNjcmliZWQgaWYgYXBwbGljYWJsZSBmb3IgZG91YmxlIHN0cmFuZGVkIFJOQSBvciBETkEuIFRoZSBudW1iZXIgYXNzb2NpYXRlZCB3aXRoIHRoZSBzdWJ1bml0IGZvbGxvd2VkIGJ5IHRoZSBudW1iZXIgYXNzb2NpYXRlZCB0byB0aGUgcmVzaWR1ZSBzaGFsbCBiZSBzcGVjaWZpZWQgaW4gaW5jcmVhc2luZyBvcmRlci4gVGhlIHVuZGVyc2NvcmUg4oCc4oCdIHNoYWxsIGJlIHVzZWQgYXMgc2VwYXJhdG9yIGFzIGZvbGxvd3M6IOKAnFN1YnVuaXRudW1iZXIgUmVzaWR1ZeKAnS5cclxuICAgKi9cclxuICBhcmVhT2ZIeWJyaWRpc2F0aW9uPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFN1YnN0YW5jZU51Y2xlaWNBY2lkLmFyZWFPZkh5YnJpZGlzYXRpb25cclxuICAgKi9cclxuICBfYXJlYU9mSHlicmlkaXNhdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogKFRCQykuXHJcbiAgICovXHJcbiAgb2xpZ29OdWNsZW90aWRlVHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU3VidW5pdHMgYXJlIGxpc3RlZCBpbiBvcmRlciBvZiBkZWNyZWFzaW5nIGxlbmd0aDsgc2VxdWVuY2VzIG9mIHRoZSBzYW1lIGxlbmd0aCB3aWxsIGJlIG9yZGVyZWQgYnkgbW9sZWN1bGFyIHdlaWdodDsgc3VidW5pdHMgdGhhdCBoYXZlIGlkZW50aWNhbCBzZXF1ZW5jZXMgd2lsbCBiZSByZXBlYXRlZCBtdWx0aXBsZSB0aW1lcy5cclxuICAgKi9cclxuICBzdWJ1bml0PzogZmhpci5TdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXRBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogTnVjbGVpYyBhY2lkcyBhcmUgZGVmaW5lZCBieSB0aHJlZSBkaXN0aW5jdCBlbGVtZW50czogdGhlIGJhc2UsIHN1Z2FyIGFuZCBsaW5rYWdlLiBJbmRpdmlkdWFsIHN1YnN0YW5jZS9tb2lldHkgSURzIHdpbGwgYmUgY3JlYXRlZCBmb3IgZWFjaCBvZiB0aGVzZSBlbGVtZW50cy4gVGhlIG51Y2xlb3RpZGUgc2VxdWVuY2Ugd2lsbCBiZSBhbHdheXMgZW50ZXJlZCBpbiB0aGUgNeKAmS0z4oCZIGRpcmVjdGlvbi5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTdWJzdGFuY2VOdWNsZWljQWNpZCBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnU3Vic3RhbmNlTnVjbGVpY0FjaWQnO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNvdXJjZVR5cGU6IFwiU3Vic3RhbmNlTnVjbGVpY0FjaWRcIjtcclxuICAvKipcclxuICAgKiBUaGUgdHlwZSBvZiB0aGUgc2VxdWVuY2Ugc2hhbGwgYmUgc3BlY2lmaWVkIGJhc2VkIG9uIGEgY29udHJvbGxlZCB2b2NhYnVsYXJ5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXF1ZW5jZVR5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG51bWJlciBvZiBsaW5lYXIgc2VxdWVuY2VzIG9mIG51Y2xlb3RpZGVzIGxpbmtlZCB0aHJvdWdoIHBob3NwaG9kaWVzdGVyIGJvbmRzIHNoYWxsIGJlIGRlc2NyaWJlZC4gU3VidW5pdHMgd291bGQgYmUgc3RyYW5kcyBvZiBudWNsZWljIGFjaWRzIHRoYXQgYXJlIHRpZ2h0bHkgYXNzb2NpYXRlZCB0eXBpY2FsbHkgdGhyb3VnaCBXYXRzb24tQ3JpY2sgYmFzZSBwYWlyaW5nLiBOT1RFOiBJZiBub3Qgc3BlY2lmaWVkIGluIHRoZSByZWZlcmVuY2Ugc291cmNlLCB0aGUgYXNzdW1wdGlvbiBpcyB0aGF0IHRoZXJlIGlzIDEgc3VidW5pdC5cclxuICAgKi9cclxuICBwdWJsaWMgbnVtYmVyT2ZTdWJ1bml0cz86IGZoaXIuRmhpckludGVnZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBhcmVhIG9mIGh5YnJpZGlzYXRpb24gc2hhbGwgYmUgZGVzY3JpYmVkIGlmIGFwcGxpY2FibGUgZm9yIGRvdWJsZSBzdHJhbmRlZCBSTkEgb3IgRE5BLiBUaGUgbnVtYmVyIGFzc29jaWF0ZWQgd2l0aCB0aGUgc3VidW5pdCBmb2xsb3dlZCBieSB0aGUgbnVtYmVyIGFzc29jaWF0ZWQgdG8gdGhlIHJlc2lkdWUgc2hhbGwgYmUgc3BlY2lmaWVkIGluIGluY3JlYXNpbmcgb3JkZXIuIFRoZSB1bmRlcnNjb3JlIOKAnOKAnSBzaGFsbCBiZSB1c2VkIGFzIHNlcGFyYXRvciBhcyBmb2xsb3dzOiDigJxTdWJ1bml0bnVtYmVyIFJlc2lkdWXigJ0uXHJcbiAgICovXHJcbiAgcHVibGljIGFyZWFPZkh5YnJpZGlzYXRpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIChUQkMpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvbGlnb051Y2xlb3RpZGVUeXBlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFN1YnVuaXRzIGFyZSBsaXN0ZWQgaW4gb3JkZXIgb2YgZGVjcmVhc2luZyBsZW5ndGg7IHNlcXVlbmNlcyBvZiB0aGUgc2FtZSBsZW5ndGggd2lsbCBiZSBvcmRlcmVkIGJ5IG1vbGVjdWxhciB3ZWlnaHQ7IHN1YnVuaXRzIHRoYXQgaGF2ZSBpZGVudGljYWwgc2VxdWVuY2VzIHdpbGwgYmUgcmVwZWF0ZWQgbXVsdGlwbGUgdGltZXMuXHJcbiAgICovXHJcbiAgcHVibGljIHN1YnVuaXQ6IGZoaXIuU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0W107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgU3Vic3RhbmNlTnVjbGVpY0FjaWQgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxTdWJzdGFuY2VOdWNsZWljQWNpZEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdTdWJzdGFuY2VOdWNsZWljQWNpZCc7XHJcbiAgICBpZiAoc291cmNlWydzZXF1ZW5jZVR5cGUnXSkgeyB0aGlzLnNlcXVlbmNlVHlwZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2Uuc2VxdWVuY2VUeXBlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbnVtYmVyT2ZTdWJ1bml0cyddKSB7IHRoaXMubnVtYmVyT2ZTdWJ1bml0cyA9IG5ldyBmaGlyLkZoaXJJbnRlZ2VyKHt2YWx1ZTogc291cmNlLm51bWJlck9mU3VidW5pdHN9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX251bWJlck9mU3VidW5pdHMnXSkge1xyXG4gICAgICBpZiAodGhpcy5udW1iZXJPZlN1YnVuaXRzKSB7IHRoaXMubnVtYmVyT2ZTdWJ1bml0cy5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9udW1iZXJPZlN1YnVuaXRzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubnVtYmVyT2ZTdWJ1bml0cyA9IG5ldyBmaGlyLkZoaXJJbnRlZ2VyKHNvdXJjZS5fbnVtYmVyT2ZTdWJ1bml0cyBhcyBQYXJ0aWFsPGZoaXIuRmhpckludGVnZXJBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2FyZWFPZkh5YnJpZGlzYXRpb24nXSkgeyB0aGlzLmFyZWFPZkh5YnJpZGlzYXRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmFyZWFPZkh5YnJpZGlzYXRpb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2FyZWFPZkh5YnJpZGlzYXRpb24nXSkge1xyXG4gICAgICBpZiAodGhpcy5hcmVhT2ZIeWJyaWRpc2F0aW9uKSB7IHRoaXMuYXJlYU9mSHlicmlkaXNhdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9hcmVhT2ZIeWJyaWRpc2F0aW9uISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuYXJlYU9mSHlicmlkaXNhdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9hcmVhT2ZIeWJyaWRpc2F0aW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydvbGlnb051Y2xlb3RpZGVUeXBlJ10pIHsgdGhpcy5vbGlnb051Y2xlb3RpZGVUeXBlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5vbGlnb051Y2xlb3RpZGVUeXBlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3VidW5pdCddKSB7IHRoaXMuc3VidW5pdCA9IHNvdXJjZS5zdWJ1bml0Lm1hcCgoeCkgPT4gbmV3IGZoaXIuU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3VidW5pdCA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnU3Vic3RhbmNlTnVjbGVpY0FjaWQnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJQUygncmVzb3VyY2VUeXBlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdzZXF1ZW5jZVR5cGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ251bWJlck9mU3VidW5pdHMnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2FyZWFPZkh5YnJpZGlzYXRpb24nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ29saWdvTnVjbGVvdGlkZVR5cGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3N1YnVuaXQnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuIl19