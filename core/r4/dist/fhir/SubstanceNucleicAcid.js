// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: SubstanceNucleicAcid
import * as fhir from '../fhir.js';
/**
 * The linkages between sugar residues will also be captured.
 */
export class SubstanceNucleicAcidSubunitLinkage extends fhir.BackboneElement {
    /**
     * Default constructor for SubstanceNucleicAcidSubunitLinkage - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['connectivity']) {
            this.connectivity = new fhir.FhirString({ value: source.connectivity });
        }
        if (source['_connectivity']) {
            if (this.connectivity) {
                this.connectivity.addExtendedProperties(source._connectivity);
            }
            else {
                this.connectivity = new fhir.FhirString(source._connectivity);
            }
        }
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier);
        }
        if (source['name']) {
            this.name = new fhir.FhirString({ value: source.name });
        }
        if (source['_name']) {
            if (this.name) {
                this.name.addExtendedProperties(source._name);
            }
            else {
                this.name = new fhir.FhirString(source._name);
            }
        }
        if (source['residueSite']) {
            this.residueSite = new fhir.FhirString({ value: source.residueSite });
        }
        if (source['_residueSite']) {
            if (this.residueSite) {
                this.residueSite.addExtendedProperties(source._residueSite);
            }
            else {
                this.residueSite = new fhir.FhirString(source._residueSite);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'SubstanceNucleicAcid.subunit.linkage';
        }
        this.vOptS('connectivity', expression);
        this.vOptS('identifier', expression);
        this.vOptS('name', expression);
        this.vOptS('residueSite', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceNucleicAcidSubunitLinkage._fts_dataType = 'SubstanceNucleicAcidSubunitLinkage';
/**
 * 5.3.6.8.1 Sugar ID (Mandatory).
 */
export class SubstanceNucleicAcidSubunitSugar extends fhir.BackboneElement {
    /**
     * Default constructor for SubstanceNucleicAcidSubunitSugar - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier);
        }
        if (source['name']) {
            this.name = new fhir.FhirString({ value: source.name });
        }
        if (source['_name']) {
            if (this.name) {
                this.name.addExtendedProperties(source._name);
            }
            else {
                this.name = new fhir.FhirString(source._name);
            }
        }
        if (source['residueSite']) {
            this.residueSite = new fhir.FhirString({ value: source.residueSite });
        }
        if (source['_residueSite']) {
            if (this.residueSite) {
                this.residueSite.addExtendedProperties(source._residueSite);
            }
            else {
                this.residueSite = new fhir.FhirString(source._residueSite);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'SubstanceNucleicAcid.subunit.sugar';
        }
        this.vOptS('identifier', expression);
        this.vOptS('name', expression);
        this.vOptS('residueSite', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceNucleicAcidSubunitSugar._fts_dataType = 'SubstanceNucleicAcidSubunitSugar';
/**
 * Subunits are listed in order of decreasing length; sequences of the same length will be ordered by molecular weight; subunits that have identical sequences will be repeated multiple times.
 */
export class SubstanceNucleicAcidSubunit extends fhir.BackboneElement {
    /**
     * Default constructor for SubstanceNucleicAcidSubunit - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['subunit']) {
            this.subunit = new fhir.FhirInteger({ value: source.subunit });
        }
        if (source['_subunit']) {
            if (this.subunit) {
                this.subunit.addExtendedProperties(source._subunit);
            }
            else {
                this.subunit = new fhir.FhirInteger(source._subunit);
            }
        }
        if (source['sequence']) {
            this.sequence = new fhir.FhirString({ value: source.sequence });
        }
        if (source['_sequence']) {
            if (this.sequence) {
                this.sequence.addExtendedProperties(source._sequence);
            }
            else {
                this.sequence = new fhir.FhirString(source._sequence);
            }
        }
        if (source['length']) {
            this.length = new fhir.FhirInteger({ value: source.length });
        }
        if (source['_length']) {
            if (this.length) {
                this.length.addExtendedProperties(source._length);
            }
            else {
                this.length = new fhir.FhirInteger(source._length);
            }
        }
        if (source['sequenceAttachment']) {
            this.sequenceAttachment = new fhir.Attachment(source.sequenceAttachment);
        }
        if (source['fivePrime']) {
            this.fivePrime = new fhir.CodeableConcept(source.fivePrime);
        }
        if (source['threePrime']) {
            this.threePrime = new fhir.CodeableConcept(source.threePrime);
        }
        if (source['linkage']) {
            this.linkage = source.linkage.map((x) => new fhir.SubstanceNucleicAcidSubunitLinkage(x));
        }
        else {
            this.linkage = [];
        }
        if (source['sugar']) {
            this.sugar = source.sugar.map((x) => new fhir.SubstanceNucleicAcidSubunitSugar(x));
        }
        else {
            this.sugar = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'SubstanceNucleicAcid.subunit';
        }
        this.vOptS('subunit', expression);
        this.vOptS('sequence', expression);
        this.vOptS('length', expression);
        this.vOptS('sequenceAttachment', expression);
        this.vOptS('fivePrime', expression);
        this.vOptS('threePrime', expression);
        this.vOptA('linkage', expression);
        this.vOptA('sugar', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceNucleicAcidSubunit._fts_dataType = 'SubstanceNucleicAcidSubunit';
/**
 * Nucleic acids are defined by three distinct elements: the base, sugar and linkage. Individual substance/moiety IDs will be created for each of these elements. The nucleotide sequence will be always entered in the 5’-3’ direction.
 */
export class SubstanceNucleicAcid extends fhir.DomainResource {
    /**
     * Default constructor for SubstanceNucleicAcid - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'SubstanceNucleicAcid';
        if (source['sequenceType']) {
            this.sequenceType = new fhir.CodeableConcept(source.sequenceType);
        }
        if (source['numberOfSubunits']) {
            this.numberOfSubunits = new fhir.FhirInteger({ value: source.numberOfSubunits });
        }
        if (source['_numberOfSubunits']) {
            if (this.numberOfSubunits) {
                this.numberOfSubunits.addExtendedProperties(source._numberOfSubunits);
            }
            else {
                this.numberOfSubunits = new fhir.FhirInteger(source._numberOfSubunits);
            }
        }
        if (source['areaOfHybridisation']) {
            this.areaOfHybridisation = new fhir.FhirString({ value: source.areaOfHybridisation });
        }
        if (source['_areaOfHybridisation']) {
            if (this.areaOfHybridisation) {
                this.areaOfHybridisation.addExtendedProperties(source._areaOfHybridisation);
            }
            else {
                this.areaOfHybridisation = new fhir.FhirString(source._areaOfHybridisation);
            }
        }
        if (source['oligoNucleotideType']) {
            this.oligoNucleotideType = new fhir.CodeableConcept(source.oligoNucleotideType);
        }
        if (source['subunit']) {
            this.subunit = source.subunit.map((x) => new fhir.SubstanceNucleicAcidSubunit(x));
        }
        else {
            this.subunit = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'SubstanceNucleicAcid';
        }
        this.vReqS('resourceType', expression);
        this.vOptS('sequenceType', expression);
        this.vOptS('numberOfSubunits', expression);
        this.vOptS('areaOfHybridisation', expression);
        this.vOptS('oligoNucleotideType', expression);
        this.vOptA('subunit', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceNucleicAcid._fts_dataType = 'SubstanceNucleicAcid';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3Vic3RhbmNlTnVjbGVpY0FjaWQuanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL1N1YnN0YW5jZU51Y2xlaWNBY2lkLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQiwrQ0FBK0M7QUFDL0Msa0NBQWtDO0FBQ2xDLHNDQUFzQztBQUV0QyxPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQW9DbkM7O0dBRUc7QUFDSCxNQUFNLE9BQU8sa0NBQW1DLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFxQjFFOztPQUVHO0lBQ0gsWUFBWSxTQUF5RCxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUMvRyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLGNBQWMsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLFlBQVksRUFBQyxDQUFDLENBQUM7U0FBRTtRQUN0RyxJQUFJLE1BQU0sQ0FBQyxlQUFlLENBQUMsRUFBRTtZQUMzQixJQUFJLElBQUksQ0FBQyxZQUFZLEVBQUU7Z0JBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsYUFBYyxDQUFDLENBQUM7YUFBRTtpQkFDckY7Z0JBQUUsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLGFBQTZDLENBQUMsQ0FBQzthQUFFO1NBQ3hHO1FBQ0QsSUFBSSxNQUFNLENBQUMsWUFBWSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUM7U0FBRTtRQUN2RixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJ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Ly8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0LmNvcmUgdmVyc2lvbjogNC4wLjFcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBTdWJzdGFuY2VOdWNsZWljQWNpZFxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXRMaW5rYWdlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFN1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdExpbmthZ2VBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgZW50aXR5IHRoYXQgbGlua3MgdGhlIHN1Z2FyIHJlc2lkdWVzIHRvZ2V0aGVyIHNob3VsZCBhbHNvIGJlIGNhcHR1cmVkIGZvciBuZWFybHkgYWxsIG5hdHVyYWxseSBvY2N1cnJpbmcgbnVjbGVpYyBhY2lkIHRoZSBsaW5rYWdlIGlzIGEgcGhvc3BoYXRlIGdyb3VwLiBGb3IgbWFueSBzeW50aGV0aWMgb2xpZ29udWNsZW90aWRlcyBwaG9zcGhvcm90aGlvYXRlIGxpbmthZ2VzIGFyZSBvZnRlbiBzZWVuLiBMaW5rYWdlIGNvbm5lY3Rpdml0eSBpcyBhc3N1bWVkIHRvIGJlIDPigJktNeKAmS4gSWYgdGhlIGxpbmthZ2UgaXMgZWl0aGVyIDPigJktM+KAmSBvciA14oCZLTXigJkgdGhpcyBzaG91bGQgYmUgc3BlY2lmaWVkLlxyXG4gICAqL1xyXG4gIGNvbm5lY3Rpdml0eT86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTdWJzdGFuY2VOdWNsZWljQWNpZC5zdWJ1bml0LmxpbmthZ2UuY29ubmVjdGl2aXR5XHJcbiAgICovXHJcbiAgX2Nvbm5lY3Rpdml0eT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogRWFjaCBsaW5rYWdlIHdpbGwgYmUgcmVnaXN0ZXJlZCBhcyBhIGZyYWdtZW50IGFuZCBoYXZlIGFuIElELlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFYWNoIGxpbmthZ2Ugd2lsbCBiZSByZWdpc3RlcmVkIGFzIGEgZnJhZ21lbnQgYW5kIGhhdmUgYXQgbGVhc3Qgb25lIG5hbWUuIEEgc2luZ2xlIG5hbWUgc2hhbGwgYmUgYXNzaWduZWQgdG8gZWFjaCBsaW5rYWdlLlxyXG4gICAqL1xyXG4gIG5hbWU/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3Vic3RhbmNlTnVjbGVpY0FjaWQuc3VidW5pdC5saW5rYWdlLm5hbWVcclxuICAgKi9cclxuICBfbmFtZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogUmVzaWR1ZXMgc2hhbGwgYmUgY2FwdHVyZWQgYXMgZGVzY3JpYmVkIGluIDUuMy42LjguMy5cclxuICAgKi9cclxuICByZXNpZHVlU2l0ZT86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTdWJzdGFuY2VOdWNsZWljQWNpZC5zdWJ1bml0LmxpbmthZ2UucmVzaWR1ZVNpdGVcclxuICAgKi9cclxuICBfcmVzaWR1ZVNpdGU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlIGxpbmthZ2VzIGJldHdlZW4gc3VnYXIgcmVzaWR1ZXMgd2lsbCBhbHNvIGJlIGNhcHR1cmVkLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFN1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdExpbmthZ2UgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXRMaW5rYWdlJztcclxuICAvKipcclxuICAgKiBUaGUgZW50aXR5IHRoYXQgbGlua3MgdGhlIHN1Z2FyIHJlc2lkdWVzIHRvZ2V0aGVyIHNob3VsZCBhbHNvIGJlIGNhcHR1cmVkIGZvciBuZWFybHkgYWxsIG5hdHVyYWxseSBvY2N1cnJpbmcgbnVjbGVpYyBhY2lkIHRoZSBsaW5rYWdlIGlzIGEgcGhvc3BoYXRlIGdyb3VwLiBGb3IgbWFueSBzeW50aGV0aWMgb2xpZ29udWNsZW90aWRlcyBwaG9zcGhvcm90aGlvYXRlIGxpbmthZ2VzIGFyZSBvZnRlbiBzZWVuLiBMaW5rYWdlIGNvbm5lY3Rpdml0eSBpcyBhc3N1bWVkIHRvIGJlIDPigJktNeKAmS4gSWYgdGhlIGxpbmthZ2UgaXMgZWl0aGVyIDPigJktM+KAmSBvciA14oCZLTXigJkgdGhpcyBzaG91bGQgYmUgc3BlY2lmaWVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25uZWN0aXZpdHk/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEVhY2ggbGlua2FnZSB3aWxsIGJlIHJlZ2lzdGVyZWQgYXMgYSBmcmFnbWVudCBhbmQgaGF2ZSBhbiBJRC5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRWFjaCBsaW5rYWdlIHdpbGwgYmUgcmVnaXN0ZXJlZCBhcyBhIGZyYWdtZW50IGFuZCBoYXZlIGF0IGxlYXN0IG9uZSBuYW1lLiBBIHNpbmdsZSBuYW1lIHNoYWxsIGJlIGFzc2lnbmVkIHRvIGVhY2ggbGlua2FnZS5cclxuICAgKi9cclxuICBwdWJsaWMgbmFtZT86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUmVzaWR1ZXMgc2hhbGwgYmUgY2FwdHVyZWQgYXMgZGVzY3JpYmVkIGluIDUuMy42LjguMy5cclxuICAgKi9cclxuICBwdWJsaWMgcmVzaWR1ZVNpdGU/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFN1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdExpbmthZ2UgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXRMaW5rYWdlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2Nvbm5lY3Rpdml0eSddKSB7IHRoaXMuY29ubmVjdGl2aXR5ID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5jb25uZWN0aXZpdHl9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2Nvbm5lY3Rpdml0eSddKSB7XHJcbiAgICAgIGlmICh0aGlzLmNvbm5lY3Rpdml0eSkgeyB0aGlzLmNvbm5lY3Rpdml0eS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9jb25uZWN0aXZpdHkhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5jb25uZWN0aXZpdHkgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fY29ubmVjdGl2aXR5IGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gbmV3IGZoaXIuSWRlbnRpZmllcihzb3VyY2UuaWRlbnRpZmllcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ25hbWUnXSkgeyB0aGlzLm5hbWUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLm5hbWV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX25hbWUnXSkge1xyXG4gICAgICBpZiAodGhpcy5uYW1lKSB7IHRoaXMubmFtZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9uYW1lISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubmFtZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9uYW1lIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydyZXNpZHVlU2l0ZSddKSB7IHRoaXMucmVzaWR1ZVNpdGUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnJlc2lkdWVTaXRlfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19yZXNpZHVlU2l0ZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnJlc2lkdWVTaXRlKSB7IHRoaXMucmVzaWR1ZVNpdGUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fcmVzaWR1ZVNpdGUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5yZXNpZHVlU2l0ZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9yZXNpZHVlU2l0ZSBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdTdWJzdGFuY2VOdWNsZWljQWNpZC5zdWJ1bml0LmxpbmthZ2UnIH1cclxuICAgIHRoaXMudk9wdFMoJ2Nvbm5lY3Rpdml0eScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ2lkZW50aWZpZXInLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCduYW1lJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygncmVzaWR1ZVNpdGUnLGV4cHJlc3Npb24pXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0U3VnYXIgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0U3VnYXJBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgU3Vic3RhbmNlIElEIG9mIHRoZSBzdWdhciBvciBzdWdhci1saWtlIGNvbXBvbmVudCB0aGF0IG1ha2UgdXAgdGhlIG51Y2xlb3RpZGUuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBzdWdhciBvciBzdWdhci1saWtlIGNvbXBvbmVudCB0aGF0IG1ha2UgdXAgdGhlIG51Y2xlb3RpZGUuXHJcbiAgICovXHJcbiAgbmFtZT86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTdWJzdGFuY2VOdWNsZWljQWNpZC5zdWJ1bml0LnN1Z2FyLm5hbWVcclxuICAgKi9cclxuICBfbmFtZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlc2lkdWVzIHRoYXQgY29udGFpbiBhIGdpdmVuIHN1Z2FyIHdpbGwgYmUgY2FwdHVyZWQuIFRoZSBvcmRlciBvZiBnaXZlbiByZXNpZHVlcyB3aWxsIGJlIGNhcHR1cmVkIGluIHRoZSA14oCYLTPigJhkaXJlY3Rpb24gY29uc2lzdGVudCB3aXRoIHRoZSBiYXNlIHNlcXVlbmNlcyBsaXN0ZWQgYWJvdmUuXHJcbiAgICovXHJcbiAgcmVzaWR1ZVNpdGU/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3Vic3RhbmNlTnVjbGVpY0FjaWQuc3VidW5pdC5zdWdhci5yZXNpZHVlU2l0ZVxyXG4gICAqL1xyXG4gIF9yZXNpZHVlU2l0ZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiA1LjMuNi44LjEgU3VnYXIgSUQgKE1hbmRhdG9yeSkuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0U3VnYXIgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXRTdWdhcic7XHJcbiAgLyoqXHJcbiAgICogVGhlIFN1YnN0YW5jZSBJRCBvZiB0aGUgc3VnYXIgb3Igc3VnYXItbGlrZSBjb21wb25lbnQgdGhhdCBtYWtlIHVwIHRoZSBudWNsZW90aWRlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbmFtZSBvZiB0aGUgc3VnYXIgb3Igc3VnYXItbGlrZSBjb21wb25lbnQgdGhhdCBtYWtlIHVwIHRoZSBudWNsZW90aWRlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBuYW1lPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcmVzaWR1ZXMgdGhhdCBjb250YWluIGEgZ2l2ZW4gc3VnYXIgd2lsbCBiZSBjYXB0dXJlZC4gVGhlIG9yZGVyIG9mIGdpdmVuIHJlc2lkdWVzIHdpbGwgYmUgY2FwdHVyZWQgaW4gdGhlIDXigJgtM+KAmGRpcmVjdGlvbiBjb25zaXN0ZW50IHdpdGggdGhlIGJhc2Ugc2VxdWVuY2VzIGxpc3RlZCBhYm92ZS5cclxuICAgKi9cclxuICBwdWJsaWMgcmVzaWR1ZVNpdGU/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFN1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdFN1Z2FyIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8U3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0U3VnYXJBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IG5ldyBmaGlyLklkZW50aWZpZXIoc291cmNlLmlkZW50aWZpZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWyduYW1lJ10pIHsgdGhpcy5uYW1lID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5uYW1lfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19uYW1lJ10pIHtcclxuICAgICAgaWYgKHRoaXMubmFtZSkgeyB0aGlzLm5hbWUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbmFtZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLm5hbWUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fbmFtZSBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVzaWR1ZVNpdGUnXSkgeyB0aGlzLnJlc2lkdWVTaXRlID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5yZXNpZHVlU2l0ZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfcmVzaWR1ZVNpdGUnXSkge1xyXG4gICAgICBpZiAodGhpcy5yZXNpZHVlU2l0ZSkgeyB0aGlzLnJlc2lkdWVTaXRlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3Jlc2lkdWVTaXRlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMucmVzaWR1ZVNpdGUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fcmVzaWR1ZVNpdGUgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb246c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24pO1xyXG4gICAgaWYgKGV4cHJlc3Npb24gPT09ICcnKSB7IGV4cHJlc3Npb24gPSAnU3Vic3RhbmNlTnVjbGVpY0FjaWQuc3VidW5pdC5zdWdhcicgfVxyXG4gICAgdGhpcy52T3B0UygnaWRlbnRpZmllcicsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ25hbWUnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdyZXNpZHVlU2l0ZScsZXhwcmVzc2lvbilcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0QXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogSW5kZXggb2YgbGluZWFyIHNlcXVlbmNlcyBvZiBudWNsZWljIGFjaWRzIGluIG9yZGVyIG9mIGRlY3JlYXNpbmcgbGVuZ3RoLiBTZXF1ZW5jZXMgb2YgdGhlIHNhbWUgbGVuZ3RoIHdpbGwgYmUgb3JkZXJlZCBieSBtb2xlY3VsYXIgd2VpZ2h0LiBTdWJ1bml0cyB0aGF0IGhhdmUgaWRlbnRpY2FsIHNlcXVlbmNlcyB3aWxsIGJlIHJlcGVhdGVkIGFuZCBoYXZlIHNlcXVlbnRpYWwgc3Vic2NyaXB0cy5cclxuICAgKi9cclxuICBzdWJ1bml0PzogZmhpci5GaGlySW50ZWdlcnxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTdWJzdGFuY2VOdWNsZWljQWNpZC5zdWJ1bml0LnN1YnVuaXRcclxuICAgKi9cclxuICBfc3VidW5pdD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQWN0dWFsIG51Y2xlb3RpZGUgc2VxdWVuY2Ugbm90YXRpb24gZnJvbSA1JyB0byAzJyBlbmQgdXNpbmcgc3RhbmRhcmQgc2luZ2xlIGxldHRlciBjb2Rlcy4gSW4gYWRkaXRpb24gdG8gdGhlIGJhc2Ugc2VxdWVuY2UsIHN1Z2FyIGFuZCB0eXBlIG9mIHBob3NwaGF0ZSBvciBub24tcGhvc3BoYXRlIGxpbmthZ2Ugc2hvdWxkIGFsc28gYmUgY2FwdHVyZWQuXHJcbiAgICovXHJcbiAgc2VxdWVuY2U/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3Vic3RhbmNlTnVjbGVpY0FjaWQuc3VidW5pdC5zZXF1ZW5jZVxyXG4gICAqL1xyXG4gIF9zZXF1ZW5jZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGxlbmd0aCBvZiB0aGUgc2VxdWVuY2Ugc2hhbGwgYmUgY2FwdHVyZWQuXHJcbiAgICovXHJcbiAgbGVuZ3RoPzogZmhpci5GaGlySW50ZWdlcnxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTdWJzdGFuY2VOdWNsZWljQWNpZC5zdWJ1bml0Lmxlbmd0aFxyXG4gICAqL1xyXG4gIF9sZW5ndGg/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIChUQkMpLlxyXG4gICAqL1xyXG4gIHNlcXVlbmNlQXR0YWNobWVudD86IGZoaXIuQXR0YWNobWVudEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBudWNsZW90aWRlIHByZXNlbnQgYXQgdGhlIDXigJkgdGVybWluYWwgc2hhbGwgYmUgc3BlY2lmaWVkIGJhc2VkIG9uIGEgY29udHJvbGxlZCB2b2NhYnVsYXJ5LiBTaW5jZSB0aGUgc2VxdWVuY2UgaXMgcmVwcmVzZW50ZWQgZnJvbSB0aGUgNScgdG8gdGhlIDMnIGVuZCwgdGhlIDXigJkgcHJpbWUgbnVjbGVvdGlkZSBpcyB0aGUgbGV0dGVyIGF0IHRoZSBmaXJzdCBwb3NpdGlvbiBpbiB0aGUgc2VxdWVuY2UuIEEgc2VwYXJhdGUgcmVwcmVzZW50YXRpb24gd291bGQgYmUgcmVkdW5kYW50LlxyXG4gICAqL1xyXG4gIGZpdmVQcmltZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG51Y2xlb3RpZGUgcHJlc2VudCBhdCB0aGUgM+KAmSB0ZXJtaW5hbCBzaGFsbCBiZSBzcGVjaWZpZWQgYmFzZWQgb24gYSBjb250cm9sbGVkIHZvY2FidWxhcnkuIFNpbmNlIHRoZSBzZXF1ZW5jZSBpcyByZXByZXNlbnRlZCBmcm9tIHRoZSA1JyB0byB0aGUgMycgZW5kLCB0aGUgNeKAmSBwcmltZSBudWNsZW90aWRlIGlzIHRoZSBsZXR0ZXIgYXQgdGhlIGxhc3QgcG9zaXRpb24gaW4gdGhlIHNlcXVlbmNlLiBBIHNlcGFyYXRlIHJlcHJlc2VudGF0aW9uIHdvdWxkIGJlIHJlZHVuZGFudC5cclxuICAgKi9cclxuICB0aHJlZVByaW1lPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbGlua2FnZXMgYmV0d2VlbiBzdWdhciByZXNpZHVlcyB3aWxsIGFsc28gYmUgY2FwdHVyZWQuXHJcbiAgICovXHJcbiAgbGlua2FnZT86IGZoaXIuU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0TGlua2FnZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogNS4zLjYuOC4xIFN1Z2FyIElEIChNYW5kYXRvcnkpLlxyXG4gICAqL1xyXG4gIHN1Z2FyPzogZmhpci5TdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXRTdWdhckFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTdWJ1bml0cyBhcmUgbGlzdGVkIGluIG9yZGVyIG9mIGRlY3JlYXNpbmcgbGVuZ3RoOyBzZXF1ZW5jZXMgb2YgdGhlIHNhbWUgbGVuZ3RoIHdpbGwgYmUgb3JkZXJlZCBieSBtb2xlY3VsYXIgd2VpZ2h0OyBzdWJ1bml0cyB0aGF0IGhhdmUgaWRlbnRpY2FsIHNlcXVlbmNlcyB3aWxsIGJlIHJlcGVhdGVkIG11bHRpcGxlIHRpbWVzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFN1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdCBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1N1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdCc7XHJcbiAgLyoqXHJcbiAgICogSW5kZXggb2YgbGluZWFyIHNlcXVlbmNlcyBvZiBudWNsZWljIGFjaWRzIGluIG9yZGVyIG9mIGRlY3JlYXNpbmcgbGVuZ3RoLiBTZXF1ZW5jZXMgb2YgdGhlIHNhbWUgbGVuZ3RoIHdpbGwgYmUgb3JkZXJlZCBieSBtb2xlY3VsYXIgd2VpZ2h0LiBTdWJ1bml0cyB0aGF0IGhhdmUgaWRlbnRpY2FsIHNlcXVlbmNlcyB3aWxsIGJlIHJlcGVhdGVkIGFuZCBoYXZlIHNlcXVlbnRpYWwgc3Vic2NyaXB0cy5cclxuICAgKi9cclxuICBwdWJsaWMgc3VidW5pdD86IGZoaXIuRmhpckludGVnZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFjdHVhbCBudWNsZW90aWRlIHNlcXVlbmNlIG5vdGF0aW9uIGZyb20gNScgdG8gMycgZW5kIHVzaW5nIHN0YW5kYXJkIHNpbmdsZSBsZXR0ZXIgY29kZXMuIEluIGFkZGl0aW9uIHRvIHRoZSBiYXNlIHNlcXVlbmNlLCBzdWdhciBhbmQgdHlwZSBvZiBwaG9zcGhhdGUgb3Igbm9uLXBob3NwaGF0ZSBsaW5rYWdlIHNob3VsZCBhbHNvIGJlIGNhcHR1cmVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXF1ZW5jZT86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGxlbmd0aCBvZiB0aGUgc2VxdWVuY2Ugc2hhbGwgYmUgY2FwdHVyZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGxlbmd0aD86IGZoaXIuRmhpckludGVnZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIChUQkMpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXF1ZW5jZUF0dGFjaG1lbnQ/OiBmaGlyLkF0dGFjaG1lbnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBudWNsZW90aWRlIHByZXNlbnQgYXQgdGhlIDXigJkgdGVybWluYWwgc2hhbGwgYmUgc3BlY2lmaWVkIGJhc2VkIG9uIGEgY29udHJvbGxlZCB2b2NhYnVsYXJ5LiBTaW5jZSB0aGUgc2VxdWVuY2UgaXMgcmVwcmVzZW50ZWQgZnJvbSB0aGUgNScgdG8gdGhlIDMnIGVuZCwgdGhlIDXigJkgcHJpbWUgbnVjbGVvdGlkZSBpcyB0aGUgbGV0dGVyIGF0IHRoZSBmaXJzdCBwb3NpdGlvbiBpbiB0aGUgc2VxdWVuY2UuIEEgc2VwYXJhdGUgcmVwcmVzZW50YXRpb24gd291bGQgYmUgcmVkdW5kYW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBmaXZlUHJpbWU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG51Y2xlb3RpZGUgcHJlc2VudCBhdCB0aGUgM+KAmSB0ZXJtaW5hbCBzaGFsbCBiZSBzcGVjaWZpZWQgYmFzZWQgb24gYSBjb250cm9sbGVkIHZvY2FidWxhcnkuIFNpbmNlIHRoZSBzZXF1ZW5jZSBpcyByZXByZXNlbnRlZCBmcm9tIHRoZSA1JyB0byB0aGUgMycgZW5kLCB0aGUgNeKAmSBwcmltZSBudWNsZW90aWRlIGlzIHRoZSBsZXR0ZXIgYXQgdGhlIGxhc3QgcG9zaXRpb24gaW4gdGhlIHNlcXVlbmNlLiBBIHNlcGFyYXRlIHJlcHJlc2VudGF0aW9uIHdvdWxkIGJlIHJlZHVuZGFudC5cclxuICAgKi9cclxuICBwdWJsaWMgdGhyZWVQcmltZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbGlua2FnZXMgYmV0d2VlbiBzdWdhciByZXNpZHVlcyB3aWxsIGFsc28gYmUgY2FwdHVyZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGxpbmthZ2U6IGZoaXIuU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0TGlua2FnZVtdO1xyXG4gIC8qKlxyXG4gICAqIDUuMy42LjguMSBTdWdhciBJRCAoTWFuZGF0b3J5KS5cclxuICAgKi9cclxuICBwdWJsaWMgc3VnYXI6IGZoaXIuU3Vic3RhbmNlTnVjbGVpY0FjaWRTdWJ1bml0U3VnYXJbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXQgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxTdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXRBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnc3VidW5pdCddKSB7IHRoaXMuc3VidW5pdCA9IG5ldyBmaGlyLkZoaXJJbnRlZ2VyKHt2YWx1ZTogc291cmNlLnN1YnVuaXR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3N1YnVuaXQnXSkge1xyXG4gICAgICBpZiAodGhpcy5zdWJ1bml0KSB7IHRoaXMuc3VidW5pdC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zdWJ1bml0ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3VidW5pdCA9IG5ldyBmaGlyLkZoaXJJbnRlZ2VyKHNvdXJjZS5fc3VidW5pdCBhcyBQYXJ0aWFsPGZoaXIuRmhpckludGVnZXJBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3NlcXVlbmNlJ10pIHsgdGhpcy5zZXF1ZW5jZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2Uuc2VxdWVuY2V9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3NlcXVlbmNlJ10pIHtcclxuICAgICAgaWYgKHRoaXMuc2VxdWVuY2UpIHsgdGhpcy5zZXF1ZW5jZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zZXF1ZW5jZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnNlcXVlbmNlID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3NlcXVlbmNlIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydsZW5ndGgnXSkgeyB0aGlzLmxlbmd0aCA9IG5ldyBmaGlyLkZoaXJJbnRlZ2VyKHt2YWx1ZTogc291cmNlLmxlbmd0aH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfbGVuZ3RoJ10pIHtcclxuICAgICAgaWYgKHRoaXMubGVuZ3RoKSB7IHRoaXMubGVuZ3RoLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2xlbmd0aCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmxlbmd0aCA9IG5ldyBmaGlyLkZoaXJJbnRlZ2VyKHNvdXJjZS5fbGVuZ3RoIGFzIFBhcnRpYWw8Zmhpci5GaGlySW50ZWdlckFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2VxdWVuY2VBdHRhY2htZW50J10pIHsgdGhpcy5zZXF1ZW5jZUF0dGFjaG1lbnQgPSBuZXcgZmhpci5BdHRhY2htZW50KHNvdXJjZS5zZXF1ZW5jZUF0dGFjaG1lbnQpOyB9XHJcbiAgICBpZiAoc291cmNlWydmaXZlUHJpbWUnXSkgeyB0aGlzLmZpdmVQcmltZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuZml2ZVByaW1lKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndGhyZWVQcmltZSddKSB7IHRoaXMudGhyZWVQcmltZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UudGhyZWVQcmltZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2xpbmthZ2UnXSkgeyB0aGlzLmxpbmthZ2UgPSBzb3VyY2UubGlua2FnZS5tYXAoKHgpID0+IG5ldyBmaGlyLlN1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdExpbmthZ2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5saW5rYWdlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3N1Z2FyJ10pIHsgdGhpcy5zdWdhciA9IHNvdXJjZS5zdWdhci5tYXAoKHgpID0+IG5ldyBmaGlyLlN1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdFN1Z2FyKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3VnYXIgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdTdWJzdGFuY2VOdWNsZWljQWNpZC5zdWJ1bml0JyB9XHJcbiAgICB0aGlzLnZPcHRTKCdzdWJ1bml0JyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0Uygnc2VxdWVuY2UnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdsZW5ndGgnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdzZXF1ZW5jZUF0dGFjaG1lbnQnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdmaXZlUHJpbWUnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCd0aHJlZVByaW1lJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0QSgnbGlua2FnZScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdEEoJ3N1Z2FyJyxleHByZXNzaW9uKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFN1YnN0YW5jZU51Y2xlaWNBY2lkIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFN1YnN0YW5jZU51Y2xlaWNBY2lkQXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiU3Vic3RhbmNlTnVjbGVpY0FjaWRcInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHR5cGUgb2YgdGhlIHNlcXVlbmNlIHNoYWxsIGJlIHNwZWNpZmllZCBiYXNlZCBvbiBhIGNvbnRyb2xsZWQgdm9jYWJ1bGFyeS5cclxuICAgKi9cclxuICBzZXF1ZW5jZVR5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBudW1iZXIgb2YgbGluZWFyIHNlcXVlbmNlcyBvZiBudWNsZW90aWRlcyBsaW5rZWQgdGhyb3VnaCBwaG9zcGhvZGllc3RlciBib25kcyBzaGFsbCBiZSBkZXNjcmliZWQuIFN1YnVuaXRzIHdvdWxkIGJlIHN0cmFuZHMgb2YgbnVjbGVpYyBhY2lkcyB0aGF0IGFyZSB0aWdodGx5IGFzc29jaWF0ZWQgdHlwaWNhbGx5IHRocm91Z2ggV2F0c29uLUNyaWNrIGJhc2UgcGFpcmluZy4gTk9URTogSWYgbm90IHNwZWNpZmllZCBpbiB0aGUgcmVmZXJlbmNlIHNvdXJjZSwgdGhlIGFzc3VtcHRpb24gaXMgdGhhdCB0aGVyZSBpcyAxIHN1YnVuaXQuXHJcbiAgICovXHJcbiAgbnVtYmVyT2ZTdWJ1bml0cz86IGZoaXIuRmhpckludGVnZXJ8bnVtYmVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3Vic3RhbmNlTnVjbGVpY0FjaWQubnVtYmVyT2ZTdWJ1bml0c1xyXG4gICAqL1xyXG4gIF9udW1iZXJPZlN1YnVuaXRzPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgYXJlYSBvZiBoeWJyaWRpc2F0aW9uIHNoYWxsIGJlIGRlc2NyaWJlZCBpZiBhcHBsaWNhYmxlIGZvciBkb3VibGUgc3RyYW5kZWQgUk5BIG9yIEROQS4gVGhlIG51bWJlciBhc3NvY2lhdGVkIHdpdGggdGhlIHN1YnVuaXQgZm9sbG93ZWQgYnkgdGhlIG51bWJlciBhc3NvY2lhdGVkIHRvIHRoZSByZXNpZHVlIHNoYWxsIGJlIHNwZWNpZmllZCBpbiBpbmNyZWFzaW5nIG9yZGVyLiBUaGUgdW5kZXJzY29yZSDigJzigJ0gc2hhbGwgYmUgdXNlZCBhcyBzZXBhcmF0b3IgYXMgZm9sbG93czog4oCcU3VidW5pdG51bWJlciBSZXNpZHVl4oCdLlxyXG4gICAqL1xyXG4gIGFyZWFPZkh5YnJpZGlzYXRpb24/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3Vic3RhbmNlTnVjbGVpY0FjaWQuYXJlYU9mSHlicmlkaXNhdGlvblxyXG4gICAqL1xyXG4gIF9hcmVhT2ZIeWJyaWRpc2F0aW9uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiAoVEJDKS5cclxuICAgKi9cclxuICBvbGlnb051Y2xlb3RpZGVUeXBlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTdWJ1bml0cyBhcmUgbGlzdGVkIGluIG9yZGVyIG9mIGRlY3JlYXNpbmcgbGVuZ3RoOyBzZXF1ZW5jZXMgb2YgdGhlIHNhbWUgbGVuZ3RoIHdpbGwgYmUgb3JkZXJlZCBieSBtb2xlY3VsYXIgd2VpZ2h0OyBzdWJ1bml0cyB0aGF0IGhhdmUgaWRlbnRpY2FsIHNlcXVlbmNlcyB3aWxsIGJlIHJlcGVhdGVkIG11bHRpcGxlIHRpbWVzLlxyXG4gICAqL1xyXG4gIHN1YnVuaXQ/OiBmaGlyLlN1YnN0YW5jZU51Y2xlaWNBY2lkU3VidW5pdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBOdWNsZWljIGFjaWRzIGFyZSBkZWZpbmVkIGJ5IHRocmVlIGRpc3RpbmN0IGVsZW1lbnRzOiB0aGUgYmFzZSwgc3VnYXIgYW5kIGxpbmthZ2UuIEluZGl2aWR1YWwgc3Vic3RhbmNlL21vaWV0eSBJRHMgd2lsbCBiZSBjcmVhdGVkIGZvciBlYWNoIG9mIHRoZXNlIGVsZW1lbnRzLiBUaGUgbnVjbGVvdGlkZSBzZXF1ZW5jZSB3aWxsIGJlIGFsd2F5cyBlbnRlcmVkIGluIHRoZSA14oCZLTPigJkgZGlyZWN0aW9uLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFN1YnN0YW5jZU51Y2xlaWNBY2lkIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdTdWJzdGFuY2VOdWNsZWljQWNpZCc7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJTdWJzdGFuY2VOdWNsZWljQWNpZFwiO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0eXBlIG9mIHRoZSBzZXF1ZW5jZSBzaGFsbCBiZSBzcGVjaWZpZWQgYmFzZWQgb24gYSBjb250cm9sbGVkIHZvY2FidWxhcnkuXHJcbiAgICovXHJcbiAgcHVibGljIHNlcXVlbmNlVHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbnVtYmVyIG9mIGxpbmVhciBzZXF1ZW5jZXMgb2YgbnVjbGVvdGlkZXMgbGlua2VkIHRocm91Z2ggcGhvc3Bob2RpZXN0ZXIgYm9uZHMgc2hhbGwgYmUgZGVzY3JpYmVkLiBTdWJ1bml0cyB3b3VsZCBiZSBzdHJhbmRzIG9mIG51Y2xlaWMgYWNpZHMgdGhhdCBhcmUgdGlnaHRseSBhc3NvY2lhdGVkIHR5cGljYWxseSB0aHJvdWdoIFdhdHNvbi1DcmljayBiYXNlIHBhaXJpbmcuIE5PVEU6IElmIG5vdCBzcGVjaWZpZWQgaW4gdGhlIHJlZmVyZW5jZSBzb3VyY2UsIHRoZSBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlcmUgaXMgMSBzdWJ1bml0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBudW1iZXJPZlN1YnVuaXRzPzogZmhpci5GaGlySW50ZWdlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGFyZWEgb2YgaHlicmlkaXNhdGlvbiBzaGFsbCBiZSBkZXNjcmliZWQgaWYgYXBwbGljYWJsZSBmb3IgZG91YmxlIHN0cmFuZGVkIFJOQSBvciBETkEuIFRoZSBudW1iZXIgYXNzb2NpYXRlZCB3aXRoIHRoZSBzdWJ1bml0IGZvbGxvd2VkIGJ5IHRoZSBudW1iZXIgYXNzb2NpYXRlZCB0byB0aGUgcmVzaWR1ZSBzaGFsbCBiZSBzcGVjaWZpZWQgaW4gaW5jcmVhc2luZyBvcmRlci4gVGhlIHVuZGVyc2NvcmUg4oCc4oCdIHNoYWxsIGJlIHVzZWQgYXMgc2VwYXJhdG9yIGFzIGZvbGxvd3M6IOKAnFN1YnVuaXRudW1iZXIgUmVzaWR1ZeKAnS5cclxuICAgKi9cclxuICBwdWJsaWMgYXJlYU9mSHlicmlkaXNhdGlvbj86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogKFRCQykuXHJcbiAgICovXHJcbiAgcHVibGljIG9saWdvTnVjbGVvdGlkZVR5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU3VidW5pdHMgYXJlIGxpc3RlZCBpbiBvcmRlciBvZiBkZWNyZWFzaW5nIGxlbmd0aDsgc2VxdWVuY2VzIG9mIHRoZSBzYW1lIGxlbmd0aCB3aWxsIGJlIG9yZGVyZWQgYnkgbW9sZWN1bGFyIHdlaWdodDsgc3VidW5pdHMgdGhhdCBoYXZlIGlkZW50aWNhbCBzZXF1ZW5jZXMgd2lsbCBiZSByZXBlYXRlZCBtdWx0aXBsZSB0aW1lcy5cclxuICAgKi9cclxuICBwdWJsaWMgc3VidW5pdDogZmhpci5TdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXRbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBTdWJzdGFuY2VOdWNsZWljQWNpZCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFN1YnN0YW5jZU51Y2xlaWNBY2lkQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ1N1YnN0YW5jZU51Y2xlaWNBY2lkJztcclxuICAgIGlmIChzb3VyY2VbJ3NlcXVlbmNlVHlwZSddKSB7IHRoaXMuc2VxdWVuY2VUeXBlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5zZXF1ZW5jZVR5cGUpOyB9XHJcbiAgICBpZiAoc291cmNlWydudW1iZXJPZlN1YnVuaXRzJ10pIHsgdGhpcy5udW1iZXJPZlN1YnVuaXRzID0gbmV3IGZoaXIuRmhpckludGVnZXIoe3ZhbHVlOiBzb3VyY2UubnVtYmVyT2ZTdWJ1bml0c30pOyB9XHJcbiAgICBpZiAoc291cmNlWydfbnVtYmVyT2ZTdWJ1bml0cyddKSB7XHJcbiAgICAgIGlmICh0aGlzLm51bWJlck9mU3VidW5pdHMpIHsgdGhpcy5udW1iZXJPZlN1YnVuaXRzLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX251bWJlck9mU3VidW5pdHMhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5udW1iZXJPZlN1YnVuaXRzID0gbmV3IGZoaXIuRmhpckludGVnZXIoc291cmNlLl9udW1iZXJPZlN1YnVuaXRzIGFzIFBhcnRpYWw8Zmhpci5GaGlySW50ZWdlckFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnYXJlYU9mSHlicmlkaXNhdGlvbiddKSB7IHRoaXMuYXJlYU9mSHlicmlkaXNhdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuYXJlYU9mSHlicmlkaXNhdGlvbn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfYXJlYU9mSHlicmlkaXNhdGlvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLmFyZWFPZkh5YnJpZGlzYXRpb24pIHsgdGhpcy5hcmVhT2ZIeWJyaWRpc2F0aW9uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2FyZWFPZkh5YnJpZGlzYXRpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5hcmVhT2ZIeWJyaWRpc2F0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2FyZWFPZkh5YnJpZGlzYXRpb24gYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ29saWdvTnVjbGVvdGlkZVR5cGUnXSkgeyB0aGlzLm9saWdvTnVjbGVvdGlkZVR5cGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLm9saWdvTnVjbGVvdGlkZVR5cGUpOyB9XHJcbiAgICBpZiAoc291cmNlWydzdWJ1bml0J10pIHsgdGhpcy5zdWJ1bml0ID0gc291cmNlLnN1YnVuaXQubWFwKCh4KSA9PiBuZXcgZmhpci5TdWJzdGFuY2VOdWNsZWljQWNpZFN1YnVuaXQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdWJ1bml0ID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb246c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24pO1xyXG4gICAgaWYgKGV4cHJlc3Npb24gPT09ICcnKSB7IGV4cHJlc3Npb24gPSAnU3Vic3RhbmNlTnVjbGVpY0FjaWQnIH1cclxuICAgIHRoaXMudlJlcVMoJ3Jlc291cmNlVHlwZScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ3NlcXVlbmNlVHlwZScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ251bWJlck9mU3VidW5pdHMnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdhcmVhT2ZIeWJyaWRpc2F0aW9uJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0Uygnb2xpZ29OdWNsZW90aWRlVHlwZScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdEEoJ3N1YnVuaXQnLGV4cHJlc3Npb24pXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=