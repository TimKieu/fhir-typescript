// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: Endpoint
import * as fhir from '../fhir.js';
// @ts-ignore
import { EndpointStatusCodings, } from '../fhirValueSets/EndpointStatusCodings.js';
// @ts-ignore
import { EndpointConnectionTypeCodings, } from '../fhirValueSets/EndpointConnectionTypeCodings.js';
/**
 * The technical details of an endpoint that can be used for electronic services, such as for web services providing XDS.b or a REST endpoint for another FHIR server. This may include any security context information.
 */
export class Endpoint extends fhir.DomainResource {
    /**
     * Default constructor for Endpoint - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'Endpoint';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['status']) {
            this.status = source.status;
        }
        else {
            this.status = null;
        }
        if (source['connectionType']) {
            this.connectionType = new fhir.Coding(source.connectionType);
        }
        else {
            this.connectionType = null;
        }
        if (source['name']) {
            this.name = new fhir.FhirString({ value: source.name });
        }
        if (source['managingOrganization']) {
            this.managingOrganization = new fhir.Reference(source.managingOrganization);
        }
        if (source['contact']) {
            this.contact = source.contact.map((x) => new fhir.ContactPoint(x));
        }
        else {
            this.contact = [];
        }
        if (source['period']) {
            this.period = new fhir.Period(source.period);
        }
        if (source['payloadType']) {
            this.payloadType = source.payloadType.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.payloadType = [];
        }
        if (source['payloadMimeType']) {
            this.payloadMimeType = source.payloadMimeType.map((x) => new fhir.FhirCode({ value: x }));
        }
        else {
            this.payloadMimeType = [];
        }
        if (source['address']) {
            this.address = new fhir.FhirUrl({ value: source.address });
        }
        else {
            this.address = null;
        }
        if (source['header']) {
            this.header = source.header.map((x) => new fhir.FhirString({ value: x }));
        }
        else {
            this.header = [];
        }
    }
    /**
     * Required-bound Value Set for status (Endpoint.status)
     */
    static statusRequiredCoding() {
        return EndpointStatusCodings;
    }
    /**
     * Extensible-bound Value Set for connectionType (Endpoint.connectionType)
     */
    static connectionTypeExtensibleCoding() {
        return EndpointConnectionTypeCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType:"Endpoint" fhir: Endpoint.resourceType:"Endpoint"', });
        }
        if (this["identifier"]) {
            this.identifier.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (!this['status']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property status:EndpointStatusCodeType fhir: Endpoint.status:code', });
        }
        if (!this['connectionType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property connectionType:fhir.Coding fhir: Endpoint.connectionType:Coding', });
        }
        if (this["connectionType"]) {
            issues.push(...this.connectionType.doModelValidation());
        }
        if (this["name"]) {
            issues.push(...this.name.doModelValidation());
        }
        if (this["managingOrganization"]) {
            issues.push(...this.managingOrganization.doModelValidation());
        }
        if (this["contact"]) {
            this.contact.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["period"]) {
            issues.push(...this.period.doModelValidation());
        }
        if (!this['payloadType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property payloadType:fhir.CodeableConcept[] fhir: Endpoint.payloadType:CodeableConcept', });
        }
        else if (!Array.isArray(this.payloadType)) {
            issues.push({ severity: 'error', code: 'structure', diagnostics: 'Found scalar in array property payloadType:fhir.CodeableConcept[] fhir: Endpoint.payloadType:CodeableConcept', });
        }
        else if (this.payloadType.length === 0) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property payloadType:fhir.CodeableConcept[] fhir: Endpoint.payloadType:CodeableConcept', });
        }
        if (this["payloadType"]) {
            this.payloadType.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["payloadMimeType"]) {
            this.payloadMimeType.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (!this['address']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property address:fhir.FhirUrl fhir: Endpoint.address:url', });
        }
        if (this["address"]) {
            issues.push(...this.address.doModelValidation());
        }
        if (this["header"]) {
            this.header.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
Endpoint._fts_dataType = 'Endpoint';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRW5kcG9pbnQuanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL0VuZHBvaW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQiwrQ0FBK0M7QUFDL0Msa0NBQWtDO0FBQ2xDLDBCQUEwQjtBQUUxQixPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQUVuQyxhQUFhO0FBQ2IsT0FBTyxFQUFFLHFCQUFxQixHQUE0QixNQUFNLDJDQUEyQyxDQUFDO0FBRzVHLGFBQWE7QUFDYixPQUFPLEVBQUUsNkJBQTZCLEdBQW9DLE1BQU0sbURBQW1ELENBQUM7QUE0RHBJOztHQUVHO0FBQ0gsTUFBTSxPQUFPLFFBQVMsU0FBUSxJQUFJLENBQUMsY0FBYztJQXdEL0M7O09BRUc7SUFDSCxZQUFZLFNBQStCLEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQ3JGLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxDQUFDLFlBQVksR0FBRyxVQUFVLENBQUM7UUFDL0IsSUFBSSxNQUFNLENBQUMsWUFBWSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQ2hHO1lBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxFQUFFLENBQUM7U0FBRTtRQUM5QixJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQztTQUFFO2FBQ2pEO1lBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7U0FBRTtRQUM1QixJQUFJLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJ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LENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQUU7UUFDeEcsSUFBSSxJQUFJLENBQUMsaUJBQWlCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQUU7UUFDaEgsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUNwQixNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFHLFdBQVcsRUFBRSwyRUFBMkUsR0FBRyxDQUFDLENBQUM7U0FDbEo7UUFDRCxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQzFFLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7U0FBRTtRQUM5RixPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQWhJRDs7R0FFRztBQUM2QixzQkFBYSxHQUFVLFVBQVUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNC5jb3JlIHZlcnNpb246IDQuMC4xXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogRW5kcG9pbnRcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEVuZHBvaW50U3RhdHVzQ29kaW5ncywgRW5kcG9pbnRTdGF0dXNDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9FbmRwb2ludFN0YXR1c0NvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEVuZHBvaW50U3RhdHVzQ29kZXMsICBFbmRwb2ludFN0YXR1c0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9FbmRwb2ludFN0YXR1c0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBFbmRwb2ludENvbm5lY3Rpb25UeXBlQ29kaW5ncywgRW5kcG9pbnRDb25uZWN0aW9uVHlwZUNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0VuZHBvaW50Q29ubmVjdGlvblR5cGVDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBFbmRwb2ludENvbm5lY3Rpb25UeXBlQ29kZXMsICBFbmRwb2ludENvbm5lY3Rpb25UeXBlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0VuZHBvaW50Q29ubmVjdGlvblR5cGVDb2Rlcy5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBFbmRwb2ludCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBFbmRwb2ludEFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIkVuZHBvaW50XCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXIgZm9yIHRoZSBvcmdhbml6YXRpb24gdGhhdCBpcyB1c2VkIHRvIGlkZW50aWZ5IHRoZSBlbmRwb2ludCBhY3Jvc3MgbXVsdGlwbGUgZGlzcGFyYXRlIHN5c3RlbXMuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IGlzIGxhYmVsZWQgYXMgYSBtb2RpZmllciBiZWNhdXNlIHRoZSBzdGF0dXMgY29udGFpbnMgY29kZXMgdGhhdCBtYXJrIHRoZSBlbmRwb2ludCBhcyBub3QgY3VycmVudGx5IHZhbGlkLlxyXG4gICAqL1xyXG4gIHN0YXR1czogRW5kcG9pbnRTdGF0dXNDb2RlVHlwZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEZvciBhZGRpdGlvbmFsIGNvbm5lY3Rpdml0eSBkZXRhaWxzIGZvciB0aGUgcHJvdG9jb2wsIGV4dGVuc2lvbnMgd2lsbCBiZSB1c2VkIGF0IHRoaXMgcG9pbnQsIGFzIGluIHRoZSBYRFMgZXhhbXBsZS5cclxuICAgKi9cclxuICBjb25uZWN0aW9uVHlwZTogZmhpci5Db2RpbmdBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogQSBmcmllbmRseSBuYW1lIHRoYXQgdGhpcyBlbmRwb2ludCBjYW4gYmUgcmVmZXJyZWQgdG8gd2l0aC5cclxuICAgKi9cclxuICBuYW1lPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBwcm9wZXJ0eSBpcyBub3QgdHlwaWNhbGx5IHVzZWQgd2hlbiBzZWFyY2hpbmcgZm9yIEVuZHBvaW50IHJlc291cmNlcyBmb3IgdXNhZ2UuIFRoZSB0eXBpY2FsIHVzYWdlIGlzIHZpYSB0aGUgcmVmZXJlbmNlIGZyb20gYW4gYXBwbGljYWJsZSBPcmdhbml6YXRpb24vTG9jYXRpb24vUHJhY3RpdGlvbmVyIHJlc291cmNlLCB3aGljaCBpcyB3aGVyZSB0aGUgY29udGV4dCBpcyBwcm92aWRlZC4gTXVsdGlwbGUgTG9jYXRpb25zIG1heSByZWZlcmVuY2UgYSBzaW5nbGUgZW5kcG9pbnQsIGFuZCBkb24ndCBoYXZlIHRvIGJlIHdpdGhpbiB0aGUgc2FtZSBvcmdhbml6YXRpb24gcmVzb3VyY2UsIGJ1dCBtb3N0IGxpa2VseSB3aXRoaW4gdGhlIHNhbWUgb3JnYW5pemF0aW9uYWwgaGllcmFyY2h5LlxyXG4gICAqL1xyXG4gIG1hbmFnaW5nT3JnYW5pemF0aW9uPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDb250YWN0IGRldGFpbHMgZm9yIGEgaHVtYW4gdG8gY29udGFjdCBhYm91dCB0aGUgc3Vic2NyaXB0aW9uLiBUaGUgcHJpbWFyeSB1c2Ugb2YgdGhpcyBmb3Igc3lzdGVtIGFkbWluaXN0cmF0b3IgdHJvdWJsZXNob290aW5nLlxyXG4gICAqL1xyXG4gIGNvbnRhY3Q/OiBmaGlyLkNvbnRhY3RQb2ludEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGludGVydmFsIGR1cmluZyB3aGljaCB0aGUgZW5kcG9pbnQgaXMgZXhwZWN0ZWQgdG8gYmUgb3BlcmF0aW9uYWwuXHJcbiAgICovXHJcbiAgcGVyaW9kPzogZmhpci5QZXJpb2RBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcGF5bG9hZEZvcm1hdCBkZXNjcmliZXMgdGhlIHNlcmlhbGl6YXRpb24gZm9ybWF0IG9mIHRoZSBkYXRhLCB3aGVyZSB0aGUgcGF5bG9hZFR5cGUgaW5kaWNhdGVzIHRoZSBzcGVjaWZpYyBkb2N1bWVudC9zY2hlbWEgdGhhdCBpcyBiZWluZyB0cmFuc2ZlcnJlZDsgZS5nLiBEaXNjaGFyZ2VTdW1tYXJ5IG9yIENhcmVQbGFuLlxyXG4gICAqL1xyXG4gIHBheWxvYWRUeXBlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFNlbmRpbmcgdGhlIHBheWxvYWQgaGFzIG9idmlvdXMgc2VjdXJpdHkgY29uc2VxdWVuY2VzLiBUaGUgc2VydmVyIGlzIHJlc3BvbnNpYmxlIGZvciBlbnN1cmluZyB0aGF0IHRoZSBjb250ZW50IGlzIGFwcHJvcHJpYXRlbHkgc2VjdXJlZC5cclxuICAgKi9cclxuICBwYXlsb2FkTWltZVR5cGU/OiBmaGlyLkZoaXJDb2RlW118c3RyaW5nW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEZvciByZXN0LWhvb2ssIGFuZCB3ZWJzb2NrZXQsIHRoZSBlbmQtcG9pbnQgbXVzdCBiZSBhbiBodHRwOiBvciBodHRwczogVVJMOyBmb3IgZW1haWwsIGEgbWFpbHRvOiB1cmwsIGZvciBzbXMsIGEgdGVsOiB1cmwsIGFuZCBmb3IgbWVzc2FnZSB0aGUgZW5kcG9pbnQgY2FuIGJlIGluIGFueSBmb3JtIG9mIHVybCB0aGUgc2VydmVyIHVuZGVyc3RhbmRzICh1c3VhbGx5LCBodHRwOiBvciBtbGxwOikuIFRoZSBVUkkgaXMgYWxsb3dlZCB0byBiZSByZWxhdGl2ZTsgaW4gd2hpY2ggY2FzZSwgaXQgaXMgcmVsYXRpdmUgdG8gdGhlIHNlcnZlciBlbmQtcG9pbnQgKHNpbmNlIHRoZXJlIG1heSBiZSBtb3JlIHRoYW4gb25lLCBjbGllbnRzIHNob3VsZCBhdm9pZCB1c2luZyByZWxhdGl2ZSBVUklzKVxyXG4gICAqIFRoaXMgYWRkcmVzcyB3aWxsIGJlIHRvIHRoZSBzZXJ2aWNlIGJhc2UsIHdpdGhvdXQgYW55IHBhcmFtZXRlcnMsIG9yIHN1Yi1zZXJ2aWNlcyBvciByZXNvdXJjZXMgdGFja2VkIG9uLlxyXG4gICAqIEUuZy4gZm9yIGEgV0FETy1SUyBlbmRwb2ludCwgdGhlIHVybCBzaG91bGQgYmUgXCJodHRwczovL3BhY3MuaG9zcGl0YWwub3JnL3dhZG8tcnNcIlxyXG4gICAqIGFuZCBub3QgXCJodHRwczovL3BhY3MuaG9zcGl0YWwub3JnL3dhZG8tcnMvc3R1ZGllcy8xLjIuMjUwLjEuNTkuNDAyMTEuMTIzNDU2NzguNjc4OTEwL3Nlcmllcy8xLjIuMjUwLjEuNTkuNDAyMTEuNzg5MDAxMjc2LjE0NTU2MTcyLjY3Nzg5L2luc3RhbmNlcy8uLi5cIi5cclxuICAgKi9cclxuICBhZGRyZXNzOiBmaGlyLkZoaXJVcmx8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeGFjdGx5IHdoYXQgdGhlc2UgbWVhbiBkZXBlbmRzIG9uIHRoZSBjaGFubmVsIHR5cGUuIFRoZSBjYW4gY29udmV5IGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gdG8gdGhlIHJlY2lwaWVudCBhbmQvb3IgbWVldCBzZWN1cml0eSByZXF1aXJlbWVudHMuXHJcbiAgICovXHJcbiAgaGVhZGVyPzogZmhpci5GaGlyU3RyaW5nW118c3RyaW5nW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlIHRlY2huaWNhbCBkZXRhaWxzIG9mIGFuIGVuZHBvaW50IHRoYXQgY2FuIGJlIHVzZWQgZm9yIGVsZWN0cm9uaWMgc2VydmljZXMsIHN1Y2ggYXMgZm9yIHdlYiBzZXJ2aWNlcyBwcm92aWRpbmcgWERTLmIgb3IgYSBSRVNUIGVuZHBvaW50IGZvciBhbm90aGVyIEZISVIgc2VydmVyLiBUaGlzIG1heSBpbmNsdWRlIGFueSBzZWN1cml0eSBjb250ZXh0IGluZm9ybWF0aW9uLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEVuZHBvaW50IGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdFbmRwb2ludCc7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJFbmRwb2ludFwiO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXIgZm9yIHRoZSBvcmdhbml6YXRpb24gdGhhdCBpcyB1c2VkIHRvIGlkZW50aWZ5IHRoZSBlbmRwb2ludCBhY3Jvc3MgbXVsdGlwbGUgZGlzcGFyYXRlIHN5c3RlbXMuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJbXTtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIGJlY2F1c2UgdGhlIHN0YXR1cyBjb250YWlucyBjb2RlcyB0aGF0IG1hcmsgdGhlIGVuZHBvaW50IGFzIG5vdCBjdXJyZW50bHkgdmFsaWQuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1czogRW5kcG9pbnRTdGF0dXNDb2RlVHlwZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEZvciBhZGRpdGlvbmFsIGNvbm5lY3Rpdml0eSBkZXRhaWxzIGZvciB0aGUgcHJvdG9jb2wsIGV4dGVuc2lvbnMgd2lsbCBiZSB1c2VkIGF0IHRoaXMgcG9pbnQsIGFzIGluIHRoZSBYRFMgZXhhbXBsZS5cclxuICAgKi9cclxuICBwdWJsaWMgY29ubmVjdGlvblR5cGU6IGZoaXIuQ29kaW5nfG51bGw7XHJcbiAgLyoqXHJcbiAgICogQSBmcmllbmRseSBuYW1lIHRoYXQgdGhpcyBlbmRwb2ludCBjYW4gYmUgcmVmZXJyZWQgdG8gd2l0aC5cclxuICAgKi9cclxuICBwdWJsaWMgbmFtZT86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBwcm9wZXJ0eSBpcyBub3QgdHlwaWNhbGx5IHVzZWQgd2hlbiBzZWFyY2hpbmcgZm9yIEVuZHBvaW50IHJlc291cmNlcyBmb3IgdXNhZ2UuIFRoZSB0eXBpY2FsIHVzYWdlIGlzIHZpYSB0aGUgcmVmZXJlbmNlIGZyb20gYW4gYXBwbGljYWJsZSBPcmdhbml6YXRpb24vTG9jYXRpb24vUHJhY3RpdGlvbmVyIHJlc291cmNlLCB3aGljaCBpcyB3aGVyZSB0aGUgY29udGV4dCBpcyBwcm92aWRlZC4gTXVsdGlwbGUgTG9jYXRpb25zIG1heSByZWZlcmVuY2UgYSBzaW5nbGUgZW5kcG9pbnQsIGFuZCBkb24ndCBoYXZlIHRvIGJlIHdpdGhpbiB0aGUgc2FtZSBvcmdhbml6YXRpb24gcmVzb3VyY2UsIGJ1dCBtb3N0IGxpa2VseSB3aXRoaW4gdGhlIHNhbWUgb3JnYW5pemF0aW9uYWwgaGllcmFyY2h5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtYW5hZ2luZ09yZ2FuaXphdGlvbj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDb250YWN0IGRldGFpbHMgZm9yIGEgaHVtYW4gdG8gY29udGFjdCBhYm91dCB0aGUgc3Vic2NyaXB0aW9uLiBUaGUgcHJpbWFyeSB1c2Ugb2YgdGhpcyBmb3Igc3lzdGVtIGFkbWluaXN0cmF0b3IgdHJvdWJsZXNob290aW5nLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb250YWN0PzogZmhpci5Db250YWN0UG9pbnRbXTtcclxuICAvKipcclxuICAgKiBUaGUgaW50ZXJ2YWwgZHVyaW5nIHdoaWNoIHRoZSBlbmRwb2ludCBpcyBleHBlY3RlZCB0byBiZSBvcGVyYXRpb25hbC5cclxuICAgKi9cclxuICBwdWJsaWMgcGVyaW9kPzogZmhpci5QZXJpb2R8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXlsb2FkRm9ybWF0IGRlc2NyaWJlcyB0aGUgc2VyaWFsaXphdGlvbiBmb3JtYXQgb2YgdGhlIGRhdGEsIHdoZXJlIHRoZSBwYXlsb2FkVHlwZSBpbmRpY2F0ZXMgdGhlIHNwZWNpZmljIGRvY3VtZW50L3NjaGVtYSB0aGF0IGlzIGJlaW5nIHRyYW5zZmVycmVkOyBlLmcuIERpc2NoYXJnZVN1bW1hcnkgb3IgQ2FyZVBsYW4uXHJcbiAgICovXHJcbiAgcHVibGljIHBheWxvYWRUeXBlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIFNlbmRpbmcgdGhlIHBheWxvYWQgaGFzIG9idmlvdXMgc2VjdXJpdHkgY29uc2VxdWVuY2VzLiBUaGUgc2VydmVyIGlzIHJlc3BvbnNpYmxlIGZvciBlbnN1cmluZyB0aGF0IHRoZSBjb250ZW50IGlzIGFwcHJvcHJpYXRlbHkgc2VjdXJlZC5cclxuICAgKi9cclxuICBwdWJsaWMgcGF5bG9hZE1pbWVUeXBlPzogZmhpci5GaGlyQ29kZVtdO1xyXG4gIC8qKlxyXG4gICAqIEZvciByZXN0LWhvb2ssIGFuZCB3ZWJzb2NrZXQsIHRoZSBlbmQtcG9pbnQgbXVzdCBiZSBhbiBodHRwOiBvciBodHRwczogVVJMOyBmb3IgZW1haWwsIGEgbWFpbHRvOiB1cmwsIGZvciBzbXMsIGEgdGVsOiB1cmwsIGFuZCBmb3IgbWVzc2FnZSB0aGUgZW5kcG9pbnQgY2FuIGJlIGluIGFueSBmb3JtIG9mIHVybCB0aGUgc2VydmVyIHVuZGVyc3RhbmRzICh1c3VhbGx5LCBodHRwOiBvciBtbGxwOikuIFRoZSBVUkkgaXMgYWxsb3dlZCB0byBiZSByZWxhdGl2ZTsgaW4gd2hpY2ggY2FzZSwgaXQgaXMgcmVsYXRpdmUgdG8gdGhlIHNlcnZlciBlbmQtcG9pbnQgKHNpbmNlIHRoZXJlIG1heSBiZSBtb3JlIHRoYW4gb25lLCBjbGllbnRzIHNob3VsZCBhdm9pZCB1c2luZyByZWxhdGl2ZSBVUklzKVxyXG4gICAqIFRoaXMgYWRkcmVzcyB3aWxsIGJlIHRvIHRoZSBzZXJ2aWNlIGJhc2UsIHdpdGhvdXQgYW55IHBhcmFtZXRlcnMsIG9yIHN1Yi1zZXJ2aWNlcyBvciByZXNvdXJjZXMgdGFja2VkIG9uLlxyXG4gICAqIEUuZy4gZm9yIGEgV0FETy1SUyBlbmRwb2ludCwgdGhlIHVybCBzaG91bGQgYmUgXCJodHRwczovL3BhY3MuaG9zcGl0YWwub3JnL3dhZG8tcnNcIlxyXG4gICAqIGFuZCBub3QgXCJodHRwczovL3BhY3MuaG9zcGl0YWwub3JnL3dhZG8tcnMvc3R1ZGllcy8xLjIuMjUwLjEuNTkuNDAyMTEuMTIzNDU2NzguNjc4OTEwL3Nlcmllcy8xLjIuMjUwLjEuNTkuNDAyMTEuNzg5MDAxMjc2LjE0NTU2MTcyLjY3Nzg5L2luc3RhbmNlcy8uLi5cIi5cclxuICAgKi9cclxuICBwdWJsaWMgYWRkcmVzczogZmhpci5GaGlyVXJsfG51bGw7XHJcbiAgLyoqXHJcbiAgICogRXhhY3RseSB3aGF0IHRoZXNlIG1lYW4gZGVwZW5kcyBvbiB0aGUgY2hhbm5lbCB0eXBlLiBUaGUgY2FuIGNvbnZleSBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIHRvIHRoZSByZWNpcGllbnQgYW5kL29yIG1lZXQgc2VjdXJpdHkgcmVxdWlyZW1lbnRzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBoZWFkZXI/OiBmaGlyLkZoaXJTdHJpbmdbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBFbmRwb2ludCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEVuZHBvaW50QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ0VuZHBvaW50JztcclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBzb3VyY2UuaWRlbnRpZmllci5tYXAoKHgpID0+IG5ldyBmaGlyLklkZW50aWZpZXIoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pZGVudGlmaWVyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0YXR1cyddKSB7IHRoaXMuc3RhdHVzID0gc291cmNlLnN0YXR1czsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29ubmVjdGlvblR5cGUnXSkgeyB0aGlzLmNvbm5lY3Rpb25UeXBlID0gbmV3IGZoaXIuQ29kaW5nKHNvdXJjZS5jb25uZWN0aW9uVHlwZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvbm5lY3Rpb25UeXBlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbmFtZSddKSB7IHRoaXMubmFtZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UubmFtZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydtYW5hZ2luZ09yZ2FuaXphdGlvbiddKSB7IHRoaXMubWFuYWdpbmdPcmdhbml6YXRpb24gPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLm1hbmFnaW5nT3JnYW5pemF0aW9uKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29udGFjdCddKSB7IHRoaXMuY29udGFjdCA9IHNvdXJjZS5jb250YWN0Lm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29udGFjdFBvaW50KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY29udGFjdCA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwZXJpb2QnXSkgeyB0aGlzLnBlcmlvZCA9IG5ldyBmaGlyLlBlcmlvZChzb3VyY2UucGVyaW9kKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncGF5bG9hZFR5cGUnXSkgeyB0aGlzLnBheWxvYWRUeXBlID0gc291cmNlLnBheWxvYWRUeXBlLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucGF5bG9hZFR5cGUgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncGF5bG9hZE1pbWVUeXBlJ10pIHsgdGhpcy5wYXlsb2FkTWltZVR5cGUgPSBzb3VyY2UucGF5bG9hZE1pbWVUeXBlLm1hcCgoeCkgPT4gbmV3IGZoaXIuRmhpckNvZGUoe3ZhbHVlOiB4fSkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wYXlsb2FkTWltZVR5cGUgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYWRkcmVzcyddKSB7IHRoaXMuYWRkcmVzcyA9IG5ldyBmaGlyLkZoaXJVcmwoe3ZhbHVlOiBzb3VyY2UuYWRkcmVzc30pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5hZGRyZXNzID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaGVhZGVyJ10pIHsgdGhpcy5oZWFkZXIgPSBzb3VyY2UuaGVhZGVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHh9KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmhlYWRlciA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlcXVpcmVkLWJvdW5kIFZhbHVlIFNldCBmb3Igc3RhdHVzIChFbmRwb2ludC5zdGF0dXMpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBzdGF0dXNSZXF1aXJlZENvZGluZygpOkVuZHBvaW50U3RhdHVzQ29kaW5nVHlwZSB7XHJcbiAgICByZXR1cm4gRW5kcG9pbnRTdGF0dXNDb2RpbmdzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBFeHRlbnNpYmxlLWJvdW5kIFZhbHVlIFNldCBmb3IgY29ubmVjdGlvblR5cGUgKEVuZHBvaW50LmNvbm5lY3Rpb25UeXBlKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgY29ubmVjdGlvblR5cGVFeHRlbnNpYmxlQ29kaW5nKCk6RW5kcG9pbnRDb25uZWN0aW9uVHlwZUNvZGluZ1R5cGUge1xyXG4gICAgcmV0dXJuIEVuZHBvaW50Q29ubmVjdGlvblR5cGVDb2RpbmdzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKCF0aGlzWydyZXNvdXJjZVR5cGUnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCAgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHJlc291cmNlVHlwZTpcIkVuZHBvaW50XCIgZmhpcjogRW5kcG9pbnQucmVzb3VyY2VUeXBlOlwiRW5kcG9pbnRcIicsIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJpZGVudGlmaWVyXCJdKSB7IHRoaXMuaWRlbnRpZmllci5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICghdGhpc1snc3RhdHVzJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBzdGF0dXM6RW5kcG9pbnRTdGF0dXNDb2RlVHlwZSBmaGlyOiBFbmRwb2ludC5zdGF0dXM6Y29kZScsIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCF0aGlzWydjb25uZWN0aW9uVHlwZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsICBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgY29ubmVjdGlvblR5cGU6Zmhpci5Db2RpbmcgZmhpcjogRW5kcG9pbnQuY29ubmVjdGlvblR5cGU6Q29kaW5nJywgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImNvbm5lY3Rpb25UeXBlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY29ubmVjdGlvblR5cGUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wibmFtZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm5hbWUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wibWFuYWdpbmdPcmdhbml6YXRpb25cIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5tYW5hZ2luZ09yZ2FuaXphdGlvbi5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJjb250YWN0XCJdKSB7IHRoaXMuY29udGFjdC5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wicGVyaW9kXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucGVyaW9kLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAoIXRoaXNbJ3BheWxvYWRUeXBlJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBwYXlsb2FkVHlwZTpmaGlyLkNvZGVhYmxlQ29uY2VwdFtdIGZoaXI6IEVuZHBvaW50LnBheWxvYWRUeXBlOkNvZGVhYmxlQ29uY2VwdCcsIH0pO1xyXG4gICAgfSBlbHNlIGlmICghQXJyYXkuaXNBcnJheSh0aGlzLnBheWxvYWRUeXBlKSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnc3RydWN0dXJlJywgIGRpYWdub3N0aWNzOiAnRm91bmQgc2NhbGFyIGluIGFycmF5IHByb3BlcnR5IHBheWxvYWRUeXBlOmZoaXIuQ29kZWFibGVDb25jZXB0W10gZmhpcjogRW5kcG9pbnQucGF5bG9hZFR5cGU6Q29kZWFibGVDb25jZXB0JywgfSk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMucGF5bG9hZFR5cGUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsICBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgcGF5bG9hZFR5cGU6Zmhpci5Db2RlYWJsZUNvbmNlcHRbXSBmaGlyOiBFbmRwb2ludC5wYXlsb2FkVHlwZTpDb2RlYWJsZUNvbmNlcHQnLCB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wicGF5bG9hZFR5cGVcIl0pIHsgdGhpcy5wYXlsb2FkVHlwZS5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wicGF5bG9hZE1pbWVUeXBlXCJdKSB7IHRoaXMucGF5bG9hZE1pbWVUeXBlLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKCF0aGlzWydhZGRyZXNzJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBhZGRyZXNzOmZoaXIuRmhpclVybCBmaGlyOiBFbmRwb2ludC5hZGRyZXNzOnVybCcsIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJhZGRyZXNzXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuYWRkcmVzcy5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJoZWFkZXJcIl0pIHsgdGhpcy5oZWFkZXIuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=