// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: MedicinalProductPharmaceutical
import * as fhir from '../fhir.js';
/**
 * Characteristics e.g. a products onset of action.
 */
export class MedicinalProductPharmaceuticalCharacteristics extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductPharmaceuticalCharacteristics - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        else {
            this.code = null;
        }
        if (source['status']) {
            this.status = new fhir.CodeableConcept(source.status);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicinalProductPharmaceutical.characteristics';
        }
        this.vRS('code', exp);
        this.vOS('status', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductPharmaceuticalCharacteristics._fts_dataType = 'MedicinalProductPharmaceuticalCharacteristics';
/**
 * A species specific time during which consumption of animal product is not appropriate.
 */
export class MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpeciesWithdrawalPeriod extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpeciesWithdrawalPeriod - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['tissue']) {
            this.tissue = new fhir.CodeableConcept(source.tissue);
        }
        else {
            this.tissue = null;
        }
        if (source['value']) {
            this.value = new fhir.Quantity(source.value);
        }
        else {
            this.value = null;
        }
        if (source['supportingInformation']) {
            this.supportingInformation = new fhir.FhirString({ value: source.supportingInformation });
        }
        if (source['_supportingInformation']) {
            if (this.supportingInformation) {
                this.supportingInformation.addExtendedProperties(source._supportingInformation);
            }
            else {
                this.supportingInformation = new fhir.FhirString(source._supportingInformation);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicinalProductPharmaceutical.routeOfAdministration.targetSpecies.withdrawalPeriod';
        }
        this.vRS('tissue', exp);
        this.vRS('value', exp);
        this.vOS('supportingInformation', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpeciesWithdrawalPeriod._fts_dataType = 'MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpeciesWithdrawalPeriod';
/**
 * A species for which this route applies.
 */
export class MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpecies extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpecies - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        else {
            this.code = null;
        }
        if (source['withdrawalPeriod']) {
            this.withdrawalPeriod = source.withdrawalPeriod.map((x) => new fhir.MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpeciesWithdrawalPeriod(x));
        }
        else {
            this.withdrawalPeriod = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicinalProductPharmaceutical.routeOfAdministration.targetSpecies';
        }
        this.vRS('code', exp);
        this.vOA('withdrawalPeriod', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpecies._fts_dataType = 'MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpecies';
/**
 * The path by which the pharmaceutical product is taken into or makes contact with the body.
 */
export class MedicinalProductPharmaceuticalRouteOfAdministration extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductPharmaceuticalRouteOfAdministration - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        else {
            this.code = null;
        }
        if (source['firstDose']) {
            this.firstDose = new fhir.Quantity(source.firstDose);
        }
        if (source['maxSingleDose']) {
            this.maxSingleDose = new fhir.Quantity(source.maxSingleDose);
        }
        if (source['maxDosePerDay']) {
            this.maxDosePerDay = new fhir.Quantity(source.maxDosePerDay);
        }
        if (source['maxDosePerTreatmentPeriod']) {
            this.maxDosePerTreatmentPeriod = new fhir.Ratio(source.maxDosePerTreatmentPeriod);
        }
        if (source['maxTreatmentPeriod']) {
            this.maxTreatmentPeriod = new fhir.Duration(source.maxTreatmentPeriod);
        }
        if (source['targetSpecies']) {
            this.targetSpecies = source.targetSpecies.map((x) => new fhir.MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpecies(x));
        }
        else {
            this.targetSpecies = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicinalProductPharmaceutical.routeOfAdministration';
        }
        this.vRS('code', exp);
        this.vOS('firstDose', exp);
        this.vOS('maxSingleDose', exp);
        this.vOS('maxDosePerDay', exp);
        this.vOS('maxDosePerTreatmentPeriod', exp);
        this.vOS('maxTreatmentPeriod', exp);
        this.vOA('targetSpecies', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductPharmaceuticalRouteOfAdministration._fts_dataType = 'MedicinalProductPharmaceuticalRouteOfAdministration';
/**
 * A pharmaceutical product described in terms of its composition and dose form.
 */
export class MedicinalProductPharmaceutical extends fhir.DomainResource {
    /**
     * Default constructor for MedicinalProductPharmaceutical - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'MedicinalProductPharmaceutical';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['administrableDoseForm']) {
            this.administrableDoseForm = new fhir.CodeableConcept(source.administrableDoseForm);
        }
        else {
            this.administrableDoseForm = null;
        }
        if (source['unitOfPresentation']) {
            this.unitOfPresentation = new fhir.CodeableConcept(source.unitOfPresentation);
        }
        if (source['ingredient']) {
            this.ingredient = source.ingredient.map((x) => new fhir.Reference(x));
        }
        else {
            this.ingredient = [];
        }
        if (source['device']) {
            this.device = source.device.map((x) => new fhir.Reference(x));
        }
        else {
            this.device = [];
        }
        if (source['characteristics']) {
            this.characteristics = source.characteristics.map((x) => new fhir.MedicinalProductPharmaceuticalCharacteristics(x));
        }
        else {
            this.characteristics = [];
        }
        if (source['routeOfAdministration']) {
            this.routeOfAdministration = source.routeOfAdministration.map((x) => new fhir.MedicinalProductPharmaceuticalRouteOfAdministration(x));
        }
        else {
            this.routeOfAdministration = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicinalProductPharmaceutical';
        }
        this.vRS('resourceType', exp);
        this.vOA('identifier', exp);
        this.vRS('administrableDoseForm', exp);
        this.vOS('unitOfPresentation', exp);
        this.vOA('ingredient', exp);
        this.vOA('device', exp);
        this.vOA('characteristics', exp);
        this.vRA('routeOfAdministration', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductPharmaceutical._fts_dataType = 'MedicinalProductPharmaceutical';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9NZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsZ0RBQWdEO0FBRWhELE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBZ0JuQzs7R0FFRztBQUNILE1BQU0sT0FBTyw2Q0FBOEMsU0FBUSxJQUFJLENBQUMsZUFBZTtJQWFyRjs7T0FFRztJQUNILFlBQVksU0FBb0UsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDMUgsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUFFO2FBQ3JFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7U0FBRTtRQUMxQixJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUFFO0lBQ2xGLENBQUM7SUFDRDs7T0FFRztJQUNhLGlCQUFpQixDQUFDLE1BQWEsRUFBRTtRQUMvQyxJQUFJLE1BQU0sR0FBbUIsS0FBSyxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzFELElBQUksR0FBRyxLQUFLLEVBQUUsRUFBRTtZQUFFLEdBQUcsR0FBRyxnREFBZ0QsQ0FBQTtTQUFFO1FBQzFFLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ3BCLElBQUksQ0FB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LEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxtREFBbUQsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDMUs7WUFBRSxJQUFJLENBQUMscUJBQXFCLEdBQUcsRUFBRSxDQUFDO1NBQUU7SUFDM0MsQ0FBQztJQUNEOztPQUVHO0lBQ2EsaUJBQWlCLENBQUMsTUFBYSxFQUFFO1FBQy9DLElBQUksTUFBTSxHQUFtQixLQUFLLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDMUQsSUFBSSxHQUFHLEtBQUssRUFBRSxFQUFFO1lBQUUsR0FBRyxHQUFHLGdDQUFnQyxDQUFBO1NBQUU7UUFDMUQsSUFBSSxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDNUIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDMUIsSUFBSSxDQUFDLEdBQUcsQ0FBQyx1QkFBdUIsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUNyQyxJQUFJLENBQUMsR0FBRyxDQUFDLG9CQUFvQixFQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ2xDLElBQUksQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQzFCLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ3RCLElBQUksQ0FBQyxHQUFHLENBQUMsaUJBQWlCLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDL0IsSUFBSSxDQUFDLEdBQUcsQ0FBQyx1QkFBdUIsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUNyQyxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQXZFRDs7R0FFRztBQUM2Qiw0Q0FBYSxHQUFVLGdDQUFnQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0LmNvcmUgdmVyc2lvbjogNC4wLjFcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsQ2hhcmFjdGVyaXN0aWNzIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbENoYXJhY3RlcmlzdGljc0FyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEEgY29kZWQgY2hhcmFjdGVyaXN0aWMuXHJcbiAgICovXHJcbiAgY29kZTogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIHN0YXR1cyBvZiBjaGFyYWN0ZXJpc3RpYyBlLmcuIGFzc2lnbmVkIG9yIHBlbmRpbmcuXHJcbiAgICovXHJcbiAgc3RhdHVzPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoYXJhY3RlcmlzdGljcyBlLmcuIGEgcHJvZHVjdHMgb25zZXQgb2YgYWN0aW9uLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbENoYXJhY3RlcmlzdGljcyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ01lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbENoYXJhY3RlcmlzdGljcyc7XHJcbiAgLyoqXHJcbiAgICogQSBjb2RlZCBjaGFyYWN0ZXJpc3RpYy5cclxuICAgKi9cclxuICBwdWJsaWMgY29kZTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgc3RhdHVzIG9mIGNoYXJhY3RlcmlzdGljIGUuZy4gYXNzaWduZWQgb3IgcGVuZGluZy5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdHVzPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbENoYXJhY3RlcmlzdGljcyAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbENoYXJhY3RlcmlzdGljc0FyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jb2RlKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY29kZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0YXR1cyddKSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5zdGF0dXMpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsLmNoYXJhY3RlcmlzdGljcycgfVxyXG4gICAgdGhpcy52UlMoJ2NvZGUnLGV4cClcclxuICAgIHRoaXMudk9TKCdzdGF0dXMnLGV4cClcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxSb3V0ZU9mQWRtaW5pc3RyYXRpb25UYXJnZXRTcGVjaWVzV2l0aGRyYXdhbFBlcmlvZCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxSb3V0ZU9mQWRtaW5pc3RyYXRpb25UYXJnZXRTcGVjaWVzV2l0aGRyYXdhbFBlcmlvZEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIENvZGVkIGV4cHJlc3Npb24gZm9yIHRoZSB0eXBlIG9mIHRpc3N1ZSBmb3Igd2hpY2ggdGhlIHdpdGhkcmF3YWwgcGVyaW9kIGFwcGx1ZXMsIGUuZy4gbWVhdCwgbWlsay5cclxuICAgKi9cclxuICB0aXNzdWU6IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIEEgdmFsdWUgZm9yIHRoZSB0aW1lLlxyXG4gICAqL1xyXG4gIHZhbHVlOiBmaGlyLlF1YW50aXR5QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIEV4dHJhIGluZm9ybWF0aW9uIGFib3V0IHRoZSB3aXRoZHJhd2FsIHBlcmlvZC5cclxuICAgKi9cclxuICBzdXBwb3J0aW5nSW5mb3JtYXRpb24/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsLnJvdXRlT2ZBZG1pbmlzdHJhdGlvbi50YXJnZXRTcGVjaWVzLndpdGhkcmF3YWxQZXJpb2Quc3VwcG9ydGluZ0luZm9ybWF0aW9uXHJcbiAgICovXHJcbiAgX3N1cHBvcnRpbmdJbmZvcm1hdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBIHNwZWNpZXMgc3BlY2lmaWMgdGltZSBkdXJpbmcgd2hpY2ggY29uc3VtcHRpb24gb2YgYW5pbWFsIHByb2R1Y3QgaXMgbm90IGFwcHJvcHJpYXRlLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbFJvdXRlT2ZBZG1pbmlzdHJhdGlvblRhcmdldFNwZWNpZXNXaXRoZHJhd2FsUGVyaW9kIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsUm91dGVPZkFkbWluaXN0cmF0aW9uVGFyZ2V0U3BlY2llc1dpdGhkcmF3YWxQZXJpb2QnO1xyXG4gIC8qKlxyXG4gICAqIENvZGVkIGV4cHJlc3Npb24gZm9yIHRoZSB0eXBlIG9mIHRpc3N1ZSBmb3Igd2hpY2ggdGhlIHdpdGhkcmF3YWwgcGVyaW9kIGFwcGx1ZXMsIGUuZy4gbWVhdCwgbWlsay5cclxuICAgKi9cclxuICBwdWJsaWMgdGlzc3VlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEEgdmFsdWUgZm9yIHRoZSB0aW1lLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB2YWx1ZTogZmhpci5RdWFudGl0eXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEV4dHJhIGluZm9ybWF0aW9uIGFib3V0IHRoZSB3aXRoZHJhd2FsIHBlcmlvZC5cclxuICAgKi9cclxuICBwdWJsaWMgc3VwcG9ydGluZ0luZm9ybWF0aW9uPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxSb3V0ZU9mQWRtaW5pc3RyYXRpb25UYXJnZXRTcGVjaWVzV2l0aGRyYXdhbFBlcmlvZCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbFJvdXRlT2ZBZG1pbmlzdHJhdGlvblRhcmdldFNwZWNpZXNXaXRoZHJhd2FsUGVyaW9kQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3Rpc3N1ZSddKSB7IHRoaXMudGlzc3VlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS50aXNzdWUpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy50aXNzdWUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWyd2YWx1ZSddKSB7IHRoaXMudmFsdWUgPSBuZXcgZmhpci5RdWFudGl0eShzb3VyY2UudmFsdWUpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy52YWx1ZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N1cHBvcnRpbmdJbmZvcm1hdGlvbiddKSB7IHRoaXMuc3VwcG9ydGluZ0luZm9ybWF0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5zdXBwb3J0aW5nSW5mb3JtYXRpb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3N1cHBvcnRpbmdJbmZvcm1hdGlvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLnN1cHBvcnRpbmdJbmZvcm1hdGlvbikgeyB0aGlzLnN1cHBvcnRpbmdJbmZvcm1hdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zdXBwb3J0aW5nSW5mb3JtYXRpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zdXBwb3J0aW5nSW5mb3JtYXRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fc3VwcG9ydGluZ0luZm9ybWF0aW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsLnJvdXRlT2ZBZG1pbmlzdHJhdGlvbi50YXJnZXRTcGVjaWVzLndpdGhkcmF3YWxQZXJpb2QnIH1cclxuICAgIHRoaXMudlJTKCd0aXNzdWUnLGV4cClcclxuICAgIHRoaXMudlJTKCd2YWx1ZScsZXhwKVxyXG4gICAgdGhpcy52T1MoJ3N1cHBvcnRpbmdJbmZvcm1hdGlvbicsZXhwKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbFJvdXRlT2ZBZG1pbmlzdHJhdGlvblRhcmdldFNwZWNpZXMgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsUm91dGVPZkFkbWluaXN0cmF0aW9uVGFyZ2V0U3BlY2llc0FyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIENvZGVkIGV4cHJlc3Npb24gZm9yIHRoZSBzcGVjaWVzLlxyXG4gICAqL1xyXG4gIGNvZGU6IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIEEgc3BlY2llcyBzcGVjaWZpYyB0aW1lIGR1cmluZyB3aGljaCBjb25zdW1wdGlvbiBvZiBhbmltYWwgcHJvZHVjdCBpcyBub3QgYXBwcm9wcmlhdGUuXHJcbiAgICovXHJcbiAgd2l0aGRyYXdhbFBlcmlvZD86IGZoaXIuTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsUm91dGVPZkFkbWluaXN0cmF0aW9uVGFyZ2V0U3BlY2llc1dpdGhkcmF3YWxQZXJpb2RBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQSBzcGVjaWVzIGZvciB3aGljaCB0aGlzIHJvdXRlIGFwcGxpZXMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsUm91dGVPZkFkbWluaXN0cmF0aW9uVGFyZ2V0U3BlY2llcyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ01lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbFJvdXRlT2ZBZG1pbmlzdHJhdGlvblRhcmdldFNwZWNpZXMnO1xyXG4gIC8qKlxyXG4gICAqIENvZGVkIGV4cHJlc3Npb24gZm9yIHRoZSBzcGVjaWVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb2RlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEEgc3BlY2llcyBzcGVjaWZpYyB0aW1lIGR1cmluZyB3aGljaCBjb25zdW1wdGlvbiBvZiBhbmltYWwgcHJvZHVjdCBpcyBub3QgYXBwcm9wcmlhdGUuXHJcbiAgICovXHJcbiAgcHVibGljIHdpdGhkcmF3YWxQZXJpb2Q6IGZoaXIuTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsUm91dGVPZkFkbWluaXN0cmF0aW9uVGFyZ2V0U3BlY2llc1dpdGhkcmF3YWxQZXJpb2RbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxSb3V0ZU9mQWRtaW5pc3RyYXRpb25UYXJnZXRTcGVjaWVzIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsUm91dGVPZkFkbWluaXN0cmF0aW9uVGFyZ2V0U3BlY2llc0FyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jb2RlKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY29kZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3dpdGhkcmF3YWxQZXJpb2QnXSkgeyB0aGlzLndpdGhkcmF3YWxQZXJpb2QgPSBzb3VyY2Uud2l0aGRyYXdhbFBlcmlvZC5tYXAoKHgpID0+IG5ldyBmaGlyLk1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbFJvdXRlT2ZBZG1pbmlzdHJhdGlvblRhcmdldFNwZWNpZXNXaXRoZHJhd2FsUGVyaW9kKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMud2l0aGRyYXdhbFBlcmlvZCA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsLnJvdXRlT2ZBZG1pbmlzdHJhdGlvbi50YXJnZXRTcGVjaWVzJyB9XHJcbiAgICB0aGlzLnZSUygnY29kZScsZXhwKVxyXG4gICAgdGhpcy52T0EoJ3dpdGhkcmF3YWxQZXJpb2QnLGV4cClcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxSb3V0ZU9mQWRtaW5pc3RyYXRpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsUm91dGVPZkFkbWluaXN0cmF0aW9uQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogQ29kZWQgZXhwcmVzc2lvbiBmb3IgdGhlIHJvdXRlLlxyXG4gICAqL1xyXG4gIGNvZGU6IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBmaXJzdCBkb3NlIChkb3NlIHF1YW50aXR5KSBhZG1pbmlzdGVyZWQgaW4gaHVtYW5zIGNhbiBiZSBzcGVjaWZpZWQsIGZvciBhIHByb2R1Y3QgdW5kZXIgaW52ZXN0aWdhdGlvbiwgdXNpbmcgYSBudW1lcmljYWwgdmFsdWUgYW5kIGl0cyB1bml0IG9mIG1lYXN1cmVtZW50LlxyXG4gICAqL1xyXG4gIGZpcnN0RG9zZT86IGZoaXIuUXVhbnRpdHlBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbWF4aW11bSBzaW5nbGUgZG9zZSB0aGF0IGNhbiBiZSBhZG1pbmlzdGVyZWQgYXMgcGVyIHRoZSBwcm90b2NvbCBvZiBhIGNsaW5pY2FsIHRyaWFsIGNhbiBiZSBzcGVjaWZpZWQgdXNpbmcgYSBudW1lcmljYWwgdmFsdWUgYW5kIGl0cyB1bml0IG9mIG1lYXN1cmVtZW50LlxyXG4gICAqL1xyXG4gIG1heFNpbmdsZURvc2U/OiBmaGlyLlF1YW50aXR5QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG1heGltdW0gZG9zZSBwZXIgZGF5IChtYXhpbXVtIGRvc2UgcXVhbnRpdHkgdG8gYmUgYWRtaW5pc3RlcmVkIGluIGFueSBvbmUgMjQtaCBwZXJpb2QpIHRoYXQgY2FuIGJlIGFkbWluaXN0ZXJlZCBhcyBwZXIgdGhlIHByb3RvY29sIHJlZmVyZW5jZWQgaW4gdGhlIGNsaW5pY2FsIHRyaWFsIGF1dGhvcmlzYXRpb24uXHJcbiAgICovXHJcbiAgbWF4RG9zZVBlckRheT86IGZoaXIuUXVhbnRpdHlBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbWF4aW11bSBkb3NlIHBlciB0cmVhdG1lbnQgcGVyaW9kIHRoYXQgY2FuIGJlIGFkbWluaXN0ZXJlZCBhcyBwZXIgdGhlIHByb3RvY29sIHJlZmVyZW5jZWQgaW4gdGhlIGNsaW5pY2FsIHRyaWFsIGF1dGhvcmlzYXRpb24uXHJcbiAgICovXHJcbiAgbWF4RG9zZVBlclRyZWF0bWVudFBlcmlvZD86IGZoaXIuUmF0aW9BcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbWF4aW11bSB0cmVhdG1lbnQgcGVyaW9kIGR1cmluZyB3aGljaCBhbiBJbnZlc3RpZ2F0aW9uYWwgTWVkaWNpbmFsIFByb2R1Y3QgY2FuIGJlIGFkbWluaXN0ZXJlZCBhcyBwZXIgdGhlIHByb3RvY29sIHJlZmVyZW5jZWQgaW4gdGhlIGNsaW5pY2FsIHRyaWFsIGF1dGhvcmlzYXRpb24uXHJcbiAgICovXHJcbiAgbWF4VHJlYXRtZW50UGVyaW9kPzogZmhpci5EdXJhdGlvbkFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgc3BlY2llcyBmb3Igd2hpY2ggdGhpcyByb3V0ZSBhcHBsaWVzLlxyXG4gICAqL1xyXG4gIHRhcmdldFNwZWNpZXM/OiBmaGlyLk1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbFJvdXRlT2ZBZG1pbmlzdHJhdGlvblRhcmdldFNwZWNpZXNBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlIHBhdGggYnkgd2hpY2ggdGhlIHBoYXJtYWNldXRpY2FsIHByb2R1Y3QgaXMgdGFrZW4gaW50byBvciBtYWtlcyBjb250YWN0IHdpdGggdGhlIGJvZHkuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsUm91dGVPZkFkbWluaXN0cmF0aW9uIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsUm91dGVPZkFkbWluaXN0cmF0aW9uJztcclxuICAvKipcclxuICAgKiBDb2RlZCBleHByZXNzaW9uIGZvciB0aGUgcm91dGUuXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGU6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGZpcnN0IGRvc2UgKGRvc2UgcXVhbnRpdHkpIGFkbWluaXN0ZXJlZCBpbiBodW1hbnMgY2FuIGJlIHNwZWNpZmllZCwgZm9yIGEgcHJvZHVjdCB1bmRlciBpbnZlc3RpZ2F0aW9uLCB1c2luZyBhIG51bWVyaWNhbCB2YWx1ZSBhbmQgaXRzIHVuaXQgb2YgbWVhc3VyZW1lbnQuXHJcbiAgICovXHJcbiAgcHVibGljIGZpcnN0RG9zZT86IGZoaXIuUXVhbnRpdHl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBtYXhpbXVtIHNpbmdsZSBkb3NlIHRoYXQgY2FuIGJlIGFkbWluaXN0ZXJlZCBhcyBwZXIgdGhlIHByb3RvY29sIG9mIGEgY2xpbmljYWwgdHJpYWwgY2FuIGJlIHNwZWNpZmllZCB1c2luZyBhIG51bWVyaWNhbCB2YWx1ZSBhbmQgaXRzIHVuaXQgb2YgbWVhc3VyZW1lbnQuXHJcbiAgICovXHJcbiAgcHVibGljIG1heFNpbmdsZURvc2U/OiBmaGlyLlF1YW50aXR5fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbWF4aW11bSBkb3NlIHBlciBkYXkgKG1heGltdW0gZG9zZSBxdWFudGl0eSB0byBiZSBhZG1pbmlzdGVyZWQgaW4gYW55IG9uZSAyNC1oIHBlcmlvZCkgdGhhdCBjYW4gYmUgYWRtaW5pc3RlcmVkIGFzIHBlciB0aGUgcHJvdG9jb2wgcmVmZXJlbmNlZCBpbiB0aGUgY2xpbmljYWwgdHJpYWwgYXV0aG9yaXNhdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgbWF4RG9zZVBlckRheT86IGZoaXIuUXVhbnRpdHl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBtYXhpbXVtIGRvc2UgcGVyIHRyZWF0bWVudCBwZXJpb2QgdGhhdCBjYW4gYmUgYWRtaW5pc3RlcmVkIGFzIHBlciB0aGUgcHJvdG9jb2wgcmVmZXJlbmNlZCBpbiB0aGUgY2xpbmljYWwgdHJpYWwgYXV0aG9yaXNhdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgbWF4RG9zZVBlclRyZWF0bWVudFBlcmlvZD86IGZoaXIuUmF0aW98dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBtYXhpbXVtIHRyZWF0bWVudCBwZXJpb2QgZHVyaW5nIHdoaWNoIGFuIEludmVzdGlnYXRpb25hbCBNZWRpY2luYWwgUHJvZHVjdCBjYW4gYmUgYWRtaW5pc3RlcmVkIGFzIHBlciB0aGUgcHJvdG9jb2wgcmVmZXJlbmNlZCBpbiB0aGUgY2xpbmljYWwgdHJpYWwgYXV0aG9yaXNhdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgbWF4VHJlYXRtZW50UGVyaW9kPzogZmhpci5EdXJhdGlvbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBzcGVjaWVzIGZvciB3aGljaCB0aGlzIHJvdXRlIGFwcGxpZXMuXHJcbiAgICovXHJcbiAgcHVibGljIHRhcmdldFNwZWNpZXM6IGZoaXIuTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsUm91dGVPZkFkbWluaXN0cmF0aW9uVGFyZ2V0U3BlY2llc1tdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbFJvdXRlT2ZBZG1pbmlzdHJhdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbFJvdXRlT2ZBZG1pbmlzdHJhdGlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jb2RlKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY29kZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ2ZpcnN0RG9zZSddKSB7IHRoaXMuZmlyc3REb3NlID0gbmV3IGZoaXIuUXVhbnRpdHkoc291cmNlLmZpcnN0RG9zZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ21heFNpbmdsZURvc2UnXSkgeyB0aGlzLm1heFNpbmdsZURvc2UgPSBuZXcgZmhpci5RdWFudGl0eShzb3VyY2UubWF4U2luZ2xlRG9zZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ21heERvc2VQZXJEYXknXSkgeyB0aGlzLm1heERvc2VQZXJEYXkgPSBuZXcgZmhpci5RdWFudGl0eShzb3VyY2UubWF4RG9zZVBlckRheSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ21heERvc2VQZXJUcmVhdG1lbnRQZXJpb2QnXSkgeyB0aGlzLm1heERvc2VQZXJUcmVhdG1lbnRQZXJpb2QgPSBuZXcgZmhpci5SYXRpbyhzb3VyY2UubWF4RG9zZVBlclRyZWF0bWVudFBlcmlvZCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ21heFRyZWF0bWVudFBlcmlvZCddKSB7IHRoaXMubWF4VHJlYXRtZW50UGVyaW9kID0gbmV3IGZoaXIuRHVyYXRpb24oc291cmNlLm1heFRyZWF0bWVudFBlcmlvZCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3RhcmdldFNwZWNpZXMnXSkgeyB0aGlzLnRhcmdldFNwZWNpZXMgPSBzb3VyY2UudGFyZ2V0U3BlY2llcy5tYXAoKHgpID0+IG5ldyBmaGlyLk1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbFJvdXRlT2ZBZG1pbmlzdHJhdGlvblRhcmdldFNwZWNpZXMoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy50YXJnZXRTcGVjaWVzID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWwucm91dGVPZkFkbWluaXN0cmF0aW9uJyB9XHJcbiAgICB0aGlzLnZSUygnY29kZScsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2ZpcnN0RG9zZScsZXhwKVxyXG4gICAgdGhpcy52T1MoJ21heFNpbmdsZURvc2UnLGV4cClcclxuICAgIHRoaXMudk9TKCdtYXhEb3NlUGVyRGF5JyxleHApXHJcbiAgICB0aGlzLnZPUygnbWF4RG9zZVBlclRyZWF0bWVudFBlcmlvZCcsZXhwKVxyXG4gICAgdGhpcy52T1MoJ21heFRyZWF0bWVudFBlcmlvZCcsZXhwKVxyXG4gICAgdGhpcy52T0EoJ3RhcmdldFNwZWNpZXMnLGV4cClcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWwgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsQXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsXCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFuIGlkZW50aWZpZXIgZm9yIHRoZSBwaGFybWFjZXV0aWNhbCBtZWRpY2luYWwgcHJvZHVjdC5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgYWRtaW5pc3RyYWJsZSBkb3NlIGZvcm0sIGFmdGVyIG5lY2Vzc2FyeSByZWNvbnN0aXR1dGlvbi5cclxuICAgKi9cclxuICBhZG1pbmlzdHJhYmxlRG9zZUZvcm06IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRvZG8uXHJcbiAgICovXHJcbiAgdW5pdE9mUHJlc2VudGF0aW9uPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmdyZWRpZW50LlxyXG4gICAqL1xyXG4gIGluZ3JlZGllbnQ/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWNjb21wYW55aW5nIGRldmljZS5cclxuICAgKi9cclxuICBkZXZpY2U/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ2hhcmFjdGVyaXN0aWNzIGUuZy4gYSBwcm9kdWN0cyBvbnNldCBvZiBhY3Rpb24uXHJcbiAgICovXHJcbiAgY2hhcmFjdGVyaXN0aWNzPzogZmhpci5NZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxDaGFyYWN0ZXJpc3RpY3NBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXRoIGJ5IHdoaWNoIHRoZSBwaGFybWFjZXV0aWNhbCBwcm9kdWN0IGlzIHRha2VuIGludG8gb3IgbWFrZXMgY29udGFjdCB3aXRoIHRoZSBib2R5LlxyXG4gICAqL1xyXG4gIHJvdXRlT2ZBZG1pbmlzdHJhdGlvbjogZmhpci5NZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxSb3V0ZU9mQWRtaW5pc3RyYXRpb25BcmdzW118bnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgcGhhcm1hY2V1dGljYWwgcHJvZHVjdCBkZXNjcmliZWQgaW4gdGVybXMgb2YgaXRzIGNvbXBvc2l0aW9uIGFuZCBkb3NlIGZvcm0uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWwnO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNvdXJjZVR5cGU6IFwiTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsXCI7XHJcbiAgLyoqXHJcbiAgICogQW4gaWRlbnRpZmllciBmb3IgdGhlIHBoYXJtYWNldXRpY2FsIG1lZGljaW5hbCBwcm9kdWN0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyOiBmaGlyLklkZW50aWZpZXJbXTtcclxuICAvKipcclxuICAgKiBUaGUgYWRtaW5pc3RyYWJsZSBkb3NlIGZvcm0sIGFmdGVyIG5lY2Vzc2FyeSByZWNvbnN0aXR1dGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgYWRtaW5pc3RyYWJsZURvc2VGb3JtOiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRvZG8uXHJcbiAgICovXHJcbiAgcHVibGljIHVuaXRPZlByZXNlbnRhdGlvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmdyZWRpZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpbmdyZWRpZW50OiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIEFjY29tcGFueWluZyBkZXZpY2UuXHJcbiAgICovXHJcbiAgcHVibGljIGRldmljZTogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBDaGFyYWN0ZXJpc3RpY3MgZS5nLiBhIHByb2R1Y3RzIG9uc2V0IG9mIGFjdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgY2hhcmFjdGVyaXN0aWNzOiBmaGlyLk1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbENoYXJhY3RlcmlzdGljc1tdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXRoIGJ5IHdoaWNoIHRoZSBwaGFybWFjZXV0aWNhbCBwcm9kdWN0IGlzIHRha2VuIGludG8gb3IgbWFrZXMgY29udGFjdCB3aXRoIHRoZSBib2R5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyByb3V0ZU9mQWRtaW5pc3RyYXRpb246IGZoaXIuTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsUm91dGVPZkFkbWluaXN0cmF0aW9uW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ01lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbCc7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gc291cmNlLmlkZW50aWZpZXIubWFwKCh4KSA9PiBuZXcgZmhpci5JZGVudGlmaWVyKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaWRlbnRpZmllciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydhZG1pbmlzdHJhYmxlRG9zZUZvcm0nXSkgeyB0aGlzLmFkbWluaXN0cmFibGVEb3NlRm9ybSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuYWRtaW5pc3RyYWJsZURvc2VGb3JtKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYWRtaW5pc3RyYWJsZURvc2VGb3JtID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsndW5pdE9mUHJlc2VudGF0aW9uJ10pIHsgdGhpcy51bml0T2ZQcmVzZW50YXRpb24gPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnVuaXRPZlByZXNlbnRhdGlvbik7IH1cclxuICAgIGlmIChzb3VyY2VbJ2luZ3JlZGllbnQnXSkgeyB0aGlzLmluZ3JlZGllbnQgPSBzb3VyY2UuaW5ncmVkaWVudC5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmluZ3JlZGllbnQgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGV2aWNlJ10pIHsgdGhpcy5kZXZpY2UgPSBzb3VyY2UuZGV2aWNlLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZGV2aWNlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2NoYXJhY3RlcmlzdGljcyddKSB7IHRoaXMuY2hhcmFjdGVyaXN0aWNzID0gc291cmNlLmNoYXJhY3RlcmlzdGljcy5tYXAoKHgpID0+IG5ldyBmaGlyLk1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbENoYXJhY3RlcmlzdGljcyh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNoYXJhY3RlcmlzdGljcyA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydyb3V0ZU9mQWRtaW5pc3RyYXRpb24nXSkgeyB0aGlzLnJvdXRlT2ZBZG1pbmlzdHJhdGlvbiA9IHNvdXJjZS5yb3V0ZU9mQWRtaW5pc3RyYXRpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5NZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxSb3V0ZU9mQWRtaW5pc3RyYXRpb24oeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yb3V0ZU9mQWRtaW5pc3RyYXRpb24gPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ01lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbCcgfVxyXG4gICAgdGhpcy52UlMoJ3Jlc291cmNlVHlwZScsZXhwKVxyXG4gICAgdGhpcy52T0EoJ2lkZW50aWZpZXInLGV4cClcclxuICAgIHRoaXMudlJTKCdhZG1pbmlzdHJhYmxlRG9zZUZvcm0nLGV4cClcclxuICAgIHRoaXMudk9TKCd1bml0T2ZQcmVzZW50YXRpb24nLGV4cClcclxuICAgIHRoaXMudk9BKCdpbmdyZWRpZW50JyxleHApXHJcbiAgICB0aGlzLnZPQSgnZGV2aWNlJyxleHApXHJcbiAgICB0aGlzLnZPQSgnY2hhcmFjdGVyaXN0aWNzJyxleHApXHJcbiAgICB0aGlzLnZSQSgncm91dGVPZkFkbWluaXN0cmF0aW9uJyxleHApXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=