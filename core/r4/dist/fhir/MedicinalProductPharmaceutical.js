// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: MedicinalProductPharmaceutical
import * as fhir from '../fhir.js';
/**
 * Characteristics e.g. a products onset of action.
 */
export class MedicinalProductPharmaceuticalCharacteristics extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductPharmaceuticalCharacteristics - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        else {
            this.code = null;
        }
        if (source['status']) {
            this.status = new fhir.CodeableConcept(source.status);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'MedicinalProductPharmaceutical.characteristics';
        }
        if (!this['code']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property code fhir: MedicinalProductPharmaceutical.characteristics.code:CodeableConcept', expression: [expression] });
        }
        if (this["code"]) {
            issues.push(...this.code.doModelValidation(expression + '.code'));
        }
        if (this["status"]) {
            issues.push(...this.status.doModelValidation(expression + '.status'));
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductPharmaceuticalCharacteristics._fts_dataType = 'MedicinalProductPharmaceuticalCharacteristics';
/**
 * A species specific time during which consumption of animal product is not appropriate.
 */
export class MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpeciesWithdrawalPeriod extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpeciesWithdrawalPeriod - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['tissue']) {
            this.tissue = new fhir.CodeableConcept(source.tissue);
        }
        else {
            this.tissue = null;
        }
        if (source['value']) {
            this.value = new fhir.Quantity(source.value);
        }
        else {
            this.value = null;
        }
        if (source['supportingInformation']) {
            this.supportingInformation = new fhir.FhirString({ value: source.supportingInformation });
        }
        if (source['_supportingInformation']) {
            if (this.supportingInformation) {
                this.supportingInformation.addExtendedProperties(source._supportingInformation);
            }
            else {
                this.supportingInformation = new fhir.FhirString(source._supportingInformation);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'MedicinalProductPharmaceutical.routeOfAdministration.targetSpecies.withdrawalPeriod';
        }
        if (!this['tissue']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property tissue fhir: MedicinalProductPharmaceutical.routeOfAdministration.targetSpecies.withdrawalPeriod.tissue:CodeableConcept', expression: [expression] });
        }
        if (this["tissue"]) {
            issues.push(...this.tissue.doModelValidation(expression + '.tissue'));
        }
        if (!this['value']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property value fhir: MedicinalProductPharmaceutical.routeOfAdministration.targetSpecies.withdrawalPeriod.value:Quantity', expression: [expression] });
        }
        if (this["value"]) {
            issues.push(...this.value.doModelValidation(expression + '.value'));
        }
        if (this["supportingInformation"]) {
            issues.push(...this.supportingInformation.doModelValidation(expression + '.supportingInformation'));
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpeciesWithdrawalPeriod._fts_dataType = 'MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpeciesWithdrawalPeriod';
/**
 * A species for which this route applies.
 */
export class MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpecies extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpecies - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        else {
            this.code = null;
        }
        if (source['withdrawalPeriod']) {
            this.withdrawalPeriod = source.withdrawalPeriod.map((x) => new fhir.MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpeciesWithdrawalPeriod(x));
        }
        else {
            this.withdrawalPeriod = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'MedicinalProductPharmaceutical.routeOfAdministration.targetSpecies';
        }
        if (!this['code']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property code fhir: MedicinalProductPharmaceutical.routeOfAdministration.targetSpecies.code:CodeableConcept', expression: [expression] });
        }
        if (this["code"]) {
            issues.push(...this.code.doModelValidation(expression + '.code'));
        }
        if (this["withdrawalPeriod"]) {
            this.withdrawalPeriod.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.withdrawalPeriod[${i}]`)); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpecies._fts_dataType = 'MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpecies';
/**
 * The path by which the pharmaceutical product is taken into or makes contact with the body.
 */
export class MedicinalProductPharmaceuticalRouteOfAdministration extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductPharmaceuticalRouteOfAdministration - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        else {
            this.code = null;
        }
        if (source['firstDose']) {
            this.firstDose = new fhir.Quantity(source.firstDose);
        }
        if (source['maxSingleDose']) {
            this.maxSingleDose = new fhir.Quantity(source.maxSingleDose);
        }
        if (source['maxDosePerDay']) {
            this.maxDosePerDay = new fhir.Quantity(source.maxDosePerDay);
        }
        if (source['maxDosePerTreatmentPeriod']) {
            this.maxDosePerTreatmentPeriod = new fhir.Ratio(source.maxDosePerTreatmentPeriod);
        }
        if (source['maxTreatmentPeriod']) {
            this.maxTreatmentPeriod = new fhir.Duration(source.maxTreatmentPeriod);
        }
        if (source['targetSpecies']) {
            this.targetSpecies = source.targetSpecies.map((x) => new fhir.MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpecies(x));
        }
        else {
            this.targetSpecies = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'MedicinalProductPharmaceutical.routeOfAdministration';
        }
        if (!this['code']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property code fhir: MedicinalProductPharmaceutical.routeOfAdministration.code:CodeableConcept', expression: [expression] });
        }
        if (this["code"]) {
            issues.push(...this.code.doModelValidation(expression + '.code'));
        }
        if (this["firstDose"]) {
            issues.push(...this.firstDose.doModelValidation(expression + '.firstDose'));
        }
        if (this["maxSingleDose"]) {
            issues.push(...this.maxSingleDose.doModelValidation(expression + '.maxSingleDose'));
        }
        if (this["maxDosePerDay"]) {
            issues.push(...this.maxDosePerDay.doModelValidation(expression + '.maxDosePerDay'));
        }
        if (this["maxDosePerTreatmentPeriod"]) {
            issues.push(...this.maxDosePerTreatmentPeriod.doModelValidation(expression + '.maxDosePerTreatmentPeriod'));
        }
        if (this["maxTreatmentPeriod"]) {
            issues.push(...this.maxTreatmentPeriod.doModelValidation(expression + '.maxTreatmentPeriod'));
        }
        if (this["targetSpecies"]) {
            this.targetSpecies.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.targetSpecies[${i}]`)); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductPharmaceuticalRouteOfAdministration._fts_dataType = 'MedicinalProductPharmaceuticalRouteOfAdministration';
/**
 * A pharmaceutical product described in terms of its composition and dose form.
 */
export class MedicinalProductPharmaceutical extends fhir.DomainResource {
    /**
     * Default constructor for MedicinalProductPharmaceutical - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'MedicinalProductPharmaceutical';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['administrableDoseForm']) {
            this.administrableDoseForm = new fhir.CodeableConcept(source.administrableDoseForm);
        }
        else {
            this.administrableDoseForm = null;
        }
        if (source['unitOfPresentation']) {
            this.unitOfPresentation = new fhir.CodeableConcept(source.unitOfPresentation);
        }
        if (source['ingredient']) {
            this.ingredient = source.ingredient.map((x) => new fhir.Reference(x));
        }
        else {
            this.ingredient = [];
        }
        if (source['device']) {
            this.device = source.device.map((x) => new fhir.Reference(x));
        }
        else {
            this.device = [];
        }
        if (source['characteristics']) {
            this.characteristics = source.characteristics.map((x) => new fhir.MedicinalProductPharmaceuticalCharacteristics(x));
        }
        else {
            this.characteristics = [];
        }
        if (source['routeOfAdministration']) {
            this.routeOfAdministration = source.routeOfAdministration.map((x) => new fhir.MedicinalProductPharmaceuticalRouteOfAdministration(x));
        }
        else {
            this.routeOfAdministration = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'MedicinalProductPharmaceutical';
        }
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType fhir: MedicinalProductPharmaceutical.resourceType:"MedicinalProductPharmaceutical"', expression: [expression] });
        }
        if (this["identifier"]) {
            this.identifier.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.identifier[${i}]`)); });
        }
        if (!this['administrableDoseForm']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property administrableDoseForm fhir: MedicinalProductPharmaceutical.administrableDoseForm:CodeableConcept', expression: [expression] });
        }
        if (this["administrableDoseForm"]) {
            issues.push(...this.administrableDoseForm.doModelValidation(expression + '.administrableDoseForm'));
        }
        if (this["unitOfPresentation"]) {
            issues.push(...this.unitOfPresentation.doModelValidation(expression + '.unitOfPresentation'));
        }
        if (this["ingredient"]) {
            this.ingredient.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.ingredient[${i}]`)); });
        }
        if (this["device"]) {
            this.device.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.device[${i}]`)); });
        }
        if (this["characteristics"]) {
            this.characteristics.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.characteristics[${i}]`)); });
        }
        if (!this['routeOfAdministration']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property routeOfAdministration fhir: MedicinalProductPharmaceutical.routeOfAdministration:routeOfAdministration', expression: [expression] });
        }
        else if (!Array.isArray(this.routeOfAdministration)) {
            issues.push({ severity: 'error', code: 'structure', diagnostics: 'Found scalar in array property routeOfAdministration fhir: MedicinalProductPharmaceutical.routeOfAdministration:routeOfAdministration', expression: [expression] });
        }
        else if (this.routeOfAdministration.length === 0) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property routeOfAdministration fhir: MedicinalProductPharmaceutical.routeOfAdministration:routeOfAdministration', expression: [expression] });
        }
        if (this["routeOfAdministration"]) {
            this.routeOfAdministration.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.routeOfAdministration[${i}]`)); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductPharmaceutical._fts_dataType = 'MedicinalProductPharmaceutical';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9NZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsZ0RBQWdEO0FBRWhELE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBZ0JuQzs7R0FFRztBQUNILE1BQU0sT0FBTyw2Q0FBOEMsU0FBUSxJQUFJLENBQUMsZUFBZTtJQWFyRjs7T0FFRztJQUNILFlBQVksU0FBb0UsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDMUgsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUFFO2FBQ3JFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7U0FBRTtRQUMxQixJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUFFO0lBQ2xGLENBQUM7SUFDRDs7T0FFRztJQUNhLGlCQUFpQixDQUFDLGFBQW9CLEVBQUU7UUFDdEQsSUFBSSxNQUFNLEdBQW1CLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNqRSxJQUFJLFVBQVUsS0FBSyxFQUFFLEVBQUU7WUFBRSxVQUFVLEdBQUcsZ0RBQWdELENBQUE7U0FBRTtRQUN4RixJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQ2pCLE1BQU0sQ0FBQyxJQUFJLENB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RSxRQUFRLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUFFLGtJQUFrSSxFQUFFLFVBQVUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsQ0FBQztTQUNqTztRQUNELElBQUksSUFBSSxDQUFDLHVCQUF1QixDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMscUJBQXFCLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLEdBQUMsMEJBQTBCLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQUU7UUFDdkssT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQzs7QUFuRkQ7O0dBRUc7QUFDNkIsNENBQWEsR0FBVSxnQ0FBZ0MsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNC5jb3JlIHZlcnNpb246IDQuMC4xXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsXHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbENoYXJhY3RlcmlzdGljcyB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxDaGFyYWN0ZXJpc3RpY3NBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBBIGNvZGVkIGNoYXJhY3RlcmlzdGljLlxyXG4gICAqL1xyXG4gIGNvZGU6IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzdGF0dXMgb2YgY2hhcmFjdGVyaXN0aWMgZS5nLiBhc3NpZ25lZCBvciBwZW5kaW5nLlxyXG4gICAqL1xyXG4gIHN0YXR1cz86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGFyYWN0ZXJpc3RpY3MgZS5nLiBhIHByb2R1Y3RzIG9uc2V0IG9mIGFjdGlvbi5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxDaGFyYWN0ZXJpc3RpY3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxDaGFyYWN0ZXJpc3RpY3MnO1xyXG4gIC8qKlxyXG4gICAqIEEgY29kZWQgY2hhcmFjdGVyaXN0aWMuXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGU6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIHN0YXR1cyBvZiBjaGFyYWN0ZXJpc3RpYyBlLmcuIGFzc2lnbmVkIG9yIHBlbmRpbmcuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1cz86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxDaGFyYWN0ZXJpc3RpY3MgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxDaGFyYWN0ZXJpc3RpY3NBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY29kZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvZGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydzdGF0dXMnXSkgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2Uuc3RhdHVzKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWwuY2hhcmFjdGVyaXN0aWNzJyB9XHJcbiAgICBpZiAoIXRoaXNbJ2NvZGUnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgY29kZSBmaGlyOiBNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWwuY2hhcmFjdGVyaXN0aWNzLmNvZGU6Q29kZWFibGVDb25jZXB0JywgZXhwcmVzc2lvbjogW2V4cHJlc3Npb25dIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJjb2RlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY29kZS5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuY29kZScpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJzdGF0dXNcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5zdGF0dXMuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLnN0YXR1cycpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbFJvdXRlT2ZBZG1pbmlzdHJhdGlvblRhcmdldFNwZWNpZXNXaXRoZHJhd2FsUGVyaW9kIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbFJvdXRlT2ZBZG1pbmlzdHJhdGlvblRhcmdldFNwZWNpZXNXaXRoZHJhd2FsUGVyaW9kQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogQ29kZWQgZXhwcmVzc2lvbiBmb3IgdGhlIHR5cGUgb2YgdGlzc3VlIGZvciB3aGljaCB0aGUgd2l0aGRyYXdhbCBwZXJpb2QgYXBwbHVlcywgZS5nLiBtZWF0LCBtaWxrLlxyXG4gICAqL1xyXG4gIHRpc3N1ZTogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogQSB2YWx1ZSBmb3IgdGhlIHRpbWUuXHJcbiAgICovXHJcbiAgdmFsdWU6IGZoaXIuUXVhbnRpdHlBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogRXh0cmEgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHdpdGhkcmF3YWwgcGVyaW9kLlxyXG4gICAqL1xyXG4gIHN1cHBvcnRpbmdJbmZvcm1hdGlvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWwucm91dGVPZkFkbWluaXN0cmF0aW9uLnRhcmdldFNwZWNpZXMud2l0aGRyYXdhbFBlcmlvZC5zdXBwb3J0aW5nSW5mb3JtYXRpb25cclxuICAgKi9cclxuICBfc3VwcG9ydGluZ0luZm9ybWF0aW9uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgc3BlY2llcyBzcGVjaWZpYyB0aW1lIGR1cmluZyB3aGljaCBjb25zdW1wdGlvbiBvZiBhbmltYWwgcHJvZHVjdCBpcyBub3QgYXBwcm9wcmlhdGUuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsUm91dGVPZkFkbWluaXN0cmF0aW9uVGFyZ2V0U3BlY2llc1dpdGhkcmF3YWxQZXJpb2QgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxSb3V0ZU9mQWRtaW5pc3RyYXRpb25UYXJnZXRTcGVjaWVzV2l0aGRyYXdhbFBlcmlvZCc7XHJcbiAgLyoqXHJcbiAgICogQ29kZWQgZXhwcmVzc2lvbiBmb3IgdGhlIHR5cGUgb2YgdGlzc3VlIGZvciB3aGljaCB0aGUgd2l0aGRyYXdhbCBwZXJpb2QgYXBwbHVlcywgZS5nLiBtZWF0LCBtaWxrLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0aXNzdWU6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogQSB2YWx1ZSBmb3IgdGhlIHRpbWUuXHJcbiAgICovXHJcbiAgcHVibGljIHZhbHVlOiBmaGlyLlF1YW50aXR5fG51bGw7XHJcbiAgLyoqXHJcbiAgICogRXh0cmEgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHdpdGhkcmF3YWwgcGVyaW9kLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdXBwb3J0aW5nSW5mb3JtYXRpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbFJvdXRlT2ZBZG1pbmlzdHJhdGlvblRhcmdldFNwZWNpZXNXaXRoZHJhd2FsUGVyaW9kIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsUm91dGVPZkFkbWluaXN0cmF0aW9uVGFyZ2V0U3BlY2llc1dpdGhkcmF3YWxQZXJpb2RBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsndGlzc3VlJ10pIHsgdGhpcy50aXNzdWUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnRpc3N1ZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnRpc3N1ZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3ZhbHVlJ10pIHsgdGhpcy52YWx1ZSA9IG5ldyBmaGlyLlF1YW50aXR5KHNvdXJjZS52YWx1ZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnZhbHVlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3VwcG9ydGluZ0luZm9ybWF0aW9uJ10pIHsgdGhpcy5zdXBwb3J0aW5nSW5mb3JtYXRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnN1cHBvcnRpbmdJbmZvcm1hdGlvbn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfc3VwcG9ydGluZ0luZm9ybWF0aW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMuc3VwcG9ydGluZ0luZm9ybWF0aW9uKSB7IHRoaXMuc3VwcG9ydGluZ0luZm9ybWF0aW9uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3N1cHBvcnRpbmdJbmZvcm1hdGlvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnN1cHBvcnRpbmdJbmZvcm1hdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9zdXBwb3J0aW5nSW5mb3JtYXRpb24gYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb246c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24pO1xyXG4gICAgaWYgKGV4cHJlc3Npb24gPT09ICcnKSB7IGV4cHJlc3Npb24gPSAnTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsLnJvdXRlT2ZBZG1pbmlzdHJhdGlvbi50YXJnZXRTcGVjaWVzLndpdGhkcmF3YWxQZXJpb2QnIH1cclxuICAgIGlmICghdGhpc1sndGlzc3VlJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHRpc3N1ZSBmaGlyOiBNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWwucm91dGVPZkFkbWluaXN0cmF0aW9uLnRhcmdldFNwZWNpZXMud2l0aGRyYXdhbFBlcmlvZC50aXNzdWU6Q29kZWFibGVDb25jZXB0JywgZXhwcmVzc2lvbjogW2V4cHJlc3Npb25dIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJ0aXNzdWVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy50aXNzdWUuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLnRpc3N1ZScpKTsgfVxyXG4gICAgaWYgKCF0aGlzWyd2YWx1ZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSB2YWx1ZSBmaGlyOiBNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWwucm91dGVPZkFkbWluaXN0cmF0aW9uLnRhcmdldFNwZWNpZXMud2l0aGRyYXdhbFBlcmlvZC52YWx1ZTpRdWFudGl0eScsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1widmFsdWVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy52YWx1ZS5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycudmFsdWUnKSk7IH1cclxuICAgIGlmICh0aGlzW1wic3VwcG9ydGluZ0luZm9ybWF0aW9uXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc3VwcG9ydGluZ0luZm9ybWF0aW9uLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5zdXBwb3J0aW5nSW5mb3JtYXRpb24nKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxSb3V0ZU9mQWRtaW5pc3RyYXRpb25UYXJnZXRTcGVjaWVzIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbFJvdXRlT2ZBZG1pbmlzdHJhdGlvblRhcmdldFNwZWNpZXNBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBDb2RlZCBleHByZXNzaW9uIGZvciB0aGUgc3BlY2llcy5cclxuICAgKi9cclxuICBjb2RlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBBIHNwZWNpZXMgc3BlY2lmaWMgdGltZSBkdXJpbmcgd2hpY2ggY29uc3VtcHRpb24gb2YgYW5pbWFsIHByb2R1Y3QgaXMgbm90IGFwcHJvcHJpYXRlLlxyXG4gICAqL1xyXG4gIHdpdGhkcmF3YWxQZXJpb2Q/OiBmaGlyLk1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbFJvdXRlT2ZBZG1pbmlzdHJhdGlvblRhcmdldFNwZWNpZXNXaXRoZHJhd2FsUGVyaW9kQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgc3BlY2llcyBmb3Igd2hpY2ggdGhpcyByb3V0ZSBhcHBsaWVzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbFJvdXRlT2ZBZG1pbmlzdHJhdGlvblRhcmdldFNwZWNpZXMgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxSb3V0ZU9mQWRtaW5pc3RyYXRpb25UYXJnZXRTcGVjaWVzJztcclxuICAvKipcclxuICAgKiBDb2RlZCBleHByZXNzaW9uIGZvciB0aGUgc3BlY2llcy5cclxuICAgKi9cclxuICBwdWJsaWMgY29kZTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBBIHNwZWNpZXMgc3BlY2lmaWMgdGltZSBkdXJpbmcgd2hpY2ggY29uc3VtcHRpb24gb2YgYW5pbWFsIHByb2R1Y3QgaXMgbm90IGFwcHJvcHJpYXRlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB3aXRoZHJhd2FsUGVyaW9kOiBmaGlyLk1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbFJvdXRlT2ZBZG1pbmlzdHJhdGlvblRhcmdldFNwZWNpZXNXaXRoZHJhd2FsUGVyaW9kW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsUm91dGVPZkFkbWluaXN0cmF0aW9uVGFyZ2V0U3BlY2llcyAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbFJvdXRlT2ZBZG1pbmlzdHJhdGlvblRhcmdldFNwZWNpZXNBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY29kZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvZGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWyd3aXRoZHJhd2FsUGVyaW9kJ10pIHsgdGhpcy53aXRoZHJhd2FsUGVyaW9kID0gc291cmNlLndpdGhkcmF3YWxQZXJpb2QubWFwKCh4KSA9PiBuZXcgZmhpci5NZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxSb3V0ZU9mQWRtaW5pc3RyYXRpb25UYXJnZXRTcGVjaWVzV2l0aGRyYXdhbFBlcmlvZCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLndpdGhkcmF3YWxQZXJpb2QgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWwucm91dGVPZkFkbWluaXN0cmF0aW9uLnRhcmdldFNwZWNpZXMnIH1cclxuICAgIGlmICghdGhpc1snY29kZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBjb2RlIGZoaXI6IE1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbC5yb3V0ZU9mQWRtaW5pc3RyYXRpb24udGFyZ2V0U3BlY2llcy5jb2RlOkNvZGVhYmxlQ29uY2VwdCcsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiY29kZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmNvZGUuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLmNvZGUnKSk7IH1cclxuICAgIGlmICh0aGlzW1wid2l0aGRyYXdhbFBlcmlvZFwiXSkgeyB0aGlzLndpdGhkcmF3YWxQZXJpb2QuZm9yRWFjaCgoeCxpKSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbitgLndpdGhkcmF3YWxQZXJpb2RbJHtpfV1gKSk7IH0pIH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxSb3V0ZU9mQWRtaW5pc3RyYXRpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsUm91dGVPZkFkbWluaXN0cmF0aW9uQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogQ29kZWQgZXhwcmVzc2lvbiBmb3IgdGhlIHJvdXRlLlxyXG4gICAqL1xyXG4gIGNvZGU6IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBmaXJzdCBkb3NlIChkb3NlIHF1YW50aXR5KSBhZG1pbmlzdGVyZWQgaW4gaHVtYW5zIGNhbiBiZSBzcGVjaWZpZWQsIGZvciBhIHByb2R1Y3QgdW5kZXIgaW52ZXN0aWdhdGlvbiwgdXNpbmcgYSBudW1lcmljYWwgdmFsdWUgYW5kIGl0cyB1bml0IG9mIG1lYXN1cmVtZW50LlxyXG4gICAqL1xyXG4gIGZpcnN0RG9zZT86IGZoaXIuUXVhbnRpdHlBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbWF4aW11bSBzaW5nbGUgZG9zZSB0aGF0IGNhbiBiZSBhZG1pbmlzdGVyZWQgYXMgcGVyIHRoZSBwcm90b2NvbCBvZiBhIGNsaW5pY2FsIHRyaWFsIGNhbiBiZSBzcGVjaWZpZWQgdXNpbmcgYSBudW1lcmljYWwgdmFsdWUgYW5kIGl0cyB1bml0IG9mIG1lYXN1cmVtZW50LlxyXG4gICAqL1xyXG4gIG1heFNpbmdsZURvc2U/OiBmaGlyLlF1YW50aXR5QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG1heGltdW0gZG9zZSBwZXIgZGF5IChtYXhpbXVtIGRvc2UgcXVhbnRpdHkgdG8gYmUgYWRtaW5pc3RlcmVkIGluIGFueSBvbmUgMjQtaCBwZXJpb2QpIHRoYXQgY2FuIGJlIGFkbWluaXN0ZXJlZCBhcyBwZXIgdGhlIHByb3RvY29sIHJlZmVyZW5jZWQgaW4gdGhlIGNsaW5pY2FsIHRyaWFsIGF1dGhvcmlzYXRpb24uXHJcbiAgICovXHJcbiAgbWF4RG9zZVBlckRheT86IGZoaXIuUXVhbnRpdHlBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbWF4aW11bSBkb3NlIHBlciB0cmVhdG1lbnQgcGVyaW9kIHRoYXQgY2FuIGJlIGFkbWluaXN0ZXJlZCBhcyBwZXIgdGhlIHByb3RvY29sIHJlZmVyZW5jZWQgaW4gdGhlIGNsaW5pY2FsIHRyaWFsIGF1dGhvcmlzYXRpb24uXHJcbiAgICovXHJcbiAgbWF4RG9zZVBlclRyZWF0bWVudFBlcmlvZD86IGZoaXIuUmF0aW9BcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbWF4aW11bSB0cmVhdG1lbnQgcGVyaW9kIGR1cmluZyB3aGljaCBhbiBJbnZlc3RpZ2F0aW9uYWwgTWVkaWNpbmFsIFByb2R1Y3QgY2FuIGJlIGFkbWluaXN0ZXJlZCBhcyBwZXIgdGhlIHByb3RvY29sIHJlZmVyZW5jZWQgaW4gdGhlIGNsaW5pY2FsIHRyaWFsIGF1dGhvcmlzYXRpb24uXHJcbiAgICovXHJcbiAgbWF4VHJlYXRtZW50UGVyaW9kPzogZmhpci5EdXJhdGlvbkFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgc3BlY2llcyBmb3Igd2hpY2ggdGhpcyByb3V0ZSBhcHBsaWVzLlxyXG4gICAqL1xyXG4gIHRhcmdldFNwZWNpZXM/OiBmaGlyLk1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbFJvdXRlT2ZBZG1pbmlzdHJhdGlvblRhcmdldFNwZWNpZXNBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlIHBhdGggYnkgd2hpY2ggdGhlIHBoYXJtYWNldXRpY2FsIHByb2R1Y3QgaXMgdGFrZW4gaW50byBvciBtYWtlcyBjb250YWN0IHdpdGggdGhlIGJvZHkuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsUm91dGVPZkFkbWluaXN0cmF0aW9uIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsUm91dGVPZkFkbWluaXN0cmF0aW9uJztcclxuICAvKipcclxuICAgKiBDb2RlZCBleHByZXNzaW9uIGZvciB0aGUgcm91dGUuXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGU6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGZpcnN0IGRvc2UgKGRvc2UgcXVhbnRpdHkpIGFkbWluaXN0ZXJlZCBpbiBodW1hbnMgY2FuIGJlIHNwZWNpZmllZCwgZm9yIGEgcHJvZHVjdCB1bmRlciBpbnZlc3RpZ2F0aW9uLCB1c2luZyBhIG51bWVyaWNhbCB2YWx1ZSBhbmQgaXRzIHVuaXQgb2YgbWVhc3VyZW1lbnQuXHJcbiAgICovXHJcbiAgcHVibGljIGZpcnN0RG9zZT86IGZoaXIuUXVhbnRpdHl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBtYXhpbXVtIHNpbmdsZSBkb3NlIHRoYXQgY2FuIGJlIGFkbWluaXN0ZXJlZCBhcyBwZXIgdGhlIHByb3RvY29sIG9mIGEgY2xpbmljYWwgdHJpYWwgY2FuIGJlIHNwZWNpZmllZCB1c2luZyBhIG51bWVyaWNhbCB2YWx1ZSBhbmQgaXRzIHVuaXQgb2YgbWVhc3VyZW1lbnQuXHJcbiAgICovXHJcbiAgcHVibGljIG1heFNpbmdsZURvc2U/OiBmaGlyLlF1YW50aXR5fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbWF4aW11bSBkb3NlIHBlciBkYXkgKG1heGltdW0gZG9zZSBxdWFudGl0eSB0byBiZSBhZG1pbmlzdGVyZWQgaW4gYW55IG9uZSAyNC1oIHBlcmlvZCkgdGhhdCBjYW4gYmUgYWRtaW5pc3RlcmVkIGFzIHBlciB0aGUgcHJvdG9jb2wgcmVmZXJlbmNlZCBpbiB0aGUgY2xpbmljYWwgdHJpYWwgYXV0aG9yaXNhdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgbWF4RG9zZVBlckRheT86IGZoaXIuUXVhbnRpdHl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBtYXhpbXVtIGRvc2UgcGVyIHRyZWF0bWVudCBwZXJpb2QgdGhhdCBjYW4gYmUgYWRtaW5pc3RlcmVkIGFzIHBlciB0aGUgcHJvdG9jb2wgcmVmZXJlbmNlZCBpbiB0aGUgY2xpbmljYWwgdHJpYWwgYXV0aG9yaXNhdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgbWF4RG9zZVBlclRyZWF0bWVudFBlcmlvZD86IGZoaXIuUmF0aW98dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBtYXhpbXVtIHRyZWF0bWVudCBwZXJpb2QgZHVyaW5nIHdoaWNoIGFuIEludmVzdGlnYXRpb25hbCBNZWRpY2luYWwgUHJvZHVjdCBjYW4gYmUgYWRtaW5pc3RlcmVkIGFzIHBlciB0aGUgcHJvdG9jb2wgcmVmZXJlbmNlZCBpbiB0aGUgY2xpbmljYWwgdHJpYWwgYXV0aG9yaXNhdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgbWF4VHJlYXRtZW50UGVyaW9kPzogZmhpci5EdXJhdGlvbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBzcGVjaWVzIGZvciB3aGljaCB0aGlzIHJvdXRlIGFwcGxpZXMuXHJcbiAgICovXHJcbiAgcHVibGljIHRhcmdldFNwZWNpZXM6IGZoaXIuTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsUm91dGVPZkFkbWluaXN0cmF0aW9uVGFyZ2V0U3BlY2llc1tdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbFJvdXRlT2ZBZG1pbmlzdHJhdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbFJvdXRlT2ZBZG1pbmlzdHJhdGlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jb2RlKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY29kZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ2ZpcnN0RG9zZSddKSB7IHRoaXMuZmlyc3REb3NlID0gbmV3IGZoaXIuUXVhbnRpdHkoc291cmNlLmZpcnN0RG9zZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ21heFNpbmdsZURvc2UnXSkgeyB0aGlzLm1heFNpbmdsZURvc2UgPSBuZXcgZmhpci5RdWFudGl0eShzb3VyY2UubWF4U2luZ2xlRG9zZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ21heERvc2VQZXJEYXknXSkgeyB0aGlzLm1heERvc2VQZXJEYXkgPSBuZXcgZmhpci5RdWFudGl0eShzb3VyY2UubWF4RG9zZVBlckRheSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ21heERvc2VQZXJUcmVhdG1lbnRQZXJpb2QnXSkgeyB0aGlzLm1heERvc2VQZXJUcmVhdG1lbnRQZXJpb2QgPSBuZXcgZmhpci5SYXRpbyhzb3VyY2UubWF4RG9zZVBlclRyZWF0bWVudFBlcmlvZCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ21heFRyZWF0bWVudFBlcmlvZCddKSB7IHRoaXMubWF4VHJlYXRtZW50UGVyaW9kID0gbmV3IGZoaXIuRHVyYXRpb24oc291cmNlLm1heFRyZWF0bWVudFBlcmlvZCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3RhcmdldFNwZWNpZXMnXSkgeyB0aGlzLnRhcmdldFNwZWNpZXMgPSBzb3VyY2UudGFyZ2V0U3BlY2llcy5tYXAoKHgpID0+IG5ldyBmaGlyLk1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbFJvdXRlT2ZBZG1pbmlzdHJhdGlvblRhcmdldFNwZWNpZXMoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy50YXJnZXRTcGVjaWVzID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb246c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24pO1xyXG4gICAgaWYgKGV4cHJlc3Npb24gPT09ICcnKSB7IGV4cHJlc3Npb24gPSAnTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsLnJvdXRlT2ZBZG1pbmlzdHJhdGlvbicgfVxyXG4gICAgaWYgKCF0aGlzWydjb2RlJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IGNvZGUgZmhpcjogTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsLnJvdXRlT2ZBZG1pbmlzdHJhdGlvbi5jb2RlOkNvZGVhYmxlQ29uY2VwdCcsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiY29kZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmNvZGUuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLmNvZGUnKSk7IH1cclxuICAgIGlmICh0aGlzW1wiZmlyc3REb3NlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZmlyc3REb3NlLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5maXJzdERvc2UnKSk7IH1cclxuICAgIGlmICh0aGlzW1wibWF4U2luZ2xlRG9zZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm1heFNpbmdsZURvc2UuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLm1heFNpbmdsZURvc2UnKSk7IH1cclxuICAgIGlmICh0aGlzW1wibWF4RG9zZVBlckRheVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm1heERvc2VQZXJEYXkuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLm1heERvc2VQZXJEYXknKSk7IH1cclxuICAgIGlmICh0aGlzW1wibWF4RG9zZVBlclRyZWF0bWVudFBlcmlvZFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm1heERvc2VQZXJUcmVhdG1lbnRQZXJpb2QuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLm1heERvc2VQZXJUcmVhdG1lbnRQZXJpb2QnKSk7IH1cclxuICAgIGlmICh0aGlzW1wibWF4VHJlYXRtZW50UGVyaW9kXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMubWF4VHJlYXRtZW50UGVyaW9kLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5tYXhUcmVhdG1lbnRQZXJpb2QnKSk7IH1cclxuICAgIGlmICh0aGlzW1widGFyZ2V0U3BlY2llc1wiXSkgeyB0aGlzLnRhcmdldFNwZWNpZXMuZm9yRWFjaCgoeCxpKSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbitgLnRhcmdldFNwZWNpZXNbJHtpfV1gKSk7IH0pIH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWwgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsQXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsXCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFuIGlkZW50aWZpZXIgZm9yIHRoZSBwaGFybWFjZXV0aWNhbCBtZWRpY2luYWwgcHJvZHVjdC5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgYWRtaW5pc3RyYWJsZSBkb3NlIGZvcm0sIGFmdGVyIG5lY2Vzc2FyeSByZWNvbnN0aXR1dGlvbi5cclxuICAgKi9cclxuICBhZG1pbmlzdHJhYmxlRG9zZUZvcm06IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRvZG8uXHJcbiAgICovXHJcbiAgdW5pdE9mUHJlc2VudGF0aW9uPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmdyZWRpZW50LlxyXG4gICAqL1xyXG4gIGluZ3JlZGllbnQ/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWNjb21wYW55aW5nIGRldmljZS5cclxuICAgKi9cclxuICBkZXZpY2U/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ2hhcmFjdGVyaXN0aWNzIGUuZy4gYSBwcm9kdWN0cyBvbnNldCBvZiBhY3Rpb24uXHJcbiAgICovXHJcbiAgY2hhcmFjdGVyaXN0aWNzPzogZmhpci5NZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxDaGFyYWN0ZXJpc3RpY3NBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXRoIGJ5IHdoaWNoIHRoZSBwaGFybWFjZXV0aWNhbCBwcm9kdWN0IGlzIHRha2VuIGludG8gb3IgbWFrZXMgY29udGFjdCB3aXRoIHRoZSBib2R5LlxyXG4gICAqL1xyXG4gIHJvdXRlT2ZBZG1pbmlzdHJhdGlvbjogZmhpci5NZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxSb3V0ZU9mQWRtaW5pc3RyYXRpb25BcmdzW118bnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgcGhhcm1hY2V1dGljYWwgcHJvZHVjdCBkZXNjcmliZWQgaW4gdGVybXMgb2YgaXRzIGNvbXBvc2l0aW9uIGFuZCBkb3NlIGZvcm0uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWwnO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNvdXJjZVR5cGU6IFwiTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsXCI7XHJcbiAgLyoqXHJcbiAgICogQW4gaWRlbnRpZmllciBmb3IgdGhlIHBoYXJtYWNldXRpY2FsIG1lZGljaW5hbCBwcm9kdWN0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyOiBmaGlyLklkZW50aWZpZXJbXTtcclxuICAvKipcclxuICAgKiBUaGUgYWRtaW5pc3RyYWJsZSBkb3NlIGZvcm0sIGFmdGVyIG5lY2Vzc2FyeSByZWNvbnN0aXR1dGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgYWRtaW5pc3RyYWJsZURvc2VGb3JtOiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRvZG8uXHJcbiAgICovXHJcbiAgcHVibGljIHVuaXRPZlByZXNlbnRhdGlvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmdyZWRpZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpbmdyZWRpZW50OiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIEFjY29tcGFueWluZyBkZXZpY2UuXHJcbiAgICovXHJcbiAgcHVibGljIGRldmljZTogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBDaGFyYWN0ZXJpc3RpY3MgZS5nLiBhIHByb2R1Y3RzIG9uc2V0IG9mIGFjdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgY2hhcmFjdGVyaXN0aWNzOiBmaGlyLk1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbENoYXJhY3RlcmlzdGljc1tdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXRoIGJ5IHdoaWNoIHRoZSBwaGFybWFjZXV0aWNhbCBwcm9kdWN0IGlzIHRha2VuIGludG8gb3IgbWFrZXMgY29udGFjdCB3aXRoIHRoZSBib2R5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyByb3V0ZU9mQWRtaW5pc3RyYXRpb246IGZoaXIuTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsUm91dGVPZkFkbWluaXN0cmF0aW9uW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ01lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbCc7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gc291cmNlLmlkZW50aWZpZXIubWFwKCh4KSA9PiBuZXcgZmhpci5JZGVudGlmaWVyKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaWRlbnRpZmllciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydhZG1pbmlzdHJhYmxlRG9zZUZvcm0nXSkgeyB0aGlzLmFkbWluaXN0cmFibGVEb3NlRm9ybSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuYWRtaW5pc3RyYWJsZURvc2VGb3JtKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYWRtaW5pc3RyYWJsZURvc2VGb3JtID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsndW5pdE9mUHJlc2VudGF0aW9uJ10pIHsgdGhpcy51bml0T2ZQcmVzZW50YXRpb24gPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnVuaXRPZlByZXNlbnRhdGlvbik7IH1cclxuICAgIGlmIChzb3VyY2VbJ2luZ3JlZGllbnQnXSkgeyB0aGlzLmluZ3JlZGllbnQgPSBzb3VyY2UuaW5ncmVkaWVudC5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmluZ3JlZGllbnQgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGV2aWNlJ10pIHsgdGhpcy5kZXZpY2UgPSBzb3VyY2UuZGV2aWNlLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZGV2aWNlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2NoYXJhY3RlcmlzdGljcyddKSB7IHRoaXMuY2hhcmFjdGVyaXN0aWNzID0gc291cmNlLmNoYXJhY3RlcmlzdGljcy5tYXAoKHgpID0+IG5ldyBmaGlyLk1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbENoYXJhY3RlcmlzdGljcyh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNoYXJhY3RlcmlzdGljcyA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydyb3V0ZU9mQWRtaW5pc3RyYXRpb24nXSkgeyB0aGlzLnJvdXRlT2ZBZG1pbmlzdHJhdGlvbiA9IHNvdXJjZS5yb3V0ZU9mQWRtaW5pc3RyYXRpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5NZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxSb3V0ZU9mQWRtaW5pc3RyYXRpb24oeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yb3V0ZU9mQWRtaW5pc3RyYXRpb24gPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWwnIH1cclxuICAgIGlmICghdGhpc1sncmVzb3VyY2VUeXBlJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHJlc291cmNlVHlwZSBmaGlyOiBNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWwucmVzb3VyY2VUeXBlOlwiTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsXCInLCBleHByZXNzaW9uOiBbZXhwcmVzc2lvbl0gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImlkZW50aWZpZXJcIl0pIHsgdGhpcy5pZGVudGlmaWVyLmZvckVhY2goKHgsaSkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rYC5pZGVudGlmaWVyWyR7aX1dYCkpOyB9KSB9XHJcbiAgICBpZiAoIXRoaXNbJ2FkbWluaXN0cmFibGVEb3NlRm9ybSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBhZG1pbmlzdHJhYmxlRG9zZUZvcm0gZmhpcjogTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsLmFkbWluaXN0cmFibGVEb3NlRm9ybTpDb2RlYWJsZUNvbmNlcHQnLCBleHByZXNzaW9uOiBbZXhwcmVzc2lvbl0gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImFkbWluaXN0cmFibGVEb3NlRm9ybVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmFkbWluaXN0cmFibGVEb3NlRm9ybS5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuYWRtaW5pc3RyYWJsZURvc2VGb3JtJykpOyB9XHJcbiAgICBpZiAodGhpc1tcInVuaXRPZlByZXNlbnRhdGlvblwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnVuaXRPZlByZXNlbnRhdGlvbi5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycudW5pdE9mUHJlc2VudGF0aW9uJykpOyB9XHJcbiAgICBpZiAodGhpc1tcImluZ3JlZGllbnRcIl0pIHsgdGhpcy5pbmdyZWRpZW50LmZvckVhY2goKHgsaSkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rYC5pbmdyZWRpZW50WyR7aX1dYCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImRldmljZVwiXSkgeyB0aGlzLmRldmljZS5mb3JFYWNoKCh4LGkpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uK2AuZGV2aWNlWyR7aX1dYCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImNoYXJhY3RlcmlzdGljc1wiXSkgeyB0aGlzLmNoYXJhY3RlcmlzdGljcy5mb3JFYWNoKCh4LGkpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uK2AuY2hhcmFjdGVyaXN0aWNzWyR7aX1dYCkpOyB9KSB9XHJcbiAgICBpZiAoIXRoaXNbJ3JvdXRlT2ZBZG1pbmlzdHJhdGlvbiddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSByb3V0ZU9mQWRtaW5pc3RyYXRpb24gZmhpcjogTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsLnJvdXRlT2ZBZG1pbmlzdHJhdGlvbjpyb3V0ZU9mQWRtaW5pc3RyYXRpb24nLCBleHByZXNzaW9uOiBbZXhwcmVzc2lvbl0gfSk7XHJcbiAgICB9IGVsc2UgaWYgKCFBcnJheS5pc0FycmF5KHRoaXMucm91dGVPZkFkbWluaXN0cmF0aW9uKSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnc3RydWN0dXJlJywgZGlhZ25vc3RpY3M6ICdGb3VuZCBzY2FsYXIgaW4gYXJyYXkgcHJvcGVydHkgcm91dGVPZkFkbWluaXN0cmF0aW9uIGZoaXI6IE1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbC5yb3V0ZU9mQWRtaW5pc3RyYXRpb246cm91dGVPZkFkbWluaXN0cmF0aW9uJywgZXhwcmVzc2lvbjogW2V4cHJlc3Npb25dIH0pO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnJvdXRlT2ZBZG1pbmlzdHJhdGlvbi5sZW5ndGggPT09IDApIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHJvdXRlT2ZBZG1pbmlzdHJhdGlvbiBmaGlyOiBNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWwucm91dGVPZkFkbWluaXN0cmF0aW9uOnJvdXRlT2ZBZG1pbmlzdHJhdGlvbicsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wicm91dGVPZkFkbWluaXN0cmF0aW9uXCJdKSB7IHRoaXMucm91dGVPZkFkbWluaXN0cmF0aW9uLmZvckVhY2goKHgsaSkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rYC5yb3V0ZU9mQWRtaW5pc3RyYXRpb25bJHtpfV1gKSk7IH0pIH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbiJdfQ==