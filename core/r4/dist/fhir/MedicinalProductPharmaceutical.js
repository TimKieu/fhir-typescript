// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: MedicinalProductPharmaceutical
import * as fhir from '../fhir.js';
/**
 * Characteristics e.g. a products onset of action.
 */
export class MedicinalProductPharmaceuticalCharacteristics extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductPharmaceuticalCharacteristics - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code, options);
        }
        else {
            this.code = null;
        }
        if (source['status']) {
            this.status = new fhir.CodeableConcept(source.status, options);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicinalProductPharmaceutical.characteristics';
        }
        iss.push(...this.vRS('code', exp));
        iss.push(...this.vOS('status', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductPharmaceuticalCharacteristics._fts_dataType = 'MedicinalProductPharmaceuticalCharacteristics';
/**
 * A species specific time during which consumption of animal product is not appropriate.
 */
export class MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpeciesWithdrawalPeriod extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpeciesWithdrawalPeriod - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['tissue']) {
            this.tissue = new fhir.CodeableConcept(source.tissue, options);
        }
        else {
            this.tissue = null;
        }
        if (source['value']) {
            this.value = new fhir.Quantity(source.value, options);
        }
        else {
            this.value = null;
        }
        if (source['supportingInformation'] !== undefined) {
            this.supportingInformation = new fhir.FhirString({ value: source.supportingInformation }, options);
        }
        if (source['_supportingInformation']) {
            if (this.supportingInformation) {
                this.supportingInformation.addExtendedProperties(source._supportingInformation);
            }
            else {
                this.supportingInformation = new fhir.FhirString(source._supportingInformation, options);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicinalProductPharmaceutical.routeOfAdministration.targetSpecies.withdrawalPeriod';
        }
        iss.push(...this.vRS('tissue', exp));
        iss.push(...this.vRS('value', exp));
        iss.push(...this.vOS('supportingInformation', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpeciesWithdrawalPeriod._fts_dataType = 'MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpeciesWithdrawalPeriod';
/**
 * A species for which this route applies.
 */
export class MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpecies extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpecies - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code, options);
        }
        else {
            this.code = null;
        }
        if (source['withdrawalPeriod']) {
            this.withdrawalPeriod = source.withdrawalPeriod.map((x) => new fhir.MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpeciesWithdrawalPeriod(x, options));
        }
        else {
            this.withdrawalPeriod = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicinalProductPharmaceutical.routeOfAdministration.targetSpecies';
        }
        iss.push(...this.vRS('code', exp));
        iss.push(...this.vOA('withdrawalPeriod', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpecies._fts_dataType = 'MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpecies';
/**
 * The path by which the pharmaceutical product is taken into or makes contact with the body.
 */
export class MedicinalProductPharmaceuticalRouteOfAdministration extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductPharmaceuticalRouteOfAdministration - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code, options);
        }
        else {
            this.code = null;
        }
        if (source['firstDose']) {
            this.firstDose = new fhir.Quantity(source.firstDose, options);
        }
        if (source['maxSingleDose']) {
            this.maxSingleDose = new fhir.Quantity(source.maxSingleDose, options);
        }
        if (source['maxDosePerDay']) {
            this.maxDosePerDay = new fhir.Quantity(source.maxDosePerDay, options);
        }
        if (source['maxDosePerTreatmentPeriod']) {
            this.maxDosePerTreatmentPeriod = new fhir.Ratio(source.maxDosePerTreatmentPeriod, options);
        }
        if (source['maxTreatmentPeriod']) {
            this.maxTreatmentPeriod = new fhir.Duration(source.maxTreatmentPeriod, options);
        }
        if (source['targetSpecies']) {
            this.targetSpecies = source.targetSpecies.map((x) => new fhir.MedicinalProductPharmaceuticalRouteOfAdministrationTargetSpecies(x, options));
        }
        else {
            this.targetSpecies = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicinalProductPharmaceutical.routeOfAdministration';
        }
        iss.push(...this.vRS('code', exp));
        iss.push(...this.vOS('firstDose', exp));
        iss.push(...this.vOS('maxSingleDose', exp));
        iss.push(...this.vOS('maxDosePerDay', exp));
        iss.push(...this.vOS('maxDosePerTreatmentPeriod', exp));
        iss.push(...this.vOS('maxTreatmentPeriod', exp));
        iss.push(...this.vOA('targetSpecies', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductPharmaceuticalRouteOfAdministration._fts_dataType = 'MedicinalProductPharmaceuticalRouteOfAdministration';
/**
 * A pharmaceutical product described in terms of its composition and dose form.
 */
export class MedicinalProductPharmaceutical extends fhir.DomainResource {
    /**
     * Default constructor for MedicinalProductPharmaceutical - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'MedicinalProductPharmaceutical';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x, options));
        }
        else {
            this.identifier = [];
        }
        if (source['administrableDoseForm']) {
            this.administrableDoseForm = new fhir.CodeableConcept(source.administrableDoseForm, options);
        }
        else {
            this.administrableDoseForm = null;
        }
        if (source['unitOfPresentation']) {
            this.unitOfPresentation = new fhir.CodeableConcept(source.unitOfPresentation, options);
        }
        if (source['ingredient']) {
            this.ingredient = source.ingredient.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.ingredient = [];
        }
        if (source['device']) {
            this.device = source.device.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.device = [];
        }
        if (source['characteristics']) {
            this.characteristics = source.characteristics.map((x) => new fhir.MedicinalProductPharmaceuticalCharacteristics(x, options));
        }
        else {
            this.characteristics = [];
        }
        if (source['routeOfAdministration']) {
            this.routeOfAdministration = source.routeOfAdministration.map((x) => new fhir.MedicinalProductPharmaceuticalRouteOfAdministration(x, options));
        }
        else {
            this.routeOfAdministration = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicinalProductPharmaceutical';
        }
        iss.push(...this.vOA('identifier', exp));
        iss.push(...this.vRS('administrableDoseForm', exp));
        iss.push(...this.vOS('unitOfPresentation', exp));
        iss.push(...this.vOA('ingredient', exp));
        iss.push(...this.vOA('device', exp));
        iss.push(...this.vOA('characteristics', exp));
        iss.push(...this.vRA('routeOfAdministration', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductPharmaceutical._fts_dataType = 'MedicinalProductPharmaceutical';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9NZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsZ0RBQWdEO0FBRWhELE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBZ0JuQzs7R0FFRztBQUNILE1BQU0sT0FBTyw2Q0FBOEMsU0FBUSxJQUFJLENBQUMsZUFBZTtJQWFyRjs7T0FFRztJQUNILFlBQVksU0FBb0UsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDMUgsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FBRTthQUM5RTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDMUIsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1NBQUU7SUFDM0YsQ0FBQztJQUNEOztPQUVHO0lBQ2EsaUJBQWlCLENBQUMsTUFBYSxFQUFFO1FBQy9DLElBQUksR0FBRyxHQUFtQixLQUFLLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDdkQsSUFBSSxHQUFHLEtBQUssRUFBRSxFQUFFO1lBQUUsR0FBRyxHQUFHLGdEQUFnRCxDQUFBO1NBQUU7UUFDMUUsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFH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LEdBQUcsR0FBRyxnQ0FBZ0MsQ0FBQTtTQUFFO1FBQzFELEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3hDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLHVCQUF1QixFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbkQsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsb0JBQW9CLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNoRCxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN4QyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNwQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzdDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLHVCQUF1QixFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbkQsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDOztBQXRFRDs7R0FFRztBQUM2Qiw0Q0FBYSxHQUFVLGdDQUFnQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0LmNvcmUgdmVyc2lvbjogNC4wLjFcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsQ2hhcmFjdGVyaXN0aWNzIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbENoYXJhY3RlcmlzdGljc0FyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEEgY29kZWQgY2hhcmFjdGVyaXN0aWMuXHJcbiAgICovXHJcbiAgY29kZTogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIHN0YXR1cyBvZiBjaGFyYWN0ZXJpc3RpYyBlLmcuIGFzc2lnbmVkIG9yIHBlbmRpbmcuXHJcbiAgICovXHJcbiAgc3RhdHVzPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoYXJhY3RlcmlzdGljcyBlLmcuIGEgcHJvZHVjdHMgb25zZXQgb2YgYWN0aW9uLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbENoYXJhY3RlcmlzdGljcyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ01lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbENoYXJhY3RlcmlzdGljcyc7XHJcbiAgLyoqXHJcbiAgICogQSBjb2RlZCBjaGFyYWN0ZXJpc3RpYy5cclxuICAgKi9cclxuICBwdWJsaWMgY29kZTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgc3RhdHVzIG9mIGNoYXJhY3RlcmlzdGljIGUuZy4gYXNzaWduZWQgb3IgcGVuZGluZy5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdHVzPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbENoYXJhY3RlcmlzdGljcyAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbENoYXJhY3RlcmlzdGljc0FyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jb2RlLCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY29kZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0YXR1cyddKSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5zdGF0dXMsIG9wdGlvbnMpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsLmNoYXJhY3RlcmlzdGljcycgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ2NvZGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3N0YXR1cycsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsUm91dGVPZkFkbWluaXN0cmF0aW9uVGFyZ2V0U3BlY2llc1dpdGhkcmF3YWxQZXJpb2QgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsUm91dGVPZkFkbWluaXN0cmF0aW9uVGFyZ2V0U3BlY2llc1dpdGhkcmF3YWxQZXJpb2RBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBDb2RlZCBleHByZXNzaW9uIGZvciB0aGUgdHlwZSBvZiB0aXNzdWUgZm9yIHdoaWNoIHRoZSB3aXRoZHJhd2FsIHBlcmlvZCBhcHBsdWVzLCBlLmcuIG1lYXQsIG1pbGsuXHJcbiAgICovXHJcbiAgdGlzc3VlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBBIHZhbHVlIGZvciB0aGUgdGltZS5cclxuICAgKi9cclxuICB2YWx1ZTogZmhpci5RdWFudGl0eUFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBFeHRyYSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgd2l0aGRyYXdhbCBwZXJpb2QuXHJcbiAgICovXHJcbiAgc3VwcG9ydGluZ0luZm9ybWF0aW9uPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbC5yb3V0ZU9mQWRtaW5pc3RyYXRpb24udGFyZ2V0U3BlY2llcy53aXRoZHJhd2FsUGVyaW9kLnN1cHBvcnRpbmdJbmZvcm1hdGlvblxyXG4gICAqL1xyXG4gIF9zdXBwb3J0aW5nSW5mb3JtYXRpb24/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG59XHJcblxyXG4vKipcclxuICogQSBzcGVjaWVzIHNwZWNpZmljIHRpbWUgZHVyaW5nIHdoaWNoIGNvbnN1bXB0aW9uIG9mIGFuaW1hbCBwcm9kdWN0IGlzIG5vdCBhcHByb3ByaWF0ZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxSb3V0ZU9mQWRtaW5pc3RyYXRpb25UYXJnZXRTcGVjaWVzV2l0aGRyYXdhbFBlcmlvZCBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ01lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbFJvdXRlT2ZBZG1pbmlzdHJhdGlvblRhcmdldFNwZWNpZXNXaXRoZHJhd2FsUGVyaW9kJztcclxuICAvKipcclxuICAgKiBDb2RlZCBleHByZXNzaW9uIGZvciB0aGUgdHlwZSBvZiB0aXNzdWUgZm9yIHdoaWNoIHRoZSB3aXRoZHJhd2FsIHBlcmlvZCBhcHBsdWVzLCBlLmcuIG1lYXQsIG1pbGsuXHJcbiAgICovXHJcbiAgcHVibGljIHRpc3N1ZTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBBIHZhbHVlIGZvciB0aGUgdGltZS5cclxuICAgKi9cclxuICBwdWJsaWMgdmFsdWU6IGZoaXIuUXVhbnRpdHl8bnVsbDtcclxuICAvKipcclxuICAgKiBFeHRyYSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgd2l0aGRyYXdhbCBwZXJpb2QuXHJcbiAgICovXHJcbiAgcHVibGljIHN1cHBvcnRpbmdJbmZvcm1hdGlvbj86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsUm91dGVPZkFkbWluaXN0cmF0aW9uVGFyZ2V0U3BlY2llc1dpdGhkcmF3YWxQZXJpb2QgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxSb3V0ZU9mQWRtaW5pc3RyYXRpb25UYXJnZXRTcGVjaWVzV2l0aGRyYXdhbFBlcmlvZEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWyd0aXNzdWUnXSkgeyB0aGlzLnRpc3N1ZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UudGlzc3VlLCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudGlzc3VlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsndmFsdWUnXSkgeyB0aGlzLnZhbHVlID0gbmV3IGZoaXIuUXVhbnRpdHkoc291cmNlLnZhbHVlLCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudmFsdWUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydzdXBwb3J0aW5nSW5mb3JtYXRpb24nXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuc3VwcG9ydGluZ0luZm9ybWF0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5zdXBwb3J0aW5nSW5mb3JtYXRpb259LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3N1cHBvcnRpbmdJbmZvcm1hdGlvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLnN1cHBvcnRpbmdJbmZvcm1hdGlvbikgeyB0aGlzLnN1cHBvcnRpbmdJbmZvcm1hdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zdXBwb3J0aW5nSW5mb3JtYXRpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zdXBwb3J0aW5nSW5mb3JtYXRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fc3VwcG9ydGluZ0luZm9ybWF0aW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsLnJvdXRlT2ZBZG1pbmlzdHJhdGlvbi50YXJnZXRTcGVjaWVzLndpdGhkcmF3YWxQZXJpb2QnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCd0aXNzdWUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ3ZhbHVlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdzdXBwb3J0aW5nSW5mb3JtYXRpb24nLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbFJvdXRlT2ZBZG1pbmlzdHJhdGlvblRhcmdldFNwZWNpZXMgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsUm91dGVPZkFkbWluaXN0cmF0aW9uVGFyZ2V0U3BlY2llc0FyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIENvZGVkIGV4cHJlc3Npb24gZm9yIHRoZSBzcGVjaWVzLlxyXG4gICAqL1xyXG4gIGNvZGU6IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIEEgc3BlY2llcyBzcGVjaWZpYyB0aW1lIGR1cmluZyB3aGljaCBjb25zdW1wdGlvbiBvZiBhbmltYWwgcHJvZHVjdCBpcyBub3QgYXBwcm9wcmlhdGUuXHJcbiAgICovXHJcbiAgd2l0aGRyYXdhbFBlcmlvZD86IGZoaXIuTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsUm91dGVPZkFkbWluaXN0cmF0aW9uVGFyZ2V0U3BlY2llc1dpdGhkcmF3YWxQZXJpb2RBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQSBzcGVjaWVzIGZvciB3aGljaCB0aGlzIHJvdXRlIGFwcGxpZXMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsUm91dGVPZkFkbWluaXN0cmF0aW9uVGFyZ2V0U3BlY2llcyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ01lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbFJvdXRlT2ZBZG1pbmlzdHJhdGlvblRhcmdldFNwZWNpZXMnO1xyXG4gIC8qKlxyXG4gICAqIENvZGVkIGV4cHJlc3Npb24gZm9yIHRoZSBzcGVjaWVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb2RlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEEgc3BlY2llcyBzcGVjaWZpYyB0aW1lIGR1cmluZyB3aGljaCBjb25zdW1wdGlvbiBvZiBhbmltYWwgcHJvZHVjdCBpcyBub3QgYXBwcm9wcmlhdGUuXHJcbiAgICovXHJcbiAgcHVibGljIHdpdGhkcmF3YWxQZXJpb2Q6IGZoaXIuTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsUm91dGVPZkFkbWluaXN0cmF0aW9uVGFyZ2V0U3BlY2llc1dpdGhkcmF3YWxQZXJpb2RbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxSb3V0ZU9mQWRtaW5pc3RyYXRpb25UYXJnZXRTcGVjaWVzIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsUm91dGVPZkFkbWluaXN0cmF0aW9uVGFyZ2V0U3BlY2llc0FyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jb2RlLCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY29kZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3dpdGhkcmF3YWxQZXJpb2QnXSkgeyB0aGlzLndpdGhkcmF3YWxQZXJpb2QgPSBzb3VyY2Uud2l0aGRyYXdhbFBlcmlvZC5tYXAoKHgpID0+IG5ldyBmaGlyLk1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbFJvdXRlT2ZBZG1pbmlzdHJhdGlvblRhcmdldFNwZWNpZXNXaXRoZHJhd2FsUGVyaW9kKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMud2l0aGRyYXdhbFBlcmlvZCA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsLnJvdXRlT2ZBZG1pbmlzdHJhdGlvbi50YXJnZXRTcGVjaWVzJyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygnY29kZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnd2l0aGRyYXdhbFBlcmlvZCcsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsUm91dGVPZkFkbWluaXN0cmF0aW9uIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbFJvdXRlT2ZBZG1pbmlzdHJhdGlvbkFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIENvZGVkIGV4cHJlc3Npb24gZm9yIHRoZSByb3V0ZS5cclxuICAgKi9cclxuICBjb2RlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgZmlyc3QgZG9zZSAoZG9zZSBxdWFudGl0eSkgYWRtaW5pc3RlcmVkIGluIGh1bWFucyBjYW4gYmUgc3BlY2lmaWVkLCBmb3IgYSBwcm9kdWN0IHVuZGVyIGludmVzdGlnYXRpb24sIHVzaW5nIGEgbnVtZXJpY2FsIHZhbHVlIGFuZCBpdHMgdW5pdCBvZiBtZWFzdXJlbWVudC5cclxuICAgKi9cclxuICBmaXJzdERvc2U/OiBmaGlyLlF1YW50aXR5QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG1heGltdW0gc2luZ2xlIGRvc2UgdGhhdCBjYW4gYmUgYWRtaW5pc3RlcmVkIGFzIHBlciB0aGUgcHJvdG9jb2wgb2YgYSBjbGluaWNhbCB0cmlhbCBjYW4gYmUgc3BlY2lmaWVkIHVzaW5nIGEgbnVtZXJpY2FsIHZhbHVlIGFuZCBpdHMgdW5pdCBvZiBtZWFzdXJlbWVudC5cclxuICAgKi9cclxuICBtYXhTaW5nbGVEb3NlPzogZmhpci5RdWFudGl0eUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBtYXhpbXVtIGRvc2UgcGVyIGRheSAobWF4aW11bSBkb3NlIHF1YW50aXR5IHRvIGJlIGFkbWluaXN0ZXJlZCBpbiBhbnkgb25lIDI0LWggcGVyaW9kKSB0aGF0IGNhbiBiZSBhZG1pbmlzdGVyZWQgYXMgcGVyIHRoZSBwcm90b2NvbCByZWZlcmVuY2VkIGluIHRoZSBjbGluaWNhbCB0cmlhbCBhdXRob3Jpc2F0aW9uLlxyXG4gICAqL1xyXG4gIG1heERvc2VQZXJEYXk/OiBmaGlyLlF1YW50aXR5QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG1heGltdW0gZG9zZSBwZXIgdHJlYXRtZW50IHBlcmlvZCB0aGF0IGNhbiBiZSBhZG1pbmlzdGVyZWQgYXMgcGVyIHRoZSBwcm90b2NvbCByZWZlcmVuY2VkIGluIHRoZSBjbGluaWNhbCB0cmlhbCBhdXRob3Jpc2F0aW9uLlxyXG4gICAqL1xyXG4gIG1heERvc2VQZXJUcmVhdG1lbnRQZXJpb2Q/OiBmaGlyLlJhdGlvQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG1heGltdW0gdHJlYXRtZW50IHBlcmlvZCBkdXJpbmcgd2hpY2ggYW4gSW52ZXN0aWdhdGlvbmFsIE1lZGljaW5hbCBQcm9kdWN0IGNhbiBiZSBhZG1pbmlzdGVyZWQgYXMgcGVyIHRoZSBwcm90b2NvbCByZWZlcmVuY2VkIGluIHRoZSBjbGluaWNhbCB0cmlhbCBhdXRob3Jpc2F0aW9uLlxyXG4gICAqL1xyXG4gIG1heFRyZWF0bWVudFBlcmlvZD86IGZoaXIuRHVyYXRpb25BcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHNwZWNpZXMgZm9yIHdoaWNoIHRoaXMgcm91dGUgYXBwbGllcy5cclxuICAgKi9cclxuICB0YXJnZXRTcGVjaWVzPzogZmhpci5NZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxSb3V0ZU9mQWRtaW5pc3RyYXRpb25UYXJnZXRTcGVjaWVzQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBwYXRoIGJ5IHdoaWNoIHRoZSBwaGFybWFjZXV0aWNhbCBwcm9kdWN0IGlzIHRha2VuIGludG8gb3IgbWFrZXMgY29udGFjdCB3aXRoIHRoZSBib2R5LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbFJvdXRlT2ZBZG1pbmlzdHJhdGlvbiBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ01lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbFJvdXRlT2ZBZG1pbmlzdHJhdGlvbic7XHJcbiAgLyoqXHJcbiAgICogQ29kZWQgZXhwcmVzc2lvbiBmb3IgdGhlIHJvdXRlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb2RlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBmaXJzdCBkb3NlIChkb3NlIHF1YW50aXR5KSBhZG1pbmlzdGVyZWQgaW4gaHVtYW5zIGNhbiBiZSBzcGVjaWZpZWQsIGZvciBhIHByb2R1Y3QgdW5kZXIgaW52ZXN0aWdhdGlvbiwgdXNpbmcgYSBudW1lcmljYWwgdmFsdWUgYW5kIGl0cyB1bml0IG9mIG1lYXN1cmVtZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBmaXJzdERvc2U/OiBmaGlyLlF1YW50aXR5fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbWF4aW11bSBzaW5nbGUgZG9zZSB0aGF0IGNhbiBiZSBhZG1pbmlzdGVyZWQgYXMgcGVyIHRoZSBwcm90b2NvbCBvZiBhIGNsaW5pY2FsIHRyaWFsIGNhbiBiZSBzcGVjaWZpZWQgdXNpbmcgYSBudW1lcmljYWwgdmFsdWUgYW5kIGl0cyB1bml0IG9mIG1lYXN1cmVtZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtYXhTaW5nbGVEb3NlPzogZmhpci5RdWFudGl0eXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG1heGltdW0gZG9zZSBwZXIgZGF5IChtYXhpbXVtIGRvc2UgcXVhbnRpdHkgdG8gYmUgYWRtaW5pc3RlcmVkIGluIGFueSBvbmUgMjQtaCBwZXJpb2QpIHRoYXQgY2FuIGJlIGFkbWluaXN0ZXJlZCBhcyBwZXIgdGhlIHByb3RvY29sIHJlZmVyZW5jZWQgaW4gdGhlIGNsaW5pY2FsIHRyaWFsIGF1dGhvcmlzYXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIG1heERvc2VQZXJEYXk/OiBmaGlyLlF1YW50aXR5fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbWF4aW11bSBkb3NlIHBlciB0cmVhdG1lbnQgcGVyaW9kIHRoYXQgY2FuIGJlIGFkbWluaXN0ZXJlZCBhcyBwZXIgdGhlIHByb3RvY29sIHJlZmVyZW5jZWQgaW4gdGhlIGNsaW5pY2FsIHRyaWFsIGF1dGhvcmlzYXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIG1heERvc2VQZXJUcmVhdG1lbnRQZXJpb2Q/OiBmaGlyLlJhdGlvfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbWF4aW11bSB0cmVhdG1lbnQgcGVyaW9kIGR1cmluZyB3aGljaCBhbiBJbnZlc3RpZ2F0aW9uYWwgTWVkaWNpbmFsIFByb2R1Y3QgY2FuIGJlIGFkbWluaXN0ZXJlZCBhcyBwZXIgdGhlIHByb3RvY29sIHJlZmVyZW5jZWQgaW4gdGhlIGNsaW5pY2FsIHRyaWFsIGF1dGhvcmlzYXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIG1heFRyZWF0bWVudFBlcmlvZD86IGZoaXIuRHVyYXRpb258dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgc3BlY2llcyBmb3Igd2hpY2ggdGhpcyByb3V0ZSBhcHBsaWVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0YXJnZXRTcGVjaWVzOiBmaGlyLk1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbFJvdXRlT2ZBZG1pbmlzdHJhdGlvblRhcmdldFNwZWNpZXNbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxSb3V0ZU9mQWRtaW5pc3RyYXRpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxSb3V0ZU9mQWRtaW5pc3RyYXRpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY29kZSwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvZGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydmaXJzdERvc2UnXSkgeyB0aGlzLmZpcnN0RG9zZSA9IG5ldyBmaGlyLlF1YW50aXR5KHNvdXJjZS5maXJzdERvc2UsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydtYXhTaW5nbGVEb3NlJ10pIHsgdGhpcy5tYXhTaW5nbGVEb3NlID0gbmV3IGZoaXIuUXVhbnRpdHkoc291cmNlLm1heFNpbmdsZURvc2UsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydtYXhEb3NlUGVyRGF5J10pIHsgdGhpcy5tYXhEb3NlUGVyRGF5ID0gbmV3IGZoaXIuUXVhbnRpdHkoc291cmNlLm1heERvc2VQZXJEYXksIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydtYXhEb3NlUGVyVHJlYXRtZW50UGVyaW9kJ10pIHsgdGhpcy5tYXhEb3NlUGVyVHJlYXRtZW50UGVyaW9kID0gbmV3IGZoaXIuUmF0aW8oc291cmNlLm1heERvc2VQZXJUcmVhdG1lbnRQZXJpb2QsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydtYXhUcmVhdG1lbnRQZXJpb2QnXSkgeyB0aGlzLm1heFRyZWF0bWVudFBlcmlvZCA9IG5ldyBmaGlyLkR1cmF0aW9uKHNvdXJjZS5tYXhUcmVhdG1lbnRQZXJpb2QsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWyd0YXJnZXRTcGVjaWVzJ10pIHsgdGhpcy50YXJnZXRTcGVjaWVzID0gc291cmNlLnRhcmdldFNwZWNpZXMubWFwKCh4KSA9PiBuZXcgZmhpci5NZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxSb3V0ZU9mQWRtaW5pc3RyYXRpb25UYXJnZXRTcGVjaWVzKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudGFyZ2V0U3BlY2llcyA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsLnJvdXRlT2ZBZG1pbmlzdHJhdGlvbicgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ2NvZGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2ZpcnN0RG9zZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnbWF4U2luZ2xlRG9zZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnbWF4RG9zZVBlckRheScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnbWF4RG9zZVBlclRyZWF0bWVudFBlcmlvZCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnbWF4VHJlYXRtZW50UGVyaW9kJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCd0YXJnZXRTcGVjaWVzJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWwgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsQXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsXCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFuIGlkZW50aWZpZXIgZm9yIHRoZSBwaGFybWFjZXV0aWNhbCBtZWRpY2luYWwgcHJvZHVjdC5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgYWRtaW5pc3RyYWJsZSBkb3NlIGZvcm0sIGFmdGVyIG5lY2Vzc2FyeSByZWNvbnN0aXR1dGlvbi5cclxuICAgKi9cclxuICBhZG1pbmlzdHJhYmxlRG9zZUZvcm06IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRvZG8uXHJcbiAgICovXHJcbiAgdW5pdE9mUHJlc2VudGF0aW9uPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmdyZWRpZW50LlxyXG4gICAqL1xyXG4gIGluZ3JlZGllbnQ/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWNjb21wYW55aW5nIGRldmljZS5cclxuICAgKi9cclxuICBkZXZpY2U/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ2hhcmFjdGVyaXN0aWNzIGUuZy4gYSBwcm9kdWN0cyBvbnNldCBvZiBhY3Rpb24uXHJcbiAgICovXHJcbiAgY2hhcmFjdGVyaXN0aWNzPzogZmhpci5NZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxDaGFyYWN0ZXJpc3RpY3NBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXRoIGJ5IHdoaWNoIHRoZSBwaGFybWFjZXV0aWNhbCBwcm9kdWN0IGlzIHRha2VuIGludG8gb3IgbWFrZXMgY29udGFjdCB3aXRoIHRoZSBib2R5LlxyXG4gICAqL1xyXG4gIHJvdXRlT2ZBZG1pbmlzdHJhdGlvbjogZmhpci5NZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxSb3V0ZU9mQWRtaW5pc3RyYXRpb25BcmdzW118bnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgcGhhcm1hY2V1dGljYWwgcHJvZHVjdCBkZXNjcmliZWQgaW4gdGVybXMgb2YgaXRzIGNvbXBvc2l0aW9uIGFuZCBkb3NlIGZvcm0uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdNZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWwnO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNvdXJjZVR5cGU6IFwiTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsXCI7XHJcbiAgLyoqXHJcbiAgICogQW4gaWRlbnRpZmllciBmb3IgdGhlIHBoYXJtYWNldXRpY2FsIG1lZGljaW5hbCBwcm9kdWN0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyOiBmaGlyLklkZW50aWZpZXJbXTtcclxuICAvKipcclxuICAgKiBUaGUgYWRtaW5pc3RyYWJsZSBkb3NlIGZvcm0sIGFmdGVyIG5lY2Vzc2FyeSByZWNvbnN0aXR1dGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgYWRtaW5pc3RyYWJsZURvc2VGb3JtOiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRvZG8uXHJcbiAgICovXHJcbiAgcHVibGljIHVuaXRPZlByZXNlbnRhdGlvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmdyZWRpZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpbmdyZWRpZW50OiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIEFjY29tcGFueWluZyBkZXZpY2UuXHJcbiAgICovXHJcbiAgcHVibGljIGRldmljZTogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBDaGFyYWN0ZXJpc3RpY3MgZS5nLiBhIHByb2R1Y3RzIG9uc2V0IG9mIGFjdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgY2hhcmFjdGVyaXN0aWNzOiBmaGlyLk1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbENoYXJhY3RlcmlzdGljc1tdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXRoIGJ5IHdoaWNoIHRoZSBwaGFybWFjZXV0aWNhbCBwcm9kdWN0IGlzIHRha2VuIGludG8gb3IgbWFrZXMgY29udGFjdCB3aXRoIHRoZSBib2R5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyByb3V0ZU9mQWRtaW5pc3RyYXRpb246IGZoaXIuTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsUm91dGVPZkFkbWluaXN0cmF0aW9uW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgTWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVkaWNpbmFsUHJvZHVjdFBoYXJtYWNldXRpY2FsQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ01lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbCc7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gc291cmNlLmlkZW50aWZpZXIubWFwKCh4KSA9PiBuZXcgZmhpci5JZGVudGlmaWVyKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaWRlbnRpZmllciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydhZG1pbmlzdHJhYmxlRG9zZUZvcm0nXSkgeyB0aGlzLmFkbWluaXN0cmFibGVEb3NlRm9ybSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuYWRtaW5pc3RyYWJsZURvc2VGb3JtLCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYWRtaW5pc3RyYWJsZURvc2VGb3JtID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsndW5pdE9mUHJlc2VudGF0aW9uJ10pIHsgdGhpcy51bml0T2ZQcmVzZW50YXRpb24gPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnVuaXRPZlByZXNlbnRhdGlvbiwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2luZ3JlZGllbnQnXSkgeyB0aGlzLmluZ3JlZGllbnQgPSBzb3VyY2UuaW5ncmVkaWVudC5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmluZ3JlZGllbnQgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGV2aWNlJ10pIHsgdGhpcy5kZXZpY2UgPSBzb3VyY2UuZGV2aWNlLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZGV2aWNlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2NoYXJhY3RlcmlzdGljcyddKSB7IHRoaXMuY2hhcmFjdGVyaXN0aWNzID0gc291cmNlLmNoYXJhY3RlcmlzdGljcy5tYXAoKHgpID0+IG5ldyBmaGlyLk1lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbENoYXJhY3RlcmlzdGljcyh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNoYXJhY3RlcmlzdGljcyA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydyb3V0ZU9mQWRtaW5pc3RyYXRpb24nXSkgeyB0aGlzLnJvdXRlT2ZBZG1pbmlzdHJhdGlvbiA9IHNvdXJjZS5yb3V0ZU9mQWRtaW5pc3RyYXRpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5NZWRpY2luYWxQcm9kdWN0UGhhcm1hY2V1dGljYWxSb3V0ZU9mQWRtaW5pc3RyYXRpb24oeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yb3V0ZU9mQWRtaW5pc3RyYXRpb24gPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ01lZGljaW5hbFByb2R1Y3RQaGFybWFjZXV0aWNhbCcgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2lkZW50aWZpZXInLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ2FkbWluaXN0cmFibGVEb3NlRm9ybScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygndW5pdE9mUHJlc2VudGF0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdpbmdyZWRpZW50JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdkZXZpY2UnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2NoYXJhY3RlcmlzdGljcycsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSQSgncm91dGVPZkFkbWluaXN0cmF0aW9uJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbiJdfQ==