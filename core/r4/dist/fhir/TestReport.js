// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: TestReport
import * as fhir from '../fhir.js';
// @ts-ignore
import { ReportParticipantTypeCodes } from '../fhirValueSets/ReportParticipantTypeCodes.js';
// @ts-ignore
import { ReportActionResultCodes } from '../fhirValueSets/ReportActionResultCodes.js';
// @ts-ignore
import { ReportStatusCodes } from '../fhirValueSets/ReportStatusCodes.js';
// @ts-ignore
import { ReportResultCodes } from '../fhirValueSets/ReportResultCodes.js';
/**
 * A participant in the test execution, either the execution engine, a client, or a server.
 */
export class TestReportParticipant extends fhir.BackboneElement {
    /**
     * Default constructor for TestReportParticipant - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['type']) {
            this.type = new fhir.FhirCode({ value: source.type });
        }
        else {
            this.type = null;
        }
        if (source['_type']) {
            if (this.type) {
                this.type.addExtendedProperties(source._type);
            }
            else {
                this.type = new fhir.FhirCode(source._type);
            }
        }
        if (source['uri']) {
            this.uri = new fhir.FhirUri({ value: source.uri });
        }
        else {
            this.uri = null;
        }
        if (source['_uri']) {
            if (this.uri) {
                this.uri.addExtendedProperties(source._uri);
            }
            else {
                this.uri = new fhir.FhirUri(source._uri);
            }
        }
        if (source['display']) {
            this.display = new fhir.FhirString({ value: source.display });
        }
        if (source['_display']) {
            if (this.display) {
                this.display.addExtendedProperties(source._display);
            }
            else {
                this.display = new fhir.FhirString(source._display);
            }
        }
    }
    /**
     * Required-bound Value Set for type (TestReport.participant.type)
     */
    static get typeRequiredCodes() {
        return ReportParticipantTypeCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['type']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property type:fhir.FhirCode<ReportParticipantTypeCodeType> fhir: TestReport.participant.type:code' });
        }
        if (this['type'] && (!Object.values(ReportParticipantTypeCodes).includes(this.type))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property type:fhir.FhirCode<ReportParticipantTypeCodeType> fhir: TestReport.participant.type:code Required binding to: ReportParticipantType' });
        }
        if (this["type"]) {
            issues.push(...this.type.doModelValidation());
        }
        if (!this['uri']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property uri:fhir.FhirUri fhir: TestReport.participant.uri:uri' });
        }
        if (this["uri"]) {
            issues.push(...this.uri.doModelValidation());
        }
        if (this["display"]) {
            issues.push(...this.display.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
TestReportParticipant._fts_dataType = 'TestReportParticipant';
/**
 * The operation performed.
 */
export class TestReportSetupActionOperation extends fhir.BackboneElement {
    /**
     * Default constructor for TestReportSetupActionOperation - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['result']) {
            this.result = new fhir.FhirCode({ value: source.result });
        }
        else {
            this.result = null;
        }
        if (source['_result']) {
            if (this.result) {
                this.result.addExtendedProperties(source._result);
            }
            else {
                this.result = new fhir.FhirCode(source._result);
            }
        }
        if (source['message']) {
            this.message = new fhir.FhirMarkdown({ value: source.message });
        }
        if (source['_message']) {
            if (this.message) {
                this.message.addExtendedProperties(source._message);
            }
            else {
                this.message = new fhir.FhirMarkdown(source._message);
            }
        }
        if (source['detail']) {
            this.detail = new fhir.FhirUri({ value: source.detail });
        }
        if (source['_detail']) {
            if (this.detail) {
                this.detail.addExtendedProperties(source._detail);
            }
            else {
                this.detail = new fhir.FhirUri(source._detail);
            }
        }
    }
    /**
     * Required-bound Value Set for result (TestReport.setup.action.operation.result)
     */
    static get resultRequiredCodes() {
        return ReportActionResultCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['result']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property result:fhir.FhirCode<ReportActionResultCodeType> fhir: TestReport.setup.action.operation.result:code' });
        }
        if (this['result'] && (!Object.values(ReportActionResultCodes).includes(this.result))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property result:fhir.FhirCode<ReportActionResultCodeType> fhir: TestReport.setup.action.operation.result:code Required binding to: ReportActionResult' });
        }
        if (this["result"]) {
            issues.push(...this.result.doModelValidation());
        }
        if (this["message"]) {
            issues.push(...this.message.doModelValidation());
        }
        if (this["detail"]) {
            issues.push(...this.detail.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
TestReportSetupActionOperation._fts_dataType = 'TestReportSetupActionOperation';
/**
 * The results of the assertion performed on the previous operations.
 */
export class TestReportSetupActionAssert extends fhir.BackboneElement {
    /**
     * Default constructor for TestReportSetupActionAssert - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['result']) {
            this.result = new fhir.FhirCode({ value: source.result });
        }
        else {
            this.result = null;
        }
        if (source['_result']) {
            if (this.result) {
                this.result.addExtendedProperties(source._result);
            }
            else {
                this.result = new fhir.FhirCode(source._result);
            }
        }
        if (source['message']) {
            this.message = new fhir.FhirMarkdown({ value: source.message });
        }
        if (source['_message']) {
            if (this.message) {
                this.message.addExtendedProperties(source._message);
            }
            else {
                this.message = new fhir.FhirMarkdown(source._message);
            }
        }
        if (source['detail']) {
            this.detail = new fhir.FhirString({ value: source.detail });
        }
        if (source['_detail']) {
            if (this.detail) {
                this.detail.addExtendedProperties(source._detail);
            }
            else {
                this.detail = new fhir.FhirString(source._detail);
            }
        }
    }
    /**
     * Required-bound Value Set for result (TestReport.setup.action.assert.result)
     */
    static get resultRequiredCodes() {
        return ReportActionResultCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['result']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property result:fhir.FhirCode<ReportActionResultCodeType> fhir: TestReport.setup.action.assert.result:code' });
        }
        if (this['result'] && (!Object.values(ReportActionResultCodes).includes(this.result))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property result:fhir.FhirCode<ReportActionResultCodeType> fhir: TestReport.setup.action.assert.result:code Required binding to: ReportActionResult' });
        }
        if (this["result"]) {
            issues.push(...this.result.doModelValidation());
        }
        if (this["message"]) {
            issues.push(...this.message.doModelValidation());
        }
        if (this["detail"]) {
            issues.push(...this.detail.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
TestReportSetupActionAssert._fts_dataType = 'TestReportSetupActionAssert';
/**
 * An action should contain either an operation or an assertion but not both.  It can contain any number of variables.
 */
export class TestReportSetupAction extends fhir.BackboneElement {
    /**
     * Default constructor for TestReportSetupAction - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['operation']) {
            this.operation = new fhir.TestReportSetupActionOperation(source.operation);
        }
        if (source['assert']) {
            this.assert = new fhir.TestReportSetupActionAssert(source.assert);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["operation"]) {
            issues.push(...this.operation.doModelValidation());
        }
        if (this["assert"]) {
            issues.push(...this.assert.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
TestReportSetupAction._fts_dataType = 'TestReportSetupAction';
/**
 * The results of the series of required setup operations before the tests were executed.
 */
export class TestReportSetup extends fhir.BackboneElement {
    /**
     * Default constructor for TestReportSetup - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['action']) {
            this.action = source.action.map((x) => new fhir.TestReportSetupAction(x));
        }
        else {
            this.action = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['action']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property action:fhir.TestReportSetupAction[] fhir: TestReport.setup.action:action' });
        }
        else if (!Array.isArray(this.action)) {
            issues.push({ severity: 'error', code: 'structure', diagnostics: 'Found scalar in array property action:fhir.TestReportSetupAction[] fhir: TestReport.setup.action:action' });
        }
        else if (this.action.length === 0) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property action:fhir.TestReportSetupAction[] fhir: TestReport.setup.action:action' });
        }
        if (this["action"]) {
            this.action.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
TestReportSetup._fts_dataType = 'TestReportSetup';
/**
 * An action should contain either an operation or an assertion but not both.  It can contain any number of variables.
 */
export class TestReportTestAction extends fhir.BackboneElement {
    /**
     * Default constructor for TestReportTestAction - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['operation']) {
            this.operation = new fhir.TestReportSetupActionOperation(source.operation);
        }
        if (source['assert']) {
            this.assert = new fhir.TestReportSetupActionAssert(source.assert);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["operation"]) {
            issues.push(...this.operation.doModelValidation());
        }
        if (this["assert"]) {
            issues.push(...this.assert.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
TestReportTestAction._fts_dataType = 'TestReportTestAction';
/**
 * A test executed from the test script.
 */
export class TestReportTest extends fhir.BackboneElement {
    /**
     * Default constructor for TestReportTest - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['name']) {
            this.name = new fhir.FhirString({ value: source.name });
        }
        if (source['_name']) {
            if (this.name) {
                this.name.addExtendedProperties(source._name);
            }
            else {
                this.name = new fhir.FhirString(source._name);
            }
        }
        if (source['description']) {
            this.description = new fhir.FhirString({ value: source.description });
        }
        if (source['_description']) {
            if (this.description) {
                this.description.addExtendedProperties(source._description);
            }
            else {
                this.description = new fhir.FhirString(source._description);
            }
        }
        if (source['action']) {
            this.action = source.action.map((x) => new fhir.TestReportTestAction(x));
        }
        else {
            this.action = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["name"]) {
            issues.push(...this.name.doModelValidation());
        }
        if (this["description"]) {
            issues.push(...this.description.doModelValidation());
        }
        if (!this['action']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property action:fhir.TestReportTestAction[] fhir: TestReport.test.action:action' });
        }
        else if (!Array.isArray(this.action)) {
            issues.push({ severity: 'error', code: 'structure', diagnostics: 'Found scalar in array property action:fhir.TestReportTestAction[] fhir: TestReport.test.action:action' });
        }
        else if (this.action.length === 0) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property action:fhir.TestReportTestAction[] fhir: TestReport.test.action:action' });
        }
        if (this["action"]) {
            this.action.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
TestReportTest._fts_dataType = 'TestReportTest';
/**
 * An action should contain either an operation or an assertion but not both.  It can contain any number of variables.
 */
export class TestReportTeardownAction extends fhir.BackboneElement {
    /**
     * Default constructor for TestReportTeardownAction - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['operation']) {
            this.operation = new fhir.TestReportSetupActionOperation(source.operation);
        }
        else {
            this.operation = null;
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['operation']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property operation:fhir.TestReportSetupActionOperation fhir: TestReport.teardown.action.operation:TestReport.setup.action.operation' });
        }
        if (this["operation"]) {
            issues.push(...this.operation.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
TestReportTeardownAction._fts_dataType = 'TestReportTeardownAction';
/**
 * The results of the series of operations required to clean up after all the tests were executed (successfully or otherwise).
 */
export class TestReportTeardown extends fhir.BackboneElement {
    /**
     * Default constructor for TestReportTeardown - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['action']) {
            this.action = source.action.map((x) => new fhir.TestReportTeardownAction(x));
        }
        else {
            this.action = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['action']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property action:fhir.TestReportTeardownAction[] fhir: TestReport.teardown.action:action' });
        }
        else if (!Array.isArray(this.action)) {
            issues.push({ severity: 'error', code: 'structure', diagnostics: 'Found scalar in array property action:fhir.TestReportTeardownAction[] fhir: TestReport.teardown.action:action' });
        }
        else if (this.action.length === 0) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property action:fhir.TestReportTeardownAction[] fhir: TestReport.teardown.action:action' });
        }
        if (this["action"]) {
            this.action.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
TestReportTeardown._fts_dataType = 'TestReportTeardown';
/**
 * A summary of information based on the results of executing a TestScript.
 */
export class TestReport extends fhir.DomainResource {
    /**
     * Default constructor for TestReport - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'TestReport';
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier);
        }
        if (source['name']) {
            this.name = new fhir.FhirString({ value: source.name });
        }
        if (source['_name']) {
            if (this.name) {
                this.name.addExtendedProperties(source._name);
            }
            else {
                this.name = new fhir.FhirString(source._name);
            }
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['testScript']) {
            this.testScript = new fhir.Reference(source.testScript);
        }
        else {
            this.testScript = null;
        }
        if (source['result']) {
            this.result = new fhir.FhirCode({ value: source.result });
        }
        else {
            this.result = null;
        }
        if (source['_result']) {
            if (this.result) {
                this.result.addExtendedProperties(source._result);
            }
            else {
                this.result = new fhir.FhirCode(source._result);
            }
        }
        if (source['score']) {
            this.score = new fhir.FhirDecimal({ value: source.score });
        }
        if (source['_score']) {
            if (this.score) {
                this.score.addExtendedProperties(source._score);
            }
            else {
                this.score = new fhir.FhirDecimal(source._score);
            }
        }
        if (source['tester']) {
            this.tester = new fhir.FhirString({ value: source.tester });
        }
        if (source['_tester']) {
            if (this.tester) {
                this.tester.addExtendedProperties(source._tester);
            }
            else {
                this.tester = new fhir.FhirString(source._tester);
            }
        }
        if (source['issued']) {
            this.issued = new fhir.FhirDateTime({ value: source.issued });
        }
        if (source['_issued']) {
            if (this.issued) {
                this.issued.addExtendedProperties(source._issued);
            }
            else {
                this.issued = new fhir.FhirDateTime(source._issued);
            }
        }
        if (source['participant']) {
            this.participant = source.participant.map((x) => new fhir.TestReportParticipant(x));
        }
        else {
            this.participant = [];
        }
        if (source['setup']) {
            this.setup = new fhir.TestReportSetup(source.setup);
        }
        if (source['test']) {
            this.test = source.test.map((x) => new fhir.TestReportTest(x));
        }
        else {
            this.test = [];
        }
        if (source['teardown']) {
            this.teardown = new fhir.TestReportTeardown(source.teardown);
        }
    }
    /**
     * Required-bound Value Set for status (TestReport.status)
     */
    static get statusRequiredCodes() {
        return ReportStatusCodes;
    }
    /**
     * Required-bound Value Set for result (TestReport.result)
     */
    static get resultRequiredCodes() {
        return ReportResultCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType:"TestReport" fhir: TestReport.resourceType:"TestReport"' });
        }
        if (this["identifier"]) {
            issues.push(...this.identifier.doModelValidation());
        }
        if (this["name"]) {
            issues.push(...this.name.doModelValidation());
        }
        if (!this['status']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property status:fhir.FhirCode<ReportStatusCodeType> fhir: TestReport.status:code' });
        }
        if (this['status'] && (!Object.values(ReportStatusCodes).includes(this.status))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property status:fhir.FhirCode<ReportStatusCodeType> fhir: TestReport.status:code Required binding to: ReportStatus' });
        }
        if (this["status"]) {
            issues.push(...this.status.doModelValidation());
        }
        if (!this['testScript']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property testScript:fhir.Reference fhir: TestReport.testScript:Reference' });
        }
        if (this["testScript"]) {
            issues.push(...this.testScript.doModelValidation());
        }
        if (!this['result']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property result:fhir.FhirCode<ReportResultCodeType> fhir: TestReport.result:code' });
        }
        if (this['result'] && (!Object.values(ReportResultCodes).includes(this.result))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property result:fhir.FhirCode<ReportResultCodeType> fhir: TestReport.result:code Required binding to: ReportResult' });
        }
        if (this["result"]) {
            issues.push(...this.result.doModelValidation());
        }
        if (this["score"]) {
            issues.push(...this.score.doModelValidation());
        }
        if (this["tester"]) {
            issues.push(...this.tester.doModelValidation());
        }
        if (this["issued"]) {
            issues.push(...this.issued.doModelValidation());
        }
        if (this["participant"]) {
            this.participant.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["setup"]) {
            issues.push(...this.setup.doModelValidation());
        }
        if (this["test"]) {
            this.test.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["teardown"]) {
            issues.push(...this.teardown.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
TestReport._fts_dataType = 'TestReport';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGVzdFJlcG9ydC5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvVGVzdFJlcG9ydC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQyw0QkFBNEI7QUFFNUIsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFJbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSwwQkFBMEIsRUFBa0MsTUFBTSxnREFBZ0QsQ0FBQztBQUc1SCxhQUFhO0FBQ2IsT0FBTyxFQUFFLHVCQUF1QixFQUErQixNQUFNLDZDQUE2QyxDQUFDO0FBR25ILGFBQWE7QUFDYixPQUFPLEVBQUUsaUJBQWlCLEVBQXlCLE1BQU0sdUNBQXVDLENBQUM7QUFHakcsYUFBYTtBQUNiLE9BQU8sRUFBRSxpQkFBaUIsRUFBeUIsTUFBTSx1Q0FBdUMsQ0FBQztBQStCakc7O0dBRUc7QUFDSCxNQUFNLE9BQU8scUJBQXNCLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFpQjdEOztPQUVHO0lBQ0gsWUFBWSxTQUE0QyxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUNsRyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQWdDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxJQUFJLEVBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDdEc7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztTQUFFO1FBQzFCLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQ25CLElBQUksSUFBSSxDQUFDLElBQUksRUFBRTtnQkFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxLQUFNLENBQUMsQ0FBQzthQUFFO2lCQUM3RDtnQkFB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UUFDeEcsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUN0RSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQUU7UUFDMUYsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUM1RSxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQXpKRDs7R0FFRztBQUM2Qix3QkFBYSxHQUFVLFlBQVksQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNC5jb3JlIHZlcnNpb246IDQuMC4xXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogVGVzdFJlcG9ydFxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUmVwb3J0UGFydGljaXBhbnRUeXBlQ29kaW5ncywgUmVwb3J0UGFydGljaXBhbnRUeXBlQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUmVwb3J0UGFydGljaXBhbnRUeXBlQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUmVwb3J0UGFydGljaXBhbnRUeXBlQ29kZXMsICBSZXBvcnRQYXJ0aWNpcGFudFR5cGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUmVwb3J0UGFydGljaXBhbnRUeXBlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFJlcG9ydEFjdGlvblJlc3VsdENvZGluZ3MsIFJlcG9ydEFjdGlvblJlc3VsdENvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1JlcG9ydEFjdGlvblJlc3VsdENvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFJlcG9ydEFjdGlvblJlc3VsdENvZGVzLCAgUmVwb3J0QWN0aW9uUmVzdWx0Q29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1JlcG9ydEFjdGlvblJlc3VsdENvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBSZXBvcnRTdGF0dXNDb2RpbmdzLCBSZXBvcnRTdGF0dXNDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9SZXBvcnRTdGF0dXNDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBSZXBvcnRTdGF0dXNDb2RlcywgIFJlcG9ydFN0YXR1c0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9SZXBvcnRTdGF0dXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUmVwb3J0UmVzdWx0Q29kaW5ncywgUmVwb3J0UmVzdWx0Q29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUmVwb3J0UmVzdWx0Q29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUmVwb3J0UmVzdWx0Q29kZXMsICBSZXBvcnRSZXN1bHRDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUmVwb3J0UmVzdWx0Q29kZXMuanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgVGVzdFJlcG9ydFBhcnRpY2lwYW50IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFRlc3RSZXBvcnRQYXJ0aWNpcGFudEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0eXBlIG9mIHBhcnRpY2lwYW50LlxyXG4gICAqL1xyXG4gIHR5cGU6IGZoaXIuRmhpckNvZGU8UmVwb3J0UGFydGljaXBhbnRUeXBlQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFRlc3RSZXBvcnQucGFydGljaXBhbnQudHlwZVxyXG4gICAqL1xyXG4gIF90eXBlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgdXJpIG9mIHRoZSBwYXJ0aWNpcGFudC4gQW4gYWJzb2x1dGUgVVJMIGlzIHByZWZlcnJlZC5cclxuICAgKi9cclxuICB1cmk6IGZoaXIuRmhpclVyaXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBUZXN0UmVwb3J0LnBhcnRpY2lwYW50LnVyaVxyXG4gICAqL1xyXG4gIF91cmk/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkaXNwbGF5IG5hbWUgb2YgdGhlIHBhcnRpY2lwYW50LlxyXG4gICAqL1xyXG4gIGRpc3BsYXk/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogVGVzdFJlcG9ydC5wYXJ0aWNpcGFudC5kaXNwbGF5XHJcbiAgICovXHJcbiAgX2Rpc3BsYXk/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG59XHJcblxyXG4vKipcclxuICogQSBwYXJ0aWNpcGFudCBpbiB0aGUgdGVzdCBleGVjdXRpb24sIGVpdGhlciB0aGUgZXhlY3V0aW9uIGVuZ2luZSwgYSBjbGllbnQsIG9yIGEgc2VydmVyLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRlc3RSZXBvcnRQYXJ0aWNpcGFudCBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1Rlc3RSZXBvcnRQYXJ0aWNpcGFudCc7XHJcbiAgLyoqXHJcbiAgICogVGhlIHR5cGUgb2YgcGFydGljaXBhbnQuXHJcbiAgICovXHJcbiAgcHVibGljIHR5cGU6IGZoaXIuRmhpckNvZGU8UmVwb3J0UGFydGljaXBhbnRUeXBlQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIHVyaSBvZiB0aGUgcGFydGljaXBhbnQuIEFuIGFic29sdXRlIFVSTCBpcyBwcmVmZXJyZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHVyaTogZmhpci5GaGlyVXJpfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRpc3BsYXkgbmFtZSBvZiB0aGUgcGFydGljaXBhbnQuXHJcbiAgICovXHJcbiAgcHVibGljIGRpc3BsYXk/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFRlc3RSZXBvcnRQYXJ0aWNpcGFudCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFRlc3RSZXBvcnRQYXJ0aWNpcGFudEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWyd0eXBlJ10pIHsgdGhpcy50eXBlID0gbmV3IGZoaXIuRmhpckNvZGU8UmVwb3J0UGFydGljaXBhbnRUeXBlQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnR5cGV9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudHlwZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ190eXBlJ10pIHtcclxuICAgICAgaWYgKHRoaXMudHlwZSkgeyB0aGlzLnR5cGUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdHlwZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnR5cGUgPSBuZXcgZmhpci5GaGlyQ29kZTxSZXBvcnRQYXJ0aWNpcGFudFR5cGVDb2RlVHlwZT4oc291cmNlLl90eXBlIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd1cmknXSkgeyB0aGlzLnVyaSA9IG5ldyBmaGlyLkZoaXJVcmkoe3ZhbHVlOiBzb3VyY2UudXJpfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnVyaSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ191cmknXSkge1xyXG4gICAgICBpZiAodGhpcy51cmkpIHsgdGhpcy51cmkuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdXJpISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudXJpID0gbmV3IGZoaXIuRmhpclVyaShzb3VyY2UuX3VyaSBhcyBQYXJ0aWFsPGZoaXIuRmhpclVyaUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGlzcGxheSddKSB7IHRoaXMuZGlzcGxheSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuZGlzcGxheX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfZGlzcGxheSddKSB7XHJcbiAgICAgIGlmICh0aGlzLmRpc3BsYXkpIHsgdGhpcy5kaXNwbGF5LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2Rpc3BsYXkhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5kaXNwbGF5ID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2Rpc3BsYXkgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZWQtYm91bmQgVmFsdWUgU2V0IGZvciB0eXBlIChUZXN0UmVwb3J0LnBhcnRpY2lwYW50LnR5cGUpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgdHlwZVJlcXVpcmVkQ29kZXMoKSB7XHJcbiAgICByZXR1cm4gUmVwb3J0UGFydGljaXBhbnRUeXBlQ29kZXM7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAoIXRoaXNbJ3R5cGUnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgdHlwZTpmaGlyLkZoaXJDb2RlPFJlcG9ydFBhcnRpY2lwYW50VHlwZUNvZGVUeXBlPiBmaGlyOiBUZXN0UmVwb3J0LnBhcnRpY2lwYW50LnR5cGU6Y29kZScgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1sndHlwZSddICYmICghT2JqZWN0LnZhbHVlcyhSZXBvcnRQYXJ0aWNpcGFudFR5cGVDb2RlcykuaW5jbHVkZXModGhpcy50eXBlIGFzIGFueSkpKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdjb2RlLWludmFsaWQnLCBkaWFnbm9zdGljczogJ0ludmFsaWQgY29kZSBwcm9wZXJ0eSB0eXBlOmZoaXIuRmhpckNvZGU8UmVwb3J0UGFydGljaXBhbnRUeXBlQ29kZVR5cGU+IGZoaXI6IFRlc3RSZXBvcnQucGFydGljaXBhbnQudHlwZTpjb2RlIFJlcXVpcmVkIGJpbmRpbmcgdG86IFJlcG9ydFBhcnRpY2lwYW50VHlwZScgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInR5cGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy50eXBlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAoIXRoaXNbJ3VyaSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSB1cmk6Zmhpci5GaGlyVXJpIGZoaXI6IFRlc3RSZXBvcnQucGFydGljaXBhbnQudXJpOnVyaScgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInVyaVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnVyaS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJkaXNwbGF5XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZGlzcGxheS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFRlc3RSZXBvcnRTZXR1cEFjdGlvbk9wZXJhdGlvbiB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBUZXN0UmVwb3J0U2V0dXBBY3Rpb25PcGVyYXRpb25BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgcmVzdWx0IG9mIHRoaXMgb3BlcmF0aW9uLlxyXG4gICAqL1xyXG4gIHJlc3VsdDogZmhpci5GaGlyQ29kZTxSZXBvcnRBY3Rpb25SZXN1bHRDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogVGVzdFJlcG9ydC5zZXR1cC5hY3Rpb24ub3BlcmF0aW9uLnJlc3VsdFxyXG4gICAqL1xyXG4gIF9yZXN1bHQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEFuIGV4cGxhbmF0b3J5IG1lc3NhZ2UgYXNzb2NpYXRlZCB3aXRoIHRoZSByZXN1bHQuXHJcbiAgICovXHJcbiAgbWVzc2FnZT86IGZoaXIuRmhpck1hcmtkb3dufHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFRlc3RSZXBvcnQuc2V0dXAuYWN0aW9uLm9wZXJhdGlvbi5tZXNzYWdlXHJcbiAgICovXHJcbiAgX21lc3NhZ2U/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEEgbGluayB0byBmdXJ0aGVyIGRldGFpbHMgb24gdGhlIHJlc3VsdC5cclxuICAgKi9cclxuICBkZXRhaWw/OiBmaGlyLkZoaXJVcml8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogVGVzdFJlcG9ydC5zZXR1cC5hY3Rpb24ub3BlcmF0aW9uLmRldGFpbFxyXG4gICAqL1xyXG4gIF9kZXRhaWw/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlIG9wZXJhdGlvbiBwZXJmb3JtZWQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVGVzdFJlcG9ydFNldHVwQWN0aW9uT3BlcmF0aW9uIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnVGVzdFJlcG9ydFNldHVwQWN0aW9uT3BlcmF0aW9uJztcclxuICAvKipcclxuICAgKiBUaGUgcmVzdWx0IG9mIHRoaXMgb3BlcmF0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZXN1bHQ6IGZoaXIuRmhpckNvZGU8UmVwb3J0QWN0aW9uUmVzdWx0Q29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogQW4gZXhwbGFuYXRvcnkgbWVzc2FnZSBhc3NvY2lhdGVkIHdpdGggdGhlIHJlc3VsdC5cclxuICAgKi9cclxuICBwdWJsaWMgbWVzc2FnZT86IGZoaXIuRmhpck1hcmtkb3dufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGxpbmsgdG8gZnVydGhlciBkZXRhaWxzIG9uIHRoZSByZXN1bHQuXHJcbiAgICovXHJcbiAgcHVibGljIGRldGFpbD86IGZoaXIuRmhpclVyaXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgVGVzdFJlcG9ydFNldHVwQWN0aW9uT3BlcmF0aW9uIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8VGVzdFJlcG9ydFNldHVwQWN0aW9uT3BlcmF0aW9uQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3Jlc3VsdCddKSB7IHRoaXMucmVzdWx0ID0gbmV3IGZoaXIuRmhpckNvZGU8UmVwb3J0QWN0aW9uUmVzdWx0Q29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnJlc3VsdH0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZXN1bHQgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfcmVzdWx0J10pIHtcclxuICAgICAgaWYgKHRoaXMucmVzdWx0KSB7IHRoaXMucmVzdWx0LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3Jlc3VsdCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnJlc3VsdCA9IG5ldyBmaGlyLkZoaXJDb2RlPFJlcG9ydEFjdGlvblJlc3VsdENvZGVUeXBlPihzb3VyY2UuX3Jlc3VsdCBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnbWVzc2FnZSddKSB7IHRoaXMubWVzc2FnZSA9IG5ldyBmaGlyLkZoaXJNYXJrZG93bih7dmFsdWU6IHNvdXJjZS5tZXNzYWdlfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19tZXNzYWdlJ10pIHtcclxuICAgICAgaWYgKHRoaXMubWVzc2FnZSkgeyB0aGlzLm1lc3NhZ2UuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbWVzc2FnZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLm1lc3NhZ2UgPSBuZXcgZmhpci5GaGlyTWFya2Rvd24oc291cmNlLl9tZXNzYWdlIGFzIFBhcnRpYWw8Zmhpci5GaGlyTWFya2Rvd25BcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2RldGFpbCddKSB7IHRoaXMuZGV0YWlsID0gbmV3IGZoaXIuRmhpclVyaSh7dmFsdWU6IHNvdXJjZS5kZXRhaWx9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2RldGFpbCddKSB7XHJcbiAgICAgIGlmICh0aGlzLmRldGFpbCkgeyB0aGlzLmRldGFpbC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9kZXRhaWwhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5kZXRhaWwgPSBuZXcgZmhpci5GaGlyVXJpKHNvdXJjZS5fZGV0YWlsIGFzIFBhcnRpYWw8Zmhpci5GaGlyVXJpQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlcXVpcmVkLWJvdW5kIFZhbHVlIFNldCBmb3IgcmVzdWx0IChUZXN0UmVwb3J0LnNldHVwLmFjdGlvbi5vcGVyYXRpb24ucmVzdWx0KVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IHJlc3VsdFJlcXVpcmVkQ29kZXMoKSB7XHJcbiAgICByZXR1cm4gUmVwb3J0QWN0aW9uUmVzdWx0Q29kZXM7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAoIXRoaXNbJ3Jlc3VsdCddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSByZXN1bHQ6Zmhpci5GaGlyQ29kZTxSZXBvcnRBY3Rpb25SZXN1bHRDb2RlVHlwZT4gZmhpcjogVGVzdFJlcG9ydC5zZXR1cC5hY3Rpb24ub3BlcmF0aW9uLnJlc3VsdDpjb2RlJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzWydyZXN1bHQnXSAmJiAoIU9iamVjdC52YWx1ZXMoUmVwb3J0QWN0aW9uUmVzdWx0Q29kZXMpLmluY2x1ZGVzKHRoaXMucmVzdWx0IGFzIGFueSkpKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdjb2RlLWludmFsaWQnLCBkaWFnbm9zdGljczogJ0ludmFsaWQgY29kZSBwcm9wZXJ0eSByZXN1bHQ6Zmhpci5GaGlyQ29kZTxSZXBvcnRBY3Rpb25SZXN1bHRDb2RlVHlwZT4gZmhpcjogVGVzdFJlcG9ydC5zZXR1cC5hY3Rpb24ub3BlcmF0aW9uLnJlc3VsdDpjb2RlIFJlcXVpcmVkIGJpbmRpbmcgdG86IFJlcG9ydEFjdGlvblJlc3VsdCcgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInJlc3VsdFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnJlc3VsdC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJtZXNzYWdlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMubWVzc2FnZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJkZXRhaWxcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5kZXRhaWwuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBUZXN0UmVwb3J0U2V0dXBBY3Rpb25Bc3NlcnQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgVGVzdFJlcG9ydFNldHVwQWN0aW9uQXNzZXJ0QXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlc3VsdCBvZiB0aGlzIGFzc2VydGlvbi5cclxuICAgKi9cclxuICByZXN1bHQ6IGZoaXIuRmhpckNvZGU8UmVwb3J0QWN0aW9uUmVzdWx0Q29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFRlc3RSZXBvcnQuc2V0dXAuYWN0aW9uLmFzc2VydC5yZXN1bHRcclxuICAgKi9cclxuICBfcmVzdWx0PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBBbiBleHBsYW5hdG9yeSBtZXNzYWdlIGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVzdWx0LlxyXG4gICAqL1xyXG4gIG1lc3NhZ2U/OiBmaGlyLkZoaXJNYXJrZG93bnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBUZXN0UmVwb3J0LnNldHVwLmFjdGlvbi5hc3NlcnQubWVzc2FnZVxyXG4gICAqL1xyXG4gIF9tZXNzYWdlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBBIGxpbmsgdG8gZnVydGhlciBkZXRhaWxzIG9uIHRoZSByZXN1bHQuXHJcbiAgICovXHJcbiAgZGV0YWlsPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFRlc3RSZXBvcnQuc2V0dXAuYWN0aW9uLmFzc2VydC5kZXRhaWxcclxuICAgKi9cclxuICBfZGV0YWlsPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSByZXN1bHRzIG9mIHRoZSBhc3NlcnRpb24gcGVyZm9ybWVkIG9uIHRoZSBwcmV2aW91cyBvcGVyYXRpb25zLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRlc3RSZXBvcnRTZXR1cEFjdGlvbkFzc2VydCBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1Rlc3RSZXBvcnRTZXR1cEFjdGlvbkFzc2VydCc7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlc3VsdCBvZiB0aGlzIGFzc2VydGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgcmVzdWx0OiBmaGlyLkZoaXJDb2RlPFJlcG9ydEFjdGlvblJlc3VsdENvZGVUeXBlPnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEFuIGV4cGxhbmF0b3J5IG1lc3NhZ2UgYXNzb2NpYXRlZCB3aXRoIHRoZSByZXN1bHQuXHJcbiAgICovXHJcbiAgcHVibGljIG1lc3NhZ2U/OiBmaGlyLkZoaXJNYXJrZG93bnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBsaW5rIHRvIGZ1cnRoZXIgZGV0YWlscyBvbiB0aGUgcmVzdWx0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZXRhaWw/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFRlc3RSZXBvcnRTZXR1cEFjdGlvbkFzc2VydCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFRlc3RSZXBvcnRTZXR1cEFjdGlvbkFzc2VydEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydyZXN1bHQnXSkgeyB0aGlzLnJlc3VsdCA9IG5ldyBmaGlyLkZoaXJDb2RlPFJlcG9ydEFjdGlvblJlc3VsdENvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5yZXN1bHR9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVzdWx0ID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3Jlc3VsdCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnJlc3VsdCkgeyB0aGlzLnJlc3VsdC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9yZXN1bHQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5yZXN1bHQgPSBuZXcgZmhpci5GaGlyQ29kZTxSZXBvcnRBY3Rpb25SZXN1bHRDb2RlVHlwZT4oc291cmNlLl9yZXN1bHQgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ21lc3NhZ2UnXSkgeyB0aGlzLm1lc3NhZ2UgPSBuZXcgZmhpci5GaGlyTWFya2Rvd24oe3ZhbHVlOiBzb3VyY2UubWVzc2FnZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfbWVzc2FnZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLm1lc3NhZ2UpIHsgdGhpcy5tZXNzYWdlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX21lc3NhZ2UhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5tZXNzYWdlID0gbmV3IGZoaXIuRmhpck1hcmtkb3duKHNvdXJjZS5fbWVzc2FnZSBhcyBQYXJ0aWFsPGZoaXIuRmhpck1hcmtkb3duQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydkZXRhaWwnXSkgeyB0aGlzLmRldGFpbCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuZGV0YWlsfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19kZXRhaWwnXSkge1xyXG4gICAgICBpZiAodGhpcy5kZXRhaWwpIHsgdGhpcy5kZXRhaWwuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZGV0YWlsISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZGV0YWlsID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2RldGFpbCBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIHJlc3VsdCAoVGVzdFJlcG9ydC5zZXR1cC5hY3Rpb24uYXNzZXJ0LnJlc3VsdClcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCByZXN1bHRSZXF1aXJlZENvZGVzKCkge1xyXG4gICAgcmV0dXJuIFJlcG9ydEFjdGlvblJlc3VsdENvZGVzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKCF0aGlzWydyZXN1bHQnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgcmVzdWx0OmZoaXIuRmhpckNvZGU8UmVwb3J0QWN0aW9uUmVzdWx0Q29kZVR5cGU+IGZoaXI6IFRlc3RSZXBvcnQuc2V0dXAuYWN0aW9uLmFzc2VydC5yZXN1bHQ6Y29kZScgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1sncmVzdWx0J10gJiYgKCFPYmplY3QudmFsdWVzKFJlcG9ydEFjdGlvblJlc3VsdENvZGVzKS5pbmNsdWRlcyh0aGlzLnJlc3VsdCBhcyBhbnkpKSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnY29kZS1pbnZhbGlkJywgZGlhZ25vc3RpY3M6ICdJbnZhbGlkIGNvZGUgcHJvcGVydHkgcmVzdWx0OmZoaXIuRmhpckNvZGU8UmVwb3J0QWN0aW9uUmVzdWx0Q29kZVR5cGU+IGZoaXI6IFRlc3RSZXBvcnQuc2V0dXAuYWN0aW9uLmFzc2VydC5yZXN1bHQ6Y29kZSBSZXF1aXJlZCBiaW5kaW5nIHRvOiBSZXBvcnRBY3Rpb25SZXN1bHQnIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJyZXN1bHRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5yZXN1bHQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wibWVzc2FnZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm1lc3NhZ2UuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiZGV0YWlsXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZGV0YWlsLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgVGVzdFJlcG9ydFNldHVwQWN0aW9uIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFRlc3RSZXBvcnRTZXR1cEFjdGlvbkFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBvcGVyYXRpb24gcGVyZm9ybWVkLlxyXG4gICAqL1xyXG4gIG9wZXJhdGlvbj86IGZoaXIuVGVzdFJlcG9ydFNldHVwQWN0aW9uT3BlcmF0aW9uQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlc3VsdHMgb2YgdGhlIGFzc2VydGlvbiBwZXJmb3JtZWQgb24gdGhlIHByZXZpb3VzIG9wZXJhdGlvbnMuXHJcbiAgICovXHJcbiAgYXNzZXJ0PzogZmhpci5UZXN0UmVwb3J0U2V0dXBBY3Rpb25Bc3NlcnRBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFuIGFjdGlvbiBzaG91bGQgY29udGFpbiBlaXRoZXIgYW4gb3BlcmF0aW9uIG9yIGFuIGFzc2VydGlvbiBidXQgbm90IGJvdGguICBJdCBjYW4gY29udGFpbiBhbnkgbnVtYmVyIG9mIHZhcmlhYmxlcy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBUZXN0UmVwb3J0U2V0dXBBY3Rpb24gZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdUZXN0UmVwb3J0U2V0dXBBY3Rpb24nO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBvcGVyYXRpb24gcGVyZm9ybWVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvcGVyYXRpb24/OiBmaGlyLlRlc3RSZXBvcnRTZXR1cEFjdGlvbk9wZXJhdGlvbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlc3VsdHMgb2YgdGhlIGFzc2VydGlvbiBwZXJmb3JtZWQgb24gdGhlIHByZXZpb3VzIG9wZXJhdGlvbnMuXHJcbiAgICovXHJcbiAgcHVibGljIGFzc2VydD86IGZoaXIuVGVzdFJlcG9ydFNldHVwQWN0aW9uQXNzZXJ0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBUZXN0UmVwb3J0U2V0dXBBY3Rpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxUZXN0UmVwb3J0U2V0dXBBY3Rpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnb3BlcmF0aW9uJ10pIHsgdGhpcy5vcGVyYXRpb24gPSBuZXcgZmhpci5UZXN0UmVwb3J0U2V0dXBBY3Rpb25PcGVyYXRpb24oc291cmNlLm9wZXJhdGlvbik7IH1cclxuICAgIGlmIChzb3VyY2VbJ2Fzc2VydCddKSB7IHRoaXMuYXNzZXJ0ID0gbmV3IGZoaXIuVGVzdFJlcG9ydFNldHVwQWN0aW9uQXNzZXJ0KHNvdXJjZS5hc3NlcnQpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAodGhpc1tcIm9wZXJhdGlvblwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm9wZXJhdGlvbi5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJhc3NlcnRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5hc3NlcnQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBUZXN0UmVwb3J0U2V0dXAgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgVGVzdFJlcG9ydFNldHVwQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogQW4gYWN0aW9uIHNob3VsZCBjb250YWluIGVpdGhlciBhbiBvcGVyYXRpb24gb3IgYW4gYXNzZXJ0aW9uIGJ1dCBub3QgYm90aC4gIEl0IGNhbiBjb250YWluIGFueSBudW1iZXIgb2YgdmFyaWFibGVzLlxyXG4gICAqL1xyXG4gIGFjdGlvbjogZmhpci5UZXN0UmVwb3J0U2V0dXBBY3Rpb25BcmdzW118bnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSByZXN1bHRzIG9mIHRoZSBzZXJpZXMgb2YgcmVxdWlyZWQgc2V0dXAgb3BlcmF0aW9ucyBiZWZvcmUgdGhlIHRlc3RzIHdlcmUgZXhlY3V0ZWQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVGVzdFJlcG9ydFNldHVwIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnVGVzdFJlcG9ydFNldHVwJztcclxuICAvKipcclxuICAgKiBBbiBhY3Rpb24gc2hvdWxkIGNvbnRhaW4gZWl0aGVyIGFuIG9wZXJhdGlvbiBvciBhbiBhc3NlcnRpb24gYnV0IG5vdCBib3RoLiAgSXQgY2FuIGNvbnRhaW4gYW55IG51bWJlciBvZiB2YXJpYWJsZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGFjdGlvbjogZmhpci5UZXN0UmVwb3J0U2V0dXBBY3Rpb25bXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBUZXN0UmVwb3J0U2V0dXAgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxUZXN0UmVwb3J0U2V0dXBBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnYWN0aW9uJ10pIHsgdGhpcy5hY3Rpb24gPSBzb3VyY2UuYWN0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuVGVzdFJlcG9ydFNldHVwQWN0aW9uKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYWN0aW9uID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICghdGhpc1snYWN0aW9uJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IGFjdGlvbjpmaGlyLlRlc3RSZXBvcnRTZXR1cEFjdGlvbltdIGZoaXI6IFRlc3RSZXBvcnQuc2V0dXAuYWN0aW9uOmFjdGlvbicgfSk7XHJcbiAgICB9IGVsc2UgaWYgKCFBcnJheS5pc0FycmF5KHRoaXMuYWN0aW9uKSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnc3RydWN0dXJlJywgZGlhZ25vc3RpY3M6ICdGb3VuZCBzY2FsYXIgaW4gYXJyYXkgcHJvcGVydHkgYWN0aW9uOmZoaXIuVGVzdFJlcG9ydFNldHVwQWN0aW9uW10gZmhpcjogVGVzdFJlcG9ydC5zZXR1cC5hY3Rpb246YWN0aW9uJyB9KTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5hY3Rpb24ubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBhY3Rpb246Zmhpci5UZXN0UmVwb3J0U2V0dXBBY3Rpb25bXSBmaGlyOiBUZXN0UmVwb3J0LnNldHVwLmFjdGlvbjphY3Rpb24nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJhY3Rpb25cIl0pIHsgdGhpcy5hY3Rpb24uZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgVGVzdFJlcG9ydFRlc3RBY3Rpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgVGVzdFJlcG9ydFRlc3RBY3Rpb25BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBBbiBvcGVyYXRpb24gd291bGQgaW52b2x2ZSBhIFJFU1QgcmVxdWVzdCB0byBhIHNlcnZlci5cclxuICAgKi9cclxuICBvcGVyYXRpb24/OiBmaGlyLlRlc3RSZXBvcnRTZXR1cEFjdGlvbk9wZXJhdGlvbkFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZXN1bHRzIG9mIHRoZSBhc3NlcnRpb24gcGVyZm9ybWVkIG9uIHRoZSBwcmV2aW91cyBvcGVyYXRpb25zLlxyXG4gICAqL1xyXG4gIGFzc2VydD86IGZoaXIuVGVzdFJlcG9ydFNldHVwQWN0aW9uQXNzZXJ0QXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBbiBhY3Rpb24gc2hvdWxkIGNvbnRhaW4gZWl0aGVyIGFuIG9wZXJhdGlvbiBvciBhbiBhc3NlcnRpb24gYnV0IG5vdCBib3RoLiAgSXQgY2FuIGNvbnRhaW4gYW55IG51bWJlciBvZiB2YXJpYWJsZXMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVGVzdFJlcG9ydFRlc3RBY3Rpb24gZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdUZXN0UmVwb3J0VGVzdEFjdGlvbic7XHJcbiAgLyoqXHJcbiAgICogQW4gb3BlcmF0aW9uIHdvdWxkIGludm9sdmUgYSBSRVNUIHJlcXVlc3QgdG8gYSBzZXJ2ZXIuXHJcbiAgICovXHJcbiAgcHVibGljIG9wZXJhdGlvbj86IGZoaXIuVGVzdFJlcG9ydFNldHVwQWN0aW9uT3BlcmF0aW9ufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcmVzdWx0cyBvZiB0aGUgYXNzZXJ0aW9uIHBlcmZvcm1lZCBvbiB0aGUgcHJldmlvdXMgb3BlcmF0aW9ucy5cclxuICAgKi9cclxuICBwdWJsaWMgYXNzZXJ0PzogZmhpci5UZXN0UmVwb3J0U2V0dXBBY3Rpb25Bc3NlcnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFRlc3RSZXBvcnRUZXN0QWN0aW9uIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8VGVzdFJlcG9ydFRlc3RBY3Rpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnb3BlcmF0aW9uJ10pIHsgdGhpcy5vcGVyYXRpb24gPSBuZXcgZmhpci5UZXN0UmVwb3J0U2V0dXBBY3Rpb25PcGVyYXRpb24oc291cmNlLm9wZXJhdGlvbik7IH1cclxuICAgIGlmIChzb3VyY2VbJ2Fzc2VydCddKSB7IHRoaXMuYXNzZXJ0ID0gbmV3IGZoaXIuVGVzdFJlcG9ydFNldHVwQWN0aW9uQXNzZXJ0KHNvdXJjZS5hc3NlcnQpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAodGhpc1tcIm9wZXJhdGlvblwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm9wZXJhdGlvbi5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJhc3NlcnRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5hc3NlcnQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBUZXN0UmVwb3J0VGVzdCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBUZXN0UmVwb3J0VGVzdEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBuYW1lIG9mIHRoaXMgdGVzdCB1c2VkIGZvciB0cmFja2luZy9sb2dnaW5nIHB1cnBvc2VzIGJ5IHRlc3QgZW5naW5lcy5cclxuICAgKi9cclxuICBuYW1lPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFRlc3RSZXBvcnQudGVzdC5uYW1lXHJcbiAgICovXHJcbiAgX25hbWU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEEgc2hvcnQgZGVzY3JpcHRpb24gb2YgdGhlIHRlc3QgdXNlZCBieSB0ZXN0IGVuZ2luZXMgZm9yIHRyYWNraW5nIGFuZCByZXBvcnRpbmcgcHVycG9zZXMuXHJcbiAgICovXHJcbiAgZGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogVGVzdFJlcG9ydC50ZXN0LmRlc2NyaXB0aW9uXHJcbiAgICovXHJcbiAgX2Rlc2NyaXB0aW9uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBBbiBhY3Rpb24gc2hvdWxkIGNvbnRhaW4gZWl0aGVyIGFuIG9wZXJhdGlvbiBvciBhbiBhc3NlcnRpb24gYnV0IG5vdCBib3RoLiAgSXQgY2FuIGNvbnRhaW4gYW55IG51bWJlciBvZiB2YXJpYWJsZXMuXHJcbiAgICovXHJcbiAgYWN0aW9uOiBmaGlyLlRlc3RSZXBvcnRUZXN0QWN0aW9uQXJnc1tdfG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBIHRlc3QgZXhlY3V0ZWQgZnJvbSB0aGUgdGVzdCBzY3JpcHQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVGVzdFJlcG9ydFRlc3QgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdUZXN0UmVwb3J0VGVzdCc7XHJcbiAgLyoqXHJcbiAgICogVGhlIG5hbWUgb2YgdGhpcyB0ZXN0IHVzZWQgZm9yIHRyYWNraW5nL2xvZ2dpbmcgcHVycG9zZXMgYnkgdGVzdCBlbmdpbmVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBuYW1lPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHNob3J0IGRlc2NyaXB0aW9uIG9mIHRoZSB0ZXN0IHVzZWQgYnkgdGVzdCBlbmdpbmVzIGZvciB0cmFja2luZyBhbmQgcmVwb3J0aW5nIHB1cnBvc2VzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZXNjcmlwdGlvbj86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQW4gYWN0aW9uIHNob3VsZCBjb250YWluIGVpdGhlciBhbiBvcGVyYXRpb24gb3IgYW4gYXNzZXJ0aW9uIGJ1dCBub3QgYm90aC4gIEl0IGNhbiBjb250YWluIGFueSBudW1iZXIgb2YgdmFyaWFibGVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhY3Rpb246IGZoaXIuVGVzdFJlcG9ydFRlc3RBY3Rpb25bXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBUZXN0UmVwb3J0VGVzdCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFRlc3RSZXBvcnRUZXN0QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ25hbWUnXSkgeyB0aGlzLm5hbWUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLm5hbWV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX25hbWUnXSkge1xyXG4gICAgICBpZiAodGhpcy5uYW1lKSB7IHRoaXMubmFtZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9uYW1lISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubmFtZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9uYW1lIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydkZXNjcmlwdGlvbiddKSB7IHRoaXMuZGVzY3JpcHRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmRlc2NyaXB0aW9ufSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19kZXNjcmlwdGlvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLmRlc2NyaXB0aW9uKSB7IHRoaXMuZGVzY3JpcHRpb24uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZGVzY3JpcHRpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5kZXNjcmlwdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9kZXNjcmlwdGlvbiBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnYWN0aW9uJ10pIHsgdGhpcy5hY3Rpb24gPSBzb3VyY2UuYWN0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuVGVzdFJlcG9ydFRlc3RBY3Rpb24oeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5hY3Rpb24gPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKHRoaXNbXCJuYW1lXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMubmFtZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJkZXNjcmlwdGlvblwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmRlc2NyaXB0aW9uLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAoIXRoaXNbJ2FjdGlvbiddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBhY3Rpb246Zmhpci5UZXN0UmVwb3J0VGVzdEFjdGlvbltdIGZoaXI6IFRlc3RSZXBvcnQudGVzdC5hY3Rpb246YWN0aW9uJyB9KTtcclxuICAgIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkodGhpcy5hY3Rpb24pKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdzdHJ1Y3R1cmUnLCBkaWFnbm9zdGljczogJ0ZvdW5kIHNjYWxhciBpbiBhcnJheSBwcm9wZXJ0eSBhY3Rpb246Zmhpci5UZXN0UmVwb3J0VGVzdEFjdGlvbltdIGZoaXI6IFRlc3RSZXBvcnQudGVzdC5hY3Rpb246YWN0aW9uJyB9KTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5hY3Rpb24ubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBhY3Rpb246Zmhpci5UZXN0UmVwb3J0VGVzdEFjdGlvbltdIGZoaXI6IFRlc3RSZXBvcnQudGVzdC5hY3Rpb246YWN0aW9uJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiYWN0aW9uXCJdKSB7IHRoaXMuYWN0aW9uLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFRlc3RSZXBvcnRUZWFyZG93bkFjdGlvbiB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBUZXN0UmVwb3J0VGVhcmRvd25BY3Rpb25BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBBbiBvcGVyYXRpb24gd291bGQgaW52b2x2ZSBhIFJFU1QgcmVxdWVzdCB0byBhIHNlcnZlci5cclxuICAgKi9cclxuICBvcGVyYXRpb246IGZoaXIuVGVzdFJlcG9ydFNldHVwQWN0aW9uT3BlcmF0aW9uQXJnc3xudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogQW4gYWN0aW9uIHNob3VsZCBjb250YWluIGVpdGhlciBhbiBvcGVyYXRpb24gb3IgYW4gYXNzZXJ0aW9uIGJ1dCBub3QgYm90aC4gIEl0IGNhbiBjb250YWluIGFueSBudW1iZXIgb2YgdmFyaWFibGVzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRlc3RSZXBvcnRUZWFyZG93bkFjdGlvbiBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1Rlc3RSZXBvcnRUZWFyZG93bkFjdGlvbic7XHJcbiAgLyoqXHJcbiAgICogQW4gb3BlcmF0aW9uIHdvdWxkIGludm9sdmUgYSBSRVNUIHJlcXVlc3QgdG8gYSBzZXJ2ZXIuXHJcbiAgICovXHJcbiAgcHVibGljIG9wZXJhdGlvbjogZmhpci5UZXN0UmVwb3J0U2V0dXBBY3Rpb25PcGVyYXRpb258bnVsbDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBUZXN0UmVwb3J0VGVhcmRvd25BY3Rpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxUZXN0UmVwb3J0VGVhcmRvd25BY3Rpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnb3BlcmF0aW9uJ10pIHsgdGhpcy5vcGVyYXRpb24gPSBuZXcgZmhpci5UZXN0UmVwb3J0U2V0dXBBY3Rpb25PcGVyYXRpb24oc291cmNlLm9wZXJhdGlvbik7IH1cclxuICAgIGVsc2UgeyB0aGlzLm9wZXJhdGlvbiA9IG51bGw7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICghdGhpc1snb3BlcmF0aW9uJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IG9wZXJhdGlvbjpmaGlyLlRlc3RSZXBvcnRTZXR1cEFjdGlvbk9wZXJhdGlvbiBmaGlyOiBUZXN0UmVwb3J0LnRlYXJkb3duLmFjdGlvbi5vcGVyYXRpb246VGVzdFJlcG9ydC5zZXR1cC5hY3Rpb24ub3BlcmF0aW9uJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wib3BlcmF0aW9uXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMub3BlcmF0aW9uLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgVGVzdFJlcG9ydFRlYXJkb3duIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFRlc3RSZXBvcnRUZWFyZG93bkFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEFuIGFjdGlvbiBzaG91bGQgY29udGFpbiBlaXRoZXIgYW4gb3BlcmF0aW9uIG9yIGFuIGFzc2VydGlvbiBidXQgbm90IGJvdGguICBJdCBjYW4gY29udGFpbiBhbnkgbnVtYmVyIG9mIHZhcmlhYmxlcy5cclxuICAgKi9cclxuICBhY3Rpb246IGZoaXIuVGVzdFJlcG9ydFRlYXJkb3duQWN0aW9uQXJnc1tdfG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgcmVzdWx0cyBvZiB0aGUgc2VyaWVzIG9mIG9wZXJhdGlvbnMgcmVxdWlyZWQgdG8gY2xlYW4gdXAgYWZ0ZXIgYWxsIHRoZSB0ZXN0cyB3ZXJlIGV4ZWN1dGVkIChzdWNjZXNzZnVsbHkgb3Igb3RoZXJ3aXNlKS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBUZXN0UmVwb3J0VGVhcmRvd24gZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdUZXN0UmVwb3J0VGVhcmRvd24nO1xyXG4gIC8qKlxyXG4gICAqIEFuIGFjdGlvbiBzaG91bGQgY29udGFpbiBlaXRoZXIgYW4gb3BlcmF0aW9uIG9yIGFuIGFzc2VydGlvbiBidXQgbm90IGJvdGguICBJdCBjYW4gY29udGFpbiBhbnkgbnVtYmVyIG9mIHZhcmlhYmxlcy5cclxuICAgKi9cclxuICBwdWJsaWMgYWN0aW9uOiBmaGlyLlRlc3RSZXBvcnRUZWFyZG93bkFjdGlvbltdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFRlc3RSZXBvcnRUZWFyZG93biAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFRlc3RSZXBvcnRUZWFyZG93bkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydhY3Rpb24nXSkgeyB0aGlzLmFjdGlvbiA9IHNvdXJjZS5hY3Rpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5UZXN0UmVwb3J0VGVhcmRvd25BY3Rpb24oeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5hY3Rpb24gPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKCF0aGlzWydhY3Rpb24nXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgYWN0aW9uOmZoaXIuVGVzdFJlcG9ydFRlYXJkb3duQWN0aW9uW10gZmhpcjogVGVzdFJlcG9ydC50ZWFyZG93bi5hY3Rpb246YWN0aW9uJyB9KTtcclxuICAgIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkodGhpcy5hY3Rpb24pKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdzdHJ1Y3R1cmUnLCBkaWFnbm9zdGljczogJ0ZvdW5kIHNjYWxhciBpbiBhcnJheSBwcm9wZXJ0eSBhY3Rpb246Zmhpci5UZXN0UmVwb3J0VGVhcmRvd25BY3Rpb25bXSBmaGlyOiBUZXN0UmVwb3J0LnRlYXJkb3duLmFjdGlvbjphY3Rpb24nIH0pO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmFjdGlvbi5sZW5ndGggPT09IDApIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IGFjdGlvbjpmaGlyLlRlc3RSZXBvcnRUZWFyZG93bkFjdGlvbltdIGZoaXI6IFRlc3RSZXBvcnQudGVhcmRvd24uYWN0aW9uOmFjdGlvbicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImFjdGlvblwiXSkgeyB0aGlzLmFjdGlvbi5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBUZXN0UmVwb3J0IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFRlc3RSZXBvcnRBcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJUZXN0UmVwb3J0XCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXIgZm9yIHRoZSBUZXN0U2NyaXB0IGFzc2lnbmVkIGZvciBleHRlcm5hbCBwdXJwb3NlcyBvdXRzaWRlIHRoZSBjb250ZXh0IG9mIEZISVIuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE5vdCBleHBlY3RlZCB0byBiZSBnbG9iYWxseSB1bmlxdWUuXHJcbiAgICovXHJcbiAgbmFtZT86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBUZXN0UmVwb3J0Lm5hbWVcclxuICAgKi9cclxuICBfbmFtZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHN0YXR1cyByZXByZXNlbnRzIHdoZXJlIHRoZSBleGVjdXRpb24gaXMgY3VycmVudGx5IHdpdGhpbiB0aGUgdGVzdCBzY3JpcHQgZXhlY3V0aW9uIGxpZmUgY3ljbGUuXHJcbiAgICogVGhpcyBlbGVtZW50IGlzIGxhYmVsZWQgYXMgYSBtb2RpZmllciBiZWNhdXNlIHRoZSBzdGF0dXMgY29udGFpbnMgY29kZXMgdGhhdCBtYXJrIHRoZSByZXNvdXJjZSBhcyBub3QgY3VycmVudGx5IHZhbGlkLlxyXG4gICAqL1xyXG4gIHN0YXR1czogZmhpci5GaGlyQ29kZTxSZXBvcnRTdGF0dXNDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogVGVzdFJlcG9ydC5zdGF0dXNcclxuICAgKi9cclxuICBfc3RhdHVzPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBJZGVhbGx5IHRoaXMgaXMgYW4gYWJzb2x1dGUgVVJMIHRoYXQgaXMgdXNlZCB0byBpZGVudGlmeSB0aGUgdmVyc2lvbi1zcGVjaWZpYyBUZXN0U2NyaXB0IHRoYXQgd2FzIGV4ZWN1dGVkLCBtYXRjaGluZyB0aGUgYFRlc3RTY3JpcHQudXJsYC5cclxuICAgKi9cclxuICB0ZXN0U2NyaXB0OiBmaGlyLlJlZmVyZW5jZUFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgcGFzcyBhbmQgZmFpbCByZXN1bHQgcmVwcmVzZW50cyBhIGNvbXBsZXRlZCB0ZXN0IHNjcmlwdCBleGVjdXRpb24uIFRoZSBwZW5kaW5nIHJlc3VsdCByZXByZXNlbnRzIGEgdGVzdCBzY3JpcHQgZXhlY3V0aW9uIHRoYXQgaGFzIG5vdCB5ZXQgc3RhcnRlZCBvciBpcyBjdXJyZW50bHkgaW4gcHJvZ3Jlc3MuXHJcbiAgICovXHJcbiAgcmVzdWx0OiBmaGlyLkZoaXJDb2RlPFJlcG9ydFJlc3VsdENvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBUZXN0UmVwb3J0LnJlc3VsdFxyXG4gICAqL1xyXG4gIF9yZXN1bHQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBmaW5hbCBzY29yZSAocGVyY2VudGFnZSBvZiB0ZXN0cyBwYXNzZWQpIHJlc3VsdGluZyBmcm9tIHRoZSBleGVjdXRpb24gb2YgdGhlIFRlc3RTY3JpcHQuXHJcbiAgICovXHJcbiAgc2NvcmU/OiBmaGlyLkZoaXJEZWNpbWFsfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFRlc3RSZXBvcnQuc2NvcmVcclxuICAgKi9cclxuICBfc2NvcmU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFVzdWFsbHkgYW4gb3JnYW5pemF0aW9uLCBidXQgbWF5IGJlIGFuIGluZGl2aWR1YWwuIFRoaXMgaXRlbSBTSE9VTEQgYmUgcG9wdWxhdGVkIHVubGVzcyB0aGUgaW5mb3JtYXRpb24gaXMgYXZhaWxhYmxlIGZyb20gY29udGV4dC5cclxuICAgKi9cclxuICB0ZXN0ZXI/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogVGVzdFJlcG9ydC50ZXN0ZXJcclxuICAgKi9cclxuICBfdGVzdGVyPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBBZGRpdGlvbmFsIHNwZWNpZmljIGRhdGVzIG1heSBiZSBhZGRlZCBhcyBleHRlbnNpb25zLlxyXG4gICAqL1xyXG4gIGlzc3VlZD86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFRlc3RSZXBvcnQuaXNzdWVkXHJcbiAgICovXHJcbiAgX2lzc3VlZD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQSBwYXJ0aWNpcGFudCBpbiB0aGUgdGVzdCBleGVjdXRpb24sIGVpdGhlciB0aGUgZXhlY3V0aW9uIGVuZ2luZSwgYSBjbGllbnQsIG9yIGEgc2VydmVyLlxyXG4gICAqL1xyXG4gIHBhcnRpY2lwYW50PzogZmhpci5UZXN0UmVwb3J0UGFydGljaXBhbnRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZXN1bHRzIG9mIHRoZSBzZXJpZXMgb2YgcmVxdWlyZWQgc2V0dXAgb3BlcmF0aW9ucyBiZWZvcmUgdGhlIHRlc3RzIHdlcmUgZXhlY3V0ZWQuXHJcbiAgICovXHJcbiAgc2V0dXA/OiBmaGlyLlRlc3RSZXBvcnRTZXR1cEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgdGVzdCBleGVjdXRlZCBmcm9tIHRoZSB0ZXN0IHNjcmlwdC5cclxuICAgKi9cclxuICB0ZXN0PzogZmhpci5UZXN0UmVwb3J0VGVzdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlc3VsdHMgb2YgdGhlIHNlcmllcyBvZiBvcGVyYXRpb25zIHJlcXVpcmVkIHRvIGNsZWFuIHVwIGFmdGVyIGFsbCB0aGUgdGVzdHMgd2VyZSBleGVjdXRlZCAoc3VjY2Vzc2Z1bGx5IG9yIG90aGVyd2lzZSkuXHJcbiAgICovXHJcbiAgdGVhcmRvd24/OiBmaGlyLlRlc3RSZXBvcnRUZWFyZG93bkFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQSBzdW1tYXJ5IG9mIGluZm9ybWF0aW9uIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIGV4ZWN1dGluZyBhIFRlc3RTY3JpcHQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVGVzdFJlcG9ydCBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnVGVzdFJlcG9ydCc7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJUZXN0UmVwb3J0XCI7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllciBmb3IgdGhlIFRlc3RTY3JpcHQgYXNzaWduZWQgZm9yIGV4dGVybmFsIHB1cnBvc2VzIG91dHNpZGUgdGhlIGNvbnRleHQgb2YgRkhJUi5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTm90IGV4cGVjdGVkIHRvIGJlIGdsb2JhbGx5IHVuaXF1ZS5cclxuICAgKi9cclxuICBwdWJsaWMgbmFtZT86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHN0YXR1cyByZXByZXNlbnRzIHdoZXJlIHRoZSBleGVjdXRpb24gaXMgY3VycmVudGx5IHdpdGhpbiB0aGUgdGVzdCBzY3JpcHQgZXhlY3V0aW9uIGxpZmUgY3ljbGUuXHJcbiAgICogVGhpcyBlbGVtZW50IGlzIGxhYmVsZWQgYXMgYSBtb2RpZmllciBiZWNhdXNlIHRoZSBzdGF0dXMgY29udGFpbnMgY29kZXMgdGhhdCBtYXJrIHRoZSByZXNvdXJjZSBhcyBub3QgY3VycmVudGx5IHZhbGlkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0dXM6IGZoaXIuRmhpckNvZGU8UmVwb3J0U3RhdHVzQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogSWRlYWxseSB0aGlzIGlzIGFuIGFic29sdXRlIFVSTCB0aGF0IGlzIHVzZWQgdG8gaWRlbnRpZnkgdGhlIHZlcnNpb24tc3BlY2lmaWMgVGVzdFNjcmlwdCB0aGF0IHdhcyBleGVjdXRlZCwgbWF0Y2hpbmcgdGhlIGBUZXN0U2NyaXB0LnVybGAuXHJcbiAgICovXHJcbiAgcHVibGljIHRlc3RTY3JpcHQ6IGZoaXIuUmVmZXJlbmNlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBhc3MgYW5kIGZhaWwgcmVzdWx0IHJlcHJlc2VudHMgYSBjb21wbGV0ZWQgdGVzdCBzY3JpcHQgZXhlY3V0aW9uLiBUaGUgcGVuZGluZyByZXN1bHQgcmVwcmVzZW50cyBhIHRlc3Qgc2NyaXB0IGV4ZWN1dGlvbiB0aGF0IGhhcyBub3QgeWV0IHN0YXJ0ZWQgb3IgaXMgY3VycmVudGx5IGluIHByb2dyZXNzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZXN1bHQ6IGZoaXIuRmhpckNvZGU8UmVwb3J0UmVzdWx0Q29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGZpbmFsIHNjb3JlIChwZXJjZW50YWdlIG9mIHRlc3RzIHBhc3NlZCkgcmVzdWx0aW5nIGZyb20gdGhlIGV4ZWN1dGlvbiBvZiB0aGUgVGVzdFNjcmlwdC5cclxuICAgKi9cclxuICBwdWJsaWMgc2NvcmU/OiBmaGlyLkZoaXJEZWNpbWFsfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBVc3VhbGx5IGFuIG9yZ2FuaXphdGlvbiwgYnV0IG1heSBiZSBhbiBpbmRpdmlkdWFsLiBUaGlzIGl0ZW0gU0hPVUxEIGJlIHBvcHVsYXRlZCB1bmxlc3MgdGhlIGluZm9ybWF0aW9uIGlzIGF2YWlsYWJsZSBmcm9tIGNvbnRleHQuXHJcbiAgICovXHJcbiAgcHVibGljIHRlc3Rlcj86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWRkaXRpb25hbCBzcGVjaWZpYyBkYXRlcyBtYXkgYmUgYWRkZWQgYXMgZXh0ZW5zaW9ucy5cclxuICAgKi9cclxuICBwdWJsaWMgaXNzdWVkPzogZmhpci5GaGlyRGF0ZVRpbWV8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgcGFydGljaXBhbnQgaW4gdGhlIHRlc3QgZXhlY3V0aW9uLCBlaXRoZXIgdGhlIGV4ZWN1dGlvbiBlbmdpbmUsIGEgY2xpZW50LCBvciBhIHNlcnZlci5cclxuICAgKi9cclxuICBwdWJsaWMgcGFydGljaXBhbnQ6IGZoaXIuVGVzdFJlcG9ydFBhcnRpY2lwYW50W107XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlc3VsdHMgb2YgdGhlIHNlcmllcyBvZiByZXF1aXJlZCBzZXR1cCBvcGVyYXRpb25zIGJlZm9yZSB0aGUgdGVzdHMgd2VyZSBleGVjdXRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgc2V0dXA/OiBmaGlyLlRlc3RSZXBvcnRTZXR1cHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSB0ZXN0IGV4ZWN1dGVkIGZyb20gdGhlIHRlc3Qgc2NyaXB0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0ZXN0OiBmaGlyLlRlc3RSZXBvcnRUZXN0W107XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlc3VsdHMgb2YgdGhlIHNlcmllcyBvZiBvcGVyYXRpb25zIHJlcXVpcmVkIHRvIGNsZWFuIHVwIGFmdGVyIGFsbCB0aGUgdGVzdHMgd2VyZSBleGVjdXRlZCAoc3VjY2Vzc2Z1bGx5IG9yIG90aGVyd2lzZSkuXHJcbiAgICovXHJcbiAgcHVibGljIHRlYXJkb3duPzogZmhpci5UZXN0UmVwb3J0VGVhcmRvd258dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFRlc3RSZXBvcnQgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxUZXN0UmVwb3J0QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ1Rlc3RSZXBvcnQnO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IG5ldyBmaGlyLklkZW50aWZpZXIoc291cmNlLmlkZW50aWZpZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWyduYW1lJ10pIHsgdGhpcy5uYW1lID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5uYW1lfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19uYW1lJ10pIHtcclxuICAgICAgaWYgKHRoaXMubmFtZSkgeyB0aGlzLm5hbWUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbmFtZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLm5hbWUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fbmFtZSBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RhdHVzJ10pIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxSZXBvcnRTdGF0dXNDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2Uuc3RhdHVzfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zdGF0dXMnXSkge1xyXG4gICAgICBpZiAodGhpcy5zdGF0dXMpIHsgdGhpcy5zdGF0dXMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc3RhdHVzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8UmVwb3J0U3RhdHVzQ29kZVR5cGU+KHNvdXJjZS5fc3RhdHVzIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd0ZXN0U2NyaXB0J10pIHsgdGhpcy50ZXN0U2NyaXB0ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS50ZXN0U2NyaXB0KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudGVzdFNjcmlwdCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3Jlc3VsdCddKSB7IHRoaXMucmVzdWx0ID0gbmV3IGZoaXIuRmhpckNvZGU8UmVwb3J0UmVzdWx0Q29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnJlc3VsdH0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZXN1bHQgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfcmVzdWx0J10pIHtcclxuICAgICAgaWYgKHRoaXMucmVzdWx0KSB7IHRoaXMucmVzdWx0LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3Jlc3VsdCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnJlc3VsdCA9IG5ldyBmaGlyLkZoaXJDb2RlPFJlcG9ydFJlc3VsdENvZGVUeXBlPihzb3VyY2UuX3Jlc3VsdCBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2NvcmUnXSkgeyB0aGlzLnNjb3JlID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoe3ZhbHVlOiBzb3VyY2Uuc2NvcmV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3Njb3JlJ10pIHtcclxuICAgICAgaWYgKHRoaXMuc2NvcmUpIHsgdGhpcy5zY29yZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zY29yZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnNjb3JlID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoc291cmNlLl9zY29yZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckRlY2ltYWxBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3Rlc3RlciddKSB7IHRoaXMudGVzdGVyID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS50ZXN0ZXJ9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3Rlc3RlciddKSB7XHJcbiAgICAgIGlmICh0aGlzLnRlc3RlcikgeyB0aGlzLnRlc3Rlci5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl90ZXN0ZXIhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy50ZXN0ZXIgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fdGVzdGVyIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydpc3N1ZWQnXSkgeyB0aGlzLmlzc3VlZCA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5pc3N1ZWR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2lzc3VlZCddKSB7XHJcbiAgICAgIGlmICh0aGlzLmlzc3VlZCkgeyB0aGlzLmlzc3VlZC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9pc3N1ZWQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5pc3N1ZWQgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoc291cmNlLl9pc3N1ZWQgYXMgUGFydGlhbDxmaGlyLkZoaXJEYXRlVGltZUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsncGFydGljaXBhbnQnXSkgeyB0aGlzLnBhcnRpY2lwYW50ID0gc291cmNlLnBhcnRpY2lwYW50Lm1hcCgoeCkgPT4gbmV3IGZoaXIuVGVzdFJlcG9ydFBhcnRpY2lwYW50KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucGFydGljaXBhbnQgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2V0dXAnXSkgeyB0aGlzLnNldHVwID0gbmV3IGZoaXIuVGVzdFJlcG9ydFNldHVwKHNvdXJjZS5zZXR1cCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3Rlc3QnXSkgeyB0aGlzLnRlc3QgPSBzb3VyY2UudGVzdC5tYXAoKHgpID0+IG5ldyBmaGlyLlRlc3RSZXBvcnRUZXN0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudGVzdCA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWyd0ZWFyZG93biddKSB7IHRoaXMudGVhcmRvd24gPSBuZXcgZmhpci5UZXN0UmVwb3J0VGVhcmRvd24oc291cmNlLnRlYXJkb3duKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIHN0YXR1cyAoVGVzdFJlcG9ydC5zdGF0dXMpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgc3RhdHVzUmVxdWlyZWRDb2RlcygpIHtcclxuICAgIHJldHVybiBSZXBvcnRTdGF0dXNDb2RlcztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZWQtYm91bmQgVmFsdWUgU2V0IGZvciByZXN1bHQgKFRlc3RSZXBvcnQucmVzdWx0KVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IHJlc3VsdFJlcXVpcmVkQ29kZXMoKSB7XHJcbiAgICByZXR1cm4gUmVwb3J0UmVzdWx0Q29kZXM7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAoIXRoaXNbJ3Jlc291cmNlVHlwZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSByZXNvdXJjZVR5cGU6XCJUZXN0UmVwb3J0XCIgZmhpcjogVGVzdFJlcG9ydC5yZXNvdXJjZVR5cGU6XCJUZXN0UmVwb3J0XCInIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJpZGVudGlmaWVyXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuaWRlbnRpZmllci5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJuYW1lXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMubmFtZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKCF0aGlzWydzdGF0dXMnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgc3RhdHVzOmZoaXIuRmhpckNvZGU8UmVwb3J0U3RhdHVzQ29kZVR5cGU+IGZoaXI6IFRlc3RSZXBvcnQuc3RhdHVzOmNvZGUnIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbJ3N0YXR1cyddICYmICghT2JqZWN0LnZhbHVlcyhSZXBvcnRTdGF0dXNDb2RlcykuaW5jbHVkZXModGhpcy5zdGF0dXMgYXMgYW55KSkpIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ2NvZGUtaW52YWxpZCcsIGRpYWdub3N0aWNzOiAnSW52YWxpZCBjb2RlIHByb3BlcnR5IHN0YXR1czpmaGlyLkZoaXJDb2RlPFJlcG9ydFN0YXR1c0NvZGVUeXBlPiBmaGlyOiBUZXN0UmVwb3J0LnN0YXR1czpjb2RlIFJlcXVpcmVkIGJpbmRpbmcgdG86IFJlcG9ydFN0YXR1cycgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInN0YXR1c1wiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnN0YXR1cy5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKCF0aGlzWyd0ZXN0U2NyaXB0J10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHRlc3RTY3JpcHQ6Zmhpci5SZWZlcmVuY2UgZmhpcjogVGVzdFJlcG9ydC50ZXN0U2NyaXB0OlJlZmVyZW5jZScgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInRlc3RTY3JpcHRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy50ZXN0U2NyaXB0LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAoIXRoaXNbJ3Jlc3VsdCddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSByZXN1bHQ6Zmhpci5GaGlyQ29kZTxSZXBvcnRSZXN1bHRDb2RlVHlwZT4gZmhpcjogVGVzdFJlcG9ydC5yZXN1bHQ6Y29kZScgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1sncmVzdWx0J10gJiYgKCFPYmplY3QudmFsdWVzKFJlcG9ydFJlc3VsdENvZGVzKS5pbmNsdWRlcyh0aGlzLnJlc3VsdCBhcyBhbnkpKSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnY29kZS1pbnZhbGlkJywgZGlhZ25vc3RpY3M6ICdJbnZhbGlkIGNvZGUgcHJvcGVydHkgcmVzdWx0OmZoaXIuRmhpckNvZGU8UmVwb3J0UmVzdWx0Q29kZVR5cGU+IGZoaXI6IFRlc3RSZXBvcnQucmVzdWx0OmNvZGUgUmVxdWlyZWQgYmluZGluZyB0bzogUmVwb3J0UmVzdWx0JyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wicmVzdWx0XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucmVzdWx0LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInNjb3JlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc2NvcmUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1widGVzdGVyXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMudGVzdGVyLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImlzc3VlZFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmlzc3VlZC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJwYXJ0aWNpcGFudFwiXSkgeyB0aGlzLnBhcnRpY2lwYW50LmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJzZXR1cFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnNldHVwLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInRlc3RcIl0pIHsgdGhpcy50ZXN0LmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJ0ZWFyZG93blwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnRlYXJkb3duLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=