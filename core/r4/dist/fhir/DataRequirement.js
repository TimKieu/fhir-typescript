// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR ComplexType: DataRequirement
import * as fhir from '../fhir.js';
// @ts-ignore
import { SortDirectionCodes } from '../fhirValueSets/SortDirectionCodes.js';
// @ts-ignore
import { AllTypesCodes } from '../fhirValueSets/AllTypesCodes.js';
/**
 * Code filters specify additional constraints on the data, specifying the value set of interest for a particular element of the data. Each code filter defines an additional constraint on the data, i.e. code filters are AND'ed, not OR'ed.
 */
export class DataRequirementCodeFilter extends fhir.FhirElement {
    /**
     * Default constructor for DataRequirementCodeFilter - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['path']) {
            this.path = new fhir.FhirString({ value: source.path });
        }
        if (source['_path']) {
            if (this.path) {
                this.path.addExtendedProperties(source._path);
            }
            else {
                this.path = new fhir.FhirString(source._path);
            }
        }
        if (source['searchParam']) {
            this.searchParam = new fhir.FhirString({ value: source.searchParam });
        }
        if (source['_searchParam']) {
            if (this.searchParam) {
                this.searchParam.addExtendedProperties(source._searchParam);
            }
            else {
                this.searchParam = new fhir.FhirString(source._searchParam);
            }
        }
        if (source['valueSet']) {
            this.valueSet = new fhir.FhirCanonical({ value: source.valueSet });
        }
        if (source['_valueSet']) {
            if (this.valueSet) {
                this.valueSet.addExtendedProperties(source._valueSet);
            }
            else {
                this.valueSet = new fhir.FhirCanonical(source._valueSet);
            }
        }
        if (source['code']) {
            this.code = source.code.map((x) => new fhir.Coding(x));
        }
        else {
            this.code = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'DataRequirement.codeFilter';
        }
        if (this["path"]) {
            issues.push(...this.path.doModelValidation(expression + '.path'));
        }
        if (this["searchParam"]) {
            issues.push(...this.searchParam.doModelValidation(expression + '.searchParam'));
        }
        if (this["valueSet"]) {
            issues.push(...this.valueSet.doModelValidation(expression + '.valueSet'));
        }
        if (this["code"]) {
            this.code.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.code[${i}]`)); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DataRequirementCodeFilter._fts_dataType = 'DataRequirementCodeFilter';
/**
 * Date filters specify additional constraints on the data in terms of the applicable date range for specific elements. Each date filter specifies an additional constraint on the data, i.e. date filters are AND'ed, not OR'ed.
 */
export class DataRequirementDateFilter extends fhir.FhirElement {
    /**
     * Default constructor for DataRequirementDateFilter - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['path']) {
            this.path = new fhir.FhirString({ value: source.path });
        }
        if (source['_path']) {
            if (this.path) {
                this.path.addExtendedProperties(source._path);
            }
            else {
                this.path = new fhir.FhirString(source._path);
            }
        }
        if (source['searchParam']) {
            this.searchParam = new fhir.FhirString({ value: source.searchParam });
        }
        if (source['_searchParam']) {
            if (this.searchParam) {
                this.searchParam.addExtendedProperties(source._searchParam);
            }
            else {
                this.searchParam = new fhir.FhirString(source._searchParam);
            }
        }
        if (source['value']) {
            this.value = source.value;
        }
        else if (source['valueDateTime']) {
            this.value = new fhir.FhirDateTime({ value: source.valueDateTime });
        }
        else if (source['valuePeriod']) {
            this.value = new fhir.Period(source.valuePeriod);
        }
        else if (source['valueDuration']) {
            this.value = new fhir.Duration(source.valueDuration);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'DataRequirement.dateFilter';
        }
        if (this["path"]) {
            issues.push(...this.path.doModelValidation(expression + '.path'));
        }
        if (this["searchParam"]) {
            issues.push(...this.searchParam.doModelValidation(expression + '.searchParam'));
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DataRequirementDateFilter._fts_dataType = 'DataRequirementDateFilter';
/**
 * Internal flag to properly serialize choice-type element DataRequirement.dateFilter.value[x]
 */
DataRequirementDateFilter._fts_valueIsChoice = true;
/**
 * This element can be used in combination with the sort element to specify quota requirements such as "the most recent 5" or "the highest 5". When multiple sorts are specified, they are applied in the order they appear in the resource.
 */
export class DataRequirementSort extends fhir.FhirElement {
    /**
     * Default constructor for DataRequirementSort - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['path']) {
            this.path = new fhir.FhirString({ value: source.path });
        }
        else {
            this.path = null;
        }
        if (source['_path']) {
            if (this.path) {
                this.path.addExtendedProperties(source._path);
            }
            else {
                this.path = new fhir.FhirString(source._path);
            }
        }
        if (source['direction']) {
            this.direction = new fhir.FhirCode({ value: source.direction });
        }
        else {
            this.direction = null;
        }
        if (source['_direction']) {
            if (this.direction) {
                this.direction.addExtendedProperties(source._direction);
            }
            else {
                this.direction = new fhir.FhirCode(source._direction);
            }
        }
    }
    /**
     * Required-bound Value Set for direction (DataRequirement.sort.direction)
     */
    static get directionRequiredCodes() {
        return SortDirectionCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'DataRequirement.sort';
        }
        if (!this['path']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property path fhir: DataRequirement.sort.path:string', expression: [expression] });
        }
        if (this["path"]) {
            issues.push(...this.path.doModelValidation(expression + '.path'));
        }
        if (!this['direction']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property direction fhir: DataRequirement.sort.direction:code', expression: [expression] });
        }
        if (this['direction'] && (!Object.values(SortDirectionCodes).includes(this.direction.value))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'direction (DataRequirement.sort.direction) of type code is missing code for Required binding to: SortDirection', expression: [expression] });
        }
        if (this["direction"]) {
            issues.push(...this.direction.doModelValidation(expression + '.direction'));
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DataRequirementSort._fts_dataType = 'DataRequirementSort';
/**
 * Describes a required data item for evaluation in terms of the type of data, and optional code or date-based filters of the data.
 */
export class DataRequirement extends fhir.FhirElement {
    /**
     * Default constructor for DataRequirement - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['type']) {
            this.type = new fhir.FhirCode({ value: source.type });
        }
        else {
            this.type = null;
        }
        if (source['_type']) {
            if (this.type) {
                this.type.addExtendedProperties(source._type);
            }
            else {
                this.type = new fhir.FhirCode(source._type);
            }
        }
        if (source['profile']) {
            this.profile = source.profile.map((x) => new fhir.FhirCanonical({ value: x }));
        }
        else {
            this.profile = [];
        }
        if (source['_profile']) {
            source._profile.forEach((x, i) => {
                if (this.profile.length >= i) {
                    if (x) {
                        this.profile[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.profile.push(new fhir.FhirCanonical(x));
                    }
                }
            });
        }
        if (source['subject']) {
            this.subject = source.subject;
        }
        else if (source['subjectCodeableConcept']) {
            this.subject = new fhir.CodeableConcept(source.subjectCodeableConcept);
        }
        else if (source['subjectReference']) {
            this.subject = new fhir.Reference(source.subjectReference);
        }
        if (source['mustSupport']) {
            this.mustSupport = source.mustSupport.map((x) => new fhir.FhirString({ value: x }));
        }
        else {
            this.mustSupport = [];
        }
        if (source['_mustSupport']) {
            source._mustSupport.forEach((x, i) => {
                if (this.mustSupport.length >= i) {
                    if (x) {
                        this.mustSupport[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.mustSupport.push(new fhir.FhirString(x));
                    }
                }
            });
        }
        if (source['codeFilter']) {
            this.codeFilter = source.codeFilter.map((x) => new fhir.DataRequirementCodeFilter(x));
        }
        else {
            this.codeFilter = [];
        }
        if (source['dateFilter']) {
            this.dateFilter = source.dateFilter.map((x) => new fhir.DataRequirementDateFilter(x));
        }
        else {
            this.dateFilter = [];
        }
        if (source['limit']) {
            this.limit = new fhir.FhirPositiveInt({ value: source.limit });
        }
        if (source['_limit']) {
            if (this.limit) {
                this.limit.addExtendedProperties(source._limit);
            }
            else {
                this.limit = new fhir.FhirPositiveInt(source._limit);
            }
        }
        if (source['sort']) {
            this.sort = source.sort.map((x) => new fhir.DataRequirementSort(x));
        }
        else {
            this.sort = [];
        }
    }
    /**
     * Required-bound Value Set for type (DataRequirement.type)
     */
    static get typeRequiredCodes() {
        return AllTypesCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'DataRequirement';
        }
        if (!this['type']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property type fhir: DataRequirement.type:code', expression: [expression] });
        }
        if (this['type'] && (!Object.values(AllTypesCodes).includes(this.type.value))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'type (DataRequirement.type) of type code is missing code for Required binding to: AllTypes', expression: [expression] });
        }
        if (this["type"]) {
            issues.push(...this.type.doModelValidation(expression + '.type'));
        }
        if (this["profile"]) {
            this.profile.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.profile[${i}]`)); });
        }
        if (this["mustSupport"]) {
            this.mustSupport.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.mustSupport[${i}]`)); });
        }
        if (this["codeFilter"]) {
            this.codeFilter.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.codeFilter[${i}]`)); });
        }
        if (this["dateFilter"]) {
            this.dateFilter.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.dateFilter[${i}]`)); });
        }
        if (this["limit"]) {
            issues.push(...this.limit.doModelValidation(expression + '.limit'));
        }
        if (this["sort"]) {
            this.sort.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.sort[${i}]`)); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DataRequirement._fts_dataType = 'DataRequirement';
/**
 * Internal flag to properly serialize choice-type element DataRequirement.subject[x]
 */
DataRequirement._fts_subjectIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGF0YVJlcXVpcmVtZW50LmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9EYXRhUmVxdWlyZW1lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsb0NBQW9DO0FBRXBDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBSW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsa0JBQWtCLEVBQTBCLE1BQU0sd0NBQXdDLENBQUM7QUFHcEcsYUFBYTtBQUNiLE9BQU8sRUFBRSxhQUFhLEVBQXFCLE1BQU0sbUNBQW1DLENBQUM7QUFtQ3JGOztHQUVHO0FBQ0gsTUFBTSxPQUFPLHlCQUEwQixTQUFRLElBQUksQ0FBQyxXQUFXO0lBcUI3RDs7T0FFRztJQUNILFlBQVksU0FBZ0QsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDdEcsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxJQUFJLEVBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDOUUsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFDbkIsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFO2dCQUFFLElBQUksQ0FBQyxJQUFJLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLEtBQU0sQ0FBQyxDQUFDO2FBQUU7aUJBQzdEO2dCQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxLQUFxQyxDQUFDLENBQUM7YUFBRTtTQUN4RjtRQUNELElBQUksTUFBTSxDQUFDLGFBQWEsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLElB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QUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLEdBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtTQUFFO1FBQ3BILE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBN0dEOztHQUVHO0FBQzZCLDZCQUFhLEdBQVUsaUJBQWlCLENBQUM7QUFhekU7O0dBRUc7QUFDdUIsb0NBQW9CLEdBQVEsSUFBSSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0LmNvcmUgdmVyc2lvbjogNC4wLjFcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIENvbXBsZXhUeXBlOiBEYXRhUmVxdWlyZW1lbnRcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFNvcnREaXJlY3Rpb25Db2RpbmdzLCBTb3J0RGlyZWN0aW9uQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvU29ydERpcmVjdGlvbkNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFNvcnREaXJlY3Rpb25Db2RlcywgIFNvcnREaXJlY3Rpb25Db2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvU29ydERpcmVjdGlvbkNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBBbGxUeXBlc0NvZGluZ3MsIEFsbFR5cGVzQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQWxsVHlwZXNDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBBbGxUeXBlc0NvZGVzLCAgQWxsVHlwZXNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQWxsVHlwZXNDb2Rlcy5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBEYXRhUmVxdWlyZW1lbnRDb2RlRmlsdGVyIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIERhdGFSZXF1aXJlbWVudENvZGVGaWx0ZXJBcmdzIGV4dGVuZHMgZmhpci5GaGlyRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXRoIGF0dHJpYnV0ZSBjb250YWlucyBhIFtTaW1wbGUgRkhJUlBhdGggU3Vic2V0XShmaGlycGF0aC5odG1sI3NpbXBsZSkgdGhhdCBhbGxvd3MgcGF0aCB0cmF2ZXJzYWwsIGJ1dCBub3QgY2FsY3VsYXRpb24uXHJcbiAgICovXHJcbiAgcGF0aD86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBEYXRhUmVxdWlyZW1lbnQuY29kZUZpbHRlci5wYXRoXHJcbiAgICovXHJcbiAgX3BhdGg/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEEgdG9rZW4gcGFyYW1ldGVyIHRoYXQgcmVmZXJzIHRvIGEgc2VhcmNoIHBhcmFtZXRlciBkZWZpbmVkIG9uIHRoZSBzcGVjaWZpZWQgdHlwZSBvZiB0aGUgRGF0YVJlcXVpcmVtZW50LCBhbmQgd2hpY2ggc2VhcmNoZXMgb24gZWxlbWVudHMgb2YgdHlwZSBjb2RlLCBDb2RpbmcsIG9yIENvZGVhYmxlQ29uY2VwdC5cclxuICAgKi9cclxuICBzZWFyY2hQYXJhbT86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBEYXRhUmVxdWlyZW1lbnQuY29kZUZpbHRlci5zZWFyY2hQYXJhbVxyXG4gICAqL1xyXG4gIF9zZWFyY2hQYXJhbT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHZhbHVlc2V0IGZvciB0aGUgY29kZSBmaWx0ZXIuIFRoZSB2YWx1ZVNldCBhbmQgY29kZSBlbGVtZW50cyBhcmUgYWRkaXRpdmUuIElmIHZhbHVlU2V0IGlzIHNwZWNpZmllZCwgdGhlIGZpbHRlciB3aWxsIHJldHVybiBvbmx5IHRob3NlIGRhdGEgaXRlbXMgZm9yIHdoaWNoIHRoZSB2YWx1ZSBvZiB0aGUgY29kZS12YWx1ZWQgZWxlbWVudCBzcGVjaWZpZWQgaW4gdGhlIHBhdGggaXMgYSBtZW1iZXIgb2YgdGhlIHNwZWNpZmllZCB2YWx1ZXNldC5cclxuICAgKi9cclxuICB2YWx1ZVNldD86IGZoaXIuRmhpckNhbm9uaWNhbHxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBEYXRhUmVxdWlyZW1lbnQuY29kZUZpbHRlci52YWx1ZVNldFxyXG4gICAqL1xyXG4gIF92YWx1ZVNldD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNvZGVzIGZvciB0aGUgY29kZSBmaWx0ZXIuIElmIHZhbHVlcyBhcmUgZ2l2ZW4sIHRoZSBmaWx0ZXIgd2lsbCByZXR1cm4gb25seSB0aG9zZSBkYXRhIGl0ZW1zIGZvciB3aGljaCB0aGUgY29kZS12YWx1ZWQgYXR0cmlidXRlIHNwZWNpZmllZCBieSB0aGUgcGF0aCBoYXMgYSB2YWx1ZSB0aGF0IGlzIG9uZSBvZiB0aGUgc3BlY2lmaWVkIGNvZGVzLiBJZiBjb2RlcyBhcmUgc3BlY2lmaWVkIGluIGFkZGl0aW9uIHRvIGEgdmFsdWUgc2V0LCB0aGUgZmlsdGVyIHJldHVybnMgaXRlbXMgbWF0Y2hpbmcgYSBjb2RlIGluIHRoZSB2YWx1ZSBzZXQgb3Igb25lIG9mIHRoZSBzcGVjaWZpZWQgY29kZXMuXHJcbiAgICovXHJcbiAgY29kZT86IGZoaXIuQ29kaW5nQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIENvZGUgZmlsdGVycyBzcGVjaWZ5IGFkZGl0aW9uYWwgY29uc3RyYWludHMgb24gdGhlIGRhdGEsIHNwZWNpZnlpbmcgdGhlIHZhbHVlIHNldCBvZiBpbnRlcmVzdCBmb3IgYSBwYXJ0aWN1bGFyIGVsZW1lbnQgb2YgdGhlIGRhdGEuIEVhY2ggY29kZSBmaWx0ZXIgZGVmaW5lcyBhbiBhZGRpdGlvbmFsIGNvbnN0cmFpbnQgb24gdGhlIGRhdGEsIGkuZS4gY29kZSBmaWx0ZXJzIGFyZSBBTkQnZWQsIG5vdCBPUidlZC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBEYXRhUmVxdWlyZW1lbnRDb2RlRmlsdGVyIGV4dGVuZHMgZmhpci5GaGlyRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdEYXRhUmVxdWlyZW1lbnRDb2RlRmlsdGVyJztcclxuICAvKipcclxuICAgKiBUaGUgcGF0aCBhdHRyaWJ1dGUgY29udGFpbnMgYSBbU2ltcGxlIEZISVJQYXRoIFN1YnNldF0oZmhpcnBhdGguaHRtbCNzaW1wbGUpIHRoYXQgYWxsb3dzIHBhdGggdHJhdmVyc2FsLCBidXQgbm90IGNhbGN1bGF0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXRoPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHRva2VuIHBhcmFtZXRlciB0aGF0IHJlZmVycyB0byBhIHNlYXJjaCBwYXJhbWV0ZXIgZGVmaW5lZCBvbiB0aGUgc3BlY2lmaWVkIHR5cGUgb2YgdGhlIERhdGFSZXF1aXJlbWVudCwgYW5kIHdoaWNoIHNlYXJjaGVzIG9uIGVsZW1lbnRzIG9mIHR5cGUgY29kZSwgQ29kaW5nLCBvciBDb2RlYWJsZUNvbmNlcHQuXHJcbiAgICovXHJcbiAgcHVibGljIHNlYXJjaFBhcmFtPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdmFsdWVzZXQgZm9yIHRoZSBjb2RlIGZpbHRlci4gVGhlIHZhbHVlU2V0IGFuZCBjb2RlIGVsZW1lbnRzIGFyZSBhZGRpdGl2ZS4gSWYgdmFsdWVTZXQgaXMgc3BlY2lmaWVkLCB0aGUgZmlsdGVyIHdpbGwgcmV0dXJuIG9ubHkgdGhvc2UgZGF0YSBpdGVtcyBmb3Igd2hpY2ggdGhlIHZhbHVlIG9mIHRoZSBjb2RlLXZhbHVlZCBlbGVtZW50IHNwZWNpZmllZCBpbiB0aGUgcGF0aCBpcyBhIG1lbWJlciBvZiB0aGUgc3BlY2lmaWVkIHZhbHVlc2V0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyB2YWx1ZVNldD86IGZoaXIuRmhpckNhbm9uaWNhbHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNvZGVzIGZvciB0aGUgY29kZSBmaWx0ZXIuIElmIHZhbHVlcyBhcmUgZ2l2ZW4sIHRoZSBmaWx0ZXIgd2lsbCByZXR1cm4gb25seSB0aG9zZSBkYXRhIGl0ZW1zIGZvciB3aGljaCB0aGUgY29kZS12YWx1ZWQgYXR0cmlidXRlIHNwZWNpZmllZCBieSB0aGUgcGF0aCBoYXMgYSB2YWx1ZSB0aGF0IGlzIG9uZSBvZiB0aGUgc3BlY2lmaWVkIGNvZGVzLiBJZiBjb2RlcyBhcmUgc3BlY2lmaWVkIGluIGFkZGl0aW9uIHRvIGEgdmFsdWUgc2V0LCB0aGUgZmlsdGVyIHJldHVybnMgaXRlbXMgbWF0Y2hpbmcgYSBjb2RlIGluIHRoZSB2YWx1ZSBzZXQgb3Igb25lIG9mIHRoZSBzcGVjaWZpZWQgY29kZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGU6IGZoaXIuQ29kaW5nW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgRGF0YVJlcXVpcmVtZW50Q29kZUZpbHRlciAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPERhdGFSZXF1aXJlbWVudENvZGVGaWx0ZXJBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsncGF0aCddKSB7IHRoaXMucGF0aCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UucGF0aH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfcGF0aCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnBhdGgpIHsgdGhpcy5wYXRoLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3BhdGghKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5wYXRoID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3BhdGggYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3NlYXJjaFBhcmFtJ10pIHsgdGhpcy5zZWFyY2hQYXJhbSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2Uuc2VhcmNoUGFyYW19KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3NlYXJjaFBhcmFtJ10pIHtcclxuICAgICAgaWYgKHRoaXMuc2VhcmNoUGFyYW0pIHsgdGhpcy5zZWFyY2hQYXJhbS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zZWFyY2hQYXJhbSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnNlYXJjaFBhcmFtID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3NlYXJjaFBhcmFtIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd2YWx1ZVNldCddKSB7IHRoaXMudmFsdWVTZXQgPSBuZXcgZmhpci5GaGlyQ2Fub25pY2FsKHt2YWx1ZTogc291cmNlLnZhbHVlU2V0fSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ192YWx1ZVNldCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnZhbHVlU2V0KSB7IHRoaXMudmFsdWVTZXQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdmFsdWVTZXQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy52YWx1ZVNldCA9IG5ldyBmaGlyLkZoaXJDYW5vbmljYWwoc291cmNlLl92YWx1ZVNldCBhcyBQYXJ0aWFsPGZoaXIuRmhpckNhbm9uaWNhbEFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IHNvdXJjZS5jb2RlLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kaW5nKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY29kZSA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKTtcclxuICAgIGlmIChleHByZXNzaW9uID09PSAnJykgeyBleHByZXNzaW9uID0gJ0RhdGFSZXF1aXJlbWVudC5jb2RlRmlsdGVyJyB9XHJcbiAgICBpZiAodGhpc1tcInBhdGhcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5wYXRoLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5wYXRoJykpOyB9XHJcbiAgICBpZiAodGhpc1tcInNlYXJjaFBhcmFtXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc2VhcmNoUGFyYW0uZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLnNlYXJjaFBhcmFtJykpOyB9XHJcbiAgICBpZiAodGhpc1tcInZhbHVlU2V0XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMudmFsdWVTZXQuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLnZhbHVlU2V0JykpOyB9XHJcbiAgICBpZiAodGhpc1tcImNvZGVcIl0pIHsgdGhpcy5jb2RlLmZvckVhY2goKHgsaSkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rYC5jb2RlWyR7aX1dYCkpOyB9KSB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgRGF0YVJlcXVpcmVtZW50RGF0ZUZpbHRlciB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBEYXRhUmVxdWlyZW1lbnREYXRlRmlsdGVyQXJncyBleHRlbmRzIGZoaXIuRmhpckVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgcGF0aCBhdHRyaWJ1dGUgY29udGFpbnMgYSBbU2ltcGxlIEZISVIgU3Vic2V0XShmaGlycGF0aC5odG1sI3NpbXBsZSkgdGhhdCBhbGxvd3MgcGF0aCB0cmF2ZXJzYWwsIGJ1dCBub3QgY2FsY3VsYXRpb24uXHJcbiAgICovXHJcbiAgcGF0aD86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBEYXRhUmVxdWlyZW1lbnQuZGF0ZUZpbHRlci5wYXRoXHJcbiAgICovXHJcbiAgX3BhdGg/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEEgZGF0ZSBwYXJhbWV0ZXIgdGhhdCByZWZlcnMgdG8gYSBzZWFyY2ggcGFyYW1ldGVyIGRlZmluZWQgb24gdGhlIHNwZWNpZmllZCB0eXBlIG9mIHRoZSBEYXRhUmVxdWlyZW1lbnQsIGFuZCB3aGljaCBzZWFyY2hlcyBvbiBlbGVtZW50cyBvZiB0eXBlIGRhdGUsIGRhdGVUaW1lLCBQZXJpb2QsIFNjaGVkdWxlLCBvciBUaW1pbmcuXHJcbiAgICovXHJcbiAgc2VhcmNoUGFyYW0/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogRGF0YVJlcXVpcmVtZW50LmRhdGVGaWx0ZXIuc2VhcmNoUGFyYW1cclxuICAgKi9cclxuICBfc2VhcmNoUGFyYW0/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB2YWx1ZSBvZiB0aGUgZmlsdGVyLiBJZiBwZXJpb2QgaXMgc3BlY2lmaWVkLCB0aGUgZmlsdGVyIHdpbGwgcmV0dXJuIG9ubHkgdGhvc2UgZGF0YSBpdGVtcyB0aGF0IGZhbGwgd2l0aGluIHRoZSBib3VuZHMgZGV0ZXJtaW5lZCBieSB0aGUgUGVyaW9kLCBpbmNsdXNpdmUgb2YgdGhlIHBlcmlvZCBib3VuZGFyaWVzLiBJZiBkYXRlVGltZSBpcyBzcGVjaWZpZWQsIHRoZSBmaWx0ZXIgd2lsbCByZXR1cm4gb25seSB0aG9zZSBkYXRhIGl0ZW1zIHRoYXQgYXJlIGVxdWFsIHRvIHRoZSBzcGVjaWZpZWQgZGF0ZVRpbWUuIElmIGEgRHVyYXRpb24gaXMgc3BlY2lmaWVkLCB0aGUgZmlsdGVyIHdpbGwgcmV0dXJuIG9ubHkgdGhvc2UgZGF0YSBpdGVtcyB0aGF0IGZhbGwgd2l0aGluIER1cmF0aW9uIGJlZm9yZSBub3cuXHJcbiAgICovXHJcbiAgdmFsdWU/OiBmaGlyLkZoaXJEYXRlVGltZXxmaGlyLlBlcmlvZHxmaGlyLkR1cmF0aW9ufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdmFsdWUgb2YgdGhlIGZpbHRlci4gSWYgcGVyaW9kIGlzIHNwZWNpZmllZCwgdGhlIGZpbHRlciB3aWxsIHJldHVybiBvbmx5IHRob3NlIGRhdGEgaXRlbXMgdGhhdCBmYWxsIHdpdGhpbiB0aGUgYm91bmRzIGRldGVybWluZWQgYnkgdGhlIFBlcmlvZCwgaW5jbHVzaXZlIG9mIHRoZSBwZXJpb2QgYm91bmRhcmllcy4gSWYgZGF0ZVRpbWUgaXMgc3BlY2lmaWVkLCB0aGUgZmlsdGVyIHdpbGwgcmV0dXJuIG9ubHkgdGhvc2UgZGF0YSBpdGVtcyB0aGF0IGFyZSBlcXVhbCB0byB0aGUgc3BlY2lmaWVkIGRhdGVUaW1lLiBJZiBhIER1cmF0aW9uIGlzIHNwZWNpZmllZCwgdGhlIGZpbHRlciB3aWxsIHJldHVybiBvbmx5IHRob3NlIGRhdGEgaXRlbXMgdGhhdCBmYWxsIHdpdGhpbiBEdXJhdGlvbiBiZWZvcmUgbm93LlxyXG4gICAqL1xyXG4gIHZhbHVlRGF0ZVRpbWU/OiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB2YWx1ZSBvZiB0aGUgZmlsdGVyLiBJZiBwZXJpb2QgaXMgc3BlY2lmaWVkLCB0aGUgZmlsdGVyIHdpbGwgcmV0dXJuIG9ubHkgdGhvc2UgZGF0YSBpdGVtcyB0aGF0IGZhbGwgd2l0aGluIHRoZSBib3VuZHMgZGV0ZXJtaW5lZCBieSB0aGUgUGVyaW9kLCBpbmNsdXNpdmUgb2YgdGhlIHBlcmlvZCBib3VuZGFyaWVzLiBJZiBkYXRlVGltZSBpcyBzcGVjaWZpZWQsIHRoZSBmaWx0ZXIgd2lsbCByZXR1cm4gb25seSB0aG9zZSBkYXRhIGl0ZW1zIHRoYXQgYXJlIGVxdWFsIHRvIHRoZSBzcGVjaWZpZWQgZGF0ZVRpbWUuIElmIGEgRHVyYXRpb24gaXMgc3BlY2lmaWVkLCB0aGUgZmlsdGVyIHdpbGwgcmV0dXJuIG9ubHkgdGhvc2UgZGF0YSBpdGVtcyB0aGF0IGZhbGwgd2l0aGluIER1cmF0aW9uIGJlZm9yZSBub3cuXHJcbiAgICovXHJcbiAgdmFsdWVQZXJpb2Q/OiBmaGlyLlBlcmlvZEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB2YWx1ZSBvZiB0aGUgZmlsdGVyLiBJZiBwZXJpb2QgaXMgc3BlY2lmaWVkLCB0aGUgZmlsdGVyIHdpbGwgcmV0dXJuIG9ubHkgdGhvc2UgZGF0YSBpdGVtcyB0aGF0IGZhbGwgd2l0aGluIHRoZSBib3VuZHMgZGV0ZXJtaW5lZCBieSB0aGUgUGVyaW9kLCBpbmNsdXNpdmUgb2YgdGhlIHBlcmlvZCBib3VuZGFyaWVzLiBJZiBkYXRlVGltZSBpcyBzcGVjaWZpZWQsIHRoZSBmaWx0ZXIgd2lsbCByZXR1cm4gb25seSB0aG9zZSBkYXRhIGl0ZW1zIHRoYXQgYXJlIGVxdWFsIHRvIHRoZSBzcGVjaWZpZWQgZGF0ZVRpbWUuIElmIGEgRHVyYXRpb24gaXMgc3BlY2lmaWVkLCB0aGUgZmlsdGVyIHdpbGwgcmV0dXJuIG9ubHkgdGhvc2UgZGF0YSBpdGVtcyB0aGF0IGZhbGwgd2l0aGluIER1cmF0aW9uIGJlZm9yZSBub3cuXHJcbiAgICovXHJcbiAgdmFsdWVEdXJhdGlvbj86IGZoaXIuRHVyYXRpb25BcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIERhdGUgZmlsdGVycyBzcGVjaWZ5IGFkZGl0aW9uYWwgY29uc3RyYWludHMgb24gdGhlIGRhdGEgaW4gdGVybXMgb2YgdGhlIGFwcGxpY2FibGUgZGF0ZSByYW5nZSBmb3Igc3BlY2lmaWMgZWxlbWVudHMuIEVhY2ggZGF0ZSBmaWx0ZXIgc3BlY2lmaWVzIGFuIGFkZGl0aW9uYWwgY29uc3RyYWludCBvbiB0aGUgZGF0YSwgaS5lLiBkYXRlIGZpbHRlcnMgYXJlIEFORCdlZCwgbm90IE9SJ2VkLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIERhdGFSZXF1aXJlbWVudERhdGVGaWx0ZXIgZXh0ZW5kcyBmaGlyLkZoaXJFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0RhdGFSZXF1aXJlbWVudERhdGVGaWx0ZXInO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXRoIGF0dHJpYnV0ZSBjb250YWlucyBhIFtTaW1wbGUgRkhJUiBTdWJzZXRdKGZoaXJwYXRoLmh0bWwjc2ltcGxlKSB0aGF0IGFsbG93cyBwYXRoIHRyYXZlcnNhbCwgYnV0IG5vdCBjYWxjdWxhdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgcGF0aD86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBkYXRlIHBhcmFtZXRlciB0aGF0IHJlZmVycyB0byBhIHNlYXJjaCBwYXJhbWV0ZXIgZGVmaW5lZCBvbiB0aGUgc3BlY2lmaWVkIHR5cGUgb2YgdGhlIERhdGFSZXF1aXJlbWVudCwgYW5kIHdoaWNoIHNlYXJjaGVzIG9uIGVsZW1lbnRzIG9mIHR5cGUgZGF0ZSwgZGF0ZVRpbWUsIFBlcmlvZCwgU2NoZWR1bGUsIG9yIFRpbWluZy5cclxuICAgKi9cclxuICBwdWJsaWMgc2VhcmNoUGFyYW0/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB2YWx1ZSBvZiB0aGUgZmlsdGVyLiBJZiBwZXJpb2QgaXMgc3BlY2lmaWVkLCB0aGUgZmlsdGVyIHdpbGwgcmV0dXJuIG9ubHkgdGhvc2UgZGF0YSBpdGVtcyB0aGF0IGZhbGwgd2l0aGluIHRoZSBib3VuZHMgZGV0ZXJtaW5lZCBieSB0aGUgUGVyaW9kLCBpbmNsdXNpdmUgb2YgdGhlIHBlcmlvZCBib3VuZGFyaWVzLiBJZiBkYXRlVGltZSBpcyBzcGVjaWZpZWQsIHRoZSBmaWx0ZXIgd2lsbCByZXR1cm4gb25seSB0aG9zZSBkYXRhIGl0ZW1zIHRoYXQgYXJlIGVxdWFsIHRvIHRoZSBzcGVjaWZpZWQgZGF0ZVRpbWUuIElmIGEgRHVyYXRpb24gaXMgc3BlY2lmaWVkLCB0aGUgZmlsdGVyIHdpbGwgcmV0dXJuIG9ubHkgdGhvc2UgZGF0YSBpdGVtcyB0aGF0IGZhbGwgd2l0aGluIER1cmF0aW9uIGJlZm9yZSBub3cuXHJcbiAgICovXHJcbiAgcHVibGljIHZhbHVlPzogKGZoaXIuRmhpckRhdGVUaW1lfGZoaXIuUGVyaW9kfGZoaXIuRHVyYXRpb24pfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IERhdGFSZXF1aXJlbWVudC5kYXRlRmlsdGVyLnZhbHVlW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX3ZhbHVlSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgRGF0YVJlcXVpcmVtZW50RGF0ZUZpbHRlciAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPERhdGFSZXF1aXJlbWVudERhdGVGaWx0ZXJBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsncGF0aCddKSB7IHRoaXMucGF0aCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UucGF0aH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfcGF0aCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnBhdGgpIHsgdGhpcy5wYXRoLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3BhdGghKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5wYXRoID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3BhdGggYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3NlYXJjaFBhcmFtJ10pIHsgdGhpcy5zZWFyY2hQYXJhbSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2Uuc2VhcmNoUGFyYW19KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3NlYXJjaFBhcmFtJ10pIHtcclxuICAgICAgaWYgKHRoaXMuc2VhcmNoUGFyYW0pIHsgdGhpcy5zZWFyY2hQYXJhbS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zZWFyY2hQYXJhbSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnNlYXJjaFBhcmFtID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3NlYXJjaFBhcmFtIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd2YWx1ZSddKSB7IHRoaXMudmFsdWUgPSBzb3VyY2UudmFsdWU7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsndmFsdWVEYXRlVGltZSddKSB7IHRoaXMudmFsdWUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2UudmFsdWVEYXRlVGltZX0pOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3ZhbHVlUGVyaW9kJ10pIHsgdGhpcy52YWx1ZSA9IG5ldyBmaGlyLlBlcmlvZChzb3VyY2UudmFsdWVQZXJpb2QpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3ZhbHVlRHVyYXRpb24nXSkgeyB0aGlzLnZhbHVlID0gbmV3IGZoaXIuRHVyYXRpb24oc291cmNlLnZhbHVlRHVyYXRpb24pOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKTtcclxuICAgIGlmIChleHByZXNzaW9uID09PSAnJykgeyBleHByZXNzaW9uID0gJ0RhdGFSZXF1aXJlbWVudC5kYXRlRmlsdGVyJyB9XHJcbiAgICBpZiAodGhpc1tcInBhdGhcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5wYXRoLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5wYXRoJykpOyB9XHJcbiAgICBpZiAodGhpc1tcInNlYXJjaFBhcmFtXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc2VhcmNoUGFyYW0uZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLnNlYXJjaFBhcmFtJykpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgRGF0YVJlcXVpcmVtZW50U29ydCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBEYXRhUmVxdWlyZW1lbnRTb3J0QXJncyBleHRlbmRzIGZoaXIuRmhpckVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgYXR0cmlidXRlIG9mIHRoZSBzb3J0LiBUaGUgc3BlY2lmaWVkIHBhdGggbXVzdCBiZSByZXNvbHZhYmxlIGZyb20gdGhlIHR5cGUgb2YgdGhlIHJlcXVpcmVkIGRhdGEuIFRoZSBwYXRoIGlzIGFsbG93ZWQgdG8gY29udGFpbiBxdWFsaWZpZXJzICguKSB0byB0cmF2ZXJzZSBzdWItZWxlbWVudHMsIGFzIHdlbGwgYXMgaW5kZXhlcnMgKFt4XSkgdG8gdHJhdmVyc2UgbXVsdGlwbGUtY2FyZGluYWxpdHkgc3ViLWVsZW1lbnRzLiBOb3RlIHRoYXQgdGhlIGluZGV4IG11c3QgYmUgYW4gaW50ZWdlciBjb25zdGFudC5cclxuICAgKi9cclxuICBwYXRoOiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogRGF0YVJlcXVpcmVtZW50LnNvcnQucGF0aFxyXG4gICAqL1xyXG4gIF9wYXRoPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgZGlyZWN0aW9uIG9mIHRoZSBzb3J0LCBhc2NlbmRpbmcgb3IgZGVzY2VuZGluZy5cclxuICAgKi9cclxuICBkaXJlY3Rpb246IGZoaXIuRmhpckNvZGU8U29ydERpcmVjdGlvbkNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBEYXRhUmVxdWlyZW1lbnQuc29ydC5kaXJlY3Rpb25cclxuICAgKi9cclxuICBfZGlyZWN0aW9uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoaXMgZWxlbWVudCBjYW4gYmUgdXNlZCBpbiBjb21iaW5hdGlvbiB3aXRoIHRoZSBzb3J0IGVsZW1lbnQgdG8gc3BlY2lmeSBxdW90YSByZXF1aXJlbWVudHMgc3VjaCBhcyBcInRoZSBtb3N0IHJlY2VudCA1XCIgb3IgXCJ0aGUgaGlnaGVzdCA1XCIuIFdoZW4gbXVsdGlwbGUgc29ydHMgYXJlIHNwZWNpZmllZCwgdGhleSBhcmUgYXBwbGllZCBpbiB0aGUgb3JkZXIgdGhleSBhcHBlYXIgaW4gdGhlIHJlc291cmNlLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIERhdGFSZXF1aXJlbWVudFNvcnQgZXh0ZW5kcyBmaGlyLkZoaXJFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0RhdGFSZXF1aXJlbWVudFNvcnQnO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBhdHRyaWJ1dGUgb2YgdGhlIHNvcnQuIFRoZSBzcGVjaWZpZWQgcGF0aCBtdXN0IGJlIHJlc29sdmFibGUgZnJvbSB0aGUgdHlwZSBvZiB0aGUgcmVxdWlyZWQgZGF0YS4gVGhlIHBhdGggaXMgYWxsb3dlZCB0byBjb250YWluIHF1YWxpZmllcnMgKC4pIHRvIHRyYXZlcnNlIHN1Yi1lbGVtZW50cywgYXMgd2VsbCBhcyBpbmRleGVycyAoW3hdKSB0byB0cmF2ZXJzZSBtdWx0aXBsZS1jYXJkaW5hbGl0eSBzdWItZWxlbWVudHMuIE5vdGUgdGhhdCB0aGUgaW5kZXggbXVzdCBiZSBhbiBpbnRlZ2VyIGNvbnN0YW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXRoOiBmaGlyLkZoaXJTdHJpbmd8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgZGlyZWN0aW9uIG9mIHRoZSBzb3J0LCBhc2NlbmRpbmcgb3IgZGVzY2VuZGluZy5cclxuICAgKi9cclxuICBwdWJsaWMgZGlyZWN0aW9uOiBmaGlyLkZoaXJDb2RlPFNvcnREaXJlY3Rpb25Db2RlVHlwZT58bnVsbDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBEYXRhUmVxdWlyZW1lbnRTb3J0IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8RGF0YVJlcXVpcmVtZW50U29ydEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydwYXRoJ10pIHsgdGhpcy5wYXRoID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5wYXRofSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnBhdGggPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfcGF0aCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnBhdGgpIHsgdGhpcy5wYXRoLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3BhdGghKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5wYXRoID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3BhdGggYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2RpcmVjdGlvbiddKSB7IHRoaXMuZGlyZWN0aW9uID0gbmV3IGZoaXIuRmhpckNvZGU8U29ydERpcmVjdGlvbkNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5kaXJlY3Rpb259KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZGlyZWN0aW9uID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2RpcmVjdGlvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLmRpcmVjdGlvbikgeyB0aGlzLmRpcmVjdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9kaXJlY3Rpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5kaXJlY3Rpb24gPSBuZXcgZmhpci5GaGlyQ29kZTxTb3J0RGlyZWN0aW9uQ29kZVR5cGU+KHNvdXJjZS5fZGlyZWN0aW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlcXVpcmVkLWJvdW5kIFZhbHVlIFNldCBmb3IgZGlyZWN0aW9uIChEYXRhUmVxdWlyZW1lbnQuc29ydC5kaXJlY3Rpb24pXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgZGlyZWN0aW9uUmVxdWlyZWRDb2RlcygpIHtcclxuICAgIHJldHVybiBTb3J0RGlyZWN0aW9uQ29kZXM7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKTtcclxuICAgIGlmIChleHByZXNzaW9uID09PSAnJykgeyBleHByZXNzaW9uID0gJ0RhdGFSZXF1aXJlbWVudC5zb3J0JyB9XHJcbiAgICBpZiAoIXRoaXNbJ3BhdGgnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgcGF0aCBmaGlyOiBEYXRhUmVxdWlyZW1lbnQuc29ydC5wYXRoOnN0cmluZycsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wicGF0aFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnBhdGguZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLnBhdGgnKSk7IH1cclxuICAgIGlmICghdGhpc1snZGlyZWN0aW9uJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IGRpcmVjdGlvbiBmaGlyOiBEYXRhUmVxdWlyZW1lbnQuc29ydC5kaXJlY3Rpb246Y29kZScsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzWydkaXJlY3Rpb24nXSAmJiAoIU9iamVjdC52YWx1ZXMoU29ydERpcmVjdGlvbkNvZGVzKS5pbmNsdWRlcyh0aGlzLmRpcmVjdGlvbi52YWx1ZSBhcyBhbnkpKSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnY29kZS1pbnZhbGlkJywgZGlhZ25vc3RpY3M6ICdkaXJlY3Rpb24gKERhdGFSZXF1aXJlbWVudC5zb3J0LmRpcmVjdGlvbikgb2YgdHlwZSBjb2RlIGlzIG1pc3NpbmcgY29kZSBmb3IgUmVxdWlyZWQgYmluZGluZyB0bzogU29ydERpcmVjdGlvbicsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiZGlyZWN0aW9uXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZGlyZWN0aW9uLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5kaXJlY3Rpb24nKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBEYXRhUmVxdWlyZW1lbnQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgRGF0YVJlcXVpcmVtZW50QXJncyBleHRlbmRzIGZoaXIuRmhpckVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgdHlwZSBvZiB0aGUgcmVxdWlyZWQgZGF0YSwgc3BlY2lmaWVkIGFzIHRoZSB0eXBlIG5hbWUgb2YgYSByZXNvdXJjZS4gRm9yIHByb2ZpbGVzLCB0aGlzIHZhbHVlIGlzIHNldCB0byB0aGUgdHlwZSBvZiB0aGUgYmFzZSByZXNvdXJjZSBvZiB0aGUgcHJvZmlsZS5cclxuICAgKi9cclxuICB0eXBlOiBmaGlyLkZoaXJDb2RlfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IERhdGFSZXF1aXJlbWVudC50eXBlXHJcbiAgICovXHJcbiAgX3R5cGU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwcm9maWxlIG9mIHRoZSByZXF1aXJlZCBkYXRhLCBzcGVjaWZpZWQgYXMgdGhlIHVyaSBvZiB0aGUgcHJvZmlsZSBkZWZpbml0aW9uLlxyXG4gICAqL1xyXG4gIHByb2ZpbGU/OiBmaGlyLkZoaXJDYW5vbmljYWxbXXxzdHJpbmdbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IERhdGFSZXF1aXJlbWVudC5wcm9maWxlXHJcbiAgICovXHJcbiAgX3Byb2ZpbGU/OihmaGlyLkZoaXJFbGVtZW50QXJnc3xudWxsKVtdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzdWJqZWN0IG9mIGEgZGF0YSByZXF1aXJlbWVudCBpcyBjcml0aWNhbCwgYXMgdGhlIGRhdGEgYmVpbmcgc3BlY2lmaWVkIGlzIGRldGVybWluZWQgd2l0aCByZXNwZWN0IHRvIGEgcGFydGljdWxhciBzdWJqZWN0LiBUaGlzIGNvcnJlc3BvbmRzIHJvdWdobHkgdG8gdGhlIG5vdGlvbiBvZiBhIENvbXBhcnRtZW50IGluIHRoYXQgaXQgbGltaXRzIHdoYXQgZGF0YSBpcyBhdmFpbGFibGUgYmFzZWQgb24gaXRzIHJlbGF0aW9uc2hpcCB0byB0aGUgc3ViamVjdC4gSW4gQ1FMLCB0aGlzIGNvcnJlc3BvbmRzIHRvIHRoZSBjb250ZXh0IGRlY2xhcmF0aW9uLlxyXG4gICAqL1xyXG4gIHN1YmplY3Q/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHN1YmplY3Qgb2YgYSBkYXRhIHJlcXVpcmVtZW50IGlzIGNyaXRpY2FsLCBhcyB0aGUgZGF0YSBiZWluZyBzcGVjaWZpZWQgaXMgZGV0ZXJtaW5lZCB3aXRoIHJlc3BlY3QgdG8gYSBwYXJ0aWN1bGFyIHN1YmplY3QuIFRoaXMgY29ycmVzcG9uZHMgcm91Z2hseSB0byB0aGUgbm90aW9uIG9mIGEgQ29tcGFydG1lbnQgaW4gdGhhdCBpdCBsaW1pdHMgd2hhdCBkYXRhIGlzIGF2YWlsYWJsZSBiYXNlZCBvbiBpdHMgcmVsYXRpb25zaGlwIHRvIHRoZSBzdWJqZWN0LiBJbiBDUUwsIHRoaXMgY29ycmVzcG9uZHMgdG8gdGhlIGNvbnRleHQgZGVjbGFyYXRpb24uXHJcbiAgICovXHJcbiAgc3ViamVjdENvZGVhYmxlQ29uY2VwdD86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHN1YmplY3Qgb2YgYSBkYXRhIHJlcXVpcmVtZW50IGlzIGNyaXRpY2FsLCBhcyB0aGUgZGF0YSBiZWluZyBzcGVjaWZpZWQgaXMgZGV0ZXJtaW5lZCB3aXRoIHJlc3BlY3QgdG8gYSBwYXJ0aWN1bGFyIHN1YmplY3QuIFRoaXMgY29ycmVzcG9uZHMgcm91Z2hseSB0byB0aGUgbm90aW9uIG9mIGEgQ29tcGFydG1lbnQgaW4gdGhhdCBpdCBsaW1pdHMgd2hhdCBkYXRhIGlzIGF2YWlsYWJsZSBiYXNlZCBvbiBpdHMgcmVsYXRpb25zaGlwIHRvIHRoZSBzdWJqZWN0LiBJbiBDUUwsIHRoaXMgY29ycmVzcG9uZHMgdG8gdGhlIGNvbnRleHQgZGVjbGFyYXRpb24uXHJcbiAgICovXHJcbiAgc3ViamVjdFJlZmVyZW5jZT86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHRoYXQgc3BlY2lmaWMgZWxlbWVudHMgb2YgdGhlIHR5cGUgYXJlIHJlZmVyZW5jZWQgYnkgdGhlIGtub3dsZWRnZSBtb2R1bGUgYW5kIG11c3QgYmUgc3VwcG9ydGVkIGJ5IHRoZSBjb25zdW1lciBpbiBvcmRlciB0byBvYnRhaW4gYW4gZWZmZWN0aXZlIGV2YWx1YXRpb24uIFRoaXMgZG9lcyBub3QgbWVhbiB0aGF0IGEgdmFsdWUgaXMgcmVxdWlyZWQgZm9yIHRoaXMgZWxlbWVudCwgb25seSB0aGF0IHRoZSBjb25zdW1pbmcgc3lzdGVtIG11c3QgdW5kZXJzdGFuZCB0aGUgZWxlbWVudCBhbmQgYmUgYWJsZSB0byBwcm92aWRlIHZhbHVlcyBmb3IgaXQgaWYgdGhleSBhcmUgYXZhaWxhYmxlLiBcclxuICAgKiBUaGUgdmFsdWUgb2YgbXVzdFN1cHBvcnQgU0hBTEwgYmUgYSBGSElSUGF0aCByZXNvbHZlYWJsZSBvbiB0aGUgdHlwZSBvZiB0aGUgRGF0YVJlcXVpcmVtZW50LiBUaGUgcGF0aCBTSEFMTCBjb25zaXN0IG9ubHkgb2YgaWRlbnRpZmllcnMsIGNvbnN0YW50IGluZGV4ZXJzLCBhbmQgLnJlc29sdmUoKSAoc2VlIHRoZSBbU2ltcGxlIEZISVJQYXRoIFByb2ZpbGVdKGZoaXJwYXRoLmh0bWwjc2ltcGxlKSBmb3IgZnVsbCBkZXRhaWxzKS5cclxuICAgKi9cclxuICBtdXN0U3VwcG9ydD86IGZoaXIuRmhpclN0cmluZ1tdfHN0cmluZ1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogRGF0YVJlcXVpcmVtZW50Lm11c3RTdXBwb3J0XHJcbiAgICovXHJcbiAgX211c3RTdXBwb3J0PzooZmhpci5GaGlyRWxlbWVudEFyZ3N8bnVsbClbXTtcclxuICAvKipcclxuICAgKiBDb2RlIGZpbHRlcnMgc3BlY2lmeSBhZGRpdGlvbmFsIGNvbnN0cmFpbnRzIG9uIHRoZSBkYXRhLCBzcGVjaWZ5aW5nIHRoZSB2YWx1ZSBzZXQgb2YgaW50ZXJlc3QgZm9yIGEgcGFydGljdWxhciBlbGVtZW50IG9mIHRoZSBkYXRhLiBFYWNoIGNvZGUgZmlsdGVyIGRlZmluZXMgYW4gYWRkaXRpb25hbCBjb25zdHJhaW50IG9uIHRoZSBkYXRhLCBpLmUuIGNvZGUgZmlsdGVycyBhcmUgQU5EJ2VkLCBub3QgT1InZWQuXHJcbiAgICovXHJcbiAgY29kZUZpbHRlcj86IGZoaXIuRGF0YVJlcXVpcmVtZW50Q29kZUZpbHRlckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGF0ZSBmaWx0ZXJzIHNwZWNpZnkgYWRkaXRpb25hbCBjb25zdHJhaW50cyBvbiB0aGUgZGF0YSBpbiB0ZXJtcyBvZiB0aGUgYXBwbGljYWJsZSBkYXRlIHJhbmdlIGZvciBzcGVjaWZpYyBlbGVtZW50cy4gRWFjaCBkYXRlIGZpbHRlciBzcGVjaWZpZXMgYW4gYWRkaXRpb25hbCBjb25zdHJhaW50IG9uIHRoZSBkYXRhLCBpLmUuIGRhdGUgZmlsdGVycyBhcmUgQU5EJ2VkLCBub3QgT1InZWQuXHJcbiAgICovXHJcbiAgZGF0ZUZpbHRlcj86IGZoaXIuRGF0YVJlcXVpcmVtZW50RGF0ZUZpbHRlckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IGNhbiBiZSB1c2VkIGluIGNvbWJpbmF0aW9uIHdpdGggdGhlIHNvcnQgZWxlbWVudCB0byBzcGVjaWZ5IHF1b3RhIHJlcXVpcmVtZW50cyBzdWNoIGFzIFwidGhlIG1vc3QgcmVjZW50IDVcIiBvciBcInRoZSBoaWdoZXN0IDVcIi5cclxuICAgKi9cclxuICBsaW1pdD86IGZoaXIuRmhpclBvc2l0aXZlSW50fG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IERhdGFSZXF1aXJlbWVudC5saW1pdFxyXG4gICAqL1xyXG4gIF9saW1pdD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IGNhbiBiZSB1c2VkIGluIGNvbWJpbmF0aW9uIHdpdGggdGhlIHNvcnQgZWxlbWVudCB0byBzcGVjaWZ5IHF1b3RhIHJlcXVpcmVtZW50cyBzdWNoIGFzIFwidGhlIG1vc3QgcmVjZW50IDVcIiBvciBcInRoZSBoaWdoZXN0IDVcIi4gV2hlbiBtdWx0aXBsZSBzb3J0cyBhcmUgc3BlY2lmaWVkLCB0aGV5IGFyZSBhcHBsaWVkIGluIHRoZSBvcmRlciB0aGV5IGFwcGVhciBpbiB0aGUgcmVzb3VyY2UuXHJcbiAgICovXHJcbiAgc29ydD86IGZoaXIuRGF0YVJlcXVpcmVtZW50U29ydEFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEZXNjcmliZXMgYSByZXF1aXJlZCBkYXRhIGl0ZW0gZm9yIGV2YWx1YXRpb24gaW4gdGVybXMgb2YgdGhlIHR5cGUgb2YgZGF0YSwgYW5kIG9wdGlvbmFsIGNvZGUgb3IgZGF0ZS1iYXNlZCBmaWx0ZXJzIG9mIHRoZSBkYXRhLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIERhdGFSZXF1aXJlbWVudCBleHRlbmRzIGZoaXIuRmhpckVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnRGF0YVJlcXVpcmVtZW50JztcclxuICAvKipcclxuICAgKiBUaGUgdHlwZSBvZiB0aGUgcmVxdWlyZWQgZGF0YSwgc3BlY2lmaWVkIGFzIHRoZSB0eXBlIG5hbWUgb2YgYSByZXNvdXJjZS4gRm9yIHByb2ZpbGVzLCB0aGlzIHZhbHVlIGlzIHNldCB0byB0aGUgdHlwZSBvZiB0aGUgYmFzZSByZXNvdXJjZSBvZiB0aGUgcHJvZmlsZS5cclxuICAgKi9cclxuICBwdWJsaWMgdHlwZTogZmhpci5GaGlyQ29kZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwcm9maWxlIG9mIHRoZSByZXF1aXJlZCBkYXRhLCBzcGVjaWZpZWQgYXMgdGhlIHVyaSBvZiB0aGUgcHJvZmlsZSBkZWZpbml0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcm9maWxlOiBmaGlyLkZoaXJDYW5vbmljYWxbXTtcclxuICAvKipcclxuICAgKiBUaGUgc3ViamVjdCBvZiBhIGRhdGEgcmVxdWlyZW1lbnQgaXMgY3JpdGljYWwsIGFzIHRoZSBkYXRhIGJlaW5nIHNwZWNpZmllZCBpcyBkZXRlcm1pbmVkIHdpdGggcmVzcGVjdCB0byBhIHBhcnRpY3VsYXIgc3ViamVjdC4gVGhpcyBjb3JyZXNwb25kcyByb3VnaGx5IHRvIHRoZSBub3Rpb24gb2YgYSBDb21wYXJ0bWVudCBpbiB0aGF0IGl0IGxpbWl0cyB3aGF0IGRhdGEgaXMgYXZhaWxhYmxlIGJhc2VkIG9uIGl0cyByZWxhdGlvbnNoaXAgdG8gdGhlIHN1YmplY3QuIEluIENRTCwgdGhpcyBjb3JyZXNwb25kcyB0byB0aGUgY29udGV4dCBkZWNsYXJhdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgc3ViamVjdD86IChmaGlyLkNvZGVhYmxlQ29uY2VwdHxmaGlyLlJlZmVyZW5jZSl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgRGF0YVJlcXVpcmVtZW50LnN1YmplY3RbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfc3ViamVjdElzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB0aGF0IHNwZWNpZmljIGVsZW1lbnRzIG9mIHRoZSB0eXBlIGFyZSByZWZlcmVuY2VkIGJ5IHRoZSBrbm93bGVkZ2UgbW9kdWxlIGFuZCBtdXN0IGJlIHN1cHBvcnRlZCBieSB0aGUgY29uc3VtZXIgaW4gb3JkZXIgdG8gb2J0YWluIGFuIGVmZmVjdGl2ZSBldmFsdWF0aW9uLiBUaGlzIGRvZXMgbm90IG1lYW4gdGhhdCBhIHZhbHVlIGlzIHJlcXVpcmVkIGZvciB0aGlzIGVsZW1lbnQsIG9ubHkgdGhhdCB0aGUgY29uc3VtaW5nIHN5c3RlbSBtdXN0IHVuZGVyc3RhbmQgdGhlIGVsZW1lbnQgYW5kIGJlIGFibGUgdG8gcHJvdmlkZSB2YWx1ZXMgZm9yIGl0IGlmIHRoZXkgYXJlIGF2YWlsYWJsZS4gXHJcbiAgICogVGhlIHZhbHVlIG9mIG11c3RTdXBwb3J0IFNIQUxMIGJlIGEgRkhJUlBhdGggcmVzb2x2ZWFibGUgb24gdGhlIHR5cGUgb2YgdGhlIERhdGFSZXF1aXJlbWVudC4gVGhlIHBhdGggU0hBTEwgY29uc2lzdCBvbmx5IG9mIGlkZW50aWZpZXJzLCBjb25zdGFudCBpbmRleGVycywgYW5kIC5yZXNvbHZlKCkgKHNlZSB0aGUgW1NpbXBsZSBGSElSUGF0aCBQcm9maWxlXShmaGlycGF0aC5odG1sI3NpbXBsZSkgZm9yIGZ1bGwgZGV0YWlscykuXHJcbiAgICovXHJcbiAgcHVibGljIG11c3RTdXBwb3J0OiBmaGlyLkZoaXJTdHJpbmdbXTtcclxuICAvKipcclxuICAgKiBDb2RlIGZpbHRlcnMgc3BlY2lmeSBhZGRpdGlvbmFsIGNvbnN0cmFpbnRzIG9uIHRoZSBkYXRhLCBzcGVjaWZ5aW5nIHRoZSB2YWx1ZSBzZXQgb2YgaW50ZXJlc3QgZm9yIGEgcGFydGljdWxhciBlbGVtZW50IG9mIHRoZSBkYXRhLiBFYWNoIGNvZGUgZmlsdGVyIGRlZmluZXMgYW4gYWRkaXRpb25hbCBjb25zdHJhaW50IG9uIHRoZSBkYXRhLCBpLmUuIGNvZGUgZmlsdGVycyBhcmUgQU5EJ2VkLCBub3QgT1InZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGVGaWx0ZXI6IGZoaXIuRGF0YVJlcXVpcmVtZW50Q29kZUZpbHRlcltdO1xyXG4gIC8qKlxyXG4gICAqIERhdGUgZmlsdGVycyBzcGVjaWZ5IGFkZGl0aW9uYWwgY29uc3RyYWludHMgb24gdGhlIGRhdGEgaW4gdGVybXMgb2YgdGhlIGFwcGxpY2FibGUgZGF0ZSByYW5nZSBmb3Igc3BlY2lmaWMgZWxlbWVudHMuIEVhY2ggZGF0ZSBmaWx0ZXIgc3BlY2lmaWVzIGFuIGFkZGl0aW9uYWwgY29uc3RyYWludCBvbiB0aGUgZGF0YSwgaS5lLiBkYXRlIGZpbHRlcnMgYXJlIEFORCdlZCwgbm90IE9SJ2VkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkYXRlRmlsdGVyOiBmaGlyLkRhdGFSZXF1aXJlbWVudERhdGVGaWx0ZXJbXTtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgY2FuIGJlIHVzZWQgaW4gY29tYmluYXRpb24gd2l0aCB0aGUgc29ydCBlbGVtZW50IHRvIHNwZWNpZnkgcXVvdGEgcmVxdWlyZW1lbnRzIHN1Y2ggYXMgXCJ0aGUgbW9zdCByZWNlbnQgNVwiIG9yIFwidGhlIGhpZ2hlc3QgNVwiLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBsaW1pdD86IGZoaXIuRmhpclBvc2l0aXZlSW50fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgY2FuIGJlIHVzZWQgaW4gY29tYmluYXRpb24gd2l0aCB0aGUgc29ydCBlbGVtZW50IHRvIHNwZWNpZnkgcXVvdGEgcmVxdWlyZW1lbnRzIHN1Y2ggYXMgXCJ0aGUgbW9zdCByZWNlbnQgNVwiIG9yIFwidGhlIGhpZ2hlc3QgNVwiLiBXaGVuIG11bHRpcGxlIHNvcnRzIGFyZSBzcGVjaWZpZWQsIHRoZXkgYXJlIGFwcGxpZWQgaW4gdGhlIG9yZGVyIHRoZXkgYXBwZWFyIGluIHRoZSByZXNvdXJjZS5cclxuICAgKi9cclxuICBwdWJsaWMgc29ydDogZmhpci5EYXRhUmVxdWlyZW1lbnRTb3J0W107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgRGF0YVJlcXVpcmVtZW50IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8RGF0YVJlcXVpcmVtZW50QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3R5cGUnXSkgeyB0aGlzLnR5cGUgPSBuZXcgZmhpci5GaGlyQ29kZSh7dmFsdWU6IHNvdXJjZS50eXBlfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnR5cGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfdHlwZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnR5cGUpIHsgdGhpcy50eXBlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3R5cGUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy50eXBlID0gbmV3IGZoaXIuRmhpckNvZGUoc291cmNlLl90eXBlIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJvZmlsZSddKSB7IHRoaXMucHJvZmlsZSA9IHNvdXJjZS5wcm9maWxlLm1hcCgoeCkgPT4gbmV3IGZoaXIuRmhpckNhbm9uaWNhbCh7dmFsdWU6IHh9KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnByb2ZpbGUgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3Byb2ZpbGUnXSkge1xyXG4gICAgICBzb3VyY2UuX3Byb2ZpbGUuZm9yRWFjaCgoeCxpKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvZmlsZS5sZW5ndGggPj0gaSkgeyBpZiAoeCkgeyB0aGlzLnByb2ZpbGVbaV0uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHgpOyB9IH1cclxuICAgICAgICBlbHNlIHsgaWYgKHgpIHsgdGhpcy5wcm9maWxlLnB1c2gobmV3IGZoaXIuRmhpckNhbm9uaWNhbCh4IGFzIFBhcnRpYWw8Zmhpci5GaGlyQ2Fub25pY2FsQXJncz4pKTsgfSB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3ViamVjdCddKSB7IHRoaXMuc3ViamVjdCA9IHNvdXJjZS5zdWJqZWN0OyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3N1YmplY3RDb2RlYWJsZUNvbmNlcHQnXSkgeyB0aGlzLnN1YmplY3QgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnN1YmplY3RDb2RlYWJsZUNvbmNlcHQpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3N1YmplY3RSZWZlcmVuY2UnXSkgeyB0aGlzLnN1YmplY3QgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnN1YmplY3RSZWZlcmVuY2UpOyB9XHJcbiAgICBpZiAoc291cmNlWydtdXN0U3VwcG9ydCddKSB7IHRoaXMubXVzdFN1cHBvcnQgPSBzb3VyY2UubXVzdFN1cHBvcnQubWFwKCh4KSA9PiBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogeH0pKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubXVzdFN1cHBvcnQgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX211c3RTdXBwb3J0J10pIHtcclxuICAgICAgc291cmNlLl9tdXN0U3VwcG9ydC5mb3JFYWNoKCh4LGkpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5tdXN0U3VwcG9ydC5sZW5ndGggPj0gaSkgeyBpZiAoeCkgeyB0aGlzLm11c3RTdXBwb3J0W2ldLmFkZEV4dGVuZGVkUHJvcGVydGllcyh4KTsgfSB9XHJcbiAgICAgICAgZWxzZSB7IGlmICh4KSB7IHRoaXMubXVzdFN1cHBvcnQucHVzaChuZXcgZmhpci5GaGlyU3RyaW5nKHggYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPikpOyB9IH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydjb2RlRmlsdGVyJ10pIHsgdGhpcy5jb2RlRmlsdGVyID0gc291cmNlLmNvZGVGaWx0ZXIubWFwKCh4KSA9PiBuZXcgZmhpci5EYXRhUmVxdWlyZW1lbnRDb2RlRmlsdGVyKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY29kZUZpbHRlciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydkYXRlRmlsdGVyJ10pIHsgdGhpcy5kYXRlRmlsdGVyID0gc291cmNlLmRhdGVGaWx0ZXIubWFwKCh4KSA9PiBuZXcgZmhpci5EYXRhUmVxdWlyZW1lbnREYXRlRmlsdGVyKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZGF0ZUZpbHRlciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydsaW1pdCddKSB7IHRoaXMubGltaXQgPSBuZXcgZmhpci5GaGlyUG9zaXRpdmVJbnQoe3ZhbHVlOiBzb3VyY2UubGltaXR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2xpbWl0J10pIHtcclxuICAgICAgaWYgKHRoaXMubGltaXQpIHsgdGhpcy5saW1pdC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9saW1pdCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmxpbWl0ID0gbmV3IGZoaXIuRmhpclBvc2l0aXZlSW50KHNvdXJjZS5fbGltaXQgYXMgUGFydGlhbDxmaGlyLkZoaXJQb3NpdGl2ZUludEFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnc29ydCddKSB7IHRoaXMuc29ydCA9IHNvdXJjZS5zb3J0Lm1hcCgoeCkgPT4gbmV3IGZoaXIuRGF0YVJlcXVpcmVtZW50U29ydCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnNvcnQgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIHR5cGUgKERhdGFSZXF1aXJlbWVudC50eXBlKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IHR5cGVSZXF1aXJlZENvZGVzKCkge1xyXG4gICAgcmV0dXJuIEFsbFR5cGVzQ29kZXM7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKTtcclxuICAgIGlmIChleHByZXNzaW9uID09PSAnJykgeyBleHByZXNzaW9uID0gJ0RhdGFSZXF1aXJlbWVudCcgfVxyXG4gICAgaWYgKCF0aGlzWyd0eXBlJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHR5cGUgZmhpcjogRGF0YVJlcXVpcmVtZW50LnR5cGU6Y29kZScsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzWyd0eXBlJ10gJiYgKCFPYmplY3QudmFsdWVzKEFsbFR5cGVzQ29kZXMpLmluY2x1ZGVzKHRoaXMudHlwZS52YWx1ZSBhcyBhbnkpKSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnY29kZS1pbnZhbGlkJywgZGlhZ25vc3RpY3M6ICd0eXBlIChEYXRhUmVxdWlyZW1lbnQudHlwZSkgb2YgdHlwZSBjb2RlIGlzIG1pc3NpbmcgY29kZSBmb3IgUmVxdWlyZWQgYmluZGluZyB0bzogQWxsVHlwZXMnLCBleHByZXNzaW9uOiBbZXhwcmVzc2lvbl0gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInR5cGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy50eXBlLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy50eXBlJykpOyB9XHJcbiAgICBpZiAodGhpc1tcInByb2ZpbGVcIl0pIHsgdGhpcy5wcm9maWxlLmZvckVhY2goKHgsaSkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rYC5wcm9maWxlWyR7aX1dYCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcIm11c3RTdXBwb3J0XCJdKSB7IHRoaXMubXVzdFN1cHBvcnQuZm9yRWFjaCgoeCxpKSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbitgLm11c3RTdXBwb3J0WyR7aX1dYCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImNvZGVGaWx0ZXJcIl0pIHsgdGhpcy5jb2RlRmlsdGVyLmZvckVhY2goKHgsaSkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rYC5jb2RlRmlsdGVyWyR7aX1dYCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImRhdGVGaWx0ZXJcIl0pIHsgdGhpcy5kYXRlRmlsdGVyLmZvckVhY2goKHgsaSkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rYC5kYXRlRmlsdGVyWyR7aX1dYCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImxpbWl0XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMubGltaXQuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLmxpbWl0JykpOyB9XHJcbiAgICBpZiAodGhpc1tcInNvcnRcIl0pIHsgdGhpcy5zb3J0LmZvckVhY2goKHgsaSkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rYC5zb3J0WyR7aX1dYCkpOyB9KSB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=