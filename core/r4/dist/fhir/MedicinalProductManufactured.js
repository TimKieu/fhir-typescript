// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: MedicinalProductManufactured
import * as fhir from '../fhir.js';
/**
 * The manufactured item as contained in the packaged medicinal product.
 */
export class MedicinalProductManufactured extends fhir.DomainResource {
    /**
     * Default constructor for MedicinalProductManufactured - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'MedicinalProductManufactured';
        if (source['manufacturedDoseForm']) {
            this.manufacturedDoseForm = new fhir.CodeableConcept(source.manufacturedDoseForm);
        }
        else {
            this.manufacturedDoseForm = null;
        }
        if (source['unitOfPresentation']) {
            this.unitOfPresentation = new fhir.CodeableConcept(source.unitOfPresentation);
        }
        if (source['quantity']) {
            this.quantity = new fhir.Quantity(source.quantity);
        }
        else {
            this.quantity = null;
        }
        if (source['manufacturer']) {
            this.manufacturer = source.manufacturer.map((x) => new fhir.Reference(x));
        }
        else {
            this.manufacturer = [];
        }
        if (source['ingredient']) {
            this.ingredient = source.ingredient.map((x) => new fhir.Reference(x));
        }
        else {
            this.ingredient = [];
        }
        if (source['physicalCharacteristics']) {
            this.physicalCharacteristics = new fhir.ProdCharacteristic(source.physicalCharacteristics);
        }
        if (source['otherCharacteristics']) {
            this.otherCharacteristics = source.otherCharacteristics.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.otherCharacteristics = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType:"MedicinalProductManufactured" fhir: MedicinalProductManufactured.resourceType:"MedicinalProductManufactured"', });
        }
        if (!this['manufacturedDoseForm']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property manufacturedDoseForm:fhir.CodeableConcept fhir: MedicinalProductManufactured.manufacturedDoseForm:CodeableConcept', });
        }
        if (this["manufacturedDoseForm"]) {
            issues.push(...this.manufacturedDoseForm.doModelValidation());
        }
        if (this["unitOfPresentation"]) {
            issues.push(...this.unitOfPresentation.doModelValidation());
        }
        if (!this['quantity']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property quantity:fhir.Quantity fhir: MedicinalProductManufactured.quantity:Quantity', });
        }
        if (this["quantity"]) {
            issues.push(...this.quantity.doModelValidation());
        }
        if (this["manufacturer"]) {
            this.manufacturer.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["ingredient"]) {
            this.ingredient.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["physicalCharacteristics"]) {
            issues.push(...this.physicalCharacteristics.doModelValidation());
        }
        if (this["otherCharacteristics"]) {
            this.otherCharacteristics.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductManufactured._fts_dataType = 'MedicinalProductManufactured';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVkaWNpbmFsUHJvZHVjdE1hbnVmYWN0dXJlZC5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvTWVkaWNpbmFsUHJvZHVjdE1hbnVmYWN0dXJlZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQyw4Q0FBOEM7QUFFOUMsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUF3Q25DOztHQUVHO0FBQ0gsTUFBTSxPQUFPLDRCQUE2QixTQUFRLElBQUksQ0FBQyxjQUFjO0lBcUNuRTs7T0FFRztJQUNILFlBQVksU0FBbUQsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDekcsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLENBQUMsWUFBWSxHQUFHLDhCQUE4QixDQUFDO1FBQ25ELElBQUksTUFBTSxDQUFDLHNCQUFzQixDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO1NBQUU7YUFDckg7WUFBRSxJQUFJLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDMUMsSUFBSSxNQUFNLENBQUMsb0JBQW9CLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLGtCQUFrQixDQUFDLENBQUM7U0FBRTtRQUNwSCxJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztTQUFFO2FBQzFFO1lBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7U0FBRTtRQUM5QixJQUFJLE1BQU0sQ0FBQyxjQUFj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UUFDMUcsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtTQUFFO1FBQ3RHLElBQUksSUFBSSxDQUFDLHlCQUF5QixDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLHVCQUF1QixDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQzFHLElBQUksSUFBSSxDQUFDLHNCQUFzQixDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsb0JBQW9CLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQUU7UUFDMUgsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQzs7QUE3RUQ7O0dBRUc7QUFDNkIsMENBQWEsR0FBVSw4QkFBOEIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNC5jb3JlIHZlcnNpb246IDQuMC4xXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogTWVkaWNpbmFsUHJvZHVjdE1hbnVmYWN0dXJlZFxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBNZWRpY2luYWxQcm9kdWN0TWFudWZhY3R1cmVkIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lZGljaW5hbFByb2R1Y3RNYW51ZmFjdHVyZWRBcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJNZWRpY2luYWxQcm9kdWN0TWFudWZhY3R1cmVkXCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERvc2UgZm9ybSBhcyBtYW51ZmFjdHVyZWQgYW5kIGJlZm9yZSBhbnkgdHJhbnNmb3JtYXRpb24gaW50byB0aGUgcGhhcm1hY2V1dGljYWwgcHJvZHVjdC5cclxuICAgKi9cclxuICBtYW51ZmFjdHVyZWREb3NlRm9ybTogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIOKAnHJlYWwgd29ybGTigJ0gdW5pdHMgaW4gd2hpY2ggdGhlIHF1YW50aXR5IG9mIHRoZSBtYW51ZmFjdHVyZWQgaXRlbSBpcyBkZXNjcmliZWQuXHJcbiAgICovXHJcbiAgdW5pdE9mUHJlc2VudGF0aW9uPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcXVhbnRpdHkgb3IgXCJjb3VudCBudW1iZXJcIiBvZiB0aGUgbWFudWZhY3R1cmVkIGl0ZW0uXHJcbiAgICovXHJcbiAgcXVhbnRpdHk6IGZoaXIuUXVhbnRpdHlBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogTWFudWZhY3R1cmVyIG9mIHRoZSBpdGVtIChOb3RlIHRoYXQgdGhpcyBzaG91bGQgYmUgbmFtZWQgXCJtYW51ZmFjdHVyZXJcIiBidXQgaXQgY3VycmVudGx5IGNhdXNlcyB0ZWNobmljYWwgaXNzdWVzKS5cclxuICAgKi9cclxuICBtYW51ZmFjdHVyZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5ncmVkaWVudC5cclxuICAgKi9cclxuICBpbmdyZWRpZW50PzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERpbWVuc2lvbnMsIGNvbG9yIGV0Yy5cclxuICAgKi9cclxuICBwaHlzaWNhbENoYXJhY3RlcmlzdGljcz86IGZoaXIuUHJvZENoYXJhY3RlcmlzdGljQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogT3RoZXIgY29kZWFibGUgY2hhcmFjdGVyaXN0aWNzLlxyXG4gICAqL1xyXG4gIG90aGVyQ2hhcmFjdGVyaXN0aWNzPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlIG1hbnVmYWN0dXJlZCBpdGVtIGFzIGNvbnRhaW5lZCBpbiB0aGUgcGFja2FnZWQgbWVkaWNpbmFsIHByb2R1Y3QuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNpbmFsUHJvZHVjdE1hbnVmYWN0dXJlZCBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVkaWNpbmFsUHJvZHVjdE1hbnVmYWN0dXJlZCc7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJNZWRpY2luYWxQcm9kdWN0TWFudWZhY3R1cmVkXCI7XHJcbiAgLyoqXHJcbiAgICogRG9zZSBmb3JtIGFzIG1hbnVmYWN0dXJlZCBhbmQgYmVmb3JlIGFueSB0cmFuc2Zvcm1hdGlvbiBpbnRvIHRoZSBwaGFybWFjZXV0aWNhbCBwcm9kdWN0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtYW51ZmFjdHVyZWREb3NlRm9ybTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUg4oCccmVhbCB3b3JsZOKAnSB1bml0cyBpbiB3aGljaCB0aGUgcXVhbnRpdHkgb2YgdGhlIG1hbnVmYWN0dXJlZCBpdGVtIGlzIGRlc2NyaWJlZC5cclxuICAgKi9cclxuICBwdWJsaWMgdW5pdE9mUHJlc2VudGF0aW9uPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBxdWFudGl0eSBvciBcImNvdW50IG51bWJlclwiIG9mIHRoZSBtYW51ZmFjdHVyZWQgaXRlbS5cclxuICAgKi9cclxuICBwdWJsaWMgcXVhbnRpdHk6IGZoaXIuUXVhbnRpdHl8bnVsbDtcclxuICAvKipcclxuICAgKiBNYW51ZmFjdHVyZXIgb2YgdGhlIGl0ZW0gKE5vdGUgdGhhdCB0aGlzIHNob3VsZCBiZSBuYW1lZCBcIm1hbnVmYWN0dXJlclwiIGJ1dCBpdCBjdXJyZW50bHkgY2F1c2VzIHRlY2huaWNhbCBpc3N1ZXMpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtYW51ZmFjdHVyZXI/OiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIEluZ3JlZGllbnQuXHJcbiAgICovXHJcbiAgcHVibGljIGluZ3JlZGllbnQ/OiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIERpbWVuc2lvbnMsIGNvbG9yIGV0Yy5cclxuICAgKi9cclxuICBwdWJsaWMgcGh5c2ljYWxDaGFyYWN0ZXJpc3RpY3M/OiBmaGlyLlByb2RDaGFyYWN0ZXJpc3RpY3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogT3RoZXIgY29kZWFibGUgY2hhcmFjdGVyaXN0aWNzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdGhlckNoYXJhY3RlcmlzdGljcz86IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgTWVkaWNpbmFsUHJvZHVjdE1hbnVmYWN0dXJlZCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE1lZGljaW5hbFByb2R1Y3RNYW51ZmFjdHVyZWRBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnTWVkaWNpbmFsUHJvZHVjdE1hbnVmYWN0dXJlZCc7XHJcbiAgICBpZiAoc291cmNlWydtYW51ZmFjdHVyZWREb3NlRm9ybSddKSB7IHRoaXMubWFudWZhY3R1cmVkRG9zZUZvcm0gPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLm1hbnVmYWN0dXJlZERvc2VGb3JtKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubWFudWZhY3R1cmVkRG9zZUZvcm0gPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWyd1bml0T2ZQcmVzZW50YXRpb24nXSkgeyB0aGlzLnVuaXRPZlByZXNlbnRhdGlvbiA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UudW5pdE9mUHJlc2VudGF0aW9uKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncXVhbnRpdHknXSkgeyB0aGlzLnF1YW50aXR5ID0gbmV3IGZoaXIuUXVhbnRpdHkoc291cmNlLnF1YW50aXR5KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucXVhbnRpdHkgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydtYW51ZmFjdHVyZXInXSkgeyB0aGlzLm1hbnVmYWN0dXJlciA9IHNvdXJjZS5tYW51ZmFjdHVyZXIubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5tYW51ZmFjdHVyZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaW5ncmVkaWVudCddKSB7IHRoaXMuaW5ncmVkaWVudCA9IHNvdXJjZS5pbmdyZWRpZW50Lm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaW5ncmVkaWVudCA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwaHlzaWNhbENoYXJhY3RlcmlzdGljcyddKSB7IHRoaXMucGh5c2ljYWxDaGFyYWN0ZXJpc3RpY3MgPSBuZXcgZmhpci5Qcm9kQ2hhcmFjdGVyaXN0aWMoc291cmNlLnBoeXNpY2FsQ2hhcmFjdGVyaXN0aWNzKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnb3RoZXJDaGFyYWN0ZXJpc3RpY3MnXSkgeyB0aGlzLm90aGVyQ2hhcmFjdGVyaXN0aWNzID0gc291cmNlLm90aGVyQ2hhcmFjdGVyaXN0aWNzLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMub3RoZXJDaGFyYWN0ZXJpc3RpY3MgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKCF0aGlzWydyZXNvdXJjZVR5cGUnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCAgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHJlc291cmNlVHlwZTpcIk1lZGljaW5hbFByb2R1Y3RNYW51ZmFjdHVyZWRcIiBmaGlyOiBNZWRpY2luYWxQcm9kdWN0TWFudWZhY3R1cmVkLnJlc291cmNlVHlwZTpcIk1lZGljaW5hbFByb2R1Y3RNYW51ZmFjdHVyZWRcIicsIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCF0aGlzWydtYW51ZmFjdHVyZWREb3NlRm9ybSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsICBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgbWFudWZhY3R1cmVkRG9zZUZvcm06Zmhpci5Db2RlYWJsZUNvbmNlcHQgZmhpcjogTWVkaWNpbmFsUHJvZHVjdE1hbnVmYWN0dXJlZC5tYW51ZmFjdHVyZWREb3NlRm9ybTpDb2RlYWJsZUNvbmNlcHQnLCB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wibWFudWZhY3R1cmVkRG9zZUZvcm1cIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5tYW51ZmFjdHVyZWREb3NlRm9ybS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJ1bml0T2ZQcmVzZW50YXRpb25cIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy51bml0T2ZQcmVzZW50YXRpb24uZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICghdGhpc1sncXVhbnRpdHknXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCAgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHF1YW50aXR5OmZoaXIuUXVhbnRpdHkgZmhpcjogTWVkaWNpbmFsUHJvZHVjdE1hbnVmYWN0dXJlZC5xdWFudGl0eTpRdWFudGl0eScsIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJxdWFudGl0eVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnF1YW50aXR5LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcIm1hbnVmYWN0dXJlclwiXSkgeyB0aGlzLm1hbnVmYWN0dXJlci5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wiaW5ncmVkaWVudFwiXSkgeyB0aGlzLmluZ3JlZGllbnQuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcInBoeXNpY2FsQ2hhcmFjdGVyaXN0aWNzXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucGh5c2ljYWxDaGFyYWN0ZXJpc3RpY3MuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wib3RoZXJDaGFyYWN0ZXJpc3RpY3NcIl0pIHsgdGhpcy5vdGhlckNoYXJhY3RlcmlzdGljcy5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbiJdfQ==