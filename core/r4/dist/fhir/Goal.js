// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: Goal
import * as fhir from '../fhir.js';
// @ts-ignore
import { GoalStatusVsValidation } from '../fhirValueSets/GoalStatusVsValidation.js';
/**
 * When multiple targets are present for a single goal instance, all targets must be met for the overall goal to be met.
 */
export class GoalTarget extends fhir.BackboneElement {
    /**
     * Default constructor for GoalTarget - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['measure']) {
            this.measure = new fhir.CodeableConcept(source.measure);
        }
        if (source['detail']) {
            this.detail = source.detail;
        }
        else if (source['detailQuantity']) {
            this.detail = new fhir.Quantity(source.detailQuantity);
        }
        else if (source['detailRange']) {
            this.detail = new fhir.Range(source.detailRange);
        }
        else if (source['detailCodeableConcept']) {
            this.detail = new fhir.CodeableConcept(source.detailCodeableConcept);
        }
        else if (source['detailString']) {
            this.detail = new fhir.FhirString({ value: source.detailString });
        }
        else if (source['detailBoolean']) {
            this.detail = new fhir.FhirBoolean({ value: source.detailBoolean });
        }
        else if (source['detailInteger']) {
            this.detail = new fhir.FhirInteger({ value: source.detailInteger });
        }
        else if (source['detailRatio']) {
            this.detail = new fhir.Ratio(source.detailRatio);
        }
        if (source['due']) {
            this.due = source.due;
        }
        else if (source['dueDate']) {
            this.due = new fhir.FhirDate({ value: source.dueDate });
        }
        else if (source['dueDuration']) {
            this.due = new fhir.Duration(source.dueDuration);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'Goal.target';
        }
        this.vOptS('measure', expression);
        this.vOptS('detail', expression);
        this.vOptS('due', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
GoalTarget._fts_dataType = 'GoalTarget';
/**
 * Internal flag to properly serialize choice-type element Goal.target.detail[x]
 */
GoalTarget._fts_detailIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element Goal.target.due[x]
 */
GoalTarget._fts_dueIsChoice = true;
/**
 * Describes the intended objective(s) for a patient, group or organization care, for example, weight loss, restoring an activity of daily living, obtaining herd immunity via immunization, meeting a process improvement objective, etc.
 */
export class Goal extends fhir.DomainResource {
    /**
     * Default constructor for Goal - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'Goal';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['lifecycleStatus']) {
            this.lifecycleStatus = new fhir.FhirCode({ value: source.lifecycleStatus });
        }
        else {
            this.lifecycleStatus = null;
        }
        if (source['_lifecycleStatus']) {
            if (this.lifecycleStatus) {
                this.lifecycleStatus.addExtendedProperties(source._lifecycleStatus);
            }
            else {
                this.lifecycleStatus = new fhir.FhirCode(source._lifecycleStatus);
            }
        }
        if (source['achievementStatus']) {
            this.achievementStatus = new fhir.CodeableConcept(source.achievementStatus);
        }
        if (source['category']) {
            this.category = source.category.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.category = [];
        }
        if (source['priority']) {
            this.priority = new fhir.CodeableConcept(source.priority);
        }
        if (source['description']) {
            this.description = new fhir.CodeableConcept(source.description);
        }
        else {
            this.description = null;
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject);
        }
        else {
            this.subject = null;
        }
        if (source['start']) {
            this.start = source.start;
        }
        else if (source['startDate']) {
            this.start = new fhir.FhirDate({ value: source.startDate });
        }
        else if (source['startCodeableConcept']) {
            this.start = new fhir.CodeableConcept(source.startCodeableConcept);
        }
        if (source['target']) {
            this.target = source.target.map((x) => new fhir.GoalTarget(x));
        }
        else {
            this.target = [];
        }
        if (source['statusDate']) {
            this.statusDate = new fhir.FhirDate({ value: source.statusDate });
        }
        if (source['_statusDate']) {
            if (this.statusDate) {
                this.statusDate.addExtendedProperties(source._statusDate);
            }
            else {
                this.statusDate = new fhir.FhirDate(source._statusDate);
            }
        }
        if (source['statusReason']) {
            this.statusReason = new fhir.FhirString({ value: source.statusReason });
        }
        if (source['_statusReason']) {
            if (this.statusReason) {
                this.statusReason.addExtendedProperties(source._statusReason);
            }
            else {
                this.statusReason = new fhir.FhirString(source._statusReason);
            }
        }
        if (source['expressedBy']) {
            this.expressedBy = new fhir.Reference(source.expressedBy);
        }
        if (source['addresses']) {
            this.addresses = source.addresses.map((x) => new fhir.Reference(x));
        }
        else {
            this.addresses = [];
        }
        if (source['note']) {
            this.note = source.note.map((x) => new fhir.Annotation(x));
        }
        else {
            this.note = [];
        }
        if (source['outcomeCode']) {
            this.outcomeCode = source.outcomeCode.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.outcomeCode = [];
        }
        if (source['outcomeReference']) {
            this.outcomeReference = source.outcomeReference.map((x) => new fhir.Reference(x));
        }
        else {
            this.outcomeReference = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'Goal';
        }
        this.vReqS('resourceType', expression);
        this.vOptA('identifier', expression);
        this.vReqSV('lifecycleStatus', expression, 'GoalStatus', GoalStatusVsValidation, 'r');
        this.vOptS('achievementStatus', expression);
        this.vOptA('category', expression);
        this.vOptS('priority', expression);
        this.vReqS('description', expression);
        this.vReqS('subject', expression);
        this.vOptS('start', expression);
        this.vOptA('target', expression);
        this.vOptS('statusDate', expression);
        this.vOptS('statusReason', expression);
        this.vOptS('expressedBy', expression);
        this.vOptA('addresses', expression);
        this.vOptA('note', expression);
        this.vOptA('outcomeCode', expression);
        this.vOptA('outcomeReference', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
Goal._fts_dataType = 'Goal';
/**
 * Internal flag to properly serialize choice-type element Goal.start[x]
 */
Goal._fts_startIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR29hbC5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvR29hbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQyxzQkFBc0I7QUFFdEIsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFRbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLDRDQUE0QyxDQUFDO0FBdUVwRjs7R0FFRztBQUNILE1BQU0sT0FBTyxVQUFXLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUF5QmxEOztPQUVHO0lBQ0gsWUFBWSxTQUFpQyxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUN2RixLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1NBQUU7UUFDbkYsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7U0FBRTthQUNqRCxJQUFJLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1NBQUU7YUFDekYsSUFBSSxNQUFNLENBQUMsYUFBYSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUM7U0FBRTthQUNoRixJQUFJLE1BQU0sQ0FBQyx1QkFBdUIsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLElBQUksQ0FB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Q3pDLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBcEpEOztHQUVHO0FBQzZCLGtCQUFhLEdBQVUsTUFBTSxDQUFDO0FBc0M5RDs7R0FFRztBQUN1Qix1QkFBa0IsR0FBUSxJQUFJLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjQuY29yZSB2ZXJzaW9uOiA0LjAuMVxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IEdvYWxcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE9ic2VydmF0aW9uQ29kZXMsICBPYnNlcnZhdGlvbkNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9PYnNlcnZhdGlvbkNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBPYnNlcnZhdGlvblZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvT2JzZXJ2YXRpb25Wc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEdvYWxTdGF0dXNDb2RlcywgIEdvYWxTdGF0dXNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvR29hbFN0YXR1c0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBHb2FsU3RhdHVzVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Hb2FsU3RhdHVzVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBHb2FsQWNoaWV2ZW1lbnRDb2RlcywgIEdvYWxBY2hpZXZlbWVudENvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Hb2FsQWNoaWV2ZW1lbnRDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgR29hbEFjaGlldmVtZW50VnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Hb2FsQWNoaWV2ZW1lbnRWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEdvYWxDYXRlZ29yeUNvZGVzLCAgR29hbENhdGVnb3J5Q29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0dvYWxDYXRlZ29yeUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBHb2FsQ2F0ZWdvcnlWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0dvYWxDYXRlZ29yeVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgR29hbFByaW9yaXR5Q29kZXMsICBHb2FsUHJpb3JpdHlDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvR29hbFByaW9yaXR5Q29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEdvYWxQcmlvcml0eVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvR29hbFByaW9yaXR5VnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDbGluaWNhbEZpbmRpbmdzQ29kZXMsICBDbGluaWNhbEZpbmRpbmdzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NsaW5pY2FsRmluZGluZ3NDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ2xpbmljYWxGaW5kaW5nc1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ2xpbmljYWxGaW5kaW5nc1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBHb2FsVGFyZ2V0IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEdvYWxUYXJnZXRBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgcGFyYW1ldGVyIHdob3NlIHZhbHVlIGlzIGJlaW5nIHRyYWNrZWQsIGUuZy4gYm9keSB3ZWlnaHQsIGJsb29kIHByZXNzdXJlLCBvciBoZW1vZ2xvYmluIEExYyBsZXZlbC5cclxuICAgKi9cclxuICBtZWFzdXJlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIENvZGVhYmxlQ29uY2VwdCB3aXRoIGp1c3QgYSB0ZXh0IHdvdWxkIGJlIHVzZWQgaW5zdGVhZCBvZiBhIHN0cmluZyBpZiB0aGUgZmllbGQgd2FzIHVzdWFsbHkgY29kZWQsIG9yIGlmIHRoZSB0eXBlIGFzc29jaWF0ZWQgd2l0aCB0aGUgR29hbC50YXJnZXQubWVhc3VyZSBkZWZpbmVzIGEgY29kZWQgdmFsdWUuXHJcbiAgICovXHJcbiAgZGV0YWlsPzogZmhpci5RdWFudGl0eXxmaGlyLlJhbmdlfGZoaXIuQ29kZWFibGVDb25jZXB0fGZoaXIuRmhpclN0cmluZ3xmaGlyLkZoaXJCb29sZWFufGZoaXIuRmhpckludGVnZXJ8Zmhpci5SYXRpb3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBDb2RlYWJsZUNvbmNlcHQgd2l0aCBqdXN0IGEgdGV4dCB3b3VsZCBiZSB1c2VkIGluc3RlYWQgb2YgYSBzdHJpbmcgaWYgdGhlIGZpZWxkIHdhcyB1c3VhbGx5IGNvZGVkLCBvciBpZiB0aGUgdHlwZSBhc3NvY2lhdGVkIHdpdGggdGhlIEdvYWwudGFyZ2V0Lm1lYXN1cmUgZGVmaW5lcyBhIGNvZGVkIHZhbHVlLlxyXG4gICAqL1xyXG4gIGRldGFpbFF1YW50aXR5PzogZmhpci5RdWFudGl0eUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgQ29kZWFibGVDb25jZXB0IHdpdGgganVzdCBhIHRleHQgd291bGQgYmUgdXNlZCBpbnN0ZWFkIG9mIGEgc3RyaW5nIGlmIHRoZSBmaWVsZCB3YXMgdXN1YWxseSBjb2RlZCwgb3IgaWYgdGhlIHR5cGUgYXNzb2NpYXRlZCB3aXRoIHRoZSBHb2FsLnRhcmdldC5tZWFzdXJlIGRlZmluZXMgYSBjb2RlZCB2YWx1ZS5cclxuICAgKi9cclxuICBkZXRhaWxSYW5nZT86IGZoaXIuUmFuZ2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIENvZGVhYmxlQ29uY2VwdCB3aXRoIGp1c3QgYSB0ZXh0IHdvdWxkIGJlIHVzZWQgaW5zdGVhZCBvZiBhIHN0cmluZyBpZiB0aGUgZmllbGQgd2FzIHVzdWFsbHkgY29kZWQsIG9yIGlmIHRoZSB0eXBlIGFzc29jaWF0ZWQgd2l0aCB0aGUgR29hbC50YXJnZXQubWVhc3VyZSBkZWZpbmVzIGEgY29kZWQgdmFsdWUuXHJcbiAgICovXHJcbiAgZGV0YWlsQ29kZWFibGVDb25jZXB0PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIENvZGVhYmxlQ29uY2VwdCB3aXRoIGp1c3QgYSB0ZXh0IHdvdWxkIGJlIHVzZWQgaW5zdGVhZCBvZiBhIHN0cmluZyBpZiB0aGUgZmllbGQgd2FzIHVzdWFsbHkgY29kZWQsIG9yIGlmIHRoZSB0eXBlIGFzc29jaWF0ZWQgd2l0aCB0aGUgR29hbC50YXJnZXQubWVhc3VyZSBkZWZpbmVzIGEgY29kZWQgdmFsdWUuXHJcbiAgICovXHJcbiAgZGV0YWlsU3RyaW5nPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBDb2RlYWJsZUNvbmNlcHQgd2l0aCBqdXN0IGEgdGV4dCB3b3VsZCBiZSB1c2VkIGluc3RlYWQgb2YgYSBzdHJpbmcgaWYgdGhlIGZpZWxkIHdhcyB1c3VhbGx5IGNvZGVkLCBvciBpZiB0aGUgdHlwZSBhc3NvY2lhdGVkIHdpdGggdGhlIEdvYWwudGFyZ2V0Lm1lYXN1cmUgZGVmaW5lcyBhIGNvZGVkIHZhbHVlLlxyXG4gICAqL1xyXG4gIGRldGFpbEJvb2xlYW4/OiBmaGlyLkZoaXJCb29sZWFufGJvb2xlYW58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgQ29kZWFibGVDb25jZXB0IHdpdGgganVzdCBhIHRleHQgd291bGQgYmUgdXNlZCBpbnN0ZWFkIG9mIGEgc3RyaW5nIGlmIHRoZSBmaWVsZCB3YXMgdXN1YWxseSBjb2RlZCwgb3IgaWYgdGhlIHR5cGUgYXNzb2NpYXRlZCB3aXRoIHRoZSBHb2FsLnRhcmdldC5tZWFzdXJlIGRlZmluZXMgYSBjb2RlZCB2YWx1ZS5cclxuICAgKi9cclxuICBkZXRhaWxJbnRlZ2VyPzogZmhpci5GaGlySW50ZWdlcnxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgQ29kZWFibGVDb25jZXB0IHdpdGgganVzdCBhIHRleHQgd291bGQgYmUgdXNlZCBpbnN0ZWFkIG9mIGEgc3RyaW5nIGlmIHRoZSBmaWVsZCB3YXMgdXN1YWxseSBjb2RlZCwgb3IgaWYgdGhlIHR5cGUgYXNzb2NpYXRlZCB3aXRoIHRoZSBHb2FsLnRhcmdldC5tZWFzdXJlIGRlZmluZXMgYSBjb2RlZCB2YWx1ZS5cclxuICAgKi9cclxuICBkZXRhaWxSYXRpbz86IGZoaXIuUmF0aW9BcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgZWl0aGVyIHRoZSBkYXRlIG9yIHRoZSBkdXJhdGlvbiBhZnRlciBzdGFydCBieSB3aGljaCB0aGUgZ29hbCBzaG91bGQgYmUgbWV0LlxyXG4gICAqL1xyXG4gIGR1ZT86IGZoaXIuRmhpckRhdGV8Zmhpci5EdXJhdGlvbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIGVpdGhlciB0aGUgZGF0ZSBvciB0aGUgZHVyYXRpb24gYWZ0ZXIgc3RhcnQgYnkgd2hpY2ggdGhlIGdvYWwgc2hvdWxkIGJlIG1ldC5cclxuICAgKi9cclxuICBkdWVEYXRlPzogZmhpci5GaGlyRGF0ZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyBlaXRoZXIgdGhlIGRhdGUgb3IgdGhlIGR1cmF0aW9uIGFmdGVyIHN0YXJ0IGJ5IHdoaWNoIHRoZSBnb2FsIHNob3VsZCBiZSBtZXQuXHJcbiAgICovXHJcbiAgZHVlRHVyYXRpb24/OiBmaGlyLkR1cmF0aW9uQXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBXaGVuIG11bHRpcGxlIHRhcmdldHMgYXJlIHByZXNlbnQgZm9yIGEgc2luZ2xlIGdvYWwgaW5zdGFuY2UsIGFsbCB0YXJnZXRzIG11c3QgYmUgbWV0IGZvciB0aGUgb3ZlcmFsbCBnb2FsIHRvIGJlIG1ldC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBHb2FsVGFyZ2V0IGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnR29hbFRhcmdldCc7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBhcmFtZXRlciB3aG9zZSB2YWx1ZSBpcyBiZWluZyB0cmFja2VkLCBlLmcuIGJvZHkgd2VpZ2h0LCBibG9vZCBwcmVzc3VyZSwgb3IgaGVtb2dsb2JpbiBBMWMgbGV2ZWwuXHJcbiAgICovXHJcbiAgcHVibGljIG1lYXN1cmU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBDb2RlYWJsZUNvbmNlcHQgd2l0aCBqdXN0IGEgdGV4dCB3b3VsZCBiZSB1c2VkIGluc3RlYWQgb2YgYSBzdHJpbmcgaWYgdGhlIGZpZWxkIHdhcyB1c3VhbGx5IGNvZGVkLCBvciBpZiB0aGUgdHlwZSBhc3NvY2lhdGVkIHdpdGggdGhlIEdvYWwudGFyZ2V0Lm1lYXN1cmUgZGVmaW5lcyBhIGNvZGVkIHZhbHVlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZXRhaWw/OiAoZmhpci5RdWFudGl0eXxmaGlyLlJhbmdlfGZoaXIuQ29kZWFibGVDb25jZXB0fGZoaXIuRmhpclN0cmluZ3xmaGlyLkZoaXJCb29sZWFufGZoaXIuRmhpckludGVnZXJ8Zmhpci5SYXRpbyl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgR29hbC50YXJnZXQuZGV0YWlsW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX2RldGFpbElzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyBlaXRoZXIgdGhlIGRhdGUgb3IgdGhlIGR1cmF0aW9uIGFmdGVyIHN0YXJ0IGJ5IHdoaWNoIHRoZSBnb2FsIHNob3VsZCBiZSBtZXQuXHJcbiAgICovXHJcbiAgcHVibGljIGR1ZT86IChmaGlyLkZoaXJEYXRlfGZoaXIuRHVyYXRpb24pfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IEdvYWwudGFyZ2V0LmR1ZVt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c19kdWVJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBHb2FsVGFyZ2V0IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8R29hbFRhcmdldEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydtZWFzdXJlJ10pIHsgdGhpcy5tZWFzdXJlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5tZWFzdXJlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGV0YWlsJ10pIHsgdGhpcy5kZXRhaWwgPSBzb3VyY2UuZGV0YWlsOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2RldGFpbFF1YW50aXR5J10pIHsgdGhpcy5kZXRhaWwgPSBuZXcgZmhpci5RdWFudGl0eShzb3VyY2UuZGV0YWlsUXVhbnRpdHkpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2RldGFpbFJhbmdlJ10pIHsgdGhpcy5kZXRhaWwgPSBuZXcgZmhpci5SYW5nZShzb3VyY2UuZGV0YWlsUmFuZ2UpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2RldGFpbENvZGVhYmxlQ29uY2VwdCddKSB7IHRoaXMuZGV0YWlsID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5kZXRhaWxDb2RlYWJsZUNvbmNlcHQpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2RldGFpbFN0cmluZyddKSB7IHRoaXMuZGV0YWlsID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5kZXRhaWxTdHJpbmd9KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydkZXRhaWxCb29sZWFuJ10pIHsgdGhpcy5kZXRhaWwgPSBuZXcgZmhpci5GaGlyQm9vbGVhbih7dmFsdWU6IHNvdXJjZS5kZXRhaWxCb29sZWFufSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnZGV0YWlsSW50ZWdlciddKSB7IHRoaXMuZGV0YWlsID0gbmV3IGZoaXIuRmhpckludGVnZXIoe3ZhbHVlOiBzb3VyY2UuZGV0YWlsSW50ZWdlcn0pOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2RldGFpbFJhdGlvJ10pIHsgdGhpcy5kZXRhaWwgPSBuZXcgZmhpci5SYXRpbyhzb3VyY2UuZGV0YWlsUmF0aW8pOyB9XHJcbiAgICBpZiAoc291cmNlWydkdWUnXSkgeyB0aGlzLmR1ZSA9IHNvdXJjZS5kdWU7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnZHVlRGF0ZSddKSB7IHRoaXMuZHVlID0gbmV3IGZoaXIuRmhpckRhdGUoe3ZhbHVlOiBzb3VyY2UuZHVlRGF0ZX0pOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2R1ZUR1cmF0aW9uJ10pIHsgdGhpcy5kdWUgPSBuZXcgZmhpci5EdXJhdGlvbihzb3VyY2UuZHVlRHVyYXRpb24pOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKTtcclxuICAgIGlmIChleHByZXNzaW9uID09PSAnJykgeyBleHByZXNzaW9uID0gJ0dvYWwudGFyZ2V0JyB9XHJcbiAgICB0aGlzLnZPcHRTKCdtZWFzdXJlJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnZGV0YWlsJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnZHVlJyxleHByZXNzaW9uKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEdvYWwgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgR29hbEFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIkdvYWxcInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBhIGJ1c2luZXNzIGlkZW50aWZpZXIsIG5vdCBhIHJlc291cmNlIGlkZW50aWZpZXIgKHNlZSBbZGlzY3Vzc2lvbl0ocmVzb3VyY2UuaHRtbCNpZGVudGlmaWVycykpLiAgSXQgaXMgYmVzdCBwcmFjdGljZSBmb3IgdGhlIGlkZW50aWZpZXIgdG8gb25seSBhcHBlYXIgb24gYSBzaW5nbGUgcmVzb3VyY2UgaW5zdGFuY2UsIGhvd2V2ZXIgYnVzaW5lc3MgcHJhY3RpY2VzIG1heSBvY2Nhc2lvbmFsbHkgZGljdGF0ZSB0aGF0IG11bHRpcGxlIHJlc291cmNlIGluc3RhbmNlcyB3aXRoIHRoZSBzYW1lIGlkZW50aWZpZXIgY2FuIGV4aXN0IC0gcG9zc2libHkgZXZlbiB3aXRoIGRpZmZlcmVudCByZXNvdXJjZSB0eXBlcy4gIEZvciBleGFtcGxlLCBtdWx0aXBsZSBQYXRpZW50IGFuZCBhIFBlcnNvbiByZXNvdXJjZSBpbnN0YW5jZSBtaWdodCBzaGFyZSB0aGUgc2FtZSBzb2NpYWwgaW5zdXJhbmNlIG51bWJlci5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIGJlY2F1c2UgdGhlIGxpZmVjeWNsZVN0YXR1cyBjb250YWlucyBjb2RlcyB0aGF0IG1hcmsgdGhlIHJlc291cmNlIGFzIG5vdCBjdXJyZW50bHkgdmFsaWQuXHJcbiAgICovXHJcbiAgbGlmZWN5Y2xlU3RhdHVzOiBmaGlyLkZoaXJDb2RlPEdvYWxTdGF0dXNDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogR29hbC5saWZlY3ljbGVTdGF0dXNcclxuICAgKi9cclxuICBfbGlmZWN5Y2xlU3RhdHVzPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgdGhlIHByb2dyZXNzaW9uLCBvciBsYWNrIHRoZXJlb2YsIHRvd2FyZHMgdGhlIGdvYWwgYWdhaW5zdCB0aGUgdGFyZ2V0LlxyXG4gICAqL1xyXG4gIGFjaGlldmVtZW50U3RhdHVzPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgYSBjYXRlZ29yeSB0aGUgZ29hbCBmYWxscyB3aXRoaW4uXHJcbiAgICovXHJcbiAgY2F0ZWdvcnk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5zaW9ucyBhcmUgYXZhaWxhYmxlIHRvIHRyYWNrIHByaW9yaXRpZXMgYXMgZXN0YWJsaXNoZWQgYnkgZWFjaCBwYXJ0aWNpcGFudCAoaS5lLiBQcmlvcml0eSBmcm9tIHRoZSBwYXRpZW50J3MgcGVyc3BlY3RpdmUsIGRpZmZlcmVudCBwcmFjdGl0aW9uZXJzJyBwZXJzcGVjdGl2ZXMsIGZhbWlseSBtZW1iZXIncyBwZXJzcGVjdGl2ZXMpXHJcbiAgICogVGhlIG9yZGluYWwgZXh0ZW5zaW9uIG9uIENvZGluZyBjYW4gYmUgdXNlZCB0byBjb252ZXkgYSBudW1lcmljYWxseSBjb21wYXJhYmxlIHJhbmtpbmcgdG8gcHJpb3JpdHkuICAoS2VlcCBpbiBtaW5kIHRoYXQgZGlmZmVyZW50IGNvZGluZyBzeXN0ZW1zIG1heSB1c2UgYSBcImxvdyB2YWx1ZT1pbXBvcnRhbnRcIi5cclxuICAgKi9cclxuICBwcmlvcml0eT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgbm8gY29kZSBpcyBhdmFpbGFibGUsIHVzZSBDb2RlYWJsZUNvbmNlcHQudGV4dC5cclxuICAgKi9cclxuICBkZXNjcmlwdGlvbjogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgcGF0aWVudCwgZ3JvdXAgb3Igb3JnYW5pemF0aW9uIGZvciB3aG9tIHRoZSBnb2FsIGlzIGJlaW5nIGVzdGFibGlzaGVkLlxyXG4gICAqL1xyXG4gIHN1YmplY3Q6IGZoaXIuUmVmZXJlbmNlQXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRlIG9yIGV2ZW50IGFmdGVyIHdoaWNoIHRoZSBnb2FsIHNob3VsZCBiZWdpbiBiZWluZyBwdXJzdWVkLlxyXG4gICAqL1xyXG4gIHN0YXJ0PzogZmhpci5GaGlyRGF0ZXxmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgb3IgZXZlbnQgYWZ0ZXIgd2hpY2ggdGhlIGdvYWwgc2hvdWxkIGJlZ2luIGJlaW5nIHB1cnN1ZWQuXHJcbiAgICovXHJcbiAgc3RhcnREYXRlPzogZmhpci5GaGlyRGF0ZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRlIG9yIGV2ZW50IGFmdGVyIHdoaWNoIHRoZSBnb2FsIHNob3VsZCBiZWdpbiBiZWluZyBwdXJzdWVkLlxyXG4gICAqL1xyXG4gIHN0YXJ0Q29kZWFibGVDb25jZXB0PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBXaGVuIG11bHRpcGxlIHRhcmdldHMgYXJlIHByZXNlbnQgZm9yIGEgc2luZ2xlIGdvYWwgaW5zdGFuY2UsIGFsbCB0YXJnZXRzIG11c3QgYmUgbWV0IGZvciB0aGUgb3ZlcmFsbCBnb2FsIHRvIGJlIG1ldC5cclxuICAgKi9cclxuICB0YXJnZXQ/OiBmaGlyLkdvYWxUYXJnZXRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRvIHNlZSB0aGUgZGF0ZSBmb3IgcGFzdCBzdGF0dXNlcywgcXVlcnkgaGlzdG9yeS5cclxuICAgKi9cclxuICBzdGF0dXNEYXRlPzogZmhpci5GaGlyRGF0ZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBHb2FsLnN0YXR1c0RhdGVcclxuICAgKi9cclxuICBfc3RhdHVzRGF0ZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhpcyB3aWxsIHR5cGljYWxseSBiZSBjYXB0dXJlZCBmb3Igc3RhdHVzZXMgc3VjaCBhcyByZWplY3RlZCwgb24taG9sZCBvciBjYW5jZWxsZWQsIGJ1dCBjb3VsZCBiZSBwcmVzZW50IGZvciBvdGhlcnMuXHJcbiAgICovXHJcbiAgc3RhdHVzUmVhc29uPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEdvYWwuc3RhdHVzUmVhc29uXHJcbiAgICovXHJcbiAgX3N0YXR1c1JlYXNvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyB0aGUgaW5kaXZpZHVhbCByZXNwb25zaWJsZSBmb3IgZXN0YWJsaXNoaW5nIHRoZSBnb2FsLCBub3QgbmVjZXNzYXJpbHkgd2hvIHJlY29yZGVkIGl0LiAgKEZvciB0aGF0LCB1c2UgdGhlIFByb3ZlbmFuY2UgcmVzb3VyY2UuKS5cclxuICAgKi9cclxuICBleHByZXNzZWRCeT86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGlkZW50aWZpZWQgY29uZGl0aW9ucyBhbmQgb3RoZXIgaGVhbHRoIHJlY29yZCBlbGVtZW50cyB0aGF0IGFyZSBpbnRlbmRlZCB0byBiZSBhZGRyZXNzZWQgYnkgdGhlIGdvYWwuXHJcbiAgICovXHJcbiAgYWRkcmVzc2VzPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE1heSBiZSB1c2VkIGZvciBwcm9ncmVzcyBub3RlcywgY29uY2VybnMgb3Igb3RoZXIgcmVsYXRlZCBpbmZvcm1hdGlvbiB0aGF0IGRvZXNuJ3QgYWN0dWFsbHkgZGVzY3JpYmUgdGhlIGdvYWwgaXRzZWxmLlxyXG4gICAqL1xyXG4gIG5vdGU/OiBmaGlyLkFubm90YXRpb25BcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE5vdGUgdGhhdCB0aGlzIHNob3VsZCBub3QgZHVwbGljYXRlIHRoZSBnb2FsIHN0YXR1cy5cclxuICAgKi9cclxuICBvdXRjb21lQ29kZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZ29hbCBvdXRjb21lIGlzIGluZGVwZW5kZW50IG9mIHRoZSBvdXRjb21lIG9mIHRoZSByZWxhdGVkIGFjdGl2aXRpZXMuICBGb3IgZXhhbXBsZSwgaWYgdGhlIEdvYWwgaXMgdG8gYWNoaWV2ZSBhIHRhcmdldCBib2R5IHdlaWdodCBvZiAxNTAgbGIgYW5kIGEgY2FyZSBwbGFuIGFjdGl2aXR5IGlzIGRlZmluZWQgdG8gZGlldCwgdGhlbiB0aGUgY2FyZSBwbGFu4oCZcyBhY3Rpdml0eSBvdXRjb21lIGNvdWxkIGJlIGNhbG9yaWVzIGNvbnN1bWVkIHdoZXJlYXMgZ29hbCBvdXRjb21lIGlzIGFuIG9ic2VydmF0aW9uIGZvciB0aGUgYWN0dWFsIGJvZHkgd2VpZ2h0IG1lYXN1cmVkLlxyXG4gICAqL1xyXG4gIG91dGNvbWVSZWZlcmVuY2U/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEZXNjcmliZXMgdGhlIGludGVuZGVkIG9iamVjdGl2ZShzKSBmb3IgYSBwYXRpZW50LCBncm91cCBvciBvcmdhbml6YXRpb24gY2FyZSwgZm9yIGV4YW1wbGUsIHdlaWdodCBsb3NzLCByZXN0b3JpbmcgYW4gYWN0aXZpdHkgb2YgZGFpbHkgbGl2aW5nLCBvYnRhaW5pbmcgaGVyZCBpbW11bml0eSB2aWEgaW1tdW5pemF0aW9uLCBtZWV0aW5nIGEgcHJvY2VzcyBpbXByb3ZlbWVudCBvYmplY3RpdmUsIGV0Yy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBHb2FsIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdHb2FsJztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIkdvYWxcIjtcclxuICAvKipcclxuICAgKiBUaGlzIGlzIGEgYnVzaW5lc3MgaWRlbnRpZmllciwgbm90IGEgcmVzb3VyY2UgaWRlbnRpZmllciAoc2VlIFtkaXNjdXNzaW9uXShyZXNvdXJjZS5odG1sI2lkZW50aWZpZXJzKSkuICBJdCBpcyBiZXN0IHByYWN0aWNlIGZvciB0aGUgaWRlbnRpZmllciB0byBvbmx5IGFwcGVhciBvbiBhIHNpbmdsZSByZXNvdXJjZSBpbnN0YW5jZSwgaG93ZXZlciBidXNpbmVzcyBwcmFjdGljZXMgbWF5IG9jY2FzaW9uYWxseSBkaWN0YXRlIHRoYXQgbXVsdGlwbGUgcmVzb3VyY2UgaW5zdGFuY2VzIHdpdGggdGhlIHNhbWUgaWRlbnRpZmllciBjYW4gZXhpc3QgLSBwb3NzaWJseSBldmVuIHdpdGggZGlmZmVyZW50IHJlc291cmNlIHR5cGVzLiAgRm9yIGV4YW1wbGUsIG11bHRpcGxlIFBhdGllbnQgYW5kIGEgUGVyc29uIHJlc291cmNlIGluc3RhbmNlIG1pZ2h0IHNoYXJlIHRoZSBzYW1lIHNvY2lhbCBpbnN1cmFuY2UgbnVtYmVyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyOiBmaGlyLklkZW50aWZpZXJbXTtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIGJlY2F1c2UgdGhlIGxpZmVjeWNsZVN0YXR1cyBjb250YWlucyBjb2RlcyB0aGF0IG1hcmsgdGhlIHJlc291cmNlIGFzIG5vdCBjdXJyZW50bHkgdmFsaWQuXHJcbiAgICovXHJcbiAgcHVibGljIGxpZmVjeWNsZVN0YXR1czogZmhpci5GaGlyQ29kZTxHb2FsU3RhdHVzQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHRoZSBwcm9ncmVzc2lvbiwgb3IgbGFjayB0aGVyZW9mLCB0b3dhcmRzIHRoZSBnb2FsIGFnYWluc3QgdGhlIHRhcmdldC5cclxuICAgKi9cclxuICBwdWJsaWMgYWNoaWV2ZW1lbnRTdGF0dXM/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIGEgY2F0ZWdvcnkgdGhlIGdvYWwgZmFsbHMgd2l0aGluLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjYXRlZ29yeTogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBFeHRlbnNpb25zIGFyZSBhdmFpbGFibGUgdG8gdHJhY2sgcHJpb3JpdGllcyBhcyBlc3RhYmxpc2hlZCBieSBlYWNoIHBhcnRpY2lwYW50IChpLmUuIFByaW9yaXR5IGZyb20gdGhlIHBhdGllbnQncyBwZXJzcGVjdGl2ZSwgZGlmZmVyZW50IHByYWN0aXRpb25lcnMnIHBlcnNwZWN0aXZlcywgZmFtaWx5IG1lbWJlcidzIHBlcnNwZWN0aXZlcylcclxuICAgKiBUaGUgb3JkaW5hbCBleHRlbnNpb24gb24gQ29kaW5nIGNhbiBiZSB1c2VkIHRvIGNvbnZleSBhIG51bWVyaWNhbGx5IGNvbXBhcmFibGUgcmFua2luZyB0byBwcmlvcml0eS4gIChLZWVwIGluIG1pbmQgdGhhdCBkaWZmZXJlbnQgY29kaW5nIHN5c3RlbXMgbWF5IHVzZSBhIFwibG93IHZhbHVlPWltcG9ydGFudFwiLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcmlvcml0eT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiBubyBjb2RlIGlzIGF2YWlsYWJsZSwgdXNlIENvZGVhYmxlQ29uY2VwdC50ZXh0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZXNjcmlwdGlvbjogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHRoZSBwYXRpZW50LCBncm91cCBvciBvcmdhbml6YXRpb24gZm9yIHdob20gdGhlIGdvYWwgaXMgYmVpbmcgZXN0YWJsaXNoZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHN1YmplY3Q6IGZoaXIuUmVmZXJlbmNlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgb3IgZXZlbnQgYWZ0ZXIgd2hpY2ggdGhlIGdvYWwgc2hvdWxkIGJlZ2luIGJlaW5nIHB1cnN1ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXJ0PzogKGZoaXIuRmhpckRhdGV8Zmhpci5Db2RlYWJsZUNvbmNlcHQpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IEdvYWwuc3RhcnRbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfc3RhcnRJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBXaGVuIG11bHRpcGxlIHRhcmdldHMgYXJlIHByZXNlbnQgZm9yIGEgc2luZ2xlIGdvYWwgaW5zdGFuY2UsIGFsbCB0YXJnZXRzIG11c3QgYmUgbWV0IGZvciB0aGUgb3ZlcmFsbCBnb2FsIHRvIGJlIG1ldC5cclxuICAgKi9cclxuICBwdWJsaWMgdGFyZ2V0OiBmaGlyLkdvYWxUYXJnZXRbXTtcclxuICAvKipcclxuICAgKiBUbyBzZWUgdGhlIGRhdGUgZm9yIHBhc3Qgc3RhdHVzZXMsIHF1ZXJ5IGhpc3RvcnkuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1c0RhdGU/OiBmaGlyLkZoaXJEYXRlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIHdpbGwgdHlwaWNhbGx5IGJlIGNhcHR1cmVkIGZvciBzdGF0dXNlcyBzdWNoIGFzIHJlamVjdGVkLCBvbi1ob2xkIG9yIGNhbmNlbGxlZCwgYnV0IGNvdWxkIGJlIHByZXNlbnQgZm9yIG90aGVycy5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdHVzUmVhc29uPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGlzIHRoZSBpbmRpdmlkdWFsIHJlc3BvbnNpYmxlIGZvciBlc3RhYmxpc2hpbmcgdGhlIGdvYWwsIG5vdCBuZWNlc3NhcmlseSB3aG8gcmVjb3JkZWQgaXQuICAoRm9yIHRoYXQsIHVzZSB0aGUgUHJvdmVuYW5jZSByZXNvdXJjZS4pLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBleHByZXNzZWRCeT86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgaWRlbnRpZmllZCBjb25kaXRpb25zIGFuZCBvdGhlciBoZWFsdGggcmVjb3JkIGVsZW1lbnRzIHRoYXQgYXJlIGludGVuZGVkIHRvIGJlIGFkZHJlc3NlZCBieSB0aGUgZ29hbC5cclxuICAgKi9cclxuICBwdWJsaWMgYWRkcmVzc2VzOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIE1heSBiZSB1c2VkIGZvciBwcm9ncmVzcyBub3RlcywgY29uY2VybnMgb3Igb3RoZXIgcmVsYXRlZCBpbmZvcm1hdGlvbiB0aGF0IGRvZXNuJ3QgYWN0dWFsbHkgZGVzY3JpYmUgdGhlIGdvYWwgaXRzZWxmLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBub3RlOiBmaGlyLkFubm90YXRpb25bXTtcclxuICAvKipcclxuICAgKiBOb3RlIHRoYXQgdGhpcyBzaG91bGQgbm90IGR1cGxpY2F0ZSB0aGUgZ29hbCBzdGF0dXMuXHJcbiAgICovXHJcbiAgcHVibGljIG91dGNvbWVDb2RlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBnb2FsIG91dGNvbWUgaXMgaW5kZXBlbmRlbnQgb2YgdGhlIG91dGNvbWUgb2YgdGhlIHJlbGF0ZWQgYWN0aXZpdGllcy4gIEZvciBleGFtcGxlLCBpZiB0aGUgR29hbCBpcyB0byBhY2hpZXZlIGEgdGFyZ2V0IGJvZHkgd2VpZ2h0IG9mIDE1MCBsYiBhbmQgYSBjYXJlIHBsYW4gYWN0aXZpdHkgaXMgZGVmaW5lZCB0byBkaWV0LCB0aGVuIHRoZSBjYXJlIHBsYW7igJlzIGFjdGl2aXR5IG91dGNvbWUgY291bGQgYmUgY2Fsb3JpZXMgY29uc3VtZWQgd2hlcmVhcyBnb2FsIG91dGNvbWUgaXMgYW4gb2JzZXJ2YXRpb24gZm9yIHRoZSBhY3R1YWwgYm9keSB3ZWlnaHQgbWVhc3VyZWQuXHJcbiAgICovXHJcbiAgcHVibGljIG91dGNvbWVSZWZlcmVuY2U6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgR29hbCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEdvYWxBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnR29hbCc7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gc291cmNlLmlkZW50aWZpZXIubWFwKCh4KSA9PiBuZXcgZmhpci5JZGVudGlmaWVyKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaWRlbnRpZmllciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydsaWZlY3ljbGVTdGF0dXMnXSkgeyB0aGlzLmxpZmVjeWNsZVN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPEdvYWxTdGF0dXNDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2UubGlmZWN5Y2xlU3RhdHVzfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmxpZmVjeWNsZVN0YXR1cyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19saWZlY3ljbGVTdGF0dXMnXSkge1xyXG4gICAgICBpZiAodGhpcy5saWZlY3ljbGVTdGF0dXMpIHsgdGhpcy5saWZlY3ljbGVTdGF0dXMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbGlmZWN5Y2xlU3RhdHVzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubGlmZWN5Y2xlU3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8R29hbFN0YXR1c0NvZGVUeXBlPihzb3VyY2UuX2xpZmVjeWNsZVN0YXR1cyBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnYWNoaWV2ZW1lbnRTdGF0dXMnXSkgeyB0aGlzLmFjaGlldmVtZW50U3RhdHVzID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5hY2hpZXZlbWVudFN0YXR1cyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NhdGVnb3J5J10pIHsgdGhpcy5jYXRlZ29yeSA9IHNvdXJjZS5jYXRlZ29yeS5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNhdGVnb3J5ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3ByaW9yaXR5J10pIHsgdGhpcy5wcmlvcml0eSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UucHJpb3JpdHkpOyB9XHJcbiAgICBpZiAoc291cmNlWydkZXNjcmlwdGlvbiddKSB7IHRoaXMuZGVzY3JpcHRpb24gPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmRlc2NyaXB0aW9uKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZGVzY3JpcHRpb24gPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydzdWJqZWN0J10pIHsgdGhpcy5zdWJqZWN0ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5zdWJqZWN0KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3ViamVjdCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0YXJ0J10pIHsgdGhpcy5zdGFydCA9IHNvdXJjZS5zdGFydDsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydzdGFydERhdGUnXSkgeyB0aGlzLnN0YXJ0ID0gbmV3IGZoaXIuRmhpckRhdGUoe3ZhbHVlOiBzb3VyY2Uuc3RhcnREYXRlfSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnc3RhcnRDb2RlYWJsZUNvbmNlcHQnXSkgeyB0aGlzLnN0YXJ0ID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5zdGFydENvZGVhYmxlQ29uY2VwdCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3RhcmdldCddKSB7IHRoaXMudGFyZ2V0ID0gc291cmNlLnRhcmdldC5tYXAoKHgpID0+IG5ldyBmaGlyLkdvYWxUYXJnZXQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy50YXJnZXQgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RhdHVzRGF0ZSddKSB7IHRoaXMuc3RhdHVzRGF0ZSA9IG5ldyBmaGlyLkZoaXJEYXRlKHt2YWx1ZTogc291cmNlLnN0YXR1c0RhdGV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3N0YXR1c0RhdGUnXSkge1xyXG4gICAgICBpZiAodGhpcy5zdGF0dXNEYXRlKSB7IHRoaXMuc3RhdHVzRGF0ZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zdGF0dXNEYXRlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3RhdHVzRGF0ZSA9IG5ldyBmaGlyLkZoaXJEYXRlKHNvdXJjZS5fc3RhdHVzRGF0ZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckRhdGVBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3N0YXR1c1JlYXNvbiddKSB7IHRoaXMuc3RhdHVzUmVhc29uID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5zdGF0dXNSZWFzb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3N0YXR1c1JlYXNvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLnN0YXR1c1JlYXNvbikgeyB0aGlzLnN0YXR1c1JlYXNvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zdGF0dXNSZWFzb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zdGF0dXNSZWFzb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fc3RhdHVzUmVhc29uIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydleHByZXNzZWRCeSddKSB7IHRoaXMuZXhwcmVzc2VkQnkgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmV4cHJlc3NlZEJ5KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYWRkcmVzc2VzJ10pIHsgdGhpcy5hZGRyZXNzZXMgPSBzb3VyY2UuYWRkcmVzc2VzLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYWRkcmVzc2VzID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ25vdGUnXSkgeyB0aGlzLm5vdGUgPSBzb3VyY2Uubm90ZS5tYXAoKHgpID0+IG5ldyBmaGlyLkFubm90YXRpb24oeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5ub3RlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ291dGNvbWVDb2RlJ10pIHsgdGhpcy5vdXRjb21lQ29kZSA9IHNvdXJjZS5vdXRjb21lQ29kZS5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm91dGNvbWVDb2RlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ291dGNvbWVSZWZlcmVuY2UnXSkgeyB0aGlzLm91dGNvbWVSZWZlcmVuY2UgPSBzb3VyY2Uub3V0Y29tZVJlZmVyZW5jZS5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm91dGNvbWVSZWZlcmVuY2UgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdHb2FsJyB9XHJcbiAgICB0aGlzLnZSZXFTKCdyZXNvdXJjZVR5cGUnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRBKCdpZGVudGlmaWVyJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52UmVxU1YoJ2xpZmVjeWNsZVN0YXR1cycsZXhwcmVzc2lvbiwnR29hbFN0YXR1cycsR29hbFN0YXR1c1ZzVmFsaWRhdGlvbiwncicpXHJcbiAgICB0aGlzLnZPcHRTKCdhY2hpZXZlbWVudFN0YXR1cycsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdEEoJ2NhdGVnb3J5JyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygncHJpb3JpdHknLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZSZXFTKCdkZXNjcmlwdGlvbicsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudlJlcVMoJ3N1YmplY3QnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdzdGFydCcsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdEEoJ3RhcmdldCcsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ3N0YXR1c0RhdGUnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdzdGF0dXNSZWFzb24nLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdleHByZXNzZWRCeScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdEEoJ2FkZHJlc3NlcycsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdEEoJ25vdGUnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRBKCdvdXRjb21lQ29kZScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdEEoJ291dGNvbWVSZWZlcmVuY2UnLGV4cHJlc3Npb24pXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=