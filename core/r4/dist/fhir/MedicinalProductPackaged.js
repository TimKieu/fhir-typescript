// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: MedicinalProductPackaged
import * as fhir from '../fhir.js';
/**
 * Batch numbering.
 */
export class MedicinalProductPackagedBatchIdentifier extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductPackagedBatchIdentifier - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['outerPackaging']) {
            this.outerPackaging = new fhir.Identifier(source.outerPackaging);
        }
        else {
            this.outerPackaging = null;
        }
        if (source['immediatePackaging']) {
            this.immediatePackaging = new fhir.Identifier(source.immediatePackaging);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicinalProductPackaged.batchIdentifier';
        }
        iss.push(...this.vRS('outerPackaging', exp));
        iss.push(...this.vOS('immediatePackaging', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductPackagedBatchIdentifier._fts_dataType = 'MedicinalProductPackagedBatchIdentifier';
/**
 * A packaging item, as a contained for medicine, possibly with other packaging items within.
 */
export class MedicinalProductPackagedPackageItem extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductPackagedPackageItem - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type);
        }
        else {
            this.type = null;
        }
        if (source['quantity']) {
            this.quantity = new fhir.Quantity(source.quantity);
        }
        else {
            this.quantity = null;
        }
        if (source['material']) {
            this.material = source.material.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.material = [];
        }
        if (source['alternateMaterial']) {
            this.alternateMaterial = source.alternateMaterial.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.alternateMaterial = [];
        }
        if (source['device']) {
            this.device = source.device.map((x) => new fhir.Reference(x));
        }
        else {
            this.device = [];
        }
        if (source['manufacturedItem']) {
            this.manufacturedItem = source.manufacturedItem.map((x) => new fhir.Reference(x));
        }
        else {
            this.manufacturedItem = [];
        }
        if (source['packageItem']) {
            this.packageItem = source.packageItem.map((x) => new fhir.MedicinalProductPackagedPackageItem(x));
        }
        else {
            this.packageItem = [];
        }
        if (source['physicalCharacteristics']) {
            this.physicalCharacteristics = new fhir.ProdCharacteristic(source.physicalCharacteristics);
        }
        if (source['otherCharacteristics']) {
            this.otherCharacteristics = source.otherCharacteristics.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.otherCharacteristics = [];
        }
        if (source['shelfLifeStorage']) {
            this.shelfLifeStorage = source.shelfLifeStorage.map((x) => new fhir.ProductShelfLife(x));
        }
        else {
            this.shelfLifeStorage = [];
        }
        if (source['manufacturer']) {
            this.manufacturer = source.manufacturer.map((x) => new fhir.Reference(x));
        }
        else {
            this.manufacturer = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicinalProductPackaged.packageItem';
        }
        iss.push(...this.vOA('identifier', exp));
        iss.push(...this.vRS('type', exp));
        iss.push(...this.vRS('quantity', exp));
        iss.push(...this.vOA('material', exp));
        iss.push(...this.vOA('alternateMaterial', exp));
        iss.push(...this.vOA('device', exp));
        iss.push(...this.vOA('manufacturedItem', exp));
        iss.push(...this.vOA('packageItem', exp));
        iss.push(...this.vOS('physicalCharacteristics', exp));
        iss.push(...this.vOA('otherCharacteristics', exp));
        iss.push(...this.vOA('shelfLifeStorage', exp));
        iss.push(...this.vOA('manufacturer', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductPackagedPackageItem._fts_dataType = 'MedicinalProductPackagedPackageItem';
/**
 * A medicinal product in a container or package.
 */
export class MedicinalProductPackaged extends fhir.DomainResource {
    /**
     * Default constructor for MedicinalProductPackaged - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'MedicinalProductPackaged';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['subject']) {
            this.subject = source.subject.map((x) => new fhir.Reference(x));
        }
        else {
            this.subject = [];
        }
        if (source['description']) {
            this.description = new fhir.FhirString({ value: source.description });
        }
        if (source['_description']) {
            if (this.description) {
                this.description.addExtendedProperties(source._description);
            }
            else {
                this.description = new fhir.FhirString(source._description);
            }
        }
        if (source['legalStatusOfSupply']) {
            this.legalStatusOfSupply = new fhir.CodeableConcept(source.legalStatusOfSupply);
        }
        if (source['marketingStatus']) {
            this.marketingStatus = source.marketingStatus.map((x) => new fhir.MarketingStatus(x));
        }
        else {
            this.marketingStatus = [];
        }
        if (source['marketingAuthorization']) {
            this.marketingAuthorization = new fhir.Reference(source.marketingAuthorization);
        }
        if (source['manufacturer']) {
            this.manufacturer = source.manufacturer.map((x) => new fhir.Reference(x));
        }
        else {
            this.manufacturer = [];
        }
        if (source['batchIdentifier']) {
            this.batchIdentifier = source.batchIdentifier.map((x) => new fhir.MedicinalProductPackagedBatchIdentifier(x));
        }
        else {
            this.batchIdentifier = [];
        }
        if (source['packageItem']) {
            this.packageItem = source.packageItem.map((x) => new fhir.MedicinalProductPackagedPackageItem(x));
        }
        else {
            this.packageItem = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicinalProductPackaged';
        }
        iss.push(...this.vOA('identifier', exp));
        iss.push(...this.vOA('subject', exp));
        iss.push(...this.vOS('description', exp));
        iss.push(...this.vOS('legalStatusOfSupply', exp));
        iss.push(...this.vOA('marketingStatus', exp));
        iss.push(...this.vOS('marketingAuthorization', exp));
        iss.push(...this.vOA('manufacturer', exp));
        iss.push(...this.vOA('batchIdentifier', exp));
        iss.push(...this.vRA('packageItem', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductPackaged._fts_dataType = 'MedicinalProductPackaged';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVkaWNpbmFsUHJvZHVjdFBhY2thZ2VkLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9NZWRpY2luYWxQcm9kdWN0UGFja2FnZWQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsMENBQTBDO0FBRTFDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBZ0JuQzs7R0FFRztBQUNILE1BQU0sT0FBTyx1Q0FBd0MsU0FBUSxJQUFJLENBQUMsZUFBZTtJQWEvRTs7T0FFRztJQUNILFlBQVksU0FBOEQsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDcEgsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1NBQUU7YUFDOUY7WUFBRSxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQztTQUFFO1FBQ3BDLElBQUksTUFBTSxDQUFDLG9CQUFvQixDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1NBQUU7SUFDakgsQ0FBQztJQUNEOztPQUVHO0lBQ2EsaUJBQWlCLENBQUMsTUFBYSxFQUFFO1FBQy9DLElBQUksR0FBRyxHQUFtQixLQUFLLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDdkQsSUFBSSxHQUFHLEtBQUssRUFBRSxFQUFFO1lBQUUsR0FBRyxHQUFHLDBDQUEwQyxDQUFBO1NBQUU7UUFDcEUsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUMsR0FBRyxD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R0FBRyxDQUFDLFNBQVMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3JDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3pDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLHFCQUFxQixFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDakQsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsaUJBQWlCLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUM3QyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyx3QkFBd0IsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3BELEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGlCQUFpQixFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDN0MsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDekMsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDOztBQXRGRDs7R0FFRztBQUM2QixzQ0FBYSxHQUFVLDBCQUEwQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0LmNvcmUgdmVyc2lvbjogNC4wLjFcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBNZWRpY2luYWxQcm9kdWN0UGFja2FnZWRcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgTWVkaWNpbmFsUHJvZHVjdFBhY2thZ2VkQmF0Y2hJZGVudGlmaWVyIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lZGljaW5hbFByb2R1Y3RQYWNrYWdlZEJhdGNoSWRlbnRpZmllckFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEEgbnVtYmVyIGFwcGVhcmluZyBvbiB0aGUgb3V0ZXIgcGFja2FnaW5nIG9mIGEgc3BlY2lmaWMgYmF0Y2guXHJcbiAgICovXHJcbiAgb3V0ZXJQYWNrYWdpbmc6IGZoaXIuSWRlbnRpZmllckFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBBIG51bWJlciBhcHBlYXJpbmcgb24gdGhlIGltbWVkaWF0ZSBwYWNrYWdpbmcgKGFuZCBub3QgdGhlIG91dGVyIHBhY2thZ2luZykuXHJcbiAgICovXHJcbiAgaW1tZWRpYXRlUGFja2FnaW5nPzogZmhpci5JZGVudGlmaWVyQXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBCYXRjaCBudW1iZXJpbmcuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNpbmFsUHJvZHVjdFBhY2thZ2VkQmF0Y2hJZGVudGlmaWVyIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVkaWNpbmFsUHJvZHVjdFBhY2thZ2VkQmF0Y2hJZGVudGlmaWVyJztcclxuICAvKipcclxuICAgKiBBIG51bWJlciBhcHBlYXJpbmcgb24gdGhlIG91dGVyIHBhY2thZ2luZyBvZiBhIHNwZWNpZmljIGJhdGNoLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdXRlclBhY2thZ2luZzogZmhpci5JZGVudGlmaWVyfG51bGw7XHJcbiAgLyoqXHJcbiAgICogQSBudW1iZXIgYXBwZWFyaW5nIG9uIHRoZSBpbW1lZGlhdGUgcGFja2FnaW5nIChhbmQgbm90IHRoZSBvdXRlciBwYWNrYWdpbmcpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpbW1lZGlhdGVQYWNrYWdpbmc/OiBmaGlyLklkZW50aWZpZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE1lZGljaW5hbFByb2R1Y3RQYWNrYWdlZEJhdGNoSWRlbnRpZmllciAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE1lZGljaW5hbFByb2R1Y3RQYWNrYWdlZEJhdGNoSWRlbnRpZmllckFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydvdXRlclBhY2thZ2luZyddKSB7IHRoaXMub3V0ZXJQYWNrYWdpbmcgPSBuZXcgZmhpci5JZGVudGlmaWVyKHNvdXJjZS5vdXRlclBhY2thZ2luZyk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm91dGVyUGFja2FnaW5nID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaW1tZWRpYXRlUGFja2FnaW5nJ10pIHsgdGhpcy5pbW1lZGlhdGVQYWNrYWdpbmcgPSBuZXcgZmhpci5JZGVudGlmaWVyKHNvdXJjZS5pbW1lZGlhdGVQYWNrYWdpbmcpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnTWVkaWNpbmFsUHJvZHVjdFBhY2thZ2VkLmJhdGNoSWRlbnRpZmllcicgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ291dGVyUGFja2FnaW5nJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdpbW1lZGlhdGVQYWNrYWdpbmcnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lZGljaW5hbFByb2R1Y3RQYWNrYWdlZFBhY2thZ2VJdGVtIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lZGljaW5hbFByb2R1Y3RQYWNrYWdlZFBhY2thZ2VJdGVtQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogSW5jbHVkaW5nIHBvc3NpYmx5IERhdGEgQ2FycmllciBJZGVudGlmaWVyLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwaHlzaWNhbCB0eXBlIG9mIHRoZSBjb250YWluZXIgb2YgdGhlIG1lZGljaW5lLlxyXG4gICAqL1xyXG4gIHR5cGU6IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBxdWFudGl0eSBvZiB0aGlzIHBhY2thZ2UgaW4gdGhlIG1lZGljaW5hbCBwcm9kdWN0LCBhdCB0aGUgY3VycmVudCBsZXZlbCBvZiBwYWNrYWdpbmcuIFRoZSBvdXRlcm1vc3QgaXMgYWx3YXlzIDEuXHJcbiAgICovXHJcbiAgcXVhbnRpdHk6IGZoaXIuUXVhbnRpdHlBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogTWF0ZXJpYWwgdHlwZSBvZiB0aGUgcGFja2FnZSBpdGVtLlxyXG4gICAqL1xyXG4gIG1hdGVyaWFsPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgcG9zc2libGUgYWx0ZXJuYXRlIG1hdGVyaWFsIGZvciB0aGUgcGFja2FnaW5nLlxyXG4gICAqL1xyXG4gIGFsdGVybmF0ZU1hdGVyaWFsPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgZGV2aWNlIGFjY29tcGFueWluZyBhIG1lZGljaW5hbCBwcm9kdWN0LlxyXG4gICAqL1xyXG4gIGRldmljZT86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbWFudWZhY3R1cmVkIGl0ZW0gYXMgY29udGFpbmVkIGluIHRoZSBwYWNrYWdlZCBtZWRpY2luYWwgcHJvZHVjdC5cclxuICAgKi9cclxuICBtYW51ZmFjdHVyZWRJdGVtPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFsbG93cyBjb250YWluZXJzIHdpdGhpbiBjb250YWluZXJzLlxyXG4gICAqL1xyXG4gIHBhY2thZ2VJdGVtPzogZmhpci5NZWRpY2luYWxQcm9kdWN0UGFja2FnZWRQYWNrYWdlSXRlbUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGltZW5zaW9ucywgY29sb3IgZXRjLlxyXG4gICAqL1xyXG4gIHBoeXNpY2FsQ2hhcmFjdGVyaXN0aWNzPzogZmhpci5Qcm9kQ2hhcmFjdGVyaXN0aWNBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBPdGhlciBjb2RlYWJsZSBjaGFyYWN0ZXJpc3RpY3MuXHJcbiAgICovXHJcbiAgb3RoZXJDaGFyYWN0ZXJpc3RpY3M/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU2hlbGYgTGlmZSBhbmQgc3RvcmFnZSBpbmZvcm1hdGlvbi5cclxuICAgKi9cclxuICBzaGVsZkxpZmVTdG9yYWdlPzogZmhpci5Qcm9kdWN0U2hlbGZMaWZlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBNYW51ZmFjdHVyZXIgb2YgdGhpcyBQYWNrYWdlIEl0ZW0uXHJcbiAgICovXHJcbiAgbWFudWZhY3R1cmVyPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQSBwYWNrYWdpbmcgaXRlbSwgYXMgYSBjb250YWluZWQgZm9yIG1lZGljaW5lLCBwb3NzaWJseSB3aXRoIG90aGVyIHBhY2thZ2luZyBpdGVtcyB3aXRoaW4uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNpbmFsUHJvZHVjdFBhY2thZ2VkUGFja2FnZUl0ZW0gZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdNZWRpY2luYWxQcm9kdWN0UGFja2FnZWRQYWNrYWdlSXRlbSc7XHJcbiAgLyoqXHJcbiAgICogSW5jbHVkaW5nIHBvc3NpYmx5IERhdGEgQ2FycmllciBJZGVudGlmaWVyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyOiBmaGlyLklkZW50aWZpZXJbXTtcclxuICAvKipcclxuICAgKiBUaGUgcGh5c2ljYWwgdHlwZSBvZiB0aGUgY29udGFpbmVyIG9mIHRoZSBtZWRpY2luZS5cclxuICAgKi9cclxuICBwdWJsaWMgdHlwZTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgcXVhbnRpdHkgb2YgdGhpcyBwYWNrYWdlIGluIHRoZSBtZWRpY2luYWwgcHJvZHVjdCwgYXQgdGhlIGN1cnJlbnQgbGV2ZWwgb2YgcGFja2FnaW5nLiBUaGUgb3V0ZXJtb3N0IGlzIGFsd2F5cyAxLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBxdWFudGl0eTogZmhpci5RdWFudGl0eXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIE1hdGVyaWFsIHR5cGUgb2YgdGhlIHBhY2thZ2UgaXRlbS5cclxuICAgKi9cclxuICBwdWJsaWMgbWF0ZXJpYWw6IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogQSBwb3NzaWJsZSBhbHRlcm5hdGUgbWF0ZXJpYWwgZm9yIHRoZSBwYWNrYWdpbmcuXHJcbiAgICovXHJcbiAgcHVibGljIGFsdGVybmF0ZU1hdGVyaWFsOiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIEEgZGV2aWNlIGFjY29tcGFueWluZyBhIG1lZGljaW5hbCBwcm9kdWN0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZXZpY2U6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogVGhlIG1hbnVmYWN0dXJlZCBpdGVtIGFzIGNvbnRhaW5lZCBpbiB0aGUgcGFja2FnZWQgbWVkaWNpbmFsIHByb2R1Y3QuXHJcbiAgICovXHJcbiAgcHVibGljIG1hbnVmYWN0dXJlZEl0ZW06IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogQWxsb3dzIGNvbnRhaW5lcnMgd2l0aGluIGNvbnRhaW5lcnMuXHJcbiAgICovXHJcbiAgcHVibGljIHBhY2thZ2VJdGVtOiBmaGlyLk1lZGljaW5hbFByb2R1Y3RQYWNrYWdlZFBhY2thZ2VJdGVtW107XHJcbiAgLyoqXHJcbiAgICogRGltZW5zaW9ucywgY29sb3IgZXRjLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwaHlzaWNhbENoYXJhY3RlcmlzdGljcz86IGZoaXIuUHJvZENoYXJhY3RlcmlzdGljfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBPdGhlciBjb2RlYWJsZSBjaGFyYWN0ZXJpc3RpY3MuXHJcbiAgICovXHJcbiAgcHVibGljIG90aGVyQ2hhcmFjdGVyaXN0aWNzOiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIFNoZWxmIExpZmUgYW5kIHN0b3JhZ2UgaW5mb3JtYXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHNoZWxmTGlmZVN0b3JhZ2U6IGZoaXIuUHJvZHVjdFNoZWxmTGlmZVtdO1xyXG4gIC8qKlxyXG4gICAqIE1hbnVmYWN0dXJlciBvZiB0aGlzIFBhY2thZ2UgSXRlbS5cclxuICAgKi9cclxuICBwdWJsaWMgbWFudWZhY3R1cmVyOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE1lZGljaW5hbFByb2R1Y3RQYWNrYWdlZFBhY2thZ2VJdGVtIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVkaWNpbmFsUHJvZHVjdFBhY2thZ2VkUGFja2FnZUl0ZW1BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IHNvdXJjZS5pZGVudGlmaWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuSWRlbnRpZmllcih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmlkZW50aWZpZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndHlwZSddKSB7IHRoaXMudHlwZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UudHlwZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnR5cGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydxdWFudGl0eSddKSB7IHRoaXMucXVhbnRpdHkgPSBuZXcgZmhpci5RdWFudGl0eShzb3VyY2UucXVhbnRpdHkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5xdWFudGl0eSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ21hdGVyaWFsJ10pIHsgdGhpcy5tYXRlcmlhbCA9IHNvdXJjZS5tYXRlcmlhbC5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm1hdGVyaWFsID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2FsdGVybmF0ZU1hdGVyaWFsJ10pIHsgdGhpcy5hbHRlcm5hdGVNYXRlcmlhbCA9IHNvdXJjZS5hbHRlcm5hdGVNYXRlcmlhbC5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmFsdGVybmF0ZU1hdGVyaWFsID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2RldmljZSddKSB7IHRoaXMuZGV2aWNlID0gc291cmNlLmRldmljZS5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmRldmljZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydtYW51ZmFjdHVyZWRJdGVtJ10pIHsgdGhpcy5tYW51ZmFjdHVyZWRJdGVtID0gc291cmNlLm1hbnVmYWN0dXJlZEl0ZW0ubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5tYW51ZmFjdHVyZWRJdGVtID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3BhY2thZ2VJdGVtJ10pIHsgdGhpcy5wYWNrYWdlSXRlbSA9IHNvdXJjZS5wYWNrYWdlSXRlbS5tYXAoKHgpID0+IG5ldyBmaGlyLk1lZGljaW5hbFByb2R1Y3RQYWNrYWdlZFBhY2thZ2VJdGVtKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucGFja2FnZUl0ZW0gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncGh5c2ljYWxDaGFyYWN0ZXJpc3RpY3MnXSkgeyB0aGlzLnBoeXNpY2FsQ2hhcmFjdGVyaXN0aWNzID0gbmV3IGZoaXIuUHJvZENoYXJhY3RlcmlzdGljKHNvdXJjZS5waHlzaWNhbENoYXJhY3RlcmlzdGljcyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ290aGVyQ2hhcmFjdGVyaXN0aWNzJ10pIHsgdGhpcy5vdGhlckNoYXJhY3RlcmlzdGljcyA9IHNvdXJjZS5vdGhlckNoYXJhY3RlcmlzdGljcy5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm90aGVyQ2hhcmFjdGVyaXN0aWNzID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3NoZWxmTGlmZVN0b3JhZ2UnXSkgeyB0aGlzLnNoZWxmTGlmZVN0b3JhZ2UgPSBzb3VyY2Uuc2hlbGZMaWZlU3RvcmFnZS5tYXAoKHgpID0+IG5ldyBmaGlyLlByb2R1Y3RTaGVsZkxpZmUoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zaGVsZkxpZmVTdG9yYWdlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ21hbnVmYWN0dXJlciddKSB7IHRoaXMubWFudWZhY3R1cmVyID0gc291cmNlLm1hbnVmYWN0dXJlci5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm1hbnVmYWN0dXJlciA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnTWVkaWNpbmFsUHJvZHVjdFBhY2thZ2VkLnBhY2thZ2VJdGVtJyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnaWRlbnRpZmllcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygndHlwZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygncXVhbnRpdHknLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ21hdGVyaWFsJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdhbHRlcm5hdGVNYXRlcmlhbCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnZGV2aWNlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdtYW51ZmFjdHVyZWRJdGVtJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdwYWNrYWdlSXRlbScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygncGh5c2ljYWxDaGFyYWN0ZXJpc3RpY3MnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ290aGVyQ2hhcmFjdGVyaXN0aWNzJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdzaGVsZkxpZmVTdG9yYWdlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdtYW51ZmFjdHVyZXInLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lZGljaW5hbFByb2R1Y3RQYWNrYWdlZCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNZWRpY2luYWxQcm9kdWN0UGFja2FnZWRBcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJNZWRpY2luYWxQcm9kdWN0UGFja2FnZWRcInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVW5pcXVlIGlkZW50aWZpZXIuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHByb2R1Y3Qgd2l0aCB0aGlzIGlzIGEgcGFjayBmb3IuXHJcbiAgICovXHJcbiAgc3ViamVjdD86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUZXh0dWFsIGRlc2NyaXB0aW9uLlxyXG4gICAqL1xyXG4gIGRlc2NyaXB0aW9uPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE1lZGljaW5hbFByb2R1Y3RQYWNrYWdlZC5kZXNjcmlwdGlvblxyXG4gICAqL1xyXG4gIF9kZXNjcmlwdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGxlZ2FsIHN0YXR1cyBvZiBzdXBwbHkgb2YgdGhlIG1lZGljaW5hbCBwcm9kdWN0IGFzIGNsYXNzaWZpZWQgYnkgdGhlIHJlZ3VsYXRvci5cclxuICAgKi9cclxuICBsZWdhbFN0YXR1c09mU3VwcGx5PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBNYXJrZXRpbmcgaW5mb3JtYXRpb24uXHJcbiAgICovXHJcbiAgbWFya2V0aW5nU3RhdHVzPzogZmhpci5NYXJrZXRpbmdTdGF0dXNBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE1hbnVmYWN0dXJlciBvZiB0aGlzIFBhY2thZ2UgSXRlbS5cclxuICAgKi9cclxuICBtYXJrZXRpbmdBdXRob3JpemF0aW9uPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBNYW51ZmFjdHVyZXIgb2YgdGhpcyBQYWNrYWdlIEl0ZW0uXHJcbiAgICovXHJcbiAgbWFudWZhY3R1cmVyPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEJhdGNoIG51bWJlcmluZy5cclxuICAgKi9cclxuICBiYXRjaElkZW50aWZpZXI/OiBmaGlyLk1lZGljaW5hbFByb2R1Y3RQYWNrYWdlZEJhdGNoSWRlbnRpZmllckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBwYWNrYWdpbmcgaXRlbSwgYXMgYSBjb250YWluZWQgZm9yIG1lZGljaW5lLCBwb3NzaWJseSB3aXRoIG90aGVyIHBhY2thZ2luZyBpdGVtcyB3aXRoaW4uXHJcbiAgICovXHJcbiAgcGFja2FnZUl0ZW06IGZoaXIuTWVkaWNpbmFsUHJvZHVjdFBhY2thZ2VkUGFja2FnZUl0ZW1BcmdzW118bnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgbWVkaWNpbmFsIHByb2R1Y3QgaW4gYSBjb250YWluZXIgb3IgcGFja2FnZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZWRpY2luYWxQcm9kdWN0UGFja2FnZWQgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ01lZGljaW5hbFByb2R1Y3RQYWNrYWdlZCc7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJNZWRpY2luYWxQcm9kdWN0UGFja2FnZWRcIjtcclxuICAvKipcclxuICAgKiBVbmlxdWUgaWRlbnRpZmllci5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcjogZmhpci5JZGVudGlmaWVyW107XHJcbiAgLyoqXHJcbiAgICogVGhlIHByb2R1Y3Qgd2l0aCB0aGlzIGlzIGEgcGFjayBmb3IuXHJcbiAgICovXHJcbiAgcHVibGljIHN1YmplY3Q6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogVGV4dHVhbCBkZXNjcmlwdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgZGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsZWdhbCBzdGF0dXMgb2Ygc3VwcGx5IG9mIHRoZSBtZWRpY2luYWwgcHJvZHVjdCBhcyBjbGFzc2lmaWVkIGJ5IHRoZSByZWd1bGF0b3IuXHJcbiAgICovXHJcbiAgcHVibGljIGxlZ2FsU3RhdHVzT2ZTdXBwbHk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTWFya2V0aW5nIGluZm9ybWF0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtYXJrZXRpbmdTdGF0dXM6IGZoaXIuTWFya2V0aW5nU3RhdHVzW107XHJcbiAgLyoqXHJcbiAgICogTWFudWZhY3R1cmVyIG9mIHRoaXMgUGFja2FnZSBJdGVtLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtYXJrZXRpbmdBdXRob3JpemF0aW9uPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE1hbnVmYWN0dXJlciBvZiB0aGlzIFBhY2thZ2UgSXRlbS5cclxuICAgKi9cclxuICBwdWJsaWMgbWFudWZhY3R1cmVyOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIEJhdGNoIG51bWJlcmluZy5cclxuICAgKi9cclxuICBwdWJsaWMgYmF0Y2hJZGVudGlmaWVyOiBmaGlyLk1lZGljaW5hbFByb2R1Y3RQYWNrYWdlZEJhdGNoSWRlbnRpZmllcltdO1xyXG4gIC8qKlxyXG4gICAqIEEgcGFja2FnaW5nIGl0ZW0sIGFzIGEgY29udGFpbmVkIGZvciBtZWRpY2luZSwgcG9zc2libHkgd2l0aCBvdGhlciBwYWNrYWdpbmcgaXRlbXMgd2l0aGluLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYWNrYWdlSXRlbTogZmhpci5NZWRpY2luYWxQcm9kdWN0UGFja2FnZWRQYWNrYWdlSXRlbVtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE1lZGljaW5hbFByb2R1Y3RQYWNrYWdlZCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE1lZGljaW5hbFByb2R1Y3RQYWNrYWdlZEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdNZWRpY2luYWxQcm9kdWN0UGFja2FnZWQnO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IHNvdXJjZS5pZGVudGlmaWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuSWRlbnRpZmllcih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmlkZW50aWZpZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3ViamVjdCddKSB7IHRoaXMuc3ViamVjdCA9IHNvdXJjZS5zdWJqZWN0Lm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3ViamVjdCA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydkZXNjcmlwdGlvbiddKSB7IHRoaXMuZGVzY3JpcHRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmRlc2NyaXB0aW9ufSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19kZXNjcmlwdGlvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLmRlc2NyaXB0aW9uKSB7IHRoaXMuZGVzY3JpcHRpb24uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZGVzY3JpcHRpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5kZXNjcmlwdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9kZXNjcmlwdGlvbiBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnbGVnYWxTdGF0dXNPZlN1cHBseSddKSB7IHRoaXMubGVnYWxTdGF0dXNPZlN1cHBseSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UubGVnYWxTdGF0dXNPZlN1cHBseSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ21hcmtldGluZ1N0YXR1cyddKSB7IHRoaXMubWFya2V0aW5nU3RhdHVzID0gc291cmNlLm1hcmtldGluZ1N0YXR1cy5tYXAoKHgpID0+IG5ldyBmaGlyLk1hcmtldGluZ1N0YXR1cyh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm1hcmtldGluZ1N0YXR1cyA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydtYXJrZXRpbmdBdXRob3JpemF0aW9uJ10pIHsgdGhpcy5tYXJrZXRpbmdBdXRob3JpemF0aW9uID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5tYXJrZXRpbmdBdXRob3JpemF0aW9uKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbWFudWZhY3R1cmVyJ10pIHsgdGhpcy5tYW51ZmFjdHVyZXIgPSBzb3VyY2UubWFudWZhY3R1cmVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubWFudWZhY3R1cmVyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2JhdGNoSWRlbnRpZmllciddKSB7IHRoaXMuYmF0Y2hJZGVudGlmaWVyID0gc291cmNlLmJhdGNoSWRlbnRpZmllci5tYXAoKHgpID0+IG5ldyBmaGlyLk1lZGljaW5hbFByb2R1Y3RQYWNrYWdlZEJhdGNoSWRlbnRpZmllcih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmJhdGNoSWRlbnRpZmllciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwYWNrYWdlSXRlbSddKSB7IHRoaXMucGFja2FnZUl0ZW0gPSBzb3VyY2UucGFja2FnZUl0ZW0ubWFwKCh4KSA9PiBuZXcgZmhpci5NZWRpY2luYWxQcm9kdWN0UGFja2FnZWRQYWNrYWdlSXRlbSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnBhY2thZ2VJdGVtID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdNZWRpY2luYWxQcm9kdWN0UGFja2FnZWQnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdpZGVudGlmaWVyJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdzdWJqZWN0JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdkZXNjcmlwdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnbGVnYWxTdGF0dXNPZlN1cHBseScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnbWFya2V0aW5nU3RhdHVzJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdtYXJrZXRpbmdBdXRob3JpemF0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdtYW51ZmFjdHVyZXInLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2JhdGNoSWRlbnRpZmllcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSQSgncGFja2FnZUl0ZW0nLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuIl19