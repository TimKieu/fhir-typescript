// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: DeviceMetric
import * as fhir from '../fhir.js';
// @ts-ignore
import { MetricCalibrationTypeCodes } from '../fhirValueSets/MetricCalibrationTypeCodes.js';
// @ts-ignore
import { MetricCalibrationStateCodes } from '../fhirValueSets/MetricCalibrationStateCodes.js';
// @ts-ignore
import { MetricOperationalStatusCodes } from '../fhirValueSets/MetricOperationalStatusCodes.js';
// @ts-ignore
import { MetricColorCodes } from '../fhirValueSets/MetricColorCodes.js';
// @ts-ignore
import { MetricCategoryCodes } from '../fhirValueSets/MetricCategoryCodes.js';
/**
 * Describes the calibrations that have been performed or that are required to be performed.
 */
export class DeviceMetricCalibration extends fhir.BackboneElement {
    /**
     * Default constructor for DeviceMetricCalibration - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['type']) {
            this.type = new fhir.FhirCode({ value: source.type });
        }
        if (source['state']) {
            this.state = new fhir.FhirCode({ value: source.state });
        }
        if (source['time']) {
            this.time = new fhir.FhirInstant({ value: source.time });
        }
    }
    /**
     * Required-bound Value Set for type (DeviceMetric.calibration.type)
     */
    static get typeRequiredCodes() {
        return MetricCalibrationTypeCodes;
    }
    /**
     * Required-bound Value Set for state (DeviceMetric.calibration.state)
     */
    static get stateRequiredCodes() {
        return MetricCalibrationStateCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this['type'] && (!Object.values(MetricCalibrationTypeCodes).includes(this.type))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property type?:fhir.FhirCode<MetricCalibrationTypeCodeType> fhir: DeviceMetric.calibration.type:code Required binding to: MetricCalibrationType' });
        }
        if (this["type"]) {
            issues.push(...this.type.doModelValidation());
        }
        if (this['state'] && (!Object.values(MetricCalibrationStateCodes).includes(this.state))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property state?:fhir.FhirCode<MetricCalibrationStateCodeType> fhir: DeviceMetric.calibration.state:code Required binding to: MetricCalibrationState' });
        }
        if (this["state"]) {
            issues.push(...this.state.doModelValidation());
        }
        if (this["time"]) {
            issues.push(...this.time.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DeviceMetricCalibration._fts_dataType = 'DeviceMetricCalibration';
/**
 * Describes a measurement, calculation or setting capability of a medical device.
 */
export class DeviceMetric extends fhir.DomainResource {
    /**
     * Default constructor for DeviceMetric - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'DeviceMetric';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type);
        }
        else {
            this.type = null;
        }
        if (source['unit']) {
            this.unit = new fhir.CodeableConcept(source.unit);
        }
        if (source['source']) {
            this.source = new fhir.Reference(source.source);
        }
        if (source['parent']) {
            this.parent = new fhir.Reference(source.parent);
        }
        if (source['operationalStatus']) {
            this.operationalStatus = new fhir.FhirCode({ value: source.operationalStatus });
        }
        if (source['color']) {
            this.color = new fhir.FhirCode({ value: source.color });
        }
        if (source['category']) {
            this.category = new fhir.FhirCode({ value: source.category });
        }
        else {
            this.category = null;
        }
        if (source['measurementPeriod']) {
            this.measurementPeriod = new fhir.Timing(source.measurementPeriod);
        }
        if (source['calibration']) {
            this.calibration = source.calibration.map((x) => new fhir.DeviceMetricCalibration(x));
        }
        else {
            this.calibration = [];
        }
    }
    /**
     * Required-bound Value Set for operationalStatus (DeviceMetric.operationalStatus)
     */
    static get operationalStatusRequiredCodes() {
        return MetricOperationalStatusCodes;
    }
    /**
     * Required-bound Value Set for color (DeviceMetric.color)
     */
    static get colorRequiredCodes() {
        return MetricColorCodes;
    }
    /**
     * Required-bound Value Set for category (DeviceMetric.category)
     */
    static get categoryRequiredCodes() {
        return MetricCategoryCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType:"DeviceMetric" fhir: DeviceMetric.resourceType:"DeviceMetric"' });
        }
        if (this["identifier"]) {
            this.identifier.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (!this['type']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property type:fhir.CodeableConcept fhir: DeviceMetric.type:CodeableConcept' });
        }
        if (this["type"]) {
            issues.push(...this.type.doModelValidation());
        }
        if (this["unit"]) {
            issues.push(...this.unit.doModelValidation());
        }
        if (this["source"]) {
            issues.push(...this.source.doModelValidation());
        }
        if (this["parent"]) {
            issues.push(...this.parent.doModelValidation());
        }
        if (this['operationalStatus'] && (!Object.values(MetricOperationalStatusCodes).includes(this.operationalStatus))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property operationalStatus?:fhir.FhirCode<MetricOperationalStatusCodeType> fhir: DeviceMetric.operationalStatus:code Required binding to: MetricOperationalStatus' });
        }
        if (this["operationalStatus"]) {
            issues.push(...this.operationalStatus.doModelValidation());
        }
        if (this['color'] && (!Object.values(MetricColorCodes).includes(this.color))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property color?:fhir.FhirCode<MetricColorCodeType> fhir: DeviceMetric.color:code Required binding to: MetricColor' });
        }
        if (this["color"]) {
            issues.push(...this.color.doModelValidation());
        }
        if (!this['category']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property category:fhir.FhirCode<MetricCategoryCodeType> fhir: DeviceMetric.category:code' });
        }
        if (this['category'] && (!Object.values(MetricCategoryCodes).includes(this.category))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property category:fhir.FhirCode<MetricCategoryCodeType> fhir: DeviceMetric.category:code Required binding to: MetricCategory' });
        }
        if (this["category"]) {
            issues.push(...this.category.doModelValidation());
        }
        if (this["measurementPeriod"]) {
            issues.push(...this.measurementPeriod.doModelValidation());
        }
        if (this["calibration"]) {
            this.calibration.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DeviceMetric._fts_dataType = 'DeviceMetric';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGV2aWNlTWV0cmljLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9EZXZpY2VNZXRyaWMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsOEJBQThCO0FBRTlCLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBSW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsMEJBQTBCLEVBQWtDLE1BQU0sZ0RBQWdELENBQUM7QUFHNUgsYUFBYTtBQUNiLE9BQU8sRUFBRSwyQkFBMkIsRUFBbUMsTUFBTSxpREFBaUQsQ0FBQztBQUcvSCxhQUFhO0FBQ2IsT0FBTyxFQUFFLDRCQUE0QixFQUFvQyxNQUFNLGtEQUFrRCxDQUFDO0FBR2xJLGFBQWE7QUFDYixPQUFPLEVBQUUsZ0JBQWdCLEVBQXdCLE1BQU0sc0NBQXNDLENBQUM7QUFHOUYsYUFBYTtBQUNiLE9BQU8sRUFBRSxtQkFBbUIsRUFBMkIsTUFBTSx5Q0FBeUMsQ0FBQztBQW1Cdkc7O0dBRUc7QUFDSCxNQUFNLE9BQU8sdUJBQXdCLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFpQi9EOztPQUVHO0lBQ0gsWUFBWSxTQUE4QyxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUNwRyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQWdDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxJQUFJLEVBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDM0csSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBaUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLEtBQUssRUFBQyxDQUFDLENBQUM7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QUcsSUFBSSxDQUFDLGlCQUFpQixDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQzlGLElBQUksSUFBSSxDQUFDLGFBQWEsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7U0FBRTtRQUN4RyxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQXpIRDs7R0FFRztBQUM2QiwwQkFBYSxHQUFVLGNBQWMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNC5jb3JlIHZlcnNpb246IDQuMC4xXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogRGV2aWNlTWV0cmljXHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBNZXRyaWNDYWxpYnJhdGlvblR5cGVDb2RpbmdzLCBNZXRyaWNDYWxpYnJhdGlvblR5cGVDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9NZXRyaWNDYWxpYnJhdGlvblR5cGVDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBNZXRyaWNDYWxpYnJhdGlvblR5cGVDb2RlcywgIE1ldHJpY0NhbGlicmF0aW9uVHlwZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9NZXRyaWNDYWxpYnJhdGlvblR5cGVDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTWV0cmljQ2FsaWJyYXRpb25TdGF0ZUNvZGluZ3MsIE1ldHJpY0NhbGlicmF0aW9uU3RhdGVDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9NZXRyaWNDYWxpYnJhdGlvblN0YXRlQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTWV0cmljQ2FsaWJyYXRpb25TdGF0ZUNvZGVzLCAgTWV0cmljQ2FsaWJyYXRpb25TdGF0ZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9NZXRyaWNDYWxpYnJhdGlvblN0YXRlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE1ldHJpY09wZXJhdGlvbmFsU3RhdHVzQ29kaW5ncywgTWV0cmljT3BlcmF0aW9uYWxTdGF0dXNDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9NZXRyaWNPcGVyYXRpb25hbFN0YXR1c0NvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE1ldHJpY09wZXJhdGlvbmFsU3RhdHVzQ29kZXMsICBNZXRyaWNPcGVyYXRpb25hbFN0YXR1c0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9NZXRyaWNPcGVyYXRpb25hbFN0YXR1c0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBNZXRyaWNDb2xvckNvZGluZ3MsIE1ldHJpY0NvbG9yQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTWV0cmljQ29sb3JDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBNZXRyaWNDb2xvckNvZGVzLCAgTWV0cmljQ29sb3JDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTWV0cmljQ29sb3JDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTWV0cmljQ2F0ZWdvcnlDb2RpbmdzLCBNZXRyaWNDYXRlZ29yeUNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL01ldHJpY0NhdGVnb3J5Q29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTWV0cmljQ2F0ZWdvcnlDb2RlcywgIE1ldHJpY0NhdGVnb3J5Q29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL01ldHJpY0NhdGVnb3J5Q29kZXMuanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgRGV2aWNlTWV0cmljQ2FsaWJyYXRpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgRGV2aWNlTWV0cmljQ2FsaWJyYXRpb25BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgdGhlIHR5cGUgb2YgdGhlIGNhbGlicmF0aW9uIG1ldGhvZC5cclxuICAgKi9cclxuICB0eXBlPzogZmhpci5GaGlyQ29kZTxNZXRyaWNDYWxpYnJhdGlvblR5cGVDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgdGhlIHN0YXRlIG9mIHRoZSBjYWxpYnJhdGlvbi5cclxuICAgKi9cclxuICBzdGF0ZT86IGZoaXIuRmhpckNvZGU8TWV0cmljQ2FsaWJyYXRpb25TdGF0ZUNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB0aGUgdGltZSBsYXN0IGNhbGlicmF0aW9uIGhhcyBiZWVuIHBlcmZvcm1lZC5cclxuICAgKi9cclxuICB0aW1lPzogZmhpci5GaGlySW5zdGFudHxzdHJpbmd8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogRGVzY3JpYmVzIHRoZSBjYWxpYnJhdGlvbnMgdGhhdCBoYXZlIGJlZW4gcGVyZm9ybWVkIG9yIHRoYXQgYXJlIHJlcXVpcmVkIHRvIGJlIHBlcmZvcm1lZC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBEZXZpY2VNZXRyaWNDYWxpYnJhdGlvbiBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0RldmljZU1ldHJpY0NhbGlicmF0aW9uJztcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgdGhlIHR5cGUgb2YgdGhlIGNhbGlicmF0aW9uIG1ldGhvZC5cclxuICAgKi9cclxuICBwdWJsaWMgdHlwZT86IGZoaXIuRmhpckNvZGU8TWV0cmljQ2FsaWJyYXRpb25UeXBlQ29kZVR5cGU+fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgdGhlIHN0YXRlIG9mIHRoZSBjYWxpYnJhdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGU/OiBmaGlyLkZoaXJDb2RlPE1ldHJpY0NhbGlicmF0aW9uU3RhdGVDb2RlVHlwZT58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB0aGUgdGltZSBsYXN0IGNhbGlicmF0aW9uIGhhcyBiZWVuIHBlcmZvcm1lZC5cclxuICAgKi9cclxuICBwdWJsaWMgdGltZT86IGZoaXIuRmhpckluc3RhbnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIERldmljZU1ldHJpY0NhbGlicmF0aW9uIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8RGV2aWNlTWV0cmljQ2FsaWJyYXRpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsndHlwZSddKSB7IHRoaXMudHlwZSA9IG5ldyBmaGlyLkZoaXJDb2RlPE1ldHJpY0NhbGlicmF0aW9uVHlwZUNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS50eXBlfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0YXRlJ10pIHsgdGhpcy5zdGF0ZSA9IG5ldyBmaGlyLkZoaXJDb2RlPE1ldHJpY0NhbGlicmF0aW9uU3RhdGVDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2Uuc3RhdGV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndGltZSddKSB7IHRoaXMudGltZSA9IG5ldyBmaGlyLkZoaXJJbnN0YW50KHt2YWx1ZTogc291cmNlLnRpbWV9KTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIHR5cGUgKERldmljZU1ldHJpYy5jYWxpYnJhdGlvbi50eXBlKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IHR5cGVSZXF1aXJlZENvZGVzKCkge1xyXG4gICAgcmV0dXJuIE1ldHJpY0NhbGlicmF0aW9uVHlwZUNvZGVzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIHN0YXRlIChEZXZpY2VNZXRyaWMuY2FsaWJyYXRpb24uc3RhdGUpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgc3RhdGVSZXF1aXJlZENvZGVzKCkge1xyXG4gICAgcmV0dXJuIE1ldHJpY0NhbGlicmF0aW9uU3RhdGVDb2RlcztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICh0aGlzWyd0eXBlJ10gJiYgKCFPYmplY3QudmFsdWVzKE1ldHJpY0NhbGlicmF0aW9uVHlwZUNvZGVzKS5pbmNsdWRlcyh0aGlzLnR5cGUgYXMgYW55KSkpIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ2NvZGUtaW52YWxpZCcsIGRpYWdub3N0aWNzOiAnSW52YWxpZCBjb2RlIHByb3BlcnR5IHR5cGU/OmZoaXIuRmhpckNvZGU8TWV0cmljQ2FsaWJyYXRpb25UeXBlQ29kZVR5cGU+IGZoaXI6IERldmljZU1ldHJpYy5jYWxpYnJhdGlvbi50eXBlOmNvZGUgUmVxdWlyZWQgYmluZGluZyB0bzogTWV0cmljQ2FsaWJyYXRpb25UeXBlJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1widHlwZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnR5cGUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzWydzdGF0ZSddICYmICghT2JqZWN0LnZhbHVlcyhNZXRyaWNDYWxpYnJhdGlvblN0YXRlQ29kZXMpLmluY2x1ZGVzKHRoaXMuc3RhdGUgYXMgYW55KSkpIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ2NvZGUtaW52YWxpZCcsIGRpYWdub3N0aWNzOiAnSW52YWxpZCBjb2RlIHByb3BlcnR5IHN0YXRlPzpmaGlyLkZoaXJDb2RlPE1ldHJpY0NhbGlicmF0aW9uU3RhdGVDb2RlVHlwZT4gZmhpcjogRGV2aWNlTWV0cmljLmNhbGlicmF0aW9uLnN0YXRlOmNvZGUgUmVxdWlyZWQgYmluZGluZyB0bzogTWV0cmljQ2FsaWJyYXRpb25TdGF0ZScgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInN0YXRlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc3RhdGUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1widGltZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnRpbWUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBEZXZpY2VNZXRyaWMgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgRGV2aWNlTWV0cmljQXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiRGV2aWNlTWV0cmljXCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEZvciBpZGVudGlmaWVycyBhc3NpZ25lZCB0byBhIGRldmljZSBieSB0aGUgZGV2aWNlIG9yIGdhdGV3YXkgc29mdHdhcmUsIHRoZSBgc3lzdGVtYCBlbGVtZW50IG9mIHRoZSBpZGVudGlmaWVyIHNob3VsZCBiZSBzZXQgdG8gdGhlIHVuaXF1ZSBpZGVudGlmaWVyIG9mIHRoZSBkZXZpY2UuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGV2aWNlTWV0cmljLnR5cGUgY2FuIGJlIHJlZmVycmVkIHRvIGVpdGhlciBJRUVFIDExMDczLTEwMTAxIG9yIExPSU5DLlxyXG4gICAqL1xyXG4gIHR5cGU6IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIERldmljZU1ldHJpYy51bml0IGNhbiByZWZlciB0byBlaXRoZXIgVUNVTSBvciBwcmVmZXJhYmxlIGEgUlRNTVMgY29kaW5nIHN5c3RlbS5cclxuICAgKi9cclxuICB1bml0PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgdGhlIGxpbmsgdG8gdGhlICBEZXZpY2UgdGhhdCB0aGlzIERldmljZU1ldHJpYyBiZWxvbmdzIHRvIGFuZCB0aGF0IGNvbnRhaW5zIGFkbWluaXN0cmF0aXZlIGRldmljZSBpbmZvcm1hdGlvbiBzdWNoIGFzIG1hbnVmYWN0dXJlciwgc2VyaWFsIG51bWJlciwgZXRjLlxyXG4gICAqL1xyXG4gIHNvdXJjZT86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHRoZSBsaW5rIHRvIHRoZSAgRGV2aWNlIHRoYXQgdGhpcyBEZXZpY2VNZXRyaWMgYmVsb25ncyB0byBhbmQgdGhhdCBwcm92aWRlIGluZm9ybWF0aW9uIGFib3V0IHRoZSBsb2NhdGlvbiBvZiB0aGlzIERldmljZU1ldHJpYyBpbiB0aGUgY29udGFpbm1lbnQgc3RydWN0dXJlIG9mIHRoZSBwYXJlbnQgRGV2aWNlLiBBbiBleGFtcGxlIHdvdWxkIGJlIGEgRGV2aWNlIHRoYXQgcmVwcmVzZW50cyBhIENoYW5uZWwuIFRoaXMgcmVmZXJlbmNlIGNhbiBiZSB1c2VkIGJ5IGEgY2xpZW50IGFwcGxpY2F0aW9uIHRvIGRpc3Rpbmd1aXNoIERldmljZU1ldHJpY3MgdGhhdCBoYXZlIHRoZSBzYW1lIHR5cGUsIGJ1dCBzaG91bGQgYmUgaW50ZXJwcmV0ZWQgYmFzZWQgb24gdGhlaXIgY29udGFpbm1lbnQgbG9jYXRpb24uXHJcbiAgICovXHJcbiAgcGFyZW50PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgY3VycmVudCBvcGVyYXRpb25hbCBzdGF0ZSBvZiB0aGUgZGV2aWNlLiBGb3IgZXhhbXBsZTogT24sIE9mZiwgU3RhbmRieSwgZXRjLlxyXG4gICAqL1xyXG4gIG9wZXJhdGlvbmFsU3RhdHVzPzogZmhpci5GaGlyQ29kZTxNZXRyaWNPcGVyYXRpb25hbFN0YXR1c0NvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB0aGUgY29sb3IgcmVwcmVzZW50YXRpb24gZm9yIHRoZSBtZXRyaWMuIFRoaXMgaXMgb2Z0ZW4gdXNlZCB0byBhaWQgY2xpbmljaWFucyB0byB0cmFjayBhbmQgaWRlbnRpZnkgcGFyYW1ldGVyIHR5cGVzIGJ5IGNvbG9yLiBJbiBwcmFjdGljZSwgY29uc2lkZXIgYSBQYXRpZW50IE1vbml0b3IgdGhhdCBoYXMgRUNHL0hSIGFuZCBQbGV0aCBmb3IgZXhhbXBsZTsgdGhlIHBhcmFtZXRlcnMgYXJlIGRpc3BsYXllZCBpbiBkaWZmZXJlbnQgY2hhcmFjdGVyaXN0aWMgY29sb3JzLCBzdWNoIGFzIEhSLWJsdWUsIEJQLWdyZWVuLCBhbmQgUFIgYW5kIFNwTzItIG1hZ2VudGEuXHJcbiAgICovXHJcbiAgY29sb3I/OiBmaGlyLkZoaXJDb2RlPE1ldHJpY0NvbG9yQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHRoZSBjYXRlZ29yeSBvZiB0aGUgb2JzZXJ2YXRpb24gZ2VuZXJhdGlvbiBwcm9jZXNzLiBBIERldmljZU1ldHJpYyBjYW4gYmUgZm9yIGV4YW1wbGUgYSBzZXR0aW5nLCBtZWFzdXJlbWVudCwgb3IgY2FsY3VsYXRpb24uXHJcbiAgICovXHJcbiAgY2F0ZWdvcnk6IGZoaXIuRmhpckNvZGU8TWV0cmljQ2F0ZWdvcnlDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgdGhlIG1lYXN1cmVtZW50IHJlcGV0aXRpb24gdGltZS4gVGhpcyBpcyBub3QgbmVjZXNzYXJpbHkgdGhlIHNhbWUgYXMgdGhlIHVwZGF0ZSBwZXJpb2QuIFRoZSBtZWFzdXJlbWVudCByZXBldGl0aW9uIHRpbWUgY2FuIHJhbmdlIGZyb20gbWlsbGlzZWNvbmRzIHVwIHRvIGhvdXJzLiBBbiBleGFtcGxlIGZvciBhIG1lYXN1cmVtZW50IHJlcGV0aXRpb24gdGltZSBpbiB0aGUgcmFuZ2Ugb2YgbWlsbGlzZWNvbmRzIGlzIHRoZSBzYW1wbGluZyByYXRlIG9mIGFuIEVDRy4gQW4gZXhhbXBsZSBmb3IgYSBtZWFzdXJlbWVudCByZXBldGl0aW9uIHRpbWUgaW4gdGhlIHJhbmdlIG9mIGhvdXJzIGlzIGEgTklCUCB0aGF0IGlzIHRyaWdnZXJlZCBhdXRvbWF0aWNhbGx5IGV2ZXJ5IGhvdXIuIFRoZSB1cGRhdGUgcGVyaW9kIG1heSBiZSBkaWZmZXJlbnQgdGhhbiB0aGUgbWVhc3VyZW1lbnQgcmVwZXRpdGlvbiB0aW1lLCBpZiB0aGUgZGV2aWNlIGRvZXMgbm90IHVwZGF0ZSB0aGUgcHVibGlzaGVkIG9ic2VydmVkIHZhbHVlIHdpdGggdGhlIHNhbWUgZnJlcXVlbmN5IGFzIGl0IHdhcyBtZWFzdXJlZC5cclxuICAgKi9cclxuICBtZWFzdXJlbWVudFBlcmlvZD86IGZoaXIuVGltaW5nQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHRoZSBjYWxpYnJhdGlvbnMgdGhhdCBoYXZlIGJlZW4gcGVyZm9ybWVkIG9yIHRoYXQgYXJlIHJlcXVpcmVkIHRvIGJlIHBlcmZvcm1lZC5cclxuICAgKi9cclxuICBjYWxpYnJhdGlvbj86IGZoaXIuRGV2aWNlTWV0cmljQ2FsaWJyYXRpb25BcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogRGVzY3JpYmVzIGEgbWVhc3VyZW1lbnQsIGNhbGN1bGF0aW9uIG9yIHNldHRpbmcgY2FwYWJpbGl0eSBvZiBhIG1lZGljYWwgZGV2aWNlLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIERldmljZU1ldHJpYyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnRGV2aWNlTWV0cmljJztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIkRldmljZU1ldHJpY1wiO1xyXG4gIC8qKlxyXG4gICAqIEZvciBpZGVudGlmaWVycyBhc3NpZ25lZCB0byBhIGRldmljZSBieSB0aGUgZGV2aWNlIG9yIGdhdGV3YXkgc29mdHdhcmUsIHRoZSBgc3lzdGVtYCBlbGVtZW50IG9mIHRoZSBpZGVudGlmaWVyIHNob3VsZCBiZSBzZXQgdG8gdGhlIHVuaXF1ZSBpZGVudGlmaWVyIG9mIHRoZSBkZXZpY2UuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI6IGZoaXIuSWRlbnRpZmllcltdO1xyXG4gIC8qKlxyXG4gICAqIERldmljZU1ldHJpYy50eXBlIGNhbiBiZSByZWZlcnJlZCB0byBlaXRoZXIgSUVFRSAxMTA3My0xMDEwMSBvciBMT0lOQy5cclxuICAgKi9cclxuICBwdWJsaWMgdHlwZTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBEZXZpY2VNZXRyaWMudW5pdCBjYW4gcmVmZXIgdG8gZWl0aGVyIFVDVU0gb3IgcHJlZmVyYWJsZSBhIFJUTU1TIGNvZGluZyBzeXN0ZW0uXHJcbiAgICovXHJcbiAgcHVibGljIHVuaXQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHRoZSBsaW5rIHRvIHRoZSAgRGV2aWNlIHRoYXQgdGhpcyBEZXZpY2VNZXRyaWMgYmVsb25ncyB0byBhbmQgdGhhdCBjb250YWlucyBhZG1pbmlzdHJhdGl2ZSBkZXZpY2UgaW5mb3JtYXRpb24gc3VjaCBhcyBtYW51ZmFjdHVyZXIsIHNlcmlhbCBudW1iZXIsIGV0Yy5cclxuICAgKi9cclxuICBwdWJsaWMgc291cmNlPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB0aGUgbGluayB0byB0aGUgIERldmljZSB0aGF0IHRoaXMgRGV2aWNlTWV0cmljIGJlbG9uZ3MgdG8gYW5kIHRoYXQgcHJvdmlkZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgbG9jYXRpb24gb2YgdGhpcyBEZXZpY2VNZXRyaWMgaW4gdGhlIGNvbnRhaW5tZW50IHN0cnVjdHVyZSBvZiB0aGUgcGFyZW50IERldmljZS4gQW4gZXhhbXBsZSB3b3VsZCBiZSBhIERldmljZSB0aGF0IHJlcHJlc2VudHMgYSBDaGFubmVsLiBUaGlzIHJlZmVyZW5jZSBjYW4gYmUgdXNlZCBieSBhIGNsaWVudCBhcHBsaWNhdGlvbiB0byBkaXN0aW5ndWlzaCBEZXZpY2VNZXRyaWNzIHRoYXQgaGF2ZSB0aGUgc2FtZSB0eXBlLCBidXQgc2hvdWxkIGJlIGludGVycHJldGVkIGJhc2VkIG9uIHRoZWlyIGNvbnRhaW5tZW50IGxvY2F0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXJlbnQ/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIGN1cnJlbnQgb3BlcmF0aW9uYWwgc3RhdGUgb2YgdGhlIGRldmljZS4gRm9yIGV4YW1wbGU6IE9uLCBPZmYsIFN0YW5kYnksIGV0Yy5cclxuICAgKi9cclxuICBwdWJsaWMgb3BlcmF0aW9uYWxTdGF0dXM/OiBmaGlyLkZoaXJDb2RlPE1ldHJpY09wZXJhdGlvbmFsU3RhdHVzQ29kZVR5cGU+fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgdGhlIGNvbG9yIHJlcHJlc2VudGF0aW9uIGZvciB0aGUgbWV0cmljLiBUaGlzIGlzIG9mdGVuIHVzZWQgdG8gYWlkIGNsaW5pY2lhbnMgdG8gdHJhY2sgYW5kIGlkZW50aWZ5IHBhcmFtZXRlciB0eXBlcyBieSBjb2xvci4gSW4gcHJhY3RpY2UsIGNvbnNpZGVyIGEgUGF0aWVudCBNb25pdG9yIHRoYXQgaGFzIEVDRy9IUiBhbmQgUGxldGggZm9yIGV4YW1wbGU7IHRoZSBwYXJhbWV0ZXJzIGFyZSBkaXNwbGF5ZWQgaW4gZGlmZmVyZW50IGNoYXJhY3RlcmlzdGljIGNvbG9ycywgc3VjaCBhcyBIUi1ibHVlLCBCUC1ncmVlbiwgYW5kIFBSIGFuZCBTcE8yLSBtYWdlbnRhLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb2xvcj86IGZoaXIuRmhpckNvZGU8TWV0cmljQ29sb3JDb2RlVHlwZT58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB0aGUgY2F0ZWdvcnkgb2YgdGhlIG9ic2VydmF0aW9uIGdlbmVyYXRpb24gcHJvY2Vzcy4gQSBEZXZpY2VNZXRyaWMgY2FuIGJlIGZvciBleGFtcGxlIGEgc2V0dGluZywgbWVhc3VyZW1lbnQsIG9yIGNhbGN1bGF0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjYXRlZ29yeTogZmhpci5GaGlyQ29kZTxNZXRyaWNDYXRlZ29yeUNvZGVUeXBlPnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB0aGUgbWVhc3VyZW1lbnQgcmVwZXRpdGlvbiB0aW1lLiBUaGlzIGlzIG5vdCBuZWNlc3NhcmlseSB0aGUgc2FtZSBhcyB0aGUgdXBkYXRlIHBlcmlvZC4gVGhlIG1lYXN1cmVtZW50IHJlcGV0aXRpb24gdGltZSBjYW4gcmFuZ2UgZnJvbSBtaWxsaXNlY29uZHMgdXAgdG8gaG91cnMuIEFuIGV4YW1wbGUgZm9yIGEgbWVhc3VyZW1lbnQgcmVwZXRpdGlvbiB0aW1lIGluIHRoZSByYW5nZSBvZiBtaWxsaXNlY29uZHMgaXMgdGhlIHNhbXBsaW5nIHJhdGUgb2YgYW4gRUNHLiBBbiBleGFtcGxlIGZvciBhIG1lYXN1cmVtZW50IHJlcGV0aXRpb24gdGltZSBpbiB0aGUgcmFuZ2Ugb2YgaG91cnMgaXMgYSBOSUJQIHRoYXQgaXMgdHJpZ2dlcmVkIGF1dG9tYXRpY2FsbHkgZXZlcnkgaG91ci4gVGhlIHVwZGF0ZSBwZXJpb2QgbWF5IGJlIGRpZmZlcmVudCB0aGFuIHRoZSBtZWFzdXJlbWVudCByZXBldGl0aW9uIHRpbWUsIGlmIHRoZSBkZXZpY2UgZG9lcyBub3QgdXBkYXRlIHRoZSBwdWJsaXNoZWQgb2JzZXJ2ZWQgdmFsdWUgd2l0aCB0aGUgc2FtZSBmcmVxdWVuY3kgYXMgaXQgd2FzIG1lYXN1cmVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtZWFzdXJlbWVudFBlcmlvZD86IGZoaXIuVGltaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgdGhlIGNhbGlicmF0aW9ucyB0aGF0IGhhdmUgYmVlbiBwZXJmb3JtZWQgb3IgdGhhdCBhcmUgcmVxdWlyZWQgdG8gYmUgcGVyZm9ybWVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjYWxpYnJhdGlvbjogZmhpci5EZXZpY2VNZXRyaWNDYWxpYnJhdGlvbltdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIERldmljZU1ldHJpYyAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPERldmljZU1ldHJpY0FyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdEZXZpY2VNZXRyaWMnO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IHNvdXJjZS5pZGVudGlmaWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuSWRlbnRpZmllcih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmlkZW50aWZpZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndHlwZSddKSB7IHRoaXMudHlwZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UudHlwZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnR5cGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWyd1bml0J10pIHsgdGhpcy51bml0ID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS51bml0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc291cmNlJ10pIHsgdGhpcy5zb3VyY2UgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnNvdXJjZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3BhcmVudCddKSB7IHRoaXMucGFyZW50ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5wYXJlbnQpOyB9XHJcbiAgICBpZiAoc291cmNlWydvcGVyYXRpb25hbFN0YXR1cyddKSB7IHRoaXMub3BlcmF0aW9uYWxTdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxNZXRyaWNPcGVyYXRpb25hbFN0YXR1c0NvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5vcGVyYXRpb25hbFN0YXR1c30pOyB9XHJcbiAgICBpZiAoc291cmNlWydjb2xvciddKSB7IHRoaXMuY29sb3IgPSBuZXcgZmhpci5GaGlyQ29kZTxNZXRyaWNDb2xvckNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5jb2xvcn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydjYXRlZ29yeSddKSB7IHRoaXMuY2F0ZWdvcnkgPSBuZXcgZmhpci5GaGlyQ29kZTxNZXRyaWNDYXRlZ29yeUNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5jYXRlZ29yeX0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jYXRlZ29yeSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ21lYXN1cmVtZW50UGVyaW9kJ10pIHsgdGhpcy5tZWFzdXJlbWVudFBlcmlvZCA9IG5ldyBmaGlyLlRpbWluZyhzb3VyY2UubWVhc3VyZW1lbnRQZXJpb2QpOyB9XHJcbiAgICBpZiAoc291cmNlWydjYWxpYnJhdGlvbiddKSB7IHRoaXMuY2FsaWJyYXRpb24gPSBzb3VyY2UuY2FsaWJyYXRpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5EZXZpY2VNZXRyaWNDYWxpYnJhdGlvbih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNhbGlicmF0aW9uID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZWQtYm91bmQgVmFsdWUgU2V0IGZvciBvcGVyYXRpb25hbFN0YXR1cyAoRGV2aWNlTWV0cmljLm9wZXJhdGlvbmFsU3RhdHVzKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IG9wZXJhdGlvbmFsU3RhdHVzUmVxdWlyZWRDb2RlcygpIHtcclxuICAgIHJldHVybiBNZXRyaWNPcGVyYXRpb25hbFN0YXR1c0NvZGVzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIGNvbG9yIChEZXZpY2VNZXRyaWMuY29sb3IpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgY29sb3JSZXF1aXJlZENvZGVzKCkge1xyXG4gICAgcmV0dXJuIE1ldHJpY0NvbG9yQ29kZXM7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlcXVpcmVkLWJvdW5kIFZhbHVlIFNldCBmb3IgY2F0ZWdvcnkgKERldmljZU1ldHJpYy5jYXRlZ29yeSlcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCBjYXRlZ29yeVJlcXVpcmVkQ29kZXMoKSB7XHJcbiAgICByZXR1cm4gTWV0cmljQ2F0ZWdvcnlDb2RlcztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICghdGhpc1sncmVzb3VyY2VUeXBlJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHJlc291cmNlVHlwZTpcIkRldmljZU1ldHJpY1wiIGZoaXI6IERldmljZU1ldHJpYy5yZXNvdXJjZVR5cGU6XCJEZXZpY2VNZXRyaWNcIicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImlkZW50aWZpZXJcIl0pIHsgdGhpcy5pZGVudGlmaWVyLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKCF0aGlzWyd0eXBlJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHR5cGU6Zmhpci5Db2RlYWJsZUNvbmNlcHQgZmhpcjogRGV2aWNlTWV0cmljLnR5cGU6Q29kZWFibGVDb25jZXB0JyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1widHlwZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnR5cGUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1widW5pdFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnVuaXQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wic291cmNlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc291cmNlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInBhcmVudFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnBhcmVudC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbJ29wZXJhdGlvbmFsU3RhdHVzJ10gJiYgKCFPYmplY3QudmFsdWVzKE1ldHJpY09wZXJhdGlvbmFsU3RhdHVzQ29kZXMpLmluY2x1ZGVzKHRoaXMub3BlcmF0aW9uYWxTdGF0dXMgYXMgYW55KSkpIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ2NvZGUtaW52YWxpZCcsIGRpYWdub3N0aWNzOiAnSW52YWxpZCBjb2RlIHByb3BlcnR5IG9wZXJhdGlvbmFsU3RhdHVzPzpmaGlyLkZoaXJDb2RlPE1ldHJpY09wZXJhdGlvbmFsU3RhdHVzQ29kZVR5cGU+IGZoaXI6IERldmljZU1ldHJpYy5vcGVyYXRpb25hbFN0YXR1czpjb2RlIFJlcXVpcmVkIGJpbmRpbmcgdG86IE1ldHJpY09wZXJhdGlvbmFsU3RhdHVzJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wib3BlcmF0aW9uYWxTdGF0dXNcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5vcGVyYXRpb25hbFN0YXR1cy5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbJ2NvbG9yJ10gJiYgKCFPYmplY3QudmFsdWVzKE1ldHJpY0NvbG9yQ29kZXMpLmluY2x1ZGVzKHRoaXMuY29sb3IgYXMgYW55KSkpIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ2NvZGUtaW52YWxpZCcsIGRpYWdub3N0aWNzOiAnSW52YWxpZCBjb2RlIHByb3BlcnR5IGNvbG9yPzpmaGlyLkZoaXJDb2RlPE1ldHJpY0NvbG9yQ29kZVR5cGU+IGZoaXI6IERldmljZU1ldHJpYy5jb2xvcjpjb2RlIFJlcXVpcmVkIGJpbmRpbmcgdG86IE1ldHJpY0NvbG9yJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiY29sb3JcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5jb2xvci5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKCF0aGlzWydjYXRlZ29yeSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBjYXRlZ29yeTpmaGlyLkZoaXJDb2RlPE1ldHJpY0NhdGVnb3J5Q29kZVR5cGU+IGZoaXI6IERldmljZU1ldHJpYy5jYXRlZ29yeTpjb2RlJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzWydjYXRlZ29yeSddICYmICghT2JqZWN0LnZhbHVlcyhNZXRyaWNDYXRlZ29yeUNvZGVzKS5pbmNsdWRlcyh0aGlzLmNhdGVnb3J5IGFzIGFueSkpKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdjb2RlLWludmFsaWQnLCBkaWFnbm9zdGljczogJ0ludmFsaWQgY29kZSBwcm9wZXJ0eSBjYXRlZ29yeTpmaGlyLkZoaXJDb2RlPE1ldHJpY0NhdGVnb3J5Q29kZVR5cGU+IGZoaXI6IERldmljZU1ldHJpYy5jYXRlZ29yeTpjb2RlIFJlcXVpcmVkIGJpbmRpbmcgdG86IE1ldHJpY0NhdGVnb3J5JyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiY2F0ZWdvcnlcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5jYXRlZ29yeS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJtZWFzdXJlbWVudFBlcmlvZFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm1lYXN1cmVtZW50UGVyaW9kLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImNhbGlicmF0aW9uXCJdKSB7IHRoaXMuY2FsaWJyYXRpb24uZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=