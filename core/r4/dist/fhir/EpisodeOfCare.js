// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: EpisodeOfCare
import * as fhir from '../fhir.js';
// @ts-ignore
import { EpisodeOfCareStatusVsValidation } from '../fhirValueSets/EpisodeOfCareStatusVsValidation.js';
/**
 * The history of statuses that the EpisodeOfCare has been through (without requiring processing the history of the resource).
 */
export class EpisodeOfCareStatusHistory extends fhir.BackboneElement {
    /**
     * Default constructor for EpisodeOfCareStatusHistory - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['period']) {
            this.period = new fhir.Period(source.period);
        }
        else {
            this.period = null;
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'EpisodeOfCare.statusHistory';
        }
        this.vReqSV('status', expression, 'EpisodeOfCareStatus', EpisodeOfCareStatusVsValidation, 'r');
        this.vReqS('period', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
EpisodeOfCareStatusHistory._fts_dataType = 'EpisodeOfCareStatusHistory';
/**
 * The list of diagnosis relevant to this episode of care.
 */
export class EpisodeOfCareDiagnosis extends fhir.BackboneElement {
    /**
     * Default constructor for EpisodeOfCareDiagnosis - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['condition']) {
            this.condition = new fhir.Reference(source.condition);
        }
        else {
            this.condition = null;
        }
        if (source['role']) {
            this.role = new fhir.CodeableConcept(source.role);
        }
        if (source['rank']) {
            this.rank = new fhir.FhirPositiveInt({ value: source.rank });
        }
        if (source['_rank']) {
            if (this.rank) {
                this.rank.addExtendedProperties(source._rank);
            }
            else {
                this.rank = new fhir.FhirPositiveInt(source._rank);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'EpisodeOfCare.diagnosis';
        }
        this.vReqS('condition', expression);
        this.vOptS('role', expression);
        this.vOptS('rank', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
EpisodeOfCareDiagnosis._fts_dataType = 'EpisodeOfCareDiagnosis';
/**
 * An association between a patient and an organization / healthcare provider(s) during which time encounters may occur. The managing organization assumes a level of responsibility for the patient during this time.
 */
export class EpisodeOfCare extends fhir.DomainResource {
    /**
     * Default constructor for EpisodeOfCare - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'EpisodeOfCare';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['statusHistory']) {
            this.statusHistory = source.statusHistory.map((x) => new fhir.EpisodeOfCareStatusHistory(x));
        }
        else {
            this.statusHistory = [];
        }
        if (source['type']) {
            this.type = source.type.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.type = [];
        }
        if (source['diagnosis']) {
            this.diagnosis = source.diagnosis.map((x) => new fhir.EpisodeOfCareDiagnosis(x));
        }
        else {
            this.diagnosis = [];
        }
        if (source['patient']) {
            this.patient = new fhir.Reference(source.patient);
        }
        else {
            this.patient = null;
        }
        if (source['managingOrganization']) {
            this.managingOrganization = new fhir.Reference(source.managingOrganization);
        }
        if (source['period']) {
            this.period = new fhir.Period(source.period);
        }
        if (source['referralRequest']) {
            this.referralRequest = source.referralRequest.map((x) => new fhir.Reference(x));
        }
        else {
            this.referralRequest = [];
        }
        if (source['careManager']) {
            this.careManager = new fhir.Reference(source.careManager);
        }
        if (source['team']) {
            this.team = source.team.map((x) => new fhir.Reference(x));
        }
        else {
            this.team = [];
        }
        if (source['account']) {
            this.account = source.account.map((x) => new fhir.Reference(x));
        }
        else {
            this.account = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'EpisodeOfCare';
        }
        this.vReqS('resourceType', expression);
        this.vOptA('identifier', expression);
        this.vReqSV('status', expression, 'EpisodeOfCareStatus', EpisodeOfCareStatusVsValidation, 'r');
        this.vOptA('statusHistory', expression);
        this.vOptA('type', expression);
        this.vOptA('diagnosis', expression);
        this.vReqS('patient', expression);
        this.vOptS('managingOrganization', expression);
        this.vOptS('period', expression);
        this.vOptA('referralRequest', expression);
        this.vOptS('careManager', expression);
        this.vOptA('team', expression);
        this.vOptA('account', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
EpisodeOfCare._fts_dataType = 'EpisodeOfCare';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRXBpc29kZU9mQ2FyZS5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvRXBpc29kZU9mQ2FyZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQywrQkFBK0I7QUFFL0IsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFJbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSwrQkFBK0IsRUFBRSxNQUFNLHFEQUFxRCxDQUFDO0FBMkJ0Rzs7R0FFRztBQUNILE1BQU0sT0FBTywwQkFBMkIsU0FBUSxJQUFJLENBQUMsZUFBZTtJQWFsRTs7T0FFRztJQUNILFlBQVksU0FBaUQsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDdkcsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUE4QixFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsTUFBTSxFQUFDLENBQUMsQ0FBQztTQUFFO2FBQzFHO1lBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7U0FBRTtRQUM1QixJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUNyQixJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7Z0JBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsT0FBUSxDQUFDLENBQUM7YUFBRTtpQkFDbkU7Z0JBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQThCLE1BQU0sQ0FBQyxPQUFpQyxDQUFDLENBQUM7YUFBRTtTQUNqSDtRQUNELElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLElBQUksQ0FBQyxNQUFN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QVksRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUNuQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBQyxVQUFVLEVBQUMscUJBQXFCLEVBQUMsK0JBQStCLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDMUYsSUFBSSxDQUFDLEtBQUssQ0FBQyxlQUFlLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDdEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDN0IsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDbEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDaEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxzQkFBc0IsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUM3QyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUMvQixJQUFJLENBQUMsS0FBSyxDQUFDLGlCQUFpQixFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ3hDLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ3BDLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQzdCLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ2hDLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBNUdEOztHQUVHO0FBQzZCLDJCQUFhLEdBQVUsZUFBZSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0LmNvcmUgdmVyc2lvbjogNC4wLjFcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBFcGlzb2RlT2ZDYXJlXHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBFcGlzb2RlT2ZDYXJlU3RhdHVzQ29kZXMsICBFcGlzb2RlT2ZDYXJlU3RhdHVzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0VwaXNvZGVPZkNhcmVTdGF0dXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRXBpc29kZU9mQ2FyZVN0YXR1c1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRXBpc29kZU9mQ2FyZVN0YXR1c1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRGlhZ25vc2lzUm9sZUNvZGVzLCAgRGlhZ25vc2lzUm9sZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9EaWFnbm9zaXNSb2xlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IERpYWdub3Npc1JvbGVWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0RpYWdub3Npc1JvbGVWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEVwaXNvZGVvZmNhcmVUeXBlQ29kZXMsICBFcGlzb2Rlb2ZjYXJlVHlwZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9FcGlzb2Rlb2ZjYXJlVHlwZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBFcGlzb2Rlb2ZjYXJlVHlwZVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRXBpc29kZW9mY2FyZVR5cGVWc1ZhbGlkYXRpb24uanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgRXBpc29kZU9mQ2FyZVN0YXR1c0hpc3RvcnkgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgRXBpc29kZU9mQ2FyZVN0YXR1c0hpc3RvcnlBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBwbGFubmVkIHwgd2FpdGxpc3QgfCBhY3RpdmUgfCBvbmhvbGQgfCBmaW5pc2hlZCB8IGNhbmNlbGxlZC5cclxuICAgKi9cclxuICBzdGF0dXM6IGZoaXIuRmhpckNvZGU8RXBpc29kZU9mQ2FyZVN0YXR1c0NvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBFcGlzb2RlT2ZDYXJlLnN0YXR1c0hpc3Rvcnkuc3RhdHVzXHJcbiAgICovXHJcbiAgX3N0YXR1cz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBlcmlvZCBkdXJpbmcgdGhpcyBFcGlzb2RlT2ZDYXJlIHRoYXQgdGhlIHNwZWNpZmljIHN0YXR1cyBhcHBsaWVkLlxyXG4gICAqL1xyXG4gIHBlcmlvZDogZmhpci5QZXJpb2RBcmdzfG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgaGlzdG9yeSBvZiBzdGF0dXNlcyB0aGF0IHRoZSBFcGlzb2RlT2ZDYXJlIGhhcyBiZWVuIHRocm91Z2ggKHdpdGhvdXQgcmVxdWlyaW5nIHByb2Nlc3NpbmcgdGhlIGhpc3Rvcnkgb2YgdGhlIHJlc291cmNlKS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBFcGlzb2RlT2ZDYXJlU3RhdHVzSGlzdG9yeSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0VwaXNvZGVPZkNhcmVTdGF0dXNIaXN0b3J5JztcclxuICAvKipcclxuICAgKiBwbGFubmVkIHwgd2FpdGxpc3QgfCBhY3RpdmUgfCBvbmhvbGQgfCBmaW5pc2hlZCB8IGNhbmNlbGxlZC5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPEVwaXNvZGVPZkNhcmVTdGF0dXNDb2RlVHlwZT58bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgcGVyaW9kIGR1cmluZyB0aGlzIEVwaXNvZGVPZkNhcmUgdGhhdCB0aGUgc3BlY2lmaWMgc3RhdHVzIGFwcGxpZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHBlcmlvZDogZmhpci5QZXJpb2R8bnVsbDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBFcGlzb2RlT2ZDYXJlU3RhdHVzSGlzdG9yeSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEVwaXNvZGVPZkNhcmVTdGF0dXNIaXN0b3J5QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3N0YXR1cyddKSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8RXBpc29kZU9mQ2FyZVN0YXR1c0NvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5zdGF0dXN9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3N0YXR1cyddKSB7XHJcbiAgICAgIGlmICh0aGlzLnN0YXR1cykgeyB0aGlzLnN0YXR1cy5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zdGF0dXMhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxFcGlzb2RlT2ZDYXJlU3RhdHVzQ29kZVR5cGU+KHNvdXJjZS5fc3RhdHVzIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydwZXJpb2QnXSkgeyB0aGlzLnBlcmlvZCA9IG5ldyBmaGlyLlBlcmlvZChzb3VyY2UucGVyaW9kKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucGVyaW9kID0gbnVsbDsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdFcGlzb2RlT2ZDYXJlLnN0YXR1c0hpc3RvcnknIH1cclxuICAgIHRoaXMudlJlcVNWKCdzdGF0dXMnLGV4cHJlc3Npb24sJ0VwaXNvZGVPZkNhcmVTdGF0dXMnLEVwaXNvZGVPZkNhcmVTdGF0dXNWc1ZhbGlkYXRpb24sJ3InKVxyXG4gICAgdGhpcy52UmVxUygncGVyaW9kJyxleHByZXNzaW9uKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEVwaXNvZGVPZkNhcmVEaWFnbm9zaXMgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgRXBpc29kZU9mQ2FyZURpYWdub3Npc0FyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEEgbGlzdCBvZiBjb25kaXRpb25zL3Byb2JsZW1zL2RpYWdub3NlcyB0aGF0IHRoaXMgZXBpc29kZSBvZiBjYXJlIGlzIGludGVuZGVkIHRvIGJlIHByb3ZpZGluZyBjYXJlIGZvci5cclxuICAgKi9cclxuICBjb25kaXRpb246IGZoaXIuUmVmZXJlbmNlQXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFJvbGUgdGhhdCB0aGlzIGRpYWdub3NpcyBoYXMgd2l0aGluIHRoZSBlcGlzb2RlIG9mIGNhcmUgKGUuZy4gYWRtaXNzaW9uLCBiaWxsaW5nLCBkaXNjaGFyZ2Ug4oCmKS5cclxuICAgKi9cclxuICByb2xlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBSYW5raW5nIG9mIHRoZSBkaWFnbm9zaXMgKGZvciBlYWNoIHJvbGUgdHlwZSkuXHJcbiAgICovXHJcbiAgcmFuaz86IGZoaXIuRmhpclBvc2l0aXZlSW50fG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEVwaXNvZGVPZkNhcmUuZGlhZ25vc2lzLnJhbmtcclxuICAgKi9cclxuICBfcmFuaz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgbGlzdCBvZiBkaWFnbm9zaXMgcmVsZXZhbnQgdG8gdGhpcyBlcGlzb2RlIG9mIGNhcmUuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRXBpc29kZU9mQ2FyZURpYWdub3NpcyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0VwaXNvZGVPZkNhcmVEaWFnbm9zaXMnO1xyXG4gIC8qKlxyXG4gICAqIEEgbGlzdCBvZiBjb25kaXRpb25zL3Byb2JsZW1zL2RpYWdub3NlcyB0aGF0IHRoaXMgZXBpc29kZSBvZiBjYXJlIGlzIGludGVuZGVkIHRvIGJlIHByb3ZpZGluZyBjYXJlIGZvci5cclxuICAgKi9cclxuICBwdWJsaWMgY29uZGl0aW9uOiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFJvbGUgdGhhdCB0aGlzIGRpYWdub3NpcyBoYXMgd2l0aGluIHRoZSBlcGlzb2RlIG9mIGNhcmUgKGUuZy4gYWRtaXNzaW9uLCBiaWxsaW5nLCBkaXNjaGFyZ2Ug4oCmKS5cclxuICAgKi9cclxuICBwdWJsaWMgcm9sZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBSYW5raW5nIG9mIHRoZSBkaWFnbm9zaXMgKGZvciBlYWNoIHJvbGUgdHlwZSkuXHJcbiAgICovXHJcbiAgcHVibGljIHJhbms/OiBmaGlyLkZoaXJQb3NpdGl2ZUludHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgRXBpc29kZU9mQ2FyZURpYWdub3NpcyAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEVwaXNvZGVPZkNhcmVEaWFnbm9zaXNBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnY29uZGl0aW9uJ10pIHsgdGhpcy5jb25kaXRpb24gPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmNvbmRpdGlvbik7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvbmRpdGlvbiA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3JvbGUnXSkgeyB0aGlzLnJvbGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnJvbGUpOyB9XHJcbiAgICBpZiAoc291cmNlWydyYW5rJ10pIHsgdGhpcy5yYW5rID0gbmV3IGZoaXIuRmhpclBvc2l0aXZlSW50KHt2YWx1ZTogc291cmNlLnJhbmt9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3JhbmsnXSkge1xyXG4gICAgICBpZiAodGhpcy5yYW5rKSB7IHRoaXMucmFuay5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9yYW5rISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMucmFuayA9IG5ldyBmaGlyLkZoaXJQb3NpdGl2ZUludChzb3VyY2UuX3JhbmsgYXMgUGFydGlhbDxmaGlyLkZoaXJQb3NpdGl2ZUludEFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdFcGlzb2RlT2ZDYXJlLmRpYWdub3NpcycgfVxyXG4gICAgdGhpcy52UmVxUygnY29uZGl0aW9uJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0Uygncm9sZScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ3JhbmsnLGV4cHJlc3Npb24pXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgRXBpc29kZU9mQ2FyZSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBFcGlzb2RlT2ZDYXJlQXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiRXBpc29kZU9mQ2FyZVwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgRXBpc29kZU9mQ2FyZSBtYXkgYmUga25vd24gYnkgZGlmZmVyZW50IGlkZW50aWZpZXJzIGZvciBkaWZmZXJlbnQgY29udGV4dHMgb2YgdXNlLCBzdWNoIGFzIHdoZW4gYW4gZXh0ZXJuYWwgYWdlbmN5IGlzIHRyYWNraW5nIHRoZSBFcGlzb2RlIGZvciBmdW5kaW5nIHB1cnBvc2VzLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgYmVjYXVzZSB0aGUgc3RhdHVzIGNvbnRhaW5zIGNvZGVzIHRoYXQgbWFyayB0aGUgZXBpc29kZSBhcyBub3QgY3VycmVudGx5IHZhbGlkLlxyXG4gICAqL1xyXG4gIHN0YXR1czogZmhpci5GaGlyQ29kZTxFcGlzb2RlT2ZDYXJlU3RhdHVzQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEVwaXNvZGVPZkNhcmUuc3RhdHVzXHJcbiAgICovXHJcbiAgX3N0YXR1cz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGhpc3Rvcnkgb2Ygc3RhdHVzZXMgdGhhdCB0aGUgRXBpc29kZU9mQ2FyZSBoYXMgYmVlbiB0aHJvdWdoICh3aXRob3V0IHJlcXVpcmluZyBwcm9jZXNzaW5nIHRoZSBoaXN0b3J5IG9mIHRoZSByZXNvdXJjZSkuXHJcbiAgICovXHJcbiAgc3RhdHVzSGlzdG9yeT86IGZoaXIuRXBpc29kZU9mQ2FyZVN0YXR1c0hpc3RvcnlBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0eXBlIGNhbiBiZSB2ZXJ5IGltcG9ydGFudCBpbiBwcm9jZXNzaW5nIGFzIHRoaXMgY291bGQgYmUgdXNlZCBpbiBkZXRlcm1pbmluZyBpZiB0aGUgRXBpc29kZU9mQ2FyZSBpcyByZWxldmFudCB0byBzcGVjaWZpYyBnb3Zlcm5tZW50IHJlcG9ydGluZywgb3Igb3RoZXIgdHlwZXMgb2YgY2xhc3NpZmljYXRpb25zLlxyXG4gICAqL1xyXG4gIHR5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGxpc3Qgb2YgZGlhZ25vc2lzIHJlbGV2YW50IHRvIHRoaXMgZXBpc29kZSBvZiBjYXJlLlxyXG4gICAqL1xyXG4gIGRpYWdub3Npcz86IGZoaXIuRXBpc29kZU9mQ2FyZURpYWdub3Npc0FyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBhdGllbnQgd2hvIGlzIHRoZSBmb2N1cyBvZiB0aGlzIGVwaXNvZGUgb2YgY2FyZS5cclxuICAgKi9cclxuICBwYXRpZW50OiBmaGlyLlJlZmVyZW5jZUFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgb3JnYW5pemF0aW9uIHRoYXQgaGFzIGFzc3VtZWQgdGhlIHNwZWNpZmljIHJlc3BvbnNpYmlsaXRpZXMgZm9yIHRoZSBzcGVjaWZpZWQgZHVyYXRpb24uXHJcbiAgICovXHJcbiAgbWFuYWdpbmdPcmdhbml6YXRpb24/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpbnRlcnZhbCBkdXJpbmcgd2hpY2ggdGhlIG1hbmFnaW5nIG9yZ2FuaXphdGlvbiBhc3N1bWVzIHRoZSBkZWZpbmVkIHJlc3BvbnNpYmlsaXR5LlxyXG4gICAqL1xyXG4gIHBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUmVmZXJyYWwgUmVxdWVzdChzKSB0aGF0IGFyZSBmdWxmaWxsZWQgYnkgdGhpcyBFcGlzb2RlT2ZDYXJlLCBpbmNvbWluZyByZWZlcnJhbHMuXHJcbiAgICovXHJcbiAgcmVmZXJyYWxSZXF1ZXN0PzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwcmFjdGl0aW9uZXIgdGhhdCBpcyB0aGUgY2FyZSBtYW5hZ2VyL2NhcmUgY29vcmRpbmF0b3IgZm9yIHRoaXMgcGF0aWVudC5cclxuICAgKi9cclxuICBjYXJlTWFuYWdlcj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGxpc3Qgb2YgcHJhY3RpdGlvbmVycyB0aGF0IG1heSBiZSBmYWNpbGl0YXRpbmcgdGhpcyBlcGlzb2RlIG9mIGNhcmUgZm9yIHNwZWNpZmljIHB1cnBvc2VzLlxyXG4gICAqL1xyXG4gIHRlYW0/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGJpbGxpbmcgc3lzdGVtIG1heSBjaG9vc2UgdG8gYWxsb2NhdGUgYmlsbGFibGUgaXRlbXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBFcGlzb2RlT2ZDYXJlIHRvIGRpZmZlcmVudCByZWZlcmVuY2VkIEFjY291bnRzIGJhc2VkIG9uIGludGVybmFsIGJ1c2luZXNzIHJ1bGVzLlxyXG4gICAqL1xyXG4gIGFjY291bnQ/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBbiBhc3NvY2lhdGlvbiBiZXR3ZWVuIGEgcGF0aWVudCBhbmQgYW4gb3JnYW5pemF0aW9uIC8gaGVhbHRoY2FyZSBwcm92aWRlcihzKSBkdXJpbmcgd2hpY2ggdGltZSBlbmNvdW50ZXJzIG1heSBvY2N1ci4gVGhlIG1hbmFnaW5nIG9yZ2FuaXphdGlvbiBhc3N1bWVzIGEgbGV2ZWwgb2YgcmVzcG9uc2liaWxpdHkgZm9yIHRoZSBwYXRpZW50IGR1cmluZyB0aGlzIHRpbWUuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRXBpc29kZU9mQ2FyZSBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnRXBpc29kZU9mQ2FyZSc7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJFcGlzb2RlT2ZDYXJlXCI7XHJcbiAgLyoqXHJcbiAgICogVGhlIEVwaXNvZGVPZkNhcmUgbWF5IGJlIGtub3duIGJ5IGRpZmZlcmVudCBpZGVudGlmaWVycyBmb3IgZGlmZmVyZW50IGNvbnRleHRzIG9mIHVzZSwgc3VjaCBhcyB3aGVuIGFuIGV4dGVybmFsIGFnZW5jeSBpcyB0cmFja2luZyB0aGUgRXBpc29kZSBmb3IgZnVuZGluZyBwdXJwb3Nlcy5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcjogZmhpci5JZGVudGlmaWVyW107XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IGlzIGxhYmVsZWQgYXMgYSBtb2RpZmllciBiZWNhdXNlIHRoZSBzdGF0dXMgY29udGFpbnMgY29kZXMgdGhhdCBtYXJrIHRoZSBlcGlzb2RlIGFzIG5vdCBjdXJyZW50bHkgdmFsaWQuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1czogZmhpci5GaGlyQ29kZTxFcGlzb2RlT2ZDYXJlU3RhdHVzQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGhpc3Rvcnkgb2Ygc3RhdHVzZXMgdGhhdCB0aGUgRXBpc29kZU9mQ2FyZSBoYXMgYmVlbiB0aHJvdWdoICh3aXRob3V0IHJlcXVpcmluZyBwcm9jZXNzaW5nIHRoZSBoaXN0b3J5IG9mIHRoZSByZXNvdXJjZSkuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1c0hpc3Rvcnk6IGZoaXIuRXBpc29kZU9mQ2FyZVN0YXR1c0hpc3RvcnlbXTtcclxuICAvKipcclxuICAgKiBUaGUgdHlwZSBjYW4gYmUgdmVyeSBpbXBvcnRhbnQgaW4gcHJvY2Vzc2luZyBhcyB0aGlzIGNvdWxkIGJlIHVzZWQgaW4gZGV0ZXJtaW5pbmcgaWYgdGhlIEVwaXNvZGVPZkNhcmUgaXMgcmVsZXZhbnQgdG8gc3BlY2lmaWMgZ292ZXJubWVudCByZXBvcnRpbmcsIG9yIG90aGVyIHR5cGVzIG9mIGNsYXNzaWZpY2F0aW9ucy5cclxuICAgKi9cclxuICBwdWJsaWMgdHlwZTogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBUaGUgbGlzdCBvZiBkaWFnbm9zaXMgcmVsZXZhbnQgdG8gdGhpcyBlcGlzb2RlIG9mIGNhcmUuXHJcbiAgICovXHJcbiAgcHVibGljIGRpYWdub3NpczogZmhpci5FcGlzb2RlT2ZDYXJlRGlhZ25vc2lzW107XHJcbiAgLyoqXHJcbiAgICogVGhlIHBhdGllbnQgd2hvIGlzIHRoZSBmb2N1cyBvZiB0aGlzIGVwaXNvZGUgb2YgY2FyZS5cclxuICAgKi9cclxuICBwdWJsaWMgcGF0aWVudDogZmhpci5SZWZlcmVuY2V8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgb3JnYW5pemF0aW9uIHRoYXQgaGFzIGFzc3VtZWQgdGhlIHNwZWNpZmljIHJlc3BvbnNpYmlsaXRpZXMgZm9yIHRoZSBzcGVjaWZpZWQgZHVyYXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIG1hbmFnaW5nT3JnYW5pemF0aW9uPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpbnRlcnZhbCBkdXJpbmcgd2hpY2ggdGhlIG1hbmFnaW5nIG9yZ2FuaXphdGlvbiBhc3N1bWVzIHRoZSBkZWZpbmVkIHJlc3BvbnNpYmlsaXR5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwZXJpb2Q/OiBmaGlyLlBlcmlvZHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUmVmZXJyYWwgUmVxdWVzdChzKSB0aGF0IGFyZSBmdWxmaWxsZWQgYnkgdGhpcyBFcGlzb2RlT2ZDYXJlLCBpbmNvbWluZyByZWZlcnJhbHMuXHJcbiAgICovXHJcbiAgcHVibGljIHJlZmVycmFsUmVxdWVzdDogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBUaGUgcHJhY3RpdGlvbmVyIHRoYXQgaXMgdGhlIGNhcmUgbWFuYWdlci9jYXJlIGNvb3JkaW5hdG9yIGZvciB0aGlzIHBhdGllbnQuXHJcbiAgICovXHJcbiAgcHVibGljIGNhcmVNYW5hZ2VyPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsaXN0IG9mIHByYWN0aXRpb25lcnMgdGhhdCBtYXkgYmUgZmFjaWxpdGF0aW5nIHRoaXMgZXBpc29kZSBvZiBjYXJlIGZvciBzcGVjaWZpYyBwdXJwb3Nlcy5cclxuICAgKi9cclxuICBwdWJsaWMgdGVhbTogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBUaGUgYmlsbGluZyBzeXN0ZW0gbWF5IGNob29zZSB0byBhbGxvY2F0ZSBiaWxsYWJsZSBpdGVtcyBhc3NvY2lhdGVkIHdpdGggdGhlIEVwaXNvZGVPZkNhcmUgdG8gZGlmZmVyZW50IHJlZmVyZW5jZWQgQWNjb3VudHMgYmFzZWQgb24gaW50ZXJuYWwgYnVzaW5lc3MgcnVsZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGFjY291bnQ6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgRXBpc29kZU9mQ2FyZSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEVwaXNvZGVPZkNhcmVBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnRXBpc29kZU9mQ2FyZSc7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gc291cmNlLmlkZW50aWZpZXIubWFwKCh4KSA9PiBuZXcgZmhpci5JZGVudGlmaWVyKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaWRlbnRpZmllciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydzdGF0dXMnXSkgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPEVwaXNvZGVPZkNhcmVTdGF0dXNDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2Uuc3RhdHVzfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zdGF0dXMnXSkge1xyXG4gICAgICBpZiAodGhpcy5zdGF0dXMpIHsgdGhpcy5zdGF0dXMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc3RhdHVzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8RXBpc29kZU9mQ2FyZVN0YXR1c0NvZGVUeXBlPihzb3VyY2UuX3N0YXR1cyBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RhdHVzSGlzdG9yeSddKSB7IHRoaXMuc3RhdHVzSGlzdG9yeSA9IHNvdXJjZS5zdGF0dXNIaXN0b3J5Lm1hcCgoeCkgPT4gbmV3IGZoaXIuRXBpc29kZU9mQ2FyZVN0YXR1c0hpc3RvcnkoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdGF0dXNIaXN0b3J5ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3R5cGUnXSkgeyB0aGlzLnR5cGUgPSBzb3VyY2UudHlwZS5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnR5cGUgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGlhZ25vc2lzJ10pIHsgdGhpcy5kaWFnbm9zaXMgPSBzb3VyY2UuZGlhZ25vc2lzLm1hcCgoeCkgPT4gbmV3IGZoaXIuRXBpc29kZU9mQ2FyZURpYWdub3Npcyh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmRpYWdub3NpcyA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwYXRpZW50J10pIHsgdGhpcy5wYXRpZW50ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5wYXRpZW50KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucGF0aWVudCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ21hbmFnaW5nT3JnYW5pemF0aW9uJ10pIHsgdGhpcy5tYW5hZ2luZ09yZ2FuaXphdGlvbiA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UubWFuYWdpbmdPcmdhbml6YXRpb24pOyB9XHJcbiAgICBpZiAoc291cmNlWydwZXJpb2QnXSkgeyB0aGlzLnBlcmlvZCA9IG5ldyBmaGlyLlBlcmlvZChzb3VyY2UucGVyaW9kKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVmZXJyYWxSZXF1ZXN0J10pIHsgdGhpcy5yZWZlcnJhbFJlcXVlc3QgPSBzb3VyY2UucmVmZXJyYWxSZXF1ZXN0Lm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVmZXJyYWxSZXF1ZXN0ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2NhcmVNYW5hZ2VyJ10pIHsgdGhpcy5jYXJlTWFuYWdlciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuY2FyZU1hbmFnZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWyd0ZWFtJ10pIHsgdGhpcy50ZWFtID0gc291cmNlLnRlYW0ubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy50ZWFtID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2FjY291bnQnXSkgeyB0aGlzLmFjY291bnQgPSBzb3VyY2UuYWNjb3VudC5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmFjY291bnQgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdFcGlzb2RlT2ZDYXJlJyB9XHJcbiAgICB0aGlzLnZSZXFTKCdyZXNvdXJjZVR5cGUnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRBKCdpZGVudGlmaWVyJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52UmVxU1YoJ3N0YXR1cycsZXhwcmVzc2lvbiwnRXBpc29kZU9mQ2FyZVN0YXR1cycsRXBpc29kZU9mQ2FyZVN0YXR1c1ZzVmFsaWRhdGlvbiwncicpXHJcbiAgICB0aGlzLnZPcHRBKCdzdGF0dXNIaXN0b3J5JyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0QSgndHlwZScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdEEoJ2RpYWdub3NpcycsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudlJlcVMoJ3BhdGllbnQnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdtYW5hZ2luZ09yZ2FuaXphdGlvbicsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ3BlcmlvZCcsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdEEoJ3JlZmVycmFsUmVxdWVzdCcsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ2NhcmVNYW5hZ2VyJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0QSgndGVhbScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdEEoJ2FjY291bnQnLGV4cHJlc3Npb24pXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=