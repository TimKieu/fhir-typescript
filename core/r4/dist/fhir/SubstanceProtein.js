// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: SubstanceProtein
import * as fhir from '../fhir.js';
/**
 * This subclause refers to the description of each subunit constituting the SubstanceProtein. A subunit is a linear sequence of amino acids linked through peptide bonds. The Subunit information shall be provided when the finished SubstanceProtein is a complex of multiple sequences; subunits are not used to delineate domains within a single sequence. Subunits are listed in order of decreasing length; sequences of the same length will be ordered by decreasing molecular weight; subunits that have identical sequences will be repeated multiple times.
 */
export class SubstanceProteinSubunit extends fhir.BackboneElement {
    /**
     * Default constructor for SubstanceProteinSubunit - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['subunit'] !== undefined) {
            this.subunit = new fhir.FhirInteger({ value: source.subunit }, options);
        }
        if (source['_subunit']) {
            if (this.subunit) {
                this.subunit.addExtendedProperties(source._subunit);
            }
            else {
                this.subunit = new fhir.FhirInteger(source._subunit, options);
            }
        }
        if (source['sequence'] !== undefined) {
            this.sequence = new fhir.FhirString({ value: source.sequence }, options);
        }
        if (source['_sequence']) {
            if (this.sequence) {
                this.sequence.addExtendedProperties(source._sequence);
            }
            else {
                this.sequence = new fhir.FhirString(source._sequence, options);
            }
        }
        if (source['length'] !== undefined) {
            this.length = new fhir.FhirInteger({ value: source.length }, options);
        }
        if (source['_length']) {
            if (this.length) {
                this.length.addExtendedProperties(source._length);
            }
            else {
                this.length = new fhir.FhirInteger(source._length, options);
            }
        }
        if (source['sequenceAttachment']) {
            this.sequenceAttachment = new fhir.Attachment(source.sequenceAttachment, options);
        }
        if (source['nTerminalModificationId']) {
            this.nTerminalModificationId = new fhir.Identifier(source.nTerminalModificationId, options);
        }
        if (source['nTerminalModification'] !== undefined) {
            this.nTerminalModification = new fhir.FhirString({ value: source.nTerminalModification }, options);
        }
        if (source['_nTerminalModification']) {
            if (this.nTerminalModification) {
                this.nTerminalModification.addExtendedProperties(source._nTerminalModification);
            }
            else {
                this.nTerminalModification = new fhir.FhirString(source._nTerminalModification, options);
            }
        }
        if (source['cTerminalModificationId']) {
            this.cTerminalModificationId = new fhir.Identifier(source.cTerminalModificationId, options);
        }
        if (source['cTerminalModification'] !== undefined) {
            this.cTerminalModification = new fhir.FhirString({ value: source.cTerminalModification }, options);
        }
        if (source['_cTerminalModification']) {
            if (this.cTerminalModification) {
                this.cTerminalModification.addExtendedProperties(source._cTerminalModification);
            }
            else {
                this.cTerminalModification = new fhir.FhirString(source._cTerminalModification, options);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SubstanceProtein.subunit';
        }
        iss.push(...this.vOS('subunit', exp));
        iss.push(...this.vOS('sequence', exp));
        iss.push(...this.vOS('length', exp));
        iss.push(...this.vOS('sequenceAttachment', exp));
        iss.push(...this.vOS('nTerminalModificationId', exp));
        iss.push(...this.vOS('nTerminalModification', exp));
        iss.push(...this.vOS('cTerminalModificationId', exp));
        iss.push(...this.vOS('cTerminalModification', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceProteinSubunit._fts_dataType = 'SubstanceProteinSubunit';
/**
 * A SubstanceProtein is defined as a single unit of a linear amino acid sequence, or a combination of subunits that are either covalently linked or have a defined invariant stoichiometric relationship. This includes all synthetic, recombinant and purified SubstanceProteins of defined sequence, whether the use is therapeutic or prophylactic. This set of elements will be used to describe albumins, coagulation factors, cytokines, growth factors, peptide/SubstanceProtein hormones, enzymes, toxins, toxoids, recombinant vaccines, and immunomodulators.
 */
export class SubstanceProtein extends fhir.DomainResource {
    /**
     * Default constructor for SubstanceProtein - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'SubstanceProtein';
        if (source['sequenceType']) {
            this.sequenceType = new fhir.CodeableConcept(source.sequenceType, options);
        }
        if (source['numberOfSubunits'] !== undefined) {
            this.numberOfSubunits = new fhir.FhirInteger({ value: source.numberOfSubunits }, options);
        }
        if (source['_numberOfSubunits']) {
            if (this.numberOfSubunits) {
                this.numberOfSubunits.addExtendedProperties(source._numberOfSubunits);
            }
            else {
                this.numberOfSubunits = new fhir.FhirInteger(source._numberOfSubunits, options);
            }
        }
        if (source['disulfideLinkage'] !== undefined) {
            this.disulfideLinkage = source.disulfideLinkage.map((x) => new fhir.FhirString({ value: x }, options));
        }
        else {
            this.disulfideLinkage = [];
        }
        if (source['_disulfideLinkage']) {
            source._disulfideLinkage.forEach((x, i) => {
                if (this.disulfideLinkage.length >= i) {
                    if (x) {
                        this.disulfideLinkage[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.disulfideLinkage.push(new fhir.FhirString(x));
                    }
                }
            });
        }
        if (source['subunit']) {
            this.subunit = source.subunit.map((x) => new fhir.SubstanceProteinSubunit(x, options));
        }
        else {
            this.subunit = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SubstanceProtein';
        }
        iss.push(...this.vOS('sequenceType', exp));
        iss.push(...this.vOS('numberOfSubunits', exp));
        iss.push(...this.vOA('disulfideLinkage', exp));
        iss.push(...this.vOA('subunit', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceProtein._fts_dataType = 'SubstanceProtein';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3Vic3RhbmNlUHJvdGVpbi5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvU3Vic3RhbmNlUHJvdGVpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQyxrQ0FBa0M7QUFFbEMsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUE0RG5DOztHQUVHO0FBQ0gsTUFBTSxPQUFPLHVCQUF3QixTQUFRLElBQUksQ0FBQyxlQUFlO0lBcUMvRDs7T0FFRztJQUNILFlBQVksU0FBOEMsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDcEcsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsS0FBSyxTQUFTLEVBQUU7WUFBRSxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsT0FBTyxFQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FBRTtRQUMvRyxJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUN0QixJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUU7Z0JBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsUUFBUyxDQUFDLENBQUM7YUFBRTtpQkFDdEU7Z0JBQUUsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLFFBQXlDLEVBQUUsT0FBTyxDQUFDLENBQUM7YUFBRTtTQUN6RztRQUNELElBQUksTUFBTSxDQUFDLFVBQVUsQ0FBQyxLQUFLLFNBQVMsRUFBRTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxRQUFRLEVBQUMsRUFBRSxPQUFPLENBQUMs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QUksR0FBRyxLQUFLLEVBQUUsRUFBRTtZQUFFLEdBQUcsR0FBRyxrQkFBa0IsQ0FBQTtTQUFFO1FBQzVDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGtCQUFrQixFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDOUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsa0JBQWtCLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUM5QyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNyQyxPQUFPLEdBQUcsQ0FBQztJQUNiLENBQUM7O0FBMUREOztHQUVHO0FBQzZCLDhCQUFhLEdBQVUsa0JBQWtCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjQuY29yZSB2ZXJzaW9uOiA0LjAuMVxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IFN1YnN0YW5jZVByb3RlaW5cclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgU3Vic3RhbmNlUHJvdGVpblN1YnVuaXQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3Vic3RhbmNlUHJvdGVpblN1YnVuaXRBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBJbmRleCBvZiBwcmltYXJ5IHNlcXVlbmNlcyBvZiBhbWlubyBhY2lkcyBsaW5rZWQgdGhyb3VnaCBwZXB0aWRlIGJvbmRzIGluIG9yZGVyIG9mIGRlY3JlYXNpbmcgbGVuZ3RoLiBTZXF1ZW5jZXMgb2YgdGhlIHNhbWUgbGVuZ3RoIHdpbGwgYmUgb3JkZXJlZCBieSBtb2xlY3VsYXIgd2VpZ2h0LiBTdWJ1bml0cyB0aGF0IGhhdmUgaWRlbnRpY2FsIHNlcXVlbmNlcyB3aWxsIGJlIHJlcGVhdGVkIGFuZCBoYXZlIHNlcXVlbnRpYWwgc3Vic2NyaXB0cy5cclxuICAgKi9cclxuICBzdWJ1bml0PzogZmhpci5GaGlySW50ZWdlcnxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTdWJzdGFuY2VQcm90ZWluLnN1YnVuaXQuc3VidW5pdFxyXG4gICAqL1xyXG4gIF9zdWJ1bml0PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgc2VxdWVuY2UgaW5mb3JtYXRpb24gc2hhbGwgYmUgcHJvdmlkZWQgZW51bWVyYXRpbmcgdGhlIGFtaW5vIGFjaWRzIGZyb20gTi0gdG8gQy10ZXJtaW5hbCBlbmQgdXNpbmcgc3RhbmRhcmQgc2luZ2xlLWxldHRlciBhbWlubyBhY2lkIGNvZGVzLiBVcHBlcmNhc2Ugc2hhbGwgYmUgdXNlZCBmb3IgTC1hbWlubyBhY2lkcyBhbmQgbG93ZXJjYXNlIGZvciBELWFtaW5vIGFjaWRzLiBUcmFuc2NyaWJlZCBTdWJzdGFuY2VQcm90ZWlucyB3aWxsIGFsd2F5cyBiZSBkZXNjcmliZWQgdXNpbmcgdGhlIHRyYW5zbGF0ZWQgc2VxdWVuY2U7IGZvciBzeW50aGV0aWMgcGVwdGlkZSBjb250YWluaW5nIGFtaW5vIGFjaWRzIHRoYXQgYXJlIG5vdCByZXByZXNlbnRlZCB3aXRoIGEgc2luZ2xlIGxldHRlciBjb2RlIGFuIFggc2hvdWxkIGJlIHVzZWQgd2l0aGluIHRoZSBzZXF1ZW5jZS4gVGhlIG1vZGlmaWVkIGFtaW5vIGFjaWRzIHdpbGwgYmUgZGlzdGluZ3Vpc2hlZCBieSB0aGVpciBwb3NpdGlvbiBpbiB0aGUgc2VxdWVuY2UuXHJcbiAgICovXHJcbiAgc2VxdWVuY2U/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3Vic3RhbmNlUHJvdGVpbi5zdWJ1bml0LnNlcXVlbmNlXHJcbiAgICovXHJcbiAgX3NlcXVlbmNlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBMZW5ndGggb2YgbGluZWFyIHNlcXVlbmNlcyBvZiBhbWlubyBhY2lkcyBjb250YWluZWQgaW4gdGhlIHN1YnVuaXQuXHJcbiAgICovXHJcbiAgbGVuZ3RoPzogZmhpci5GaGlySW50ZWdlcnxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTdWJzdGFuY2VQcm90ZWluLnN1YnVuaXQubGVuZ3RoXHJcbiAgICovXHJcbiAgX2xlbmd0aD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNlcXVlbmNlIGluZm9ybWF0aW9uIHNoYWxsIGJlIHByb3ZpZGVkIGVudW1lcmF0aW5nIHRoZSBhbWlubyBhY2lkcyBmcm9tIE4tIHRvIEMtdGVybWluYWwgZW5kIHVzaW5nIHN0YW5kYXJkIHNpbmdsZS1sZXR0ZXIgYW1pbm8gYWNpZCBjb2Rlcy4gVXBwZXJjYXNlIHNoYWxsIGJlIHVzZWQgZm9yIEwtYW1pbm8gYWNpZHMgYW5kIGxvd2VyY2FzZSBmb3IgRC1hbWlubyBhY2lkcy4gVHJhbnNjcmliZWQgU3Vic3RhbmNlUHJvdGVpbnMgd2lsbCBhbHdheXMgYmUgZGVzY3JpYmVkIHVzaW5nIHRoZSB0cmFuc2xhdGVkIHNlcXVlbmNlOyBmb3Igc3ludGhldGljIHBlcHRpZGUgY29udGFpbmluZyBhbWlubyBhY2lkcyB0aGF0IGFyZSBub3QgcmVwcmVzZW50ZWQgd2l0aCBhIHNpbmdsZSBsZXR0ZXIgY29kZSBhbiBYIHNob3VsZCBiZSB1c2VkIHdpdGhpbiB0aGUgc2VxdWVuY2UuIFRoZSBtb2RpZmllZCBhbWlubyBhY2lkcyB3aWxsIGJlIGRpc3Rpbmd1aXNoZWQgYnkgdGhlaXIgcG9zaXRpb24gaW4gdGhlIHNlcXVlbmNlLlxyXG4gICAqL1xyXG4gIHNlcXVlbmNlQXR0YWNobWVudD86IGZoaXIuQXR0YWNobWVudEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFVuaXF1ZSBpZGVudGlmaWVyIGZvciBtb2xlY3VsYXIgZnJhZ21lbnQgbW9kaWZpY2F0aW9uIGJhc2VkIG9uIHRoZSBJU08gMTEyMzggU3Vic3RhbmNlIElELlxyXG4gICAqL1xyXG4gIG5UZXJtaW5hbE1vZGlmaWNhdGlvbklkPzogZmhpci5JZGVudGlmaWVyQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG5hbWUgb2YgdGhlIGZyYWdtZW50IG1vZGlmaWVkIGF0IHRoZSBOLXRlcm1pbmFsIG9mIHRoZSBTdWJzdGFuY2VQcm90ZWluIHNoYWxsIGJlIHNwZWNpZmllZC5cclxuICAgKi9cclxuICBuVGVybWluYWxNb2RpZmljYXRpb24/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3Vic3RhbmNlUHJvdGVpbi5zdWJ1bml0Lm5UZXJtaW5hbE1vZGlmaWNhdGlvblxyXG4gICAqL1xyXG4gIF9uVGVybWluYWxNb2RpZmljYXRpb24/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFVuaXF1ZSBpZGVudGlmaWVyIGZvciBtb2xlY3VsYXIgZnJhZ21lbnQgbW9kaWZpY2F0aW9uIGJhc2VkIG9uIHRoZSBJU08gMTEyMzggU3Vic3RhbmNlIElELlxyXG4gICAqL1xyXG4gIGNUZXJtaW5hbE1vZGlmaWNhdGlvbklkPzogZmhpci5JZGVudGlmaWVyQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG1vZGlmaWNhdGlvbiBhdCB0aGUgQy10ZXJtaW5hbCBzaGFsbCBiZSBzcGVjaWZpZWQuXHJcbiAgICovXHJcbiAgY1Rlcm1pbmFsTW9kaWZpY2F0aW9uPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFN1YnN0YW5jZVByb3RlaW4uc3VidW5pdC5jVGVybWluYWxNb2RpZmljYXRpb25cclxuICAgKi9cclxuICBfY1Rlcm1pbmFsTW9kaWZpY2F0aW9uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoaXMgc3ViY2xhdXNlIHJlZmVycyB0byB0aGUgZGVzY3JpcHRpb24gb2YgZWFjaCBzdWJ1bml0IGNvbnN0aXR1dGluZyB0aGUgU3Vic3RhbmNlUHJvdGVpbi4gQSBzdWJ1bml0IGlzIGEgbGluZWFyIHNlcXVlbmNlIG9mIGFtaW5vIGFjaWRzIGxpbmtlZCB0aHJvdWdoIHBlcHRpZGUgYm9uZHMuIFRoZSBTdWJ1bml0IGluZm9ybWF0aW9uIHNoYWxsIGJlIHByb3ZpZGVkIHdoZW4gdGhlIGZpbmlzaGVkIFN1YnN0YW5jZVByb3RlaW4gaXMgYSBjb21wbGV4IG9mIG11bHRpcGxlIHNlcXVlbmNlczsgc3VidW5pdHMgYXJlIG5vdCB1c2VkIHRvIGRlbGluZWF0ZSBkb21haW5zIHdpdGhpbiBhIHNpbmdsZSBzZXF1ZW5jZS4gU3VidW5pdHMgYXJlIGxpc3RlZCBpbiBvcmRlciBvZiBkZWNyZWFzaW5nIGxlbmd0aDsgc2VxdWVuY2VzIG9mIHRoZSBzYW1lIGxlbmd0aCB3aWxsIGJlIG9yZGVyZWQgYnkgZGVjcmVhc2luZyBtb2xlY3VsYXIgd2VpZ2h0OyBzdWJ1bml0cyB0aGF0IGhhdmUgaWRlbnRpY2FsIHNlcXVlbmNlcyB3aWxsIGJlIHJlcGVhdGVkIG11bHRpcGxlIHRpbWVzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFN1YnN0YW5jZVByb3RlaW5TdWJ1bml0IGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnU3Vic3RhbmNlUHJvdGVpblN1YnVuaXQnO1xyXG4gIC8qKlxyXG4gICAqIEluZGV4IG9mIHByaW1hcnkgc2VxdWVuY2VzIG9mIGFtaW5vIGFjaWRzIGxpbmtlZCB0aHJvdWdoIHBlcHRpZGUgYm9uZHMgaW4gb3JkZXIgb2YgZGVjcmVhc2luZyBsZW5ndGguIFNlcXVlbmNlcyBvZiB0aGUgc2FtZSBsZW5ndGggd2lsbCBiZSBvcmRlcmVkIGJ5IG1vbGVjdWxhciB3ZWlnaHQuIFN1YnVuaXRzIHRoYXQgaGF2ZSBpZGVudGljYWwgc2VxdWVuY2VzIHdpbGwgYmUgcmVwZWF0ZWQgYW5kIGhhdmUgc2VxdWVudGlhbCBzdWJzY3JpcHRzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdWJ1bml0PzogZmhpci5GaGlySW50ZWdlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNlcXVlbmNlIGluZm9ybWF0aW9uIHNoYWxsIGJlIHByb3ZpZGVkIGVudW1lcmF0aW5nIHRoZSBhbWlubyBhY2lkcyBmcm9tIE4tIHRvIEMtdGVybWluYWwgZW5kIHVzaW5nIHN0YW5kYXJkIHNpbmdsZS1sZXR0ZXIgYW1pbm8gYWNpZCBjb2Rlcy4gVXBwZXJjYXNlIHNoYWxsIGJlIHVzZWQgZm9yIEwtYW1pbm8gYWNpZHMgYW5kIGxvd2VyY2FzZSBmb3IgRC1hbWlubyBhY2lkcy4gVHJhbnNjcmliZWQgU3Vic3RhbmNlUHJvdGVpbnMgd2lsbCBhbHdheXMgYmUgZGVzY3JpYmVkIHVzaW5nIHRoZSB0cmFuc2xhdGVkIHNlcXVlbmNlOyBmb3Igc3ludGhldGljIHBlcHRpZGUgY29udGFpbmluZyBhbWlubyBhY2lkcyB0aGF0IGFyZSBub3QgcmVwcmVzZW50ZWQgd2l0aCBhIHNpbmdsZSBsZXR0ZXIgY29kZSBhbiBYIHNob3VsZCBiZSB1c2VkIHdpdGhpbiB0aGUgc2VxdWVuY2UuIFRoZSBtb2RpZmllZCBhbWlubyBhY2lkcyB3aWxsIGJlIGRpc3Rpbmd1aXNoZWQgYnkgdGhlaXIgcG9zaXRpb24gaW4gdGhlIHNlcXVlbmNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXF1ZW5jZT86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTGVuZ3RoIG9mIGxpbmVhciBzZXF1ZW5jZXMgb2YgYW1pbm8gYWNpZHMgY29udGFpbmVkIGluIHRoZSBzdWJ1bml0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBsZW5ndGg/OiBmaGlyLkZoaXJJbnRlZ2VyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc2VxdWVuY2UgaW5mb3JtYXRpb24gc2hhbGwgYmUgcHJvdmlkZWQgZW51bWVyYXRpbmcgdGhlIGFtaW5vIGFjaWRzIGZyb20gTi0gdG8gQy10ZXJtaW5hbCBlbmQgdXNpbmcgc3RhbmRhcmQgc2luZ2xlLWxldHRlciBhbWlubyBhY2lkIGNvZGVzLiBVcHBlcmNhc2Ugc2hhbGwgYmUgdXNlZCBmb3IgTC1hbWlubyBhY2lkcyBhbmQgbG93ZXJjYXNlIGZvciBELWFtaW5vIGFjaWRzLiBUcmFuc2NyaWJlZCBTdWJzdGFuY2VQcm90ZWlucyB3aWxsIGFsd2F5cyBiZSBkZXNjcmliZWQgdXNpbmcgdGhlIHRyYW5zbGF0ZWQgc2VxdWVuY2U7IGZvciBzeW50aGV0aWMgcGVwdGlkZSBjb250YWluaW5nIGFtaW5vIGFjaWRzIHRoYXQgYXJlIG5vdCByZXByZXNlbnRlZCB3aXRoIGEgc2luZ2xlIGxldHRlciBjb2RlIGFuIFggc2hvdWxkIGJlIHVzZWQgd2l0aGluIHRoZSBzZXF1ZW5jZS4gVGhlIG1vZGlmaWVkIGFtaW5vIGFjaWRzIHdpbGwgYmUgZGlzdGluZ3Vpc2hlZCBieSB0aGVpciBwb3NpdGlvbiBpbiB0aGUgc2VxdWVuY2UuXHJcbiAgICovXHJcbiAgcHVibGljIHNlcXVlbmNlQXR0YWNobWVudD86IGZoaXIuQXR0YWNobWVudHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVW5pcXVlIGlkZW50aWZpZXIgZm9yIG1vbGVjdWxhciBmcmFnbWVudCBtb2RpZmljYXRpb24gYmFzZWQgb24gdGhlIElTTyAxMTIzOCBTdWJzdGFuY2UgSUQuXHJcbiAgICovXHJcbiAgcHVibGljIG5UZXJtaW5hbE1vZGlmaWNhdGlvbklkPzogZmhpci5JZGVudGlmaWVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbmFtZSBvZiB0aGUgZnJhZ21lbnQgbW9kaWZpZWQgYXQgdGhlIE4tdGVybWluYWwgb2YgdGhlIFN1YnN0YW5jZVByb3RlaW4gc2hhbGwgYmUgc3BlY2lmaWVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBuVGVybWluYWxNb2RpZmljYXRpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFVuaXF1ZSBpZGVudGlmaWVyIGZvciBtb2xlY3VsYXIgZnJhZ21lbnQgbW9kaWZpY2F0aW9uIGJhc2VkIG9uIHRoZSBJU08gMTEyMzggU3Vic3RhbmNlIElELlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjVGVybWluYWxNb2RpZmljYXRpb25JZD86IGZoaXIuSWRlbnRpZmllcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG1vZGlmaWNhdGlvbiBhdCB0aGUgQy10ZXJtaW5hbCBzaGFsbCBiZSBzcGVjaWZpZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGNUZXJtaW5hbE1vZGlmaWNhdGlvbj86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgU3Vic3RhbmNlUHJvdGVpblN1YnVuaXQgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxTdWJzdGFuY2VQcm90ZWluU3VidW5pdEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydzdWJ1bml0J10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnN1YnVuaXQgPSBuZXcgZmhpci5GaGlySW50ZWdlcih7dmFsdWU6IHNvdXJjZS5zdWJ1bml0fSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zdWJ1bml0J10pIHtcclxuICAgICAgaWYgKHRoaXMuc3VidW5pdCkgeyB0aGlzLnN1YnVuaXQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc3VidW5pdCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnN1YnVuaXQgPSBuZXcgZmhpci5GaGlySW50ZWdlcihzb3VyY2UuX3N1YnVuaXQgYXMgUGFydGlhbDxmaGlyLkZoaXJJbnRlZ2VyQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydzZXF1ZW5jZSddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5zZXF1ZW5jZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2Uuc2VxdWVuY2V9LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3NlcXVlbmNlJ10pIHtcclxuICAgICAgaWYgKHRoaXMuc2VxdWVuY2UpIHsgdGhpcy5zZXF1ZW5jZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zZXF1ZW5jZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnNlcXVlbmNlID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3NlcXVlbmNlIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydsZW5ndGgnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMubGVuZ3RoID0gbmV3IGZoaXIuRmhpckludGVnZXIoe3ZhbHVlOiBzb3VyY2UubGVuZ3RofSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19sZW5ndGgnXSkge1xyXG4gICAgICBpZiAodGhpcy5sZW5ndGgpIHsgdGhpcy5sZW5ndGguYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbGVuZ3RoISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubGVuZ3RoID0gbmV3IGZoaXIuRmhpckludGVnZXIoc291cmNlLl9sZW5ndGggYXMgUGFydGlhbDxmaGlyLkZoaXJJbnRlZ2VyQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydzZXF1ZW5jZUF0dGFjaG1lbnQnXSkgeyB0aGlzLnNlcXVlbmNlQXR0YWNobWVudCA9IG5ldyBmaGlyLkF0dGFjaG1lbnQoc291cmNlLnNlcXVlbmNlQXR0YWNobWVudCwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ25UZXJtaW5hbE1vZGlmaWNhdGlvbklkJ10pIHsgdGhpcy5uVGVybWluYWxNb2RpZmljYXRpb25JZCA9IG5ldyBmaGlyLklkZW50aWZpZXIoc291cmNlLm5UZXJtaW5hbE1vZGlmaWNhdGlvbklkLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnblRlcm1pbmFsTW9kaWZpY2F0aW9uJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLm5UZXJtaW5hbE1vZGlmaWNhdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UublRlcm1pbmFsTW9kaWZpY2F0aW9ufSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19uVGVybWluYWxNb2RpZmljYXRpb24nXSkge1xyXG4gICAgICBpZiAodGhpcy5uVGVybWluYWxNb2RpZmljYXRpb24pIHsgdGhpcy5uVGVybWluYWxNb2RpZmljYXRpb24uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fblRlcm1pbmFsTW9kaWZpY2F0aW9uISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMublRlcm1pbmFsTW9kaWZpY2F0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX25UZXJtaW5hbE1vZGlmaWNhdGlvbiBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnY1Rlcm1pbmFsTW9kaWZpY2F0aW9uSWQnXSkgeyB0aGlzLmNUZXJtaW5hbE1vZGlmaWNhdGlvbklkID0gbmV3IGZoaXIuSWRlbnRpZmllcihzb3VyY2UuY1Rlcm1pbmFsTW9kaWZpY2F0aW9uSWQsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydjVGVybWluYWxNb2RpZmljYXRpb24nXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuY1Rlcm1pbmFsTW9kaWZpY2F0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5jVGVybWluYWxNb2RpZmljYXRpb259LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2NUZXJtaW5hbE1vZGlmaWNhdGlvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLmNUZXJtaW5hbE1vZGlmaWNhdGlvbikgeyB0aGlzLmNUZXJtaW5hbE1vZGlmaWNhdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9jVGVybWluYWxNb2RpZmljYXRpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5jVGVybWluYWxNb2RpZmljYXRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fY1Rlcm1pbmFsTW9kaWZpY2F0aW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnU3Vic3RhbmNlUHJvdGVpbi5zdWJ1bml0JyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnc3VidW5pdCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnc2VxdWVuY2UnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2xlbmd0aCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnc2VxdWVuY2VBdHRhY2htZW50JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCduVGVybWluYWxNb2RpZmljYXRpb25JZCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnblRlcm1pbmFsTW9kaWZpY2F0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdjVGVybWluYWxNb2RpZmljYXRpb25JZCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnY1Rlcm1pbmFsTW9kaWZpY2F0aW9uJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBTdWJzdGFuY2VQcm90ZWluIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFN1YnN0YW5jZVByb3RlaW5BcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJTdWJzdGFuY2VQcm90ZWluXCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBTdWJzdGFuY2VQcm90ZWluIGRlc2NyaXB0aXZlIGVsZW1lbnRzIHdpbGwgb25seSBiZSB1c2VkIHdoZW4gYSBjb21wbGV0ZSBvciBwYXJ0aWFsIGFtaW5vIGFjaWQgc2VxdWVuY2UgaXMgYXZhaWxhYmxlIG9yIGRlcml2YWJsZSBmcm9tIGEgbnVjbGVpYyBhY2lkIHNlcXVlbmNlLlxyXG4gICAqL1xyXG4gIHNlcXVlbmNlVHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTnVtYmVyIG9mIGxpbmVhciBzZXF1ZW5jZXMgb2YgYW1pbm8gYWNpZHMgbGlua2VkIHRocm91Z2ggcGVwdGlkZSBib25kcy4gVGhlIG51bWJlciBvZiBzdWJ1bml0cyBjb25zdGl0dXRpbmcgdGhlIFN1YnN0YW5jZVByb3RlaW4gc2hhbGwgYmUgZGVzY3JpYmVkLiBJdCBpcyBwb3NzaWJsZSB0aGF0IHRoZSBudW1iZXIgb2Ygc3VidW5pdHMgY2FuIGJlIHZhcmlhYmxlLlxyXG4gICAqL1xyXG4gIG51bWJlck9mU3VidW5pdHM/OiBmaGlyLkZoaXJJbnRlZ2VyfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFN1YnN0YW5jZVByb3RlaW4ubnVtYmVyT2ZTdWJ1bml0c1xyXG4gICAqL1xyXG4gIF9udW1iZXJPZlN1YnVuaXRzPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgZGlzdWxwaGlkZSBib25kIGJldHdlZW4gdHdvIGN5c3RlaW5lIHJlc2lkdWVzIGVpdGhlciBvbiB0aGUgc2FtZSBzdWJ1bml0IG9yIG9uIHR3byBkaWZmZXJlbnQgc3VidW5pdHMgc2hhbGwgYmUgZGVzY3JpYmVkLiBUaGUgcG9zaXRpb24gb2YgdGhlIGRpc3VsZmlkZSBib25kcyBpbiB0aGUgU3Vic3RhbmNlUHJvdGVpbiBzaGFsbCBiZSBsaXN0ZWQgaW4gaW5jcmVhc2luZyBvcmRlciBvZiBzdWJ1bml0IG51bWJlciBhbmQgcG9zaXRpb24gd2l0aGluIHN1YnVuaXQgZm9sbG93ZWQgYnkgdGhlIGFiYnJldmlhdGlvbiBvZiB0aGUgYW1pbm8gYWNpZHMgaW52b2x2ZWQuIFRoZSBkaXN1bGZpZGUgbGlua2FnZSBwb3NpdGlvbnMgc2hhbGwgYWN0dWFsbHkgY29udGFpbiB0aGUgYW1pbm8gYWNpZCBDeXN0ZWluZSBhdCB0aGUgcmVzcGVjdGl2ZSBwb3NpdGlvbnMuXHJcbiAgICovXHJcbiAgZGlzdWxmaWRlTGlua2FnZT86IGZoaXIuRmhpclN0cmluZ1tdfChzdHJpbmd8bnVsbClbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFN1YnN0YW5jZVByb3RlaW4uZGlzdWxmaWRlTGlua2FnZVxyXG4gICAqL1xyXG4gIF9kaXN1bGZpZGVMaW5rYWdlPzooZmhpci5GaGlyRWxlbWVudEFyZ3N8bnVsbClbXTtcclxuICAvKipcclxuICAgKiBUaGlzIHN1YmNsYXVzZSByZWZlcnMgdG8gdGhlIGRlc2NyaXB0aW9uIG9mIGVhY2ggc3VidW5pdCBjb25zdGl0dXRpbmcgdGhlIFN1YnN0YW5jZVByb3RlaW4uIEEgc3VidW5pdCBpcyBhIGxpbmVhciBzZXF1ZW5jZSBvZiBhbWlubyBhY2lkcyBsaW5rZWQgdGhyb3VnaCBwZXB0aWRlIGJvbmRzLiBUaGUgU3VidW5pdCBpbmZvcm1hdGlvbiBzaGFsbCBiZSBwcm92aWRlZCB3aGVuIHRoZSBmaW5pc2hlZCBTdWJzdGFuY2VQcm90ZWluIGlzIGEgY29tcGxleCBvZiBtdWx0aXBsZSBzZXF1ZW5jZXM7IHN1YnVuaXRzIGFyZSBub3QgdXNlZCB0byBkZWxpbmVhdGUgZG9tYWlucyB3aXRoaW4gYSBzaW5nbGUgc2VxdWVuY2UuIFN1YnVuaXRzIGFyZSBsaXN0ZWQgaW4gb3JkZXIgb2YgZGVjcmVhc2luZyBsZW5ndGg7IHNlcXVlbmNlcyBvZiB0aGUgc2FtZSBsZW5ndGggd2lsbCBiZSBvcmRlcmVkIGJ5IGRlY3JlYXNpbmcgbW9sZWN1bGFyIHdlaWdodDsgc3VidW5pdHMgdGhhdCBoYXZlIGlkZW50aWNhbCBzZXF1ZW5jZXMgd2lsbCBiZSByZXBlYXRlZCBtdWx0aXBsZSB0aW1lcy5cclxuICAgKi9cclxuICBzdWJ1bml0PzogZmhpci5TdWJzdGFuY2VQcm90ZWluU3VidW5pdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBIFN1YnN0YW5jZVByb3RlaW4gaXMgZGVmaW5lZCBhcyBhIHNpbmdsZSB1bml0IG9mIGEgbGluZWFyIGFtaW5vIGFjaWQgc2VxdWVuY2UsIG9yIGEgY29tYmluYXRpb24gb2Ygc3VidW5pdHMgdGhhdCBhcmUgZWl0aGVyIGNvdmFsZW50bHkgbGlua2VkIG9yIGhhdmUgYSBkZWZpbmVkIGludmFyaWFudCBzdG9pY2hpb21ldHJpYyByZWxhdGlvbnNoaXAuIFRoaXMgaW5jbHVkZXMgYWxsIHN5bnRoZXRpYywgcmVjb21iaW5hbnQgYW5kIHB1cmlmaWVkIFN1YnN0YW5jZVByb3RlaW5zIG9mIGRlZmluZWQgc2VxdWVuY2UsIHdoZXRoZXIgdGhlIHVzZSBpcyB0aGVyYXBldXRpYyBvciBwcm9waHlsYWN0aWMuIFRoaXMgc2V0IG9mIGVsZW1lbnRzIHdpbGwgYmUgdXNlZCB0byBkZXNjcmliZSBhbGJ1bWlucywgY29hZ3VsYXRpb24gZmFjdG9ycywgY3l0b2tpbmVzLCBncm93dGggZmFjdG9ycywgcGVwdGlkZS9TdWJzdGFuY2VQcm90ZWluIGhvcm1vbmVzLCBlbnp5bWVzLCB0b3hpbnMsIHRveG9pZHMsIHJlY29tYmluYW50IHZhY2NpbmVzLCBhbmQgaW1tdW5vbW9kdWxhdG9ycy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTdWJzdGFuY2VQcm90ZWluIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdTdWJzdGFuY2VQcm90ZWluJztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIlN1YnN0YW5jZVByb3RlaW5cIjtcclxuICAvKipcclxuICAgKiBUaGUgU3Vic3RhbmNlUHJvdGVpbiBkZXNjcmlwdGl2ZSBlbGVtZW50cyB3aWxsIG9ubHkgYmUgdXNlZCB3aGVuIGEgY29tcGxldGUgb3IgcGFydGlhbCBhbWlubyBhY2lkIHNlcXVlbmNlIGlzIGF2YWlsYWJsZSBvciBkZXJpdmFibGUgZnJvbSBhIG51Y2xlaWMgYWNpZCBzZXF1ZW5jZS5cclxuICAgKi9cclxuICBwdWJsaWMgc2VxdWVuY2VUeXBlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE51bWJlciBvZiBsaW5lYXIgc2VxdWVuY2VzIG9mIGFtaW5vIGFjaWRzIGxpbmtlZCB0aHJvdWdoIHBlcHRpZGUgYm9uZHMuIFRoZSBudW1iZXIgb2Ygc3VidW5pdHMgY29uc3RpdHV0aW5nIHRoZSBTdWJzdGFuY2VQcm90ZWluIHNoYWxsIGJlIGRlc2NyaWJlZC4gSXQgaXMgcG9zc2libGUgdGhhdCB0aGUgbnVtYmVyIG9mIHN1YnVuaXRzIGNhbiBiZSB2YXJpYWJsZS5cclxuICAgKi9cclxuICBwdWJsaWMgbnVtYmVyT2ZTdWJ1bml0cz86IGZoaXIuRmhpckludGVnZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkaXN1bHBoaWRlIGJvbmQgYmV0d2VlbiB0d28gY3lzdGVpbmUgcmVzaWR1ZXMgZWl0aGVyIG9uIHRoZSBzYW1lIHN1YnVuaXQgb3Igb24gdHdvIGRpZmZlcmVudCBzdWJ1bml0cyBzaGFsbCBiZSBkZXNjcmliZWQuIFRoZSBwb3NpdGlvbiBvZiB0aGUgZGlzdWxmaWRlIGJvbmRzIGluIHRoZSBTdWJzdGFuY2VQcm90ZWluIHNoYWxsIGJlIGxpc3RlZCBpbiBpbmNyZWFzaW5nIG9yZGVyIG9mIHN1YnVuaXQgbnVtYmVyIGFuZCBwb3NpdGlvbiB3aXRoaW4gc3VidW5pdCBmb2xsb3dlZCBieSB0aGUgYWJicmV2aWF0aW9uIG9mIHRoZSBhbWlubyBhY2lkcyBpbnZvbHZlZC4gVGhlIGRpc3VsZmlkZSBsaW5rYWdlIHBvc2l0aW9ucyBzaGFsbCBhY3R1YWxseSBjb250YWluIHRoZSBhbWlubyBhY2lkIEN5c3RlaW5lIGF0IHRoZSByZXNwZWN0aXZlIHBvc2l0aW9ucy5cclxuICAgKi9cclxuICBwdWJsaWMgZGlzdWxmaWRlTGlua2FnZTogZmhpci5GaGlyU3RyaW5nW107XHJcbiAgLyoqXHJcbiAgICogVGhpcyBzdWJjbGF1c2UgcmVmZXJzIHRvIHRoZSBkZXNjcmlwdGlvbiBvZiBlYWNoIHN1YnVuaXQgY29uc3RpdHV0aW5nIHRoZSBTdWJzdGFuY2VQcm90ZWluLiBBIHN1YnVuaXQgaXMgYSBsaW5lYXIgc2VxdWVuY2Ugb2YgYW1pbm8gYWNpZHMgbGlua2VkIHRocm91Z2ggcGVwdGlkZSBib25kcy4gVGhlIFN1YnVuaXQgaW5mb3JtYXRpb24gc2hhbGwgYmUgcHJvdmlkZWQgd2hlbiB0aGUgZmluaXNoZWQgU3Vic3RhbmNlUHJvdGVpbiBpcyBhIGNvbXBsZXggb2YgbXVsdGlwbGUgc2VxdWVuY2VzOyBzdWJ1bml0cyBhcmUgbm90IHVzZWQgdG8gZGVsaW5lYXRlIGRvbWFpbnMgd2l0aGluIGEgc2luZ2xlIHNlcXVlbmNlLiBTdWJ1bml0cyBhcmUgbGlzdGVkIGluIG9yZGVyIG9mIGRlY3JlYXNpbmcgbGVuZ3RoOyBzZXF1ZW5jZXMgb2YgdGhlIHNhbWUgbGVuZ3RoIHdpbGwgYmUgb3JkZXJlZCBieSBkZWNyZWFzaW5nIG1vbGVjdWxhciB3ZWlnaHQ7IHN1YnVuaXRzIHRoYXQgaGF2ZSBpZGVudGljYWwgc2VxdWVuY2VzIHdpbGwgYmUgcmVwZWF0ZWQgbXVsdGlwbGUgdGltZXMuXHJcbiAgICovXHJcbiAgcHVibGljIHN1YnVuaXQ6IGZoaXIuU3Vic3RhbmNlUHJvdGVpblN1YnVuaXRbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBTdWJzdGFuY2VQcm90ZWluIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8U3Vic3RhbmNlUHJvdGVpbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdTdWJzdGFuY2VQcm90ZWluJztcclxuICAgIGlmIChzb3VyY2VbJ3NlcXVlbmNlVHlwZSddKSB7IHRoaXMuc2VxdWVuY2VUeXBlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5zZXF1ZW5jZVR5cGUsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydudW1iZXJPZlN1YnVuaXRzJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLm51bWJlck9mU3VidW5pdHMgPSBuZXcgZmhpci5GaGlySW50ZWdlcih7dmFsdWU6IHNvdXJjZS5udW1iZXJPZlN1YnVuaXRzfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19udW1iZXJPZlN1YnVuaXRzJ10pIHtcclxuICAgICAgaWYgKHRoaXMubnVtYmVyT2ZTdWJ1bml0cykgeyB0aGlzLm51bWJlck9mU3VidW5pdHMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbnVtYmVyT2ZTdWJ1bml0cyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLm51bWJlck9mU3VidW5pdHMgPSBuZXcgZmhpci5GaGlySW50ZWdlcihzb3VyY2UuX251bWJlck9mU3VidW5pdHMgYXMgUGFydGlhbDxmaGlyLkZoaXJJbnRlZ2VyQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydkaXN1bGZpZGVMaW5rYWdlJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLmRpc3VsZmlkZUxpbmthZ2UgPSBzb3VyY2UuZGlzdWxmaWRlTGlua2FnZS5tYXAoKHgpID0+IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiB4fSwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5kaXN1bGZpZGVMaW5rYWdlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ19kaXN1bGZpZGVMaW5rYWdlJ10pIHtcclxuICAgICAgc291cmNlLl9kaXN1bGZpZGVMaW5rYWdlLmZvckVhY2goKHgsaSkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLmRpc3VsZmlkZUxpbmthZ2UubGVuZ3RoID49IGkpIHsgaWYgKHgpIHsgdGhpcy5kaXN1bGZpZGVMaW5rYWdlW2ldLmFkZEV4dGVuZGVkUHJvcGVydGllcyh4KTsgfSB9XHJcbiAgICAgICAgZWxzZSB7IGlmICh4KSB7IHRoaXMuZGlzdWxmaWRlTGlua2FnZS5wdXNoKG5ldyBmaGlyLkZoaXJTdHJpbmcoeCBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KSk7IH0gfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3N1YnVuaXQnXSkgeyB0aGlzLnN1YnVuaXQgPSBzb3VyY2Uuc3VidW5pdC5tYXAoKHgpID0+IG5ldyBmaGlyLlN1YnN0YW5jZVByb3RlaW5TdWJ1bml0KHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3VidW5pdCA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnU3Vic3RhbmNlUHJvdGVpbicgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3NlcXVlbmNlVHlwZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnbnVtYmVyT2ZTdWJ1bml0cycsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnZGlzdWxmaWRlTGlua2FnZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnc3VidW5pdCcsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4iXX0=