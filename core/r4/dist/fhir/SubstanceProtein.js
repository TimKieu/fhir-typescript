// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: SubstanceProtein
import * as fhir from '../fhir.js';
/**
 * This subclause refers to the description of each subunit constituting the SubstanceProtein. A subunit is a linear sequence of amino acids linked through peptide bonds. The Subunit information shall be provided when the finished SubstanceProtein is a complex of multiple sequences; subunits are not used to delineate domains within a single sequence. Subunits are listed in order of decreasing length; sequences of the same length will be ordered by decreasing molecular weight; subunits that have identical sequences will be repeated multiple times.
 */
export class SubstanceProteinSubunit extends fhir.BackboneElement {
    /**
     * Default constructor for SubstanceProteinSubunit - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['subunit']) {
            this.subunit = new fhir.FhirInteger({ value: source.subunit });
        }
        if (source['_subunit']) {
            if (this.subunit) {
                this.subunit.addExtendedProperties(source._subunit);
            }
            else {
                this.subunit = new fhir.FhirInteger(source._subunit);
            }
        }
        if (source['sequence']) {
            this.sequence = new fhir.FhirString({ value: source.sequence });
        }
        if (source['_sequence']) {
            if (this.sequence) {
                this.sequence.addExtendedProperties(source._sequence);
            }
            else {
                this.sequence = new fhir.FhirString(source._sequence);
            }
        }
        if (source['length']) {
            this.length = new fhir.FhirInteger({ value: source.length });
        }
        if (source['_length']) {
            if (this.length) {
                this.length.addExtendedProperties(source._length);
            }
            else {
                this.length = new fhir.FhirInteger(source._length);
            }
        }
        if (source['sequenceAttachment']) {
            this.sequenceAttachment = new fhir.Attachment(source.sequenceAttachment);
        }
        if (source['nTerminalModificationId']) {
            this.nTerminalModificationId = new fhir.Identifier(source.nTerminalModificationId);
        }
        if (source['nTerminalModification']) {
            this.nTerminalModification = new fhir.FhirString({ value: source.nTerminalModification });
        }
        if (source['_nTerminalModification']) {
            if (this.nTerminalModification) {
                this.nTerminalModification.addExtendedProperties(source._nTerminalModification);
            }
            else {
                this.nTerminalModification = new fhir.FhirString(source._nTerminalModification);
            }
        }
        if (source['cTerminalModificationId']) {
            this.cTerminalModificationId = new fhir.Identifier(source.cTerminalModificationId);
        }
        if (source['cTerminalModification']) {
            this.cTerminalModification = new fhir.FhirString({ value: source.cTerminalModification });
        }
        if (source['_cTerminalModification']) {
            if (this.cTerminalModification) {
                this.cTerminalModification.addExtendedProperties(source._cTerminalModification);
            }
            else {
                this.cTerminalModification = new fhir.FhirString(source._cTerminalModification);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SubstanceProtein.subunit';
        }
        iss.push(...this.vOS('subunit', exp));
        iss.push(...this.vOS('sequence', exp));
        iss.push(...this.vOS('length', exp));
        iss.push(...this.vOS('sequenceAttachment', exp));
        iss.push(...this.vOS('nTerminalModificationId', exp));
        iss.push(...this.vOS('nTerminalModification', exp));
        iss.push(...this.vOS('cTerminalModificationId', exp));
        iss.push(...this.vOS('cTerminalModification', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceProteinSubunit._fts_dataType = 'SubstanceProteinSubunit';
/**
 * A SubstanceProtein is defined as a single unit of a linear amino acid sequence, or a combination of subunits that are either covalently linked or have a defined invariant stoichiometric relationship. This includes all synthetic, recombinant and purified SubstanceProteins of defined sequence, whether the use is therapeutic or prophylactic. This set of elements will be used to describe albumins, coagulation factors, cytokines, growth factors, peptide/SubstanceProtein hormones, enzymes, toxins, toxoids, recombinant vaccines, and immunomodulators.
 */
export class SubstanceProtein extends fhir.DomainResource {
    /**
     * Default constructor for SubstanceProtein - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'SubstanceProtein';
        if (source['sequenceType']) {
            this.sequenceType = new fhir.CodeableConcept(source.sequenceType);
        }
        if (source['numberOfSubunits']) {
            this.numberOfSubunits = new fhir.FhirInteger({ value: source.numberOfSubunits });
        }
        if (source['_numberOfSubunits']) {
            if (this.numberOfSubunits) {
                this.numberOfSubunits.addExtendedProperties(source._numberOfSubunits);
            }
            else {
                this.numberOfSubunits = new fhir.FhirInteger(source._numberOfSubunits);
            }
        }
        if (source['disulfideLinkage']) {
            this.disulfideLinkage = source.disulfideLinkage.map((x) => new fhir.FhirString({ value: x }));
        }
        else {
            this.disulfideLinkage = [];
        }
        if (source['_disulfideLinkage']) {
            source._disulfideLinkage.forEach((x, i) => {
                if (this.disulfideLinkage.length >= i) {
                    if (x) {
                        this.disulfideLinkage[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.disulfideLinkage.push(new fhir.FhirString(x));
                    }
                }
            });
        }
        if (source['subunit']) {
            this.subunit = source.subunit.map((x) => new fhir.SubstanceProteinSubunit(x));
        }
        else {
            this.subunit = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SubstanceProtein';
        }
        iss.push(...this.vRPS('resourceType', exp));
        iss.push(...this.vOS('sequenceType', exp));
        iss.push(...this.vOS('numberOfSubunits', exp));
        iss.push(...this.vOA('disulfideLinkage', exp));
        iss.push(...this.vOA('subunit', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceProtein._fts_dataType = 'SubstanceProtein';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3Vic3RhbmNlUHJvdGVpbi5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvU3Vic3RhbmNlUHJvdGVpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQyxrQ0FBa0M7QUFFbEMsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUE0RG5DOztHQUVHO0FBQ0gsTUFBTSxPQUFPLHVCQUF3QixTQUFRLElBQUksQ0FBQyxlQUFlO0lBcUMvRDs7T0FFRztJQUNILFlBQVksU0FBOEMsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDcEcsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxPQUFPLEVBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDeEYsSUFBSSxNQUFNLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFDdEIsSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFO2dCQUFFLElBQUksQ0FBQyxPQUFPLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLFFBQVMsQ0FBQyxDQUFDO2FBQUU7aUJBQ3RFO2dCQUFFLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxRQUF5QyxDQUFDLENBQUM7YUFBRTtTQUNoRztRQUNELElBQUksTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLFFBQVEsRUFBQyxDQUFDLENBQUM7U0FBRTtRQUMxRixJQUFJLE1BQU0sQ0FBQyxXQUFXLENBQUMsRUFBRTtZQUN2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QUksQ0FBQyxHQUFHLENBQUMsa0JBQWtCLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUM5QyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzlDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3JDLE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQzs7QUEzREQ7O0dBRUc7QUFDNkIsOEJBQWEsR0FBVSxrQkFBa0IsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNC5jb3JlIHZlcnNpb246IDQuMC4xXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogU3Vic3RhbmNlUHJvdGVpblxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBTdWJzdGFuY2VQcm90ZWluU3VidW5pdCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTdWJzdGFuY2VQcm90ZWluU3VidW5pdEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEluZGV4IG9mIHByaW1hcnkgc2VxdWVuY2VzIG9mIGFtaW5vIGFjaWRzIGxpbmtlZCB0aHJvdWdoIHBlcHRpZGUgYm9uZHMgaW4gb3JkZXIgb2YgZGVjcmVhc2luZyBsZW5ndGguIFNlcXVlbmNlcyBvZiB0aGUgc2FtZSBsZW5ndGggd2lsbCBiZSBvcmRlcmVkIGJ5IG1vbGVjdWxhciB3ZWlnaHQuIFN1YnVuaXRzIHRoYXQgaGF2ZSBpZGVudGljYWwgc2VxdWVuY2VzIHdpbGwgYmUgcmVwZWF0ZWQgYW5kIGhhdmUgc2VxdWVudGlhbCBzdWJzY3JpcHRzLlxyXG4gICAqL1xyXG4gIHN1YnVuaXQ/OiBmaGlyLkZoaXJJbnRlZ2VyfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFN1YnN0YW5jZVByb3RlaW4uc3VidW5pdC5zdWJ1bml0XHJcbiAgICovXHJcbiAgX3N1YnVuaXQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzZXF1ZW5jZSBpbmZvcm1hdGlvbiBzaGFsbCBiZSBwcm92aWRlZCBlbnVtZXJhdGluZyB0aGUgYW1pbm8gYWNpZHMgZnJvbSBOLSB0byBDLXRlcm1pbmFsIGVuZCB1c2luZyBzdGFuZGFyZCBzaW5nbGUtbGV0dGVyIGFtaW5vIGFjaWQgY29kZXMuIFVwcGVyY2FzZSBzaGFsbCBiZSB1c2VkIGZvciBMLWFtaW5vIGFjaWRzIGFuZCBsb3dlcmNhc2UgZm9yIEQtYW1pbm8gYWNpZHMuIFRyYW5zY3JpYmVkIFN1YnN0YW5jZVByb3RlaW5zIHdpbGwgYWx3YXlzIGJlIGRlc2NyaWJlZCB1c2luZyB0aGUgdHJhbnNsYXRlZCBzZXF1ZW5jZTsgZm9yIHN5bnRoZXRpYyBwZXB0aWRlIGNvbnRhaW5pbmcgYW1pbm8gYWNpZHMgdGhhdCBhcmUgbm90IHJlcHJlc2VudGVkIHdpdGggYSBzaW5nbGUgbGV0dGVyIGNvZGUgYW4gWCBzaG91bGQgYmUgdXNlZCB3aXRoaW4gdGhlIHNlcXVlbmNlLiBUaGUgbW9kaWZpZWQgYW1pbm8gYWNpZHMgd2lsbCBiZSBkaXN0aW5ndWlzaGVkIGJ5IHRoZWlyIHBvc2l0aW9uIGluIHRoZSBzZXF1ZW5jZS5cclxuICAgKi9cclxuICBzZXF1ZW5jZT86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTdWJzdGFuY2VQcm90ZWluLnN1YnVuaXQuc2VxdWVuY2VcclxuICAgKi9cclxuICBfc2VxdWVuY2U/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIExlbmd0aCBvZiBsaW5lYXIgc2VxdWVuY2VzIG9mIGFtaW5vIGFjaWRzIGNvbnRhaW5lZCBpbiB0aGUgc3VidW5pdC5cclxuICAgKi9cclxuICBsZW5ndGg/OiBmaGlyLkZoaXJJbnRlZ2VyfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFN1YnN0YW5jZVByb3RlaW4uc3VidW5pdC5sZW5ndGhcclxuICAgKi9cclxuICBfbGVuZ3RoPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgc2VxdWVuY2UgaW5mb3JtYXRpb24gc2hhbGwgYmUgcHJvdmlkZWQgZW51bWVyYXRpbmcgdGhlIGFtaW5vIGFjaWRzIGZyb20gTi0gdG8gQy10ZXJtaW5hbCBlbmQgdXNpbmcgc3RhbmRhcmQgc2luZ2xlLWxldHRlciBhbWlubyBhY2lkIGNvZGVzLiBVcHBlcmNhc2Ugc2hhbGwgYmUgdXNlZCBmb3IgTC1hbWlubyBhY2lkcyBhbmQgbG93ZXJjYXNlIGZvciBELWFtaW5vIGFjaWRzLiBUcmFuc2NyaWJlZCBTdWJzdGFuY2VQcm90ZWlucyB3aWxsIGFsd2F5cyBiZSBkZXNjcmliZWQgdXNpbmcgdGhlIHRyYW5zbGF0ZWQgc2VxdWVuY2U7IGZvciBzeW50aGV0aWMgcGVwdGlkZSBjb250YWluaW5nIGFtaW5vIGFjaWRzIHRoYXQgYXJlIG5vdCByZXByZXNlbnRlZCB3aXRoIGEgc2luZ2xlIGxldHRlciBjb2RlIGFuIFggc2hvdWxkIGJlIHVzZWQgd2l0aGluIHRoZSBzZXF1ZW5jZS4gVGhlIG1vZGlmaWVkIGFtaW5vIGFjaWRzIHdpbGwgYmUgZGlzdGluZ3Vpc2hlZCBieSB0aGVpciBwb3NpdGlvbiBpbiB0aGUgc2VxdWVuY2UuXHJcbiAgICovXHJcbiAgc2VxdWVuY2VBdHRhY2htZW50PzogZmhpci5BdHRhY2htZW50QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVW5pcXVlIGlkZW50aWZpZXIgZm9yIG1vbGVjdWxhciBmcmFnbWVudCBtb2RpZmljYXRpb24gYmFzZWQgb24gdGhlIElTTyAxMTIzOCBTdWJzdGFuY2UgSUQuXHJcbiAgICovXHJcbiAgblRlcm1pbmFsTW9kaWZpY2F0aW9uSWQ/OiBmaGlyLklkZW50aWZpZXJBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbmFtZSBvZiB0aGUgZnJhZ21lbnQgbW9kaWZpZWQgYXQgdGhlIE4tdGVybWluYWwgb2YgdGhlIFN1YnN0YW5jZVByb3RlaW4gc2hhbGwgYmUgc3BlY2lmaWVkLlxyXG4gICAqL1xyXG4gIG5UZXJtaW5hbE1vZGlmaWNhdGlvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTdWJzdGFuY2VQcm90ZWluLnN1YnVuaXQublRlcm1pbmFsTW9kaWZpY2F0aW9uXHJcbiAgICovXHJcbiAgX25UZXJtaW5hbE1vZGlmaWNhdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVW5pcXVlIGlkZW50aWZpZXIgZm9yIG1vbGVjdWxhciBmcmFnbWVudCBtb2RpZmljYXRpb24gYmFzZWQgb24gdGhlIElTTyAxMTIzOCBTdWJzdGFuY2UgSUQuXHJcbiAgICovXHJcbiAgY1Rlcm1pbmFsTW9kaWZpY2F0aW9uSWQ/OiBmaGlyLklkZW50aWZpZXJBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbW9kaWZpY2F0aW9uIGF0IHRoZSBDLXRlcm1pbmFsIHNoYWxsIGJlIHNwZWNpZmllZC5cclxuICAgKi9cclxuICBjVGVybWluYWxNb2RpZmljYXRpb24/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3Vic3RhbmNlUHJvdGVpbi5zdWJ1bml0LmNUZXJtaW5hbE1vZGlmaWNhdGlvblxyXG4gICAqL1xyXG4gIF9jVGVybWluYWxNb2RpZmljYXRpb24/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG59XHJcblxyXG4vKipcclxuICogVGhpcyBzdWJjbGF1c2UgcmVmZXJzIHRvIHRoZSBkZXNjcmlwdGlvbiBvZiBlYWNoIHN1YnVuaXQgY29uc3RpdHV0aW5nIHRoZSBTdWJzdGFuY2VQcm90ZWluLiBBIHN1YnVuaXQgaXMgYSBsaW5lYXIgc2VxdWVuY2Ugb2YgYW1pbm8gYWNpZHMgbGlua2VkIHRocm91Z2ggcGVwdGlkZSBib25kcy4gVGhlIFN1YnVuaXQgaW5mb3JtYXRpb24gc2hhbGwgYmUgcHJvdmlkZWQgd2hlbiB0aGUgZmluaXNoZWQgU3Vic3RhbmNlUHJvdGVpbiBpcyBhIGNvbXBsZXggb2YgbXVsdGlwbGUgc2VxdWVuY2VzOyBzdWJ1bml0cyBhcmUgbm90IHVzZWQgdG8gZGVsaW5lYXRlIGRvbWFpbnMgd2l0aGluIGEgc2luZ2xlIHNlcXVlbmNlLiBTdWJ1bml0cyBhcmUgbGlzdGVkIGluIG9yZGVyIG9mIGRlY3JlYXNpbmcgbGVuZ3RoOyBzZXF1ZW5jZXMgb2YgdGhlIHNhbWUgbGVuZ3RoIHdpbGwgYmUgb3JkZXJlZCBieSBkZWNyZWFzaW5nIG1vbGVjdWxhciB3ZWlnaHQ7IHN1YnVuaXRzIHRoYXQgaGF2ZSBpZGVudGljYWwgc2VxdWVuY2VzIHdpbGwgYmUgcmVwZWF0ZWQgbXVsdGlwbGUgdGltZXMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3Vic3RhbmNlUHJvdGVpblN1YnVuaXQgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdTdWJzdGFuY2VQcm90ZWluU3VidW5pdCc7XHJcbiAgLyoqXHJcbiAgICogSW5kZXggb2YgcHJpbWFyeSBzZXF1ZW5jZXMgb2YgYW1pbm8gYWNpZHMgbGlua2VkIHRocm91Z2ggcGVwdGlkZSBib25kcyBpbiBvcmRlciBvZiBkZWNyZWFzaW5nIGxlbmd0aC4gU2VxdWVuY2VzIG9mIHRoZSBzYW1lIGxlbmd0aCB3aWxsIGJlIG9yZGVyZWQgYnkgbW9sZWN1bGFyIHdlaWdodC4gU3VidW5pdHMgdGhhdCBoYXZlIGlkZW50aWNhbCBzZXF1ZW5jZXMgd2lsbCBiZSByZXBlYXRlZCBhbmQgaGF2ZSBzZXF1ZW50aWFsIHN1YnNjcmlwdHMuXHJcbiAgICovXHJcbiAgcHVibGljIHN1YnVuaXQ/OiBmaGlyLkZoaXJJbnRlZ2VyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc2VxdWVuY2UgaW5mb3JtYXRpb24gc2hhbGwgYmUgcHJvdmlkZWQgZW51bWVyYXRpbmcgdGhlIGFtaW5vIGFjaWRzIGZyb20gTi0gdG8gQy10ZXJtaW5hbCBlbmQgdXNpbmcgc3RhbmRhcmQgc2luZ2xlLWxldHRlciBhbWlubyBhY2lkIGNvZGVzLiBVcHBlcmNhc2Ugc2hhbGwgYmUgdXNlZCBmb3IgTC1hbWlubyBhY2lkcyBhbmQgbG93ZXJjYXNlIGZvciBELWFtaW5vIGFjaWRzLiBUcmFuc2NyaWJlZCBTdWJzdGFuY2VQcm90ZWlucyB3aWxsIGFsd2F5cyBiZSBkZXNjcmliZWQgdXNpbmcgdGhlIHRyYW5zbGF0ZWQgc2VxdWVuY2U7IGZvciBzeW50aGV0aWMgcGVwdGlkZSBjb250YWluaW5nIGFtaW5vIGFjaWRzIHRoYXQgYXJlIG5vdCByZXByZXNlbnRlZCB3aXRoIGEgc2luZ2xlIGxldHRlciBjb2RlIGFuIFggc2hvdWxkIGJlIHVzZWQgd2l0aGluIHRoZSBzZXF1ZW5jZS4gVGhlIG1vZGlmaWVkIGFtaW5vIGFjaWRzIHdpbGwgYmUgZGlzdGluZ3Vpc2hlZCBieSB0aGVpciBwb3NpdGlvbiBpbiB0aGUgc2VxdWVuY2UuXHJcbiAgICovXHJcbiAgcHVibGljIHNlcXVlbmNlPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBMZW5ndGggb2YgbGluZWFyIHNlcXVlbmNlcyBvZiBhbWlubyBhY2lkcyBjb250YWluZWQgaW4gdGhlIHN1YnVuaXQuXHJcbiAgICovXHJcbiAgcHVibGljIGxlbmd0aD86IGZoaXIuRmhpckludGVnZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzZXF1ZW5jZSBpbmZvcm1hdGlvbiBzaGFsbCBiZSBwcm92aWRlZCBlbnVtZXJhdGluZyB0aGUgYW1pbm8gYWNpZHMgZnJvbSBOLSB0byBDLXRlcm1pbmFsIGVuZCB1c2luZyBzdGFuZGFyZCBzaW5nbGUtbGV0dGVyIGFtaW5vIGFjaWQgY29kZXMuIFVwcGVyY2FzZSBzaGFsbCBiZSB1c2VkIGZvciBMLWFtaW5vIGFjaWRzIGFuZCBsb3dlcmNhc2UgZm9yIEQtYW1pbm8gYWNpZHMuIFRyYW5zY3JpYmVkIFN1YnN0YW5jZVByb3RlaW5zIHdpbGwgYWx3YXlzIGJlIGRlc2NyaWJlZCB1c2luZyB0aGUgdHJhbnNsYXRlZCBzZXF1ZW5jZTsgZm9yIHN5bnRoZXRpYyBwZXB0aWRlIGNvbnRhaW5pbmcgYW1pbm8gYWNpZHMgdGhhdCBhcmUgbm90IHJlcHJlc2VudGVkIHdpdGggYSBzaW5nbGUgbGV0dGVyIGNvZGUgYW4gWCBzaG91bGQgYmUgdXNlZCB3aXRoaW4gdGhlIHNlcXVlbmNlLiBUaGUgbW9kaWZpZWQgYW1pbm8gYWNpZHMgd2lsbCBiZSBkaXN0aW5ndWlzaGVkIGJ5IHRoZWlyIHBvc2l0aW9uIGluIHRoZSBzZXF1ZW5jZS5cclxuICAgKi9cclxuICBwdWJsaWMgc2VxdWVuY2VBdHRhY2htZW50PzogZmhpci5BdHRhY2htZW50fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBVbmlxdWUgaWRlbnRpZmllciBmb3IgbW9sZWN1bGFyIGZyYWdtZW50IG1vZGlmaWNhdGlvbiBiYXNlZCBvbiB0aGUgSVNPIDExMjM4IFN1YnN0YW5jZSBJRC5cclxuICAgKi9cclxuICBwdWJsaWMgblRlcm1pbmFsTW9kaWZpY2F0aW9uSWQ/OiBmaGlyLklkZW50aWZpZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBmcmFnbWVudCBtb2RpZmllZCBhdCB0aGUgTi10ZXJtaW5hbCBvZiB0aGUgU3Vic3RhbmNlUHJvdGVpbiBzaGFsbCBiZSBzcGVjaWZpZWQuXHJcbiAgICovXHJcbiAgcHVibGljIG5UZXJtaW5hbE1vZGlmaWNhdGlvbj86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVW5pcXVlIGlkZW50aWZpZXIgZm9yIG1vbGVjdWxhciBmcmFnbWVudCBtb2RpZmljYXRpb24gYmFzZWQgb24gdGhlIElTTyAxMTIzOCBTdWJzdGFuY2UgSUQuXHJcbiAgICovXHJcbiAgcHVibGljIGNUZXJtaW5hbE1vZGlmaWNhdGlvbklkPzogZmhpci5JZGVudGlmaWVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbW9kaWZpY2F0aW9uIGF0IHRoZSBDLXRlcm1pbmFsIHNoYWxsIGJlIHNwZWNpZmllZC5cclxuICAgKi9cclxuICBwdWJsaWMgY1Rlcm1pbmFsTW9kaWZpY2F0aW9uPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBTdWJzdGFuY2VQcm90ZWluU3VidW5pdCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFN1YnN0YW5jZVByb3RlaW5TdWJ1bml0QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3N1YnVuaXQnXSkgeyB0aGlzLnN1YnVuaXQgPSBuZXcgZmhpci5GaGlySW50ZWdlcih7dmFsdWU6IHNvdXJjZS5zdWJ1bml0fSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zdWJ1bml0J10pIHtcclxuICAgICAgaWYgKHRoaXMuc3VidW5pdCkgeyB0aGlzLnN1YnVuaXQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc3VidW5pdCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnN1YnVuaXQgPSBuZXcgZmhpci5GaGlySW50ZWdlcihzb3VyY2UuX3N1YnVuaXQgYXMgUGFydGlhbDxmaGlyLkZoaXJJbnRlZ2VyQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydzZXF1ZW5jZSddKSB7IHRoaXMuc2VxdWVuY2UgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnNlcXVlbmNlfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zZXF1ZW5jZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnNlcXVlbmNlKSB7IHRoaXMuc2VxdWVuY2UuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc2VxdWVuY2UhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zZXF1ZW5jZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9zZXF1ZW5jZSBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnbGVuZ3RoJ10pIHsgdGhpcy5sZW5ndGggPSBuZXcgZmhpci5GaGlySW50ZWdlcih7dmFsdWU6IHNvdXJjZS5sZW5ndGh9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2xlbmd0aCddKSB7XHJcbiAgICAgIGlmICh0aGlzLmxlbmd0aCkgeyB0aGlzLmxlbmd0aC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9sZW5ndGghKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5sZW5ndGggPSBuZXcgZmhpci5GaGlySW50ZWdlcihzb3VyY2UuX2xlbmd0aCBhcyBQYXJ0aWFsPGZoaXIuRmhpckludGVnZXJBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3NlcXVlbmNlQXR0YWNobWVudCddKSB7IHRoaXMuc2VxdWVuY2VBdHRhY2htZW50ID0gbmV3IGZoaXIuQXR0YWNobWVudChzb3VyY2Uuc2VxdWVuY2VBdHRhY2htZW50KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnblRlcm1pbmFsTW9kaWZpY2F0aW9uSWQnXSkgeyB0aGlzLm5UZXJtaW5hbE1vZGlmaWNhdGlvbklkID0gbmV3IGZoaXIuSWRlbnRpZmllcihzb3VyY2UublRlcm1pbmFsTW9kaWZpY2F0aW9uSWQpOyB9XHJcbiAgICBpZiAoc291cmNlWyduVGVybWluYWxNb2RpZmljYXRpb24nXSkgeyB0aGlzLm5UZXJtaW5hbE1vZGlmaWNhdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UublRlcm1pbmFsTW9kaWZpY2F0aW9ufSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19uVGVybWluYWxNb2RpZmljYXRpb24nXSkge1xyXG4gICAgICBpZiAodGhpcy5uVGVybWluYWxNb2RpZmljYXRpb24pIHsgdGhpcy5uVGVybWluYWxNb2RpZmljYXRpb24uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fblRlcm1pbmFsTW9kaWZpY2F0aW9uISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMublRlcm1pbmFsTW9kaWZpY2F0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX25UZXJtaW5hbE1vZGlmaWNhdGlvbiBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnY1Rlcm1pbmFsTW9kaWZpY2F0aW9uSWQnXSkgeyB0aGlzLmNUZXJtaW5hbE1vZGlmaWNhdGlvbklkID0gbmV3IGZoaXIuSWRlbnRpZmllcihzb3VyY2UuY1Rlcm1pbmFsTW9kaWZpY2F0aW9uSWQpOyB9XHJcbiAgICBpZiAoc291cmNlWydjVGVybWluYWxNb2RpZmljYXRpb24nXSkgeyB0aGlzLmNUZXJtaW5hbE1vZGlmaWNhdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuY1Rlcm1pbmFsTW9kaWZpY2F0aW9ufSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19jVGVybWluYWxNb2RpZmljYXRpb24nXSkge1xyXG4gICAgICBpZiAodGhpcy5jVGVybWluYWxNb2RpZmljYXRpb24pIHsgdGhpcy5jVGVybWluYWxNb2RpZmljYXRpb24uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fY1Rlcm1pbmFsTW9kaWZpY2F0aW9uISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuY1Rlcm1pbmFsTW9kaWZpY2F0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2NUZXJtaW5hbE1vZGlmaWNhdGlvbiBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ1N1YnN0YW5jZVByb3RlaW4uc3VidW5pdCcgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3N1YnVuaXQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3NlcXVlbmNlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdsZW5ndGgnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3NlcXVlbmNlQXR0YWNobWVudCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnblRlcm1pbmFsTW9kaWZpY2F0aW9uSWQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ25UZXJtaW5hbE1vZGlmaWNhdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnY1Rlcm1pbmFsTW9kaWZpY2F0aW9uSWQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2NUZXJtaW5hbE1vZGlmaWNhdGlvbicsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgU3Vic3RhbmNlUHJvdGVpbiB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTdWJzdGFuY2VQcm90ZWluQXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiU3Vic3RhbmNlUHJvdGVpblwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgU3Vic3RhbmNlUHJvdGVpbiBkZXNjcmlwdGl2ZSBlbGVtZW50cyB3aWxsIG9ubHkgYmUgdXNlZCB3aGVuIGEgY29tcGxldGUgb3IgcGFydGlhbCBhbWlubyBhY2lkIHNlcXVlbmNlIGlzIGF2YWlsYWJsZSBvciBkZXJpdmFibGUgZnJvbSBhIG51Y2xlaWMgYWNpZCBzZXF1ZW5jZS5cclxuICAgKi9cclxuICBzZXF1ZW5jZVR5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE51bWJlciBvZiBsaW5lYXIgc2VxdWVuY2VzIG9mIGFtaW5vIGFjaWRzIGxpbmtlZCB0aHJvdWdoIHBlcHRpZGUgYm9uZHMuIFRoZSBudW1iZXIgb2Ygc3VidW5pdHMgY29uc3RpdHV0aW5nIHRoZSBTdWJzdGFuY2VQcm90ZWluIHNoYWxsIGJlIGRlc2NyaWJlZC4gSXQgaXMgcG9zc2libGUgdGhhdCB0aGUgbnVtYmVyIG9mIHN1YnVuaXRzIGNhbiBiZSB2YXJpYWJsZS5cclxuICAgKi9cclxuICBudW1iZXJPZlN1YnVuaXRzPzogZmhpci5GaGlySW50ZWdlcnxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTdWJzdGFuY2VQcm90ZWluLm51bWJlck9mU3VidW5pdHNcclxuICAgKi9cclxuICBfbnVtYmVyT2ZTdWJ1bml0cz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRpc3VscGhpZGUgYm9uZCBiZXR3ZWVuIHR3byBjeXN0ZWluZSByZXNpZHVlcyBlaXRoZXIgb24gdGhlIHNhbWUgc3VidW5pdCBvciBvbiB0d28gZGlmZmVyZW50IHN1YnVuaXRzIHNoYWxsIGJlIGRlc2NyaWJlZC4gVGhlIHBvc2l0aW9uIG9mIHRoZSBkaXN1bGZpZGUgYm9uZHMgaW4gdGhlIFN1YnN0YW5jZVByb3RlaW4gc2hhbGwgYmUgbGlzdGVkIGluIGluY3JlYXNpbmcgb3JkZXIgb2Ygc3VidW5pdCBudW1iZXIgYW5kIHBvc2l0aW9uIHdpdGhpbiBzdWJ1bml0IGZvbGxvd2VkIGJ5IHRoZSBhYmJyZXZpYXRpb24gb2YgdGhlIGFtaW5vIGFjaWRzIGludm9sdmVkLiBUaGUgZGlzdWxmaWRlIGxpbmthZ2UgcG9zaXRpb25zIHNoYWxsIGFjdHVhbGx5IGNvbnRhaW4gdGhlIGFtaW5vIGFjaWQgQ3lzdGVpbmUgYXQgdGhlIHJlc3BlY3RpdmUgcG9zaXRpb25zLlxyXG4gICAqL1xyXG4gIGRpc3VsZmlkZUxpbmthZ2U/OiBmaGlyLkZoaXJTdHJpbmdbXXwoc3RyaW5nfG51bGwpW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTdWJzdGFuY2VQcm90ZWluLmRpc3VsZmlkZUxpbmthZ2VcclxuICAgKi9cclxuICBfZGlzdWxmaWRlTGlua2FnZT86KGZoaXIuRmhpckVsZW1lbnRBcmdzfG51bGwpW107XHJcbiAgLyoqXHJcbiAgICogVGhpcyBzdWJjbGF1c2UgcmVmZXJzIHRvIHRoZSBkZXNjcmlwdGlvbiBvZiBlYWNoIHN1YnVuaXQgY29uc3RpdHV0aW5nIHRoZSBTdWJzdGFuY2VQcm90ZWluLiBBIHN1YnVuaXQgaXMgYSBsaW5lYXIgc2VxdWVuY2Ugb2YgYW1pbm8gYWNpZHMgbGlua2VkIHRocm91Z2ggcGVwdGlkZSBib25kcy4gVGhlIFN1YnVuaXQgaW5mb3JtYXRpb24gc2hhbGwgYmUgcHJvdmlkZWQgd2hlbiB0aGUgZmluaXNoZWQgU3Vic3RhbmNlUHJvdGVpbiBpcyBhIGNvbXBsZXggb2YgbXVsdGlwbGUgc2VxdWVuY2VzOyBzdWJ1bml0cyBhcmUgbm90IHVzZWQgdG8gZGVsaW5lYXRlIGRvbWFpbnMgd2l0aGluIGEgc2luZ2xlIHNlcXVlbmNlLiBTdWJ1bml0cyBhcmUgbGlzdGVkIGluIG9yZGVyIG9mIGRlY3JlYXNpbmcgbGVuZ3RoOyBzZXF1ZW5jZXMgb2YgdGhlIHNhbWUgbGVuZ3RoIHdpbGwgYmUgb3JkZXJlZCBieSBkZWNyZWFzaW5nIG1vbGVjdWxhciB3ZWlnaHQ7IHN1YnVuaXRzIHRoYXQgaGF2ZSBpZGVudGljYWwgc2VxdWVuY2VzIHdpbGwgYmUgcmVwZWF0ZWQgbXVsdGlwbGUgdGltZXMuXHJcbiAgICovXHJcbiAgc3VidW5pdD86IGZoaXIuU3Vic3RhbmNlUHJvdGVpblN1YnVuaXRBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQSBTdWJzdGFuY2VQcm90ZWluIGlzIGRlZmluZWQgYXMgYSBzaW5nbGUgdW5pdCBvZiBhIGxpbmVhciBhbWlubyBhY2lkIHNlcXVlbmNlLCBvciBhIGNvbWJpbmF0aW9uIG9mIHN1YnVuaXRzIHRoYXQgYXJlIGVpdGhlciBjb3ZhbGVudGx5IGxpbmtlZCBvciBoYXZlIGEgZGVmaW5lZCBpbnZhcmlhbnQgc3RvaWNoaW9tZXRyaWMgcmVsYXRpb25zaGlwLiBUaGlzIGluY2x1ZGVzIGFsbCBzeW50aGV0aWMsIHJlY29tYmluYW50IGFuZCBwdXJpZmllZCBTdWJzdGFuY2VQcm90ZWlucyBvZiBkZWZpbmVkIHNlcXVlbmNlLCB3aGV0aGVyIHRoZSB1c2UgaXMgdGhlcmFwZXV0aWMgb3IgcHJvcGh5bGFjdGljLiBUaGlzIHNldCBvZiBlbGVtZW50cyB3aWxsIGJlIHVzZWQgdG8gZGVzY3JpYmUgYWxidW1pbnMsIGNvYWd1bGF0aW9uIGZhY3RvcnMsIGN5dG9raW5lcywgZ3Jvd3RoIGZhY3RvcnMsIHBlcHRpZGUvU3Vic3RhbmNlUHJvdGVpbiBob3Jtb25lcywgZW56eW1lcywgdG94aW5zLCB0b3hvaWRzLCByZWNvbWJpbmFudCB2YWNjaW5lcywgYW5kIGltbXVub21vZHVsYXRvcnMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3Vic3RhbmNlUHJvdGVpbiBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnU3Vic3RhbmNlUHJvdGVpbic7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJTdWJzdGFuY2VQcm90ZWluXCI7XHJcbiAgLyoqXHJcbiAgICogVGhlIFN1YnN0YW5jZVByb3RlaW4gZGVzY3JpcHRpdmUgZWxlbWVudHMgd2lsbCBvbmx5IGJlIHVzZWQgd2hlbiBhIGNvbXBsZXRlIG9yIHBhcnRpYWwgYW1pbm8gYWNpZCBzZXF1ZW5jZSBpcyBhdmFpbGFibGUgb3IgZGVyaXZhYmxlIGZyb20gYSBudWNsZWljIGFjaWQgc2VxdWVuY2UuXHJcbiAgICovXHJcbiAgcHVibGljIHNlcXVlbmNlVHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBOdW1iZXIgb2YgbGluZWFyIHNlcXVlbmNlcyBvZiBhbWlubyBhY2lkcyBsaW5rZWQgdGhyb3VnaCBwZXB0aWRlIGJvbmRzLiBUaGUgbnVtYmVyIG9mIHN1YnVuaXRzIGNvbnN0aXR1dGluZyB0aGUgU3Vic3RhbmNlUHJvdGVpbiBzaGFsbCBiZSBkZXNjcmliZWQuIEl0IGlzIHBvc3NpYmxlIHRoYXQgdGhlIG51bWJlciBvZiBzdWJ1bml0cyBjYW4gYmUgdmFyaWFibGUuXHJcbiAgICovXHJcbiAgcHVibGljIG51bWJlck9mU3VidW5pdHM/OiBmaGlyLkZoaXJJbnRlZ2VyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGlzdWxwaGlkZSBib25kIGJldHdlZW4gdHdvIGN5c3RlaW5lIHJlc2lkdWVzIGVpdGhlciBvbiB0aGUgc2FtZSBzdWJ1bml0IG9yIG9uIHR3byBkaWZmZXJlbnQgc3VidW5pdHMgc2hhbGwgYmUgZGVzY3JpYmVkLiBUaGUgcG9zaXRpb24gb2YgdGhlIGRpc3VsZmlkZSBib25kcyBpbiB0aGUgU3Vic3RhbmNlUHJvdGVpbiBzaGFsbCBiZSBsaXN0ZWQgaW4gaW5jcmVhc2luZyBvcmRlciBvZiBzdWJ1bml0IG51bWJlciBhbmQgcG9zaXRpb24gd2l0aGluIHN1YnVuaXQgZm9sbG93ZWQgYnkgdGhlIGFiYnJldmlhdGlvbiBvZiB0aGUgYW1pbm8gYWNpZHMgaW52b2x2ZWQuIFRoZSBkaXN1bGZpZGUgbGlua2FnZSBwb3NpdGlvbnMgc2hhbGwgYWN0dWFsbHkgY29udGFpbiB0aGUgYW1pbm8gYWNpZCBDeXN0ZWluZSBhdCB0aGUgcmVzcGVjdGl2ZSBwb3NpdGlvbnMuXHJcbiAgICovXHJcbiAgcHVibGljIGRpc3VsZmlkZUxpbmthZ2U6IGZoaXIuRmhpclN0cmluZ1tdO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgc3ViY2xhdXNlIHJlZmVycyB0byB0aGUgZGVzY3JpcHRpb24gb2YgZWFjaCBzdWJ1bml0IGNvbnN0aXR1dGluZyB0aGUgU3Vic3RhbmNlUHJvdGVpbi4gQSBzdWJ1bml0IGlzIGEgbGluZWFyIHNlcXVlbmNlIG9mIGFtaW5vIGFjaWRzIGxpbmtlZCB0aHJvdWdoIHBlcHRpZGUgYm9uZHMuIFRoZSBTdWJ1bml0IGluZm9ybWF0aW9uIHNoYWxsIGJlIHByb3ZpZGVkIHdoZW4gdGhlIGZpbmlzaGVkIFN1YnN0YW5jZVByb3RlaW4gaXMgYSBjb21wbGV4IG9mIG11bHRpcGxlIHNlcXVlbmNlczsgc3VidW5pdHMgYXJlIG5vdCB1c2VkIHRvIGRlbGluZWF0ZSBkb21haW5zIHdpdGhpbiBhIHNpbmdsZSBzZXF1ZW5jZS4gU3VidW5pdHMgYXJlIGxpc3RlZCBpbiBvcmRlciBvZiBkZWNyZWFzaW5nIGxlbmd0aDsgc2VxdWVuY2VzIG9mIHRoZSBzYW1lIGxlbmd0aCB3aWxsIGJlIG9yZGVyZWQgYnkgZGVjcmVhc2luZyBtb2xlY3VsYXIgd2VpZ2h0OyBzdWJ1bml0cyB0aGF0IGhhdmUgaWRlbnRpY2FsIHNlcXVlbmNlcyB3aWxsIGJlIHJlcGVhdGVkIG11bHRpcGxlIHRpbWVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdWJ1bml0OiBmaGlyLlN1YnN0YW5jZVByb3RlaW5TdWJ1bml0W107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgU3Vic3RhbmNlUHJvdGVpbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFN1YnN0YW5jZVByb3RlaW5BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnU3Vic3RhbmNlUHJvdGVpbic7XHJcbiAgICBpZiAoc291cmNlWydzZXF1ZW5jZVR5cGUnXSkgeyB0aGlzLnNlcXVlbmNlVHlwZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2Uuc2VxdWVuY2VUeXBlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbnVtYmVyT2ZTdWJ1bml0cyddKSB7IHRoaXMubnVtYmVyT2ZTdWJ1bml0cyA9IG5ldyBmaGlyLkZoaXJJbnRlZ2VyKHt2YWx1ZTogc291cmNlLm51bWJlck9mU3VidW5pdHN9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX251bWJlck9mU3VidW5pdHMnXSkge1xyXG4gICAgICBpZiAodGhpcy5udW1iZXJPZlN1YnVuaXRzKSB7IHRoaXMubnVtYmVyT2ZTdWJ1bml0cy5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9udW1iZXJPZlN1YnVuaXRzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubnVtYmVyT2ZTdWJ1bml0cyA9IG5ldyBmaGlyLkZoaXJJbnRlZ2VyKHNvdXJjZS5fbnVtYmVyT2ZTdWJ1bml0cyBhcyBQYXJ0aWFsPGZoaXIuRmhpckludGVnZXJBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2Rpc3VsZmlkZUxpbmthZ2UnXSkgeyB0aGlzLmRpc3VsZmlkZUxpbmthZ2UgPSBzb3VyY2UuZGlzdWxmaWRlTGlua2FnZS5tYXAoKHgpID0+IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiB4fSkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5kaXN1bGZpZGVMaW5rYWdlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ19kaXN1bGZpZGVMaW5rYWdlJ10pIHtcclxuICAgICAgc291cmNlLl9kaXN1bGZpZGVMaW5rYWdlLmZvckVhY2goKHgsaSkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLmRpc3VsZmlkZUxpbmthZ2UubGVuZ3RoID49IGkpIHsgaWYgKHgpIHsgdGhpcy5kaXN1bGZpZGVMaW5rYWdlW2ldLmFkZEV4dGVuZGVkUHJvcGVydGllcyh4KTsgfSB9XHJcbiAgICAgICAgZWxzZSB7IGlmICh4KSB7IHRoaXMuZGlzdWxmaWRlTGlua2FnZS5wdXNoKG5ldyBmaGlyLkZoaXJTdHJpbmcoeCBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KSk7IH0gfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3N1YnVuaXQnXSkgeyB0aGlzLnN1YnVuaXQgPSBzb3VyY2Uuc3VidW5pdC5tYXAoKHgpID0+IG5ldyBmaGlyLlN1YnN0YW5jZVByb3RlaW5TdWJ1bml0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3VidW5pdCA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnU3Vic3RhbmNlUHJvdGVpbicgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlBTKCdyZXNvdXJjZVR5cGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3NlcXVlbmNlVHlwZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnbnVtYmVyT2ZTdWJ1bml0cycsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnZGlzdWxmaWRlTGlua2FnZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnc3VidW5pdCcsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4iXX0=