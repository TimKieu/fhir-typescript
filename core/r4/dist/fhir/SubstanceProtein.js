// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: SubstanceProtein
import * as fhir from '../fhir.js';
/**
 * This subclause refers to the description of each subunit constituting the SubstanceProtein. A subunit is a linear sequence of amino acids linked through peptide bonds. The Subunit information shall be provided when the finished SubstanceProtein is a complex of multiple sequences; subunits are not used to delineate domains within a single sequence. Subunits are listed in order of decreasing length; sequences of the same length will be ordered by decreasing molecular weight; subunits that have identical sequences will be repeated multiple times.
 */
export class SubstanceProteinSubunit extends fhir.BackboneElement {
    /**
     * Default constructor for SubstanceProteinSubunit - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['subunit']) {
            this.subunit = new fhir.FhirInteger({ value: source.subunit });
        }
        if (source['_subunit']) {
            if (this.subunit) {
                this.subunit.addExtendedProperties(source._subunit);
            }
            else {
                this.subunit = new fhir.FhirInteger(source._subunit);
            }
        }
        if (source['sequence']) {
            this.sequence = new fhir.FhirString({ value: source.sequence });
        }
        if (source['_sequence']) {
            if (this.sequence) {
                this.sequence.addExtendedProperties(source._sequence);
            }
            else {
                this.sequence = new fhir.FhirString(source._sequence);
            }
        }
        if (source['length']) {
            this.length = new fhir.FhirInteger({ value: source.length });
        }
        if (source['_length']) {
            if (this.length) {
                this.length.addExtendedProperties(source._length);
            }
            else {
                this.length = new fhir.FhirInteger(source._length);
            }
        }
        if (source['sequenceAttachment']) {
            this.sequenceAttachment = new fhir.Attachment(source.sequenceAttachment);
        }
        if (source['nTerminalModificationId']) {
            this.nTerminalModificationId = new fhir.Identifier(source.nTerminalModificationId);
        }
        if (source['nTerminalModification']) {
            this.nTerminalModification = new fhir.FhirString({ value: source.nTerminalModification });
        }
        if (source['_nTerminalModification']) {
            if (this.nTerminalModification) {
                this.nTerminalModification.addExtendedProperties(source._nTerminalModification);
            }
            else {
                this.nTerminalModification = new fhir.FhirString(source._nTerminalModification);
            }
        }
        if (source['cTerminalModificationId']) {
            this.cTerminalModificationId = new fhir.Identifier(source.cTerminalModificationId);
        }
        if (source['cTerminalModification']) {
            this.cTerminalModification = new fhir.FhirString({ value: source.cTerminalModification });
        }
        if (source['_cTerminalModification']) {
            if (this.cTerminalModification) {
                this.cTerminalModification.addExtendedProperties(source._cTerminalModification);
            }
            else {
                this.cTerminalModification = new fhir.FhirString(source._cTerminalModification);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'SubstanceProtein.subunit';
        }
        this.vOptS('subunit', expression);
        this.vOptS('sequence', expression);
        this.vOptS('length', expression);
        this.vOptS('sequenceAttachment', expression);
        this.vOptS('nTerminalModificationId', expression);
        this.vOptS('nTerminalModification', expression);
        this.vOptS('cTerminalModificationId', expression);
        this.vOptS('cTerminalModification', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceProteinSubunit._fts_dataType = 'SubstanceProteinSubunit';
/**
 * A SubstanceProtein is defined as a single unit of a linear amino acid sequence, or a combination of subunits that are either covalently linked or have a defined invariant stoichiometric relationship. This includes all synthetic, recombinant and purified SubstanceProteins of defined sequence, whether the use is therapeutic or prophylactic. This set of elements will be used to describe albumins, coagulation factors, cytokines, growth factors, peptide/SubstanceProtein hormones, enzymes, toxins, toxoids, recombinant vaccines, and immunomodulators.
 */
export class SubstanceProtein extends fhir.DomainResource {
    /**
     * Default constructor for SubstanceProtein - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'SubstanceProtein';
        if (source['sequenceType']) {
            this.sequenceType = new fhir.CodeableConcept(source.sequenceType);
        }
        if (source['numberOfSubunits']) {
            this.numberOfSubunits = new fhir.FhirInteger({ value: source.numberOfSubunits });
        }
        if (source['_numberOfSubunits']) {
            if (this.numberOfSubunits) {
                this.numberOfSubunits.addExtendedProperties(source._numberOfSubunits);
            }
            else {
                this.numberOfSubunits = new fhir.FhirInteger(source._numberOfSubunits);
            }
        }
        if (source['disulfideLinkage']) {
            this.disulfideLinkage = source.disulfideLinkage.map((x) => new fhir.FhirString({ value: x }));
        }
        else {
            this.disulfideLinkage = [];
        }
        if (source['_disulfideLinkage']) {
            source._disulfideLinkage.forEach((x, i) => {
                if (this.disulfideLinkage.length >= i) {
                    if (x) {
                        this.disulfideLinkage[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.disulfideLinkage.push(new fhir.FhirString(x));
                    }
                }
            });
        }
        if (source['subunit']) {
            this.subunit = source.subunit.map((x) => new fhir.SubstanceProteinSubunit(x));
        }
        else {
            this.subunit = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'SubstanceProtein';
        }
        this.vReqS('resourceType', expression);
        this.vOptS('sequenceType', expression);
        this.vOptS('numberOfSubunits', expression);
        this.vOptA('disulfideLinkage', expression);
        this.vOptA('subunit', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceProtein._fts_dataType = 'SubstanceProtein';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3Vic3RhbmNlUHJvdGVpbi5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvU3Vic3RhbmNlUHJvdGVpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQyxrQ0FBa0M7QUFFbEMsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUE0RG5DOztHQUVHO0FBQ0gsTUFBTSxPQUFPLHVCQUF3QixTQUFRLElBQUksQ0FBQyxlQUFlO0lBcUMvRDs7T0FFRztJQUNILFlBQVksU0FBOEMsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDcEcsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxPQUFPLEVBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDeEYsSUFBSSxNQUFNLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFDdEIsSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFO2dCQUFFLElBQUksQ0FBQyxPQUFPLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLFFBQVMsQ0FBQyxDQUFDO2FBQUU7aUJBQ3RFO2dCQUFFLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxRQUF5QyxDQUFDLENBQUM7YUFBRTtTQUNoRztRQUNELElBQUksTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLFFBQVEsRUFBQyxDQUFDLENBQUM7U0FBRTtRQUMxRixJQUFJLE1BQU0sQ0FBQyxXQUFXLENBQUMsRUFBRTtZQUN2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QUFJLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBaUMsQ0FBQyxDQUFDLENBQUM7cUJBQUU7aUJBQUU7WUFDekcsQ0FBQyxDQUFDLENBQUM7U0FDSjtRQUNELElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsdUJBQXVCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQ3BHO1lBQUUsSUFBSSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7U0FBRTtJQUM3QixDQUFDO0lBQ0Q7O09BRUc7SUFDYSxpQkFBaUIsQ0FBQyxhQUFvQixFQUFFO1FBQ3RELElBQUksTUFBTSxHQUFtQixLQUFLLENBQUMsaUJBQWlCLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDakUsSUFBSSxVQUFVLEtBQUssRUFBRSxFQUFFO1lBQUUsVUFBVSxHQUFHLGtCQUFrQixDQUFBO1NBQUU7UUFDMUQsSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDckMsSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDckMsSUFBSSxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUN6QyxJQUFJLENBQUMsS0FBSyxDQUFDLGtCQUFrQixFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ3pDLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ2hDLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBM0REOztHQUVHO0FBQzZCLDhCQUFhLEdBQVUsa0JBQWtCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjQuY29yZSB2ZXJzaW9uOiA0LjAuMVxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IFN1YnN0YW5jZVByb3RlaW5cclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgU3Vic3RhbmNlUHJvdGVpblN1YnVuaXQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3Vic3RhbmNlUHJvdGVpblN1YnVuaXRBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBJbmRleCBvZiBwcmltYXJ5IHNlcXVlbmNlcyBvZiBhbWlubyBhY2lkcyBsaW5rZWQgdGhyb3VnaCBwZXB0aWRlIGJvbmRzIGluIG9yZGVyIG9mIGRlY3JlYXNpbmcgbGVuZ3RoLiBTZXF1ZW5jZXMgb2YgdGhlIHNhbWUgbGVuZ3RoIHdpbGwgYmUgb3JkZXJlZCBieSBtb2xlY3VsYXIgd2VpZ2h0LiBTdWJ1bml0cyB0aGF0IGhhdmUgaWRlbnRpY2FsIHNlcXVlbmNlcyB3aWxsIGJlIHJlcGVhdGVkIGFuZCBoYXZlIHNlcXVlbnRpYWwgc3Vic2NyaXB0cy5cclxuICAgKi9cclxuICBzdWJ1bml0PzogZmhpci5GaGlySW50ZWdlcnxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTdWJzdGFuY2VQcm90ZWluLnN1YnVuaXQuc3VidW5pdFxyXG4gICAqL1xyXG4gIF9zdWJ1bml0PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgc2VxdWVuY2UgaW5mb3JtYXRpb24gc2hhbGwgYmUgcHJvdmlkZWQgZW51bWVyYXRpbmcgdGhlIGFtaW5vIGFjaWRzIGZyb20gTi0gdG8gQy10ZXJtaW5hbCBlbmQgdXNpbmcgc3RhbmRhcmQgc2luZ2xlLWxldHRlciBhbWlubyBhY2lkIGNvZGVzLiBVcHBlcmNhc2Ugc2hhbGwgYmUgdXNlZCBmb3IgTC1hbWlubyBhY2lkcyBhbmQgbG93ZXJjYXNlIGZvciBELWFtaW5vIGFjaWRzLiBUcmFuc2NyaWJlZCBTdWJzdGFuY2VQcm90ZWlucyB3aWxsIGFsd2F5cyBiZSBkZXNjcmliZWQgdXNpbmcgdGhlIHRyYW5zbGF0ZWQgc2VxdWVuY2U7IGZvciBzeW50aGV0aWMgcGVwdGlkZSBjb250YWluaW5nIGFtaW5vIGFjaWRzIHRoYXQgYXJlIG5vdCByZXByZXNlbnRlZCB3aXRoIGEgc2luZ2xlIGxldHRlciBjb2RlIGFuIFggc2hvdWxkIGJlIHVzZWQgd2l0aGluIHRoZSBzZXF1ZW5jZS4gVGhlIG1vZGlmaWVkIGFtaW5vIGFjaWRzIHdpbGwgYmUgZGlzdGluZ3Vpc2hlZCBieSB0aGVpciBwb3NpdGlvbiBpbiB0aGUgc2VxdWVuY2UuXHJcbiAgICovXHJcbiAgc2VxdWVuY2U/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3Vic3RhbmNlUHJvdGVpbi5zdWJ1bml0LnNlcXVlbmNlXHJcbiAgICovXHJcbiAgX3NlcXVlbmNlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBMZW5ndGggb2YgbGluZWFyIHNlcXVlbmNlcyBvZiBhbWlubyBhY2lkcyBjb250YWluZWQgaW4gdGhlIHN1YnVuaXQuXHJcbiAgICovXHJcbiAgbGVuZ3RoPzogZmhpci5GaGlySW50ZWdlcnxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTdWJzdGFuY2VQcm90ZWluLnN1YnVuaXQubGVuZ3RoXHJcbiAgICovXHJcbiAgX2xlbmd0aD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNlcXVlbmNlIGluZm9ybWF0aW9uIHNoYWxsIGJlIHByb3ZpZGVkIGVudW1lcmF0aW5nIHRoZSBhbWlubyBhY2lkcyBmcm9tIE4tIHRvIEMtdGVybWluYWwgZW5kIHVzaW5nIHN0YW5kYXJkIHNpbmdsZS1sZXR0ZXIgYW1pbm8gYWNpZCBjb2Rlcy4gVXBwZXJjYXNlIHNoYWxsIGJlIHVzZWQgZm9yIEwtYW1pbm8gYWNpZHMgYW5kIGxvd2VyY2FzZSBmb3IgRC1hbWlubyBhY2lkcy4gVHJhbnNjcmliZWQgU3Vic3RhbmNlUHJvdGVpbnMgd2lsbCBhbHdheXMgYmUgZGVzY3JpYmVkIHVzaW5nIHRoZSB0cmFuc2xhdGVkIHNlcXVlbmNlOyBmb3Igc3ludGhldGljIHBlcHRpZGUgY29udGFpbmluZyBhbWlubyBhY2lkcyB0aGF0IGFyZSBub3QgcmVwcmVzZW50ZWQgd2l0aCBhIHNpbmdsZSBsZXR0ZXIgY29kZSBhbiBYIHNob3VsZCBiZSB1c2VkIHdpdGhpbiB0aGUgc2VxdWVuY2UuIFRoZSBtb2RpZmllZCBhbWlubyBhY2lkcyB3aWxsIGJlIGRpc3Rpbmd1aXNoZWQgYnkgdGhlaXIgcG9zaXRpb24gaW4gdGhlIHNlcXVlbmNlLlxyXG4gICAqL1xyXG4gIHNlcXVlbmNlQXR0YWNobWVudD86IGZoaXIuQXR0YWNobWVudEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFVuaXF1ZSBpZGVudGlmaWVyIGZvciBtb2xlY3VsYXIgZnJhZ21lbnQgbW9kaWZpY2F0aW9uIGJhc2VkIG9uIHRoZSBJU08gMTEyMzggU3Vic3RhbmNlIElELlxyXG4gICAqL1xyXG4gIG5UZXJtaW5hbE1vZGlmaWNhdGlvbklkPzogZmhpci5JZGVudGlmaWVyQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG5hbWUgb2YgdGhlIGZyYWdtZW50IG1vZGlmaWVkIGF0IHRoZSBOLXRlcm1pbmFsIG9mIHRoZSBTdWJzdGFuY2VQcm90ZWluIHNoYWxsIGJlIHNwZWNpZmllZC5cclxuICAgKi9cclxuICBuVGVybWluYWxNb2RpZmljYXRpb24/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3Vic3RhbmNlUHJvdGVpbi5zdWJ1bml0Lm5UZXJtaW5hbE1vZGlmaWNhdGlvblxyXG4gICAqL1xyXG4gIF9uVGVybWluYWxNb2RpZmljYXRpb24/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFVuaXF1ZSBpZGVudGlmaWVyIGZvciBtb2xlY3VsYXIgZnJhZ21lbnQgbW9kaWZpY2F0aW9uIGJhc2VkIG9uIHRoZSBJU08gMTEyMzggU3Vic3RhbmNlIElELlxyXG4gICAqL1xyXG4gIGNUZXJtaW5hbE1vZGlmaWNhdGlvbklkPzogZmhpci5JZGVudGlmaWVyQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG1vZGlmaWNhdGlvbiBhdCB0aGUgQy10ZXJtaW5hbCBzaGFsbCBiZSBzcGVjaWZpZWQuXHJcbiAgICovXHJcbiAgY1Rlcm1pbmFsTW9kaWZpY2F0aW9uPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFN1YnN0YW5jZVByb3RlaW4uc3VidW5pdC5jVGVybWluYWxNb2RpZmljYXRpb25cclxuICAgKi9cclxuICBfY1Rlcm1pbmFsTW9kaWZpY2F0aW9uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoaXMgc3ViY2xhdXNlIHJlZmVycyB0byB0aGUgZGVzY3JpcHRpb24gb2YgZWFjaCBzdWJ1bml0IGNvbnN0aXR1dGluZyB0aGUgU3Vic3RhbmNlUHJvdGVpbi4gQSBzdWJ1bml0IGlzIGEgbGluZWFyIHNlcXVlbmNlIG9mIGFtaW5vIGFjaWRzIGxpbmtlZCB0aHJvdWdoIHBlcHRpZGUgYm9uZHMuIFRoZSBTdWJ1bml0IGluZm9ybWF0aW9uIHNoYWxsIGJlIHByb3ZpZGVkIHdoZW4gdGhlIGZpbmlzaGVkIFN1YnN0YW5jZVByb3RlaW4gaXMgYSBjb21wbGV4IG9mIG11bHRpcGxlIHNlcXVlbmNlczsgc3VidW5pdHMgYXJlIG5vdCB1c2VkIHRvIGRlbGluZWF0ZSBkb21haW5zIHdpdGhpbiBhIHNpbmdsZSBzZXF1ZW5jZS4gU3VidW5pdHMgYXJlIGxpc3RlZCBpbiBvcmRlciBvZiBkZWNyZWFzaW5nIGxlbmd0aDsgc2VxdWVuY2VzIG9mIHRoZSBzYW1lIGxlbmd0aCB3aWxsIGJlIG9yZGVyZWQgYnkgZGVjcmVhc2luZyBtb2xlY3VsYXIgd2VpZ2h0OyBzdWJ1bml0cyB0aGF0IGhhdmUgaWRlbnRpY2FsIHNlcXVlbmNlcyB3aWxsIGJlIHJlcGVhdGVkIG11bHRpcGxlIHRpbWVzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFN1YnN0YW5jZVByb3RlaW5TdWJ1bml0IGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnU3Vic3RhbmNlUHJvdGVpblN1YnVuaXQnO1xyXG4gIC8qKlxyXG4gICAqIEluZGV4IG9mIHByaW1hcnkgc2VxdWVuY2VzIG9mIGFtaW5vIGFjaWRzIGxpbmtlZCB0aHJvdWdoIHBlcHRpZGUgYm9uZHMgaW4gb3JkZXIgb2YgZGVjcmVhc2luZyBsZW5ndGguIFNlcXVlbmNlcyBvZiB0aGUgc2FtZSBsZW5ndGggd2lsbCBiZSBvcmRlcmVkIGJ5IG1vbGVjdWxhciB3ZWlnaHQuIFN1YnVuaXRzIHRoYXQgaGF2ZSBpZGVudGljYWwgc2VxdWVuY2VzIHdpbGwgYmUgcmVwZWF0ZWQgYW5kIGhhdmUgc2VxdWVudGlhbCBzdWJzY3JpcHRzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdWJ1bml0PzogZmhpci5GaGlySW50ZWdlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNlcXVlbmNlIGluZm9ybWF0aW9uIHNoYWxsIGJlIHByb3ZpZGVkIGVudW1lcmF0aW5nIHRoZSBhbWlubyBhY2lkcyBmcm9tIE4tIHRvIEMtdGVybWluYWwgZW5kIHVzaW5nIHN0YW5kYXJkIHNpbmdsZS1sZXR0ZXIgYW1pbm8gYWNpZCBjb2Rlcy4gVXBwZXJjYXNlIHNoYWxsIGJlIHVzZWQgZm9yIEwtYW1pbm8gYWNpZHMgYW5kIGxvd2VyY2FzZSBmb3IgRC1hbWlubyBhY2lkcy4gVHJhbnNjcmliZWQgU3Vic3RhbmNlUHJvdGVpbnMgd2lsbCBhbHdheXMgYmUgZGVzY3JpYmVkIHVzaW5nIHRoZSB0cmFuc2xhdGVkIHNlcXVlbmNlOyBmb3Igc3ludGhldGljIHBlcHRpZGUgY29udGFpbmluZyBhbWlubyBhY2lkcyB0aGF0IGFyZSBub3QgcmVwcmVzZW50ZWQgd2l0aCBhIHNpbmdsZSBsZXR0ZXIgY29kZSBhbiBYIHNob3VsZCBiZSB1c2VkIHdpdGhpbiB0aGUgc2VxdWVuY2UuIFRoZSBtb2RpZmllZCBhbWlubyBhY2lkcyB3aWxsIGJlIGRpc3Rpbmd1aXNoZWQgYnkgdGhlaXIgcG9zaXRpb24gaW4gdGhlIHNlcXVlbmNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXF1ZW5jZT86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTGVuZ3RoIG9mIGxpbmVhciBzZXF1ZW5jZXMgb2YgYW1pbm8gYWNpZHMgY29udGFpbmVkIGluIHRoZSBzdWJ1bml0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBsZW5ndGg/OiBmaGlyLkZoaXJJbnRlZ2VyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc2VxdWVuY2UgaW5mb3JtYXRpb24gc2hhbGwgYmUgcHJvdmlkZWQgZW51bWVyYXRpbmcgdGhlIGFtaW5vIGFjaWRzIGZyb20gTi0gdG8gQy10ZXJtaW5hbCBlbmQgdXNpbmcgc3RhbmRhcmQgc2luZ2xlLWxldHRlciBhbWlubyBhY2lkIGNvZGVzLiBVcHBlcmNhc2Ugc2hhbGwgYmUgdXNlZCBmb3IgTC1hbWlubyBhY2lkcyBhbmQgbG93ZXJjYXNlIGZvciBELWFtaW5vIGFjaWRzLiBUcmFuc2NyaWJlZCBTdWJzdGFuY2VQcm90ZWlucyB3aWxsIGFsd2F5cyBiZSBkZXNjcmliZWQgdXNpbmcgdGhlIHRyYW5zbGF0ZWQgc2VxdWVuY2U7IGZvciBzeW50aGV0aWMgcGVwdGlkZSBjb250YWluaW5nIGFtaW5vIGFjaWRzIHRoYXQgYXJlIG5vdCByZXByZXNlbnRlZCB3aXRoIGEgc2luZ2xlIGxldHRlciBjb2RlIGFuIFggc2hvdWxkIGJlIHVzZWQgd2l0aGluIHRoZSBzZXF1ZW5jZS4gVGhlIG1vZGlmaWVkIGFtaW5vIGFjaWRzIHdpbGwgYmUgZGlzdGluZ3Vpc2hlZCBieSB0aGVpciBwb3NpdGlvbiBpbiB0aGUgc2VxdWVuY2UuXHJcbiAgICovXHJcbiAgcHVibGljIHNlcXVlbmNlQXR0YWNobWVudD86IGZoaXIuQXR0YWNobWVudHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVW5pcXVlIGlkZW50aWZpZXIgZm9yIG1vbGVjdWxhciBmcmFnbWVudCBtb2RpZmljYXRpb24gYmFzZWQgb24gdGhlIElTTyAxMTIzOCBTdWJzdGFuY2UgSUQuXHJcbiAgICovXHJcbiAgcHVibGljIG5UZXJtaW5hbE1vZGlmaWNhdGlvbklkPzogZmhpci5JZGVudGlmaWVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbmFtZSBvZiB0aGUgZnJhZ21lbnQgbW9kaWZpZWQgYXQgdGhlIE4tdGVybWluYWwgb2YgdGhlIFN1YnN0YW5jZVByb3RlaW4gc2hhbGwgYmUgc3BlY2lmaWVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBuVGVybWluYWxNb2RpZmljYXRpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFVuaXF1ZSBpZGVudGlmaWVyIGZvciBtb2xlY3VsYXIgZnJhZ21lbnQgbW9kaWZpY2F0aW9uIGJhc2VkIG9uIHRoZSBJU08gMTEyMzggU3Vic3RhbmNlIElELlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjVGVybWluYWxNb2RpZmljYXRpb25JZD86IGZoaXIuSWRlbnRpZmllcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG1vZGlmaWNhdGlvbiBhdCB0aGUgQy10ZXJtaW5hbCBzaGFsbCBiZSBzcGVjaWZpZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGNUZXJtaW5hbE1vZGlmaWNhdGlvbj86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgU3Vic3RhbmNlUHJvdGVpblN1YnVuaXQgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxTdWJzdGFuY2VQcm90ZWluU3VidW5pdEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydzdWJ1bml0J10pIHsgdGhpcy5zdWJ1bml0ID0gbmV3IGZoaXIuRmhpckludGVnZXIoe3ZhbHVlOiBzb3VyY2Uuc3VidW5pdH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfc3VidW5pdCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnN1YnVuaXQpIHsgdGhpcy5zdWJ1bml0LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3N1YnVuaXQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zdWJ1bml0ID0gbmV3IGZoaXIuRmhpckludGVnZXIoc291cmNlLl9zdWJ1bml0IGFzIFBhcnRpYWw8Zmhpci5GaGlySW50ZWdlckFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2VxdWVuY2UnXSkgeyB0aGlzLnNlcXVlbmNlID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5zZXF1ZW5jZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfc2VxdWVuY2UnXSkge1xyXG4gICAgICBpZiAodGhpcy5zZXF1ZW5jZSkgeyB0aGlzLnNlcXVlbmNlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3NlcXVlbmNlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc2VxdWVuY2UgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fc2VxdWVuY2UgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2xlbmd0aCddKSB7IHRoaXMubGVuZ3RoID0gbmV3IGZoaXIuRmhpckludGVnZXIoe3ZhbHVlOiBzb3VyY2UubGVuZ3RofSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19sZW5ndGgnXSkge1xyXG4gICAgICBpZiAodGhpcy5sZW5ndGgpIHsgdGhpcy5sZW5ndGguYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbGVuZ3RoISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubGVuZ3RoID0gbmV3IGZoaXIuRmhpckludGVnZXIoc291cmNlLl9sZW5ndGggYXMgUGFydGlhbDxmaGlyLkZoaXJJbnRlZ2VyQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydzZXF1ZW5jZUF0dGFjaG1lbnQnXSkgeyB0aGlzLnNlcXVlbmNlQXR0YWNobWVudCA9IG5ldyBmaGlyLkF0dGFjaG1lbnQoc291cmNlLnNlcXVlbmNlQXR0YWNobWVudCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ25UZXJtaW5hbE1vZGlmaWNhdGlvbklkJ10pIHsgdGhpcy5uVGVybWluYWxNb2RpZmljYXRpb25JZCA9IG5ldyBmaGlyLklkZW50aWZpZXIoc291cmNlLm5UZXJtaW5hbE1vZGlmaWNhdGlvbklkKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnblRlcm1pbmFsTW9kaWZpY2F0aW9uJ10pIHsgdGhpcy5uVGVybWluYWxNb2RpZmljYXRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLm5UZXJtaW5hbE1vZGlmaWNhdGlvbn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfblRlcm1pbmFsTW9kaWZpY2F0aW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMublRlcm1pbmFsTW9kaWZpY2F0aW9uKSB7IHRoaXMublRlcm1pbmFsTW9kaWZpY2F0aW9uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX25UZXJtaW5hbE1vZGlmaWNhdGlvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLm5UZXJtaW5hbE1vZGlmaWNhdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9uVGVybWluYWxNb2RpZmljYXRpb24gYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2NUZXJtaW5hbE1vZGlmaWNhdGlvbklkJ10pIHsgdGhpcy5jVGVybWluYWxNb2RpZmljYXRpb25JZCA9IG5ldyBmaGlyLklkZW50aWZpZXIoc291cmNlLmNUZXJtaW5hbE1vZGlmaWNhdGlvbklkKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY1Rlcm1pbmFsTW9kaWZpY2F0aW9uJ10pIHsgdGhpcy5jVGVybWluYWxNb2RpZmljYXRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmNUZXJtaW5hbE1vZGlmaWNhdGlvbn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfY1Rlcm1pbmFsTW9kaWZpY2F0aW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMuY1Rlcm1pbmFsTW9kaWZpY2F0aW9uKSB7IHRoaXMuY1Rlcm1pbmFsTW9kaWZpY2F0aW9uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2NUZXJtaW5hbE1vZGlmaWNhdGlvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmNUZXJtaW5hbE1vZGlmaWNhdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9jVGVybWluYWxNb2RpZmljYXRpb24gYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb246c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24pO1xyXG4gICAgaWYgKGV4cHJlc3Npb24gPT09ICcnKSB7IGV4cHJlc3Npb24gPSAnU3Vic3RhbmNlUHJvdGVpbi5zdWJ1bml0JyB9XHJcbiAgICB0aGlzLnZPcHRTKCdzdWJ1bml0JyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0Uygnc2VxdWVuY2UnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdsZW5ndGgnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdzZXF1ZW5jZUF0dGFjaG1lbnQnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCduVGVybWluYWxNb2RpZmljYXRpb25JZCcsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ25UZXJtaW5hbE1vZGlmaWNhdGlvbicsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ2NUZXJtaW5hbE1vZGlmaWNhdGlvbklkJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnY1Rlcm1pbmFsTW9kaWZpY2F0aW9uJyxleHByZXNzaW9uKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFN1YnN0YW5jZVByb3RlaW4gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3Vic3RhbmNlUHJvdGVpbkFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIlN1YnN0YW5jZVByb3RlaW5cInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIFN1YnN0YW5jZVByb3RlaW4gZGVzY3JpcHRpdmUgZWxlbWVudHMgd2lsbCBvbmx5IGJlIHVzZWQgd2hlbiBhIGNvbXBsZXRlIG9yIHBhcnRpYWwgYW1pbm8gYWNpZCBzZXF1ZW5jZSBpcyBhdmFpbGFibGUgb3IgZGVyaXZhYmxlIGZyb20gYSBudWNsZWljIGFjaWQgc2VxdWVuY2UuXHJcbiAgICovXHJcbiAgc2VxdWVuY2VUeXBlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBOdW1iZXIgb2YgbGluZWFyIHNlcXVlbmNlcyBvZiBhbWlubyBhY2lkcyBsaW5rZWQgdGhyb3VnaCBwZXB0aWRlIGJvbmRzLiBUaGUgbnVtYmVyIG9mIHN1YnVuaXRzIGNvbnN0aXR1dGluZyB0aGUgU3Vic3RhbmNlUHJvdGVpbiBzaGFsbCBiZSBkZXNjcmliZWQuIEl0IGlzIHBvc3NpYmxlIHRoYXQgdGhlIG51bWJlciBvZiBzdWJ1bml0cyBjYW4gYmUgdmFyaWFibGUuXHJcbiAgICovXHJcbiAgbnVtYmVyT2ZTdWJ1bml0cz86IGZoaXIuRmhpckludGVnZXJ8bnVtYmVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3Vic3RhbmNlUHJvdGVpbi5udW1iZXJPZlN1YnVuaXRzXHJcbiAgICovXHJcbiAgX251bWJlck9mU3VidW5pdHM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkaXN1bHBoaWRlIGJvbmQgYmV0d2VlbiB0d28gY3lzdGVpbmUgcmVzaWR1ZXMgZWl0aGVyIG9uIHRoZSBzYW1lIHN1YnVuaXQgb3Igb24gdHdvIGRpZmZlcmVudCBzdWJ1bml0cyBzaGFsbCBiZSBkZXNjcmliZWQuIFRoZSBwb3NpdGlvbiBvZiB0aGUgZGlzdWxmaWRlIGJvbmRzIGluIHRoZSBTdWJzdGFuY2VQcm90ZWluIHNoYWxsIGJlIGxpc3RlZCBpbiBpbmNyZWFzaW5nIG9yZGVyIG9mIHN1YnVuaXQgbnVtYmVyIGFuZCBwb3NpdGlvbiB3aXRoaW4gc3VidW5pdCBmb2xsb3dlZCBieSB0aGUgYWJicmV2aWF0aW9uIG9mIHRoZSBhbWlubyBhY2lkcyBpbnZvbHZlZC4gVGhlIGRpc3VsZmlkZSBsaW5rYWdlIHBvc2l0aW9ucyBzaGFsbCBhY3R1YWxseSBjb250YWluIHRoZSBhbWlubyBhY2lkIEN5c3RlaW5lIGF0IHRoZSByZXNwZWN0aXZlIHBvc2l0aW9ucy5cclxuICAgKi9cclxuICBkaXN1bGZpZGVMaW5rYWdlPzogZmhpci5GaGlyU3RyaW5nW118KHN0cmluZ3xudWxsKVtdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3Vic3RhbmNlUHJvdGVpbi5kaXN1bGZpZGVMaW5rYWdlXHJcbiAgICovXHJcbiAgX2Rpc3VsZmlkZUxpbmthZ2U/OihmaGlyLkZoaXJFbGVtZW50QXJnc3xudWxsKVtdO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgc3ViY2xhdXNlIHJlZmVycyB0byB0aGUgZGVzY3JpcHRpb24gb2YgZWFjaCBzdWJ1bml0IGNvbnN0aXR1dGluZyB0aGUgU3Vic3RhbmNlUHJvdGVpbi4gQSBzdWJ1bml0IGlzIGEgbGluZWFyIHNlcXVlbmNlIG9mIGFtaW5vIGFjaWRzIGxpbmtlZCB0aHJvdWdoIHBlcHRpZGUgYm9uZHMuIFRoZSBTdWJ1bml0IGluZm9ybWF0aW9uIHNoYWxsIGJlIHByb3ZpZGVkIHdoZW4gdGhlIGZpbmlzaGVkIFN1YnN0YW5jZVByb3RlaW4gaXMgYSBjb21wbGV4IG9mIG11bHRpcGxlIHNlcXVlbmNlczsgc3VidW5pdHMgYXJlIG5vdCB1c2VkIHRvIGRlbGluZWF0ZSBkb21haW5zIHdpdGhpbiBhIHNpbmdsZSBzZXF1ZW5jZS4gU3VidW5pdHMgYXJlIGxpc3RlZCBpbiBvcmRlciBvZiBkZWNyZWFzaW5nIGxlbmd0aDsgc2VxdWVuY2VzIG9mIHRoZSBzYW1lIGxlbmd0aCB3aWxsIGJlIG9yZGVyZWQgYnkgZGVjcmVhc2luZyBtb2xlY3VsYXIgd2VpZ2h0OyBzdWJ1bml0cyB0aGF0IGhhdmUgaWRlbnRpY2FsIHNlcXVlbmNlcyB3aWxsIGJlIHJlcGVhdGVkIG11bHRpcGxlIHRpbWVzLlxyXG4gICAqL1xyXG4gIHN1YnVuaXQ/OiBmaGlyLlN1YnN0YW5jZVByb3RlaW5TdWJ1bml0QXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgU3Vic3RhbmNlUHJvdGVpbiBpcyBkZWZpbmVkIGFzIGEgc2luZ2xlIHVuaXQgb2YgYSBsaW5lYXIgYW1pbm8gYWNpZCBzZXF1ZW5jZSwgb3IgYSBjb21iaW5hdGlvbiBvZiBzdWJ1bml0cyB0aGF0IGFyZSBlaXRoZXIgY292YWxlbnRseSBsaW5rZWQgb3IgaGF2ZSBhIGRlZmluZWQgaW52YXJpYW50IHN0b2ljaGlvbWV0cmljIHJlbGF0aW9uc2hpcC4gVGhpcyBpbmNsdWRlcyBhbGwgc3ludGhldGljLCByZWNvbWJpbmFudCBhbmQgcHVyaWZpZWQgU3Vic3RhbmNlUHJvdGVpbnMgb2YgZGVmaW5lZCBzZXF1ZW5jZSwgd2hldGhlciB0aGUgdXNlIGlzIHRoZXJhcGV1dGljIG9yIHByb3BoeWxhY3RpYy4gVGhpcyBzZXQgb2YgZWxlbWVudHMgd2lsbCBiZSB1c2VkIHRvIGRlc2NyaWJlIGFsYnVtaW5zLCBjb2FndWxhdGlvbiBmYWN0b3JzLCBjeXRva2luZXMsIGdyb3d0aCBmYWN0b3JzLCBwZXB0aWRlL1N1YnN0YW5jZVByb3RlaW4gaG9ybW9uZXMsIGVuenltZXMsIHRveGlucywgdG94b2lkcywgcmVjb21iaW5hbnQgdmFjY2luZXMsIGFuZCBpbW11bm9tb2R1bGF0b3JzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFN1YnN0YW5jZVByb3RlaW4gZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1N1YnN0YW5jZVByb3RlaW4nO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNvdXJjZVR5cGU6IFwiU3Vic3RhbmNlUHJvdGVpblwiO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBTdWJzdGFuY2VQcm90ZWluIGRlc2NyaXB0aXZlIGVsZW1lbnRzIHdpbGwgb25seSBiZSB1c2VkIHdoZW4gYSBjb21wbGV0ZSBvciBwYXJ0aWFsIGFtaW5vIGFjaWQgc2VxdWVuY2UgaXMgYXZhaWxhYmxlIG9yIGRlcml2YWJsZSBmcm9tIGEgbnVjbGVpYyBhY2lkIHNlcXVlbmNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXF1ZW5jZVR5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTnVtYmVyIG9mIGxpbmVhciBzZXF1ZW5jZXMgb2YgYW1pbm8gYWNpZHMgbGlua2VkIHRocm91Z2ggcGVwdGlkZSBib25kcy4gVGhlIG51bWJlciBvZiBzdWJ1bml0cyBjb25zdGl0dXRpbmcgdGhlIFN1YnN0YW5jZVByb3RlaW4gc2hhbGwgYmUgZGVzY3JpYmVkLiBJdCBpcyBwb3NzaWJsZSB0aGF0IHRoZSBudW1iZXIgb2Ygc3VidW5pdHMgY2FuIGJlIHZhcmlhYmxlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBudW1iZXJPZlN1YnVuaXRzPzogZmhpci5GaGlySW50ZWdlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRpc3VscGhpZGUgYm9uZCBiZXR3ZWVuIHR3byBjeXN0ZWluZSByZXNpZHVlcyBlaXRoZXIgb24gdGhlIHNhbWUgc3VidW5pdCBvciBvbiB0d28gZGlmZmVyZW50IHN1YnVuaXRzIHNoYWxsIGJlIGRlc2NyaWJlZC4gVGhlIHBvc2l0aW9uIG9mIHRoZSBkaXN1bGZpZGUgYm9uZHMgaW4gdGhlIFN1YnN0YW5jZVByb3RlaW4gc2hhbGwgYmUgbGlzdGVkIGluIGluY3JlYXNpbmcgb3JkZXIgb2Ygc3VidW5pdCBudW1iZXIgYW5kIHBvc2l0aW9uIHdpdGhpbiBzdWJ1bml0IGZvbGxvd2VkIGJ5IHRoZSBhYmJyZXZpYXRpb24gb2YgdGhlIGFtaW5vIGFjaWRzIGludm9sdmVkLiBUaGUgZGlzdWxmaWRlIGxpbmthZ2UgcG9zaXRpb25zIHNoYWxsIGFjdHVhbGx5IGNvbnRhaW4gdGhlIGFtaW5vIGFjaWQgQ3lzdGVpbmUgYXQgdGhlIHJlc3BlY3RpdmUgcG9zaXRpb25zLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkaXN1bGZpZGVMaW5rYWdlOiBmaGlyLkZoaXJTdHJpbmdbXTtcclxuICAvKipcclxuICAgKiBUaGlzIHN1YmNsYXVzZSByZWZlcnMgdG8gdGhlIGRlc2NyaXB0aW9uIG9mIGVhY2ggc3VidW5pdCBjb25zdGl0dXRpbmcgdGhlIFN1YnN0YW5jZVByb3RlaW4uIEEgc3VidW5pdCBpcyBhIGxpbmVhciBzZXF1ZW5jZSBvZiBhbWlubyBhY2lkcyBsaW5rZWQgdGhyb3VnaCBwZXB0aWRlIGJvbmRzLiBUaGUgU3VidW5pdCBpbmZvcm1hdGlvbiBzaGFsbCBiZSBwcm92aWRlZCB3aGVuIHRoZSBmaW5pc2hlZCBTdWJzdGFuY2VQcm90ZWluIGlzIGEgY29tcGxleCBvZiBtdWx0aXBsZSBzZXF1ZW5jZXM7IHN1YnVuaXRzIGFyZSBub3QgdXNlZCB0byBkZWxpbmVhdGUgZG9tYWlucyB3aXRoaW4gYSBzaW5nbGUgc2VxdWVuY2UuIFN1YnVuaXRzIGFyZSBsaXN0ZWQgaW4gb3JkZXIgb2YgZGVjcmVhc2luZyBsZW5ndGg7IHNlcXVlbmNlcyBvZiB0aGUgc2FtZSBsZW5ndGggd2lsbCBiZSBvcmRlcmVkIGJ5IGRlY3JlYXNpbmcgbW9sZWN1bGFyIHdlaWdodDsgc3VidW5pdHMgdGhhdCBoYXZlIGlkZW50aWNhbCBzZXF1ZW5jZXMgd2lsbCBiZSByZXBlYXRlZCBtdWx0aXBsZSB0aW1lcy5cclxuICAgKi9cclxuICBwdWJsaWMgc3VidW5pdDogZmhpci5TdWJzdGFuY2VQcm90ZWluU3VidW5pdFtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFN1YnN0YW5jZVByb3RlaW4gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxTdWJzdGFuY2VQcm90ZWluQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ1N1YnN0YW5jZVByb3RlaW4nO1xyXG4gICAgaWYgKHNvdXJjZVsnc2VxdWVuY2VUeXBlJ10pIHsgdGhpcy5zZXF1ZW5jZVR5cGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnNlcXVlbmNlVHlwZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ251bWJlck9mU3VidW5pdHMnXSkgeyB0aGlzLm51bWJlck9mU3VidW5pdHMgPSBuZXcgZmhpci5GaGlySW50ZWdlcih7dmFsdWU6IHNvdXJjZS5udW1iZXJPZlN1YnVuaXRzfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19udW1iZXJPZlN1YnVuaXRzJ10pIHtcclxuICAgICAgaWYgKHRoaXMubnVtYmVyT2ZTdWJ1bml0cykgeyB0aGlzLm51bWJlck9mU3VidW5pdHMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbnVtYmVyT2ZTdWJ1bml0cyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLm51bWJlck9mU3VidW5pdHMgPSBuZXcgZmhpci5GaGlySW50ZWdlcihzb3VyY2UuX251bWJlck9mU3VidW5pdHMgYXMgUGFydGlhbDxmaGlyLkZoaXJJbnRlZ2VyQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydkaXN1bGZpZGVMaW5rYWdlJ10pIHsgdGhpcy5kaXN1bGZpZGVMaW5rYWdlID0gc291cmNlLmRpc3VsZmlkZUxpbmthZ2UubWFwKCh4KSA9PiBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogeH0pKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZGlzdWxmaWRlTGlua2FnZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydfZGlzdWxmaWRlTGlua2FnZSddKSB7XHJcbiAgICAgIHNvdXJjZS5fZGlzdWxmaWRlTGlua2FnZS5mb3JFYWNoKCh4LGkpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5kaXN1bGZpZGVMaW5rYWdlLmxlbmd0aCA+PSBpKSB7IGlmICh4KSB7IHRoaXMuZGlzdWxmaWRlTGlua2FnZVtpXS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoeCk7IH0gfVxyXG4gICAgICAgIGVsc2UgeyBpZiAoeCkgeyB0aGlzLmRpc3VsZmlkZUxpbmthZ2UucHVzaChuZXcgZmhpci5GaGlyU3RyaW5nKHggYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPikpOyB9IH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydzdWJ1bml0J10pIHsgdGhpcy5zdWJ1bml0ID0gc291cmNlLnN1YnVuaXQubWFwKCh4KSA9PiBuZXcgZmhpci5TdWJzdGFuY2VQcm90ZWluU3VidW5pdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN1YnVuaXQgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdTdWJzdGFuY2VQcm90ZWluJyB9XHJcbiAgICB0aGlzLnZSZXFTKCdyZXNvdXJjZVR5cGUnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdzZXF1ZW5jZVR5cGUnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdudW1iZXJPZlN1YnVuaXRzJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0QSgnZGlzdWxmaWRlTGlua2FnZScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdEEoJ3N1YnVuaXQnLGV4cHJlc3Npb24pXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=