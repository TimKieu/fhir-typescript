// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: BiologicallyDerivedProduct
import * as fhir from '../fhir.js';
// @ts-ignore
import { ProductStorageScaleVsValidation } from '../fhirValueSets/ProductStorageScaleVsValidation.js';
// @ts-ignore
import { ProductCategoryVsValidation } from '../fhirValueSets/ProductCategoryVsValidation.js';
// @ts-ignore
import { ProductStatusVsValidation } from '../fhirValueSets/ProductStatusVsValidation.js';
/**
 * How this product was collected.
 */
export class BiologicallyDerivedProductCollection extends fhir.BackboneElement {
    /**
     * Default constructor for BiologicallyDerivedProductCollection - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['collector']) {
            this.collector = new fhir.Reference(source.collector, options);
        }
        if (source['source']) {
            this.source = new fhir.Reference(source.source, options);
        }
        if (source['collected']) {
            this.collected = source.collected;
        }
        else if (source['collectedDateTime'] !== undefined) {
            this.collected = new fhir.FhirDateTime({ value: source.collectedDateTime }, options);
        }
        else if (source['collectedPeriod']) {
            this.collected = new fhir.Period(source.collectedPeriod, options);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'BiologicallyDerivedProduct.collection';
        }
        iss.push(...this.vOS('collector', exp));
        iss.push(...this.vOS('source', exp));
        iss.push(...this.vOS('collected', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BiologicallyDerivedProductCollection._fts_dataType = 'BiologicallyDerivedProductCollection';
/**
 * Internal flag to properly serialize choice-type element BiologicallyDerivedProduct.collection.collected[x]
 */
BiologicallyDerivedProductCollection._fts_collectedIsChoice = true;
/**
 * Any processing of the product during collection that does not change the fundamental nature of the product. For example adding anti-coagulants during the collection of Peripheral Blood Stem Cells.
 */
export class BiologicallyDerivedProductProcessing extends fhir.BackboneElement {
    /**
     * Default constructor for BiologicallyDerivedProductProcessing - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['description'] !== undefined) {
            this.description = new fhir.FhirString({ value: source.description }, options);
        }
        if (source['_description']) {
            if (this.description) {
                this.description.addExtendedProperties(source._description);
            }
            else {
                this.description = new fhir.FhirString(source._description, options);
            }
        }
        if (source['procedure']) {
            this.procedure = new fhir.CodeableConcept(source.procedure, options);
        }
        if (source['additive']) {
            this.additive = new fhir.Reference(source.additive, options);
        }
        if (source['time']) {
            this.time = source.time;
        }
        else if (source['timeDateTime'] !== undefined) {
            this.time = new fhir.FhirDateTime({ value: source.timeDateTime }, options);
        }
        else if (source['timePeriod']) {
            this.time = new fhir.Period(source.timePeriod, options);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'BiologicallyDerivedProduct.processing';
        }
        iss.push(...this.vOS('description', exp));
        iss.push(...this.vOS('procedure', exp));
        iss.push(...this.vOS('additive', exp));
        iss.push(...this.vOS('time', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BiologicallyDerivedProductProcessing._fts_dataType = 'BiologicallyDerivedProductProcessing';
/**
 * Internal flag to properly serialize choice-type element BiologicallyDerivedProduct.processing.time[x]
 */
BiologicallyDerivedProductProcessing._fts_timeIsChoice = true;
/**
 * Any manipulation of product post-collection that is intended to alter the product.  For example a buffy-coat enrichment or CD8 reduction of Peripheral Blood Stem Cells to make it more suitable for infusion.
 */
export class BiologicallyDerivedProductManipulation extends fhir.BackboneElement {
    /**
     * Default constructor for BiologicallyDerivedProductManipulation - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['description'] !== undefined) {
            this.description = new fhir.FhirString({ value: source.description }, options);
        }
        if (source['_description']) {
            if (this.description) {
                this.description.addExtendedProperties(source._description);
            }
            else {
                this.description = new fhir.FhirString(source._description, options);
            }
        }
        if (source['time']) {
            this.time = source.time;
        }
        else if (source['timeDateTime'] !== undefined) {
            this.time = new fhir.FhirDateTime({ value: source.timeDateTime }, options);
        }
        else if (source['timePeriod']) {
            this.time = new fhir.Period(source.timePeriod, options);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'BiologicallyDerivedProduct.manipulation';
        }
        iss.push(...this.vOS('description', exp));
        iss.push(...this.vOS('time', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BiologicallyDerivedProductManipulation._fts_dataType = 'BiologicallyDerivedProductManipulation';
/**
 * Internal flag to properly serialize choice-type element BiologicallyDerivedProduct.manipulation.time[x]
 */
BiologicallyDerivedProductManipulation._fts_timeIsChoice = true;
/**
 * Product storage.
 */
export class BiologicallyDerivedProductStorage extends fhir.BackboneElement {
    /**
     * Default constructor for BiologicallyDerivedProductStorage - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['description'] !== undefined) {
            this.description = new fhir.FhirString({ value: source.description }, options);
        }
        if (source['_description']) {
            if (this.description) {
                this.description.addExtendedProperties(source._description);
            }
            else {
                this.description = new fhir.FhirString(source._description, options);
            }
        }
        if (source['temperature'] !== undefined) {
            this.temperature = new fhir.FhirDecimal({ value: source.temperature }, options);
        }
        if (source['_temperature']) {
            if (this.temperature) {
                this.temperature.addExtendedProperties(source._temperature);
            }
            else {
                this.temperature = new fhir.FhirDecimal(source._temperature, options);
            }
        }
        if (source['scale'] !== undefined) {
            this.scale = new fhir.FhirCode({ value: source.scale }, options);
        }
        if (source['_scale']) {
            if (this.scale) {
                this.scale.addExtendedProperties(source._scale);
            }
            else {
                this.scale = new fhir.FhirCode(source._scale, options);
            }
        }
        if (source['duration']) {
            this.duration = new fhir.Period(source.duration, options);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'BiologicallyDerivedProduct.storage';
        }
        iss.push(...this.vOS('description', exp));
        iss.push(...this.vOS('temperature', exp));
        iss.push(...this.vOSV('scale', exp, 'ProductStorageScale', ProductStorageScaleVsValidation, 'r'));
        iss.push(...this.vOS('duration', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BiologicallyDerivedProductStorage._fts_dataType = 'BiologicallyDerivedProductStorage';
/**
 * A material substance originating from a biological entity intended to be transplanted or infused
 * into another (possibly the same) biological entity.
 */
export class BiologicallyDerivedProduct extends fhir.DomainResource {
    /**
     * Default constructor for BiologicallyDerivedProduct - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'BiologicallyDerivedProduct';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x, options));
        }
        else {
            this.identifier = [];
        }
        if (source['productCategory'] !== undefined) {
            this.productCategory = new fhir.FhirCode({ value: source.productCategory }, options);
        }
        if (source['_productCategory']) {
            if (this.productCategory) {
                this.productCategory.addExtendedProperties(source._productCategory);
            }
            else {
                this.productCategory = new fhir.FhirCode(source._productCategory, options);
            }
        }
        if (source['productCode']) {
            this.productCode = new fhir.CodeableConcept(source.productCode, options);
        }
        if (source['status'] !== undefined) {
            this.status = new fhir.FhirCode({ value: source.status }, options);
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status, options);
            }
        }
        if (source['request']) {
            this.request = source.request.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.request = [];
        }
        if (source['quantity'] !== undefined) {
            this.quantity = new fhir.FhirInteger({ value: source.quantity }, options);
        }
        if (source['_quantity']) {
            if (this.quantity) {
                this.quantity.addExtendedProperties(source._quantity);
            }
            else {
                this.quantity = new fhir.FhirInteger(source._quantity, options);
            }
        }
        if (source['parent']) {
            this.parent = source.parent.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.parent = [];
        }
        if (source['collection']) {
            this.collection = new fhir.BiologicallyDerivedProductCollection(source.collection, options);
        }
        if (source['processing']) {
            this.processing = source.processing.map((x) => new fhir.BiologicallyDerivedProductProcessing(x, options));
        }
        else {
            this.processing = [];
        }
        if (source['manipulation']) {
            this.manipulation = new fhir.BiologicallyDerivedProductManipulation(source.manipulation, options);
        }
        if (source['storage']) {
            this.storage = source.storage.map((x) => new fhir.BiologicallyDerivedProductStorage(x, options));
        }
        else {
            this.storage = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'BiologicallyDerivedProduct';
        }
        iss.push(...this.vOA('identifier', exp));
        iss.push(...this.vOSV('productCategory', exp, 'ProductCategory', ProductCategoryVsValidation, 'r'));
        iss.push(...this.vOS('productCode', exp));
        iss.push(...this.vOSV('status', exp, 'ProductStatus', ProductStatusVsValidation, 'r'));
        iss.push(...this.vOA('request', exp));
        iss.push(...this.vOS('quantity', exp));
        iss.push(...this.vOA('parent', exp));
        iss.push(...this.vOS('collection', exp));
        iss.push(...this.vOA('processing', exp));
        iss.push(...this.vOS('manipulation', exp));
        iss.push(...this.vOA('storage', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BiologicallyDerivedProduct._fts_dataType = 'BiologicallyDerivedProduct';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3QuanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL0Jpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQiwrQ0FBK0M7QUFDL0Msa0NBQWtDO0FBQ2xDLDRDQUE0QztBQUU1QyxPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQVFuQyxhQUFhO0FBQ2IsT0FBTyxFQUFFLCtCQUErQixFQUFFLE1BQU0scURBQXFELENBQUM7QUFHdEcsYUFBYTtBQUNiLE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLGlEQUFpRCxDQUFDO0FBRzlGLGFBQWE7QUFDYixPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSwrQ0FBK0MsQ0FBQztBQTJCMUY7O0dBRUc7QUFDSCxNQUFNLE9BQU8sb0NBQXFDLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFxQjVFOztPQUVHO0lBQ0gsWUFBWSxTQUEyRCxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUNqSCxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUMsQ0FBQztTQUFFO1FBQzVGLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztTQUFFO1FBQ25GLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDO1NBQUU7YUFDMUQsSUFBSSxNQUFNLENB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QUFDLENBQUM7UUFDMUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDckMsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDOztBQXpHRDs7R0FFRztBQUM2Qix3Q0FBYSxHQUFVLDRCQUE0QixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0LmNvcmUgdmVyc2lvbjogNC4wLjFcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdFxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUHJvY2VkdXJlQ29kZXMsICBQcm9jZWR1cmVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUHJvY2VkdXJlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFByb2NlZHVyZVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUHJvY2VkdXJlVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBQcm9kdWN0U3RvcmFnZVNjYWxlQ29kZXMsICBQcm9kdWN0U3RvcmFnZVNjYWxlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1Byb2R1Y3RTdG9yYWdlU2NhbGVDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUHJvZHVjdFN0b3JhZ2VTY2FsZVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUHJvZHVjdFN0b3JhZ2VTY2FsZVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUHJvZHVjdENhdGVnb3J5Q29kZXMsICBQcm9kdWN0Q2F0ZWdvcnlDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUHJvZHVjdENhdGVnb3J5Q29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFByb2R1Y3RDYXRlZ29yeVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUHJvZHVjdENhdGVnb3J5VnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBQcm9kdWN0U3RhdHVzQ29kZXMsICBQcm9kdWN0U3RhdHVzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1Byb2R1Y3RTdGF0dXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUHJvZHVjdFN0YXR1c1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUHJvZHVjdFN0YXR1c1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdENvbGxlY3Rpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RDb2xsZWN0aW9uQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogSGVhbHRoY2FyZSBwcm9mZXNzaW9uYWwgd2hvIGlzIHBlcmZvcm1pbmcgdGhlIGNvbGxlY3Rpb24uXHJcbiAgICovXHJcbiAgY29sbGVjdG9yPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcGF0aWVudCBvciBlbnRpdHksIHN1Y2ggYXMgYSBob3NwaXRhbCBvciB2ZW5kb3IgaW4gdGhlIGNhc2Ugb2YgYSBwcm9jZXNzZWQvbWFuaXB1bGF0ZWQvbWFudWZhY3R1cmVkIHByb2R1Y3QsIHByb3ZpZGluZyB0aGUgcHJvZHVjdC5cclxuICAgKi9cclxuICBzb3VyY2U/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRpbWUgb2YgcHJvZHVjdCBjb2xsZWN0aW9uLlxyXG4gICAqL1xyXG4gIGNvbGxlY3RlZD86IGZoaXIuRmhpckRhdGVUaW1lfGZoaXIuUGVyaW9kfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaW1lIG9mIHByb2R1Y3QgY29sbGVjdGlvbi5cclxuICAgKi9cclxuICBjb2xsZWN0ZWREYXRlVGltZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGltZSBvZiBwcm9kdWN0IGNvbGxlY3Rpb24uXHJcbiAgICovXHJcbiAgY29sbGVjdGVkUGVyaW9kPzogZmhpci5QZXJpb2RBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEhvdyB0aGlzIHByb2R1Y3Qgd2FzIGNvbGxlY3RlZC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdENvbGxlY3Rpb24gZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdENvbGxlY3Rpb24nO1xyXG4gIC8qKlxyXG4gICAqIEhlYWx0aGNhcmUgcHJvZmVzc2lvbmFsIHdobyBpcyBwZXJmb3JtaW5nIHRoZSBjb2xsZWN0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb2xsZWN0b3I/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBhdGllbnQgb3IgZW50aXR5LCBzdWNoIGFzIGEgaG9zcGl0YWwgb3IgdmVuZG9yIGluIHRoZSBjYXNlIG9mIGEgcHJvY2Vzc2VkL21hbmlwdWxhdGVkL21hbnVmYWN0dXJlZCBwcm9kdWN0LCBwcm92aWRpbmcgdGhlIHByb2R1Y3QuXHJcbiAgICovXHJcbiAgcHVibGljIHNvdXJjZT86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaW1lIG9mIHByb2R1Y3QgY29sbGVjdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgY29sbGVjdGVkPzogKGZoaXIuRmhpckRhdGVUaW1lfGZoaXIuUGVyaW9kKXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdC5jb2xsZWN0aW9uLmNvbGxlY3RlZFt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c19jb2xsZWN0ZWRJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdENvbGxlY3Rpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdENvbGxlY3Rpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnY29sbGVjdG9yJ10pIHsgdGhpcy5jb2xsZWN0b3IgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmNvbGxlY3Rvciwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3NvdXJjZSddKSB7IHRoaXMuc291cmNlID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5zb3VyY2UsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydjb2xsZWN0ZWQnXSkgeyB0aGlzLmNvbGxlY3RlZCA9IHNvdXJjZS5jb2xsZWN0ZWQ7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnY29sbGVjdGVkRGF0ZVRpbWUnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuY29sbGVjdGVkID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLmNvbGxlY3RlZERhdGVUaW1lfSwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnY29sbGVjdGVkUGVyaW9kJ10pIHsgdGhpcy5jb2xsZWN0ZWQgPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLmNvbGxlY3RlZFBlcmlvZCwgb3B0aW9ucyk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdC5jb2xsZWN0aW9uJyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnY29sbGVjdG9yJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdzb3VyY2UnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2NvbGxlY3RlZCcsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RQcm9jZXNzaW5nIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0UHJvY2Vzc2luZ0FyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaXB0aW9uIG9mIG9mIHByb2Nlc3NpbmcuXHJcbiAgICovXHJcbiAgZGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3QucHJvY2Vzc2luZy5kZXNjcmlwdGlvblxyXG4gICAqL1xyXG4gIF9kZXNjcmlwdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogUHJvY2VzaW5nIGNvZGUuXHJcbiAgICovXHJcbiAgcHJvY2VkdXJlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTdWJzdGFuY2UgYWRkZWQgZHVyaW5nIHByb2Nlc3NpbmcuXHJcbiAgICovXHJcbiAgYWRkaXRpdmU/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRpbWUgb2YgcHJvY2Vzc2luZy5cclxuICAgKi9cclxuICB0aW1lPzogZmhpci5GaGlyRGF0ZVRpbWV8Zmhpci5QZXJpb2R8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRpbWUgb2YgcHJvY2Vzc2luZy5cclxuICAgKi9cclxuICB0aW1lRGF0ZVRpbWU/OiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRpbWUgb2YgcHJvY2Vzc2luZy5cclxuICAgKi9cclxuICB0aW1lUGVyaW9kPzogZmhpci5QZXJpb2RBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFueSBwcm9jZXNzaW5nIG9mIHRoZSBwcm9kdWN0IGR1cmluZyBjb2xsZWN0aW9uIHRoYXQgZG9lcyBub3QgY2hhbmdlIHRoZSBmdW5kYW1lbnRhbCBuYXR1cmUgb2YgdGhlIHByb2R1Y3QuIEZvciBleGFtcGxlIGFkZGluZyBhbnRpLWNvYWd1bGFudHMgZHVyaW5nIHRoZSBjb2xsZWN0aW9uIG9mIFBlcmlwaGVyYWwgQmxvb2QgU3RlbSBDZWxscy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdFByb2Nlc3NpbmcgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdFByb2Nlc3NpbmcnO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaXB0aW9uIG9mIG9mIHByb2Nlc3NpbmcuXHJcbiAgICovXHJcbiAgcHVibGljIGRlc2NyaXB0aW9uPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBQcm9jZXNpbmcgY29kZS5cclxuICAgKi9cclxuICBwdWJsaWMgcHJvY2VkdXJlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFN1YnN0YW5jZSBhZGRlZCBkdXJpbmcgcHJvY2Vzc2luZy5cclxuICAgKi9cclxuICBwdWJsaWMgYWRkaXRpdmU/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGltZSBvZiBwcm9jZXNzaW5nLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0aW1lPzogKGZoaXIuRmhpckRhdGVUaW1lfGZoaXIuUGVyaW9kKXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdC5wcm9jZXNzaW5nLnRpbWVbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfdGltZUlzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0UHJvY2Vzc2luZyAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0UHJvY2Vzc2luZ0FyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydkZXNjcmlwdGlvbiddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5kZXNjcmlwdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuZGVzY3JpcHRpb259LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2Rlc2NyaXB0aW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZGVzY3JpcHRpb24pIHsgdGhpcy5kZXNjcmlwdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9kZXNjcmlwdGlvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRlc2NyaXB0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2Rlc2NyaXB0aW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydwcm9jZWR1cmUnXSkgeyB0aGlzLnByb2NlZHVyZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UucHJvY2VkdXJlLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYWRkaXRpdmUnXSkgeyB0aGlzLmFkZGl0aXZlID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5hZGRpdGl2ZSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3RpbWUnXSkgeyB0aGlzLnRpbWUgPSBzb3VyY2UudGltZTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd0aW1lRGF0ZVRpbWUnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMudGltZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS50aW1lRGF0ZVRpbWV9LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd0aW1lUGVyaW9kJ10pIHsgdGhpcy50aW1lID0gbmV3IGZoaXIuUGVyaW9kKHNvdXJjZS50aW1lUGVyaW9kLCBvcHRpb25zKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0Jpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0LnByb2Nlc3NpbmcnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdkZXNjcmlwdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygncHJvY2VkdXJlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdhZGRpdGl2ZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygndGltZScsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RNYW5pcHVsYXRpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RNYW5pcHVsYXRpb25BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBEZXNjcmlwdGlvbiBvZiBtYW5pcHVsYXRpb24uXHJcbiAgICovXHJcbiAgZGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3QubWFuaXB1bGF0aW9uLmRlc2NyaXB0aW9uXHJcbiAgICovXHJcbiAgX2Rlc2NyaXB0aW9uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaW1lIG9mIG1hbmlwdWxhdGlvbi5cclxuICAgKi9cclxuICB0aW1lPzogZmhpci5GaGlyRGF0ZVRpbWV8Zmhpci5QZXJpb2R8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRpbWUgb2YgbWFuaXB1bGF0aW9uLlxyXG4gICAqL1xyXG4gIHRpbWVEYXRlVGltZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGltZSBvZiBtYW5pcHVsYXRpb24uXHJcbiAgICovXHJcbiAgdGltZVBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBbnkgbWFuaXB1bGF0aW9uIG9mIHByb2R1Y3QgcG9zdC1jb2xsZWN0aW9uIHRoYXQgaXMgaW50ZW5kZWQgdG8gYWx0ZXIgdGhlIHByb2R1Y3QuICBGb3IgZXhhbXBsZSBhIGJ1ZmZ5LWNvYXQgZW5yaWNobWVudCBvciBDRDggcmVkdWN0aW9uIG9mIFBlcmlwaGVyYWwgQmxvb2QgU3RlbSBDZWxscyB0byBtYWtlIGl0IG1vcmUgc3VpdGFibGUgZm9yIGluZnVzaW9uLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0TWFuaXB1bGF0aW9uIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RNYW5pcHVsYXRpb24nO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaXB0aW9uIG9mIG1hbmlwdWxhdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgZGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRpbWUgb2YgbWFuaXB1bGF0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0aW1lPzogKGZoaXIuRmhpckRhdGVUaW1lfGZoaXIuUGVyaW9kKXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdC5tYW5pcHVsYXRpb24udGltZVt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c190aW1lSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RNYW5pcHVsYXRpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdE1hbmlwdWxhdGlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydkZXNjcmlwdGlvbiddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5kZXNjcmlwdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuZGVzY3JpcHRpb259LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2Rlc2NyaXB0aW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZGVzY3JpcHRpb24pIHsgdGhpcy5kZXNjcmlwdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9kZXNjcmlwdGlvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRlc2NyaXB0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2Rlc2NyaXB0aW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd0aW1lJ10pIHsgdGhpcy50aW1lID0gc291cmNlLnRpbWU7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsndGltZURhdGVUaW1lJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnRpbWUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2UudGltZURhdGVUaW1lfSwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsndGltZVBlcmlvZCddKSB7IHRoaXMudGltZSA9IG5ldyBmaGlyLlBlcmlvZChzb3VyY2UudGltZVBlcmlvZCwgb3B0aW9ucyk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdC5tYW5pcHVsYXRpb24nIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdkZXNjcmlwdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygndGltZScsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RTdG9yYWdlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0U3RvcmFnZUFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaXB0aW9uIG9mIHN0b3JhZ2UuXHJcbiAgICovXHJcbiAgZGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3Quc3RvcmFnZS5kZXNjcmlwdGlvblxyXG4gICAqL1xyXG4gIF9kZXNjcmlwdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogU3RvcmFnZSB0ZW1wZXJhdHVyZS5cclxuICAgKi9cclxuICB0ZW1wZXJhdHVyZT86IGZoaXIuRmhpckRlY2ltYWx8bnVtYmVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3Quc3RvcmFnZS50ZW1wZXJhdHVyZVxyXG4gICAqL1xyXG4gIF90ZW1wZXJhdHVyZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGVtcGVyYXR1cmUgc2NhbGUgdXNlZC5cclxuICAgKi9cclxuICBzY2FsZT86IGZoaXIuRmhpckNvZGU8UHJvZHVjdFN0b3JhZ2VTY2FsZUNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdC5zdG9yYWdlLnNjYWxlXHJcbiAgICovXHJcbiAgX3NjYWxlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBTdG9yYWdlIHRpbWVwZXJpb2QuXHJcbiAgICovXHJcbiAgZHVyYXRpb24/OiBmaGlyLlBlcmlvZEFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogUHJvZHVjdCBzdG9yYWdlLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0U3RvcmFnZSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0Jpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0U3RvcmFnZSc7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpcHRpb24gb2Ygc3RvcmFnZS5cclxuICAgKi9cclxuICBwdWJsaWMgZGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFN0b3JhZ2UgdGVtcGVyYXR1cmUuXHJcbiAgICovXHJcbiAgcHVibGljIHRlbXBlcmF0dXJlPzogZmhpci5GaGlyRGVjaW1hbHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGVtcGVyYXR1cmUgc2NhbGUgdXNlZC5cclxuICAgKi9cclxuICBwdWJsaWMgc2NhbGU/OiBmaGlyLkZoaXJDb2RlPFByb2R1Y3RTdG9yYWdlU2NhbGVDb2RlVHlwZT58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFN0b3JhZ2UgdGltZXBlcmlvZC5cclxuICAgKi9cclxuICBwdWJsaWMgZHVyYXRpb24/OiBmaGlyLlBlcmlvZHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RTdG9yYWdlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8QmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RTdG9yYWdlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2Rlc2NyaXB0aW9uJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLmRlc2NyaXB0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5kZXNjcmlwdGlvbn0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfZGVzY3JpcHRpb24nXSkge1xyXG4gICAgICBpZiAodGhpcy5kZXNjcmlwdGlvbikgeyB0aGlzLmRlc2NyaXB0aW9uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2Rlc2NyaXB0aW9uISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZGVzY3JpcHRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fZGVzY3JpcHRpb24gYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3RlbXBlcmF0dXJlJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnRlbXBlcmF0dXJlID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoe3ZhbHVlOiBzb3VyY2UudGVtcGVyYXR1cmV9LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3RlbXBlcmF0dXJlJ10pIHtcclxuICAgICAgaWYgKHRoaXMudGVtcGVyYXR1cmUpIHsgdGhpcy50ZW1wZXJhdHVyZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl90ZW1wZXJhdHVyZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnRlbXBlcmF0dXJlID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoc291cmNlLl90ZW1wZXJhdHVyZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckRlY2ltYWxBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3NjYWxlJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnNjYWxlID0gbmV3IGZoaXIuRmhpckNvZGU8UHJvZHVjdFN0b3JhZ2VTY2FsZUNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5zY2FsZX0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfc2NhbGUnXSkge1xyXG4gICAgICBpZiAodGhpcy5zY2FsZSkgeyB0aGlzLnNjYWxlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3NjYWxlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc2NhbGUgPSBuZXcgZmhpci5GaGlyQ29kZTxQcm9kdWN0U3RvcmFnZVNjYWxlQ29kZVR5cGU+KHNvdXJjZS5fc2NhbGUgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2R1cmF0aW9uJ10pIHsgdGhpcy5kdXJhdGlvbiA9IG5ldyBmaGlyLlBlcmlvZChzb3VyY2UuZHVyYXRpb24sIG9wdGlvbnMpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3Quc3RvcmFnZScgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2Rlc2NyaXB0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCd0ZW1wZXJhdHVyZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPU1YoJ3NjYWxlJyxleHAsJ1Byb2R1Y3RTdG9yYWdlU2NhbGUnLFByb2R1Y3RTdG9yYWdlU2NhbGVWc1ZhbGlkYXRpb24sJ3InKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnZHVyYXRpb24nLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0QXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RcInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyByZWNvcmRzIGlkZW50aWZpZXJzIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGJpb2xvZ2ljYWxseSBkZXJpdmVkIHByb2R1Y3QgaW5zdGFuY2UgdGhhdCBhcmUgZGVmaW5lZCBieSBidXNpbmVzcyBwcm9jZXNzZXMgYW5kL29yIHVzZWQgdG8gcmVmZXIgdG8gaXQgd2hlbiBhIGRpcmVjdCBVUkwgcmVmZXJlbmNlIHRvIHRoZSByZXNvdXJjZSBpdHNlbGYgaXMgbm90IGFwcHJvcHJpYXRlIChlLmcuIGluIENEQSBkb2N1bWVudHMsIG9yIGluIHdyaXR0ZW4gLyBwcmludGVkIGRvY3VtZW50YXRpb24pLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEJyb2FkIGNhdGVnb3J5IG9mIHRoaXMgcHJvZHVjdC5cclxuICAgKi9cclxuICBwcm9kdWN0Q2F0ZWdvcnk/OiBmaGlyLkZoaXJDb2RlPFByb2R1Y3RDYXRlZ29yeUNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdC5wcm9kdWN0Q2F0ZWdvcnlcclxuICAgKi9cclxuICBfcHJvZHVjdENhdGVnb3J5PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBBIGNvZGUgdGhhdCBpZGVudGlmaWVzIHRoZSBraW5kIG9mIHRoaXMgYmlvbG9naWNhbGx5IGRlcml2ZWQgcHJvZHVjdCAoU05PTUVEIEN0Y29kZSkuXHJcbiAgICovXHJcbiAgcHJvZHVjdENvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFdoZXRoZXIgdGhlIHByb2R1Y3QgaXMgY3VycmVudGx5IGF2YWlsYWJsZS5cclxuICAgKi9cclxuICBzdGF0dXM/OiBmaGlyLkZoaXJDb2RlPFByb2R1Y3RTdGF0dXNDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3Quc3RhdHVzXHJcbiAgICovXHJcbiAgX3N0YXR1cz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogUHJvY2VkdXJlIHJlcXVlc3QgdG8gb2J0YWluIHRoaXMgYmlvbG9naWNhbGx5IGRlcml2ZWQgcHJvZHVjdC5cclxuICAgKi9cclxuICByZXF1ZXN0PzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE51bWJlciBvZiBkaXNjcmV0ZSB1bml0cyB3aXRoaW4gdGhpcyBwcm9kdWN0LlxyXG4gICAqL1xyXG4gIHF1YW50aXR5PzogZmhpci5GaGlySW50ZWdlcnxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdC5xdWFudGl0eVxyXG4gICAqL1xyXG4gIF9xdWFudGl0eT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogRm9yIHByb2R1Y3RzIHRoYXQgaGF2ZSBtdWx0aXBsZSBjb2xsZWN0aW9ucy4gRm9yIGV4YW1wbGUgUGVyaXBoZXJhbCBCbG9vZCBTdGVtIENlbGxzIG1heSBiZSBjb2xsZWN0ZWQgb3ZlciBzZXZlcmFsIGRheXMgZnJvbSBhIHNpbmdsZSBkb25vciBhbmQgdGhlIGRvbmF0aW9uIHNwbGl0IGludG8gaW4gbXVsdGlwbGUgY29udGFpbmVycyB3aGljaCBtdXN0IGJlIGxpbmtlZCB0byB0aGUgcGFyZW50IGRvbmF0aW9uLlxyXG4gICAqL1xyXG4gIHBhcmVudD86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBIb3cgdGhpcyBwcm9kdWN0IHdhcyBjb2xsZWN0ZWQuXHJcbiAgICovXHJcbiAgY29sbGVjdGlvbj86IGZoaXIuQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RDb2xsZWN0aW9uQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQW55IHByb2Nlc3Npbmcgb2YgdGhlIHByb2R1Y3QgZHVyaW5nIGNvbGxlY3Rpb24gdGhhdCBkb2VzIG5vdCBjaGFuZ2UgdGhlIGZ1bmRhbWVudGFsIG5hdHVyZSBvZiB0aGUgcHJvZHVjdC4gRm9yIGV4YW1wbGUgYWRkaW5nIGFudGktY29hZ3VsYW50cyBkdXJpbmcgdGhlIGNvbGxlY3Rpb24gb2YgUGVyaXBoZXJhbCBCbG9vZCBTdGVtIENlbGxzLlxyXG4gICAqL1xyXG4gIHByb2Nlc3Npbmc/OiBmaGlyLkJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0UHJvY2Vzc2luZ0FyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQW55IG1hbmlwdWxhdGlvbiBvZiBwcm9kdWN0IHBvc3QtY29sbGVjdGlvbiB0aGF0IGlzIGludGVuZGVkIHRvIGFsdGVyIHRoZSBwcm9kdWN0LiAgRm9yIGV4YW1wbGUgYSBidWZmeS1jb2F0IGVucmljaG1lbnQgb3IgQ0Q4IHJlZHVjdGlvbiBvZiBQZXJpcGhlcmFsIEJsb29kIFN0ZW0gQ2VsbHMgdG8gbWFrZSBpdCBtb3JlIHN1aXRhYmxlIGZvciBpbmZ1c2lvbi5cclxuICAgKi9cclxuICBtYW5pcHVsYXRpb24/OiBmaGlyLkJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0TWFuaXB1bGF0aW9uQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUHJvZHVjdCBzdG9yYWdlLlxyXG4gICAqL1xyXG4gIHN0b3JhZ2U/OiBmaGlyLkJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0U3RvcmFnZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBIG1hdGVyaWFsIHN1YnN0YW5jZSBvcmlnaW5hdGluZyBmcm9tIGEgYmlvbG9naWNhbCBlbnRpdHkgaW50ZW5kZWQgdG8gYmUgdHJhbnNwbGFudGVkIG9yIGluZnVzZWRcclxuICogaW50byBhbm90aGVyIChwb3NzaWJseSB0aGUgc2FtZSkgYmlvbG9naWNhbCBlbnRpdHkuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3QgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0Jpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0JztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIkJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0XCI7XHJcbiAgLyoqXHJcbiAgICogVGhpcyByZWNvcmRzIGlkZW50aWZpZXJzIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGJpb2xvZ2ljYWxseSBkZXJpdmVkIHByb2R1Y3QgaW5zdGFuY2UgdGhhdCBhcmUgZGVmaW5lZCBieSBidXNpbmVzcyBwcm9jZXNzZXMgYW5kL29yIHVzZWQgdG8gcmVmZXIgdG8gaXQgd2hlbiBhIGRpcmVjdCBVUkwgcmVmZXJlbmNlIHRvIHRoZSByZXNvdXJjZSBpdHNlbGYgaXMgbm90IGFwcHJvcHJpYXRlIChlLmcuIGluIENEQSBkb2N1bWVudHMsIG9yIGluIHdyaXR0ZW4gLyBwcmludGVkIGRvY3VtZW50YXRpb24pLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyOiBmaGlyLklkZW50aWZpZXJbXTtcclxuICAvKipcclxuICAgKiBCcm9hZCBjYXRlZ29yeSBvZiB0aGlzIHByb2R1Y3QuXHJcbiAgICovXHJcbiAgcHVibGljIHByb2R1Y3RDYXRlZ29yeT86IGZoaXIuRmhpckNvZGU8UHJvZHVjdENhdGVnb3J5Q29kZVR5cGU+fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGNvZGUgdGhhdCBpZGVudGlmaWVzIHRoZSBraW5kIG9mIHRoaXMgYmlvbG9naWNhbGx5IGRlcml2ZWQgcHJvZHVjdCAoU05PTUVEIEN0Y29kZSkuXHJcbiAgICovXHJcbiAgcHVibGljIHByb2R1Y3RDb2RlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFdoZXRoZXIgdGhlIHByb2R1Y3QgaXMgY3VycmVudGx5IGF2YWlsYWJsZS5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdHVzPzogZmhpci5GaGlyQ29kZTxQcm9kdWN0U3RhdHVzQ29kZVR5cGU+fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBQcm9jZWR1cmUgcmVxdWVzdCB0byBvYnRhaW4gdGhpcyBiaW9sb2dpY2FsbHkgZGVyaXZlZCBwcm9kdWN0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZXF1ZXN0OiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIE51bWJlciBvZiBkaXNjcmV0ZSB1bml0cyB3aXRoaW4gdGhpcyBwcm9kdWN0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBxdWFudGl0eT86IGZoaXIuRmhpckludGVnZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEZvciBwcm9kdWN0cyB0aGF0IGhhdmUgbXVsdGlwbGUgY29sbGVjdGlvbnMuIEZvciBleGFtcGxlIFBlcmlwaGVyYWwgQmxvb2QgU3RlbSBDZWxscyBtYXkgYmUgY29sbGVjdGVkIG92ZXIgc2V2ZXJhbCBkYXlzIGZyb20gYSBzaW5nbGUgZG9ub3IgYW5kIHRoZSBkb25hdGlvbiBzcGxpdCBpbnRvIGluIG11bHRpcGxlIGNvbnRhaW5lcnMgd2hpY2ggbXVzdCBiZSBsaW5rZWQgdG8gdGhlIHBhcmVudCBkb25hdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgcGFyZW50OiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIEhvdyB0aGlzIHByb2R1Y3Qgd2FzIGNvbGxlY3RlZC5cclxuICAgKi9cclxuICBwdWJsaWMgY29sbGVjdGlvbj86IGZoaXIuQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RDb2xsZWN0aW9ufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBbnkgcHJvY2Vzc2luZyBvZiB0aGUgcHJvZHVjdCBkdXJpbmcgY29sbGVjdGlvbiB0aGF0IGRvZXMgbm90IGNoYW5nZSB0aGUgZnVuZGFtZW50YWwgbmF0dXJlIG9mIHRoZSBwcm9kdWN0LiBGb3IgZXhhbXBsZSBhZGRpbmcgYW50aS1jb2FndWxhbnRzIGR1cmluZyB0aGUgY29sbGVjdGlvbiBvZiBQZXJpcGhlcmFsIEJsb29kIFN0ZW0gQ2VsbHMuXHJcbiAgICovXHJcbiAgcHVibGljIHByb2Nlc3Npbmc6IGZoaXIuQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RQcm9jZXNzaW5nW107XHJcbiAgLyoqXHJcbiAgICogQW55IG1hbmlwdWxhdGlvbiBvZiBwcm9kdWN0IHBvc3QtY29sbGVjdGlvbiB0aGF0IGlzIGludGVuZGVkIHRvIGFsdGVyIHRoZSBwcm9kdWN0LiAgRm9yIGV4YW1wbGUgYSBidWZmeS1jb2F0IGVucmljaG1lbnQgb3IgQ0Q4IHJlZHVjdGlvbiBvZiBQZXJpcGhlcmFsIEJsb29kIFN0ZW0gQ2VsbHMgdG8gbWFrZSBpdCBtb3JlIHN1aXRhYmxlIGZvciBpbmZ1c2lvbi5cclxuICAgKi9cclxuICBwdWJsaWMgbWFuaXB1bGF0aW9uPzogZmhpci5CaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdE1hbmlwdWxhdGlvbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUHJvZHVjdCBzdG9yYWdlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdG9yYWdlOiBmaGlyLkJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0U3RvcmFnZVtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8QmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3QnO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IHNvdXJjZS5pZGVudGlmaWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuSWRlbnRpZmllcih4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmlkZW50aWZpZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJvZHVjdENhdGVnb3J5J10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnByb2R1Y3RDYXRlZ29yeSA9IG5ldyBmaGlyLkZoaXJDb2RlPFByb2R1Y3RDYXRlZ29yeUNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5wcm9kdWN0Q2F0ZWdvcnl9LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3Byb2R1Y3RDYXRlZ29yeSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnByb2R1Y3RDYXRlZ29yeSkgeyB0aGlzLnByb2R1Y3RDYXRlZ29yeS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9wcm9kdWN0Q2F0ZWdvcnkhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5wcm9kdWN0Q2F0ZWdvcnkgPSBuZXcgZmhpci5GaGlyQ29kZTxQcm9kdWN0Q2F0ZWdvcnlDb2RlVHlwZT4oc291cmNlLl9wcm9kdWN0Q2F0ZWdvcnkgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3Byb2R1Y3RDb2RlJ10pIHsgdGhpcy5wcm9kdWN0Q29kZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UucHJvZHVjdENvZGUsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydzdGF0dXMnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8UHJvZHVjdFN0YXR1c0NvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5zdGF0dXN9LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3N0YXR1cyddKSB7XHJcbiAgICAgIGlmICh0aGlzLnN0YXR1cykgeyB0aGlzLnN0YXR1cy5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zdGF0dXMhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxQcm9kdWN0U3RhdHVzQ29kZVR5cGU+KHNvdXJjZS5fc3RhdHVzIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydyZXF1ZXN0J10pIHsgdGhpcy5yZXF1ZXN0ID0gc291cmNlLnJlcXVlc3QubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZXF1ZXN0ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3F1YW50aXR5J10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnF1YW50aXR5ID0gbmV3IGZoaXIuRmhpckludGVnZXIoe3ZhbHVlOiBzb3VyY2UucXVhbnRpdHl9LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3F1YW50aXR5J10pIHtcclxuICAgICAgaWYgKHRoaXMucXVhbnRpdHkpIHsgdGhpcy5xdWFudGl0eS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9xdWFudGl0eSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnF1YW50aXR5ID0gbmV3IGZoaXIuRmhpckludGVnZXIoc291cmNlLl9xdWFudGl0eSBhcyBQYXJ0aWFsPGZoaXIuRmhpckludGVnZXJBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3BhcmVudCddKSB7IHRoaXMucGFyZW50ID0gc291cmNlLnBhcmVudC5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnBhcmVudCA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydjb2xsZWN0aW9uJ10pIHsgdGhpcy5jb2xsZWN0aW9uID0gbmV3IGZoaXIuQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RDb2xsZWN0aW9uKHNvdXJjZS5jb2xsZWN0aW9uLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJvY2Vzc2luZyddKSB7IHRoaXMucHJvY2Vzc2luZyA9IHNvdXJjZS5wcm9jZXNzaW5nLm1hcCgoeCkgPT4gbmV3IGZoaXIuQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RQcm9jZXNzaW5nKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucHJvY2Vzc2luZyA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydtYW5pcHVsYXRpb24nXSkgeyB0aGlzLm1hbmlwdWxhdGlvbiA9IG5ldyBmaGlyLkJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0TWFuaXB1bGF0aW9uKHNvdXJjZS5tYW5pcHVsYXRpb24sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydzdG9yYWdlJ10pIHsgdGhpcy5zdG9yYWdlID0gc291cmNlLnN0b3JhZ2UubWFwKCh4KSA9PiBuZXcgZmhpci5CaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdFN0b3JhZ2UoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdG9yYWdlID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdCcgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2lkZW50aWZpZXInLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1NWKCdwcm9kdWN0Q2F0ZWdvcnknLGV4cCwnUHJvZHVjdENhdGVnb3J5JyxQcm9kdWN0Q2F0ZWdvcnlWc1ZhbGlkYXRpb24sJ3InKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygncHJvZHVjdENvZGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1NWKCdzdGF0dXMnLGV4cCwnUHJvZHVjdFN0YXR1cycsUHJvZHVjdFN0YXR1c1ZzVmFsaWRhdGlvbiwncicpKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdyZXF1ZXN0JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdxdWFudGl0eScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgncGFyZW50JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdjb2xsZWN0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdwcm9jZXNzaW5nJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdtYW5pcHVsYXRpb24nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3N0b3JhZ2UnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuIl19