// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: BiologicallyDerivedProduct
import * as fhir from '../fhir.js';
// @ts-ignore
import { ProductStorageScaleCodes } from '../fhirValueSets/ProductStorageScaleCodes.js';
// @ts-ignore
import { ProductCategoryCodes } from '../fhirValueSets/ProductCategoryCodes.js';
// @ts-ignore
import { ProductStatusCodes } from '../fhirValueSets/ProductStatusCodes.js';
/**
 * How this product was collected.
 */
export class BiologicallyDerivedProductCollection extends fhir.BackboneElement {
    /**
     * Default constructor for BiologicallyDerivedProductCollection - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['collector']) {
            this.collector = new fhir.Reference(source.collector);
        }
        if (source['source']) {
            this.source = new fhir.Reference(source.source);
        }
        if (source['collected']) {
            this.collected = source.collected;
        }
        else if (source['collectedDateTime']) {
            this.collected = new fhir.FhirDateTime({ value: source.collectedDateTime });
        }
        else if (source['collectedPeriod']) {
            this.collected = new fhir.Period(source.collectedPeriod);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["collector"]) {
            issues.push(...this.collector.doModelValidation());
        }
        if (this["source"]) {
            issues.push(...this.source.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BiologicallyDerivedProductCollection._fts_dataType = 'BiologicallyDerivedProductCollection';
/**
 * Internal flag to properly serialize choice-type element BiologicallyDerivedProduct.collection.collected[x]
 */
BiologicallyDerivedProductCollection._fts_collectedIsChoice = true;
/**
 * Any processing of the product during collection that does not change the fundamental nature of the product. For example adding anti-coagulants during the collection of Peripheral Blood Stem Cells.
 */
export class BiologicallyDerivedProductProcessing extends fhir.BackboneElement {
    /**
     * Default constructor for BiologicallyDerivedProductProcessing - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['description']) {
            this.description = new fhir.FhirString({ value: source.description });
        }
        if (source['procedure']) {
            this.procedure = new fhir.CodeableConcept(source.procedure);
        }
        if (source['additive']) {
            this.additive = new fhir.Reference(source.additive);
        }
        if (source['time']) {
            this.time = source.time;
        }
        else if (source['timeDateTime']) {
            this.time = new fhir.FhirDateTime({ value: source.timeDateTime });
        }
        else if (source['timePeriod']) {
            this.time = new fhir.Period(source.timePeriod);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["description"]) {
            issues.push(...this.description.doModelValidation());
        }
        if (this["procedure"]) {
            issues.push(...this.procedure.doModelValidation());
        }
        if (this["additive"]) {
            issues.push(...this.additive.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BiologicallyDerivedProductProcessing._fts_dataType = 'BiologicallyDerivedProductProcessing';
/**
 * Internal flag to properly serialize choice-type element BiologicallyDerivedProduct.processing.time[x]
 */
BiologicallyDerivedProductProcessing._fts_timeIsChoice = true;
/**
 * Any manipulation of product post-collection that is intended to alter the product.  For example a buffy-coat enrichment or CD8 reduction of Peripheral Blood Stem Cells to make it more suitable for infusion.
 */
export class BiologicallyDerivedProductManipulation extends fhir.BackboneElement {
    /**
     * Default constructor for BiologicallyDerivedProductManipulation - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['description']) {
            this.description = new fhir.FhirString({ value: source.description });
        }
        if (source['time']) {
            this.time = source.time;
        }
        else if (source['timeDateTime']) {
            this.time = new fhir.FhirDateTime({ value: source.timeDateTime });
        }
        else if (source['timePeriod']) {
            this.time = new fhir.Period(source.timePeriod);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["description"]) {
            issues.push(...this.description.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BiologicallyDerivedProductManipulation._fts_dataType = 'BiologicallyDerivedProductManipulation';
/**
 * Internal flag to properly serialize choice-type element BiologicallyDerivedProduct.manipulation.time[x]
 */
BiologicallyDerivedProductManipulation._fts_timeIsChoice = true;
/**
 * Product storage.
 */
export class BiologicallyDerivedProductStorage extends fhir.BackboneElement {
    /**
     * Default constructor for BiologicallyDerivedProductStorage - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['description']) {
            this.description = new fhir.FhirString({ value: source.description });
        }
        if (source['temperature']) {
            this.temperature = new fhir.FhirDecimal({ value: source.temperature });
        }
        if (source['scale']) {
            this.scale = new fhir.FhirCode({ value: source.scale });
        }
        if (source['duration']) {
            this.duration = new fhir.Period(source.duration);
        }
    }
    /**
     * Required-bound Value Set for scale (BiologicallyDerivedProduct.storage.scale)
     */
    static get scaleRequiredCodes() {
        return ProductStorageScaleCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["description"]) {
            issues.push(...this.description.doModelValidation());
        }
        if (this["temperature"]) {
            issues.push(...this.temperature.doModelValidation());
        }
        if (this['scale'] && (!Object.values(ProductStorageScaleCodes).includes(this.scale))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property scale?:fhir.FhirCode<ProductStorageScaleCodeType> fhir: BiologicallyDerivedProduct.storage.scale:code Required binding to: ProductStorageScale' });
        }
        if (this["scale"]) {
            issues.push(...this.scale.doModelValidation());
        }
        if (this["duration"]) {
            issues.push(...this.duration.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BiologicallyDerivedProductStorage._fts_dataType = 'BiologicallyDerivedProductStorage';
/**
 * A material substance originating from a biological entity intended to be transplanted or infused
 * into another (possibly the same) biological entity.
 */
export class BiologicallyDerivedProduct extends fhir.DomainResource {
    /**
     * Default constructor for BiologicallyDerivedProduct - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'BiologicallyDerivedProduct';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['productCategory']) {
            this.productCategory = new fhir.FhirCode({ value: source.productCategory });
        }
        if (source['productCode']) {
            this.productCode = new fhir.CodeableConcept(source.productCode);
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        if (source['request']) {
            this.request = source.request.map((x) => new fhir.Reference(x));
        }
        else {
            this.request = [];
        }
        if (source['quantity']) {
            this.quantity = new fhir.FhirInteger({ value: source.quantity });
        }
        if (source['parent']) {
            this.parent = source.parent.map((x) => new fhir.Reference(x));
        }
        else {
            this.parent = [];
        }
        if (source['collection']) {
            this.collection = new fhir.BiologicallyDerivedProductCollection(source.collection);
        }
        if (source['processing']) {
            this.processing = source.processing.map((x) => new fhir.BiologicallyDerivedProductProcessing(x));
        }
        else {
            this.processing = [];
        }
        if (source['manipulation']) {
            this.manipulation = new fhir.BiologicallyDerivedProductManipulation(source.manipulation);
        }
        if (source['storage']) {
            this.storage = source.storage.map((x) => new fhir.BiologicallyDerivedProductStorage(x));
        }
        else {
            this.storage = [];
        }
    }
    /**
     * Required-bound Value Set for productCategory (BiologicallyDerivedProduct.productCategory)
     */
    static get productCategoryRequiredCodes() {
        return ProductCategoryCodes;
    }
    /**
     * Required-bound Value Set for status (BiologicallyDerivedProduct.status)
     */
    static get statusRequiredCodes() {
        return ProductStatusCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType:"BiologicallyDerivedProduct" fhir: BiologicallyDerivedProduct.resourceType:"BiologicallyDerivedProduct"' });
        }
        if (this["identifier"]) {
            this.identifier.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this['productCategory'] && (!Object.values(ProductCategoryCodes).includes(this.productCategory))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property productCategory?:fhir.FhirCode<ProductCategoryCodeType> fhir: BiologicallyDerivedProduct.productCategory:code Required binding to: ProductCategory' });
        }
        if (this["productCategory"]) {
            issues.push(...this.productCategory.doModelValidation());
        }
        if (this["productCode"]) {
            issues.push(...this.productCode.doModelValidation());
        }
        if (this['status'] && (!Object.values(ProductStatusCodes).includes(this.status))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property status?:fhir.FhirCode<ProductStatusCodeType> fhir: BiologicallyDerivedProduct.status:code Required binding to: ProductStatus' });
        }
        if (this["status"]) {
            issues.push(...this.status.doModelValidation());
        }
        if (this["request"]) {
            this.request.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["quantity"]) {
            issues.push(...this.quantity.doModelValidation());
        }
        if (this["parent"]) {
            this.parent.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["collection"]) {
            issues.push(...this.collection.doModelValidation());
        }
        if (this["processing"]) {
            this.processing.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["manipulation"]) {
            issues.push(...this.manipulation.doModelValidation());
        }
        if (this["storage"]) {
            this.storage.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BiologicallyDerivedProduct._fts_dataType = 'BiologicallyDerivedProduct';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3QuanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL0Jpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQiwrQ0FBK0M7QUFDL0Msa0NBQWtDO0FBQ2xDLDRDQUE0QztBQUU1QyxPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQVFuQyxhQUFhO0FBQ2IsT0FBTyxFQUFFLHdCQUF3QixFQUFnQyxNQUFNLDhDQUE4QyxDQUFDO0FBR3RILGFBQWE7QUFDYixPQUFPLEVBQUUsb0JBQW9CLEVBQTRCLE1BQU0sMENBQTBDLENBQUM7QUFHMUcsYUFBYTtBQUNiLE9BQU8sRUFBRSxrQkFBa0IsRUFBMEIsTUFBTSx3Q0FBd0MsQ0FBQztBQTJCcEc7O0dBRUc7QUFDSCxNQUFNLE9BQU8sb0NBQXFDLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFxQjVFOztPQUVHO0lBQ0gsWUFBWSxTQUEyRCxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUNqSCxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1NBQUU7UUFDbkYsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7U0FBRTtRQUMxRSxJQUFJLE1BQU0sQ0FBQyxXQUFXLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQztTQUFFO2FBQzFELElBQUksTUFBTSxDQUFDLG1CQUFtQixDQUFDLEVB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RztBQUM2Qix3Q0FBYSxHQUFVLDRCQUE0QixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0LmNvcmUgdmVyc2lvbjogNC4wLjFcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdFxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUHJvY2VkdXJlQ29kZUNvZGluZ3MsIFByb2NlZHVyZUNvZGVDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Qcm9jZWR1cmVDb2RlQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUHJvY2VkdXJlQ29kZUNvZGVzLCAgUHJvY2VkdXJlQ29kZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Qcm9jZWR1cmVDb2RlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFByb2R1Y3RTdG9yYWdlU2NhbGVDb2RpbmdzLCBQcm9kdWN0U3RvcmFnZVNjYWxlQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUHJvZHVjdFN0b3JhZ2VTY2FsZUNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFByb2R1Y3RTdG9yYWdlU2NhbGVDb2RlcywgIFByb2R1Y3RTdG9yYWdlU2NhbGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUHJvZHVjdFN0b3JhZ2VTY2FsZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBQcm9kdWN0Q2F0ZWdvcnlDb2RpbmdzLCBQcm9kdWN0Q2F0ZWdvcnlDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Qcm9kdWN0Q2F0ZWdvcnlDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBQcm9kdWN0Q2F0ZWdvcnlDb2RlcywgIFByb2R1Y3RDYXRlZ29yeUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Qcm9kdWN0Q2F0ZWdvcnlDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUHJvZHVjdFN0YXR1c0NvZGluZ3MsIFByb2R1Y3RTdGF0dXNDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Qcm9kdWN0U3RhdHVzQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUHJvZHVjdFN0YXR1c0NvZGVzLCAgUHJvZHVjdFN0YXR1c0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Qcm9kdWN0U3RhdHVzQ29kZXMuanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RDb2xsZWN0aW9uIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0Q29sbGVjdGlvbkFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEhlYWx0aGNhcmUgcHJvZmVzc2lvbmFsIHdobyBpcyBwZXJmb3JtaW5nIHRoZSBjb2xsZWN0aW9uLlxyXG4gICAqL1xyXG4gIGNvbGxlY3Rvcj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBhdGllbnQgb3IgZW50aXR5LCBzdWNoIGFzIGEgaG9zcGl0YWwgb3IgdmVuZG9yIGluIHRoZSBjYXNlIG9mIGEgcHJvY2Vzc2VkL21hbmlwdWxhdGVkL21hbnVmYWN0dXJlZCBwcm9kdWN0LCBwcm92aWRpbmcgdGhlIHByb2R1Y3QuXHJcbiAgICovXHJcbiAgc291cmNlPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaW1lIG9mIHByb2R1Y3QgY29sbGVjdGlvbi5cclxuICAgKi9cclxuICBjb2xsZWN0ZWQ/OiBmaGlyLkZoaXJEYXRlVGltZXxmaGlyLlBlcmlvZHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGltZSBvZiBwcm9kdWN0IGNvbGxlY3Rpb24uXHJcbiAgICovXHJcbiAgY29sbGVjdGVkRGF0ZVRpbWU/OiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRpbWUgb2YgcHJvZHVjdCBjb2xsZWN0aW9uLlxyXG4gICAqL1xyXG4gIGNvbGxlY3RlZFBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIb3cgdGhpcyBwcm9kdWN0IHdhcyBjb2xsZWN0ZWQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RDb2xsZWN0aW9uIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RDb2xsZWN0aW9uJztcclxuICAvKipcclxuICAgKiBIZWFsdGhjYXJlIHByb2Zlc3Npb25hbCB3aG8gaXMgcGVyZm9ybWluZyB0aGUgY29sbGVjdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgY29sbGVjdG9yPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXRpZW50IG9yIGVudGl0eSwgc3VjaCBhcyBhIGhvc3BpdGFsIG9yIHZlbmRvciBpbiB0aGUgY2FzZSBvZiBhIHByb2Nlc3NlZC9tYW5pcHVsYXRlZC9tYW51ZmFjdHVyZWQgcHJvZHVjdCwgcHJvdmlkaW5nIHRoZSBwcm9kdWN0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzb3VyY2U/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGltZSBvZiBwcm9kdWN0IGNvbGxlY3Rpb24uXHJcbiAgICovXHJcbiAgcHVibGljIGNvbGxlY3RlZD86IChmaGlyLkZoaXJEYXRlVGltZXxmaGlyLlBlcmlvZCl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3QuY29sbGVjdGlvbi5jb2xsZWN0ZWRbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfY29sbGVjdGVkSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RDb2xsZWN0aW9uIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8QmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RDb2xsZWN0aW9uQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2NvbGxlY3RvciddKSB7IHRoaXMuY29sbGVjdG9yID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5jb2xsZWN0b3IpOyB9XHJcbiAgICBpZiAoc291cmNlWydzb3VyY2UnXSkgeyB0aGlzLnNvdXJjZSA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2Uuc291cmNlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29sbGVjdGVkJ10pIHsgdGhpcy5jb2xsZWN0ZWQgPSBzb3VyY2UuY29sbGVjdGVkOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2NvbGxlY3RlZERhdGVUaW1lJ10pIHsgdGhpcy5jb2xsZWN0ZWQgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2UuY29sbGVjdGVkRGF0ZVRpbWV9KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydjb2xsZWN0ZWRQZXJpb2QnXSkgeyB0aGlzLmNvbGxlY3RlZCA9IG5ldyBmaGlyLlBlcmlvZChzb3VyY2UuY29sbGVjdGVkUGVyaW9kKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKHRoaXNbXCJjb2xsZWN0b3JcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5jb2xsZWN0b3IuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wic291cmNlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc291cmNlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RQcm9jZXNzaW5nIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0UHJvY2Vzc2luZ0FyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaXB0aW9uIG9mIG9mIHByb2Nlc3NpbmcuXHJcbiAgICovXHJcbiAgZGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBQcm9jZXNpbmcgY29kZS5cclxuICAgKi9cclxuICBwcm9jZWR1cmU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFN1YnN0YW5jZSBhZGRlZCBkdXJpbmcgcHJvY2Vzc2luZy5cclxuICAgKi9cclxuICBhZGRpdGl2ZT86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGltZSBvZiBwcm9jZXNzaW5nLlxyXG4gICAqL1xyXG4gIHRpbWU/OiBmaGlyLkZoaXJEYXRlVGltZXxmaGlyLlBlcmlvZHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGltZSBvZiBwcm9jZXNzaW5nLlxyXG4gICAqL1xyXG4gIHRpbWVEYXRlVGltZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGltZSBvZiBwcm9jZXNzaW5nLlxyXG4gICAqL1xyXG4gIHRpbWVQZXJpb2Q/OiBmaGlyLlBlcmlvZEFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQW55IHByb2Nlc3Npbmcgb2YgdGhlIHByb2R1Y3QgZHVyaW5nIGNvbGxlY3Rpb24gdGhhdCBkb2VzIG5vdCBjaGFuZ2UgdGhlIGZ1bmRhbWVudGFsIG5hdHVyZSBvZiB0aGUgcHJvZHVjdC4gRm9yIGV4YW1wbGUgYWRkaW5nIGFudGktY29hZ3VsYW50cyBkdXJpbmcgdGhlIGNvbGxlY3Rpb24gb2YgUGVyaXBoZXJhbCBCbG9vZCBTdGVtIENlbGxzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0UHJvY2Vzc2luZyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0Jpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0UHJvY2Vzc2luZyc7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpcHRpb24gb2Ygb2YgcHJvY2Vzc2luZy5cclxuICAgKi9cclxuICBwdWJsaWMgZGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFByb2Nlc2luZyBjb2RlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcm9jZWR1cmU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU3Vic3RhbmNlIGFkZGVkIGR1cmluZyBwcm9jZXNzaW5nLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhZGRpdGl2ZT86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaW1lIG9mIHByb2Nlc3NpbmcuXHJcbiAgICovXHJcbiAgcHVibGljIHRpbWU/OiAoZmhpci5GaGlyRGF0ZVRpbWV8Zmhpci5QZXJpb2QpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0LnByb2Nlc3NpbmcudGltZVt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c190aW1lSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RQcm9jZXNzaW5nIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8QmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RQcm9jZXNzaW5nQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2Rlc2NyaXB0aW9uJ10pIHsgdGhpcy5kZXNjcmlwdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuZGVzY3JpcHRpb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJvY2VkdXJlJ10pIHsgdGhpcy5wcm9jZWR1cmUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnByb2NlZHVyZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2FkZGl0aXZlJ10pIHsgdGhpcy5hZGRpdGl2ZSA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuYWRkaXRpdmUpOyB9XHJcbiAgICBpZiAoc291cmNlWyd0aW1lJ10pIHsgdGhpcy50aW1lID0gc291cmNlLnRpbWU7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsndGltZURhdGVUaW1lJ10pIHsgdGhpcy50aW1lID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLnRpbWVEYXRlVGltZX0pOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3RpbWVQZXJpb2QnXSkgeyB0aGlzLnRpbWUgPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLnRpbWVQZXJpb2QpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAodGhpc1tcImRlc2NyaXB0aW9uXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZGVzY3JpcHRpb24uZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wicHJvY2VkdXJlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucHJvY2VkdXJlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImFkZGl0aXZlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuYWRkaXRpdmUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdE1hbmlwdWxhdGlvbiB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdE1hbmlwdWxhdGlvbkFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaXB0aW9uIG9mIG1hbmlwdWxhdGlvbi5cclxuICAgKi9cclxuICBkZXNjcmlwdGlvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRpbWUgb2YgbWFuaXB1bGF0aW9uLlxyXG4gICAqL1xyXG4gIHRpbWU/OiBmaGlyLkZoaXJEYXRlVGltZXxmaGlyLlBlcmlvZHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGltZSBvZiBtYW5pcHVsYXRpb24uXHJcbiAgICovXHJcbiAgdGltZURhdGVUaW1lPzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaW1lIG9mIG1hbmlwdWxhdGlvbi5cclxuICAgKi9cclxuICB0aW1lUGVyaW9kPzogZmhpci5QZXJpb2RBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFueSBtYW5pcHVsYXRpb24gb2YgcHJvZHVjdCBwb3N0LWNvbGxlY3Rpb24gdGhhdCBpcyBpbnRlbmRlZCB0byBhbHRlciB0aGUgcHJvZHVjdC4gIEZvciBleGFtcGxlIGEgYnVmZnktY29hdCBlbnJpY2htZW50IG9yIENEOCByZWR1Y3Rpb24gb2YgUGVyaXBoZXJhbCBCbG9vZCBTdGVtIENlbGxzIHRvIG1ha2UgaXQgbW9yZSBzdWl0YWJsZSBmb3IgaW5mdXNpb24uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RNYW5pcHVsYXRpb24gZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdE1hbmlwdWxhdGlvbic7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpcHRpb24gb2YgbWFuaXB1bGF0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZXNjcmlwdGlvbj86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGltZSBvZiBtYW5pcHVsYXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHRpbWU/OiAoZmhpci5GaGlyRGF0ZVRpbWV8Zmhpci5QZXJpb2QpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0Lm1hbmlwdWxhdGlvbi50aW1lW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX3RpbWVJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdE1hbmlwdWxhdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0TWFuaXB1bGF0aW9uQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2Rlc2NyaXB0aW9uJ10pIHsgdGhpcy5kZXNjcmlwdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuZGVzY3JpcHRpb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndGltZSddKSB7IHRoaXMudGltZSA9IHNvdXJjZS50aW1lOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3RpbWVEYXRlVGltZSddKSB7IHRoaXMudGltZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS50aW1lRGF0ZVRpbWV9KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd0aW1lUGVyaW9kJ10pIHsgdGhpcy50aW1lID0gbmV3IGZoaXIuUGVyaW9kKHNvdXJjZS50aW1lUGVyaW9kKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKHRoaXNbXCJkZXNjcmlwdGlvblwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmRlc2NyaXB0aW9uLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RTdG9yYWdlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0U3RvcmFnZUFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaXB0aW9uIG9mIHN0b3JhZ2UuXHJcbiAgICovXHJcbiAgZGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTdG9yYWdlIHRlbXBlcmF0dXJlLlxyXG4gICAqL1xyXG4gIHRlbXBlcmF0dXJlPzogZmhpci5GaGlyRGVjaW1hbHxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRlbXBlcmF0dXJlIHNjYWxlIHVzZWQuXHJcbiAgICovXHJcbiAgc2NhbGU/OiBmaGlyLkZoaXJDb2RlPFByb2R1Y3RTdG9yYWdlU2NhbGVDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTdG9yYWdlIHRpbWVwZXJpb2QuXHJcbiAgICovXHJcbiAgZHVyYXRpb24/OiBmaGlyLlBlcmlvZEFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogUHJvZHVjdCBzdG9yYWdlLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0U3RvcmFnZSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0Jpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0U3RvcmFnZSc7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpcHRpb24gb2Ygc3RvcmFnZS5cclxuICAgKi9cclxuICBwdWJsaWMgZGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFN0b3JhZ2UgdGVtcGVyYXR1cmUuXHJcbiAgICovXHJcbiAgcHVibGljIHRlbXBlcmF0dXJlPzogZmhpci5GaGlyRGVjaW1hbHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGVtcGVyYXR1cmUgc2NhbGUgdXNlZC5cclxuICAgKi9cclxuICBwdWJsaWMgc2NhbGU/OiBmaGlyLkZoaXJDb2RlPFByb2R1Y3RTdG9yYWdlU2NhbGVDb2RlVHlwZT58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFN0b3JhZ2UgdGltZXBlcmlvZC5cclxuICAgKi9cclxuICBwdWJsaWMgZHVyYXRpb24/OiBmaGlyLlBlcmlvZHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RTdG9yYWdlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8QmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RTdG9yYWdlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2Rlc2NyaXB0aW9uJ10pIHsgdGhpcy5kZXNjcmlwdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuZGVzY3JpcHRpb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndGVtcGVyYXR1cmUnXSkgeyB0aGlzLnRlbXBlcmF0dXJlID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoe3ZhbHVlOiBzb3VyY2UudGVtcGVyYXR1cmV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2NhbGUnXSkgeyB0aGlzLnNjYWxlID0gbmV3IGZoaXIuRmhpckNvZGU8UHJvZHVjdFN0b3JhZ2VTY2FsZUNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5zY2FsZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydkdXJhdGlvbiddKSB7IHRoaXMuZHVyYXRpb24gPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLmR1cmF0aW9uKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIHNjYWxlIChCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdC5zdG9yYWdlLnNjYWxlKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IHNjYWxlUmVxdWlyZWRDb2RlcygpIHtcclxuICAgIHJldHVybiBQcm9kdWN0U3RvcmFnZVNjYWxlQ29kZXM7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAodGhpc1tcImRlc2NyaXB0aW9uXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZGVzY3JpcHRpb24uZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1widGVtcGVyYXR1cmVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy50ZW1wZXJhdHVyZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbJ3NjYWxlJ10gJiYgKCFPYmplY3QudmFsdWVzKFByb2R1Y3RTdG9yYWdlU2NhbGVDb2RlcykuaW5jbHVkZXModGhpcy5zY2FsZSBhcyBhbnkpKSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnY29kZS1pbnZhbGlkJywgZGlhZ25vc3RpY3M6ICdJbnZhbGlkIGNvZGUgcHJvcGVydHkgc2NhbGU/OmZoaXIuRmhpckNvZGU8UHJvZHVjdFN0b3JhZ2VTY2FsZUNvZGVUeXBlPiBmaGlyOiBCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdC5zdG9yYWdlLnNjYWxlOmNvZGUgUmVxdWlyZWQgYmluZGluZyB0bzogUHJvZHVjdFN0b3JhZ2VTY2FsZScgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInNjYWxlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc2NhbGUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiZHVyYXRpb25cIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5kdXJhdGlvbi5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0QXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RcInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyByZWNvcmRzIGlkZW50aWZpZXJzIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGJpb2xvZ2ljYWxseSBkZXJpdmVkIHByb2R1Y3QgaW5zdGFuY2UgdGhhdCBhcmUgZGVmaW5lZCBieSBidXNpbmVzcyBwcm9jZXNzZXMgYW5kL29yIHVzZWQgdG8gcmVmZXIgdG8gaXQgd2hlbiBhIGRpcmVjdCBVUkwgcmVmZXJlbmNlIHRvIHRoZSByZXNvdXJjZSBpdHNlbGYgaXMgbm90IGFwcHJvcHJpYXRlIChlLmcuIGluIENEQSBkb2N1bWVudHMsIG9yIGluIHdyaXR0ZW4gLyBwcmludGVkIGRvY3VtZW50YXRpb24pLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEJyb2FkIGNhdGVnb3J5IG9mIHRoaXMgcHJvZHVjdC5cclxuICAgKi9cclxuICBwcm9kdWN0Q2F0ZWdvcnk/OiBmaGlyLkZoaXJDb2RlPFByb2R1Y3RDYXRlZ29yeUNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgY29kZSB0aGF0IGlkZW50aWZpZXMgdGhlIGtpbmQgb2YgdGhpcyBiaW9sb2dpY2FsbHkgZGVyaXZlZCBwcm9kdWN0IChTTk9NRUQgQ3Rjb2RlKS5cclxuICAgKi9cclxuICBwcm9kdWN0Q29kZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogV2hldGhlciB0aGUgcHJvZHVjdCBpcyBjdXJyZW50bHkgYXZhaWxhYmxlLlxyXG4gICAqL1xyXG4gIHN0YXR1cz86IGZoaXIuRmhpckNvZGU8UHJvZHVjdFN0YXR1c0NvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFByb2NlZHVyZSByZXF1ZXN0IHRvIG9idGFpbiB0aGlzIGJpb2xvZ2ljYWxseSBkZXJpdmVkIHByb2R1Y3QuXHJcbiAgICovXHJcbiAgcmVxdWVzdD86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBOdW1iZXIgb2YgZGlzY3JldGUgdW5pdHMgd2l0aGluIHRoaXMgcHJvZHVjdC5cclxuICAgKi9cclxuICBxdWFudGl0eT86IGZoaXIuRmhpckludGVnZXJ8bnVtYmVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBGb3IgcHJvZHVjdHMgdGhhdCBoYXZlIG11bHRpcGxlIGNvbGxlY3Rpb25zLiBGb3IgZXhhbXBsZSBQZXJpcGhlcmFsIEJsb29kIFN0ZW0gQ2VsbHMgbWF5IGJlIGNvbGxlY3RlZCBvdmVyIHNldmVyYWwgZGF5cyBmcm9tIGEgc2luZ2xlIGRvbm9yIGFuZCB0aGUgZG9uYXRpb24gc3BsaXQgaW50byBpbiBtdWx0aXBsZSBjb250YWluZXJzIHdoaWNoIG11c3QgYmUgbGlua2VkIHRvIHRoZSBwYXJlbnQgZG9uYXRpb24uXHJcbiAgICovXHJcbiAgcGFyZW50PzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEhvdyB0aGlzIHByb2R1Y3Qgd2FzIGNvbGxlY3RlZC5cclxuICAgKi9cclxuICBjb2xsZWN0aW9uPzogZmhpci5CaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdENvbGxlY3Rpb25BcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBbnkgcHJvY2Vzc2luZyBvZiB0aGUgcHJvZHVjdCBkdXJpbmcgY29sbGVjdGlvbiB0aGF0IGRvZXMgbm90IGNoYW5nZSB0aGUgZnVuZGFtZW50YWwgbmF0dXJlIG9mIHRoZSBwcm9kdWN0LiBGb3IgZXhhbXBsZSBhZGRpbmcgYW50aS1jb2FndWxhbnRzIGR1cmluZyB0aGUgY29sbGVjdGlvbiBvZiBQZXJpcGhlcmFsIEJsb29kIFN0ZW0gQ2VsbHMuXHJcbiAgICovXHJcbiAgcHJvY2Vzc2luZz86IGZoaXIuQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RQcm9jZXNzaW5nQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBbnkgbWFuaXB1bGF0aW9uIG9mIHByb2R1Y3QgcG9zdC1jb2xsZWN0aW9uIHRoYXQgaXMgaW50ZW5kZWQgdG8gYWx0ZXIgdGhlIHByb2R1Y3QuICBGb3IgZXhhbXBsZSBhIGJ1ZmZ5LWNvYXQgZW5yaWNobWVudCBvciBDRDggcmVkdWN0aW9uIG9mIFBlcmlwaGVyYWwgQmxvb2QgU3RlbSBDZWxscyB0byBtYWtlIGl0IG1vcmUgc3VpdGFibGUgZm9yIGluZnVzaW9uLlxyXG4gICAqL1xyXG4gIG1hbmlwdWxhdGlvbj86IGZoaXIuQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RNYW5pcHVsYXRpb25BcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBQcm9kdWN0IHN0b3JhZ2UuXHJcbiAgICovXHJcbiAgc3RvcmFnZT86IGZoaXIuQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RTdG9yYWdlQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgbWF0ZXJpYWwgc3Vic3RhbmNlIG9yaWdpbmF0aW5nIGZyb20gYSBiaW9sb2dpY2FsIGVudGl0eSBpbnRlbmRlZCB0byBiZSB0cmFuc3BsYW50ZWQgb3IgaW5mdXNlZFxyXG4gKiBpbnRvIGFub3RoZXIgKHBvc3NpYmx5IHRoZSBzYW1lKSBiaW9sb2dpY2FsIGVudGl0eS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdCBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3QnO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNvdXJjZVR5cGU6IFwiQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RcIjtcclxuICAvKipcclxuICAgKiBUaGlzIHJlY29yZHMgaWRlbnRpZmllcnMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgYmlvbG9naWNhbGx5IGRlcml2ZWQgcHJvZHVjdCBpbnN0YW5jZSB0aGF0IGFyZSBkZWZpbmVkIGJ5IGJ1c2luZXNzIHByb2Nlc3NlcyBhbmQvb3IgdXNlZCB0byByZWZlciB0byBpdCB3aGVuIGEgZGlyZWN0IFVSTCByZWZlcmVuY2UgdG8gdGhlIHJlc291cmNlIGl0c2VsZiBpcyBub3QgYXBwcm9wcmlhdGUgKGUuZy4gaW4gQ0RBIGRvY3VtZW50cywgb3IgaW4gd3JpdHRlbiAvIHByaW50ZWQgZG9jdW1lbnRhdGlvbikuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI6IGZoaXIuSWRlbnRpZmllcltdO1xyXG4gIC8qKlxyXG4gICAqIEJyb2FkIGNhdGVnb3J5IG9mIHRoaXMgcHJvZHVjdC5cclxuICAgKi9cclxuICBwdWJsaWMgcHJvZHVjdENhdGVnb3J5PzogZmhpci5GaGlyQ29kZTxQcm9kdWN0Q2F0ZWdvcnlDb2RlVHlwZT58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgY29kZSB0aGF0IGlkZW50aWZpZXMgdGhlIGtpbmQgb2YgdGhpcyBiaW9sb2dpY2FsbHkgZGVyaXZlZCBwcm9kdWN0IChTTk9NRUQgQ3Rjb2RlKS5cclxuICAgKi9cclxuICBwdWJsaWMgcHJvZHVjdENvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogV2hldGhlciB0aGUgcHJvZHVjdCBpcyBjdXJyZW50bHkgYXZhaWxhYmxlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0dXM/OiBmaGlyLkZoaXJDb2RlPFByb2R1Y3RTdGF0dXNDb2RlVHlwZT58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFByb2NlZHVyZSByZXF1ZXN0IHRvIG9idGFpbiB0aGlzIGJpb2xvZ2ljYWxseSBkZXJpdmVkIHByb2R1Y3QuXHJcbiAgICovXHJcbiAgcHVibGljIHJlcXVlc3Q6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogTnVtYmVyIG9mIGRpc2NyZXRlIHVuaXRzIHdpdGhpbiB0aGlzIHByb2R1Y3QuXHJcbiAgICovXHJcbiAgcHVibGljIHF1YW50aXR5PzogZmhpci5GaGlySW50ZWdlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRm9yIHByb2R1Y3RzIHRoYXQgaGF2ZSBtdWx0aXBsZSBjb2xsZWN0aW9ucy4gRm9yIGV4YW1wbGUgUGVyaXBoZXJhbCBCbG9vZCBTdGVtIENlbGxzIG1heSBiZSBjb2xsZWN0ZWQgb3ZlciBzZXZlcmFsIGRheXMgZnJvbSBhIHNpbmdsZSBkb25vciBhbmQgdGhlIGRvbmF0aW9uIHNwbGl0IGludG8gaW4gbXVsdGlwbGUgY29udGFpbmVycyB3aGljaCBtdXN0IGJlIGxpbmtlZCB0byB0aGUgcGFyZW50IGRvbmF0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXJlbnQ6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogSG93IHRoaXMgcHJvZHVjdCB3YXMgY29sbGVjdGVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb2xsZWN0aW9uPzogZmhpci5CaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdENvbGxlY3Rpb258dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFueSBwcm9jZXNzaW5nIG9mIHRoZSBwcm9kdWN0IGR1cmluZyBjb2xsZWN0aW9uIHRoYXQgZG9lcyBub3QgY2hhbmdlIHRoZSBmdW5kYW1lbnRhbCBuYXR1cmUgb2YgdGhlIHByb2R1Y3QuIEZvciBleGFtcGxlIGFkZGluZyBhbnRpLWNvYWd1bGFudHMgZHVyaW5nIHRoZSBjb2xsZWN0aW9uIG9mIFBlcmlwaGVyYWwgQmxvb2QgU3RlbSBDZWxscy5cclxuICAgKi9cclxuICBwdWJsaWMgcHJvY2Vzc2luZzogZmhpci5CaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdFByb2Nlc3NpbmdbXTtcclxuICAvKipcclxuICAgKiBBbnkgbWFuaXB1bGF0aW9uIG9mIHByb2R1Y3QgcG9zdC1jb2xsZWN0aW9uIHRoYXQgaXMgaW50ZW5kZWQgdG8gYWx0ZXIgdGhlIHByb2R1Y3QuICBGb3IgZXhhbXBsZSBhIGJ1ZmZ5LWNvYXQgZW5yaWNobWVudCBvciBDRDggcmVkdWN0aW9uIG9mIFBlcmlwaGVyYWwgQmxvb2QgU3RlbSBDZWxscyB0byBtYWtlIGl0IG1vcmUgc3VpdGFibGUgZm9yIGluZnVzaW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtYW5pcHVsYXRpb24/OiBmaGlyLkJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0TWFuaXB1bGF0aW9ufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBQcm9kdWN0IHN0b3JhZ2UuXHJcbiAgICovXHJcbiAgcHVibGljIHN0b3JhZ2U6IGZoaXIuQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RTdG9yYWdlW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3QgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdCc7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gc291cmNlLmlkZW50aWZpZXIubWFwKCh4KSA9PiBuZXcgZmhpci5JZGVudGlmaWVyKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaWRlbnRpZmllciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwcm9kdWN0Q2F0ZWdvcnknXSkgeyB0aGlzLnByb2R1Y3RDYXRlZ29yeSA9IG5ldyBmaGlyLkZoaXJDb2RlPFByb2R1Y3RDYXRlZ29yeUNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5wcm9kdWN0Q2F0ZWdvcnl9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJvZHVjdENvZGUnXSkgeyB0aGlzLnByb2R1Y3RDb2RlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5wcm9kdWN0Q29kZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0YXR1cyddKSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8UHJvZHVjdFN0YXR1c0NvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5zdGF0dXN9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVxdWVzdCddKSB7IHRoaXMucmVxdWVzdCA9IHNvdXJjZS5yZXF1ZXN0Lm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVxdWVzdCA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydxdWFudGl0eSddKSB7IHRoaXMucXVhbnRpdHkgPSBuZXcgZmhpci5GaGlySW50ZWdlcih7dmFsdWU6IHNvdXJjZS5xdWFudGl0eX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydwYXJlbnQnXSkgeyB0aGlzLnBhcmVudCA9IHNvdXJjZS5wYXJlbnQubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wYXJlbnQgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29sbGVjdGlvbiddKSB7IHRoaXMuY29sbGVjdGlvbiA9IG5ldyBmaGlyLkJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0Q29sbGVjdGlvbihzb3VyY2UuY29sbGVjdGlvbik7IH1cclxuICAgIGlmIChzb3VyY2VbJ3Byb2Nlc3NpbmcnXSkgeyB0aGlzLnByb2Nlc3NpbmcgPSBzb3VyY2UucHJvY2Vzc2luZy5tYXAoKHgpID0+IG5ldyBmaGlyLkJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0UHJvY2Vzc2luZyh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnByb2Nlc3NpbmcgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbWFuaXB1bGF0aW9uJ10pIHsgdGhpcy5tYW5pcHVsYXRpb24gPSBuZXcgZmhpci5CaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdE1hbmlwdWxhdGlvbihzb3VyY2UubWFuaXB1bGF0aW9uKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RvcmFnZSddKSB7IHRoaXMuc3RvcmFnZSA9IHNvdXJjZS5zdG9yYWdlLm1hcCgoeCkgPT4gbmV3IGZoaXIuQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RTdG9yYWdlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3RvcmFnZSA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlcXVpcmVkLWJvdW5kIFZhbHVlIFNldCBmb3IgcHJvZHVjdENhdGVnb3J5IChCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdC5wcm9kdWN0Q2F0ZWdvcnkpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgcHJvZHVjdENhdGVnb3J5UmVxdWlyZWRDb2RlcygpIHtcclxuICAgIHJldHVybiBQcm9kdWN0Q2F0ZWdvcnlDb2RlcztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZWQtYm91bmQgVmFsdWUgU2V0IGZvciBzdGF0dXMgKEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0LnN0YXR1cylcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCBzdGF0dXNSZXF1aXJlZENvZGVzKCkge1xyXG4gICAgcmV0dXJuIFByb2R1Y3RTdGF0dXNDb2RlcztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICghdGhpc1sncmVzb3VyY2VUeXBlJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHJlc291cmNlVHlwZTpcIkJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0XCIgZmhpcjogQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3QucmVzb3VyY2VUeXBlOlwiQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RcIicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImlkZW50aWZpZXJcIl0pIHsgdGhpcy5pZGVudGlmaWVyLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbJ3Byb2R1Y3RDYXRlZ29yeSddICYmICghT2JqZWN0LnZhbHVlcyhQcm9kdWN0Q2F0ZWdvcnlDb2RlcykuaW5jbHVkZXModGhpcy5wcm9kdWN0Q2F0ZWdvcnkgYXMgYW55KSkpIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ2NvZGUtaW52YWxpZCcsIGRpYWdub3N0aWNzOiAnSW52YWxpZCBjb2RlIHByb3BlcnR5IHByb2R1Y3RDYXRlZ29yeT86Zmhpci5GaGlyQ29kZTxQcm9kdWN0Q2F0ZWdvcnlDb2RlVHlwZT4gZmhpcjogQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3QucHJvZHVjdENhdGVnb3J5OmNvZGUgUmVxdWlyZWQgYmluZGluZyB0bzogUHJvZHVjdENhdGVnb3J5JyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wicHJvZHVjdENhdGVnb3J5XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucHJvZHVjdENhdGVnb3J5LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInByb2R1Y3RDb2RlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucHJvZHVjdENvZGUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzWydzdGF0dXMnXSAmJiAoIU9iamVjdC52YWx1ZXMoUHJvZHVjdFN0YXR1c0NvZGVzKS5pbmNsdWRlcyh0aGlzLnN0YXR1cyBhcyBhbnkpKSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnY29kZS1pbnZhbGlkJywgZGlhZ25vc3RpY3M6ICdJbnZhbGlkIGNvZGUgcHJvcGVydHkgc3RhdHVzPzpmaGlyLkZoaXJDb2RlPFByb2R1Y3RTdGF0dXNDb2RlVHlwZT4gZmhpcjogQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3Quc3RhdHVzOmNvZGUgUmVxdWlyZWQgYmluZGluZyB0bzogUHJvZHVjdFN0YXR1cycgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInN0YXR1c1wiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnN0YXR1cy5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJyZXF1ZXN0XCJdKSB7IHRoaXMucmVxdWVzdC5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wicXVhbnRpdHlcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5xdWFudGl0eS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJwYXJlbnRcIl0pIHsgdGhpcy5wYXJlbnQuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImNvbGxlY3Rpb25cIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5jb2xsZWN0aW9uLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInByb2Nlc3NpbmdcIl0pIHsgdGhpcy5wcm9jZXNzaW5nLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJtYW5pcHVsYXRpb25cIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5tYW5pcHVsYXRpb24uZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wic3RvcmFnZVwiXSkgeyB0aGlzLnN0b3JhZ2UuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=