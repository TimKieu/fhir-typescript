// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: BiologicallyDerivedProduct
import * as fhir from '../fhir.js';
// @ts-ignore
import { ProductStorageScaleCodings, } from '../fhirValueSets/ProductStorageScaleCodings.js';
// @ts-ignore
import { ProductCategoryCodings, } from '../fhirValueSets/ProductCategoryCodings.js';
// @ts-ignore
import { ProductStatusCodings, } from '../fhirValueSets/ProductStatusCodings.js';
/**
 * How this product was collected.
 */
export class BiologicallyDerivedProductCollection extends fhir.BackboneElement {
    /**
     * Default constructor for BiologicallyDerivedProductCollection - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['collector']) {
            this.collector = new fhir.Reference(source.collector);
        }
        if (source['source']) {
            this.source = new fhir.Reference(source.source);
        }
        if (source['collected']) {
            this.collected = source.collected;
        }
        else if (source['collectedDateTime']) {
            this.collected = new fhir.FhirDateTime({ value: source.collectedDateTime });
        }
        else if (source['collectedPeriod']) {
            this.collected = new fhir.Period(source.collectedPeriod);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["collector"]) {
            issues.push(...this.collector.doModelValidation());
        }
        if (this["source"]) {
            issues.push(...this.source.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BiologicallyDerivedProductCollection._fts_dataType = 'BiologicallyDerivedProductCollection';
/**
 * Internal flag to properly serialize choice-type element BiologicallyDerivedProduct.collection.collected[x]
 */
BiologicallyDerivedProductCollection._fts_collectedIsChoice = true;
/**
 * Any processing of the product during collection that does not change the fundamental nature of the product. For example adding anti-coagulants during the collection of Peripheral Blood Stem Cells.
 */
export class BiologicallyDerivedProductProcessing extends fhir.BackboneElement {
    /**
     * Default constructor for BiologicallyDerivedProductProcessing - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['description']) {
            this.description = new fhir.FhirString({ value: source.description });
        }
        if (source['procedure']) {
            this.procedure = new fhir.CodeableConcept(source.procedure);
        }
        if (source['additive']) {
            this.additive = new fhir.Reference(source.additive);
        }
        if (source['time']) {
            this.time = source.time;
        }
        else if (source['timeDateTime']) {
            this.time = new fhir.FhirDateTime({ value: source.timeDateTime });
        }
        else if (source['timePeriod']) {
            this.time = new fhir.Period(source.timePeriod);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["description"]) {
            issues.push(...this.description.doModelValidation());
        }
        if (this["procedure"]) {
            issues.push(...this.procedure.doModelValidation());
        }
        if (this["additive"]) {
            issues.push(...this.additive.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BiologicallyDerivedProductProcessing._fts_dataType = 'BiologicallyDerivedProductProcessing';
/**
 * Internal flag to properly serialize choice-type element BiologicallyDerivedProduct.processing.time[x]
 */
BiologicallyDerivedProductProcessing._fts_timeIsChoice = true;
/**
 * Any manipulation of product post-collection that is intended to alter the product.  For example a buffy-coat enrichment or CD8 reduction of Peripheral Blood Stem Cells to make it more suitable for infusion.
 */
export class BiologicallyDerivedProductManipulation extends fhir.BackboneElement {
    /**
     * Default constructor for BiologicallyDerivedProductManipulation - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['description']) {
            this.description = new fhir.FhirString({ value: source.description });
        }
        if (source['time']) {
            this.time = source.time;
        }
        else if (source['timeDateTime']) {
            this.time = new fhir.FhirDateTime({ value: source.timeDateTime });
        }
        else if (source['timePeriod']) {
            this.time = new fhir.Period(source.timePeriod);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["description"]) {
            issues.push(...this.description.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BiologicallyDerivedProductManipulation._fts_dataType = 'BiologicallyDerivedProductManipulation';
/**
 * Internal flag to properly serialize choice-type element BiologicallyDerivedProduct.manipulation.time[x]
 */
BiologicallyDerivedProductManipulation._fts_timeIsChoice = true;
/**
 * Product storage.
 */
export class BiologicallyDerivedProductStorage extends fhir.BackboneElement {
    /**
     * Default constructor for BiologicallyDerivedProductStorage - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['description']) {
            this.description = new fhir.FhirString({ value: source.description });
        }
        if (source['temperature']) {
            this.temperature = new fhir.FhirDecimal({ value: source.temperature });
        }
        if (source['scale']) {
            this.scale = source.scale;
        }
        if (source['duration']) {
            this.duration = new fhir.Period(source.duration);
        }
    }
    /**
     * Required-bound Value Set for scale (BiologicallyDerivedProduct.storage.scale)
     */
    static scaleRequiredCoding() {
        return ProductStorageScaleCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["description"]) {
            issues.push(...this.description.doModelValidation());
        }
        if (this["temperature"]) {
            issues.push(...this.temperature.doModelValidation());
        }
        if (this["duration"]) {
            issues.push(...this.duration.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BiologicallyDerivedProductStorage._fts_dataType = 'BiologicallyDerivedProductStorage';
/**
 * A material substance originating from a biological entity intended to be transplanted or infused
 * into another (possibly the same) biological entity.
 */
export class BiologicallyDerivedProduct extends fhir.DomainResource {
    /**
     * Default constructor for BiologicallyDerivedProduct - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'BiologicallyDerivedProduct';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['productCategory']) {
            this.productCategory = source.productCategory;
        }
        if (source['productCode']) {
            this.productCode = new fhir.CodeableConcept(source.productCode);
        }
        if (source['status']) {
            this.status = source.status;
        }
        if (source['request']) {
            this.request = source.request.map((x) => new fhir.Reference(x));
        }
        else {
            this.request = [];
        }
        if (source['quantity']) {
            this.quantity = new fhir.FhirInteger({ value: source.quantity });
        }
        if (source['parent']) {
            this.parent = source.parent.map((x) => new fhir.Reference(x));
        }
        else {
            this.parent = [];
        }
        if (source['collection']) {
            this.collection = new fhir.BiologicallyDerivedProductCollection(source.collection);
        }
        if (source['processing']) {
            this.processing = source.processing.map((x) => new fhir.BiologicallyDerivedProductProcessing(x));
        }
        else {
            this.processing = [];
        }
        if (source['manipulation']) {
            this.manipulation = new fhir.BiologicallyDerivedProductManipulation(source.manipulation);
        }
        if (source['storage']) {
            this.storage = source.storage.map((x) => new fhir.BiologicallyDerivedProductStorage(x));
        }
        else {
            this.storage = [];
        }
    }
    /**
     * Required-bound Value Set for productCategory (BiologicallyDerivedProduct.productCategory)
     */
    static productCategoryRequiredCoding() {
        return ProductCategoryCodings;
    }
    /**
     * Required-bound Value Set for status (BiologicallyDerivedProduct.status)
     */
    static statusRequiredCoding() {
        return ProductStatusCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType:"BiologicallyDerivedProduct" fhir: BiologicallyDerivedProduct.resourceType:"BiologicallyDerivedProduct"', });
        }
        if (this["identifier"]) {
            this.identifier.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["productCode"]) {
            issues.push(...this.productCode.doModelValidation());
        }
        if (this["request"]) {
            this.request.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["quantity"]) {
            issues.push(...this.quantity.doModelValidation());
        }
        if (this["parent"]) {
            this.parent.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["collection"]) {
            issues.push(...this.collection.doModelValidation());
        }
        if (this["processing"]) {
            this.processing.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["manipulation"]) {
            issues.push(...this.manipulation.doModelValidation());
        }
        if (this["storage"]) {
            this.storage.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BiologicallyDerivedProduct._fts_dataType = 'BiologicallyDerivedProduct';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3QuanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL0Jpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQiwrQ0FBK0M7QUFDL0Msa0NBQWtDO0FBQ2xDLDRDQUE0QztBQUU1QyxPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQU1uQyxhQUFhO0FBQ2IsT0FBTyxFQUFFLDBCQUEwQixHQUFpQyxNQUFNLGdEQUFnRCxDQUFDO0FBRzNILGFBQWE7QUFDYixPQUFPLEVBQUUsc0JBQXNCLEdBQTZCLE1BQU0sNENBQTRDLENBQUM7QUFHL0csYUFBYTtBQUNiLE9BQU8sRUFBRSxvQkFBb0IsR0FBMkIsTUFBTSwwQ0FBMEMsQ0FBQztBQTZCekc7O0dBRUc7QUFDSCxNQUFNLE9BQU8sb0NBQXFDLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFxQjVFOztPQUVHO0lBQ0gsWUFBWSxTQUEyRCxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUNqSCxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1NBQUU7UUFDbkYsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7U0FBRTtRQUMxRSxJQUFJLE1BQU0sQ0FBQyxXQUFXLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQztTQUFFO2FBQzFELElBQUksTUFBTSxDQUFDLG1CQUFtQixDQUFDLEVB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LENBQUMsWUFBWSxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUNoRixJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQUU7UUFDdEcsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUNwRixJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQUU7UUFDaEcsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQzs7QUF6R0Q7O0dBRUc7QUFDNkIsd0NBQWEsR0FBVSw0QkFBNEIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNC5jb3JlIHZlcnNpb246IDQuMC4xXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFByb2NlZHVyZUNvZGVDb2RpbmdzLCBQcm9jZWR1cmVDb2RlQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUHJvY2VkdXJlQ29kZUNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFByb2NlZHVyZUNvZGVDb2RlcywgIFByb2NlZHVyZUNvZGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUHJvY2VkdXJlQ29kZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBQcm9kdWN0U3RvcmFnZVNjYWxlQ29kaW5ncywgUHJvZHVjdFN0b3JhZ2VTY2FsZUNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1Byb2R1Y3RTdG9yYWdlU2NhbGVDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBQcm9kdWN0U3RvcmFnZVNjYWxlQ29kZXMsICBQcm9kdWN0U3RvcmFnZVNjYWxlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1Byb2R1Y3RTdG9yYWdlU2NhbGVDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUHJvZHVjdENhdGVnb3J5Q29kaW5ncywgUHJvZHVjdENhdGVnb3J5Q29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUHJvZHVjdENhdGVnb3J5Q29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUHJvZHVjdENhdGVnb3J5Q29kZXMsICBQcm9kdWN0Q2F0ZWdvcnlDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUHJvZHVjdENhdGVnb3J5Q29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFByb2R1Y3RTdGF0dXNDb2RpbmdzLCBQcm9kdWN0U3RhdHVzQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUHJvZHVjdFN0YXR1c0NvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFByb2R1Y3RTdGF0dXNDb2RlcywgIFByb2R1Y3RTdGF0dXNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUHJvZHVjdFN0YXR1c0NvZGVzLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0Q29sbGVjdGlvbiB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdENvbGxlY3Rpb25BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBIZWFsdGhjYXJlIHByb2Zlc3Npb25hbCB3aG8gaXMgcGVyZm9ybWluZyB0aGUgY29sbGVjdGlvbi5cclxuICAgKi9cclxuICBjb2xsZWN0b3I/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXRpZW50IG9yIGVudGl0eSwgc3VjaCBhcyBhIGhvc3BpdGFsIG9yIHZlbmRvciBpbiB0aGUgY2FzZSBvZiBhIHByb2Nlc3NlZC9tYW5pcHVsYXRlZC9tYW51ZmFjdHVyZWQgcHJvZHVjdCwgcHJvdmlkaW5nIHRoZSBwcm9kdWN0LlxyXG4gICAqL1xyXG4gIHNvdXJjZT86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGltZSBvZiBwcm9kdWN0IGNvbGxlY3Rpb24uXHJcbiAgICovXHJcbiAgY29sbGVjdGVkPzogZmhpci5GaGlyRGF0ZVRpbWV8Zmhpci5QZXJpb2R8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRpbWUgb2YgcHJvZHVjdCBjb2xsZWN0aW9uLlxyXG4gICAqL1xyXG4gIGNvbGxlY3RlZERhdGVUaW1lPzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaW1lIG9mIHByb2R1Y3QgY29sbGVjdGlvbi5cclxuICAgKi9cclxuICBjb2xsZWN0ZWRQZXJpb2Q/OiBmaGlyLlBlcmlvZEFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogSG93IHRoaXMgcHJvZHVjdCB3YXMgY29sbGVjdGVkLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0Q29sbGVjdGlvbiBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0Jpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0Q29sbGVjdGlvbic7XHJcbiAgLyoqXHJcbiAgICogSGVhbHRoY2FyZSBwcm9mZXNzaW9uYWwgd2hvIGlzIHBlcmZvcm1pbmcgdGhlIGNvbGxlY3Rpb24uXHJcbiAgICovXHJcbiAgcHVibGljIGNvbGxlY3Rvcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcGF0aWVudCBvciBlbnRpdHksIHN1Y2ggYXMgYSBob3NwaXRhbCBvciB2ZW5kb3IgaW4gdGhlIGNhc2Ugb2YgYSBwcm9jZXNzZWQvbWFuaXB1bGF0ZWQvbWFudWZhY3R1cmVkIHByb2R1Y3QsIHByb3ZpZGluZyB0aGUgcHJvZHVjdC5cclxuICAgKi9cclxuICBwdWJsaWMgc291cmNlPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRpbWUgb2YgcHJvZHVjdCBjb2xsZWN0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb2xsZWN0ZWQ/OiAoZmhpci5GaGlyRGF0ZVRpbWV8Zmhpci5QZXJpb2QpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0LmNvbGxlY3Rpb24uY29sbGVjdGVkW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX2NvbGxlY3RlZElzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0Q29sbGVjdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0Q29sbGVjdGlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydjb2xsZWN0b3InXSkgeyB0aGlzLmNvbGxlY3RvciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuY29sbGVjdG9yKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc291cmNlJ10pIHsgdGhpcy5zb3VyY2UgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnNvdXJjZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvbGxlY3RlZCddKSB7IHRoaXMuY29sbGVjdGVkID0gc291cmNlLmNvbGxlY3RlZDsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydjb2xsZWN0ZWREYXRlVGltZSddKSB7IHRoaXMuY29sbGVjdGVkID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLmNvbGxlY3RlZERhdGVUaW1lfSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnY29sbGVjdGVkUGVyaW9kJ10pIHsgdGhpcy5jb2xsZWN0ZWQgPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLmNvbGxlY3RlZFBlcmlvZCk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICh0aGlzW1wiY29sbGVjdG9yXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY29sbGVjdG9yLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInNvdXJjZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnNvdXJjZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0UHJvY2Vzc2luZyB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdFByb2Nlc3NpbmdBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBEZXNjcmlwdGlvbiBvZiBvZiBwcm9jZXNzaW5nLlxyXG4gICAqL1xyXG4gIGRlc2NyaXB0aW9uPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUHJvY2VzaW5nIGNvZGUuXHJcbiAgICovXHJcbiAgcHJvY2VkdXJlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTdWJzdGFuY2UgYWRkZWQgZHVyaW5nIHByb2Nlc3NpbmcuXHJcbiAgICovXHJcbiAgYWRkaXRpdmU/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRpbWUgb2YgcHJvY2Vzc2luZy5cclxuICAgKi9cclxuICB0aW1lPzogZmhpci5GaGlyRGF0ZVRpbWV8Zmhpci5QZXJpb2R8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRpbWUgb2YgcHJvY2Vzc2luZy5cclxuICAgKi9cclxuICB0aW1lRGF0ZVRpbWU/OiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRpbWUgb2YgcHJvY2Vzc2luZy5cclxuICAgKi9cclxuICB0aW1lUGVyaW9kPzogZmhpci5QZXJpb2RBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFueSBwcm9jZXNzaW5nIG9mIHRoZSBwcm9kdWN0IGR1cmluZyBjb2xsZWN0aW9uIHRoYXQgZG9lcyBub3QgY2hhbmdlIHRoZSBmdW5kYW1lbnRhbCBuYXR1cmUgb2YgdGhlIHByb2R1Y3QuIEZvciBleGFtcGxlIGFkZGluZyBhbnRpLWNvYWd1bGFudHMgZHVyaW5nIHRoZSBjb2xsZWN0aW9uIG9mIFBlcmlwaGVyYWwgQmxvb2QgU3RlbSBDZWxscy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdFByb2Nlc3NpbmcgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdFByb2Nlc3NpbmcnO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaXB0aW9uIG9mIG9mIHByb2Nlc3NpbmcuXHJcbiAgICovXHJcbiAgcHVibGljIGRlc2NyaXB0aW9uPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBQcm9jZXNpbmcgY29kZS5cclxuICAgKi9cclxuICBwdWJsaWMgcHJvY2VkdXJlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFN1YnN0YW5jZSBhZGRlZCBkdXJpbmcgcHJvY2Vzc2luZy5cclxuICAgKi9cclxuICBwdWJsaWMgYWRkaXRpdmU/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGltZSBvZiBwcm9jZXNzaW5nLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0aW1lPzogKGZoaXIuRmhpckRhdGVUaW1lfGZoaXIuUGVyaW9kKXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdC5wcm9jZXNzaW5nLnRpbWVbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfdGltZUlzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0UHJvY2Vzc2luZyAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0UHJvY2Vzc2luZ0FyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydkZXNjcmlwdGlvbiddKSB7IHRoaXMuZGVzY3JpcHRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmRlc2NyaXB0aW9ufSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3Byb2NlZHVyZSddKSB7IHRoaXMucHJvY2VkdXJlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5wcm9jZWR1cmUpOyB9XHJcbiAgICBpZiAoc291cmNlWydhZGRpdGl2ZSddKSB7IHRoaXMuYWRkaXRpdmUgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmFkZGl0aXZlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndGltZSddKSB7IHRoaXMudGltZSA9IHNvdXJjZS50aW1lOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3RpbWVEYXRlVGltZSddKSB7IHRoaXMudGltZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS50aW1lRGF0ZVRpbWV9KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd0aW1lUGVyaW9kJ10pIHsgdGhpcy50aW1lID0gbmV3IGZoaXIuUGVyaW9kKHNvdXJjZS50aW1lUGVyaW9kKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKHRoaXNbXCJkZXNjcmlwdGlvblwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmRlc2NyaXB0aW9uLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInByb2NlZHVyZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnByb2NlZHVyZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJhZGRpdGl2ZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmFkZGl0aXZlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RNYW5pcHVsYXRpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RNYW5pcHVsYXRpb25BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBEZXNjcmlwdGlvbiBvZiBtYW5pcHVsYXRpb24uXHJcbiAgICovXHJcbiAgZGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaW1lIG9mIG1hbmlwdWxhdGlvbi5cclxuICAgKi9cclxuICB0aW1lPzogZmhpci5GaGlyRGF0ZVRpbWV8Zmhpci5QZXJpb2R8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRpbWUgb2YgbWFuaXB1bGF0aW9uLlxyXG4gICAqL1xyXG4gIHRpbWVEYXRlVGltZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGltZSBvZiBtYW5pcHVsYXRpb24uXHJcbiAgICovXHJcbiAgdGltZVBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBbnkgbWFuaXB1bGF0aW9uIG9mIHByb2R1Y3QgcG9zdC1jb2xsZWN0aW9uIHRoYXQgaXMgaW50ZW5kZWQgdG8gYWx0ZXIgdGhlIHByb2R1Y3QuICBGb3IgZXhhbXBsZSBhIGJ1ZmZ5LWNvYXQgZW5yaWNobWVudCBvciBDRDggcmVkdWN0aW9uIG9mIFBlcmlwaGVyYWwgQmxvb2QgU3RlbSBDZWxscyB0byBtYWtlIGl0IG1vcmUgc3VpdGFibGUgZm9yIGluZnVzaW9uLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0TWFuaXB1bGF0aW9uIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RNYW5pcHVsYXRpb24nO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaXB0aW9uIG9mIG1hbmlwdWxhdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgZGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRpbWUgb2YgbWFuaXB1bGF0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0aW1lPzogKGZoaXIuRmhpckRhdGVUaW1lfGZoaXIuUGVyaW9kKXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdC5tYW5pcHVsYXRpb24udGltZVt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c190aW1lSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RNYW5pcHVsYXRpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdE1hbmlwdWxhdGlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydkZXNjcmlwdGlvbiddKSB7IHRoaXMuZGVzY3JpcHRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmRlc2NyaXB0aW9ufSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3RpbWUnXSkgeyB0aGlzLnRpbWUgPSBzb3VyY2UudGltZTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd0aW1lRGF0ZVRpbWUnXSkgeyB0aGlzLnRpbWUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2UudGltZURhdGVUaW1lfSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsndGltZVBlcmlvZCddKSB7IHRoaXMudGltZSA9IG5ldyBmaGlyLlBlcmlvZChzb3VyY2UudGltZVBlcmlvZCk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICh0aGlzW1wiZGVzY3JpcHRpb25cIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5kZXNjcmlwdGlvbi5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0U3RvcmFnZSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdFN0b3JhZ2VBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBEZXNjcmlwdGlvbiBvZiBzdG9yYWdlLlxyXG4gICAqL1xyXG4gIGRlc2NyaXB0aW9uPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU3RvcmFnZSB0ZW1wZXJhdHVyZS5cclxuICAgKi9cclxuICB0ZW1wZXJhdHVyZT86IGZoaXIuRmhpckRlY2ltYWx8bnVtYmVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUZW1wZXJhdHVyZSBzY2FsZSB1c2VkLlxyXG4gICAqL1xyXG4gIHNjYWxlPzogUHJvZHVjdFN0b3JhZ2VTY2FsZUNvZGVUeXBlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTdG9yYWdlIHRpbWVwZXJpb2QuXHJcbiAgICovXHJcbiAgZHVyYXRpb24/OiBmaGlyLlBlcmlvZEFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogUHJvZHVjdCBzdG9yYWdlLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0U3RvcmFnZSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0Jpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0U3RvcmFnZSc7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpcHRpb24gb2Ygc3RvcmFnZS5cclxuICAgKi9cclxuICBwdWJsaWMgZGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFN0b3JhZ2UgdGVtcGVyYXR1cmUuXHJcbiAgICovXHJcbiAgcHVibGljIHRlbXBlcmF0dXJlPzogZmhpci5GaGlyRGVjaW1hbHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGVtcGVyYXR1cmUgc2NhbGUgdXNlZC5cclxuICAgKi9cclxuICBwdWJsaWMgc2NhbGU/OiBQcm9kdWN0U3RvcmFnZVNjYWxlQ29kZVR5cGV8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFN0b3JhZ2UgdGltZXBlcmlvZC5cclxuICAgKi9cclxuICBwdWJsaWMgZHVyYXRpb24/OiBmaGlyLlBlcmlvZHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RTdG9yYWdlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8QmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RTdG9yYWdlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2Rlc2NyaXB0aW9uJ10pIHsgdGhpcy5kZXNjcmlwdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuZGVzY3JpcHRpb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndGVtcGVyYXR1cmUnXSkgeyB0aGlzLnRlbXBlcmF0dXJlID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoe3ZhbHVlOiBzb3VyY2UudGVtcGVyYXR1cmV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2NhbGUnXSkgeyB0aGlzLnNjYWxlID0gc291cmNlLnNjYWxlOyB9XHJcbiAgICBpZiAoc291cmNlWydkdXJhdGlvbiddKSB7IHRoaXMuZHVyYXRpb24gPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLmR1cmF0aW9uKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIHNjYWxlIChCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdC5zdG9yYWdlLnNjYWxlKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgc2NhbGVSZXF1aXJlZENvZGluZygpOlByb2R1Y3RTdG9yYWdlU2NhbGVDb2RpbmdUeXBlIHtcclxuICAgIHJldHVybiBQcm9kdWN0U3RvcmFnZVNjYWxlQ29kaW5ncztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICh0aGlzW1wiZGVzY3JpcHRpb25cIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5kZXNjcmlwdGlvbi5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJ0ZW1wZXJhdHVyZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnRlbXBlcmF0dXJlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImR1cmF0aW9uXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZHVyYXRpb24uZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdEFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIkJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0XCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgcmVjb3JkcyBpZGVudGlmaWVycyBhc3NvY2lhdGVkIHdpdGggdGhpcyBiaW9sb2dpY2FsbHkgZGVyaXZlZCBwcm9kdWN0IGluc3RhbmNlIHRoYXQgYXJlIGRlZmluZWQgYnkgYnVzaW5lc3MgcHJvY2Vzc2VzIGFuZC9vciB1c2VkIHRvIHJlZmVyIHRvIGl0IHdoZW4gYSBkaXJlY3QgVVJMIHJlZmVyZW5jZSB0byB0aGUgcmVzb3VyY2UgaXRzZWxmIGlzIG5vdCBhcHByb3ByaWF0ZSAoZS5nLiBpbiBDREEgZG9jdW1lbnRzLCBvciBpbiB3cml0dGVuIC8gcHJpbnRlZCBkb2N1bWVudGF0aW9uKS5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBCcm9hZCBjYXRlZ29yeSBvZiB0aGlzIHByb2R1Y3QuXHJcbiAgICovXHJcbiAgcHJvZHVjdENhdGVnb3J5PzogUHJvZHVjdENhdGVnb3J5Q29kZVR5cGV8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgY29kZSB0aGF0IGlkZW50aWZpZXMgdGhlIGtpbmQgb2YgdGhpcyBiaW9sb2dpY2FsbHkgZGVyaXZlZCBwcm9kdWN0IChTTk9NRUQgQ3Rjb2RlKS5cclxuICAgKi9cclxuICBwcm9kdWN0Q29kZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogV2hldGhlciB0aGUgcHJvZHVjdCBpcyBjdXJyZW50bHkgYXZhaWxhYmxlLlxyXG4gICAqL1xyXG4gIHN0YXR1cz86IFByb2R1Y3RTdGF0dXNDb2RlVHlwZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUHJvY2VkdXJlIHJlcXVlc3QgdG8gb2J0YWluIHRoaXMgYmlvbG9naWNhbGx5IGRlcml2ZWQgcHJvZHVjdC5cclxuICAgKi9cclxuICByZXF1ZXN0PzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE51bWJlciBvZiBkaXNjcmV0ZSB1bml0cyB3aXRoaW4gdGhpcyBwcm9kdWN0LlxyXG4gICAqL1xyXG4gIHF1YW50aXR5PzogZmhpci5GaGlySW50ZWdlcnxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEZvciBwcm9kdWN0cyB0aGF0IGhhdmUgbXVsdGlwbGUgY29sbGVjdGlvbnMuIEZvciBleGFtcGxlIFBlcmlwaGVyYWwgQmxvb2QgU3RlbSBDZWxscyBtYXkgYmUgY29sbGVjdGVkIG92ZXIgc2V2ZXJhbCBkYXlzIGZyb20gYSBzaW5nbGUgZG9ub3IgYW5kIHRoZSBkb25hdGlvbiBzcGxpdCBpbnRvIGluIG11bHRpcGxlIGNvbnRhaW5lcnMgd2hpY2ggbXVzdCBiZSBsaW5rZWQgdG8gdGhlIHBhcmVudCBkb25hdGlvbi5cclxuICAgKi9cclxuICBwYXJlbnQ/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSG93IHRoaXMgcHJvZHVjdCB3YXMgY29sbGVjdGVkLlxyXG4gICAqL1xyXG4gIGNvbGxlY3Rpb24/OiBmaGlyLkJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0Q29sbGVjdGlvbkFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFueSBwcm9jZXNzaW5nIG9mIHRoZSBwcm9kdWN0IGR1cmluZyBjb2xsZWN0aW9uIHRoYXQgZG9lcyBub3QgY2hhbmdlIHRoZSBmdW5kYW1lbnRhbCBuYXR1cmUgb2YgdGhlIHByb2R1Y3QuIEZvciBleGFtcGxlIGFkZGluZyBhbnRpLWNvYWd1bGFudHMgZHVyaW5nIHRoZSBjb2xsZWN0aW9uIG9mIFBlcmlwaGVyYWwgQmxvb2QgU3RlbSBDZWxscy5cclxuICAgKi9cclxuICBwcm9jZXNzaW5nPzogZmhpci5CaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdFByb2Nlc3NpbmdBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFueSBtYW5pcHVsYXRpb24gb2YgcHJvZHVjdCBwb3N0LWNvbGxlY3Rpb24gdGhhdCBpcyBpbnRlbmRlZCB0byBhbHRlciB0aGUgcHJvZHVjdC4gIEZvciBleGFtcGxlIGEgYnVmZnktY29hdCBlbnJpY2htZW50IG9yIENEOCByZWR1Y3Rpb24gb2YgUGVyaXBoZXJhbCBCbG9vZCBTdGVtIENlbGxzIHRvIG1ha2UgaXQgbW9yZSBzdWl0YWJsZSBmb3IgaW5mdXNpb24uXHJcbiAgICovXHJcbiAgbWFuaXB1bGF0aW9uPzogZmhpci5CaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdE1hbmlwdWxhdGlvbkFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFByb2R1Y3Qgc3RvcmFnZS5cclxuICAgKi9cclxuICBzdG9yYWdlPzogZmhpci5CaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdFN0b3JhZ2VBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQSBtYXRlcmlhbCBzdWJzdGFuY2Ugb3JpZ2luYXRpbmcgZnJvbSBhIGJpb2xvZ2ljYWwgZW50aXR5IGludGVuZGVkIHRvIGJlIHRyYW5zcGxhbnRlZCBvciBpbmZ1c2VkXHJcbiAqIGludG8gYW5vdGhlciAocG9zc2libHkgdGhlIHNhbWUpIGJpb2xvZ2ljYWwgZW50aXR5LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0IGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdCc7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJCaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdFwiO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgcmVjb3JkcyBpZGVudGlmaWVycyBhc3NvY2lhdGVkIHdpdGggdGhpcyBiaW9sb2dpY2FsbHkgZGVyaXZlZCBwcm9kdWN0IGluc3RhbmNlIHRoYXQgYXJlIGRlZmluZWQgYnkgYnVzaW5lc3MgcHJvY2Vzc2VzIGFuZC9vciB1c2VkIHRvIHJlZmVyIHRvIGl0IHdoZW4gYSBkaXJlY3QgVVJMIHJlZmVyZW5jZSB0byB0aGUgcmVzb3VyY2UgaXRzZWxmIGlzIG5vdCBhcHByb3ByaWF0ZSAoZS5nLiBpbiBDREEgZG9jdW1lbnRzLCBvciBpbiB3cml0dGVuIC8gcHJpbnRlZCBkb2N1bWVudGF0aW9uKS5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllcltdO1xyXG4gIC8qKlxyXG4gICAqIEJyb2FkIGNhdGVnb3J5IG9mIHRoaXMgcHJvZHVjdC5cclxuICAgKi9cclxuICBwdWJsaWMgcHJvZHVjdENhdGVnb3J5PzogUHJvZHVjdENhdGVnb3J5Q29kZVR5cGV8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgY29kZSB0aGF0IGlkZW50aWZpZXMgdGhlIGtpbmQgb2YgdGhpcyBiaW9sb2dpY2FsbHkgZGVyaXZlZCBwcm9kdWN0IChTTk9NRUQgQ3Rjb2RlKS5cclxuICAgKi9cclxuICBwdWJsaWMgcHJvZHVjdENvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogV2hldGhlciB0aGUgcHJvZHVjdCBpcyBjdXJyZW50bHkgYXZhaWxhYmxlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0dXM/OiBQcm9kdWN0U3RhdHVzQ29kZVR5cGV8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFByb2NlZHVyZSByZXF1ZXN0IHRvIG9idGFpbiB0aGlzIGJpb2xvZ2ljYWxseSBkZXJpdmVkIHByb2R1Y3QuXHJcbiAgICovXHJcbiAgcHVibGljIHJlcXVlc3Q/OiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIE51bWJlciBvZiBkaXNjcmV0ZSB1bml0cyB3aXRoaW4gdGhpcyBwcm9kdWN0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBxdWFudGl0eT86IGZoaXIuRmhpckludGVnZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEZvciBwcm9kdWN0cyB0aGF0IGhhdmUgbXVsdGlwbGUgY29sbGVjdGlvbnMuIEZvciBleGFtcGxlIFBlcmlwaGVyYWwgQmxvb2QgU3RlbSBDZWxscyBtYXkgYmUgY29sbGVjdGVkIG92ZXIgc2V2ZXJhbCBkYXlzIGZyb20gYSBzaW5nbGUgZG9ub3IgYW5kIHRoZSBkb25hdGlvbiBzcGxpdCBpbnRvIGluIG11bHRpcGxlIGNvbnRhaW5lcnMgd2hpY2ggbXVzdCBiZSBsaW5rZWQgdG8gdGhlIHBhcmVudCBkb25hdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgcGFyZW50PzogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBIb3cgdGhpcyBwcm9kdWN0IHdhcyBjb2xsZWN0ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGNvbGxlY3Rpb24/OiBmaGlyLkJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0Q29sbGVjdGlvbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQW55IHByb2Nlc3Npbmcgb2YgdGhlIHByb2R1Y3QgZHVyaW5nIGNvbGxlY3Rpb24gdGhhdCBkb2VzIG5vdCBjaGFuZ2UgdGhlIGZ1bmRhbWVudGFsIG5hdHVyZSBvZiB0aGUgcHJvZHVjdC4gRm9yIGV4YW1wbGUgYWRkaW5nIGFudGktY29hZ3VsYW50cyBkdXJpbmcgdGhlIGNvbGxlY3Rpb24gb2YgUGVyaXBoZXJhbCBCbG9vZCBTdGVtIENlbGxzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcm9jZXNzaW5nPzogZmhpci5CaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdFByb2Nlc3NpbmdbXTtcclxuICAvKipcclxuICAgKiBBbnkgbWFuaXB1bGF0aW9uIG9mIHByb2R1Y3QgcG9zdC1jb2xsZWN0aW9uIHRoYXQgaXMgaW50ZW5kZWQgdG8gYWx0ZXIgdGhlIHByb2R1Y3QuICBGb3IgZXhhbXBsZSBhIGJ1ZmZ5LWNvYXQgZW5yaWNobWVudCBvciBDRDggcmVkdWN0aW9uIG9mIFBlcmlwaGVyYWwgQmxvb2QgU3RlbSBDZWxscyB0byBtYWtlIGl0IG1vcmUgc3VpdGFibGUgZm9yIGluZnVzaW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtYW5pcHVsYXRpb24/OiBmaGlyLkJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0TWFuaXB1bGF0aW9ufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBQcm9kdWN0IHN0b3JhZ2UuXHJcbiAgICovXHJcbiAgcHVibGljIHN0b3JhZ2U/OiBmaGlyLkJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0U3RvcmFnZVtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8QmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3QnO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IHNvdXJjZS5pZGVudGlmaWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuSWRlbnRpZmllcih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmlkZW50aWZpZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJvZHVjdENhdGVnb3J5J10pIHsgdGhpcy5wcm9kdWN0Q2F0ZWdvcnkgPSBzb3VyY2UucHJvZHVjdENhdGVnb3J5OyB9XHJcbiAgICBpZiAoc291cmNlWydwcm9kdWN0Q29kZSddKSB7IHRoaXMucHJvZHVjdENvZGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnByb2R1Y3RDb2RlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RhdHVzJ10pIHsgdGhpcy5zdGF0dXMgPSBzb3VyY2Uuc3RhdHVzOyB9XHJcbiAgICBpZiAoc291cmNlWydyZXF1ZXN0J10pIHsgdGhpcy5yZXF1ZXN0ID0gc291cmNlLnJlcXVlc3QubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZXF1ZXN0ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3F1YW50aXR5J10pIHsgdGhpcy5xdWFudGl0eSA9IG5ldyBmaGlyLkZoaXJJbnRlZ2VyKHt2YWx1ZTogc291cmNlLnF1YW50aXR5fSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3BhcmVudCddKSB7IHRoaXMucGFyZW50ID0gc291cmNlLnBhcmVudC5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnBhcmVudCA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydjb2xsZWN0aW9uJ10pIHsgdGhpcy5jb2xsZWN0aW9uID0gbmV3IGZoaXIuQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RDb2xsZWN0aW9uKHNvdXJjZS5jb2xsZWN0aW9uKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJvY2Vzc2luZyddKSB7IHRoaXMucHJvY2Vzc2luZyA9IHNvdXJjZS5wcm9jZXNzaW5nLm1hcCgoeCkgPT4gbmV3IGZoaXIuQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RQcm9jZXNzaW5nKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucHJvY2Vzc2luZyA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydtYW5pcHVsYXRpb24nXSkgeyB0aGlzLm1hbmlwdWxhdGlvbiA9IG5ldyBmaGlyLkJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0TWFuaXB1bGF0aW9uKHNvdXJjZS5tYW5pcHVsYXRpb24pOyB9XHJcbiAgICBpZiAoc291cmNlWydzdG9yYWdlJ10pIHsgdGhpcy5zdG9yYWdlID0gc291cmNlLnN0b3JhZ2UubWFwKCh4KSA9PiBuZXcgZmhpci5CaW9sb2dpY2FsbHlEZXJpdmVkUHJvZHVjdFN0b3JhZ2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdG9yYWdlID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZWQtYm91bmQgVmFsdWUgU2V0IGZvciBwcm9kdWN0Q2F0ZWdvcnkgKEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0LnByb2R1Y3RDYXRlZ29yeSlcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIHByb2R1Y3RDYXRlZ29yeVJlcXVpcmVkQ29kaW5nKCk6UHJvZHVjdENhdGVnb3J5Q29kaW5nVHlwZSB7XHJcbiAgICByZXR1cm4gUHJvZHVjdENhdGVnb3J5Q29kaW5ncztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZWQtYm91bmQgVmFsdWUgU2V0IGZvciBzdGF0dXMgKEJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0LnN0YXR1cylcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIHN0YXR1c1JlcXVpcmVkQ29kaW5nKCk6UHJvZHVjdFN0YXR1c0NvZGluZ1R5cGUge1xyXG4gICAgcmV0dXJuIFByb2R1Y3RTdGF0dXNDb2RpbmdzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKCF0aGlzWydyZXNvdXJjZVR5cGUnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCAgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHJlc291cmNlVHlwZTpcIkJpb2xvZ2ljYWxseURlcml2ZWRQcm9kdWN0XCIgZmhpcjogQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3QucmVzb3VyY2VUeXBlOlwiQmlvbG9naWNhbGx5RGVyaXZlZFByb2R1Y3RcIicsIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJpZGVudGlmaWVyXCJdKSB7IHRoaXMuaWRlbnRpZmllci5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wicHJvZHVjdENvZGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5wcm9kdWN0Q29kZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJyZXF1ZXN0XCJdKSB7IHRoaXMucmVxdWVzdC5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wicXVhbnRpdHlcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5xdWFudGl0eS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJwYXJlbnRcIl0pIHsgdGhpcy5wYXJlbnQuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImNvbGxlY3Rpb25cIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5jb2xsZWN0aW9uLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInByb2Nlc3NpbmdcIl0pIHsgdGhpcy5wcm9jZXNzaW5nLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJtYW5pcHVsYXRpb25cIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5tYW5pcHVsYXRpb24uZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wic3RvcmFnZVwiXSkgeyB0aGlzLnN0b3JhZ2UuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=