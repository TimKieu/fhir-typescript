// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: RiskAssessment
import * as fhir from '../fhir.js';
// @ts-ignore
import { ObservationStatusCodings, } from '../fhirValueSets/ObservationStatusCodings.js';
/**
 * Multiple repetitions can be used to identify the same type of outcome in different timeframes as well as different types of outcomes.
 */
export class RiskAssessmentPrediction extends fhir.BackboneElement {
    /**
     * Default constructor for RiskAssessmentPrediction - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['outcome']) {
            this.outcome = new fhir.CodeableConcept(source.outcome);
        }
        if (source['probability']) {
            this.probability = source.probability;
        }
        else if (source['probabilityDecimal']) {
            this.probability = new fhir.FhirDecimal({ value: source.probabilityDecimal });
        }
        else if (source['probabilityRange']) {
            this.probability = new fhir.Range(source.probabilityRange);
        }
        if (source['qualitativeRisk']) {
            this.qualitativeRisk = new fhir.CodeableConcept(source.qualitativeRisk);
        }
        if (source['relativeRisk']) {
            this.relativeRisk = new fhir.FhirDecimal({ value: source.relativeRisk });
        }
        if (source['when']) {
            this.when = source.when;
        }
        else if (source['whenPeriod']) {
            this.when = new fhir.Period(source.whenPeriod);
        }
        else if (source['whenRange']) {
            this.when = new fhir.Range(source.whenRange);
        }
        if (source['rationale']) {
            this.rationale = new fhir.FhirString({ value: source.rationale });
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["outcome"]) {
            issues.push(...this.outcome.doModelValidation());
        }
        if (this["qualitativeRisk"]) {
            issues.push(...this.qualitativeRisk.doModelValidation());
        }
        if (this["relativeRisk"]) {
            issues.push(...this.relativeRisk.doModelValidation());
        }
        if (this["rationale"]) {
            issues.push(...this.rationale.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
RiskAssessmentPrediction._fts_dataType = 'RiskAssessmentPrediction';
/**
 * Internal flag to properly serialize choice-type element RiskAssessment.prediction.probability[x]
 */
RiskAssessmentPrediction._fts_probabilityIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element RiskAssessment.prediction.when[x]
 */
RiskAssessmentPrediction._fts_whenIsChoice = true;
/**
 * An assessment of the likely outcome(s) for a patient or other subject as well as the likelihood of each outcome.
 */
export class RiskAssessment extends fhir.DomainResource {
    /**
     * Default constructor for RiskAssessment - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'RiskAssessment';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['basedOn']) {
            this.basedOn = new fhir.Reference(source.basedOn);
        }
        if (source['parent']) {
            this.parent = new fhir.Reference(source.parent);
        }
        if (source['status']) {
            this.status = source.status;
        }
        else {
            this.status = null;
        }
        if (source['method']) {
            this.method = new fhir.CodeableConcept(source.method);
        }
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject);
        }
        else {
            this.subject = null;
        }
        if (source['encounter']) {
            this.encounter = new fhir.Reference(source.encounter);
        }
        if (source['occurrence']) {
            this.occurrence = source.occurrence;
        }
        else if (source['occurrenceDateTime']) {
            this.occurrence = new fhir.FhirDateTime({ value: source.occurrenceDateTime });
        }
        else if (source['occurrencePeriod']) {
            this.occurrence = new fhir.Period(source.occurrencePeriod);
        }
        if (source['condition']) {
            this.condition = new fhir.Reference(source.condition);
        }
        if (source['performer']) {
            this.performer = new fhir.Reference(source.performer);
        }
        if (source['reasonCode']) {
            this.reasonCode = source.reasonCode.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.reasonCode = [];
        }
        if (source['reasonReference']) {
            this.reasonReference = source.reasonReference.map((x) => new fhir.Reference(x));
        }
        else {
            this.reasonReference = [];
        }
        if (source['basis']) {
            this.basis = source.basis.map((x) => new fhir.Reference(x));
        }
        else {
            this.basis = [];
        }
        if (source['prediction']) {
            this.prediction = source.prediction.map((x) => new fhir.RiskAssessmentPrediction(x));
        }
        else {
            this.prediction = [];
        }
        if (source['mitigation']) {
            this.mitigation = new fhir.FhirString({ value: source.mitigation });
        }
        if (source['note']) {
            this.note = source.note.map((x) => new fhir.Annotation(x));
        }
        else {
            this.note = [];
        }
    }
    /**
     * Required-bound Value Set for status (RiskAssessment.status)
     */
    static statusRequiredCoding() {
        return ObservationStatusCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType:"RiskAssessment" fhir: RiskAssessment.resourceType:"RiskAssessment"', });
        }
        if (this["identifier"]) {
            this.identifier.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["basedOn"]) {
            issues.push(...this.basedOn.doModelValidation());
        }
        if (this["parent"]) {
            issues.push(...this.parent.doModelValidation());
        }
        if (!this['status']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property status:ObservationStatusCodeType fhir: RiskAssessment.status:code', });
        }
        if (this["method"]) {
            issues.push(...this.method.doModelValidation());
        }
        if (this["code"]) {
            issues.push(...this.code.doModelValidation());
        }
        if (!this['subject']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property subject:fhir.Reference fhir: RiskAssessment.subject:Reference', });
        }
        if (this["subject"]) {
            issues.push(...this.subject.doModelValidation());
        }
        if (this["encounter"]) {
            issues.push(...this.encounter.doModelValidation());
        }
        if (this["condition"]) {
            issues.push(...this.condition.doModelValidation());
        }
        if (this["performer"]) {
            issues.push(...this.performer.doModelValidation());
        }
        if (this["reasonCode"]) {
            this.reasonCode.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["reasonReference"]) {
            this.reasonReference.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["basis"]) {
            this.basis.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["prediction"]) {
            this.prediction.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["mitigation"]) {
            issues.push(...this.mitigation.doModelValidation());
        }
        if (this["note"]) {
            this.note.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
RiskAssessment._fts_dataType = 'RiskAssessment';
/**
 * Internal flag to properly serialize choice-type element RiskAssessment.occurrence[x]
 */
RiskAssessment._fts_occurrenceIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmlza0Fzc2Vzc21lbnQuanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL1Jpc2tBc3Nlc3NtZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQiwrQ0FBK0M7QUFDL0Msa0NBQWtDO0FBQ2xDLGdDQUFnQztBQUVoQyxPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQU1uQyxhQUFhO0FBQ2IsT0FBTyxFQUFFLHdCQUF3QixHQUErQixNQUFNLDhDQUE4QyxDQUFDO0FBaURySDs7R0FFRztBQUNILE1BQU0sT0FBTyx3QkFBeUIsU0FBUSxJQUFJLENBQUMsZUFBZTtJQXFDaEU7O09BRUc7SUFDSCxZQUFZLFNBQStDLEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQ3JHLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7U0FBRTtRQUNuRixJQUFJLE1BQU0sQ0FBQyxhQUFhLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQztTQUFFO2FBQ2hFLElBQUksTUFBTSxDQUFDLG9CQUFvQixDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsa0JBQWtCLEVBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDbEgsSUFBSSxNQUFNLENBQUMsa0JBQWtCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1NBQUU7UUFDcEcsSUFBSSxNQUFNLENBQUMsaUJBQWlC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QixHQUFRLElBQUksQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNC5jb3JlIHZlcnNpb246IDQuMC4xXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogUmlza0Fzc2Vzc21lbnRcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFJpc2tQcm9iYWJpbGl0eUNvZGluZ3MsIFJpc2tQcm9iYWJpbGl0eUNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1Jpc2tQcm9iYWJpbGl0eUNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFJpc2tQcm9iYWJpbGl0eUNvZGVzLCAgUmlza1Byb2JhYmlsaXR5Q29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1Jpc2tQcm9iYWJpbGl0eUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBPYnNlcnZhdGlvblN0YXR1c0NvZGluZ3MsIE9ic2VydmF0aW9uU3RhdHVzQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvT2JzZXJ2YXRpb25TdGF0dXNDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBPYnNlcnZhdGlvblN0YXR1c0NvZGVzLCAgT2JzZXJ2YXRpb25TdGF0dXNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvT2JzZXJ2YXRpb25TdGF0dXNDb2Rlcy5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBSaXNrQXNzZXNzbWVudFByZWRpY3Rpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmlza0Fzc2Vzc21lbnRQcmVkaWN0aW9uQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogT25lIG9mIHRoZSBwb3RlbnRpYWwgb3V0Y29tZXMgZm9yIHRoZSBwYXRpZW50IChlLmcuIHJlbWlzc2lvbiwgZGVhdGgsICBhIHBhcnRpY3VsYXIgY29uZGl0aW9uKS5cclxuICAgKi9cclxuICBvdXRjb21lPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiByYW5nZSBpcyB1c2VkLCBpdCByZXByZXNlbnRzIHRoZSBsb3dlciBhbmQgdXBwZXIgYm91bmRzIG9mIGNlcnRhaW50eTsgZS5nLiA0MC02MCUgIERlY2ltYWwgdmFsdWVzIGFyZSBleHByZXNzZWQgYXMgcGVyY2VudGFnZXMgYXMgd2VsbCAobWF4ID0gMTAwKS5cclxuICAgKi9cclxuICBwcm9iYWJpbGl0eT86IGZoaXIuRmhpckRlY2ltYWx8Zmhpci5SYW5nZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgcmFuZ2UgaXMgdXNlZCwgaXQgcmVwcmVzZW50cyB0aGUgbG93ZXIgYW5kIHVwcGVyIGJvdW5kcyBvZiBjZXJ0YWludHk7IGUuZy4gNDAtNjAlICBEZWNpbWFsIHZhbHVlcyBhcmUgZXhwcmVzc2VkIGFzIHBlcmNlbnRhZ2VzIGFzIHdlbGwgKG1heCA9IDEwMCkuXHJcbiAgICovXHJcbiAgcHJvYmFiaWxpdHlEZWNpbWFsPzogZmhpci5GaGlyRGVjaW1hbHxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIHJhbmdlIGlzIHVzZWQsIGl0IHJlcHJlc2VudHMgdGhlIGxvd2VyIGFuZCB1cHBlciBib3VuZHMgb2YgY2VydGFpbnR5OyBlLmcuIDQwLTYwJSAgRGVjaW1hbCB2YWx1ZXMgYXJlIGV4cHJlc3NlZCBhcyBwZXJjZW50YWdlcyBhcyB3ZWxsIChtYXggPSAxMDApLlxyXG4gICAqL1xyXG4gIHByb2JhYmlsaXR5UmFuZ2U/OiBmaGlyLlJhbmdlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIGhvdyBsaWtlbHkgdGhlIG91dGNvbWUgaXMgKGluIHRoZSBzcGVjaWZpZWQgdGltZWZyYW1lKSwgZXhwcmVzc2VkIGFzIGEgcXVhbGl0YXRpdmUgdmFsdWUgKGUuZy4gbG93LCBtZWRpdW0sIG9yIGhpZ2gpLlxyXG4gICAqL1xyXG4gIHF1YWxpdGF0aXZlUmlzaz86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHRoZSByaXNrIGZvciB0aGlzIHBhcnRpY3VsYXIgc3ViamVjdCAod2l0aCB0aGVpciBzcGVjaWZpYyBjaGFyYWN0ZXJpc3RpY3MpIGRpdmlkZWQgYnkgdGhlIHJpc2sgb2YgdGhlIHBvcHVsYXRpb24gaW4gZ2VuZXJhbC4gIChOdW1iZXJzIGdyZWF0ZXIgdGhhbiAxID0gaGlnaGVyIHJpc2sgdGhhbiB0aGUgcG9wdWxhdGlvbiwgbnVtYmVycyBsZXNzIHRoYW4gMSA9IGxvd2VyIHJpc2suKS5cclxuICAgKi9cclxuICByZWxhdGl2ZVJpc2s/OiBmaGlyLkZoaXJEZWNpbWFsfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgbm90IHNwZWNpZmllZCwgdGhlIHJpc2sgYXBwbGllcyBcIm92ZXIgdGhlIHN1YmplY3QncyBsaWZlc3BhblwiLlxyXG4gICAqL1xyXG4gIHdoZW4/OiBmaGlyLlBlcmlvZHxmaGlyLlJhbmdlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgcmlzayBhcHBsaWVzIFwib3ZlciB0aGUgc3ViamVjdCdzIGxpZmVzcGFuXCIuXHJcbiAgICovXHJcbiAgd2hlblBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgbm90IHNwZWNpZmllZCwgdGhlIHJpc2sgYXBwbGllcyBcIm92ZXIgdGhlIHN1YmplY3QncyBsaWZlc3BhblwiLlxyXG4gICAqL1xyXG4gIHdoZW5SYW5nZT86IGZoaXIuUmFuZ2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBZGRpdGlvbmFsIGluZm9ybWF0aW9uIGV4cGxhaW5pbmcgdGhlIGJhc2lzIGZvciB0aGUgcHJlZGljdGlvbi5cclxuICAgKi9cclxuICByYXRpb25hbGU/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIE11bHRpcGxlIHJlcGV0aXRpb25zIGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHRoZSBzYW1lIHR5cGUgb2Ygb3V0Y29tZSBpbiBkaWZmZXJlbnQgdGltZWZyYW1lcyBhcyB3ZWxsIGFzIGRpZmZlcmVudCB0eXBlcyBvZiBvdXRjb21lcy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBSaXNrQXNzZXNzbWVudFByZWRpY3Rpb24gZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdSaXNrQXNzZXNzbWVudFByZWRpY3Rpb24nO1xyXG4gIC8qKlxyXG4gICAqIE9uZSBvZiB0aGUgcG90ZW50aWFsIG91dGNvbWVzIGZvciB0aGUgcGF0aWVudCAoZS5nLiByZW1pc3Npb24sIGRlYXRoLCAgYSBwYXJ0aWN1bGFyIGNvbmRpdGlvbikuXHJcbiAgICovXHJcbiAgcHVibGljIG91dGNvbWU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgcmFuZ2UgaXMgdXNlZCwgaXQgcmVwcmVzZW50cyB0aGUgbG93ZXIgYW5kIHVwcGVyIGJvdW5kcyBvZiBjZXJ0YWludHk7IGUuZy4gNDAtNjAlICBEZWNpbWFsIHZhbHVlcyBhcmUgZXhwcmVzc2VkIGFzIHBlcmNlbnRhZ2VzIGFzIHdlbGwgKG1heCA9IDEwMCkuXHJcbiAgICovXHJcbiAgcHVibGljIHByb2JhYmlsaXR5PzogKGZoaXIuRmhpckRlY2ltYWx8Zmhpci5SYW5nZSl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgUmlza0Fzc2Vzc21lbnQucHJlZGljdGlvbi5wcm9iYWJpbGl0eVt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c19wcm9iYWJpbGl0eUlzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyBob3cgbGlrZWx5IHRoZSBvdXRjb21lIGlzIChpbiB0aGUgc3BlY2lmaWVkIHRpbWVmcmFtZSksIGV4cHJlc3NlZCBhcyBhIHF1YWxpdGF0aXZlIHZhbHVlIChlLmcuIGxvdywgbWVkaXVtLCBvciBoaWdoKS5cclxuICAgKi9cclxuICBwdWJsaWMgcXVhbGl0YXRpdmVSaXNrPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB0aGUgcmlzayBmb3IgdGhpcyBwYXJ0aWN1bGFyIHN1YmplY3QgKHdpdGggdGhlaXIgc3BlY2lmaWMgY2hhcmFjdGVyaXN0aWNzKSBkaXZpZGVkIGJ5IHRoZSByaXNrIG9mIHRoZSBwb3B1bGF0aW9uIGluIGdlbmVyYWwuICAoTnVtYmVycyBncmVhdGVyIHRoYW4gMSA9IGhpZ2hlciByaXNrIHRoYW4gdGhlIHBvcHVsYXRpb24sIG51bWJlcnMgbGVzcyB0aGFuIDEgPSBsb3dlciByaXNrLikuXHJcbiAgICovXHJcbiAgcHVibGljIHJlbGF0aXZlUmlzaz86IGZoaXIuRmhpckRlY2ltYWx8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIG5vdCBzcGVjaWZpZWQsIHRoZSByaXNrIGFwcGxpZXMgXCJvdmVyIHRoZSBzdWJqZWN0J3MgbGlmZXNwYW5cIi5cclxuICAgKi9cclxuICBwdWJsaWMgd2hlbj86IChmaGlyLlBlcmlvZHxmaGlyLlJhbmdlKXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBSaXNrQXNzZXNzbWVudC5wcmVkaWN0aW9uLndoZW5beF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfd2hlbklzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIEFkZGl0aW9uYWwgaW5mb3JtYXRpb24gZXhwbGFpbmluZyB0aGUgYmFzaXMgZm9yIHRoZSBwcmVkaWN0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByYXRpb25hbGU/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFJpc2tBc3Nlc3NtZW50UHJlZGljdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFJpc2tBc3Nlc3NtZW50UHJlZGljdGlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydvdXRjb21lJ10pIHsgdGhpcy5vdXRjb21lID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5vdXRjb21lKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJvYmFiaWxpdHknXSkgeyB0aGlzLnByb2JhYmlsaXR5ID0gc291cmNlLnByb2JhYmlsaXR5OyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3Byb2JhYmlsaXR5RGVjaW1hbCddKSB7IHRoaXMucHJvYmFiaWxpdHkgPSBuZXcgZmhpci5GaGlyRGVjaW1hbCh7dmFsdWU6IHNvdXJjZS5wcm9iYWJpbGl0eURlY2ltYWx9KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydwcm9iYWJpbGl0eVJhbmdlJ10pIHsgdGhpcy5wcm9iYWJpbGl0eSA9IG5ldyBmaGlyLlJhbmdlKHNvdXJjZS5wcm9iYWJpbGl0eVJhbmdlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncXVhbGl0YXRpdmVSaXNrJ10pIHsgdGhpcy5xdWFsaXRhdGl2ZVJpc2sgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnF1YWxpdGF0aXZlUmlzayk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3JlbGF0aXZlUmlzayddKSB7IHRoaXMucmVsYXRpdmVSaXNrID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoe3ZhbHVlOiBzb3VyY2UucmVsYXRpdmVSaXNrfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3doZW4nXSkgeyB0aGlzLndoZW4gPSBzb3VyY2Uud2hlbjsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd3aGVuUGVyaW9kJ10pIHsgdGhpcy53aGVuID0gbmV3IGZoaXIuUGVyaW9kKHNvdXJjZS53aGVuUGVyaW9kKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd3aGVuUmFuZ2UnXSkgeyB0aGlzLndoZW4gPSBuZXcgZmhpci5SYW5nZShzb3VyY2Uud2hlblJhbmdlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmF0aW9uYWxlJ10pIHsgdGhpcy5yYXRpb25hbGUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnJhdGlvbmFsZX0pOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAodGhpc1tcIm91dGNvbWVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5vdXRjb21lLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInF1YWxpdGF0aXZlUmlza1wiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnF1YWxpdGF0aXZlUmlzay5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJyZWxhdGl2ZVJpc2tcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5yZWxhdGl2ZVJpc2suZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wicmF0aW9uYWxlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucmF0aW9uYWxlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgUmlza0Fzc2Vzc21lbnQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmlza0Fzc2Vzc21lbnRBcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJSaXNrQXNzZXNzbWVudFwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBCdXNpbmVzcyBpZGVudGlmaWVyIGFzc2lnbmVkIHRvIHRoZSByaXNrIGFzc2Vzc21lbnQuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSByZWZlcmVuY2UgdG8gdGhlIHJlcXVlc3QgdGhhdCBpcyBmdWxmaWxsZWQgYnkgdGhpcyByaXNrIGFzc2Vzc21lbnQuXHJcbiAgICovXHJcbiAgYmFzZWRPbj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSByZWZlcmVuY2UgdG8gYSByZXNvdXJjZSB0aGF0IHRoaXMgcmlzayBhc3Nlc3NtZW50IGlzIHBhcnQgb2YsIHN1Y2ggYXMgYSBQcm9jZWR1cmUuXHJcbiAgICovXHJcbiAgcGFyZW50PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc3RhdHVzIG9mIHRoZSBSaXNrQXNzZXNzbWVudCwgdXNpbmcgdGhlIHNhbWUgc3RhdHVzZXMgYXMgYW4gT2JzZXJ2YXRpb24uXHJcbiAgICovXHJcbiAgc3RhdHVzOiBPYnNlcnZhdGlvblN0YXR1c0NvZGVUeXBlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGFsZ29yaXRobSwgcHJvY2VzcyBvciBtZWNoYW5pc20gdXNlZCB0byBldmFsdWF0ZSB0aGUgcmlzay5cclxuICAgKi9cclxuICBtZXRob2Q/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0eXBlIG9mIHRoZSByaXNrIGFzc2Vzc21lbnQgcGVyZm9ybWVkLlxyXG4gICAqL1xyXG4gIGNvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXRpZW50IG9yIGdyb3VwIHRoZSByaXNrIGFzc2Vzc21lbnQgYXBwbGllcyB0by5cclxuICAgKi9cclxuICBzdWJqZWN0OiBmaGlyLlJlZmVyZW5jZUFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgZW5jb3VudGVyIHdoZXJlIHRoZSBhc3Nlc3NtZW50IHdhcyBwZXJmb3JtZWQuXHJcbiAgICovXHJcbiAgZW5jb3VudGVyPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSAoYW5kIHBvc3NpYmx5IHRpbWUpIHRoZSByaXNrIGFzc2Vzc21lbnQgd2FzIHBlcmZvcm1lZC5cclxuICAgKi9cclxuICBvY2N1cnJlbmNlPzogZmhpci5GaGlyRGF0ZVRpbWV8Zmhpci5QZXJpb2R8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRlIChhbmQgcG9zc2libHkgdGltZSkgdGhlIHJpc2sgYXNzZXNzbWVudCB3YXMgcGVyZm9ybWVkLlxyXG4gICAqL1xyXG4gIG9jY3VycmVuY2VEYXRlVGltZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgKGFuZCBwb3NzaWJseSB0aW1lKSB0aGUgcmlzayBhc3Nlc3NtZW50IHdhcyBwZXJmb3JtZWQuXHJcbiAgICovXHJcbiAgb2NjdXJyZW5jZVBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRm9yIGFzc2Vzc21lbnRzIG9yIHByb2dub3NpcyBzcGVjaWZpYyB0byBhIHBhcnRpY3VsYXIgY29uZGl0aW9uLCBpbmRpY2F0ZXMgdGhlIGNvbmRpdGlvbiBiZWluZyBhc3Nlc3NlZC5cclxuICAgKi9cclxuICBjb25kaXRpb24/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwcm92aWRlciBvciBzb2Z0d2FyZSBhcHBsaWNhdGlvbiB0aGF0IHBlcmZvcm1lZCB0aGUgYXNzZXNzbWVudC5cclxuICAgKi9cclxuICBwZXJmb3JtZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZWFzb24gdGhlIHJpc2sgYXNzZXNzbWVudCB3YXMgcGVyZm9ybWVkLlxyXG4gICAqL1xyXG4gIHJlYXNvbkNvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2VzIHN1cHBvcnRpbmcgdGhlIHJlYXNvbiB0aGUgcmlzayBhc3Nlc3NtZW50IHdhcyBwZXJmb3JtZWQuXHJcbiAgICovXHJcbiAgcmVhc29uUmVmZXJlbmNlPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB0aGUgc291cmNlIGRhdGEgY29uc2lkZXJlZCBhcyBwYXJ0IG9mIHRoZSBhc3Nlc3NtZW50IChmb3IgZXhhbXBsZSwgRmFtaWx5SGlzdG9yeSwgT2JzZXJ2YXRpb25zLCBQcm9jZWR1cmVzLCBDb25kaXRpb25zLCBldGMuKS5cclxuICAgKi9cclxuICBiYXNpcz86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBNdWx0aXBsZSByZXBldGl0aW9ucyBjYW4gYmUgdXNlZCB0byBpZGVudGlmeSB0aGUgc2FtZSB0eXBlIG9mIG91dGNvbWUgaW4gZGlmZmVyZW50IHRpbWVmcmFtZXMgYXMgd2VsbCBhcyBkaWZmZXJlbnQgdHlwZXMgb2Ygb3V0Y29tZXMuXHJcbiAgICovXHJcbiAgcHJlZGljdGlvbj86IGZoaXIuUmlza0Fzc2Vzc21lbnRQcmVkaWN0aW9uQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGRlc2NyaXB0aW9uIG9mIHRoZSBzdGVwcyB0aGF0IG1pZ2h0IGJlIHRha2VuIHRvIHJlZHVjZSB0aGUgaWRlbnRpZmllZCByaXNrKHMpLlxyXG4gICAqL1xyXG4gIG1pdGlnYXRpb24/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBZGRpdGlvbmFsIGNvbW1lbnRzIGFib3V0IHRoZSByaXNrIGFzc2Vzc21lbnQuXHJcbiAgICovXHJcbiAgbm90ZT86IGZoaXIuQW5ub3RhdGlvbkFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBbiBhc3Nlc3NtZW50IG9mIHRoZSBsaWtlbHkgb3V0Y29tZShzKSBmb3IgYSBwYXRpZW50IG9yIG90aGVyIHN1YmplY3QgYXMgd2VsbCBhcyB0aGUgbGlrZWxpaG9vZCBvZiBlYWNoIG91dGNvbWUuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUmlza0Fzc2Vzc21lbnQgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1Jpc2tBc3Nlc3NtZW50JztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIlJpc2tBc3Nlc3NtZW50XCI7XHJcbiAgLyoqXHJcbiAgICogQnVzaW5lc3MgaWRlbnRpZmllciBhc3NpZ25lZCB0byB0aGUgcmlzayBhc3Nlc3NtZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyW107XHJcbiAgLyoqXHJcbiAgICogQSByZWZlcmVuY2UgdG8gdGhlIHJlcXVlc3QgdGhhdCBpcyBmdWxmaWxsZWQgYnkgdGhpcyByaXNrIGFzc2Vzc21lbnQuXHJcbiAgICovXHJcbiAgcHVibGljIGJhc2VkT24/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSByZWZlcmVuY2UgdG8gYSByZXNvdXJjZSB0aGF0IHRoaXMgcmlzayBhc3Nlc3NtZW50IGlzIHBhcnQgb2YsIHN1Y2ggYXMgYSBQcm9jZWR1cmUuXHJcbiAgICovXHJcbiAgcHVibGljIHBhcmVudD86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc3RhdHVzIG9mIHRoZSBSaXNrQXNzZXNzbWVudCwgdXNpbmcgdGhlIHNhbWUgc3RhdHVzZXMgYXMgYW4gT2JzZXJ2YXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1czogT2JzZXJ2YXRpb25TdGF0dXNDb2RlVHlwZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBhbGdvcml0aG0sIHByb2Nlc3Mgb3IgbWVjaGFuaXNtIHVzZWQgdG8gZXZhbHVhdGUgdGhlIHJpc2suXHJcbiAgICovXHJcbiAgcHVibGljIG1ldGhvZD86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdHlwZSBvZiB0aGUgcmlzayBhc3Nlc3NtZW50IHBlcmZvcm1lZC5cclxuICAgKi9cclxuICBwdWJsaWMgY29kZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcGF0aWVudCBvciBncm91cCB0aGUgcmlzayBhc3Nlc3NtZW50IGFwcGxpZXMgdG8uXHJcbiAgICovXHJcbiAgcHVibGljIHN1YmplY3Q6IGZoaXIuUmVmZXJlbmNlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGVuY291bnRlciB3aGVyZSB0aGUgYXNzZXNzbWVudCB3YXMgcGVyZm9ybWVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBlbmNvdW50ZXI/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgKGFuZCBwb3NzaWJseSB0aW1lKSB0aGUgcmlzayBhc3Nlc3NtZW50IHdhcyBwZXJmb3JtZWQuXHJcbiAgICovXHJcbiAgcHVibGljIG9jY3VycmVuY2U/OiAoZmhpci5GaGlyRGF0ZVRpbWV8Zmhpci5QZXJpb2QpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IFJpc2tBc3Nlc3NtZW50Lm9jY3VycmVuY2VbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfb2NjdXJyZW5jZUlzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIEZvciBhc3Nlc3NtZW50cyBvciBwcm9nbm9zaXMgc3BlY2lmaWMgdG8gYSBwYXJ0aWN1bGFyIGNvbmRpdGlvbiwgaW5kaWNhdGVzIHRoZSBjb25kaXRpb24gYmVpbmcgYXNzZXNzZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGNvbmRpdGlvbj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcHJvdmlkZXIgb3Igc29mdHdhcmUgYXBwbGljYXRpb24gdGhhdCBwZXJmb3JtZWQgdGhlIGFzc2Vzc21lbnQuXHJcbiAgICovXHJcbiAgcHVibGljIHBlcmZvcm1lcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcmVhc29uIHRoZSByaXNrIGFzc2Vzc21lbnQgd2FzIHBlcmZvcm1lZC5cclxuICAgKi9cclxuICBwdWJsaWMgcmVhc29uQ29kZT86IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2VzIHN1cHBvcnRpbmcgdGhlIHJlYXNvbiB0aGUgcmlzayBhc3Nlc3NtZW50IHdhcyBwZXJmb3JtZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHJlYXNvblJlZmVyZW5jZT86IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHRoZSBzb3VyY2UgZGF0YSBjb25zaWRlcmVkIGFzIHBhcnQgb2YgdGhlIGFzc2Vzc21lbnQgKGZvciBleGFtcGxlLCBGYW1pbHlIaXN0b3J5LCBPYnNlcnZhdGlvbnMsIFByb2NlZHVyZXMsIENvbmRpdGlvbnMsIGV0Yy4pLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBiYXNpcz86IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogTXVsdGlwbGUgcmVwZXRpdGlvbnMgY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgdGhlIHNhbWUgdHlwZSBvZiBvdXRjb21lIGluIGRpZmZlcmVudCB0aW1lZnJhbWVzIGFzIHdlbGwgYXMgZGlmZmVyZW50IHR5cGVzIG9mIG91dGNvbWVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcmVkaWN0aW9uPzogZmhpci5SaXNrQXNzZXNzbWVudFByZWRpY3Rpb25bXTtcclxuICAvKipcclxuICAgKiBBIGRlc2NyaXB0aW9uIG9mIHRoZSBzdGVwcyB0aGF0IG1pZ2h0IGJlIHRha2VuIHRvIHJlZHVjZSB0aGUgaWRlbnRpZmllZCByaXNrKHMpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtaXRpZ2F0aW9uPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBZGRpdGlvbmFsIGNvbW1lbnRzIGFib3V0IHRoZSByaXNrIGFzc2Vzc21lbnQuXHJcbiAgICovXHJcbiAgcHVibGljIG5vdGU/OiBmaGlyLkFubm90YXRpb25bXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBSaXNrQXNzZXNzbWVudCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFJpc2tBc3Nlc3NtZW50QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ1Jpc2tBc3Nlc3NtZW50JztcclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBzb3VyY2UuaWRlbnRpZmllci5tYXAoKHgpID0+IG5ldyBmaGlyLklkZW50aWZpZXIoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pZGVudGlmaWVyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2Jhc2VkT24nXSkgeyB0aGlzLmJhc2VkT24gPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmJhc2VkT24pOyB9XHJcbiAgICBpZiAoc291cmNlWydwYXJlbnQnXSkgeyB0aGlzLnBhcmVudCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UucGFyZW50KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RhdHVzJ10pIHsgdGhpcy5zdGF0dXMgPSBzb3VyY2Uuc3RhdHVzOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydtZXRob2QnXSkgeyB0aGlzLm1ldGhvZCA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UubWV0aG9kKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY29kZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N1YmplY3QnXSkgeyB0aGlzLnN1YmplY3QgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnN1YmplY3QpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdWJqZWN0ID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZW5jb3VudGVyJ10pIHsgdGhpcy5lbmNvdW50ZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmVuY291bnRlcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ29jY3VycmVuY2UnXSkgeyB0aGlzLm9jY3VycmVuY2UgPSBzb3VyY2Uub2NjdXJyZW5jZTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydvY2N1cnJlbmNlRGF0ZVRpbWUnXSkgeyB0aGlzLm9jY3VycmVuY2UgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2Uub2NjdXJyZW5jZURhdGVUaW1lfSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnb2NjdXJyZW5jZVBlcmlvZCddKSB7IHRoaXMub2NjdXJyZW5jZSA9IG5ldyBmaGlyLlBlcmlvZChzb3VyY2Uub2NjdXJyZW5jZVBlcmlvZCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvbmRpdGlvbiddKSB7IHRoaXMuY29uZGl0aW9uID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5jb25kaXRpb24pOyB9XHJcbiAgICBpZiAoc291cmNlWydwZXJmb3JtZXInXSkgeyB0aGlzLnBlcmZvcm1lciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UucGVyZm9ybWVyKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVhc29uQ29kZSddKSB7IHRoaXMucmVhc29uQ29kZSA9IHNvdXJjZS5yZWFzb25Db2RlLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVhc29uQ29kZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydyZWFzb25SZWZlcmVuY2UnXSkgeyB0aGlzLnJlYXNvblJlZmVyZW5jZSA9IHNvdXJjZS5yZWFzb25SZWZlcmVuY2UubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZWFzb25SZWZlcmVuY2UgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYmFzaXMnXSkgeyB0aGlzLmJhc2lzID0gc291cmNlLmJhc2lzLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYmFzaXMgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJlZGljdGlvbiddKSB7IHRoaXMucHJlZGljdGlvbiA9IHNvdXJjZS5wcmVkaWN0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmlza0Fzc2Vzc21lbnRQcmVkaWN0aW9uKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucHJlZGljdGlvbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydtaXRpZ2F0aW9uJ10pIHsgdGhpcy5taXRpZ2F0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5taXRpZ2F0aW9ufSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ25vdGUnXSkgeyB0aGlzLm5vdGUgPSBzb3VyY2Uubm90ZS5tYXAoKHgpID0+IG5ldyBmaGlyLkFubm90YXRpb24oeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5ub3RlID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZWQtYm91bmQgVmFsdWUgU2V0IGZvciBzdGF0dXMgKFJpc2tBc3Nlc3NtZW50LnN0YXR1cylcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIHN0YXR1c1JlcXVpcmVkQ29kaW5nKCk6T2JzZXJ2YXRpb25TdGF0dXNDb2RpbmdUeXBlIHtcclxuICAgIHJldHVybiBPYnNlcnZhdGlvblN0YXR1c0NvZGluZ3M7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAoIXRoaXNbJ3Jlc291cmNlVHlwZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsICBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgcmVzb3VyY2VUeXBlOlwiUmlza0Fzc2Vzc21lbnRcIiBmaGlyOiBSaXNrQXNzZXNzbWVudC5yZXNvdXJjZVR5cGU6XCJSaXNrQXNzZXNzbWVudFwiJywgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImlkZW50aWZpZXJcIl0pIHsgdGhpcy5pZGVudGlmaWVyLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJiYXNlZE9uXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuYmFzZWRPbi5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJwYXJlbnRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5wYXJlbnQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICghdGhpc1snc3RhdHVzJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBzdGF0dXM6T2JzZXJ2YXRpb25TdGF0dXNDb2RlVHlwZSBmaGlyOiBSaXNrQXNzZXNzbWVudC5zdGF0dXM6Y29kZScsIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJtZXRob2RcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5tZXRob2QuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiY29kZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmNvZGUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICghdGhpc1snc3ViamVjdCddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsICBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgc3ViamVjdDpmaGlyLlJlZmVyZW5jZSBmaGlyOiBSaXNrQXNzZXNzbWVudC5zdWJqZWN0OlJlZmVyZW5jZScsIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJzdWJqZWN0XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc3ViamVjdC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJlbmNvdW50ZXJcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5lbmNvdW50ZXIuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiY29uZGl0aW9uXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY29uZGl0aW9uLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInBlcmZvcm1lclwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnBlcmZvcm1lci5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJyZWFzb25Db2RlXCJdKSB7IHRoaXMucmVhc29uQ29kZS5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wicmVhc29uUmVmZXJlbmNlXCJdKSB7IHRoaXMucmVhc29uUmVmZXJlbmNlLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJiYXNpc1wiXSkgeyB0aGlzLmJhc2lzLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJwcmVkaWN0aW9uXCJdKSB7IHRoaXMucHJlZGljdGlvbi5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wibWl0aWdhdGlvblwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm1pdGlnYXRpb24uZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wibm90ZVwiXSkgeyB0aGlzLm5vdGUuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=