// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: RiskAssessment
import * as fhir from '../fhir.js';
// @ts-ignore
import { ObservationStatusVsValidation } from '../fhirValueSets/ObservationStatusVsValidation.js';
/**
 * Multiple repetitions can be used to identify the same type of outcome in different timeframes as well as different types of outcomes.
 */
export class RiskAssessmentPrediction extends fhir.BackboneElement {
    /**
     * Default constructor for RiskAssessmentPrediction - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['outcome']) {
            this.outcome = new fhir.CodeableConcept(source.outcome);
        }
        if (source['probability']) {
            this.probability = source.probability;
        }
        else if (source['probabilityDecimal']) {
            this.probability = new fhir.FhirDecimal({ value: source.probabilityDecimal });
        }
        else if (source['probabilityRange']) {
            this.probability = new fhir.Range(source.probabilityRange);
        }
        if (source['qualitativeRisk']) {
            this.qualitativeRisk = new fhir.CodeableConcept(source.qualitativeRisk);
        }
        if (source['relativeRisk']) {
            this.relativeRisk = new fhir.FhirDecimal({ value: source.relativeRisk });
        }
        if (source['_relativeRisk']) {
            if (this.relativeRisk) {
                this.relativeRisk.addExtendedProperties(source._relativeRisk);
            }
            else {
                this.relativeRisk = new fhir.FhirDecimal(source._relativeRisk);
            }
        }
        if (source['when']) {
            this.when = source.when;
        }
        else if (source['whenPeriod']) {
            this.when = new fhir.Period(source.whenPeriod);
        }
        else if (source['whenRange']) {
            this.when = new fhir.Range(source.whenRange);
        }
        if (source['rationale']) {
            this.rationale = new fhir.FhirString({ value: source.rationale });
        }
        if (source['_rationale']) {
            if (this.rationale) {
                this.rationale.addExtendedProperties(source._rationale);
            }
            else {
                this.rationale = new fhir.FhirString(source._rationale);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'RiskAssessment.prediction';
        }
        this.vOptS('outcome', expression);
        this.vOptS('probability', expression);
        this.vOptS('qualitativeRisk', expression);
        this.vOptS('relativeRisk', expression);
        this.vOptS('when', expression);
        this.vOptS('rationale', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
RiskAssessmentPrediction._fts_dataType = 'RiskAssessmentPrediction';
/**
 * Internal flag to properly serialize choice-type element RiskAssessment.prediction.probability[x]
 */
RiskAssessmentPrediction._fts_probabilityIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element RiskAssessment.prediction.when[x]
 */
RiskAssessmentPrediction._fts_whenIsChoice = true;
/**
 * An assessment of the likely outcome(s) for a patient or other subject as well as the likelihood of each outcome.
 */
export class RiskAssessment extends fhir.DomainResource {
    /**
     * Default constructor for RiskAssessment - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'RiskAssessment';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['basedOn']) {
            this.basedOn = new fhir.Reference(source.basedOn);
        }
        if (source['parent']) {
            this.parent = new fhir.Reference(source.parent);
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['method']) {
            this.method = new fhir.CodeableConcept(source.method);
        }
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject);
        }
        else {
            this.subject = null;
        }
        if (source['encounter']) {
            this.encounter = new fhir.Reference(source.encounter);
        }
        if (source['occurrence']) {
            this.occurrence = source.occurrence;
        }
        else if (source['occurrenceDateTime']) {
            this.occurrence = new fhir.FhirDateTime({ value: source.occurrenceDateTime });
        }
        else if (source['occurrencePeriod']) {
            this.occurrence = new fhir.Period(source.occurrencePeriod);
        }
        if (source['condition']) {
            this.condition = new fhir.Reference(source.condition);
        }
        if (source['performer']) {
            this.performer = new fhir.Reference(source.performer);
        }
        if (source['reasonCode']) {
            this.reasonCode = source.reasonCode.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.reasonCode = [];
        }
        if (source['reasonReference']) {
            this.reasonReference = source.reasonReference.map((x) => new fhir.Reference(x));
        }
        else {
            this.reasonReference = [];
        }
        if (source['basis']) {
            this.basis = source.basis.map((x) => new fhir.Reference(x));
        }
        else {
            this.basis = [];
        }
        if (source['prediction']) {
            this.prediction = source.prediction.map((x) => new fhir.RiskAssessmentPrediction(x));
        }
        else {
            this.prediction = [];
        }
        if (source['mitigation']) {
            this.mitigation = new fhir.FhirString({ value: source.mitigation });
        }
        if (source['_mitigation']) {
            if (this.mitigation) {
                this.mitigation.addExtendedProperties(source._mitigation);
            }
            else {
                this.mitigation = new fhir.FhirString(source._mitigation);
            }
        }
        if (source['note']) {
            this.note = source.note.map((x) => new fhir.Annotation(x));
        }
        else {
            this.note = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'RiskAssessment';
        }
        this.vReqS('resourceType', expression);
        this.vOptA('identifier', expression);
        this.vOptS('basedOn', expression);
        this.vOptS('parent', expression);
        this.vReqSV('status', expression, 'ObservationStatus', ObservationStatusVsValidation, 'r');
        this.vOptS('method', expression);
        this.vOptS('code', expression);
        this.vReqS('subject', expression);
        this.vOptS('encounter', expression);
        this.vOptS('occurrence', expression);
        this.vOptS('condition', expression);
        this.vOptS('performer', expression);
        this.vOptA('reasonCode', expression);
        this.vOptA('reasonReference', expression);
        this.vOptA('basis', expression);
        this.vOptA('prediction', expression);
        this.vOptS('mitigation', expression);
        this.vOptA('note', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
RiskAssessment._fts_dataType = 'RiskAssessment';
/**
 * Internal flag to properly serialize choice-type element RiskAssessment.occurrence[x]
 */
RiskAssessment._fts_occurrenceIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmlza0Fzc2Vzc21lbnQuanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL1Jpc2tBc3Nlc3NtZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQiwrQ0FBK0M7QUFDL0Msa0NBQWtDO0FBQ2xDLGdDQUFnQztBQUVoQyxPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQVFuQyxhQUFhO0FBQ2IsT0FBTyxFQUFFLDZCQUE2QixFQUFFLE1BQU0sbURBQW1ELENBQUM7QUF1RGxHOztHQUVHO0FBQ0gsTUFBTSxPQUFPLHdCQUF5QixTQUFRLElBQUksQ0FBQyxlQUFlO0lBcUNoRTs7T0FFRztJQUNILFlBQVksU0FBK0MsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDckcsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztTQUFFO1FBQ25GLElBQUksTUFBTSxDQUFDLGFBQWEsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFdBQVcsR0FBRyxNQUFNLENBQUMsV0FBVyxDQUFDO1NBQUU7YUFDaEUsSUFBSSxNQUFNLENBQUMsb0JBQW9CLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxrQkFBa0IsRUFBQyxDQUFDLENBQUM7U0FBRTthQUNsSCxJQUFJLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLENBQUM7U0FBRTtRQUNwRyxJQUFJLE1BQU0sQ0FBQyxpQkFBaUIs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O1FBQzlCLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ25DLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ25DLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQzdCLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBbkpEOztHQUVHO0FBQzZCLDRCQUFhLEdBQVUsZ0JBQWdCLENBQUM7QUF5Q3hFOztHQUVHO0FBQ3VCLHNDQUF1QixHQUFRLElBQUksQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNC5jb3JlIHZlcnNpb246IDQuMC4xXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogUmlza0Fzc2Vzc21lbnRcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFJpc2tQcm9iYWJpbGl0eUNvZGVzLCAgUmlza1Byb2JhYmlsaXR5Q29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1Jpc2tQcm9iYWJpbGl0eUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBSaXNrUHJvYmFiaWxpdHlWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1Jpc2tQcm9iYWJpbGl0eVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgT2JzZXJ2YXRpb25TdGF0dXNDb2RlcywgIE9ic2VydmF0aW9uU3RhdHVzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL09ic2VydmF0aW9uU3RhdHVzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE9ic2VydmF0aW9uU3RhdHVzVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9PYnNlcnZhdGlvblN0YXR1c1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBSaXNrQXNzZXNzbWVudFByZWRpY3Rpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmlza0Fzc2Vzc21lbnRQcmVkaWN0aW9uQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogT25lIG9mIHRoZSBwb3RlbnRpYWwgb3V0Y29tZXMgZm9yIHRoZSBwYXRpZW50IChlLmcuIHJlbWlzc2lvbiwgZGVhdGgsICBhIHBhcnRpY3VsYXIgY29uZGl0aW9uKS5cclxuICAgKi9cclxuICBvdXRjb21lPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiByYW5nZSBpcyB1c2VkLCBpdCByZXByZXNlbnRzIHRoZSBsb3dlciBhbmQgdXBwZXIgYm91bmRzIG9mIGNlcnRhaW50eTsgZS5nLiA0MC02MCUgIERlY2ltYWwgdmFsdWVzIGFyZSBleHByZXNzZWQgYXMgcGVyY2VudGFnZXMgYXMgd2VsbCAobWF4ID0gMTAwKS5cclxuICAgKi9cclxuICBwcm9iYWJpbGl0eT86IGZoaXIuRmhpckRlY2ltYWx8Zmhpci5SYW5nZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgcmFuZ2UgaXMgdXNlZCwgaXQgcmVwcmVzZW50cyB0aGUgbG93ZXIgYW5kIHVwcGVyIGJvdW5kcyBvZiBjZXJ0YWludHk7IGUuZy4gNDAtNjAlICBEZWNpbWFsIHZhbHVlcyBhcmUgZXhwcmVzc2VkIGFzIHBlcmNlbnRhZ2VzIGFzIHdlbGwgKG1heCA9IDEwMCkuXHJcbiAgICovXHJcbiAgcHJvYmFiaWxpdHlEZWNpbWFsPzogZmhpci5GaGlyRGVjaW1hbHxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIHJhbmdlIGlzIHVzZWQsIGl0IHJlcHJlc2VudHMgdGhlIGxvd2VyIGFuZCB1cHBlciBib3VuZHMgb2YgY2VydGFpbnR5OyBlLmcuIDQwLTYwJSAgRGVjaW1hbCB2YWx1ZXMgYXJlIGV4cHJlc3NlZCBhcyBwZXJjZW50YWdlcyBhcyB3ZWxsIChtYXggPSAxMDApLlxyXG4gICAqL1xyXG4gIHByb2JhYmlsaXR5UmFuZ2U/OiBmaGlyLlJhbmdlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIGhvdyBsaWtlbHkgdGhlIG91dGNvbWUgaXMgKGluIHRoZSBzcGVjaWZpZWQgdGltZWZyYW1lKSwgZXhwcmVzc2VkIGFzIGEgcXVhbGl0YXRpdmUgdmFsdWUgKGUuZy4gbG93LCBtZWRpdW0sIG9yIGhpZ2gpLlxyXG4gICAqL1xyXG4gIHF1YWxpdGF0aXZlUmlzaz86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHRoZSByaXNrIGZvciB0aGlzIHBhcnRpY3VsYXIgc3ViamVjdCAod2l0aCB0aGVpciBzcGVjaWZpYyBjaGFyYWN0ZXJpc3RpY3MpIGRpdmlkZWQgYnkgdGhlIHJpc2sgb2YgdGhlIHBvcHVsYXRpb24gaW4gZ2VuZXJhbC4gIChOdW1iZXJzIGdyZWF0ZXIgdGhhbiAxID0gaGlnaGVyIHJpc2sgdGhhbiB0aGUgcG9wdWxhdGlvbiwgbnVtYmVycyBsZXNzIHRoYW4gMSA9IGxvd2VyIHJpc2suKS5cclxuICAgKi9cclxuICByZWxhdGl2ZVJpc2s/OiBmaGlyLkZoaXJEZWNpbWFsfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFJpc2tBc3Nlc3NtZW50LnByZWRpY3Rpb24ucmVsYXRpdmVSaXNrXHJcbiAgICovXHJcbiAgX3JlbGF0aXZlUmlzaz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogSWYgbm90IHNwZWNpZmllZCwgdGhlIHJpc2sgYXBwbGllcyBcIm92ZXIgdGhlIHN1YmplY3QncyBsaWZlc3BhblwiLlxyXG4gICAqL1xyXG4gIHdoZW4/OiBmaGlyLlBlcmlvZHxmaGlyLlJhbmdlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgcmlzayBhcHBsaWVzIFwib3ZlciB0aGUgc3ViamVjdCdzIGxpZmVzcGFuXCIuXHJcbiAgICovXHJcbiAgd2hlblBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgbm90IHNwZWNpZmllZCwgdGhlIHJpc2sgYXBwbGllcyBcIm92ZXIgdGhlIHN1YmplY3QncyBsaWZlc3BhblwiLlxyXG4gICAqL1xyXG4gIHdoZW5SYW5nZT86IGZoaXIuUmFuZ2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBZGRpdGlvbmFsIGluZm9ybWF0aW9uIGV4cGxhaW5pbmcgdGhlIGJhc2lzIGZvciB0aGUgcHJlZGljdGlvbi5cclxuICAgKi9cclxuICByYXRpb25hbGU/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogUmlza0Fzc2Vzc21lbnQucHJlZGljdGlvbi5yYXRpb25hbGVcclxuICAgKi9cclxuICBfcmF0aW9uYWxlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIE11bHRpcGxlIHJlcGV0aXRpb25zIGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHRoZSBzYW1lIHR5cGUgb2Ygb3V0Y29tZSBpbiBkaWZmZXJlbnQgdGltZWZyYW1lcyBhcyB3ZWxsIGFzIGRpZmZlcmVudCB0eXBlcyBvZiBvdXRjb21lcy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBSaXNrQXNzZXNzbWVudFByZWRpY3Rpb24gZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdSaXNrQXNzZXNzbWVudFByZWRpY3Rpb24nO1xyXG4gIC8qKlxyXG4gICAqIE9uZSBvZiB0aGUgcG90ZW50aWFsIG91dGNvbWVzIGZvciB0aGUgcGF0aWVudCAoZS5nLiByZW1pc3Npb24sIGRlYXRoLCAgYSBwYXJ0aWN1bGFyIGNvbmRpdGlvbikuXHJcbiAgICovXHJcbiAgcHVibGljIG91dGNvbWU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgcmFuZ2UgaXMgdXNlZCwgaXQgcmVwcmVzZW50cyB0aGUgbG93ZXIgYW5kIHVwcGVyIGJvdW5kcyBvZiBjZXJ0YWludHk7IGUuZy4gNDAtNjAlICBEZWNpbWFsIHZhbHVlcyBhcmUgZXhwcmVzc2VkIGFzIHBlcmNlbnRhZ2VzIGFzIHdlbGwgKG1heCA9IDEwMCkuXHJcbiAgICovXHJcbiAgcHVibGljIHByb2JhYmlsaXR5PzogKGZoaXIuRmhpckRlY2ltYWx8Zmhpci5SYW5nZSl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgUmlza0Fzc2Vzc21lbnQucHJlZGljdGlvbi5wcm9iYWJpbGl0eVt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c19wcm9iYWJpbGl0eUlzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyBob3cgbGlrZWx5IHRoZSBvdXRjb21lIGlzIChpbiB0aGUgc3BlY2lmaWVkIHRpbWVmcmFtZSksIGV4cHJlc3NlZCBhcyBhIHF1YWxpdGF0aXZlIHZhbHVlIChlLmcuIGxvdywgbWVkaXVtLCBvciBoaWdoKS5cclxuICAgKi9cclxuICBwdWJsaWMgcXVhbGl0YXRpdmVSaXNrPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB0aGUgcmlzayBmb3IgdGhpcyBwYXJ0aWN1bGFyIHN1YmplY3QgKHdpdGggdGhlaXIgc3BlY2lmaWMgY2hhcmFjdGVyaXN0aWNzKSBkaXZpZGVkIGJ5IHRoZSByaXNrIG9mIHRoZSBwb3B1bGF0aW9uIGluIGdlbmVyYWwuICAoTnVtYmVycyBncmVhdGVyIHRoYW4gMSA9IGhpZ2hlciByaXNrIHRoYW4gdGhlIHBvcHVsYXRpb24sIG51bWJlcnMgbGVzcyB0aGFuIDEgPSBsb3dlciByaXNrLikuXHJcbiAgICovXHJcbiAgcHVibGljIHJlbGF0aXZlUmlzaz86IGZoaXIuRmhpckRlY2ltYWx8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIG5vdCBzcGVjaWZpZWQsIHRoZSByaXNrIGFwcGxpZXMgXCJvdmVyIHRoZSBzdWJqZWN0J3MgbGlmZXNwYW5cIi5cclxuICAgKi9cclxuICBwdWJsaWMgd2hlbj86IChmaGlyLlBlcmlvZHxmaGlyLlJhbmdlKXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBSaXNrQXNzZXNzbWVudC5wcmVkaWN0aW9uLndoZW5beF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfd2hlbklzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIEFkZGl0aW9uYWwgaW5mb3JtYXRpb24gZXhwbGFpbmluZyB0aGUgYmFzaXMgZm9yIHRoZSBwcmVkaWN0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByYXRpb25hbGU/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFJpc2tBc3Nlc3NtZW50UHJlZGljdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFJpc2tBc3Nlc3NtZW50UHJlZGljdGlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydvdXRjb21lJ10pIHsgdGhpcy5vdXRjb21lID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5vdXRjb21lKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJvYmFiaWxpdHknXSkgeyB0aGlzLnByb2JhYmlsaXR5ID0gc291cmNlLnByb2JhYmlsaXR5OyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3Byb2JhYmlsaXR5RGVjaW1hbCddKSB7IHRoaXMucHJvYmFiaWxpdHkgPSBuZXcgZmhpci5GaGlyRGVjaW1hbCh7dmFsdWU6IHNvdXJjZS5wcm9iYWJpbGl0eURlY2ltYWx9KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydwcm9iYWJpbGl0eVJhbmdlJ10pIHsgdGhpcy5wcm9iYWJpbGl0eSA9IG5ldyBmaGlyLlJhbmdlKHNvdXJjZS5wcm9iYWJpbGl0eVJhbmdlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncXVhbGl0YXRpdmVSaXNrJ10pIHsgdGhpcy5xdWFsaXRhdGl2ZVJpc2sgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnF1YWxpdGF0aXZlUmlzayk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3JlbGF0aXZlUmlzayddKSB7IHRoaXMucmVsYXRpdmVSaXNrID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoe3ZhbHVlOiBzb3VyY2UucmVsYXRpdmVSaXNrfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19yZWxhdGl2ZVJpc2snXSkge1xyXG4gICAgICBpZiAodGhpcy5yZWxhdGl2ZVJpc2spIHsgdGhpcy5yZWxhdGl2ZVJpc2suYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fcmVsYXRpdmVSaXNrISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMucmVsYXRpdmVSaXNrID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoc291cmNlLl9yZWxhdGl2ZVJpc2sgYXMgUGFydGlhbDxmaGlyLkZoaXJEZWNpbWFsQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd3aGVuJ10pIHsgdGhpcy53aGVuID0gc291cmNlLndoZW47IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnd2hlblBlcmlvZCddKSB7IHRoaXMud2hlbiA9IG5ldyBmaGlyLlBlcmlvZChzb3VyY2Uud2hlblBlcmlvZCk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnd2hlblJhbmdlJ10pIHsgdGhpcy53aGVuID0gbmV3IGZoaXIuUmFuZ2Uoc291cmNlLndoZW5SYW5nZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3JhdGlvbmFsZSddKSB7IHRoaXMucmF0aW9uYWxlID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5yYXRpb25hbGV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3JhdGlvbmFsZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnJhdGlvbmFsZSkgeyB0aGlzLnJhdGlvbmFsZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9yYXRpb25hbGUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5yYXRpb25hbGUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fcmF0aW9uYWxlIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKTtcclxuICAgIGlmIChleHByZXNzaW9uID09PSAnJykgeyBleHByZXNzaW9uID0gJ1Jpc2tBc3Nlc3NtZW50LnByZWRpY3Rpb24nIH1cclxuICAgIHRoaXMudk9wdFMoJ291dGNvbWUnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdwcm9iYWJpbGl0eScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ3F1YWxpdGF0aXZlUmlzaycsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ3JlbGF0aXZlUmlzaycsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ3doZW4nLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdyYXRpb25hbGUnLGV4cHJlc3Npb24pXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgUmlza0Fzc2Vzc21lbnQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmlza0Fzc2Vzc21lbnRBcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJSaXNrQXNzZXNzbWVudFwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBCdXNpbmVzcyBpZGVudGlmaWVyIGFzc2lnbmVkIHRvIHRoZSByaXNrIGFzc2Vzc21lbnQuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSByZWZlcmVuY2UgdG8gdGhlIHJlcXVlc3QgdGhhdCBpcyBmdWxmaWxsZWQgYnkgdGhpcyByaXNrIGFzc2Vzc21lbnQuXHJcbiAgICovXHJcbiAgYmFzZWRPbj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSByZWZlcmVuY2UgdG8gYSByZXNvdXJjZSB0aGF0IHRoaXMgcmlzayBhc3Nlc3NtZW50IGlzIHBhcnQgb2YsIHN1Y2ggYXMgYSBQcm9jZWR1cmUuXHJcbiAgICovXHJcbiAgcGFyZW50PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc3RhdHVzIG9mIHRoZSBSaXNrQXNzZXNzbWVudCwgdXNpbmcgdGhlIHNhbWUgc3RhdHVzZXMgYXMgYW4gT2JzZXJ2YXRpb24uXHJcbiAgICovXHJcbiAgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPE9ic2VydmF0aW9uU3RhdHVzQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFJpc2tBc3Nlc3NtZW50LnN0YXR1c1xyXG4gICAqL1xyXG4gIF9zdGF0dXM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBhbGdvcml0aG0sIHByb2Nlc3Mgb3IgbWVjaGFuaXNtIHVzZWQgdG8gZXZhbHVhdGUgdGhlIHJpc2suXHJcbiAgICovXHJcbiAgbWV0aG9kPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdHlwZSBvZiB0aGUgcmlzayBhc3Nlc3NtZW50IHBlcmZvcm1lZC5cclxuICAgKi9cclxuICBjb2RlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcGF0aWVudCBvciBncm91cCB0aGUgcmlzayBhc3Nlc3NtZW50IGFwcGxpZXMgdG8uXHJcbiAgICovXHJcbiAgc3ViamVjdDogZmhpci5SZWZlcmVuY2VBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGVuY291bnRlciB3aGVyZSB0aGUgYXNzZXNzbWVudCB3YXMgcGVyZm9ybWVkLlxyXG4gICAqL1xyXG4gIGVuY291bnRlcj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgKGFuZCBwb3NzaWJseSB0aW1lKSB0aGUgcmlzayBhc3Nlc3NtZW50IHdhcyBwZXJmb3JtZWQuXHJcbiAgICovXHJcbiAgb2NjdXJyZW5jZT86IGZoaXIuRmhpckRhdGVUaW1lfGZoaXIuUGVyaW9kfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSAoYW5kIHBvc3NpYmx5IHRpbWUpIHRoZSByaXNrIGFzc2Vzc21lbnQgd2FzIHBlcmZvcm1lZC5cclxuICAgKi9cclxuICBvY2N1cnJlbmNlRGF0ZVRpbWU/OiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRlIChhbmQgcG9zc2libHkgdGltZSkgdGhlIHJpc2sgYXNzZXNzbWVudCB3YXMgcGVyZm9ybWVkLlxyXG4gICAqL1xyXG4gIG9jY3VycmVuY2VQZXJpb2Q/OiBmaGlyLlBlcmlvZEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEZvciBhc3Nlc3NtZW50cyBvciBwcm9nbm9zaXMgc3BlY2lmaWMgdG8gYSBwYXJ0aWN1bGFyIGNvbmRpdGlvbiwgaW5kaWNhdGVzIHRoZSBjb25kaXRpb24gYmVpbmcgYXNzZXNzZWQuXHJcbiAgICovXHJcbiAgY29uZGl0aW9uPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcHJvdmlkZXIgb3Igc29mdHdhcmUgYXBwbGljYXRpb24gdGhhdCBwZXJmb3JtZWQgdGhlIGFzc2Vzc21lbnQuXHJcbiAgICovXHJcbiAgcGVyZm9ybWVyPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcmVhc29uIHRoZSByaXNrIGFzc2Vzc21lbnQgd2FzIHBlcmZvcm1lZC5cclxuICAgKi9cclxuICByZWFzb25Db2RlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlcyBzdXBwb3J0aW5nIHRoZSByZWFzb24gdGhlIHJpc2sgYXNzZXNzbWVudCB3YXMgcGVyZm9ybWVkLlxyXG4gICAqL1xyXG4gIHJlYXNvblJlZmVyZW5jZT86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgdGhlIHNvdXJjZSBkYXRhIGNvbnNpZGVyZWQgYXMgcGFydCBvZiB0aGUgYXNzZXNzbWVudCAoZm9yIGV4YW1wbGUsIEZhbWlseUhpc3RvcnksIE9ic2VydmF0aW9ucywgUHJvY2VkdXJlcywgQ29uZGl0aW9ucywgZXRjLikuXHJcbiAgICovXHJcbiAgYmFzaXM/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTXVsdGlwbGUgcmVwZXRpdGlvbnMgY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgdGhlIHNhbWUgdHlwZSBvZiBvdXRjb21lIGluIGRpZmZlcmVudCB0aW1lZnJhbWVzIGFzIHdlbGwgYXMgZGlmZmVyZW50IHR5cGVzIG9mIG91dGNvbWVzLlxyXG4gICAqL1xyXG4gIHByZWRpY3Rpb24/OiBmaGlyLlJpc2tBc3Nlc3NtZW50UHJlZGljdGlvbkFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBkZXNjcmlwdGlvbiBvZiB0aGUgc3RlcHMgdGhhdCBtaWdodCBiZSB0YWtlbiB0byByZWR1Y2UgdGhlIGlkZW50aWZpZWQgcmlzayhzKS5cclxuICAgKi9cclxuICBtaXRpZ2F0aW9uPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFJpc2tBc3Nlc3NtZW50Lm1pdGlnYXRpb25cclxuICAgKi9cclxuICBfbWl0aWdhdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQWRkaXRpb25hbCBjb21tZW50cyBhYm91dCB0aGUgcmlzayBhc3Nlc3NtZW50LlxyXG4gICAqL1xyXG4gIG5vdGU/OiBmaGlyLkFubm90YXRpb25BcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQW4gYXNzZXNzbWVudCBvZiB0aGUgbGlrZWx5IG91dGNvbWUocykgZm9yIGEgcGF0aWVudCBvciBvdGhlciBzdWJqZWN0IGFzIHdlbGwgYXMgdGhlIGxpa2VsaWhvb2Qgb2YgZWFjaCBvdXRjb21lLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFJpc2tBc3Nlc3NtZW50IGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdSaXNrQXNzZXNzbWVudCc7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJSaXNrQXNzZXNzbWVudFwiO1xyXG4gIC8qKlxyXG4gICAqIEJ1c2luZXNzIGlkZW50aWZpZXIgYXNzaWduZWQgdG8gdGhlIHJpc2sgYXNzZXNzbWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcjogZmhpci5JZGVudGlmaWVyW107XHJcbiAgLyoqXHJcbiAgICogQSByZWZlcmVuY2UgdG8gdGhlIHJlcXVlc3QgdGhhdCBpcyBmdWxmaWxsZWQgYnkgdGhpcyByaXNrIGFzc2Vzc21lbnQuXHJcbiAgICovXHJcbiAgcHVibGljIGJhc2VkT24/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSByZWZlcmVuY2UgdG8gYSByZXNvdXJjZSB0aGF0IHRoaXMgcmlzayBhc3Nlc3NtZW50IGlzIHBhcnQgb2YsIHN1Y2ggYXMgYSBQcm9jZWR1cmUuXHJcbiAgICovXHJcbiAgcHVibGljIHBhcmVudD86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc3RhdHVzIG9mIHRoZSBSaXNrQXNzZXNzbWVudCwgdXNpbmcgdGhlIHNhbWUgc3RhdHVzZXMgYXMgYW4gT2JzZXJ2YXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1czogZmhpci5GaGlyQ29kZTxPYnNlcnZhdGlvblN0YXR1c0NvZGVUeXBlPnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBhbGdvcml0aG0sIHByb2Nlc3Mgb3IgbWVjaGFuaXNtIHVzZWQgdG8gZXZhbHVhdGUgdGhlIHJpc2suXHJcbiAgICovXHJcbiAgcHVibGljIG1ldGhvZD86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdHlwZSBvZiB0aGUgcmlzayBhc3Nlc3NtZW50IHBlcmZvcm1lZC5cclxuICAgKi9cclxuICBwdWJsaWMgY29kZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcGF0aWVudCBvciBncm91cCB0aGUgcmlzayBhc3Nlc3NtZW50IGFwcGxpZXMgdG8uXHJcbiAgICovXHJcbiAgcHVibGljIHN1YmplY3Q6IGZoaXIuUmVmZXJlbmNlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGVuY291bnRlciB3aGVyZSB0aGUgYXNzZXNzbWVudCB3YXMgcGVyZm9ybWVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBlbmNvdW50ZXI/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgKGFuZCBwb3NzaWJseSB0aW1lKSB0aGUgcmlzayBhc3Nlc3NtZW50IHdhcyBwZXJmb3JtZWQuXHJcbiAgICovXHJcbiAgcHVibGljIG9jY3VycmVuY2U/OiAoZmhpci5GaGlyRGF0ZVRpbWV8Zmhpci5QZXJpb2QpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IFJpc2tBc3Nlc3NtZW50Lm9jY3VycmVuY2VbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfb2NjdXJyZW5jZUlzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIEZvciBhc3Nlc3NtZW50cyBvciBwcm9nbm9zaXMgc3BlY2lmaWMgdG8gYSBwYXJ0aWN1bGFyIGNvbmRpdGlvbiwgaW5kaWNhdGVzIHRoZSBjb25kaXRpb24gYmVpbmcgYXNzZXNzZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGNvbmRpdGlvbj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcHJvdmlkZXIgb3Igc29mdHdhcmUgYXBwbGljYXRpb24gdGhhdCBwZXJmb3JtZWQgdGhlIGFzc2Vzc21lbnQuXHJcbiAgICovXHJcbiAgcHVibGljIHBlcmZvcm1lcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcmVhc29uIHRoZSByaXNrIGFzc2Vzc21lbnQgd2FzIHBlcmZvcm1lZC5cclxuICAgKi9cclxuICBwdWJsaWMgcmVhc29uQ29kZTogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZXMgc3VwcG9ydGluZyB0aGUgcmVhc29uIHRoZSByaXNrIGFzc2Vzc21lbnQgd2FzIHBlcmZvcm1lZC5cclxuICAgKi9cclxuICBwdWJsaWMgcmVhc29uUmVmZXJlbmNlOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB0aGUgc291cmNlIGRhdGEgY29uc2lkZXJlZCBhcyBwYXJ0IG9mIHRoZSBhc3Nlc3NtZW50IChmb3IgZXhhbXBsZSwgRmFtaWx5SGlzdG9yeSwgT2JzZXJ2YXRpb25zLCBQcm9jZWR1cmVzLCBDb25kaXRpb25zLCBldGMuKS5cclxuICAgKi9cclxuICBwdWJsaWMgYmFzaXM6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogTXVsdGlwbGUgcmVwZXRpdGlvbnMgY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgdGhlIHNhbWUgdHlwZSBvZiBvdXRjb21lIGluIGRpZmZlcmVudCB0aW1lZnJhbWVzIGFzIHdlbGwgYXMgZGlmZmVyZW50IHR5cGVzIG9mIG91dGNvbWVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcmVkaWN0aW9uOiBmaGlyLlJpc2tBc3Nlc3NtZW50UHJlZGljdGlvbltdO1xyXG4gIC8qKlxyXG4gICAqIEEgZGVzY3JpcHRpb24gb2YgdGhlIHN0ZXBzIHRoYXQgbWlnaHQgYmUgdGFrZW4gdG8gcmVkdWNlIHRoZSBpZGVudGlmaWVkIHJpc2socykuXHJcbiAgICovXHJcbiAgcHVibGljIG1pdGlnYXRpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFkZGl0aW9uYWwgY29tbWVudHMgYWJvdXQgdGhlIHJpc2sgYXNzZXNzbWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgbm90ZTogZmhpci5Bbm5vdGF0aW9uW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgUmlza0Fzc2Vzc21lbnQgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxSaXNrQXNzZXNzbWVudEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdSaXNrQXNzZXNzbWVudCc7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gc291cmNlLmlkZW50aWZpZXIubWFwKCh4KSA9PiBuZXcgZmhpci5JZGVudGlmaWVyKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaWRlbnRpZmllciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydiYXNlZE9uJ10pIHsgdGhpcy5iYXNlZE9uID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5iYXNlZE9uKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncGFyZW50J10pIHsgdGhpcy5wYXJlbnQgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnBhcmVudCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0YXR1cyddKSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8T2JzZXJ2YXRpb25TdGF0dXNDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2Uuc3RhdHVzfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zdGF0dXMnXSkge1xyXG4gICAgICBpZiAodGhpcy5zdGF0dXMpIHsgdGhpcy5zdGF0dXMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc3RhdHVzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8T2JzZXJ2YXRpb25TdGF0dXNDb2RlVHlwZT4oc291cmNlLl9zdGF0dXMgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ21ldGhvZCddKSB7IHRoaXMubWV0aG9kID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5tZXRob2QpOyB9XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jb2RlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3ViamVjdCddKSB7IHRoaXMuc3ViamVjdCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2Uuc3ViamVjdCk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN1YmplY3QgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydlbmNvdW50ZXInXSkgeyB0aGlzLmVuY291bnRlciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuZW5jb3VudGVyKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnb2NjdXJyZW5jZSddKSB7IHRoaXMub2NjdXJyZW5jZSA9IHNvdXJjZS5vY2N1cnJlbmNlOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ29jY3VycmVuY2VEYXRlVGltZSddKSB7IHRoaXMub2NjdXJyZW5jZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5vY2N1cnJlbmNlRGF0ZVRpbWV9KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydvY2N1cnJlbmNlUGVyaW9kJ10pIHsgdGhpcy5vY2N1cnJlbmNlID0gbmV3IGZoaXIuUGVyaW9kKHNvdXJjZS5vY2N1cnJlbmNlUGVyaW9kKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29uZGl0aW9uJ10pIHsgdGhpcy5jb25kaXRpb24gPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmNvbmRpdGlvbik7IH1cclxuICAgIGlmIChzb3VyY2VbJ3BlcmZvcm1lciddKSB7IHRoaXMucGVyZm9ybWVyID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5wZXJmb3JtZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWydyZWFzb25Db2RlJ10pIHsgdGhpcy5yZWFzb25Db2RlID0gc291cmNlLnJlYXNvbkNvZGUubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZWFzb25Db2RlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3JlYXNvblJlZmVyZW5jZSddKSB7IHRoaXMucmVhc29uUmVmZXJlbmNlID0gc291cmNlLnJlYXNvblJlZmVyZW5jZS5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnJlYXNvblJlZmVyZW5jZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydiYXNpcyddKSB7IHRoaXMuYmFzaXMgPSBzb3VyY2UuYmFzaXMubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5iYXNpcyA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwcmVkaWN0aW9uJ10pIHsgdGhpcy5wcmVkaWN0aW9uID0gc291cmNlLnByZWRpY3Rpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5SaXNrQXNzZXNzbWVudFByZWRpY3Rpb24oeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wcmVkaWN0aW9uID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ21pdGlnYXRpb24nXSkgeyB0aGlzLm1pdGlnYXRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLm1pdGlnYXRpb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX21pdGlnYXRpb24nXSkge1xyXG4gICAgICBpZiAodGhpcy5taXRpZ2F0aW9uKSB7IHRoaXMubWl0aWdhdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9taXRpZ2F0aW9uISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubWl0aWdhdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9taXRpZ2F0aW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydub3RlJ10pIHsgdGhpcy5ub3RlID0gc291cmNlLm5vdGUubWFwKCh4KSA9PiBuZXcgZmhpci5Bbm5vdGF0aW9uKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubm90ZSA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKTtcclxuICAgIGlmIChleHByZXNzaW9uID09PSAnJykgeyBleHByZXNzaW9uID0gJ1Jpc2tBc3Nlc3NtZW50JyB9XHJcbiAgICB0aGlzLnZSZXFTKCdyZXNvdXJjZVR5cGUnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRBKCdpZGVudGlmaWVyJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnYmFzZWRPbicsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ3BhcmVudCcsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudlJlcVNWKCdzdGF0dXMnLGV4cHJlc3Npb24sJ09ic2VydmF0aW9uU3RhdHVzJyxPYnNlcnZhdGlvblN0YXR1c1ZzVmFsaWRhdGlvbiwncicpXHJcbiAgICB0aGlzLnZPcHRTKCdtZXRob2QnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdjb2RlJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52UmVxUygnc3ViamVjdCcsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ2VuY291bnRlcicsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ29jY3VycmVuY2UnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdjb25kaXRpb24nLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdwZXJmb3JtZXInLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRBKCdyZWFzb25Db2RlJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0QSgncmVhc29uUmVmZXJlbmNlJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0QSgnYmFzaXMnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRBKCdwcmVkaWN0aW9uJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnbWl0aWdhdGlvbicsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdEEoJ25vdGUnLGV4cHJlc3Npb24pXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=