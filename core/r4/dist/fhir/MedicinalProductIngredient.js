// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: MedicinalProductIngredient
import * as fhir from '../fhir.js';
/**
 * Strength expressed in terms of a reference substance.
 */
export class MedicinalProductIngredientSpecifiedSubstanceStrengthReferenceStrength extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductIngredientSpecifiedSubstanceStrengthReferenceStrength - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['substance']) {
            this.substance = new fhir.CodeableConcept(source.substance, options);
        }
        if (source['strength']) {
            this.strength = new fhir.Ratio(source.strength, options);
        }
        else {
            this.strength = null;
        }
        if (source['strengthLowLimit']) {
            this.strengthLowLimit = new fhir.Ratio(source.strengthLowLimit, options);
        }
        if (source['measurementPoint'] !== undefined) {
            this.measurementPoint = new fhir.FhirString({ value: source.measurementPoint }, options);
        }
        if (source['_measurementPoint']) {
            if (this.measurementPoint) {
                this.measurementPoint.addExtendedProperties(source._measurementPoint);
            }
            else {
                this.measurementPoint = new fhir.FhirString(source._measurementPoint, options);
            }
        }
        if (source['country']) {
            this.country = source.country.map((x) => new fhir.CodeableConcept(x, options));
        }
        else {
            this.country = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicinalProductIngredient.specifiedSubstance.strength.referenceStrength';
        }
        iss.push(...this.vOS('substance', exp));
        iss.push(...this.vRS('strength', exp));
        iss.push(...this.vOS('strengthLowLimit', exp));
        iss.push(...this.vOS('measurementPoint', exp));
        iss.push(...this.vOA('country', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductIngredientSpecifiedSubstanceStrengthReferenceStrength._fts_dataType = 'MedicinalProductIngredientSpecifiedSubstanceStrengthReferenceStrength';
/**
 * Quantity of the substance or specified substance present in the manufactured item or pharmaceutical product.
 */
export class MedicinalProductIngredientSpecifiedSubstanceStrength extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductIngredientSpecifiedSubstanceStrength - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['presentation']) {
            this.presentation = new fhir.Ratio(source.presentation, options);
        }
        else {
            this.presentation = null;
        }
        if (source['presentationLowLimit']) {
            this.presentationLowLimit = new fhir.Ratio(source.presentationLowLimit, options);
        }
        if (source['concentration']) {
            this.concentration = new fhir.Ratio(source.concentration, options);
        }
        if (source['concentrationLowLimit']) {
            this.concentrationLowLimit = new fhir.Ratio(source.concentrationLowLimit, options);
        }
        if (source['measurementPoint'] !== undefined) {
            this.measurementPoint = new fhir.FhirString({ value: source.measurementPoint }, options);
        }
        if (source['_measurementPoint']) {
            if (this.measurementPoint) {
                this.measurementPoint.addExtendedProperties(source._measurementPoint);
            }
            else {
                this.measurementPoint = new fhir.FhirString(source._measurementPoint, options);
            }
        }
        if (source['country']) {
            this.country = source.country.map((x) => new fhir.CodeableConcept(x, options));
        }
        else {
            this.country = [];
        }
        if (source['referenceStrength']) {
            this.referenceStrength = source.referenceStrength.map((x) => new fhir.MedicinalProductIngredientSpecifiedSubstanceStrengthReferenceStrength(x, options));
        }
        else {
            this.referenceStrength = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicinalProductIngredient.specifiedSubstance.strength';
        }
        iss.push(...this.vRS('presentation', exp));
        iss.push(...this.vOS('presentationLowLimit', exp));
        iss.push(...this.vOS('concentration', exp));
        iss.push(...this.vOS('concentrationLowLimit', exp));
        iss.push(...this.vOS('measurementPoint', exp));
        iss.push(...this.vOA('country', exp));
        iss.push(...this.vOA('referenceStrength', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductIngredientSpecifiedSubstanceStrength._fts_dataType = 'MedicinalProductIngredientSpecifiedSubstanceStrength';
/**
 * A specified substance that comprises this ingredient.
 */
export class MedicinalProductIngredientSpecifiedSubstance extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductIngredientSpecifiedSubstance - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code, options);
        }
        else {
            this.code = null;
        }
        if (source['group']) {
            this.group = new fhir.CodeableConcept(source.group, options);
        }
        else {
            this.group = null;
        }
        if (source['confidentiality']) {
            this.confidentiality = new fhir.CodeableConcept(source.confidentiality, options);
        }
        if (source['strength']) {
            this.strength = source.strength.map((x) => new fhir.MedicinalProductIngredientSpecifiedSubstanceStrength(x, options));
        }
        else {
            this.strength = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicinalProductIngredient.specifiedSubstance';
        }
        iss.push(...this.vRS('code', exp));
        iss.push(...this.vRS('group', exp));
        iss.push(...this.vOS('confidentiality', exp));
        iss.push(...this.vOA('strength', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductIngredientSpecifiedSubstance._fts_dataType = 'MedicinalProductIngredientSpecifiedSubstance';
/**
 * The ingredient substance.
 */
export class MedicinalProductIngredientSubstance extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductIngredientSubstance - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code, options);
        }
        else {
            this.code = null;
        }
        if (source['strength']) {
            this.strength = source.strength.map((x) => new fhir.MedicinalProductIngredientSpecifiedSubstanceStrength(x, options));
        }
        else {
            this.strength = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicinalProductIngredient.substance';
        }
        iss.push(...this.vRS('code', exp));
        iss.push(...this.vOA('strength', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductIngredientSubstance._fts_dataType = 'MedicinalProductIngredientSubstance';
/**
 * An ingredient of a manufactured item or pharmaceutical product.
 */
export class MedicinalProductIngredient extends fhir.DomainResource {
    /**
     * Default constructor for MedicinalProductIngredient - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'MedicinalProductIngredient';
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier, options);
        }
        if (source['role']) {
            this.role = new fhir.CodeableConcept(source.role, options);
        }
        else {
            this.role = null;
        }
        if (source['allergenicIndicator'] !== undefined) {
            this.allergenicIndicator = new fhir.FhirBoolean({ value: source.allergenicIndicator }, options);
        }
        if (source['_allergenicIndicator']) {
            if (this.allergenicIndicator) {
                this.allergenicIndicator.addExtendedProperties(source._allergenicIndicator);
            }
            else {
                this.allergenicIndicator = new fhir.FhirBoolean(source._allergenicIndicator, options);
            }
        }
        if (source['manufacturer']) {
            this.manufacturer = source.manufacturer.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.manufacturer = [];
        }
        if (source['specifiedSubstance']) {
            this.specifiedSubstance = source.specifiedSubstance.map((x) => new fhir.MedicinalProductIngredientSpecifiedSubstance(x, options));
        }
        else {
            this.specifiedSubstance = [];
        }
        if (source['substance']) {
            this.substance = new fhir.MedicinalProductIngredientSubstance(source.substance, options);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicinalProductIngredient';
        }
        iss.push(...this.vOS('identifier', exp));
        iss.push(...this.vRS('role', exp));
        iss.push(...this.vOS('allergenicIndicator', exp));
        iss.push(...this.vOA('manufacturer', exp));
        iss.push(...this.vOA('specifiedSubstance', exp));
        iss.push(...this.vOS('substance', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductIngredient._fts_dataType = 'MedicinalProductIngredient';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnQuanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL01lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQiwrQ0FBK0M7QUFDL0Msa0NBQWtDO0FBQ2xDLDRDQUE0QztBQUU1QyxPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQWdDbkM7O0dBRUc7QUFDSCxNQUFNLE9BQU8scUVBQXNFLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUF5QjdHOztPQUVHO0lBQ0gsWUFBWSxTQUE0RixFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUNsSixLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUMsQ0FBQztTQUFFO1FBQ2xHLElBQUksTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQztTQUFFO2FBQ2hGO1lBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7U0FBRTtRQUM5QixJQUFJLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsZ0JBQWdCLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FBRTtRQUM3RyxJQUFJLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLFNBQVMsRUFBRTtZQUFFLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLElBQUksQ0FBQyxV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LENBQUM7SUFDYixDQUFDOztBQWpFRDs7R0FFRztBQUM2Qix3Q0FBYSxHQUFVLDRCQUE0QixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0LmNvcmUgdmVyc2lvbjogNC4wLjFcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFNwZWNpZmllZFN1YnN0YW5jZVN0cmVuZ3RoUmVmZXJlbmNlU3RyZW5ndGggdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2VTdHJlbmd0aFJlZmVyZW5jZVN0cmVuZ3RoQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVsZXZhbnQgcmVmZXJlbmNlIHN1YnN0YW5jZS5cclxuICAgKi9cclxuICBzdWJzdGFuY2U/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFN0cmVuZ3RoIGV4cHJlc3NlZCBpbiB0ZXJtcyBvZiBhIHJlZmVyZW5jZSBzdWJzdGFuY2UuXHJcbiAgICovXHJcbiAgc3RyZW5ndGg6IGZoaXIuUmF0aW9BcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogU3RyZW5ndGggZXhwcmVzc2VkIGluIHRlcm1zIG9mIGEgcmVmZXJlbmNlIHN1YnN0YW5jZS5cclxuICAgKi9cclxuICBzdHJlbmd0aExvd0xpbWl0PzogZmhpci5SYXRpb0FyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEZvciB3aGVuIHN0cmVuZ3RoIGlzIG1lYXN1cmVkIGF0IGEgcGFydGljdWxhciBwb2ludCBvciBkaXN0YW5jZS5cclxuICAgKi9cclxuICBtZWFzdXJlbWVudFBvaW50PzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50LnNwZWNpZmllZFN1YnN0YW5jZS5zdHJlbmd0aC5yZWZlcmVuY2VTdHJlbmd0aC5tZWFzdXJlbWVudFBvaW50XHJcbiAgICovXHJcbiAgX21lYXN1cmVtZW50UG9pbnQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjb3VudHJ5IG9yIGNvdW50cmllcyBmb3Igd2hpY2ggdGhlIHN0cmVuZ3RoIHJhbmdlIGFwcGxpZXMuXHJcbiAgICovXHJcbiAgY291bnRyeT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFN0cmVuZ3RoIGV4cHJlc3NlZCBpbiB0ZXJtcyBvZiBhIHJlZmVyZW5jZSBzdWJzdGFuY2UuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2VTdHJlbmd0aFJlZmVyZW5jZVN0cmVuZ3RoIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2VTdHJlbmd0aFJlZmVyZW5jZVN0cmVuZ3RoJztcclxuICAvKipcclxuICAgKiBSZWxldmFudCByZWZlcmVuY2Ugc3Vic3RhbmNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdWJzdGFuY2U/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU3RyZW5ndGggZXhwcmVzc2VkIGluIHRlcm1zIG9mIGEgcmVmZXJlbmNlIHN1YnN0YW5jZS5cclxuICAgKi9cclxuICBwdWJsaWMgc3RyZW5ndGg6IGZoaXIuUmF0aW98bnVsbDtcclxuICAvKipcclxuICAgKiBTdHJlbmd0aCBleHByZXNzZWQgaW4gdGVybXMgb2YgYSByZWZlcmVuY2Ugc3Vic3RhbmNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdHJlbmd0aExvd0xpbWl0PzogZmhpci5SYXRpb3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRm9yIHdoZW4gc3RyZW5ndGggaXMgbWVhc3VyZWQgYXQgYSBwYXJ0aWN1bGFyIHBvaW50IG9yIGRpc3RhbmNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtZWFzdXJlbWVudFBvaW50PzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgY291bnRyeSBvciBjb3VudHJpZXMgZm9yIHdoaWNoIHRoZSBzdHJlbmd0aCByYW5nZSBhcHBsaWVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb3VudHJ5OiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlU3RyZW5ndGhSZWZlcmVuY2VTdHJlbmd0aCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlU3RyZW5ndGhSZWZlcmVuY2VTdHJlbmd0aEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydzdWJzdGFuY2UnXSkgeyB0aGlzLnN1YnN0YW5jZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2Uuc3Vic3RhbmNlLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RyZW5ndGgnXSkgeyB0aGlzLnN0cmVuZ3RoID0gbmV3IGZoaXIuUmF0aW8oc291cmNlLnN0cmVuZ3RoLCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3RyZW5ndGggPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydzdHJlbmd0aExvd0xpbWl0J10pIHsgdGhpcy5zdHJlbmd0aExvd0xpbWl0ID0gbmV3IGZoaXIuUmF0aW8oc291cmNlLnN0cmVuZ3RoTG93TGltaXQsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydtZWFzdXJlbWVudFBvaW50J10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLm1lYXN1cmVtZW50UG9pbnQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLm1lYXN1cmVtZW50UG9pbnR9LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX21lYXN1cmVtZW50UG9pbnQnXSkge1xyXG4gICAgICBpZiAodGhpcy5tZWFzdXJlbWVudFBvaW50KSB7IHRoaXMubWVhc3VyZW1lbnRQb2ludC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9tZWFzdXJlbWVudFBvaW50ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubWVhc3VyZW1lbnRQb2ludCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9tZWFzdXJlbWVudFBvaW50IGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydjb3VudHJ5J10pIHsgdGhpcy5jb3VudHJ5ID0gc291cmNlLmNvdW50cnkubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb3VudHJ5ID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudC5zcGVjaWZpZWRTdWJzdGFuY2Uuc3RyZW5ndGgucmVmZXJlbmNlU3RyZW5ndGgnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdzdWJzdGFuY2UnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ3N0cmVuZ3RoJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdzdHJlbmd0aExvd0xpbWl0JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdtZWFzdXJlbWVudFBvaW50JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdjb3VudHJ5JyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFNwZWNpZmllZFN1YnN0YW5jZVN0cmVuZ3RoIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlU3RyZW5ndGhBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgcXVhbnRpdHkgb2Ygc3Vic3RhbmNlIGluIHRoZSB1bml0IG9mIHByZXNlbnRhdGlvbiwgb3IgaW4gdGhlIHZvbHVtZSAob3IgbWFzcykgb2YgdGhlIHNpbmdsZSBwaGFybWFjZXV0aWNhbCBwcm9kdWN0IG9yIG1hbnVmYWN0dXJlZCBpdGVtLlxyXG4gICAqL1xyXG4gIHByZXNlbnRhdGlvbjogZmhpci5SYXRpb0FyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBBIGxvd2VyIGxpbWl0IGZvciB0aGUgcXVhbnRpdHkgb2Ygc3Vic3RhbmNlIGluIHRoZSB1bml0IG9mIHByZXNlbnRhdGlvbi4gRm9yIHVzZSB3aGVuIHRoZXJlIGlzIGEgcmFuZ2Ugb2Ygc3RyZW5ndGhzLCB0aGlzIGlzIHRoZSBsb3dlciBsaW1pdCwgd2l0aCB0aGUgcHJlc2VudGF0aW9uIGF0dHJpYnV0ZSBiZWNvbWluZyB0aGUgdXBwZXIgbGltaXQuXHJcbiAgICovXHJcbiAgcHJlc2VudGF0aW9uTG93TGltaXQ/OiBmaGlyLlJhdGlvQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHN0cmVuZ3RoIHBlciB1bml0YXJ5IHZvbHVtZSAob3IgbWFzcykuXHJcbiAgICovXHJcbiAgY29uY2VudHJhdGlvbj86IGZoaXIuUmF0aW9BcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGxvd2VyIGxpbWl0IGZvciB0aGUgc3RyZW5ndGggcGVyIHVuaXRhcnkgdm9sdW1lIChvciBtYXNzKSwgZm9yIHdoZW4gdGhlcmUgaXMgYSByYW5nZS4gVGhlIGNvbmNlbnRyYXRpb24gYXR0cmlidXRlIHRoZW4gYmVjb21lcyB0aGUgdXBwZXIgbGltaXQuXHJcbiAgICovXHJcbiAgY29uY2VudHJhdGlvbkxvd0xpbWl0PzogZmhpci5SYXRpb0FyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEZvciB3aGVuIHN0cmVuZ3RoIGlzIG1lYXN1cmVkIGF0IGEgcGFydGljdWxhciBwb2ludCBvciBkaXN0YW5jZS5cclxuICAgKi9cclxuICBtZWFzdXJlbWVudFBvaW50PzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50LnNwZWNpZmllZFN1YnN0YW5jZS5zdHJlbmd0aC5tZWFzdXJlbWVudFBvaW50XHJcbiAgICovXHJcbiAgX21lYXN1cmVtZW50UG9pbnQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjb3VudHJ5IG9yIGNvdW50cmllcyBmb3Igd2hpY2ggdGhlIHN0cmVuZ3RoIHJhbmdlIGFwcGxpZXMuXHJcbiAgICovXHJcbiAgY291bnRyeT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTdHJlbmd0aCBleHByZXNzZWQgaW4gdGVybXMgb2YgYSByZWZlcmVuY2Ugc3Vic3RhbmNlLlxyXG4gICAqL1xyXG4gIHJlZmVyZW5jZVN0cmVuZ3RoPzogZmhpci5NZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFNwZWNpZmllZFN1YnN0YW5jZVN0cmVuZ3RoUmVmZXJlbmNlU3RyZW5ndGhBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogUXVhbnRpdHkgb2YgdGhlIHN1YnN0YW5jZSBvciBzcGVjaWZpZWQgc3Vic3RhbmNlIHByZXNlbnQgaW4gdGhlIG1hbnVmYWN0dXJlZCBpdGVtIG9yIHBoYXJtYWNldXRpY2FsIHByb2R1Y3QuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2VTdHJlbmd0aCBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ01lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlU3RyZW5ndGgnO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBxdWFudGl0eSBvZiBzdWJzdGFuY2UgaW4gdGhlIHVuaXQgb2YgcHJlc2VudGF0aW9uLCBvciBpbiB0aGUgdm9sdW1lIChvciBtYXNzKSBvZiB0aGUgc2luZ2xlIHBoYXJtYWNldXRpY2FsIHByb2R1Y3Qgb3IgbWFudWZhY3R1cmVkIGl0ZW0uXHJcbiAgICovXHJcbiAgcHVibGljIHByZXNlbnRhdGlvbjogZmhpci5SYXRpb3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIEEgbG93ZXIgbGltaXQgZm9yIHRoZSBxdWFudGl0eSBvZiBzdWJzdGFuY2UgaW4gdGhlIHVuaXQgb2YgcHJlc2VudGF0aW9uLiBGb3IgdXNlIHdoZW4gdGhlcmUgaXMgYSByYW5nZSBvZiBzdHJlbmd0aHMsIHRoaXMgaXMgdGhlIGxvd2VyIGxpbWl0LCB3aXRoIHRoZSBwcmVzZW50YXRpb24gYXR0cmlidXRlIGJlY29taW5nIHRoZSB1cHBlciBsaW1pdC5cclxuICAgKi9cclxuICBwdWJsaWMgcHJlc2VudGF0aW9uTG93TGltaXQ/OiBmaGlyLlJhdGlvfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc3RyZW5ndGggcGVyIHVuaXRhcnkgdm9sdW1lIChvciBtYXNzKS5cclxuICAgKi9cclxuICBwdWJsaWMgY29uY2VudHJhdGlvbj86IGZoaXIuUmF0aW98dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgbG93ZXIgbGltaXQgZm9yIHRoZSBzdHJlbmd0aCBwZXIgdW5pdGFyeSB2b2x1bWUgKG9yIG1hc3MpLCBmb3Igd2hlbiB0aGVyZSBpcyBhIHJhbmdlLiBUaGUgY29uY2VudHJhdGlvbiBhdHRyaWJ1dGUgdGhlbiBiZWNvbWVzIHRoZSB1cHBlciBsaW1pdC5cclxuICAgKi9cclxuICBwdWJsaWMgY29uY2VudHJhdGlvbkxvd0xpbWl0PzogZmhpci5SYXRpb3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRm9yIHdoZW4gc3RyZW5ndGggaXMgbWVhc3VyZWQgYXQgYSBwYXJ0aWN1bGFyIHBvaW50IG9yIGRpc3RhbmNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtZWFzdXJlbWVudFBvaW50PzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgY291bnRyeSBvciBjb3VudHJpZXMgZm9yIHdoaWNoIHRoZSBzdHJlbmd0aCByYW5nZSBhcHBsaWVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb3VudHJ5OiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIFN0cmVuZ3RoIGV4cHJlc3NlZCBpbiB0ZXJtcyBvZiBhIHJlZmVyZW5jZSBzdWJzdGFuY2UuXHJcbiAgICovXHJcbiAgcHVibGljIHJlZmVyZW5jZVN0cmVuZ3RoOiBmaGlyLk1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlU3RyZW5ndGhSZWZlcmVuY2VTdHJlbmd0aFtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlU3RyZW5ndGggLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFNwZWNpZmllZFN1YnN0YW5jZVN0cmVuZ3RoQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3ByZXNlbnRhdGlvbiddKSB7IHRoaXMucHJlc2VudGF0aW9uID0gbmV3IGZoaXIuUmF0aW8oc291cmNlLnByZXNlbnRhdGlvbiwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnByZXNlbnRhdGlvbiA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3ByZXNlbnRhdGlvbkxvd0xpbWl0J10pIHsgdGhpcy5wcmVzZW50YXRpb25Mb3dMaW1pdCA9IG5ldyBmaGlyLlJhdGlvKHNvdXJjZS5wcmVzZW50YXRpb25Mb3dMaW1pdCwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvbmNlbnRyYXRpb24nXSkgeyB0aGlzLmNvbmNlbnRyYXRpb24gPSBuZXcgZmhpci5SYXRpbyhzb3VyY2UuY29uY2VudHJhdGlvbiwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvbmNlbnRyYXRpb25Mb3dMaW1pdCddKSB7IHRoaXMuY29uY2VudHJhdGlvbkxvd0xpbWl0ID0gbmV3IGZoaXIuUmF0aW8oc291cmNlLmNvbmNlbnRyYXRpb25Mb3dMaW1pdCwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ21lYXN1cmVtZW50UG9pbnQnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMubWVhc3VyZW1lbnRQb2ludCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UubWVhc3VyZW1lbnRQb2ludH0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfbWVhc3VyZW1lbnRQb2ludCddKSB7XHJcbiAgICAgIGlmICh0aGlzLm1lYXN1cmVtZW50UG9pbnQpIHsgdGhpcy5tZWFzdXJlbWVudFBvaW50LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX21lYXN1cmVtZW50UG9pbnQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5tZWFzdXJlbWVudFBvaW50ID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX21lYXN1cmVtZW50UG9pbnQgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2NvdW50cnknXSkgeyB0aGlzLmNvdW50cnkgPSBzb3VyY2UuY291bnRyeS5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvdW50cnkgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVmZXJlbmNlU3RyZW5ndGgnXSkgeyB0aGlzLnJlZmVyZW5jZVN0cmVuZ3RoID0gc291cmNlLnJlZmVyZW5jZVN0cmVuZ3RoLm1hcCgoeCkgPT4gbmV3IGZoaXIuTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2VTdHJlbmd0aFJlZmVyZW5jZVN0cmVuZ3RoKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVmZXJlbmNlU3RyZW5ndGggPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ01lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50LnNwZWNpZmllZFN1YnN0YW5jZS5zdHJlbmd0aCcgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ3ByZXNlbnRhdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygncHJlc2VudGF0aW9uTG93TGltaXQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2NvbmNlbnRyYXRpb24nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2NvbmNlbnRyYXRpb25Mb3dMaW1pdCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnbWVhc3VyZW1lbnRQb2ludCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnY291bnRyeScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgncmVmZXJlbmNlU3RyZW5ndGgnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNwZWNpZmllZCBzdWJzdGFuY2UuXHJcbiAgICovXHJcbiAgY29kZTogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGdyb3VwIG9mIHNwZWNpZmllZCBzdWJzdGFuY2UsIGUuZy4gZ3JvdXAgMSB0byA0LlxyXG4gICAqL1xyXG4gIGdyb3VwOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBDb25maWRlbnRpYWxpdHkgbGV2ZWwgb2YgdGhlIHNwZWNpZmllZCBzdWJzdGFuY2UgYXMgdGhlIGluZ3JlZGllbnQuXHJcbiAgICovXHJcbiAgY29uZmlkZW50aWFsaXR5PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBRdWFudGl0eSBvZiB0aGUgc3Vic3RhbmNlIG9yIHNwZWNpZmllZCBzdWJzdGFuY2UgcHJlc2VudCBpbiB0aGUgbWFudWZhY3R1cmVkIGl0ZW0gb3IgcGhhcm1hY2V1dGljYWwgcHJvZHVjdC5cclxuICAgKi9cclxuICBzdHJlbmd0aD86IGZoaXIuTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2VTdHJlbmd0aEFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBIHNwZWNpZmllZCBzdWJzdGFuY2UgdGhhdCBjb21wcmlzZXMgdGhpcyBpbmdyZWRpZW50LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2UnO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzcGVjaWZpZWQgc3Vic3RhbmNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb2RlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBncm91cCBvZiBzcGVjaWZpZWQgc3Vic3RhbmNlLCBlLmcuIGdyb3VwIDEgdG8gNC5cclxuICAgKi9cclxuICBwdWJsaWMgZ3JvdXA6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogQ29uZmlkZW50aWFsaXR5IGxldmVsIG9mIHRoZSBzcGVjaWZpZWQgc3Vic3RhbmNlIGFzIHRoZSBpbmdyZWRpZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25maWRlbnRpYWxpdHk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUXVhbnRpdHkgb2YgdGhlIHN1YnN0YW5jZSBvciBzcGVjaWZpZWQgc3Vic3RhbmNlIHByZXNlbnQgaW4gdGhlIG1hbnVmYWN0dXJlZCBpdGVtIG9yIHBoYXJtYWNldXRpY2FsIHByb2R1Y3QuXHJcbiAgICovXHJcbiAgcHVibGljIHN0cmVuZ3RoOiBmaGlyLk1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlU3RyZW5ndGhbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFNwZWNpZmllZFN1YnN0YW5jZSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2NvZGUnXSkgeyB0aGlzLmNvZGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmNvZGUsIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb2RlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZ3JvdXAnXSkgeyB0aGlzLmdyb3VwID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5ncm91cCwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmdyb3VwID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29uZmlkZW50aWFsaXR5J10pIHsgdGhpcy5jb25maWRlbnRpYWxpdHkgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmNvbmZpZGVudGlhbGl0eSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0cmVuZ3RoJ10pIHsgdGhpcy5zdHJlbmd0aCA9IHNvdXJjZS5zdHJlbmd0aC5tYXAoKHgpID0+IG5ldyBmaGlyLk1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlU3RyZW5ndGgoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdHJlbmd0aCA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnQuc3BlY2lmaWVkU3Vic3RhbmNlJyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygnY29kZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygnZ3JvdXAnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2NvbmZpZGVudGlhbGl0eScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnc3RyZW5ndGgnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3Vic3RhbmNlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3Vic3RhbmNlQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIGluZ3JlZGllbnQgc3Vic3RhbmNlLlxyXG4gICAqL1xyXG4gIGNvZGU6IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFF1YW50aXR5IG9mIHRoZSBzdWJzdGFuY2Ugb3Igc3BlY2lmaWVkIHN1YnN0YW5jZSBwcmVzZW50IGluIHRoZSBtYW51ZmFjdHVyZWQgaXRlbSBvciBwaGFybWFjZXV0aWNhbCBwcm9kdWN0LlxyXG4gICAqL1xyXG4gIHN0cmVuZ3RoPzogZmhpci5NZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFNwZWNpZmllZFN1YnN0YW5jZVN0cmVuZ3RoQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBpbmdyZWRpZW50IHN1YnN0YW5jZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFN1YnN0YW5jZSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ01lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3Vic3RhbmNlJztcclxuICAvKipcclxuICAgKiBUaGUgaW5ncmVkaWVudCBzdWJzdGFuY2UuXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGU6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogUXVhbnRpdHkgb2YgdGhlIHN1YnN0YW5jZSBvciBzcGVjaWZpZWQgc3Vic3RhbmNlIHByZXNlbnQgaW4gdGhlIG1hbnVmYWN0dXJlZCBpdGVtIG9yIHBoYXJtYWNldXRpY2FsIHByb2R1Y3QuXHJcbiAgICovXHJcbiAgcHVibGljIHN0cmVuZ3RoOiBmaGlyLk1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlU3RyZW5ndGhbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFN1YnN0YW5jZSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3Vic3RhbmNlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2NvZGUnXSkgeyB0aGlzLmNvZGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmNvZGUsIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb2RlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RyZW5ndGgnXSkgeyB0aGlzLnN0cmVuZ3RoID0gc291cmNlLnN0cmVuZ3RoLm1hcCgoeCkgPT4gbmV3IGZoaXIuTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2VTdHJlbmd0aCh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0cmVuZ3RoID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudC5zdWJzdGFuY2UnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdjb2RlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdzdHJlbmd0aCcsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRBcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgaWRlbnRpZmllcihzKSBvZiB0aGlzIEluZ3JlZGllbnQgdGhhdCBhcmUgYXNzaWduZWQgYnkgYnVzaW5lc3MgcHJvY2Vzc2VzIGFuZC9vciB1c2VkIHRvIHJlZmVyIHRvIGl0IHdoZW4gYSBkaXJlY3QgVVJMIHJlZmVyZW5jZSB0byB0aGUgcmVzb3VyY2UgaXRzZWxmIGlzIG5vdCBhcHByb3ByaWF0ZS5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5ncmVkaWVudCByb2xlIGUuZy4gQWN0aXZlIGluZ3JlZGllbnQsIGV4Y2lwaWVudC5cclxuICAgKi9cclxuICByb2xlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBJZiB0aGUgaW5ncmVkaWVudCBpcyBhIGtub3duIG9yIHN1c3BlY3RlZCBhbGxlcmdlbi5cclxuICAgKi9cclxuICBhbGxlcmdlbmljSW5kaWNhdG9yPzogZmhpci5GaGlyQm9vbGVhbnxib29sZWFufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnQuYWxsZXJnZW5pY0luZGljYXRvclxyXG4gICAqL1xyXG4gIF9hbGxlcmdlbmljSW5kaWNhdG9yPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBNYW51ZmFjdHVyZXIgb2YgdGhpcyBJbmdyZWRpZW50LlxyXG4gICAqL1xyXG4gIG1hbnVmYWN0dXJlcj86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHNwZWNpZmllZCBzdWJzdGFuY2UgdGhhdCBjb21wcmlzZXMgdGhpcyBpbmdyZWRpZW50LlxyXG4gICAqL1xyXG4gIHNwZWNpZmllZFN1YnN0YW5jZT86IGZoaXIuTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpbmdyZWRpZW50IHN1YnN0YW5jZS5cclxuICAgKi9cclxuICBzdWJzdGFuY2U/OiBmaGlyLk1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3Vic3RhbmNlQXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBbiBpbmdyZWRpZW50IG9mIGEgbWFudWZhY3R1cmVkIGl0ZW0gb3IgcGhhcm1hY2V1dGljYWwgcHJvZHVjdC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudCBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnQnO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNvdXJjZVR5cGU6IFwiTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRcIjtcclxuICAvKipcclxuICAgKiBUaGUgaWRlbnRpZmllcihzKSBvZiB0aGlzIEluZ3JlZGllbnQgdGhhdCBhcmUgYXNzaWduZWQgYnkgYnVzaW5lc3MgcHJvY2Vzc2VzIGFuZC9vciB1c2VkIHRvIHJlZmVyIHRvIGl0IHdoZW4gYSBkaXJlY3QgVVJMIHJlZmVyZW5jZSB0byB0aGUgcmVzb3VyY2UgaXRzZWxmIGlzIG5vdCBhcHByb3ByaWF0ZS5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5ncmVkaWVudCByb2xlIGUuZy4gQWN0aXZlIGluZ3JlZGllbnQsIGV4Y2lwaWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgcm9sZTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBJZiB0aGUgaW5ncmVkaWVudCBpcyBhIGtub3duIG9yIHN1c3BlY3RlZCBhbGxlcmdlbi5cclxuICAgKi9cclxuICBwdWJsaWMgYWxsZXJnZW5pY0luZGljYXRvcj86IGZoaXIuRmhpckJvb2xlYW58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE1hbnVmYWN0dXJlciBvZiB0aGlzIEluZ3JlZGllbnQuXHJcbiAgICovXHJcbiAgcHVibGljIG1hbnVmYWN0dXJlcjogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBBIHNwZWNpZmllZCBzdWJzdGFuY2UgdGhhdCBjb21wcmlzZXMgdGhpcyBpbmdyZWRpZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzcGVjaWZpZWRTdWJzdGFuY2U6IGZoaXIuTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2VbXTtcclxuICAvKipcclxuICAgKiBUaGUgaW5ncmVkaWVudCBzdWJzdGFuY2UuXHJcbiAgICovXHJcbiAgcHVibGljIHN1YnN0YW5jZT86IGZoaXIuTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTdWJzdGFuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnQnO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IG5ldyBmaGlyLklkZW50aWZpZXIoc291cmNlLmlkZW50aWZpZXIsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydyb2xlJ10pIHsgdGhpcy5yb2xlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5yb2xlLCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucm9sZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ2FsbGVyZ2VuaWNJbmRpY2F0b3InXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuYWxsZXJnZW5pY0luZGljYXRvciA9IG5ldyBmaGlyLkZoaXJCb29sZWFuKHt2YWx1ZTogc291cmNlLmFsbGVyZ2VuaWNJbmRpY2F0b3J9LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2FsbGVyZ2VuaWNJbmRpY2F0b3InXSkge1xyXG4gICAgICBpZiAodGhpcy5hbGxlcmdlbmljSW5kaWNhdG9yKSB7IHRoaXMuYWxsZXJnZW5pY0luZGljYXRvci5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9hbGxlcmdlbmljSW5kaWNhdG9yISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuYWxsZXJnZW5pY0luZGljYXRvciA9IG5ldyBmaGlyLkZoaXJCb29sZWFuKHNvdXJjZS5fYWxsZXJnZW5pY0luZGljYXRvciBhcyBQYXJ0aWFsPGZoaXIuRmhpckJvb2xlYW5BcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ21hbnVmYWN0dXJlciddKSB7IHRoaXMubWFudWZhY3R1cmVyID0gc291cmNlLm1hbnVmYWN0dXJlci5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm1hbnVmYWN0dXJlciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydzcGVjaWZpZWRTdWJzdGFuY2UnXSkgeyB0aGlzLnNwZWNpZmllZFN1YnN0YW5jZSA9IHNvdXJjZS5zcGVjaWZpZWRTdWJzdGFuY2UubWFwKCh4KSA9PiBuZXcgZmhpci5NZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFNwZWNpZmllZFN1YnN0YW5jZSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnNwZWNpZmllZFN1YnN0YW5jZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydzdWJzdGFuY2UnXSkgeyB0aGlzLnN1YnN0YW5jZSA9IG5ldyBmaGlyLk1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3Vic3RhbmNlKHNvdXJjZS5zdWJzdGFuY2UsIG9wdGlvbnMpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnQnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdpZGVudGlmaWVyJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdyb2xlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdhbGxlcmdlbmljSW5kaWNhdG9yJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdtYW51ZmFjdHVyZXInLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3NwZWNpZmllZFN1YnN0YW5jZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnc3Vic3RhbmNlJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbiJdfQ==