// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: MedicinalProductIngredient
import * as fhir from '../fhir.js';
/**
 * Strength expressed in terms of a reference substance.
 */
export class MedicinalProductIngredientSpecifiedSubstanceStrengthReferenceStrength extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductIngredientSpecifiedSubstanceStrengthReferenceStrength - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['substance']) {
            this.substance = new fhir.CodeableConcept(source.substance);
        }
        if (source['strength']) {
            this.strength = new fhir.Ratio(source.strength);
        }
        else {
            this.strength = null;
        }
        if (source['strengthLowLimit']) {
            this.strengthLowLimit = new fhir.Ratio(source.strengthLowLimit);
        }
        if (source['measurementPoint']) {
            this.measurementPoint = new fhir.FhirString({ value: source.measurementPoint });
        }
        if (source['_measurementPoint']) {
            if (this.measurementPoint) {
                this.measurementPoint.addExtendedProperties(source._measurementPoint);
            }
            else {
                this.measurementPoint = new fhir.FhirString(source._measurementPoint);
            }
        }
        if (source['country']) {
            this.country = source.country.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.country = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'MedicinalProductIngredient.specifiedSubstance.strength.referenceStrength';
        }
        this.vOptS('substance', expression);
        this.vReqS('strength', expression);
        this.vOptS('strengthLowLimit', expression);
        this.vOptS('measurementPoint', expression);
        this.vOptA('country', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductIngredientSpecifiedSubstanceStrengthReferenceStrength._fts_dataType = 'MedicinalProductIngredientSpecifiedSubstanceStrengthReferenceStrength';
/**
 * Quantity of the substance or specified substance present in the manufactured item or pharmaceutical product.
 */
export class MedicinalProductIngredientSpecifiedSubstanceStrength extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductIngredientSpecifiedSubstanceStrength - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['presentation']) {
            this.presentation = new fhir.Ratio(source.presentation);
        }
        else {
            this.presentation = null;
        }
        if (source['presentationLowLimit']) {
            this.presentationLowLimit = new fhir.Ratio(source.presentationLowLimit);
        }
        if (source['concentration']) {
            this.concentration = new fhir.Ratio(source.concentration);
        }
        if (source['concentrationLowLimit']) {
            this.concentrationLowLimit = new fhir.Ratio(source.concentrationLowLimit);
        }
        if (source['measurementPoint']) {
            this.measurementPoint = new fhir.FhirString({ value: source.measurementPoint });
        }
        if (source['_measurementPoint']) {
            if (this.measurementPoint) {
                this.measurementPoint.addExtendedProperties(source._measurementPoint);
            }
            else {
                this.measurementPoint = new fhir.FhirString(source._measurementPoint);
            }
        }
        if (source['country']) {
            this.country = source.country.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.country = [];
        }
        if (source['referenceStrength']) {
            this.referenceStrength = source.referenceStrength.map((x) => new fhir.MedicinalProductIngredientSpecifiedSubstanceStrengthReferenceStrength(x));
        }
        else {
            this.referenceStrength = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'MedicinalProductIngredient.specifiedSubstance.strength';
        }
        this.vReqS('presentation', expression);
        this.vOptS('presentationLowLimit', expression);
        this.vOptS('concentration', expression);
        this.vOptS('concentrationLowLimit', expression);
        this.vOptS('measurementPoint', expression);
        this.vOptA('country', expression);
        this.vOptA('referenceStrength', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductIngredientSpecifiedSubstanceStrength._fts_dataType = 'MedicinalProductIngredientSpecifiedSubstanceStrength';
/**
 * A specified substance that comprises this ingredient.
 */
export class MedicinalProductIngredientSpecifiedSubstance extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductIngredientSpecifiedSubstance - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        else {
            this.code = null;
        }
        if (source['group']) {
            this.group = new fhir.CodeableConcept(source.group);
        }
        else {
            this.group = null;
        }
        if (source['confidentiality']) {
            this.confidentiality = new fhir.CodeableConcept(source.confidentiality);
        }
        if (source['strength']) {
            this.strength = source.strength.map((x) => new fhir.MedicinalProductIngredientSpecifiedSubstanceStrength(x));
        }
        else {
            this.strength = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'MedicinalProductIngredient.specifiedSubstance';
        }
        this.vReqS('code', expression);
        this.vReqS('group', expression);
        this.vOptS('confidentiality', expression);
        this.vOptA('strength', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductIngredientSpecifiedSubstance._fts_dataType = 'MedicinalProductIngredientSpecifiedSubstance';
/**
 * The ingredient substance.
 */
export class MedicinalProductIngredientSubstance extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductIngredientSubstance - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        else {
            this.code = null;
        }
        if (source['strength']) {
            this.strength = source.strength.map((x) => new fhir.MedicinalProductIngredientSpecifiedSubstanceStrength(x));
        }
        else {
            this.strength = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'MedicinalProductIngredient.substance';
        }
        this.vReqS('code', expression);
        this.vOptA('strength', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductIngredientSubstance._fts_dataType = 'MedicinalProductIngredientSubstance';
/**
 * An ingredient of a manufactured item or pharmaceutical product.
 */
export class MedicinalProductIngredient extends fhir.DomainResource {
    /**
     * Default constructor for MedicinalProductIngredient - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'MedicinalProductIngredient';
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier);
        }
        if (source['role']) {
            this.role = new fhir.CodeableConcept(source.role);
        }
        else {
            this.role = null;
        }
        if (source['allergenicIndicator']) {
            this.allergenicIndicator = new fhir.FhirBoolean({ value: source.allergenicIndicator });
        }
        if (source['_allergenicIndicator']) {
            if (this.allergenicIndicator) {
                this.allergenicIndicator.addExtendedProperties(source._allergenicIndicator);
            }
            else {
                this.allergenicIndicator = new fhir.FhirBoolean(source._allergenicIndicator);
            }
        }
        if (source['manufacturer']) {
            this.manufacturer = source.manufacturer.map((x) => new fhir.Reference(x));
        }
        else {
            this.manufacturer = [];
        }
        if (source['specifiedSubstance']) {
            this.specifiedSubstance = source.specifiedSubstance.map((x) => new fhir.MedicinalProductIngredientSpecifiedSubstance(x));
        }
        else {
            this.specifiedSubstance = [];
        }
        if (source['substance']) {
            this.substance = new fhir.MedicinalProductIngredientSubstance(source.substance);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'MedicinalProductIngredient';
        }
        this.vReqS('resourceType', expression);
        this.vOptS('identifier', expression);
        this.vReqS('role', expression);
        this.vOptS('allergenicIndicator', expression);
        this.vOptA('manufacturer', expression);
        this.vOptA('specifiedSubstance', expression);
        this.vOptS('substance', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductIngredient._fts_dataType = 'MedicinalProductIngredient';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnQuanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL01lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQiwrQ0FBK0M7QUFDL0Msa0NBQWtDO0FBQ2xDLDRDQUE0QztBQUU1QyxPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQWdDbkM7O0dBRUc7QUFDSCxNQUFNLE9BQU8scUVBQXNFLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUF5QjdHOztPQUVHO0lBQ0gsWUFBWSxTQUE0RixFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUNsSixLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1NBQUU7UUFDekYsSUFBSSxNQUFNLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7U0FBRTthQUN2RTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDOUIsSUFBSSxNQUFNLENBQUMsa0JBQWtCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLENBQUM7U0FBRTtRQUNwRyxJQUFJLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsZ0JBQWdCLEVBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDbEgsSUFBSSxNQUFNLENBQUMsbUJBQW1CLENBQUMsRUFBRTtZQUMvQixJQUFJLElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtnQkFBRSxJQUFJLENBQUMsZ0JBQWdCLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLGlCQUFrQixDQUFDLENBQUM7YUFBRTtpQkFDakc7Z0JBQUUsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsaUJBQWlELENBQUMsQ0FBQzthQUFFO1NBQ2hIO1FBQ0QsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQzVGO1lBQUUsSUFBSSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7U0FBRTtJQUM3QixDQUFDO0lBQ0Q7O09BRUc7SUFDYSxpQkFBaUIsQ0FBQyxhQUFvQixFQUFFO1FBQ3RELElBQUksTUFBTSxHQUFtQixLQUFLLENBQUMsaUJBQWlCLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDakUsSUFBSSxVQUFVLEtBQUssRUFBRSxFQUFFO1lBQUUsVUFBVSxHQUFHLDBFQUEwRSxDQUFBO1NBQUU7UUFDbEgsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDbEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDakMsSUFBSSxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUN6QyxJQUFJLENBQUMsS0FBSyxDQUFDLGtCQUFrQixFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ3pDLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ2hDLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBckREOztHQUVHO0FBQzZCLG1GQUFhLEdBQVUsdUVBQXVFLENBQUM7QUEwRmpJOztHQUVHO0FBQ0gsTUFBTSxPQUFPLG9EQUFxRCxTQUFRLElBQUksQ0FBQyxlQUFlO0lBaUM1Rjs7T0FFRztJQUNILFlBQVksU0FBMkUsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDakksS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxjQUFjLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQztTQUFFO2FBQ25GO1lBQUUsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUM7U0FBRTtRQUNsQyxJQUFJLE1BQU0sQ0FBQyxzQkFBc0IsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLG9CQUFvQixHQUFHLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsb0JBQW9CLENBQUMsQ0FBQztTQUFFO1FBQ2hILElBQUksTUFBTSxDQUFDLGVBQWUsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1NBQUU7UUFDM0YsSUFBSSxNQUFNLENBQUMsdUJBQXVCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxxQkFBcUIsR0FBRyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLHFCQUFxQixDQUFDLENBQUM7U0FBRTtRQUNuSCxJQUFJLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsZ0JBQWdCLEVBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDbEgsSUFBSSxNQUFNLENBQUMsbUJBQW1CLENBQUMsRUFBRTtZQUMvQixJQUFJLElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtnQkFBRSxJQUFJLENBQUMsZ0JBQWdCLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLGlCQUFrQixDQUFDLENBQUM7YUFBRTtpQkFDakc7Z0JBQUUsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsaUJBQWlELENBQUMsQ0FBQzthQUFFO1NBQ2hIO1FBQ0QsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQzVGO1lBQUUsSUFBSSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7U0FBRTtRQUMzQixJQUFJLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLGlCQUFpQixHQUFHLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLHFFQUFxRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUNoTDtZQUFFLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxFQUFFLENBQUM7U0FBRTtJQUN2QyxDQUFDO0lBQ0Q7O09BRUc7SUFDYSxpQkFBaUIsQ0FBQyxhQUFvQixFQUFFO1FBQ3RELElBQUksTUFBTSxHQUFtQixLQUFLLENBQUMsaUJBQWlCLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDakUsSUFBSSxVQUFVLEtBQUssRUFBRSxFQUFFO1lBQUUsVUFBVSxHQUFHLHdEQUF3RCxDQUFBO1NBQUU7UUFDaEcsSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDckMsSUFBSSxDQUFDLEtBQUssQ0FBQyxzQkFBc0IsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUM3QyxJQUFJLENBQUMsS0FBSyxDQUFDLGVBQWUsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUN0QyxJQUFJLENBQUMsS0FBSyxDQUFDLHVCQUF1QixFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQzlDLElBQUksQ0FBQyxLQUFLLENBQUMsa0JBQWtCLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDekMsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDaEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxtQkFBbUIsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUMxQyxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQWxFRDs7R0FFRztBQUM2QixrRUFBYSxHQUFVLHNEQUFzRCxDQUFDO0FBdUZoSDs7R0FFRztBQUNILE1BQU0sT0FBTyw0Q0FBNkMsU0FBUSxJQUFJLENBQUMsZUFBZTtJQXFCcEY7O09BRUc7SUFDSCxZQUFZLFNBQW1FLEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQ3pILEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7U0FBRTthQUNyRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDMUIsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7U0FBRTthQUN4RTtZQUFFLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDM0IsSUFBSSxNQUFNLENBQUMsaUJBQWlCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxlQUFlLENBQUMsQ0FBQztTQUFFO1FBQzNHLElBQUksTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsb0RBQW9ELENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQ3BJO1lBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7U0FBRTtJQUM5QixDQUFDO0lBQ0Q7O09BRUc7SUFDYSxpQkFBaUIsQ0FBQyxhQUFvQixFQUFFO1FBQ3RELElBQUksTUFBTSxHQUFtQixLQUFLLENBQUMsaUJBQWlCLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDakUsSUFBSSxVQUFVLEtBQUssRUFBRSxFQUFFO1lBQUUsVUFBVSxHQUFHLCtDQUErQyxDQUFBO1NBQUU7UUFDdkYsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDN0IsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDOUIsSUFBSSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUN4QyxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUNqQyxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQTVDRDs7R0FFRztBQUM2QiwwREFBYSxHQUFVLDhDQUE4QyxDQUFDO0FBeUR4Rzs7R0FFRztBQUNILE1BQU0sT0FBTyxtQ0FBb0MsU0FBUSxJQUFJLENBQUMsZUFBZTtJQWEzRTs7T0FFRztJQUNILFlBQVksU0FBMEQsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDaEgsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUFFO2FBQ3JFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7U0FBRTtRQUMxQixJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLG9EQUFvRCxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUNwSTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO1NBQUU7SUFDOUIsQ0FBQztJQUNEOztPQUVHO0lBQ2EsaUJBQWlCLENBQUMsYUFBb0IsRUFBRTtRQUN0RCxJQUFJLE1BQU0sR0FBbUIsS0FBSyxDQUFDLGlCQUFpQixDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ2pFLElBQUksVUFBVSxLQUFLLEVBQUUsRUFBRTtZQUFFLFVBQVUsR0FBRyxzQ0FBc0MsQ0FBQTtTQUFFO1FBQzlFLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQzdCLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ2pDLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBL0JEOztHQUVHO0FBQzZCLGlEQUFhLEdBQVUscUNBQXFDLENBQUM7QUFvRS9GOztHQUVHO0FBQ0gsTUFBTSxPQUFPLDBCQUEyQixTQUFRLElBQUksQ0FBQyxjQUFjO0lBaUNqRTs7T0FFRztJQUNILFlBQVksU0FBaUQsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDdkcsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLENBQUMsWUFBWSxHQUFHLDRCQUE0QixDQUFDO1FBQ2pELElBQUksTUFBTSxDQUFDLFlBQVksQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1NBQUU7UUFDdkYsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7U0FBRTthQUNyRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDMUIsSUFBSSxNQUFNLENBQUMscUJBQXFCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLG1CQUFtQixFQUFDLENBQUMsQ0FBQztTQUFFO1FBQzVILElBQUksTUFBTSxDQUFDLHNCQUFzQixDQUFDLEVBQUU7WUFDbEMsSUFBSSxJQUFJLENBQUMsbUJBQW1CLEVBQUU7Z0JBQUUsSUFBSSxDQUFDLG1CQUFtQixDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxvQkFBcUIsQ0FBQyxDQUFDO2FBQUU7aUJBQzFHO2dCQUFFLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLG9CQUFxRCxDQUFDLENBQUM7YUFBRTtTQUN4SDtRQUNELElBQUksTUFBTSxDQUFDLGNBQWMsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFlBQVksR0FBRyxNQUFNLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUNyRztZQUFFLElBQUksQ0FBQyxZQUFZLEdBQUcsRUFBRSxDQUFDO1NBQUU7UUFDaEMsSUFBSSxNQUFNLENBQUMsb0JBQW9CLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxNQUFNLENBQUMsa0JBQWtCLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyw0Q0FBNEMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDMUo7WUFBRSxJQUFJLENBQUMsa0JBQWtCLEdBQUcsRUFBRSxDQUFDO1NBQUU7UUFDdEMsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksSUFBSSxDQUFDLG1DQUFtQyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQztTQUFFO0lBQy9HLENBQUM7SUFDRDs7T0FFRztJQUNhLGlCQUFpQixDQUFDLGFBQW9CLEVBQUU7UUFDdEQsSUFBSSxNQUFNLEdBQW1CLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNqRSxJQUFJLFVBQVUsS0FBSyxFQUFFLEVBQUU7WUFBRSxVQUFVLEdBQUcsNEJBQTRCLENBQUE7U0FBRTtRQUNwRSxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQWMsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUNyQyxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUNuQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUM3QixJQUFJLENBQUMsS0FBSyxDQUFDLHFCQUFxQixFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQzVDLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ3JDLElBQUksQ0FBQyxLQUFLLENBQUMsb0JBQW9CLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDM0MsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDbEMsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQzs7QUFsRUQ7O0dBRUc7QUFDNkIsd0NBQWEsR0FBVSw0QkFBNEIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNC5jb3JlIHZlcnNpb246IDQuMC4xXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2VTdHJlbmd0aFJlZmVyZW5jZVN0cmVuZ3RoIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlU3RyZW5ndGhSZWZlcmVuY2VTdHJlbmd0aEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlbGV2YW50IHJlZmVyZW5jZSBzdWJzdGFuY2UuXHJcbiAgICovXHJcbiAgc3Vic3RhbmNlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTdHJlbmd0aCBleHByZXNzZWQgaW4gdGVybXMgb2YgYSByZWZlcmVuY2Ugc3Vic3RhbmNlLlxyXG4gICAqL1xyXG4gIHN0cmVuZ3RoOiBmaGlyLlJhdGlvQXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFN0cmVuZ3RoIGV4cHJlc3NlZCBpbiB0ZXJtcyBvZiBhIHJlZmVyZW5jZSBzdWJzdGFuY2UuXHJcbiAgICovXHJcbiAgc3RyZW5ndGhMb3dMaW1pdD86IGZoaXIuUmF0aW9BcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBGb3Igd2hlbiBzdHJlbmd0aCBpcyBtZWFzdXJlZCBhdCBhIHBhcnRpY3VsYXIgcG9pbnQgb3IgZGlzdGFuY2UuXHJcbiAgICovXHJcbiAgbWVhc3VyZW1lbnRQb2ludD86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudC5zcGVjaWZpZWRTdWJzdGFuY2Uuc3RyZW5ndGgucmVmZXJlbmNlU3RyZW5ndGgubWVhc3VyZW1lbnRQb2ludFxyXG4gICAqL1xyXG4gIF9tZWFzdXJlbWVudFBvaW50PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgY291bnRyeSBvciBjb3VudHJpZXMgZm9yIHdoaWNoIHRoZSBzdHJlbmd0aCByYW5nZSBhcHBsaWVzLlxyXG4gICAqL1xyXG4gIGNvdW50cnk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTdHJlbmd0aCBleHByZXNzZWQgaW4gdGVybXMgb2YgYSByZWZlcmVuY2Ugc3Vic3RhbmNlLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlU3RyZW5ndGhSZWZlcmVuY2VTdHJlbmd0aCBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ01lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlU3RyZW5ndGhSZWZlcmVuY2VTdHJlbmd0aCc7XHJcbiAgLyoqXHJcbiAgICogUmVsZXZhbnQgcmVmZXJlbmNlIHN1YnN0YW5jZS5cclxuICAgKi9cclxuICBwdWJsaWMgc3Vic3RhbmNlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFN0cmVuZ3RoIGV4cHJlc3NlZCBpbiB0ZXJtcyBvZiBhIHJlZmVyZW5jZSBzdWJzdGFuY2UuXHJcbiAgICovXHJcbiAgcHVibGljIHN0cmVuZ3RoOiBmaGlyLlJhdGlvfG51bGw7XHJcbiAgLyoqXHJcbiAgICogU3RyZW5ndGggZXhwcmVzc2VkIGluIHRlcm1zIG9mIGEgcmVmZXJlbmNlIHN1YnN0YW5jZS5cclxuICAgKi9cclxuICBwdWJsaWMgc3RyZW5ndGhMb3dMaW1pdD86IGZoaXIuUmF0aW98dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEZvciB3aGVuIHN0cmVuZ3RoIGlzIG1lYXN1cmVkIGF0IGEgcGFydGljdWxhciBwb2ludCBvciBkaXN0YW5jZS5cclxuICAgKi9cclxuICBwdWJsaWMgbWVhc3VyZW1lbnRQb2ludD86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNvdW50cnkgb3IgY291bnRyaWVzIGZvciB3aGljaCB0aGUgc3RyZW5ndGggcmFuZ2UgYXBwbGllcy5cclxuICAgKi9cclxuICBwdWJsaWMgY291bnRyeTogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFNwZWNpZmllZFN1YnN0YW5jZVN0cmVuZ3RoUmVmZXJlbmNlU3RyZW5ndGggLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFNwZWNpZmllZFN1YnN0YW5jZVN0cmVuZ3RoUmVmZXJlbmNlU3RyZW5ndGhBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnc3Vic3RhbmNlJ10pIHsgdGhpcy5zdWJzdGFuY2UgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnN1YnN0YW5jZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0cmVuZ3RoJ10pIHsgdGhpcy5zdHJlbmd0aCA9IG5ldyBmaGlyLlJhdGlvKHNvdXJjZS5zdHJlbmd0aCk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0cmVuZ3RoID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RyZW5ndGhMb3dMaW1pdCddKSB7IHRoaXMuc3RyZW5ndGhMb3dMaW1pdCA9IG5ldyBmaGlyLlJhdGlvKHNvdXJjZS5zdHJlbmd0aExvd0xpbWl0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbWVhc3VyZW1lbnRQb2ludCddKSB7IHRoaXMubWVhc3VyZW1lbnRQb2ludCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UubWVhc3VyZW1lbnRQb2ludH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfbWVhc3VyZW1lbnRQb2ludCddKSB7XHJcbiAgICAgIGlmICh0aGlzLm1lYXN1cmVtZW50UG9pbnQpIHsgdGhpcy5tZWFzdXJlbWVudFBvaW50LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX21lYXN1cmVtZW50UG9pbnQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5tZWFzdXJlbWVudFBvaW50ID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX21lYXN1cmVtZW50UG9pbnQgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2NvdW50cnknXSkgeyB0aGlzLmNvdW50cnkgPSBzb3VyY2UuY291bnRyeS5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvdW50cnkgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudC5zcGVjaWZpZWRTdWJzdGFuY2Uuc3RyZW5ndGgucmVmZXJlbmNlU3RyZW5ndGgnIH1cclxuICAgIHRoaXMudk9wdFMoJ3N1YnN0YW5jZScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudlJlcVMoJ3N0cmVuZ3RoJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0Uygnc3RyZW5ndGhMb3dMaW1pdCcsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ21lYXN1cmVtZW50UG9pbnQnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRBKCdjb3VudHJ5JyxleHByZXNzaW9uKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlU3RyZW5ndGggdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2VTdHJlbmd0aEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBxdWFudGl0eSBvZiBzdWJzdGFuY2UgaW4gdGhlIHVuaXQgb2YgcHJlc2VudGF0aW9uLCBvciBpbiB0aGUgdm9sdW1lIChvciBtYXNzKSBvZiB0aGUgc2luZ2xlIHBoYXJtYWNldXRpY2FsIHByb2R1Y3Qgb3IgbWFudWZhY3R1cmVkIGl0ZW0uXHJcbiAgICovXHJcbiAgcHJlc2VudGF0aW9uOiBmaGlyLlJhdGlvQXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIEEgbG93ZXIgbGltaXQgZm9yIHRoZSBxdWFudGl0eSBvZiBzdWJzdGFuY2UgaW4gdGhlIHVuaXQgb2YgcHJlc2VudGF0aW9uLiBGb3IgdXNlIHdoZW4gdGhlcmUgaXMgYSByYW5nZSBvZiBzdHJlbmd0aHMsIHRoaXMgaXMgdGhlIGxvd2VyIGxpbWl0LCB3aXRoIHRoZSBwcmVzZW50YXRpb24gYXR0cmlidXRlIGJlY29taW5nIHRoZSB1cHBlciBsaW1pdC5cclxuICAgKi9cclxuICBwcmVzZW50YXRpb25Mb3dMaW1pdD86IGZoaXIuUmF0aW9BcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc3RyZW5ndGggcGVyIHVuaXRhcnkgdm9sdW1lIChvciBtYXNzKS5cclxuICAgKi9cclxuICBjb25jZW50cmF0aW9uPzogZmhpci5SYXRpb0FyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgbG93ZXIgbGltaXQgZm9yIHRoZSBzdHJlbmd0aCBwZXIgdW5pdGFyeSB2b2x1bWUgKG9yIG1hc3MpLCBmb3Igd2hlbiB0aGVyZSBpcyBhIHJhbmdlLiBUaGUgY29uY2VudHJhdGlvbiBhdHRyaWJ1dGUgdGhlbiBiZWNvbWVzIHRoZSB1cHBlciBsaW1pdC5cclxuICAgKi9cclxuICBjb25jZW50cmF0aW9uTG93TGltaXQ/OiBmaGlyLlJhdGlvQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRm9yIHdoZW4gc3RyZW5ndGggaXMgbWVhc3VyZWQgYXQgYSBwYXJ0aWN1bGFyIHBvaW50IG9yIGRpc3RhbmNlLlxyXG4gICAqL1xyXG4gIG1lYXN1cmVtZW50UG9pbnQ/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnQuc3BlY2lmaWVkU3Vic3RhbmNlLnN0cmVuZ3RoLm1lYXN1cmVtZW50UG9pbnRcclxuICAgKi9cclxuICBfbWVhc3VyZW1lbnRQb2ludD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNvdW50cnkgb3IgY291bnRyaWVzIGZvciB3aGljaCB0aGUgc3RyZW5ndGggcmFuZ2UgYXBwbGllcy5cclxuICAgKi9cclxuICBjb3VudHJ5PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFN0cmVuZ3RoIGV4cHJlc3NlZCBpbiB0ZXJtcyBvZiBhIHJlZmVyZW5jZSBzdWJzdGFuY2UuXHJcbiAgICovXHJcbiAgcmVmZXJlbmNlU3RyZW5ndGg/OiBmaGlyLk1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlU3RyZW5ndGhSZWZlcmVuY2VTdHJlbmd0aEFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBRdWFudGl0eSBvZiB0aGUgc3Vic3RhbmNlIG9yIHNwZWNpZmllZCBzdWJzdGFuY2UgcHJlc2VudCBpbiB0aGUgbWFudWZhY3R1cmVkIGl0ZW0gb3IgcGhhcm1hY2V1dGljYWwgcHJvZHVjdC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFNwZWNpZmllZFN1YnN0YW5jZVN0cmVuZ3RoIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2VTdHJlbmd0aCc7XHJcbiAgLyoqXHJcbiAgICogVGhlIHF1YW50aXR5IG9mIHN1YnN0YW5jZSBpbiB0aGUgdW5pdCBvZiBwcmVzZW50YXRpb24sIG9yIGluIHRoZSB2b2x1bWUgKG9yIG1hc3MpIG9mIHRoZSBzaW5nbGUgcGhhcm1hY2V1dGljYWwgcHJvZHVjdCBvciBtYW51ZmFjdHVyZWQgaXRlbS5cclxuICAgKi9cclxuICBwdWJsaWMgcHJlc2VudGF0aW9uOiBmaGlyLlJhdGlvfG51bGw7XHJcbiAgLyoqXHJcbiAgICogQSBsb3dlciBsaW1pdCBmb3IgdGhlIHF1YW50aXR5IG9mIHN1YnN0YW5jZSBpbiB0aGUgdW5pdCBvZiBwcmVzZW50YXRpb24uIEZvciB1c2Ugd2hlbiB0aGVyZSBpcyBhIHJhbmdlIG9mIHN0cmVuZ3RocywgdGhpcyBpcyB0aGUgbG93ZXIgbGltaXQsIHdpdGggdGhlIHByZXNlbnRhdGlvbiBhdHRyaWJ1dGUgYmVjb21pbmcgdGhlIHVwcGVyIGxpbWl0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcmVzZW50YXRpb25Mb3dMaW1pdD86IGZoaXIuUmF0aW98dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzdHJlbmd0aCBwZXIgdW5pdGFyeSB2b2x1bWUgKG9yIG1hc3MpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25jZW50cmF0aW9uPzogZmhpci5SYXRpb3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBsb3dlciBsaW1pdCBmb3IgdGhlIHN0cmVuZ3RoIHBlciB1bml0YXJ5IHZvbHVtZSAob3IgbWFzcyksIGZvciB3aGVuIHRoZXJlIGlzIGEgcmFuZ2UuIFRoZSBjb25jZW50cmF0aW9uIGF0dHJpYnV0ZSB0aGVuIGJlY29tZXMgdGhlIHVwcGVyIGxpbWl0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25jZW50cmF0aW9uTG93TGltaXQ/OiBmaGlyLlJhdGlvfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBGb3Igd2hlbiBzdHJlbmd0aCBpcyBtZWFzdXJlZCBhdCBhIHBhcnRpY3VsYXIgcG9pbnQgb3IgZGlzdGFuY2UuXHJcbiAgICovXHJcbiAgcHVibGljIG1lYXN1cmVtZW50UG9pbnQ/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjb3VudHJ5IG9yIGNvdW50cmllcyBmb3Igd2hpY2ggdGhlIHN0cmVuZ3RoIHJhbmdlIGFwcGxpZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGNvdW50cnk6IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogU3RyZW5ndGggZXhwcmVzc2VkIGluIHRlcm1zIG9mIGEgcmVmZXJlbmNlIHN1YnN0YW5jZS5cclxuICAgKi9cclxuICBwdWJsaWMgcmVmZXJlbmNlU3RyZW5ndGg6IGZoaXIuTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2VTdHJlbmd0aFJlZmVyZW5jZVN0cmVuZ3RoW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2VTdHJlbmd0aCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlU3RyZW5ndGhBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsncHJlc2VudGF0aW9uJ10pIHsgdGhpcy5wcmVzZW50YXRpb24gPSBuZXcgZmhpci5SYXRpbyhzb3VyY2UucHJlc2VudGF0aW9uKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucHJlc2VudGF0aW9uID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJlc2VudGF0aW9uTG93TGltaXQnXSkgeyB0aGlzLnByZXNlbnRhdGlvbkxvd0xpbWl0ID0gbmV3IGZoaXIuUmF0aW8oc291cmNlLnByZXNlbnRhdGlvbkxvd0xpbWl0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29uY2VudHJhdGlvbiddKSB7IHRoaXMuY29uY2VudHJhdGlvbiA9IG5ldyBmaGlyLlJhdGlvKHNvdXJjZS5jb25jZW50cmF0aW9uKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29uY2VudHJhdGlvbkxvd0xpbWl0J10pIHsgdGhpcy5jb25jZW50cmF0aW9uTG93TGltaXQgPSBuZXcgZmhpci5SYXRpbyhzb3VyY2UuY29uY2VudHJhdGlvbkxvd0xpbWl0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbWVhc3VyZW1lbnRQb2ludCddKSB7IHRoaXMubWVhc3VyZW1lbnRQb2ludCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UubWVhc3VyZW1lbnRQb2ludH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfbWVhc3VyZW1lbnRQb2ludCddKSB7XHJcbiAgICAgIGlmICh0aGlzLm1lYXN1cmVtZW50UG9pbnQpIHsgdGhpcy5tZWFzdXJlbWVudFBvaW50LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX21lYXN1cmVtZW50UG9pbnQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5tZWFzdXJlbWVudFBvaW50ID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX21lYXN1cmVtZW50UG9pbnQgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2NvdW50cnknXSkgeyB0aGlzLmNvdW50cnkgPSBzb3VyY2UuY291bnRyeS5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvdW50cnkgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVmZXJlbmNlU3RyZW5ndGgnXSkgeyB0aGlzLnJlZmVyZW5jZVN0cmVuZ3RoID0gc291cmNlLnJlZmVyZW5jZVN0cmVuZ3RoLm1hcCgoeCkgPT4gbmV3IGZoaXIuTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2VTdHJlbmd0aFJlZmVyZW5jZVN0cmVuZ3RoKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVmZXJlbmNlU3RyZW5ndGggPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudC5zcGVjaWZpZWRTdWJzdGFuY2Uuc3RyZW5ndGgnIH1cclxuICAgIHRoaXMudlJlcVMoJ3ByZXNlbnRhdGlvbicsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ3ByZXNlbnRhdGlvbkxvd0xpbWl0JyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnY29uY2VudHJhdGlvbicsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ2NvbmNlbnRyYXRpb25Mb3dMaW1pdCcsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ21lYXN1cmVtZW50UG9pbnQnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRBKCdjb3VudHJ5JyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0QSgncmVmZXJlbmNlU3RyZW5ndGgnLGV4cHJlc3Npb24pXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2UgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2VBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgc3BlY2lmaWVkIHN1YnN0YW5jZS5cclxuICAgKi9cclxuICBjb2RlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgZ3JvdXAgb2Ygc3BlY2lmaWVkIHN1YnN0YW5jZSwgZS5nLiBncm91cCAxIHRvIDQuXHJcbiAgICovXHJcbiAgZ3JvdXA6IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIENvbmZpZGVudGlhbGl0eSBsZXZlbCBvZiB0aGUgc3BlY2lmaWVkIHN1YnN0YW5jZSBhcyB0aGUgaW5ncmVkaWVudC5cclxuICAgKi9cclxuICBjb25maWRlbnRpYWxpdHk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFF1YW50aXR5IG9mIHRoZSBzdWJzdGFuY2Ugb3Igc3BlY2lmaWVkIHN1YnN0YW5jZSBwcmVzZW50IGluIHRoZSBtYW51ZmFjdHVyZWQgaXRlbSBvciBwaGFybWFjZXV0aWNhbCBwcm9kdWN0LlxyXG4gICAqL1xyXG4gIHN0cmVuZ3RoPzogZmhpci5NZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFNwZWNpZmllZFN1YnN0YW5jZVN0cmVuZ3RoQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgc3BlY2lmaWVkIHN1YnN0YW5jZSB0aGF0IGNvbXByaXNlcyB0aGlzIGluZ3JlZGllbnQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2UgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFNwZWNpZmllZFN1YnN0YW5jZSc7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNwZWNpZmllZCBzdWJzdGFuY2UuXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGU6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGdyb3VwIG9mIHNwZWNpZmllZCBzdWJzdGFuY2UsIGUuZy4gZ3JvdXAgMSB0byA0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBncm91cDogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBDb25maWRlbnRpYWxpdHkgbGV2ZWwgb2YgdGhlIHNwZWNpZmllZCBzdWJzdGFuY2UgYXMgdGhlIGluZ3JlZGllbnQuXHJcbiAgICovXHJcbiAgcHVibGljIGNvbmZpZGVudGlhbGl0eT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBRdWFudGl0eSBvZiB0aGUgc3Vic3RhbmNlIG9yIHNwZWNpZmllZCBzdWJzdGFuY2UgcHJlc2VudCBpbiB0aGUgbWFudWZhY3R1cmVkIGl0ZW0gb3IgcGhhcm1hY2V1dGljYWwgcHJvZHVjdC5cclxuICAgKi9cclxuICBwdWJsaWMgc3RyZW5ndGg6IGZoaXIuTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2VTdHJlbmd0aFtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2VBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY29kZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvZGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydncm91cCddKSB7IHRoaXMuZ3JvdXAgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmdyb3VwKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZ3JvdXAgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydjb25maWRlbnRpYWxpdHknXSkgeyB0aGlzLmNvbmZpZGVudGlhbGl0eSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY29uZmlkZW50aWFsaXR5KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RyZW5ndGgnXSkgeyB0aGlzLnN0cmVuZ3RoID0gc291cmNlLnN0cmVuZ3RoLm1hcCgoeCkgPT4gbmV3IGZoaXIuTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2VTdHJlbmd0aCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0cmVuZ3RoID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb246c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24pO1xyXG4gICAgaWYgKGV4cHJlc3Npb24gPT09ICcnKSB7IGV4cHJlc3Npb24gPSAnTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnQuc3BlY2lmaWVkU3Vic3RhbmNlJyB9XHJcbiAgICB0aGlzLnZSZXFTKCdjb2RlJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52UmVxUygnZ3JvdXAnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdjb25maWRlbnRpYWxpdHknLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRBKCdzdHJlbmd0aCcsZXhwcmVzc2lvbilcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFN1YnN0YW5jZSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFN1YnN0YW5jZUFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpbmdyZWRpZW50IHN1YnN0YW5jZS5cclxuICAgKi9cclxuICBjb2RlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBRdWFudGl0eSBvZiB0aGUgc3Vic3RhbmNlIG9yIHNwZWNpZmllZCBzdWJzdGFuY2UgcHJlc2VudCBpbiB0aGUgbWFudWZhY3R1cmVkIGl0ZW0gb3IgcGhhcm1hY2V1dGljYWwgcHJvZHVjdC5cclxuICAgKi9cclxuICBzdHJlbmd0aD86IGZoaXIuTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2VTdHJlbmd0aEFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgaW5ncmVkaWVudCBzdWJzdGFuY2UuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTdWJzdGFuY2UgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFN1YnN0YW5jZSc7XHJcbiAgLyoqXHJcbiAgICogVGhlIGluZ3JlZGllbnQgc3Vic3RhbmNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb2RlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFF1YW50aXR5IG9mIHRoZSBzdWJzdGFuY2Ugb3Igc3BlY2lmaWVkIHN1YnN0YW5jZSBwcmVzZW50IGluIHRoZSBtYW51ZmFjdHVyZWQgaXRlbSBvciBwaGFybWFjZXV0aWNhbCBwcm9kdWN0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdHJlbmd0aDogZmhpci5NZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFNwZWNpZmllZFN1YnN0YW5jZVN0cmVuZ3RoW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTdWJzdGFuY2UgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFN1YnN0YW5jZUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jb2RlKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY29kZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0cmVuZ3RoJ10pIHsgdGhpcy5zdHJlbmd0aCA9IHNvdXJjZS5zdHJlbmd0aC5tYXAoKHgpID0+IG5ldyBmaGlyLk1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlU3RyZW5ndGgoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdHJlbmd0aCA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKTtcclxuICAgIGlmIChleHByZXNzaW9uID09PSAnJykgeyBleHByZXNzaW9uID0gJ01lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50LnN1YnN0YW5jZScgfVxyXG4gICAgdGhpcy52UmVxUygnY29kZScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdEEoJ3N0cmVuZ3RoJyxleHByZXNzaW9uKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50QXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRcInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGlkZW50aWZpZXIocykgb2YgdGhpcyBJbmdyZWRpZW50IHRoYXQgYXJlIGFzc2lnbmVkIGJ5IGJ1c2luZXNzIHByb2Nlc3NlcyBhbmQvb3IgdXNlZCB0byByZWZlciB0byBpdCB3aGVuIGEgZGlyZWN0IFVSTCByZWZlcmVuY2UgdG8gdGhlIHJlc291cmNlIGl0c2VsZiBpcyBub3QgYXBwcm9wcmlhdGUuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZ3JlZGllbnQgcm9sZSBlLmcuIEFjdGl2ZSBpbmdyZWRpZW50LCBleGNpcGllbnQuXHJcbiAgICovXHJcbiAgcm9sZTogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhlIGluZ3JlZGllbnQgaXMgYSBrbm93biBvciBzdXNwZWN0ZWQgYWxsZXJnZW4uXHJcbiAgICovXHJcbiAgYWxsZXJnZW5pY0luZGljYXRvcj86IGZoaXIuRmhpckJvb2xlYW58Ym9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50LmFsbGVyZ2VuaWNJbmRpY2F0b3JcclxuICAgKi9cclxuICBfYWxsZXJnZW5pY0luZGljYXRvcj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogTWFudWZhY3R1cmVyIG9mIHRoaXMgSW5ncmVkaWVudC5cclxuICAgKi9cclxuICBtYW51ZmFjdHVyZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBzcGVjaWZpZWQgc3Vic3RhbmNlIHRoYXQgY29tcHJpc2VzIHRoaXMgaW5ncmVkaWVudC5cclxuICAgKi9cclxuICBzcGVjaWZpZWRTdWJzdGFuY2U/OiBmaGlyLk1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgaW5ncmVkaWVudCBzdWJzdGFuY2UuXHJcbiAgICovXHJcbiAgc3Vic3RhbmNlPzogZmhpci5NZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFN1YnN0YW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQW4gaW5ncmVkaWVudCBvZiBhIG1hbnVmYWN0dXJlZCBpdGVtIG9yIHBoYXJtYWNldXRpY2FsIHByb2R1Y3QuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnQgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ01lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50JztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIk1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50XCI7XHJcbiAgLyoqXHJcbiAgICogVGhlIGlkZW50aWZpZXIocykgb2YgdGhpcyBJbmdyZWRpZW50IHRoYXQgYXJlIGFzc2lnbmVkIGJ5IGJ1c2luZXNzIHByb2Nlc3NlcyBhbmQvb3IgdXNlZCB0byByZWZlciB0byBpdCB3aGVuIGEgZGlyZWN0IFVSTCByZWZlcmVuY2UgdG8gdGhlIHJlc291cmNlIGl0c2VsZiBpcyBub3QgYXBwcm9wcmlhdGUuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZ3JlZGllbnQgcm9sZSBlLmcuIEFjdGl2ZSBpbmdyZWRpZW50LCBleGNpcGllbnQuXHJcbiAgICovXHJcbiAgcHVibGljIHJvbGU6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhlIGluZ3JlZGllbnQgaXMgYSBrbm93biBvciBzdXNwZWN0ZWQgYWxsZXJnZW4uXHJcbiAgICovXHJcbiAgcHVibGljIGFsbGVyZ2VuaWNJbmRpY2F0b3I/OiBmaGlyLkZoaXJCb29sZWFufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBNYW51ZmFjdHVyZXIgb2YgdGhpcyBJbmdyZWRpZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtYW51ZmFjdHVyZXI6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogQSBzcGVjaWZpZWQgc3Vic3RhbmNlIHRoYXQgY29tcHJpc2VzIHRoaXMgaW5ncmVkaWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgc3BlY2lmaWVkU3Vic3RhbmNlOiBmaGlyLk1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlW107XHJcbiAgLyoqXHJcbiAgICogVGhlIGluZ3JlZGllbnQgc3Vic3RhbmNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdWJzdGFuY2U/OiBmaGlyLk1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3Vic3RhbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ01lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50JztcclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBuZXcgZmhpci5JZGVudGlmaWVyKHNvdXJjZS5pZGVudGlmaWVyKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncm9sZSddKSB7IHRoaXMucm9sZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2Uucm9sZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnJvbGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydhbGxlcmdlbmljSW5kaWNhdG9yJ10pIHsgdGhpcy5hbGxlcmdlbmljSW5kaWNhdG9yID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oe3ZhbHVlOiBzb3VyY2UuYWxsZXJnZW5pY0luZGljYXRvcn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfYWxsZXJnZW5pY0luZGljYXRvciddKSB7XHJcbiAgICAgIGlmICh0aGlzLmFsbGVyZ2VuaWNJbmRpY2F0b3IpIHsgdGhpcy5hbGxlcmdlbmljSW5kaWNhdG9yLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2FsbGVyZ2VuaWNJbmRpY2F0b3IhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5hbGxlcmdlbmljSW5kaWNhdG9yID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oc291cmNlLl9hbGxlcmdlbmljSW5kaWNhdG9yIGFzIFBhcnRpYWw8Zmhpci5GaGlyQm9vbGVhbkFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnbWFudWZhY3R1cmVyJ10pIHsgdGhpcy5tYW51ZmFjdHVyZXIgPSBzb3VyY2UubWFudWZhY3R1cmVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubWFudWZhY3R1cmVyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3NwZWNpZmllZFN1YnN0YW5jZSddKSB7IHRoaXMuc3BlY2lmaWVkU3Vic3RhbmNlID0gc291cmNlLnNwZWNpZmllZFN1YnN0YW5jZS5tYXAoKHgpID0+IG5ldyBmaGlyLk1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3BlY2lmaWVkU3Vic3RhbmNlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3N1YnN0YW5jZSddKSB7IHRoaXMuc3Vic3RhbmNlID0gbmV3IGZoaXIuTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTdWJzdGFuY2Uoc291cmNlLnN1YnN0YW5jZSk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb246c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24pO1xyXG4gICAgaWYgKGV4cHJlc3Npb24gPT09ICcnKSB7IGV4cHJlc3Npb24gPSAnTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnQnIH1cclxuICAgIHRoaXMudlJlcVMoJ3Jlc291cmNlVHlwZScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ2lkZW50aWZpZXInLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZSZXFTKCdyb2xlJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnYWxsZXJnZW5pY0luZGljYXRvcicsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdEEoJ21hbnVmYWN0dXJlcicsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdEEoJ3NwZWNpZmllZFN1YnN0YW5jZScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ3N1YnN0YW5jZScsZXhwcmVzc2lvbilcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbiJdfQ==