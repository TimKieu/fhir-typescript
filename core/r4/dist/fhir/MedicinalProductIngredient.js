// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: MedicinalProductIngredient
import * as fhir from '../fhir.js';
/**
 * Strength expressed in terms of a reference substance.
 */
export class MedicinalProductIngredientSpecifiedSubstanceStrengthReferenceStrength extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductIngredientSpecifiedSubstanceStrengthReferenceStrength - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['substance']) {
            this.substance = new fhir.CodeableConcept(source.substance);
        }
        if (source['strength']) {
            this.strength = new fhir.Ratio(source.strength);
        }
        else {
            this.strength = null;
        }
        if (source['strengthLowLimit']) {
            this.strengthLowLimit = new fhir.Ratio(source.strengthLowLimit);
        }
        if (source['measurementPoint']) {
            this.measurementPoint = new fhir.FhirString({ value: source.measurementPoint });
        }
        if (source['_measurementPoint']) {
            if (this.measurementPoint) {
                this.measurementPoint.addExtendedProperties(source._measurementPoint);
            }
            else {
                this.measurementPoint = new fhir.FhirString(source._measurementPoint);
            }
        }
        if (source['country']) {
            this.country = source.country.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.country = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicinalProductIngredient.specifiedSubstance.strength.referenceStrength';
        }
        this.vOS('substance', exp);
        this.vRS('strength', exp);
        this.vOS('strengthLowLimit', exp);
        this.vOS('measurementPoint', exp);
        this.vOA('country', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductIngredientSpecifiedSubstanceStrengthReferenceStrength._fts_dataType = 'MedicinalProductIngredientSpecifiedSubstanceStrengthReferenceStrength';
/**
 * Quantity of the substance or specified substance present in the manufactured item or pharmaceutical product.
 */
export class MedicinalProductIngredientSpecifiedSubstanceStrength extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductIngredientSpecifiedSubstanceStrength - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['presentation']) {
            this.presentation = new fhir.Ratio(source.presentation);
        }
        else {
            this.presentation = null;
        }
        if (source['presentationLowLimit']) {
            this.presentationLowLimit = new fhir.Ratio(source.presentationLowLimit);
        }
        if (source['concentration']) {
            this.concentration = new fhir.Ratio(source.concentration);
        }
        if (source['concentrationLowLimit']) {
            this.concentrationLowLimit = new fhir.Ratio(source.concentrationLowLimit);
        }
        if (source['measurementPoint']) {
            this.measurementPoint = new fhir.FhirString({ value: source.measurementPoint });
        }
        if (source['_measurementPoint']) {
            if (this.measurementPoint) {
                this.measurementPoint.addExtendedProperties(source._measurementPoint);
            }
            else {
                this.measurementPoint = new fhir.FhirString(source._measurementPoint);
            }
        }
        if (source['country']) {
            this.country = source.country.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.country = [];
        }
        if (source['referenceStrength']) {
            this.referenceStrength = source.referenceStrength.map((x) => new fhir.MedicinalProductIngredientSpecifiedSubstanceStrengthReferenceStrength(x));
        }
        else {
            this.referenceStrength = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicinalProductIngredient.specifiedSubstance.strength';
        }
        this.vRS('presentation', exp);
        this.vOS('presentationLowLimit', exp);
        this.vOS('concentration', exp);
        this.vOS('concentrationLowLimit', exp);
        this.vOS('measurementPoint', exp);
        this.vOA('country', exp);
        this.vOA('referenceStrength', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductIngredientSpecifiedSubstanceStrength._fts_dataType = 'MedicinalProductIngredientSpecifiedSubstanceStrength';
/**
 * A specified substance that comprises this ingredient.
 */
export class MedicinalProductIngredientSpecifiedSubstance extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductIngredientSpecifiedSubstance - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        else {
            this.code = null;
        }
        if (source['group']) {
            this.group = new fhir.CodeableConcept(source.group);
        }
        else {
            this.group = null;
        }
        if (source['confidentiality']) {
            this.confidentiality = new fhir.CodeableConcept(source.confidentiality);
        }
        if (source['strength']) {
            this.strength = source.strength.map((x) => new fhir.MedicinalProductIngredientSpecifiedSubstanceStrength(x));
        }
        else {
            this.strength = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicinalProductIngredient.specifiedSubstance';
        }
        this.vRS('code', exp);
        this.vRS('group', exp);
        this.vOS('confidentiality', exp);
        this.vOA('strength', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductIngredientSpecifiedSubstance._fts_dataType = 'MedicinalProductIngredientSpecifiedSubstance';
/**
 * The ingredient substance.
 */
export class MedicinalProductIngredientSubstance extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductIngredientSubstance - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        else {
            this.code = null;
        }
        if (source['strength']) {
            this.strength = source.strength.map((x) => new fhir.MedicinalProductIngredientSpecifiedSubstanceStrength(x));
        }
        else {
            this.strength = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicinalProductIngredient.substance';
        }
        this.vRS('code', exp);
        this.vOA('strength', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductIngredientSubstance._fts_dataType = 'MedicinalProductIngredientSubstance';
/**
 * An ingredient of a manufactured item or pharmaceutical product.
 */
export class MedicinalProductIngredient extends fhir.DomainResource {
    /**
     * Default constructor for MedicinalProductIngredient - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'MedicinalProductIngredient';
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier);
        }
        if (source['role']) {
            this.role = new fhir.CodeableConcept(source.role);
        }
        else {
            this.role = null;
        }
        if (source['allergenicIndicator']) {
            this.allergenicIndicator = new fhir.FhirBoolean({ value: source.allergenicIndicator });
        }
        if (source['_allergenicIndicator']) {
            if (this.allergenicIndicator) {
                this.allergenicIndicator.addExtendedProperties(source._allergenicIndicator);
            }
            else {
                this.allergenicIndicator = new fhir.FhirBoolean(source._allergenicIndicator);
            }
        }
        if (source['manufacturer']) {
            this.manufacturer = source.manufacturer.map((x) => new fhir.Reference(x));
        }
        else {
            this.manufacturer = [];
        }
        if (source['specifiedSubstance']) {
            this.specifiedSubstance = source.specifiedSubstance.map((x) => new fhir.MedicinalProductIngredientSpecifiedSubstance(x));
        }
        else {
            this.specifiedSubstance = [];
        }
        if (source['substance']) {
            this.substance = new fhir.MedicinalProductIngredientSubstance(source.substance);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicinalProductIngredient';
        }
        this.vRS('resourceType', exp);
        this.vOS('identifier', exp);
        this.vRS('role', exp);
        this.vOS('allergenicIndicator', exp);
        this.vOA('manufacturer', exp);
        this.vOA('specifiedSubstance', exp);
        this.vOS('substance', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductIngredient._fts_dataType = 'MedicinalProductIngredient';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnQuanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL01lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQiwrQ0FBK0M7QUFDL0Msa0NBQWtDO0FBQ2xDLDRDQUE0QztBQUU1QyxPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQWdDbkM7O0dBRUc7QUFDSCxNQUFNLE9BQU8scUVBQXNFLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUF5QjdHOztPQUVHO0lBQ0gsWUFBWSxTQUE0RixFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUNsSixLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1NBQUU7UUFDekYsSUFBSSxNQUFNLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7U0FBRTthQUN2RTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDOUIsSUFBSSxNQUFNLENBQUMsa0JBQWtCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLENBQUM7U0FBRTtRQUNwRyxJQUFJLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsZ0JBQWdC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Y2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjQuY29yZSB2ZXJzaW9uOiA0LjAuMVxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50XHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlU3RyZW5ndGhSZWZlcmVuY2VTdHJlbmd0aCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFNwZWNpZmllZFN1YnN0YW5jZVN0cmVuZ3RoUmVmZXJlbmNlU3RyZW5ndGhBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBSZWxldmFudCByZWZlcmVuY2Ugc3Vic3RhbmNlLlxyXG4gICAqL1xyXG4gIHN1YnN0YW5jZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU3RyZW5ndGggZXhwcmVzc2VkIGluIHRlcm1zIG9mIGEgcmVmZXJlbmNlIHN1YnN0YW5jZS5cclxuICAgKi9cclxuICBzdHJlbmd0aDogZmhpci5SYXRpb0FyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBTdHJlbmd0aCBleHByZXNzZWQgaW4gdGVybXMgb2YgYSByZWZlcmVuY2Ugc3Vic3RhbmNlLlxyXG4gICAqL1xyXG4gIHN0cmVuZ3RoTG93TGltaXQ/OiBmaGlyLlJhdGlvQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRm9yIHdoZW4gc3RyZW5ndGggaXMgbWVhc3VyZWQgYXQgYSBwYXJ0aWN1bGFyIHBvaW50IG9yIGRpc3RhbmNlLlxyXG4gICAqL1xyXG4gIG1lYXN1cmVtZW50UG9pbnQ/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnQuc3BlY2lmaWVkU3Vic3RhbmNlLnN0cmVuZ3RoLnJlZmVyZW5jZVN0cmVuZ3RoLm1lYXN1cmVtZW50UG9pbnRcclxuICAgKi9cclxuICBfbWVhc3VyZW1lbnRQb2ludD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNvdW50cnkgb3IgY291bnRyaWVzIGZvciB3aGljaCB0aGUgc3RyZW5ndGggcmFuZ2UgYXBwbGllcy5cclxuICAgKi9cclxuICBjb3VudHJ5PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogU3RyZW5ndGggZXhwcmVzc2VkIGluIHRlcm1zIG9mIGEgcmVmZXJlbmNlIHN1YnN0YW5jZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFNwZWNpZmllZFN1YnN0YW5jZVN0cmVuZ3RoUmVmZXJlbmNlU3RyZW5ndGggZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFNwZWNpZmllZFN1YnN0YW5jZVN0cmVuZ3RoUmVmZXJlbmNlU3RyZW5ndGgnO1xyXG4gIC8qKlxyXG4gICAqIFJlbGV2YW50IHJlZmVyZW5jZSBzdWJzdGFuY2UuXHJcbiAgICovXHJcbiAgcHVibGljIHN1YnN0YW5jZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTdHJlbmd0aCBleHByZXNzZWQgaW4gdGVybXMgb2YgYSByZWZlcmVuY2Ugc3Vic3RhbmNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdHJlbmd0aDogZmhpci5SYXRpb3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFN0cmVuZ3RoIGV4cHJlc3NlZCBpbiB0ZXJtcyBvZiBhIHJlZmVyZW5jZSBzdWJzdGFuY2UuXHJcbiAgICovXHJcbiAgcHVibGljIHN0cmVuZ3RoTG93TGltaXQ/OiBmaGlyLlJhdGlvfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBGb3Igd2hlbiBzdHJlbmd0aCBpcyBtZWFzdXJlZCBhdCBhIHBhcnRpY3VsYXIgcG9pbnQgb3IgZGlzdGFuY2UuXHJcbiAgICovXHJcbiAgcHVibGljIG1lYXN1cmVtZW50UG9pbnQ/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjb3VudHJ5IG9yIGNvdW50cmllcyBmb3Igd2hpY2ggdGhlIHN0cmVuZ3RoIHJhbmdlIGFwcGxpZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGNvdW50cnk6IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2VTdHJlbmd0aFJlZmVyZW5jZVN0cmVuZ3RoIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2VTdHJlbmd0aFJlZmVyZW5jZVN0cmVuZ3RoQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3N1YnN0YW5jZSddKSB7IHRoaXMuc3Vic3RhbmNlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5zdWJzdGFuY2UpOyB9XHJcbiAgICBpZiAoc291cmNlWydzdHJlbmd0aCddKSB7IHRoaXMuc3RyZW5ndGggPSBuZXcgZmhpci5SYXRpbyhzb3VyY2Uuc3RyZW5ndGgpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdHJlbmd0aCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0cmVuZ3RoTG93TGltaXQnXSkgeyB0aGlzLnN0cmVuZ3RoTG93TGltaXQgPSBuZXcgZmhpci5SYXRpbyhzb3VyY2Uuc3RyZW5ndGhMb3dMaW1pdCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ21lYXN1cmVtZW50UG9pbnQnXSkgeyB0aGlzLm1lYXN1cmVtZW50UG9pbnQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLm1lYXN1cmVtZW50UG9pbnR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX21lYXN1cmVtZW50UG9pbnQnXSkge1xyXG4gICAgICBpZiAodGhpcy5tZWFzdXJlbWVudFBvaW50KSB7IHRoaXMubWVhc3VyZW1lbnRQb2ludC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9tZWFzdXJlbWVudFBvaW50ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubWVhc3VyZW1lbnRQb2ludCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9tZWFzdXJlbWVudFBvaW50IGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydjb3VudHJ5J10pIHsgdGhpcy5jb3VudHJ5ID0gc291cmNlLmNvdW50cnkubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb3VudHJ5ID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudC5zcGVjaWZpZWRTdWJzdGFuY2Uuc3RyZW5ndGgucmVmZXJlbmNlU3RyZW5ndGgnIH1cclxuICAgIHRoaXMudk9TKCdzdWJzdGFuY2UnLGV4cClcclxuICAgIHRoaXMudlJTKCdzdHJlbmd0aCcsZXhwKVxyXG4gICAgdGhpcy52T1MoJ3N0cmVuZ3RoTG93TGltaXQnLGV4cClcclxuICAgIHRoaXMudk9TKCdtZWFzdXJlbWVudFBvaW50JyxleHApXHJcbiAgICB0aGlzLnZPQSgnY291bnRyeScsZXhwKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlU3RyZW5ndGggdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2VTdHJlbmd0aEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBxdWFudGl0eSBvZiBzdWJzdGFuY2UgaW4gdGhlIHVuaXQgb2YgcHJlc2VudGF0aW9uLCBvciBpbiB0aGUgdm9sdW1lIChvciBtYXNzKSBvZiB0aGUgc2luZ2xlIHBoYXJtYWNldXRpY2FsIHByb2R1Y3Qgb3IgbWFudWZhY3R1cmVkIGl0ZW0uXHJcbiAgICovXHJcbiAgcHJlc2VudGF0aW9uOiBmaGlyLlJhdGlvQXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIEEgbG93ZXIgbGltaXQgZm9yIHRoZSBxdWFudGl0eSBvZiBzdWJzdGFuY2UgaW4gdGhlIHVuaXQgb2YgcHJlc2VudGF0aW9uLiBGb3IgdXNlIHdoZW4gdGhlcmUgaXMgYSByYW5nZSBvZiBzdHJlbmd0aHMsIHRoaXMgaXMgdGhlIGxvd2VyIGxpbWl0LCB3aXRoIHRoZSBwcmVzZW50YXRpb24gYXR0cmlidXRlIGJlY29taW5nIHRoZSB1cHBlciBsaW1pdC5cclxuICAgKi9cclxuICBwcmVzZW50YXRpb25Mb3dMaW1pdD86IGZoaXIuUmF0aW9BcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc3RyZW5ndGggcGVyIHVuaXRhcnkgdm9sdW1lIChvciBtYXNzKS5cclxuICAgKi9cclxuICBjb25jZW50cmF0aW9uPzogZmhpci5SYXRpb0FyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgbG93ZXIgbGltaXQgZm9yIHRoZSBzdHJlbmd0aCBwZXIgdW5pdGFyeSB2b2x1bWUgKG9yIG1hc3MpLCBmb3Igd2hlbiB0aGVyZSBpcyBhIHJhbmdlLiBUaGUgY29uY2VudHJhdGlvbiBhdHRyaWJ1dGUgdGhlbiBiZWNvbWVzIHRoZSB1cHBlciBsaW1pdC5cclxuICAgKi9cclxuICBjb25jZW50cmF0aW9uTG93TGltaXQ/OiBmaGlyLlJhdGlvQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRm9yIHdoZW4gc3RyZW5ndGggaXMgbWVhc3VyZWQgYXQgYSBwYXJ0aWN1bGFyIHBvaW50IG9yIGRpc3RhbmNlLlxyXG4gICAqL1xyXG4gIG1lYXN1cmVtZW50UG9pbnQ/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnQuc3BlY2lmaWVkU3Vic3RhbmNlLnN0cmVuZ3RoLm1lYXN1cmVtZW50UG9pbnRcclxuICAgKi9cclxuICBfbWVhc3VyZW1lbnRQb2ludD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNvdW50cnkgb3IgY291bnRyaWVzIGZvciB3aGljaCB0aGUgc3RyZW5ndGggcmFuZ2UgYXBwbGllcy5cclxuICAgKi9cclxuICBjb3VudHJ5PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFN0cmVuZ3RoIGV4cHJlc3NlZCBpbiB0ZXJtcyBvZiBhIHJlZmVyZW5jZSBzdWJzdGFuY2UuXHJcbiAgICovXHJcbiAgcmVmZXJlbmNlU3RyZW5ndGg/OiBmaGlyLk1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlU3RyZW5ndGhSZWZlcmVuY2VTdHJlbmd0aEFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBRdWFudGl0eSBvZiB0aGUgc3Vic3RhbmNlIG9yIHNwZWNpZmllZCBzdWJzdGFuY2UgcHJlc2VudCBpbiB0aGUgbWFudWZhY3R1cmVkIGl0ZW0gb3IgcGhhcm1hY2V1dGljYWwgcHJvZHVjdC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFNwZWNpZmllZFN1YnN0YW5jZVN0cmVuZ3RoIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2VTdHJlbmd0aCc7XHJcbiAgLyoqXHJcbiAgICogVGhlIHF1YW50aXR5IG9mIHN1YnN0YW5jZSBpbiB0aGUgdW5pdCBvZiBwcmVzZW50YXRpb24sIG9yIGluIHRoZSB2b2x1bWUgKG9yIG1hc3MpIG9mIHRoZSBzaW5nbGUgcGhhcm1hY2V1dGljYWwgcHJvZHVjdCBvciBtYW51ZmFjdHVyZWQgaXRlbS5cclxuICAgKi9cclxuICBwdWJsaWMgcHJlc2VudGF0aW9uOiBmaGlyLlJhdGlvfG51bGw7XHJcbiAgLyoqXHJcbiAgICogQSBsb3dlciBsaW1pdCBmb3IgdGhlIHF1YW50aXR5IG9mIHN1YnN0YW5jZSBpbiB0aGUgdW5pdCBvZiBwcmVzZW50YXRpb24uIEZvciB1c2Ugd2hlbiB0aGVyZSBpcyBhIHJhbmdlIG9mIHN0cmVuZ3RocywgdGhpcyBpcyB0aGUgbG93ZXIgbGltaXQsIHdpdGggdGhlIHByZXNlbnRhdGlvbiBhdHRyaWJ1dGUgYmVjb21pbmcgdGhlIHVwcGVyIGxpbWl0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcmVzZW50YXRpb25Mb3dMaW1pdD86IGZoaXIuUmF0aW98dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzdHJlbmd0aCBwZXIgdW5pdGFyeSB2b2x1bWUgKG9yIG1hc3MpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25jZW50cmF0aW9uPzogZmhpci5SYXRpb3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBsb3dlciBsaW1pdCBmb3IgdGhlIHN0cmVuZ3RoIHBlciB1bml0YXJ5IHZvbHVtZSAob3IgbWFzcyksIGZvciB3aGVuIHRoZXJlIGlzIGEgcmFuZ2UuIFRoZSBjb25jZW50cmF0aW9uIGF0dHJpYnV0ZSB0aGVuIGJlY29tZXMgdGhlIHVwcGVyIGxpbWl0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25jZW50cmF0aW9uTG93TGltaXQ/OiBmaGlyLlJhdGlvfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBGb3Igd2hlbiBzdHJlbmd0aCBpcyBtZWFzdXJlZCBhdCBhIHBhcnRpY3VsYXIgcG9pbnQgb3IgZGlzdGFuY2UuXHJcbiAgICovXHJcbiAgcHVibGljIG1lYXN1cmVtZW50UG9pbnQ/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjb3VudHJ5IG9yIGNvdW50cmllcyBmb3Igd2hpY2ggdGhlIHN0cmVuZ3RoIHJhbmdlIGFwcGxpZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGNvdW50cnk6IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogU3RyZW5ndGggZXhwcmVzc2VkIGluIHRlcm1zIG9mIGEgcmVmZXJlbmNlIHN1YnN0YW5jZS5cclxuICAgKi9cclxuICBwdWJsaWMgcmVmZXJlbmNlU3RyZW5ndGg6IGZoaXIuTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2VTdHJlbmd0aFJlZmVyZW5jZVN0cmVuZ3RoW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2VTdHJlbmd0aCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlU3RyZW5ndGhBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsncHJlc2VudGF0aW9uJ10pIHsgdGhpcy5wcmVzZW50YXRpb24gPSBuZXcgZmhpci5SYXRpbyhzb3VyY2UucHJlc2VudGF0aW9uKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucHJlc2VudGF0aW9uID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJlc2VudGF0aW9uTG93TGltaXQnXSkgeyB0aGlzLnByZXNlbnRhdGlvbkxvd0xpbWl0ID0gbmV3IGZoaXIuUmF0aW8oc291cmNlLnByZXNlbnRhdGlvbkxvd0xpbWl0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29uY2VudHJhdGlvbiddKSB7IHRoaXMuY29uY2VudHJhdGlvbiA9IG5ldyBmaGlyLlJhdGlvKHNvdXJjZS5jb25jZW50cmF0aW9uKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29uY2VudHJhdGlvbkxvd0xpbWl0J10pIHsgdGhpcy5jb25jZW50cmF0aW9uTG93TGltaXQgPSBuZXcgZmhpci5SYXRpbyhzb3VyY2UuY29uY2VudHJhdGlvbkxvd0xpbWl0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbWVhc3VyZW1lbnRQb2ludCddKSB7IHRoaXMubWVhc3VyZW1lbnRQb2ludCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UubWVhc3VyZW1lbnRQb2ludH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfbWVhc3VyZW1lbnRQb2ludCddKSB7XHJcbiAgICAgIGlmICh0aGlzLm1lYXN1cmVtZW50UG9pbnQpIHsgdGhpcy5tZWFzdXJlbWVudFBvaW50LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX21lYXN1cmVtZW50UG9pbnQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5tZWFzdXJlbWVudFBvaW50ID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX21lYXN1cmVtZW50UG9pbnQgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2NvdW50cnknXSkgeyB0aGlzLmNvdW50cnkgPSBzb3VyY2UuY291bnRyeS5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvdW50cnkgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVmZXJlbmNlU3RyZW5ndGgnXSkgeyB0aGlzLnJlZmVyZW5jZVN0cmVuZ3RoID0gc291cmNlLnJlZmVyZW5jZVN0cmVuZ3RoLm1hcCgoeCkgPT4gbmV3IGZoaXIuTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2VTdHJlbmd0aFJlZmVyZW5jZVN0cmVuZ3RoKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVmZXJlbmNlU3RyZW5ndGggPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ01lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50LnNwZWNpZmllZFN1YnN0YW5jZS5zdHJlbmd0aCcgfVxyXG4gICAgdGhpcy52UlMoJ3ByZXNlbnRhdGlvbicsZXhwKVxyXG4gICAgdGhpcy52T1MoJ3ByZXNlbnRhdGlvbkxvd0xpbWl0JyxleHApXHJcbiAgICB0aGlzLnZPUygnY29uY2VudHJhdGlvbicsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2NvbmNlbnRyYXRpb25Mb3dMaW1pdCcsZXhwKVxyXG4gICAgdGhpcy52T1MoJ21lYXN1cmVtZW50UG9pbnQnLGV4cClcclxuICAgIHRoaXMudk9BKCdjb3VudHJ5JyxleHApXHJcbiAgICB0aGlzLnZPQSgncmVmZXJlbmNlU3RyZW5ndGgnLGV4cClcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFNwZWNpZmllZFN1YnN0YW5jZSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFNwZWNpZmllZFN1YnN0YW5jZUFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzcGVjaWZpZWQgc3Vic3RhbmNlLlxyXG4gICAqL1xyXG4gIGNvZGU6IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBncm91cCBvZiBzcGVjaWZpZWQgc3Vic3RhbmNlLCBlLmcuIGdyb3VwIDEgdG8gNC5cclxuICAgKi9cclxuICBncm91cDogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogQ29uZmlkZW50aWFsaXR5IGxldmVsIG9mIHRoZSBzcGVjaWZpZWQgc3Vic3RhbmNlIGFzIHRoZSBpbmdyZWRpZW50LlxyXG4gICAqL1xyXG4gIGNvbmZpZGVudGlhbGl0eT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUXVhbnRpdHkgb2YgdGhlIHN1YnN0YW5jZSBvciBzcGVjaWZpZWQgc3Vic3RhbmNlIHByZXNlbnQgaW4gdGhlIG1hbnVmYWN0dXJlZCBpdGVtIG9yIHBoYXJtYWNldXRpY2FsIHByb2R1Y3QuXHJcbiAgICovXHJcbiAgc3RyZW5ndGg/OiBmaGlyLk1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlU3RyZW5ndGhBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQSBzcGVjaWZpZWQgc3Vic3RhbmNlIHRoYXQgY29tcHJpc2VzIHRoaXMgaW5ncmVkaWVudC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFNwZWNpZmllZFN1YnN0YW5jZSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ01lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlJztcclxuICAvKipcclxuICAgKiBUaGUgc3BlY2lmaWVkIHN1YnN0YW5jZS5cclxuICAgKi9cclxuICBwdWJsaWMgY29kZTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgZ3JvdXAgb2Ygc3BlY2lmaWVkIHN1YnN0YW5jZSwgZS5nLiBncm91cCAxIHRvIDQuXHJcbiAgICovXHJcbiAgcHVibGljIGdyb3VwOiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIENvbmZpZGVudGlhbGl0eSBsZXZlbCBvZiB0aGUgc3BlY2lmaWVkIHN1YnN0YW5jZSBhcyB0aGUgaW5ncmVkaWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgY29uZmlkZW50aWFsaXR5PzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFF1YW50aXR5IG9mIHRoZSBzdWJzdGFuY2Ugb3Igc3BlY2lmaWVkIHN1YnN0YW5jZSBwcmVzZW50IGluIHRoZSBtYW51ZmFjdHVyZWQgaXRlbSBvciBwaGFybWFjZXV0aWNhbCBwcm9kdWN0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdHJlbmd0aDogZmhpci5NZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFNwZWNpZmllZFN1YnN0YW5jZVN0cmVuZ3RoW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2UgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFNwZWNpZmllZFN1YnN0YW5jZUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jb2RlKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY29kZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ2dyb3VwJ10pIHsgdGhpcy5ncm91cCA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuZ3JvdXApOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5ncm91cCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvbmZpZGVudGlhbGl0eSddKSB7IHRoaXMuY29uZmlkZW50aWFsaXR5ID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jb25maWRlbnRpYWxpdHkpOyB9XHJcbiAgICBpZiAoc291cmNlWydzdHJlbmd0aCddKSB7IHRoaXMuc3RyZW5ndGggPSBzb3VyY2Uuc3RyZW5ndGgubWFwKCh4KSA9PiBuZXcgZmhpci5NZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFNwZWNpZmllZFN1YnN0YW5jZVN0cmVuZ3RoKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3RyZW5ndGggPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ01lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50LnNwZWNpZmllZFN1YnN0YW5jZScgfVxyXG4gICAgdGhpcy52UlMoJ2NvZGUnLGV4cClcclxuICAgIHRoaXMudlJTKCdncm91cCcsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2NvbmZpZGVudGlhbGl0eScsZXhwKVxyXG4gICAgdGhpcy52T0EoJ3N0cmVuZ3RoJyxleHApXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTdWJzdGFuY2UgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTdWJzdGFuY2VBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgaW5ncmVkaWVudCBzdWJzdGFuY2UuXHJcbiAgICovXHJcbiAgY29kZTogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogUXVhbnRpdHkgb2YgdGhlIHN1YnN0YW5jZSBvciBzcGVjaWZpZWQgc3Vic3RhbmNlIHByZXNlbnQgaW4gdGhlIG1hbnVmYWN0dXJlZCBpdGVtIG9yIHBoYXJtYWNldXRpY2FsIHByb2R1Y3QuXHJcbiAgICovXHJcbiAgc3RyZW5ndGg/OiBmaGlyLk1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlU3RyZW5ndGhBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlIGluZ3JlZGllbnQgc3Vic3RhbmNlLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3Vic3RhbmNlIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTdWJzdGFuY2UnO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpbmdyZWRpZW50IHN1YnN0YW5jZS5cclxuICAgKi9cclxuICBwdWJsaWMgY29kZTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBRdWFudGl0eSBvZiB0aGUgc3Vic3RhbmNlIG9yIHNwZWNpZmllZCBzdWJzdGFuY2UgcHJlc2VudCBpbiB0aGUgbWFudWZhY3R1cmVkIGl0ZW0gb3IgcGhhcm1hY2V1dGljYWwgcHJvZHVjdC5cclxuICAgKi9cclxuICBwdWJsaWMgc3RyZW5ndGg6IGZoaXIuTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTcGVjaWZpZWRTdWJzdGFuY2VTdHJlbmd0aFtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3Vic3RhbmNlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTdWJzdGFuY2VBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY29kZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvZGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydzdHJlbmd0aCddKSB7IHRoaXMuc3RyZW5ndGggPSBzb3VyY2Uuc3RyZW5ndGgubWFwKCh4KSA9PiBuZXcgZmhpci5NZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFNwZWNpZmllZFN1YnN0YW5jZVN0cmVuZ3RoKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3RyZW5ndGggPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ01lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50LnN1YnN0YW5jZScgfVxyXG4gICAgdGhpcy52UlMoJ2NvZGUnLGV4cClcclxuICAgIHRoaXMudk9BKCdzdHJlbmd0aCcsZXhwKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50QXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRcInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGlkZW50aWZpZXIocykgb2YgdGhpcyBJbmdyZWRpZW50IHRoYXQgYXJlIGFzc2lnbmVkIGJ5IGJ1c2luZXNzIHByb2Nlc3NlcyBhbmQvb3IgdXNlZCB0byByZWZlciB0byBpdCB3aGVuIGEgZGlyZWN0IFVSTCByZWZlcmVuY2UgdG8gdGhlIHJlc291cmNlIGl0c2VsZiBpcyBub3QgYXBwcm9wcmlhdGUuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZ3JlZGllbnQgcm9sZSBlLmcuIEFjdGl2ZSBpbmdyZWRpZW50LCBleGNpcGllbnQuXHJcbiAgICovXHJcbiAgcm9sZTogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhlIGluZ3JlZGllbnQgaXMgYSBrbm93biBvciBzdXNwZWN0ZWQgYWxsZXJnZW4uXHJcbiAgICovXHJcbiAgYWxsZXJnZW5pY0luZGljYXRvcj86IGZoaXIuRmhpckJvb2xlYW58Ym9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50LmFsbGVyZ2VuaWNJbmRpY2F0b3JcclxuICAgKi9cclxuICBfYWxsZXJnZW5pY0luZGljYXRvcj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogTWFudWZhY3R1cmVyIG9mIHRoaXMgSW5ncmVkaWVudC5cclxuICAgKi9cclxuICBtYW51ZmFjdHVyZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBzcGVjaWZpZWQgc3Vic3RhbmNlIHRoYXQgY29tcHJpc2VzIHRoaXMgaW5ncmVkaWVudC5cclxuICAgKi9cclxuICBzcGVjaWZpZWRTdWJzdGFuY2U/OiBmaGlyLk1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgaW5ncmVkaWVudCBzdWJzdGFuY2UuXHJcbiAgICovXHJcbiAgc3Vic3RhbmNlPzogZmhpci5NZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudFN1YnN0YW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQW4gaW5ncmVkaWVudCBvZiBhIG1hbnVmYWN0dXJlZCBpdGVtIG9yIHBoYXJtYWNldXRpY2FsIHByb2R1Y3QuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnQgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ01lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50JztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIk1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50XCI7XHJcbiAgLyoqXHJcbiAgICogVGhlIGlkZW50aWZpZXIocykgb2YgdGhpcyBJbmdyZWRpZW50IHRoYXQgYXJlIGFzc2lnbmVkIGJ5IGJ1c2luZXNzIHByb2Nlc3NlcyBhbmQvb3IgdXNlZCB0byByZWZlciB0byBpdCB3aGVuIGEgZGlyZWN0IFVSTCByZWZlcmVuY2UgdG8gdGhlIHJlc291cmNlIGl0c2VsZiBpcyBub3QgYXBwcm9wcmlhdGUuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZ3JlZGllbnQgcm9sZSBlLmcuIEFjdGl2ZSBpbmdyZWRpZW50LCBleGNpcGllbnQuXHJcbiAgICovXHJcbiAgcHVibGljIHJvbGU6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhlIGluZ3JlZGllbnQgaXMgYSBrbm93biBvciBzdXNwZWN0ZWQgYWxsZXJnZW4uXHJcbiAgICovXHJcbiAgcHVibGljIGFsbGVyZ2VuaWNJbmRpY2F0b3I/OiBmaGlyLkZoaXJCb29sZWFufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBNYW51ZmFjdHVyZXIgb2YgdGhpcyBJbmdyZWRpZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtYW51ZmFjdHVyZXI6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogQSBzcGVjaWZpZWQgc3Vic3RhbmNlIHRoYXQgY29tcHJpc2VzIHRoaXMgaW5ncmVkaWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgc3BlY2lmaWVkU3Vic3RhbmNlOiBmaGlyLk1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlW107XHJcbiAgLyoqXHJcbiAgICogVGhlIGluZ3JlZGllbnQgc3Vic3RhbmNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdWJzdGFuY2U/OiBmaGlyLk1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3Vic3RhbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ01lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50JztcclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBuZXcgZmhpci5JZGVudGlmaWVyKHNvdXJjZS5pZGVudGlmaWVyKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncm9sZSddKSB7IHRoaXMucm9sZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2Uucm9sZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnJvbGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydhbGxlcmdlbmljSW5kaWNhdG9yJ10pIHsgdGhpcy5hbGxlcmdlbmljSW5kaWNhdG9yID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oe3ZhbHVlOiBzb3VyY2UuYWxsZXJnZW5pY0luZGljYXRvcn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfYWxsZXJnZW5pY0luZGljYXRvciddKSB7XHJcbiAgICAgIGlmICh0aGlzLmFsbGVyZ2VuaWNJbmRpY2F0b3IpIHsgdGhpcy5hbGxlcmdlbmljSW5kaWNhdG9yLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2FsbGVyZ2VuaWNJbmRpY2F0b3IhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5hbGxlcmdlbmljSW5kaWNhdG9yID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oc291cmNlLl9hbGxlcmdlbmljSW5kaWNhdG9yIGFzIFBhcnRpYWw8Zmhpci5GaGlyQm9vbGVhbkFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnbWFudWZhY3R1cmVyJ10pIHsgdGhpcy5tYW51ZmFjdHVyZXIgPSBzb3VyY2UubWFudWZhY3R1cmVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubWFudWZhY3R1cmVyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3NwZWNpZmllZFN1YnN0YW5jZSddKSB7IHRoaXMuc3BlY2lmaWVkU3Vic3RhbmNlID0gc291cmNlLnNwZWNpZmllZFN1YnN0YW5jZS5tYXAoKHgpID0+IG5ldyBmaGlyLk1lZGljaW5hbFByb2R1Y3RJbmdyZWRpZW50U3BlY2lmaWVkU3Vic3RhbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3BlY2lmaWVkU3Vic3RhbmNlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3N1YnN0YW5jZSddKSB7IHRoaXMuc3Vic3RhbmNlID0gbmV3IGZoaXIuTWVkaWNpbmFsUHJvZHVjdEluZ3JlZGllbnRTdWJzdGFuY2Uoc291cmNlLnN1YnN0YW5jZSk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdNZWRpY2luYWxQcm9kdWN0SW5ncmVkaWVudCcgfVxyXG4gICAgdGhpcy52UlMoJ3Jlc291cmNlVHlwZScsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2lkZW50aWZpZXInLGV4cClcclxuICAgIHRoaXMudlJTKCdyb2xlJyxleHApXHJcbiAgICB0aGlzLnZPUygnYWxsZXJnZW5pY0luZGljYXRvcicsZXhwKVxyXG4gICAgdGhpcy52T0EoJ21hbnVmYWN0dXJlcicsZXhwKVxyXG4gICAgdGhpcy52T0EoJ3NwZWNpZmllZFN1YnN0YW5jZScsZXhwKVxyXG4gICAgdGhpcy52T1MoJ3N1YnN0YW5jZScsZXhwKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuIl19