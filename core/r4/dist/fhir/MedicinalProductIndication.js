// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: MedicinalProductIndication
import * as fhir from '../fhir.js';
/**
 * Information about the use of the medicinal product in relation to other therapies described as part of the indication.
 */
export class MedicinalProductIndicationOtherTherapy extends fhir.BackboneElement {
    /**
     * Default constructor for MedicinalProductIndicationOtherTherapy - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['therapyRelationshipType']) {
            this.therapyRelationshipType = new fhir.CodeableConcept(source.therapyRelationshipType);
        }
        else {
            this.therapyRelationshipType = null;
        }
        if (source['medication']) {
            this.medication = source.medication;
        }
        else if (source['medicationCodeableConcept']) {
            this.medication = new fhir.CodeableConcept(source.medicationCodeableConcept);
        }
        else if (source['medicationReference']) {
            this.medication = new fhir.Reference(source.medicationReference);
        }
        else {
            this.medication = null;
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicinalProductIndication.otherTherapy';
        }
        iss.push(...this.vRS('therapyRelationshipType', exp));
        iss.push(...this.vRS('medication', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductIndicationOtherTherapy._fts_dataType = 'MedicinalProductIndicationOtherTherapy';
/**
 * Internal flag to properly serialize choice-type element MedicinalProductIndication.otherTherapy.medication[x]
 */
MedicinalProductIndicationOtherTherapy._fts_medicationIsChoice = true;
/**
 * Indication for the Medicinal Product.
 */
export class MedicinalProductIndication extends fhir.DomainResource {
    /**
     * Default constructor for MedicinalProductIndication - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'MedicinalProductIndication';
        if (source['subject']) {
            this.subject = source.subject.map((x) => new fhir.Reference(x));
        }
        else {
            this.subject = [];
        }
        if (source['diseaseSymptomProcedure']) {
            this.diseaseSymptomProcedure = new fhir.CodeableConcept(source.diseaseSymptomProcedure);
        }
        if (source['diseaseStatus']) {
            this.diseaseStatus = new fhir.CodeableConcept(source.diseaseStatus);
        }
        if (source['comorbidity']) {
            this.comorbidity = source.comorbidity.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.comorbidity = [];
        }
        if (source['intendedEffect']) {
            this.intendedEffect = new fhir.CodeableConcept(source.intendedEffect);
        }
        if (source['duration']) {
            this.duration = new fhir.Quantity(source.duration);
        }
        if (source['otherTherapy']) {
            this.otherTherapy = source.otherTherapy.map((x) => new fhir.MedicinalProductIndicationOtherTherapy(x));
        }
        else {
            this.otherTherapy = [];
        }
        if (source['undesirableEffect']) {
            this.undesirableEffect = source.undesirableEffect.map((x) => new fhir.Reference(x));
        }
        else {
            this.undesirableEffect = [];
        }
        if (source['population']) {
            this.population = source.population.map((x) => new fhir.Population(x));
        }
        else {
            this.population = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicinalProductIndication';
        }
        iss.push(...this.vOA('subject', exp));
        iss.push(...this.vOS('diseaseSymptomProcedure', exp));
        iss.push(...this.vOS('diseaseStatus', exp));
        iss.push(...this.vOA('comorbidity', exp));
        iss.push(...this.vOS('intendedEffect', exp));
        iss.push(...this.vOS('duration', exp));
        iss.push(...this.vOA('otherTherapy', exp));
        iss.push(...this.vOA('undesirableEffect', exp));
        iss.push(...this.vOA('population', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicinalProductIndication._fts_dataType = 'MedicinalProductIndication';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVkaWNpbmFsUHJvZHVjdEluZGljYXRpb24uanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL01lZGljaW5hbFByb2R1Y3RJbmRpY2F0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQiwrQ0FBK0M7QUFDL0Msa0NBQWtDO0FBQ2xDLDRDQUE0QztBQUU1QyxPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQXdCbkM7O0dBRUc7QUFDSCxNQUFNLE9BQU8sc0NBQXVDLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFpQjlFOztPQUVHO0lBQ0gsWUFBWSxTQUE2RCxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUNuSCxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLHlCQUF5QixDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsdUJBQXVCLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO1NBQUU7YUFDOUg7WUFBRSxJQUFJLENBQUMsdUJBQXVCLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDN0MsSUFBSSxNQUFNLENBQUMsWUFBWSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUM7U0FBRTthQUM3RCxJQUFJLE1BQU0sQ0FBQywyQkFBMkIsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLHlCQUF5QixDQUFDLENBQUM7U0FBRTthQUMxSCxJQUFJLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLG1CQUFtQixDQUFDLENBQUM7U0FBRTthQUN4RztZQUFFLElBQUksQ0FBQyxVQUFV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QUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDNUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDMUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsbUJBQW1CLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUMvQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN4QyxPQUFPLEdBQUcsQ0FBQztJQUNiLENBQUM7O0FBakZEOztHQUVHO0FBQzZCLHdDQUFhLEdBQVUsNEJBQTRCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjQuY29yZSB2ZXJzaW9uOiA0LjAuMVxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IE1lZGljaW5hbFByb2R1Y3RJbmRpY2F0aW9uXHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lZGljaW5hbFByb2R1Y3RJbmRpY2F0aW9uT3RoZXJUaGVyYXB5IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lZGljaW5hbFByb2R1Y3RJbmRpY2F0aW9uT3RoZXJUaGVyYXB5QXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIHR5cGUgb2YgcmVsYXRpb25zaGlwIGJldHdlZW4gdGhlIG1lZGljaW5hbCBwcm9kdWN0IGluZGljYXRpb24gb3IgY29udHJhaW5kaWNhdGlvbiBhbmQgYW5vdGhlciB0aGVyYXB5LlxyXG4gICAqL1xyXG4gIHRoZXJhcHlSZWxhdGlvbnNoaXBUeXBlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBSZWZlcmVuY2UgdG8gYSBzcGVjaWZpYyBtZWRpY2F0aW9uIChhY3RpdmUgc3Vic3RhbmNlLCBtZWRpY2luYWwgcHJvZHVjdCBvciBjbGFzcyBvZiBwcm9kdWN0cykgYXMgcGFydCBvZiBhbiBpbmRpY2F0aW9uIG9yIGNvbnRyYWluZGljYXRpb24uXHJcbiAgICovXHJcbiAgbWVkaWNhdGlvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0fGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBSZWZlcmVuY2UgdG8gYSBzcGVjaWZpYyBtZWRpY2F0aW9uIChhY3RpdmUgc3Vic3RhbmNlLCBtZWRpY2luYWwgcHJvZHVjdCBvciBjbGFzcyBvZiBwcm9kdWN0cykgYXMgcGFydCBvZiBhbiBpbmRpY2F0aW9uIG9yIGNvbnRyYWluZGljYXRpb24uXHJcbiAgICovXHJcbiAgbWVkaWNhdGlvbkNvZGVhYmxlQ29uY2VwdD86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUmVmZXJlbmNlIHRvIGEgc3BlY2lmaWMgbWVkaWNhdGlvbiAoYWN0aXZlIHN1YnN0YW5jZSwgbWVkaWNpbmFsIHByb2R1Y3Qgb3IgY2xhc3Mgb2YgcHJvZHVjdHMpIGFzIHBhcnQgb2YgYW4gaW5kaWNhdGlvbiBvciBjb250cmFpbmRpY2F0aW9uLlxyXG4gICAqL1xyXG4gIG1lZGljYXRpb25SZWZlcmVuY2U/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogSW5mb3JtYXRpb24gYWJvdXQgdGhlIHVzZSBvZiB0aGUgbWVkaWNpbmFsIHByb2R1Y3QgaW4gcmVsYXRpb24gdG8gb3RoZXIgdGhlcmFwaWVzIGRlc2NyaWJlZCBhcyBwYXJ0IG9mIHRoZSBpbmRpY2F0aW9uLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1lZGljaW5hbFByb2R1Y3RJbmRpY2F0aW9uT3RoZXJUaGVyYXB5IGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVkaWNpbmFsUHJvZHVjdEluZGljYXRpb25PdGhlclRoZXJhcHknO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0eXBlIG9mIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHRoZSBtZWRpY2luYWwgcHJvZHVjdCBpbmRpY2F0aW9uIG9yIGNvbnRyYWluZGljYXRpb24gYW5kIGFub3RoZXIgdGhlcmFweS5cclxuICAgKi9cclxuICBwdWJsaWMgdGhlcmFweVJlbGF0aW9uc2hpcFR5cGU6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogUmVmZXJlbmNlIHRvIGEgc3BlY2lmaWMgbWVkaWNhdGlvbiAoYWN0aXZlIHN1YnN0YW5jZSwgbWVkaWNpbmFsIHByb2R1Y3Qgb3IgY2xhc3Mgb2YgcHJvZHVjdHMpIGFzIHBhcnQgb2YgYW4gaW5kaWNhdGlvbiBvciBjb250cmFpbmRpY2F0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtZWRpY2F0aW9uOiAoZmhpci5Db2RlYWJsZUNvbmNlcHR8Zmhpci5SZWZlcmVuY2UpfG51bGw7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBNZWRpY2luYWxQcm9kdWN0SW5kaWNhdGlvbi5vdGhlclRoZXJhcHkubWVkaWNhdGlvblt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c19tZWRpY2F0aW9uSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgTWVkaWNpbmFsUHJvZHVjdEluZGljYXRpb25PdGhlclRoZXJhcHkgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxNZWRpY2luYWxQcm9kdWN0SW5kaWNhdGlvbk90aGVyVGhlcmFweUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWyd0aGVyYXB5UmVsYXRpb25zaGlwVHlwZSddKSB7IHRoaXMudGhlcmFweVJlbGF0aW9uc2hpcFR5cGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnRoZXJhcHlSZWxhdGlvbnNoaXBUeXBlKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudGhlcmFweVJlbGF0aW9uc2hpcFR5cGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydtZWRpY2F0aW9uJ10pIHsgdGhpcy5tZWRpY2F0aW9uID0gc291cmNlLm1lZGljYXRpb247IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnbWVkaWNhdGlvbkNvZGVhYmxlQ29uY2VwdCddKSB7IHRoaXMubWVkaWNhdGlvbiA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UubWVkaWNhdGlvbkNvZGVhYmxlQ29uY2VwdCk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnbWVkaWNhdGlvblJlZmVyZW5jZSddKSB7IHRoaXMubWVkaWNhdGlvbiA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UubWVkaWNhdGlvblJlZmVyZW5jZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm1lZGljYXRpb24gPSBudWxsOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnTWVkaWNpbmFsUHJvZHVjdEluZGljYXRpb24ub3RoZXJUaGVyYXB5JyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygndGhlcmFweVJlbGF0aW9uc2hpcFR5cGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ21lZGljYXRpb24nLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lZGljaW5hbFByb2R1Y3RJbmRpY2F0aW9uIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lZGljaW5hbFByb2R1Y3RJbmRpY2F0aW9uQXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiTWVkaWNpbmFsUHJvZHVjdEluZGljYXRpb25cInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG1lZGljYXRpb24gZm9yIHdoaWNoIHRoaXMgaXMgYW4gaW5kaWNhdGlvbi5cclxuICAgKi9cclxuICBzdWJqZWN0PzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkaXNlYXNlLCBzeW1wdG9tIG9yIHByb2NlZHVyZSB0aGF0IGlzIHRoZSBpbmRpY2F0aW9uIGZvciB0cmVhdG1lbnQuXHJcbiAgICovXHJcbiAgZGlzZWFzZVN5bXB0b21Qcm9jZWR1cmU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzdGF0dXMgb2YgdGhlIGRpc2Vhc2Ugb3Igc3ltcHRvbSBmb3Igd2hpY2ggdGhlIGluZGljYXRpb24gYXBwbGllcy5cclxuICAgKi9cclxuICBkaXNlYXNlU3RhdHVzPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDb21vcmJpZGl0eSAoY29uY3VycmVudCBjb25kaXRpb24pIG9yIGNvLWluZmVjdGlvbiBhcyBwYXJ0IG9mIHRoZSBpbmRpY2F0aW9uLlxyXG4gICAqL1xyXG4gIGNvbW9yYmlkaXR5PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpbnRlbmRlZCBlZmZlY3QsIGFpbSBvciBzdHJhdGVneSB0byBiZSBhY2hpZXZlZCBieSB0aGUgaW5kaWNhdGlvbi5cclxuICAgKi9cclxuICBpbnRlbmRlZEVmZmVjdD86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGltaW5nIG9yIGR1cmF0aW9uIGluZm9ybWF0aW9uIGFzIHBhcnQgb2YgdGhlIGluZGljYXRpb24uXHJcbiAgICovXHJcbiAgZHVyYXRpb24/OiBmaGlyLlF1YW50aXR5QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5mb3JtYXRpb24gYWJvdXQgdGhlIHVzZSBvZiB0aGUgbWVkaWNpbmFsIHByb2R1Y3QgaW4gcmVsYXRpb24gdG8gb3RoZXIgdGhlcmFwaWVzIGRlc2NyaWJlZCBhcyBwYXJ0IG9mIHRoZSBpbmRpY2F0aW9uLlxyXG4gICAqL1xyXG4gIG90aGVyVGhlcmFweT86IGZoaXIuTWVkaWNpbmFsUHJvZHVjdEluZGljYXRpb25PdGhlclRoZXJhcHlBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlIHRoZSB1bmRlc2lyYWJsZSBlZmZlY3RzIG9mIHRoZSBtZWRpY2luYWwgcHJvZHVjdC5cclxuICAgKi9cclxuICB1bmRlc2lyYWJsZUVmZmVjdD86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcG9wdWxhdGlvbiBncm91cCB0byB3aGljaCB0aGlzIGFwcGxpZXMuXHJcbiAgICovXHJcbiAgcG9wdWxhdGlvbj86IGZoaXIuUG9wdWxhdGlvbkFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbmRpY2F0aW9uIGZvciB0aGUgTWVkaWNpbmFsIFByb2R1Y3QuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNpbmFsUHJvZHVjdEluZGljYXRpb24gZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ01lZGljaW5hbFByb2R1Y3RJbmRpY2F0aW9uJztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIk1lZGljaW5hbFByb2R1Y3RJbmRpY2F0aW9uXCI7XHJcbiAgLyoqXHJcbiAgICogVGhlIG1lZGljYXRpb24gZm9yIHdoaWNoIHRoaXMgaXMgYW4gaW5kaWNhdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgc3ViamVjdDogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBUaGUgZGlzZWFzZSwgc3ltcHRvbSBvciBwcm9jZWR1cmUgdGhhdCBpcyB0aGUgaW5kaWNhdGlvbiBmb3IgdHJlYXRtZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkaXNlYXNlU3ltcHRvbVByb2NlZHVyZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc3RhdHVzIG9mIHRoZSBkaXNlYXNlIG9yIHN5bXB0b20gZm9yIHdoaWNoIHRoZSBpbmRpY2F0aW9uIGFwcGxpZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGRpc2Vhc2VTdGF0dXM/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ29tb3JiaWRpdHkgKGNvbmN1cnJlbnQgY29uZGl0aW9uKSBvciBjby1pbmZlY3Rpb24gYXMgcGFydCBvZiB0aGUgaW5kaWNhdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgY29tb3JiaWRpdHk6IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogVGhlIGludGVuZGVkIGVmZmVjdCwgYWltIG9yIHN0cmF0ZWd5IHRvIGJlIGFjaGlldmVkIGJ5IHRoZSBpbmRpY2F0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpbnRlbmRlZEVmZmVjdD86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaW1pbmcgb3IgZHVyYXRpb24gaW5mb3JtYXRpb24gYXMgcGFydCBvZiB0aGUgaW5kaWNhdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgZHVyYXRpb24/OiBmaGlyLlF1YW50aXR5fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmZvcm1hdGlvbiBhYm91dCB0aGUgdXNlIG9mIHRoZSBtZWRpY2luYWwgcHJvZHVjdCBpbiByZWxhdGlvbiB0byBvdGhlciB0aGVyYXBpZXMgZGVzY3JpYmVkIGFzIHBhcnQgb2YgdGhlIGluZGljYXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIG90aGVyVGhlcmFweTogZmhpci5NZWRpY2luYWxQcm9kdWN0SW5kaWNhdGlvbk90aGVyVGhlcmFweVtdO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlIHRoZSB1bmRlc2lyYWJsZSBlZmZlY3RzIG9mIHRoZSBtZWRpY2luYWwgcHJvZHVjdC5cclxuICAgKi9cclxuICBwdWJsaWMgdW5kZXNpcmFibGVFZmZlY3Q6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogVGhlIHBvcHVsYXRpb24gZ3JvdXAgdG8gd2hpY2ggdGhpcyBhcHBsaWVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwb3B1bGF0aW9uOiBmaGlyLlBvcHVsYXRpb25bXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBNZWRpY2luYWxQcm9kdWN0SW5kaWNhdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE1lZGljaW5hbFByb2R1Y3RJbmRpY2F0aW9uQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ01lZGljaW5hbFByb2R1Y3RJbmRpY2F0aW9uJztcclxuICAgIGlmIChzb3VyY2VbJ3N1YmplY3QnXSkgeyB0aGlzLnN1YmplY3QgPSBzb3VyY2Uuc3ViamVjdC5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN1YmplY3QgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGlzZWFzZVN5bXB0b21Qcm9jZWR1cmUnXSkgeyB0aGlzLmRpc2Vhc2VTeW1wdG9tUHJvY2VkdXJlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5kaXNlYXNlU3ltcHRvbVByb2NlZHVyZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2Rpc2Vhc2VTdGF0dXMnXSkgeyB0aGlzLmRpc2Vhc2VTdGF0dXMgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmRpc2Vhc2VTdGF0dXMpOyB9XHJcbiAgICBpZiAoc291cmNlWydjb21vcmJpZGl0eSddKSB7IHRoaXMuY29tb3JiaWRpdHkgPSBzb3VyY2UuY29tb3JiaWRpdHkubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb21vcmJpZGl0eSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydpbnRlbmRlZEVmZmVjdCddKSB7IHRoaXMuaW50ZW5kZWRFZmZlY3QgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmludGVuZGVkRWZmZWN0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZHVyYXRpb24nXSkgeyB0aGlzLmR1cmF0aW9uID0gbmV3IGZoaXIuUXVhbnRpdHkoc291cmNlLmR1cmF0aW9uKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnb3RoZXJUaGVyYXB5J10pIHsgdGhpcy5vdGhlclRoZXJhcHkgPSBzb3VyY2Uub3RoZXJUaGVyYXB5Lm1hcCgoeCkgPT4gbmV3IGZoaXIuTWVkaWNpbmFsUHJvZHVjdEluZGljYXRpb25PdGhlclRoZXJhcHkoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5vdGhlclRoZXJhcHkgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndW5kZXNpcmFibGVFZmZlY3QnXSkgeyB0aGlzLnVuZGVzaXJhYmxlRWZmZWN0ID0gc291cmNlLnVuZGVzaXJhYmxlRWZmZWN0Lm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudW5kZXNpcmFibGVFZmZlY3QgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncG9wdWxhdGlvbiddKSB7IHRoaXMucG9wdWxhdGlvbiA9IHNvdXJjZS5wb3B1bGF0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuUG9wdWxhdGlvbih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnBvcHVsYXRpb24gPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ01lZGljaW5hbFByb2R1Y3RJbmRpY2F0aW9uJyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnc3ViamVjdCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnZGlzZWFzZVN5bXB0b21Qcm9jZWR1cmUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2Rpc2Vhc2VTdGF0dXMnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2NvbW9yYmlkaXR5JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdpbnRlbmRlZEVmZmVjdCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnZHVyYXRpb24nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ290aGVyVGhlcmFweScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgndW5kZXNpcmFibGVFZmZlY3QnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3BvcHVsYXRpb24nLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuIl19