// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: QuestionnaireResponse
import * as fhir from '../fhir.js';
// @ts-ignore
import { QuestionnaireAnswersStatusVsValidation } from '../fhirValueSets/QuestionnaireAnswersStatusVsValidation.js';
/**
 * The value is nested because we cannot have a repeating structure that has variable type.
 */
export class QuestionnaireResponseItemAnswer extends fhir.BackboneElement {
    /**
     * Default constructor for QuestionnaireResponseItemAnswer - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['value']) {
            this.value = source.value;
        }
        else if (source['valueBoolean']) {
            this.value = new fhir.FhirBoolean({ value: source.valueBoolean });
        }
        else if (source['valueDecimal']) {
            this.value = new fhir.FhirDecimal({ value: source.valueDecimal });
        }
        else if (source['valueInteger']) {
            this.value = new fhir.FhirInteger({ value: source.valueInteger });
        }
        else if (source['valueDate']) {
            this.value = new fhir.FhirDate({ value: source.valueDate });
        }
        else if (source['valueDateTime']) {
            this.value = new fhir.FhirDateTime({ value: source.valueDateTime });
        }
        else if (source['valueTime']) {
            this.value = new fhir.FhirTime({ value: source.valueTime });
        }
        else if (source['valueString']) {
            this.value = new fhir.FhirString({ value: source.valueString });
        }
        else if (source['valueUri']) {
            this.value = new fhir.FhirUri({ value: source.valueUri });
        }
        else if (source['valueAttachment']) {
            this.value = new fhir.Attachment(source.valueAttachment);
        }
        else if (source['valueCoding']) {
            this.value = new fhir.Coding(source.valueCoding);
        }
        else if (source['valueQuantity']) {
            this.value = new fhir.Quantity(source.valueQuantity);
        }
        else if (source['valueReference']) {
            this.value = new fhir.Reference(source.valueReference);
        }
        if (source['item']) {
            this.item = source.item.map((x) => new fhir.QuestionnaireResponseItem(x));
        }
        else {
            this.item = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'QuestionnaireResponse.item.answer';
        }
        this.vOS('value', exp);
        this.vOA('item', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
QuestionnaireResponseItemAnswer._fts_dataType = 'QuestionnaireResponseItemAnswer';
/**
 * Internal flag to properly serialize choice-type element QuestionnaireResponse.item.answer.value[x]
 */
QuestionnaireResponseItemAnswer._fts_valueIsChoice = true;
/**
 * Groups cannot have answers and therefore must nest directly within item. When dealing with questions, nesting must occur within each answer because some questions may have multiple answers (and the nesting occurs for each answer).
 */
export class QuestionnaireResponseItem extends fhir.BackboneElement {
    /**
     * Default constructor for QuestionnaireResponseItem - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['linkId']) {
            this.linkId = new fhir.FhirString({ value: source.linkId });
        }
        else {
            this.linkId = null;
        }
        if (source['_linkId']) {
            if (this.linkId) {
                this.linkId.addExtendedProperties(source._linkId);
            }
            else {
                this.linkId = new fhir.FhirString(source._linkId);
            }
        }
        if (source['definition']) {
            this.definition = new fhir.FhirUri({ value: source.definition });
        }
        if (source['_definition']) {
            if (this.definition) {
                this.definition.addExtendedProperties(source._definition);
            }
            else {
                this.definition = new fhir.FhirUri(source._definition);
            }
        }
        if (source['text']) {
            this.text = new fhir.FhirString({ value: source.text });
        }
        if (source['_text']) {
            if (this.text) {
                this.text.addExtendedProperties(source._text);
            }
            else {
                this.text = new fhir.FhirString(source._text);
            }
        }
        if (source['answer']) {
            this.answer = source.answer.map((x) => new fhir.QuestionnaireResponseItemAnswer(x));
        }
        else {
            this.answer = [];
        }
        if (source['item']) {
            this.item = source.item.map((x) => new fhir.QuestionnaireResponseItem(x));
        }
        else {
            this.item = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'QuestionnaireResponse.item';
        }
        this.vRS('linkId', exp);
        this.vOS('definition', exp);
        this.vOS('text', exp);
        this.vOA('answer', exp);
        this.vOA('item', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
QuestionnaireResponseItem._fts_dataType = 'QuestionnaireResponseItem';
/**
 * A structured set of questions and their answers. The questions are ordered and grouped into coherent subsets, corresponding to the structure of the grouping of the questionnaire being responded to.
 */
export class QuestionnaireResponse extends fhir.DomainResource {
    /**
     * Default constructor for QuestionnaireResponse - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'QuestionnaireResponse';
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier);
        }
        if (source['basedOn']) {
            this.basedOn = source.basedOn.map((x) => new fhir.Reference(x));
        }
        else {
            this.basedOn = [];
        }
        if (source['partOf']) {
            this.partOf = source.partOf.map((x) => new fhir.Reference(x));
        }
        else {
            this.partOf = [];
        }
        if (source['questionnaire']) {
            this.questionnaire = new fhir.FhirCanonical({ value: source.questionnaire });
        }
        if (source['_questionnaire']) {
            if (this.questionnaire) {
                this.questionnaire.addExtendedProperties(source._questionnaire);
            }
            else {
                this.questionnaire = new fhir.FhirCanonical(source._questionnaire);
            }
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject);
        }
        if (source['encounter']) {
            this.encounter = new fhir.Reference(source.encounter);
        }
        if (source['authored']) {
            this.authored = new fhir.FhirDateTime({ value: source.authored });
        }
        if (source['_authored']) {
            if (this.authored) {
                this.authored.addExtendedProperties(source._authored);
            }
            else {
                this.authored = new fhir.FhirDateTime(source._authored);
            }
        }
        if (source['author']) {
            this.author = new fhir.Reference(source.author);
        }
        if (source['source']) {
            this.source = new fhir.Reference(source.source);
        }
        if (source['item']) {
            this.item = source.item.map((x) => new fhir.QuestionnaireResponseItem(x));
        }
        else {
            this.item = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'QuestionnaireResponse';
        }
        this.vRS('resourceType', exp);
        this.vOS('identifier', exp);
        this.vOA('basedOn', exp);
        this.vOA('partOf', exp);
        this.vOS('questionnaire', exp);
        this.vRSV('status', exp, 'QuestionnaireAnswersStatus', QuestionnaireAnswersStatusVsValidation, 'r');
        this.vOS('subject', exp);
        this.vOS('encounter', exp);
        this.vOS('authored', exp);
        this.vOS('author', exp);
        this.vOS('source', exp);
        this.vOA('item', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
QuestionnaireResponse._fts_dataType = 'QuestionnaireResponse';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUXVlc3Rpb25uYWlyZVJlc3BvbnNlLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9RdWVzdGlvbm5haXJlUmVzcG9uc2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsdUNBQXVDO0FBRXZDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBSW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsc0NBQXNDLEVBQUUsTUFBTSw0REFBNEQsQ0FBQztBQStEcEg7O0dBRUc7QUFDSCxNQUFNLE9BQU8sK0JBQWdDLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFpQnZFOztPQUVHO0lBQ0gsWUFBWSxTQUFzRCxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUM1RyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDO1NBQUU7YUFDOUMsSUFBSSxNQUFNLENBQUMsY0FBYyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsWUFBWSxFQUFDLENBQUMsQ0FBQztTQUFFO2FBQ2hHLElBQUksTUFBTSxDQUFDLGNBQWMsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLFlBQVksRUFBQyxDQUFDLENBQUM7U0FBRTthQUNoRyxJQUFJLE1BQU0sQ0FBQyxjQUFjLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxZQUFZLEVB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QUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUN0QixJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUN0QixJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUNwQixPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQTFHRDs7R0FFRztBQUM2QixtQ0FBYSxHQUFVLHVCQUF1QixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0LmNvcmUgdmVyc2lvbjogNC4wLjFcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBRdWVzdGlvbm5haXJlUmVzcG9uc2VcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFF1ZXN0aW9ubmFpcmVBbnN3ZXJzU3RhdHVzQ29kZXMsICBRdWVzdGlvbm5haXJlQW5zd2Vyc1N0YXR1c0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9RdWVzdGlvbm5haXJlQW5zd2Vyc1N0YXR1c0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBRdWVzdGlvbm5haXJlQW5zd2Vyc1N0YXR1c1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUXVlc3Rpb25uYWlyZUFuc3dlcnNTdGF0dXNWc1ZhbGlkYXRpb24uanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgUXVlc3Rpb25uYWlyZVJlc3BvbnNlSXRlbUFuc3dlciB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBRdWVzdGlvbm5haXJlUmVzcG9uc2VJdGVtQW5zd2VyQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogTW9yZSBjb21wbGV4IHN0cnVjdHVyZXMgKEF0dGFjaG1lbnQsIFJlc291cmNlIGFuZCBRdWFudGl0eSkgd2lsbCB0eXBpY2FsbHkgYmUgbGltaXRlZCB0byBlbGVjdHJvbmljIGZvcm1zIHRoYXQgY2FuIGV4cG9zZSBhbiBhcHByb3ByaWF0ZSB1c2VyIGludGVyZmFjZSB0byBjYXB0dXJlIHRoZSBjb21wb25lbnRzIGFuZCBlbmZvcmNlIHRoZSBjb25zdHJhaW50cyBvZiBhIGNvbXBsZXggZGF0YSB0eXBlLiAgQWRkaXRpb25hbCBjb21wbGV4IHR5cGVzIGNhbiBiZSBpbnRyb2R1Y2VkIHRocm91Z2ggZXh0ZW5zaW9ucy4gTXVzdCBtYXRjaCB0aGUgZGF0YXR5cGUgc3BlY2lmaWVkIGJ5IFF1ZXN0aW9ubmFpcmUuaXRlbS50eXBlIGluIHRoZSBjb3JyZXNwb25kaW5nIFF1ZXN0aW9ubmFpcmUuXHJcbiAgICovXHJcbiAgdmFsdWU/OiBmaGlyLkZoaXJCb29sZWFufGZoaXIuRmhpckRlY2ltYWx8Zmhpci5GaGlySW50ZWdlcnxmaGlyLkZoaXJEYXRlfGZoaXIuRmhpckRhdGVUaW1lfGZoaXIuRmhpclRpbWV8Zmhpci5GaGlyU3RyaW5nfGZoaXIuRmhpclVyaXxmaGlyLkF0dGFjaG1lbnR8Zmhpci5Db2Rpbmd8Zmhpci5RdWFudGl0eXxmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTW9yZSBjb21wbGV4IHN0cnVjdHVyZXMgKEF0dGFjaG1lbnQsIFJlc291cmNlIGFuZCBRdWFudGl0eSkgd2lsbCB0eXBpY2FsbHkgYmUgbGltaXRlZCB0byBlbGVjdHJvbmljIGZvcm1zIHRoYXQgY2FuIGV4cG9zZSBhbiBhcHByb3ByaWF0ZSB1c2VyIGludGVyZmFjZSB0byBjYXB0dXJlIHRoZSBjb21wb25lbnRzIGFuZCBlbmZvcmNlIHRoZSBjb25zdHJhaW50cyBvZiBhIGNvbXBsZXggZGF0YSB0eXBlLiAgQWRkaXRpb25hbCBjb21wbGV4IHR5cGVzIGNhbiBiZSBpbnRyb2R1Y2VkIHRocm91Z2ggZXh0ZW5zaW9ucy4gTXVzdCBtYXRjaCB0aGUgZGF0YXR5cGUgc3BlY2lmaWVkIGJ5IFF1ZXN0aW9ubmFpcmUuaXRlbS50eXBlIGluIHRoZSBjb3JyZXNwb25kaW5nIFF1ZXN0aW9ubmFpcmUuXHJcbiAgICovXHJcbiAgdmFsdWVCb29sZWFuPzogZmhpci5GaGlyQm9vbGVhbnxib29sZWFufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBNb3JlIGNvbXBsZXggc3RydWN0dXJlcyAoQXR0YWNobWVudCwgUmVzb3VyY2UgYW5kIFF1YW50aXR5KSB3aWxsIHR5cGljYWxseSBiZSBsaW1pdGVkIHRvIGVsZWN0cm9uaWMgZm9ybXMgdGhhdCBjYW4gZXhwb3NlIGFuIGFwcHJvcHJpYXRlIHVzZXIgaW50ZXJmYWNlIHRvIGNhcHR1cmUgdGhlIGNvbXBvbmVudHMgYW5kIGVuZm9yY2UgdGhlIGNvbnN0cmFpbnRzIG9mIGEgY29tcGxleCBkYXRhIHR5cGUuICBBZGRpdGlvbmFsIGNvbXBsZXggdHlwZXMgY2FuIGJlIGludHJvZHVjZWQgdGhyb3VnaCBleHRlbnNpb25zLiBNdXN0IG1hdGNoIHRoZSBkYXRhdHlwZSBzcGVjaWZpZWQgYnkgUXVlc3Rpb25uYWlyZS5pdGVtLnR5cGUgaW4gdGhlIGNvcnJlc3BvbmRpbmcgUXVlc3Rpb25uYWlyZS5cclxuICAgKi9cclxuICB2YWx1ZURlY2ltYWw/OiBmaGlyLkZoaXJEZWNpbWFsfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTW9yZSBjb21wbGV4IHN0cnVjdHVyZXMgKEF0dGFjaG1lbnQsIFJlc291cmNlIGFuZCBRdWFudGl0eSkgd2lsbCB0eXBpY2FsbHkgYmUgbGltaXRlZCB0byBlbGVjdHJvbmljIGZvcm1zIHRoYXQgY2FuIGV4cG9zZSBhbiBhcHByb3ByaWF0ZSB1c2VyIGludGVyZmFjZSB0byBjYXB0dXJlIHRoZSBjb21wb25lbnRzIGFuZCBlbmZvcmNlIHRoZSBjb25zdHJhaW50cyBvZiBhIGNvbXBsZXggZGF0YSB0eXBlLiAgQWRkaXRpb25hbCBjb21wbGV4IHR5cGVzIGNhbiBiZSBpbnRyb2R1Y2VkIHRocm91Z2ggZXh0ZW5zaW9ucy4gTXVzdCBtYXRjaCB0aGUgZGF0YXR5cGUgc3BlY2lmaWVkIGJ5IFF1ZXN0aW9ubmFpcmUuaXRlbS50eXBlIGluIHRoZSBjb3JyZXNwb25kaW5nIFF1ZXN0aW9ubmFpcmUuXHJcbiAgICovXHJcbiAgdmFsdWVJbnRlZ2VyPzogZmhpci5GaGlySW50ZWdlcnxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE1vcmUgY29tcGxleCBzdHJ1Y3R1cmVzIChBdHRhY2htZW50LCBSZXNvdXJjZSBhbmQgUXVhbnRpdHkpIHdpbGwgdHlwaWNhbGx5IGJlIGxpbWl0ZWQgdG8gZWxlY3Ryb25pYyBmb3JtcyB0aGF0IGNhbiBleHBvc2UgYW4gYXBwcm9wcmlhdGUgdXNlciBpbnRlcmZhY2UgdG8gY2FwdHVyZSB0aGUgY29tcG9uZW50cyBhbmQgZW5mb3JjZSB0aGUgY29uc3RyYWludHMgb2YgYSBjb21wbGV4IGRhdGEgdHlwZS4gIEFkZGl0aW9uYWwgY29tcGxleCB0eXBlcyBjYW4gYmUgaW50cm9kdWNlZCB0aHJvdWdoIGV4dGVuc2lvbnMuIE11c3QgbWF0Y2ggdGhlIGRhdGF0eXBlIHNwZWNpZmllZCBieSBRdWVzdGlvbm5haXJlLml0ZW0udHlwZSBpbiB0aGUgY29ycmVzcG9uZGluZyBRdWVzdGlvbm5haXJlLlxyXG4gICAqL1xyXG4gIHZhbHVlRGF0ZT86IGZoaXIuRmhpckRhdGV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBNb3JlIGNvbXBsZXggc3RydWN0dXJlcyAoQXR0YWNobWVudCwgUmVzb3VyY2UgYW5kIFF1YW50aXR5KSB3aWxsIHR5cGljYWxseSBiZSBsaW1pdGVkIHRvIGVsZWN0cm9uaWMgZm9ybXMgdGhhdCBjYW4gZXhwb3NlIGFuIGFwcHJvcHJpYXRlIHVzZXIgaW50ZXJmYWNlIHRvIGNhcHR1cmUgdGhlIGNvbXBvbmVudHMgYW5kIGVuZm9yY2UgdGhlIGNvbnN0cmFpbnRzIG9mIGEgY29tcGxleCBkYXRhIHR5cGUuICBBZGRpdGlvbmFsIGNvbXBsZXggdHlwZXMgY2FuIGJlIGludHJvZHVjZWQgdGhyb3VnaCBleHRlbnNpb25zLiBNdXN0IG1hdGNoIHRoZSBkYXRhdHlwZSBzcGVjaWZpZWQgYnkgUXVlc3Rpb25uYWlyZS5pdGVtLnR5cGUgaW4gdGhlIGNvcnJlc3BvbmRpbmcgUXVlc3Rpb25uYWlyZS5cclxuICAgKi9cclxuICB2YWx1ZURhdGVUaW1lPzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBNb3JlIGNvbXBsZXggc3RydWN0dXJlcyAoQXR0YWNobWVudCwgUmVzb3VyY2UgYW5kIFF1YW50aXR5KSB3aWxsIHR5cGljYWxseSBiZSBsaW1pdGVkIHRvIGVsZWN0cm9uaWMgZm9ybXMgdGhhdCBjYW4gZXhwb3NlIGFuIGFwcHJvcHJpYXRlIHVzZXIgaW50ZXJmYWNlIHRvIGNhcHR1cmUgdGhlIGNvbXBvbmVudHMgYW5kIGVuZm9yY2UgdGhlIGNvbnN0cmFpbnRzIG9mIGEgY29tcGxleCBkYXRhIHR5cGUuICBBZGRpdGlvbmFsIGNvbXBsZXggdHlwZXMgY2FuIGJlIGludHJvZHVjZWQgdGhyb3VnaCBleHRlbnNpb25zLiBNdXN0IG1hdGNoIHRoZSBkYXRhdHlwZSBzcGVjaWZpZWQgYnkgUXVlc3Rpb25uYWlyZS5pdGVtLnR5cGUgaW4gdGhlIGNvcnJlc3BvbmRpbmcgUXVlc3Rpb25uYWlyZS5cclxuICAgKi9cclxuICB2YWx1ZVRpbWU/OiBmaGlyLkZoaXJUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTW9yZSBjb21wbGV4IHN0cnVjdHVyZXMgKEF0dGFjaG1lbnQsIFJlc291cmNlIGFuZCBRdWFudGl0eSkgd2lsbCB0eXBpY2FsbHkgYmUgbGltaXRlZCB0byBlbGVjdHJvbmljIGZvcm1zIHRoYXQgY2FuIGV4cG9zZSBhbiBhcHByb3ByaWF0ZSB1c2VyIGludGVyZmFjZSB0byBjYXB0dXJlIHRoZSBjb21wb25lbnRzIGFuZCBlbmZvcmNlIHRoZSBjb25zdHJhaW50cyBvZiBhIGNvbXBsZXggZGF0YSB0eXBlLiAgQWRkaXRpb25hbCBjb21wbGV4IHR5cGVzIGNhbiBiZSBpbnRyb2R1Y2VkIHRocm91Z2ggZXh0ZW5zaW9ucy4gTXVzdCBtYXRjaCB0aGUgZGF0YXR5cGUgc3BlY2lmaWVkIGJ5IFF1ZXN0aW9ubmFpcmUuaXRlbS50eXBlIGluIHRoZSBjb3JyZXNwb25kaW5nIFF1ZXN0aW9ubmFpcmUuXHJcbiAgICovXHJcbiAgdmFsdWVTdHJpbmc/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBNb3JlIGNvbXBsZXggc3RydWN0dXJlcyAoQXR0YWNobWVudCwgUmVzb3VyY2UgYW5kIFF1YW50aXR5KSB3aWxsIHR5cGljYWxseSBiZSBsaW1pdGVkIHRvIGVsZWN0cm9uaWMgZm9ybXMgdGhhdCBjYW4gZXhwb3NlIGFuIGFwcHJvcHJpYXRlIHVzZXIgaW50ZXJmYWNlIHRvIGNhcHR1cmUgdGhlIGNvbXBvbmVudHMgYW5kIGVuZm9yY2UgdGhlIGNvbnN0cmFpbnRzIG9mIGEgY29tcGxleCBkYXRhIHR5cGUuICBBZGRpdGlvbmFsIGNvbXBsZXggdHlwZXMgY2FuIGJlIGludHJvZHVjZWQgdGhyb3VnaCBleHRlbnNpb25zLiBNdXN0IG1hdGNoIHRoZSBkYXRhdHlwZSBzcGVjaWZpZWQgYnkgUXVlc3Rpb25uYWlyZS5pdGVtLnR5cGUgaW4gdGhlIGNvcnJlc3BvbmRpbmcgUXVlc3Rpb25uYWlyZS5cclxuICAgKi9cclxuICB2YWx1ZVVyaT86IGZoaXIuRmhpclVyaXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE1vcmUgY29tcGxleCBzdHJ1Y3R1cmVzIChBdHRhY2htZW50LCBSZXNvdXJjZSBhbmQgUXVhbnRpdHkpIHdpbGwgdHlwaWNhbGx5IGJlIGxpbWl0ZWQgdG8gZWxlY3Ryb25pYyBmb3JtcyB0aGF0IGNhbiBleHBvc2UgYW4gYXBwcm9wcmlhdGUgdXNlciBpbnRlcmZhY2UgdG8gY2FwdHVyZSB0aGUgY29tcG9uZW50cyBhbmQgZW5mb3JjZSB0aGUgY29uc3RyYWludHMgb2YgYSBjb21wbGV4IGRhdGEgdHlwZS4gIEFkZGl0aW9uYWwgY29tcGxleCB0eXBlcyBjYW4gYmUgaW50cm9kdWNlZCB0aHJvdWdoIGV4dGVuc2lvbnMuIE11c3QgbWF0Y2ggdGhlIGRhdGF0eXBlIHNwZWNpZmllZCBieSBRdWVzdGlvbm5haXJlLml0ZW0udHlwZSBpbiB0aGUgY29ycmVzcG9uZGluZyBRdWVzdGlvbm5haXJlLlxyXG4gICAqL1xyXG4gIHZhbHVlQXR0YWNobWVudD86IGZoaXIuQXR0YWNobWVudEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE1vcmUgY29tcGxleCBzdHJ1Y3R1cmVzIChBdHRhY2htZW50LCBSZXNvdXJjZSBhbmQgUXVhbnRpdHkpIHdpbGwgdHlwaWNhbGx5IGJlIGxpbWl0ZWQgdG8gZWxlY3Ryb25pYyBmb3JtcyB0aGF0IGNhbiBleHBvc2UgYW4gYXBwcm9wcmlhdGUgdXNlciBpbnRlcmZhY2UgdG8gY2FwdHVyZSB0aGUgY29tcG9uZW50cyBhbmQgZW5mb3JjZSB0aGUgY29uc3RyYWludHMgb2YgYSBjb21wbGV4IGRhdGEgdHlwZS4gIEFkZGl0aW9uYWwgY29tcGxleCB0eXBlcyBjYW4gYmUgaW50cm9kdWNlZCB0aHJvdWdoIGV4dGVuc2lvbnMuIE11c3QgbWF0Y2ggdGhlIGRhdGF0eXBlIHNwZWNpZmllZCBieSBRdWVzdGlvbm5haXJlLml0ZW0udHlwZSBpbiB0aGUgY29ycmVzcG9uZGluZyBRdWVzdGlvbm5haXJlLlxyXG4gICAqL1xyXG4gIHZhbHVlQ29kaW5nPzogZmhpci5Db2RpbmdBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBNb3JlIGNvbXBsZXggc3RydWN0dXJlcyAoQXR0YWNobWVudCwgUmVzb3VyY2UgYW5kIFF1YW50aXR5KSB3aWxsIHR5cGljYWxseSBiZSBsaW1pdGVkIHRvIGVsZWN0cm9uaWMgZm9ybXMgdGhhdCBjYW4gZXhwb3NlIGFuIGFwcHJvcHJpYXRlIHVzZXIgaW50ZXJmYWNlIHRvIGNhcHR1cmUgdGhlIGNvbXBvbmVudHMgYW5kIGVuZm9yY2UgdGhlIGNvbnN0cmFpbnRzIG9mIGEgY29tcGxleCBkYXRhIHR5cGUuICBBZGRpdGlvbmFsIGNvbXBsZXggdHlwZXMgY2FuIGJlIGludHJvZHVjZWQgdGhyb3VnaCBleHRlbnNpb25zLiBNdXN0IG1hdGNoIHRoZSBkYXRhdHlwZSBzcGVjaWZpZWQgYnkgUXVlc3Rpb25uYWlyZS5pdGVtLnR5cGUgaW4gdGhlIGNvcnJlc3BvbmRpbmcgUXVlc3Rpb25uYWlyZS5cclxuICAgKi9cclxuICB2YWx1ZVF1YW50aXR5PzogZmhpci5RdWFudGl0eUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE1vcmUgY29tcGxleCBzdHJ1Y3R1cmVzIChBdHRhY2htZW50LCBSZXNvdXJjZSBhbmQgUXVhbnRpdHkpIHdpbGwgdHlwaWNhbGx5IGJlIGxpbWl0ZWQgdG8gZWxlY3Ryb25pYyBmb3JtcyB0aGF0IGNhbiBleHBvc2UgYW4gYXBwcm9wcmlhdGUgdXNlciBpbnRlcmZhY2UgdG8gY2FwdHVyZSB0aGUgY29tcG9uZW50cyBhbmQgZW5mb3JjZSB0aGUgY29uc3RyYWludHMgb2YgYSBjb21wbGV4IGRhdGEgdHlwZS4gIEFkZGl0aW9uYWwgY29tcGxleCB0eXBlcyBjYW4gYmUgaW50cm9kdWNlZCB0aHJvdWdoIGV4dGVuc2lvbnMuIE11c3QgbWF0Y2ggdGhlIGRhdGF0eXBlIHNwZWNpZmllZCBieSBRdWVzdGlvbm5haXJlLml0ZW0udHlwZSBpbiB0aGUgY29ycmVzcG9uZGluZyBRdWVzdGlvbm5haXJlLlxyXG4gICAqL1xyXG4gIHZhbHVlUmVmZXJlbmNlPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBOZXN0ZWQgZ3JvdXBzIGFuZC9vciBxdWVzdGlvbnMgZm91bmQgd2l0aGluIHRoaXMgcGFydGljdWxhciBhbnN3ZXIuXHJcbiAgICovXHJcbiAgaXRlbT86IGZoaXIuUXVlc3Rpb25uYWlyZVJlc3BvbnNlSXRlbUFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgdmFsdWUgaXMgbmVzdGVkIGJlY2F1c2Ugd2UgY2Fubm90IGhhdmUgYSByZXBlYXRpbmcgc3RydWN0dXJlIHRoYXQgaGFzIHZhcmlhYmxlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUXVlc3Rpb25uYWlyZVJlc3BvbnNlSXRlbUFuc3dlciBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1F1ZXN0aW9ubmFpcmVSZXNwb25zZUl0ZW1BbnN3ZXInO1xyXG4gIC8qKlxyXG4gICAqIE1vcmUgY29tcGxleCBzdHJ1Y3R1cmVzIChBdHRhY2htZW50LCBSZXNvdXJjZSBhbmQgUXVhbnRpdHkpIHdpbGwgdHlwaWNhbGx5IGJlIGxpbWl0ZWQgdG8gZWxlY3Ryb25pYyBmb3JtcyB0aGF0IGNhbiBleHBvc2UgYW4gYXBwcm9wcmlhdGUgdXNlciBpbnRlcmZhY2UgdG8gY2FwdHVyZSB0aGUgY29tcG9uZW50cyBhbmQgZW5mb3JjZSB0aGUgY29uc3RyYWludHMgb2YgYSBjb21wbGV4IGRhdGEgdHlwZS4gIEFkZGl0aW9uYWwgY29tcGxleCB0eXBlcyBjYW4gYmUgaW50cm9kdWNlZCB0aHJvdWdoIGV4dGVuc2lvbnMuIE11c3QgbWF0Y2ggdGhlIGRhdGF0eXBlIHNwZWNpZmllZCBieSBRdWVzdGlvbm5haXJlLml0ZW0udHlwZSBpbiB0aGUgY29ycmVzcG9uZGluZyBRdWVzdGlvbm5haXJlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB2YWx1ZT86IChmaGlyLkZoaXJCb29sZWFufGZoaXIuRmhpckRlY2ltYWx8Zmhpci5GaGlySW50ZWdlcnxmaGlyLkZoaXJEYXRlfGZoaXIuRmhpckRhdGVUaW1lfGZoaXIuRmhpclRpbWV8Zmhpci5GaGlyU3RyaW5nfGZoaXIuRmhpclVyaXxmaGlyLkF0dGFjaG1lbnR8Zmhpci5Db2Rpbmd8Zmhpci5RdWFudGl0eXxmaGlyLlJlZmVyZW5jZSl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgUXVlc3Rpb25uYWlyZVJlc3BvbnNlLml0ZW0uYW5zd2VyLnZhbHVlW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX3ZhbHVlSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogTmVzdGVkIGdyb3VwcyBhbmQvb3IgcXVlc3Rpb25zIGZvdW5kIHdpdGhpbiB0aGlzIHBhcnRpY3VsYXIgYW5zd2VyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpdGVtOiBmaGlyLlF1ZXN0aW9ubmFpcmVSZXNwb25zZUl0ZW1bXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBRdWVzdGlvbm5haXJlUmVzcG9uc2VJdGVtQW5zd2VyIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8UXVlc3Rpb25uYWlyZVJlc3BvbnNlSXRlbUFuc3dlckFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWyd2YWx1ZSddKSB7IHRoaXMudmFsdWUgPSBzb3VyY2UudmFsdWU7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsndmFsdWVCb29sZWFuJ10pIHsgdGhpcy52YWx1ZSA9IG5ldyBmaGlyLkZoaXJCb29sZWFuKHt2YWx1ZTogc291cmNlLnZhbHVlQm9vbGVhbn0pOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3ZhbHVlRGVjaW1hbCddKSB7IHRoaXMudmFsdWUgPSBuZXcgZmhpci5GaGlyRGVjaW1hbCh7dmFsdWU6IHNvdXJjZS52YWx1ZURlY2ltYWx9KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd2YWx1ZUludGVnZXInXSkgeyB0aGlzLnZhbHVlID0gbmV3IGZoaXIuRmhpckludGVnZXIoe3ZhbHVlOiBzb3VyY2UudmFsdWVJbnRlZ2VyfSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsndmFsdWVEYXRlJ10pIHsgdGhpcy52YWx1ZSA9IG5ldyBmaGlyLkZoaXJEYXRlKHt2YWx1ZTogc291cmNlLnZhbHVlRGF0ZX0pOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3ZhbHVlRGF0ZVRpbWUnXSkgeyB0aGlzLnZhbHVlID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLnZhbHVlRGF0ZVRpbWV9KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd2YWx1ZVRpbWUnXSkgeyB0aGlzLnZhbHVlID0gbmV3IGZoaXIuRmhpclRpbWUoe3ZhbHVlOiBzb3VyY2UudmFsdWVUaW1lfSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsndmFsdWVTdHJpbmcnXSkgeyB0aGlzLnZhbHVlID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS52YWx1ZVN0cmluZ30pOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3ZhbHVlVXJpJ10pIHsgdGhpcy52YWx1ZSA9IG5ldyBmaGlyLkZoaXJVcmkoe3ZhbHVlOiBzb3VyY2UudmFsdWVVcml9KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd2YWx1ZUF0dGFjaG1lbnQnXSkgeyB0aGlzLnZhbHVlID0gbmV3IGZoaXIuQXR0YWNobWVudChzb3VyY2UudmFsdWVBdHRhY2htZW50KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd2YWx1ZUNvZGluZyddKSB7IHRoaXMudmFsdWUgPSBuZXcgZmhpci5Db2Rpbmcoc291cmNlLnZhbHVlQ29kaW5nKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd2YWx1ZVF1YW50aXR5J10pIHsgdGhpcy52YWx1ZSA9IG5ldyBmaGlyLlF1YW50aXR5KHNvdXJjZS52YWx1ZVF1YW50aXR5KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd2YWx1ZVJlZmVyZW5jZSddKSB7IHRoaXMudmFsdWUgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnZhbHVlUmVmZXJlbmNlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaXRlbSddKSB7IHRoaXMuaXRlbSA9IHNvdXJjZS5pdGVtLm1hcCgoeCkgPT4gbmV3IGZoaXIuUXVlc3Rpb25uYWlyZVJlc3BvbnNlSXRlbSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLml0ZW0gPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ1F1ZXN0aW9ubmFpcmVSZXNwb25zZS5pdGVtLmFuc3dlcicgfVxyXG4gICAgdGhpcy52T1MoJ3ZhbHVlJyxleHApXHJcbiAgICB0aGlzLnZPQSgnaXRlbScsZXhwKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFF1ZXN0aW9ubmFpcmVSZXNwb25zZUl0ZW0gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgUXVlc3Rpb25uYWlyZVJlc3BvbnNlSXRlbUFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpdGVtIGZyb20gdGhlIFF1ZXN0aW9ubmFpcmUgdGhhdCBjb3JyZXNwb25kcyB0byB0aGlzIGl0ZW0gaW4gdGhlIFF1ZXN0aW9ubmFpcmVSZXNwb25zZSByZXNvdXJjZS5cclxuICAgKi9cclxuICBsaW5rSWQ6IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBRdWVzdGlvbm5haXJlUmVzcG9uc2UuaXRlbS5saW5rSWRcclxuICAgKi9cclxuICBfbGlua0lkPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgRWxlbWVudERlZmluaXRpb24gbXVzdCBiZSBpbiBhIFtTdHJ1Y3R1cmVEZWZpbml0aW9uXShzdHJ1Y3R1cmVkZWZpbml0aW9uLmh0bWwjKSwgYW5kIG11c3QgaGF2ZSBhIGZyYWdtZW50IGlkZW50aWZpZXIgdGhhdCBpZGVudGlmaWVzIHRoZSBzcGVjaWZpYyBkYXRhIGVsZW1lbnQgYnkgaXRzIGlkIChFbGVtZW50LmlkKS4gRS5nLiBodHRwOi8vaGw3Lm9yZy9maGlyL1N0cnVjdHVyZURlZmluaXRpb24vT2JzZXJ2YXRpb24jT2JzZXJ2YXRpb24udmFsdWVbeF0uXHJcbiAgICogVGhlcmUgaXMgbm8gbmVlZCBmb3IgdGhpcyBlbGVtZW50IGlmIHRoZSBpdGVtIHBvaW50ZWQgdG8gYnkgdGhlIGxpbmtJZCBoYXMgYSBkZWZpbml0aW9uIGxpc3RlZC5cclxuICAgKi9cclxuICBkZWZpbml0aW9uPzogZmhpci5GaGlyVXJpfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFF1ZXN0aW9ubmFpcmVSZXNwb25zZS5pdGVtLmRlZmluaXRpb25cclxuICAgKi9cclxuICBfZGVmaW5pdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGV4dCB0aGF0IGlzIGRpc3BsYXllZCBhYm92ZSB0aGUgY29udGVudHMgb2YgdGhlIGdyb3VwIG9yIGFzIHRoZSB0ZXh0IG9mIHRoZSBxdWVzdGlvbiBiZWluZyBhbnN3ZXJlZC5cclxuICAgKi9cclxuICB0ZXh0PzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFF1ZXN0aW9ubmFpcmVSZXNwb25zZS5pdGVtLnRleHRcclxuICAgKi9cclxuICBfdGV4dD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHZhbHVlIGlzIG5lc3RlZCBiZWNhdXNlIHdlIGNhbm5vdCBoYXZlIGEgcmVwZWF0aW5nIHN0cnVjdHVyZSB0aGF0IGhhcyB2YXJpYWJsZSB0eXBlLlxyXG4gICAqL1xyXG4gIGFuc3dlcj86IGZoaXIuUXVlc3Rpb25uYWlyZVJlc3BvbnNlSXRlbUFuc3dlckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUXVlc3Rpb25zIG9yIHN1Yi1ncm91cHMgbmVzdGVkIGJlbmVhdGggYSBxdWVzdGlvbiBvciBncm91cC5cclxuICAgKi9cclxuICBpdGVtPzogZmhpci5RdWVzdGlvbm5haXJlUmVzcG9uc2VJdGVtQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdyb3VwcyBjYW5ub3QgaGF2ZSBhbnN3ZXJzIGFuZCB0aGVyZWZvcmUgbXVzdCBuZXN0IGRpcmVjdGx5IHdpdGhpbiBpdGVtLiBXaGVuIGRlYWxpbmcgd2l0aCBxdWVzdGlvbnMsIG5lc3RpbmcgbXVzdCBvY2N1ciB3aXRoaW4gZWFjaCBhbnN3ZXIgYmVjYXVzZSBzb21lIHF1ZXN0aW9ucyBtYXkgaGF2ZSBtdWx0aXBsZSBhbnN3ZXJzIChhbmQgdGhlIG5lc3Rpbmcgb2NjdXJzIGZvciBlYWNoIGFuc3dlcikuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUXVlc3Rpb25uYWlyZVJlc3BvbnNlSXRlbSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1F1ZXN0aW9ubmFpcmVSZXNwb25zZUl0ZW0nO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpdGVtIGZyb20gdGhlIFF1ZXN0aW9ubmFpcmUgdGhhdCBjb3JyZXNwb25kcyB0byB0aGlzIGl0ZW0gaW4gdGhlIFF1ZXN0aW9ubmFpcmVSZXNwb25zZSByZXNvdXJjZS5cclxuICAgKi9cclxuICBwdWJsaWMgbGlua0lkOiBmaGlyLkZoaXJTdHJpbmd8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgRWxlbWVudERlZmluaXRpb24gbXVzdCBiZSBpbiBhIFtTdHJ1Y3R1cmVEZWZpbml0aW9uXShzdHJ1Y3R1cmVkZWZpbml0aW9uLmh0bWwjKSwgYW5kIG11c3QgaGF2ZSBhIGZyYWdtZW50IGlkZW50aWZpZXIgdGhhdCBpZGVudGlmaWVzIHRoZSBzcGVjaWZpYyBkYXRhIGVsZW1lbnQgYnkgaXRzIGlkIChFbGVtZW50LmlkKS4gRS5nLiBodHRwOi8vaGw3Lm9yZy9maGlyL1N0cnVjdHVyZURlZmluaXRpb24vT2JzZXJ2YXRpb24jT2JzZXJ2YXRpb24udmFsdWVbeF0uXHJcbiAgICogVGhlcmUgaXMgbm8gbmVlZCBmb3IgdGhpcyBlbGVtZW50IGlmIHRoZSBpdGVtIHBvaW50ZWQgdG8gYnkgdGhlIGxpbmtJZCBoYXMgYSBkZWZpbml0aW9uIGxpc3RlZC5cclxuICAgKi9cclxuICBwdWJsaWMgZGVmaW5pdGlvbj86IGZoaXIuRmhpclVyaXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGV4dCB0aGF0IGlzIGRpc3BsYXllZCBhYm92ZSB0aGUgY29udGVudHMgb2YgdGhlIGdyb3VwIG9yIGFzIHRoZSB0ZXh0IG9mIHRoZSBxdWVzdGlvbiBiZWluZyBhbnN3ZXJlZC5cclxuICAgKi9cclxuICBwdWJsaWMgdGV4dD86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHZhbHVlIGlzIG5lc3RlZCBiZWNhdXNlIHdlIGNhbm5vdCBoYXZlIGEgcmVwZWF0aW5nIHN0cnVjdHVyZSB0aGF0IGhhcyB2YXJpYWJsZSB0eXBlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhbnN3ZXI6IGZoaXIuUXVlc3Rpb25uYWlyZVJlc3BvbnNlSXRlbUFuc3dlcltdO1xyXG4gIC8qKlxyXG4gICAqIFF1ZXN0aW9ucyBvciBzdWItZ3JvdXBzIG5lc3RlZCBiZW5lYXRoIGEgcXVlc3Rpb24gb3IgZ3JvdXAuXHJcbiAgICovXHJcbiAgcHVibGljIGl0ZW06IGZoaXIuUXVlc3Rpb25uYWlyZVJlc3BvbnNlSXRlbVtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFF1ZXN0aW9ubmFpcmVSZXNwb25zZUl0ZW0gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxRdWVzdGlvbm5haXJlUmVzcG9uc2VJdGVtQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2xpbmtJZCddKSB7IHRoaXMubGlua0lkID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5saW5rSWR9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubGlua0lkID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2xpbmtJZCddKSB7XHJcbiAgICAgIGlmICh0aGlzLmxpbmtJZCkgeyB0aGlzLmxpbmtJZC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9saW5rSWQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5saW5rSWQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fbGlua0lkIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydkZWZpbml0aW9uJ10pIHsgdGhpcy5kZWZpbml0aW9uID0gbmV3IGZoaXIuRmhpclVyaSh7dmFsdWU6IHNvdXJjZS5kZWZpbml0aW9ufSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19kZWZpbml0aW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZGVmaW5pdGlvbikgeyB0aGlzLmRlZmluaXRpb24uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZGVmaW5pdGlvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRlZmluaXRpb24gPSBuZXcgZmhpci5GaGlyVXJpKHNvdXJjZS5fZGVmaW5pdGlvbiBhcyBQYXJ0aWFsPGZoaXIuRmhpclVyaUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsndGV4dCddKSB7IHRoaXMudGV4dCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UudGV4dH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfdGV4dCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnRleHQpIHsgdGhpcy50ZXh0LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3RleHQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy50ZXh0ID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3RleHQgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2Fuc3dlciddKSB7IHRoaXMuYW5zd2VyID0gc291cmNlLmFuc3dlci5tYXAoKHgpID0+IG5ldyBmaGlyLlF1ZXN0aW9ubmFpcmVSZXNwb25zZUl0ZW1BbnN3ZXIoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5hbnN3ZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaXRlbSddKSB7IHRoaXMuaXRlbSA9IHNvdXJjZS5pdGVtLm1hcCgoeCkgPT4gbmV3IGZoaXIuUXVlc3Rpb25uYWlyZVJlc3BvbnNlSXRlbSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLml0ZW0gPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ1F1ZXN0aW9ubmFpcmVSZXNwb25zZS5pdGVtJyB9XHJcbiAgICB0aGlzLnZSUygnbGlua0lkJyxleHApXHJcbiAgICB0aGlzLnZPUygnZGVmaW5pdGlvbicsZXhwKVxyXG4gICAgdGhpcy52T1MoJ3RleHQnLGV4cClcclxuICAgIHRoaXMudk9BKCdhbnN3ZXInLGV4cClcclxuICAgIHRoaXMudk9BKCdpdGVtJyxleHApXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgUXVlc3Rpb25uYWlyZVJlc3BvbnNlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXN0aW9ubmFpcmVSZXNwb25zZUFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIlF1ZXN0aW9ubmFpcmVSZXNwb25zZVwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGJ1c2luZXNzIGlkZW50aWZpZXIgYXNzaWduZWQgdG8gYSBwYXJ0aWN1bGFyIGNvbXBsZXRlZCAob3IgcGFydGlhbGx5IGNvbXBsZXRlZCkgcXVlc3Rpb25uYWlyZS5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG9yZGVyLCBwcm9wb3NhbCBvciBwbGFuIHRoYXQgaXMgZnVsZmlsbGVkIGluIHdob2xlIG9yIGluIHBhcnQgYnkgdGhpcyBRdWVzdGlvbm5haXJlUmVzcG9uc2UuICBGb3IgZXhhbXBsZSwgYSBTZXJ2aWNlUmVxdWVzdCBzZWVraW5nIGFuIGludGFrZSBhc3Nlc3NtZW50IG9yIGEgZGVjaXNpb24gc3VwcG9ydCByZWNvbW1lbmRhdGlvbiB0byBhc3Nlc3MgZm9yIHBvc3QtcGFydHVtIGRlcHJlc3Npb24uXHJcbiAgICovXHJcbiAgYmFzZWRPbj86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDb21wb3NpdGlvbiBvZiBxdWVzdGlvbm5haXJlIHJlc3BvbnNlcyB3aWxsIGJlIGhhbmRsZWQgYnkgdGhlIHBhcmVudCBxdWVzdGlvbm5haXJlIGhhdmluZyBhbnN3ZXJzIHRoYXQgcmVmZXJlbmNlIHRoZSBjaGlsZCBxdWVzdGlvbm5haXJlLiAgRm9yIHJlbGF0aW9uc2hpcHMgdG8gcmVmZXJyYWxzLCBhbmQgb3RoZXIgdHlwZXMgb2YgcmVxdWVzdHMsIHVzZSBiYXNlZE9uLlxyXG4gICAqL1xyXG4gIHBhcnRPZj86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiBhIFF1ZXN0aW9ubmFpcmVSZXNwb25zZSByZWZlcmVuY2VzIGEgUXVlc3Rpb25uYWlyZSwgdGhlbiB0aGUgUXVlc3Rpb25uYWlyZVJlc3BvbnNlIHN0cnVjdHVyZSBtdXN0IGJlIGNvbnNpc3RlbnQgd2l0aCB0aGUgUXVlc3Rpb25uYWlyZSAoaS5lLiBxdWVzdGlvbnMgbXVzdCBiZSBvcmdhbml6ZWQgaW50byB0aGUgc2FtZSBncm91cHMsIG5lc3RlZCBxdWVzdGlvbnMgbXVzdCBzdGlsbCBiZSBuZXN0ZWQsIGV0Yy4pLlxyXG4gICAqL1xyXG4gIHF1ZXN0aW9ubmFpcmU/OiBmaGlyLkZoaXJDYW5vbmljYWx8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogUXVlc3Rpb25uYWlyZVJlc3BvbnNlLnF1ZXN0aW9ubmFpcmVcclxuICAgKi9cclxuICBfcXVlc3Rpb25uYWlyZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IGlzIGxhYmVsZWQgYXMgYSBtb2RpZmllciBiZWNhdXNlIHRoZSBzdGF0dXMgY29udGFpbnMgY29kZXMgdGhhdCBtYXJrIHRoZSByZXNvdXJjZSBhcyBub3QgY3VycmVudGx5IHZhbGlkLlxyXG4gICAqL1xyXG4gIHN0YXR1czogZmhpci5GaGlyQ29kZTxRdWVzdGlvbm5haXJlQW5zd2Vyc1N0YXR1c0NvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBRdWVzdGlvbm5haXJlUmVzcG9uc2Uuc3RhdHVzXHJcbiAgICovXHJcbiAgX3N0YXR1cz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhlIFF1ZXN0aW9ubmFpcmUgZGVjbGFyZWQgYSBzdWJqZWN0VHlwZSwgdGhlIHJlc291cmNlIHBvaW50ZWQgdG8gYnkgdGhpcyBlbGVtZW50IG11c3QgYmUgYW4gaW5zdGFuY2Ugb2Ygb25lIG9mIHRoZSBsaXN0ZWQgdHlwZXMuXHJcbiAgICovXHJcbiAgc3ViamVjdD86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyB3aWxsIHR5cGljYWxseSBiZSB0aGUgZW5jb3VudGVyIHRoZSBldmVudCBvY2N1cnJlZCB3aXRoaW4sIGJ1dCBzb21lIGFjdGl2aXRpZXMgbWF5IGJlIGluaXRpYXRlZCBwcmlvciB0byBvciBhZnRlciB0aGUgb2ZmaWNpYWwgY29tcGxldGlvbiBvZiBhbiBlbmNvdW50ZXIgYnV0IHN0aWxsIGJlIHRpZWQgdG8gdGhlIGNvbnRleHQgb2YgdGhlIGVuY291bnRlci4gQSBxdWVzdGlvbm5haXJlIHRoYXQgd2FzIGluaXRpYXRlZCBkdXJpbmcgYW4gZW5jb3VudGVyIGJ1dCBub3QgZnVsbHkgY29tcGxldGVkIGR1cmluZyB0aGUgZW5jb3VudGVyIHdvdWxkIHN0aWxsIGdlbmVyYWxseSBiZSBhc3NvY2lhdGVkIHdpdGggdGhlIGVuY291bnRlci5cclxuICAgKi9cclxuICBlbmNvdW50ZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE1heSBiZSBkaWZmZXJlbnQgZnJvbSB0aGUgbGFzdFVwZGF0ZVRpbWUgb2YgdGhlIHJlc291cmNlIGl0c2VsZiwgYmVjYXVzZSB0aGF0IHJlZmxlY3RzIHdoZW4gdGhlIGRhdGEgd2FzIGtub3duIHRvIHRoZSBzZXJ2ZXIsIG5vdCB3aGVuIHRoZSBkYXRhIHdhcyBjYXB0dXJlZC5cclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgb3B0aW9uYWwgdG8gYWxsb3cgZm9yIHN5c3RlbXMgdGhhdCBtaWdodCBub3Qga25vdyB0aGUgdmFsdWUsIGhvd2V2ZXIgaXQgU0hPVUxEIGJlIHBvcHVsYXRlZCBpZiBwb3NzaWJsZS5cclxuICAgKi9cclxuICBhdXRob3JlZD86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFF1ZXN0aW9ubmFpcmVSZXNwb25zZS5hdXRob3JlZFxyXG4gICAqL1xyXG4gIF9hdXRob3JlZD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBhIHN1YmplY3QncyBhbnN3ZXJzIHRvIG11bHRpcGxlIGNob2ljZSBvcHRpb25zIGFuZCBkZXRlcm1pbmluZyB3aGF0IHRvIHB1dCBpbiB0aGUgdGV4dHVhbCBhbnN3ZXIgaXMgYSBtYXR0ZXIgb2YgaW50ZXJwcmV0YXRpb24uICBBdXRob3JpbmcgYnkgZGV2aWNlIHdvdWxkIGluZGljYXRlIHRoYXQgc29tZSBwb3J0aW9uIG9mIHRoZSBxdWVzdGlvbm5haXJlIGhhZCBiZWVuIGF1dG8tcG9wdWxhdGVkLlxyXG4gICAqL1xyXG4gIGF1dGhvcj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgbm90IHNwZWNpZmllZCwgbm8gaW5mZXJlbmNlIGNhbiBiZSBtYWRlIGFib3V0IHdobyBwcm92aWRlZCB0aGUgZGF0YS5cclxuICAgKi9cclxuICBzb3VyY2U/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEdyb3VwcyBjYW5ub3QgaGF2ZSBhbnN3ZXJzIGFuZCB0aGVyZWZvcmUgbXVzdCBuZXN0IGRpcmVjdGx5IHdpdGhpbiBpdGVtLiBXaGVuIGRlYWxpbmcgd2l0aCBxdWVzdGlvbnMsIG5lc3RpbmcgbXVzdCBvY2N1ciB3aXRoaW4gZWFjaCBhbnN3ZXIgYmVjYXVzZSBzb21lIHF1ZXN0aW9ucyBtYXkgaGF2ZSBtdWx0aXBsZSBhbnN3ZXJzIChhbmQgdGhlIG5lc3Rpbmcgb2NjdXJzIGZvciBlYWNoIGFuc3dlcikuXHJcbiAgICovXHJcbiAgaXRlbT86IGZoaXIuUXVlc3Rpb25uYWlyZVJlc3BvbnNlSXRlbUFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBIHN0cnVjdHVyZWQgc2V0IG9mIHF1ZXN0aW9ucyBhbmQgdGhlaXIgYW5zd2Vycy4gVGhlIHF1ZXN0aW9ucyBhcmUgb3JkZXJlZCBhbmQgZ3JvdXBlZCBpbnRvIGNvaGVyZW50IHN1YnNldHMsIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHN0cnVjdHVyZSBvZiB0aGUgZ3JvdXBpbmcgb2YgdGhlIHF1ZXN0aW9ubmFpcmUgYmVpbmcgcmVzcG9uZGVkIHRvLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFF1ZXN0aW9ubmFpcmVSZXNwb25zZSBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnUXVlc3Rpb25uYWlyZVJlc3BvbnNlJztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIlF1ZXN0aW9ubmFpcmVSZXNwb25zZVwiO1xyXG4gIC8qKlxyXG4gICAqIEEgYnVzaW5lc3MgaWRlbnRpZmllciBhc3NpZ25lZCB0byBhIHBhcnRpY3VsYXIgY29tcGxldGVkIChvciBwYXJ0aWFsbHkgY29tcGxldGVkKSBxdWVzdGlvbm5haXJlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgb3JkZXIsIHByb3Bvc2FsIG9yIHBsYW4gdGhhdCBpcyBmdWxmaWxsZWQgaW4gd2hvbGUgb3IgaW4gcGFydCBieSB0aGlzIFF1ZXN0aW9ubmFpcmVSZXNwb25zZS4gIEZvciBleGFtcGxlLCBhIFNlcnZpY2VSZXF1ZXN0IHNlZWtpbmcgYW4gaW50YWtlIGFzc2Vzc21lbnQgb3IgYSBkZWNpc2lvbiBzdXBwb3J0IHJlY29tbWVuZGF0aW9uIHRvIGFzc2VzcyBmb3IgcG9zdC1wYXJ0dW0gZGVwcmVzc2lvbi5cclxuICAgKi9cclxuICBwdWJsaWMgYmFzZWRPbjogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBDb21wb3NpdGlvbiBvZiBxdWVzdGlvbm5haXJlIHJlc3BvbnNlcyB3aWxsIGJlIGhhbmRsZWQgYnkgdGhlIHBhcmVudCBxdWVzdGlvbm5haXJlIGhhdmluZyBhbnN3ZXJzIHRoYXQgcmVmZXJlbmNlIHRoZSBjaGlsZCBxdWVzdGlvbm5haXJlLiAgRm9yIHJlbGF0aW9uc2hpcHMgdG8gcmVmZXJyYWxzLCBhbmQgb3RoZXIgdHlwZXMgb2YgcmVxdWVzdHMsIHVzZSBiYXNlZE9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXJ0T2Y6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogSWYgYSBRdWVzdGlvbm5haXJlUmVzcG9uc2UgcmVmZXJlbmNlcyBhIFF1ZXN0aW9ubmFpcmUsIHRoZW4gdGhlIFF1ZXN0aW9ubmFpcmVSZXNwb25zZSBzdHJ1Y3R1cmUgbXVzdCBiZSBjb25zaXN0ZW50IHdpdGggdGhlIFF1ZXN0aW9ubmFpcmUgKGkuZS4gcXVlc3Rpb25zIG11c3QgYmUgb3JnYW5pemVkIGludG8gdGhlIHNhbWUgZ3JvdXBzLCBuZXN0ZWQgcXVlc3Rpb25zIG11c3Qgc3RpbGwgYmUgbmVzdGVkLCBldGMuKS5cclxuICAgKi9cclxuICBwdWJsaWMgcXVlc3Rpb25uYWlyZT86IGZoaXIuRmhpckNhbm9uaWNhbHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IGlzIGxhYmVsZWQgYXMgYSBtb2RpZmllciBiZWNhdXNlIHRoZSBzdGF0dXMgY29udGFpbnMgY29kZXMgdGhhdCBtYXJrIHRoZSByZXNvdXJjZSBhcyBub3QgY3VycmVudGx5IHZhbGlkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0dXM6IGZoaXIuRmhpckNvZGU8UXVlc3Rpb25uYWlyZUFuc3dlcnNTdGF0dXNDb2RlVHlwZT58bnVsbDtcclxuICAvKipcclxuICAgKiBJZiB0aGUgUXVlc3Rpb25uYWlyZSBkZWNsYXJlZCBhIHN1YmplY3RUeXBlLCB0aGUgcmVzb3VyY2UgcG9pbnRlZCB0byBieSB0aGlzIGVsZW1lbnQgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBvbmUgb2YgdGhlIGxpc3RlZCB0eXBlcy5cclxuICAgKi9cclxuICBwdWJsaWMgc3ViamVjdD86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIHdpbGwgdHlwaWNhbGx5IGJlIHRoZSBlbmNvdW50ZXIgdGhlIGV2ZW50IG9jY3VycmVkIHdpdGhpbiwgYnV0IHNvbWUgYWN0aXZpdGllcyBtYXkgYmUgaW5pdGlhdGVkIHByaW9yIHRvIG9yIGFmdGVyIHRoZSBvZmZpY2lhbCBjb21wbGV0aW9uIG9mIGFuIGVuY291bnRlciBidXQgc3RpbGwgYmUgdGllZCB0byB0aGUgY29udGV4dCBvZiB0aGUgZW5jb3VudGVyLiBBIHF1ZXN0aW9ubmFpcmUgdGhhdCB3YXMgaW5pdGlhdGVkIGR1cmluZyBhbiBlbmNvdW50ZXIgYnV0IG5vdCBmdWxseSBjb21wbGV0ZWQgZHVyaW5nIHRoZSBlbmNvdW50ZXIgd291bGQgc3RpbGwgZ2VuZXJhbGx5IGJlIGFzc29jaWF0ZWQgd2l0aCB0aGUgZW5jb3VudGVyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBlbmNvdW50ZXI/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTWF5IGJlIGRpZmZlcmVudCBmcm9tIHRoZSBsYXN0VXBkYXRlVGltZSBvZiB0aGUgcmVzb3VyY2UgaXRzZWxmLCBiZWNhdXNlIHRoYXQgcmVmbGVjdHMgd2hlbiB0aGUgZGF0YSB3YXMga25vd24gdG8gdGhlIHNlcnZlciwgbm90IHdoZW4gdGhlIGRhdGEgd2FzIGNhcHR1cmVkLlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBvcHRpb25hbCB0byBhbGxvdyBmb3Igc3lzdGVtcyB0aGF0IG1pZ2h0IG5vdCBrbm93IHRoZSB2YWx1ZSwgaG93ZXZlciBpdCBTSE9VTEQgYmUgcG9wdWxhdGVkIGlmIHBvc3NpYmxlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhdXRob3JlZD86IGZoaXIuRmhpckRhdGVUaW1lfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIGEgc3ViamVjdCdzIGFuc3dlcnMgdG8gbXVsdGlwbGUgY2hvaWNlIG9wdGlvbnMgYW5kIGRldGVybWluaW5nIHdoYXQgdG8gcHV0IGluIHRoZSB0ZXh0dWFsIGFuc3dlciBpcyBhIG1hdHRlciBvZiBpbnRlcnByZXRhdGlvbi4gIEF1dGhvcmluZyBieSBkZXZpY2Ugd291bGQgaW5kaWNhdGUgdGhhdCBzb21lIHBvcnRpb24gb2YgdGhlIHF1ZXN0aW9ubmFpcmUgaGFkIGJlZW4gYXV0by1wb3B1bGF0ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGF1dGhvcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiBub3Qgc3BlY2lmaWVkLCBubyBpbmZlcmVuY2UgY2FuIGJlIG1hZGUgYWJvdXQgd2hvIHByb3ZpZGVkIHRoZSBkYXRhLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzb3VyY2U/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogR3JvdXBzIGNhbm5vdCBoYXZlIGFuc3dlcnMgYW5kIHRoZXJlZm9yZSBtdXN0IG5lc3QgZGlyZWN0bHkgd2l0aGluIGl0ZW0uIFdoZW4gZGVhbGluZyB3aXRoIHF1ZXN0aW9ucywgbmVzdGluZyBtdXN0IG9jY3VyIHdpdGhpbiBlYWNoIGFuc3dlciBiZWNhdXNlIHNvbWUgcXVlc3Rpb25zIG1heSBoYXZlIG11bHRpcGxlIGFuc3dlcnMgKGFuZCB0aGUgbmVzdGluZyBvY2N1cnMgZm9yIGVhY2ggYW5zd2VyKS5cclxuICAgKi9cclxuICBwdWJsaWMgaXRlbTogZmhpci5RdWVzdGlvbm5haXJlUmVzcG9uc2VJdGVtW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgUXVlc3Rpb25uYWlyZVJlc3BvbnNlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8UXVlc3Rpb25uYWlyZVJlc3BvbnNlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ1F1ZXN0aW9ubmFpcmVSZXNwb25zZSc7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gbmV3IGZoaXIuSWRlbnRpZmllcihzb3VyY2UuaWRlbnRpZmllcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ2Jhc2VkT24nXSkgeyB0aGlzLmJhc2VkT24gPSBzb3VyY2UuYmFzZWRPbi5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmJhc2VkT24gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncGFydE9mJ10pIHsgdGhpcy5wYXJ0T2YgPSBzb3VyY2UucGFydE9mLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucGFydE9mID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3F1ZXN0aW9ubmFpcmUnXSkgeyB0aGlzLnF1ZXN0aW9ubmFpcmUgPSBuZXcgZmhpci5GaGlyQ2Fub25pY2FsKHt2YWx1ZTogc291cmNlLnF1ZXN0aW9ubmFpcmV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3F1ZXN0aW9ubmFpcmUnXSkge1xyXG4gICAgICBpZiAodGhpcy5xdWVzdGlvbm5haXJlKSB7IHRoaXMucXVlc3Rpb25uYWlyZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9xdWVzdGlvbm5haXJlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMucXVlc3Rpb25uYWlyZSA9IG5ldyBmaGlyLkZoaXJDYW5vbmljYWwoc291cmNlLl9xdWVzdGlvbm5haXJlIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ2Fub25pY2FsQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydzdGF0dXMnXSkgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPFF1ZXN0aW9ubmFpcmVBbnN3ZXJzU3RhdHVzQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnN0YXR1c30pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfc3RhdHVzJ10pIHtcclxuICAgICAgaWYgKHRoaXMuc3RhdHVzKSB7IHRoaXMuc3RhdHVzLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3N0YXR1cyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPFF1ZXN0aW9ubmFpcmVBbnN3ZXJzU3RhdHVzQ29kZVR5cGU+KHNvdXJjZS5fc3RhdHVzIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydzdWJqZWN0J10pIHsgdGhpcy5zdWJqZWN0ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5zdWJqZWN0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZW5jb3VudGVyJ10pIHsgdGhpcy5lbmNvdW50ZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmVuY291bnRlcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ2F1dGhvcmVkJ10pIHsgdGhpcy5hdXRob3JlZCA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5hdXRob3JlZH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfYXV0aG9yZWQnXSkge1xyXG4gICAgICBpZiAodGhpcy5hdXRob3JlZCkgeyB0aGlzLmF1dGhvcmVkLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2F1dGhvcmVkISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuYXV0aG9yZWQgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoc291cmNlLl9hdXRob3JlZCBhcyBQYXJ0aWFsPGZoaXIuRmhpckRhdGVUaW1lQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydhdXRob3InXSkgeyB0aGlzLmF1dGhvciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuYXV0aG9yKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc291cmNlJ10pIHsgdGhpcy5zb3VyY2UgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnNvdXJjZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2l0ZW0nXSkgeyB0aGlzLml0ZW0gPSBzb3VyY2UuaXRlbS5tYXAoKHgpID0+IG5ldyBmaGlyLlF1ZXN0aW9ubmFpcmVSZXNwb25zZUl0ZW0oeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pdGVtID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdRdWVzdGlvbm5haXJlUmVzcG9uc2UnIH1cclxuICAgIHRoaXMudlJTKCdyZXNvdXJjZVR5cGUnLGV4cClcclxuICAgIHRoaXMudk9TKCdpZGVudGlmaWVyJyxleHApXHJcbiAgICB0aGlzLnZPQSgnYmFzZWRPbicsZXhwKVxyXG4gICAgdGhpcy52T0EoJ3BhcnRPZicsZXhwKVxyXG4gICAgdGhpcy52T1MoJ3F1ZXN0aW9ubmFpcmUnLGV4cClcclxuICAgIHRoaXMudlJTVignc3RhdHVzJyxleHAsJ1F1ZXN0aW9ubmFpcmVBbnN3ZXJzU3RhdHVzJyxRdWVzdGlvbm5haXJlQW5zd2Vyc1N0YXR1c1ZzVmFsaWRhdGlvbiwncicpXHJcbiAgICB0aGlzLnZPUygnc3ViamVjdCcsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2VuY291bnRlcicsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2F1dGhvcmVkJyxleHApXHJcbiAgICB0aGlzLnZPUygnYXV0aG9yJyxleHApXHJcbiAgICB0aGlzLnZPUygnc291cmNlJyxleHApXHJcbiAgICB0aGlzLnZPQSgnaXRlbScsZXhwKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuIl19