// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: DetectedIssue
import * as fhir from '../fhir.js';
// @ts-ignore
import { ObservationStatusVsValidation } from '../fhirValueSets/ObservationStatusVsValidation.js';
// @ts-ignore
import { DetectedissueSeverityVsValidation } from '../fhirValueSets/DetectedissueSeverityVsValidation.js';
/**
 * Supporting evidence or manifestations that provide the basis for identifying the detected issue such as a GuidanceResponse or MeasureReport.
 */
export class DetectedIssueEvidence extends fhir.BackboneElement {
    /**
     * Default constructor for DetectedIssueEvidence - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = source.code.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.code = [];
        }
        if (source['detail']) {
            this.detail = source.detail.map((x) => new fhir.Reference(x));
        }
        else {
            this.detail = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'DetectedIssue.evidence';
        }
        this.vOptA('code', expression);
        this.vOptA('detail', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DetectedIssueEvidence._fts_dataType = 'DetectedIssueEvidence';
/**
 * Indicates an action that has been taken or is committed to reduce or eliminate the likelihood of the risk identified by the detected issue from manifesting.  Can also reflect an observation of known mitigating factors that may reduce/eliminate the need for any action.
 */
export class DetectedIssueMitigation extends fhir.BackboneElement {
    /**
     * Default constructor for DetectedIssueMitigation - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['action']) {
            this.action = new fhir.CodeableConcept(source.action);
        }
        else {
            this.action = null;
        }
        if (source['date']) {
            this.date = new fhir.FhirDateTime({ value: source.date });
        }
        if (source['_date']) {
            if (this.date) {
                this.date.addExtendedProperties(source._date);
            }
            else {
                this.date = new fhir.FhirDateTime(source._date);
            }
        }
        if (source['author']) {
            this.author = new fhir.Reference(source.author);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'DetectedIssue.mitigation';
        }
        this.vReqS('action', expression);
        this.vOptS('date', expression);
        this.vOptS('author', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DetectedIssueMitigation._fts_dataType = 'DetectedIssueMitigation';
/**
 * Indicates an actual or potential clinical issue with or between one or more active or proposed clinical actions for a patient; e.g. Drug-drug interaction, Ineffective treatment frequency, Procedure-condition conflict, etc.
 */
export class DetectedIssue extends fhir.DomainResource {
    /**
     * Default constructor for DetectedIssue - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'DetectedIssue';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        if (source['severity']) {
            this.severity = new fhir.FhirCode({ value: source.severity });
        }
        if (source['_severity']) {
            if (this.severity) {
                this.severity.addExtendedProperties(source._severity);
            }
            else {
                this.severity = new fhir.FhirCode(source._severity);
            }
        }
        if (source['patient']) {
            this.patient = new fhir.Reference(source.patient);
        }
        if (source['identified']) {
            this.identified = source.identified;
        }
        else if (source['identifiedDateTime']) {
            this.identified = new fhir.FhirDateTime({ value: source.identifiedDateTime });
        }
        else if (source['identifiedPeriod']) {
            this.identified = new fhir.Period(source.identifiedPeriod);
        }
        if (source['author']) {
            this.author = new fhir.Reference(source.author);
        }
        if (source['implicated']) {
            this.implicated = source.implicated.map((x) => new fhir.Reference(x));
        }
        else {
            this.implicated = [];
        }
        if (source['evidence']) {
            this.evidence = source.evidence.map((x) => new fhir.DetectedIssueEvidence(x));
        }
        else {
            this.evidence = [];
        }
        if (source['detail']) {
            this.detail = new fhir.FhirString({ value: source.detail });
        }
        if (source['_detail']) {
            if (this.detail) {
                this.detail.addExtendedProperties(source._detail);
            }
            else {
                this.detail = new fhir.FhirString(source._detail);
            }
        }
        if (source['reference']) {
            this.reference = new fhir.FhirUri({ value: source.reference });
        }
        if (source['_reference']) {
            if (this.reference) {
                this.reference.addExtendedProperties(source._reference);
            }
            else {
                this.reference = new fhir.FhirUri(source._reference);
            }
        }
        if (source['mitigation']) {
            this.mitigation = source.mitigation.map((x) => new fhir.DetectedIssueMitigation(x));
        }
        else {
            this.mitigation = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'DetectedIssue';
        }
        this.vReqS('resourceType', expression);
        this.vOptA('identifier', expression);
        this.vReqSV('status', expression, 'ObservationStatus', ObservationStatusVsValidation, 'r');
        this.vOptS('code', expression);
        this.vOptSV('severity', expression, 'DetectedissueSeverity', DetectedissueSeverityVsValidation, 'r');
        this.vOptS('patient', expression);
        this.vOptS('identified', expression);
        this.vOptS('author', expression);
        this.vOptA('implicated', expression);
        this.vOptA('evidence', expression);
        this.vOptS('detail', expression);
        this.vOptS('reference', expression);
        this.vOptA('mitigation', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DetectedIssue._fts_dataType = 'DetectedIssue';
/**
 * Internal flag to properly serialize choice-type element DetectedIssue.identified[x]
 */
DetectedIssue._fts_identifiedIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGV0ZWN0ZWRJc3N1ZS5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvRGV0ZWN0ZWRJc3N1ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQywrQkFBK0I7QUFFL0IsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFZbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSw2QkFBNkIsRUFBRSxNQUFNLG1EQUFtRCxDQUFDO0FBT2xHLGFBQWE7QUFDYixPQUFPLEVBQUUsaUNBQWlDLEVBQUUsTUFBTSx1REFBdUQsQ0FBQztBQWUxRzs7R0FFRztBQUNILE1BQU0sT0FBTyxxQkFBc0IsU0FBUSxJQUFJLENBQUMsZUFBZTtJQWE3RDs7T0FFRztJQUNILFlBQVksU0FBNEMsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDbEcsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDbkY7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQztTQUFFO1FBQ3hCLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUNuRjtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDO1NBQUU7SUFDNUIsQ0FBQztJQUNEOztPQUVHO0lBQ2EsaUJBQWlCLENBQUMsYUFBb0IsRUFBRTtRQUN0RCxJQUFJLE1BQU0sR0FBbUIsS0FBSyxDQUFDLGlCQUFpQixDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ2pFLElBQUksVUFBVSxLQUFLLEVBQUUsRUFBRTtZQUFFLFVBQVUsR0FBRyx3QkFBd0IsQ0FBQTtTQUFFO1FBQ2hFLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQzdCLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQy9CLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBL0JEOztHQUVHO0FBQzZCLG1DQUFhLEdBQVUsdUJBQXVCLENBQUM7QUFvRGpGOztHQUVHO0FBQ0gsTUFBTSxPQUFPLHVCQUF3QixTQUFRLElBQUksQ0FBQyxlQUFlO0lBaUIvRDs7T0FFRztJQUNILFlBQVksU0FBOEMsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDcEcsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUFFO2FBQzNFO1lBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7U0FBRTtRQUM1QixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxJQUFJLEVBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDaEYsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFDbkIsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFO2dCQUFFLElBQUksQ0FBQyxJQUFJLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLEtBQU0sQ0FBQyxDQUFDO2FBQUU7aUJBQzdEO2dCQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxLQUF1QyxDQUFDLENBQUM7YUFBRTtTQUM1RjtRQUNELElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQUU7SUFDNUUsQ0FBQztJQUNEOztPQUVHO0lBQ2EsaUJBQWlCLENBQUMsYUFBb0IsRUFBRTtRQUN0RCxJQUFJLE1BQU0sR0FBbUIsS0FBSyxDQUFDLGlCQUFpQixDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ2pFLElBQUksVUFBVSxLQUFLLEVBQUUsRUFBRTtZQUFFLFVBQVUsR0FBRywwQkFBMEIsQ0FBQTtTQUFFO1FBQ2xFLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQy9CLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQzdCLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQy9CLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBeENEOztHQUVHO0FBQzZCLHFDQUFhLEdBQVUseUJBQXlCLENBQUM7QUF5SG5GOztHQUVHO0FBQ0gsTUFBTSxPQUFPLGFBQWMsU0FBUSxJQUFJLENBQUMsY0FBYztJQTZEcEQ7O09BRUc7SUFDSCxZQUFZLFNBQW9DLEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQzFGLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxDQUFDLFlBQVksR0FBRyxlQUFlLENBQUM7UUFDcEMsSUFBSSxNQUFNLENBQUMsWUFBWSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQ2hHO1lBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxFQUFFLENBQUM7U0FBRTtRQUM5QixJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUE0QixFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsTUFBTSxFQUFDLENBQUMsQ0FBQztTQUFFO2FBQ3hHO1lBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7U0FBRTtRQUM1QixJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUNyQixJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7Z0JBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsT0FBUSxDQUFDLENBQUM7YUFBRTtpQkFDbkU7Z0JBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQTRCLE1BQU0sQ0FBQyxPQUFpQyxDQUFDLENBQUM7YUFBRTtTQUMvRztRQUNELElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQUU7UUFDMUUsSUFBSSxNQUFNLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBZ0MsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLFFBQVEsRUFBQyxDQUFDLENBQUM7U0FBRTtRQUN2SCxJQUFJLE1BQU0sQ0FBQyxXQUFXLENBQUMsRUFBRTtZQUN2QixJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7Z0JBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsU0FBVSxDQUFDLENBQUM7YUFBRTtpQkFDekU7Z0JBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQWdDLE1BQU0sQ0FBQyxTQUFtQyxDQUFDLENBQUM7YUFBRTtTQUN2SDtRQUNELElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1NBQUU7UUFDN0UsSUFBSSxNQUFNLENBQUMsWUFBWSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUM7U0FBRTthQUM3RCxJQUFJLE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLGtCQUFrQixFQUFDLENBQUMsQ0FBQztTQUFFO2FBQ2xILElBQUksTUFBTSxDQUFDLGtCQUFrQixDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztTQUFFO1FBQ3BHLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQUU7UUFDMUUsSUFBSSxNQUFNLENBQUMsWUFBWSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQy9GO1lBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxFQUFFLENBQUM7U0FBRTtRQUM5QixJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUNyRztZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO1NBQUU7UUFDNUIsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsTUFBTSxFQUFDLENBQUMsQ0FBQztTQUFFO1FBQ3BGLElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQ3JCLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtnQkFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxPQUFRLENBQUMsQ0FBQzthQUFFO2lCQUNuRTtnQkFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsT0FBdUMsQ0FBQyxDQUFDO2FBQUU7U0FDNUY7UUFDRCxJQUFJLE1BQU0sQ0FBQyxXQUFXLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxTQUFTLEVBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDMUYsSUFBSSxNQUFNLENBQUMsWUFBWSxDQUFDLEVBQUU7WUFDeEIsSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFO2dCQUFFLElBQUksQ0FBQyxTQUFTLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLFVBQVcsQ0FBQyxDQUFDO2FBQUU7aUJBQzVFO2dCQUFFLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxVQUF1QyxDQUFDLENBQUM7YUFBRTtTQUM1RjtRQUNELElBQUksTUFBTSxDQUFDLFlBQVksQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsdUJBQXVCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQzdHO1lBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxFQUFFLENBQUM7U0FBRTtJQUNoQyxDQUFDO0lBQ0Q7O09BRUc7SUFDYSxpQkFBaUIsQ0FBQyxhQUFvQixFQUFFO1FBQ3RELElBQUksTUFBTSxHQUFtQixLQUFLLENBQUMsaUJBQWlCLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDakUsSUFBSSxVQUFVLEtBQUssRUFBRSxFQUFFO1lBQUUsVUFBVSxHQUFHLGVBQWUsQ0FBQTtTQUFFO1FBQ3ZELElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ3JDLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ25DLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFDLFVBQVUsRUFBQyxtQkFBbUIsRUFBQyw2QkFBNkIsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUN0RixJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUM3QixJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBQyxVQUFVLEVBQUMsdUJBQXVCLEVBQUMsaUNBQWlDLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDaEcsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDaEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDbkMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDL0IsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDbkMsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDakMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDL0IsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDbEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDbkMsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQzs7QUExSEQ7O0dBRUc7QUFDNkIsMkJBQWEsR0FBVSxlQUFlLENBQUM7QUE2QnZFOztHQUVHO0FBQ3VCLHFDQUF1QixHQUFRLElBQUksQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNC5jb3JlIHZlcnNpb246IDQuMC4xXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogRGV0ZWN0ZWRJc3N1ZVxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTWFuaWZlc3RhdGlvbk9yU3ltcHRvbUNvZGVzLCAgTWFuaWZlc3RhdGlvbk9yU3ltcHRvbUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9NYW5pZmVzdGF0aW9uT3JTeW1wdG9tQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE1hbmlmZXN0YXRpb25PclN5bXB0b21Wc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL01hbmlmZXN0YXRpb25PclN5bXB0b21Wc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IERldGVjdGVkaXNzdWVNaXRpZ2F0aW9uQWN0aW9uQ29kZXMsICBEZXRlY3RlZGlzc3VlTWl0aWdhdGlvbkFjdGlvbkNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9EZXRlY3RlZGlzc3VlTWl0aWdhdGlvbkFjdGlvbkNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEZXRlY3RlZGlzc3VlTWl0aWdhdGlvbkFjdGlvblZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRGV0ZWN0ZWRpc3N1ZU1pdGlnYXRpb25BY3Rpb25Wc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE9ic2VydmF0aW9uU3RhdHVzQ29kZXMsICBPYnNlcnZhdGlvblN0YXR1c0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9PYnNlcnZhdGlvblN0YXR1c0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBPYnNlcnZhdGlvblN0YXR1c1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvT2JzZXJ2YXRpb25TdGF0dXNWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IERldGVjdGVkaXNzdWVDYXRlZ29yeUNvZGVzLCAgRGV0ZWN0ZWRpc3N1ZUNhdGVnb3J5Q29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0RldGVjdGVkaXNzdWVDYXRlZ29yeUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEZXRlY3RlZGlzc3VlQ2F0ZWdvcnlWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0RldGVjdGVkaXNzdWVDYXRlZ29yeVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRGV0ZWN0ZWRpc3N1ZVNldmVyaXR5Q29kZXMsICBEZXRlY3RlZGlzc3VlU2V2ZXJpdHlDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRGV0ZWN0ZWRpc3N1ZVNldmVyaXR5Q29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IERldGVjdGVkaXNzdWVTZXZlcml0eVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRGV0ZWN0ZWRpc3N1ZVNldmVyaXR5VnNWYWxpZGF0aW9uLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIERldGVjdGVkSXNzdWVFdmlkZW5jZSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBEZXRlY3RlZElzc3VlRXZpZGVuY2VBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBBIG1hbmlmZXN0YXRpb24gdGhhdCBsZWQgdG8gdGhlIHJlY29yZGluZyBvZiB0aGlzIGRldGVjdGVkIGlzc3VlLlxyXG4gICAqL1xyXG4gIGNvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTGlua3MgdG8gcmVzb3VyY2VzIHRoYXQgY29uc3RpdHV0ZSBldmlkZW5jZSBmb3IgdGhlIGRldGVjdGVkIGlzc3VlIHN1Y2ggYXMgYSBHdWlkYW5jZVJlc3BvbnNlIG9yIE1lYXN1cmVSZXBvcnQuXHJcbiAgICovXHJcbiAgZGV0YWlsPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogU3VwcG9ydGluZyBldmlkZW5jZSBvciBtYW5pZmVzdGF0aW9ucyB0aGF0IHByb3ZpZGUgdGhlIGJhc2lzIGZvciBpZGVudGlmeWluZyB0aGUgZGV0ZWN0ZWQgaXNzdWUgc3VjaCBhcyBhIEd1aWRhbmNlUmVzcG9uc2Ugb3IgTWVhc3VyZVJlcG9ydC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBEZXRlY3RlZElzc3VlRXZpZGVuY2UgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdEZXRlY3RlZElzc3VlRXZpZGVuY2UnO1xyXG4gIC8qKlxyXG4gICAqIEEgbWFuaWZlc3RhdGlvbiB0aGF0IGxlZCB0byB0aGUgcmVjb3JkaW5nIG9mIHRoaXMgZGV0ZWN0ZWQgaXNzdWUuXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGU6IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogTGlua3MgdG8gcmVzb3VyY2VzIHRoYXQgY29uc3RpdHV0ZSBldmlkZW5jZSBmb3IgdGhlIGRldGVjdGVkIGlzc3VlIHN1Y2ggYXMgYSBHdWlkYW5jZVJlc3BvbnNlIG9yIE1lYXN1cmVSZXBvcnQuXHJcbiAgICovXHJcbiAgcHVibGljIGRldGFpbDogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBEZXRlY3RlZElzc3VlRXZpZGVuY2UgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxEZXRlY3RlZElzc3VlRXZpZGVuY2VBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IHNvdXJjZS5jb2RlLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY29kZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydkZXRhaWwnXSkgeyB0aGlzLmRldGFpbCA9IHNvdXJjZS5kZXRhaWwubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5kZXRhaWwgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdEZXRlY3RlZElzc3VlLmV2aWRlbmNlJyB9XHJcbiAgICB0aGlzLnZPcHRBKCdjb2RlJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0QSgnZGV0YWlsJyxleHByZXNzaW9uKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIERldGVjdGVkSXNzdWVNaXRpZ2F0aW9uIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIERldGVjdGVkSXNzdWVNaXRpZ2F0aW9uQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIFwidGV4dFwiIGNvbXBvbmVudCBjYW4gYmUgdXNlZCBmb3IgZGV0YWlsIG9yIHdoZW4gbm8gYXBwcm9wcmlhdGUgY29kZSBleGlzdHMuXHJcbiAgICovXHJcbiAgYWN0aW9uOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGlzIG1pZ2h0IG5vdCBiZSB0aGUgc2FtZSBhcyB3aGVuIHRoZSBtaXRpZ2F0aW5nIHN0ZXAgd2FzIGFjdHVhbGx5IHRha2VuLlxyXG4gICAqL1xyXG4gIGRhdGU/OiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBEZXRlY3RlZElzc3VlLm1pdGlnYXRpb24uZGF0ZVxyXG4gICAqL1xyXG4gIF9kYXRlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHRoZSBwcmFjdGl0aW9uZXIgd2hvIGRldGVybWluZWQgdGhlIG1pdGlnYXRpb24gYW5kIHRha2VzIHJlc3BvbnNpYmlsaXR5IGZvciB0aGUgbWl0aWdhdGlvbiBzdGVwIG9jY3VycmluZy5cclxuICAgKi9cclxuICBhdXRob3I/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogSW5kaWNhdGVzIGFuIGFjdGlvbiB0aGF0IGhhcyBiZWVuIHRha2VuIG9yIGlzIGNvbW1pdHRlZCB0byByZWR1Y2Ugb3IgZWxpbWluYXRlIHRoZSBsaWtlbGlob29kIG9mIHRoZSByaXNrIGlkZW50aWZpZWQgYnkgdGhlIGRldGVjdGVkIGlzc3VlIGZyb20gbWFuaWZlc3RpbmcuICBDYW4gYWxzbyByZWZsZWN0IGFuIG9ic2VydmF0aW9uIG9mIGtub3duIG1pdGlnYXRpbmcgZmFjdG9ycyB0aGF0IG1heSByZWR1Y2UvZWxpbWluYXRlIHRoZSBuZWVkIGZvciBhbnkgYWN0aW9uLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIERldGVjdGVkSXNzdWVNaXRpZ2F0aW9uIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnRGV0ZWN0ZWRJc3N1ZU1pdGlnYXRpb24nO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBcInRleHRcIiBjb21wb25lbnQgY2FuIGJlIHVzZWQgZm9yIGRldGFpbCBvciB3aGVuIG5vIGFwcHJvcHJpYXRlIGNvZGUgZXhpc3RzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhY3Rpb246IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBtaWdodCBub3QgYmUgdGhlIHNhbWUgYXMgd2hlbiB0aGUgbWl0aWdhdGluZyBzdGVwIHdhcyBhY3R1YWxseSB0YWtlbi5cclxuICAgKi9cclxuICBwdWJsaWMgZGF0ZT86IGZoaXIuRmhpckRhdGVUaW1lfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHRoZSBwcmFjdGl0aW9uZXIgd2hvIGRldGVybWluZWQgdGhlIG1pdGlnYXRpb24gYW5kIHRha2VzIHJlc3BvbnNpYmlsaXR5IGZvciB0aGUgbWl0aWdhdGlvbiBzdGVwIG9jY3VycmluZy5cclxuICAgKi9cclxuICBwdWJsaWMgYXV0aG9yPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIERldGVjdGVkSXNzdWVNaXRpZ2F0aW9uIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8RGV0ZWN0ZWRJc3N1ZU1pdGlnYXRpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnYWN0aW9uJ10pIHsgdGhpcy5hY3Rpb24gPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmFjdGlvbik7IH1cclxuICAgIGVsc2UgeyB0aGlzLmFjdGlvbiA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ2RhdGUnXSkgeyB0aGlzLmRhdGUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2UuZGF0ZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfZGF0ZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLmRhdGUpIHsgdGhpcy5kYXRlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2RhdGUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5kYXRlID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHNvdXJjZS5fZGF0ZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckRhdGVUaW1lQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydhdXRob3InXSkgeyB0aGlzLmF1dGhvciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuYXV0aG9yKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdEZXRlY3RlZElzc3VlLm1pdGlnYXRpb24nIH1cclxuICAgIHRoaXMudlJlcVMoJ2FjdGlvbicsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ2RhdGUnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdhdXRob3InLGV4cHJlc3Npb24pXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgRGV0ZWN0ZWRJc3N1ZSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBEZXRlY3RlZElzc3VlQXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiRGV0ZWN0ZWRJc3N1ZVwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBCdXNpbmVzcyBpZGVudGlmaWVyIGFzc29jaWF0ZWQgd2l0aCB0aGUgZGV0ZWN0ZWQgaXNzdWUgcmVjb3JkLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgYmVjYXVzZSB0aGUgc3RhdHVzIGNvbnRhaW5zIHRoZSBjb2RlcyBjYW5jZWxsZWQgYW5kIGVudGVyZWQtaW4tZXJyb3IgdGhhdCBtYXJrIHRoZSBpc3N1ZSBhcyBub3QgY3VycmVudGx5IHZhbGlkLlxyXG4gICAqL1xyXG4gIHN0YXR1czogZmhpci5GaGlyQ29kZTxPYnNlcnZhdGlvblN0YXR1c0NvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBEZXRlY3RlZElzc3VlLnN0YXR1c1xyXG4gICAqL1xyXG4gIF9zdGF0dXM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgdGhlIGdlbmVyYWwgdHlwZSBvZiBpc3N1ZSBpZGVudGlmaWVkLlxyXG4gICAqL1xyXG4gIGNvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB0aGUgZGVncmVlIG9mIGltcG9ydGFuY2UgYXNzb2NpYXRlZCB3aXRoIHRoZSBpZGVudGlmaWVkIGlzc3VlIGJhc2VkIG9uIHRoZSBwb3RlbnRpYWwgaW1wYWN0IG9uIHRoZSBwYXRpZW50LlxyXG4gICAqL1xyXG4gIHNldmVyaXR5PzogZmhpci5GaGlyQ29kZTxEZXRlY3RlZGlzc3VlU2V2ZXJpdHlDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogRGV0ZWN0ZWRJc3N1ZS5zZXZlcml0eVxyXG4gICAqL1xyXG4gIF9zZXZlcml0eT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHRoZSBwYXRpZW50IHdob3NlIHJlY29yZCB0aGUgZGV0ZWN0ZWQgaXNzdWUgaXMgYXNzb2NpYXRlZCB3aXRoLlxyXG4gICAqL1xyXG4gIHBhdGllbnQ/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRlIG9yIHBlcmlvZCB3aGVuIHRoZSBkZXRlY3RlZCBpc3N1ZSB3YXMgaW5pdGlhbGx5IGlkZW50aWZpZWQuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllZD86IGZoaXIuRmhpckRhdGVUaW1lfGZoaXIuUGVyaW9kfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSBvciBwZXJpb2Qgd2hlbiB0aGUgZGV0ZWN0ZWQgaXNzdWUgd2FzIGluaXRpYWxseSBpZGVudGlmaWVkLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZWREYXRlVGltZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgb3IgcGVyaW9kIHdoZW4gdGhlIGRldGVjdGVkIGlzc3VlIHdhcyBpbml0aWFsbHkgaWRlbnRpZmllZC5cclxuICAgKi9cclxuICBpZGVudGlmaWVkUGVyaW9kPzogZmhpci5QZXJpb2RBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmRpdmlkdWFsIG9yIGRldmljZSByZXNwb25zaWJsZSBmb3IgdGhlIGlzc3VlIGJlaW5nIHJhaXNlZC4gIEZvciBleGFtcGxlLCBhIGRlY2lzaW9uIHN1cHBvcnQgYXBwbGljYXRpb24gb3IgYSBwaGFybWFjaXN0IGNvbmR1Y3RpbmcgYSBtZWRpY2F0aW9uIHJldmlldy5cclxuICAgKi9cclxuICBhdXRob3I/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZXJlJ3MgYW4gaW1wbGljaXQgY29uc3RyYWludCBvbiB0aGUgbnVtYmVyIG9mIGltcGxpY2F0ZWQgcmVzb3VyY2VzIGJhc2VkIG9uIERldGVjdGVkSXNzdWUudHlwZTsgZS5nLiBGb3IgZHJ1Zy1kcnVnLCB0aGVyZSB3b3VsZCBiZSBtb3JlIHRoYW4gb25lLiAgRm9yIHRpbWluZywgdGhlcmUgd291bGQgdHlwaWNhbGx5IG9ubHkgYmUgb25lLlxyXG4gICAqL1xyXG4gIGltcGxpY2F0ZWQ/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU3VwcG9ydGluZyBldmlkZW5jZSBvciBtYW5pZmVzdGF0aW9ucyB0aGF0IHByb3ZpZGUgdGhlIGJhc2lzIGZvciBpZGVudGlmeWluZyB0aGUgZGV0ZWN0ZWQgaXNzdWUgc3VjaCBhcyBhIEd1aWRhbmNlUmVzcG9uc2Ugb3IgTWVhc3VyZVJlcG9ydC5cclxuICAgKi9cclxuICBldmlkZW5jZT86IGZoaXIuRGV0ZWN0ZWRJc3N1ZUV2aWRlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTaG91bGQgZm9jdXMgb24gaW5mb3JtYXRpb24gbm90IGNvdmVyZWQgZWxzZXdoZXJlIGFzIGRpc2NyZXRlIGRhdGEgLSBubyBuZWVkIHRvIGR1cGxpY2F0ZSB0aGUgbmFycmF0aXZlLlxyXG4gICAqL1xyXG4gIGRldGFpbD86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBEZXRlY3RlZElzc3VlLmRldGFpbFxyXG4gICAqL1xyXG4gIF9kZXRhaWw/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsaXRlcmF0dXJlLCBrbm93bGVkZ2UtYmFzZSBvciBzaW1pbGFyIHJlZmVyZW5jZSB0aGF0IGRlc2NyaWJlcyB0aGUgcHJvcGVuc2l0eSBmb3IgdGhlIGRldGVjdGVkIGlzc3VlIGlkZW50aWZpZWQuXHJcbiAgICovXHJcbiAgcmVmZXJlbmNlPzogZmhpci5GaGlyVXJpfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IERldGVjdGVkSXNzdWUucmVmZXJlbmNlXHJcbiAgICovXHJcbiAgX3JlZmVyZW5jZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIGFuIGFjdGlvbiB0aGF0IGhhcyBiZWVuIHRha2VuIG9yIGlzIGNvbW1pdHRlZCB0byByZWR1Y2Ugb3IgZWxpbWluYXRlIHRoZSBsaWtlbGlob29kIG9mIHRoZSByaXNrIGlkZW50aWZpZWQgYnkgdGhlIGRldGVjdGVkIGlzc3VlIGZyb20gbWFuaWZlc3RpbmcuICBDYW4gYWxzbyByZWZsZWN0IGFuIG9ic2VydmF0aW9uIG9mIGtub3duIG1pdGlnYXRpbmcgZmFjdG9ycyB0aGF0IG1heSByZWR1Y2UvZWxpbWluYXRlIHRoZSBuZWVkIGZvciBhbnkgYWN0aW9uLlxyXG4gICAqL1xyXG4gIG1pdGlnYXRpb24/OiBmaGlyLkRldGVjdGVkSXNzdWVNaXRpZ2F0aW9uQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEluZGljYXRlcyBhbiBhY3R1YWwgb3IgcG90ZW50aWFsIGNsaW5pY2FsIGlzc3VlIHdpdGggb3IgYmV0d2VlbiBvbmUgb3IgbW9yZSBhY3RpdmUgb3IgcHJvcG9zZWQgY2xpbmljYWwgYWN0aW9ucyBmb3IgYSBwYXRpZW50OyBlLmcuIERydWctZHJ1ZyBpbnRlcmFjdGlvbiwgSW5lZmZlY3RpdmUgdHJlYXRtZW50IGZyZXF1ZW5jeSwgUHJvY2VkdXJlLWNvbmRpdGlvbiBjb25mbGljdCwgZXRjLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIERldGVjdGVkSXNzdWUgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0RldGVjdGVkSXNzdWUnO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNvdXJjZVR5cGU6IFwiRGV0ZWN0ZWRJc3N1ZVwiO1xyXG4gIC8qKlxyXG4gICAqIEJ1c2luZXNzIGlkZW50aWZpZXIgYXNzb2NpYXRlZCB3aXRoIHRoZSBkZXRlY3RlZCBpc3N1ZSByZWNvcmQuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI6IGZoaXIuSWRlbnRpZmllcltdO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgYmVjYXVzZSB0aGUgc3RhdHVzIGNvbnRhaW5zIHRoZSBjb2RlcyBjYW5jZWxsZWQgYW5kIGVudGVyZWQtaW4tZXJyb3IgdGhhdCBtYXJrIHRoZSBpc3N1ZSBhcyBub3QgY3VycmVudGx5IHZhbGlkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0dXM6IGZoaXIuRmhpckNvZGU8T2JzZXJ2YXRpb25TdGF0dXNDb2RlVHlwZT58bnVsbDtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHRoZSBnZW5lcmFsIHR5cGUgb2YgaXNzdWUgaWRlbnRpZmllZC5cclxuICAgKi9cclxuICBwdWJsaWMgY29kZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgdGhlIGRlZ3JlZSBvZiBpbXBvcnRhbmNlIGFzc29jaWF0ZWQgd2l0aCB0aGUgaWRlbnRpZmllZCBpc3N1ZSBiYXNlZCBvbiB0aGUgcG90ZW50aWFsIGltcGFjdCBvbiB0aGUgcGF0aWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgc2V2ZXJpdHk/OiBmaGlyLkZoaXJDb2RlPERldGVjdGVkaXNzdWVTZXZlcml0eUNvZGVUeXBlPnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHRoZSBwYXRpZW50IHdob3NlIHJlY29yZCB0aGUgZGV0ZWN0ZWQgaXNzdWUgaXMgYXNzb2NpYXRlZCB3aXRoLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXRpZW50PzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRlIG9yIHBlcmlvZCB3aGVuIHRoZSBkZXRlY3RlZCBpc3N1ZSB3YXMgaW5pdGlhbGx5IGlkZW50aWZpZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZWQ/OiAoZmhpci5GaGlyRGF0ZVRpbWV8Zmhpci5QZXJpb2QpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IERldGVjdGVkSXNzdWUuaWRlbnRpZmllZFt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c19pZGVudGlmaWVkSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogSW5kaXZpZHVhbCBvciBkZXZpY2UgcmVzcG9uc2libGUgZm9yIHRoZSBpc3N1ZSBiZWluZyByYWlzZWQuICBGb3IgZXhhbXBsZSwgYSBkZWNpc2lvbiBzdXBwb3J0IGFwcGxpY2F0aW9uIG9yIGEgcGhhcm1hY2lzdCBjb25kdWN0aW5nIGEgbWVkaWNhdGlvbiByZXZpZXcuXHJcbiAgICovXHJcbiAgcHVibGljIGF1dGhvcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGVyZSdzIGFuIGltcGxpY2l0IGNvbnN0cmFpbnQgb24gdGhlIG51bWJlciBvZiBpbXBsaWNhdGVkIHJlc291cmNlcyBiYXNlZCBvbiBEZXRlY3RlZElzc3VlLnR5cGU7IGUuZy4gRm9yIGRydWctZHJ1ZywgdGhlcmUgd291bGQgYmUgbW9yZSB0aGFuIG9uZS4gIEZvciB0aW1pbmcsIHRoZXJlIHdvdWxkIHR5cGljYWxseSBvbmx5IGJlIG9uZS5cclxuICAgKi9cclxuICBwdWJsaWMgaW1wbGljYXRlZDogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBTdXBwb3J0aW5nIGV2aWRlbmNlIG9yIG1hbmlmZXN0YXRpb25zIHRoYXQgcHJvdmlkZSB0aGUgYmFzaXMgZm9yIGlkZW50aWZ5aW5nIHRoZSBkZXRlY3RlZCBpc3N1ZSBzdWNoIGFzIGEgR3VpZGFuY2VSZXNwb25zZSBvciBNZWFzdXJlUmVwb3J0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBldmlkZW5jZTogZmhpci5EZXRlY3RlZElzc3VlRXZpZGVuY2VbXTtcclxuICAvKipcclxuICAgKiBTaG91bGQgZm9jdXMgb24gaW5mb3JtYXRpb24gbm90IGNvdmVyZWQgZWxzZXdoZXJlIGFzIGRpc2NyZXRlIGRhdGEgLSBubyBuZWVkIHRvIGR1cGxpY2F0ZSB0aGUgbmFycmF0aXZlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZXRhaWw/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsaXRlcmF0dXJlLCBrbm93bGVkZ2UtYmFzZSBvciBzaW1pbGFyIHJlZmVyZW5jZSB0aGF0IGRlc2NyaWJlcyB0aGUgcHJvcGVuc2l0eSBmb3IgdGhlIGRldGVjdGVkIGlzc3VlIGlkZW50aWZpZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHJlZmVyZW5jZT86IGZoaXIuRmhpclVyaXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIGFuIGFjdGlvbiB0aGF0IGhhcyBiZWVuIHRha2VuIG9yIGlzIGNvbW1pdHRlZCB0byByZWR1Y2Ugb3IgZWxpbWluYXRlIHRoZSBsaWtlbGlob29kIG9mIHRoZSByaXNrIGlkZW50aWZpZWQgYnkgdGhlIGRldGVjdGVkIGlzc3VlIGZyb20gbWFuaWZlc3RpbmcuICBDYW4gYWxzbyByZWZsZWN0IGFuIG9ic2VydmF0aW9uIG9mIGtub3duIG1pdGlnYXRpbmcgZmFjdG9ycyB0aGF0IG1heSByZWR1Y2UvZWxpbWluYXRlIHRoZSBuZWVkIGZvciBhbnkgYWN0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtaXRpZ2F0aW9uOiBmaGlyLkRldGVjdGVkSXNzdWVNaXRpZ2F0aW9uW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgRGV0ZWN0ZWRJc3N1ZSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPERldGVjdGVkSXNzdWVBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnRGV0ZWN0ZWRJc3N1ZSc7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gc291cmNlLmlkZW50aWZpZXIubWFwKCh4KSA9PiBuZXcgZmhpci5JZGVudGlmaWVyKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaWRlbnRpZmllciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydzdGF0dXMnXSkgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPE9ic2VydmF0aW9uU3RhdHVzQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnN0YXR1c30pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfc3RhdHVzJ10pIHtcclxuICAgICAgaWYgKHRoaXMuc3RhdHVzKSB7IHRoaXMuc3RhdHVzLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3N0YXR1cyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPE9ic2VydmF0aW9uU3RhdHVzQ29kZVR5cGU+KHNvdXJjZS5fc3RhdHVzIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jb2RlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2V2ZXJpdHknXSkgeyB0aGlzLnNldmVyaXR5ID0gbmV3IGZoaXIuRmhpckNvZGU8RGV0ZWN0ZWRpc3N1ZVNldmVyaXR5Q29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnNldmVyaXR5fSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zZXZlcml0eSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnNldmVyaXR5KSB7IHRoaXMuc2V2ZXJpdHkuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc2V2ZXJpdHkhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zZXZlcml0eSA9IG5ldyBmaGlyLkZoaXJDb2RlPERldGVjdGVkaXNzdWVTZXZlcml0eUNvZGVUeXBlPihzb3VyY2UuX3NldmVyaXR5IGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydwYXRpZW50J10pIHsgdGhpcy5wYXRpZW50ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5wYXRpZW50KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllZCddKSB7IHRoaXMuaWRlbnRpZmllZCA9IHNvdXJjZS5pZGVudGlmaWVkOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2lkZW50aWZpZWREYXRlVGltZSddKSB7IHRoaXMuaWRlbnRpZmllZCA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5pZGVudGlmaWVkRGF0ZVRpbWV9KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydpZGVudGlmaWVkUGVyaW9kJ10pIHsgdGhpcy5pZGVudGlmaWVkID0gbmV3IGZoaXIuUGVyaW9kKHNvdXJjZS5pZGVudGlmaWVkUGVyaW9kKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYXV0aG9yJ10pIHsgdGhpcy5hdXRob3IgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmF1dGhvcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ2ltcGxpY2F0ZWQnXSkgeyB0aGlzLmltcGxpY2F0ZWQgPSBzb3VyY2UuaW1wbGljYXRlZC5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmltcGxpY2F0ZWQgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZXZpZGVuY2UnXSkgeyB0aGlzLmV2aWRlbmNlID0gc291cmNlLmV2aWRlbmNlLm1hcCgoeCkgPT4gbmV3IGZoaXIuRGV0ZWN0ZWRJc3N1ZUV2aWRlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZXZpZGVuY2UgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGV0YWlsJ10pIHsgdGhpcy5kZXRhaWwgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmRldGFpbH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfZGV0YWlsJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZGV0YWlsKSB7IHRoaXMuZGV0YWlsLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2RldGFpbCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRldGFpbCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9kZXRhaWwgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3JlZmVyZW5jZSddKSB7IHRoaXMucmVmZXJlbmNlID0gbmV3IGZoaXIuRmhpclVyaSh7dmFsdWU6IHNvdXJjZS5yZWZlcmVuY2V9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3JlZmVyZW5jZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnJlZmVyZW5jZSkgeyB0aGlzLnJlZmVyZW5jZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9yZWZlcmVuY2UhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5yZWZlcmVuY2UgPSBuZXcgZmhpci5GaGlyVXJpKHNvdXJjZS5fcmVmZXJlbmNlIGFzIFBhcnRpYWw8Zmhpci5GaGlyVXJpQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydtaXRpZ2F0aW9uJ10pIHsgdGhpcy5taXRpZ2F0aW9uID0gc291cmNlLm1pdGlnYXRpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5EZXRlY3RlZElzc3VlTWl0aWdhdGlvbih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm1pdGlnYXRpb24gPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdEZXRlY3RlZElzc3VlJyB9XHJcbiAgICB0aGlzLnZSZXFTKCdyZXNvdXJjZVR5cGUnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRBKCdpZGVudGlmaWVyJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52UmVxU1YoJ3N0YXR1cycsZXhwcmVzc2lvbiwnT2JzZXJ2YXRpb25TdGF0dXMnLE9ic2VydmF0aW9uU3RhdHVzVnNWYWxpZGF0aW9uLCdyJylcclxuICAgIHRoaXMudk9wdFMoJ2NvZGUnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTVignc2V2ZXJpdHknLGV4cHJlc3Npb24sJ0RldGVjdGVkaXNzdWVTZXZlcml0eScsRGV0ZWN0ZWRpc3N1ZVNldmVyaXR5VnNWYWxpZGF0aW9uLCdyJylcclxuICAgIHRoaXMudk9wdFMoJ3BhdGllbnQnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdpZGVudGlmaWVkJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnYXV0aG9yJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0QSgnaW1wbGljYXRlZCcsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdEEoJ2V2aWRlbmNlJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnZGV0YWlsJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygncmVmZXJlbmNlJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0QSgnbWl0aWdhdGlvbicsZXhwcmVzc2lvbilcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbiJdfQ==