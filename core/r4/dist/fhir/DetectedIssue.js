// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: DetectedIssue
import * as fhir from '../fhir.js';
// @ts-ignore
import { DetectedissueMitigationActionCodings, } from '../fhirValueSets/DetectedissueMitigationActionCodings.js';
// @ts-ignore
import { ObservationStatusCodes } from '../fhirValueSets/ObservationStatusCodes.js';
// @ts-ignore
import { DetectedissueCategoryCodings, } from '../fhirValueSets/DetectedissueCategoryCodings.js';
// @ts-ignore
import { DetectedissueSeverityCodes } from '../fhirValueSets/DetectedissueSeverityCodes.js';
/**
 * Supporting evidence or manifestations that provide the basis for identifying the detected issue such as a GuidanceResponse or MeasureReport.
 */
export class DetectedIssueEvidence extends fhir.BackboneElement {
    /**
     * Default constructor for DetectedIssueEvidence - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = source.code.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.code = [];
        }
        if (source['detail']) {
            this.detail = source.detail.map((x) => new fhir.Reference(x));
        }
        else {
            this.detail = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["code"]) {
            this.code.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["detail"]) {
            this.detail.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DetectedIssueEvidence._fts_dataType = 'DetectedIssueEvidence';
/**
 * Indicates an action that has been taken or is committed to reduce or eliminate the likelihood of the risk identified by the detected issue from manifesting.  Can also reflect an observation of known mitigating factors that may reduce/eliminate the need for any action.
 */
export class DetectedIssueMitigation extends fhir.BackboneElement {
    /**
     * Default constructor for DetectedIssueMitigation - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['action']) {
            this.action = new fhir.CodeableConcept(source.action);
        }
        else {
            this.action = null;
        }
        if (source['date']) {
            this.date = new fhir.FhirDateTime({ value: source.date });
        }
        if (source['author']) {
            this.author = new fhir.Reference(source.author);
        }
    }
    /**
     * Preferred-bound Value Set for action (DetectedIssue.mitigation.action)
     */
    static get actionPreferredCodings() {
        return DetectedissueMitigationActionCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['action']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property action:fhir.CodeableConcept fhir: DetectedIssue.mitigation.action:CodeableConcept' });
        }
        if (this["action"]) {
            issues.push(...this.action.doModelValidation());
        }
        if (this["date"]) {
            issues.push(...this.date.doModelValidation());
        }
        if (this["author"]) {
            issues.push(...this.author.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DetectedIssueMitigation._fts_dataType = 'DetectedIssueMitigation';
/**
 * Indicates an actual or potential clinical issue with or between one or more active or proposed clinical actions for a patient; e.g. Drug-drug interaction, Ineffective treatment frequency, Procedure-condition conflict, etc.
 */
export class DetectedIssue extends fhir.DomainResource {
    /**
     * Default constructor for DetectedIssue - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'DetectedIssue';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        if (source['severity']) {
            this.severity = new fhir.FhirCode({ value: source.severity });
        }
        if (source['patient']) {
            this.patient = new fhir.Reference(source.patient);
        }
        if (source['identified']) {
            this.identified = source.identified;
        }
        else if (source['identifiedDateTime']) {
            this.identified = new fhir.FhirDateTime({ value: source.identifiedDateTime });
        }
        else if (source['identifiedPeriod']) {
            this.identified = new fhir.Period(source.identifiedPeriod);
        }
        if (source['author']) {
            this.author = new fhir.Reference(source.author);
        }
        if (source['implicated']) {
            this.implicated = source.implicated.map((x) => new fhir.Reference(x));
        }
        else {
            this.implicated = [];
        }
        if (source['evidence']) {
            this.evidence = source.evidence.map((x) => new fhir.DetectedIssueEvidence(x));
        }
        else {
            this.evidence = [];
        }
        if (source['detail']) {
            this.detail = new fhir.FhirString({ value: source.detail });
        }
        if (source['reference']) {
            this.reference = new fhir.FhirUri({ value: source.reference });
        }
        if (source['mitigation']) {
            this.mitigation = source.mitigation.map((x) => new fhir.DetectedIssueMitigation(x));
        }
        else {
            this.mitigation = [];
        }
    }
    /**
     * Required-bound Value Set for status (DetectedIssue.status)
     */
    static get statusRequiredCodes() {
        return ObservationStatusCodes;
    }
    /**
     * Preferred-bound Value Set for code (DetectedIssue.code)
     */
    static get codePreferredCodings() {
        return DetectedissueCategoryCodings;
    }
    /**
     * Required-bound Value Set for severity (DetectedIssue.severity)
     */
    static get severityRequiredCodes() {
        return DetectedissueSeverityCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType:"DetectedIssue" fhir: DetectedIssue.resourceType:"DetectedIssue"' });
        }
        if (this["identifier"]) {
            this.identifier.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (!this['status']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property status:fhir.FhirCode<ObservationStatusCodeType> fhir: DetectedIssue.status:code' });
        }
        if (this['status'] && (!Object.values(ObservationStatusCodes).includes(this.status))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property status:fhir.FhirCode<ObservationStatusCodeType> fhir: DetectedIssue.status:code Required binding to: ObservationStatus' });
        }
        if (this["status"]) {
            issues.push(...this.status.doModelValidation());
        }
        if (this["code"]) {
            issues.push(...this.code.doModelValidation());
        }
        if (this['severity'] && (!Object.values(DetectedissueSeverityCodes).includes(this.severity))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property severity?:fhir.FhirCode<DetectedissueSeverityCodeType> fhir: DetectedIssue.severity:code Required binding to: DetectedissueSeverity' });
        }
        if (this["severity"]) {
            issues.push(...this.severity.doModelValidation());
        }
        if (this["patient"]) {
            issues.push(...this.patient.doModelValidation());
        }
        if (this["author"]) {
            issues.push(...this.author.doModelValidation());
        }
        if (this["implicated"]) {
            this.implicated.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["evidence"]) {
            this.evidence.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["detail"]) {
            issues.push(...this.detail.doModelValidation());
        }
        if (this["reference"]) {
            issues.push(...this.reference.doModelValidation());
        }
        if (this["mitigation"]) {
            this.mitigation.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DetectedIssue._fts_dataType = 'DetectedIssue';
/**
 * Internal flag to properly serialize choice-type element DetectedIssue.identified[x]
 */
DetectedIssue._fts_identifiedIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGV0ZWN0ZWRJc3N1ZS5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvRGV0ZWN0ZWRJc3N1ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQywrQkFBK0I7QUFFL0IsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFNbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSxvQ0FBb0MsR0FBMkMsTUFBTSwwREFBMEQsQ0FBQztBQUt6SixhQUFhO0FBQ2IsT0FBTyxFQUFFLHNCQUFzQixFQUE4QixNQUFNLDRDQUE0QyxDQUFDO0FBQ2hILGFBQWE7QUFDYixPQUFPLEVBQUUsNEJBQTRCLEdBQW1DLE1BQU0sa0RBQWtELENBQUM7QUFLakksYUFBYTtBQUNiLE9BQU8sRUFBRSwwQkFBMEIsRUFBa0MsTUFBTSxnREFBZ0QsQ0FBQztBQWU1SDs7R0FFRztBQUNILE1BQU0sT0FBTyxxQkFBc0IsU0FBUSxJQUFJLENBQUMsZUFBZTtJQWE3RDs7T0FFRztJQUNILFlBQVksU0FBNEMsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDbEcsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDbkY7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQztTQUFFO1FBQ3hCLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENB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QUFpQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQUU7UUFDbEcsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUN4RSxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQzlFLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7U0FBRTtRQUN0RyxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQXJJRDs7R0FFRztBQUM2QiwyQkFBYSxHQUFVLGVBQWUsQ0FBQztBQTZCdkU7O0dBRUc7QUFDdUIscUNBQXVCLEdBQVEsSUFBSSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0LmNvcmUgdmVyc2lvbjogNC4wLjFcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBEZXRlY3RlZElzc3VlXHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBNYW5pZmVzdGF0aW9uT3JTeW1wdG9tQ29kaW5ncywgTWFuaWZlc3RhdGlvbk9yU3ltcHRvbUNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL01hbmlmZXN0YXRpb25PclN5bXB0b21Db2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBNYW5pZmVzdGF0aW9uT3JTeW1wdG9tQ29kZXMsICBNYW5pZmVzdGF0aW9uT3JTeW1wdG9tQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL01hbmlmZXN0YXRpb25PclN5bXB0b21Db2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRGV0ZWN0ZWRpc3N1ZU1pdGlnYXRpb25BY3Rpb25Db2RpbmdzLCBEZXRlY3RlZGlzc3VlTWl0aWdhdGlvbkFjdGlvbkNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0RldGVjdGVkaXNzdWVNaXRpZ2F0aW9uQWN0aW9uQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRGV0ZWN0ZWRpc3N1ZU1pdGlnYXRpb25BY3Rpb25Db2RlcywgIERldGVjdGVkaXNzdWVNaXRpZ2F0aW9uQWN0aW9uQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0RldGVjdGVkaXNzdWVNaXRpZ2F0aW9uQWN0aW9uQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE9ic2VydmF0aW9uU3RhdHVzQ29kaW5ncywgT2JzZXJ2YXRpb25TdGF0dXNDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9PYnNlcnZhdGlvblN0YXR1c0NvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE9ic2VydmF0aW9uU3RhdHVzQ29kZXMsICBPYnNlcnZhdGlvblN0YXR1c0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9PYnNlcnZhdGlvblN0YXR1c0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEZXRlY3RlZGlzc3VlQ2F0ZWdvcnlDb2RpbmdzLCBEZXRlY3RlZGlzc3VlQ2F0ZWdvcnlDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9EZXRlY3RlZGlzc3VlQ2F0ZWdvcnlDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEZXRlY3RlZGlzc3VlQ2F0ZWdvcnlDb2RlcywgIERldGVjdGVkaXNzdWVDYXRlZ29yeUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9EZXRlY3RlZGlzc3VlQ2F0ZWdvcnlDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRGV0ZWN0ZWRpc3N1ZVNldmVyaXR5Q29kaW5ncywgRGV0ZWN0ZWRpc3N1ZVNldmVyaXR5Q29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRGV0ZWN0ZWRpc3N1ZVNldmVyaXR5Q29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRGV0ZWN0ZWRpc3N1ZVNldmVyaXR5Q29kZXMsICBEZXRlY3RlZGlzc3VlU2V2ZXJpdHlDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRGV0ZWN0ZWRpc3N1ZVNldmVyaXR5Q29kZXMuanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgRGV0ZWN0ZWRJc3N1ZUV2aWRlbmNlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIERldGVjdGVkSXNzdWVFdmlkZW5jZUFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEEgbWFuaWZlc3RhdGlvbiB0aGF0IGxlZCB0byB0aGUgcmVjb3JkaW5nIG9mIHRoaXMgZGV0ZWN0ZWQgaXNzdWUuXHJcbiAgICovXHJcbiAgY29kZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBMaW5rcyB0byByZXNvdXJjZXMgdGhhdCBjb25zdGl0dXRlIGV2aWRlbmNlIGZvciB0aGUgZGV0ZWN0ZWQgaXNzdWUgc3VjaCBhcyBhIEd1aWRhbmNlUmVzcG9uc2Ugb3IgTWVhc3VyZVJlcG9ydC5cclxuICAgKi9cclxuICBkZXRhaWw/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTdXBwb3J0aW5nIGV2aWRlbmNlIG9yIG1hbmlmZXN0YXRpb25zIHRoYXQgcHJvdmlkZSB0aGUgYmFzaXMgZm9yIGlkZW50aWZ5aW5nIHRoZSBkZXRlY3RlZCBpc3N1ZSBzdWNoIGFzIGEgR3VpZGFuY2VSZXNwb25zZSBvciBNZWFzdXJlUmVwb3J0LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIERldGVjdGVkSXNzdWVFdmlkZW5jZSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0RldGVjdGVkSXNzdWVFdmlkZW5jZSc7XHJcbiAgLyoqXHJcbiAgICogQSBtYW5pZmVzdGF0aW9uIHRoYXQgbGVkIHRvIHRoZSByZWNvcmRpbmcgb2YgdGhpcyBkZXRlY3RlZCBpc3N1ZS5cclxuICAgKi9cclxuICBwdWJsaWMgY29kZTogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBMaW5rcyB0byByZXNvdXJjZXMgdGhhdCBjb25zdGl0dXRlIGV2aWRlbmNlIGZvciB0aGUgZGV0ZWN0ZWQgaXNzdWUgc3VjaCBhcyBhIEd1aWRhbmNlUmVzcG9uc2Ugb3IgTWVhc3VyZVJlcG9ydC5cclxuICAgKi9cclxuICBwdWJsaWMgZGV0YWlsOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIERldGVjdGVkSXNzdWVFdmlkZW5jZSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPERldGVjdGVkSXNzdWVFdmlkZW5jZUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gc291cmNlLmNvZGUubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb2RlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2RldGFpbCddKSB7IHRoaXMuZGV0YWlsID0gc291cmNlLmRldGFpbC5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmRldGFpbCA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAodGhpc1tcImNvZGVcIl0pIHsgdGhpcy5jb2RlLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJkZXRhaWxcIl0pIHsgdGhpcy5kZXRhaWwuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgRGV0ZWN0ZWRJc3N1ZU1pdGlnYXRpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgRGV0ZWN0ZWRJc3N1ZU1pdGlnYXRpb25BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgXCJ0ZXh0XCIgY29tcG9uZW50IGNhbiBiZSB1c2VkIGZvciBkZXRhaWwgb3Igd2hlbiBubyBhcHByb3ByaWF0ZSBjb2RlIGV4aXN0cy5cclxuICAgKi9cclxuICBhY3Rpb246IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgbWlnaHQgbm90IGJlIHRoZSBzYW1lIGFzIHdoZW4gdGhlIG1pdGlnYXRpbmcgc3RlcCB3YXMgYWN0dWFsbHkgdGFrZW4uXHJcbiAgICovXHJcbiAgZGF0ZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgcHJhY3RpdGlvbmVyIHdobyBkZXRlcm1pbmVkIHRoZSBtaXRpZ2F0aW9uIGFuZCB0YWtlcyByZXNwb25zaWJpbGl0eSBmb3IgdGhlIG1pdGlnYXRpb24gc3RlcCBvY2N1cnJpbmcuXHJcbiAgICovXHJcbiAgYXV0aG9yPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEluZGljYXRlcyBhbiBhY3Rpb24gdGhhdCBoYXMgYmVlbiB0YWtlbiBvciBpcyBjb21taXR0ZWQgdG8gcmVkdWNlIG9yIGVsaW1pbmF0ZSB0aGUgbGlrZWxpaG9vZCBvZiB0aGUgcmlzayBpZGVudGlmaWVkIGJ5IHRoZSBkZXRlY3RlZCBpc3N1ZSBmcm9tIG1hbmlmZXN0aW5nLiAgQ2FuIGFsc28gcmVmbGVjdCBhbiBvYnNlcnZhdGlvbiBvZiBrbm93biBtaXRpZ2F0aW5nIGZhY3RvcnMgdGhhdCBtYXkgcmVkdWNlL2VsaW1pbmF0ZSB0aGUgbmVlZCBmb3IgYW55IGFjdGlvbi5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBEZXRlY3RlZElzc3VlTWl0aWdhdGlvbiBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0RldGVjdGVkSXNzdWVNaXRpZ2F0aW9uJztcclxuICAvKipcclxuICAgKiBUaGUgXCJ0ZXh0XCIgY29tcG9uZW50IGNhbiBiZSB1c2VkIGZvciBkZXRhaWwgb3Igd2hlbiBubyBhcHByb3ByaWF0ZSBjb2RlIGV4aXN0cy5cclxuICAgKi9cclxuICBwdWJsaWMgYWN0aW9uOiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgbWlnaHQgbm90IGJlIHRoZSBzYW1lIGFzIHdoZW4gdGhlIG1pdGlnYXRpbmcgc3RlcCB3YXMgYWN0dWFsbHkgdGFrZW4uXHJcbiAgICovXHJcbiAgcHVibGljIGRhdGU/OiBmaGlyLkZoaXJEYXRlVGltZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgcHJhY3RpdGlvbmVyIHdobyBkZXRlcm1pbmVkIHRoZSBtaXRpZ2F0aW9uIGFuZCB0YWtlcyByZXNwb25zaWJpbGl0eSBmb3IgdGhlIG1pdGlnYXRpb24gc3RlcCBvY2N1cnJpbmcuXHJcbiAgICovXHJcbiAgcHVibGljIGF1dGhvcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBEZXRlY3RlZElzc3VlTWl0aWdhdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPERldGVjdGVkSXNzdWVNaXRpZ2F0aW9uQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2FjdGlvbiddKSB7IHRoaXMuYWN0aW9uID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5hY3Rpb24pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5hY3Rpb24gPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydkYXRlJ10pIHsgdGhpcy5kYXRlID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLmRhdGV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYXV0aG9yJ10pIHsgdGhpcy5hdXRob3IgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmF1dGhvcik7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogUHJlZmVycmVkLWJvdW5kIFZhbHVlIFNldCBmb3IgYWN0aW9uIChEZXRlY3RlZElzc3VlLm1pdGlnYXRpb24uYWN0aW9uKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IGFjdGlvblByZWZlcnJlZENvZGluZ3MoKTpEZXRlY3RlZGlzc3VlTWl0aWdhdGlvbkFjdGlvbkNvZGluZ1R5cGUge1xyXG4gICAgcmV0dXJuIERldGVjdGVkaXNzdWVNaXRpZ2F0aW9uQWN0aW9uQ29kaW5ncztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICghdGhpc1snYWN0aW9uJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IGFjdGlvbjpmaGlyLkNvZGVhYmxlQ29uY2VwdCBmaGlyOiBEZXRlY3RlZElzc3VlLm1pdGlnYXRpb24uYWN0aW9uOkNvZGVhYmxlQ29uY2VwdCcgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImFjdGlvblwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmFjdGlvbi5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJkYXRlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZGF0ZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJhdXRob3JcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5hdXRob3IuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBEZXRlY3RlZElzc3VlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIERldGVjdGVkSXNzdWVBcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJEZXRlY3RlZElzc3VlXCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEJ1c2luZXNzIGlkZW50aWZpZXIgYXNzb2NpYXRlZCB3aXRoIHRoZSBkZXRlY3RlZCBpc3N1ZSByZWNvcmQuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IGlzIGxhYmVsZWQgYXMgYSBtb2RpZmllciBiZWNhdXNlIHRoZSBzdGF0dXMgY29udGFpbnMgdGhlIGNvZGVzIGNhbmNlbGxlZCBhbmQgZW50ZXJlZC1pbi1lcnJvciB0aGF0IG1hcmsgdGhlIGlzc3VlIGFzIG5vdCBjdXJyZW50bHkgdmFsaWQuXHJcbiAgICovXHJcbiAgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPE9ic2VydmF0aW9uU3RhdHVzQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgZ2VuZXJhbCB0eXBlIG9mIGlzc3VlIGlkZW50aWZpZWQuXHJcbiAgICovXHJcbiAgY29kZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHRoZSBkZWdyZWUgb2YgaW1wb3J0YW5jZSBhc3NvY2lhdGVkIHdpdGggdGhlIGlkZW50aWZpZWQgaXNzdWUgYmFzZWQgb24gdGhlIHBvdGVudGlhbCBpbXBhY3Qgb24gdGhlIHBhdGllbnQuXHJcbiAgICovXHJcbiAgc2V2ZXJpdHk/OiBmaGlyLkZoaXJDb2RlPERldGVjdGVkaXNzdWVTZXZlcml0eUNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB0aGUgcGF0aWVudCB3aG9zZSByZWNvcmQgdGhlIGRldGVjdGVkIGlzc3VlIGlzIGFzc29jaWF0ZWQgd2l0aC5cclxuICAgKi9cclxuICBwYXRpZW50PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSBvciBwZXJpb2Qgd2hlbiB0aGUgZGV0ZWN0ZWQgaXNzdWUgd2FzIGluaXRpYWxseSBpZGVudGlmaWVkLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZWQ/OiBmaGlyLkZoaXJEYXRlVGltZXxmaGlyLlBlcmlvZHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgb3IgcGVyaW9kIHdoZW4gdGhlIGRldGVjdGVkIGlzc3VlIHdhcyBpbml0aWFsbHkgaWRlbnRpZmllZC5cclxuICAgKi9cclxuICBpZGVudGlmaWVkRGF0ZVRpbWU/OiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRlIG9yIHBlcmlvZCB3aGVuIHRoZSBkZXRlY3RlZCBpc3N1ZSB3YXMgaW5pdGlhbGx5IGlkZW50aWZpZWQuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllZFBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaXZpZHVhbCBvciBkZXZpY2UgcmVzcG9uc2libGUgZm9yIHRoZSBpc3N1ZSBiZWluZyByYWlzZWQuICBGb3IgZXhhbXBsZSwgYSBkZWNpc2lvbiBzdXBwb3J0IGFwcGxpY2F0aW9uIG9yIGEgcGhhcm1hY2lzdCBjb25kdWN0aW5nIGEgbWVkaWNhdGlvbiByZXZpZXcuXHJcbiAgICovXHJcbiAgYXV0aG9yPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGVyZSdzIGFuIGltcGxpY2l0IGNvbnN0cmFpbnQgb24gdGhlIG51bWJlciBvZiBpbXBsaWNhdGVkIHJlc291cmNlcyBiYXNlZCBvbiBEZXRlY3RlZElzc3VlLnR5cGU7IGUuZy4gRm9yIGRydWctZHJ1ZywgdGhlcmUgd291bGQgYmUgbW9yZSB0aGFuIG9uZS4gIEZvciB0aW1pbmcsIHRoZXJlIHdvdWxkIHR5cGljYWxseSBvbmx5IGJlIG9uZS5cclxuICAgKi9cclxuICBpbXBsaWNhdGVkPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFN1cHBvcnRpbmcgZXZpZGVuY2Ugb3IgbWFuaWZlc3RhdGlvbnMgdGhhdCBwcm92aWRlIHRoZSBiYXNpcyBmb3IgaWRlbnRpZnlpbmcgdGhlIGRldGVjdGVkIGlzc3VlIHN1Y2ggYXMgYSBHdWlkYW5jZVJlc3BvbnNlIG9yIE1lYXN1cmVSZXBvcnQuXHJcbiAgICovXHJcbiAgZXZpZGVuY2U/OiBmaGlyLkRldGVjdGVkSXNzdWVFdmlkZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU2hvdWxkIGZvY3VzIG9uIGluZm9ybWF0aW9uIG5vdCBjb3ZlcmVkIGVsc2V3aGVyZSBhcyBkaXNjcmV0ZSBkYXRhIC0gbm8gbmVlZCB0byBkdXBsaWNhdGUgdGhlIG5hcnJhdGl2ZS5cclxuICAgKi9cclxuICBkZXRhaWw/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbGl0ZXJhdHVyZSwga25vd2xlZGdlLWJhc2Ugb3Igc2ltaWxhciByZWZlcmVuY2UgdGhhdCBkZXNjcmliZXMgdGhlIHByb3BlbnNpdHkgZm9yIHRoZSBkZXRlY3RlZCBpc3N1ZSBpZGVudGlmaWVkLlxyXG4gICAqL1xyXG4gIHJlZmVyZW5jZT86IGZoaXIuRmhpclVyaXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyBhbiBhY3Rpb24gdGhhdCBoYXMgYmVlbiB0YWtlbiBvciBpcyBjb21taXR0ZWQgdG8gcmVkdWNlIG9yIGVsaW1pbmF0ZSB0aGUgbGlrZWxpaG9vZCBvZiB0aGUgcmlzayBpZGVudGlmaWVkIGJ5IHRoZSBkZXRlY3RlZCBpc3N1ZSBmcm9tIG1hbmlmZXN0aW5nLiAgQ2FuIGFsc28gcmVmbGVjdCBhbiBvYnNlcnZhdGlvbiBvZiBrbm93biBtaXRpZ2F0aW5nIGZhY3RvcnMgdGhhdCBtYXkgcmVkdWNlL2VsaW1pbmF0ZSB0aGUgbmVlZCBmb3IgYW55IGFjdGlvbi5cclxuICAgKi9cclxuICBtaXRpZ2F0aW9uPzogZmhpci5EZXRlY3RlZElzc3VlTWl0aWdhdGlvbkFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbmRpY2F0ZXMgYW4gYWN0dWFsIG9yIHBvdGVudGlhbCBjbGluaWNhbCBpc3N1ZSB3aXRoIG9yIGJldHdlZW4gb25lIG9yIG1vcmUgYWN0aXZlIG9yIHByb3Bvc2VkIGNsaW5pY2FsIGFjdGlvbnMgZm9yIGEgcGF0aWVudDsgZS5nLiBEcnVnLWRydWcgaW50ZXJhY3Rpb24sIEluZWZmZWN0aXZlIHRyZWF0bWVudCBmcmVxdWVuY3ksIFByb2NlZHVyZS1jb25kaXRpb24gY29uZmxpY3QsIGV0Yy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBEZXRlY3RlZElzc3VlIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdEZXRlY3RlZElzc3VlJztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIkRldGVjdGVkSXNzdWVcIjtcclxuICAvKipcclxuICAgKiBCdXNpbmVzcyBpZGVudGlmaWVyIGFzc29jaWF0ZWQgd2l0aCB0aGUgZGV0ZWN0ZWQgaXNzdWUgcmVjb3JkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyOiBmaGlyLklkZW50aWZpZXJbXTtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIGJlY2F1c2UgdGhlIHN0YXR1cyBjb250YWlucyB0aGUgY29kZXMgY2FuY2VsbGVkIGFuZCBlbnRlcmVkLWluLWVycm9yIHRoYXQgbWFyayB0aGUgaXNzdWUgYXMgbm90IGN1cnJlbnRseSB2YWxpZC5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPE9ic2VydmF0aW9uU3RhdHVzQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgZ2VuZXJhbCB0eXBlIG9mIGlzc3VlIGlkZW50aWZpZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHRoZSBkZWdyZWUgb2YgaW1wb3J0YW5jZSBhc3NvY2lhdGVkIHdpdGggdGhlIGlkZW50aWZpZWQgaXNzdWUgYmFzZWQgb24gdGhlIHBvdGVudGlhbCBpbXBhY3Qgb24gdGhlIHBhdGllbnQuXHJcbiAgICovXHJcbiAgcHVibGljIHNldmVyaXR5PzogZmhpci5GaGlyQ29kZTxEZXRlY3RlZGlzc3VlU2V2ZXJpdHlDb2RlVHlwZT58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB0aGUgcGF0aWVudCB3aG9zZSByZWNvcmQgdGhlIGRldGVjdGVkIGlzc3VlIGlzIGFzc29jaWF0ZWQgd2l0aC5cclxuICAgKi9cclxuICBwdWJsaWMgcGF0aWVudD86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSBvciBwZXJpb2Qgd2hlbiB0aGUgZGV0ZWN0ZWQgaXNzdWUgd2FzIGluaXRpYWxseSBpZGVudGlmaWVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVkPzogKGZoaXIuRmhpckRhdGVUaW1lfGZoaXIuUGVyaW9kKXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBEZXRlY3RlZElzc3VlLmlkZW50aWZpZWRbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfaWRlbnRpZmllZElzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIEluZGl2aWR1YWwgb3IgZGV2aWNlIHJlc3BvbnNpYmxlIGZvciB0aGUgaXNzdWUgYmVpbmcgcmFpc2VkLiAgRm9yIGV4YW1wbGUsIGEgZGVjaXNpb24gc3VwcG9ydCBhcHBsaWNhdGlvbiBvciBhIHBoYXJtYWNpc3QgY29uZHVjdGluZyBhIG1lZGljYXRpb24gcmV2aWV3LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhdXRob3I/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlcmUncyBhbiBpbXBsaWNpdCBjb25zdHJhaW50IG9uIHRoZSBudW1iZXIgb2YgaW1wbGljYXRlZCByZXNvdXJjZXMgYmFzZWQgb24gRGV0ZWN0ZWRJc3N1ZS50eXBlOyBlLmcuIEZvciBkcnVnLWRydWcsIHRoZXJlIHdvdWxkIGJlIG1vcmUgdGhhbiBvbmUuICBGb3IgdGltaW5nLCB0aGVyZSB3b3VsZCB0eXBpY2FsbHkgb25seSBiZSBvbmUuXHJcbiAgICovXHJcbiAgcHVibGljIGltcGxpY2F0ZWQ6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogU3VwcG9ydGluZyBldmlkZW5jZSBvciBtYW5pZmVzdGF0aW9ucyB0aGF0IHByb3ZpZGUgdGhlIGJhc2lzIGZvciBpZGVudGlmeWluZyB0aGUgZGV0ZWN0ZWQgaXNzdWUgc3VjaCBhcyBhIEd1aWRhbmNlUmVzcG9uc2Ugb3IgTWVhc3VyZVJlcG9ydC5cclxuICAgKi9cclxuICBwdWJsaWMgZXZpZGVuY2U6IGZoaXIuRGV0ZWN0ZWRJc3N1ZUV2aWRlbmNlW107XHJcbiAgLyoqXHJcbiAgICogU2hvdWxkIGZvY3VzIG9uIGluZm9ybWF0aW9uIG5vdCBjb3ZlcmVkIGVsc2V3aGVyZSBhcyBkaXNjcmV0ZSBkYXRhIC0gbm8gbmVlZCB0byBkdXBsaWNhdGUgdGhlIG5hcnJhdGl2ZS5cclxuICAgKi9cclxuICBwdWJsaWMgZGV0YWlsPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbGl0ZXJhdHVyZSwga25vd2xlZGdlLWJhc2Ugb3Igc2ltaWxhciByZWZlcmVuY2UgdGhhdCBkZXNjcmliZXMgdGhlIHByb3BlbnNpdHkgZm9yIHRoZSBkZXRlY3RlZCBpc3N1ZSBpZGVudGlmaWVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWZlcmVuY2U/OiBmaGlyLkZoaXJVcml8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyBhbiBhY3Rpb24gdGhhdCBoYXMgYmVlbiB0YWtlbiBvciBpcyBjb21taXR0ZWQgdG8gcmVkdWNlIG9yIGVsaW1pbmF0ZSB0aGUgbGlrZWxpaG9vZCBvZiB0aGUgcmlzayBpZGVudGlmaWVkIGJ5IHRoZSBkZXRlY3RlZCBpc3N1ZSBmcm9tIG1hbmlmZXN0aW5nLiAgQ2FuIGFsc28gcmVmbGVjdCBhbiBvYnNlcnZhdGlvbiBvZiBrbm93biBtaXRpZ2F0aW5nIGZhY3RvcnMgdGhhdCBtYXkgcmVkdWNlL2VsaW1pbmF0ZSB0aGUgbmVlZCBmb3IgYW55IGFjdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgbWl0aWdhdGlvbjogZmhpci5EZXRlY3RlZElzc3VlTWl0aWdhdGlvbltdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIERldGVjdGVkSXNzdWUgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxEZXRlY3RlZElzc3VlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ0RldGVjdGVkSXNzdWUnO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IHNvdXJjZS5pZGVudGlmaWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuSWRlbnRpZmllcih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmlkZW50aWZpZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RhdHVzJ10pIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxPYnNlcnZhdGlvblN0YXR1c0NvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5zdGF0dXN9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY29kZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3NldmVyaXR5J10pIHsgdGhpcy5zZXZlcml0eSA9IG5ldyBmaGlyLkZoaXJDb2RlPERldGVjdGVkaXNzdWVTZXZlcml0eUNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5zZXZlcml0eX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydwYXRpZW50J10pIHsgdGhpcy5wYXRpZW50ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5wYXRpZW50KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllZCddKSB7IHRoaXMuaWRlbnRpZmllZCA9IHNvdXJjZS5pZGVudGlmaWVkOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2lkZW50aWZpZWREYXRlVGltZSddKSB7IHRoaXMuaWRlbnRpZmllZCA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5pZGVudGlmaWVkRGF0ZVRpbWV9KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydpZGVudGlmaWVkUGVyaW9kJ10pIHsgdGhpcy5pZGVudGlmaWVkID0gbmV3IGZoaXIuUGVyaW9kKHNvdXJjZS5pZGVudGlmaWVkUGVyaW9kKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYXV0aG9yJ10pIHsgdGhpcy5hdXRob3IgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmF1dGhvcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ2ltcGxpY2F0ZWQnXSkgeyB0aGlzLmltcGxpY2F0ZWQgPSBzb3VyY2UuaW1wbGljYXRlZC5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmltcGxpY2F0ZWQgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZXZpZGVuY2UnXSkgeyB0aGlzLmV2aWRlbmNlID0gc291cmNlLmV2aWRlbmNlLm1hcCgoeCkgPT4gbmV3IGZoaXIuRGV0ZWN0ZWRJc3N1ZUV2aWRlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZXZpZGVuY2UgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGV0YWlsJ10pIHsgdGhpcy5kZXRhaWwgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmRldGFpbH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydyZWZlcmVuY2UnXSkgeyB0aGlzLnJlZmVyZW5jZSA9IG5ldyBmaGlyLkZoaXJVcmkoe3ZhbHVlOiBzb3VyY2UucmVmZXJlbmNlfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ21pdGlnYXRpb24nXSkgeyB0aGlzLm1pdGlnYXRpb24gPSBzb3VyY2UubWl0aWdhdGlvbi5tYXAoKHgpID0+IG5ldyBmaGlyLkRldGVjdGVkSXNzdWVNaXRpZ2F0aW9uKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubWl0aWdhdGlvbiA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlcXVpcmVkLWJvdW5kIFZhbHVlIFNldCBmb3Igc3RhdHVzIChEZXRlY3RlZElzc3VlLnN0YXR1cylcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCBzdGF0dXNSZXF1aXJlZENvZGVzKCkge1xyXG4gICAgcmV0dXJuIE9ic2VydmF0aW9uU3RhdHVzQ29kZXM7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFByZWZlcnJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIGNvZGUgKERldGVjdGVkSXNzdWUuY29kZSlcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCBjb2RlUHJlZmVycmVkQ29kaW5ncygpOkRldGVjdGVkaXNzdWVDYXRlZ29yeUNvZGluZ1R5cGUge1xyXG4gICAgcmV0dXJuIERldGVjdGVkaXNzdWVDYXRlZ29yeUNvZGluZ3M7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlcXVpcmVkLWJvdW5kIFZhbHVlIFNldCBmb3Igc2V2ZXJpdHkgKERldGVjdGVkSXNzdWUuc2V2ZXJpdHkpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgc2V2ZXJpdHlSZXF1aXJlZENvZGVzKCkge1xyXG4gICAgcmV0dXJuIERldGVjdGVkaXNzdWVTZXZlcml0eUNvZGVzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKCF0aGlzWydyZXNvdXJjZVR5cGUnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgcmVzb3VyY2VUeXBlOlwiRGV0ZWN0ZWRJc3N1ZVwiIGZoaXI6IERldGVjdGVkSXNzdWUucmVzb3VyY2VUeXBlOlwiRGV0ZWN0ZWRJc3N1ZVwiJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiaWRlbnRpZmllclwiXSkgeyB0aGlzLmlkZW50aWZpZXIuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAoIXRoaXNbJ3N0YXR1cyddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBzdGF0dXM6Zmhpci5GaGlyQ29kZTxPYnNlcnZhdGlvblN0YXR1c0NvZGVUeXBlPiBmaGlyOiBEZXRlY3RlZElzc3VlLnN0YXR1czpjb2RlJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzWydzdGF0dXMnXSAmJiAoIU9iamVjdC52YWx1ZXMoT2JzZXJ2YXRpb25TdGF0dXNDb2RlcykuaW5jbHVkZXModGhpcy5zdGF0dXMgYXMgYW55KSkpIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ2NvZGUtaW52YWxpZCcsIGRpYWdub3N0aWNzOiAnSW52YWxpZCBjb2RlIHByb3BlcnR5IHN0YXR1czpmaGlyLkZoaXJDb2RlPE9ic2VydmF0aW9uU3RhdHVzQ29kZVR5cGU+IGZoaXI6IERldGVjdGVkSXNzdWUuc3RhdHVzOmNvZGUgUmVxdWlyZWQgYmluZGluZyB0bzogT2JzZXJ2YXRpb25TdGF0dXMnIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJzdGF0dXNcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5zdGF0dXMuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiY29kZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmNvZGUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzWydzZXZlcml0eSddICYmICghT2JqZWN0LnZhbHVlcyhEZXRlY3RlZGlzc3VlU2V2ZXJpdHlDb2RlcykuaW5jbHVkZXModGhpcy5zZXZlcml0eSBhcyBhbnkpKSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnY29kZS1pbnZhbGlkJywgZGlhZ25vc3RpY3M6ICdJbnZhbGlkIGNvZGUgcHJvcGVydHkgc2V2ZXJpdHk/OmZoaXIuRmhpckNvZGU8RGV0ZWN0ZWRpc3N1ZVNldmVyaXR5Q29kZVR5cGU+IGZoaXI6IERldGVjdGVkSXNzdWUuc2V2ZXJpdHk6Y29kZSBSZXF1aXJlZCBiaW5kaW5nIHRvOiBEZXRlY3RlZGlzc3VlU2V2ZXJpdHknIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJzZXZlcml0eVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnNldmVyaXR5LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInBhdGllbnRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5wYXRpZW50LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImF1dGhvclwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmF1dGhvci5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJpbXBsaWNhdGVkXCJdKSB7IHRoaXMuaW1wbGljYXRlZC5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wiZXZpZGVuY2VcIl0pIHsgdGhpcy5ldmlkZW5jZS5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wiZGV0YWlsXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZGV0YWlsLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInJlZmVyZW5jZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnJlZmVyZW5jZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJtaXRpZ2F0aW9uXCJdKSB7IHRoaXMubWl0aWdhdGlvbi5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbiJdfQ==