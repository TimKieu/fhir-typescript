// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: MedicationDispense
import * as fhir from '../fhir.js';
// @ts-ignore
import { MedicationdispenseStatusCodes } from '../fhirValueSets/MedicationdispenseStatusCodes.js';
// @ts-ignore
import { MedicationdispenseCategoryCodings, } from '../fhirValueSets/MedicationdispenseCategoryCodings.js';
/**
 * Indicates who or what performed the event.
 */
export class MedicationDispensePerformer extends fhir.BackboneElement {
    /**
     * Default constructor for MedicationDispensePerformer - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['function']) {
            this.function = new fhir.CodeableConcept(source.function);
        }
        if (source['actor']) {
            this.actor = new fhir.Reference(source.actor);
        }
        else {
            this.actor = null;
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["function"]) {
            issues.push(...this.function.doModelValidation());
        }
        if (!this['actor']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property actor:fhir.Reference fhir: MedicationDispense.performer.actor:Reference' });
        }
        if (this["actor"]) {
            issues.push(...this.actor.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicationDispensePerformer._fts_dataType = 'MedicationDispensePerformer';
/**
 * Indicates whether or not substitution was made as part of the dispense.  In some cases, substitution will be expected but does not happen, in other cases substitution is not expected but does happen.  This block explains what substitution did or did not happen and why.  If nothing is specified, substitution was not done.
 */
export class MedicationDispenseSubstitution extends fhir.BackboneElement {
    /**
     * Default constructor for MedicationDispenseSubstitution - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['wasSubstituted']) {
            this.wasSubstituted = new fhir.FhirBoolean({ value: source.wasSubstituted });
        }
        else {
            this.wasSubstituted = null;
        }
        if (source['_wasSubstituted']) {
            if (this.wasSubstituted) {
                this.wasSubstituted.addExtendedProperties(source._wasSubstituted);
            }
            else {
                this.wasSubstituted = new fhir.FhirBoolean(source._wasSubstituted);
            }
        }
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type);
        }
        if (source['reason']) {
            this.reason = source.reason.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.reason = [];
        }
        if (source['responsibleParty']) {
            this.responsibleParty = source.responsibleParty.map((x) => new fhir.Reference(x));
        }
        else {
            this.responsibleParty = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['wasSubstituted']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property wasSubstituted:fhir.FhirBoolean fhir: MedicationDispense.substitution.wasSubstituted:boolean' });
        }
        if (this["wasSubstituted"]) {
            issues.push(...this.wasSubstituted.doModelValidation());
        }
        if (this["type"]) {
            issues.push(...this.type.doModelValidation());
        }
        if (this["reason"]) {
            this.reason.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["responsibleParty"]) {
            this.responsibleParty.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicationDispenseSubstitution._fts_dataType = 'MedicationDispenseSubstitution';
/**
 * Indicates that a medication product is to be or has been dispensed for a named person/patient.  This includes a description of the medication product (supply) provided and the instructions for administering the medication.  The medication dispense is the result of a pharmacy system responding to a medication order.
 */
export class MedicationDispense extends fhir.DomainResource {
    /**
     * Default constructor for MedicationDispense - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'MedicationDispense';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['partOf']) {
            this.partOf = source.partOf.map((x) => new fhir.Reference(x));
        }
        else {
            this.partOf = [];
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['statusReason']) {
            this.statusReason = source.statusReason;
        }
        else if (source['statusReasonCodeableConcept']) {
            this.statusReason = new fhir.CodeableConcept(source.statusReasonCodeableConcept);
        }
        else if (source['statusReasonReference']) {
            this.statusReason = new fhir.Reference(source.statusReasonReference);
        }
        if (source['category']) {
            this.category = new fhir.CodeableConcept(source.category);
        }
        if (source['medication']) {
            this.medication = source.medication;
        }
        else if (source['medicationCodeableConcept']) {
            this.medication = new fhir.CodeableConcept(source.medicationCodeableConcept);
        }
        else if (source['medicationReference']) {
            this.medication = new fhir.Reference(source.medicationReference);
        }
        else {
            this.medication = null;
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject);
        }
        if (source['context']) {
            this.context = new fhir.Reference(source.context);
        }
        if (source['supportingInformation']) {
            this.supportingInformation = source.supportingInformation.map((x) => new fhir.Reference(x));
        }
        else {
            this.supportingInformation = [];
        }
        if (source['performer']) {
            this.performer = source.performer.map((x) => new fhir.MedicationDispensePerformer(x));
        }
        else {
            this.performer = [];
        }
        if (source['location']) {
            this.location = new fhir.Reference(source.location);
        }
        if (source['authorizingPrescription']) {
            this.authorizingPrescription = source.authorizingPrescription.map((x) => new fhir.Reference(x));
        }
        else {
            this.authorizingPrescription = [];
        }
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type);
        }
        if (source['quantity']) {
            this.quantity = new fhir.Quantity(source.quantity);
        }
        if (source['daysSupply']) {
            this.daysSupply = new fhir.Quantity(source.daysSupply);
        }
        if (source['whenPrepared']) {
            this.whenPrepared = new fhir.FhirDateTime({ value: source.whenPrepared });
        }
        if (source['_whenPrepared']) {
            if (this.whenPrepared) {
                this.whenPrepared.addExtendedProperties(source._whenPrepared);
            }
            else {
                this.whenPrepared = new fhir.FhirDateTime(source._whenPrepared);
            }
        }
        if (source['whenHandedOver']) {
            this.whenHandedOver = new fhir.FhirDateTime({ value: source.whenHandedOver });
        }
        if (source['_whenHandedOver']) {
            if (this.whenHandedOver) {
                this.whenHandedOver.addExtendedProperties(source._whenHandedOver);
            }
            else {
                this.whenHandedOver = new fhir.FhirDateTime(source._whenHandedOver);
            }
        }
        if (source['destination']) {
            this.destination = new fhir.Reference(source.destination);
        }
        if (source['receiver']) {
            this.receiver = source.receiver.map((x) => new fhir.Reference(x));
        }
        else {
            this.receiver = [];
        }
        if (source['note']) {
            this.note = source.note.map((x) => new fhir.Annotation(x));
        }
        else {
            this.note = [];
        }
        if (source['dosageInstruction']) {
            this.dosageInstruction = source.dosageInstruction.map((x) => new fhir.Dosage(x));
        }
        else {
            this.dosageInstruction = [];
        }
        if (source['substitution']) {
            this.substitution = new fhir.MedicationDispenseSubstitution(source.substitution);
        }
        if (source['detectedIssue']) {
            this.detectedIssue = source.detectedIssue.map((x) => new fhir.Reference(x));
        }
        else {
            this.detectedIssue = [];
        }
        if (source['eventHistory']) {
            this.eventHistory = source.eventHistory.map((x) => new fhir.Reference(x));
        }
        else {
            this.eventHistory = [];
        }
    }
    /**
     * Required-bound Value Set for status (MedicationDispense.status)
     */
    static get statusRequiredCodes() {
        return MedicationdispenseStatusCodes;
    }
    /**
     * Preferred-bound Value Set for category (MedicationDispense.category)
     */
    static get categoryPreferredCodings() {
        return MedicationdispenseCategoryCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType:"MedicationDispense" fhir: MedicationDispense.resourceType:"MedicationDispense"' });
        }
        if (this["identifier"]) {
            this.identifier.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["partOf"]) {
            this.partOf.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (!this['status']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property status:fhir.FhirCode<MedicationdispenseStatusCodeType> fhir: MedicationDispense.status:code' });
        }
        if (this['status'] && (!Object.values(MedicationdispenseStatusCodes).includes(this.status))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property status:fhir.FhirCode<MedicationdispenseStatusCodeType> fhir: MedicationDispense.status:code Required binding to: MedicationdispenseStatus' });
        }
        if (this["status"]) {
            issues.push(...this.status.doModelValidation());
        }
        if (this["category"]) {
            issues.push(...this.category.doModelValidation());
        }
        if (!this['medication']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property medication: fhir: MedicationDispense.medication[x]:' });
        }
        if (this["subject"]) {
            issues.push(...this.subject.doModelValidation());
        }
        if (this["context"]) {
            issues.push(...this.context.doModelValidation());
        }
        if (this["supportingInformation"]) {
            this.supportingInformation.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["performer"]) {
            this.performer.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["location"]) {
            issues.push(...this.location.doModelValidation());
        }
        if (this["authorizingPrescription"]) {
            this.authorizingPrescription.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["type"]) {
            issues.push(...this.type.doModelValidation());
        }
        if (this["quantity"]) {
            issues.push(...this.quantity.doModelValidation());
        }
        if (this["daysSupply"]) {
            issues.push(...this.daysSupply.doModelValidation());
        }
        if (this["whenPrepared"]) {
            issues.push(...this.whenPrepared.doModelValidation());
        }
        if (this["whenHandedOver"]) {
            issues.push(...this.whenHandedOver.doModelValidation());
        }
        if (this["destination"]) {
            issues.push(...this.destination.doModelValidation());
        }
        if (this["receiver"]) {
            this.receiver.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["note"]) {
            this.note.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["dosageInstruction"]) {
            this.dosageInstruction.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["substitution"]) {
            issues.push(...this.substitution.doModelValidation());
        }
        if (this["detectedIssue"]) {
            this.detectedIssue.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["eventHistory"]) {
            this.eventHistory.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicationDispense._fts_dataType = 'MedicationDispense';
/**
 * Internal flag to properly serialize choice-type element MedicationDispense.statusReason[x]
 */
MedicationDispense._fts_statusReasonIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element MedicationDispense.medication[x]
 */
MedicationDispense._fts_medicationIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVkaWNhdGlvbkRpc3BlbnNlLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9NZWRpY2F0aW9uRGlzcGVuc2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsb0NBQW9DO0FBRXBDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBZ0JuQyxhQUFhO0FBQ2IsT0FBTyxFQUFFLDZCQUE2QixFQUFxQyxNQUFNLG1EQUFtRCxDQUFDO0FBQ3JJLGFBQWE7QUFDYixPQUFPLEVBQUUsaUNBQWlDLEdBQXdDLE1BQU0sdURBQXVELENBQUM7QUFxQmhKOztHQUVHO0FBQ0gsTUFBTSxPQUFPLDJCQUE0QixTQUFRLElBQUksQ0FBQyxlQUFlO0lBYW5FOztPQUVHO0lBQ0gsWUFBWSxTQUFrRCxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUN4RyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQUU7UUFDdEYsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7U0FBRTthQUNsRTtZQUFFLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO1NBQUU7SUFDN0IsQ0FBQztJQUNEOztPQUVHO0lBQ2EsaUJBQWlCO1FBQy9CLElBQUksTUFBTSxHQUFtQixLQUFLLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUN2RCxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FB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RUc7QUFDNkIsZ0NBQWEsR0FBVSxvQkFBb0IsQ0FBQztBQXFCNUU7O0dBRUc7QUFDdUIsNENBQXlCLEdBQVEsSUFBSSxDQUFDO0FBU2hFOztHQUVHO0FBQ3VCLDBDQUF1QixHQUFRLElBQUksQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNC5jb3JlIHZlcnNpb246IDQuMC4xXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogTWVkaWNhdGlvbkRpc3BlbnNlXHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBNZWRpY2F0aW9uZGlzcGVuc2VQZXJmb3JtZXJGdW5jdGlvbkNvZGluZ3MsIE1lZGljYXRpb25kaXNwZW5zZVBlcmZvcm1lckZ1bmN0aW9uQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTWVkaWNhdGlvbmRpc3BlbnNlUGVyZm9ybWVyRnVuY3Rpb25Db2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBNZWRpY2F0aW9uZGlzcGVuc2VQZXJmb3JtZXJGdW5jdGlvbkNvZGVzLCAgTWVkaWNhdGlvbmRpc3BlbnNlUGVyZm9ybWVyRnVuY3Rpb25Db2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTWVkaWNhdGlvbmRpc3BlbnNlUGVyZm9ybWVyRnVuY3Rpb25Db2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgVjNBY3RTdWJzdGFuY2VBZG1pblN1YnN0aXR1dGlvbkNvZGluZ3MsIFYzQWN0U3Vic3RhbmNlQWRtaW5TdWJzdGl0dXRpb25Db2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9WM0FjdFN1YnN0YW5jZUFkbWluU3Vic3RpdHV0aW9uQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgVjNBY3RTdWJzdGFuY2VBZG1pblN1YnN0aXR1dGlvbkNvZGVzLCAgVjNBY3RTdWJzdGFuY2VBZG1pblN1YnN0aXR1dGlvbkNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9WM0FjdFN1YnN0YW5jZUFkbWluU3Vic3RpdHV0aW9uQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFYzU3Vic3RhbmNlQWRtaW5TdWJzdGl0dXRpb25SZWFzb25Db2RpbmdzLCBWM1N1YnN0YW5jZUFkbWluU3Vic3RpdHV0aW9uUmVhc29uQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVjNTdWJzdGFuY2VBZG1pblN1YnN0aXR1dGlvblJlYXNvbkNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFYzU3Vic3RhbmNlQWRtaW5TdWJzdGl0dXRpb25SZWFzb25Db2RlcywgIFYzU3Vic3RhbmNlQWRtaW5TdWJzdGl0dXRpb25SZWFzb25Db2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVjNTdWJzdGFuY2VBZG1pblN1YnN0aXR1dGlvblJlYXNvbkNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBNZWRpY2F0aW9uZGlzcGVuc2VTdGF0dXNDb2RpbmdzLCBNZWRpY2F0aW9uZGlzcGVuc2VTdGF0dXNDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9NZWRpY2F0aW9uZGlzcGVuc2VTdGF0dXNDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBNZWRpY2F0aW9uZGlzcGVuc2VTdGF0dXNDb2RlcywgIE1lZGljYXRpb25kaXNwZW5zZVN0YXR1c0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9NZWRpY2F0aW9uZGlzcGVuc2VTdGF0dXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTWVkaWNhdGlvbmRpc3BlbnNlQ2F0ZWdvcnlDb2RpbmdzLCBNZWRpY2F0aW9uZGlzcGVuc2VDYXRlZ29yeUNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL01lZGljYXRpb25kaXNwZW5zZUNhdGVnb3J5Q29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTWVkaWNhdGlvbmRpc3BlbnNlQ2F0ZWdvcnlDb2RlcywgIE1lZGljYXRpb25kaXNwZW5zZUNhdGVnb3J5Q29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL01lZGljYXRpb25kaXNwZW5zZUNhdGVnb3J5Q29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFYzQWN0UGhhcm1hY3lTdXBwbHlUeXBlQ29kaW5ncywgVjNBY3RQaGFybWFjeVN1cHBseVR5cGVDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9WM0FjdFBoYXJtYWN5U3VwcGx5VHlwZUNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFYzQWN0UGhhcm1hY3lTdXBwbHlUeXBlQ29kZXMsICBWM0FjdFBoYXJtYWN5U3VwcGx5VHlwZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9WM0FjdFBoYXJtYWN5U3VwcGx5VHlwZUNvZGVzLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lZGljYXRpb25EaXNwZW5zZVBlcmZvcm1lciB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNZWRpY2F0aW9uRGlzcGVuc2VQZXJmb3JtZXJBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBEaXN0aW5ndWlzaGVzIHRoZSB0eXBlIG9mIHBlcmZvcm1lciBpbiB0aGUgZGlzcGVuc2UuICBGb3IgZXhhbXBsZSwgZGF0ZSBlbnRlcmVyLCBwYWNrYWdlciwgZmluYWwgY2hlY2tlci5cclxuICAgKi9cclxuICBmdW5jdGlvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRldmljZSwgcHJhY3RpdGlvbmVyLCBldGMuIHdobyBwZXJmb3JtZWQgdGhlIGFjdGlvbi4gIEl0IHNob3VsZCBiZSBhc3N1bWVkIHRoYXQgdGhlIGFjdG9yIGlzIHRoZSBkaXNwZW5zZXIgb2YgdGhlIG1lZGljYXRpb24uXHJcbiAgICovXHJcbiAgYWN0b3I6IGZoaXIuUmVmZXJlbmNlQXJnc3xudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogSW5kaWNhdGVzIHdobyBvciB3aGF0IHBlcmZvcm1lZCB0aGUgZXZlbnQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNhdGlvbkRpc3BlbnNlUGVyZm9ybWVyIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVkaWNhdGlvbkRpc3BlbnNlUGVyZm9ybWVyJztcclxuICAvKipcclxuICAgKiBEaXN0aW5ndWlzaGVzIHRoZSB0eXBlIG9mIHBlcmZvcm1lciBpbiB0aGUgZGlzcGVuc2UuICBGb3IgZXhhbXBsZSwgZGF0ZSBlbnRlcmVyLCBwYWNrYWdlciwgZmluYWwgY2hlY2tlci5cclxuICAgKi9cclxuICBwdWJsaWMgZnVuY3Rpb24/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRldmljZSwgcHJhY3RpdGlvbmVyLCBldGMuIHdobyBwZXJmb3JtZWQgdGhlIGFjdGlvbi4gIEl0IHNob3VsZCBiZSBhc3N1bWVkIHRoYXQgdGhlIGFjdG9yIGlzIHRoZSBkaXNwZW5zZXIgb2YgdGhlIG1lZGljYXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIGFjdG9yOiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE1lZGljYXRpb25EaXNwZW5zZVBlcmZvcm1lciAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE1lZGljYXRpb25EaXNwZW5zZVBlcmZvcm1lckFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydmdW5jdGlvbiddKSB7IHRoaXMuZnVuY3Rpb24gPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmZ1bmN0aW9uKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYWN0b3InXSkgeyB0aGlzLmFjdG9yID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5hY3Rvcik7IH1cclxuICAgIGVsc2UgeyB0aGlzLmFjdG9yID0gbnVsbDsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKHRoaXNbXCJmdW5jdGlvblwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmZ1bmN0aW9uLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAoIXRoaXNbJ2FjdG9yJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IGFjdG9yOmZoaXIuUmVmZXJlbmNlIGZoaXI6IE1lZGljYXRpb25EaXNwZW5zZS5wZXJmb3JtZXIuYWN0b3I6UmVmZXJlbmNlJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiYWN0b3JcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5hY3Rvci5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lZGljYXRpb25EaXNwZW5zZVN1YnN0aXR1dGlvbiB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNZWRpY2F0aW9uRGlzcGVuc2VTdWJzdGl0dXRpb25BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUcnVlIGlmIHRoZSBkaXNwZW5zZXIgZGlzcGVuc2VkIGEgZGlmZmVyZW50IGRydWcgb3IgcHJvZHVjdCBmcm9tIHdoYXQgd2FzIHByZXNjcmliZWQuXHJcbiAgICovXHJcbiAgd2FzU3Vic3RpdHV0ZWQ6IGZoaXIuRmhpckJvb2xlYW58Ym9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE1lZGljYXRpb25EaXNwZW5zZS5zdWJzdGl0dXRpb24ud2FzU3Vic3RpdHV0ZWRcclxuICAgKi9cclxuICBfd2FzU3Vic3RpdHV0ZWQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEEgY29kZSBzaWduaWZ5aW5nIHdoZXRoZXIgYSBkaWZmZXJlbnQgZHJ1ZyB3YXMgZGlzcGVuc2VkIGZyb20gd2hhdCB3YXMgcHJlc2NyaWJlZC5cclxuICAgKi9cclxuICB0eXBlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgdGhlIHJlYXNvbiBmb3IgdGhlIHN1YnN0aXR1dGlvbiAob3IgbGFjayBvZiBzdWJzdGl0dXRpb24pIGZyb20gd2hhdCB3YXMgcHJlc2NyaWJlZC5cclxuICAgKi9cclxuICByZWFzb24/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBlcnNvbiBvciBvcmdhbml6YXRpb24gdGhhdCBoYXMgcHJpbWFyeSByZXNwb25zaWJpbGl0eSBmb3IgdGhlIHN1YnN0aXR1dGlvbi5cclxuICAgKi9cclxuICByZXNwb25zaWJsZVBhcnR5PzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogSW5kaWNhdGVzIHdoZXRoZXIgb3Igbm90IHN1YnN0aXR1dGlvbiB3YXMgbWFkZSBhcyBwYXJ0IG9mIHRoZSBkaXNwZW5zZS4gIEluIHNvbWUgY2FzZXMsIHN1YnN0aXR1dGlvbiB3aWxsIGJlIGV4cGVjdGVkIGJ1dCBkb2VzIG5vdCBoYXBwZW4sIGluIG90aGVyIGNhc2VzIHN1YnN0aXR1dGlvbiBpcyBub3QgZXhwZWN0ZWQgYnV0IGRvZXMgaGFwcGVuLiAgVGhpcyBibG9jayBleHBsYWlucyB3aGF0IHN1YnN0aXR1dGlvbiBkaWQgb3IgZGlkIG5vdCBoYXBwZW4gYW5kIHdoeS4gIElmIG5vdGhpbmcgaXMgc3BlY2lmaWVkLCBzdWJzdGl0dXRpb24gd2FzIG5vdCBkb25lLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1lZGljYXRpb25EaXNwZW5zZVN1YnN0aXR1dGlvbiBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ01lZGljYXRpb25EaXNwZW5zZVN1YnN0aXR1dGlvbic7XHJcbiAgLyoqXHJcbiAgICogVHJ1ZSBpZiB0aGUgZGlzcGVuc2VyIGRpc3BlbnNlZCBhIGRpZmZlcmVudCBkcnVnIG9yIHByb2R1Y3QgZnJvbSB3aGF0IHdhcyBwcmVzY3JpYmVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB3YXNTdWJzdGl0dXRlZDogZmhpci5GaGlyQm9vbGVhbnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEEgY29kZSBzaWduaWZ5aW5nIHdoZXRoZXIgYSBkaWZmZXJlbnQgZHJ1ZyB3YXMgZGlzcGVuc2VkIGZyb20gd2hhdCB3YXMgcHJlc2NyaWJlZC5cclxuICAgKi9cclxuICBwdWJsaWMgdHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgdGhlIHJlYXNvbiBmb3IgdGhlIHN1YnN0aXR1dGlvbiAob3IgbGFjayBvZiBzdWJzdGl0dXRpb24pIGZyb20gd2hhdCB3YXMgcHJlc2NyaWJlZC5cclxuICAgKi9cclxuICBwdWJsaWMgcmVhc29uOiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwZXJzb24gb3Igb3JnYW5pemF0aW9uIHRoYXQgaGFzIHByaW1hcnkgcmVzcG9uc2liaWxpdHkgZm9yIHRoZSBzdWJzdGl0dXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHJlc3BvbnNpYmxlUGFydHk6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgTWVkaWNhdGlvbkRpc3BlbnNlU3Vic3RpdHV0aW9uIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVkaWNhdGlvbkRpc3BlbnNlU3Vic3RpdHV0aW9uQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3dhc1N1YnN0aXR1dGVkJ10pIHsgdGhpcy53YXNTdWJzdGl0dXRlZCA9IG5ldyBmaGlyLkZoaXJCb29sZWFuKHt2YWx1ZTogc291cmNlLndhc1N1YnN0aXR1dGVkfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLndhc1N1YnN0aXR1dGVkID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3dhc1N1YnN0aXR1dGVkJ10pIHtcclxuICAgICAgaWYgKHRoaXMud2FzU3Vic3RpdHV0ZWQpIHsgdGhpcy53YXNTdWJzdGl0dXRlZC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl93YXNTdWJzdGl0dXRlZCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLndhc1N1YnN0aXR1dGVkID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oc291cmNlLl93YXNTdWJzdGl0dXRlZCBhcyBQYXJ0aWFsPGZoaXIuRmhpckJvb2xlYW5BcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3R5cGUnXSkgeyB0aGlzLnR5cGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnR5cGUpOyB9XHJcbiAgICBpZiAoc291cmNlWydyZWFzb24nXSkgeyB0aGlzLnJlYXNvbiA9IHNvdXJjZS5yZWFzb24ubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZWFzb24gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVzcG9uc2libGVQYXJ0eSddKSB7IHRoaXMucmVzcG9uc2libGVQYXJ0eSA9IHNvdXJjZS5yZXNwb25zaWJsZVBhcnR5Lm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVzcG9uc2libGVQYXJ0eSA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAoIXRoaXNbJ3dhc1N1YnN0aXR1dGVkJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHdhc1N1YnN0aXR1dGVkOmZoaXIuRmhpckJvb2xlYW4gZmhpcjogTWVkaWNhdGlvbkRpc3BlbnNlLnN1YnN0aXR1dGlvbi53YXNTdWJzdGl0dXRlZDpib29sZWFuJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wid2FzU3Vic3RpdHV0ZWRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy53YXNTdWJzdGl0dXRlZC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJ0eXBlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMudHlwZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJyZWFzb25cIl0pIHsgdGhpcy5yZWFzb24uZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcInJlc3BvbnNpYmxlUGFydHlcIl0pIHsgdGhpcy5yZXNwb25zaWJsZVBhcnR5LmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lZGljYXRpb25EaXNwZW5zZSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNZWRpY2F0aW9uRGlzcGVuc2VBcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJNZWRpY2F0aW9uRGlzcGVuc2VcInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBhIGJ1c2luZXNzIGlkZW50aWZpZXIsIG5vdCBhIHJlc291cmNlIGlkZW50aWZpZXIuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHByb2NlZHVyZSB0aGF0IHRyaWdnZXIgdGhlIGRpc3BlbnNlLlxyXG4gICAqL1xyXG4gIHBhcnRPZj86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIGJlY2F1c2UgdGhlIHN0YXR1cyBjb250YWlucyBjb2RlcyB0aGF0IG1hcmsgdGhlIHJlc291cmNlIGFzIG5vdCBjdXJyZW50bHkgdmFsaWQuXHJcbiAgICovXHJcbiAgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPE1lZGljYXRpb25kaXNwZW5zZVN0YXR1c0NvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBNZWRpY2F0aW9uRGlzcGVuc2Uuc3RhdHVzXHJcbiAgICovXHJcbiAgX3N0YXR1cz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHRoZSByZWFzb24gd2h5IGEgZGlzcGVuc2Ugd2FzIG5vdCBwZXJmb3JtZWQuXHJcbiAgICovXHJcbiAgc3RhdHVzUmVhc29uPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8Zmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB0aGUgcmVhc29uIHdoeSBhIGRpc3BlbnNlIHdhcyBub3QgcGVyZm9ybWVkLlxyXG4gICAqL1xyXG4gIHN0YXR1c1JlYXNvbkNvZGVhYmxlQ29uY2VwdD86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHRoZSByZWFzb24gd2h5IGEgZGlzcGVuc2Ugd2FzIG5vdCBwZXJmb3JtZWQuXHJcbiAgICovXHJcbiAgc3RhdHVzUmVhc29uUmVmZXJlbmNlPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgY2F0ZWdvcnkgY2FuIGJlIHVzZWQgdG8gaW5jbHVkZSB3aGVyZSB0aGUgbWVkaWNhdGlvbiBpcyBleHBlY3RlZCB0byBiZSBjb25zdW1lZCBvciBvdGhlciB0eXBlcyBvZiBkaXNwZW5zZXMuICBJbnZhcmlhbnRzIGNhbiBiZSB1c2VkIHRvIGJpbmQgdG8gZGlmZmVyZW50IHZhbHVlIHNldHMgd2hlbiBwcm9maWxpbmcgdG8gYmluZC5cclxuICAgKi9cclxuICBjYXRlZ29yeT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgb25seSBhIGNvZGUgaXMgc3BlY2lmaWVkLCB0aGVuIGl0IG5lZWRzIHRvIGJlIGEgY29kZSBmb3IgYSBzcGVjaWZpYyBwcm9kdWN0LiBJZiBtb3JlIGluZm9ybWF0aW9uIGlzIHJlcXVpcmVkLCB0aGVuIHRoZSB1c2Ugb2YgdGhlIG1lZGljYXRpb24gcmVzb3VyY2UgaXMgcmVjb21tZW5kZWQuICBGb3IgZXhhbXBsZSwgaWYgeW91IHJlcXVpcmUgZm9ybSBvciBsb3QgbnVtYmVyLCB0aGVuIHlvdSBtdXN0IHJlZmVyZW5jZSB0aGUgTWVkaWNhdGlvbiByZXNvdXJjZS5cclxuICAgKi9cclxuICBtZWRpY2F0aW9uPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8Zmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIG9ubHkgYSBjb2RlIGlzIHNwZWNpZmllZCwgdGhlbiBpdCBuZWVkcyB0byBiZSBhIGNvZGUgZm9yIGEgc3BlY2lmaWMgcHJvZHVjdC4gSWYgbW9yZSBpbmZvcm1hdGlvbiBpcyByZXF1aXJlZCwgdGhlbiB0aGUgdXNlIG9mIHRoZSBtZWRpY2F0aW9uIHJlc291cmNlIGlzIHJlY29tbWVuZGVkLiAgRm9yIGV4YW1wbGUsIGlmIHlvdSByZXF1aXJlIGZvcm0gb3IgbG90IG51bWJlciwgdGhlbiB5b3UgbXVzdCByZWZlcmVuY2UgdGhlIE1lZGljYXRpb24gcmVzb3VyY2UuXHJcbiAgICovXHJcbiAgbWVkaWNhdGlvbkNvZGVhYmxlQ29uY2VwdD86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgb25seSBhIGNvZGUgaXMgc3BlY2lmaWVkLCB0aGVuIGl0IG5lZWRzIHRvIGJlIGEgY29kZSBmb3IgYSBzcGVjaWZpYyBwcm9kdWN0LiBJZiBtb3JlIGluZm9ybWF0aW9uIGlzIHJlcXVpcmVkLCB0aGVuIHRoZSB1c2Ugb2YgdGhlIG1lZGljYXRpb24gcmVzb3VyY2UgaXMgcmVjb21tZW5kZWQuICBGb3IgZXhhbXBsZSwgaWYgeW91IHJlcXVpcmUgZm9ybSBvciBsb3QgbnVtYmVyLCB0aGVuIHlvdSBtdXN0IHJlZmVyZW5jZSB0aGUgTWVkaWNhdGlvbiByZXNvdXJjZS5cclxuICAgKi9cclxuICBtZWRpY2F0aW9uUmVmZXJlbmNlPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTdWJzdGFuY2VBZG1pbmlzdHJhdGlvbi0mZ3Q7c3ViamVjdC0mZ3Q7UGF0aWVudC5cclxuICAgKi9cclxuICBzdWJqZWN0PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZW5jb3VudGVyIG9yIGVwaXNvZGUgb2YgY2FyZSB0aGF0IGVzdGFibGlzaGVzIHRoZSBjb250ZXh0IGZvciB0aGlzIGV2ZW50LlxyXG4gICAqL1xyXG4gIGNvbnRleHQ/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFkZGl0aW9uYWwgaW5mb3JtYXRpb24gdGhhdCBzdXBwb3J0cyB0aGUgbWVkaWNhdGlvbiBiZWluZyBkaXNwZW5zZWQuXHJcbiAgICovXHJcbiAgc3VwcG9ydGluZ0luZm9ybWF0aW9uPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB3aG8gb3Igd2hhdCBwZXJmb3JtZWQgdGhlIGV2ZW50LlxyXG4gICAqL1xyXG4gIHBlcmZvcm1lcj86IGZoaXIuTWVkaWNhdGlvbkRpc3BlbnNlUGVyZm9ybWVyQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcHJpbmNpcGFsIHBoeXNpY2FsIGxvY2F0aW9uIHdoZXJlIHRoZSBkaXNwZW5zZSB3YXMgcGVyZm9ybWVkLlxyXG4gICAqL1xyXG4gIGxvY2F0aW9uPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBNYXBzIHRvIGJhc2VkT24gaW4gRXZlbnQgbG9naWNhbCBtb2RlbC5cclxuICAgKi9cclxuICBhdXRob3JpemluZ1ByZXNjcmlwdGlvbj86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgdGhlIHR5cGUgb2YgZGlzcGVuc2luZyBldmVudCB0aGF0IGlzIHBlcmZvcm1lZC4gRm9yIGV4YW1wbGUsIFRyaWFsIEZpbGwsIENvbXBsZXRpb24gb2YgVHJpYWwsIFBhcnRpYWwgRmlsbCwgRW1lcmdlbmN5IEZpbGwsIFNhbXBsZXMsIGV0Yy5cclxuICAgKi9cclxuICB0eXBlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgYW1vdW50IG9mIG1lZGljYXRpb24gdGhhdCBoYXMgYmVlbiBkaXNwZW5zZWQuIEluY2x1ZGVzIHVuaXQgb2YgbWVhc3VyZS5cclxuICAgKi9cclxuICBxdWFudGl0eT86IGZoaXIuUXVhbnRpdHlBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgYW1vdW50IG9mIG1lZGljYXRpb24gZXhwcmVzc2VkIGFzIGEgdGltaW5nIGFtb3VudC5cclxuICAgKi9cclxuICBkYXlzU3VwcGx5PzogZmhpci5RdWFudGl0eUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0aW1lIHdoZW4gdGhlIGRpc3BlbnNlZCBwcm9kdWN0IHdhcyBwYWNrYWdlZCBhbmQgcmV2aWV3ZWQuXHJcbiAgICovXHJcbiAgd2hlblByZXBhcmVkPzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogTWVkaWNhdGlvbkRpc3BlbnNlLndoZW5QcmVwYXJlZFxyXG4gICAqL1xyXG4gIF93aGVuUHJlcGFyZWQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0aW1lIHRoZSBkaXNwZW5zZWQgcHJvZHVjdCB3YXMgcHJvdmlkZWQgdG8gdGhlIHBhdGllbnQgb3IgdGhlaXIgcmVwcmVzZW50YXRpdmUuXHJcbiAgICovXHJcbiAgd2hlbkhhbmRlZE92ZXI/OiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBNZWRpY2F0aW9uRGlzcGVuc2Uud2hlbkhhbmRlZE92ZXJcclxuICAgKi9cclxuICBfd2hlbkhhbmRlZE92ZXI/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpY2F0aW9uIG9mIHRoZSBmYWNpbGl0eS9sb2NhdGlvbiB3aGVyZSB0aGUgbWVkaWNhdGlvbiB3YXMgc2hpcHBlZCB0bywgYXMgcGFydCBvZiB0aGUgZGlzcGVuc2UgZXZlbnQuXHJcbiAgICovXHJcbiAgZGVzdGluYXRpb24/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgdGhlIHBlcnNvbiB3aG8gcGlja2VkIHVwIHRoZSBtZWRpY2F0aW9uLiAgVGhpcyB3aWxsIHVzdWFsbHkgYmUgYSBwYXRpZW50IG9yIHRoZWlyIGNhcmVnaXZlciwgYnV0IHNvbWUgY2FzZXMgZXhpc3Qgd2hlcmUgaXQgY2FuIGJlIGEgaGVhbHRoY2FyZSBwcm9mZXNzaW9uYWwuXHJcbiAgICovXHJcbiAgcmVjZWl2ZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0cmEgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGRpc3BlbnNlIHRoYXQgY291bGQgbm90IGJlIGNvbnZleWVkIGluIHRoZSBvdGhlciBhdHRyaWJ1dGVzLlxyXG4gICAqL1xyXG4gIG5vdGU/OiBmaGlyLkFubm90YXRpb25BcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFdoZW4gdGhlIGRvc2Ugb3IgcmF0ZSBpcyBpbnRlbmRlZCB0byBjaGFuZ2Ugb3ZlciB0aGUgZW50aXJlIGFkbWluaXN0cmF0aW9uIHBlcmlvZCAoZS5nLiBUYXBlcmluZyBkb3NlIHByZXNjcmlwdGlvbnMpLCBtdWx0aXBsZSBpbnN0YW5jZXMgb2YgZG9zYWdlIGluc3RydWN0aW9ucyB3aWxsIG5lZWQgdG8gYmUgc3VwcGxpZWQgdG8gY29udmV5IHRoZSBkaWZmZXJlbnQgZG9zZXMvcmF0ZXMuXHJcbiAgICogVGhlIHBoYXJtYWNpc3QgcmV2aWV3cyB0aGUgbWVkaWNhdGlvbiBvcmRlciBwcmlvciB0byBkaXNwZW5zZSBhbmQgdXBkYXRlcyB0aGUgZG9zYWdlSW5zdHJ1Y3Rpb24gYmFzZWQgb24gdGhlIGFjdHVhbCBwcm9kdWN0IGJlaW5nIGRpc3BlbnNlZC5cclxuICAgKi9cclxuICBkb3NhZ2VJbnN0cnVjdGlvbj86IGZoaXIuRG9zYWdlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgd2hldGhlciBvciBub3Qgc3Vic3RpdHV0aW9uIHdhcyBtYWRlIGFzIHBhcnQgb2YgdGhlIGRpc3BlbnNlLiAgSW4gc29tZSBjYXNlcywgc3Vic3RpdHV0aW9uIHdpbGwgYmUgZXhwZWN0ZWQgYnV0IGRvZXMgbm90IGhhcHBlbiwgaW4gb3RoZXIgY2FzZXMgc3Vic3RpdHV0aW9uIGlzIG5vdCBleHBlY3RlZCBidXQgZG9lcyBoYXBwZW4uICBUaGlzIGJsb2NrIGV4cGxhaW5zIHdoYXQgc3Vic3RpdHV0aW9uIGRpZCBvciBkaWQgbm90IGhhcHBlbiBhbmQgd2h5LiAgSWYgbm90aGluZyBpcyBzcGVjaWZpZWQsIHN1YnN0aXR1dGlvbiB3YXMgbm90IGRvbmUuXHJcbiAgICovXHJcbiAgc3Vic3RpdHV0aW9uPzogZmhpci5NZWRpY2F0aW9uRGlzcGVuc2VTdWJzdGl0dXRpb25BcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgY2FuIGluY2x1ZGUgYSBkZXRlY3RlZCBpc3N1ZSB0aGF0IGhhcyBiZWVuIGlkZW50aWZpZWQgZWl0aGVyIGJ5IGEgZGVjaXNpb24gc3VwcG9ydCBzeXN0ZW0gb3IgYnkgYSBjbGluaWNpYW4gYW5kIG1heSBpbmNsdWRlIGluZm9ybWF0aW9uIG9uIHRoZSBzdGVwcyB0aGF0IHdlcmUgdGFrZW4gdG8gYWRkcmVzcyB0aGUgaXNzdWUuXHJcbiAgICovXHJcbiAgZGV0ZWN0ZWRJc3N1ZT86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIG1pZ2h0IG5vdCBpbmNsdWRlIHByb3ZlbmFuY2VzIGZvciBhbGwgdmVyc2lvbnMgb2YgdGhlIHJlcXVlc3Qg4oCTIG9ubHkgdGhvc2UgZGVlbWVkIOKAnHJlbGV2YW504oCdIG9yIGltcG9ydGFudC4gVGhpcyBTSEFMTCBOT1QgaW5jbHVkZSB0aGUgUHJvdmVuYW5jZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBjdXJyZW50IHZlcnNpb24gb2YgdGhlIHJlc291cmNlLiAoSWYgdGhhdCBwcm92ZW5hbmNlIGlzIGRlZW1lZCB0byBiZSBhIOKAnHJlbGV2YW504oCdIGNoYW5nZSwgaXQgd2lsbCBuZWVkIHRvIGJlIGFkZGVkIGFzIHBhcnQgb2YgYSBsYXRlciB1cGRhdGUuIFVudGlsIHRoZW4sIGl0IGNhbiBiZSBxdWVyaWVkIGRpcmVjdGx5IGFzIHRoZSBQcm92ZW5hbmNlIHRoYXQgcG9pbnRzIHRvIHRoaXMgdmVyc2lvbiB1c2luZyBfcmV2aW5jbHVkZSBBbGwgUHJvdmVuYW5jZXMgc2hvdWxkIGhhdmUgc29tZSBoaXN0b3JpY2FsIHZlcnNpb24gb2YgdGhpcyBSZXF1ZXN0IGFzIHRoZWlyIHN1YmplY3QuKS5cclxuICAgKi9cclxuICBldmVudEhpc3Rvcnk/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbmRpY2F0ZXMgdGhhdCBhIG1lZGljYXRpb24gcHJvZHVjdCBpcyB0byBiZSBvciBoYXMgYmVlbiBkaXNwZW5zZWQgZm9yIGEgbmFtZWQgcGVyc29uL3BhdGllbnQuICBUaGlzIGluY2x1ZGVzIGEgZGVzY3JpcHRpb24gb2YgdGhlIG1lZGljYXRpb24gcHJvZHVjdCAoc3VwcGx5KSBwcm92aWRlZCBhbmQgdGhlIGluc3RydWN0aW9ucyBmb3IgYWRtaW5pc3RlcmluZyB0aGUgbWVkaWNhdGlvbi4gIFRoZSBtZWRpY2F0aW9uIGRpc3BlbnNlIGlzIHRoZSByZXN1bHQgb2YgYSBwaGFybWFjeSBzeXN0ZW0gcmVzcG9uZGluZyB0byBhIG1lZGljYXRpb24gb3JkZXIuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNhdGlvbkRpc3BlbnNlIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdNZWRpY2F0aW9uRGlzcGVuc2UnO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNvdXJjZVR5cGU6IFwiTWVkaWNhdGlvbkRpc3BlbnNlXCI7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBhIGJ1c2luZXNzIGlkZW50aWZpZXIsIG5vdCBhIHJlc291cmNlIGlkZW50aWZpZXIuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI6IGZoaXIuSWRlbnRpZmllcltdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwcm9jZWR1cmUgdGhhdCB0cmlnZ2VyIHRoZSBkaXNwZW5zZS5cclxuICAgKi9cclxuICBwdWJsaWMgcGFydE9mOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgYmVjYXVzZSB0aGUgc3RhdHVzIGNvbnRhaW5zIGNvZGVzIHRoYXQgbWFyayB0aGUgcmVzb3VyY2UgYXMgbm90IGN1cnJlbnRseSB2YWxpZC5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPE1lZGljYXRpb25kaXNwZW5zZVN0YXR1c0NvZGVUeXBlPnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB0aGUgcmVhc29uIHdoeSBhIGRpc3BlbnNlIHdhcyBub3QgcGVyZm9ybWVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0dXNSZWFzb24/OiAoZmhpci5Db2RlYWJsZUNvbmNlcHR8Zmhpci5SZWZlcmVuY2UpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IE1lZGljYXRpb25EaXNwZW5zZS5zdGF0dXNSZWFzb25beF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfc3RhdHVzUmVhc29uSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNhdGVnb3J5IGNhbiBiZSB1c2VkIHRvIGluY2x1ZGUgd2hlcmUgdGhlIG1lZGljYXRpb24gaXMgZXhwZWN0ZWQgdG8gYmUgY29uc3VtZWQgb3Igb3RoZXIgdHlwZXMgb2YgZGlzcGVuc2VzLiAgSW52YXJpYW50cyBjYW4gYmUgdXNlZCB0byBiaW5kIHRvIGRpZmZlcmVudCB2YWx1ZSBzZXRzIHdoZW4gcHJvZmlsaW5nIHRvIGJpbmQuXHJcbiAgICovXHJcbiAgcHVibGljIGNhdGVnb3J5PzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIG9ubHkgYSBjb2RlIGlzIHNwZWNpZmllZCwgdGhlbiBpdCBuZWVkcyB0byBiZSBhIGNvZGUgZm9yIGEgc3BlY2lmaWMgcHJvZHVjdC4gSWYgbW9yZSBpbmZvcm1hdGlvbiBpcyByZXF1aXJlZCwgdGhlbiB0aGUgdXNlIG9mIHRoZSBtZWRpY2F0aW9uIHJlc291cmNlIGlzIHJlY29tbWVuZGVkLiAgRm9yIGV4YW1wbGUsIGlmIHlvdSByZXF1aXJlIGZvcm0gb3IgbG90IG51bWJlciwgdGhlbiB5b3UgbXVzdCByZWZlcmVuY2UgdGhlIE1lZGljYXRpb24gcmVzb3VyY2UuXHJcbiAgICovXHJcbiAgcHVibGljIG1lZGljYXRpb246IChmaGlyLkNvZGVhYmxlQ29uY2VwdHxmaGlyLlJlZmVyZW5jZSl8bnVsbDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IE1lZGljYXRpb25EaXNwZW5zZS5tZWRpY2F0aW9uW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX21lZGljYXRpb25Jc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBTdWJzdGFuY2VBZG1pbmlzdHJhdGlvbi0mZ3Q7c3ViamVjdC0mZ3Q7UGF0aWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgc3ViamVjdD86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZW5jb3VudGVyIG9yIGVwaXNvZGUgb2YgY2FyZSB0aGF0IGVzdGFibGlzaGVzIHRoZSBjb250ZXh0IGZvciB0aGlzIGV2ZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb250ZXh0PzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFkZGl0aW9uYWwgaW5mb3JtYXRpb24gdGhhdCBzdXBwb3J0cyB0aGUgbWVkaWNhdGlvbiBiZWluZyBkaXNwZW5zZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHN1cHBvcnRpbmdJbmZvcm1hdGlvbjogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgd2hvIG9yIHdoYXQgcGVyZm9ybWVkIHRoZSBldmVudC5cclxuICAgKi9cclxuICBwdWJsaWMgcGVyZm9ybWVyOiBmaGlyLk1lZGljYXRpb25EaXNwZW5zZVBlcmZvcm1lcltdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwcmluY2lwYWwgcGh5c2ljYWwgbG9jYXRpb24gd2hlcmUgdGhlIGRpc3BlbnNlIHdhcyBwZXJmb3JtZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGxvY2F0aW9uPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE1hcHMgdG8gYmFzZWRPbiBpbiBFdmVudCBsb2dpY2FsIG1vZGVsLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhdXRob3JpemluZ1ByZXNjcmlwdGlvbjogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgdGhlIHR5cGUgb2YgZGlzcGVuc2luZyBldmVudCB0aGF0IGlzIHBlcmZvcm1lZC4gRm9yIGV4YW1wbGUsIFRyaWFsIEZpbGwsIENvbXBsZXRpb24gb2YgVHJpYWwsIFBhcnRpYWwgRmlsbCwgRW1lcmdlbmN5IEZpbGwsIFNhbXBsZXMsIGV0Yy5cclxuICAgKi9cclxuICBwdWJsaWMgdHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgYW1vdW50IG9mIG1lZGljYXRpb24gdGhhdCBoYXMgYmVlbiBkaXNwZW5zZWQuIEluY2x1ZGVzIHVuaXQgb2YgbWVhc3VyZS5cclxuICAgKi9cclxuICBwdWJsaWMgcXVhbnRpdHk/OiBmaGlyLlF1YW50aXR5fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgYW1vdW50IG9mIG1lZGljYXRpb24gZXhwcmVzc2VkIGFzIGEgdGltaW5nIGFtb3VudC5cclxuICAgKi9cclxuICBwdWJsaWMgZGF5c1N1cHBseT86IGZoaXIuUXVhbnRpdHl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0aW1lIHdoZW4gdGhlIGRpc3BlbnNlZCBwcm9kdWN0IHdhcyBwYWNrYWdlZCBhbmQgcmV2aWV3ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHdoZW5QcmVwYXJlZD86IGZoaXIuRmhpckRhdGVUaW1lfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdGltZSB0aGUgZGlzcGVuc2VkIHByb2R1Y3Qgd2FzIHByb3ZpZGVkIHRvIHRoZSBwYXRpZW50IG9yIHRoZWlyIHJlcHJlc2VudGF0aXZlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB3aGVuSGFuZGVkT3Zlcj86IGZoaXIuRmhpckRhdGVUaW1lfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWNhdGlvbiBvZiB0aGUgZmFjaWxpdHkvbG9jYXRpb24gd2hlcmUgdGhlIG1lZGljYXRpb24gd2FzIHNoaXBwZWQgdG8sIGFzIHBhcnQgb2YgdGhlIGRpc3BlbnNlIGV2ZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZXN0aW5hdGlvbj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHRoZSBwZXJzb24gd2hvIHBpY2tlZCB1cCB0aGUgbWVkaWNhdGlvbi4gIFRoaXMgd2lsbCB1c3VhbGx5IGJlIGEgcGF0aWVudCBvciB0aGVpciBjYXJlZ2l2ZXIsIGJ1dCBzb21lIGNhc2VzIGV4aXN0IHdoZXJlIGl0IGNhbiBiZSBhIGhlYWx0aGNhcmUgcHJvZmVzc2lvbmFsLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWNlaXZlcjogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBFeHRyYSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgZGlzcGVuc2UgdGhhdCBjb3VsZCBub3QgYmUgY29udmV5ZWQgaW4gdGhlIG90aGVyIGF0dHJpYnV0ZXMuXHJcbiAgICovXHJcbiAgcHVibGljIG5vdGU6IGZoaXIuQW5ub3RhdGlvbltdO1xyXG4gIC8qKlxyXG4gICAqIFdoZW4gdGhlIGRvc2Ugb3IgcmF0ZSBpcyBpbnRlbmRlZCB0byBjaGFuZ2Ugb3ZlciB0aGUgZW50aXJlIGFkbWluaXN0cmF0aW9uIHBlcmlvZCAoZS5nLiBUYXBlcmluZyBkb3NlIHByZXNjcmlwdGlvbnMpLCBtdWx0aXBsZSBpbnN0YW5jZXMgb2YgZG9zYWdlIGluc3RydWN0aW9ucyB3aWxsIG5lZWQgdG8gYmUgc3VwcGxpZWQgdG8gY29udmV5IHRoZSBkaWZmZXJlbnQgZG9zZXMvcmF0ZXMuXHJcbiAgICogVGhlIHBoYXJtYWNpc3QgcmV2aWV3cyB0aGUgbWVkaWNhdGlvbiBvcmRlciBwcmlvciB0byBkaXNwZW5zZSBhbmQgdXBkYXRlcyB0aGUgZG9zYWdlSW5zdHJ1Y3Rpb24gYmFzZWQgb24gdGhlIGFjdHVhbCBwcm9kdWN0IGJlaW5nIGRpc3BlbnNlZC5cclxuICAgKi9cclxuICBwdWJsaWMgZG9zYWdlSW5zdHJ1Y3Rpb246IGZoaXIuRG9zYWdlW107XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHdoZXRoZXIgb3Igbm90IHN1YnN0aXR1dGlvbiB3YXMgbWFkZSBhcyBwYXJ0IG9mIHRoZSBkaXNwZW5zZS4gIEluIHNvbWUgY2FzZXMsIHN1YnN0aXR1dGlvbiB3aWxsIGJlIGV4cGVjdGVkIGJ1dCBkb2VzIG5vdCBoYXBwZW4sIGluIG90aGVyIGNhc2VzIHN1YnN0aXR1dGlvbiBpcyBub3QgZXhwZWN0ZWQgYnV0IGRvZXMgaGFwcGVuLiAgVGhpcyBibG9jayBleHBsYWlucyB3aGF0IHN1YnN0aXR1dGlvbiBkaWQgb3IgZGlkIG5vdCBoYXBwZW4gYW5kIHdoeS4gIElmIG5vdGhpbmcgaXMgc3BlY2lmaWVkLCBzdWJzdGl0dXRpb24gd2FzIG5vdCBkb25lLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdWJzdGl0dXRpb24/OiBmaGlyLk1lZGljYXRpb25EaXNwZW5zZVN1YnN0aXR1dGlvbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IGNhbiBpbmNsdWRlIGEgZGV0ZWN0ZWQgaXNzdWUgdGhhdCBoYXMgYmVlbiBpZGVudGlmaWVkIGVpdGhlciBieSBhIGRlY2lzaW9uIHN1cHBvcnQgc3lzdGVtIG9yIGJ5IGEgY2xpbmljaWFuIGFuZCBtYXkgaW5jbHVkZSBpbmZvcm1hdGlvbiBvbiB0aGUgc3RlcHMgdGhhdCB3ZXJlIHRha2VuIHRvIGFkZHJlc3MgdGhlIGlzc3VlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZXRlY3RlZElzc3VlOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgbWlnaHQgbm90IGluY2x1ZGUgcHJvdmVuYW5jZXMgZm9yIGFsbCB2ZXJzaW9ucyBvZiB0aGUgcmVxdWVzdCDigJMgb25seSB0aG9zZSBkZWVtZWQg4oCccmVsZXZhbnTigJ0gb3IgaW1wb3J0YW50LiBUaGlzIFNIQUxMIE5PVCBpbmNsdWRlIHRoZSBQcm92ZW5hbmNlIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGN1cnJlbnQgdmVyc2lvbiBvZiB0aGUgcmVzb3VyY2UuIChJZiB0aGF0IHByb3ZlbmFuY2UgaXMgZGVlbWVkIHRvIGJlIGEg4oCccmVsZXZhbnTigJ0gY2hhbmdlLCBpdCB3aWxsIG5lZWQgdG8gYmUgYWRkZWQgYXMgcGFydCBvZiBhIGxhdGVyIHVwZGF0ZS4gVW50aWwgdGhlbiwgaXQgY2FuIGJlIHF1ZXJpZWQgZGlyZWN0bHkgYXMgdGhlIFByb3ZlbmFuY2UgdGhhdCBwb2ludHMgdG8gdGhpcyB2ZXJzaW9uIHVzaW5nIF9yZXZpbmNsdWRlIEFsbCBQcm92ZW5hbmNlcyBzaG91bGQgaGF2ZSBzb21lIGhpc3RvcmljYWwgdmVyc2lvbiBvZiB0aGlzIFJlcXVlc3QgYXMgdGhlaXIgc3ViamVjdC4pLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBldmVudEhpc3Rvcnk6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgTWVkaWNhdGlvbkRpc3BlbnNlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVkaWNhdGlvbkRpc3BlbnNlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ01lZGljYXRpb25EaXNwZW5zZSc7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gc291cmNlLmlkZW50aWZpZXIubWFwKCh4KSA9PiBuZXcgZmhpci5JZGVudGlmaWVyKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaWRlbnRpZmllciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwYXJ0T2YnXSkgeyB0aGlzLnBhcnRPZiA9IHNvdXJjZS5wYXJ0T2YubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wYXJ0T2YgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RhdHVzJ10pIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxNZWRpY2F0aW9uZGlzcGVuc2VTdGF0dXNDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2Uuc3RhdHVzfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zdGF0dXMnXSkge1xyXG4gICAgICBpZiAodGhpcy5zdGF0dXMpIHsgdGhpcy5zdGF0dXMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc3RhdHVzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8TWVkaWNhdGlvbmRpc3BlbnNlU3RhdHVzQ29kZVR5cGU+KHNvdXJjZS5fc3RhdHVzIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydzdGF0dXNSZWFzb24nXSkgeyB0aGlzLnN0YXR1c1JlYXNvbiA9IHNvdXJjZS5zdGF0dXNSZWFzb247IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnc3RhdHVzUmVhc29uQ29kZWFibGVDb25jZXB0J10pIHsgdGhpcy5zdGF0dXNSZWFzb24gPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnN0YXR1c1JlYXNvbkNvZGVhYmxlQ29uY2VwdCk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnc3RhdHVzUmVhc29uUmVmZXJlbmNlJ10pIHsgdGhpcy5zdGF0dXNSZWFzb24gPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnN0YXR1c1JlYXNvblJlZmVyZW5jZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NhdGVnb3J5J10pIHsgdGhpcy5jYXRlZ29yeSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY2F0ZWdvcnkpOyB9XHJcbiAgICBpZiAoc291cmNlWydtZWRpY2F0aW9uJ10pIHsgdGhpcy5tZWRpY2F0aW9uID0gc291cmNlLm1lZGljYXRpb247IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnbWVkaWNhdGlvbkNvZGVhYmxlQ29uY2VwdCddKSB7IHRoaXMubWVkaWNhdGlvbiA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UubWVkaWNhdGlvbkNvZGVhYmxlQ29uY2VwdCk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnbWVkaWNhdGlvblJlZmVyZW5jZSddKSB7IHRoaXMubWVkaWNhdGlvbiA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UubWVkaWNhdGlvblJlZmVyZW5jZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm1lZGljYXRpb24gPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydzdWJqZWN0J10pIHsgdGhpcy5zdWJqZWN0ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5zdWJqZWN0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29udGV4dCddKSB7IHRoaXMuY29udGV4dCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuY29udGV4dCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N1cHBvcnRpbmdJbmZvcm1hdGlvbiddKSB7IHRoaXMuc3VwcG9ydGluZ0luZm9ybWF0aW9uID0gc291cmNlLnN1cHBvcnRpbmdJbmZvcm1hdGlvbi5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN1cHBvcnRpbmdJbmZvcm1hdGlvbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwZXJmb3JtZXInXSkgeyB0aGlzLnBlcmZvcm1lciA9IHNvdXJjZS5wZXJmb3JtZXIubWFwKCh4KSA9PiBuZXcgZmhpci5NZWRpY2F0aW9uRGlzcGVuc2VQZXJmb3JtZXIoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wZXJmb3JtZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbG9jYXRpb24nXSkgeyB0aGlzLmxvY2F0aW9uID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5sb2NhdGlvbik7IH1cclxuICAgIGlmIChzb3VyY2VbJ2F1dGhvcml6aW5nUHJlc2NyaXB0aW9uJ10pIHsgdGhpcy5hdXRob3JpemluZ1ByZXNjcmlwdGlvbiA9IHNvdXJjZS5hdXRob3JpemluZ1ByZXNjcmlwdGlvbi5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmF1dGhvcml6aW5nUHJlc2NyaXB0aW9uID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3R5cGUnXSkgeyB0aGlzLnR5cGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnR5cGUpOyB9XHJcbiAgICBpZiAoc291cmNlWydxdWFudGl0eSddKSB7IHRoaXMucXVhbnRpdHkgPSBuZXcgZmhpci5RdWFudGl0eShzb3VyY2UucXVhbnRpdHkpOyB9XHJcbiAgICBpZiAoc291cmNlWydkYXlzU3VwcGx5J10pIHsgdGhpcy5kYXlzU3VwcGx5ID0gbmV3IGZoaXIuUXVhbnRpdHkoc291cmNlLmRheXNTdXBwbHkpOyB9XHJcbiAgICBpZiAoc291cmNlWyd3aGVuUHJlcGFyZWQnXSkgeyB0aGlzLndoZW5QcmVwYXJlZCA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS53aGVuUHJlcGFyZWR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3doZW5QcmVwYXJlZCddKSB7XHJcbiAgICAgIGlmICh0aGlzLndoZW5QcmVwYXJlZCkgeyB0aGlzLndoZW5QcmVwYXJlZC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl93aGVuUHJlcGFyZWQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy53aGVuUHJlcGFyZWQgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoc291cmNlLl93aGVuUHJlcGFyZWQgYXMgUGFydGlhbDxmaGlyLkZoaXJEYXRlVGltZUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnd2hlbkhhbmRlZE92ZXInXSkgeyB0aGlzLndoZW5IYW5kZWRPdmVyID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLndoZW5IYW5kZWRPdmVyfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ193aGVuSGFuZGVkT3ZlciddKSB7XHJcbiAgICAgIGlmICh0aGlzLndoZW5IYW5kZWRPdmVyKSB7IHRoaXMud2hlbkhhbmRlZE92ZXIuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fd2hlbkhhbmRlZE92ZXIhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy53aGVuSGFuZGVkT3ZlciA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZShzb3VyY2UuX3doZW5IYW5kZWRPdmVyIGFzIFBhcnRpYWw8Zmhpci5GaGlyRGF0ZVRpbWVBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2Rlc3RpbmF0aW9uJ10pIHsgdGhpcy5kZXN0aW5hdGlvbiA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuZGVzdGluYXRpb24pOyB9XHJcbiAgICBpZiAoc291cmNlWydyZWNlaXZlciddKSB7IHRoaXMucmVjZWl2ZXIgPSBzb3VyY2UucmVjZWl2ZXIubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZWNlaXZlciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydub3RlJ10pIHsgdGhpcy5ub3RlID0gc291cmNlLm5vdGUubWFwKCh4KSA9PiBuZXcgZmhpci5Bbm5vdGF0aW9uKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubm90ZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydkb3NhZ2VJbnN0cnVjdGlvbiddKSB7IHRoaXMuZG9zYWdlSW5zdHJ1Y3Rpb24gPSBzb3VyY2UuZG9zYWdlSW5zdHJ1Y3Rpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5Eb3NhZ2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5kb3NhZ2VJbnN0cnVjdGlvbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydzdWJzdGl0dXRpb24nXSkgeyB0aGlzLnN1YnN0aXR1dGlvbiA9IG5ldyBmaGlyLk1lZGljYXRpb25EaXNwZW5zZVN1YnN0aXR1dGlvbihzb3VyY2Uuc3Vic3RpdHV0aW9uKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGV0ZWN0ZWRJc3N1ZSddKSB7IHRoaXMuZGV0ZWN0ZWRJc3N1ZSA9IHNvdXJjZS5kZXRlY3RlZElzc3VlLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZGV0ZWN0ZWRJc3N1ZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydldmVudEhpc3RvcnknXSkgeyB0aGlzLmV2ZW50SGlzdG9yeSA9IHNvdXJjZS5ldmVudEhpc3RvcnkubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5ldmVudEhpc3RvcnkgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIHN0YXR1cyAoTWVkaWNhdGlvbkRpc3BlbnNlLnN0YXR1cylcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCBzdGF0dXNSZXF1aXJlZENvZGVzKCkge1xyXG4gICAgcmV0dXJuIE1lZGljYXRpb25kaXNwZW5zZVN0YXR1c0NvZGVzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBQcmVmZXJyZWQtYm91bmQgVmFsdWUgU2V0IGZvciBjYXRlZ29yeSAoTWVkaWNhdGlvbkRpc3BlbnNlLmNhdGVnb3J5KVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IGNhdGVnb3J5UHJlZmVycmVkQ29kaW5ncygpOk1lZGljYXRpb25kaXNwZW5zZUNhdGVnb3J5Q29kaW5nVHlwZSB7XHJcbiAgICByZXR1cm4gTWVkaWNhdGlvbmRpc3BlbnNlQ2F0ZWdvcnlDb2RpbmdzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKCF0aGlzWydyZXNvdXJjZVR5cGUnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgcmVzb3VyY2VUeXBlOlwiTWVkaWNhdGlvbkRpc3BlbnNlXCIgZmhpcjogTWVkaWNhdGlvbkRpc3BlbnNlLnJlc291cmNlVHlwZTpcIk1lZGljYXRpb25EaXNwZW5zZVwiJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiaWRlbnRpZmllclwiXSkgeyB0aGlzLmlkZW50aWZpZXIuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcInBhcnRPZlwiXSkgeyB0aGlzLnBhcnRPZi5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICghdGhpc1snc3RhdHVzJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHN0YXR1czpmaGlyLkZoaXJDb2RlPE1lZGljYXRpb25kaXNwZW5zZVN0YXR1c0NvZGVUeXBlPiBmaGlyOiBNZWRpY2F0aW9uRGlzcGVuc2Uuc3RhdHVzOmNvZGUnIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbJ3N0YXR1cyddICYmICghT2JqZWN0LnZhbHVlcyhNZWRpY2F0aW9uZGlzcGVuc2VTdGF0dXNDb2RlcykuaW5jbHVkZXModGhpcy5zdGF0dXMgYXMgYW55KSkpIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ2NvZGUtaW52YWxpZCcsIGRpYWdub3N0aWNzOiAnSW52YWxpZCBjb2RlIHByb3BlcnR5IHN0YXR1czpmaGlyLkZoaXJDb2RlPE1lZGljYXRpb25kaXNwZW5zZVN0YXR1c0NvZGVUeXBlPiBmaGlyOiBNZWRpY2F0aW9uRGlzcGVuc2Uuc3RhdHVzOmNvZGUgUmVxdWlyZWQgYmluZGluZyB0bzogTWVkaWNhdGlvbmRpc3BlbnNlU3RhdHVzJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wic3RhdHVzXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc3RhdHVzLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImNhdGVnb3J5XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY2F0ZWdvcnkuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICghdGhpc1snbWVkaWNhdGlvbiddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBtZWRpY2F0aW9uOiBmaGlyOiBNZWRpY2F0aW9uRGlzcGVuc2UubWVkaWNhdGlvblt4XTonIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJzdWJqZWN0XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc3ViamVjdC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJjb250ZXh0XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY29udGV4dC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJzdXBwb3J0aW5nSW5mb3JtYXRpb25cIl0pIHsgdGhpcy5zdXBwb3J0aW5nSW5mb3JtYXRpb24uZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcInBlcmZvcm1lclwiXSkgeyB0aGlzLnBlcmZvcm1lci5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wibG9jYXRpb25cIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5sb2NhdGlvbi5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJhdXRob3JpemluZ1ByZXNjcmlwdGlvblwiXSkgeyB0aGlzLmF1dGhvcml6aW5nUHJlc2NyaXB0aW9uLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJ0eXBlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMudHlwZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJxdWFudGl0eVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnF1YW50aXR5LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImRheXNTdXBwbHlcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5kYXlzU3VwcGx5LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcIndoZW5QcmVwYXJlZFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLndoZW5QcmVwYXJlZC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJ3aGVuSGFuZGVkT3ZlclwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLndoZW5IYW5kZWRPdmVyLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImRlc3RpbmF0aW9uXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZGVzdGluYXRpb24uZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wicmVjZWl2ZXJcIl0pIHsgdGhpcy5yZWNlaXZlci5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wibm90ZVwiXSkgeyB0aGlzLm5vdGUuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImRvc2FnZUluc3RydWN0aW9uXCJdKSB7IHRoaXMuZG9zYWdlSW5zdHJ1Y3Rpb24uZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcInN1YnN0aXR1dGlvblwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnN1YnN0aXR1dGlvbi5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJkZXRlY3RlZElzc3VlXCJdKSB7IHRoaXMuZGV0ZWN0ZWRJc3N1ZS5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wiZXZlbnRIaXN0b3J5XCJdKSB7IHRoaXMuZXZlbnRIaXN0b3J5LmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuIl19