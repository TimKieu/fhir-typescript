// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR ComplexType: Dosage
import * as fhir from '../fhir.js';
/**
 * The amount of medication administered.
 */
export class DosageDoseAndRate extends fhir.FhirElement {
    /**
     * Default constructor for DosageDoseAndRate - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type);
        }
        if (source['dose']) {
            this.dose = source.dose;
        }
        else if (source['doseRange']) {
            this.dose = new fhir.Range(source.doseRange);
        }
        else if (source['doseQuantity']) {
            this.dose = new fhir.Quantity(source.doseQuantity);
        }
        if (source['rate']) {
            this.rate = source.rate;
        }
        else if (source['rateRatio']) {
            this.rate = new fhir.Ratio(source.rateRatio);
        }
        else if (source['rateRange']) {
            this.rate = new fhir.Range(source.rateRange);
        }
        else if (source['rateQuantity']) {
            this.rate = new fhir.Quantity(source.rateQuantity);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'Dosage.doseAndRate';
        }
        if (this["type"]) {
            issues.push(...this.type.doModelValidation(expression + '.type'));
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DosageDoseAndRate._fts_dataType = 'DosageDoseAndRate';
/**
 * Internal flag to properly serialize choice-type element Dosage.doseAndRate.dose[x]
 */
DosageDoseAndRate._fts_doseIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element Dosage.doseAndRate.rate[x]
 */
DosageDoseAndRate._fts_rateIsChoice = true;
/**
 * Indicates how the medication is/was taken or should be taken by the patient.
 */
export class Dosage extends fhir.BackboneElement {
    /**
     * Default constructor for Dosage - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['sequence']) {
            this.sequence = new fhir.FhirInteger({ value: source.sequence });
        }
        if (source['_sequence']) {
            if (this.sequence) {
                this.sequence.addExtendedProperties(source._sequence);
            }
            else {
                this.sequence = new fhir.FhirInteger(source._sequence);
            }
        }
        if (source['text']) {
            this.text = new fhir.FhirString({ value: source.text });
        }
        if (source['_text']) {
            if (this.text) {
                this.text.addExtendedProperties(source._text);
            }
            else {
                this.text = new fhir.FhirString(source._text);
            }
        }
        if (source['additionalInstruction']) {
            this.additionalInstruction = source.additionalInstruction.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.additionalInstruction = [];
        }
        if (source['patientInstruction']) {
            this.patientInstruction = new fhir.FhirString({ value: source.patientInstruction });
        }
        if (source['_patientInstruction']) {
            if (this.patientInstruction) {
                this.patientInstruction.addExtendedProperties(source._patientInstruction);
            }
            else {
                this.patientInstruction = new fhir.FhirString(source._patientInstruction);
            }
        }
        if (source['timing']) {
            this.timing = new fhir.Timing(source.timing);
        }
        if (source['asNeeded']) {
            this.asNeeded = source.asNeeded;
        }
        else if (source['asNeededBoolean']) {
            this.asNeeded = new fhir.FhirBoolean({ value: source.asNeededBoolean });
        }
        else if (source['asNeededCodeableConcept']) {
            this.asNeeded = new fhir.CodeableConcept(source.asNeededCodeableConcept);
        }
        if (source['site']) {
            this.site = new fhir.CodeableConcept(source.site);
        }
        if (source['route']) {
            this.route = new fhir.CodeableConcept(source.route);
        }
        if (source['method']) {
            this.method = new fhir.CodeableConcept(source.method);
        }
        if (source['doseAndRate']) {
            this.doseAndRate = source.doseAndRate.map((x) => new fhir.DosageDoseAndRate(x));
        }
        else {
            this.doseAndRate = [];
        }
        if (source['maxDosePerPeriod']) {
            this.maxDosePerPeriod = new fhir.Ratio(source.maxDosePerPeriod);
        }
        if (source['maxDosePerAdministration']) {
            this.maxDosePerAdministration = new fhir.Quantity(source.maxDosePerAdministration);
        }
        if (source['maxDosePerLifetime']) {
            this.maxDosePerLifetime = new fhir.Quantity(source.maxDosePerLifetime);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'Dosage';
        }
        if (this["sequence"]) {
            issues.push(...this.sequence.doModelValidation(expression + '.sequence'));
        }
        if (this["text"]) {
            issues.push(...this.text.doModelValidation(expression + '.text'));
        }
        if (this["additionalInstruction"]) {
            this.additionalInstruction.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.additionalInstruction[${i}]`)); });
        }
        if (this["patientInstruction"]) {
            issues.push(...this.patientInstruction.doModelValidation(expression + '.patientInstruction'));
        }
        if (this["timing"]) {
            issues.push(...this.timing.doModelValidation(expression + '.timing'));
        }
        if (this["site"]) {
            issues.push(...this.site.doModelValidation(expression + '.site'));
        }
        if (this["route"]) {
            issues.push(...this.route.doModelValidation(expression + '.route'));
        }
        if (this["method"]) {
            issues.push(...this.method.doModelValidation(expression + '.method'));
        }
        if (this["doseAndRate"]) {
            this.doseAndRate.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.doseAndRate[${i}]`)); });
        }
        if (this["maxDosePerPeriod"]) {
            issues.push(...this.maxDosePerPeriod.doModelValidation(expression + '.maxDosePerPeriod'));
        }
        if (this["maxDosePerAdministration"]) {
            issues.push(...this.maxDosePerAdministration.doModelValidation(expression + '.maxDosePerAdministration'));
        }
        if (this["maxDosePerLifetime"]) {
            issues.push(...this.maxDosePerLifetime.doModelValidation(expression + '.maxDosePerLifetime'));
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
Dosage._fts_dataType = 'Dosage';
/**
 * Internal flag to properly serialize choice-type element Dosage.asNeeded[x]
 */
Dosage._fts_asNeededIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRG9zYWdlLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9Eb3NhZ2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsMkJBQTJCO0FBRTNCLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBNERuQzs7R0FFRztBQUNILE1BQU0sT0FBTyxpQkFBa0IsU0FBUSxJQUFJLENBQUMsV0FBVztJQTBCckQ7O09BRUc7SUFDSCxZQUFZLFNBQXdDLEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQzlGLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7U0FBRTtRQUMxRSxJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQztTQUFFO2FBQzNDLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1NBQUU7YUFDMUUsSUFBSSxNQUFNLENBQUMsY0FBYyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7U0FBRTtRQUN4RixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQztTQUFFO2FBQzNDLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQUUs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QUF3QixDQUFDLGlCQUFpQixDQUFDLFVBQVUsR0FBQywyQkFBMkIsQ0FBQyxDQUFDLENBQUM7U0FBRTtRQUNsSixJQUFJLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLEdBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDaEksT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQzs7QUFsSEQ7O0dBRUc7QUFDNkIsb0JBQWEsR0FBVSxRQUFRLENBQUM7QUF5QmhFOztHQUVHO0FBQ3VCLDRCQUFxQixHQUFRLElBQUksQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNC5jb3JlIHZlcnNpb246IDQuMC4xXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBDb21wbGV4VHlwZTogRG9zYWdlXHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEb3NlUmF0ZVR5cGVDb2RpbmdzLCBEb3NlUmF0ZVR5cGVDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Eb3NlUmF0ZVR5cGVDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEb3NlUmF0ZVR5cGVDb2RlcywgIERvc2VSYXRlVHlwZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Eb3NlUmF0ZVR5cGVDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQXBwcm9hY2hTaXRlQ29kaW5ncywgQXBwcm9hY2hTaXRlQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQXBwcm9hY2hTaXRlQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQXBwcm9hY2hTaXRlQ29kZXMsICBBcHByb2FjaFNpdGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQXBwcm9hY2hTaXRlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFJvdXRlQ29kaW5ncywgUm91dGVDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Sb3V0ZUNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFJvdXRlQ29kZXMsICBSb3V0ZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Sb3V0ZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBBZG1pbmlzdHJhdGlvbk1ldGhvZENvZGluZ3MsIEFkbWluaXN0cmF0aW9uTWV0aG9kQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQWRtaW5pc3RyYXRpb25NZXRob2RDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBBZG1pbmlzdHJhdGlvbk1ldGhvZENvZGVzLCAgQWRtaW5pc3RyYXRpb25NZXRob2RDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQWRtaW5pc3RyYXRpb25NZXRob2RDb2Rlcy5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBEb3NhZ2VEb3NlQW5kUmF0ZSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBEb3NhZ2VEb3NlQW5kUmF0ZUFyZ3MgZXh0ZW5kcyBmaGlyLkZoaXJFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIGtpbmQgb2YgZG9zZSBvciByYXRlIHNwZWNpZmllZCwgZm9yIGV4YW1wbGUsIG9yZGVyZWQgb3IgY2FsY3VsYXRlZC5cclxuICAgKi9cclxuICB0eXBlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBOb3RlIHRoYXQgdGhpcyBzcGVjaWZpZXMgdGhlIHF1YW50aXR5IG9mIHRoZSBzcGVjaWZpZWQgbWVkaWNhdGlvbiwgbm90IHRoZSBxdWFudGl0eSBmb3IgZWFjaCBhY3RpdmUgaW5ncmVkaWVudChzKS4gRWFjaCBpbmdyZWRpZW50IGFtb3VudCBjYW4gYmUgY29tbXVuaWNhdGVkIGluIHRoZSBNZWRpY2F0aW9uIHJlc291cmNlLiBGb3IgZXhhbXBsZSwgaWYgb25lIHdhbnRzIHRvIGNvbW11bmljYXRlIHRoYXQgYSB0YWJsZXQgd2FzIDM3NSBtZywgd2hlcmUgdGhlIGRvc2Ugd2FzIG9uZSB0YWJsZXQsIHlvdSBjYW4gdXNlIHRoZSBNZWRpY2F0aW9uIHJlc291cmNlIHRvIGRvY3VtZW50IHRoYXQgdGhlIHRhYmxldCB3YXMgY29tcHJpc2VkIG9mIDM3NSBtZyBvZiBkcnVnIFhZWi4gQWx0ZXJuYXRpdmVseSBpZiB0aGUgZG9zZSB3YXMgMzc1IG1nLCB0aGVuIHlvdSBtYXkgb25seSBuZWVkIHRvIHVzZSB0aGUgTWVkaWNhdGlvbiByZXNvdXJjZSB0byBpbmRpY2F0ZSB0aGlzIHdhcyBhIHRhYmxldC4gSWYgdGhlIGV4YW1wbGUgd2VyZSBhbiBJViBzdWNoIGFzIGRvcGFtaW5lIGFuZCB5b3Ugd2FudGVkIHRvIGNvbW11bmljYXRlIHRoYXQgNDAwbWcgb2YgZG9wYW1pbmUgd2FzIG1peGVkIGluIDUwMCBtbCBvZiBzb21lIElWIHNvbHV0aW9uLCB0aGVuIHRoaXMgd291bGQgYWxsIGJlIGNvbW11bmljYXRlZCBpbiB0aGUgTWVkaWNhdGlvbiByZXNvdXJjZS4gSWYgdGhlIGFkbWluaXN0cmF0aW9uIGlzIG5vdCBpbnRlbmRlZCB0byBiZSBpbnN0YW50YW5lb3VzIChyYXRlIGlzIHByZXNlbnQgb3IgdGltaW5nIGhhcyBhIGR1cmF0aW9uKSwgdGhpcyBjYW4gYmUgc3BlY2lmaWVkIHRvIGNvbnZleSB0aGUgdG90YWwgYW1vdW50IHRvIGJlIGFkbWluaXN0ZXJlZCBvdmVyIHRoZSBwZXJpb2Qgb2YgdGltZSBhcyBpbmRpY2F0ZWQgYnkgdGhlIHNjaGVkdWxlIGUuZy4gNTAwIG1sIGluIGRvc2UsIHdpdGggdGltaW5nIHVzZWQgdG8gY29udmV5IHRoYXQgdGhpcyBzaG91bGQgYmUgZG9uZSBvdmVyIDQgaG91cnMuXHJcbiAgICovXHJcbiAgZG9zZT86IGZoaXIuUmFuZ2V8Zmhpci5RdWFudGl0eXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTm90ZSB0aGF0IHRoaXMgc3BlY2lmaWVzIHRoZSBxdWFudGl0eSBvZiB0aGUgc3BlY2lmaWVkIG1lZGljYXRpb24sIG5vdCB0aGUgcXVhbnRpdHkgZm9yIGVhY2ggYWN0aXZlIGluZ3JlZGllbnQocykuIEVhY2ggaW5ncmVkaWVudCBhbW91bnQgY2FuIGJlIGNvbW11bmljYXRlZCBpbiB0aGUgTWVkaWNhdGlvbiByZXNvdXJjZS4gRm9yIGV4YW1wbGUsIGlmIG9uZSB3YW50cyB0byBjb21tdW5pY2F0ZSB0aGF0IGEgdGFibGV0IHdhcyAzNzUgbWcsIHdoZXJlIHRoZSBkb3NlIHdhcyBvbmUgdGFibGV0LCB5b3UgY2FuIHVzZSB0aGUgTWVkaWNhdGlvbiByZXNvdXJjZSB0byBkb2N1bWVudCB0aGF0IHRoZSB0YWJsZXQgd2FzIGNvbXByaXNlZCBvZiAzNzUgbWcgb2YgZHJ1ZyBYWVouIEFsdGVybmF0aXZlbHkgaWYgdGhlIGRvc2Ugd2FzIDM3NSBtZywgdGhlbiB5b3UgbWF5IG9ubHkgbmVlZCB0byB1c2UgdGhlIE1lZGljYXRpb24gcmVzb3VyY2UgdG8gaW5kaWNhdGUgdGhpcyB3YXMgYSB0YWJsZXQuIElmIHRoZSBleGFtcGxlIHdlcmUgYW4gSVYgc3VjaCBhcyBkb3BhbWluZSBhbmQgeW91IHdhbnRlZCB0byBjb21tdW5pY2F0ZSB0aGF0IDQwMG1nIG9mIGRvcGFtaW5lIHdhcyBtaXhlZCBpbiA1MDAgbWwgb2Ygc29tZSBJViBzb2x1dGlvbiwgdGhlbiB0aGlzIHdvdWxkIGFsbCBiZSBjb21tdW5pY2F0ZWQgaW4gdGhlIE1lZGljYXRpb24gcmVzb3VyY2UuIElmIHRoZSBhZG1pbmlzdHJhdGlvbiBpcyBub3QgaW50ZW5kZWQgdG8gYmUgaW5zdGFudGFuZW91cyAocmF0ZSBpcyBwcmVzZW50IG9yIHRpbWluZyBoYXMgYSBkdXJhdGlvbiksIHRoaXMgY2FuIGJlIHNwZWNpZmllZCB0byBjb252ZXkgdGhlIHRvdGFsIGFtb3VudCB0byBiZSBhZG1pbmlzdGVyZWQgb3ZlciB0aGUgcGVyaW9kIG9mIHRpbWUgYXMgaW5kaWNhdGVkIGJ5IHRoZSBzY2hlZHVsZSBlLmcuIDUwMCBtbCBpbiBkb3NlLCB3aXRoIHRpbWluZyB1c2VkIHRvIGNvbnZleSB0aGF0IHRoaXMgc2hvdWxkIGJlIGRvbmUgb3ZlciA0IGhvdXJzLlxyXG4gICAqL1xyXG4gIGRvc2VSYW5nZT86IGZoaXIuUmFuZ2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBOb3RlIHRoYXQgdGhpcyBzcGVjaWZpZXMgdGhlIHF1YW50aXR5IG9mIHRoZSBzcGVjaWZpZWQgbWVkaWNhdGlvbiwgbm90IHRoZSBxdWFudGl0eSBmb3IgZWFjaCBhY3RpdmUgaW5ncmVkaWVudChzKS4gRWFjaCBpbmdyZWRpZW50IGFtb3VudCBjYW4gYmUgY29tbXVuaWNhdGVkIGluIHRoZSBNZWRpY2F0aW9uIHJlc291cmNlLiBGb3IgZXhhbXBsZSwgaWYgb25lIHdhbnRzIHRvIGNvbW11bmljYXRlIHRoYXQgYSB0YWJsZXQgd2FzIDM3NSBtZywgd2hlcmUgdGhlIGRvc2Ugd2FzIG9uZSB0YWJsZXQsIHlvdSBjYW4gdXNlIHRoZSBNZWRpY2F0aW9uIHJlc291cmNlIHRvIGRvY3VtZW50IHRoYXQgdGhlIHRhYmxldCB3YXMgY29tcHJpc2VkIG9mIDM3NSBtZyBvZiBkcnVnIFhZWi4gQWx0ZXJuYXRpdmVseSBpZiB0aGUgZG9zZSB3YXMgMzc1IG1nLCB0aGVuIHlvdSBtYXkgb25seSBuZWVkIHRvIHVzZSB0aGUgTWVkaWNhdGlvbiByZXNvdXJjZSB0byBpbmRpY2F0ZSB0aGlzIHdhcyBhIHRhYmxldC4gSWYgdGhlIGV4YW1wbGUgd2VyZSBhbiBJViBzdWNoIGFzIGRvcGFtaW5lIGFuZCB5b3Ugd2FudGVkIHRvIGNvbW11bmljYXRlIHRoYXQgNDAwbWcgb2YgZG9wYW1pbmUgd2FzIG1peGVkIGluIDUwMCBtbCBvZiBzb21lIElWIHNvbHV0aW9uLCB0aGVuIHRoaXMgd291bGQgYWxsIGJlIGNvbW11bmljYXRlZCBpbiB0aGUgTWVkaWNhdGlvbiByZXNvdXJjZS4gSWYgdGhlIGFkbWluaXN0cmF0aW9uIGlzIG5vdCBpbnRlbmRlZCB0byBiZSBpbnN0YW50YW5lb3VzIChyYXRlIGlzIHByZXNlbnQgb3IgdGltaW5nIGhhcyBhIGR1cmF0aW9uKSwgdGhpcyBjYW4gYmUgc3BlY2lmaWVkIHRvIGNvbnZleSB0aGUgdG90YWwgYW1vdW50IHRvIGJlIGFkbWluaXN0ZXJlZCBvdmVyIHRoZSBwZXJpb2Qgb2YgdGltZSBhcyBpbmRpY2F0ZWQgYnkgdGhlIHNjaGVkdWxlIGUuZy4gNTAwIG1sIGluIGRvc2UsIHdpdGggdGltaW5nIHVzZWQgdG8gY29udmV5IHRoYXQgdGhpcyBzaG91bGQgYmUgZG9uZSBvdmVyIDQgaG91cnMuXHJcbiAgICovXHJcbiAgZG9zZVF1YW50aXR5PzogZmhpci5RdWFudGl0eUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEl0IGlzIHBvc3NpYmxlIHRvIHN1cHBseSBib3RoIGEgcmF0ZSBhbmQgYSBkb3NlUXVhbnRpdHkgdG8gcHJvdmlkZSBmdWxsIGRldGFpbHMgYWJvdXQgaG93IHRoZSBtZWRpY2F0aW9uIGlzIHRvIGJlIGFkbWluaXN0ZXJlZCBhbmQgc3VwcGxpZWQuIElmIHRoZSByYXRlIGlzIGludGVuZGVkIHRvIGNoYW5nZSBvdmVyIHRpbWUsIGRlcGVuZGluZyBvbiBsb2NhbCBydWxlcy9yZWd1bGF0aW9ucywgZWFjaCBjaGFuZ2Ugc2hvdWxkIGJlIGNhcHR1cmVkIGFzIGEgbmV3IHZlcnNpb24gb2YgdGhlIE1lZGljYXRpb25SZXF1ZXN0IHdpdGggYW4gdXBkYXRlZCByYXRlLCBvciBjYXB0dXJlZCB3aXRoIGEgbmV3IE1lZGljYXRpb25SZXF1ZXN0IHdpdGggdGhlIG5ldyByYXRlLlxyXG4gICAqIEl0IGlzIHBvc3NpYmxlIHRvIHNwZWNpZnkgYSByYXRlIG92ZXIgdGltZSAoZm9yIGV4YW1wbGUsIDEwMCBtbC9ob3VyKSB1c2luZyBlaXRoZXIgdGhlIHJhdGVSYXRpbyBhbmQgcmF0ZVF1YW50aXR5LiAgVGhlIHJhdGVRdWFudGl0eSBhcHByb2FjaCByZXF1aXJlcyBzeXN0ZW1zIHRvIGhhdmUgdGhlIGNhcGFiaWxpdHkgdG8gcGFyc2UgVUNVTSBncmFtbWVyIHdoZXJlIG1sL2hvdXIgaXMgaW5jbHVkZWQgcmF0aGVyIHRoYW4gYSBzcGVjaWZpYyByYXRpbyB3aGVyZSB0aGUgdGltZSBpcyBzcGVjaWZpZWQgYXMgdGhlIGRlbm9taW5hdG9yLiAgV2hlcmUgYSByYXRlIHN1Y2ggYXMgNTAwbWwgb3ZlciAyIGhvdXJzIGlzIHNwZWNpZmllZCwgdGhlIHVzZSBvZiByYXRlUmF0aW8gbWF5IGJlIG1vcmUgc2VtYW50aWNhbGx5IGNvcnJlY3QgdGhhbiBzcGVjaWZ5aW5nIHVzaW5nIGEgcmF0ZVF1YW50aXR5IG9mIDI1MCBtZy9ob3VyLlxyXG4gICAqL1xyXG4gIHJhdGU/OiBmaGlyLlJhdGlvfGZoaXIuUmFuZ2V8Zmhpci5RdWFudGl0eXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSXQgaXMgcG9zc2libGUgdG8gc3VwcGx5IGJvdGggYSByYXRlIGFuZCBhIGRvc2VRdWFudGl0eSB0byBwcm92aWRlIGZ1bGwgZGV0YWlscyBhYm91dCBob3cgdGhlIG1lZGljYXRpb24gaXMgdG8gYmUgYWRtaW5pc3RlcmVkIGFuZCBzdXBwbGllZC4gSWYgdGhlIHJhdGUgaXMgaW50ZW5kZWQgdG8gY2hhbmdlIG92ZXIgdGltZSwgZGVwZW5kaW5nIG9uIGxvY2FsIHJ1bGVzL3JlZ3VsYXRpb25zLCBlYWNoIGNoYW5nZSBzaG91bGQgYmUgY2FwdHVyZWQgYXMgYSBuZXcgdmVyc2lvbiBvZiB0aGUgTWVkaWNhdGlvblJlcXVlc3Qgd2l0aCBhbiB1cGRhdGVkIHJhdGUsIG9yIGNhcHR1cmVkIHdpdGggYSBuZXcgTWVkaWNhdGlvblJlcXVlc3Qgd2l0aCB0aGUgbmV3IHJhdGUuXHJcbiAgICogSXQgaXMgcG9zc2libGUgdG8gc3BlY2lmeSBhIHJhdGUgb3ZlciB0aW1lIChmb3IgZXhhbXBsZSwgMTAwIG1sL2hvdXIpIHVzaW5nIGVpdGhlciB0aGUgcmF0ZVJhdGlvIGFuZCByYXRlUXVhbnRpdHkuICBUaGUgcmF0ZVF1YW50aXR5IGFwcHJvYWNoIHJlcXVpcmVzIHN5c3RlbXMgdG8gaGF2ZSB0aGUgY2FwYWJpbGl0eSB0byBwYXJzZSBVQ1VNIGdyYW1tZXIgd2hlcmUgbWwvaG91ciBpcyBpbmNsdWRlZCByYXRoZXIgdGhhbiBhIHNwZWNpZmljIHJhdGlvIHdoZXJlIHRoZSB0aW1lIGlzIHNwZWNpZmllZCBhcyB0aGUgZGVub21pbmF0b3IuICBXaGVyZSBhIHJhdGUgc3VjaCBhcyA1MDBtbCBvdmVyIDIgaG91cnMgaXMgc3BlY2lmaWVkLCB0aGUgdXNlIG9mIHJhdGVSYXRpbyBtYXkgYmUgbW9yZSBzZW1hbnRpY2FsbHkgY29ycmVjdCB0aGFuIHNwZWNpZnlpbmcgdXNpbmcgYSByYXRlUXVhbnRpdHkgb2YgMjUwIG1nL2hvdXIuXHJcbiAgICovXHJcbiAgcmF0ZVJhdGlvPzogZmhpci5SYXRpb0FyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEl0IGlzIHBvc3NpYmxlIHRvIHN1cHBseSBib3RoIGEgcmF0ZSBhbmQgYSBkb3NlUXVhbnRpdHkgdG8gcHJvdmlkZSBmdWxsIGRldGFpbHMgYWJvdXQgaG93IHRoZSBtZWRpY2F0aW9uIGlzIHRvIGJlIGFkbWluaXN0ZXJlZCBhbmQgc3VwcGxpZWQuIElmIHRoZSByYXRlIGlzIGludGVuZGVkIHRvIGNoYW5nZSBvdmVyIHRpbWUsIGRlcGVuZGluZyBvbiBsb2NhbCBydWxlcy9yZWd1bGF0aW9ucywgZWFjaCBjaGFuZ2Ugc2hvdWxkIGJlIGNhcHR1cmVkIGFzIGEgbmV3IHZlcnNpb24gb2YgdGhlIE1lZGljYXRpb25SZXF1ZXN0IHdpdGggYW4gdXBkYXRlZCByYXRlLCBvciBjYXB0dXJlZCB3aXRoIGEgbmV3IE1lZGljYXRpb25SZXF1ZXN0IHdpdGggdGhlIG5ldyByYXRlLlxyXG4gICAqIEl0IGlzIHBvc3NpYmxlIHRvIHNwZWNpZnkgYSByYXRlIG92ZXIgdGltZSAoZm9yIGV4YW1wbGUsIDEwMCBtbC9ob3VyKSB1c2luZyBlaXRoZXIgdGhlIHJhdGVSYXRpbyBhbmQgcmF0ZVF1YW50aXR5LiAgVGhlIHJhdGVRdWFudGl0eSBhcHByb2FjaCByZXF1aXJlcyBzeXN0ZW1zIHRvIGhhdmUgdGhlIGNhcGFiaWxpdHkgdG8gcGFyc2UgVUNVTSBncmFtbWVyIHdoZXJlIG1sL2hvdXIgaXMgaW5jbHVkZWQgcmF0aGVyIHRoYW4gYSBzcGVjaWZpYyByYXRpbyB3aGVyZSB0aGUgdGltZSBpcyBzcGVjaWZpZWQgYXMgdGhlIGRlbm9taW5hdG9yLiAgV2hlcmUgYSByYXRlIHN1Y2ggYXMgNTAwbWwgb3ZlciAyIGhvdXJzIGlzIHNwZWNpZmllZCwgdGhlIHVzZSBvZiByYXRlUmF0aW8gbWF5IGJlIG1vcmUgc2VtYW50aWNhbGx5IGNvcnJlY3QgdGhhbiBzcGVjaWZ5aW5nIHVzaW5nIGEgcmF0ZVF1YW50aXR5IG9mIDI1MCBtZy9ob3VyLlxyXG4gICAqL1xyXG4gIHJhdGVSYW5nZT86IGZoaXIuUmFuZ2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJdCBpcyBwb3NzaWJsZSB0byBzdXBwbHkgYm90aCBhIHJhdGUgYW5kIGEgZG9zZVF1YW50aXR5IHRvIHByb3ZpZGUgZnVsbCBkZXRhaWxzIGFib3V0IGhvdyB0aGUgbWVkaWNhdGlvbiBpcyB0byBiZSBhZG1pbmlzdGVyZWQgYW5kIHN1cHBsaWVkLiBJZiB0aGUgcmF0ZSBpcyBpbnRlbmRlZCB0byBjaGFuZ2Ugb3ZlciB0aW1lLCBkZXBlbmRpbmcgb24gbG9jYWwgcnVsZXMvcmVndWxhdGlvbnMsIGVhY2ggY2hhbmdlIHNob3VsZCBiZSBjYXB0dXJlZCBhcyBhIG5ldyB2ZXJzaW9uIG9mIHRoZSBNZWRpY2F0aW9uUmVxdWVzdCB3aXRoIGFuIHVwZGF0ZWQgcmF0ZSwgb3IgY2FwdHVyZWQgd2l0aCBhIG5ldyBNZWRpY2F0aW9uUmVxdWVzdCB3aXRoIHRoZSBuZXcgcmF0ZS5cclxuICAgKiBJdCBpcyBwb3NzaWJsZSB0byBzcGVjaWZ5IGEgcmF0ZSBvdmVyIHRpbWUgKGZvciBleGFtcGxlLCAxMDAgbWwvaG91cikgdXNpbmcgZWl0aGVyIHRoZSByYXRlUmF0aW8gYW5kIHJhdGVRdWFudGl0eS4gIFRoZSByYXRlUXVhbnRpdHkgYXBwcm9hY2ggcmVxdWlyZXMgc3lzdGVtcyB0byBoYXZlIHRoZSBjYXBhYmlsaXR5IHRvIHBhcnNlIFVDVU0gZ3JhbW1lciB3aGVyZSBtbC9ob3VyIGlzIGluY2x1ZGVkIHJhdGhlciB0aGFuIGEgc3BlY2lmaWMgcmF0aW8gd2hlcmUgdGhlIHRpbWUgaXMgc3BlY2lmaWVkIGFzIHRoZSBkZW5vbWluYXRvci4gIFdoZXJlIGEgcmF0ZSBzdWNoIGFzIDUwMG1sIG92ZXIgMiBob3VycyBpcyBzcGVjaWZpZWQsIHRoZSB1c2Ugb2YgcmF0ZVJhdGlvIG1heSBiZSBtb3JlIHNlbWFudGljYWxseSBjb3JyZWN0IHRoYW4gc3BlY2lmeWluZyB1c2luZyBhIHJhdGVRdWFudGl0eSBvZiAyNTAgbWcvaG91ci5cclxuICAgKi9cclxuICByYXRlUXVhbnRpdHk/OiBmaGlyLlF1YW50aXR5QXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgYW1vdW50IG9mIG1lZGljYXRpb24gYWRtaW5pc3RlcmVkLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIERvc2FnZURvc2VBbmRSYXRlIGV4dGVuZHMgZmhpci5GaGlyRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdEb3NhZ2VEb3NlQW5kUmF0ZSc7XHJcbiAgLyoqXHJcbiAgICogVGhlIGtpbmQgb2YgZG9zZSBvciByYXRlIHNwZWNpZmllZCwgZm9yIGV4YW1wbGUsIG9yZGVyZWQgb3IgY2FsY3VsYXRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgdHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBOb3RlIHRoYXQgdGhpcyBzcGVjaWZpZXMgdGhlIHF1YW50aXR5IG9mIHRoZSBzcGVjaWZpZWQgbWVkaWNhdGlvbiwgbm90IHRoZSBxdWFudGl0eSBmb3IgZWFjaCBhY3RpdmUgaW5ncmVkaWVudChzKS4gRWFjaCBpbmdyZWRpZW50IGFtb3VudCBjYW4gYmUgY29tbXVuaWNhdGVkIGluIHRoZSBNZWRpY2F0aW9uIHJlc291cmNlLiBGb3IgZXhhbXBsZSwgaWYgb25lIHdhbnRzIHRvIGNvbW11bmljYXRlIHRoYXQgYSB0YWJsZXQgd2FzIDM3NSBtZywgd2hlcmUgdGhlIGRvc2Ugd2FzIG9uZSB0YWJsZXQsIHlvdSBjYW4gdXNlIHRoZSBNZWRpY2F0aW9uIHJlc291cmNlIHRvIGRvY3VtZW50IHRoYXQgdGhlIHRhYmxldCB3YXMgY29tcHJpc2VkIG9mIDM3NSBtZyBvZiBkcnVnIFhZWi4gQWx0ZXJuYXRpdmVseSBpZiB0aGUgZG9zZSB3YXMgMzc1IG1nLCB0aGVuIHlvdSBtYXkgb25seSBuZWVkIHRvIHVzZSB0aGUgTWVkaWNhdGlvbiByZXNvdXJjZSB0byBpbmRpY2F0ZSB0aGlzIHdhcyBhIHRhYmxldC4gSWYgdGhlIGV4YW1wbGUgd2VyZSBhbiBJViBzdWNoIGFzIGRvcGFtaW5lIGFuZCB5b3Ugd2FudGVkIHRvIGNvbW11bmljYXRlIHRoYXQgNDAwbWcgb2YgZG9wYW1pbmUgd2FzIG1peGVkIGluIDUwMCBtbCBvZiBzb21lIElWIHNvbHV0aW9uLCB0aGVuIHRoaXMgd291bGQgYWxsIGJlIGNvbW11bmljYXRlZCBpbiB0aGUgTWVkaWNhdGlvbiByZXNvdXJjZS4gSWYgdGhlIGFkbWluaXN0cmF0aW9uIGlzIG5vdCBpbnRlbmRlZCB0byBiZSBpbnN0YW50YW5lb3VzIChyYXRlIGlzIHByZXNlbnQgb3IgdGltaW5nIGhhcyBhIGR1cmF0aW9uKSwgdGhpcyBjYW4gYmUgc3BlY2lmaWVkIHRvIGNvbnZleSB0aGUgdG90YWwgYW1vdW50IHRvIGJlIGFkbWluaXN0ZXJlZCBvdmVyIHRoZSBwZXJpb2Qgb2YgdGltZSBhcyBpbmRpY2F0ZWQgYnkgdGhlIHNjaGVkdWxlIGUuZy4gNTAwIG1sIGluIGRvc2UsIHdpdGggdGltaW5nIHVzZWQgdG8gY29udmV5IHRoYXQgdGhpcyBzaG91bGQgYmUgZG9uZSBvdmVyIDQgaG91cnMuXHJcbiAgICovXHJcbiAgcHVibGljIGRvc2U/OiAoZmhpci5SYW5nZXxmaGlyLlF1YW50aXR5KXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBEb3NhZ2UuZG9zZUFuZFJhdGUuZG9zZVt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c19kb3NlSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogSXQgaXMgcG9zc2libGUgdG8gc3VwcGx5IGJvdGggYSByYXRlIGFuZCBhIGRvc2VRdWFudGl0eSB0byBwcm92aWRlIGZ1bGwgZGV0YWlscyBhYm91dCBob3cgdGhlIG1lZGljYXRpb24gaXMgdG8gYmUgYWRtaW5pc3RlcmVkIGFuZCBzdXBwbGllZC4gSWYgdGhlIHJhdGUgaXMgaW50ZW5kZWQgdG8gY2hhbmdlIG92ZXIgdGltZSwgZGVwZW5kaW5nIG9uIGxvY2FsIHJ1bGVzL3JlZ3VsYXRpb25zLCBlYWNoIGNoYW5nZSBzaG91bGQgYmUgY2FwdHVyZWQgYXMgYSBuZXcgdmVyc2lvbiBvZiB0aGUgTWVkaWNhdGlvblJlcXVlc3Qgd2l0aCBhbiB1cGRhdGVkIHJhdGUsIG9yIGNhcHR1cmVkIHdpdGggYSBuZXcgTWVkaWNhdGlvblJlcXVlc3Qgd2l0aCB0aGUgbmV3IHJhdGUuXHJcbiAgICogSXQgaXMgcG9zc2libGUgdG8gc3BlY2lmeSBhIHJhdGUgb3ZlciB0aW1lIChmb3IgZXhhbXBsZSwgMTAwIG1sL2hvdXIpIHVzaW5nIGVpdGhlciB0aGUgcmF0ZVJhdGlvIGFuZCByYXRlUXVhbnRpdHkuICBUaGUgcmF0ZVF1YW50aXR5IGFwcHJvYWNoIHJlcXVpcmVzIHN5c3RlbXMgdG8gaGF2ZSB0aGUgY2FwYWJpbGl0eSB0byBwYXJzZSBVQ1VNIGdyYW1tZXIgd2hlcmUgbWwvaG91ciBpcyBpbmNsdWRlZCByYXRoZXIgdGhhbiBhIHNwZWNpZmljIHJhdGlvIHdoZXJlIHRoZSB0aW1lIGlzIHNwZWNpZmllZCBhcyB0aGUgZGVub21pbmF0b3IuICBXaGVyZSBhIHJhdGUgc3VjaCBhcyA1MDBtbCBvdmVyIDIgaG91cnMgaXMgc3BlY2lmaWVkLCB0aGUgdXNlIG9mIHJhdGVSYXRpbyBtYXkgYmUgbW9yZSBzZW1hbnRpY2FsbHkgY29ycmVjdCB0aGFuIHNwZWNpZnlpbmcgdXNpbmcgYSByYXRlUXVhbnRpdHkgb2YgMjUwIG1nL2hvdXIuXHJcbiAgICovXHJcbiAgcHVibGljIHJhdGU/OiAoZmhpci5SYXRpb3xmaGlyLlJhbmdlfGZoaXIuUXVhbnRpdHkpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IERvc2FnZS5kb3NlQW5kUmF0ZS5yYXRlW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX3JhdGVJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBEb3NhZ2VEb3NlQW5kUmF0ZSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPERvc2FnZURvc2VBbmRSYXRlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3R5cGUnXSkgeyB0aGlzLnR5cGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnR5cGUpOyB9XHJcbiAgICBpZiAoc291cmNlWydkb3NlJ10pIHsgdGhpcy5kb3NlID0gc291cmNlLmRvc2U7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnZG9zZVJhbmdlJ10pIHsgdGhpcy5kb3NlID0gbmV3IGZoaXIuUmFuZ2Uoc291cmNlLmRvc2VSYW5nZSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnZG9zZVF1YW50aXR5J10pIHsgdGhpcy5kb3NlID0gbmV3IGZoaXIuUXVhbnRpdHkoc291cmNlLmRvc2VRdWFudGl0eSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3JhdGUnXSkgeyB0aGlzLnJhdGUgPSBzb3VyY2UucmF0ZTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydyYXRlUmF0aW8nXSkgeyB0aGlzLnJhdGUgPSBuZXcgZmhpci5SYXRpbyhzb3VyY2UucmF0ZVJhdGlvKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydyYXRlUmFuZ2UnXSkgeyB0aGlzLnJhdGUgPSBuZXcgZmhpci5SYW5nZShzb3VyY2UucmF0ZVJhbmdlKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydyYXRlUXVhbnRpdHknXSkgeyB0aGlzLnJhdGUgPSBuZXcgZmhpci5RdWFudGl0eShzb3VyY2UucmF0ZVF1YW50aXR5KTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdEb3NhZ2UuZG9zZUFuZFJhdGUnIH1cclxuICAgIGlmICh0aGlzW1widHlwZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnR5cGUuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLnR5cGUnKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBEb3NhZ2UgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgRG9zYWdlQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHRoZSBvcmRlciBpbiB3aGljaCB0aGUgZG9zYWdlIGluc3RydWN0aW9ucyBzaG91bGQgYmUgYXBwbGllZCBvciBpbnRlcnByZXRlZC5cclxuICAgKi9cclxuICBzZXF1ZW5jZT86IGZoaXIuRmhpckludGVnZXJ8bnVtYmVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogRG9zYWdlLnNlcXVlbmNlXHJcbiAgICovXHJcbiAgX3NlcXVlbmNlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBGcmVlIHRleHQgZG9zYWdlIGluc3RydWN0aW9ucyBlLmcuIFNJRy5cclxuICAgKi9cclxuICB0ZXh0PzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IERvc2FnZS50ZXh0XHJcbiAgICovXHJcbiAgX3RleHQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEluZm9ybWF0aW9uIGFib3V0IGFkbWluaXN0cmF0aW9uIG9yIHByZXBhcmF0aW9uIG9mIHRoZSBtZWRpY2F0aW9uIChlLmcuIFwiaW5mdXNlIGFzIHJhcGlkbHkgYXMgcG9zc2libHkgdmlhIGludHJhcGVyaXRvbmVhbCBwb3J0XCIgb3IgXCJpbW1lZGlhdGVseSBmb2xsb3dpbmcgZHJ1ZyB4XCIpIHNob3VsZCBiZSBwb3B1bGF0ZWQgaW4gZG9zYWdlLnRleHQuXHJcbiAgICovXHJcbiAgYWRkaXRpb25hbEluc3RydWN0aW9uPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluc3RydWN0aW9ucyBpbiB0ZXJtcyB0aGF0IGFyZSB1bmRlcnN0b29kIGJ5IHRoZSBwYXRpZW50IG9yIGNvbnN1bWVyLlxyXG4gICAqL1xyXG4gIHBhdGllbnRJbnN0cnVjdGlvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBEb3NhZ2UucGF0aWVudEluc3RydWN0aW9uXHJcbiAgICovXHJcbiAgX3BhdGllbnRJbnN0cnVjdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBhdHRyaWJ1dGUgbWlnaHQgbm90IGFsd2F5cyBiZSBwb3B1bGF0ZWQgd2hpbGUgdGhlIERvc2FnZS50ZXh0IGlzIGV4cGVjdGVkIHRvIGJlIHBvcHVsYXRlZC4gIElmIGJvdGggYXJlIHBvcHVsYXRlZCwgdGhlbiB0aGUgRG9zYWdlLnRleHQgc2hvdWxkIHJlZmxlY3QgdGhlIGNvbnRlbnQgb2YgdGhlIERvc2FnZS50aW1pbmcuXHJcbiAgICovXHJcbiAgdGltaW5nPzogZmhpci5UaW1pbmdBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDYW4gZXhwcmVzcyBcImFzIG5lZWRlZFwiIHdpdGhvdXQgYSByZWFzb24gYnkgc2V0dGluZyB0aGUgQm9vbGVhbiA9IFRydWUuICBJbiB0aGlzIGNhc2UgdGhlIENvZGVhYmxlQ29uY2VwdCBpcyBub3QgcG9wdWxhdGVkLiAgT3IgeW91IGNhbiBleHByZXNzIFwiYXMgbmVlZGVkXCIgd2l0aCBhIHJlYXNvbiBieSBpbmNsdWRpbmcgdGhlIENvZGVhYmxlQ29uY2VwdC4gIEluIHRoaXMgY2FzZSB0aGUgQm9vbGVhbiBpcyBhc3N1bWVkIHRvIGJlIFRydWUuICBJZiB5b3Ugc2V0IHRoZSBCb29sZWFuIHRvIEZhbHNlLCB0aGVuIHRoZSBkb3NlIGlzIGdpdmVuIGFjY29yZGluZyB0byB0aGUgc2NoZWR1bGUgYW5kIGlzIG5vdCBcInByblwiIG9yIFwiYXMgbmVlZGVkXCIuXHJcbiAgICovXHJcbiAgYXNOZWVkZWQ/OiBmaGlyLkZoaXJCb29sZWFufGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDYW4gZXhwcmVzcyBcImFzIG5lZWRlZFwiIHdpdGhvdXQgYSByZWFzb24gYnkgc2V0dGluZyB0aGUgQm9vbGVhbiA9IFRydWUuICBJbiB0aGlzIGNhc2UgdGhlIENvZGVhYmxlQ29uY2VwdCBpcyBub3QgcG9wdWxhdGVkLiAgT3IgeW91IGNhbiBleHByZXNzIFwiYXMgbmVlZGVkXCIgd2l0aCBhIHJlYXNvbiBieSBpbmNsdWRpbmcgdGhlIENvZGVhYmxlQ29uY2VwdC4gIEluIHRoaXMgY2FzZSB0aGUgQm9vbGVhbiBpcyBhc3N1bWVkIHRvIGJlIFRydWUuICBJZiB5b3Ugc2V0IHRoZSBCb29sZWFuIHRvIEZhbHNlLCB0aGVuIHRoZSBkb3NlIGlzIGdpdmVuIGFjY29yZGluZyB0byB0aGUgc2NoZWR1bGUgYW5kIGlzIG5vdCBcInByblwiIG9yIFwiYXMgbmVlZGVkXCIuXHJcbiAgICovXHJcbiAgYXNOZWVkZWRCb29sZWFuPzogZmhpci5GaGlyQm9vbGVhbnxib29sZWFufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDYW4gZXhwcmVzcyBcImFzIG5lZWRlZFwiIHdpdGhvdXQgYSByZWFzb24gYnkgc2V0dGluZyB0aGUgQm9vbGVhbiA9IFRydWUuICBJbiB0aGlzIGNhc2UgdGhlIENvZGVhYmxlQ29uY2VwdCBpcyBub3QgcG9wdWxhdGVkLiAgT3IgeW91IGNhbiBleHByZXNzIFwiYXMgbmVlZGVkXCIgd2l0aCBhIHJlYXNvbiBieSBpbmNsdWRpbmcgdGhlIENvZGVhYmxlQ29uY2VwdC4gIEluIHRoaXMgY2FzZSB0aGUgQm9vbGVhbiBpcyBhc3N1bWVkIHRvIGJlIFRydWUuICBJZiB5b3Ugc2V0IHRoZSBCb29sZWFuIHRvIEZhbHNlLCB0aGVuIHRoZSBkb3NlIGlzIGdpdmVuIGFjY29yZGluZyB0byB0aGUgc2NoZWR1bGUgYW5kIGlzIG5vdCBcInByblwiIG9yIFwiYXMgbmVlZGVkXCIuXHJcbiAgICovXHJcbiAgYXNOZWVkZWRDb2RlYWJsZUNvbmNlcHQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIHRoZSB1c2UgY2FzZSByZXF1aXJlcyBhdHRyaWJ1dGVzIGZyb20gdGhlIEJvZHlTaXRlIHJlc291cmNlIChlLmcuIHRvIGlkZW50aWZ5IGFuZCB0cmFjayBzZXBhcmF0ZWx5KSB0aGVuIHVzZSB0aGUgc3RhbmRhcmQgZXh0ZW5zaW9uIFtib2R5U2l0ZV0oZXh0ZW5zaW9uLWJvZHlzaXRlLmh0bWwpLiAgTWF5IGJlIGEgc3VtbWFyeSBjb2RlLCBvciBhIHJlZmVyZW5jZSB0byBhIHZlcnkgcHJlY2lzZSBkZWZpbml0aW9uIG9mIHRoZSBsb2NhdGlvbiwgb3IgYm90aC5cclxuICAgKi9cclxuICBzaXRlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBIb3cgZHJ1ZyBzaG91bGQgZW50ZXIgYm9keS5cclxuICAgKi9cclxuICByb3V0ZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGVybWlub2xvZ2llcyB1c2VkIG9mdGVuIHByZS1jb29yZGluYXRlIHRoaXMgdGVybSB3aXRoIHRoZSByb3V0ZSBhbmQgb3IgZm9ybSBvZiBhZG1pbmlzdHJhdGlvbi5cclxuICAgKi9cclxuICBtZXRob2Q/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBhbW91bnQgb2YgbWVkaWNhdGlvbiBhZG1pbmlzdGVyZWQuXHJcbiAgICovXHJcbiAgZG9zZUFuZFJhdGU/OiBmaGlyLkRvc2FnZURvc2VBbmRSYXRlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGlzIGludGVuZGVkIGZvciB1c2UgYXMgYW4gYWRqdW5jdCB0byB0aGUgZG9zYWdlIHdoZW4gdGhlcmUgaXMgYW4gdXBwZXIgY2FwLiAgRm9yIGV4YW1wbGUgXCIyIHRhYmxldHMgZXZlcnkgNCBob3VycyB0byBhIG1heGltdW0gb2YgOC9kYXlcIi5cclxuICAgKi9cclxuICBtYXhEb3NlUGVyUGVyaW9kPzogZmhpci5SYXRpb0FyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaXMgaW50ZW5kZWQgZm9yIHVzZSBhcyBhbiBhZGp1bmN0IHRvIHRoZSBkb3NhZ2Ugd2hlbiB0aGVyZSBpcyBhbiB1cHBlciBjYXAuICBGb3IgZXhhbXBsZSwgYSBib2R5IHN1cmZhY2UgYXJlYSByZWxhdGVkIGRvc2Ugd2l0aCBhIG1heGltdW0gYW1vdW50LCBzdWNoIGFzIDEuNSBtZy9tMiAobWF4aW11bSAyIG1nKSBJViBvdmVyIDUg4oCTIDEwIG1pbnV0ZXMgd291bGQgaGF2ZSBkb3NlUXVhbnRpdHkgb2YgMS41IG1nL20yIGFuZCBtYXhEb3NlUGVyQWRtaW5pc3RyYXRpb24gb2YgMiBtZy5cclxuICAgKi9cclxuICBtYXhEb3NlUGVyQWRtaW5pc3RyYXRpb24/OiBmaGlyLlF1YW50aXR5QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVXBwZXIgbGltaXQgb24gbWVkaWNhdGlvbiBwZXIgbGlmZXRpbWUgb2YgdGhlIHBhdGllbnQuXHJcbiAgICovXHJcbiAgbWF4RG9zZVBlckxpZmV0aW1lPzogZmhpci5RdWFudGl0eUFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogSW5kaWNhdGVzIGhvdyB0aGUgbWVkaWNhdGlvbiBpcy93YXMgdGFrZW4gb3Igc2hvdWxkIGJlIHRha2VuIGJ5IHRoZSBwYXRpZW50LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIERvc2FnZSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0Rvc2FnZSc7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHRoZSBvcmRlciBpbiB3aGljaCB0aGUgZG9zYWdlIGluc3RydWN0aW9ucyBzaG91bGQgYmUgYXBwbGllZCBvciBpbnRlcnByZXRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgc2VxdWVuY2U/OiBmaGlyLkZoaXJJbnRlZ2VyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBGcmVlIHRleHQgZG9zYWdlIGluc3RydWN0aW9ucyBlLmcuIFNJRy5cclxuICAgKi9cclxuICBwdWJsaWMgdGV4dD86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5mb3JtYXRpb24gYWJvdXQgYWRtaW5pc3RyYXRpb24gb3IgcHJlcGFyYXRpb24gb2YgdGhlIG1lZGljYXRpb24gKGUuZy4gXCJpbmZ1c2UgYXMgcmFwaWRseSBhcyBwb3NzaWJseSB2aWEgaW50cmFwZXJpdG9uZWFsIHBvcnRcIiBvciBcImltbWVkaWF0ZWx5IGZvbGxvd2luZyBkcnVnIHhcIikgc2hvdWxkIGJlIHBvcHVsYXRlZCBpbiBkb3NhZ2UudGV4dC5cclxuICAgKi9cclxuICBwdWJsaWMgYWRkaXRpb25hbEluc3RydWN0aW9uOiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIEluc3RydWN0aW9ucyBpbiB0ZXJtcyB0aGF0IGFyZSB1bmRlcnN0b29kIGJ5IHRoZSBwYXRpZW50IG9yIGNvbnN1bWVyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXRpZW50SW5zdHJ1Y3Rpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgYXR0cmlidXRlIG1pZ2h0IG5vdCBhbHdheXMgYmUgcG9wdWxhdGVkIHdoaWxlIHRoZSBEb3NhZ2UudGV4dCBpcyBleHBlY3RlZCB0byBiZSBwb3B1bGF0ZWQuICBJZiBib3RoIGFyZSBwb3B1bGF0ZWQsIHRoZW4gdGhlIERvc2FnZS50ZXh0IHNob3VsZCByZWZsZWN0IHRoZSBjb250ZW50IG9mIHRoZSBEb3NhZ2UudGltaW5nLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0aW1pbmc/OiBmaGlyLlRpbWluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ2FuIGV4cHJlc3MgXCJhcyBuZWVkZWRcIiB3aXRob3V0IGEgcmVhc29uIGJ5IHNldHRpbmcgdGhlIEJvb2xlYW4gPSBUcnVlLiAgSW4gdGhpcyBjYXNlIHRoZSBDb2RlYWJsZUNvbmNlcHQgaXMgbm90IHBvcHVsYXRlZC4gIE9yIHlvdSBjYW4gZXhwcmVzcyBcImFzIG5lZWRlZFwiIHdpdGggYSByZWFzb24gYnkgaW5jbHVkaW5nIHRoZSBDb2RlYWJsZUNvbmNlcHQuICBJbiB0aGlzIGNhc2UgdGhlIEJvb2xlYW4gaXMgYXNzdW1lZCB0byBiZSBUcnVlLiAgSWYgeW91IHNldCB0aGUgQm9vbGVhbiB0byBGYWxzZSwgdGhlbiB0aGUgZG9zZSBpcyBnaXZlbiBhY2NvcmRpbmcgdG8gdGhlIHNjaGVkdWxlIGFuZCBpcyBub3QgXCJwcm5cIiBvciBcImFzIG5lZWRlZFwiLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhc05lZWRlZD86IChmaGlyLkZoaXJCb29sZWFufGZoaXIuQ29kZWFibGVDb25jZXB0KXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBEb3NhZ2UuYXNOZWVkZWRbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfYXNOZWVkZWRJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBJZiB0aGUgdXNlIGNhc2UgcmVxdWlyZXMgYXR0cmlidXRlcyBmcm9tIHRoZSBCb2R5U2l0ZSByZXNvdXJjZSAoZS5nLiB0byBpZGVudGlmeSBhbmQgdHJhY2sgc2VwYXJhdGVseSkgdGhlbiB1c2UgdGhlIHN0YW5kYXJkIGV4dGVuc2lvbiBbYm9keVNpdGVdKGV4dGVuc2lvbi1ib2R5c2l0ZS5odG1sKS4gIE1heSBiZSBhIHN1bW1hcnkgY29kZSwgb3IgYSByZWZlcmVuY2UgdG8gYSB2ZXJ5IHByZWNpc2UgZGVmaW5pdGlvbiBvZiB0aGUgbG9jYXRpb24sIG9yIGJvdGguXHJcbiAgICovXHJcbiAgcHVibGljIHNpdGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSG93IGRydWcgc2hvdWxkIGVudGVyIGJvZHkuXHJcbiAgICovXHJcbiAgcHVibGljIHJvdXRlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRlcm1pbm9sb2dpZXMgdXNlZCBvZnRlbiBwcmUtY29vcmRpbmF0ZSB0aGlzIHRlcm0gd2l0aCB0aGUgcm91dGUgYW5kIG9yIGZvcm0gb2YgYWRtaW5pc3RyYXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIG1ldGhvZD86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgYW1vdW50IG9mIG1lZGljYXRpb24gYWRtaW5pc3RlcmVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkb3NlQW5kUmF0ZTogZmhpci5Eb3NhZ2VEb3NlQW5kUmF0ZVtdO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaXMgaW50ZW5kZWQgZm9yIHVzZSBhcyBhbiBhZGp1bmN0IHRvIHRoZSBkb3NhZ2Ugd2hlbiB0aGVyZSBpcyBhbiB1cHBlciBjYXAuICBGb3IgZXhhbXBsZSBcIjIgdGFibGV0cyBldmVyeSA0IGhvdXJzIHRvIGEgbWF4aW11bSBvZiA4L2RheVwiLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtYXhEb3NlUGVyUGVyaW9kPzogZmhpci5SYXRpb3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBpbnRlbmRlZCBmb3IgdXNlIGFzIGFuIGFkanVuY3QgdG8gdGhlIGRvc2FnZSB3aGVuIHRoZXJlIGlzIGFuIHVwcGVyIGNhcC4gIEZvciBleGFtcGxlLCBhIGJvZHkgc3VyZmFjZSBhcmVhIHJlbGF0ZWQgZG9zZSB3aXRoIGEgbWF4aW11bSBhbW91bnQsIHN1Y2ggYXMgMS41IG1nL20yIChtYXhpbXVtIDIgbWcpIElWIG92ZXIgNSDigJMgMTAgbWludXRlcyB3b3VsZCBoYXZlIGRvc2VRdWFudGl0eSBvZiAxLjUgbWcvbTIgYW5kIG1heERvc2VQZXJBZG1pbmlzdHJhdGlvbiBvZiAyIG1nLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtYXhEb3NlUGVyQWRtaW5pc3RyYXRpb24/OiBmaGlyLlF1YW50aXR5fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBVcHBlciBsaW1pdCBvbiBtZWRpY2F0aW9uIHBlciBsaWZldGltZSBvZiB0aGUgcGF0aWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgbWF4RG9zZVBlckxpZmV0aW1lPzogZmhpci5RdWFudGl0eXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgRG9zYWdlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8RG9zYWdlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3NlcXVlbmNlJ10pIHsgdGhpcy5zZXF1ZW5jZSA9IG5ldyBmaGlyLkZoaXJJbnRlZ2VyKHt2YWx1ZTogc291cmNlLnNlcXVlbmNlfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zZXF1ZW5jZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnNlcXVlbmNlKSB7IHRoaXMuc2VxdWVuY2UuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc2VxdWVuY2UhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zZXF1ZW5jZSA9IG5ldyBmaGlyLkZoaXJJbnRlZ2VyKHNvdXJjZS5fc2VxdWVuY2UgYXMgUGFydGlhbDxmaGlyLkZoaXJJbnRlZ2VyQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd0ZXh0J10pIHsgdGhpcy50ZXh0ID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS50ZXh0fSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ190ZXh0J10pIHtcclxuICAgICAgaWYgKHRoaXMudGV4dCkgeyB0aGlzLnRleHQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdGV4dCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnRleHQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fdGV4dCBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnYWRkaXRpb25hbEluc3RydWN0aW9uJ10pIHsgdGhpcy5hZGRpdGlvbmFsSW5zdHJ1Y3Rpb24gPSBzb3VyY2UuYWRkaXRpb25hbEluc3RydWN0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYWRkaXRpb25hbEluc3RydWN0aW9uID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3BhdGllbnRJbnN0cnVjdGlvbiddKSB7IHRoaXMucGF0aWVudEluc3RydWN0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5wYXRpZW50SW5zdHJ1Y3Rpb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3BhdGllbnRJbnN0cnVjdGlvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLnBhdGllbnRJbnN0cnVjdGlvbikgeyB0aGlzLnBhdGllbnRJbnN0cnVjdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9wYXRpZW50SW5zdHJ1Y3Rpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5wYXRpZW50SW5zdHJ1Y3Rpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fcGF0aWVudEluc3RydWN0aW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd0aW1pbmcnXSkgeyB0aGlzLnRpbWluZyA9IG5ldyBmaGlyLlRpbWluZyhzb3VyY2UudGltaW5nKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYXNOZWVkZWQnXSkgeyB0aGlzLmFzTmVlZGVkID0gc291cmNlLmFzTmVlZGVkOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2FzTmVlZGVkQm9vbGVhbiddKSB7IHRoaXMuYXNOZWVkZWQgPSBuZXcgZmhpci5GaGlyQm9vbGVhbih7dmFsdWU6IHNvdXJjZS5hc05lZWRlZEJvb2xlYW59KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydhc05lZWRlZENvZGVhYmxlQ29uY2VwdCddKSB7IHRoaXMuYXNOZWVkZWQgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmFzTmVlZGVkQ29kZWFibGVDb25jZXB0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2l0ZSddKSB7IHRoaXMuc2l0ZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2Uuc2l0ZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3JvdXRlJ10pIHsgdGhpcy5yb3V0ZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2Uucm91dGUpOyB9XHJcbiAgICBpZiAoc291cmNlWydtZXRob2QnXSkgeyB0aGlzLm1ldGhvZCA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UubWV0aG9kKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZG9zZUFuZFJhdGUnXSkgeyB0aGlzLmRvc2VBbmRSYXRlID0gc291cmNlLmRvc2VBbmRSYXRlLm1hcCgoeCkgPT4gbmV3IGZoaXIuRG9zYWdlRG9zZUFuZFJhdGUoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5kb3NlQW5kUmF0ZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydtYXhEb3NlUGVyUGVyaW9kJ10pIHsgdGhpcy5tYXhEb3NlUGVyUGVyaW9kID0gbmV3IGZoaXIuUmF0aW8oc291cmNlLm1heERvc2VQZXJQZXJpb2QpOyB9XHJcbiAgICBpZiAoc291cmNlWydtYXhEb3NlUGVyQWRtaW5pc3RyYXRpb24nXSkgeyB0aGlzLm1heERvc2VQZXJBZG1pbmlzdHJhdGlvbiA9IG5ldyBmaGlyLlF1YW50aXR5KHNvdXJjZS5tYXhEb3NlUGVyQWRtaW5pc3RyYXRpb24pOyB9XHJcbiAgICBpZiAoc291cmNlWydtYXhEb3NlUGVyTGlmZXRpbWUnXSkgeyB0aGlzLm1heERvc2VQZXJMaWZldGltZSA9IG5ldyBmaGlyLlF1YW50aXR5KHNvdXJjZS5tYXhEb3NlUGVyTGlmZXRpbWUpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKTtcclxuICAgIGlmIChleHByZXNzaW9uID09PSAnJykgeyBleHByZXNzaW9uID0gJ0Rvc2FnZScgfVxyXG4gICAgaWYgKHRoaXNbXCJzZXF1ZW5jZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnNlcXVlbmNlLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5zZXF1ZW5jZScpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJ0ZXh0XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMudGV4dC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycudGV4dCcpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJhZGRpdGlvbmFsSW5zdHJ1Y3Rpb25cIl0pIHsgdGhpcy5hZGRpdGlvbmFsSW5zdHJ1Y3Rpb24uZm9yRWFjaCgoeCxpKSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbitgLmFkZGl0aW9uYWxJbnN0cnVjdGlvblske2l9XWApKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJwYXRpZW50SW5zdHJ1Y3Rpb25cIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5wYXRpZW50SW5zdHJ1Y3Rpb24uZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLnBhdGllbnRJbnN0cnVjdGlvbicpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJ0aW1pbmdcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy50aW1pbmcuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLnRpbWluZycpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJzaXRlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc2l0ZS5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuc2l0ZScpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJyb3V0ZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnJvdXRlLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5yb3V0ZScpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJtZXRob2RcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5tZXRob2QuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLm1ldGhvZCcpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJkb3NlQW5kUmF0ZVwiXSkgeyB0aGlzLmRvc2VBbmRSYXRlLmZvckVhY2goKHgsaSkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rYC5kb3NlQW5kUmF0ZVske2l9XWApKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJtYXhEb3NlUGVyUGVyaW9kXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMubWF4RG9zZVBlclBlcmlvZC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycubWF4RG9zZVBlclBlcmlvZCcpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJtYXhEb3NlUGVyQWRtaW5pc3RyYXRpb25cIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5tYXhEb3NlUGVyQWRtaW5pc3RyYXRpb24uZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLm1heERvc2VQZXJBZG1pbmlzdHJhdGlvbicpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJtYXhEb3NlUGVyTGlmZXRpbWVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5tYXhEb3NlUGVyTGlmZXRpbWUuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLm1heERvc2VQZXJMaWZldGltZScpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuIl19