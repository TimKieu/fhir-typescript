// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: DiagnosticReport
import * as fhir from '../fhir.js';
// @ts-ignore
import { DiagnosticReportStatusCodes } from '../fhirValueSets/DiagnosticReportStatusCodes.js';
// @ts-ignore
import { ReportCodesCodings, } from '../fhirValueSets/ReportCodesCodings.js';
/**
 * A list of key images associated with this report. The images are generally created during the diagnostic process, and may be directly of the patient, or of treated specimens (i.e. slides of interest).
 */
export class DiagnosticReportMedia extends fhir.BackboneElement {
    /**
     * Default constructor for DiagnosticReportMedia - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['comment']) {
            this.comment = new fhir.FhirString({ value: source.comment });
        }
        if (source['link']) {
            this.link = new fhir.Reference(source.link);
        }
        else {
            this.link = null;
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["comment"]) {
            issues.push(...this.comment.doModelValidation());
        }
        if (!this['link']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property link:fhir.Reference fhir: DiagnosticReport.media.link:Reference' });
        }
        if (this["link"]) {
            issues.push(...this.link.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DiagnosticReportMedia._fts_dataType = 'DiagnosticReportMedia';
/**
 * The findings and interpretation of diagnostic  tests performed on patients, groups of patients, devices, and locations, and/or specimens derived from these. The report includes clinical context such as requesting and provider information, and some mix of atomic results, images, textual and coded interpretations, and formatted representation of diagnostic reports.
 */
export class DiagnosticReport extends fhir.DomainResource {
    /**
     * Default constructor for DiagnosticReport - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'DiagnosticReport';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['basedOn']) {
            this.basedOn = source.basedOn.map((x) => new fhir.Reference(x));
        }
        else {
            this.basedOn = [];
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['category']) {
            this.category = source.category.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.category = [];
        }
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        else {
            this.code = null;
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject);
        }
        if (source['encounter']) {
            this.encounter = new fhir.Reference(source.encounter);
        }
        if (source['effective']) {
            this.effective = source.effective;
        }
        else if (source['effectiveDateTime']) {
            this.effective = new fhir.FhirDateTime({ value: source.effectiveDateTime });
        }
        else if (source['effectivePeriod']) {
            this.effective = new fhir.Period(source.effectivePeriod);
        }
        if (source['issued']) {
            this.issued = new fhir.FhirInstant({ value: source.issued });
        }
        if (source['performer']) {
            this.performer = source.performer.map((x) => new fhir.Reference(x));
        }
        else {
            this.performer = [];
        }
        if (source['resultsInterpreter']) {
            this.resultsInterpreter = source.resultsInterpreter.map((x) => new fhir.Reference(x));
        }
        else {
            this.resultsInterpreter = [];
        }
        if (source['specimen']) {
            this.specimen = source.specimen.map((x) => new fhir.Reference(x));
        }
        else {
            this.specimen = [];
        }
        if (source['result']) {
            this.result = source.result.map((x) => new fhir.Reference(x));
        }
        else {
            this.result = [];
        }
        if (source['imagingStudy']) {
            this.imagingStudy = source.imagingStudy.map((x) => new fhir.Reference(x));
        }
        else {
            this.imagingStudy = [];
        }
        if (source['media']) {
            this.media = source.media.map((x) => new fhir.DiagnosticReportMedia(x));
        }
        else {
            this.media = [];
        }
        if (source['conclusion']) {
            this.conclusion = new fhir.FhirString({ value: source.conclusion });
        }
        if (source['conclusionCode']) {
            this.conclusionCode = source.conclusionCode.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.conclusionCode = [];
        }
        if (source['presentedForm']) {
            this.presentedForm = source.presentedForm.map((x) => new fhir.Attachment(x));
        }
        else {
            this.presentedForm = [];
        }
    }
    /**
     * Required-bound Value Set for status (DiagnosticReport.status)
     */
    static get statusRequiredCodes() {
        return DiagnosticReportStatusCodes;
    }
    /**
     * Preferred-bound Value Set for code (DiagnosticReport.code)
     */
    static get codePreferredCodings() {
        return ReportCodesCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType:"DiagnosticReport" fhir: DiagnosticReport.resourceType:"DiagnosticReport"' });
        }
        if (this["identifier"]) {
            this.identifier.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["basedOn"]) {
            this.basedOn.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (!this['status']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property status:fhir.FhirCode<DiagnosticReportStatusCodeType> fhir: DiagnosticReport.status:code' });
        }
        if (this['status'] && (!Object.values(DiagnosticReportStatusCodes).includes(this.status))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property status:fhir.FhirCode<DiagnosticReportStatusCodeType> fhir: DiagnosticReport.status:code Required binding to: DiagnosticReportStatus' });
        }
        if (this["status"]) {
            issues.push(...this.status.doModelValidation());
        }
        if (this["category"]) {
            this.category.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (!this['code']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property code:fhir.CodeableConcept fhir: DiagnosticReport.code:CodeableConcept' });
        }
        if (this["code"]) {
            issues.push(...this.code.doModelValidation());
        }
        if (this["subject"]) {
            issues.push(...this.subject.doModelValidation());
        }
        if (this["encounter"]) {
            issues.push(...this.encounter.doModelValidation());
        }
        if (this["issued"]) {
            issues.push(...this.issued.doModelValidation());
        }
        if (this["performer"]) {
            this.performer.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["resultsInterpreter"]) {
            this.resultsInterpreter.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["specimen"]) {
            this.specimen.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["result"]) {
            this.result.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["imagingStudy"]) {
            this.imagingStudy.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["media"]) {
            this.media.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["conclusion"]) {
            issues.push(...this.conclusion.doModelValidation());
        }
        if (this["conclusionCode"]) {
            this.conclusionCode.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["presentedForm"]) {
            this.presentedForm.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DiagnosticReport._fts_dataType = 'DiagnosticReport';
/**
 * Internal flag to properly serialize choice-type element DiagnosticReport.effective[x]
 */
DiagnosticReport._fts_effectiveIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGlhZ25vc3RpY1JlcG9ydC5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvRGlhZ25vc3RpY1JlcG9ydC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQyxrQ0FBa0M7QUFFbEMsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFJbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSwyQkFBMkIsRUFBbUMsTUFBTSxpREFBaUQsQ0FBQztBQUsvSCxhQUFhO0FBQ2IsT0FBTyxFQUFFLGtCQUFrQixHQUF5QixNQUFNLHdDQUF3QyxDQUFDO0FBcUJuRzs7R0FFRztBQUNILE1BQU0sT0FBTyxxQkFBc0IsU0FBUSxJQUFJLENBQUMsZUFBZTtJQWE3RDs7T0FFRztJQUNILFlBQVksU0FBNEMsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDbEcsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxPQUFPLEVBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDdkYsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7U0FBRTthQUMvRDtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1NBQUU7SUFDNUIsQ0FBQztJQUNEOztPQUVHO0lBQ2EsaUJBQWlCO1FBQy9CLElBQUksTUFBTSxHQUFtQixLQUFLLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUN2RCxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQzFFLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFDakIsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQUUsMkZBQTJGLEVBQUUsQ0FBQyxDQUFDO1NBQ2hLO1FBQ0QsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUNwRSxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQWhDRDs7R0FFRztBQUM2QixtQ0FBYSxHQUFVLHVCQUF1QixDQUFDO0FBeUhqRjs7R0FFRztBQUNILE1BQU0sT0FBTyxnQkFBaUIsU0FBUSxJQUFJLENBQUMsY0FBYztJQXFGdkQ7O09BRUc7SUFDSCxZQUFZLFNBQXVDLEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQzdGLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxDQUFDLFlBQVksR0FBRyxrQkFBa0IsQ0FBQztRQUN2QyxJQUFJLE1BQU0sQ0FBQyxZQUFZLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDaEc7WUFBRSxJQUFJLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQztTQUFFO1FBQzlCLElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUN0RjtZQUFFLElBQUksQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDO1NBQUU7UUFDM0IsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBaUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLE1BQU0sRUFBQyxDQUFDLENBQUM7U0FBRTthQUM3RztZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDNUIsSUFBSSxNQUFNLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQy9GO1lBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7U0FBRTtRQUM1QixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUFFO2FBQ3JFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7U0FBRTtRQUMxQixJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztTQUFFO1FBQzdFLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1NBQUU7UUFDbkYsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsU0FBUyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUM7U0FBRTthQUMxRCxJQUFJLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLGlCQUFpQixFQUFDLENBQUMsQ0FBQztTQUFFO2FBQy9HLElBQUksTUFBTSxDQUFDLGlCQUFpQixDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLENBQUM7U0FBRTtRQUNqRyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxNQUFNLEVBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDckYsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsU0FBUyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQzVGO1lBQUUsSUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7U0FBRTtRQUM3QixJQUFJLE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLGtCQUFrQixHQUFHLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDdkg7WUFBRSxJQUFJLENBQUMsa0JBQWtCLEdBQUcsRUFBRSxDQUFDO1NBQUU7UUFDdEMsSUFBSSxNQUFNLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQ3pGO1lBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7U0FBRTtRQUM1QixJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDbkY7WUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQztTQUFFO1FBQzFCLElBQUksTUFBTSxDQUFDLGNBQWMsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFlBQVksR0FBRyxNQUFNLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUNyRztZQUFFLElBQUksQ0FBQyxZQUFZLEdBQUcsRUFBRSxDQUFDO1NBQUU7UUFDaEMsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDNUY7WUFBRSxJQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQztTQUFFO1FBQ3pCLElBQUksTUFBTSxDQUFDLFlBQVksQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLFVBQVUsRUFBQyxDQUFDLENBQUM7U0FBRTtRQUNoRyxJQUFJLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLGNBQWMsR0FBRyxNQUFNLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUNqSDtZQUFFLElBQUksQ0FBQyxjQUFjLEdBQUcsRUFBRSxDQUFDO1NBQUU7UUFDbEMsSUFBSSxNQUFNLENBQUMsZUFBZSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsYUFBYSxHQUFHLE1BQU0sQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQ3pHO1lBQUUsSUFBSSxDQUFDLGFBQWEsR0FBRyxFQUFFLENBQUM7U0FBRTtJQUNuQyxDQUFDO0lBQ0Q7O09BRUc7SUFDSSxNQUFNLEtBQUssbUJBQW1CO1FBQ25DLE9BQU8sMkJBQTJCLENBQUM7SUFDckMsQ0FBQztJQUNEOztPQUVHO0lBQ0ksTUFBTSxLQUFLLG9CQUFvQjtRQUNwQyxPQUFPLGtCQUFrQixDQUFDO0lBQzVCLENBQUM7SUFDRDs7T0FFRztJQUNhLGlCQUFpQjtRQUMvQixJQUFJLE1BQU0sR0FBbUIsS0FBSyxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDdkQsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsRUFBRTtZQUN6QixNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxrSEFBa0gsRUFBRSxDQUFDLENBQUM7U0FDdkw7UUFDRCxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQUU7UUFDdEcsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtTQUFFO1FBQ2hHLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDbkIsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQUUsbUhBQW1ILEVBQUUsQ0FBQyxDQUFDO1NBQ3hMO1FBQ0QsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsMkJBQTJCLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQWEsQ0FBQyxDQUFDLEVBQUU7WUFDaEcsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLGNBQWMsRUFBRSxXQUFXLEVBQUUsMkpBQTJKLEVBQUUsQ0FBQyxDQUFDO1NBQ3BPO1FBQ0QsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUN4RSxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQUU7UUFDbEcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUNqQixNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxpR0FBaUcsRUFBRSxDQUFDLENBQUM7U0FDdEs7UUFDRCxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQ3BFLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFDMUUsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUM5RSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQ3hFLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7U0FBRTtRQUNwRyxJQUFJLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLGtCQUFrQixDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtTQUFFO1FBQ3RILElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7U0FBRTtRQUNsRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQUU7UUFDOUYsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtTQUFFO1FBQzFHLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7U0FBRTtRQUM1RixJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQ2hGLElBQUksSUFBSSxDQUFDLGdCQUFnQixDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtTQUFFO1FBQzlHLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7U0FBRTtRQUM1RyxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQTNLRDs7R0FFRztBQUM2Qiw4QkFBYSxHQUFVLGtCQUFrQixDQUFDO0FBcUMxRTs7R0FFRztBQUN1Qix1Q0FBc0IsR0FBUSxJQUFJLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjQuY29yZSB2ZXJzaW9uOiA0LjAuMVxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IERpYWdub3N0aWNSZXBvcnRcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IERpYWdub3N0aWNSZXBvcnRTdGF0dXNDb2RpbmdzLCBEaWFnbm9zdGljUmVwb3J0U3RhdHVzQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRGlhZ25vc3RpY1JlcG9ydFN0YXR1c0NvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IERpYWdub3N0aWNSZXBvcnRTdGF0dXNDb2RlcywgIERpYWdub3N0aWNSZXBvcnRTdGF0dXNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRGlhZ25vc3RpY1JlcG9ydFN0YXR1c0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEaWFnbm9zdGljU2VydmljZVNlY3Rpb25zQ29kaW5ncywgRGlhZ25vc3RpY1NlcnZpY2VTZWN0aW9uc0NvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0RpYWdub3N0aWNTZXJ2aWNlU2VjdGlvbnNDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEaWFnbm9zdGljU2VydmljZVNlY3Rpb25zQ29kZXMsICBEaWFnbm9zdGljU2VydmljZVNlY3Rpb25zQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0RpYWdub3N0aWNTZXJ2aWNlU2VjdGlvbnNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUmVwb3J0Q29kZXNDb2RpbmdzLCBSZXBvcnRDb2Rlc0NvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1JlcG9ydENvZGVzQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUmVwb3J0Q29kZXNDb2RlcywgIFJlcG9ydENvZGVzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1JlcG9ydENvZGVzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENsaW5pY2FsRmluZGluZ3NDb2RpbmdzLCBDbGluaWNhbEZpbmRpbmdzQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ2xpbmljYWxGaW5kaW5nc0NvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENsaW5pY2FsRmluZGluZ3NDb2RlcywgIENsaW5pY2FsRmluZGluZ3NDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ2xpbmljYWxGaW5kaW5nc0NvZGVzLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIERpYWdub3N0aWNSZXBvcnRNZWRpYSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBEaWFnbm9zdGljUmVwb3J0TWVkaWFBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgY29tbWVudCBzaG91bGQgYmUgZGlzcGxheWVkIHdpdGggdGhlIGltYWdlLiBJdCB3b3VsZCBiZSBjb21tb24gZm9yIHRoZSByZXBvcnQgdG8gaW5jbHVkZSBhZGRpdGlvbmFsIGRpc2N1c3Npb24gb2YgdGhlIGltYWdlIGNvbnRlbnRzIGluIG90aGVyIHNlY3Rpb25zIHN1Y2ggYXMgdGhlIGNvbmNsdXNpb24uXHJcbiAgICovXHJcbiAgY29tbWVudD86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFJlZmVyZW5jZSB0byB0aGUgaW1hZ2Ugc291cmNlLlxyXG4gICAqL1xyXG4gIGxpbms6IGZoaXIuUmVmZXJlbmNlQXJnc3xudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogQSBsaXN0IG9mIGtleSBpbWFnZXMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgcmVwb3J0LiBUaGUgaW1hZ2VzIGFyZSBnZW5lcmFsbHkgY3JlYXRlZCBkdXJpbmcgdGhlIGRpYWdub3N0aWMgcHJvY2VzcywgYW5kIG1heSBiZSBkaXJlY3RseSBvZiB0aGUgcGF0aWVudCwgb3Igb2YgdHJlYXRlZCBzcGVjaW1lbnMgKGkuZS4gc2xpZGVzIG9mIGludGVyZXN0KS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBEaWFnbm9zdGljUmVwb3J0TWVkaWEgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdEaWFnbm9zdGljUmVwb3J0TWVkaWEnO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjb21tZW50IHNob3VsZCBiZSBkaXNwbGF5ZWQgd2l0aCB0aGUgaW1hZ2UuIEl0IHdvdWxkIGJlIGNvbW1vbiBmb3IgdGhlIHJlcG9ydCB0byBpbmNsdWRlIGFkZGl0aW9uYWwgZGlzY3Vzc2lvbiBvZiB0aGUgaW1hZ2UgY29udGVudHMgaW4gb3RoZXIgc2VjdGlvbnMgc3VjaCBhcyB0aGUgY29uY2x1c2lvbi5cclxuICAgKi9cclxuICBwdWJsaWMgY29tbWVudD86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUmVmZXJlbmNlIHRvIHRoZSBpbWFnZSBzb3VyY2UuXHJcbiAgICovXHJcbiAgcHVibGljIGxpbms6IGZoaXIuUmVmZXJlbmNlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgRGlhZ25vc3RpY1JlcG9ydE1lZGlhIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8RGlhZ25vc3RpY1JlcG9ydE1lZGlhQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2NvbW1lbnQnXSkgeyB0aGlzLmNvbW1lbnQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmNvbW1lbnR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbGluayddKSB7IHRoaXMubGluayA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UubGluayk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmxpbmsgPSBudWxsOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAodGhpc1tcImNvbW1lbnRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5jb21tZW50LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAoIXRoaXNbJ2xpbmsnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgbGluazpmaGlyLlJlZmVyZW5jZSBmaGlyOiBEaWFnbm9zdGljUmVwb3J0Lm1lZGlhLmxpbms6UmVmZXJlbmNlJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wibGlua1wiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmxpbmsuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBEaWFnbm9zdGljUmVwb3J0IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIERpYWdub3N0aWNSZXBvcnRBcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJEaWFnbm9zdGljUmVwb3J0XCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFVzdWFsbHkgYXNzaWduZWQgYnkgdGhlIEluZm9ybWF0aW9uIFN5c3RlbSBvZiB0aGUgZGlhZ25vc3RpYyBzZXJ2aWNlIHByb3ZpZGVyIChmaWxsZXIgaWQpLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE5vdGU6IFVzdWFsbHkgdGhlcmUgaXMgb25lIHRlc3QgcmVxdWVzdCBmb3IgZWFjaCByZXN1bHQsIGhvd2V2ZXIgaW4gc29tZSBjaXJjdW1zdGFuY2VzIG11bHRpcGxlIHRlc3QgcmVxdWVzdHMgbWF5IGJlIHJlcHJlc2VudGVkIHVzaW5nIGEgc2luZ2xlIHRlc3QgcmVzdWx0IHJlc291cmNlLiBOb3RlIHRoYXQgdGhlcmUgYXJlIGFsc28gY2FzZXMgd2hlcmUgb25lIHJlcXVlc3QgbGVhZHMgdG8gbXVsdGlwbGUgcmVwb3J0cy5cclxuICAgKi9cclxuICBiYXNlZE9uPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzdGF0dXMgb2YgdGhlIGRpYWdub3N0aWMgcmVwb3J0LlxyXG4gICAqL1xyXG4gIHN0YXR1czogZmhpci5GaGlyQ29kZTxEaWFnbm9zdGljUmVwb3J0U3RhdHVzQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTXVsdGlwbGUgY2F0ZWdvcmllcyBhcmUgYWxsb3dlZCB1c2luZyB2YXJpb3VzIGNhdGVnb3JpemF0aW9uIHNjaGVtZXMuICAgVGhlIGxldmVsIG9mIGdyYW51bGFyaXR5IGlzIGRlZmluZWQgYnkgdGhlIGNhdGVnb3J5IGNvbmNlcHRzIGluIHRoZSB2YWx1ZSBzZXQuIE1vcmUgZmluZS1ncmFpbmVkIGZpbHRlcmluZyBjYW4gYmUgcGVyZm9ybWVkIHVzaW5nIHRoZSBtZXRhZGF0YSBhbmQvb3IgdGVybWlub2xvZ3kgaGllcmFyY2h5IGluIERpYWdub3N0aWNSZXBvcnQuY29kZS5cclxuICAgKi9cclxuICBjYXRlZ29yeT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGNvZGUgb3IgbmFtZSB0aGF0IGRlc2NyaWJlcyB0aGlzIGRpYWdub3N0aWMgcmVwb3J0LlxyXG4gICAqL1xyXG4gIGNvZGU6IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzdWJqZWN0IG9mIHRoZSByZXBvcnQuIFVzdWFsbHksIGJ1dCBub3QgYWx3YXlzLCB0aGlzIGlzIGEgcGF0aWVudC4gSG93ZXZlciwgZGlhZ25vc3RpYyBzZXJ2aWNlcyBhbHNvIHBlcmZvcm0gYW5hbHlzZXMgb24gc3BlY2ltZW5zIGNvbGxlY3RlZCBmcm9tIGEgdmFyaWV0eSBvZiBvdGhlciBzb3VyY2VzLlxyXG4gICAqL1xyXG4gIHN1YmplY3Q/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgd2lsbCB0eXBpY2FsbHkgYmUgdGhlIGVuY291bnRlciB0aGUgZXZlbnQgb2NjdXJyZWQgd2l0aGluLCBidXQgc29tZSBldmVudHMgbWF5IGJlIGluaXRpYXRlZCBwcmlvciB0byBvciBhZnRlciB0aGUgb2ZmaWNpYWwgY29tcGxldGlvbiBvZiBhbiBlbmNvdW50ZXIgIGJ1dCBzdGlsbCBiZSB0aWVkIHRvIHRoZSBjb250ZXh0IG9mIHRoZSBlbmNvdW50ZXIgIChlLmcuIHByZS1hZG1pc3Npb24gbGFib3JhdG9yeSB0ZXN0cykuXHJcbiAgICovXHJcbiAgZW5jb3VudGVyPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiB0aGUgZGlhZ25vc3RpYyBwcm9jZWR1cmUgd2FzIHBlcmZvcm1lZCBvbiB0aGUgcGF0aWVudCwgdGhpcyBpcyB0aGUgdGltZSBpdCB3YXMgcGVyZm9ybWVkLiBJZiB0aGVyZSBhcmUgc3BlY2ltZW5zLCB0aGUgZGlhZ25vc3RpY2FsbHkgcmVsZXZhbnQgdGltZSBjYW4gYmUgZGVyaXZlZCBmcm9tIHRoZSBzcGVjaW1lbiBjb2xsZWN0aW9uIHRpbWVzLCBidXQgdGhlIHNwZWNpbWVuIGluZm9ybWF0aW9uIGlzIG5vdCBhbHdheXMgYXZhaWxhYmxlLCBhbmQgdGhlIGV4YWN0IHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHRoZSBzcGVjaW1lbnMgYW5kIHRoZSBkaWFnbm9zdGljYWxseSByZWxldmFudCB0aW1lIGlzIG5vdCBhbHdheXMgYXV0b21hdGljLlxyXG4gICAqL1xyXG4gIGVmZmVjdGl2ZT86IGZoaXIuRmhpckRhdGVUaW1lfGZoaXIuUGVyaW9kfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiB0aGUgZGlhZ25vc3RpYyBwcm9jZWR1cmUgd2FzIHBlcmZvcm1lZCBvbiB0aGUgcGF0aWVudCwgdGhpcyBpcyB0aGUgdGltZSBpdCB3YXMgcGVyZm9ybWVkLiBJZiB0aGVyZSBhcmUgc3BlY2ltZW5zLCB0aGUgZGlhZ25vc3RpY2FsbHkgcmVsZXZhbnQgdGltZSBjYW4gYmUgZGVyaXZlZCBmcm9tIHRoZSBzcGVjaW1lbiBjb2xsZWN0aW9uIHRpbWVzLCBidXQgdGhlIHNwZWNpbWVuIGluZm9ybWF0aW9uIGlzIG5vdCBhbHdheXMgYXZhaWxhYmxlLCBhbmQgdGhlIGV4YWN0IHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHRoZSBzcGVjaW1lbnMgYW5kIHRoZSBkaWFnbm9zdGljYWxseSByZWxldmFudCB0aW1lIGlzIG5vdCBhbHdheXMgYXV0b21hdGljLlxyXG4gICAqL1xyXG4gIGVmZmVjdGl2ZURhdGVUaW1lPzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiB0aGUgZGlhZ25vc3RpYyBwcm9jZWR1cmUgd2FzIHBlcmZvcm1lZCBvbiB0aGUgcGF0aWVudCwgdGhpcyBpcyB0aGUgdGltZSBpdCB3YXMgcGVyZm9ybWVkLiBJZiB0aGVyZSBhcmUgc3BlY2ltZW5zLCB0aGUgZGlhZ25vc3RpY2FsbHkgcmVsZXZhbnQgdGltZSBjYW4gYmUgZGVyaXZlZCBmcm9tIHRoZSBzcGVjaW1lbiBjb2xsZWN0aW9uIHRpbWVzLCBidXQgdGhlIHNwZWNpbWVuIGluZm9ybWF0aW9uIGlzIG5vdCBhbHdheXMgYXZhaWxhYmxlLCBhbmQgdGhlIGV4YWN0IHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHRoZSBzcGVjaW1lbnMgYW5kIHRoZSBkaWFnbm9zdGljYWxseSByZWxldmFudCB0aW1lIGlzIG5vdCBhbHdheXMgYXV0b21hdGljLlxyXG4gICAqL1xyXG4gIGVmZmVjdGl2ZVBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTWF5IGJlIGRpZmZlcmVudCBmcm9tIHRoZSB1cGRhdGUgdGltZSBvZiB0aGUgcmVzb3VyY2UgaXRzZWxmLCBiZWNhdXNlIHRoYXQgaXMgdGhlIHN0YXR1cyBvZiB0aGUgcmVjb3JkIChwb3RlbnRpYWxseSBhIHNlY29uZGFyeSBjb3B5KSwgbm90IHRoZSBhY3R1YWwgcmVsZWFzZSB0aW1lIG9mIHRoZSByZXBvcnQuXHJcbiAgICovXHJcbiAgaXNzdWVkPzogZmhpci5GaGlySW5zdGFudHxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaXMgbm90IG5lY2Vzc2FyaWx5IHRoZSBzb3VyY2Ugb2YgdGhlIGF0b21pYyBkYXRhIGl0ZW1zIG9yIHRoZSBlbnRpdHkgdGhhdCBpbnRlcnByZXRlZCB0aGUgcmVzdWx0cy4gSXQgaXMgdGhlIGVudGl0eSB0aGF0IHRha2VzIHJlc3BvbnNpYmlsaXR5IGZvciB0aGUgY2xpbmljYWwgcmVwb3J0LlxyXG4gICAqL1xyXG4gIHBlcmZvcm1lcj86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBNaWdodCBub3QgYmUgdGhlIHNhbWUgZW50aXR5IHRoYXQgdGFrZXMgcmVzcG9uc2liaWxpdHkgZm9yIHRoZSBjbGluaWNhbCByZXBvcnQuXHJcbiAgICovXHJcbiAgcmVzdWx0c0ludGVycHJldGVyPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIHRoZSBzcGVjaW1lbiBpcyBzdWZmaWNpZW50bHkgc3BlY2lmaWVkIHdpdGggYSBjb2RlIGluIHRoZSB0ZXN0IHJlc3VsdCBuYW1lLCB0aGVuIHRoaXMgYWRkaXRpb25hbCBkYXRhIG1heSBiZSByZWR1bmRhbnQuIElmIHRoZXJlIGFyZSBtdWx0aXBsZSBzcGVjaW1lbnMsIHRoZXNlIG1heSBiZSByZXByZXNlbnRlZCBwZXIgb2JzZXJ2YXRpb24gb3IgZ3JvdXAuXHJcbiAgICovXHJcbiAgc3BlY2ltZW4/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogT2JzZXJ2YXRpb25zIGNhbiBjb250YWluIG9ic2VydmF0aW9ucy5cclxuICAgKi9cclxuICByZXN1bHQ/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW1hZ2luZ1N0dWR5IGFuZCB0aGUgaW1hZ2UgZWxlbWVudCBhcmUgc29tZXdoYXQgb3ZlcmxhcHBpbmcgLSB0eXBpY2FsbHksIHRoZSBsaXN0IG9mIGltYWdlIHJlZmVyZW5jZXMgaW4gdGhlIGltYWdlIGVsZW1lbnQgd2lsbCBhbHNvIGJlIGZvdW5kIGluIG9uZSBvZiB0aGUgaW1hZ2luZyBzdHVkeSByZXNvdXJjZXMuIEhvd2V2ZXIsIGVhY2ggY2F0ZXJzIHRvIGRpZmZlcmVudCB0eXBlcyBvZiBkaXNwbGF5cyBmb3IgZGlmZmVyZW50IHR5cGVzIG9mIHB1cnBvc2VzLiBOZWl0aGVyLCBlaXRoZXIsIG9yIGJvdGggbWF5IGJlIHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGltYWdpbmdTdHVkeT86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGxpc3Qgb2Yga2V5IGltYWdlcyBhc3NvY2lhdGVkIHdpdGggdGhpcyByZXBvcnQuIFRoZSBpbWFnZXMgYXJlIGdlbmVyYWxseSBjcmVhdGVkIGR1cmluZyB0aGUgZGlhZ25vc3RpYyBwcm9jZXNzLCBhbmQgbWF5IGJlIGRpcmVjdGx5IG9mIHRoZSBwYXRpZW50LCBvciBvZiB0cmVhdGVkIHNwZWNpbWVucyAoaS5lLiBzbGlkZXMgb2YgaW50ZXJlc3QpLlxyXG4gICAqL1xyXG4gIG1lZGlhPzogZmhpci5EaWFnbm9zdGljUmVwb3J0TWVkaWFBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENvbmNpc2UgYW5kIGNsaW5pY2FsbHkgY29udGV4dHVhbGl6ZWQgc3VtbWFyeSBjb25jbHVzaW9uIChpbnRlcnByZXRhdGlvbi9pbXByZXNzaW9uKSBvZiB0aGUgZGlhZ25vc3RpYyByZXBvcnQuXHJcbiAgICovXHJcbiAgY29uY2x1c2lvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE9uZSBvciBtb3JlIGNvZGVzIHRoYXQgcmVwcmVzZW50IHRoZSBzdW1tYXJ5IGNvbmNsdXNpb24gKGludGVycHJldGF0aW9uL2ltcHJlc3Npb24pIG9mIHRoZSBkaWFnbm9zdGljIHJlcG9ydC5cclxuICAgKi9cclxuICBjb25jbHVzaW9uQ29kZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBcImFwcGxpY2F0aW9uL3BkZlwiIGlzIHJlY29tbWVuZGVkIGFzIHRoZSBtb3N0IHJlbGlhYmxlIGFuZCBpbnRlcm9wZXJhYmxlIGluIHRoaXMgY29udGV4dC5cclxuICAgKi9cclxuICBwcmVzZW50ZWRGb3JtPzogZmhpci5BdHRhY2htZW50QXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBmaW5kaW5ncyBhbmQgaW50ZXJwcmV0YXRpb24gb2YgZGlhZ25vc3RpYyAgdGVzdHMgcGVyZm9ybWVkIG9uIHBhdGllbnRzLCBncm91cHMgb2YgcGF0aWVudHMsIGRldmljZXMsIGFuZCBsb2NhdGlvbnMsIGFuZC9vciBzcGVjaW1lbnMgZGVyaXZlZCBmcm9tIHRoZXNlLiBUaGUgcmVwb3J0IGluY2x1ZGVzIGNsaW5pY2FsIGNvbnRleHQgc3VjaCBhcyByZXF1ZXN0aW5nIGFuZCBwcm92aWRlciBpbmZvcm1hdGlvbiwgYW5kIHNvbWUgbWl4IG9mIGF0b21pYyByZXN1bHRzLCBpbWFnZXMsIHRleHR1YWwgYW5kIGNvZGVkIGludGVycHJldGF0aW9ucywgYW5kIGZvcm1hdHRlZCByZXByZXNlbnRhdGlvbiBvZiBkaWFnbm9zdGljIHJlcG9ydHMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRGlhZ25vc3RpY1JlcG9ydCBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnRGlhZ25vc3RpY1JlcG9ydCc7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJEaWFnbm9zdGljUmVwb3J0XCI7XHJcbiAgLyoqXHJcbiAgICogVXN1YWxseSBhc3NpZ25lZCBieSB0aGUgSW5mb3JtYXRpb24gU3lzdGVtIG9mIHRoZSBkaWFnbm9zdGljIHNlcnZpY2UgcHJvdmlkZXIgKGZpbGxlciBpZCkuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI6IGZoaXIuSWRlbnRpZmllcltdO1xyXG4gIC8qKlxyXG4gICAqIE5vdGU6IFVzdWFsbHkgdGhlcmUgaXMgb25lIHRlc3QgcmVxdWVzdCBmb3IgZWFjaCByZXN1bHQsIGhvd2V2ZXIgaW4gc29tZSBjaXJjdW1zdGFuY2VzIG11bHRpcGxlIHRlc3QgcmVxdWVzdHMgbWF5IGJlIHJlcHJlc2VudGVkIHVzaW5nIGEgc2luZ2xlIHRlc3QgcmVzdWx0IHJlc291cmNlLiBOb3RlIHRoYXQgdGhlcmUgYXJlIGFsc28gY2FzZXMgd2hlcmUgb25lIHJlcXVlc3QgbGVhZHMgdG8gbXVsdGlwbGUgcmVwb3J0cy5cclxuICAgKi9cclxuICBwdWJsaWMgYmFzZWRPbjogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBUaGUgc3RhdHVzIG9mIHRoZSBkaWFnbm9zdGljIHJlcG9ydC5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPERpYWdub3N0aWNSZXBvcnRTdGF0dXNDb2RlVHlwZT58bnVsbDtcclxuICAvKipcclxuICAgKiBNdWx0aXBsZSBjYXRlZ29yaWVzIGFyZSBhbGxvd2VkIHVzaW5nIHZhcmlvdXMgY2F0ZWdvcml6YXRpb24gc2NoZW1lcy4gICBUaGUgbGV2ZWwgb2YgZ3JhbnVsYXJpdHkgaXMgZGVmaW5lZCBieSB0aGUgY2F0ZWdvcnkgY29uY2VwdHMgaW4gdGhlIHZhbHVlIHNldC4gTW9yZSBmaW5lLWdyYWluZWQgZmlsdGVyaW5nIGNhbiBiZSBwZXJmb3JtZWQgdXNpbmcgdGhlIG1ldGFkYXRhIGFuZC9vciB0ZXJtaW5vbG9neSBoaWVyYXJjaHkgaW4gRGlhZ25vc3RpY1JlcG9ydC5jb2RlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjYXRlZ29yeTogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBBIGNvZGUgb3IgbmFtZSB0aGF0IGRlc2NyaWJlcyB0aGlzIGRpYWdub3N0aWMgcmVwb3J0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb2RlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzdWJqZWN0IG9mIHRoZSByZXBvcnQuIFVzdWFsbHksIGJ1dCBub3QgYWx3YXlzLCB0aGlzIGlzIGEgcGF0aWVudC4gSG93ZXZlciwgZGlhZ25vc3RpYyBzZXJ2aWNlcyBhbHNvIHBlcmZvcm0gYW5hbHlzZXMgb24gc3BlY2ltZW5zIGNvbGxlY3RlZCBmcm9tIGEgdmFyaWV0eSBvZiBvdGhlciBzb3VyY2VzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdWJqZWN0PzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgd2lsbCB0eXBpY2FsbHkgYmUgdGhlIGVuY291bnRlciB0aGUgZXZlbnQgb2NjdXJyZWQgd2l0aGluLCBidXQgc29tZSBldmVudHMgbWF5IGJlIGluaXRpYXRlZCBwcmlvciB0byBvciBhZnRlciB0aGUgb2ZmaWNpYWwgY29tcGxldGlvbiBvZiBhbiBlbmNvdW50ZXIgIGJ1dCBzdGlsbCBiZSB0aWVkIHRvIHRoZSBjb250ZXh0IG9mIHRoZSBlbmNvdW50ZXIgIChlLmcuIHByZS1hZG1pc3Npb24gbGFib3JhdG9yeSB0ZXN0cykuXHJcbiAgICovXHJcbiAgcHVibGljIGVuY291bnRlcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiB0aGUgZGlhZ25vc3RpYyBwcm9jZWR1cmUgd2FzIHBlcmZvcm1lZCBvbiB0aGUgcGF0aWVudCwgdGhpcyBpcyB0aGUgdGltZSBpdCB3YXMgcGVyZm9ybWVkLiBJZiB0aGVyZSBhcmUgc3BlY2ltZW5zLCB0aGUgZGlhZ25vc3RpY2FsbHkgcmVsZXZhbnQgdGltZSBjYW4gYmUgZGVyaXZlZCBmcm9tIHRoZSBzcGVjaW1lbiBjb2xsZWN0aW9uIHRpbWVzLCBidXQgdGhlIHNwZWNpbWVuIGluZm9ybWF0aW9uIGlzIG5vdCBhbHdheXMgYXZhaWxhYmxlLCBhbmQgdGhlIGV4YWN0IHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHRoZSBzcGVjaW1lbnMgYW5kIHRoZSBkaWFnbm9zdGljYWxseSByZWxldmFudCB0aW1lIGlzIG5vdCBhbHdheXMgYXV0b21hdGljLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBlZmZlY3RpdmU/OiAoZmhpci5GaGlyRGF0ZVRpbWV8Zmhpci5QZXJpb2QpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IERpYWdub3N0aWNSZXBvcnQuZWZmZWN0aXZlW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX2VmZmVjdGl2ZUlzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIE1heSBiZSBkaWZmZXJlbnQgZnJvbSB0aGUgdXBkYXRlIHRpbWUgb2YgdGhlIHJlc291cmNlIGl0c2VsZiwgYmVjYXVzZSB0aGF0IGlzIHRoZSBzdGF0dXMgb2YgdGhlIHJlY29yZCAocG90ZW50aWFsbHkgYSBzZWNvbmRhcnkgY29weSksIG5vdCB0aGUgYWN0dWFsIHJlbGVhc2UgdGltZSBvZiB0aGUgcmVwb3J0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpc3N1ZWQ/OiBmaGlyLkZoaXJJbnN0YW50fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGlzIG5vdCBuZWNlc3NhcmlseSB0aGUgc291cmNlIG9mIHRoZSBhdG9taWMgZGF0YSBpdGVtcyBvciB0aGUgZW50aXR5IHRoYXQgaW50ZXJwcmV0ZWQgdGhlIHJlc3VsdHMuIEl0IGlzIHRoZSBlbnRpdHkgdGhhdCB0YWtlcyByZXNwb25zaWJpbGl0eSBmb3IgdGhlIGNsaW5pY2FsIHJlcG9ydC5cclxuICAgKi9cclxuICBwdWJsaWMgcGVyZm9ybWVyOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIE1pZ2h0IG5vdCBiZSB0aGUgc2FtZSBlbnRpdHkgdGhhdCB0YWtlcyByZXNwb25zaWJpbGl0eSBmb3IgdGhlIGNsaW5pY2FsIHJlcG9ydC5cclxuICAgKi9cclxuICBwdWJsaWMgcmVzdWx0c0ludGVycHJldGVyOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIElmIHRoZSBzcGVjaW1lbiBpcyBzdWZmaWNpZW50bHkgc3BlY2lmaWVkIHdpdGggYSBjb2RlIGluIHRoZSB0ZXN0IHJlc3VsdCBuYW1lLCB0aGVuIHRoaXMgYWRkaXRpb25hbCBkYXRhIG1heSBiZSByZWR1bmRhbnQuIElmIHRoZXJlIGFyZSBtdWx0aXBsZSBzcGVjaW1lbnMsIHRoZXNlIG1heSBiZSByZXByZXNlbnRlZCBwZXIgb2JzZXJ2YXRpb24gb3IgZ3JvdXAuXHJcbiAgICovXHJcbiAgcHVibGljIHNwZWNpbWVuOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIE9ic2VydmF0aW9ucyBjYW4gY29udGFpbiBvYnNlcnZhdGlvbnMuXHJcbiAgICovXHJcbiAgcHVibGljIHJlc3VsdDogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBJbWFnaW5nU3R1ZHkgYW5kIHRoZSBpbWFnZSBlbGVtZW50IGFyZSBzb21ld2hhdCBvdmVybGFwcGluZyAtIHR5cGljYWxseSwgdGhlIGxpc3Qgb2YgaW1hZ2UgcmVmZXJlbmNlcyBpbiB0aGUgaW1hZ2UgZWxlbWVudCB3aWxsIGFsc28gYmUgZm91bmQgaW4gb25lIG9mIHRoZSBpbWFnaW5nIHN0dWR5IHJlc291cmNlcy4gSG93ZXZlciwgZWFjaCBjYXRlcnMgdG8gZGlmZmVyZW50IHR5cGVzIG9mIGRpc3BsYXlzIGZvciBkaWZmZXJlbnQgdHlwZXMgb2YgcHVycG9zZXMuIE5laXRoZXIsIGVpdGhlciwgb3IgYm90aCBtYXkgYmUgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGltYWdpbmdTdHVkeTogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBBIGxpc3Qgb2Yga2V5IGltYWdlcyBhc3NvY2lhdGVkIHdpdGggdGhpcyByZXBvcnQuIFRoZSBpbWFnZXMgYXJlIGdlbmVyYWxseSBjcmVhdGVkIGR1cmluZyB0aGUgZGlhZ25vc3RpYyBwcm9jZXNzLCBhbmQgbWF5IGJlIGRpcmVjdGx5IG9mIHRoZSBwYXRpZW50LCBvciBvZiB0cmVhdGVkIHNwZWNpbWVucyAoaS5lLiBzbGlkZXMgb2YgaW50ZXJlc3QpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtZWRpYTogZmhpci5EaWFnbm9zdGljUmVwb3J0TWVkaWFbXTtcclxuICAvKipcclxuICAgKiBDb25jaXNlIGFuZCBjbGluaWNhbGx5IGNvbnRleHR1YWxpemVkIHN1bW1hcnkgY29uY2x1c2lvbiAoaW50ZXJwcmV0YXRpb24vaW1wcmVzc2lvbikgb2YgdGhlIGRpYWdub3N0aWMgcmVwb3J0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25jbHVzaW9uPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBPbmUgb3IgbW9yZSBjb2RlcyB0aGF0IHJlcHJlc2VudCB0aGUgc3VtbWFyeSBjb25jbHVzaW9uIChpbnRlcnByZXRhdGlvbi9pbXByZXNzaW9uKSBvZiB0aGUgZGlhZ25vc3RpYyByZXBvcnQuXHJcbiAgICovXHJcbiAgcHVibGljIGNvbmNsdXNpb25Db2RlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIFwiYXBwbGljYXRpb24vcGRmXCIgaXMgcmVjb21tZW5kZWQgYXMgdGhlIG1vc3QgcmVsaWFibGUgYW5kIGludGVyb3BlcmFibGUgaW4gdGhpcyBjb250ZXh0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcmVzZW50ZWRGb3JtOiBmaGlyLkF0dGFjaG1lbnRbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBEaWFnbm9zdGljUmVwb3J0IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8RGlhZ25vc3RpY1JlcG9ydEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdEaWFnbm9zdGljUmVwb3J0JztcclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBzb3VyY2UuaWRlbnRpZmllci5tYXAoKHgpID0+IG5ldyBmaGlyLklkZW50aWZpZXIoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pZGVudGlmaWVyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2Jhc2VkT24nXSkgeyB0aGlzLmJhc2VkT24gPSBzb3VyY2UuYmFzZWRPbi5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmJhc2VkT24gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RhdHVzJ10pIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxEaWFnbm9zdGljUmVwb3J0U3RhdHVzQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnN0YXR1c30pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydjYXRlZ29yeSddKSB7IHRoaXMuY2F0ZWdvcnkgPSBzb3VyY2UuY2F0ZWdvcnkubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jYXRlZ29yeSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jb2RlKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY29kZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N1YmplY3QnXSkgeyB0aGlzLnN1YmplY3QgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnN1YmplY3QpOyB9XHJcbiAgICBpZiAoc291cmNlWydlbmNvdW50ZXInXSkgeyB0aGlzLmVuY291bnRlciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuZW5jb3VudGVyKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZWZmZWN0aXZlJ10pIHsgdGhpcy5lZmZlY3RpdmUgPSBzb3VyY2UuZWZmZWN0aXZlOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2VmZmVjdGl2ZURhdGVUaW1lJ10pIHsgdGhpcy5lZmZlY3RpdmUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2UuZWZmZWN0aXZlRGF0ZVRpbWV9KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydlZmZlY3RpdmVQZXJpb2QnXSkgeyB0aGlzLmVmZmVjdGl2ZSA9IG5ldyBmaGlyLlBlcmlvZChzb3VyY2UuZWZmZWN0aXZlUGVyaW9kKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaXNzdWVkJ10pIHsgdGhpcy5pc3N1ZWQgPSBuZXcgZmhpci5GaGlySW5zdGFudCh7dmFsdWU6IHNvdXJjZS5pc3N1ZWR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncGVyZm9ybWVyJ10pIHsgdGhpcy5wZXJmb3JtZXIgPSBzb3VyY2UucGVyZm9ybWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucGVyZm9ybWVyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3Jlc3VsdHNJbnRlcnByZXRlciddKSB7IHRoaXMucmVzdWx0c0ludGVycHJldGVyID0gc291cmNlLnJlc3VsdHNJbnRlcnByZXRlci5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnJlc3VsdHNJbnRlcnByZXRlciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydzcGVjaW1lbiddKSB7IHRoaXMuc3BlY2ltZW4gPSBzb3VyY2Uuc3BlY2ltZW4ubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zcGVjaW1lbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydyZXN1bHQnXSkgeyB0aGlzLnJlc3VsdCA9IHNvdXJjZS5yZXN1bHQubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZXN1bHQgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaW1hZ2luZ1N0dWR5J10pIHsgdGhpcy5pbWFnaW5nU3R1ZHkgPSBzb3VyY2UuaW1hZ2luZ1N0dWR5Lm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaW1hZ2luZ1N0dWR5ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ21lZGlhJ10pIHsgdGhpcy5tZWRpYSA9IHNvdXJjZS5tZWRpYS5tYXAoKHgpID0+IG5ldyBmaGlyLkRpYWdub3N0aWNSZXBvcnRNZWRpYSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm1lZGlhID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvbmNsdXNpb24nXSkgeyB0aGlzLmNvbmNsdXNpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmNvbmNsdXNpb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29uY2x1c2lvbkNvZGUnXSkgeyB0aGlzLmNvbmNsdXNpb25Db2RlID0gc291cmNlLmNvbmNsdXNpb25Db2RlLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY29uY2x1c2lvbkNvZGUgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJlc2VudGVkRm9ybSddKSB7IHRoaXMucHJlc2VudGVkRm9ybSA9IHNvdXJjZS5wcmVzZW50ZWRGb3JtLm1hcCgoeCkgPT4gbmV3IGZoaXIuQXR0YWNobWVudCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnByZXNlbnRlZEZvcm0gPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIHN0YXR1cyAoRGlhZ25vc3RpY1JlcG9ydC5zdGF0dXMpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgc3RhdHVzUmVxdWlyZWRDb2RlcygpIHtcclxuICAgIHJldHVybiBEaWFnbm9zdGljUmVwb3J0U3RhdHVzQ29kZXM7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFByZWZlcnJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIGNvZGUgKERpYWdub3N0aWNSZXBvcnQuY29kZSlcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCBjb2RlUHJlZmVycmVkQ29kaW5ncygpIHtcclxuICAgIHJldHVybiBSZXBvcnRDb2Rlc0NvZGluZ3M7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAoIXRoaXNbJ3Jlc291cmNlVHlwZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSByZXNvdXJjZVR5cGU6XCJEaWFnbm9zdGljUmVwb3J0XCIgZmhpcjogRGlhZ25vc3RpY1JlcG9ydC5yZXNvdXJjZVR5cGU6XCJEaWFnbm9zdGljUmVwb3J0XCInIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJpZGVudGlmaWVyXCJdKSB7IHRoaXMuaWRlbnRpZmllci5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wiYmFzZWRPblwiXSkgeyB0aGlzLmJhc2VkT24uZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAoIXRoaXNbJ3N0YXR1cyddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBzdGF0dXM6Zmhpci5GaGlyQ29kZTxEaWFnbm9zdGljUmVwb3J0U3RhdHVzQ29kZVR5cGU+IGZoaXI6IERpYWdub3N0aWNSZXBvcnQuc3RhdHVzOmNvZGUnIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbJ3N0YXR1cyddICYmICghT2JqZWN0LnZhbHVlcyhEaWFnbm9zdGljUmVwb3J0U3RhdHVzQ29kZXMpLmluY2x1ZGVzKHRoaXMuc3RhdHVzIGFzIGFueSkpKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdjb2RlLWludmFsaWQnLCBkaWFnbm9zdGljczogJ0ludmFsaWQgY29kZSBwcm9wZXJ0eSBzdGF0dXM6Zmhpci5GaGlyQ29kZTxEaWFnbm9zdGljUmVwb3J0U3RhdHVzQ29kZVR5cGU+IGZoaXI6IERpYWdub3N0aWNSZXBvcnQuc3RhdHVzOmNvZGUgUmVxdWlyZWQgYmluZGluZyB0bzogRGlhZ25vc3RpY1JlcG9ydFN0YXR1cycgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInN0YXR1c1wiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnN0YXR1cy5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJjYXRlZ29yeVwiXSkgeyB0aGlzLmNhdGVnb3J5LmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKCF0aGlzWydjb2RlJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IGNvZGU6Zmhpci5Db2RlYWJsZUNvbmNlcHQgZmhpcjogRGlhZ25vc3RpY1JlcG9ydC5jb2RlOkNvZGVhYmxlQ29uY2VwdCcgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImNvZGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5jb2RlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInN1YmplY3RcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5zdWJqZWN0LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImVuY291bnRlclwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmVuY291bnRlci5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJpc3N1ZWRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5pc3N1ZWQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wicGVyZm9ybWVyXCJdKSB7IHRoaXMucGVyZm9ybWVyLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJyZXN1bHRzSW50ZXJwcmV0ZXJcIl0pIHsgdGhpcy5yZXN1bHRzSW50ZXJwcmV0ZXIuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcInNwZWNpbWVuXCJdKSB7IHRoaXMuc3BlY2ltZW4uZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcInJlc3VsdFwiXSkgeyB0aGlzLnJlc3VsdC5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wiaW1hZ2luZ1N0dWR5XCJdKSB7IHRoaXMuaW1hZ2luZ1N0dWR5LmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJtZWRpYVwiXSkgeyB0aGlzLm1lZGlhLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJjb25jbHVzaW9uXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY29uY2x1c2lvbi5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJjb25jbHVzaW9uQ29kZVwiXSkgeyB0aGlzLmNvbmNsdXNpb25Db2RlLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJwcmVzZW50ZWRGb3JtXCJdKSB7IHRoaXMucHJlc2VudGVkRm9ybS5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbiJdfQ==