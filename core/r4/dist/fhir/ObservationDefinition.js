// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: ObservationDefinition
import * as fhir from '../fhir.js';
// @ts-ignore
import { UcumUnitsCodings, } from '../fhirValueSets/UcumUnitsCodings.js';
// @ts-ignore
import { ObservationRangeCategoryCodes } from '../fhirValueSets/ObservationRangeCategoryCodes.js';
// @ts-ignore
import { ReferencerangeMeaningCodings, } from '../fhirValueSets/ReferencerangeMeaningCodings.js';
// @ts-ignore
import { AdministrativeGenderCodes } from '../fhirValueSets/AdministrativeGenderCodes.js';
// @ts-ignore
import { PermittedDataTypeCodes } from '../fhirValueSets/PermittedDataTypeCodes.js';
/**
 * Characteristics for quantitative results of this observation.
 */
export class ObservationDefinitionQuantitativeDetails extends fhir.BackboneElement {
    /**
     * Default constructor for ObservationDefinitionQuantitativeDetails - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['customaryUnit']) {
            this.customaryUnit = new fhir.CodeableConcept(source.customaryUnit);
        }
        if (source['unit']) {
            this.unit = new fhir.CodeableConcept(source.unit);
        }
        if (source['conversionFactor']) {
            this.conversionFactor = new fhir.FhirDecimal({ value: source.conversionFactor });
        }
        if (source['_conversionFactor']) {
            if (this.conversionFactor) {
                this.conversionFactor.addExtendedProperties(source._conversionFactor);
            }
            else {
                this.conversionFactor = new fhir.FhirDecimal(source._conversionFactor);
            }
        }
        if (source['decimalPrecision']) {
            this.decimalPrecision = new fhir.FhirInteger({ value: source.decimalPrecision });
        }
        if (source['_decimalPrecision']) {
            if (this.decimalPrecision) {
                this.decimalPrecision.addExtendedProperties(source._decimalPrecision);
            }
            else {
                this.decimalPrecision = new fhir.FhirInteger(source._decimalPrecision);
            }
        }
    }
    /**
     * Extensible-bound Value Set for customaryUnit (ObservationDefinition.quantitativeDetails.customaryUnit)
     */
    static get customaryUnitExtensibleCodings() {
        return UcumUnitsCodings;
    }
    /**
     * Extensible-bound Value Set for unit (ObservationDefinition.quantitativeDetails.unit)
     */
    static get unitExtensibleCodings() {
        return UcumUnitsCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["customaryUnit"]) {
            issues.push(...this.customaryUnit.doModelValidation());
        }
        if (this["unit"]) {
            issues.push(...this.unit.doModelValidation());
        }
        if (this["conversionFactor"]) {
            issues.push(...this.conversionFactor.doModelValidation());
        }
        if (this["decimalPrecision"]) {
            issues.push(...this.decimalPrecision.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ObservationDefinitionQuantitativeDetails._fts_dataType = 'ObservationDefinitionQuantitativeDetails';
/**
 * Multiple  ranges of results qualified by different contexts for ordinal or continuous observations conforming to this ObservationDefinition.
 */
export class ObservationDefinitionQualifiedInterval extends fhir.BackboneElement {
    /**
     * Default constructor for ObservationDefinitionQualifiedInterval - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['category']) {
            this.category = new fhir.FhirCode({ value: source.category });
        }
        if (source['_category']) {
            if (this.category) {
                this.category.addExtendedProperties(source._category);
            }
            else {
                this.category = new fhir.FhirCode(source._category);
            }
        }
        if (source['range']) {
            this.range = new fhir.Range(source.range);
        }
        if (source['context']) {
            this.context = new fhir.CodeableConcept(source.context);
        }
        if (source['appliesTo']) {
            this.appliesTo = source.appliesTo.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.appliesTo = [];
        }
        if (source['gender']) {
            this.gender = new fhir.FhirCode({ value: source.gender });
        }
        if (source['_gender']) {
            if (this.gender) {
                this.gender.addExtendedProperties(source._gender);
            }
            else {
                this.gender = new fhir.FhirCode(source._gender);
            }
        }
        if (source['age']) {
            this.age = new fhir.Range(source.age);
        }
        if (source['gestationalAge']) {
            this.gestationalAge = new fhir.Range(source.gestationalAge);
        }
        if (source['condition']) {
            this.condition = new fhir.FhirString({ value: source.condition });
        }
        if (source['_condition']) {
            if (this.condition) {
                this.condition.addExtendedProperties(source._condition);
            }
            else {
                this.condition = new fhir.FhirString(source._condition);
            }
        }
    }
    /**
     * Required-bound Value Set for category (ObservationDefinition.qualifiedInterval.category)
     */
    static get categoryRequiredCodes() {
        return ObservationRangeCategoryCodes;
    }
    /**
     * Extensible-bound Value Set for context (ObservationDefinition.qualifiedInterval.context)
     */
    static get contextExtensibleCodings() {
        return ReferencerangeMeaningCodings;
    }
    /**
     * Required-bound Value Set for gender (ObservationDefinition.qualifiedInterval.gender)
     */
    static get genderRequiredCodes() {
        return AdministrativeGenderCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this['category'] && (!Object.values(ObservationRangeCategoryCodes).includes(this.category))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property category?:fhir.FhirCode<ObservationRangeCategoryCodeType> fhir: ObservationDefinition.qualifiedInterval.category:code Required binding to: ObservationRangeCategory' });
        }
        if (this["category"]) {
            issues.push(...this.category.doModelValidation());
        }
        if (this["range"]) {
            issues.push(...this.range.doModelValidation());
        }
        if (this["context"]) {
            issues.push(...this.context.doModelValidation());
        }
        if (this["appliesTo"]) {
            this.appliesTo.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this['gender'] && (!Object.values(AdministrativeGenderCodes).includes(this.gender))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property gender?:fhir.FhirCode<AdministrativeGenderCodeType> fhir: ObservationDefinition.qualifiedInterval.gender:code Required binding to: AdministrativeGender' });
        }
        if (this["gender"]) {
            issues.push(...this.gender.doModelValidation());
        }
        if (this["age"]) {
            issues.push(...this.age.doModelValidation());
        }
        if (this["gestationalAge"]) {
            issues.push(...this.gestationalAge.doModelValidation());
        }
        if (this["condition"]) {
            issues.push(...this.condition.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ObservationDefinitionQualifiedInterval._fts_dataType = 'ObservationDefinitionQualifiedInterval';
/**
 * Set of definitional characteristics for a kind of observation or measurement produced or consumed by an orderable health care service.
 */
export class ObservationDefinition extends fhir.DomainResource {
    /**
     * Default constructor for ObservationDefinition - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'ObservationDefinition';
        if (source['category']) {
            this.category = source.category.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.category = [];
        }
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        else {
            this.code = null;
        }
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['permittedDataType']) {
            this.permittedDataType = source.permittedDataType.map((x) => new fhir.FhirCode({ value: x }));
        }
        else {
            this.permittedDataType = [];
        }
        if (source['_permittedDataType']) {
            source._permittedDataType.forEach((x, i) => {
                if (this.permittedDataType.length >= i) {
                    if (x) {
                        this.permittedDataType[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.permittedDataType.push(new fhir.FhirCode(x));
                    }
                }
            });
        }
        if (source['multipleResultsAllowed']) {
            this.multipleResultsAllowed = new fhir.FhirBoolean({ value: source.multipleResultsAllowed });
        }
        if (source['_multipleResultsAllowed']) {
            if (this.multipleResultsAllowed) {
                this.multipleResultsAllowed.addExtendedProperties(source._multipleResultsAllowed);
            }
            else {
                this.multipleResultsAllowed = new fhir.FhirBoolean(source._multipleResultsAllowed);
            }
        }
        if (source['method']) {
            this.method = new fhir.CodeableConcept(source.method);
        }
        if (source['preferredReportName']) {
            this.preferredReportName = new fhir.FhirString({ value: source.preferredReportName });
        }
        if (source['_preferredReportName']) {
            if (this.preferredReportName) {
                this.preferredReportName.addExtendedProperties(source._preferredReportName);
            }
            else {
                this.preferredReportName = new fhir.FhirString(source._preferredReportName);
            }
        }
        if (source['quantitativeDetails']) {
            this.quantitativeDetails = new fhir.ObservationDefinitionQuantitativeDetails(source.quantitativeDetails);
        }
        if (source['qualifiedInterval']) {
            this.qualifiedInterval = source.qualifiedInterval.map((x) => new fhir.ObservationDefinitionQualifiedInterval(x));
        }
        else {
            this.qualifiedInterval = [];
        }
        if (source['validCodedValueSet']) {
            this.validCodedValueSet = new fhir.Reference(source.validCodedValueSet);
        }
        if (source['normalCodedValueSet']) {
            this.normalCodedValueSet = new fhir.Reference(source.normalCodedValueSet);
        }
        if (source['abnormalCodedValueSet']) {
            this.abnormalCodedValueSet = new fhir.Reference(source.abnormalCodedValueSet);
        }
        if (source['criticalCodedValueSet']) {
            this.criticalCodedValueSet = new fhir.Reference(source.criticalCodedValueSet);
        }
    }
    /**
     * Required-bound Value Set for permittedDataType (ObservationDefinition.permittedDataType)
     */
    static get permittedDataTypeRequiredCodes() {
        return PermittedDataTypeCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType:"ObservationDefinition" fhir: ObservationDefinition.resourceType:"ObservationDefinition"' });
        }
        if (this["category"]) {
            this.category.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (!this['code']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property code:fhir.CodeableConcept fhir: ObservationDefinition.code:CodeableConcept' });
        }
        if (this["code"]) {
            issues.push(...this.code.doModelValidation());
        }
        if (this["identifier"]) {
            this.identifier.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this['permittedDataType']) {
            this.permittedDataType.forEach((v) => {
                if (!Object.values(PermittedDataTypeCodes).includes(v)) {
                    issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property permittedDataType?:fhir.FhirCode<PermittedDataTypeCodeType>[] fhir: ObservationDefinition.permittedDataType:code Required binding to: PermittedDataType' });
                }
            });
        }
        if (this["permittedDataType"]) {
            this.permittedDataType.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["multipleResultsAllowed"]) {
            issues.push(...this.multipleResultsAllowed.doModelValidation());
        }
        if (this["method"]) {
            issues.push(...this.method.doModelValidation());
        }
        if (this["preferredReportName"]) {
            issues.push(...this.preferredReportName.doModelValidation());
        }
        if (this["quantitativeDetails"]) {
            issues.push(...this.quantitativeDetails.doModelValidation());
        }
        if (this["qualifiedInterval"]) {
            this.qualifiedInterval.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["validCodedValueSet"]) {
            issues.push(...this.validCodedValueSet.doModelValidation());
        }
        if (this["normalCodedValueSet"]) {
            issues.push(...this.normalCodedValueSet.doModelValidation());
        }
        if (this["abnormalCodedValueSet"]) {
            issues.push(...this.abnormalCodedValueSet.doModelValidation());
        }
        if (this["criticalCodedValueSet"]) {
            issues.push(...this.criticalCodedValueSet.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ObservationDefinition._fts_dataType = 'ObservationDefinition';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT2JzZXJ2YXRpb25EZWZpbml0aW9uLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9PYnNlcnZhdGlvbkRlZmluaXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsdUNBQXVDO0FBRXZDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBRW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsZ0JBQWdCLEdBQXVCLE1BQU0sc0NBQXNDLENBQUM7QUFLN0YsYUFBYTtBQUNiLE9BQU8sRUFBRSw2QkFBNkIsRUFBcUMsTUFBTSxtREFBbUQsQ0FBQztBQUNySSxhQUFhO0FBQ2IsT0FBTyxFQUFFLDRCQUE0QixHQUFtQyxNQUFNLGtEQUFrRCxDQUFDO0FBU2pJLGFBQWE7QUFDYixPQUFPLEVBQUUseUJBQXlCLEVBQWlDLE1BQU0sK0NBQStDLENBQUM7QUFXekgsYUFBYTtBQUNiLE9BQU8sRUFBRSxzQkFBc0IsRUFBOEIsTUFBTSw0Q0FBNEMsQ0FBQztBQW1DaEg7O0dBRUc7QUFDSCxNQUFNLE9BQU8sd0NBQXlDLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFxQmhGOztPQUVHO0lBQ0gsWUFBWSxTQUErRCxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUNySCxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLGVBQWUsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1NBQUU7UUFDckcsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7U0FBRTtRQUMxRSxJQUFJLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsZ0JBQWdCLEVBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDbkgsSUFBSSxNQUFNLENBQUMsbUJBQW1CLENBQUMsRUFBRTtZQUMvQixJQUFJLElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtnQkFBRSxJQUFJLENBQUMsZ0JBQWdCLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLGlCQUFrQixDQUFDLENBQUM7YUFBRTtpQkFDakc7Z0JBQUUsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsaUJBQWtELENBQUMsQ0FBQzthQUFFO1NBQ2xIO1FBQ0QsSUFBSSxNQUFNLENBQUMsa0JBQWtCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLGdCQUFnQixFQUFDLENBQUMsQ0FBQztTQUFFO1FBQ25ILElBQUksTUFBTSxDQUFDLG1CQUFtQixDQUFDLEVBQUU7WUFDL0IsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLEVBQUU7Z0JBQUUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxpQkFBa0IsQ0FBQyxDQUFDO2FBQUU7aUJBQ2pHO2dCQUFFLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLGlCQUFrRCxDQUFDLENBQUM7YUFBRTtTQUNsSDtJQUNILENBQUM7SUFDRDs7T0FFRztJQUNJLE1BQU0sS0FBSyw4QkFBOEI7UUFDOUMsT0FBTyxnQkFBZ0IsQ0FBQztJQUMxQixDQUFDO0lBQ0Q7O09BRUc7SUFDSSxNQUFNLEtBQUsscUJBQXFCO1FBQ3JDLE9BQU8sZ0JBQWdCLENBQUM7SUFDMUIsQ0FBQztJQUNEOztPQUVHO0lBQ2EsaUJBQWlCO1FBQy9CLElBQUksTUFBTSxHQUFtQixLQUFLLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUN2RCxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQ3RGLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFDcEUsSUFBSSxJQUFJLENBQUMsa0JBQWtCLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFDNUYsSUFBSSxJQUFJLENBQUMsa0JBQWtCLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFDNUYsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQzs7QUE1REQ7O0dBRUc7QUFDNkIsc0RBQWEsR0FBVSwwQ0FBMEMsQ0FBQztBQTZHcEc7O0dBRUc7QUFDSCxNQUFNLE9BQU8sc0NBQXVDLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFxQzlFOztPQUVHO0lBQ0gsWUFBWSxTQUE2RCxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUNuSCxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQW1DLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxRQUFRLEVBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDMUgsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLEVBQUU7WUFDdkIsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO2dCQUFFLElBQUksQ0FBQyxRQUFRLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLFNBQVUsQ0FBQyxDQUFDO2FBQUU7aUJBQ3pFO2dCQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFtQyxNQUFNLENBQUMsU0FBbUMsQ0FBQyxDQUFDO2FBQUU7U0FDMUg7UUFDRCxJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUFFO1FBQ25FLElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1NBQUU7UUFDbkYsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsU0FBUyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQ2xHO1lBQUUsSUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7U0FBRTtRQUM3QixJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUErQixFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsTUFBTSxFQUFDLENBQUMsQ0FBQztTQUFFO1FBQ2hILElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQ3JCLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtnQkFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxPQUFRLENBQUMsQ0FBQzthQUFFO2lCQUNuRTtnQkFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBK0IsTUFBTSxDQUFDLE9BQWlDLENBQUMsQ0FBQzthQUFFO1NBQ2xIO1FBQ0QsSUFBSSxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7U0FBRTtRQUM3RCxJQUFJLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1NBQUU7UUFDOUYsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsU0FBUyxFQUFDLENBQUMsQ0FBQztTQUFFO1FBQzdGLElBQUksTUFBTSxDQUFDLFlBQVksQ0FBQyxFQUFFO1lBQ3hCLElBQUksSUFBSSxDQUFDLFNBQVMsRUFBRTtnQkFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxVQUFXLENBQUMsQ0FBQzthQUFFO2lCQUM1RTtnQkFBRSxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsVUFBMEMsQ0FBQyxDQUFDO2FBQUU7U0FDbEc7SUFDSCxDQUFDO0lBQ0Q7O09BRUc7SUFDSSxNQUFNLEtBQUsscUJBQXFCO1FBQ3JDLE9BQU8sNkJBQTZCLENBQUM7SUFDdkMsQ0FBQztJQUNEOztPQUVHO0lBQ0ksTUFBTSxLQUFLLHdCQUF3QjtRQUN4QyxPQUFPLDRCQUE0QixDQUFDO0lBQ3RDLENBQUM7SUFDRDs7T0FFRztJQUNJLE1BQU0sS0FBSyxtQkFBbUI7UUFDbkMsT0FBTyx5QkFBeUIsQ0FBQztJQUNuQyxDQUFDO0lBQ0Q7O09BRUc7SUFDYSxpQkFBaUI7UUFDL0IsSUFBSSxNQUFNLEdBQW1CLEtBQUssQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQ3ZELElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLDZCQUE2QixDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFlLENBQUMsQ0FBQyxFQUFFO1lBQ3RHLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxjQUFjLEVBQUUsV0FBVyxFQUFFLDJMQUEyTCxFQUFFLENBQUMsQ0FBQztTQUNwUTtRQUNELElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFDNUUsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUN0RSxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQzFFLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7U0FBRTtRQUNwRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBYSxDQUFDLENBQUMsRUFBRTtZQUM5RixNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsY0FBYyxFQUFFLFdBQVcsRUFBRSwrS0FBK0ssRUFBRSxDQUFDLENBQUM7U0FDeFA7UUFDRCxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQ3hFLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFDbEUsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQ3hGLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFDOUUsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQzs7QUFyR0Q7O0dBRUc7QUFDNkIsb0RBQWEsR0FBVSx3Q0FBd0MsQ0FBQztBQThLbEc7O0dBRUc7QUFDSCxNQUFNLE9BQU8scUJBQXNCLFNBQVEsSUFBSSxDQUFDLGNBQWM7SUE2RDVEOztPQUVHO0lBQ0gsWUFBWSxTQUE0QyxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUNsRyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxZQUFZLEdBQUcsdUJBQXVCLENBQUM7UUFDNUMsSUFBSSxNQUFNLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQy9GO1lBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7U0FBRTtRQUM1QixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUFFO2FBQ3JFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7U0FBRTtRQUMxQixJQUFJLE1BQU0sQ0FBQyxZQUFZLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDaEc7WUFBRSxJQUFJLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQztTQUFFO1FBQzlCLElBQUksTUFBTSxDQUFDLG1CQUFtQixDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsaUJBQWlCLEdBQUcsTUFBTSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUE0QixFQUFDLEtBQUssRUFBRSxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUN2SjtZQUFFLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxFQUFFLENBQUM7U0FBRTtRQUNyQyxJQUFJLE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxFQUFFO1lBQ2hDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUU7Z0JBQ3hDLElBQUksSUFBSSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7b0JBQUUsSUFBSSxDQUFDLEVBQUU7d0JBQUUsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFDLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxDQUFDO3FCQUFFO2lCQUFFO3FCQUNyRztvQkFBRSxJQUFJLENBQUMsRUFBRTt3QkFBRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBNEIsQ0FBMkIsQ0FBQyxDQUFDLENBQUM7cUJBQUU7aUJBQUU7WUFDN0gsQ0FBQyxDQUFDLENBQUM7U0FDSjtRQUNELElBQUksTUFBTSxDQUFDLHdCQUF3QixDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsc0JBQXNCLEdBQUcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxzQkFBc0IsRUFBQyxDQUFDLENBQUM7U0FBRTtRQUNySSxJQUFJLE1BQU0sQ0FBQyx5QkFBeUIsQ0FBQyxFQUFFO1lBQ3JDLElBQUksSUFBSSxDQUFDLHNCQUFzQixFQUFFO2dCQUFFLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsdUJBQXdCLENBQUMsQ0FBQzthQUFFO2lCQUNuSDtnQkFBRSxJQUFJLENBQUMsc0JBQXNCLEdBQUcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyx1QkFBd0QsQ0FBQyxDQUFDO2FBQUU7U0FDOUg7UUFDRCxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUFFO1FBQ2hGLElBQUksTUFBTSxDQUFDLHFCQUFxQixDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsbUJBQW1CLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxtQkFBbUIsRUFBQyxDQUFDLENBQUM7U0FBRTtRQUMzSCxJQUFJLE1BQU0sQ0FBQyxzQkFBc0IsQ0FBQyxFQUFFO1lBQ2xDLElBQUksSUFBSSxDQUFDLG1CQUFtQixFQUFFO2dCQUFFLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsb0JBQXFCLENBQUMsQ0FBQzthQUFFO2lCQUMxRztnQkFBRSxJQUFJLENBQUMsbUJBQW1CLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxvQkFBb0QsQ0FBQyxDQUFDO2FBQUU7U0FDdEg7UUFDRCxJQUFJLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLG1CQUFtQixHQUFHLElBQUksSUFBSSxDQUFDLHdDQUF3QyxDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1NBQUU7UUFDaEosSUFBSSxNQUFNLENBQUMsbUJBQW1CLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxNQUFNLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxzQ0FBc0MsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDako7WUFBRSxJQUFJLENBQUMsaUJBQWlCLEdBQUcsRUFBRSxDQUFDO1NBQUU7UUFDckMsSUFBSSxNQUFNLENBQUMsb0JBQW9CLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLGtCQUFrQixDQUFDLENBQUM7U0FBRTtRQUM5RyxJQUFJLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLG1CQUFtQixHQUFHLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsbUJBQW1CLENBQUMsQ0FBQztTQUFFO1FBQ2pILElBQUksTUFBTSxDQUFDLHVCQUF1QixDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMscUJBQXFCLEdBQUcsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO1NBQUU7UUFDdkgsSUFBSSxNQUFNLENBQUMsdUJBQXVCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxxQkFBcUIsR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLHFCQUFxQixDQUFDLENBQUM7U0FBRTtJQUN6SCxDQUFDO0lBQ0Q7O09BRUc7SUFDSSxNQUFNLEtBQUssOEJBQThCO1FBQzlDLE9BQU8sc0JBQXNCLENBQUM7SUFDaEMsQ0FBQztJQUNEOztPQUVHO0lBQ2EsaUJBQWlCO1FBQy9CLElBQUksTUFBTSxHQUFtQixLQUFLLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUN2RCxJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxFQUFFO1lBQ3pCLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUFFLGlJQUFpSSxFQUFFLENBQUMsQ0FBQztTQUN0TTtRQUNELElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7U0FBRTtRQUNsRyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQ2pCLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUFFLHNHQUFzRyxFQUFFLENBQUMsQ0FBQztTQUMzSztRQUNELElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFDcEUsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtTQUFFO1FBQ3RHLElBQUksSUFBSSxDQUFDLG1CQUFtQixDQUFDLEVBQUU7WUFDN0IsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO2dCQUNuQyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFRLENBQUMsRUFBRTtvQkFDN0QsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLGNBQWMsRUFBRSxXQUFXLEVBQUUsK0tBQStLLEVBQUUsQ0FBQyxDQUFDO2lCQUN4UDtZQUNILENBQUMsQ0FBQyxDQUFDO1NBQ0o7UUFDRCxJQUFJLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtTQUFFO1FBQ3BILElBQUksSUFBSSxDQUFDLHdCQUF3QixDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLHNCQUFzQixDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQ3hHLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFDeEUsSUFBSSxJQUFJLENBQUMscUJBQXFCLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFDbEcsSUFBSSxJQUFJLENBQUMscUJBQXFCLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFDbEcsSUFBSSxJQUFJLENBQUMsbUJBQW1CLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7U0FBRTtRQUNwSCxJQUFJLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUNoRyxJQUFJLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUNsRyxJQUFJLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUN0RyxJQUFJLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxFQUFFO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUN0RyxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQXpJRDs7R0FFRztBQUM2QixtQ0FBYSxHQUFVLHVCQUF1QixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0LmNvcmUgdmVyc2lvbjogNC4wLjFcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBPYnNlcnZhdGlvbkRlZmluaXRpb25cclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFVjdW1Vbml0c0NvZGluZ3MsIFVjdW1Vbml0c0NvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1VjdW1Vbml0c0NvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFVjdW1Vbml0c0NvZGVzLCAgVWN1bVVuaXRzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1VjdW1Vbml0c0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBPYnNlcnZhdGlvblJhbmdlQ2F0ZWdvcnlDb2RpbmdzLCBPYnNlcnZhdGlvblJhbmdlQ2F0ZWdvcnlDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9PYnNlcnZhdGlvblJhbmdlQ2F0ZWdvcnlDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBPYnNlcnZhdGlvblJhbmdlQ2F0ZWdvcnlDb2RlcywgIE9ic2VydmF0aW9uUmFuZ2VDYXRlZ29yeUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9PYnNlcnZhdGlvblJhbmdlQ2F0ZWdvcnlDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUmVmZXJlbmNlcmFuZ2VNZWFuaW5nQ29kaW5ncywgUmVmZXJlbmNlcmFuZ2VNZWFuaW5nQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUmVmZXJlbmNlcmFuZ2VNZWFuaW5nQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUmVmZXJlbmNlcmFuZ2VNZWFuaW5nQ29kZXMsICBSZWZlcmVuY2VyYW5nZU1lYW5pbmdDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUmVmZXJlbmNlcmFuZ2VNZWFuaW5nQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFJlZmVyZW5jZXJhbmdlQXBwbGllc3RvQ29kaW5ncywgUmVmZXJlbmNlcmFuZ2VBcHBsaWVzdG9Db2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9SZWZlcmVuY2VyYW5nZUFwcGxpZXN0b0NvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFJlZmVyZW5jZXJhbmdlQXBwbGllc3RvQ29kZXMsICBSZWZlcmVuY2VyYW5nZUFwcGxpZXN0b0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9SZWZlcmVuY2VyYW5nZUFwcGxpZXN0b0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBBZG1pbmlzdHJhdGl2ZUdlbmRlckNvZGluZ3MsIEFkbWluaXN0cmF0aXZlR2VuZGVyQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQWRtaW5pc3RyYXRpdmVHZW5kZXJDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBBZG1pbmlzdHJhdGl2ZUdlbmRlckNvZGVzLCAgQWRtaW5pc3RyYXRpdmVHZW5kZXJDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQWRtaW5pc3RyYXRpdmVHZW5kZXJDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgT2JzZXJ2YXRpb25DYXRlZ29yeUNvZGluZ3MsIE9ic2VydmF0aW9uQ2F0ZWdvcnlDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9PYnNlcnZhdGlvbkNhdGVnb3J5Q29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgT2JzZXJ2YXRpb25DYXRlZ29yeUNvZGVzLCAgT2JzZXJ2YXRpb25DYXRlZ29yeUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9PYnNlcnZhdGlvbkNhdGVnb3J5Q29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE9ic2VydmF0aW9uQ29kaW5ncywgT2JzZXJ2YXRpb25Db2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9PYnNlcnZhdGlvbkNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE9ic2VydmF0aW9uQ29kZXMsICBPYnNlcnZhdGlvbkNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9PYnNlcnZhdGlvbkNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBQZXJtaXR0ZWREYXRhVHlwZUNvZGluZ3MsIFBlcm1pdHRlZERhdGFUeXBlQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUGVybWl0dGVkRGF0YVR5cGVDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBQZXJtaXR0ZWREYXRhVHlwZUNvZGVzLCAgUGVybWl0dGVkRGF0YVR5cGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUGVybWl0dGVkRGF0YVR5cGVDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgT2JzZXJ2YXRpb25NZXRob2RzQ29kaW5ncywgT2JzZXJ2YXRpb25NZXRob2RzQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvT2JzZXJ2YXRpb25NZXRob2RzQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgT2JzZXJ2YXRpb25NZXRob2RzQ29kZXMsICBPYnNlcnZhdGlvbk1ldGhvZHNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvT2JzZXJ2YXRpb25NZXRob2RzQ29kZXMuanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgT2JzZXJ2YXRpb25EZWZpbml0aW9uUXVhbnRpdGF0aXZlRGV0YWlscyB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBPYnNlcnZhdGlvbkRlZmluaXRpb25RdWFudGl0YXRpdmVEZXRhaWxzQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogQ3VzdG9tYXJ5IHVuaXQgdXNlZCB0byByZXBvcnQgcXVhbnRpdGF0aXZlIHJlc3VsdHMgb2Ygb2JzZXJ2YXRpb25zIGNvbmZvcm1pbmcgdG8gdGhpcyBPYnNlcnZhdGlvbkRlZmluaXRpb24uXHJcbiAgICovXHJcbiAgY3VzdG9tYXJ5VW5pdD86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU0kgdW5pdCB1c2VkIHRvIHJlcG9ydCBxdWFudGl0YXRpdmUgcmVzdWx0cyBvZiBvYnNlcnZhdGlvbnMgY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICB1bml0PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBGYWN0b3IgZm9yIGNvbnZlcnRpbmcgdmFsdWUgZXhwcmVzc2VkIHdpdGggU0kgdW5pdCB0byB2YWx1ZSBleHByZXNzZWQgd2l0aCBjdXN0b21hcnkgdW5pdC5cclxuICAgKi9cclxuICBjb252ZXJzaW9uRmFjdG9yPzogZmhpci5GaGlyRGVjaW1hbHxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBPYnNlcnZhdGlvbkRlZmluaXRpb24ucXVhbnRpdGF0aXZlRGV0YWlscy5jb252ZXJzaW9uRmFjdG9yXHJcbiAgICovXHJcbiAgX2NvbnZlcnNpb25GYWN0b3I/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIE51bWJlciBvZiBkaWdpdHMgYWZ0ZXIgZGVjaW1hbCBzZXBhcmF0b3Igd2hlbiB0aGUgcmVzdWx0cyBvZiBzdWNoIG9ic2VydmF0aW9ucyBhcmUgb2YgdHlwZSBRdWFudGl0eS5cclxuICAgKi9cclxuICBkZWNpbWFsUHJlY2lzaW9uPzogZmhpci5GaGlySW50ZWdlcnxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBPYnNlcnZhdGlvbkRlZmluaXRpb24ucXVhbnRpdGF0aXZlRGV0YWlscy5kZWNpbWFsUHJlY2lzaW9uXHJcbiAgICovXHJcbiAgX2RlY2ltYWxQcmVjaXNpb24/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hhcmFjdGVyaXN0aWNzIGZvciBxdWFudGl0YXRpdmUgcmVzdWx0cyBvZiB0aGlzIG9ic2VydmF0aW9uLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE9ic2VydmF0aW9uRGVmaW5pdGlvblF1YW50aXRhdGl2ZURldGFpbHMgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdPYnNlcnZhdGlvbkRlZmluaXRpb25RdWFudGl0YXRpdmVEZXRhaWxzJztcclxuICAvKipcclxuICAgKiBDdXN0b21hcnkgdW5pdCB1c2VkIHRvIHJlcG9ydCBxdWFudGl0YXRpdmUgcmVzdWx0cyBvZiBvYnNlcnZhdGlvbnMgY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgY3VzdG9tYXJ5VW5pdD86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTSSB1bml0IHVzZWQgdG8gcmVwb3J0IHF1YW50aXRhdGl2ZSByZXN1bHRzIG9mIG9ic2VydmF0aW9ucyBjb25mb3JtaW5nIHRvIHRoaXMgT2JzZXJ2YXRpb25EZWZpbml0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB1bml0PzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEZhY3RvciBmb3IgY29udmVydGluZyB2YWx1ZSBleHByZXNzZWQgd2l0aCBTSSB1bml0IHRvIHZhbHVlIGV4cHJlc3NlZCB3aXRoIGN1c3RvbWFyeSB1bml0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb252ZXJzaW9uRmFjdG9yPzogZmhpci5GaGlyRGVjaW1hbHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTnVtYmVyIG9mIGRpZ2l0cyBhZnRlciBkZWNpbWFsIHNlcGFyYXRvciB3aGVuIHRoZSByZXN1bHRzIG9mIHN1Y2ggb2JzZXJ2YXRpb25zIGFyZSBvZiB0eXBlIFF1YW50aXR5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZWNpbWFsUHJlY2lzaW9uPzogZmhpci5GaGlySW50ZWdlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgT2JzZXJ2YXRpb25EZWZpbml0aW9uUXVhbnRpdGF0aXZlRGV0YWlscyAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE9ic2VydmF0aW9uRGVmaW5pdGlvblF1YW50aXRhdGl2ZURldGFpbHNBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnY3VzdG9tYXJ5VW5pdCddKSB7IHRoaXMuY3VzdG9tYXJ5VW5pdCA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY3VzdG9tYXJ5VW5pdCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3VuaXQnXSkgeyB0aGlzLnVuaXQgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnVuaXQpOyB9XHJcbiAgICBpZiAoc291cmNlWydjb252ZXJzaW9uRmFjdG9yJ10pIHsgdGhpcy5jb252ZXJzaW9uRmFjdG9yID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoe3ZhbHVlOiBzb3VyY2UuY29udmVyc2lvbkZhY3Rvcn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfY29udmVyc2lvbkZhY3RvciddKSB7XHJcbiAgICAgIGlmICh0aGlzLmNvbnZlcnNpb25GYWN0b3IpIHsgdGhpcy5jb252ZXJzaW9uRmFjdG9yLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2NvbnZlcnNpb25GYWN0b3IhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5jb252ZXJzaW9uRmFjdG9yID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoc291cmNlLl9jb252ZXJzaW9uRmFjdG9yIGFzIFBhcnRpYWw8Zmhpci5GaGlyRGVjaW1hbEFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGVjaW1hbFByZWNpc2lvbiddKSB7IHRoaXMuZGVjaW1hbFByZWNpc2lvbiA9IG5ldyBmaGlyLkZoaXJJbnRlZ2VyKHt2YWx1ZTogc291cmNlLmRlY2ltYWxQcmVjaXNpb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2RlY2ltYWxQcmVjaXNpb24nXSkge1xyXG4gICAgICBpZiAodGhpcy5kZWNpbWFsUHJlY2lzaW9uKSB7IHRoaXMuZGVjaW1hbFByZWNpc2lvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9kZWNpbWFsUHJlY2lzaW9uISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZGVjaW1hbFByZWNpc2lvbiA9IG5ldyBmaGlyLkZoaXJJbnRlZ2VyKHNvdXJjZS5fZGVjaW1hbFByZWNpc2lvbiBhcyBQYXJ0aWFsPGZoaXIuRmhpckludGVnZXJBcmdzPik7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5zaWJsZS1ib3VuZCBWYWx1ZSBTZXQgZm9yIGN1c3RvbWFyeVVuaXQgKE9ic2VydmF0aW9uRGVmaW5pdGlvbi5xdWFudGl0YXRpdmVEZXRhaWxzLmN1c3RvbWFyeVVuaXQpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgY3VzdG9tYXJ5VW5pdEV4dGVuc2libGVDb2RpbmdzKCk6VWN1bVVuaXRzQ29kaW5nVHlwZSB7XHJcbiAgICByZXR1cm4gVWN1bVVuaXRzQ29kaW5ncztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5zaWJsZS1ib3VuZCBWYWx1ZSBTZXQgZm9yIHVuaXQgKE9ic2VydmF0aW9uRGVmaW5pdGlvbi5xdWFudGl0YXRpdmVEZXRhaWxzLnVuaXQpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgdW5pdEV4dGVuc2libGVDb2RpbmdzKCk6VWN1bVVuaXRzQ29kaW5nVHlwZSB7XHJcbiAgICByZXR1cm4gVWN1bVVuaXRzQ29kaW5ncztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICh0aGlzW1wiY3VzdG9tYXJ5VW5pdFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmN1c3RvbWFyeVVuaXQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1widW5pdFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnVuaXQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiY29udmVyc2lvbkZhY3RvclwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmNvbnZlcnNpb25GYWN0b3IuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiZGVjaW1hbFByZWNpc2lvblwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmRlY2ltYWxQcmVjaXNpb24uZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBPYnNlcnZhdGlvbkRlZmluaXRpb25RdWFsaWZpZWRJbnRlcnZhbCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBPYnNlcnZhdGlvbkRlZmluaXRpb25RdWFsaWZpZWRJbnRlcnZhbEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjYXRlZ29yeSBvZiBpbnRlcnZhbCBvZiB2YWx1ZXMgZm9yIGNvbnRpbnVvdXMgb3Igb3JkaW5hbCBvYnNlcnZhdGlvbnMgY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBjYXRlZ29yeT86IGZoaXIuRmhpckNvZGU8T2JzZXJ2YXRpb25SYW5nZUNhdGVnb3J5Q29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE9ic2VydmF0aW9uRGVmaW5pdGlvbi5xdWFsaWZpZWRJbnRlcnZhbC5jYXRlZ29yeVxyXG4gICAqL1xyXG4gIF9jYXRlZ29yeT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGxvdyBhbmQgaGlnaCB2YWx1ZXMgZGV0ZXJtaW5pbmcgdGhlIGludGVydmFsLiBUaGVyZSBtYXkgYmUgb25seSBvbmUgb2YgdGhlIHR3by5cclxuICAgKi9cclxuICByYW5nZT86IGZoaXIuUmFuZ2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDb2RlcyB0byBpbmRpY2F0ZSB0aGUgaGVhbHRoIGNvbnRleHQgdGhlIHJhbmdlIGFwcGxpZXMgdG8uIEZvciBleGFtcGxlLCB0aGUgbm9ybWFsIG9yIHRoZXJhcGV1dGljIHJhbmdlLlxyXG4gICAqL1xyXG4gIGNvbnRleHQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIHRoaXMgZWxlbWVudCBpcyBub3QgcHJlc2VudCB0aGVuIHRoZSBnbG9iYWwgcG9wdWxhdGlvbiBpcyBhc3N1bWVkLlxyXG4gICAqL1xyXG4gIGFwcGxpZXNUbz86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTZXggb2YgdGhlIHBvcHVsYXRpb24gdGhlIHJhbmdlIGFwcGxpZXMgdG8uXHJcbiAgICovXHJcbiAgZ2VuZGVyPzogZmhpci5GaGlyQ29kZTxBZG1pbmlzdHJhdGl2ZUdlbmRlckNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBPYnNlcnZhdGlvbkRlZmluaXRpb24ucXVhbGlmaWVkSW50ZXJ2YWwuZ2VuZGVyXHJcbiAgICovXHJcbiAgX2dlbmRlcj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogU29tZSBhbmFseXRlcyB2YXJ5IGdyZWF0bHkgb3ZlciBhZ2UuXHJcbiAgICovXHJcbiAgYWdlPzogZmhpci5SYW5nZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBnZXN0YXRpb25hbCBhZ2UgdG8gd2hpY2ggdGhpcyByZWZlcmVuY2UgcmFuZ2UgaXMgYXBwbGljYWJsZSwgaW4gdGhlIGNvbnRleHQgb2YgcHJlZ25hbmN5LlxyXG4gICAqL1xyXG4gIGdlc3RhdGlvbmFsQWdlPzogZmhpci5SYW5nZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRleHQgYmFzZWQgY29uZGl0aW9uIGZvciB3aGljaCB0aGUgcmVmZXJlbmNlIHJhbmdlIGlzIHZhbGlkLlxyXG4gICAqL1xyXG4gIGNvbmRpdGlvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBPYnNlcnZhdGlvbkRlZmluaXRpb24ucXVhbGlmaWVkSW50ZXJ2YWwuY29uZGl0aW9uXHJcbiAgICovXHJcbiAgX2NvbmRpdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNdWx0aXBsZSAgcmFuZ2VzIG9mIHJlc3VsdHMgcXVhbGlmaWVkIGJ5IGRpZmZlcmVudCBjb250ZXh0cyBmb3Igb3JkaW5hbCBvciBjb250aW51b3VzIG9ic2VydmF0aW9ucyBjb25mb3JtaW5nIHRvIHRoaXMgT2JzZXJ2YXRpb25EZWZpbml0aW9uLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE9ic2VydmF0aW9uRGVmaW5pdGlvblF1YWxpZmllZEludGVydmFsIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnT2JzZXJ2YXRpb25EZWZpbml0aW9uUXVhbGlmaWVkSW50ZXJ2YWwnO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjYXRlZ29yeSBvZiBpbnRlcnZhbCBvZiB2YWx1ZXMgZm9yIGNvbnRpbnVvdXMgb3Igb3JkaW5hbCBvYnNlcnZhdGlvbnMgY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgY2F0ZWdvcnk/OiBmaGlyLkZoaXJDb2RlPE9ic2VydmF0aW9uUmFuZ2VDYXRlZ29yeUNvZGVUeXBlPnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGxvdyBhbmQgaGlnaCB2YWx1ZXMgZGV0ZXJtaW5pbmcgdGhlIGludGVydmFsLiBUaGVyZSBtYXkgYmUgb25seSBvbmUgb2YgdGhlIHR3by5cclxuICAgKi9cclxuICBwdWJsaWMgcmFuZ2U/OiBmaGlyLlJhbmdlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDb2RlcyB0byBpbmRpY2F0ZSB0aGUgaGVhbHRoIGNvbnRleHQgdGhlIHJhbmdlIGFwcGxpZXMgdG8uIEZvciBleGFtcGxlLCB0aGUgbm9ybWFsIG9yIHRoZXJhcGV1dGljIHJhbmdlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb250ZXh0PzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIHRoaXMgZWxlbWVudCBpcyBub3QgcHJlc2VudCB0aGVuIHRoZSBnbG9iYWwgcG9wdWxhdGlvbiBpcyBhc3N1bWVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhcHBsaWVzVG86IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogU2V4IG9mIHRoZSBwb3B1bGF0aW9uIHRoZSByYW5nZSBhcHBsaWVzIHRvLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZW5kZXI/OiBmaGlyLkZoaXJDb2RlPEFkbWluaXN0cmF0aXZlR2VuZGVyQ29kZVR5cGU+fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTb21lIGFuYWx5dGVzIHZhcnkgZ3JlYXRseSBvdmVyIGFnZS5cclxuICAgKi9cclxuICBwdWJsaWMgYWdlPzogZmhpci5SYW5nZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGdlc3RhdGlvbmFsIGFnZSB0byB3aGljaCB0aGlzIHJlZmVyZW5jZSByYW5nZSBpcyBhcHBsaWNhYmxlLCBpbiB0aGUgY29udGV4dCBvZiBwcmVnbmFuY3kuXHJcbiAgICovXHJcbiAgcHVibGljIGdlc3RhdGlvbmFsQWdlPzogZmhpci5SYW5nZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGV4dCBiYXNlZCBjb25kaXRpb24gZm9yIHdoaWNoIHRoZSByZWZlcmVuY2UgcmFuZ2UgaXMgdmFsaWQuXHJcbiAgICovXHJcbiAgcHVibGljIGNvbmRpdGlvbj86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgT2JzZXJ2YXRpb25EZWZpbml0aW9uUXVhbGlmaWVkSW50ZXJ2YWwgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxPYnNlcnZhdGlvbkRlZmluaXRpb25RdWFsaWZpZWRJbnRlcnZhbEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydjYXRlZ29yeSddKSB7IHRoaXMuY2F0ZWdvcnkgPSBuZXcgZmhpci5GaGlyQ29kZTxPYnNlcnZhdGlvblJhbmdlQ2F0ZWdvcnlDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2UuY2F0ZWdvcnl9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2NhdGVnb3J5J10pIHtcclxuICAgICAgaWYgKHRoaXMuY2F0ZWdvcnkpIHsgdGhpcy5jYXRlZ29yeS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9jYXRlZ29yeSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmNhdGVnb3J5ID0gbmV3IGZoaXIuRmhpckNvZGU8T2JzZXJ2YXRpb25SYW5nZUNhdGVnb3J5Q29kZVR5cGU+KHNvdXJjZS5fY2F0ZWdvcnkgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3JhbmdlJ10pIHsgdGhpcy5yYW5nZSA9IG5ldyBmaGlyLlJhbmdlKHNvdXJjZS5yYW5nZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvbnRleHQnXSkgeyB0aGlzLmNvbnRleHQgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmNvbnRleHQpOyB9XHJcbiAgICBpZiAoc291cmNlWydhcHBsaWVzVG8nXSkgeyB0aGlzLmFwcGxpZXNUbyA9IHNvdXJjZS5hcHBsaWVzVG8ubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5hcHBsaWVzVG8gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZ2VuZGVyJ10pIHsgdGhpcy5nZW5kZXIgPSBuZXcgZmhpci5GaGlyQ29kZTxBZG1pbmlzdHJhdGl2ZUdlbmRlckNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5nZW5kZXJ9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2dlbmRlciddKSB7XHJcbiAgICAgIGlmICh0aGlzLmdlbmRlcikgeyB0aGlzLmdlbmRlci5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9nZW5kZXIhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5nZW5kZXIgPSBuZXcgZmhpci5GaGlyQ29kZTxBZG1pbmlzdHJhdGl2ZUdlbmRlckNvZGVUeXBlPihzb3VyY2UuX2dlbmRlciBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnYWdlJ10pIHsgdGhpcy5hZ2UgPSBuZXcgZmhpci5SYW5nZShzb3VyY2UuYWdlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZ2VzdGF0aW9uYWxBZ2UnXSkgeyB0aGlzLmdlc3RhdGlvbmFsQWdlID0gbmV3IGZoaXIuUmFuZ2Uoc291cmNlLmdlc3RhdGlvbmFsQWdlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29uZGl0aW9uJ10pIHsgdGhpcy5jb25kaXRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmNvbmRpdGlvbn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfY29uZGl0aW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMuY29uZGl0aW9uKSB7IHRoaXMuY29uZGl0aW9uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2NvbmRpdGlvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmNvbmRpdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9jb25kaXRpb24gYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZWQtYm91bmQgVmFsdWUgU2V0IGZvciBjYXRlZ29yeSAoT2JzZXJ2YXRpb25EZWZpbml0aW9uLnF1YWxpZmllZEludGVydmFsLmNhdGVnb3J5KVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IGNhdGVnb3J5UmVxdWlyZWRDb2RlcygpIHtcclxuICAgIHJldHVybiBPYnNlcnZhdGlvblJhbmdlQ2F0ZWdvcnlDb2RlcztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5zaWJsZS1ib3VuZCBWYWx1ZSBTZXQgZm9yIGNvbnRleHQgKE9ic2VydmF0aW9uRGVmaW5pdGlvbi5xdWFsaWZpZWRJbnRlcnZhbC5jb250ZXh0KVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IGNvbnRleHRFeHRlbnNpYmxlQ29kaW5ncygpOlJlZmVyZW5jZXJhbmdlTWVhbmluZ0NvZGluZ1R5cGUge1xyXG4gICAgcmV0dXJuIFJlZmVyZW5jZXJhbmdlTWVhbmluZ0NvZGluZ3M7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlcXVpcmVkLWJvdW5kIFZhbHVlIFNldCBmb3IgZ2VuZGVyIChPYnNlcnZhdGlvbkRlZmluaXRpb24ucXVhbGlmaWVkSW50ZXJ2YWwuZ2VuZGVyKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IGdlbmRlclJlcXVpcmVkQ29kZXMoKSB7XHJcbiAgICByZXR1cm4gQWRtaW5pc3RyYXRpdmVHZW5kZXJDb2RlcztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICh0aGlzWydjYXRlZ29yeSddICYmICghT2JqZWN0LnZhbHVlcyhPYnNlcnZhdGlvblJhbmdlQ2F0ZWdvcnlDb2RlcykuaW5jbHVkZXModGhpcy5jYXRlZ29yeSBhcyBhbnkpKSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnY29kZS1pbnZhbGlkJywgZGlhZ25vc3RpY3M6ICdJbnZhbGlkIGNvZGUgcHJvcGVydHkgY2F0ZWdvcnk/OmZoaXIuRmhpckNvZGU8T2JzZXJ2YXRpb25SYW5nZUNhdGVnb3J5Q29kZVR5cGU+IGZoaXI6IE9ic2VydmF0aW9uRGVmaW5pdGlvbi5xdWFsaWZpZWRJbnRlcnZhbC5jYXRlZ29yeTpjb2RlIFJlcXVpcmVkIGJpbmRpbmcgdG86IE9ic2VydmF0aW9uUmFuZ2VDYXRlZ29yeScgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImNhdGVnb3J5XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY2F0ZWdvcnkuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wicmFuZ2VcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5yYW5nZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJjb250ZXh0XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY29udGV4dC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJhcHBsaWVzVG9cIl0pIHsgdGhpcy5hcHBsaWVzVG8uZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1snZ2VuZGVyJ10gJiYgKCFPYmplY3QudmFsdWVzKEFkbWluaXN0cmF0aXZlR2VuZGVyQ29kZXMpLmluY2x1ZGVzKHRoaXMuZ2VuZGVyIGFzIGFueSkpKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdjb2RlLWludmFsaWQnLCBkaWFnbm9zdGljczogJ0ludmFsaWQgY29kZSBwcm9wZXJ0eSBnZW5kZXI/OmZoaXIuRmhpckNvZGU8QWRtaW5pc3RyYXRpdmVHZW5kZXJDb2RlVHlwZT4gZmhpcjogT2JzZXJ2YXRpb25EZWZpbml0aW9uLnF1YWxpZmllZEludGVydmFsLmdlbmRlcjpjb2RlIFJlcXVpcmVkIGJpbmRpbmcgdG86IEFkbWluaXN0cmF0aXZlR2VuZGVyJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiZ2VuZGVyXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZ2VuZGVyLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImFnZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmFnZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJnZXN0YXRpb25hbEFnZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmdlc3RhdGlvbmFsQWdlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImNvbmRpdGlvblwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmNvbmRpdGlvbi5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE9ic2VydmF0aW9uRGVmaW5pdGlvbiB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBPYnNlcnZhdGlvbkRlZmluaXRpb25BcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJPYnNlcnZhdGlvbkRlZmluaXRpb25cInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IGFsbG93cyB2YXJpb3VzIGNhdGVnb3JpemF0aW9uIHNjaGVtZXMgYmFzZWQgb24gdGhlIG93bmVy4oCZcyBkZWZpbml0aW9uIG9mIHRoZSBjYXRlZ29yeSBhbmQgZWZmZWN0aXZlbHkgbXVsdGlwbGUgY2F0ZWdvcmllcyBjYW4gYmUgdXNlZCBmb3Igb25lIGluc3RhbmNlIG9mIE9ic2VydmF0aW9uRGVmaW5pdGlvbi4gVGhlIGxldmVsIG9mIGdyYW51bGFyaXR5IGlzIGRlZmluZWQgYnkgdGhlIGNhdGVnb3J5IGNvbmNlcHRzIGluIHRoZSB2YWx1ZSBzZXQuXHJcbiAgICovXHJcbiAgY2F0ZWdvcnk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHdoYXQgd2lsbCBiZSBvYnNlcnZlZC4gU29tZXRpbWVzIHRoaXMgaXMgY2FsbGVkIHRoZSBvYnNlcnZhdGlvbiBcIm5hbWVcIi5cclxuICAgKi9cclxuICBjb2RlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBBIHVuaXF1ZSBpZGVudGlmaWVyIGFzc2lnbmVkIHRvIHRoaXMgT2JzZXJ2YXRpb25EZWZpbml0aW9uIGFydGlmYWN0LlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRhIHR5cGVzIGFsbG93ZWQgZm9yIHRoZSB2YWx1ZSBlbGVtZW50IG9mIHRoZSBpbnN0YW5jZSBvYnNlcnZhdGlvbnMgY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBwZXJtaXR0ZWREYXRhVHlwZT86IGZoaXIuRmhpckNvZGU8UGVybWl0dGVkRGF0YVR5cGVDb2RlVHlwZT5bXXxzdHJpbmdbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE9ic2VydmF0aW9uRGVmaW5pdGlvbi5wZXJtaXR0ZWREYXRhVHlwZVxyXG4gICAqL1xyXG4gIF9wZXJtaXR0ZWREYXRhVHlwZT86KGZoaXIuRmhpckVsZW1lbnRBcmdzfG51bGwpW107XHJcbiAgLyoqXHJcbiAgICogQW4gZXhhbXBsZSBvZiBvYnNlcnZhdGlvbiBhbGxvd2luZyBtdWx0aXBsZSByZXN1bHRzIGlzIFwiYmFjdGVyaWEgaWRlbnRpZmllZCBieSBjdWx0dXJlXCIuIENvbnZlcnNlbHksIHRoZSBtZWFzdXJlbWVudCBvZiBhIHBvdGFzc2l1bSBsZXZlbCBhbGxvd3MgYSBzaW5nbGUgcmVzdWx0LlxyXG4gICAqL1xyXG4gIG11bHRpcGxlUmVzdWx0c0FsbG93ZWQ/OiBmaGlyLkZoaXJCb29sZWFufGJvb2xlYW58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBPYnNlcnZhdGlvbkRlZmluaXRpb24ubXVsdGlwbGVSZXN1bHRzQWxsb3dlZFxyXG4gICAqL1xyXG4gIF9tdWx0aXBsZVJlc3VsdHNBbGxvd2VkPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBPbmx5IHVzZWQgaWYgbm90IGltcGxpY2l0IGluIG9ic2VydmF0aW9uIGNvZGUuXHJcbiAgICovXHJcbiAgbWV0aG9kPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcHJlZmVycmVkIG5hbWUgdG8gYmUgdXNlZCB3aGVuIHJlcG9ydGluZyB0aGUgcmVzdWx0cyBvZiBvYnNlcnZhdGlvbnMgY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBwcmVmZXJyZWRSZXBvcnROYW1lPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE9ic2VydmF0aW9uRGVmaW5pdGlvbi5wcmVmZXJyZWRSZXBvcnROYW1lXHJcbiAgICovXHJcbiAgX3ByZWZlcnJlZFJlcG9ydE5hbWU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIENoYXJhY3RlcmlzdGljcyBmb3IgcXVhbnRpdGF0aXZlIHJlc3VsdHMgb2YgdGhpcyBvYnNlcnZhdGlvbi5cclxuICAgKi9cclxuICBxdWFudGl0YXRpdmVEZXRhaWxzPzogZmhpci5PYnNlcnZhdGlvbkRlZmluaXRpb25RdWFudGl0YXRpdmVEZXRhaWxzQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTXVsdGlwbGUgIHJhbmdlcyBvZiByZXN1bHRzIHF1YWxpZmllZCBieSBkaWZmZXJlbnQgY29udGV4dHMgZm9yIG9yZGluYWwgb3IgY29udGludW91cyBvYnNlcnZhdGlvbnMgY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBxdWFsaWZpZWRJbnRlcnZhbD86IGZoaXIuT2JzZXJ2YXRpb25EZWZpbml0aW9uUXVhbGlmaWVkSW50ZXJ2YWxBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzZXQgb2YgdmFsaWQgY29kZWQgcmVzdWx0cyBmb3IgdGhlIG9ic2VydmF0aW9ucyAgY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICB2YWxpZENvZGVkVmFsdWVTZXQ/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzZXQgb2Ygbm9ybWFsIGNvZGVkIHJlc3VsdHMgZm9yIHRoZSBvYnNlcnZhdGlvbnMgY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBub3JtYWxDb2RlZFZhbHVlU2V0PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc2V0IG9mIGFibm9ybWFsIGNvZGVkIHJlc3VsdHMgZm9yIHRoZSBvYnNlcnZhdGlvbiBjb25mb3JtaW5nIHRvIHRoaXMgT2JzZXJ2YXRpb25EZWZpbml0aW9uLlxyXG4gICAqL1xyXG4gIGFibm9ybWFsQ29kZWRWYWx1ZVNldD86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNldCBvZiBjcml0aWNhbCBjb2RlZCByZXN1bHRzIGZvciB0aGUgb2JzZXJ2YXRpb24gY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBjcml0aWNhbENvZGVkVmFsdWVTZXQ/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IG9mIGRlZmluaXRpb25hbCBjaGFyYWN0ZXJpc3RpY3MgZm9yIGEga2luZCBvZiBvYnNlcnZhdGlvbiBvciBtZWFzdXJlbWVudCBwcm9kdWNlZCBvciBjb25zdW1lZCBieSBhbiBvcmRlcmFibGUgaGVhbHRoIGNhcmUgc2VydmljZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBPYnNlcnZhdGlvbkRlZmluaXRpb24gZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ09ic2VydmF0aW9uRGVmaW5pdGlvbic7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJPYnNlcnZhdGlvbkRlZmluaXRpb25cIjtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgYWxsb3dzIHZhcmlvdXMgY2F0ZWdvcml6YXRpb24gc2NoZW1lcyBiYXNlZCBvbiB0aGUgb3duZXLigJlzIGRlZmluaXRpb24gb2YgdGhlIGNhdGVnb3J5IGFuZCBlZmZlY3RpdmVseSBtdWx0aXBsZSBjYXRlZ29yaWVzIGNhbiBiZSB1c2VkIGZvciBvbmUgaW5zdGFuY2Ugb2YgT2JzZXJ2YXRpb25EZWZpbml0aW9uLiBUaGUgbGV2ZWwgb2YgZ3JhbnVsYXJpdHkgaXMgZGVmaW5lZCBieSB0aGUgY2F0ZWdvcnkgY29uY2VwdHMgaW4gdGhlIHZhbHVlIHNldC5cclxuICAgKi9cclxuICBwdWJsaWMgY2F0ZWdvcnk6IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHdoYXQgd2lsbCBiZSBvYnNlcnZlZC4gU29tZXRpbWVzIHRoaXMgaXMgY2FsbGVkIHRoZSBvYnNlcnZhdGlvbiBcIm5hbWVcIi5cclxuICAgKi9cclxuICBwdWJsaWMgY29kZTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBBIHVuaXF1ZSBpZGVudGlmaWVyIGFzc2lnbmVkIHRvIHRoaXMgT2JzZXJ2YXRpb25EZWZpbml0aW9uIGFydGlmYWN0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyOiBmaGlyLklkZW50aWZpZXJbXTtcclxuICAvKipcclxuICAgKiBUaGUgZGF0YSB0eXBlcyBhbGxvd2VkIGZvciB0aGUgdmFsdWUgZWxlbWVudCBvZiB0aGUgaW5zdGFuY2Ugb2JzZXJ2YXRpb25zIGNvbmZvcm1pbmcgdG8gdGhpcyBPYnNlcnZhdGlvbkRlZmluaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHBlcm1pdHRlZERhdGFUeXBlOiBmaGlyLkZoaXJDb2RlPFBlcm1pdHRlZERhdGFUeXBlQ29kZVR5cGU+W107XHJcbiAgLyoqXHJcbiAgICogQW4gZXhhbXBsZSBvZiBvYnNlcnZhdGlvbiBhbGxvd2luZyBtdWx0aXBsZSByZXN1bHRzIGlzIFwiYmFjdGVyaWEgaWRlbnRpZmllZCBieSBjdWx0dXJlXCIuIENvbnZlcnNlbHksIHRoZSBtZWFzdXJlbWVudCBvZiBhIHBvdGFzc2l1bSBsZXZlbCBhbGxvd3MgYSBzaW5nbGUgcmVzdWx0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtdWx0aXBsZVJlc3VsdHNBbGxvd2VkPzogZmhpci5GaGlyQm9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogT25seSB1c2VkIGlmIG5vdCBpbXBsaWNpdCBpbiBvYnNlcnZhdGlvbiBjb2RlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtZXRob2Q/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHByZWZlcnJlZCBuYW1lIHRvIGJlIHVzZWQgd2hlbiByZXBvcnRpbmcgdGhlIHJlc3VsdHMgb2Ygb2JzZXJ2YXRpb25zIGNvbmZvcm1pbmcgdG8gdGhpcyBPYnNlcnZhdGlvbkRlZmluaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHByZWZlcnJlZFJlcG9ydE5hbWU/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENoYXJhY3RlcmlzdGljcyBmb3IgcXVhbnRpdGF0aXZlIHJlc3VsdHMgb2YgdGhpcyBvYnNlcnZhdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgcXVhbnRpdGF0aXZlRGV0YWlscz86IGZoaXIuT2JzZXJ2YXRpb25EZWZpbml0aW9uUXVhbnRpdGF0aXZlRGV0YWlsc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTXVsdGlwbGUgIHJhbmdlcyBvZiByZXN1bHRzIHF1YWxpZmllZCBieSBkaWZmZXJlbnQgY29udGV4dHMgZm9yIG9yZGluYWwgb3IgY29udGludW91cyBvYnNlcnZhdGlvbnMgY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgcXVhbGlmaWVkSW50ZXJ2YWw6IGZoaXIuT2JzZXJ2YXRpb25EZWZpbml0aW9uUXVhbGlmaWVkSW50ZXJ2YWxbXTtcclxuICAvKipcclxuICAgKiBUaGUgc2V0IG9mIHZhbGlkIGNvZGVkIHJlc3VsdHMgZm9yIHRoZSBvYnNlcnZhdGlvbnMgIGNvbmZvcm1pbmcgdG8gdGhpcyBPYnNlcnZhdGlvbkRlZmluaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHZhbGlkQ29kZWRWYWx1ZVNldD86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc2V0IG9mIG5vcm1hbCBjb2RlZCByZXN1bHRzIGZvciB0aGUgb2JzZXJ2YXRpb25zIGNvbmZvcm1pbmcgdG8gdGhpcyBPYnNlcnZhdGlvbkRlZmluaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIG5vcm1hbENvZGVkVmFsdWVTZXQ/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNldCBvZiBhYm5vcm1hbCBjb2RlZCByZXN1bHRzIGZvciB0aGUgb2JzZXJ2YXRpb24gY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgYWJub3JtYWxDb2RlZFZhbHVlU2V0PzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzZXQgb2YgY3JpdGljYWwgY29kZWQgcmVzdWx0cyBmb3IgdGhlIG9ic2VydmF0aW9uIGNvbmZvcm1pbmcgdG8gdGhpcyBPYnNlcnZhdGlvbkRlZmluaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIGNyaXRpY2FsQ29kZWRWYWx1ZVNldD86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBPYnNlcnZhdGlvbkRlZmluaXRpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxPYnNlcnZhdGlvbkRlZmluaXRpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnT2JzZXJ2YXRpb25EZWZpbml0aW9uJztcclxuICAgIGlmIChzb3VyY2VbJ2NhdGVnb3J5J10pIHsgdGhpcy5jYXRlZ29yeSA9IHNvdXJjZS5jYXRlZ29yeS5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNhdGVnb3J5ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvZGUnXSkgeyB0aGlzLmNvZGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmNvZGUpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb2RlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IHNvdXJjZS5pZGVudGlmaWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuSWRlbnRpZmllcih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmlkZW50aWZpZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncGVybWl0dGVkRGF0YVR5cGUnXSkgeyB0aGlzLnBlcm1pdHRlZERhdGFUeXBlID0gc291cmNlLnBlcm1pdHRlZERhdGFUeXBlLm1hcCgoeCkgPT4gbmV3IGZoaXIuRmhpckNvZGU8UGVybWl0dGVkRGF0YVR5cGVDb2RlVHlwZT4oe3ZhbHVlOiB4fSkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wZXJtaXR0ZWREYXRhVHlwZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydfcGVybWl0dGVkRGF0YVR5cGUnXSkge1xyXG4gICAgICBzb3VyY2UuX3Blcm1pdHRlZERhdGFUeXBlLmZvckVhY2goKHgsaSkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLnBlcm1pdHRlZERhdGFUeXBlLmxlbmd0aCA+PSBpKSB7IGlmICh4KSB7IHRoaXMucGVybWl0dGVkRGF0YVR5cGVbaV0uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHgpOyB9IH1cclxuICAgICAgICBlbHNlIHsgaWYgKHgpIHsgdGhpcy5wZXJtaXR0ZWREYXRhVHlwZS5wdXNoKG5ldyBmaGlyLkZoaXJDb2RlPFBlcm1pdHRlZERhdGFUeXBlQ29kZVR5cGU+KHggYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPikpOyB9IH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydtdWx0aXBsZVJlc3VsdHNBbGxvd2VkJ10pIHsgdGhpcy5tdWx0aXBsZVJlc3VsdHNBbGxvd2VkID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oe3ZhbHVlOiBzb3VyY2UubXVsdGlwbGVSZXN1bHRzQWxsb3dlZH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfbXVsdGlwbGVSZXN1bHRzQWxsb3dlZCddKSB7XHJcbiAgICAgIGlmICh0aGlzLm11bHRpcGxlUmVzdWx0c0FsbG93ZWQpIHsgdGhpcy5tdWx0aXBsZVJlc3VsdHNBbGxvd2VkLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX211bHRpcGxlUmVzdWx0c0FsbG93ZWQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5tdWx0aXBsZVJlc3VsdHNBbGxvd2VkID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oc291cmNlLl9tdWx0aXBsZVJlc3VsdHNBbGxvd2VkIGFzIFBhcnRpYWw8Zmhpci5GaGlyQm9vbGVhbkFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnbWV0aG9kJ10pIHsgdGhpcy5tZXRob2QgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLm1ldGhvZCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3ByZWZlcnJlZFJlcG9ydE5hbWUnXSkgeyB0aGlzLnByZWZlcnJlZFJlcG9ydE5hbWUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnByZWZlcnJlZFJlcG9ydE5hbWV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3ByZWZlcnJlZFJlcG9ydE5hbWUnXSkge1xyXG4gICAgICBpZiAodGhpcy5wcmVmZXJyZWRSZXBvcnROYW1lKSB7IHRoaXMucHJlZmVycmVkUmVwb3J0TmFtZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9wcmVmZXJyZWRSZXBvcnROYW1lISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMucHJlZmVycmVkUmVwb3J0TmFtZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9wcmVmZXJyZWRSZXBvcnROYW1lIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydxdWFudGl0YXRpdmVEZXRhaWxzJ10pIHsgdGhpcy5xdWFudGl0YXRpdmVEZXRhaWxzID0gbmV3IGZoaXIuT2JzZXJ2YXRpb25EZWZpbml0aW9uUXVhbnRpdGF0aXZlRGV0YWlscyhzb3VyY2UucXVhbnRpdGF0aXZlRGV0YWlscyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3F1YWxpZmllZEludGVydmFsJ10pIHsgdGhpcy5xdWFsaWZpZWRJbnRlcnZhbCA9IHNvdXJjZS5xdWFsaWZpZWRJbnRlcnZhbC5tYXAoKHgpID0+IG5ldyBmaGlyLk9ic2VydmF0aW9uRGVmaW5pdGlvblF1YWxpZmllZEludGVydmFsKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucXVhbGlmaWVkSW50ZXJ2YWwgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndmFsaWRDb2RlZFZhbHVlU2V0J10pIHsgdGhpcy52YWxpZENvZGVkVmFsdWVTZXQgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnZhbGlkQ29kZWRWYWx1ZVNldCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ25vcm1hbENvZGVkVmFsdWVTZXQnXSkgeyB0aGlzLm5vcm1hbENvZGVkVmFsdWVTZXQgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLm5vcm1hbENvZGVkVmFsdWVTZXQpOyB9XHJcbiAgICBpZiAoc291cmNlWydhYm5vcm1hbENvZGVkVmFsdWVTZXQnXSkgeyB0aGlzLmFibm9ybWFsQ29kZWRWYWx1ZVNldCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuYWJub3JtYWxDb2RlZFZhbHVlU2V0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY3JpdGljYWxDb2RlZFZhbHVlU2V0J10pIHsgdGhpcy5jcml0aWNhbENvZGVkVmFsdWVTZXQgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmNyaXRpY2FsQ29kZWRWYWx1ZVNldCk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZWQtYm91bmQgVmFsdWUgU2V0IGZvciBwZXJtaXR0ZWREYXRhVHlwZSAoT2JzZXJ2YXRpb25EZWZpbml0aW9uLnBlcm1pdHRlZERhdGFUeXBlKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IHBlcm1pdHRlZERhdGFUeXBlUmVxdWlyZWRDb2RlcygpIHtcclxuICAgIHJldHVybiBQZXJtaXR0ZWREYXRhVHlwZUNvZGVzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKCF0aGlzWydyZXNvdXJjZVR5cGUnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgcmVzb3VyY2VUeXBlOlwiT2JzZXJ2YXRpb25EZWZpbml0aW9uXCIgZmhpcjogT2JzZXJ2YXRpb25EZWZpbml0aW9uLnJlc291cmNlVHlwZTpcIk9ic2VydmF0aW9uRGVmaW5pdGlvblwiJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiY2F0ZWdvcnlcIl0pIHsgdGhpcy5jYXRlZ29yeS5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICghdGhpc1snY29kZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBjb2RlOmZoaXIuQ29kZWFibGVDb25jZXB0IGZoaXI6IE9ic2VydmF0aW9uRGVmaW5pdGlvbi5jb2RlOkNvZGVhYmxlQ29uY2VwdCcgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImNvZGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5jb2RlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImlkZW50aWZpZXJcIl0pIHsgdGhpcy5pZGVudGlmaWVyLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbJ3Blcm1pdHRlZERhdGFUeXBlJ10pIHtcclxuICAgICAgdGhpcy5wZXJtaXR0ZWREYXRhVHlwZS5mb3JFYWNoKCh2KSA9PiB7XHJcbiAgICAgICAgaWYgKCFPYmplY3QudmFsdWVzKFBlcm1pdHRlZERhdGFUeXBlQ29kZXMpLmluY2x1ZGVzKHYgYXMgYW55KSkge1xyXG4gICAgICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ2NvZGUtaW52YWxpZCcsIGRpYWdub3N0aWNzOiAnSW52YWxpZCBjb2RlIHByb3BlcnR5IHBlcm1pdHRlZERhdGFUeXBlPzpmaGlyLkZoaXJDb2RlPFBlcm1pdHRlZERhdGFUeXBlQ29kZVR5cGU+W10gZmhpcjogT2JzZXJ2YXRpb25EZWZpbml0aW9uLnBlcm1pdHRlZERhdGFUeXBlOmNvZGUgUmVxdWlyZWQgYmluZGluZyB0bzogUGVybWl0dGVkRGF0YVR5cGUnIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInBlcm1pdHRlZERhdGFUeXBlXCJdKSB7IHRoaXMucGVybWl0dGVkRGF0YVR5cGUuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcIm11bHRpcGxlUmVzdWx0c0FsbG93ZWRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5tdWx0aXBsZVJlc3VsdHNBbGxvd2VkLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcIm1ldGhvZFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm1ldGhvZC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJwcmVmZXJyZWRSZXBvcnROYW1lXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucHJlZmVycmVkUmVwb3J0TmFtZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJxdWFudGl0YXRpdmVEZXRhaWxzXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucXVhbnRpdGF0aXZlRGV0YWlscy5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJxdWFsaWZpZWRJbnRlcnZhbFwiXSkgeyB0aGlzLnF1YWxpZmllZEludGVydmFsLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJ2YWxpZENvZGVkVmFsdWVTZXRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy52YWxpZENvZGVkVmFsdWVTZXQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wibm9ybWFsQ29kZWRWYWx1ZVNldFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm5vcm1hbENvZGVkVmFsdWVTZXQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiYWJub3JtYWxDb2RlZFZhbHVlU2V0XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuYWJub3JtYWxDb2RlZFZhbHVlU2V0LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImNyaXRpY2FsQ29kZWRWYWx1ZVNldFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmNyaXRpY2FsQ29kZWRWYWx1ZVNldC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuIl19