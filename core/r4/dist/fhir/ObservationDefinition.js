// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: ObservationDefinition
import * as fhir from '../fhir.js';
// @ts-ignore
import { ObservationRangeCategoryVsValidation } from '../fhirValueSets/ObservationRangeCategoryVsValidation.js';
// @ts-ignore
import { AdministrativeGenderVsValidation } from '../fhirValueSets/AdministrativeGenderVsValidation.js';
// @ts-ignore
import { PermittedDataTypeVsValidation } from '../fhirValueSets/PermittedDataTypeVsValidation.js';
/**
 * Characteristics for quantitative results of this observation.
 */
export class ObservationDefinitionQuantitativeDetails extends fhir.BackboneElement {
    /**
     * Default constructor for ObservationDefinitionQuantitativeDetails - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['customaryUnit']) {
            this.customaryUnit = new fhir.CodeableConcept(source.customaryUnit);
        }
        if (source['unit']) {
            this.unit = new fhir.CodeableConcept(source.unit);
        }
        if (source['conversionFactor']) {
            this.conversionFactor = new fhir.FhirDecimal({ value: source.conversionFactor });
        }
        if (source['_conversionFactor']) {
            if (this.conversionFactor) {
                this.conversionFactor.addExtendedProperties(source._conversionFactor);
            }
            else {
                this.conversionFactor = new fhir.FhirDecimal(source._conversionFactor);
            }
        }
        if (source['decimalPrecision']) {
            this.decimalPrecision = new fhir.FhirInteger({ value: source.decimalPrecision });
        }
        if (source['_decimalPrecision']) {
            if (this.decimalPrecision) {
                this.decimalPrecision.addExtendedProperties(source._decimalPrecision);
            }
            else {
                this.decimalPrecision = new fhir.FhirInteger(source._decimalPrecision);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'ObservationDefinition.quantitativeDetails';
        }
        this.vOptS('customaryUnit', expression);
        this.vOptS('unit', expression);
        this.vOptS('conversionFactor', expression);
        this.vOptS('decimalPrecision', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ObservationDefinitionQuantitativeDetails._fts_dataType = 'ObservationDefinitionQuantitativeDetails';
/**
 * Multiple  ranges of results qualified by different contexts for ordinal or continuous observations conforming to this ObservationDefinition.
 */
export class ObservationDefinitionQualifiedInterval extends fhir.BackboneElement {
    /**
     * Default constructor for ObservationDefinitionQualifiedInterval - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['category']) {
            this.category = new fhir.FhirCode({ value: source.category });
        }
        if (source['_category']) {
            if (this.category) {
                this.category.addExtendedProperties(source._category);
            }
            else {
                this.category = new fhir.FhirCode(source._category);
            }
        }
        if (source['range']) {
            this.range = new fhir.Range(source.range);
        }
        if (source['context']) {
            this.context = new fhir.CodeableConcept(source.context);
        }
        if (source['appliesTo']) {
            this.appliesTo = source.appliesTo.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.appliesTo = [];
        }
        if (source['gender']) {
            this.gender = new fhir.FhirCode({ value: source.gender });
        }
        if (source['_gender']) {
            if (this.gender) {
                this.gender.addExtendedProperties(source._gender);
            }
            else {
                this.gender = new fhir.FhirCode(source._gender);
            }
        }
        if (source['age']) {
            this.age = new fhir.Range(source.age);
        }
        if (source['gestationalAge']) {
            this.gestationalAge = new fhir.Range(source.gestationalAge);
        }
        if (source['condition']) {
            this.condition = new fhir.FhirString({ value: source.condition });
        }
        if (source['_condition']) {
            if (this.condition) {
                this.condition.addExtendedProperties(source._condition);
            }
            else {
                this.condition = new fhir.FhirString(source._condition);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'ObservationDefinition.qualifiedInterval';
        }
        this.vOptSV('category', expression, 'ObservationRangeCategory', ObservationRangeCategoryVsValidation, 'r');
        this.vOptS('range', expression);
        this.vOptS('context', expression);
        this.vOptA('appliesTo', expression);
        this.vOptSV('gender', expression, 'AdministrativeGender', AdministrativeGenderVsValidation, 'r');
        this.vOptS('age', expression);
        this.vOptS('gestationalAge', expression);
        this.vOptS('condition', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ObservationDefinitionQualifiedInterval._fts_dataType = 'ObservationDefinitionQualifiedInterval';
/**
 * Set of definitional characteristics for a kind of observation or measurement produced or consumed by an orderable health care service.
 */
export class ObservationDefinition extends fhir.DomainResource {
    /**
     * Default constructor for ObservationDefinition - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'ObservationDefinition';
        if (source['category']) {
            this.category = source.category.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.category = [];
        }
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        else {
            this.code = null;
        }
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['permittedDataType']) {
            this.permittedDataType = source.permittedDataType.map((x) => new fhir.FhirCode({ value: x }));
        }
        else {
            this.permittedDataType = [];
        }
        if (source['_permittedDataType']) {
            source._permittedDataType.forEach((x, i) => {
                if (this.permittedDataType.length >= i) {
                    if (x) {
                        this.permittedDataType[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.permittedDataType.push(new fhir.FhirCode(x));
                    }
                }
            });
        }
        if (source['multipleResultsAllowed']) {
            this.multipleResultsAllowed = new fhir.FhirBoolean({ value: source.multipleResultsAllowed });
        }
        if (source['_multipleResultsAllowed']) {
            if (this.multipleResultsAllowed) {
                this.multipleResultsAllowed.addExtendedProperties(source._multipleResultsAllowed);
            }
            else {
                this.multipleResultsAllowed = new fhir.FhirBoolean(source._multipleResultsAllowed);
            }
        }
        if (source['method']) {
            this.method = new fhir.CodeableConcept(source.method);
        }
        if (source['preferredReportName']) {
            this.preferredReportName = new fhir.FhirString({ value: source.preferredReportName });
        }
        if (source['_preferredReportName']) {
            if (this.preferredReportName) {
                this.preferredReportName.addExtendedProperties(source._preferredReportName);
            }
            else {
                this.preferredReportName = new fhir.FhirString(source._preferredReportName);
            }
        }
        if (source['quantitativeDetails']) {
            this.quantitativeDetails = new fhir.ObservationDefinitionQuantitativeDetails(source.quantitativeDetails);
        }
        if (source['qualifiedInterval']) {
            this.qualifiedInterval = source.qualifiedInterval.map((x) => new fhir.ObservationDefinitionQualifiedInterval(x));
        }
        else {
            this.qualifiedInterval = [];
        }
        if (source['validCodedValueSet']) {
            this.validCodedValueSet = new fhir.Reference(source.validCodedValueSet);
        }
        if (source['normalCodedValueSet']) {
            this.normalCodedValueSet = new fhir.Reference(source.normalCodedValueSet);
        }
        if (source['abnormalCodedValueSet']) {
            this.abnormalCodedValueSet = new fhir.Reference(source.abnormalCodedValueSet);
        }
        if (source['criticalCodedValueSet']) {
            this.criticalCodedValueSet = new fhir.Reference(source.criticalCodedValueSet);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'ObservationDefinition';
        }
        this.vReqS('resourceType', expression);
        this.vOptA('category', expression);
        this.vReqS('code', expression);
        this.vOptA('identifier', expression);
        this.vOptAV('permittedDataType', expression, 'PermittedDataType', PermittedDataTypeVsValidation, 'r');
        this.vOptS('multipleResultsAllowed', expression);
        this.vOptS('method', expression);
        this.vOptS('preferredReportName', expression);
        this.vOptS('quantitativeDetails', expression);
        this.vOptA('qualifiedInterval', expression);
        this.vOptS('validCodedValueSet', expression);
        this.vOptS('normalCodedValueSet', expression);
        this.vOptS('abnormalCodedValueSet', expression);
        this.vOptS('criticalCodedValueSet', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ObservationDefinition._fts_dataType = 'ObservationDefinition';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT2JzZXJ2YXRpb25EZWZpbml0aW9uLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9PYnNlcnZhdGlvbkRlZmluaXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsdUNBQXVDO0FBRXZDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBUW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsb0NBQW9DLEVBQUUsTUFBTSwwREFBMEQsQ0FBQztBQVdoSCxhQUFhO0FBQ2IsT0FBTyxFQUFFLGdDQUFnQyxFQUFFLE1BQU0sc0RBQXNELENBQUM7QUFXeEcsYUFBYTtBQUNiLE9BQU8sRUFBRSw2QkFBNkIsRUFBRSxNQUFNLG1EQUFtRCxDQUFDO0FBbUNsRzs7R0FFRztBQUNILE1BQU0sT0FBTyx3Q0FBeUMsU0FBUSxJQUFJLENBQUMsZUFBZTtJQXFCaEY7O09BRUc7SUFDSCxZQUFZLFNBQStELEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQ3JILEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLENBQUMsZUFBZSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUM7U0FBRTtRQUNyRyxJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUFFO1FBQzFFLElBQUksTUFBTSxDQUFDLGtCQUFrQixDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxnQkFBZ0IsRUFBQyxDQUFDLENBQUM7U0FBRTtRQUNuSCxJQUFJLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxFQUFFO1lBQy9CLElBQUksSUFBSSxDQUFDLGdCQUFnQixFQUFFO2dCQUFFLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsaUJBQWtCLENBQUMsQ0FBQzthQUFFO2lCQUNqRztnQkFBRSxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxpQkFBa0QsQ0FBQyxDQUFDO2FBQUU7U0FDbEg7UUFDRCxJQUFJLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsZ0JBQWdCLEVBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDbkgsSUFBSSxNQUFNLENBQUMsbUJBQW1CLENBQUMsRUFBRTtZQUMvQixJQUFJLElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtnQkFBRSxJQUFJLENBQUMsZ0JBQWdCLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLGlCQUFrQixDQUFDLENBQUM7YUFBRTtpQkFDakc7Z0JBQUUsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsaUJBQWtELENBQUMsQ0FBQzthQUFFO1NBQ2xIO0lBQ0gsQ0FBQztJQUNEOztPQUVHO0lBQ2EsaUJBQWlCLENBQUMsYUFBb0IsRUFBRTtRQUN0RCxJQUFJLE1BQU0sR0FBbUIsS0FBSyxDQUFDLGlCQUFpQixDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ2pFLElBQUksVUFBVSxLQUFLLEVBQUUsRUFBRTtZQUFFLFVBQVUsR0FBRywyQ0FBMkMsQ0FBQTtTQUFFO1FBQ25GLElBQUksQ0FBQyxLQUFLLENBQUMsZUFBZSxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ3RDLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQzdCLElBQUksQ0FBQyxLQUFLLENBQUMsa0JBQWtCLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDekMsSUFBSSxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUN6QyxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQWpERDs7R0FFRztBQUM2QixzREFBYSxHQUFVLDBDQUEwQyxDQUFDO0FBa0dwRzs7R0FFRztBQUNILE1BQU0sT0FBTyxzQ0FBdUMsU0FBUSxJQUFJLENBQUMsZUFBZTtJQXFDOUU7O09BRUc7SUFDSCxZQUFZLFNBQTZELEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQ25ILEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBbUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLFFBQVEsRUFBQyxDQUFDLENBQUM7U0FBRTtRQUMxSCxJQUFJLE1BQU0sQ0FBQyxXQUFXLENBQUMsRUFBRTtZQUN2QixJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7Z0JBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsU0FBVSxDQUFDLENBQUM7YUFBRTtpQkFDekU7Z0JBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQW1DLE1BQU0sQ0FBQyxTQUFtQyxDQUFDLENBQUM7YUFBRTtTQUMxSDtRQUNELElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQUU7UUFDbkUsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7U0FBRTtRQUNuRixJQUFJLE1BQU0sQ0FBQyxXQUFXLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDbEc7WUFBRSxJQUFJLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQztTQUFFO1FBQzdCLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQStCLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxNQUFNLEVBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDaEgsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFDckIsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO2dCQUFFLElBQUksQ0FBQyxNQUFNLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLE9BQVEsQ0FBQyxDQUFDO2FBQUU7aUJBQ25FO2dCQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUErQixNQUFNLENBQUMsT0FBaUMsQ0FBQyxDQUFDO2FBQUU7U0FDbEg7UUFDRCxJQUFJLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUFFO1FBQzdELElBQUksTUFBTSxDQUFDLGdCQUFnQixDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUM7U0FBRTtRQUM5RixJQUFJLE1BQU0sQ0FBQyxXQUFXLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxTQUFTLEVBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDN0YsSUFBSSxNQUFNLENBQUMsWUFBWSxDQUFDLEVBQUU7WUFDeEIsSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFO2dCQUFFLElBQUksQ0FBQyxTQUFTLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLFVBQVcsQ0FBQyxDQUFDO2FBQUU7aUJBQzVFO2dCQUFFLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxVQUEwQyxDQUFDLENBQUM7YUFBRTtTQUNsRztJQUNILENBQUM7SUFDRDs7T0FFRztJQUNhLGlCQUFpQixDQUFDLGFBQW9CLEVBQUU7UUFDdEQsSUFBSSxNQUFNLEdBQW1CLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNqRSxJQUFJLFVBQVUsS0FBSyxFQUFFLEVBQUU7WUFBRSxVQUFVLEdBQUcseUNBQXlDLENBQUE7U0FBRTtRQUNqRixJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBQyxVQUFVLEVBQUMsMEJBQTBCLEVBQUMsb0NBQW9DLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDdEcsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDOUIsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDaEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDbEMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUMsVUFBVSxFQUFDLHNCQUFzQixFQUFDLGdDQUFnQyxFQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQzVGLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQzVCLElBQUksQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDdkMsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDbEMsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQzs7QUE5RUQ7O0dBRUc7QUFDNkIsb0RBQWEsR0FBVSx3Q0FBd0MsQ0FBQztBQXVKbEc7O0dBRUc7QUFDSCxNQUFNLE9BQU8scUJBQXNCLFNBQVEsSUFBSSxDQUFDLGNBQWM7SUE2RDVEOztPQUVHO0lBQ0gsWUFBWSxTQUE0QyxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUNsRyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxZQUFZLEdBQUcsdUJBQXVCLENBQUM7UUFDNUMsSUFBSSxNQUFNLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQy9GO1lBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7U0FBRTtRQUM1QixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUFFO2FBQ3JFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7U0FBRTtRQUMxQixJQUFJLE1BQU0sQ0FBQyxZQUFZLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDaEc7WUFBRSxJQUFJLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQztTQUFFO1FBQzlCLElBQUksTUFBTSxDQUFDLG1CQUFtQixDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsaUJBQWlCLEdBQUcsTUFBTSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUE0QixFQUFDLEtBQUssRUFBRSxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUN2SjtZQUFFLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxFQUFFLENBQUM7U0FBRTtRQUNyQyxJQUFJLE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxFQUFFO1lBQ2hDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUU7Z0JBQ3hDLElBQUksSUFBSSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7b0JBQUUsSUFBSSxDQUFDLEVBQUU7d0JBQUUsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFDLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxDQUFDO3FCQUFFO2lCQUFFO3FCQUNyRztvQkFBRSxJQUFJLENBQUMsRUFBRTt3QkFBRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBNEIsQ0FBMkIsQ0FBQyxDQUFDLENBQUM7cUJBQUU7aUJBQUU7WUFDN0gsQ0FBQyxDQUFDLENBQUM7U0FDSjtRQUNELElBQUksTUFBTSxDQUFDLHdCQUF3QixDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsc0JBQXNCLEdBQUcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxzQkFBc0IsRUFBQyxDQUFDLENBQUM7U0FBRTtRQUNySSxJQUFJLE1BQU0sQ0FBQyx5QkFBeUIsQ0FBQyxFQUFFO1lBQ3JDLElBQUksSUFBSSxDQUFDLHNCQUFzQixFQUFFO2dCQUFFLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsdUJBQXdCLENBQUMsQ0FBQzthQUFFO2lCQUNuSDtnQkFBRSxJQUFJLENBQUMsc0JBQXNCLEdBQUcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyx1QkFBd0QsQ0FBQyxDQUFDO2FBQUU7U0FDOUg7UUFDRCxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUFFO1FBQ2hGLElBQUksTUFBTSxDQUFDLHFCQUFxQixDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsbUJBQW1CLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxtQkFBbUIsRUFBQyxDQUFDLENBQUM7U0FBRTtRQUMzSCxJQUFJLE1BQU0sQ0FBQyxzQkFBc0IsQ0FBQyxFQUFFO1lBQ2xDLElBQUksSUFBSSxDQUFDLG1CQUFtQixFQUFFO2dCQUFFLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsb0JBQXFCLENBQUMsQ0FBQzthQUFFO2lCQUMxRztnQkFBRSxJQUFJLENBQUMsbUJBQW1CLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxvQkFBb0QsQ0FBQyxDQUFDO2FBQUU7U0FDdEg7UUFDRCxJQUFJLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLG1CQUFtQixHQUFHLElBQUksSUFBSSxDQUFDLHdDQUF3QyxDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1NBQUU7UUFDaEosSUFBSSxNQUFNLENBQUMsbUJBQW1CLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxNQUFNLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxzQ0FBc0MsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDako7WUFBRSxJQUFJLENBQUMsaUJBQWlCLEdBQUcsRUFBRSxDQUFDO1NBQUU7UUFDckMsSUFBSSxNQUFNLENBQUMsb0JBQW9CLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLGtCQUFrQixDQUFDLENBQUM7U0FBRTtRQUM5RyxJQUFJLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLG1CQUFtQixHQUFHLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsbUJBQW1CLENBQUMsQ0FBQztTQUFFO1FBQ2pILElBQUksTUFBTSxDQUFDLHVCQUF1QixDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMscUJBQXFCLEdBQUcsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO1NBQUU7UUFDdkgsSUFBSSxNQUFNLENBQUMsdUJBQXVCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxxQkFBcUIsR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLHFCQUFxQixDQUFDLENBQUM7U0FBRTtJQUN6SCxDQUFDO0lBQ0Q7O09BRUc7SUFDYSxpQkFBaUIsQ0FBQyxhQUFvQixFQUFFO1FBQ3RELElBQUksTUFBTSxHQUFtQixLQUFLLENBQUMsaUJBQWlCLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDakUsSUFBSSxVQUFVLEtBQUssRUFBRSxFQUFFO1lBQUUsVUFBVSxHQUFHLHVCQUF1QixDQUFBO1NBQUU7UUFDL0QsSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDckMsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDakMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDN0IsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDbkMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsRUFBQyxVQUFVLEVBQUMsbUJBQW1CLEVBQUMsNkJBQTZCLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDakcsSUFBSSxDQUFDLEtBQUssQ0FBQyx3QkFBd0IsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUMvQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUMvQixJQUFJLENBQUMsS0FBSyxDQUFDLHFCQUFxQixFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQzVDLElBQUksQ0FBQyxLQUFLLENBQUMscUJBQXFCLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDNUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxtQkFBbUIsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUMxQyxJQUFJLENBQUMsS0FBSyxDQUFDLG9CQUFvQixFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQzNDLElBQUksQ0FBQyxLQUFLLENBQUMscUJBQXFCLEVBQUMsVUFBVSxDQUFDLENBQUE7UUFDNUMsSUFBSSxDQUFDLEtBQUssQ0FBQyx1QkFBdUIsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUM5QyxJQUFJLENBQUMsS0FBSyxDQUFDLHVCQUF1QixFQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQzlDLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBeEhEOztHQUVHO0FBQzZCLG1DQUFhLEdBQVUsdUJBQXVCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjQuY29yZSB2ZXJzaW9uOiA0LjAuMVxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IE9ic2VydmF0aW9uRGVmaW5pdGlvblxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgVWN1bVVuaXRzQ29kZXMsICBVY3VtVW5pdHNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVWN1bVVuaXRzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFVjdW1Vbml0c1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVWN1bVVuaXRzVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBPYnNlcnZhdGlvblJhbmdlQ2F0ZWdvcnlDb2RlcywgIE9ic2VydmF0aW9uUmFuZ2VDYXRlZ29yeUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9PYnNlcnZhdGlvblJhbmdlQ2F0ZWdvcnlDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgT2JzZXJ2YXRpb25SYW5nZUNhdGVnb3J5VnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9PYnNlcnZhdGlvblJhbmdlQ2F0ZWdvcnlWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFJlZmVyZW5jZXJhbmdlTWVhbmluZ0NvZGVzLCAgUmVmZXJlbmNlcmFuZ2VNZWFuaW5nQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1JlZmVyZW5jZXJhbmdlTWVhbmluZ0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBSZWZlcmVuY2VyYW5nZU1lYW5pbmdWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1JlZmVyZW5jZXJhbmdlTWVhbmluZ1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUmVmZXJlbmNlcmFuZ2VBcHBsaWVzdG9Db2RlcywgIFJlZmVyZW5jZXJhbmdlQXBwbGllc3RvQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1JlZmVyZW5jZXJhbmdlQXBwbGllc3RvQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFJlZmVyZW5jZXJhbmdlQXBwbGllc3RvVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9SZWZlcmVuY2VyYW5nZUFwcGxpZXN0b1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQWRtaW5pc3RyYXRpdmVHZW5kZXJDb2RlcywgIEFkbWluaXN0cmF0aXZlR2VuZGVyQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0FkbWluaXN0cmF0aXZlR2VuZGVyQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFkbWluaXN0cmF0aXZlR2VuZGVyVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BZG1pbmlzdHJhdGl2ZUdlbmRlclZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgT2JzZXJ2YXRpb25DYXRlZ29yeUNvZGVzLCAgT2JzZXJ2YXRpb25DYXRlZ29yeUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9PYnNlcnZhdGlvbkNhdGVnb3J5Q29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE9ic2VydmF0aW9uQ2F0ZWdvcnlWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL09ic2VydmF0aW9uQ2F0ZWdvcnlWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE9ic2VydmF0aW9uQ29kZXMsICBPYnNlcnZhdGlvbkNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9PYnNlcnZhdGlvbkNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBPYnNlcnZhdGlvblZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvT2JzZXJ2YXRpb25Wc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFBlcm1pdHRlZERhdGFUeXBlQ29kZXMsICBQZXJtaXR0ZWREYXRhVHlwZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9QZXJtaXR0ZWREYXRhVHlwZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBQZXJtaXR0ZWREYXRhVHlwZVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUGVybWl0dGVkRGF0YVR5cGVWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE9ic2VydmF0aW9uTWV0aG9kc0NvZGVzLCAgT2JzZXJ2YXRpb25NZXRob2RzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL09ic2VydmF0aW9uTWV0aG9kc0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBPYnNlcnZhdGlvbk1ldGhvZHNWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL09ic2VydmF0aW9uTWV0aG9kc1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBPYnNlcnZhdGlvbkRlZmluaXRpb25RdWFudGl0YXRpdmVEZXRhaWxzIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE9ic2VydmF0aW9uRGVmaW5pdGlvblF1YW50aXRhdGl2ZURldGFpbHNBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBDdXN0b21hcnkgdW5pdCB1c2VkIHRvIHJlcG9ydCBxdWFudGl0YXRpdmUgcmVzdWx0cyBvZiBvYnNlcnZhdGlvbnMgY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBjdXN0b21hcnlVbml0PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTSSB1bml0IHVzZWQgdG8gcmVwb3J0IHF1YW50aXRhdGl2ZSByZXN1bHRzIG9mIG9ic2VydmF0aW9ucyBjb25mb3JtaW5nIHRvIHRoaXMgT2JzZXJ2YXRpb25EZWZpbml0aW9uLlxyXG4gICAqL1xyXG4gIHVuaXQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEZhY3RvciBmb3IgY29udmVydGluZyB2YWx1ZSBleHByZXNzZWQgd2l0aCBTSSB1bml0IHRvIHZhbHVlIGV4cHJlc3NlZCB3aXRoIGN1c3RvbWFyeSB1bml0LlxyXG4gICAqL1xyXG4gIGNvbnZlcnNpb25GYWN0b3I/OiBmaGlyLkZoaXJEZWNpbWFsfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE9ic2VydmF0aW9uRGVmaW5pdGlvbi5xdWFudGl0YXRpdmVEZXRhaWxzLmNvbnZlcnNpb25GYWN0b3JcclxuICAgKi9cclxuICBfY29udmVyc2lvbkZhY3Rvcj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogTnVtYmVyIG9mIGRpZ2l0cyBhZnRlciBkZWNpbWFsIHNlcGFyYXRvciB3aGVuIHRoZSByZXN1bHRzIG9mIHN1Y2ggb2JzZXJ2YXRpb25zIGFyZSBvZiB0eXBlIFF1YW50aXR5LlxyXG4gICAqL1xyXG4gIGRlY2ltYWxQcmVjaXNpb24/OiBmaGlyLkZoaXJJbnRlZ2VyfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE9ic2VydmF0aW9uRGVmaW5pdGlvbi5xdWFudGl0YXRpdmVEZXRhaWxzLmRlY2ltYWxQcmVjaXNpb25cclxuICAgKi9cclxuICBfZGVjaW1hbFByZWNpc2lvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGFyYWN0ZXJpc3RpY3MgZm9yIHF1YW50aXRhdGl2ZSByZXN1bHRzIG9mIHRoaXMgb2JzZXJ2YXRpb24uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgT2JzZXJ2YXRpb25EZWZpbml0aW9uUXVhbnRpdGF0aXZlRGV0YWlscyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ09ic2VydmF0aW9uRGVmaW5pdGlvblF1YW50aXRhdGl2ZURldGFpbHMnO1xyXG4gIC8qKlxyXG4gICAqIEN1c3RvbWFyeSB1bml0IHVzZWQgdG8gcmVwb3J0IHF1YW50aXRhdGl2ZSByZXN1bHRzIG9mIG9ic2VydmF0aW9ucyBjb25mb3JtaW5nIHRvIHRoaXMgT2JzZXJ2YXRpb25EZWZpbml0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjdXN0b21hcnlVbml0PzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFNJIHVuaXQgdXNlZCB0byByZXBvcnQgcXVhbnRpdGF0aXZlIHJlc3VsdHMgb2Ygb2JzZXJ2YXRpb25zIGNvbmZvcm1pbmcgdG8gdGhpcyBPYnNlcnZhdGlvbkRlZmluaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHVuaXQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRmFjdG9yIGZvciBjb252ZXJ0aW5nIHZhbHVlIGV4cHJlc3NlZCB3aXRoIFNJIHVuaXQgdG8gdmFsdWUgZXhwcmVzc2VkIHdpdGggY3VzdG9tYXJ5IHVuaXQuXHJcbiAgICovXHJcbiAgcHVibGljIGNvbnZlcnNpb25GYWN0b3I/OiBmaGlyLkZoaXJEZWNpbWFsfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBOdW1iZXIgb2YgZGlnaXRzIGFmdGVyIGRlY2ltYWwgc2VwYXJhdG9yIHdoZW4gdGhlIHJlc3VsdHMgb2Ygc3VjaCBvYnNlcnZhdGlvbnMgYXJlIG9mIHR5cGUgUXVhbnRpdHkuXHJcbiAgICovXHJcbiAgcHVibGljIGRlY2ltYWxQcmVjaXNpb24/OiBmaGlyLkZoaXJJbnRlZ2VyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBPYnNlcnZhdGlvbkRlZmluaXRpb25RdWFudGl0YXRpdmVEZXRhaWxzIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8T2JzZXJ2YXRpb25EZWZpbml0aW9uUXVhbnRpdGF0aXZlRGV0YWlsc0FyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydjdXN0b21hcnlVbml0J10pIHsgdGhpcy5jdXN0b21hcnlVbml0ID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jdXN0b21hcnlVbml0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndW5pdCddKSB7IHRoaXMudW5pdCA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UudW5pdCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvbnZlcnNpb25GYWN0b3InXSkgeyB0aGlzLmNvbnZlcnNpb25GYWN0b3IgPSBuZXcgZmhpci5GaGlyRGVjaW1hbCh7dmFsdWU6IHNvdXJjZS5jb252ZXJzaW9uRmFjdG9yfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19jb252ZXJzaW9uRmFjdG9yJ10pIHtcclxuICAgICAgaWYgKHRoaXMuY29udmVyc2lvbkZhY3RvcikgeyB0aGlzLmNvbnZlcnNpb25GYWN0b3IuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fY29udmVyc2lvbkZhY3RvciEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmNvbnZlcnNpb25GYWN0b3IgPSBuZXcgZmhpci5GaGlyRGVjaW1hbChzb3VyY2UuX2NvbnZlcnNpb25GYWN0b3IgYXMgUGFydGlhbDxmaGlyLkZoaXJEZWNpbWFsQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydkZWNpbWFsUHJlY2lzaW9uJ10pIHsgdGhpcy5kZWNpbWFsUHJlY2lzaW9uID0gbmV3IGZoaXIuRmhpckludGVnZXIoe3ZhbHVlOiBzb3VyY2UuZGVjaW1hbFByZWNpc2lvbn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfZGVjaW1hbFByZWNpc2lvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLmRlY2ltYWxQcmVjaXNpb24pIHsgdGhpcy5kZWNpbWFsUHJlY2lzaW9uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2RlY2ltYWxQcmVjaXNpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5kZWNpbWFsUHJlY2lzaW9uID0gbmV3IGZoaXIuRmhpckludGVnZXIoc291cmNlLl9kZWNpbWFsUHJlY2lzaW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlySW50ZWdlckFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdPYnNlcnZhdGlvbkRlZmluaXRpb24ucXVhbnRpdGF0aXZlRGV0YWlscycgfVxyXG4gICAgdGhpcy52T3B0UygnY3VzdG9tYXJ5VW5pdCcsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ3VuaXQnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdjb252ZXJzaW9uRmFjdG9yJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnZGVjaW1hbFByZWNpc2lvbicsZXhwcmVzc2lvbilcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBPYnNlcnZhdGlvbkRlZmluaXRpb25RdWFsaWZpZWRJbnRlcnZhbCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBPYnNlcnZhdGlvbkRlZmluaXRpb25RdWFsaWZpZWRJbnRlcnZhbEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjYXRlZ29yeSBvZiBpbnRlcnZhbCBvZiB2YWx1ZXMgZm9yIGNvbnRpbnVvdXMgb3Igb3JkaW5hbCBvYnNlcnZhdGlvbnMgY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBjYXRlZ29yeT86IGZoaXIuRmhpckNvZGU8T2JzZXJ2YXRpb25SYW5nZUNhdGVnb3J5Q29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE9ic2VydmF0aW9uRGVmaW5pdGlvbi5xdWFsaWZpZWRJbnRlcnZhbC5jYXRlZ29yeVxyXG4gICAqL1xyXG4gIF9jYXRlZ29yeT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGxvdyBhbmQgaGlnaCB2YWx1ZXMgZGV0ZXJtaW5pbmcgdGhlIGludGVydmFsLiBUaGVyZSBtYXkgYmUgb25seSBvbmUgb2YgdGhlIHR3by5cclxuICAgKi9cclxuICByYW5nZT86IGZoaXIuUmFuZ2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDb2RlcyB0byBpbmRpY2F0ZSB0aGUgaGVhbHRoIGNvbnRleHQgdGhlIHJhbmdlIGFwcGxpZXMgdG8uIEZvciBleGFtcGxlLCB0aGUgbm9ybWFsIG9yIHRoZXJhcGV1dGljIHJhbmdlLlxyXG4gICAqL1xyXG4gIGNvbnRleHQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIHRoaXMgZWxlbWVudCBpcyBub3QgcHJlc2VudCB0aGVuIHRoZSBnbG9iYWwgcG9wdWxhdGlvbiBpcyBhc3N1bWVkLlxyXG4gICAqL1xyXG4gIGFwcGxpZXNUbz86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTZXggb2YgdGhlIHBvcHVsYXRpb24gdGhlIHJhbmdlIGFwcGxpZXMgdG8uXHJcbiAgICovXHJcbiAgZ2VuZGVyPzogZmhpci5GaGlyQ29kZTxBZG1pbmlzdHJhdGl2ZUdlbmRlckNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBPYnNlcnZhdGlvbkRlZmluaXRpb24ucXVhbGlmaWVkSW50ZXJ2YWwuZ2VuZGVyXHJcbiAgICovXHJcbiAgX2dlbmRlcj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogU29tZSBhbmFseXRlcyB2YXJ5IGdyZWF0bHkgb3ZlciBhZ2UuXHJcbiAgICovXHJcbiAgYWdlPzogZmhpci5SYW5nZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBnZXN0YXRpb25hbCBhZ2UgdG8gd2hpY2ggdGhpcyByZWZlcmVuY2UgcmFuZ2UgaXMgYXBwbGljYWJsZSwgaW4gdGhlIGNvbnRleHQgb2YgcHJlZ25hbmN5LlxyXG4gICAqL1xyXG4gIGdlc3RhdGlvbmFsQWdlPzogZmhpci5SYW5nZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRleHQgYmFzZWQgY29uZGl0aW9uIGZvciB3aGljaCB0aGUgcmVmZXJlbmNlIHJhbmdlIGlzIHZhbGlkLlxyXG4gICAqL1xyXG4gIGNvbmRpdGlvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBPYnNlcnZhdGlvbkRlZmluaXRpb24ucXVhbGlmaWVkSW50ZXJ2YWwuY29uZGl0aW9uXHJcbiAgICovXHJcbiAgX2NvbmRpdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNdWx0aXBsZSAgcmFuZ2VzIG9mIHJlc3VsdHMgcXVhbGlmaWVkIGJ5IGRpZmZlcmVudCBjb250ZXh0cyBmb3Igb3JkaW5hbCBvciBjb250aW51b3VzIG9ic2VydmF0aW9ucyBjb25mb3JtaW5nIHRvIHRoaXMgT2JzZXJ2YXRpb25EZWZpbml0aW9uLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE9ic2VydmF0aW9uRGVmaW5pdGlvblF1YWxpZmllZEludGVydmFsIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnT2JzZXJ2YXRpb25EZWZpbml0aW9uUXVhbGlmaWVkSW50ZXJ2YWwnO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjYXRlZ29yeSBvZiBpbnRlcnZhbCBvZiB2YWx1ZXMgZm9yIGNvbnRpbnVvdXMgb3Igb3JkaW5hbCBvYnNlcnZhdGlvbnMgY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgY2F0ZWdvcnk/OiBmaGlyLkZoaXJDb2RlPE9ic2VydmF0aW9uUmFuZ2VDYXRlZ29yeUNvZGVUeXBlPnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGxvdyBhbmQgaGlnaCB2YWx1ZXMgZGV0ZXJtaW5pbmcgdGhlIGludGVydmFsLiBUaGVyZSBtYXkgYmUgb25seSBvbmUgb2YgdGhlIHR3by5cclxuICAgKi9cclxuICBwdWJsaWMgcmFuZ2U/OiBmaGlyLlJhbmdlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDb2RlcyB0byBpbmRpY2F0ZSB0aGUgaGVhbHRoIGNvbnRleHQgdGhlIHJhbmdlIGFwcGxpZXMgdG8uIEZvciBleGFtcGxlLCB0aGUgbm9ybWFsIG9yIHRoZXJhcGV1dGljIHJhbmdlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb250ZXh0PzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIHRoaXMgZWxlbWVudCBpcyBub3QgcHJlc2VudCB0aGVuIHRoZSBnbG9iYWwgcG9wdWxhdGlvbiBpcyBhc3N1bWVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhcHBsaWVzVG86IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogU2V4IG9mIHRoZSBwb3B1bGF0aW9uIHRoZSByYW5nZSBhcHBsaWVzIHRvLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZW5kZXI/OiBmaGlyLkZoaXJDb2RlPEFkbWluaXN0cmF0aXZlR2VuZGVyQ29kZVR5cGU+fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTb21lIGFuYWx5dGVzIHZhcnkgZ3JlYXRseSBvdmVyIGFnZS5cclxuICAgKi9cclxuICBwdWJsaWMgYWdlPzogZmhpci5SYW5nZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGdlc3RhdGlvbmFsIGFnZSB0byB3aGljaCB0aGlzIHJlZmVyZW5jZSByYW5nZSBpcyBhcHBsaWNhYmxlLCBpbiB0aGUgY29udGV4dCBvZiBwcmVnbmFuY3kuXHJcbiAgICovXHJcbiAgcHVibGljIGdlc3RhdGlvbmFsQWdlPzogZmhpci5SYW5nZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGV4dCBiYXNlZCBjb25kaXRpb24gZm9yIHdoaWNoIHRoZSByZWZlcmVuY2UgcmFuZ2UgaXMgdmFsaWQuXHJcbiAgICovXHJcbiAgcHVibGljIGNvbmRpdGlvbj86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgT2JzZXJ2YXRpb25EZWZpbml0aW9uUXVhbGlmaWVkSW50ZXJ2YWwgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxPYnNlcnZhdGlvbkRlZmluaXRpb25RdWFsaWZpZWRJbnRlcnZhbEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydjYXRlZ29yeSddKSB7IHRoaXMuY2F0ZWdvcnkgPSBuZXcgZmhpci5GaGlyQ29kZTxPYnNlcnZhdGlvblJhbmdlQ2F0ZWdvcnlDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2UuY2F0ZWdvcnl9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2NhdGVnb3J5J10pIHtcclxuICAgICAgaWYgKHRoaXMuY2F0ZWdvcnkpIHsgdGhpcy5jYXRlZ29yeS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9jYXRlZ29yeSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmNhdGVnb3J5ID0gbmV3IGZoaXIuRmhpckNvZGU8T2JzZXJ2YXRpb25SYW5nZUNhdGVnb3J5Q29kZVR5cGU+KHNvdXJjZS5fY2F0ZWdvcnkgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3JhbmdlJ10pIHsgdGhpcy5yYW5nZSA9IG5ldyBmaGlyLlJhbmdlKHNvdXJjZS5yYW5nZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvbnRleHQnXSkgeyB0aGlzLmNvbnRleHQgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmNvbnRleHQpOyB9XHJcbiAgICBpZiAoc291cmNlWydhcHBsaWVzVG8nXSkgeyB0aGlzLmFwcGxpZXNUbyA9IHNvdXJjZS5hcHBsaWVzVG8ubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5hcHBsaWVzVG8gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZ2VuZGVyJ10pIHsgdGhpcy5nZW5kZXIgPSBuZXcgZmhpci5GaGlyQ29kZTxBZG1pbmlzdHJhdGl2ZUdlbmRlckNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5nZW5kZXJ9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2dlbmRlciddKSB7XHJcbiAgICAgIGlmICh0aGlzLmdlbmRlcikgeyB0aGlzLmdlbmRlci5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9nZW5kZXIhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5nZW5kZXIgPSBuZXcgZmhpci5GaGlyQ29kZTxBZG1pbmlzdHJhdGl2ZUdlbmRlckNvZGVUeXBlPihzb3VyY2UuX2dlbmRlciBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnYWdlJ10pIHsgdGhpcy5hZ2UgPSBuZXcgZmhpci5SYW5nZShzb3VyY2UuYWdlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZ2VzdGF0aW9uYWxBZ2UnXSkgeyB0aGlzLmdlc3RhdGlvbmFsQWdlID0gbmV3IGZoaXIuUmFuZ2Uoc291cmNlLmdlc3RhdGlvbmFsQWdlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29uZGl0aW9uJ10pIHsgdGhpcy5jb25kaXRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmNvbmRpdGlvbn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfY29uZGl0aW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMuY29uZGl0aW9uKSB7IHRoaXMuY29uZGl0aW9uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2NvbmRpdGlvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmNvbmRpdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9jb25kaXRpb24gYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb246c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24pO1xyXG4gICAgaWYgKGV4cHJlc3Npb24gPT09ICcnKSB7IGV4cHJlc3Npb24gPSAnT2JzZXJ2YXRpb25EZWZpbml0aW9uLnF1YWxpZmllZEludGVydmFsJyB9XHJcbiAgICB0aGlzLnZPcHRTVignY2F0ZWdvcnknLGV4cHJlc3Npb24sJ09ic2VydmF0aW9uUmFuZ2VDYXRlZ29yeScsT2JzZXJ2YXRpb25SYW5nZUNhdGVnb3J5VnNWYWxpZGF0aW9uLCdyJylcclxuICAgIHRoaXMudk9wdFMoJ3JhbmdlJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnY29udGV4dCcsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdEEoJ2FwcGxpZXNUbycsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFNWKCdnZW5kZXInLGV4cHJlc3Npb24sJ0FkbWluaXN0cmF0aXZlR2VuZGVyJyxBZG1pbmlzdHJhdGl2ZUdlbmRlclZzVmFsaWRhdGlvbiwncicpXHJcbiAgICB0aGlzLnZPcHRTKCdhZ2UnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdnZXN0YXRpb25hbEFnZScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ2NvbmRpdGlvbicsZXhwcmVzc2lvbilcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBPYnNlcnZhdGlvbkRlZmluaXRpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgT2JzZXJ2YXRpb25EZWZpbml0aW9uQXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiT2JzZXJ2YXRpb25EZWZpbml0aW9uXCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBhbGxvd3MgdmFyaW91cyBjYXRlZ29yaXphdGlvbiBzY2hlbWVzIGJhc2VkIG9uIHRoZSBvd25lcuKAmXMgZGVmaW5pdGlvbiBvZiB0aGUgY2F0ZWdvcnkgYW5kIGVmZmVjdGl2ZWx5IG11bHRpcGxlIGNhdGVnb3JpZXMgY2FuIGJlIHVzZWQgZm9yIG9uZSBpbnN0YW5jZSBvZiBPYnNlcnZhdGlvbkRlZmluaXRpb24uIFRoZSBsZXZlbCBvZiBncmFudWxhcml0eSBpcyBkZWZpbmVkIGJ5IHRoZSBjYXRlZ29yeSBjb25jZXB0cyBpbiB0aGUgdmFsdWUgc2V0LlxyXG4gICAqL1xyXG4gIGNhdGVnb3J5PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB3aGF0IHdpbGwgYmUgb2JzZXJ2ZWQuIFNvbWV0aW1lcyB0aGlzIGlzIGNhbGxlZCB0aGUgb2JzZXJ2YXRpb24gXCJuYW1lXCIuXHJcbiAgICovXHJcbiAgY29kZTogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogQSB1bmlxdWUgaWRlbnRpZmllciBhc3NpZ25lZCB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbiBhcnRpZmFjdC5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0YSB0eXBlcyBhbGxvd2VkIGZvciB0aGUgdmFsdWUgZWxlbWVudCBvZiB0aGUgaW5zdGFuY2Ugb2JzZXJ2YXRpb25zIGNvbmZvcm1pbmcgdG8gdGhpcyBPYnNlcnZhdGlvbkRlZmluaXRpb24uXHJcbiAgICovXHJcbiAgcGVybWl0dGVkRGF0YVR5cGU/OiBmaGlyLkZoaXJDb2RlPFBlcm1pdHRlZERhdGFUeXBlQ29kZVR5cGU+W118KHN0cmluZ3xudWxsKVtdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogT2JzZXJ2YXRpb25EZWZpbml0aW9uLnBlcm1pdHRlZERhdGFUeXBlXHJcbiAgICovXHJcbiAgX3Blcm1pdHRlZERhdGFUeXBlPzooZmhpci5GaGlyRWxlbWVudEFyZ3N8bnVsbClbXTtcclxuICAvKipcclxuICAgKiBBbiBleGFtcGxlIG9mIG9ic2VydmF0aW9uIGFsbG93aW5nIG11bHRpcGxlIHJlc3VsdHMgaXMgXCJiYWN0ZXJpYSBpZGVudGlmaWVkIGJ5IGN1bHR1cmVcIi4gQ29udmVyc2VseSwgdGhlIG1lYXN1cmVtZW50IG9mIGEgcG90YXNzaXVtIGxldmVsIGFsbG93cyBhIHNpbmdsZSByZXN1bHQuXHJcbiAgICovXHJcbiAgbXVsdGlwbGVSZXN1bHRzQWxsb3dlZD86IGZoaXIuRmhpckJvb2xlYW58Ym9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE9ic2VydmF0aW9uRGVmaW5pdGlvbi5tdWx0aXBsZVJlc3VsdHNBbGxvd2VkXHJcbiAgICovXHJcbiAgX211bHRpcGxlUmVzdWx0c0FsbG93ZWQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIE9ubHkgdXNlZCBpZiBub3QgaW1wbGljaXQgaW4gb2JzZXJ2YXRpb24gY29kZS5cclxuICAgKi9cclxuICBtZXRob2Q/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwcmVmZXJyZWQgbmFtZSB0byBiZSB1c2VkIHdoZW4gcmVwb3J0aW5nIHRoZSByZXN1bHRzIG9mIG9ic2VydmF0aW9ucyBjb25mb3JtaW5nIHRvIHRoaXMgT2JzZXJ2YXRpb25EZWZpbml0aW9uLlxyXG4gICAqL1xyXG4gIHByZWZlcnJlZFJlcG9ydE5hbWU/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogT2JzZXJ2YXRpb25EZWZpbml0aW9uLnByZWZlcnJlZFJlcG9ydE5hbWVcclxuICAgKi9cclxuICBfcHJlZmVycmVkUmVwb3J0TmFtZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQ2hhcmFjdGVyaXN0aWNzIGZvciBxdWFudGl0YXRpdmUgcmVzdWx0cyBvZiB0aGlzIG9ic2VydmF0aW9uLlxyXG4gICAqL1xyXG4gIHF1YW50aXRhdGl2ZURldGFpbHM/OiBmaGlyLk9ic2VydmF0aW9uRGVmaW5pdGlvblF1YW50aXRhdGl2ZURldGFpbHNBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBNdWx0aXBsZSAgcmFuZ2VzIG9mIHJlc3VsdHMgcXVhbGlmaWVkIGJ5IGRpZmZlcmVudCBjb250ZXh0cyBmb3Igb3JkaW5hbCBvciBjb250aW51b3VzIG9ic2VydmF0aW9ucyBjb25mb3JtaW5nIHRvIHRoaXMgT2JzZXJ2YXRpb25EZWZpbml0aW9uLlxyXG4gICAqL1xyXG4gIHF1YWxpZmllZEludGVydmFsPzogZmhpci5PYnNlcnZhdGlvbkRlZmluaXRpb25RdWFsaWZpZWRJbnRlcnZhbEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNldCBvZiB2YWxpZCBjb2RlZCByZXN1bHRzIGZvciB0aGUgb2JzZXJ2YXRpb25zICBjb25mb3JtaW5nIHRvIHRoaXMgT2JzZXJ2YXRpb25EZWZpbml0aW9uLlxyXG4gICAqL1xyXG4gIHZhbGlkQ29kZWRWYWx1ZVNldD86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNldCBvZiBub3JtYWwgY29kZWQgcmVzdWx0cyBmb3IgdGhlIG9ic2VydmF0aW9ucyBjb25mb3JtaW5nIHRvIHRoaXMgT2JzZXJ2YXRpb25EZWZpbml0aW9uLlxyXG4gICAqL1xyXG4gIG5vcm1hbENvZGVkVmFsdWVTZXQ/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzZXQgb2YgYWJub3JtYWwgY29kZWQgcmVzdWx0cyBmb3IgdGhlIG9ic2VydmF0aW9uIGNvbmZvcm1pbmcgdG8gdGhpcyBPYnNlcnZhdGlvbkRlZmluaXRpb24uXHJcbiAgICovXHJcbiAgYWJub3JtYWxDb2RlZFZhbHVlU2V0PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc2V0IG9mIGNyaXRpY2FsIGNvZGVkIHJlc3VsdHMgZm9yIHRoZSBvYnNlcnZhdGlvbiBjb25mb3JtaW5nIHRvIHRoaXMgT2JzZXJ2YXRpb25EZWZpbml0aW9uLlxyXG4gICAqL1xyXG4gIGNyaXRpY2FsQ29kZWRWYWx1ZVNldD86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgb2YgZGVmaW5pdGlvbmFsIGNoYXJhY3RlcmlzdGljcyBmb3IgYSBraW5kIG9mIG9ic2VydmF0aW9uIG9yIG1lYXN1cmVtZW50IHByb2R1Y2VkIG9yIGNvbnN1bWVkIGJ5IGFuIG9yZGVyYWJsZSBoZWFsdGggY2FyZSBzZXJ2aWNlLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE9ic2VydmF0aW9uRGVmaW5pdGlvbiBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnT2JzZXJ2YXRpb25EZWZpbml0aW9uJztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIk9ic2VydmF0aW9uRGVmaW5pdGlvblwiO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBhbGxvd3MgdmFyaW91cyBjYXRlZ29yaXphdGlvbiBzY2hlbWVzIGJhc2VkIG9uIHRoZSBvd25lcuKAmXMgZGVmaW5pdGlvbiBvZiB0aGUgY2F0ZWdvcnkgYW5kIGVmZmVjdGl2ZWx5IG11bHRpcGxlIGNhdGVnb3JpZXMgY2FuIGJlIHVzZWQgZm9yIG9uZSBpbnN0YW5jZSBvZiBPYnNlcnZhdGlvbkRlZmluaXRpb24uIFRoZSBsZXZlbCBvZiBncmFudWxhcml0eSBpcyBkZWZpbmVkIGJ5IHRoZSBjYXRlZ29yeSBjb25jZXB0cyBpbiB0aGUgdmFsdWUgc2V0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjYXRlZ29yeTogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgd2hhdCB3aWxsIGJlIG9ic2VydmVkLiBTb21ldGltZXMgdGhpcyBpcyBjYWxsZWQgdGhlIG9ic2VydmF0aW9uIFwibmFtZVwiLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb2RlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEEgdW5pcXVlIGlkZW50aWZpZXIgYXNzaWduZWQgdG8gdGhpcyBPYnNlcnZhdGlvbkRlZmluaXRpb24gYXJ0aWZhY3QuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI6IGZoaXIuSWRlbnRpZmllcltdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRhIHR5cGVzIGFsbG93ZWQgZm9yIHRoZSB2YWx1ZSBlbGVtZW50IG9mIHRoZSBpbnN0YW5jZSBvYnNlcnZhdGlvbnMgY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgcGVybWl0dGVkRGF0YVR5cGU6IGZoaXIuRmhpckNvZGU8UGVybWl0dGVkRGF0YVR5cGVDb2RlVHlwZT5bXTtcclxuICAvKipcclxuICAgKiBBbiBleGFtcGxlIG9mIG9ic2VydmF0aW9uIGFsbG93aW5nIG11bHRpcGxlIHJlc3VsdHMgaXMgXCJiYWN0ZXJpYSBpZGVudGlmaWVkIGJ5IGN1bHR1cmVcIi4gQ29udmVyc2VseSwgdGhlIG1lYXN1cmVtZW50IG9mIGEgcG90YXNzaXVtIGxldmVsIGFsbG93cyBhIHNpbmdsZSByZXN1bHQuXHJcbiAgICovXHJcbiAgcHVibGljIG11bHRpcGxlUmVzdWx0c0FsbG93ZWQ/OiBmaGlyLkZoaXJCb29sZWFufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBPbmx5IHVzZWQgaWYgbm90IGltcGxpY2l0IGluIG9ic2VydmF0aW9uIGNvZGUuXHJcbiAgICovXHJcbiAgcHVibGljIG1ldGhvZD86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcHJlZmVycmVkIG5hbWUgdG8gYmUgdXNlZCB3aGVuIHJlcG9ydGluZyB0aGUgcmVzdWx0cyBvZiBvYnNlcnZhdGlvbnMgY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgcHJlZmVycmVkUmVwb3J0TmFtZT86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ2hhcmFjdGVyaXN0aWNzIGZvciBxdWFudGl0YXRpdmUgcmVzdWx0cyBvZiB0aGlzIG9ic2VydmF0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBxdWFudGl0YXRpdmVEZXRhaWxzPzogZmhpci5PYnNlcnZhdGlvbkRlZmluaXRpb25RdWFudGl0YXRpdmVEZXRhaWxzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBNdWx0aXBsZSAgcmFuZ2VzIG9mIHJlc3VsdHMgcXVhbGlmaWVkIGJ5IGRpZmZlcmVudCBjb250ZXh0cyBmb3Igb3JkaW5hbCBvciBjb250aW51b3VzIG9ic2VydmF0aW9ucyBjb25mb3JtaW5nIHRvIHRoaXMgT2JzZXJ2YXRpb25EZWZpbml0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBxdWFsaWZpZWRJbnRlcnZhbDogZmhpci5PYnNlcnZhdGlvbkRlZmluaXRpb25RdWFsaWZpZWRJbnRlcnZhbFtdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzZXQgb2YgdmFsaWQgY29kZWQgcmVzdWx0cyBmb3IgdGhlIG9ic2VydmF0aW9ucyAgY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgdmFsaWRDb2RlZFZhbHVlU2V0PzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzZXQgb2Ygbm9ybWFsIGNvZGVkIHJlc3VsdHMgZm9yIHRoZSBvYnNlcnZhdGlvbnMgY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgbm9ybWFsQ29kZWRWYWx1ZVNldD86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc2V0IG9mIGFibm9ybWFsIGNvZGVkIHJlc3VsdHMgZm9yIHRoZSBvYnNlcnZhdGlvbiBjb25mb3JtaW5nIHRvIHRoaXMgT2JzZXJ2YXRpb25EZWZpbml0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhYm5vcm1hbENvZGVkVmFsdWVTZXQ/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNldCBvZiBjcml0aWNhbCBjb2RlZCByZXN1bHRzIGZvciB0aGUgb2JzZXJ2YXRpb24gY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgY3JpdGljYWxDb2RlZFZhbHVlU2V0PzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE9ic2VydmF0aW9uRGVmaW5pdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE9ic2VydmF0aW9uRGVmaW5pdGlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdPYnNlcnZhdGlvbkRlZmluaXRpb24nO1xyXG4gICAgaWYgKHNvdXJjZVsnY2F0ZWdvcnknXSkgeyB0aGlzLmNhdGVnb3J5ID0gc291cmNlLmNhdGVnb3J5Lm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY2F0ZWdvcnkgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY29kZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvZGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gc291cmNlLmlkZW50aWZpZXIubWFwKCh4KSA9PiBuZXcgZmhpci5JZGVudGlmaWVyKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaWRlbnRpZmllciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwZXJtaXR0ZWREYXRhVHlwZSddKSB7IHRoaXMucGVybWl0dGVkRGF0YVR5cGUgPSBzb3VyY2UucGVybWl0dGVkRGF0YVR5cGUubWFwKCh4KSA9PiBuZXcgZmhpci5GaGlyQ29kZTxQZXJtaXR0ZWREYXRhVHlwZUNvZGVUeXBlPih7dmFsdWU6IHh9KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnBlcm1pdHRlZERhdGFUeXBlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ19wZXJtaXR0ZWREYXRhVHlwZSddKSB7XHJcbiAgICAgIHNvdXJjZS5fcGVybWl0dGVkRGF0YVR5cGUuZm9yRWFjaCgoeCxpKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMucGVybWl0dGVkRGF0YVR5cGUubGVuZ3RoID49IGkpIHsgaWYgKHgpIHsgdGhpcy5wZXJtaXR0ZWREYXRhVHlwZVtpXS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoeCk7IH0gfVxyXG4gICAgICAgIGVsc2UgeyBpZiAoeCkgeyB0aGlzLnBlcm1pdHRlZERhdGFUeXBlLnB1c2gobmV3IGZoaXIuRmhpckNvZGU8UGVybWl0dGVkRGF0YVR5cGVDb2RlVHlwZT4oeCBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KSk7IH0gfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ211bHRpcGxlUmVzdWx0c0FsbG93ZWQnXSkgeyB0aGlzLm11bHRpcGxlUmVzdWx0c0FsbG93ZWQgPSBuZXcgZmhpci5GaGlyQm9vbGVhbih7dmFsdWU6IHNvdXJjZS5tdWx0aXBsZVJlc3VsdHNBbGxvd2VkfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19tdWx0aXBsZVJlc3VsdHNBbGxvd2VkJ10pIHtcclxuICAgICAgaWYgKHRoaXMubXVsdGlwbGVSZXN1bHRzQWxsb3dlZCkgeyB0aGlzLm11bHRpcGxlUmVzdWx0c0FsbG93ZWQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbXVsdGlwbGVSZXN1bHRzQWxsb3dlZCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLm11bHRpcGxlUmVzdWx0c0FsbG93ZWQgPSBuZXcgZmhpci5GaGlyQm9vbGVhbihzb3VyY2UuX211bHRpcGxlUmVzdWx0c0FsbG93ZWQgYXMgUGFydGlhbDxmaGlyLkZoaXJCb29sZWFuQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydtZXRob2QnXSkgeyB0aGlzLm1ldGhvZCA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UubWV0aG9kKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJlZmVycmVkUmVwb3J0TmFtZSddKSB7IHRoaXMucHJlZmVycmVkUmVwb3J0TmFtZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UucHJlZmVycmVkUmVwb3J0TmFtZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfcHJlZmVycmVkUmVwb3J0TmFtZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnByZWZlcnJlZFJlcG9ydE5hbWUpIHsgdGhpcy5wcmVmZXJyZWRSZXBvcnROYW1lLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3ByZWZlcnJlZFJlcG9ydE5hbWUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5wcmVmZXJyZWRSZXBvcnROYW1lID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3ByZWZlcnJlZFJlcG9ydE5hbWUgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3F1YW50aXRhdGl2ZURldGFpbHMnXSkgeyB0aGlzLnF1YW50aXRhdGl2ZURldGFpbHMgPSBuZXcgZmhpci5PYnNlcnZhdGlvbkRlZmluaXRpb25RdWFudGl0YXRpdmVEZXRhaWxzKHNvdXJjZS5xdWFudGl0YXRpdmVEZXRhaWxzKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncXVhbGlmaWVkSW50ZXJ2YWwnXSkgeyB0aGlzLnF1YWxpZmllZEludGVydmFsID0gc291cmNlLnF1YWxpZmllZEludGVydmFsLm1hcCgoeCkgPT4gbmV3IGZoaXIuT2JzZXJ2YXRpb25EZWZpbml0aW9uUXVhbGlmaWVkSW50ZXJ2YWwoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5xdWFsaWZpZWRJbnRlcnZhbCA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWyd2YWxpZENvZGVkVmFsdWVTZXQnXSkgeyB0aGlzLnZhbGlkQ29kZWRWYWx1ZVNldCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UudmFsaWRDb2RlZFZhbHVlU2V0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbm9ybWFsQ29kZWRWYWx1ZVNldCddKSB7IHRoaXMubm9ybWFsQ29kZWRWYWx1ZVNldCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2Uubm9ybWFsQ29kZWRWYWx1ZVNldCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2Fibm9ybWFsQ29kZWRWYWx1ZVNldCddKSB7IHRoaXMuYWJub3JtYWxDb2RlZFZhbHVlU2V0ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5hYm5vcm1hbENvZGVkVmFsdWVTZXQpOyB9XHJcbiAgICBpZiAoc291cmNlWydjcml0aWNhbENvZGVkVmFsdWVTZXQnXSkgeyB0aGlzLmNyaXRpY2FsQ29kZWRWYWx1ZVNldCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuY3JpdGljYWxDb2RlZFZhbHVlU2V0KTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdPYnNlcnZhdGlvbkRlZmluaXRpb24nIH1cclxuICAgIHRoaXMudlJlcVMoJ3Jlc291cmNlVHlwZScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdEEoJ2NhdGVnb3J5JyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52UmVxUygnY29kZScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdEEoJ2lkZW50aWZpZXInLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRBVigncGVybWl0dGVkRGF0YVR5cGUnLGV4cHJlc3Npb24sJ1Blcm1pdHRlZERhdGFUeXBlJyxQZXJtaXR0ZWREYXRhVHlwZVZzVmFsaWRhdGlvbiwncicpXHJcbiAgICB0aGlzLnZPcHRTKCdtdWx0aXBsZVJlc3VsdHNBbGxvd2VkJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnbWV0aG9kJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygncHJlZmVycmVkUmVwb3J0TmFtZScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ3F1YW50aXRhdGl2ZURldGFpbHMnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRBKCdxdWFsaWZpZWRJbnRlcnZhbCcsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ3ZhbGlkQ29kZWRWYWx1ZVNldCcsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ25vcm1hbENvZGVkVmFsdWVTZXQnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdhYm5vcm1hbENvZGVkVmFsdWVTZXQnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdjcml0aWNhbENvZGVkVmFsdWVTZXQnLGV4cHJlc3Npb24pXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=