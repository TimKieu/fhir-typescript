// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: ObservationDefinition
import * as fhir from '../fhir.js';
// @ts-ignore
import { UcumUnitsCodings, } from '../fhirValueSets/UcumUnitsCodings.js';
// @ts-ignore
import { ObservationRangeCategoryCodes } from '../fhirValueSets/ObservationRangeCategoryCodes.js';
// @ts-ignore
import { ReferencerangeMeaningCodings, } from '../fhirValueSets/ReferencerangeMeaningCodings.js';
// @ts-ignore
import { AdministrativeGenderCodes } from '../fhirValueSets/AdministrativeGenderCodes.js';
// @ts-ignore
import { PermittedDataTypeCodes } from '../fhirValueSets/PermittedDataTypeCodes.js';
/**
 * Characteristics for quantitative results of this observation.
 */
export class ObservationDefinitionQuantitativeDetails extends fhir.BackboneElement {
    /**
     * Default constructor for ObservationDefinitionQuantitativeDetails - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['customaryUnit']) {
            this.customaryUnit = new fhir.CodeableConcept(source.customaryUnit);
        }
        if (source['unit']) {
            this.unit = new fhir.CodeableConcept(source.unit);
        }
        if (source['conversionFactor']) {
            this.conversionFactor = new fhir.FhirDecimal({ value: source.conversionFactor });
        }
        if (source['decimalPrecision']) {
            this.decimalPrecision = new fhir.FhirInteger({ value: source.decimalPrecision });
        }
    }
    /**
     * Extensible-bound Value Set for customaryUnit (ObservationDefinition.quantitativeDetails.customaryUnit)
     */
    static get customaryUnitExtensibleCodings() {
        return UcumUnitsCodings;
    }
    /**
     * Extensible-bound Value Set for unit (ObservationDefinition.quantitativeDetails.unit)
     */
    static get unitExtensibleCodings() {
        return UcumUnitsCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["customaryUnit"]) {
            issues.push(...this.customaryUnit.doModelValidation());
        }
        if (this["unit"]) {
            issues.push(...this.unit.doModelValidation());
        }
        if (this["conversionFactor"]) {
            issues.push(...this.conversionFactor.doModelValidation());
        }
        if (this["decimalPrecision"]) {
            issues.push(...this.decimalPrecision.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ObservationDefinitionQuantitativeDetails._fts_dataType = 'ObservationDefinitionQuantitativeDetails';
/**
 * Multiple  ranges of results qualified by different contexts for ordinal or continuous observations conforming to this ObservationDefinition.
 */
export class ObservationDefinitionQualifiedInterval extends fhir.BackboneElement {
    /**
     * Default constructor for ObservationDefinitionQualifiedInterval - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['category']) {
            this.category = new fhir.FhirCode({ value: source.category });
        }
        if (source['range']) {
            this.range = new fhir.Range(source.range);
        }
        if (source['context']) {
            this.context = new fhir.CodeableConcept(source.context);
        }
        if (source['appliesTo']) {
            this.appliesTo = source.appliesTo.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.appliesTo = [];
        }
        if (source['gender']) {
            this.gender = new fhir.FhirCode({ value: source.gender });
        }
        if (source['age']) {
            this.age = new fhir.Range(source.age);
        }
        if (source['gestationalAge']) {
            this.gestationalAge = new fhir.Range(source.gestationalAge);
        }
        if (source['condition']) {
            this.condition = new fhir.FhirString({ value: source.condition });
        }
    }
    /**
     * Required-bound Value Set for category (ObservationDefinition.qualifiedInterval.category)
     */
    static get categoryRequiredCodes() {
        return ObservationRangeCategoryCodes;
    }
    /**
     * Extensible-bound Value Set for context (ObservationDefinition.qualifiedInterval.context)
     */
    static get contextExtensibleCodings() {
        return ReferencerangeMeaningCodings;
    }
    /**
     * Required-bound Value Set for gender (ObservationDefinition.qualifiedInterval.gender)
     */
    static get genderRequiredCodes() {
        return AdministrativeGenderCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this['category'] && (!Object.values(ObservationRangeCategoryCodes).includes(this.category))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property category?:fhir.FhirCode<ObservationRangeCategoryCodeType> fhir: ObservationDefinition.qualifiedInterval.category:code Required binding to: ObservationRangeCategory' });
        }
        if (this["category"]) {
            issues.push(...this.category.doModelValidation());
        }
        if (this["range"]) {
            issues.push(...this.range.doModelValidation());
        }
        if (this["context"]) {
            issues.push(...this.context.doModelValidation());
        }
        if (this["appliesTo"]) {
            this.appliesTo.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this['gender'] && (!Object.values(AdministrativeGenderCodes).includes(this.gender))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property gender?:fhir.FhirCode<AdministrativeGenderCodeType> fhir: ObservationDefinition.qualifiedInterval.gender:code Required binding to: AdministrativeGender' });
        }
        if (this["gender"]) {
            issues.push(...this.gender.doModelValidation());
        }
        if (this["age"]) {
            issues.push(...this.age.doModelValidation());
        }
        if (this["gestationalAge"]) {
            issues.push(...this.gestationalAge.doModelValidation());
        }
        if (this["condition"]) {
            issues.push(...this.condition.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ObservationDefinitionQualifiedInterval._fts_dataType = 'ObservationDefinitionQualifiedInterval';
/**
 * Set of definitional characteristics for a kind of observation or measurement produced or consumed by an orderable health care service.
 */
export class ObservationDefinition extends fhir.DomainResource {
    /**
     * Default constructor for ObservationDefinition - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'ObservationDefinition';
        if (source['category']) {
            this.category = source.category.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.category = [];
        }
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        else {
            this.code = null;
        }
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['permittedDataType']) {
            this.permittedDataType = source.permittedDataType.map((x) => new fhir.FhirCode({ value: x }));
        }
        else {
            this.permittedDataType = [];
        }
        if (source['multipleResultsAllowed']) {
            this.multipleResultsAllowed = new fhir.FhirBoolean({ value: source.multipleResultsAllowed });
        }
        if (source['method']) {
            this.method = new fhir.CodeableConcept(source.method);
        }
        if (source['preferredReportName']) {
            this.preferredReportName = new fhir.FhirString({ value: source.preferredReportName });
        }
        if (source['quantitativeDetails']) {
            this.quantitativeDetails = new fhir.ObservationDefinitionQuantitativeDetails(source.quantitativeDetails);
        }
        if (source['qualifiedInterval']) {
            this.qualifiedInterval = source.qualifiedInterval.map((x) => new fhir.ObservationDefinitionQualifiedInterval(x));
        }
        else {
            this.qualifiedInterval = [];
        }
        if (source['validCodedValueSet']) {
            this.validCodedValueSet = new fhir.Reference(source.validCodedValueSet);
        }
        if (source['normalCodedValueSet']) {
            this.normalCodedValueSet = new fhir.Reference(source.normalCodedValueSet);
        }
        if (source['abnormalCodedValueSet']) {
            this.abnormalCodedValueSet = new fhir.Reference(source.abnormalCodedValueSet);
        }
        if (source['criticalCodedValueSet']) {
            this.criticalCodedValueSet = new fhir.Reference(source.criticalCodedValueSet);
        }
    }
    /**
     * Required-bound Value Set for permittedDataType (ObservationDefinition.permittedDataType)
     */
    static get permittedDataTypeRequiredCodes() {
        return PermittedDataTypeCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType:"ObservationDefinition" fhir: ObservationDefinition.resourceType:"ObservationDefinition"' });
        }
        if (this["category"]) {
            this.category.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (!this['code']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property code:fhir.CodeableConcept fhir: ObservationDefinition.code:CodeableConcept' });
        }
        if (this["code"]) {
            issues.push(...this.code.doModelValidation());
        }
        if (this["identifier"]) {
            this.identifier.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this['permittedDataType']) {
            this.permittedDataType.forEach((v) => {
                if (!Object.values(PermittedDataTypeCodes).includes(v)) {
                    issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property permittedDataType?:fhir.FhirCode<PermittedDataTypeCodeType>[] fhir: ObservationDefinition.permittedDataType:code Required binding to: PermittedDataType' });
                }
            });
        }
        if (this["permittedDataType"]) {
            this.permittedDataType.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["multipleResultsAllowed"]) {
            issues.push(...this.multipleResultsAllowed.doModelValidation());
        }
        if (this["method"]) {
            issues.push(...this.method.doModelValidation());
        }
        if (this["preferredReportName"]) {
            issues.push(...this.preferredReportName.doModelValidation());
        }
        if (this["quantitativeDetails"]) {
            issues.push(...this.quantitativeDetails.doModelValidation());
        }
        if (this["qualifiedInterval"]) {
            this.qualifiedInterval.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["validCodedValueSet"]) {
            issues.push(...this.validCodedValueSet.doModelValidation());
        }
        if (this["normalCodedValueSet"]) {
            issues.push(...this.normalCodedValueSet.doModelValidation());
        }
        if (this["abnormalCodedValueSet"]) {
            issues.push(...this.abnormalCodedValueSet.doModelValidation());
        }
        if (this["criticalCodedValueSet"]) {
            issues.push(...this.criticalCodedValueSet.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ObservationDefinition._fts_dataType = 'ObservationDefinition';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT2JzZXJ2YXRpb25EZWZpbml0aW9uLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9PYnNlcnZhdGlvbkRlZmluaXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsdUNBQXVDO0FBRXZDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBRW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsZ0JBQWdCLEdBQXVCLE1BQU0sc0NBQXNDLENBQUM7QUFLN0YsYUFBYTtBQUNiLE9BQU8sRUFBRSw2QkFBNkIsRUFBcUMsTUFBTSxtREFBbUQsQ0FBQztBQUNySSxhQUFhO0FBQ2IsT0FBTyxFQUFFLDRCQUE0QixHQUFtQyxNQUFNLGtEQUFrRCxDQUFDO0FBU2pJLGFBQWE7QUFDYixPQUFPLEVBQUUseUJBQXlCLEVBQWlDLE1BQU0sK0NBQStDLENBQUM7QUFXekgsYUFBYTtBQUNiLE9BQU8sRUFBRSxzQkFBc0IsRUFBOEIsTUFBTSw0Q0FBNEMsQ0FBQztBQTJCaEg7O0dBRUc7QUFDSCxNQUFNLE9BQU8sd0NBQXlDLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFxQmhGOztPQUVHO0lBQ0gsWUFBWSxTQUErRCxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUNySCxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLGVBQWUsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1NBQUU7UUFDckcsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7U0FBRTtRQUMxRSxJQUFJLE1BQU0sQ0FB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Q0FBQyxHQUFHLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUNsRyxJQUFJLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtTQUFFO1FBQ3BILElBQUksSUFBSSxDQUFDLG9CQUFvQixDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQ2hHLElBQUksSUFBSSxDQUFDLHFCQUFxQixDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQ2xHLElBQUksSUFBSSxDQUFDLHVCQUF1QixDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQ3RHLElBQUksSUFBSSxDQUFDLHVCQUF1QixDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQ3RHLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBM0hEOztHQUVHO0FBQzZCLG1DQUFhLEdBQVUsdUJBQXVCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjQuY29yZSB2ZXJzaW9uOiA0LjAuMVxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IE9ic2VydmF0aW9uRGVmaW5pdGlvblxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgVWN1bVVuaXRzQ29kaW5ncywgVWN1bVVuaXRzQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVWN1bVVuaXRzQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgVWN1bVVuaXRzQ29kZXMsICBVY3VtVW5pdHNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVWN1bVVuaXRzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE9ic2VydmF0aW9uUmFuZ2VDYXRlZ29yeUNvZGluZ3MsIE9ic2VydmF0aW9uUmFuZ2VDYXRlZ29yeUNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL09ic2VydmF0aW9uUmFuZ2VDYXRlZ29yeUNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE9ic2VydmF0aW9uUmFuZ2VDYXRlZ29yeUNvZGVzLCAgT2JzZXJ2YXRpb25SYW5nZUNhdGVnb3J5Q29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL09ic2VydmF0aW9uUmFuZ2VDYXRlZ29yeUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBSZWZlcmVuY2VyYW5nZU1lYW5pbmdDb2RpbmdzLCBSZWZlcmVuY2VyYW5nZU1lYW5pbmdDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9SZWZlcmVuY2VyYW5nZU1lYW5pbmdDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBSZWZlcmVuY2VyYW5nZU1lYW5pbmdDb2RlcywgIFJlZmVyZW5jZXJhbmdlTWVhbmluZ0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9SZWZlcmVuY2VyYW5nZU1lYW5pbmdDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUmVmZXJlbmNlcmFuZ2VBcHBsaWVzdG9Db2RpbmdzLCBSZWZlcmVuY2VyYW5nZUFwcGxpZXN0b0NvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1JlZmVyZW5jZXJhbmdlQXBwbGllc3RvQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUmVmZXJlbmNlcmFuZ2VBcHBsaWVzdG9Db2RlcywgIFJlZmVyZW5jZXJhbmdlQXBwbGllc3RvQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1JlZmVyZW5jZXJhbmdlQXBwbGllc3RvQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFkbWluaXN0cmF0aXZlR2VuZGVyQ29kaW5ncywgQWRtaW5pc3RyYXRpdmVHZW5kZXJDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BZG1pbmlzdHJhdGl2ZUdlbmRlckNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFkbWluaXN0cmF0aXZlR2VuZGVyQ29kZXMsICBBZG1pbmlzdHJhdGl2ZUdlbmRlckNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BZG1pbmlzdHJhdGl2ZUdlbmRlckNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBPYnNlcnZhdGlvbkNhdGVnb3J5Q29kaW5ncywgT2JzZXJ2YXRpb25DYXRlZ29yeUNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL09ic2VydmF0aW9uQ2F0ZWdvcnlDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBPYnNlcnZhdGlvbkNhdGVnb3J5Q29kZXMsICBPYnNlcnZhdGlvbkNhdGVnb3J5Q29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL09ic2VydmF0aW9uQ2F0ZWdvcnlDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgT2JzZXJ2YXRpb25Db2Rlc0NvZGluZ3MsIE9ic2VydmF0aW9uQ29kZXNDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9PYnNlcnZhdGlvbkNvZGVzQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgT2JzZXJ2YXRpb25Db2Rlc0NvZGVzLCAgT2JzZXJ2YXRpb25Db2Rlc0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9PYnNlcnZhdGlvbkNvZGVzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFBlcm1pdHRlZERhdGFUeXBlQ29kaW5ncywgUGVybWl0dGVkRGF0YVR5cGVDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9QZXJtaXR0ZWREYXRhVHlwZUNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFBlcm1pdHRlZERhdGFUeXBlQ29kZXMsICBQZXJtaXR0ZWREYXRhVHlwZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9QZXJtaXR0ZWREYXRhVHlwZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBPYnNlcnZhdGlvbk1ldGhvZHNDb2RpbmdzLCBPYnNlcnZhdGlvbk1ldGhvZHNDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9PYnNlcnZhdGlvbk1ldGhvZHNDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBPYnNlcnZhdGlvbk1ldGhvZHNDb2RlcywgIE9ic2VydmF0aW9uTWV0aG9kc0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9PYnNlcnZhdGlvbk1ldGhvZHNDb2Rlcy5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBPYnNlcnZhdGlvbkRlZmluaXRpb25RdWFudGl0YXRpdmVEZXRhaWxzIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE9ic2VydmF0aW9uRGVmaW5pdGlvblF1YW50aXRhdGl2ZURldGFpbHNBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBDdXN0b21hcnkgdW5pdCB1c2VkIHRvIHJlcG9ydCBxdWFudGl0YXRpdmUgcmVzdWx0cyBvZiBvYnNlcnZhdGlvbnMgY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBjdXN0b21hcnlVbml0PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTSSB1bml0IHVzZWQgdG8gcmVwb3J0IHF1YW50aXRhdGl2ZSByZXN1bHRzIG9mIG9ic2VydmF0aW9ucyBjb25mb3JtaW5nIHRvIHRoaXMgT2JzZXJ2YXRpb25EZWZpbml0aW9uLlxyXG4gICAqL1xyXG4gIHVuaXQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEZhY3RvciBmb3IgY29udmVydGluZyB2YWx1ZSBleHByZXNzZWQgd2l0aCBTSSB1bml0IHRvIHZhbHVlIGV4cHJlc3NlZCB3aXRoIGN1c3RvbWFyeSB1bml0LlxyXG4gICAqL1xyXG4gIGNvbnZlcnNpb25GYWN0b3I/OiBmaGlyLkZoaXJEZWNpbWFsfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTnVtYmVyIG9mIGRpZ2l0cyBhZnRlciBkZWNpbWFsIHNlcGFyYXRvciB3aGVuIHRoZSByZXN1bHRzIG9mIHN1Y2ggb2JzZXJ2YXRpb25zIGFyZSBvZiB0eXBlIFF1YW50aXR5LlxyXG4gICAqL1xyXG4gIGRlY2ltYWxQcmVjaXNpb24/OiBmaGlyLkZoaXJJbnRlZ2VyfG51bWJlcnx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGFyYWN0ZXJpc3RpY3MgZm9yIHF1YW50aXRhdGl2ZSByZXN1bHRzIG9mIHRoaXMgb2JzZXJ2YXRpb24uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgT2JzZXJ2YXRpb25EZWZpbml0aW9uUXVhbnRpdGF0aXZlRGV0YWlscyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ09ic2VydmF0aW9uRGVmaW5pdGlvblF1YW50aXRhdGl2ZURldGFpbHMnO1xyXG4gIC8qKlxyXG4gICAqIEN1c3RvbWFyeSB1bml0IHVzZWQgdG8gcmVwb3J0IHF1YW50aXRhdGl2ZSByZXN1bHRzIG9mIG9ic2VydmF0aW9ucyBjb25mb3JtaW5nIHRvIHRoaXMgT2JzZXJ2YXRpb25EZWZpbml0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjdXN0b21hcnlVbml0PzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFNJIHVuaXQgdXNlZCB0byByZXBvcnQgcXVhbnRpdGF0aXZlIHJlc3VsdHMgb2Ygb2JzZXJ2YXRpb25zIGNvbmZvcm1pbmcgdG8gdGhpcyBPYnNlcnZhdGlvbkRlZmluaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHVuaXQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRmFjdG9yIGZvciBjb252ZXJ0aW5nIHZhbHVlIGV4cHJlc3NlZCB3aXRoIFNJIHVuaXQgdG8gdmFsdWUgZXhwcmVzc2VkIHdpdGggY3VzdG9tYXJ5IHVuaXQuXHJcbiAgICovXHJcbiAgcHVibGljIGNvbnZlcnNpb25GYWN0b3I/OiBmaGlyLkZoaXJEZWNpbWFsfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBOdW1iZXIgb2YgZGlnaXRzIGFmdGVyIGRlY2ltYWwgc2VwYXJhdG9yIHdoZW4gdGhlIHJlc3VsdHMgb2Ygc3VjaCBvYnNlcnZhdGlvbnMgYXJlIG9mIHR5cGUgUXVhbnRpdHkuXHJcbiAgICovXHJcbiAgcHVibGljIGRlY2ltYWxQcmVjaXNpb24/OiBmaGlyLkZoaXJJbnRlZ2VyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBPYnNlcnZhdGlvbkRlZmluaXRpb25RdWFudGl0YXRpdmVEZXRhaWxzIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8T2JzZXJ2YXRpb25EZWZpbml0aW9uUXVhbnRpdGF0aXZlRGV0YWlsc0FyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydjdXN0b21hcnlVbml0J10pIHsgdGhpcy5jdXN0b21hcnlVbml0ID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jdXN0b21hcnlVbml0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndW5pdCddKSB7IHRoaXMudW5pdCA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UudW5pdCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvbnZlcnNpb25GYWN0b3InXSkgeyB0aGlzLmNvbnZlcnNpb25GYWN0b3IgPSBuZXcgZmhpci5GaGlyRGVjaW1hbCh7dmFsdWU6IHNvdXJjZS5jb252ZXJzaW9uRmFjdG9yfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2RlY2ltYWxQcmVjaXNpb24nXSkgeyB0aGlzLmRlY2ltYWxQcmVjaXNpb24gPSBuZXcgZmhpci5GaGlySW50ZWdlcih7dmFsdWU6IHNvdXJjZS5kZWNpbWFsUHJlY2lzaW9ufSk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5zaWJsZS1ib3VuZCBWYWx1ZSBTZXQgZm9yIGN1c3RvbWFyeVVuaXQgKE9ic2VydmF0aW9uRGVmaW5pdGlvbi5xdWFudGl0YXRpdmVEZXRhaWxzLmN1c3RvbWFyeVVuaXQpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgY3VzdG9tYXJ5VW5pdEV4dGVuc2libGVDb2RpbmdzKCkge1xyXG4gICAgcmV0dXJuIFVjdW1Vbml0c0NvZGluZ3M7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEV4dGVuc2libGUtYm91bmQgVmFsdWUgU2V0IGZvciB1bml0IChPYnNlcnZhdGlvbkRlZmluaXRpb24ucXVhbnRpdGF0aXZlRGV0YWlscy51bml0KVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IHVuaXRFeHRlbnNpYmxlQ29kaW5ncygpIHtcclxuICAgIHJldHVybiBVY3VtVW5pdHNDb2RpbmdzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKHRoaXNbXCJjdXN0b21hcnlVbml0XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY3VzdG9tYXJ5VW5pdC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJ1bml0XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMudW5pdC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJjb252ZXJzaW9uRmFjdG9yXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY29udmVyc2lvbkZhY3Rvci5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJkZWNpbWFsUHJlY2lzaW9uXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZGVjaW1hbFByZWNpc2lvbi5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE9ic2VydmF0aW9uRGVmaW5pdGlvblF1YWxpZmllZEludGVydmFsIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE9ic2VydmF0aW9uRGVmaW5pdGlvblF1YWxpZmllZEludGVydmFsQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNhdGVnb3J5IG9mIGludGVydmFsIG9mIHZhbHVlcyBmb3IgY29udGludW91cyBvciBvcmRpbmFsIG9ic2VydmF0aW9ucyBjb25mb3JtaW5nIHRvIHRoaXMgT2JzZXJ2YXRpb25EZWZpbml0aW9uLlxyXG4gICAqL1xyXG4gIGNhdGVnb3J5PzogZmhpci5GaGlyQ29kZTxPYnNlcnZhdGlvblJhbmdlQ2F0ZWdvcnlDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbG93IGFuZCBoaWdoIHZhbHVlcyBkZXRlcm1pbmluZyB0aGUgaW50ZXJ2YWwuIFRoZXJlIG1heSBiZSBvbmx5IG9uZSBvZiB0aGUgdHdvLlxyXG4gICAqL1xyXG4gIHJhbmdlPzogZmhpci5SYW5nZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENvZGVzIHRvIGluZGljYXRlIHRoZSBoZWFsdGggY29udGV4dCB0aGUgcmFuZ2UgYXBwbGllcyB0by4gRm9yIGV4YW1wbGUsIHRoZSBub3JtYWwgb3IgdGhlcmFwZXV0aWMgcmFuZ2UuXHJcbiAgICovXHJcbiAgY29udGV4dD86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhpcyBlbGVtZW50IGlzIG5vdCBwcmVzZW50IHRoZW4gdGhlIGdsb2JhbCBwb3B1bGF0aW9uIGlzIGFzc3VtZWQuXHJcbiAgICovXHJcbiAgYXBwbGllc1RvPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFNleCBvZiB0aGUgcG9wdWxhdGlvbiB0aGUgcmFuZ2UgYXBwbGllcyB0by5cclxuICAgKi9cclxuICBnZW5kZXI/OiBmaGlyLkZoaXJDb2RlPEFkbWluaXN0cmF0aXZlR2VuZGVyQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU29tZSBhbmFseXRlcyB2YXJ5IGdyZWF0bHkgb3ZlciBhZ2UuXHJcbiAgICovXHJcbiAgYWdlPzogZmhpci5SYW5nZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBnZXN0YXRpb25hbCBhZ2UgdG8gd2hpY2ggdGhpcyByZWZlcmVuY2UgcmFuZ2UgaXMgYXBwbGljYWJsZSwgaW4gdGhlIGNvbnRleHQgb2YgcHJlZ25hbmN5LlxyXG4gICAqL1xyXG4gIGdlc3RhdGlvbmFsQWdlPzogZmhpci5SYW5nZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRleHQgYmFzZWQgY29uZGl0aW9uIGZvciB3aGljaCB0aGUgcmVmZXJlbmNlIHJhbmdlIGlzIHZhbGlkLlxyXG4gICAqL1xyXG4gIGNvbmRpdGlvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogTXVsdGlwbGUgIHJhbmdlcyBvZiByZXN1bHRzIHF1YWxpZmllZCBieSBkaWZmZXJlbnQgY29udGV4dHMgZm9yIG9yZGluYWwgb3IgY29udGludW91cyBvYnNlcnZhdGlvbnMgY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBPYnNlcnZhdGlvbkRlZmluaXRpb25RdWFsaWZpZWRJbnRlcnZhbCBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ09ic2VydmF0aW9uRGVmaW5pdGlvblF1YWxpZmllZEludGVydmFsJztcclxuICAvKipcclxuICAgKiBUaGUgY2F0ZWdvcnkgb2YgaW50ZXJ2YWwgb2YgdmFsdWVzIGZvciBjb250aW51b3VzIG9yIG9yZGluYWwgb2JzZXJ2YXRpb25zIGNvbmZvcm1pbmcgdG8gdGhpcyBPYnNlcnZhdGlvbkRlZmluaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIGNhdGVnb3J5PzogZmhpci5GaGlyQ29kZTxPYnNlcnZhdGlvblJhbmdlQ2F0ZWdvcnlDb2RlVHlwZT58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsb3cgYW5kIGhpZ2ggdmFsdWVzIGRldGVybWluaW5nIHRoZSBpbnRlcnZhbC4gVGhlcmUgbWF5IGJlIG9ubHkgb25lIG9mIHRoZSB0d28uXHJcbiAgICovXHJcbiAgcHVibGljIHJhbmdlPzogZmhpci5SYW5nZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ29kZXMgdG8gaW5kaWNhdGUgdGhlIGhlYWx0aCBjb250ZXh0IHRoZSByYW5nZSBhcHBsaWVzIHRvLiBGb3IgZXhhbXBsZSwgdGhlIG5vcm1hbCBvciB0aGVyYXBldXRpYyByYW5nZS5cclxuICAgKi9cclxuICBwdWJsaWMgY29udGV4dD86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiB0aGlzIGVsZW1lbnQgaXMgbm90IHByZXNlbnQgdGhlbiB0aGUgZ2xvYmFsIHBvcHVsYXRpb24gaXMgYXNzdW1lZC5cclxuICAgKi9cclxuICBwdWJsaWMgYXBwbGllc1RvOiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIFNleCBvZiB0aGUgcG9wdWxhdGlvbiB0aGUgcmFuZ2UgYXBwbGllcyB0by5cclxuICAgKi9cclxuICBwdWJsaWMgZ2VuZGVyPzogZmhpci5GaGlyQ29kZTxBZG1pbmlzdHJhdGl2ZUdlbmRlckNvZGVUeXBlPnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU29tZSBhbmFseXRlcyB2YXJ5IGdyZWF0bHkgb3ZlciBhZ2UuXHJcbiAgICovXHJcbiAgcHVibGljIGFnZT86IGZoaXIuUmFuZ2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBnZXN0YXRpb25hbCBhZ2UgdG8gd2hpY2ggdGhpcyByZWZlcmVuY2UgcmFuZ2UgaXMgYXBwbGljYWJsZSwgaW4gdGhlIGNvbnRleHQgb2YgcHJlZ25hbmN5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXN0YXRpb25hbEFnZT86IGZoaXIuUmFuZ2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRleHQgYmFzZWQgY29uZGl0aW9uIGZvciB3aGljaCB0aGUgcmVmZXJlbmNlIHJhbmdlIGlzIHZhbGlkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25kaXRpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE9ic2VydmF0aW9uRGVmaW5pdGlvblF1YWxpZmllZEludGVydmFsIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8T2JzZXJ2YXRpb25EZWZpbml0aW9uUXVhbGlmaWVkSW50ZXJ2YWxBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnY2F0ZWdvcnknXSkgeyB0aGlzLmNhdGVnb3J5ID0gbmV3IGZoaXIuRmhpckNvZGU8T2JzZXJ2YXRpb25SYW5nZUNhdGVnb3J5Q29kZVR5cGU+KHt2YWx1ZTogc291cmNlLmNhdGVnb3J5fSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3JhbmdlJ10pIHsgdGhpcy5yYW5nZSA9IG5ldyBmaGlyLlJhbmdlKHNvdXJjZS5yYW5nZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvbnRleHQnXSkgeyB0aGlzLmNvbnRleHQgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmNvbnRleHQpOyB9XHJcbiAgICBpZiAoc291cmNlWydhcHBsaWVzVG8nXSkgeyB0aGlzLmFwcGxpZXNUbyA9IHNvdXJjZS5hcHBsaWVzVG8ubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5hcHBsaWVzVG8gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZ2VuZGVyJ10pIHsgdGhpcy5nZW5kZXIgPSBuZXcgZmhpci5GaGlyQ29kZTxBZG1pbmlzdHJhdGl2ZUdlbmRlckNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5nZW5kZXJ9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYWdlJ10pIHsgdGhpcy5hZ2UgPSBuZXcgZmhpci5SYW5nZShzb3VyY2UuYWdlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZ2VzdGF0aW9uYWxBZ2UnXSkgeyB0aGlzLmdlc3RhdGlvbmFsQWdlID0gbmV3IGZoaXIuUmFuZ2Uoc291cmNlLmdlc3RhdGlvbmFsQWdlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29uZGl0aW9uJ10pIHsgdGhpcy5jb25kaXRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmNvbmRpdGlvbn0pOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlcXVpcmVkLWJvdW5kIFZhbHVlIFNldCBmb3IgY2F0ZWdvcnkgKE9ic2VydmF0aW9uRGVmaW5pdGlvbi5xdWFsaWZpZWRJbnRlcnZhbC5jYXRlZ29yeSlcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCBjYXRlZ29yeVJlcXVpcmVkQ29kZXMoKSB7XHJcbiAgICByZXR1cm4gT2JzZXJ2YXRpb25SYW5nZUNhdGVnb3J5Q29kZXM7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEV4dGVuc2libGUtYm91bmQgVmFsdWUgU2V0IGZvciBjb250ZXh0IChPYnNlcnZhdGlvbkRlZmluaXRpb24ucXVhbGlmaWVkSW50ZXJ2YWwuY29udGV4dClcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCBjb250ZXh0RXh0ZW5zaWJsZUNvZGluZ3MoKSB7XHJcbiAgICByZXR1cm4gUmVmZXJlbmNlcmFuZ2VNZWFuaW5nQ29kaW5ncztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZWQtYm91bmQgVmFsdWUgU2V0IGZvciBnZW5kZXIgKE9ic2VydmF0aW9uRGVmaW5pdGlvbi5xdWFsaWZpZWRJbnRlcnZhbC5nZW5kZXIpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgZ2VuZGVyUmVxdWlyZWRDb2RlcygpIHtcclxuICAgIHJldHVybiBBZG1pbmlzdHJhdGl2ZUdlbmRlckNvZGVzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKHRoaXNbJ2NhdGVnb3J5J10gJiYgKCFPYmplY3QudmFsdWVzKE9ic2VydmF0aW9uUmFuZ2VDYXRlZ29yeUNvZGVzKS5pbmNsdWRlcyh0aGlzLmNhdGVnb3J5IGFzIGFueSkpKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdjb2RlLWludmFsaWQnLCBkaWFnbm9zdGljczogJ0ludmFsaWQgY29kZSBwcm9wZXJ0eSBjYXRlZ29yeT86Zmhpci5GaGlyQ29kZTxPYnNlcnZhdGlvblJhbmdlQ2F0ZWdvcnlDb2RlVHlwZT4gZmhpcjogT2JzZXJ2YXRpb25EZWZpbml0aW9uLnF1YWxpZmllZEludGVydmFsLmNhdGVnb3J5OmNvZGUgUmVxdWlyZWQgYmluZGluZyB0bzogT2JzZXJ2YXRpb25SYW5nZUNhdGVnb3J5JyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiY2F0ZWdvcnlcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5jYXRlZ29yeS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJyYW5nZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnJhbmdlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImNvbnRleHRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5jb250ZXh0LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImFwcGxpZXNUb1wiXSkgeyB0aGlzLmFwcGxpZXNUby5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzWydnZW5kZXInXSAmJiAoIU9iamVjdC52YWx1ZXMoQWRtaW5pc3RyYXRpdmVHZW5kZXJDb2RlcykuaW5jbHVkZXModGhpcy5nZW5kZXIgYXMgYW55KSkpIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ2NvZGUtaW52YWxpZCcsIGRpYWdub3N0aWNzOiAnSW52YWxpZCBjb2RlIHByb3BlcnR5IGdlbmRlcj86Zmhpci5GaGlyQ29kZTxBZG1pbmlzdHJhdGl2ZUdlbmRlckNvZGVUeXBlPiBmaGlyOiBPYnNlcnZhdGlvbkRlZmluaXRpb24ucXVhbGlmaWVkSW50ZXJ2YWwuZ2VuZGVyOmNvZGUgUmVxdWlyZWQgYmluZGluZyB0bzogQWRtaW5pc3RyYXRpdmVHZW5kZXInIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJnZW5kZXJcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5nZW5kZXIuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiYWdlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuYWdlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImdlc3RhdGlvbmFsQWdlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZ2VzdGF0aW9uYWxBZ2UuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiY29uZGl0aW9uXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY29uZGl0aW9uLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgT2JzZXJ2YXRpb25EZWZpbml0aW9uIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE9ic2VydmF0aW9uRGVmaW5pdGlvbkFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIk9ic2VydmF0aW9uRGVmaW5pdGlvblwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgYWxsb3dzIHZhcmlvdXMgY2F0ZWdvcml6YXRpb24gc2NoZW1lcyBiYXNlZCBvbiB0aGUgb3duZXLigJlzIGRlZmluaXRpb24gb2YgdGhlIGNhdGVnb3J5IGFuZCBlZmZlY3RpdmVseSBtdWx0aXBsZSBjYXRlZ29yaWVzIGNhbiBiZSB1c2VkIGZvciBvbmUgaW5zdGFuY2Ugb2YgT2JzZXJ2YXRpb25EZWZpbml0aW9uLiBUaGUgbGV2ZWwgb2YgZ3JhbnVsYXJpdHkgaXMgZGVmaW5lZCBieSB0aGUgY2F0ZWdvcnkgY29uY2VwdHMgaW4gdGhlIHZhbHVlIHNldC5cclxuICAgKi9cclxuICBjYXRlZ29yeT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgd2hhdCB3aWxsIGJlIG9ic2VydmVkLiBTb21ldGltZXMgdGhpcyBpcyBjYWxsZWQgdGhlIG9ic2VydmF0aW9uIFwibmFtZVwiLlxyXG4gICAqL1xyXG4gIGNvZGU6IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIEEgdW5pcXVlIGlkZW50aWZpZXIgYXNzaWduZWQgdG8gdGhpcyBPYnNlcnZhdGlvbkRlZmluaXRpb24gYXJ0aWZhY3QuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGEgdHlwZXMgYWxsb3dlZCBmb3IgdGhlIHZhbHVlIGVsZW1lbnQgb2YgdGhlIGluc3RhbmNlIG9ic2VydmF0aW9ucyBjb25mb3JtaW5nIHRvIHRoaXMgT2JzZXJ2YXRpb25EZWZpbml0aW9uLlxyXG4gICAqL1xyXG4gIHBlcm1pdHRlZERhdGFUeXBlPzogZmhpci5GaGlyQ29kZTxQZXJtaXR0ZWREYXRhVHlwZUNvZGVUeXBlPltdfHN0cmluZ1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBbiBleGFtcGxlIG9mIG9ic2VydmF0aW9uIGFsbG93aW5nIG11bHRpcGxlIHJlc3VsdHMgaXMgXCJiYWN0ZXJpYSBpZGVudGlmaWVkIGJ5IGN1bHR1cmVcIi4gQ29udmVyc2VseSwgdGhlIG1lYXN1cmVtZW50IG9mIGEgcG90YXNzaXVtIGxldmVsIGFsbG93cyBhIHNpbmdsZSByZXN1bHQuXHJcbiAgICovXHJcbiAgbXVsdGlwbGVSZXN1bHRzQWxsb3dlZD86IGZoaXIuRmhpckJvb2xlYW58Ym9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogT25seSB1c2VkIGlmIG5vdCBpbXBsaWNpdCBpbiBvYnNlcnZhdGlvbiBjb2RlLlxyXG4gICAqL1xyXG4gIG1ldGhvZD86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHByZWZlcnJlZCBuYW1lIHRvIGJlIHVzZWQgd2hlbiByZXBvcnRpbmcgdGhlIHJlc3VsdHMgb2Ygb2JzZXJ2YXRpb25zIGNvbmZvcm1pbmcgdG8gdGhpcyBPYnNlcnZhdGlvbkRlZmluaXRpb24uXHJcbiAgICovXHJcbiAgcHJlZmVycmVkUmVwb3J0TmFtZT86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENoYXJhY3RlcmlzdGljcyBmb3IgcXVhbnRpdGF0aXZlIHJlc3VsdHMgb2YgdGhpcyBvYnNlcnZhdGlvbi5cclxuICAgKi9cclxuICBxdWFudGl0YXRpdmVEZXRhaWxzPzogZmhpci5PYnNlcnZhdGlvbkRlZmluaXRpb25RdWFudGl0YXRpdmVEZXRhaWxzQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTXVsdGlwbGUgIHJhbmdlcyBvZiByZXN1bHRzIHF1YWxpZmllZCBieSBkaWZmZXJlbnQgY29udGV4dHMgZm9yIG9yZGluYWwgb3IgY29udGludW91cyBvYnNlcnZhdGlvbnMgY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBxdWFsaWZpZWRJbnRlcnZhbD86IGZoaXIuT2JzZXJ2YXRpb25EZWZpbml0aW9uUXVhbGlmaWVkSW50ZXJ2YWxBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzZXQgb2YgdmFsaWQgY29kZWQgcmVzdWx0cyBmb3IgdGhlIG9ic2VydmF0aW9ucyAgY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICB2YWxpZENvZGVkVmFsdWVTZXQ/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzZXQgb2Ygbm9ybWFsIGNvZGVkIHJlc3VsdHMgZm9yIHRoZSBvYnNlcnZhdGlvbnMgY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBub3JtYWxDb2RlZFZhbHVlU2V0PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc2V0IG9mIGFibm9ybWFsIGNvZGVkIHJlc3VsdHMgZm9yIHRoZSBvYnNlcnZhdGlvbiBjb25mb3JtaW5nIHRvIHRoaXMgT2JzZXJ2YXRpb25EZWZpbml0aW9uLlxyXG4gICAqL1xyXG4gIGFibm9ybWFsQ29kZWRWYWx1ZVNldD86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNldCBvZiBjcml0aWNhbCBjb2RlZCByZXN1bHRzIGZvciB0aGUgb2JzZXJ2YXRpb24gY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBjcml0aWNhbENvZGVkVmFsdWVTZXQ/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IG9mIGRlZmluaXRpb25hbCBjaGFyYWN0ZXJpc3RpY3MgZm9yIGEga2luZCBvZiBvYnNlcnZhdGlvbiBvciBtZWFzdXJlbWVudCBwcm9kdWNlZCBvciBjb25zdW1lZCBieSBhbiBvcmRlcmFibGUgaGVhbHRoIGNhcmUgc2VydmljZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBPYnNlcnZhdGlvbkRlZmluaXRpb24gZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ09ic2VydmF0aW9uRGVmaW5pdGlvbic7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJPYnNlcnZhdGlvbkRlZmluaXRpb25cIjtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgYWxsb3dzIHZhcmlvdXMgY2F0ZWdvcml6YXRpb24gc2NoZW1lcyBiYXNlZCBvbiB0aGUgb3duZXLigJlzIGRlZmluaXRpb24gb2YgdGhlIGNhdGVnb3J5IGFuZCBlZmZlY3RpdmVseSBtdWx0aXBsZSBjYXRlZ29yaWVzIGNhbiBiZSB1c2VkIGZvciBvbmUgaW5zdGFuY2Ugb2YgT2JzZXJ2YXRpb25EZWZpbml0aW9uLiBUaGUgbGV2ZWwgb2YgZ3JhbnVsYXJpdHkgaXMgZGVmaW5lZCBieSB0aGUgY2F0ZWdvcnkgY29uY2VwdHMgaW4gdGhlIHZhbHVlIHNldC5cclxuICAgKi9cclxuICBwdWJsaWMgY2F0ZWdvcnk6IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHdoYXQgd2lsbCBiZSBvYnNlcnZlZC4gU29tZXRpbWVzIHRoaXMgaXMgY2FsbGVkIHRoZSBvYnNlcnZhdGlvbiBcIm5hbWVcIi5cclxuICAgKi9cclxuICBwdWJsaWMgY29kZTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBBIHVuaXF1ZSBpZGVudGlmaWVyIGFzc2lnbmVkIHRvIHRoaXMgT2JzZXJ2YXRpb25EZWZpbml0aW9uIGFydGlmYWN0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyOiBmaGlyLklkZW50aWZpZXJbXTtcclxuICAvKipcclxuICAgKiBUaGUgZGF0YSB0eXBlcyBhbGxvd2VkIGZvciB0aGUgdmFsdWUgZWxlbWVudCBvZiB0aGUgaW5zdGFuY2Ugb2JzZXJ2YXRpb25zIGNvbmZvcm1pbmcgdG8gdGhpcyBPYnNlcnZhdGlvbkRlZmluaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHBlcm1pdHRlZERhdGFUeXBlOiBmaGlyLkZoaXJDb2RlPFBlcm1pdHRlZERhdGFUeXBlQ29kZVR5cGU+W107XHJcbiAgLyoqXHJcbiAgICogQW4gZXhhbXBsZSBvZiBvYnNlcnZhdGlvbiBhbGxvd2luZyBtdWx0aXBsZSByZXN1bHRzIGlzIFwiYmFjdGVyaWEgaWRlbnRpZmllZCBieSBjdWx0dXJlXCIuIENvbnZlcnNlbHksIHRoZSBtZWFzdXJlbWVudCBvZiBhIHBvdGFzc2l1bSBsZXZlbCBhbGxvd3MgYSBzaW5nbGUgcmVzdWx0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtdWx0aXBsZVJlc3VsdHNBbGxvd2VkPzogZmhpci5GaGlyQm9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogT25seSB1c2VkIGlmIG5vdCBpbXBsaWNpdCBpbiBvYnNlcnZhdGlvbiBjb2RlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtZXRob2Q/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHByZWZlcnJlZCBuYW1lIHRvIGJlIHVzZWQgd2hlbiByZXBvcnRpbmcgdGhlIHJlc3VsdHMgb2Ygb2JzZXJ2YXRpb25zIGNvbmZvcm1pbmcgdG8gdGhpcyBPYnNlcnZhdGlvbkRlZmluaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHByZWZlcnJlZFJlcG9ydE5hbWU/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENoYXJhY3RlcmlzdGljcyBmb3IgcXVhbnRpdGF0aXZlIHJlc3VsdHMgb2YgdGhpcyBvYnNlcnZhdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgcXVhbnRpdGF0aXZlRGV0YWlscz86IGZoaXIuT2JzZXJ2YXRpb25EZWZpbml0aW9uUXVhbnRpdGF0aXZlRGV0YWlsc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTXVsdGlwbGUgIHJhbmdlcyBvZiByZXN1bHRzIHF1YWxpZmllZCBieSBkaWZmZXJlbnQgY29udGV4dHMgZm9yIG9yZGluYWwgb3IgY29udGludW91cyBvYnNlcnZhdGlvbnMgY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgcXVhbGlmaWVkSW50ZXJ2YWw6IGZoaXIuT2JzZXJ2YXRpb25EZWZpbml0aW9uUXVhbGlmaWVkSW50ZXJ2YWxbXTtcclxuICAvKipcclxuICAgKiBUaGUgc2V0IG9mIHZhbGlkIGNvZGVkIHJlc3VsdHMgZm9yIHRoZSBvYnNlcnZhdGlvbnMgIGNvbmZvcm1pbmcgdG8gdGhpcyBPYnNlcnZhdGlvbkRlZmluaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHZhbGlkQ29kZWRWYWx1ZVNldD86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc2V0IG9mIG5vcm1hbCBjb2RlZCByZXN1bHRzIGZvciB0aGUgb2JzZXJ2YXRpb25zIGNvbmZvcm1pbmcgdG8gdGhpcyBPYnNlcnZhdGlvbkRlZmluaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIG5vcm1hbENvZGVkVmFsdWVTZXQ/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNldCBvZiBhYm5vcm1hbCBjb2RlZCByZXN1bHRzIGZvciB0aGUgb2JzZXJ2YXRpb24gY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgYWJub3JtYWxDb2RlZFZhbHVlU2V0PzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzZXQgb2YgY3JpdGljYWwgY29kZWQgcmVzdWx0cyBmb3IgdGhlIG9ic2VydmF0aW9uIGNvbmZvcm1pbmcgdG8gdGhpcyBPYnNlcnZhdGlvbkRlZmluaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIGNyaXRpY2FsQ29kZWRWYWx1ZVNldD86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBPYnNlcnZhdGlvbkRlZmluaXRpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxPYnNlcnZhdGlvbkRlZmluaXRpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnT2JzZXJ2YXRpb25EZWZpbml0aW9uJztcclxuICAgIGlmIChzb3VyY2VbJ2NhdGVnb3J5J10pIHsgdGhpcy5jYXRlZ29yeSA9IHNvdXJjZS5jYXRlZ29yeS5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNhdGVnb3J5ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvZGUnXSkgeyB0aGlzLmNvZGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmNvZGUpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb2RlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IHNvdXJjZS5pZGVudGlmaWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuSWRlbnRpZmllcih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmlkZW50aWZpZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncGVybWl0dGVkRGF0YVR5cGUnXSkgeyB0aGlzLnBlcm1pdHRlZERhdGFUeXBlID0gc291cmNlLnBlcm1pdHRlZERhdGFUeXBlLm1hcCgoeCkgPT4gbmV3IGZoaXIuRmhpckNvZGU8UGVybWl0dGVkRGF0YVR5cGVDb2RlVHlwZT4oe3ZhbHVlOiB4fSkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wZXJtaXR0ZWREYXRhVHlwZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydtdWx0aXBsZVJlc3VsdHNBbGxvd2VkJ10pIHsgdGhpcy5tdWx0aXBsZVJlc3VsdHNBbGxvd2VkID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oe3ZhbHVlOiBzb3VyY2UubXVsdGlwbGVSZXN1bHRzQWxsb3dlZH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydtZXRob2QnXSkgeyB0aGlzLm1ldGhvZCA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UubWV0aG9kKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJlZmVycmVkUmVwb3J0TmFtZSddKSB7IHRoaXMucHJlZmVycmVkUmVwb3J0TmFtZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UucHJlZmVycmVkUmVwb3J0TmFtZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydxdWFudGl0YXRpdmVEZXRhaWxzJ10pIHsgdGhpcy5xdWFudGl0YXRpdmVEZXRhaWxzID0gbmV3IGZoaXIuT2JzZXJ2YXRpb25EZWZpbml0aW9uUXVhbnRpdGF0aXZlRGV0YWlscyhzb3VyY2UucXVhbnRpdGF0aXZlRGV0YWlscyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3F1YWxpZmllZEludGVydmFsJ10pIHsgdGhpcy5xdWFsaWZpZWRJbnRlcnZhbCA9IHNvdXJjZS5xdWFsaWZpZWRJbnRlcnZhbC5tYXAoKHgpID0+IG5ldyBmaGlyLk9ic2VydmF0aW9uRGVmaW5pdGlvblF1YWxpZmllZEludGVydmFsKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucXVhbGlmaWVkSW50ZXJ2YWwgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndmFsaWRDb2RlZFZhbHVlU2V0J10pIHsgdGhpcy52YWxpZENvZGVkVmFsdWVTZXQgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnZhbGlkQ29kZWRWYWx1ZVNldCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ25vcm1hbENvZGVkVmFsdWVTZXQnXSkgeyB0aGlzLm5vcm1hbENvZGVkVmFsdWVTZXQgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLm5vcm1hbENvZGVkVmFsdWVTZXQpOyB9XHJcbiAgICBpZiAoc291cmNlWydhYm5vcm1hbENvZGVkVmFsdWVTZXQnXSkgeyB0aGlzLmFibm9ybWFsQ29kZWRWYWx1ZVNldCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuYWJub3JtYWxDb2RlZFZhbHVlU2V0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY3JpdGljYWxDb2RlZFZhbHVlU2V0J10pIHsgdGhpcy5jcml0aWNhbENvZGVkVmFsdWVTZXQgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmNyaXRpY2FsQ29kZWRWYWx1ZVNldCk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZWQtYm91bmQgVmFsdWUgU2V0IGZvciBwZXJtaXR0ZWREYXRhVHlwZSAoT2JzZXJ2YXRpb25EZWZpbml0aW9uLnBlcm1pdHRlZERhdGFUeXBlKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IHBlcm1pdHRlZERhdGFUeXBlUmVxdWlyZWRDb2RlcygpIHtcclxuICAgIHJldHVybiBQZXJtaXR0ZWREYXRhVHlwZUNvZGVzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKCF0aGlzWydyZXNvdXJjZVR5cGUnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgcmVzb3VyY2VUeXBlOlwiT2JzZXJ2YXRpb25EZWZpbml0aW9uXCIgZmhpcjogT2JzZXJ2YXRpb25EZWZpbml0aW9uLnJlc291cmNlVHlwZTpcIk9ic2VydmF0aW9uRGVmaW5pdGlvblwiJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiY2F0ZWdvcnlcIl0pIHsgdGhpcy5jYXRlZ29yeS5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICghdGhpc1snY29kZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBjb2RlOmZoaXIuQ29kZWFibGVDb25jZXB0IGZoaXI6IE9ic2VydmF0aW9uRGVmaW5pdGlvbi5jb2RlOkNvZGVhYmxlQ29uY2VwdCcgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImNvZGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5jb2RlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImlkZW50aWZpZXJcIl0pIHsgdGhpcy5pZGVudGlmaWVyLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbJ3Blcm1pdHRlZERhdGFUeXBlJ10pIHtcclxuICAgICAgdGhpcy5wZXJtaXR0ZWREYXRhVHlwZS5mb3JFYWNoKCh2KSA9PiB7XHJcbiAgICAgICAgaWYgKCFPYmplY3QudmFsdWVzKFBlcm1pdHRlZERhdGFUeXBlQ29kZXMpLmluY2x1ZGVzKHYgYXMgYW55KSkge1xyXG4gICAgICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ2NvZGUtaW52YWxpZCcsIGRpYWdub3N0aWNzOiAnSW52YWxpZCBjb2RlIHByb3BlcnR5IHBlcm1pdHRlZERhdGFUeXBlPzpmaGlyLkZoaXJDb2RlPFBlcm1pdHRlZERhdGFUeXBlQ29kZVR5cGU+W10gZmhpcjogT2JzZXJ2YXRpb25EZWZpbml0aW9uLnBlcm1pdHRlZERhdGFUeXBlOmNvZGUgUmVxdWlyZWQgYmluZGluZyB0bzogUGVybWl0dGVkRGF0YVR5cGUnIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInBlcm1pdHRlZERhdGFUeXBlXCJdKSB7IHRoaXMucGVybWl0dGVkRGF0YVR5cGUuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcIm11bHRpcGxlUmVzdWx0c0FsbG93ZWRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5tdWx0aXBsZVJlc3VsdHNBbGxvd2VkLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcIm1ldGhvZFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm1ldGhvZC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJwcmVmZXJyZWRSZXBvcnROYW1lXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucHJlZmVycmVkUmVwb3J0TmFtZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJxdWFudGl0YXRpdmVEZXRhaWxzXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucXVhbnRpdGF0aXZlRGV0YWlscy5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJxdWFsaWZpZWRJbnRlcnZhbFwiXSkgeyB0aGlzLnF1YWxpZmllZEludGVydmFsLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJ2YWxpZENvZGVkVmFsdWVTZXRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy52YWxpZENvZGVkVmFsdWVTZXQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wibm9ybWFsQ29kZWRWYWx1ZVNldFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm5vcm1hbENvZGVkVmFsdWVTZXQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiYWJub3JtYWxDb2RlZFZhbHVlU2V0XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuYWJub3JtYWxDb2RlZFZhbHVlU2V0LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImNyaXRpY2FsQ29kZWRWYWx1ZVNldFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmNyaXRpY2FsQ29kZWRWYWx1ZVNldC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuIl19