// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: ObservationDefinition
import * as fhir from '../fhir.js';
// @ts-ignore
import { ObservationRangeCategoryVsValidation } from '../fhirValueSets/ObservationRangeCategoryVsValidation.js';
// @ts-ignore
import { AdministrativeGenderVsValidation } from '../fhirValueSets/AdministrativeGenderVsValidation.js';
// @ts-ignore
import { PermittedDataTypeVsValidation } from '../fhirValueSets/PermittedDataTypeVsValidation.js';
/**
 * Characteristics for quantitative results of this observation.
 */
export class ObservationDefinitionQuantitativeDetails extends fhir.BackboneElement {
    /**
     * Default constructor for ObservationDefinitionQuantitativeDetails - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['customaryUnit']) {
            this.customaryUnit = new fhir.CodeableConcept(source.customaryUnit);
        }
        if (source['unit']) {
            this.unit = new fhir.CodeableConcept(source.unit);
        }
        if (source['conversionFactor']) {
            this.conversionFactor = new fhir.FhirDecimal({ value: source.conversionFactor });
        }
        if (source['_conversionFactor']) {
            if (this.conversionFactor) {
                this.conversionFactor.addExtendedProperties(source._conversionFactor);
            }
            else {
                this.conversionFactor = new fhir.FhirDecimal(source._conversionFactor);
            }
        }
        if (source['decimalPrecision']) {
            this.decimalPrecision = new fhir.FhirInteger({ value: source.decimalPrecision });
        }
        if (source['_decimalPrecision']) {
            if (this.decimalPrecision) {
                this.decimalPrecision.addExtendedProperties(source._decimalPrecision);
            }
            else {
                this.decimalPrecision = new fhir.FhirInteger(source._decimalPrecision);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ObservationDefinition.quantitativeDetails';
        }
        this.vOS('customaryUnit', exp);
        this.vOS('unit', exp);
        this.vOS('conversionFactor', exp);
        this.vOS('decimalPrecision', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ObservationDefinitionQuantitativeDetails._fts_dataType = 'ObservationDefinitionQuantitativeDetails';
/**
 * Multiple  ranges of results qualified by different contexts for ordinal or continuous observations conforming to this ObservationDefinition.
 */
export class ObservationDefinitionQualifiedInterval extends fhir.BackboneElement {
    /**
     * Default constructor for ObservationDefinitionQualifiedInterval - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['category']) {
            this.category = new fhir.FhirCode({ value: source.category });
        }
        if (source['_category']) {
            if (this.category) {
                this.category.addExtendedProperties(source._category);
            }
            else {
                this.category = new fhir.FhirCode(source._category);
            }
        }
        if (source['range']) {
            this.range = new fhir.Range(source.range);
        }
        if (source['context']) {
            this.context = new fhir.CodeableConcept(source.context);
        }
        if (source['appliesTo']) {
            this.appliesTo = source.appliesTo.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.appliesTo = [];
        }
        if (source['gender']) {
            this.gender = new fhir.FhirCode({ value: source.gender });
        }
        if (source['_gender']) {
            if (this.gender) {
                this.gender.addExtendedProperties(source._gender);
            }
            else {
                this.gender = new fhir.FhirCode(source._gender);
            }
        }
        if (source['age']) {
            this.age = new fhir.Range(source.age);
        }
        if (source['gestationalAge']) {
            this.gestationalAge = new fhir.Range(source.gestationalAge);
        }
        if (source['condition']) {
            this.condition = new fhir.FhirString({ value: source.condition });
        }
        if (source['_condition']) {
            if (this.condition) {
                this.condition.addExtendedProperties(source._condition);
            }
            else {
                this.condition = new fhir.FhirString(source._condition);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ObservationDefinition.qualifiedInterval';
        }
        this.vOSV('category', exp, 'ObservationRangeCategory', ObservationRangeCategoryVsValidation, 'r');
        this.vOS('range', exp);
        this.vOS('context', exp);
        this.vOA('appliesTo', exp);
        this.vOSV('gender', exp, 'AdministrativeGender', AdministrativeGenderVsValidation, 'r');
        this.vOS('age', exp);
        this.vOS('gestationalAge', exp);
        this.vOS('condition', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ObservationDefinitionQualifiedInterval._fts_dataType = 'ObservationDefinitionQualifiedInterval';
/**
 * Set of definitional characteristics for a kind of observation or measurement produced or consumed by an orderable health care service.
 */
export class ObservationDefinition extends fhir.DomainResource {
    /**
     * Default constructor for ObservationDefinition - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'ObservationDefinition';
        if (source['category']) {
            this.category = source.category.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.category = [];
        }
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        else {
            this.code = null;
        }
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['permittedDataType']) {
            this.permittedDataType = source.permittedDataType.map((x) => new fhir.FhirCode({ value: x }));
        }
        else {
            this.permittedDataType = [];
        }
        if (source['_permittedDataType']) {
            source._permittedDataType.forEach((x, i) => {
                if (this.permittedDataType.length >= i) {
                    if (x) {
                        this.permittedDataType[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.permittedDataType.push(new fhir.FhirCode(x));
                    }
                }
            });
        }
        if (source['multipleResultsAllowed']) {
            this.multipleResultsAllowed = new fhir.FhirBoolean({ value: source.multipleResultsAllowed });
        }
        if (source['_multipleResultsAllowed']) {
            if (this.multipleResultsAllowed) {
                this.multipleResultsAllowed.addExtendedProperties(source._multipleResultsAllowed);
            }
            else {
                this.multipleResultsAllowed = new fhir.FhirBoolean(source._multipleResultsAllowed);
            }
        }
        if (source['method']) {
            this.method = new fhir.CodeableConcept(source.method);
        }
        if (source['preferredReportName']) {
            this.preferredReportName = new fhir.FhirString({ value: source.preferredReportName });
        }
        if (source['_preferredReportName']) {
            if (this.preferredReportName) {
                this.preferredReportName.addExtendedProperties(source._preferredReportName);
            }
            else {
                this.preferredReportName = new fhir.FhirString(source._preferredReportName);
            }
        }
        if (source['quantitativeDetails']) {
            this.quantitativeDetails = new fhir.ObservationDefinitionQuantitativeDetails(source.quantitativeDetails);
        }
        if (source['qualifiedInterval']) {
            this.qualifiedInterval = source.qualifiedInterval.map((x) => new fhir.ObservationDefinitionQualifiedInterval(x));
        }
        else {
            this.qualifiedInterval = [];
        }
        if (source['validCodedValueSet']) {
            this.validCodedValueSet = new fhir.Reference(source.validCodedValueSet);
        }
        if (source['normalCodedValueSet']) {
            this.normalCodedValueSet = new fhir.Reference(source.normalCodedValueSet);
        }
        if (source['abnormalCodedValueSet']) {
            this.abnormalCodedValueSet = new fhir.Reference(source.abnormalCodedValueSet);
        }
        if (source['criticalCodedValueSet']) {
            this.criticalCodedValueSet = new fhir.Reference(source.criticalCodedValueSet);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ObservationDefinition';
        }
        this.vRS('resourceType', exp);
        this.vOA('category', exp);
        this.vRS('code', exp);
        this.vOA('identifier', exp);
        this.vOAV('permittedDataType', exp, 'PermittedDataType', PermittedDataTypeVsValidation, 'r');
        this.vOS('multipleResultsAllowed', exp);
        this.vOS('method', exp);
        this.vOS('preferredReportName', exp);
        this.vOS('quantitativeDetails', exp);
        this.vOA('qualifiedInterval', exp);
        this.vOS('validCodedValueSet', exp);
        this.vOS('normalCodedValueSet', exp);
        this.vOS('abnormalCodedValueSet', exp);
        this.vOS('criticalCodedValueSet', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ObservationDefinition._fts_dataType = 'ObservationDefinition';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT2JzZXJ2YXRpb25EZWZpbml0aW9uLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9PYnNlcnZhdGlvbkRlZmluaXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsdUNBQXVDO0FBRXZDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBUW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsb0NBQW9DLEVBQUUsTUFBTSwwREFBMEQsQ0FBQztBQVdoSCxhQUFhO0FBQ2IsT0FBTyxFQUFFLGdDQUFnQyxFQUFFLE1BQU0sc0RBQXNELENBQUM7QUFXeEcsYUFBYTtBQUNiLE9BQU8sRUFBRSw2QkFBNkIsRUFBRSxNQUFNLG1EQUFtRCxDQUFDO0FBbUNsRzs7R0FFRztBQUNILE1BQU0sT0FBTyx3Q0FBeUMsU0FBUSxJQUFJLENBQUMsZUFBZTtJQXFCaEY7O09BRUc7SUFDSCxZQUFZLFNBQStELEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQ3JILEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLENBQUMsZUFBZSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUM7U0FBRTtRQUNyRyxJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUFFO1FBQzFFLElBQUksTUFBTSxDQUFDLGtCQUFrQixDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxnQkFBZ0IsRUFBQyxDQUFDLENB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SSxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDMUIsSUFBSSxDQUFDLElBQUksQ0FBQyxtQkFBbUIsRUFBQyxHQUFHLEVBQUMsbUJBQW1CLEVBQUMsNkJBQTZCLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDeEYsSUFBSSxDQUFDLEdBQUcsQ0FBQyx3QkFBd0IsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUN0QyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUN0QixJQUFJLENBQUMsR0FBRyxDQUFDLHFCQUFxQixFQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ25DLElBQUksQ0FBQyxHQUFHLENBQUMscUJBQXFCLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDbkMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUNqQyxJQUFJLENBQUMsR0FBRyxDQUFDLG9CQUFvQixFQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ2xDLElBQUksQ0FBQyxHQUFHLENBQUMscUJBQXFCLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDbkMsSUFBSSxDQUFDLEdBQUcsQ0FBQyx1QkFBdUIsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUNyQyxJQUFJLENBQUMsR0FBRyxDQUFDLHVCQUF1QixFQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ3JDLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBeEhEOztHQUVHO0FBQzZCLG1DQUFhLEdBQVUsdUJBQXVCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjQuY29yZSB2ZXJzaW9uOiA0LjAuMVxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IE9ic2VydmF0aW9uRGVmaW5pdGlvblxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgVWN1bVVuaXRzQ29kZXMsICBVY3VtVW5pdHNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVWN1bVVuaXRzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFVjdW1Vbml0c1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVWN1bVVuaXRzVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBPYnNlcnZhdGlvblJhbmdlQ2F0ZWdvcnlDb2RlcywgIE9ic2VydmF0aW9uUmFuZ2VDYXRlZ29yeUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9PYnNlcnZhdGlvblJhbmdlQ2F0ZWdvcnlDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgT2JzZXJ2YXRpb25SYW5nZUNhdGVnb3J5VnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9PYnNlcnZhdGlvblJhbmdlQ2F0ZWdvcnlWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFJlZmVyZW5jZXJhbmdlTWVhbmluZ0NvZGVzLCAgUmVmZXJlbmNlcmFuZ2VNZWFuaW5nQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1JlZmVyZW5jZXJhbmdlTWVhbmluZ0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBSZWZlcmVuY2VyYW5nZU1lYW5pbmdWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1JlZmVyZW5jZXJhbmdlTWVhbmluZ1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUmVmZXJlbmNlcmFuZ2VBcHBsaWVzdG9Db2RlcywgIFJlZmVyZW5jZXJhbmdlQXBwbGllc3RvQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1JlZmVyZW5jZXJhbmdlQXBwbGllc3RvQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFJlZmVyZW5jZXJhbmdlQXBwbGllc3RvVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9SZWZlcmVuY2VyYW5nZUFwcGxpZXN0b1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQWRtaW5pc3RyYXRpdmVHZW5kZXJDb2RlcywgIEFkbWluaXN0cmF0aXZlR2VuZGVyQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0FkbWluaXN0cmF0aXZlR2VuZGVyQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFkbWluaXN0cmF0aXZlR2VuZGVyVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BZG1pbmlzdHJhdGl2ZUdlbmRlclZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgT2JzZXJ2YXRpb25DYXRlZ29yeUNvZGVzLCAgT2JzZXJ2YXRpb25DYXRlZ29yeUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9PYnNlcnZhdGlvbkNhdGVnb3J5Q29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE9ic2VydmF0aW9uQ2F0ZWdvcnlWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL09ic2VydmF0aW9uQ2F0ZWdvcnlWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE9ic2VydmF0aW9uQ29kZXMsICBPYnNlcnZhdGlvbkNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9PYnNlcnZhdGlvbkNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBPYnNlcnZhdGlvblZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvT2JzZXJ2YXRpb25Wc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFBlcm1pdHRlZERhdGFUeXBlQ29kZXMsICBQZXJtaXR0ZWREYXRhVHlwZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9QZXJtaXR0ZWREYXRhVHlwZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBQZXJtaXR0ZWREYXRhVHlwZVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUGVybWl0dGVkRGF0YVR5cGVWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE9ic2VydmF0aW9uTWV0aG9kc0NvZGVzLCAgT2JzZXJ2YXRpb25NZXRob2RzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL09ic2VydmF0aW9uTWV0aG9kc0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBPYnNlcnZhdGlvbk1ldGhvZHNWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL09ic2VydmF0aW9uTWV0aG9kc1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBPYnNlcnZhdGlvbkRlZmluaXRpb25RdWFudGl0YXRpdmVEZXRhaWxzIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE9ic2VydmF0aW9uRGVmaW5pdGlvblF1YW50aXRhdGl2ZURldGFpbHNBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBDdXN0b21hcnkgdW5pdCB1c2VkIHRvIHJlcG9ydCBxdWFudGl0YXRpdmUgcmVzdWx0cyBvZiBvYnNlcnZhdGlvbnMgY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBjdXN0b21hcnlVbml0PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTSSB1bml0IHVzZWQgdG8gcmVwb3J0IHF1YW50aXRhdGl2ZSByZXN1bHRzIG9mIG9ic2VydmF0aW9ucyBjb25mb3JtaW5nIHRvIHRoaXMgT2JzZXJ2YXRpb25EZWZpbml0aW9uLlxyXG4gICAqL1xyXG4gIHVuaXQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEZhY3RvciBmb3IgY29udmVydGluZyB2YWx1ZSBleHByZXNzZWQgd2l0aCBTSSB1bml0IHRvIHZhbHVlIGV4cHJlc3NlZCB3aXRoIGN1c3RvbWFyeSB1bml0LlxyXG4gICAqL1xyXG4gIGNvbnZlcnNpb25GYWN0b3I/OiBmaGlyLkZoaXJEZWNpbWFsfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE9ic2VydmF0aW9uRGVmaW5pdGlvbi5xdWFudGl0YXRpdmVEZXRhaWxzLmNvbnZlcnNpb25GYWN0b3JcclxuICAgKi9cclxuICBfY29udmVyc2lvbkZhY3Rvcj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogTnVtYmVyIG9mIGRpZ2l0cyBhZnRlciBkZWNpbWFsIHNlcGFyYXRvciB3aGVuIHRoZSByZXN1bHRzIG9mIHN1Y2ggb2JzZXJ2YXRpb25zIGFyZSBvZiB0eXBlIFF1YW50aXR5LlxyXG4gICAqL1xyXG4gIGRlY2ltYWxQcmVjaXNpb24/OiBmaGlyLkZoaXJJbnRlZ2VyfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE9ic2VydmF0aW9uRGVmaW5pdGlvbi5xdWFudGl0YXRpdmVEZXRhaWxzLmRlY2ltYWxQcmVjaXNpb25cclxuICAgKi9cclxuICBfZGVjaW1hbFByZWNpc2lvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGFyYWN0ZXJpc3RpY3MgZm9yIHF1YW50aXRhdGl2ZSByZXN1bHRzIG9mIHRoaXMgb2JzZXJ2YXRpb24uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgT2JzZXJ2YXRpb25EZWZpbml0aW9uUXVhbnRpdGF0aXZlRGV0YWlscyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ09ic2VydmF0aW9uRGVmaW5pdGlvblF1YW50aXRhdGl2ZURldGFpbHMnO1xyXG4gIC8qKlxyXG4gICAqIEN1c3RvbWFyeSB1bml0IHVzZWQgdG8gcmVwb3J0IHF1YW50aXRhdGl2ZSByZXN1bHRzIG9mIG9ic2VydmF0aW9ucyBjb25mb3JtaW5nIHRvIHRoaXMgT2JzZXJ2YXRpb25EZWZpbml0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjdXN0b21hcnlVbml0PzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFNJIHVuaXQgdXNlZCB0byByZXBvcnQgcXVhbnRpdGF0aXZlIHJlc3VsdHMgb2Ygb2JzZXJ2YXRpb25zIGNvbmZvcm1pbmcgdG8gdGhpcyBPYnNlcnZhdGlvbkRlZmluaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHVuaXQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRmFjdG9yIGZvciBjb252ZXJ0aW5nIHZhbHVlIGV4cHJlc3NlZCB3aXRoIFNJIHVuaXQgdG8gdmFsdWUgZXhwcmVzc2VkIHdpdGggY3VzdG9tYXJ5IHVuaXQuXHJcbiAgICovXHJcbiAgcHVibGljIGNvbnZlcnNpb25GYWN0b3I/OiBmaGlyLkZoaXJEZWNpbWFsfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBOdW1iZXIgb2YgZGlnaXRzIGFmdGVyIGRlY2ltYWwgc2VwYXJhdG9yIHdoZW4gdGhlIHJlc3VsdHMgb2Ygc3VjaCBvYnNlcnZhdGlvbnMgYXJlIG9mIHR5cGUgUXVhbnRpdHkuXHJcbiAgICovXHJcbiAgcHVibGljIGRlY2ltYWxQcmVjaXNpb24/OiBmaGlyLkZoaXJJbnRlZ2VyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBPYnNlcnZhdGlvbkRlZmluaXRpb25RdWFudGl0YXRpdmVEZXRhaWxzIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8T2JzZXJ2YXRpb25EZWZpbml0aW9uUXVhbnRpdGF0aXZlRGV0YWlsc0FyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydjdXN0b21hcnlVbml0J10pIHsgdGhpcy5jdXN0b21hcnlVbml0ID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jdXN0b21hcnlVbml0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndW5pdCddKSB7IHRoaXMudW5pdCA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UudW5pdCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvbnZlcnNpb25GYWN0b3InXSkgeyB0aGlzLmNvbnZlcnNpb25GYWN0b3IgPSBuZXcgZmhpci5GaGlyRGVjaW1hbCh7dmFsdWU6IHNvdXJjZS5jb252ZXJzaW9uRmFjdG9yfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19jb252ZXJzaW9uRmFjdG9yJ10pIHtcclxuICAgICAgaWYgKHRoaXMuY29udmVyc2lvbkZhY3RvcikgeyB0aGlzLmNvbnZlcnNpb25GYWN0b3IuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fY29udmVyc2lvbkZhY3RvciEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmNvbnZlcnNpb25GYWN0b3IgPSBuZXcgZmhpci5GaGlyRGVjaW1hbChzb3VyY2UuX2NvbnZlcnNpb25GYWN0b3IgYXMgUGFydGlhbDxmaGlyLkZoaXJEZWNpbWFsQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydkZWNpbWFsUHJlY2lzaW9uJ10pIHsgdGhpcy5kZWNpbWFsUHJlY2lzaW9uID0gbmV3IGZoaXIuRmhpckludGVnZXIoe3ZhbHVlOiBzb3VyY2UuZGVjaW1hbFByZWNpc2lvbn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfZGVjaW1hbFByZWNpc2lvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLmRlY2ltYWxQcmVjaXNpb24pIHsgdGhpcy5kZWNpbWFsUHJlY2lzaW9uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2RlY2ltYWxQcmVjaXNpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5kZWNpbWFsUHJlY2lzaW9uID0gbmV3IGZoaXIuRmhpckludGVnZXIoc291cmNlLl9kZWNpbWFsUHJlY2lzaW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlySW50ZWdlckFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ09ic2VydmF0aW9uRGVmaW5pdGlvbi5xdWFudGl0YXRpdmVEZXRhaWxzJyB9XHJcbiAgICB0aGlzLnZPUygnY3VzdG9tYXJ5VW5pdCcsZXhwKVxyXG4gICAgdGhpcy52T1MoJ3VuaXQnLGV4cClcclxuICAgIHRoaXMudk9TKCdjb252ZXJzaW9uRmFjdG9yJyxleHApXHJcbiAgICB0aGlzLnZPUygnZGVjaW1hbFByZWNpc2lvbicsZXhwKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE9ic2VydmF0aW9uRGVmaW5pdGlvblF1YWxpZmllZEludGVydmFsIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE9ic2VydmF0aW9uRGVmaW5pdGlvblF1YWxpZmllZEludGVydmFsQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNhdGVnb3J5IG9mIGludGVydmFsIG9mIHZhbHVlcyBmb3IgY29udGludW91cyBvciBvcmRpbmFsIG9ic2VydmF0aW9ucyBjb25mb3JtaW5nIHRvIHRoaXMgT2JzZXJ2YXRpb25EZWZpbml0aW9uLlxyXG4gICAqL1xyXG4gIGNhdGVnb3J5PzogZmhpci5GaGlyQ29kZTxPYnNlcnZhdGlvblJhbmdlQ2F0ZWdvcnlDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogT2JzZXJ2YXRpb25EZWZpbml0aW9uLnF1YWxpZmllZEludGVydmFsLmNhdGVnb3J5XHJcbiAgICovXHJcbiAgX2NhdGVnb3J5PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgbG93IGFuZCBoaWdoIHZhbHVlcyBkZXRlcm1pbmluZyB0aGUgaW50ZXJ2YWwuIFRoZXJlIG1heSBiZSBvbmx5IG9uZSBvZiB0aGUgdHdvLlxyXG4gICAqL1xyXG4gIHJhbmdlPzogZmhpci5SYW5nZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENvZGVzIHRvIGluZGljYXRlIHRoZSBoZWFsdGggY29udGV4dCB0aGUgcmFuZ2UgYXBwbGllcyB0by4gRm9yIGV4YW1wbGUsIHRoZSBub3JtYWwgb3IgdGhlcmFwZXV0aWMgcmFuZ2UuXHJcbiAgICovXHJcbiAgY29udGV4dD86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhpcyBlbGVtZW50IGlzIG5vdCBwcmVzZW50IHRoZW4gdGhlIGdsb2JhbCBwb3B1bGF0aW9uIGlzIGFzc3VtZWQuXHJcbiAgICovXHJcbiAgYXBwbGllc1RvPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFNleCBvZiB0aGUgcG9wdWxhdGlvbiB0aGUgcmFuZ2UgYXBwbGllcyB0by5cclxuICAgKi9cclxuICBnZW5kZXI/OiBmaGlyLkZoaXJDb2RlPEFkbWluaXN0cmF0aXZlR2VuZGVyQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE9ic2VydmF0aW9uRGVmaW5pdGlvbi5xdWFsaWZpZWRJbnRlcnZhbC5nZW5kZXJcclxuICAgKi9cclxuICBfZ2VuZGVyPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBTb21lIGFuYWx5dGVzIHZhcnkgZ3JlYXRseSBvdmVyIGFnZS5cclxuICAgKi9cclxuICBhZ2U/OiBmaGlyLlJhbmdlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGdlc3RhdGlvbmFsIGFnZSB0byB3aGljaCB0aGlzIHJlZmVyZW5jZSByYW5nZSBpcyBhcHBsaWNhYmxlLCBpbiB0aGUgY29udGV4dCBvZiBwcmVnbmFuY3kuXHJcbiAgICovXHJcbiAgZ2VzdGF0aW9uYWxBZ2U/OiBmaGlyLlJhbmdlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGV4dCBiYXNlZCBjb25kaXRpb24gZm9yIHdoaWNoIHRoZSByZWZlcmVuY2UgcmFuZ2UgaXMgdmFsaWQuXHJcbiAgICovXHJcbiAgY29uZGl0aW9uPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE9ic2VydmF0aW9uRGVmaW5pdGlvbi5xdWFsaWZpZWRJbnRlcnZhbC5jb25kaXRpb25cclxuICAgKi9cclxuICBfY29uZGl0aW9uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIE11bHRpcGxlICByYW5nZXMgb2YgcmVzdWx0cyBxdWFsaWZpZWQgYnkgZGlmZmVyZW50IGNvbnRleHRzIGZvciBvcmRpbmFsIG9yIGNvbnRpbnVvdXMgb2JzZXJ2YXRpb25zIGNvbmZvcm1pbmcgdG8gdGhpcyBPYnNlcnZhdGlvbkRlZmluaXRpb24uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgT2JzZXJ2YXRpb25EZWZpbml0aW9uUXVhbGlmaWVkSW50ZXJ2YWwgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdPYnNlcnZhdGlvbkRlZmluaXRpb25RdWFsaWZpZWRJbnRlcnZhbCc7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNhdGVnb3J5IG9mIGludGVydmFsIG9mIHZhbHVlcyBmb3IgY29udGludW91cyBvciBvcmRpbmFsIG9ic2VydmF0aW9ucyBjb25mb3JtaW5nIHRvIHRoaXMgT2JzZXJ2YXRpb25EZWZpbml0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjYXRlZ29yeT86IGZoaXIuRmhpckNvZGU8T2JzZXJ2YXRpb25SYW5nZUNhdGVnb3J5Q29kZVR5cGU+fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbG93IGFuZCBoaWdoIHZhbHVlcyBkZXRlcm1pbmluZyB0aGUgaW50ZXJ2YWwuIFRoZXJlIG1heSBiZSBvbmx5IG9uZSBvZiB0aGUgdHdvLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByYW5nZT86IGZoaXIuUmFuZ2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENvZGVzIHRvIGluZGljYXRlIHRoZSBoZWFsdGggY29udGV4dCB0aGUgcmFuZ2UgYXBwbGllcyB0by4gRm9yIGV4YW1wbGUsIHRoZSBub3JtYWwgb3IgdGhlcmFwZXV0aWMgcmFuZ2UuXHJcbiAgICovXHJcbiAgcHVibGljIGNvbnRleHQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhpcyBlbGVtZW50IGlzIG5vdCBwcmVzZW50IHRoZW4gdGhlIGdsb2JhbCBwb3B1bGF0aW9uIGlzIGFzc3VtZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGFwcGxpZXNUbzogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBTZXggb2YgdGhlIHBvcHVsYXRpb24gdGhlIHJhbmdlIGFwcGxpZXMgdG8uXHJcbiAgICovXHJcbiAgcHVibGljIGdlbmRlcj86IGZoaXIuRmhpckNvZGU8QWRtaW5pc3RyYXRpdmVHZW5kZXJDb2RlVHlwZT58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFNvbWUgYW5hbHl0ZXMgdmFyeSBncmVhdGx5IG92ZXIgYWdlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhZ2U/OiBmaGlyLlJhbmdlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZ2VzdGF0aW9uYWwgYWdlIHRvIHdoaWNoIHRoaXMgcmVmZXJlbmNlIHJhbmdlIGlzIGFwcGxpY2FibGUsIGluIHRoZSBjb250ZXh0IG9mIHByZWduYW5jeS5cclxuICAgKi9cclxuICBwdWJsaWMgZ2VzdGF0aW9uYWxBZ2U/OiBmaGlyLlJhbmdlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUZXh0IGJhc2VkIGNvbmRpdGlvbiBmb3Igd2hpY2ggdGhlIHJlZmVyZW5jZSByYW5nZSBpcyB2YWxpZC5cclxuICAgKi9cclxuICBwdWJsaWMgY29uZGl0aW9uPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBPYnNlcnZhdGlvbkRlZmluaXRpb25RdWFsaWZpZWRJbnRlcnZhbCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE9ic2VydmF0aW9uRGVmaW5pdGlvblF1YWxpZmllZEludGVydmFsQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2NhdGVnb3J5J10pIHsgdGhpcy5jYXRlZ29yeSA9IG5ldyBmaGlyLkZoaXJDb2RlPE9ic2VydmF0aW9uUmFuZ2VDYXRlZ29yeUNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5jYXRlZ29yeX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfY2F0ZWdvcnknXSkge1xyXG4gICAgICBpZiAodGhpcy5jYXRlZ29yeSkgeyB0aGlzLmNhdGVnb3J5LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2NhdGVnb3J5ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuY2F0ZWdvcnkgPSBuZXcgZmhpci5GaGlyQ29kZTxPYnNlcnZhdGlvblJhbmdlQ2F0ZWdvcnlDb2RlVHlwZT4oc291cmNlLl9jYXRlZ29yeSBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsncmFuZ2UnXSkgeyB0aGlzLnJhbmdlID0gbmV3IGZoaXIuUmFuZ2Uoc291cmNlLnJhbmdlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29udGV4dCddKSB7IHRoaXMuY29udGV4dCA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY29udGV4dCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2FwcGxpZXNUbyddKSB7IHRoaXMuYXBwbGllc1RvID0gc291cmNlLmFwcGxpZXNUby5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmFwcGxpZXNUbyA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydnZW5kZXInXSkgeyB0aGlzLmdlbmRlciA9IG5ldyBmaGlyLkZoaXJDb2RlPEFkbWluaXN0cmF0aXZlR2VuZGVyQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLmdlbmRlcn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfZ2VuZGVyJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZ2VuZGVyKSB7IHRoaXMuZ2VuZGVyLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2dlbmRlciEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmdlbmRlciA9IG5ldyBmaGlyLkZoaXJDb2RlPEFkbWluaXN0cmF0aXZlR2VuZGVyQ29kZVR5cGU+KHNvdXJjZS5fZ2VuZGVyIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydhZ2UnXSkgeyB0aGlzLmFnZSA9IG5ldyBmaGlyLlJhbmdlKHNvdXJjZS5hZ2UpOyB9XHJcbiAgICBpZiAoc291cmNlWydnZXN0YXRpb25hbEFnZSddKSB7IHRoaXMuZ2VzdGF0aW9uYWxBZ2UgPSBuZXcgZmhpci5SYW5nZShzb3VyY2UuZ2VzdGF0aW9uYWxBZ2UpOyB9XHJcbiAgICBpZiAoc291cmNlWydjb25kaXRpb24nXSkgeyB0aGlzLmNvbmRpdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuY29uZGl0aW9ufSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19jb25kaXRpb24nXSkge1xyXG4gICAgICBpZiAodGhpcy5jb25kaXRpb24pIHsgdGhpcy5jb25kaXRpb24uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fY29uZGl0aW9uISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuY29uZGl0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2NvbmRpdGlvbiBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ09ic2VydmF0aW9uRGVmaW5pdGlvbi5xdWFsaWZpZWRJbnRlcnZhbCcgfVxyXG4gICAgdGhpcy52T1NWKCdjYXRlZ29yeScsZXhwLCdPYnNlcnZhdGlvblJhbmdlQ2F0ZWdvcnknLE9ic2VydmF0aW9uUmFuZ2VDYXRlZ29yeVZzVmFsaWRhdGlvbiwncicpXHJcbiAgICB0aGlzLnZPUygncmFuZ2UnLGV4cClcclxuICAgIHRoaXMudk9TKCdjb250ZXh0JyxleHApXHJcbiAgICB0aGlzLnZPQSgnYXBwbGllc1RvJyxleHApXHJcbiAgICB0aGlzLnZPU1YoJ2dlbmRlcicsZXhwLCdBZG1pbmlzdHJhdGl2ZUdlbmRlcicsQWRtaW5pc3RyYXRpdmVHZW5kZXJWc1ZhbGlkYXRpb24sJ3InKVxyXG4gICAgdGhpcy52T1MoJ2FnZScsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2dlc3RhdGlvbmFsQWdlJyxleHApXHJcbiAgICB0aGlzLnZPUygnY29uZGl0aW9uJyxleHApXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgT2JzZXJ2YXRpb25EZWZpbml0aW9uIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE9ic2VydmF0aW9uRGVmaW5pdGlvbkFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIk9ic2VydmF0aW9uRGVmaW5pdGlvblwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgYWxsb3dzIHZhcmlvdXMgY2F0ZWdvcml6YXRpb24gc2NoZW1lcyBiYXNlZCBvbiB0aGUgb3duZXLigJlzIGRlZmluaXRpb24gb2YgdGhlIGNhdGVnb3J5IGFuZCBlZmZlY3RpdmVseSBtdWx0aXBsZSBjYXRlZ29yaWVzIGNhbiBiZSB1c2VkIGZvciBvbmUgaW5zdGFuY2Ugb2YgT2JzZXJ2YXRpb25EZWZpbml0aW9uLiBUaGUgbGV2ZWwgb2YgZ3JhbnVsYXJpdHkgaXMgZGVmaW5lZCBieSB0aGUgY2F0ZWdvcnkgY29uY2VwdHMgaW4gdGhlIHZhbHVlIHNldC5cclxuICAgKi9cclxuICBjYXRlZ29yeT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgd2hhdCB3aWxsIGJlIG9ic2VydmVkLiBTb21ldGltZXMgdGhpcyBpcyBjYWxsZWQgdGhlIG9ic2VydmF0aW9uIFwibmFtZVwiLlxyXG4gICAqL1xyXG4gIGNvZGU6IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIEEgdW5pcXVlIGlkZW50aWZpZXIgYXNzaWduZWQgdG8gdGhpcyBPYnNlcnZhdGlvbkRlZmluaXRpb24gYXJ0aWZhY3QuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGEgdHlwZXMgYWxsb3dlZCBmb3IgdGhlIHZhbHVlIGVsZW1lbnQgb2YgdGhlIGluc3RhbmNlIG9ic2VydmF0aW9ucyBjb25mb3JtaW5nIHRvIHRoaXMgT2JzZXJ2YXRpb25EZWZpbml0aW9uLlxyXG4gICAqL1xyXG4gIHBlcm1pdHRlZERhdGFUeXBlPzogZmhpci5GaGlyQ29kZTxQZXJtaXR0ZWREYXRhVHlwZUNvZGVUeXBlPltdfChzdHJpbmd8bnVsbClbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE9ic2VydmF0aW9uRGVmaW5pdGlvbi5wZXJtaXR0ZWREYXRhVHlwZVxyXG4gICAqL1xyXG4gIF9wZXJtaXR0ZWREYXRhVHlwZT86KGZoaXIuRmhpckVsZW1lbnRBcmdzfG51bGwpW107XHJcbiAgLyoqXHJcbiAgICogQW4gZXhhbXBsZSBvZiBvYnNlcnZhdGlvbiBhbGxvd2luZyBtdWx0aXBsZSByZXN1bHRzIGlzIFwiYmFjdGVyaWEgaWRlbnRpZmllZCBieSBjdWx0dXJlXCIuIENvbnZlcnNlbHksIHRoZSBtZWFzdXJlbWVudCBvZiBhIHBvdGFzc2l1bSBsZXZlbCBhbGxvd3MgYSBzaW5nbGUgcmVzdWx0LlxyXG4gICAqL1xyXG4gIG11bHRpcGxlUmVzdWx0c0FsbG93ZWQ/OiBmaGlyLkZoaXJCb29sZWFufGJvb2xlYW58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBPYnNlcnZhdGlvbkRlZmluaXRpb24ubXVsdGlwbGVSZXN1bHRzQWxsb3dlZFxyXG4gICAqL1xyXG4gIF9tdWx0aXBsZVJlc3VsdHNBbGxvd2VkPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBPbmx5IHVzZWQgaWYgbm90IGltcGxpY2l0IGluIG9ic2VydmF0aW9uIGNvZGUuXHJcbiAgICovXHJcbiAgbWV0aG9kPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcHJlZmVycmVkIG5hbWUgdG8gYmUgdXNlZCB3aGVuIHJlcG9ydGluZyB0aGUgcmVzdWx0cyBvZiBvYnNlcnZhdGlvbnMgY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBwcmVmZXJyZWRSZXBvcnROYW1lPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE9ic2VydmF0aW9uRGVmaW5pdGlvbi5wcmVmZXJyZWRSZXBvcnROYW1lXHJcbiAgICovXHJcbiAgX3ByZWZlcnJlZFJlcG9ydE5hbWU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIENoYXJhY3RlcmlzdGljcyBmb3IgcXVhbnRpdGF0aXZlIHJlc3VsdHMgb2YgdGhpcyBvYnNlcnZhdGlvbi5cclxuICAgKi9cclxuICBxdWFudGl0YXRpdmVEZXRhaWxzPzogZmhpci5PYnNlcnZhdGlvbkRlZmluaXRpb25RdWFudGl0YXRpdmVEZXRhaWxzQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTXVsdGlwbGUgIHJhbmdlcyBvZiByZXN1bHRzIHF1YWxpZmllZCBieSBkaWZmZXJlbnQgY29udGV4dHMgZm9yIG9yZGluYWwgb3IgY29udGludW91cyBvYnNlcnZhdGlvbnMgY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBxdWFsaWZpZWRJbnRlcnZhbD86IGZoaXIuT2JzZXJ2YXRpb25EZWZpbml0aW9uUXVhbGlmaWVkSW50ZXJ2YWxBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzZXQgb2YgdmFsaWQgY29kZWQgcmVzdWx0cyBmb3IgdGhlIG9ic2VydmF0aW9ucyAgY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICB2YWxpZENvZGVkVmFsdWVTZXQ/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzZXQgb2Ygbm9ybWFsIGNvZGVkIHJlc3VsdHMgZm9yIHRoZSBvYnNlcnZhdGlvbnMgY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBub3JtYWxDb2RlZFZhbHVlU2V0PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc2V0IG9mIGFibm9ybWFsIGNvZGVkIHJlc3VsdHMgZm9yIHRoZSBvYnNlcnZhdGlvbiBjb25mb3JtaW5nIHRvIHRoaXMgT2JzZXJ2YXRpb25EZWZpbml0aW9uLlxyXG4gICAqL1xyXG4gIGFibm9ybWFsQ29kZWRWYWx1ZVNldD86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNldCBvZiBjcml0aWNhbCBjb2RlZCByZXN1bHRzIGZvciB0aGUgb2JzZXJ2YXRpb24gY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBjcml0aWNhbENvZGVkVmFsdWVTZXQ/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IG9mIGRlZmluaXRpb25hbCBjaGFyYWN0ZXJpc3RpY3MgZm9yIGEga2luZCBvZiBvYnNlcnZhdGlvbiBvciBtZWFzdXJlbWVudCBwcm9kdWNlZCBvciBjb25zdW1lZCBieSBhbiBvcmRlcmFibGUgaGVhbHRoIGNhcmUgc2VydmljZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBPYnNlcnZhdGlvbkRlZmluaXRpb24gZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ09ic2VydmF0aW9uRGVmaW5pdGlvbic7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJPYnNlcnZhdGlvbkRlZmluaXRpb25cIjtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgYWxsb3dzIHZhcmlvdXMgY2F0ZWdvcml6YXRpb24gc2NoZW1lcyBiYXNlZCBvbiB0aGUgb3duZXLigJlzIGRlZmluaXRpb24gb2YgdGhlIGNhdGVnb3J5IGFuZCBlZmZlY3RpdmVseSBtdWx0aXBsZSBjYXRlZ29yaWVzIGNhbiBiZSB1c2VkIGZvciBvbmUgaW5zdGFuY2Ugb2YgT2JzZXJ2YXRpb25EZWZpbml0aW9uLiBUaGUgbGV2ZWwgb2YgZ3JhbnVsYXJpdHkgaXMgZGVmaW5lZCBieSB0aGUgY2F0ZWdvcnkgY29uY2VwdHMgaW4gdGhlIHZhbHVlIHNldC5cclxuICAgKi9cclxuICBwdWJsaWMgY2F0ZWdvcnk6IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHdoYXQgd2lsbCBiZSBvYnNlcnZlZC4gU29tZXRpbWVzIHRoaXMgaXMgY2FsbGVkIHRoZSBvYnNlcnZhdGlvbiBcIm5hbWVcIi5cclxuICAgKi9cclxuICBwdWJsaWMgY29kZTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBBIHVuaXF1ZSBpZGVudGlmaWVyIGFzc2lnbmVkIHRvIHRoaXMgT2JzZXJ2YXRpb25EZWZpbml0aW9uIGFydGlmYWN0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyOiBmaGlyLklkZW50aWZpZXJbXTtcclxuICAvKipcclxuICAgKiBUaGUgZGF0YSB0eXBlcyBhbGxvd2VkIGZvciB0aGUgdmFsdWUgZWxlbWVudCBvZiB0aGUgaW5zdGFuY2Ugb2JzZXJ2YXRpb25zIGNvbmZvcm1pbmcgdG8gdGhpcyBPYnNlcnZhdGlvbkRlZmluaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHBlcm1pdHRlZERhdGFUeXBlOiBmaGlyLkZoaXJDb2RlPFBlcm1pdHRlZERhdGFUeXBlQ29kZVR5cGU+W107XHJcbiAgLyoqXHJcbiAgICogQW4gZXhhbXBsZSBvZiBvYnNlcnZhdGlvbiBhbGxvd2luZyBtdWx0aXBsZSByZXN1bHRzIGlzIFwiYmFjdGVyaWEgaWRlbnRpZmllZCBieSBjdWx0dXJlXCIuIENvbnZlcnNlbHksIHRoZSBtZWFzdXJlbWVudCBvZiBhIHBvdGFzc2l1bSBsZXZlbCBhbGxvd3MgYSBzaW5nbGUgcmVzdWx0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtdWx0aXBsZVJlc3VsdHNBbGxvd2VkPzogZmhpci5GaGlyQm9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogT25seSB1c2VkIGlmIG5vdCBpbXBsaWNpdCBpbiBvYnNlcnZhdGlvbiBjb2RlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtZXRob2Q/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHByZWZlcnJlZCBuYW1lIHRvIGJlIHVzZWQgd2hlbiByZXBvcnRpbmcgdGhlIHJlc3VsdHMgb2Ygb2JzZXJ2YXRpb25zIGNvbmZvcm1pbmcgdG8gdGhpcyBPYnNlcnZhdGlvbkRlZmluaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHByZWZlcnJlZFJlcG9ydE5hbWU/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENoYXJhY3RlcmlzdGljcyBmb3IgcXVhbnRpdGF0aXZlIHJlc3VsdHMgb2YgdGhpcyBvYnNlcnZhdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgcXVhbnRpdGF0aXZlRGV0YWlscz86IGZoaXIuT2JzZXJ2YXRpb25EZWZpbml0aW9uUXVhbnRpdGF0aXZlRGV0YWlsc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTXVsdGlwbGUgIHJhbmdlcyBvZiByZXN1bHRzIHF1YWxpZmllZCBieSBkaWZmZXJlbnQgY29udGV4dHMgZm9yIG9yZGluYWwgb3IgY29udGludW91cyBvYnNlcnZhdGlvbnMgY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgcXVhbGlmaWVkSW50ZXJ2YWw6IGZoaXIuT2JzZXJ2YXRpb25EZWZpbml0aW9uUXVhbGlmaWVkSW50ZXJ2YWxbXTtcclxuICAvKipcclxuICAgKiBUaGUgc2V0IG9mIHZhbGlkIGNvZGVkIHJlc3VsdHMgZm9yIHRoZSBvYnNlcnZhdGlvbnMgIGNvbmZvcm1pbmcgdG8gdGhpcyBPYnNlcnZhdGlvbkRlZmluaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHZhbGlkQ29kZWRWYWx1ZVNldD86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc2V0IG9mIG5vcm1hbCBjb2RlZCByZXN1bHRzIGZvciB0aGUgb2JzZXJ2YXRpb25zIGNvbmZvcm1pbmcgdG8gdGhpcyBPYnNlcnZhdGlvbkRlZmluaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIG5vcm1hbENvZGVkVmFsdWVTZXQ/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNldCBvZiBhYm5vcm1hbCBjb2RlZCByZXN1bHRzIGZvciB0aGUgb2JzZXJ2YXRpb24gY29uZm9ybWluZyB0byB0aGlzIE9ic2VydmF0aW9uRGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgYWJub3JtYWxDb2RlZFZhbHVlU2V0PzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzZXQgb2YgY3JpdGljYWwgY29kZWQgcmVzdWx0cyBmb3IgdGhlIG9ic2VydmF0aW9uIGNvbmZvcm1pbmcgdG8gdGhpcyBPYnNlcnZhdGlvbkRlZmluaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIGNyaXRpY2FsQ29kZWRWYWx1ZVNldD86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBPYnNlcnZhdGlvbkRlZmluaXRpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxPYnNlcnZhdGlvbkRlZmluaXRpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnT2JzZXJ2YXRpb25EZWZpbml0aW9uJztcclxuICAgIGlmIChzb3VyY2VbJ2NhdGVnb3J5J10pIHsgdGhpcy5jYXRlZ29yeSA9IHNvdXJjZS5jYXRlZ29yeS5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNhdGVnb3J5ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvZGUnXSkgeyB0aGlzLmNvZGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmNvZGUpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb2RlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IHNvdXJjZS5pZGVudGlmaWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuSWRlbnRpZmllcih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmlkZW50aWZpZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncGVybWl0dGVkRGF0YVR5cGUnXSkgeyB0aGlzLnBlcm1pdHRlZERhdGFUeXBlID0gc291cmNlLnBlcm1pdHRlZERhdGFUeXBlLm1hcCgoeCkgPT4gbmV3IGZoaXIuRmhpckNvZGU8UGVybWl0dGVkRGF0YVR5cGVDb2RlVHlwZT4oe3ZhbHVlOiB4fSkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wZXJtaXR0ZWREYXRhVHlwZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydfcGVybWl0dGVkRGF0YVR5cGUnXSkge1xyXG4gICAgICBzb3VyY2UuX3Blcm1pdHRlZERhdGFUeXBlLmZvckVhY2goKHgsaSkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLnBlcm1pdHRlZERhdGFUeXBlLmxlbmd0aCA+PSBpKSB7IGlmICh4KSB7IHRoaXMucGVybWl0dGVkRGF0YVR5cGVbaV0uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHgpOyB9IH1cclxuICAgICAgICBlbHNlIHsgaWYgKHgpIHsgdGhpcy5wZXJtaXR0ZWREYXRhVHlwZS5wdXNoKG5ldyBmaGlyLkZoaXJDb2RlPFBlcm1pdHRlZERhdGFUeXBlQ29kZVR5cGU+KHggYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPikpOyB9IH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydtdWx0aXBsZVJlc3VsdHNBbGxvd2VkJ10pIHsgdGhpcy5tdWx0aXBsZVJlc3VsdHNBbGxvd2VkID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oe3ZhbHVlOiBzb3VyY2UubXVsdGlwbGVSZXN1bHRzQWxsb3dlZH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfbXVsdGlwbGVSZXN1bHRzQWxsb3dlZCddKSB7XHJcbiAgICAgIGlmICh0aGlzLm11bHRpcGxlUmVzdWx0c0FsbG93ZWQpIHsgdGhpcy5tdWx0aXBsZVJlc3VsdHNBbGxvd2VkLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX211bHRpcGxlUmVzdWx0c0FsbG93ZWQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5tdWx0aXBsZVJlc3VsdHNBbGxvd2VkID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oc291cmNlLl9tdWx0aXBsZVJlc3VsdHNBbGxvd2VkIGFzIFBhcnRpYWw8Zmhpci5GaGlyQm9vbGVhbkFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnbWV0aG9kJ10pIHsgdGhpcy5tZXRob2QgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLm1ldGhvZCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3ByZWZlcnJlZFJlcG9ydE5hbWUnXSkgeyB0aGlzLnByZWZlcnJlZFJlcG9ydE5hbWUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnByZWZlcnJlZFJlcG9ydE5hbWV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3ByZWZlcnJlZFJlcG9ydE5hbWUnXSkge1xyXG4gICAgICBpZiAodGhpcy5wcmVmZXJyZWRSZXBvcnROYW1lKSB7IHRoaXMucHJlZmVycmVkUmVwb3J0TmFtZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9wcmVmZXJyZWRSZXBvcnROYW1lISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMucHJlZmVycmVkUmVwb3J0TmFtZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9wcmVmZXJyZWRSZXBvcnROYW1lIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydxdWFudGl0YXRpdmVEZXRhaWxzJ10pIHsgdGhpcy5xdWFudGl0YXRpdmVEZXRhaWxzID0gbmV3IGZoaXIuT2JzZXJ2YXRpb25EZWZpbml0aW9uUXVhbnRpdGF0aXZlRGV0YWlscyhzb3VyY2UucXVhbnRpdGF0aXZlRGV0YWlscyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3F1YWxpZmllZEludGVydmFsJ10pIHsgdGhpcy5xdWFsaWZpZWRJbnRlcnZhbCA9IHNvdXJjZS5xdWFsaWZpZWRJbnRlcnZhbC5tYXAoKHgpID0+IG5ldyBmaGlyLk9ic2VydmF0aW9uRGVmaW5pdGlvblF1YWxpZmllZEludGVydmFsKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucXVhbGlmaWVkSW50ZXJ2YWwgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndmFsaWRDb2RlZFZhbHVlU2V0J10pIHsgdGhpcy52YWxpZENvZGVkVmFsdWVTZXQgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnZhbGlkQ29kZWRWYWx1ZVNldCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ25vcm1hbENvZGVkVmFsdWVTZXQnXSkgeyB0aGlzLm5vcm1hbENvZGVkVmFsdWVTZXQgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLm5vcm1hbENvZGVkVmFsdWVTZXQpOyB9XHJcbiAgICBpZiAoc291cmNlWydhYm5vcm1hbENvZGVkVmFsdWVTZXQnXSkgeyB0aGlzLmFibm9ybWFsQ29kZWRWYWx1ZVNldCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuYWJub3JtYWxDb2RlZFZhbHVlU2V0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY3JpdGljYWxDb2RlZFZhbHVlU2V0J10pIHsgdGhpcy5jcml0aWNhbENvZGVkVmFsdWVTZXQgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmNyaXRpY2FsQ29kZWRWYWx1ZVNldCk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdPYnNlcnZhdGlvbkRlZmluaXRpb24nIH1cclxuICAgIHRoaXMudlJTKCdyZXNvdXJjZVR5cGUnLGV4cClcclxuICAgIHRoaXMudk9BKCdjYXRlZ29yeScsZXhwKVxyXG4gICAgdGhpcy52UlMoJ2NvZGUnLGV4cClcclxuICAgIHRoaXMudk9BKCdpZGVudGlmaWVyJyxleHApXHJcbiAgICB0aGlzLnZPQVYoJ3Blcm1pdHRlZERhdGFUeXBlJyxleHAsJ1Blcm1pdHRlZERhdGFUeXBlJyxQZXJtaXR0ZWREYXRhVHlwZVZzVmFsaWRhdGlvbiwncicpXHJcbiAgICB0aGlzLnZPUygnbXVsdGlwbGVSZXN1bHRzQWxsb3dlZCcsZXhwKVxyXG4gICAgdGhpcy52T1MoJ21ldGhvZCcsZXhwKVxyXG4gICAgdGhpcy52T1MoJ3ByZWZlcnJlZFJlcG9ydE5hbWUnLGV4cClcclxuICAgIHRoaXMudk9TKCdxdWFudGl0YXRpdmVEZXRhaWxzJyxleHApXHJcbiAgICB0aGlzLnZPQSgncXVhbGlmaWVkSW50ZXJ2YWwnLGV4cClcclxuICAgIHRoaXMudk9TKCd2YWxpZENvZGVkVmFsdWVTZXQnLGV4cClcclxuICAgIHRoaXMudk9TKCdub3JtYWxDb2RlZFZhbHVlU2V0JyxleHApXHJcbiAgICB0aGlzLnZPUygnYWJub3JtYWxDb2RlZFZhbHVlU2V0JyxleHApXHJcbiAgICB0aGlzLnZPUygnY3JpdGljYWxDb2RlZFZhbHVlU2V0JyxleHApXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=