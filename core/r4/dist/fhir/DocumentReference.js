// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: DocumentReference
import * as fhir from '../fhir.js';
// @ts-ignore
import { DocumentRelationshipTypeCodes } from '../fhirValueSets/DocumentRelationshipTypeCodes.js';
// @ts-ignore
import { FormatcodesCodings, } from '../fhirValueSets/FormatcodesCodings.js';
// @ts-ignore
import { DocumentReferenceStatusCodes } from '../fhirValueSets/DocumentReferenceStatusCodes.js';
// @ts-ignore
import { CompositionStatusCodes } from '../fhirValueSets/CompositionStatusCodes.js';
// @ts-ignore
import { C80DocTypecodesCodings, } from '../fhirValueSets/C80DocTypecodesCodings.js';
// @ts-ignore
import { SecurityLabelsCodings, } from '../fhirValueSets/SecurityLabelsCodings.js';
/**
 * This element is labeled as a modifier because documents that append to other documents are incomplete on their own.
 */
export class DocumentReferenceRelatesTo extends fhir.BackboneElement {
    /**
     * Default constructor for DocumentReferenceRelatesTo - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.FhirCode({ value: source.code });
        }
        else {
            this.code = null;
        }
        if (source['target']) {
            this.target = new fhir.Reference(source.target);
        }
        else {
            this.target = null;
        }
    }
    /**
     * Required-bound Value Set for code (DocumentReference.relatesTo.code)
     */
    static get codeRequiredCodes() {
        return DocumentRelationshipTypeCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['code']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property code:fhir.FhirCode<DocumentRelationshipTypeCodeType> fhir: DocumentReference.relatesTo.code:code' });
        }
        if (this['code'] && (!Object.values(DocumentRelationshipTypeCodes).includes(this.code))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property code:fhir.FhirCode<DocumentRelationshipTypeCodeType> fhir: DocumentReference.relatesTo.code:code Required binding to: DocumentRelationshipType' });
        }
        if (this["code"]) {
            issues.push(...this.code.doModelValidation());
        }
        if (!this['target']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property target:fhir.Reference fhir: DocumentReference.relatesTo.target:Reference' });
        }
        if (this["target"]) {
            issues.push(...this.target.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DocumentReferenceRelatesTo._fts_dataType = 'DocumentReferenceRelatesTo';
/**
 * The document and format referenced. There may be multiple content element repetitions, each with a different format.
 */
export class DocumentReferenceContent extends fhir.BackboneElement {
    /**
     * Default constructor for DocumentReferenceContent - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['attachment']) {
            this.attachment = new fhir.Attachment(source.attachment);
        }
        else {
            this.attachment = null;
        }
        if (source['format']) {
            this.format = new fhir.Coding(source.format);
        }
    }
    /**
     * Preferred-bound Value Set for format (DocumentReference.content.format)
     */
    static get formatPreferredCodings() {
        return FormatcodesCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['attachment']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property attachment:fhir.Attachment fhir: DocumentReference.content.attachment:Attachment' });
        }
        if (this["attachment"]) {
            issues.push(...this.attachment.doModelValidation());
        }
        if (this["format"]) {
            issues.push(...this.format.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DocumentReferenceContent._fts_dataType = 'DocumentReferenceContent';
/**
 * These values are primarily added to help with searching for interesting/relevant documents.
 */
export class DocumentReferenceContext extends fhir.BackboneElement {
    /**
     * Default constructor for DocumentReferenceContext - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['encounter']) {
            this.encounter = source.encounter.map((x) => new fhir.Reference(x));
        }
        else {
            this.encounter = [];
        }
        if (source['event']) {
            this.event = source.event.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.event = [];
        }
        if (source['period']) {
            this.period = new fhir.Period(source.period);
        }
        if (source['facilityType']) {
            this.facilityType = new fhir.CodeableConcept(source.facilityType);
        }
        if (source['practiceSetting']) {
            this.practiceSetting = new fhir.CodeableConcept(source.practiceSetting);
        }
        if (source['sourcePatientInfo']) {
            this.sourcePatientInfo = new fhir.Reference(source.sourcePatientInfo);
        }
        if (source['related']) {
            this.related = source.related.map((x) => new fhir.Reference(x));
        }
        else {
            this.related = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["encounter"]) {
            this.encounter.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["event"]) {
            this.event.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["period"]) {
            issues.push(...this.period.doModelValidation());
        }
        if (this["facilityType"]) {
            issues.push(...this.facilityType.doModelValidation());
        }
        if (this["practiceSetting"]) {
            issues.push(...this.practiceSetting.doModelValidation());
        }
        if (this["sourcePatientInfo"]) {
            issues.push(...this.sourcePatientInfo.doModelValidation());
        }
        if (this["related"]) {
            this.related.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DocumentReferenceContext._fts_dataType = 'DocumentReferenceContext';
/**
 * A reference to a document of any kind for any purpose. Provides metadata about the document so that the document can be discovered and managed. The scope of a document is any seralized object with a mime-type, so includes formal patient centric documents (CDA), cliical notes, scanned paper, and non-patient specific documents like policy text.
 */
export class DocumentReference extends fhir.DomainResource {
    /**
     * Default constructor for DocumentReference - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'DocumentReference';
        if (source['masterIdentifier']) {
            this.masterIdentifier = new fhir.Identifier(source.masterIdentifier);
        }
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['docStatus']) {
            this.docStatus = new fhir.FhirCode({ value: source.docStatus });
        }
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type);
        }
        if (source['category']) {
            this.category = source.category.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.category = [];
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject);
        }
        if (source['date']) {
            this.date = new fhir.FhirInstant({ value: source.date });
        }
        if (source['author']) {
            this.author = source.author.map((x) => new fhir.Reference(x));
        }
        else {
            this.author = [];
        }
        if (source['authenticator']) {
            this.authenticator = new fhir.Reference(source.authenticator);
        }
        if (source['custodian']) {
            this.custodian = new fhir.Reference(source.custodian);
        }
        if (source['relatesTo']) {
            this.relatesTo = source.relatesTo.map((x) => new fhir.DocumentReferenceRelatesTo(x));
        }
        else {
            this.relatesTo = [];
        }
        if (source['description']) {
            this.description = new fhir.FhirString({ value: source.description });
        }
        if (source['securityLabel']) {
            this.securityLabel = source.securityLabel.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.securityLabel = [];
        }
        if (source['content']) {
            this.content = source.content.map((x) => new fhir.DocumentReferenceContent(x));
        }
        else {
            this.content = [];
        }
        if (source['context']) {
            this.context = new fhir.DocumentReferenceContext(source.context);
        }
    }
    /**
     * Required-bound Value Set for status (DocumentReference.status)
     */
    static get statusRequiredCodes() {
        return DocumentReferenceStatusCodes;
    }
    /**
     * Required-bound Value Set for docStatus (DocumentReference.docStatus)
     */
    static get docStatusRequiredCodes() {
        return CompositionStatusCodes;
    }
    /**
     * Preferred-bound Value Set for type (DocumentReference.type)
     */
    static get typePreferredCodings() {
        return C80DocTypecodesCodings;
    }
    /**
     * Extensible-bound Value Set for securityLabel (DocumentReference.securityLabel)
     */
    static get securityLabelExtensibleCodings() {
        return SecurityLabelsCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType:"DocumentReference" fhir: DocumentReference.resourceType:"DocumentReference"' });
        }
        if (this["masterIdentifier"]) {
            issues.push(...this.masterIdentifier.doModelValidation());
        }
        if (this["identifier"]) {
            this.identifier.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (!this['status']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property status:fhir.FhirCode<DocumentReferenceStatusCodeType> fhir: DocumentReference.status:code' });
        }
        if (this['status'] && (!Object.values(DocumentReferenceStatusCodes).includes(this.status))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property status:fhir.FhirCode<DocumentReferenceStatusCodeType> fhir: DocumentReference.status:code Required binding to: DocumentReferenceStatus' });
        }
        if (this["status"]) {
            issues.push(...this.status.doModelValidation());
        }
        if (this['docStatus'] && (!Object.values(CompositionStatusCodes).includes(this.docStatus))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property docStatus?:fhir.FhirCode<CompositionStatusCodeType> fhir: DocumentReference.docStatus:code Required binding to: CompositionStatus' });
        }
        if (this["docStatus"]) {
            issues.push(...this.docStatus.doModelValidation());
        }
        if (this["type"]) {
            issues.push(...this.type.doModelValidation());
        }
        if (this["category"]) {
            this.category.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["subject"]) {
            issues.push(...this.subject.doModelValidation());
        }
        if (this["date"]) {
            issues.push(...this.date.doModelValidation());
        }
        if (this["author"]) {
            this.author.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["authenticator"]) {
            issues.push(...this.authenticator.doModelValidation());
        }
        if (this["custodian"]) {
            issues.push(...this.custodian.doModelValidation());
        }
        if (this["relatesTo"]) {
            this.relatesTo.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["description"]) {
            issues.push(...this.description.doModelValidation());
        }
        if (this["securityLabel"]) {
            this.securityLabel.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (!this['content']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property content:fhir.DocumentReferenceContent[] fhir: DocumentReference.content:content' });
        }
        else if (!Array.isArray(this.content)) {
            issues.push({ severity: 'error', code: 'structure', diagnostics: 'Found scalar in array property content:fhir.DocumentReferenceContent[] fhir: DocumentReference.content:content' });
        }
        else if (this.content.length === 0) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property content:fhir.DocumentReferenceContent[] fhir: DocumentReference.content:content' });
        }
        if (this["content"]) {
            this.content.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["context"]) {
            issues.push(...this.context.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DocumentReference._fts_dataType = 'DocumentReference';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRG9jdW1lbnRSZWZlcmVuY2UuanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL0RvY3VtZW50UmVmZXJlbmNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQiwrQ0FBK0M7QUFDL0Msa0NBQWtDO0FBQ2xDLG1DQUFtQztBQUVuQyxPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQUluQyxhQUFhO0FBQ2IsT0FBTyxFQUFFLDZCQUE2QixFQUFxQyxNQUFNLG1EQUFtRCxDQUFDO0FBQ3JJLGFBQWE7QUFDYixPQUFPLEVBQUUsa0JBQWtCLEdBQXlCLE1BQU0sd0NBQXdDLENBQUM7QUFpQm5HLGFBQWE7QUFDYixPQUFPLEVBQUUsNEJBQTRCLEVBQW9DLE1BQU0sa0RBQWtELENBQUM7QUFHbEksYUFBYTtBQUNiLE9BQU8sRUFBRSxzQkFBc0IsRUFBOEIsTUFBTSw0Q0FBNEMsQ0FBQztBQUNoSCxhQUFhO0FBQ2IsT0FBTyxFQUFFLHNCQUFzQixHQUE2QixNQUFNLDRDQUE0QyxDQUFDO0FBTy9HLGFBQWE7QUFDYixPQUFPLEVBQUUscUJBQXFCLEdBQTRCLE1BQU0sMkNBQTJDLENBQUM7QUFpQjVHOztHQUVHO0FBQ0gsTUFBTSxPQUFPLDBCQUEyQixTQUFRLElBQUksQ0FBQyxlQUFlO0lBYWxFOztPQUVHO0lBQ0gsWUFBWSxTQUFpRCxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUN2RyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQW1DLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxJQUFJLEVBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDekc7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztTQUFFO1FBQzFCLElBQUksTUFBTSxDQUFD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aEw7UUFDRCxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQUU7UUFDaEcsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUMxRSxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQXpLRDs7R0FFRztBQUM2QiwrQkFBYSxHQUFVLG1CQUFtQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0LmNvcmUgdmVyc2lvbjogNC4wLjFcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBEb2N1bWVudFJlZmVyZW5jZVxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRG9jdW1lbnRSZWxhdGlvbnNoaXBUeXBlQ29kaW5ncywgRG9jdW1lbnRSZWxhdGlvbnNoaXBUeXBlQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRG9jdW1lbnRSZWxhdGlvbnNoaXBUeXBlQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRG9jdW1lbnRSZWxhdGlvbnNoaXBUeXBlQ29kZXMsICBEb2N1bWVudFJlbGF0aW9uc2hpcFR5cGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRG9jdW1lbnRSZWxhdGlvbnNoaXBUeXBlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEZvcm1hdGNvZGVzQ29kaW5ncywgRm9ybWF0Y29kZXNDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Gb3JtYXRjb2Rlc0NvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEZvcm1hdGNvZGVzQ29kZXMsICBGb3JtYXRjb2Rlc0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Gb3JtYXRjb2Rlc0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBWM0FjdENvZGVDb2RpbmdzLCBWM0FjdENvZGVDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9WM0FjdENvZGVDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBWM0FjdENvZGVDb2RlcywgIFYzQWN0Q29kZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9WM0FjdENvZGVDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQzgwRmFjaWxpdHljb2Rlc0NvZGluZ3MsIEM4MEZhY2lsaXR5Y29kZXNDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9DODBGYWNpbGl0eWNvZGVzQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQzgwRmFjaWxpdHljb2Rlc0NvZGVzLCAgQzgwRmFjaWxpdHljb2Rlc0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9DODBGYWNpbGl0eWNvZGVzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEM4MFByYWN0aWNlQ29kZXNDb2RpbmdzLCBDODBQcmFjdGljZUNvZGVzQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQzgwUHJhY3RpY2VDb2Rlc0NvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEM4MFByYWN0aWNlQ29kZXNDb2RlcywgIEM4MFByYWN0aWNlQ29kZXNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQzgwUHJhY3RpY2VDb2Rlc0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEb2N1bWVudFJlZmVyZW5jZVN0YXR1c0NvZGluZ3MsIERvY3VtZW50UmVmZXJlbmNlU3RhdHVzQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRG9jdW1lbnRSZWZlcmVuY2VTdGF0dXNDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEb2N1bWVudFJlZmVyZW5jZVN0YXR1c0NvZGVzLCAgRG9jdW1lbnRSZWZlcmVuY2VTdGF0dXNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRG9jdW1lbnRSZWZlcmVuY2VTdGF0dXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29tcG9zaXRpb25TdGF0dXNDb2RpbmdzLCBDb21wb3NpdGlvblN0YXR1c0NvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbXBvc2l0aW9uU3RhdHVzQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29tcG9zaXRpb25TdGF0dXNDb2RlcywgIENvbXBvc2l0aW9uU3RhdHVzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbXBvc2l0aW9uU3RhdHVzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEM4MERvY1R5cGVjb2Rlc0NvZGluZ3MsIEM4MERvY1R5cGVjb2Rlc0NvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0M4MERvY1R5cGVjb2Rlc0NvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEM4MERvY1R5cGVjb2Rlc0NvZGVzLCAgQzgwRG9jVHlwZWNvZGVzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0M4MERvY1R5cGVjb2Rlc0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEb2N1bWVudENsYXNzY29kZXNDb2RpbmdzLCBEb2N1bWVudENsYXNzY29kZXNDb2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Eb2N1bWVudENsYXNzY29kZXNDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEb2N1bWVudENsYXNzY29kZXNDb2RlcywgIERvY3VtZW50Q2xhc3Njb2Rlc0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Eb2N1bWVudENsYXNzY29kZXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgU2VjdXJpdHlMYWJlbHNDb2RpbmdzLCBTZWN1cml0eUxhYmVsc0NvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1NlY3VyaXR5TGFiZWxzQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgU2VjdXJpdHlMYWJlbHNDb2RlcywgIFNlY3VyaXR5TGFiZWxzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1NlY3VyaXR5TGFiZWxzQ29kZXMuanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgRG9jdW1lbnRSZWZlcmVuY2VSZWxhdGVzVG8gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgRG9jdW1lbnRSZWZlcmVuY2VSZWxhdGVzVG9BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBJZiB0aGlzIGRvY3VtZW50IGFwcGVuZHMgYW5vdGhlciBkb2N1bWVudCwgdGhlbiB0aGUgZG9jdW1lbnQgY2Fubm90IGJlIGZ1bGx5IHVuZGVyc3Rvb2Qgd2l0aG91dCBhbHNvIGFjY2Vzc2luZyB0aGUgcmVmZXJlbmNlZCBkb2N1bWVudC5cclxuICAgKi9cclxuICBjb2RlOiBmaGlyLkZoaXJDb2RlPERvY3VtZW50UmVsYXRpb25zaGlwVHlwZUNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0YXJnZXQgZG9jdW1lbnQgb2YgdGhpcyByZWxhdGlvbnNoaXAuXHJcbiAgICovXHJcbiAgdGFyZ2V0OiBmaGlyLlJlZmVyZW5jZUFyZ3N8bnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgYmVjYXVzZSBkb2N1bWVudHMgdGhhdCBhcHBlbmQgdG8gb3RoZXIgZG9jdW1lbnRzIGFyZSBpbmNvbXBsZXRlIG9uIHRoZWlyIG93bi5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBEb2N1bWVudFJlZmVyZW5jZVJlbGF0ZXNUbyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0RvY3VtZW50UmVmZXJlbmNlUmVsYXRlc1RvJztcclxuICAvKipcclxuICAgKiBJZiB0aGlzIGRvY3VtZW50IGFwcGVuZHMgYW5vdGhlciBkb2N1bWVudCwgdGhlbiB0aGUgZG9jdW1lbnQgY2Fubm90IGJlIGZ1bGx5IHVuZGVyc3Rvb2Qgd2l0aG91dCBhbHNvIGFjY2Vzc2luZyB0aGUgcmVmZXJlbmNlZCBkb2N1bWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgY29kZTogZmhpci5GaGlyQ29kZTxEb2N1bWVudFJlbGF0aW9uc2hpcFR5cGVDb2RlVHlwZT58bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgdGFyZ2V0IGRvY3VtZW50IG9mIHRoaXMgcmVsYXRpb25zaGlwLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0YXJnZXQ6IGZoaXIuUmVmZXJlbmNlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgRG9jdW1lbnRSZWZlcmVuY2VSZWxhdGVzVG8gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxEb2N1bWVudFJlZmVyZW5jZVJlbGF0ZXNUb0FyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gbmV3IGZoaXIuRmhpckNvZGU8RG9jdW1lbnRSZWxhdGlvbnNoaXBUeXBlQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLmNvZGV9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY29kZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3RhcmdldCddKSB7IHRoaXMudGFyZ2V0ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS50YXJnZXQpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy50YXJnZXQgPSBudWxsOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlcXVpcmVkLWJvdW5kIFZhbHVlIFNldCBmb3IgY29kZSAoRG9jdW1lbnRSZWZlcmVuY2UucmVsYXRlc1RvLmNvZGUpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgY29kZVJlcXVpcmVkQ29kZXMoKSB7XHJcbiAgICByZXR1cm4gRG9jdW1lbnRSZWxhdGlvbnNoaXBUeXBlQ29kZXM7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAoIXRoaXNbJ2NvZGUnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgY29kZTpmaGlyLkZoaXJDb2RlPERvY3VtZW50UmVsYXRpb25zaGlwVHlwZUNvZGVUeXBlPiBmaGlyOiBEb2N1bWVudFJlZmVyZW5jZS5yZWxhdGVzVG8uY29kZTpjb2RlJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzWydjb2RlJ10gJiYgKCFPYmplY3QudmFsdWVzKERvY3VtZW50UmVsYXRpb25zaGlwVHlwZUNvZGVzKS5pbmNsdWRlcyh0aGlzLmNvZGUgYXMgYW55KSkpIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ2NvZGUtaW52YWxpZCcsIGRpYWdub3N0aWNzOiAnSW52YWxpZCBjb2RlIHByb3BlcnR5IGNvZGU6Zmhpci5GaGlyQ29kZTxEb2N1bWVudFJlbGF0aW9uc2hpcFR5cGVDb2RlVHlwZT4gZmhpcjogRG9jdW1lbnRSZWZlcmVuY2UucmVsYXRlc1RvLmNvZGU6Y29kZSBSZXF1aXJlZCBiaW5kaW5nIHRvOiBEb2N1bWVudFJlbGF0aW9uc2hpcFR5cGUnIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJjb2RlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY29kZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKCF0aGlzWyd0YXJnZXQnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgdGFyZ2V0OmZoaXIuUmVmZXJlbmNlIGZoaXI6IERvY3VtZW50UmVmZXJlbmNlLnJlbGF0ZXNUby50YXJnZXQ6UmVmZXJlbmNlJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1widGFyZ2V0XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMudGFyZ2V0LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgRG9jdW1lbnRSZWZlcmVuY2VDb250ZW50IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIERvY3VtZW50UmVmZXJlbmNlQ29udGVudEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkb2N1bWVudCBvciBVUkwgb2YgdGhlIGRvY3VtZW50IGFsb25nIHdpdGggY3JpdGljYWwgbWV0YWRhdGEgdG8gcHJvdmUgY29udGVudCBoYXMgaW50ZWdyaXR5LlxyXG4gICAqL1xyXG4gIGF0dGFjaG1lbnQ6IGZoaXIuQXR0YWNobWVudEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBOb3RlIHRoYXQgd2hpbGUgSUhFIG1vc3RseSBpc3N1ZXMgVVJOcyBmb3IgZm9ybWF0IHR5cGVzLCBub3QgYWxsIGRvY3VtZW50cyBjYW4gYmUgaWRlbnRpZmllZCBieSBhIFVSSS5cclxuICAgKi9cclxuICBmb3JtYXQ/OiBmaGlyLkNvZGluZ0FyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlIGRvY3VtZW50IGFuZCBmb3JtYXQgcmVmZXJlbmNlZC4gVGhlcmUgbWF5IGJlIG11bHRpcGxlIGNvbnRlbnQgZWxlbWVudCByZXBldGl0aW9ucywgZWFjaCB3aXRoIGEgZGlmZmVyZW50IGZvcm1hdC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBEb2N1bWVudFJlZmVyZW5jZUNvbnRlbnQgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdEb2N1bWVudFJlZmVyZW5jZUNvbnRlbnQnO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkb2N1bWVudCBvciBVUkwgb2YgdGhlIGRvY3VtZW50IGFsb25nIHdpdGggY3JpdGljYWwgbWV0YWRhdGEgdG8gcHJvdmUgY29udGVudCBoYXMgaW50ZWdyaXR5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhdHRhY2htZW50OiBmaGlyLkF0dGFjaG1lbnR8bnVsbDtcclxuICAvKipcclxuICAgKiBOb3RlIHRoYXQgd2hpbGUgSUhFIG1vc3RseSBpc3N1ZXMgVVJOcyBmb3IgZm9ybWF0IHR5cGVzLCBub3QgYWxsIGRvY3VtZW50cyBjYW4gYmUgaWRlbnRpZmllZCBieSBhIFVSSS5cclxuICAgKi9cclxuICBwdWJsaWMgZm9ybWF0PzogZmhpci5Db2Rpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIERvY3VtZW50UmVmZXJlbmNlQ29udGVudCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPERvY3VtZW50UmVmZXJlbmNlQ29udGVudEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydhdHRhY2htZW50J10pIHsgdGhpcy5hdHRhY2htZW50ID0gbmV3IGZoaXIuQXR0YWNobWVudChzb3VyY2UuYXR0YWNobWVudCk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmF0dGFjaG1lbnQgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydmb3JtYXQnXSkgeyB0aGlzLmZvcm1hdCA9IG5ldyBmaGlyLkNvZGluZyhzb3VyY2UuZm9ybWF0KTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBQcmVmZXJyZWQtYm91bmQgVmFsdWUgU2V0IGZvciBmb3JtYXQgKERvY3VtZW50UmVmZXJlbmNlLmNvbnRlbnQuZm9ybWF0KVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IGZvcm1hdFByZWZlcnJlZENvZGluZ3MoKSB7XHJcbiAgICByZXR1cm4gRm9ybWF0Y29kZXNDb2RpbmdzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKCF0aGlzWydhdHRhY2htZW50J10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IGF0dGFjaG1lbnQ6Zmhpci5BdHRhY2htZW50IGZoaXI6IERvY3VtZW50UmVmZXJlbmNlLmNvbnRlbnQuYXR0YWNobWVudDpBdHRhY2htZW50JyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiYXR0YWNobWVudFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmF0dGFjaG1lbnQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiZm9ybWF0XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZm9ybWF0LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgRG9jdW1lbnRSZWZlcmVuY2VDb250ZXh0IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIERvY3VtZW50UmVmZXJlbmNlQ29udGV4dEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB0aGUgY2xpbmljYWwgZW5jb3VudGVyIG9yIHR5cGUgb2YgY2FyZSB0aGF0IHRoZSBkb2N1bWVudCBjb250ZW50IGlzIGFzc29jaWF0ZWQgd2l0aC5cclxuICAgKi9cclxuICBlbmNvdW50ZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQW4gZXZlbnQgY2FuIGZ1cnRoZXIgc3BlY2lhbGl6ZSB0aGUgYWN0IGluaGVyZW50IGluIHRoZSB0eXBlLCBzdWNoIGFzICB3aGVyZSBpdCBpcyBzaW1wbHkgXCJQcm9jZWR1cmUgUmVwb3J0XCIgYW5kIHRoZSBwcm9jZWR1cmUgd2FzIGEgXCJjb2xvbm9zY29weVwiLiBJZiBvbmUgb3IgbW9yZSBldmVudCBjb2RlcyBhcmUgaW5jbHVkZWQsIHRoZXkgc2hhbGwgbm90IGNvbmZsaWN0IHdpdGggdGhlIHZhbHVlcyBpbmhlcmVudCBpbiB0aGUgY2xhc3Mgb3IgdHlwZSBlbGVtZW50cyBhcyBzdWNoIGEgY29uZmxpY3Qgd291bGQgY3JlYXRlIGFuIGFtYmlndW91cyBzaXR1YXRpb24uXHJcbiAgICovXHJcbiAgZXZlbnQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRpbWUgcGVyaW9kIG92ZXIgd2hpY2ggdGhlIHNlcnZpY2UgdGhhdCBpcyBkZXNjcmliZWQgYnkgdGhlIGRvY3VtZW50IHdhcyBwcm92aWRlZC5cclxuICAgKi9cclxuICBwZXJpb2Q/OiBmaGlyLlBlcmlvZEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBraW5kIG9mIGZhY2lsaXR5IHdoZXJlIHRoZSBwYXRpZW50IHdhcyBzZWVuLlxyXG4gICAqL1xyXG4gIGZhY2lsaXR5VHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IHNob3VsZCBiZSBiYXNlZCBvbiBhIGNvYXJzZSBjbGFzc2lmaWNhdGlvbiBzeXN0ZW0gZm9yIHRoZSBjbGFzcyBvZiBzcGVjaWFsdHkgcHJhY3RpY2UuIFJlY29tbWVuZCB0aGUgdXNlIG9mIHRoZSBjbGFzc2lmaWNhdGlvbiBzeXN0ZW0gZm9yIFByYWN0aWNlIFNldHRpbmcsIHN1Y2ggYXMgdGhhdCBkZXNjcmliZWQgYnkgdGhlIFN1YmplY3QgTWF0dGVyIERvbWFpbiBpbiBMT0lOQy5cclxuICAgKi9cclxuICBwcmFjdGljZVNldHRpbmc/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBQYXRpZW50IEluZm9ybWF0aW9uIGFzIGtub3duIHdoZW4gdGhlIGRvY3VtZW50IHdhcyBwdWJsaXNoZWQuIE1heSBiZSBhIHJlZmVyZW5jZSB0byBhIHZlcnNpb24gc3BlY2lmaWMsIG9yIGNvbnRhaW5lZC5cclxuICAgKi9cclxuICBzb3VyY2VQYXRpZW50SW5mbz86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTWF5IGJlIGlkZW50aWZpZXJzIG9yIHJlc291cmNlcyB0aGF0IGNhdXNlZCB0aGUgRG9jdW1lbnRSZWZlcmVuY2Ugb3IgcmVmZXJlbmNlZCBEb2N1bWVudCB0byBiZSBjcmVhdGVkLlxyXG4gICAqL1xyXG4gIHJlbGF0ZWQ/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGVzZSB2YWx1ZXMgYXJlIHByaW1hcmlseSBhZGRlZCB0byBoZWxwIHdpdGggc2VhcmNoaW5nIGZvciBpbnRlcmVzdGluZy9yZWxldmFudCBkb2N1bWVudHMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRG9jdW1lbnRSZWZlcmVuY2VDb250ZXh0IGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnRG9jdW1lbnRSZWZlcmVuY2VDb250ZXh0JztcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgdGhlIGNsaW5pY2FsIGVuY291bnRlciBvciB0eXBlIG9mIGNhcmUgdGhhdCB0aGUgZG9jdW1lbnQgY29udGVudCBpcyBhc3NvY2lhdGVkIHdpdGguXHJcbiAgICovXHJcbiAgcHVibGljIGVuY291bnRlcjogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBBbiBldmVudCBjYW4gZnVydGhlciBzcGVjaWFsaXplIHRoZSBhY3QgaW5oZXJlbnQgaW4gdGhlIHR5cGUsIHN1Y2ggYXMgIHdoZXJlIGl0IGlzIHNpbXBseSBcIlByb2NlZHVyZSBSZXBvcnRcIiBhbmQgdGhlIHByb2NlZHVyZSB3YXMgYSBcImNvbG9ub3Njb3B5XCIuIElmIG9uZSBvciBtb3JlIGV2ZW50IGNvZGVzIGFyZSBpbmNsdWRlZCwgdGhleSBzaGFsbCBub3QgY29uZmxpY3Qgd2l0aCB0aGUgdmFsdWVzIGluaGVyZW50IGluIHRoZSBjbGFzcyBvciB0eXBlIGVsZW1lbnRzIGFzIHN1Y2ggYSBjb25mbGljdCB3b3VsZCBjcmVhdGUgYW4gYW1iaWd1b3VzIHNpdHVhdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgZXZlbnQ6IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogVGhlIHRpbWUgcGVyaW9kIG92ZXIgd2hpY2ggdGhlIHNlcnZpY2UgdGhhdCBpcyBkZXNjcmliZWQgYnkgdGhlIGRvY3VtZW50IHdhcyBwcm92aWRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgcGVyaW9kPzogZmhpci5QZXJpb2R8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBraW5kIG9mIGZhY2lsaXR5IHdoZXJlIHRoZSBwYXRpZW50IHdhcyBzZWVuLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBmYWNpbGl0eVR5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IHNob3VsZCBiZSBiYXNlZCBvbiBhIGNvYXJzZSBjbGFzc2lmaWNhdGlvbiBzeXN0ZW0gZm9yIHRoZSBjbGFzcyBvZiBzcGVjaWFsdHkgcHJhY3RpY2UuIFJlY29tbWVuZCB0aGUgdXNlIG9mIHRoZSBjbGFzc2lmaWNhdGlvbiBzeXN0ZW0gZm9yIFByYWN0aWNlIFNldHRpbmcsIHN1Y2ggYXMgdGhhdCBkZXNjcmliZWQgYnkgdGhlIFN1YmplY3QgTWF0dGVyIERvbWFpbiBpbiBMT0lOQy5cclxuICAgKi9cclxuICBwdWJsaWMgcHJhY3RpY2VTZXR0aW5nPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBQYXRpZW50IEluZm9ybWF0aW9uIGFzIGtub3duIHdoZW4gdGhlIGRvY3VtZW50IHdhcyBwdWJsaXNoZWQuIE1heSBiZSBhIHJlZmVyZW5jZSB0byBhIHZlcnNpb24gc3BlY2lmaWMsIG9yIGNvbnRhaW5lZC5cclxuICAgKi9cclxuICBwdWJsaWMgc291cmNlUGF0aWVudEluZm8/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTWF5IGJlIGlkZW50aWZpZXJzIG9yIHJlc291cmNlcyB0aGF0IGNhdXNlZCB0aGUgRG9jdW1lbnRSZWZlcmVuY2Ugb3IgcmVmZXJlbmNlZCBEb2N1bWVudCB0byBiZSBjcmVhdGVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWxhdGVkOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIERvY3VtZW50UmVmZXJlbmNlQ29udGV4dCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPERvY3VtZW50UmVmZXJlbmNlQ29udGV4dEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydlbmNvdW50ZXInXSkgeyB0aGlzLmVuY291bnRlciA9IHNvdXJjZS5lbmNvdW50ZXIubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5lbmNvdW50ZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZXZlbnQnXSkgeyB0aGlzLmV2ZW50ID0gc291cmNlLmV2ZW50Lm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZXZlbnQgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncGVyaW9kJ10pIHsgdGhpcy5wZXJpb2QgPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLnBlcmlvZCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2ZhY2lsaXR5VHlwZSddKSB7IHRoaXMuZmFjaWxpdHlUeXBlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5mYWNpbGl0eVR5cGUpOyB9XHJcbiAgICBpZiAoc291cmNlWydwcmFjdGljZVNldHRpbmcnXSkgeyB0aGlzLnByYWN0aWNlU2V0dGluZyA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UucHJhY3RpY2VTZXR0aW5nKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc291cmNlUGF0aWVudEluZm8nXSkgeyB0aGlzLnNvdXJjZVBhdGllbnRJbmZvID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5zb3VyY2VQYXRpZW50SW5mbyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3JlbGF0ZWQnXSkgeyB0aGlzLnJlbGF0ZWQgPSBzb3VyY2UucmVsYXRlZC5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnJlbGF0ZWQgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKHRoaXNbXCJlbmNvdW50ZXJcIl0pIHsgdGhpcy5lbmNvdW50ZXIuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImV2ZW50XCJdKSB7IHRoaXMuZXZlbnQuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcInBlcmlvZFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnBlcmlvZC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJmYWNpbGl0eVR5cGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5mYWNpbGl0eVR5cGUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wicHJhY3RpY2VTZXR0aW5nXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucHJhY3RpY2VTZXR0aW5nLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInNvdXJjZVBhdGllbnRJbmZvXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc291cmNlUGF0aWVudEluZm8uZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wicmVsYXRlZFwiXSkgeyB0aGlzLnJlbGF0ZWQuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgRG9jdW1lbnRSZWZlcmVuY2UgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgRG9jdW1lbnRSZWZlcmVuY2VBcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJEb2N1bWVudFJlZmVyZW5jZVwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDREEgRG9jdW1lbnQgSWQgZXh0ZW5zaW9uIGFuZCByb290LlxyXG4gICAqL1xyXG4gIG1hc3RlcklkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBPdGhlciBpZGVudGlmaWVycyBhc3NvY2lhdGVkIHdpdGggdGhlIGRvY3VtZW50LCBpbmNsdWRpbmcgdmVyc2lvbiBpbmRlcGVuZGVudCBpZGVudGlmaWVycy5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGlzIHRoZSBzdGF0dXMgb2YgdGhlIERvY3VtZW50UmVmZXJlbmNlIG9iamVjdCwgd2hpY2ggbWlnaHQgYmUgaW5kZXBlbmRlbnQgZnJvbSB0aGUgZG9jU3RhdHVzIGVsZW1lbnQuXHJcbiAgICogVGhpcyBlbGVtZW50IGlzIGxhYmVsZWQgYXMgYSBtb2RpZmllciBiZWNhdXNlIHRoZSBzdGF0dXMgY29udGFpbnMgdGhlIGNvZGVzIHRoYXQgbWFyayB0aGUgZG9jdW1lbnQgb3IgcmVmZXJlbmNlIGFzIG5vdCBjdXJyZW50bHkgdmFsaWQuXHJcbiAgICovXHJcbiAgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPERvY3VtZW50UmVmZXJlbmNlU3RhdHVzQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRvY3VtZW50IHRoYXQgaXMgcG9pbnRlZCB0byBtaWdodCBiZSBpbiB2YXJpb3VzIGxpZmVjeWNsZSBzdGF0ZXMuXHJcbiAgICovXHJcbiAgZG9jU3RhdHVzPzogZmhpci5GaGlyQ29kZTxDb21wb3NpdGlvblN0YXR1c0NvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEtleSBtZXRhZGF0YSBlbGVtZW50IGRlc2NyaWJpbmcgdGhlIGRvY3VtZW50IHRoYXQgZGVzY3JpYmVzIGhlIGV4YWN0IHR5cGUgb2YgZG9jdW1lbnQuIEhlbHBzIGh1bWFucyB0byBhc3Nlc3Mgd2hldGhlciB0aGUgZG9jdW1lbnQgaXMgb2YgaW50ZXJlc3Qgd2hlbiB2aWV3aW5nIGEgbGlzdCBvZiBkb2N1bWVudHMuXHJcbiAgICovXHJcbiAgdHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogS2V5IG1ldGFkYXRhIGVsZW1lbnQgZGVzY3JpYmluZyB0aGUgdGhlIGNhdGVnb3J5IG9yIGNsYXNzaWZpY2F0aW9uIG9mIHRoZSBkb2N1bWVudC4gVGhpcyBpcyBhIGJyb2FkZXIgcGVyc3BlY3RpdmUgdGhhdCBncm91cHMgc2ltaWxhciBkb2N1bWVudHMgYmFzZWQgb24gaG93IHRoZXkgd291bGQgYmUgdXNlZC4gVGhpcyBpcyBhIHByaW1hcnkga2V5IHVzZWQgaW4gc2VhcmNoaW5nLlxyXG4gICAqL1xyXG4gIGNhdGVnb3J5PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFdobyBvciB3aGF0IHRoZSBkb2N1bWVudCBpcyBhYm91dC4gVGhlIGRvY3VtZW50IGNhbiBiZSBhYm91dCBhIHBlcnNvbiwgKHBhdGllbnQgb3IgaGVhbHRoY2FyZSBwcmFjdGl0aW9uZXIpLCBhIGRldmljZSAoZS5nLiBhIG1hY2hpbmUpIG9yIGV2ZW4gYSBncm91cCBvZiBzdWJqZWN0cyAoc3VjaCBhcyBhIGRvY3VtZW50IGFib3V0IGEgaGVyZCBvZiBmYXJtIGFuaW1hbHMsIG9yIGEgc2V0IG9mIHBhdGllbnRzIHRoYXQgc2hhcmUgYSBjb21tb24gZXhwb3N1cmUpLlxyXG4gICAqL1xyXG4gIHN1YmplY3Q/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFJlZmVyZW5jaW5nL2luZGV4aW5nIHRpbWUgaXMgdXNlZCBmb3IgdHJhY2tpbmcsIG9yZ2FuaXppbmcgdmVyc2lvbnMgYW5kIHNlYXJjaGluZy5cclxuICAgKi9cclxuICBkYXRlPzogZmhpci5GaGlySW5zdGFudHxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE5vdCBuZWNlc3NhcmlseSB3aG8gZGlkIHRoZSBhY3R1YWwgZGF0YSBlbnRyeSAoaS5lLiB0eXBpc3QpIG9yIHdobyB3YXMgdGhlIHNvdXJjZSAoaW5mb3JtYW50KS5cclxuICAgKi9cclxuICBhdXRob3I/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUmVwcmVzZW50cyBhIHBhcnRpY2lwYW50IHdpdGhpbiB0aGUgYXV0aG9yIGluc3RpdHV0aW9uIHdobyBoYXMgbGVnYWxseSBhdXRoZW50aWNhdGVkIG9yIGF0dGVzdGVkIHRoZSBkb2N1bWVudC4gTGVnYWwgYXV0aGVudGljYXRpb24gaW1wbGllcyB0aGF0IGEgZG9jdW1lbnQgaGFzIGJlZW4gc2lnbmVkIG1hbnVhbGx5IG9yIGVsZWN0cm9uaWNhbGx5IGJ5IHRoZSBsZWdhbCBBdXRoZW50aWNhdG9yLlxyXG4gICAqL1xyXG4gIGF1dGhlbnRpY2F0b3I/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgdGhlIGxvZ2ljYWwgb3JnYW5pemF0aW9uIChzb2Z0d2FyZSBzeXN0ZW0sIHZlbmRvciwgb3IgZGVwYXJ0bWVudCkgdG8gZ28gdG8gZmluZCB0aGUgY3VycmVudCB2ZXJzaW9uLCB3aGVyZSB0byByZXBvcnQgaXNzdWVzLCBldGMuIFRoaXMgaXMgZGlmZmVyZW50IGZyb20gdGhlIHBoeXNpY2FsIGxvY2F0aW9uIChVUkwsIGRpc2sgZHJpdmUsIG9yIHNlcnZlcikgb2YgdGhlIGRvY3VtZW50LCB3aGljaCBpcyB0aGUgdGVjaG5pY2FsIGxvY2F0aW9uIG9mIHRoZSBkb2N1bWVudCwgd2hpY2ggaG9zdCBtYXkgYmUgZGVsZWdhdGVkIHRvIHRoZSBtYW5hZ2VtZW50IG9mIHNvbWUgb3RoZXIgb3JnYW5pemF0aW9uLlxyXG4gICAqL1xyXG4gIGN1c3RvZGlhbj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IGlzIGxhYmVsZWQgYXMgYSBtb2RpZmllciBiZWNhdXNlIGRvY3VtZW50cyB0aGF0IGFwcGVuZCB0byBvdGhlciBkb2N1bWVudHMgYXJlIGluY29tcGxldGUgb24gdGhlaXIgb3duLlxyXG4gICAqL1xyXG4gIHJlbGF0ZXNUbz86IGZoaXIuRG9jdW1lbnRSZWZlcmVuY2VSZWxhdGVzVG9BcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFdoYXQgdGhlIGRvY3VtZW50IGlzIGFib3V0LCAgYSB0ZXJzZSBzdW1tYXJ5IG9mIHRoZSBkb2N1bWVudC5cclxuICAgKi9cclxuICBkZXNjcmlwdGlvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjb25maWRlbnRpYWxpdHkgY29kZXMgY2FuIGNhcnJ5IG11bHRpcGxlIHZvY2FidWxhcnkgaXRlbXMuIEhMNyBoYXMgZGV2ZWxvcGVkIGFuIHVuZGVyc3RhbmRpbmcgb2Ygc2VjdXJpdHkgYW5kIHByaXZhY3kgdGFncyB0aGF0IG1pZ2h0IGJlIGRlc2lyYWJsZSBpbiBhIERvY3VtZW50IFNoYXJpbmcgZW52aXJvbm1lbnQsIGNhbGxlZCBITDcgSGVhbHRoY2FyZSBQcml2YWN5IGFuZCBTZWN1cml0eSBDbGFzc2lmaWNhdGlvbiBTeXN0ZW0gKEhDUykuIFRoZSBmb2xsb3dpbmcgc3BlY2lmaWNhdGlvbiBpcyByZWNvbW1lbmRlZCBidXQgbm90IG1hbmRhdGVkLCBhcyB0aGUgdm9jYWJ1bGFyeSBiaW5kaW5ncyBhcmUgYW4gYWRtaW5pc3RyYXRpdmUgZG9tYWluIHJlc3BvbnNpYmlsaXR5LiBUaGUgdXNlIG9mIHRoaXMgbWV0aG9kIGlzIHVwIHRvIHRoZSBwb2xpY3kgZG9tYWluIHN1Y2ggYXMgdGhlIFhEUyBBZmZpbml0eSBEb21haW4gb3Igb3RoZXIgVHJ1c3QgRG9tYWluIHdoZXJlIGFsbCBwYXJ0aWVzIGluY2x1ZGluZyBzZW5kZXIgYW5kIHJlY2lwaWVudHMgYXJlIHRydXN0ZWQgdG8gYXBwcm9wcmlhdGVseSB0YWcgYW5kIGVuZm9yY2UuICAgXHJcbiAgICogSW4gdGhlIEhMNyBIZWFsdGhjYXJlIFByaXZhY3kgYW5kIFNlY3VyaXR5IENsYXNzaWZpY2F0aW9uIChIQ1MpIHRoZXJlIGFyZSBjb2RlIHN5c3RlbXMgc3BlY2lmaWMgdG8gQ29uZmlkZW50aWFsaXR5LCBTZW5zaXRpdml0eSwgSW50ZWdyaXR5LCBhbmQgSGFuZGxpbmcgQ2F2ZWF0cy4gU29tZSB2YWx1ZXMgd291bGQgY29tZSBmcm9tIGEgbG9jYWwgdm9jYWJ1bGFyeSBhcyB0aGV5IGFyZSByZWxhdGVkIHRvIHdvcmtmbG93IHJvbGVzIGFuZCBzcGVjaWFsIHByb2plY3RzLlxyXG4gICAqL1xyXG4gIHNlY3VyaXR5TGFiZWw/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRvY3VtZW50IGFuZCBmb3JtYXQgcmVmZXJlbmNlZC4gVGhlcmUgbWF5IGJlIG11bHRpcGxlIGNvbnRlbnQgZWxlbWVudCByZXBldGl0aW9ucywgZWFjaCB3aXRoIGEgZGlmZmVyZW50IGZvcm1hdC5cclxuICAgKi9cclxuICBjb250ZW50OiBmaGlyLkRvY3VtZW50UmVmZXJlbmNlQ29udGVudEFyZ3NbXXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZXNlIHZhbHVlcyBhcmUgcHJpbWFyaWx5IGFkZGVkIHRvIGhlbHAgd2l0aCBzZWFyY2hpbmcgZm9yIGludGVyZXN0aW5nL3JlbGV2YW50IGRvY3VtZW50cy5cclxuICAgKi9cclxuICBjb250ZXh0PzogZmhpci5Eb2N1bWVudFJlZmVyZW5jZUNvbnRleHRBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgcmVmZXJlbmNlIHRvIGEgZG9jdW1lbnQgb2YgYW55IGtpbmQgZm9yIGFueSBwdXJwb3NlLiBQcm92aWRlcyBtZXRhZGF0YSBhYm91dCB0aGUgZG9jdW1lbnQgc28gdGhhdCB0aGUgZG9jdW1lbnQgY2FuIGJlIGRpc2NvdmVyZWQgYW5kIG1hbmFnZWQuIFRoZSBzY29wZSBvZiBhIGRvY3VtZW50IGlzIGFueSBzZXJhbGl6ZWQgb2JqZWN0IHdpdGggYSBtaW1lLXR5cGUsIHNvIGluY2x1ZGVzIGZvcm1hbCBwYXRpZW50IGNlbnRyaWMgZG9jdW1lbnRzIChDREEpLCBjbGlpY2FsIG5vdGVzLCBzY2FubmVkIHBhcGVyLCBhbmQgbm9uLXBhdGllbnQgc3BlY2lmaWMgZG9jdW1lbnRzIGxpa2UgcG9saWN5IHRleHQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRG9jdW1lbnRSZWZlcmVuY2UgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0RvY3VtZW50UmVmZXJlbmNlJztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIkRvY3VtZW50UmVmZXJlbmNlXCI7XHJcbiAgLyoqXHJcbiAgICogQ0RBIERvY3VtZW50IElkIGV4dGVuc2lvbiBhbmQgcm9vdC5cclxuICAgKi9cclxuICBwdWJsaWMgbWFzdGVySWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogT3RoZXIgaWRlbnRpZmllcnMgYXNzb2NpYXRlZCB3aXRoIHRoZSBkb2N1bWVudCwgaW5jbHVkaW5nIHZlcnNpb24gaW5kZXBlbmRlbnQgaWRlbnRpZmllcnMuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI6IGZoaXIuSWRlbnRpZmllcltdO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaXMgdGhlIHN0YXR1cyBvZiB0aGUgRG9jdW1lbnRSZWZlcmVuY2Ugb2JqZWN0LCB3aGljaCBtaWdodCBiZSBpbmRlcGVuZGVudCBmcm9tIHRoZSBkb2NTdGF0dXMgZWxlbWVudC5cclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIGJlY2F1c2UgdGhlIHN0YXR1cyBjb250YWlucyB0aGUgY29kZXMgdGhhdCBtYXJrIHRoZSBkb2N1bWVudCBvciByZWZlcmVuY2UgYXMgbm90IGN1cnJlbnRseSB2YWxpZC5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPERvY3VtZW50UmVmZXJlbmNlU3RhdHVzQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRvY3VtZW50IHRoYXQgaXMgcG9pbnRlZCB0byBtaWdodCBiZSBpbiB2YXJpb3VzIGxpZmVjeWNsZSBzdGF0ZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGRvY1N0YXR1cz86IGZoaXIuRmhpckNvZGU8Q29tcG9zaXRpb25TdGF0dXNDb2RlVHlwZT58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEtleSBtZXRhZGF0YSBlbGVtZW50IGRlc2NyaWJpbmcgdGhlIGRvY3VtZW50IHRoYXQgZGVzY3JpYmVzIGhlIGV4YWN0IHR5cGUgb2YgZG9jdW1lbnQuIEhlbHBzIGh1bWFucyB0byBhc3Nlc3Mgd2hldGhlciB0aGUgZG9jdW1lbnQgaXMgb2YgaW50ZXJlc3Qgd2hlbiB2aWV3aW5nIGEgbGlzdCBvZiBkb2N1bWVudHMuXHJcbiAgICovXHJcbiAgcHVibGljIHR5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogS2V5IG1ldGFkYXRhIGVsZW1lbnQgZGVzY3JpYmluZyB0aGUgdGhlIGNhdGVnb3J5IG9yIGNsYXNzaWZpY2F0aW9uIG9mIHRoZSBkb2N1bWVudC4gVGhpcyBpcyBhIGJyb2FkZXIgcGVyc3BlY3RpdmUgdGhhdCBncm91cHMgc2ltaWxhciBkb2N1bWVudHMgYmFzZWQgb24gaG93IHRoZXkgd291bGQgYmUgdXNlZC4gVGhpcyBpcyBhIHByaW1hcnkga2V5IHVzZWQgaW4gc2VhcmNoaW5nLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjYXRlZ29yeTogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBXaG8gb3Igd2hhdCB0aGUgZG9jdW1lbnQgaXMgYWJvdXQuIFRoZSBkb2N1bWVudCBjYW4gYmUgYWJvdXQgYSBwZXJzb24sIChwYXRpZW50IG9yIGhlYWx0aGNhcmUgcHJhY3RpdGlvbmVyKSwgYSBkZXZpY2UgKGUuZy4gYSBtYWNoaW5lKSBvciBldmVuIGEgZ3JvdXAgb2Ygc3ViamVjdHMgKHN1Y2ggYXMgYSBkb2N1bWVudCBhYm91dCBhIGhlcmQgb2YgZmFybSBhbmltYWxzLCBvciBhIHNldCBvZiBwYXRpZW50cyB0aGF0IHNoYXJlIGEgY29tbW9uIGV4cG9zdXJlKS5cclxuICAgKi9cclxuICBwdWJsaWMgc3ViamVjdD86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBSZWZlcmVuY2luZy9pbmRleGluZyB0aW1lIGlzIHVzZWQgZm9yIHRyYWNraW5nLCBvcmdhbml6aW5nIHZlcnNpb25zIGFuZCBzZWFyY2hpbmcuXHJcbiAgICovXHJcbiAgcHVibGljIGRhdGU/OiBmaGlyLkZoaXJJbnN0YW50fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBOb3QgbmVjZXNzYXJpbHkgd2hvIGRpZCB0aGUgYWN0dWFsIGRhdGEgZW50cnkgKGkuZS4gdHlwaXN0KSBvciB3aG8gd2FzIHRoZSBzb3VyY2UgKGluZm9ybWFudCkuXHJcbiAgICovXHJcbiAgcHVibGljIGF1dGhvcjogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBSZXByZXNlbnRzIGEgcGFydGljaXBhbnQgd2l0aGluIHRoZSBhdXRob3IgaW5zdGl0dXRpb24gd2hvIGhhcyBsZWdhbGx5IGF1dGhlbnRpY2F0ZWQgb3IgYXR0ZXN0ZWQgdGhlIGRvY3VtZW50LiBMZWdhbCBhdXRoZW50aWNhdGlvbiBpbXBsaWVzIHRoYXQgYSBkb2N1bWVudCBoYXMgYmVlbiBzaWduZWQgbWFudWFsbHkgb3IgZWxlY3Ryb25pY2FsbHkgYnkgdGhlIGxlZ2FsIEF1dGhlbnRpY2F0b3IuXHJcbiAgICovXHJcbiAgcHVibGljIGF1dGhlbnRpY2F0b3I/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgbG9naWNhbCBvcmdhbml6YXRpb24gKHNvZnR3YXJlIHN5c3RlbSwgdmVuZG9yLCBvciBkZXBhcnRtZW50KSB0byBnbyB0byBmaW5kIHRoZSBjdXJyZW50IHZlcnNpb24sIHdoZXJlIHRvIHJlcG9ydCBpc3N1ZXMsIGV0Yy4gVGhpcyBpcyBkaWZmZXJlbnQgZnJvbSB0aGUgcGh5c2ljYWwgbG9jYXRpb24gKFVSTCwgZGlzayBkcml2ZSwgb3Igc2VydmVyKSBvZiB0aGUgZG9jdW1lbnQsIHdoaWNoIGlzIHRoZSB0ZWNobmljYWwgbG9jYXRpb24gb2YgdGhlIGRvY3VtZW50LCB3aGljaCBob3N0IG1heSBiZSBkZWxlZ2F0ZWQgdG8gdGhlIG1hbmFnZW1lbnQgb2Ygc29tZSBvdGhlciBvcmdhbml6YXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIGN1c3RvZGlhbj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIGJlY2F1c2UgZG9jdW1lbnRzIHRoYXQgYXBwZW5kIHRvIG90aGVyIGRvY3VtZW50cyBhcmUgaW5jb21wbGV0ZSBvbiB0aGVpciBvd24uXHJcbiAgICovXHJcbiAgcHVibGljIHJlbGF0ZXNUbzogZmhpci5Eb2N1bWVudFJlZmVyZW5jZVJlbGF0ZXNUb1tdO1xyXG4gIC8qKlxyXG4gICAqIFdoYXQgdGhlIGRvY3VtZW50IGlzIGFib3V0LCAgYSB0ZXJzZSBzdW1tYXJ5IG9mIHRoZSBkb2N1bWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgZGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjb25maWRlbnRpYWxpdHkgY29kZXMgY2FuIGNhcnJ5IG11bHRpcGxlIHZvY2FidWxhcnkgaXRlbXMuIEhMNyBoYXMgZGV2ZWxvcGVkIGFuIHVuZGVyc3RhbmRpbmcgb2Ygc2VjdXJpdHkgYW5kIHByaXZhY3kgdGFncyB0aGF0IG1pZ2h0IGJlIGRlc2lyYWJsZSBpbiBhIERvY3VtZW50IFNoYXJpbmcgZW52aXJvbm1lbnQsIGNhbGxlZCBITDcgSGVhbHRoY2FyZSBQcml2YWN5IGFuZCBTZWN1cml0eSBDbGFzc2lmaWNhdGlvbiBTeXN0ZW0gKEhDUykuIFRoZSBmb2xsb3dpbmcgc3BlY2lmaWNhdGlvbiBpcyByZWNvbW1lbmRlZCBidXQgbm90IG1hbmRhdGVkLCBhcyB0aGUgdm9jYWJ1bGFyeSBiaW5kaW5ncyBhcmUgYW4gYWRtaW5pc3RyYXRpdmUgZG9tYWluIHJlc3BvbnNpYmlsaXR5LiBUaGUgdXNlIG9mIHRoaXMgbWV0aG9kIGlzIHVwIHRvIHRoZSBwb2xpY3kgZG9tYWluIHN1Y2ggYXMgdGhlIFhEUyBBZmZpbml0eSBEb21haW4gb3Igb3RoZXIgVHJ1c3QgRG9tYWluIHdoZXJlIGFsbCBwYXJ0aWVzIGluY2x1ZGluZyBzZW5kZXIgYW5kIHJlY2lwaWVudHMgYXJlIHRydXN0ZWQgdG8gYXBwcm9wcmlhdGVseSB0YWcgYW5kIGVuZm9yY2UuICAgXHJcbiAgICogSW4gdGhlIEhMNyBIZWFsdGhjYXJlIFByaXZhY3kgYW5kIFNlY3VyaXR5IENsYXNzaWZpY2F0aW9uIChIQ1MpIHRoZXJlIGFyZSBjb2RlIHN5c3RlbXMgc3BlY2lmaWMgdG8gQ29uZmlkZW50aWFsaXR5LCBTZW5zaXRpdml0eSwgSW50ZWdyaXR5LCBhbmQgSGFuZGxpbmcgQ2F2ZWF0cy4gU29tZSB2YWx1ZXMgd291bGQgY29tZSBmcm9tIGEgbG9jYWwgdm9jYWJ1bGFyeSBhcyB0aGV5IGFyZSByZWxhdGVkIHRvIHdvcmtmbG93IHJvbGVzIGFuZCBzcGVjaWFsIHByb2plY3RzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZWN1cml0eUxhYmVsOiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkb2N1bWVudCBhbmQgZm9ybWF0IHJlZmVyZW5jZWQuIFRoZXJlIG1heSBiZSBtdWx0aXBsZSBjb250ZW50IGVsZW1lbnQgcmVwZXRpdGlvbnMsIGVhY2ggd2l0aCBhIGRpZmZlcmVudCBmb3JtYXQuXHJcbiAgICovXHJcbiAgcHVibGljIGNvbnRlbnQ6IGZoaXIuRG9jdW1lbnRSZWZlcmVuY2VDb250ZW50W107XHJcbiAgLyoqXHJcbiAgICogVGhlc2UgdmFsdWVzIGFyZSBwcmltYXJpbHkgYWRkZWQgdG8gaGVscCB3aXRoIHNlYXJjaGluZyBmb3IgaW50ZXJlc3RpbmcvcmVsZXZhbnQgZG9jdW1lbnRzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb250ZXh0PzogZmhpci5Eb2N1bWVudFJlZmVyZW5jZUNvbnRleHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIERvY3VtZW50UmVmZXJlbmNlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8RG9jdW1lbnRSZWZlcmVuY2VBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnRG9jdW1lbnRSZWZlcmVuY2UnO1xyXG4gICAgaWYgKHNvdXJjZVsnbWFzdGVySWRlbnRpZmllciddKSB7IHRoaXMubWFzdGVySWRlbnRpZmllciA9IG5ldyBmaGlyLklkZW50aWZpZXIoc291cmNlLm1hc3RlcklkZW50aWZpZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gc291cmNlLmlkZW50aWZpZXIubWFwKCh4KSA9PiBuZXcgZmhpci5JZGVudGlmaWVyKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaWRlbnRpZmllciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydzdGF0dXMnXSkgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPERvY3VtZW50UmVmZXJlbmNlU3RhdHVzQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnN0YXR1c30pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydkb2NTdGF0dXMnXSkgeyB0aGlzLmRvY1N0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPENvbXBvc2l0aW9uU3RhdHVzQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLmRvY1N0YXR1c30pOyB9XHJcbiAgICBpZiAoc291cmNlWyd0eXBlJ10pIHsgdGhpcy50eXBlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS50eXBlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY2F0ZWdvcnknXSkgeyB0aGlzLmNhdGVnb3J5ID0gc291cmNlLmNhdGVnb3J5Lm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY2F0ZWdvcnkgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3ViamVjdCddKSB7IHRoaXMuc3ViamVjdCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2Uuc3ViamVjdCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2RhdGUnXSkgeyB0aGlzLmRhdGUgPSBuZXcgZmhpci5GaGlySW5zdGFudCh7dmFsdWU6IHNvdXJjZS5kYXRlfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2F1dGhvciddKSB7IHRoaXMuYXV0aG9yID0gc291cmNlLmF1dGhvci5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmF1dGhvciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydhdXRoZW50aWNhdG9yJ10pIHsgdGhpcy5hdXRoZW50aWNhdG9yID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5hdXRoZW50aWNhdG9yKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY3VzdG9kaWFuJ10pIHsgdGhpcy5jdXN0b2RpYW4gPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmN1c3RvZGlhbik7IH1cclxuICAgIGlmIChzb3VyY2VbJ3JlbGF0ZXNUbyddKSB7IHRoaXMucmVsYXRlc1RvID0gc291cmNlLnJlbGF0ZXNUby5tYXAoKHgpID0+IG5ldyBmaGlyLkRvY3VtZW50UmVmZXJlbmNlUmVsYXRlc1RvKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVsYXRlc1RvID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2Rlc2NyaXB0aW9uJ10pIHsgdGhpcy5kZXNjcmlwdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuZGVzY3JpcHRpb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2VjdXJpdHlMYWJlbCddKSB7IHRoaXMuc2VjdXJpdHlMYWJlbCA9IHNvdXJjZS5zZWN1cml0eUxhYmVsLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc2VjdXJpdHlMYWJlbCA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydjb250ZW50J10pIHsgdGhpcy5jb250ZW50ID0gc291cmNlLmNvbnRlbnQubWFwKCh4KSA9PiBuZXcgZmhpci5Eb2N1bWVudFJlZmVyZW5jZUNvbnRlbnQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb250ZW50ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvbnRleHQnXSkgeyB0aGlzLmNvbnRleHQgPSBuZXcgZmhpci5Eb2N1bWVudFJlZmVyZW5jZUNvbnRleHQoc291cmNlLmNvbnRleHQpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlcXVpcmVkLWJvdW5kIFZhbHVlIFNldCBmb3Igc3RhdHVzIChEb2N1bWVudFJlZmVyZW5jZS5zdGF0dXMpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgc3RhdHVzUmVxdWlyZWRDb2RlcygpIHtcclxuICAgIHJldHVybiBEb2N1bWVudFJlZmVyZW5jZVN0YXR1c0NvZGVzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIGRvY1N0YXR1cyAoRG9jdW1lbnRSZWZlcmVuY2UuZG9jU3RhdHVzKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IGRvY1N0YXR1c1JlcXVpcmVkQ29kZXMoKSB7XHJcbiAgICByZXR1cm4gQ29tcG9zaXRpb25TdGF0dXNDb2RlcztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogUHJlZmVycmVkLWJvdW5kIFZhbHVlIFNldCBmb3IgdHlwZSAoRG9jdW1lbnRSZWZlcmVuY2UudHlwZSlcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCB0eXBlUHJlZmVycmVkQ29kaW5ncygpIHtcclxuICAgIHJldHVybiBDODBEb2NUeXBlY29kZXNDb2RpbmdzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBFeHRlbnNpYmxlLWJvdW5kIFZhbHVlIFNldCBmb3Igc2VjdXJpdHlMYWJlbCAoRG9jdW1lbnRSZWZlcmVuY2Uuc2VjdXJpdHlMYWJlbClcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldCBzZWN1cml0eUxhYmVsRXh0ZW5zaWJsZUNvZGluZ3MoKSB7XHJcbiAgICByZXR1cm4gU2VjdXJpdHlMYWJlbHNDb2RpbmdzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKCF0aGlzWydyZXNvdXJjZVR5cGUnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgcmVzb3VyY2VUeXBlOlwiRG9jdW1lbnRSZWZlcmVuY2VcIiBmaGlyOiBEb2N1bWVudFJlZmVyZW5jZS5yZXNvdXJjZVR5cGU6XCJEb2N1bWVudFJlZmVyZW5jZVwiJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wibWFzdGVySWRlbnRpZmllclwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm1hc3RlcklkZW50aWZpZXIuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiaWRlbnRpZmllclwiXSkgeyB0aGlzLmlkZW50aWZpZXIuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAoIXRoaXNbJ3N0YXR1cyddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBzdGF0dXM6Zmhpci5GaGlyQ29kZTxEb2N1bWVudFJlZmVyZW5jZVN0YXR1c0NvZGVUeXBlPiBmaGlyOiBEb2N1bWVudFJlZmVyZW5jZS5zdGF0dXM6Y29kZScgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1snc3RhdHVzJ10gJiYgKCFPYmplY3QudmFsdWVzKERvY3VtZW50UmVmZXJlbmNlU3RhdHVzQ29kZXMpLmluY2x1ZGVzKHRoaXMuc3RhdHVzIGFzIGFueSkpKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdjb2RlLWludmFsaWQnLCBkaWFnbm9zdGljczogJ0ludmFsaWQgY29kZSBwcm9wZXJ0eSBzdGF0dXM6Zmhpci5GaGlyQ29kZTxEb2N1bWVudFJlZmVyZW5jZVN0YXR1c0NvZGVUeXBlPiBmaGlyOiBEb2N1bWVudFJlZmVyZW5jZS5zdGF0dXM6Y29kZSBSZXF1aXJlZCBiaW5kaW5nIHRvOiBEb2N1bWVudFJlZmVyZW5jZVN0YXR1cycgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInN0YXR1c1wiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnN0YXR1cy5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbJ2RvY1N0YXR1cyddICYmICghT2JqZWN0LnZhbHVlcyhDb21wb3NpdGlvblN0YXR1c0NvZGVzKS5pbmNsdWRlcyh0aGlzLmRvY1N0YXR1cyBhcyBhbnkpKSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnY29kZS1pbnZhbGlkJywgZGlhZ25vc3RpY3M6ICdJbnZhbGlkIGNvZGUgcHJvcGVydHkgZG9jU3RhdHVzPzpmaGlyLkZoaXJDb2RlPENvbXBvc2l0aW9uU3RhdHVzQ29kZVR5cGU+IGZoaXI6IERvY3VtZW50UmVmZXJlbmNlLmRvY1N0YXR1czpjb2RlIFJlcXVpcmVkIGJpbmRpbmcgdG86IENvbXBvc2l0aW9uU3RhdHVzJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiZG9jU3RhdHVzXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZG9jU3RhdHVzLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInR5cGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy50eXBlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImNhdGVnb3J5XCJdKSB7IHRoaXMuY2F0ZWdvcnkuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcInN1YmplY3RcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5zdWJqZWN0LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImRhdGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5kYXRlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImF1dGhvclwiXSkgeyB0aGlzLmF1dGhvci5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wiYXV0aGVudGljYXRvclwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmF1dGhlbnRpY2F0b3IuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiY3VzdG9kaWFuXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY3VzdG9kaWFuLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInJlbGF0ZXNUb1wiXSkgeyB0aGlzLnJlbGF0ZXNUby5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wiZGVzY3JpcHRpb25cIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5kZXNjcmlwdGlvbi5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJzZWN1cml0eUxhYmVsXCJdKSB7IHRoaXMuc2VjdXJpdHlMYWJlbC5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICghdGhpc1snY29udGVudCddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBjb250ZW50OmZoaXIuRG9jdW1lbnRSZWZlcmVuY2VDb250ZW50W10gZmhpcjogRG9jdW1lbnRSZWZlcmVuY2UuY29udGVudDpjb250ZW50JyB9KTtcclxuICAgIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkodGhpcy5jb250ZW50KSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnc3RydWN0dXJlJywgZGlhZ25vc3RpY3M6ICdGb3VuZCBzY2FsYXIgaW4gYXJyYXkgcHJvcGVydHkgY29udGVudDpmaGlyLkRvY3VtZW50UmVmZXJlbmNlQ29udGVudFtdIGZoaXI6IERvY3VtZW50UmVmZXJlbmNlLmNvbnRlbnQ6Y29udGVudCcgfSk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuY29udGVudC5sZW5ndGggPT09IDApIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IGNvbnRlbnQ6Zmhpci5Eb2N1bWVudFJlZmVyZW5jZUNvbnRlbnRbXSBmaGlyOiBEb2N1bWVudFJlZmVyZW5jZS5jb250ZW50OmNvbnRlbnQnIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJjb250ZW50XCJdKSB7IHRoaXMuY29udGVudC5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wiY29udGV4dFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmNvbnRleHQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbiJdfQ==