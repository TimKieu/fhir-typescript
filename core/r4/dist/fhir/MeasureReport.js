// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: MeasureReport
import * as fhir from '../fhir.js';
// @ts-ignore
import { MeasurePopulationCodings, } from '../fhirValueSets/MeasurePopulationCodings.js';
// @ts-ignore
import { MeasureReportStatusCodings, } from '../fhirValueSets/MeasureReportStatusCodings.js';
// @ts-ignore
import { MeasureReportTypeCodings, } from '../fhirValueSets/MeasureReportTypeCodings.js';
// @ts-ignore
import { MeasureImprovementNotationCodings, } from '../fhirValueSets/MeasureImprovementNotationCodings.js';
/**
 * The populations that make up the population group, one for each type of population appropriate for the measure.
 */
export class MeasureReportGroupPopulation extends fhir.BackboneElement {
    /**
     * Default constructor for MeasureReportGroupPopulation - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        if (source['count']) {
            this.count = new fhir.FhirInteger({ value: source.count });
        }
        if (source['subjectResults']) {
            this.subjectResults = new fhir.Reference(source.subjectResults);
        }
    }
    /**
     * Extensible-bound Value Set for code (MeasureReport.group.population.code)
     */
    static codeExtensibleCoding() {
        return MeasurePopulationCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["code"]) {
            issues.push(...this.code.doModelValidation());
        }
        if (this["count"]) {
            issues.push(...this.count.doModelValidation());
        }
        if (this["subjectResults"]) {
            issues.push(...this.subjectResults.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MeasureReportGroupPopulation._fts_dataType = 'MeasureReportGroupPopulation';
/**
 * A stratifier component value.
 */
export class MeasureReportGroupStratifierStratumComponent extends fhir.BackboneElement {
    /**
     * Default constructor for MeasureReportGroupStratifierStratumComponent - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        else {
            this.code = null;
        }
        if (source['value']) {
            this.value = new fhir.CodeableConcept(source.value);
        }
        else {
            this.value = null;
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['code']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property code:fhir.CodeableConcept fhir: MeasureReport.group.stratifier.stratum.component.code:CodeableConcept', });
        }
        if (this["code"]) {
            issues.push(...this.code.doModelValidation());
        }
        if (!this['value']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property value:fhir.CodeableConcept fhir: MeasureReport.group.stratifier.stratum.component.value:CodeableConcept', });
        }
        if (this["value"]) {
            issues.push(...this.value.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MeasureReportGroupStratifierStratumComponent._fts_dataType = 'MeasureReportGroupStratifierStratumComponent';
/**
 * The populations that make up the stratum, one for each type of population appropriate to the measure.
 */
export class MeasureReportGroupStratifierStratumPopulation extends fhir.BackboneElement {
    /**
     * Default constructor for MeasureReportGroupStratifierStratumPopulation - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        if (source['count']) {
            this.count = new fhir.FhirInteger({ value: source.count });
        }
        if (source['subjectResults']) {
            this.subjectResults = new fhir.Reference(source.subjectResults);
        }
    }
    /**
     * Extensible-bound Value Set for code (MeasureReport.group.stratifier.stratum.population.code)
     */
    static codeExtensibleCoding() {
        return MeasurePopulationCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["code"]) {
            issues.push(...this.code.doModelValidation());
        }
        if (this["count"]) {
            issues.push(...this.count.doModelValidation());
        }
        if (this["subjectResults"]) {
            issues.push(...this.subjectResults.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MeasureReportGroupStratifierStratumPopulation._fts_dataType = 'MeasureReportGroupStratifierStratumPopulation';
/**
 * This element contains the results for a single stratum within the stratifier. For example, when stratifying on administrative gender, there will be four strata, one for each possible gender value.
 */
export class MeasureReportGroupStratifierStratum extends fhir.BackboneElement {
    /**
     * Default constructor for MeasureReportGroupStratifierStratum - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['value']) {
            this.value = new fhir.CodeableConcept(source.value);
        }
        if (source['component']) {
            this.component = source.component.map((x) => new fhir.MeasureReportGroupStratifierStratumComponent(x));
        }
        else {
            this.component = [];
        }
        if (source['population']) {
            this.population = source.population.map((x) => new fhir.MeasureReportGroupStratifierStratumPopulation(x));
        }
        else {
            this.population = [];
        }
        if (source['measureScore']) {
            this.measureScore = new fhir.Quantity(source.measureScore);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["value"]) {
            issues.push(...this.value.doModelValidation());
        }
        if (this["component"]) {
            this.component.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["population"]) {
            this.population.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["measureScore"]) {
            issues.push(...this.measureScore.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MeasureReportGroupStratifierStratum._fts_dataType = 'MeasureReportGroupStratifierStratum';
/**
 * When a measure includes multiple stratifiers, there will be a stratifier group for each stratifier defined by the measure.
 */
export class MeasureReportGroupStratifier extends fhir.BackboneElement {
    /**
     * Default constructor for MeasureReportGroupStratifier - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = source.code.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.code = [];
        }
        if (source['stratum']) {
            this.stratum = source.stratum.map((x) => new fhir.MeasureReportGroupStratifierStratum(x));
        }
        else {
            this.stratum = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["code"]) {
            this.code.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["stratum"]) {
            this.stratum.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MeasureReportGroupStratifier._fts_dataType = 'MeasureReportGroupStratifier';
/**
 * The results of the calculation, one for each population group in the measure.
 */
export class MeasureReportGroup extends fhir.BackboneElement {
    /**
     * Default constructor for MeasureReportGroup - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        if (source['population']) {
            this.population = source.population.map((x) => new fhir.MeasureReportGroupPopulation(x));
        }
        else {
            this.population = [];
        }
        if (source['measureScore']) {
            this.measureScore = new fhir.Quantity(source.measureScore);
        }
        if (source['stratifier']) {
            this.stratifier = source.stratifier.map((x) => new fhir.MeasureReportGroupStratifier(x));
        }
        else {
            this.stratifier = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["code"]) {
            issues.push(...this.code.doModelValidation());
        }
        if (this["population"]) {
            this.population.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["measureScore"]) {
            issues.push(...this.measureScore.doModelValidation());
        }
        if (this["stratifier"]) {
            this.stratifier.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MeasureReportGroup._fts_dataType = 'MeasureReportGroup';
/**
 * The MeasureReport resource contains the results of the calculation of a measure; and optionally a reference to the resources involved in that calculation.
 */
export class MeasureReport extends fhir.DomainResource {
    /**
     * Default constructor for MeasureReport - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'MeasureReport';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['status']) {
            this.status = source.status;
        }
        else {
            this.status = null;
        }
        if (source['type']) {
            this.type = source.type;
        }
        else {
            this.type = null;
        }
        if (source['measure']) {
            this.measure = new fhir.FhirCanonical({ value: source.measure });
        }
        else {
            this.measure = null;
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject);
        }
        if (source['date']) {
            this.date = new fhir.FhirDateTime({ value: source.date });
        }
        if (source['reporter']) {
            this.reporter = new fhir.Reference(source.reporter);
        }
        if (source['period']) {
            this.period = new fhir.Period(source.period);
        }
        else {
            this.period = null;
        }
        if (source['improvementNotation']) {
            this.improvementNotation = new fhir.CodeableConcept(source.improvementNotation);
        }
        if (source['group']) {
            this.group = source.group.map((x) => new fhir.MeasureReportGroup(x));
        }
        else {
            this.group = [];
        }
        if (source['evaluatedResource']) {
            this.evaluatedResource = source.evaluatedResource.map((x) => new fhir.Reference(x));
        }
        else {
            this.evaluatedResource = [];
        }
    }
    /**
     * Required-bound Value Set for status (MeasureReport.status)
     */
    static statusRequiredCoding() {
        return MeasureReportStatusCodings;
    }
    /**
     * Required-bound Value Set for type (MeasureReport.type)
     */
    static typeRequiredCoding() {
        return MeasureReportTypeCodings;
    }
    /**
     * Required-bound Value Set for improvementNotation (MeasureReport.improvementNotation)
     */
    static improvementNotationRequiredCoding() {
        return MeasureImprovementNotationCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType:"MeasureReport" fhir: MeasureReport.resourceType:"MeasureReport"', });
        }
        if (this["identifier"]) {
            this.identifier.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (!this['status']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property status:MeasureReportStatusCodeType fhir: MeasureReport.status:code', });
        }
        if (!this['type']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property type:MeasureReportTypeCodeType fhir: MeasureReport.type:code', });
        }
        if (!this['measure']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property measure:fhir.FhirCanonical fhir: MeasureReport.measure:canonical', });
        }
        if (this["measure"]) {
            issues.push(...this.measure.doModelValidation());
        }
        if (this["subject"]) {
            issues.push(...this.subject.doModelValidation());
        }
        if (this["date"]) {
            issues.push(...this.date.doModelValidation());
        }
        if (this["reporter"]) {
            issues.push(...this.reporter.doModelValidation());
        }
        if (!this['period']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property period:fhir.Period fhir: MeasureReport.period:Period', });
        }
        if (this["period"]) {
            issues.push(...this.period.doModelValidation());
        }
        if (this["improvementNotation"]) {
            issues.push(...this.improvementNotation.doModelValidation());
        }
        if (this["group"]) {
            this.group.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["evaluatedResource"]) {
            this.evaluatedResource.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MeasureReport._fts_dataType = 'MeasureReport';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVhc3VyZVJlcG9ydC5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvTWVhc3VyZVJlcG9ydC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQywrQkFBK0I7QUFFL0IsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFFbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSx3QkFBd0IsR0FBK0IsTUFBTSw4Q0FBOEMsQ0FBQztBQUdySCxhQUFhO0FBQ2IsT0FBTyxFQUFFLDBCQUEwQixHQUFpQyxNQUFNLGdEQUFnRCxDQUFDO0FBRzNILGFBQWE7QUFDYixPQUFPLEVBQUUsd0JBQXdCLEdBQStCLE1BQU0sOENBQThDLENBQUM7QUFHckgsYUFBYTtBQUNiLE9BQU8sRUFBRSxpQ0FBaUMsR0FBd0MsTUFBTSx1REFBdUQsQ0FBQztBQXFCaEo7O0dBRUc7QUFDSCxNQUFNLE9BQU8sNEJBQTZCLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFpQnBFOztPQUVHO0lBQ0gsWUFBWSxTQUFtRCxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUN6RyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQUU7UUFDMUUsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsS0FBSyxFQUFDLENBQUMsQ0FBQztTQUFFO1FBQ2xGLElBQUksTUFBTSxDQUFDLGdCQUFnQixDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksSUFB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QUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFDbEcsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtTQUFFO1FBQzVGLElBQUksSUFBSSxDQUFDLG1CQUFtQixDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQUU7UUFDcEgsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQzs7QUE3SEQ7O0dBRUc7QUFDNkIsMkJBQWEsR0FBVSxlQUFlLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjQuY29yZSB2ZXJzaW9uOiA0LjAuMVxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IE1lYXN1cmVSZXBvcnRcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE1lYXN1cmVQb3B1bGF0aW9uQ29kaW5ncywgTWVhc3VyZVBvcHVsYXRpb25Db2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9NZWFzdXJlUG9wdWxhdGlvbkNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE1lYXN1cmVQb3B1bGF0aW9uQ29kZXMsICBNZWFzdXJlUG9wdWxhdGlvbkNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9NZWFzdXJlUG9wdWxhdGlvbkNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBNZWFzdXJlUmVwb3J0U3RhdHVzQ29kaW5ncywgTWVhc3VyZVJlcG9ydFN0YXR1c0NvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL01lYXN1cmVSZXBvcnRTdGF0dXNDb2RpbmdzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBNZWFzdXJlUmVwb3J0U3RhdHVzQ29kZXMsICBNZWFzdXJlUmVwb3J0U3RhdHVzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL01lYXN1cmVSZXBvcnRTdGF0dXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTWVhc3VyZVJlcG9ydFR5cGVDb2RpbmdzLCBNZWFzdXJlUmVwb3J0VHlwZUNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL01lYXN1cmVSZXBvcnRUeXBlQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTWVhc3VyZVJlcG9ydFR5cGVDb2RlcywgIE1lYXN1cmVSZXBvcnRUeXBlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL01lYXN1cmVSZXBvcnRUeXBlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE1lYXN1cmVJbXByb3ZlbWVudE5vdGF0aW9uQ29kaW5ncywgTWVhc3VyZUltcHJvdmVtZW50Tm90YXRpb25Db2RpbmdUeXBlLH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9NZWFzdXJlSW1wcm92ZW1lbnROb3RhdGlvbkNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE1lYXN1cmVJbXByb3ZlbWVudE5vdGF0aW9uQ29kZXMsICBNZWFzdXJlSW1wcm92ZW1lbnROb3RhdGlvbkNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9NZWFzdXJlSW1wcm92ZW1lbnROb3RhdGlvbkNvZGVzLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lYXN1cmVSZXBvcnRHcm91cFBvcHVsYXRpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVhc3VyZVJlcG9ydEdyb3VwUG9wdWxhdGlvbkFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0eXBlIG9mIHRoZSBwb3B1bGF0aW9uLlxyXG4gICAqL1xyXG4gIGNvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBudW1iZXIgb2YgbWVtYmVycyBvZiB0aGUgcG9wdWxhdGlvbi5cclxuICAgKi9cclxuICBjb3VudD86IGZoaXIuRmhpckludGVnZXJ8bnVtYmVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgcmVmZXJzIHRvIGEgTGlzdCBvZiBzdWJqZWN0IGxldmVsIE1lYXN1cmVSZXBvcnQgcmVzb3VyY2VzLCBvbmUgZm9yIGVhY2ggc3ViamVjdCBpbiB0aGlzIHBvcHVsYXRpb24uXHJcbiAgICovXHJcbiAgc3ViamVjdFJlc3VsdHM/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlIHBvcHVsYXRpb25zIHRoYXQgbWFrZSB1cCB0aGUgcG9wdWxhdGlvbiBncm91cCwgb25lIGZvciBlYWNoIHR5cGUgb2YgcG9wdWxhdGlvbiBhcHByb3ByaWF0ZSBmb3IgdGhlIG1lYXN1cmUuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVhc3VyZVJlcG9ydEdyb3VwUG9wdWxhdGlvbiBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ01lYXN1cmVSZXBvcnRHcm91cFBvcHVsYXRpb24nO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0eXBlIG9mIHRoZSBwb3B1bGF0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb2RlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBudW1iZXIgb2YgbWVtYmVycyBvZiB0aGUgcG9wdWxhdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgY291bnQ/OiBmaGlyLkZoaXJJbnRlZ2VyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgcmVmZXJzIHRvIGEgTGlzdCBvZiBzdWJqZWN0IGxldmVsIE1lYXN1cmVSZXBvcnQgcmVzb3VyY2VzLCBvbmUgZm9yIGVhY2ggc3ViamVjdCBpbiB0aGlzIHBvcHVsYXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHN1YmplY3RSZXN1bHRzPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE1lYXN1cmVSZXBvcnRHcm91cFBvcHVsYXRpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxNZWFzdXJlUmVwb3J0R3JvdXBQb3B1bGF0aW9uQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2NvZGUnXSkgeyB0aGlzLmNvZGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmNvZGUpOyB9XHJcbiAgICBpZiAoc291cmNlWydjb3VudCddKSB7IHRoaXMuY291bnQgPSBuZXcgZmhpci5GaGlySW50ZWdlcih7dmFsdWU6IHNvdXJjZS5jb3VudH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydzdWJqZWN0UmVzdWx0cyddKSB7IHRoaXMuc3ViamVjdFJlc3VsdHMgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnN1YmplY3RSZXN1bHRzKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBFeHRlbnNpYmxlLWJvdW5kIFZhbHVlIFNldCBmb3IgY29kZSAoTWVhc3VyZVJlcG9ydC5ncm91cC5wb3B1bGF0aW9uLmNvZGUpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBjb2RlRXh0ZW5zaWJsZUNvZGluZygpOk1lYXN1cmVQb3B1bGF0aW9uQ29kaW5nVHlwZSB7XHJcbiAgICByZXR1cm4gTWVhc3VyZVBvcHVsYXRpb25Db2RpbmdzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKHRoaXNbXCJjb2RlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY29kZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJjb3VudFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmNvdW50LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInN1YmplY3RSZXN1bHRzXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc3ViamVjdFJlc3VsdHMuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBNZWFzdXJlUmVwb3J0R3JvdXBTdHJhdGlmaWVyU3RyYXR1bUNvbXBvbmVudCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNZWFzdXJlUmVwb3J0R3JvdXBTdHJhdGlmaWVyU3RyYXR1bUNvbXBvbmVudEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjb2RlIGZvciB0aGUgc3RyYXR1bSBjb21wb25lbnQgdmFsdWUuXHJcbiAgICovXHJcbiAgY29kZTogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIHN0cmF0dW0gY29tcG9uZW50IHZhbHVlLlxyXG4gICAqL1xyXG4gIHZhbHVlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgc3RyYXRpZmllciBjb21wb25lbnQgdmFsdWUuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVhc3VyZVJlcG9ydEdyb3VwU3RyYXRpZmllclN0cmF0dW1Db21wb25lbnQgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdNZWFzdXJlUmVwb3J0R3JvdXBTdHJhdGlmaWVyU3RyYXR1bUNvbXBvbmVudCc7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNvZGUgZm9yIHRoZSBzdHJhdHVtIGNvbXBvbmVudCB2YWx1ZS5cclxuICAgKi9cclxuICBwdWJsaWMgY29kZTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgc3RyYXR1bSBjb21wb25lbnQgdmFsdWUuXHJcbiAgICovXHJcbiAgcHVibGljIHZhbHVlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE1lYXN1cmVSZXBvcnRHcm91cFN0cmF0aWZpZXJTdHJhdHVtQ29tcG9uZW50IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVhc3VyZVJlcG9ydEdyb3VwU3RyYXRpZmllclN0cmF0dW1Db21wb25lbnRBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY29kZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvZGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWyd2YWx1ZSddKSB7IHRoaXMudmFsdWUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnZhbHVlKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudmFsdWUgPSBudWxsOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAoIXRoaXNbJ2NvZGUnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCAgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IGNvZGU6Zmhpci5Db2RlYWJsZUNvbmNlcHQgZmhpcjogTWVhc3VyZVJlcG9ydC5ncm91cC5zdHJhdGlmaWVyLnN0cmF0dW0uY29tcG9uZW50LmNvZGU6Q29kZWFibGVDb25jZXB0JywgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImNvZGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5jb2RlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAoIXRoaXNbJ3ZhbHVlJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSB2YWx1ZTpmaGlyLkNvZGVhYmxlQ29uY2VwdCBmaGlyOiBNZWFzdXJlUmVwb3J0Lmdyb3VwLnN0cmF0aWZpZXIuc3RyYXR1bS5jb21wb25lbnQudmFsdWU6Q29kZWFibGVDb25jZXB0JywgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInZhbHVlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMudmFsdWUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBNZWFzdXJlUmVwb3J0R3JvdXBTdHJhdGlmaWVyU3RyYXR1bVBvcHVsYXRpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVhc3VyZVJlcG9ydEdyb3VwU3RyYXRpZmllclN0cmF0dW1Qb3B1bGF0aW9uQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIHR5cGUgb2YgdGhlIHBvcHVsYXRpb24uXHJcbiAgICovXHJcbiAgY29kZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG51bWJlciBvZiBtZW1iZXJzIG9mIHRoZSBwb3B1bGF0aW9uIGluIHRoaXMgc3RyYXR1bS5cclxuICAgKi9cclxuICBjb3VudD86IGZoaXIuRmhpckludGVnZXJ8bnVtYmVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgcmVmZXJzIHRvIGEgTGlzdCBvZiBzdWJqZWN0IGxldmVsIE1lYXN1cmVSZXBvcnQgcmVzb3VyY2VzLCBvbmUgZm9yIGVhY2ggc3ViamVjdCBpbiB0aGlzIHBvcHVsYXRpb24gaW4gdGhpcyBzdHJhdHVtLlxyXG4gICAqL1xyXG4gIHN1YmplY3RSZXN1bHRzPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBwb3B1bGF0aW9ucyB0aGF0IG1ha2UgdXAgdGhlIHN0cmF0dW0sIG9uZSBmb3IgZWFjaCB0eXBlIG9mIHBvcHVsYXRpb24gYXBwcm9wcmlhdGUgdG8gdGhlIG1lYXN1cmUuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVhc3VyZVJlcG9ydEdyb3VwU3RyYXRpZmllclN0cmF0dW1Qb3B1bGF0aW9uIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVhc3VyZVJlcG9ydEdyb3VwU3RyYXRpZmllclN0cmF0dW1Qb3B1bGF0aW9uJztcclxuICAvKipcclxuICAgKiBUaGUgdHlwZSBvZiB0aGUgcG9wdWxhdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgY29kZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbnVtYmVyIG9mIG1lbWJlcnMgb2YgdGhlIHBvcHVsYXRpb24gaW4gdGhpcyBzdHJhdHVtLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb3VudD86IGZoaXIuRmhpckludGVnZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCByZWZlcnMgdG8gYSBMaXN0IG9mIHN1YmplY3QgbGV2ZWwgTWVhc3VyZVJlcG9ydCByZXNvdXJjZXMsIG9uZSBmb3IgZWFjaCBzdWJqZWN0IGluIHRoaXMgcG9wdWxhdGlvbiBpbiB0aGlzIHN0cmF0dW0uXHJcbiAgICovXHJcbiAgcHVibGljIHN1YmplY3RSZXN1bHRzPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE1lYXN1cmVSZXBvcnRHcm91cFN0cmF0aWZpZXJTdHJhdHVtUG9wdWxhdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE1lYXN1cmVSZXBvcnRHcm91cFN0cmF0aWZpZXJTdHJhdHVtUG9wdWxhdGlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jb2RlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY291bnQnXSkgeyB0aGlzLmNvdW50ID0gbmV3IGZoaXIuRmhpckludGVnZXIoe3ZhbHVlOiBzb3VyY2UuY291bnR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3ViamVjdFJlc3VsdHMnXSkgeyB0aGlzLnN1YmplY3RSZXN1bHRzID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5zdWJqZWN0UmVzdWx0cyk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5zaWJsZS1ib3VuZCBWYWx1ZSBTZXQgZm9yIGNvZGUgKE1lYXN1cmVSZXBvcnQuZ3JvdXAuc3RyYXRpZmllci5zdHJhdHVtLnBvcHVsYXRpb24uY29kZSlcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGNvZGVFeHRlbnNpYmxlQ29kaW5nKCk6TWVhc3VyZVBvcHVsYXRpb25Db2RpbmdUeXBlIHtcclxuICAgIHJldHVybiBNZWFzdXJlUG9wdWxhdGlvbkNvZGluZ3M7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAodGhpc1tcImNvZGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5jb2RlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImNvdW50XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY291bnQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wic3ViamVjdFJlc3VsdHNcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5zdWJqZWN0UmVzdWx0cy5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lYXN1cmVSZXBvcnRHcm91cFN0cmF0aWZpZXJTdHJhdHVtIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lYXN1cmVSZXBvcnRHcm91cFN0cmF0aWZpZXJTdHJhdHVtQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIHZhbHVlIGZvciB0aGlzIHN0cmF0dW0sIGV4cHJlc3NlZCBhcyBhIENvZGVhYmxlQ29uY2VwdC4gV2hlbiBkZWZpbmluZyBzdHJhdGlmaWVycyBvbiBjb21wbGV4IHZhbHVlcywgdGhlIHZhbHVlIG11c3QgYmUgcmVuZGVyZWQgc3VjaCB0aGF0IHRoZSB2YWx1ZSBmb3IgZWFjaCBzdHJhdHVtIHdpdGhpbiB0aGUgc3RyYXRpZmllciBpcyB1bmlxdWUuXHJcbiAgICovXHJcbiAgdmFsdWU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgc3RyYXRpZmllciBjb21wb25lbnQgdmFsdWUuXHJcbiAgICovXHJcbiAgY29tcG9uZW50PzogZmhpci5NZWFzdXJlUmVwb3J0R3JvdXBTdHJhdGlmaWVyU3RyYXR1bUNvbXBvbmVudEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBvcHVsYXRpb25zIHRoYXQgbWFrZSB1cCB0aGUgc3RyYXR1bSwgb25lIGZvciBlYWNoIHR5cGUgb2YgcG9wdWxhdGlvbiBhcHByb3ByaWF0ZSB0byB0aGUgbWVhc3VyZS5cclxuICAgKi9cclxuICBwb3B1bGF0aW9uPzogZmhpci5NZWFzdXJlUmVwb3J0R3JvdXBTdHJhdGlmaWVyU3RyYXR1bVBvcHVsYXRpb25BcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBtZWFzdXJlIHNjb3JlIGZvciB0aGlzIHN0cmF0dW0sIGNhbGN1bGF0ZWQgYXMgYXBwcm9wcmlhdGUgZm9yIHRoZSBtZWFzdXJlIHR5cGUgYW5kIHNjb3JpbmcgbWV0aG9kLCBhbmQgYmFzZWQgb24gb25seSB0aGUgbWVtYmVycyBvZiB0aGlzIHN0cmF0dW0uXHJcbiAgICovXHJcbiAgbWVhc3VyZVNjb3JlPzogZmhpci5RdWFudGl0eUFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogVGhpcyBlbGVtZW50IGNvbnRhaW5zIHRoZSByZXN1bHRzIGZvciBhIHNpbmdsZSBzdHJhdHVtIHdpdGhpbiB0aGUgc3RyYXRpZmllci4gRm9yIGV4YW1wbGUsIHdoZW4gc3RyYXRpZnlpbmcgb24gYWRtaW5pc3RyYXRpdmUgZ2VuZGVyLCB0aGVyZSB3aWxsIGJlIGZvdXIgc3RyYXRhLCBvbmUgZm9yIGVhY2ggcG9zc2libGUgZ2VuZGVyIHZhbHVlLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1lYXN1cmVSZXBvcnRHcm91cFN0cmF0aWZpZXJTdHJhdHVtIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVhc3VyZVJlcG9ydEdyb3VwU3RyYXRpZmllclN0cmF0dW0nO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB2YWx1ZSBmb3IgdGhpcyBzdHJhdHVtLCBleHByZXNzZWQgYXMgYSBDb2RlYWJsZUNvbmNlcHQuIFdoZW4gZGVmaW5pbmcgc3RyYXRpZmllcnMgb24gY29tcGxleCB2YWx1ZXMsIHRoZSB2YWx1ZSBtdXN0IGJlIHJlbmRlcmVkIHN1Y2ggdGhhdCB0aGUgdmFsdWUgZm9yIGVhY2ggc3RyYXR1bSB3aXRoaW4gdGhlIHN0cmF0aWZpZXIgaXMgdW5pcXVlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB2YWx1ZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHN0cmF0aWZpZXIgY29tcG9uZW50IHZhbHVlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb21wb25lbnQ/OiBmaGlyLk1lYXN1cmVSZXBvcnRHcm91cFN0cmF0aWZpZXJTdHJhdHVtQ29tcG9uZW50W107XHJcbiAgLyoqXHJcbiAgICogVGhlIHBvcHVsYXRpb25zIHRoYXQgbWFrZSB1cCB0aGUgc3RyYXR1bSwgb25lIGZvciBlYWNoIHR5cGUgb2YgcG9wdWxhdGlvbiBhcHByb3ByaWF0ZSB0byB0aGUgbWVhc3VyZS5cclxuICAgKi9cclxuICBwdWJsaWMgcG9wdWxhdGlvbj86IGZoaXIuTWVhc3VyZVJlcG9ydEdyb3VwU3RyYXRpZmllclN0cmF0dW1Qb3B1bGF0aW9uW107XHJcbiAgLyoqXHJcbiAgICogVGhlIG1lYXN1cmUgc2NvcmUgZm9yIHRoaXMgc3RyYXR1bSwgY2FsY3VsYXRlZCBhcyBhcHByb3ByaWF0ZSBmb3IgdGhlIG1lYXN1cmUgdHlwZSBhbmQgc2NvcmluZyBtZXRob2QsIGFuZCBiYXNlZCBvbiBvbmx5IHRoZSBtZW1iZXJzIG9mIHRoaXMgc3RyYXR1bS5cclxuICAgKi9cclxuICBwdWJsaWMgbWVhc3VyZVNjb3JlPzogZmhpci5RdWFudGl0eXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgTWVhc3VyZVJlcG9ydEdyb3VwU3RyYXRpZmllclN0cmF0dW0gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxNZWFzdXJlUmVwb3J0R3JvdXBTdHJhdGlmaWVyU3RyYXR1bUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWyd2YWx1ZSddKSB7IHRoaXMudmFsdWUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnZhbHVlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29tcG9uZW50J10pIHsgdGhpcy5jb21wb25lbnQgPSBzb3VyY2UuY29tcG9uZW50Lm1hcCgoeCkgPT4gbmV3IGZoaXIuTWVhc3VyZVJlcG9ydEdyb3VwU3RyYXRpZmllclN0cmF0dW1Db21wb25lbnQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb21wb25lbnQgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncG9wdWxhdGlvbiddKSB7IHRoaXMucG9wdWxhdGlvbiA9IHNvdXJjZS5wb3B1bGF0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuTWVhc3VyZVJlcG9ydEdyb3VwU3RyYXRpZmllclN0cmF0dW1Qb3B1bGF0aW9uKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucG9wdWxhdGlvbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydtZWFzdXJlU2NvcmUnXSkgeyB0aGlzLm1lYXN1cmVTY29yZSA9IG5ldyBmaGlyLlF1YW50aXR5KHNvdXJjZS5tZWFzdXJlU2NvcmUpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAodGhpc1tcInZhbHVlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMudmFsdWUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiY29tcG9uZW50XCJdKSB7IHRoaXMuY29tcG9uZW50LmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJwb3B1bGF0aW9uXCJdKSB7IHRoaXMucG9wdWxhdGlvbi5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wibWVhc3VyZVNjb3JlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMubWVhc3VyZVNjb3JlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgTWVhc3VyZVJlcG9ydEdyb3VwU3RyYXRpZmllciB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNZWFzdXJlUmVwb3J0R3JvdXBTdHJhdGlmaWVyQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIG1lYW5pbmcgb2YgdGhpcyBzdHJhdGlmaWVyLCBhcyBkZWZpbmVkIGluIHRoZSBtZWFzdXJlIGRlZmluaXRpb24uXHJcbiAgICovXHJcbiAgY29kZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgY29udGFpbnMgdGhlIHJlc3VsdHMgZm9yIGEgc2luZ2xlIHN0cmF0dW0gd2l0aGluIHRoZSBzdHJhdGlmaWVyLiBGb3IgZXhhbXBsZSwgd2hlbiBzdHJhdGlmeWluZyBvbiBhZG1pbmlzdHJhdGl2ZSBnZW5kZXIsIHRoZXJlIHdpbGwgYmUgZm91ciBzdHJhdGEsIG9uZSBmb3IgZWFjaCBwb3NzaWJsZSBnZW5kZXIgdmFsdWUuXHJcbiAgICovXHJcbiAgc3RyYXR1bT86IGZoaXIuTWVhc3VyZVJlcG9ydEdyb3VwU3RyYXRpZmllclN0cmF0dW1BcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogV2hlbiBhIG1lYXN1cmUgaW5jbHVkZXMgbXVsdGlwbGUgc3RyYXRpZmllcnMsIHRoZXJlIHdpbGwgYmUgYSBzdHJhdGlmaWVyIGdyb3VwIGZvciBlYWNoIHN0cmF0aWZpZXIgZGVmaW5lZCBieSB0aGUgbWVhc3VyZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZWFzdXJlUmVwb3J0R3JvdXBTdHJhdGlmaWVyIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVhc3VyZVJlcG9ydEdyb3VwU3RyYXRpZmllcic7XHJcbiAgLyoqXHJcbiAgICogVGhlIG1lYW5pbmcgb2YgdGhpcyBzdHJhdGlmaWVyLCBhcyBkZWZpbmVkIGluIHRoZSBtZWFzdXJlIGRlZmluaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBjb250YWlucyB0aGUgcmVzdWx0cyBmb3IgYSBzaW5nbGUgc3RyYXR1bSB3aXRoaW4gdGhlIHN0cmF0aWZpZXIuIEZvciBleGFtcGxlLCB3aGVuIHN0cmF0aWZ5aW5nIG9uIGFkbWluaXN0cmF0aXZlIGdlbmRlciwgdGhlcmUgd2lsbCBiZSBmb3VyIHN0cmF0YSwgb25lIGZvciBlYWNoIHBvc3NpYmxlIGdlbmRlciB2YWx1ZS5cclxuICAgKi9cclxuICBwdWJsaWMgc3RyYXR1bT86IGZoaXIuTWVhc3VyZVJlcG9ydEdyb3VwU3RyYXRpZmllclN0cmF0dW1bXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBNZWFzdXJlUmVwb3J0R3JvdXBTdHJhdGlmaWVyIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVhc3VyZVJlcG9ydEdyb3VwU3RyYXRpZmllckFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gc291cmNlLmNvZGUubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb2RlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0cmF0dW0nXSkgeyB0aGlzLnN0cmF0dW0gPSBzb3VyY2Uuc3RyYXR1bS5tYXAoKHgpID0+IG5ldyBmaGlyLk1lYXN1cmVSZXBvcnRHcm91cFN0cmF0aWZpZXJTdHJhdHVtKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3RyYXR1bSA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAodGhpc1tcImNvZGVcIl0pIHsgdGhpcy5jb2RlLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJzdHJhdHVtXCJdKSB7IHRoaXMuc3RyYXR1bS5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBNZWFzdXJlUmVwb3J0R3JvdXAgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVhc3VyZVJlcG9ydEdyb3VwQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIG1lYW5pbmcgb2YgdGhlIHBvcHVsYXRpb24gZ3JvdXAgYXMgZGVmaW5lZCBpbiB0aGUgbWVhc3VyZSBkZWZpbml0aW9uLlxyXG4gICAqL1xyXG4gIGNvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwb3B1bGF0aW9ucyB0aGF0IG1ha2UgdXAgdGhlIHBvcHVsYXRpb24gZ3JvdXAsIG9uZSBmb3IgZWFjaCB0eXBlIG9mIHBvcHVsYXRpb24gYXBwcm9wcmlhdGUgZm9yIHRoZSBtZWFzdXJlLlxyXG4gICAqL1xyXG4gIHBvcHVsYXRpb24/OiBmaGlyLk1lYXN1cmVSZXBvcnRHcm91cFBvcHVsYXRpb25BcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBtZWFzdXJlIHNjb3JlIGZvciB0aGlzIHBvcHVsYXRpb24gZ3JvdXAsIGNhbGN1bGF0ZWQgYXMgYXBwcm9wcmlhdGUgZm9yIHRoZSBtZWFzdXJlIHR5cGUgYW5kIHNjb3JpbmcgbWV0aG9kLCBhbmQgYmFzZWQgb24gdGhlIGNvbnRlbnRzIG9mIHRoZSBwb3B1bGF0aW9ucyBkZWZpbmVkIGluIHRoZSBncm91cC5cclxuICAgKi9cclxuICBtZWFzdXJlU2NvcmU/OiBmaGlyLlF1YW50aXR5QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogV2hlbiBhIG1lYXN1cmUgaW5jbHVkZXMgbXVsdGlwbGUgc3RyYXRpZmllcnMsIHRoZXJlIHdpbGwgYmUgYSBzdHJhdGlmaWVyIGdyb3VwIGZvciBlYWNoIHN0cmF0aWZpZXIgZGVmaW5lZCBieSB0aGUgbWVhc3VyZS5cclxuICAgKi9cclxuICBzdHJhdGlmaWVyPzogZmhpci5NZWFzdXJlUmVwb3J0R3JvdXBTdHJhdGlmaWVyQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSByZXN1bHRzIG9mIHRoZSBjYWxjdWxhdGlvbiwgb25lIGZvciBlYWNoIHBvcHVsYXRpb24gZ3JvdXAgaW4gdGhlIG1lYXN1cmUuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVhc3VyZVJlcG9ydEdyb3VwIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVhc3VyZVJlcG9ydEdyb3VwJztcclxuICAvKipcclxuICAgKiBUaGUgbWVhbmluZyBvZiB0aGUgcG9wdWxhdGlvbiBncm91cCBhcyBkZWZpbmVkIGluIHRoZSBtZWFzdXJlIGRlZmluaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBvcHVsYXRpb25zIHRoYXQgbWFrZSB1cCB0aGUgcG9wdWxhdGlvbiBncm91cCwgb25lIGZvciBlYWNoIHR5cGUgb2YgcG9wdWxhdGlvbiBhcHByb3ByaWF0ZSBmb3IgdGhlIG1lYXN1cmUuXHJcbiAgICovXHJcbiAgcHVibGljIHBvcHVsYXRpb24/OiBmaGlyLk1lYXN1cmVSZXBvcnRHcm91cFBvcHVsYXRpb25bXTtcclxuICAvKipcclxuICAgKiBUaGUgbWVhc3VyZSBzY29yZSBmb3IgdGhpcyBwb3B1bGF0aW9uIGdyb3VwLCBjYWxjdWxhdGVkIGFzIGFwcHJvcHJpYXRlIGZvciB0aGUgbWVhc3VyZSB0eXBlIGFuZCBzY29yaW5nIG1ldGhvZCwgYW5kIGJhc2VkIG9uIHRoZSBjb250ZW50cyBvZiB0aGUgcG9wdWxhdGlvbnMgZGVmaW5lZCBpbiB0aGUgZ3JvdXAuXHJcbiAgICovXHJcbiAgcHVibGljIG1lYXN1cmVTY29yZT86IGZoaXIuUXVhbnRpdHl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFdoZW4gYSBtZWFzdXJlIGluY2x1ZGVzIG11bHRpcGxlIHN0cmF0aWZpZXJzLCB0aGVyZSB3aWxsIGJlIGEgc3RyYXRpZmllciBncm91cCBmb3IgZWFjaCBzdHJhdGlmaWVyIGRlZmluZWQgYnkgdGhlIG1lYXN1cmUuXHJcbiAgICovXHJcbiAgcHVibGljIHN0cmF0aWZpZXI/OiBmaGlyLk1lYXN1cmVSZXBvcnRHcm91cFN0cmF0aWZpZXJbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBNZWFzdXJlUmVwb3J0R3JvdXAgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxNZWFzdXJlUmVwb3J0R3JvdXBBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY29kZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3BvcHVsYXRpb24nXSkgeyB0aGlzLnBvcHVsYXRpb24gPSBzb3VyY2UucG9wdWxhdGlvbi5tYXAoKHgpID0+IG5ldyBmaGlyLk1lYXN1cmVSZXBvcnRHcm91cFBvcHVsYXRpb24oeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wb3B1bGF0aW9uID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ21lYXN1cmVTY29yZSddKSB7IHRoaXMubWVhc3VyZVNjb3JlID0gbmV3IGZoaXIuUXVhbnRpdHkoc291cmNlLm1lYXN1cmVTY29yZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0cmF0aWZpZXInXSkgeyB0aGlzLnN0cmF0aWZpZXIgPSBzb3VyY2Uuc3RyYXRpZmllci5tYXAoKHgpID0+IG5ldyBmaGlyLk1lYXN1cmVSZXBvcnRHcm91cFN0cmF0aWZpZXIoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdHJhdGlmaWVyID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICh0aGlzW1wiY29kZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmNvZGUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wicG9wdWxhdGlvblwiXSkgeyB0aGlzLnBvcHVsYXRpb24uZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcIm1lYXN1cmVTY29yZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm1lYXN1cmVTY29yZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJzdHJhdGlmaWVyXCJdKSB7IHRoaXMuc3RyYXRpZmllci5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBNZWFzdXJlUmVwb3J0IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lYXN1cmVSZXBvcnRBcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJNZWFzdXJlUmVwb3J0XCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFR5cGljYWxseSwgdGhpcyBpcyB1c2VkIGZvciBpZGVudGlmaWVycyB0aGF0IGNhbiBnbyBpbiBhbiBITDcgVjMgSUkgZGF0YSB0eXBlIC0gZS5nLiB0byBpZGVudGlmeSB0aGlzIHt7dGl0bGV9fSBvdXRzaWRlIG9mIEZISVIsIHdoZXJlIHRoZSBsb2dpY2FsIFVSTCBpcyBub3QgcG9zc2libGUgdG8gdXNlLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgYmVjYXVzZSB0aGUgc3RhdHVzIGNvbnRhaW5zIGNvZGVzIHRoYXQgbWFyayB0aGUgcmVzb3VyY2UgYXMgbm90IGN1cnJlbnRseSB2YWxpZC5cclxuICAgKi9cclxuICBzdGF0dXM6IE1lYXN1cmVSZXBvcnRTdGF0dXNDb2RlVHlwZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIERhdGEtY29sbGVjdGlvbiByZXBvcnRzIGFyZSB1c2VkIG9ubHkgdG8gY29tbXVuaWNhdGUgZGF0YS1vZi1pbnRlcmVzdCBmb3IgYSBtZWFzdXJlLiBUaGV5IGRvIG5vdCBuZWNlc3NhcmlseSBpbmNsdWRlIGFsbCB0aGUgZGF0YSBmb3IgYSBwYXJ0aWN1bGFyIHN1YmplY3Qgb3IgcG9wdWxhdGlvbiwgYnV0IHRoZXkgbWF5LlxyXG4gICAqL1xyXG4gIHR5cGU6IE1lYXN1cmVSZXBvcnRUeXBlQ29kZVR5cGV8bnVsbDtcclxuICAvKipcclxuICAgKiBBIHJlZmVyZW5jZSB0byB0aGUgTWVhc3VyZSB0aGF0IHdhcyBjYWxjdWxhdGVkIHRvIHByb2R1Y2UgdGhpcyByZXBvcnQuXHJcbiAgICovXHJcbiAgbWVhc3VyZTogZmhpci5GaGlyQ2Fub25pY2FsfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogT3B0aW9uYWwgc3ViamVjdCBpZGVudGlmeWluZyB0aGUgaW5kaXZpZHVhbCBvciBpbmRpdmlkdWFscyB0aGUgcmVwb3J0IGlzIGZvci5cclxuICAgKi9cclxuICBzdWJqZWN0PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSB0aGlzIG1lYXN1cmUgcmVwb3J0IHdhcyBnZW5lcmF0ZWQuXHJcbiAgICovXHJcbiAgZGF0ZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGluZGl2aWR1YWwsIGxvY2F0aW9uLCBvciBvcmdhbml6YXRpb24gdGhhdCBpcyByZXBvcnRpbmcgdGhlIGRhdGEuXHJcbiAgICovXHJcbiAgcmVwb3J0ZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZXBvcnRpbmcgcGVyaW9kIGZvciB3aGljaCB0aGUgcmVwb3J0IHdhcyBjYWxjdWxhdGVkLlxyXG4gICAqL1xyXG4gIHBlcmlvZDogZmhpci5QZXJpb2RBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IGlzIHR5cGljYWxseSBkZWZpbmVkIGJ5IHRoZSBtZWFzdXJlLCBidXQgcmVwcm9kdWNlZCBoZXJlIHRvIGVuc3VyZSB0aGUgbWVhc3VyZSBzY29yZSBjYW4gYmUgaW50ZXJwcmV0ZWQuIFRoZSBlbGVtZW50IGlzIGxhYmVsZWQgYXMgYSBtb2RpZmllciBiZWNhdXNlIGl0IGNoYW5nZXMgdGhlIGludGVycHJldGF0aW9uIG9mIHRoZSByZXBvcnRlZCBtZWFzdXJlIHNjb3JlLlxyXG4gICAqL1xyXG4gIGltcHJvdmVtZW50Tm90YXRpb24/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZXN1bHRzIG9mIHRoZSBjYWxjdWxhdGlvbiwgb25lIGZvciBlYWNoIHBvcHVsYXRpb24gZ3JvdXAgaW4gdGhlIG1lYXN1cmUuXHJcbiAgICovXHJcbiAgZ3JvdXA/OiBmaGlyLk1lYXN1cmVSZXBvcnRHcm91cEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSByZWZlcmVuY2UgdG8gYSBCdW5kbGUgY29udGFpbmluZyB0aGUgUmVzb3VyY2VzIHRoYXQgd2VyZSB1c2VkIGluIHRoZSBjYWxjdWxhdGlvbiBvZiB0aGlzIG1lYXN1cmUuXHJcbiAgICovXHJcbiAgZXZhbHVhdGVkUmVzb3VyY2U/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgTWVhc3VyZVJlcG9ydCByZXNvdXJjZSBjb250YWlucyB0aGUgcmVzdWx0cyBvZiB0aGUgY2FsY3VsYXRpb24gb2YgYSBtZWFzdXJlOyBhbmQgb3B0aW9uYWxseSBhIHJlZmVyZW5jZSB0byB0aGUgcmVzb3VyY2VzIGludm9sdmVkIGluIHRoYXQgY2FsY3VsYXRpb24uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVhc3VyZVJlcG9ydCBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVhc3VyZVJlcG9ydCc7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJNZWFzdXJlUmVwb3J0XCI7XHJcbiAgLyoqXHJcbiAgICogVHlwaWNhbGx5LCB0aGlzIGlzIHVzZWQgZm9yIGlkZW50aWZpZXJzIHRoYXQgY2FuIGdvIGluIGFuIEhMNyBWMyBJSSBkYXRhIHR5cGUgLSBlLmcuIHRvIGlkZW50aWZ5IHRoaXMge3t0aXRsZX19IG91dHNpZGUgb2YgRkhJUiwgd2hlcmUgdGhlIGxvZ2ljYWwgVVJMIGlzIG5vdCBwb3NzaWJsZSB0byB1c2UuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJbXTtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIGJlY2F1c2UgdGhlIHN0YXR1cyBjb250YWlucyBjb2RlcyB0aGF0IG1hcmsgdGhlIHJlc291cmNlIGFzIG5vdCBjdXJyZW50bHkgdmFsaWQuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1czogTWVhc3VyZVJlcG9ydFN0YXR1c0NvZGVUeXBlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogRGF0YS1jb2xsZWN0aW9uIHJlcG9ydHMgYXJlIHVzZWQgb25seSB0byBjb21tdW5pY2F0ZSBkYXRhLW9mLWludGVyZXN0IGZvciBhIG1lYXN1cmUuIFRoZXkgZG8gbm90IG5lY2Vzc2FyaWx5IGluY2x1ZGUgYWxsIHRoZSBkYXRhIGZvciBhIHBhcnRpY3VsYXIgc3ViamVjdCBvciBwb3B1bGF0aW9uLCBidXQgdGhleSBtYXkuXHJcbiAgICovXHJcbiAgcHVibGljIHR5cGU6IE1lYXN1cmVSZXBvcnRUeXBlQ29kZVR5cGV8bnVsbDtcclxuICAvKipcclxuICAgKiBBIHJlZmVyZW5jZSB0byB0aGUgTWVhc3VyZSB0aGF0IHdhcyBjYWxjdWxhdGVkIHRvIHByb2R1Y2UgdGhpcyByZXBvcnQuXHJcbiAgICovXHJcbiAgcHVibGljIG1lYXN1cmU6IGZoaXIuRmhpckNhbm9uaWNhbHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIE9wdGlvbmFsIHN1YmplY3QgaWRlbnRpZnlpbmcgdGhlIGluZGl2aWR1YWwgb3IgaW5kaXZpZHVhbHMgdGhlIHJlcG9ydCBpcyBmb3IuXHJcbiAgICovXHJcbiAgcHVibGljIHN1YmplY3Q/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgdGhpcyBtZWFzdXJlIHJlcG9ydCB3YXMgZ2VuZXJhdGVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkYXRlPzogZmhpci5GaGlyRGF0ZVRpbWV8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpbmRpdmlkdWFsLCBsb2NhdGlvbiwgb3Igb3JnYW5pemF0aW9uIHRoYXQgaXMgcmVwb3J0aW5nIHRoZSBkYXRhLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZXBvcnRlcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcmVwb3J0aW5nIHBlcmlvZCBmb3Igd2hpY2ggdGhlIHJlcG9ydCB3YXMgY2FsY3VsYXRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgcGVyaW9kOiBmaGlyLlBlcmlvZHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyB0eXBpY2FsbHkgZGVmaW5lZCBieSB0aGUgbWVhc3VyZSwgYnV0IHJlcHJvZHVjZWQgaGVyZSB0byBlbnN1cmUgdGhlIG1lYXN1cmUgc2NvcmUgY2FuIGJlIGludGVycHJldGVkLiBUaGUgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgYmVjYXVzZSBpdCBjaGFuZ2VzIHRoZSBpbnRlcnByZXRhdGlvbiBvZiB0aGUgcmVwb3J0ZWQgbWVhc3VyZSBzY29yZS5cclxuICAgKi9cclxuICBwdWJsaWMgaW1wcm92ZW1lbnROb3RhdGlvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcmVzdWx0cyBvZiB0aGUgY2FsY3VsYXRpb24sIG9uZSBmb3IgZWFjaCBwb3B1bGF0aW9uIGdyb3VwIGluIHRoZSBtZWFzdXJlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBncm91cD86IGZoaXIuTWVhc3VyZVJlcG9ydEdyb3VwW107XHJcbiAgLyoqXHJcbiAgICogQSByZWZlcmVuY2UgdG8gYSBCdW5kbGUgY29udGFpbmluZyB0aGUgUmVzb3VyY2VzIHRoYXQgd2VyZSB1c2VkIGluIHRoZSBjYWxjdWxhdGlvbiBvZiB0aGlzIG1lYXN1cmUuXHJcbiAgICovXHJcbiAgcHVibGljIGV2YWx1YXRlZFJlc291cmNlPzogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBNZWFzdXJlUmVwb3J0IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVhc3VyZVJlcG9ydEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdNZWFzdXJlUmVwb3J0JztcclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBzb3VyY2UuaWRlbnRpZmllci5tYXAoKHgpID0+IG5ldyBmaGlyLklkZW50aWZpZXIoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pZGVudGlmaWVyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0YXR1cyddKSB7IHRoaXMuc3RhdHVzID0gc291cmNlLnN0YXR1czsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsndHlwZSddKSB7IHRoaXMudHlwZSA9IHNvdXJjZS50eXBlOyB9XHJcbiAgICBlbHNlIHsgdGhpcy50eXBlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbWVhc3VyZSddKSB7IHRoaXMubWVhc3VyZSA9IG5ldyBmaGlyLkZoaXJDYW5vbmljYWwoe3ZhbHVlOiBzb3VyY2UubWVhc3VyZX0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5tZWFzdXJlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3ViamVjdCddKSB7IHRoaXMuc3ViamVjdCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2Uuc3ViamVjdCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2RhdGUnXSkgeyB0aGlzLmRhdGUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2UuZGF0ZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydyZXBvcnRlciddKSB7IHRoaXMucmVwb3J0ZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnJlcG9ydGVyKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncGVyaW9kJ10pIHsgdGhpcy5wZXJpb2QgPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLnBlcmlvZCk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnBlcmlvZCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ2ltcHJvdmVtZW50Tm90YXRpb24nXSkgeyB0aGlzLmltcHJvdmVtZW50Tm90YXRpb24gPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmltcHJvdmVtZW50Tm90YXRpb24pOyB9XHJcbiAgICBpZiAoc291cmNlWydncm91cCddKSB7IHRoaXMuZ3JvdXAgPSBzb3VyY2UuZ3JvdXAubWFwKCh4KSA9PiBuZXcgZmhpci5NZWFzdXJlUmVwb3J0R3JvdXAoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5ncm91cCA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydldmFsdWF0ZWRSZXNvdXJjZSddKSB7IHRoaXMuZXZhbHVhdGVkUmVzb3VyY2UgPSBzb3VyY2UuZXZhbHVhdGVkUmVzb3VyY2UubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5ldmFsdWF0ZWRSZXNvdXJjZSA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlcXVpcmVkLWJvdW5kIFZhbHVlIFNldCBmb3Igc3RhdHVzIChNZWFzdXJlUmVwb3J0LnN0YXR1cylcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIHN0YXR1c1JlcXVpcmVkQ29kaW5nKCk6TWVhc3VyZVJlcG9ydFN0YXR1c0NvZGluZ1R5cGUge1xyXG4gICAgcmV0dXJuIE1lYXN1cmVSZXBvcnRTdGF0dXNDb2RpbmdzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIHR5cGUgKE1lYXN1cmVSZXBvcnQudHlwZSlcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIHR5cGVSZXF1aXJlZENvZGluZygpOk1lYXN1cmVSZXBvcnRUeXBlQ29kaW5nVHlwZSB7XHJcbiAgICByZXR1cm4gTWVhc3VyZVJlcG9ydFR5cGVDb2RpbmdzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1aXJlZC1ib3VuZCBWYWx1ZSBTZXQgZm9yIGltcHJvdmVtZW50Tm90YXRpb24gKE1lYXN1cmVSZXBvcnQuaW1wcm92ZW1lbnROb3RhdGlvbilcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGltcHJvdmVtZW50Tm90YXRpb25SZXF1aXJlZENvZGluZygpOk1lYXN1cmVJbXByb3ZlbWVudE5vdGF0aW9uQ29kaW5nVHlwZSB7XHJcbiAgICByZXR1cm4gTWVhc3VyZUltcHJvdmVtZW50Tm90YXRpb25Db2RpbmdzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKCF0aGlzWydyZXNvdXJjZVR5cGUnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCAgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHJlc291cmNlVHlwZTpcIk1lYXN1cmVSZXBvcnRcIiBmaGlyOiBNZWFzdXJlUmVwb3J0LnJlc291cmNlVHlwZTpcIk1lYXN1cmVSZXBvcnRcIicsIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJpZGVudGlmaWVyXCJdKSB7IHRoaXMuaWRlbnRpZmllci5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICghdGhpc1snc3RhdHVzJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBzdGF0dXM6TWVhc3VyZVJlcG9ydFN0YXR1c0NvZGVUeXBlIGZoaXI6IE1lYXN1cmVSZXBvcnQuc3RhdHVzOmNvZGUnLCB9KTtcclxuICAgIH1cclxuICAgIGlmICghdGhpc1sndHlwZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsICBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgdHlwZTpNZWFzdXJlUmVwb3J0VHlwZUNvZGVUeXBlIGZoaXI6IE1lYXN1cmVSZXBvcnQudHlwZTpjb2RlJywgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXRoaXNbJ21lYXN1cmUnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCAgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IG1lYXN1cmU6Zmhpci5GaGlyQ2Fub25pY2FsIGZoaXI6IE1lYXN1cmVSZXBvcnQubWVhc3VyZTpjYW5vbmljYWwnLCB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wibWVhc3VyZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm1lYXN1cmUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wic3ViamVjdFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnN1YmplY3QuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiZGF0ZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmRhdGUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wicmVwb3J0ZXJcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5yZXBvcnRlci5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKCF0aGlzWydwZXJpb2QnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCAgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHBlcmlvZDpmaGlyLlBlcmlvZCBmaGlyOiBNZWFzdXJlUmVwb3J0LnBlcmlvZDpQZXJpb2QnLCB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wicGVyaW9kXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucGVyaW9kLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImltcHJvdmVtZW50Tm90YXRpb25cIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5pbXByb3ZlbWVudE5vdGF0aW9uLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImdyb3VwXCJdKSB7IHRoaXMuZ3JvdXAuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImV2YWx1YXRlZFJlc291cmNlXCJdKSB7IHRoaXMuZXZhbHVhdGVkUmVzb3VyY2UuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=