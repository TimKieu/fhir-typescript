// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: MessageHeader
import * as fhir from '../fhir.js';
// @ts-ignore
import { ResponseCodes } from '../fhirValueSets/ResponseCodes.js';
/**
 * There SHOULD be at least one destination, but in some circumstances, the source system is unaware of any particular destination system.
 */
export class MessageHeaderDestination extends fhir.BackboneElement {
    /**
     * Default constructor for MessageHeaderDestination - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['name']) {
            this.name = new fhir.FhirString({ value: source.name });
        }
        if (source['_name']) {
            if (this.name) {
                this.name.addExtendedProperties(source._name);
            }
            else {
                this.name = new fhir.FhirString(source._name);
            }
        }
        if (source['target']) {
            this.target = new fhir.Reference(source.target);
        }
        if (source['endpoint']) {
            this.endpoint = new fhir.FhirUrl({ value: source.endpoint });
        }
        else {
            this.endpoint = null;
        }
        if (source['_endpoint']) {
            if (this.endpoint) {
                this.endpoint.addExtendedProperties(source._endpoint);
            }
            else {
                this.endpoint = new fhir.FhirUrl(source._endpoint);
            }
        }
        if (source['receiver']) {
            this.receiver = new fhir.Reference(source.receiver);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'MessageHeader.destination';
        }
        if (this["name"]) {
            issues.push(...this.name.doModelValidation(expression + '.name'));
        }
        if (this["target"]) {
            issues.push(...this.target.doModelValidation(expression + '.target'));
        }
        if (!this['endpoint']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property endpoint fhir: MessageHeader.destination.endpoint:url', expression: [expression] });
        }
        if (this["endpoint"]) {
            issues.push(...this.endpoint.doModelValidation(expression + '.endpoint'));
        }
        if (this["receiver"]) {
            issues.push(...this.receiver.doModelValidation(expression + '.receiver'));
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MessageHeaderDestination._fts_dataType = 'MessageHeaderDestination';
/**
 * The source application from which this message originated.
 */
export class MessageHeaderSource extends fhir.BackboneElement {
    /**
     * Default constructor for MessageHeaderSource - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['name']) {
            this.name = new fhir.FhirString({ value: source.name });
        }
        if (source['_name']) {
            if (this.name) {
                this.name.addExtendedProperties(source._name);
            }
            else {
                this.name = new fhir.FhirString(source._name);
            }
        }
        if (source['software']) {
            this.software = new fhir.FhirString({ value: source.software });
        }
        if (source['_software']) {
            if (this.software) {
                this.software.addExtendedProperties(source._software);
            }
            else {
                this.software = new fhir.FhirString(source._software);
            }
        }
        if (source['version']) {
            this.version = new fhir.FhirString({ value: source.version });
        }
        if (source['_version']) {
            if (this.version) {
                this.version.addExtendedProperties(source._version);
            }
            else {
                this.version = new fhir.FhirString(source._version);
            }
        }
        if (source['contact']) {
            this.contact = new fhir.ContactPoint(source.contact);
        }
        if (source['endpoint']) {
            this.endpoint = new fhir.FhirUrl({ value: source.endpoint });
        }
        else {
            this.endpoint = null;
        }
        if (source['_endpoint']) {
            if (this.endpoint) {
                this.endpoint.addExtendedProperties(source._endpoint);
            }
            else {
                this.endpoint = new fhir.FhirUrl(source._endpoint);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'MessageHeader.source';
        }
        if (this["name"]) {
            issues.push(...this.name.doModelValidation(expression + '.name'));
        }
        if (this["software"]) {
            issues.push(...this.software.doModelValidation(expression + '.software'));
        }
        if (this["version"]) {
            issues.push(...this.version.doModelValidation(expression + '.version'));
        }
        if (this["contact"]) {
            issues.push(...this.contact.doModelValidation(expression + '.contact'));
        }
        if (!this['endpoint']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property endpoint fhir: MessageHeader.source.endpoint:url', expression: [expression] });
        }
        if (this["endpoint"]) {
            issues.push(...this.endpoint.doModelValidation(expression + '.endpoint'));
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MessageHeaderSource._fts_dataType = 'MessageHeaderSource';
/**
 * Information about the message that this message is a response to.  Only present if this message is a response.
 */
export class MessageHeaderResponse extends fhir.BackboneElement {
    /**
     * Default constructor for MessageHeaderResponse - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['identifier']) {
            this.identifier = new fhir.FhirId({ value: source.identifier });
        }
        else {
            this.identifier = null;
        }
        if (source['_identifier']) {
            if (this.identifier) {
                this.identifier.addExtendedProperties(source._identifier);
            }
            else {
                this.identifier = new fhir.FhirId(source._identifier);
            }
        }
        if (source['code']) {
            this.code = new fhir.FhirCode({ value: source.code });
        }
        else {
            this.code = null;
        }
        if (source['_code']) {
            if (this.code) {
                this.code.addExtendedProperties(source._code);
            }
            else {
                this.code = new fhir.FhirCode(source._code);
            }
        }
        if (source['details']) {
            this.details = new fhir.Reference(source.details);
        }
    }
    /**
     * Required-bound Value Set for code (MessageHeader.response.code)
     */
    static get codeRequiredCodes() {
        return ResponseCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'MessageHeader.response';
        }
        if (!this['identifier']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property identifier fhir: MessageHeader.response.identifier:id', expression: [expression] });
        }
        if (this["identifier"]) {
            issues.push(...this.identifier.doModelValidation(expression + '.identifier'));
        }
        if (!this['code']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property code fhir: MessageHeader.response.code:code', expression: [expression] });
        }
        if (this['code'] && (!Object.values(ResponseCodes).includes(this.code.value))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property code fhir: MessageHeader.response.code:code Required binding to: Response', expression: [expression] });
        }
        if (this["code"]) {
            issues.push(...this.code.doModelValidation(expression + '.code'));
        }
        if (this["details"]) {
            issues.push(...this.details.doModelValidation(expression + '.details'));
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MessageHeaderResponse._fts_dataType = 'MessageHeaderResponse';
/**
 * The header for a message exchange that is either requesting or responding to an action.  The reference(s) that are the subject of the action as well as other information related to the action are typically transmitted in a bundle in which the MessageHeader resource instance is the first resource in the bundle.
 */
export class MessageHeader extends fhir.DomainResource {
    /**
     * Default constructor for MessageHeader - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'MessageHeader';
        if (source['event']) {
            this.event = source.event;
        }
        else if (source['eventCoding']) {
            this.event = new fhir.Coding(source.eventCoding);
        }
        else if (source['eventUri']) {
            this.event = new fhir.FhirUri({ value: source.eventUri });
        }
        else {
            this.event = null;
        }
        if (source['destination']) {
            this.destination = source.destination.map((x) => new fhir.MessageHeaderDestination(x));
        }
        else {
            this.destination = [];
        }
        if (source['sender']) {
            this.sender = new fhir.Reference(source.sender);
        }
        if (source['enterer']) {
            this.enterer = new fhir.Reference(source.enterer);
        }
        if (source['author']) {
            this.author = new fhir.Reference(source.author);
        }
        if (source['source']) {
            this.source = new fhir.MessageHeaderSource(source.source);
        }
        else {
            this.source = null;
        }
        if (source['responsible']) {
            this.responsible = new fhir.Reference(source.responsible);
        }
        if (source['reason']) {
            this.reason = new fhir.CodeableConcept(source.reason);
        }
        if (source['response']) {
            this.response = new fhir.MessageHeaderResponse(source.response);
        }
        if (source['focus']) {
            this.focus = source.focus.map((x) => new fhir.Reference(x));
        }
        else {
            this.focus = [];
        }
        if (source['definition']) {
            this.definition = new fhir.FhirCanonical({ value: source.definition });
        }
        if (source['_definition']) {
            if (this.definition) {
                this.definition.addExtendedProperties(source._definition);
            }
            else {
                this.definition = new fhir.FhirCanonical(source._definition);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'MessageHeader';
        }
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType fhir: MessageHeader.resourceType:"MessageHeader"', expression: [expression] });
        }
        if (!this['event']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property event fhir: MessageHeader.event[x]:', expression: [expression] });
        }
        if (this["destination"]) {
            this.destination.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.destination[${i}]`)); });
        }
        if (this["sender"]) {
            issues.push(...this.sender.doModelValidation(expression + '.sender'));
        }
        if (this["enterer"]) {
            issues.push(...this.enterer.doModelValidation(expression + '.enterer'));
        }
        if (this["author"]) {
            issues.push(...this.author.doModelValidation(expression + '.author'));
        }
        if (!this['source']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property source fhir: MessageHeader.source:source', expression: [expression] });
        }
        if (this["source"]) {
            issues.push(...this.source.doModelValidation(expression + '.source'));
        }
        if (this["responsible"]) {
            issues.push(...this.responsible.doModelValidation(expression + '.responsible'));
        }
        if (this["reason"]) {
            issues.push(...this.reason.doModelValidation(expression + '.reason'));
        }
        if (this["response"]) {
            issues.push(...this.response.doModelValidation(expression + '.response'));
        }
        if (this["focus"]) {
            this.focus.forEach((x, i) => { issues.push(...x.doModelValidation(expression + `.focus[${i}]`)); });
        }
        if (this["definition"]) {
            issues.push(...this.definition.doModelValidation(expression + '.definition'));
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MessageHeader._fts_dataType = 'MessageHeader';
/**
 * Internal flag to properly serialize choice-type element MessageHeader.event[x]
 */
MessageHeader._fts_eventIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVzc2FnZUhlYWRlci5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvTWVzc2FnZUhlYWRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQywrQkFBK0I7QUFFL0IsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFJbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSxhQUFhLEVBQXFCLE1BQU0sbUNBQW1DLENBQUM7QUFtQ3JGOztHQUVHO0FBQ0gsTUFBTSxPQUFPLHdCQUF5QixTQUFRLElBQUksQ0FBQyxlQUFlO0lBcUJoRTs7T0FFRztJQUNILFlBQVksU0FBK0MsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDckcsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxJQUFJLEVBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDOUUsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFDbkIsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFO2dCQUFFLElBQUksQ0FBQyxJQUFJLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLEtBQU0sQ0FBQyxDQUFDO2FBQUU7aUJBQzdEO2dCQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxLQUFxQyxDQUFDLENBQUM7YUFBRTtTQUN4RjtRQUNELElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQUU7UUFDMUUsSUFBSSxN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QUMsV0FBVyxDQUFDLENBQUMsQ0FBQztTQUFFO1FBQ2xHLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixDQUFDLFVBQVUsR0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQUU7UUFDdkgsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLEdBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQztTQUFFO1FBQ3hHLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBOUdEOztHQUVHO0FBQzZCLDJCQUFhLEdBQVUsZUFBZSxDQUFDO0FBU3ZFOztHQUVHO0FBQ3VCLGdDQUFrQixHQUFRLElBQUksQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNC5jb3JlIHZlcnNpb246IDQuMC4xXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogTWVzc2FnZUhlYWRlclxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUmVzcG9uc2VDb2RpbmdzLCBSZXNwb25zZUNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1Jlc3BvbnNlQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUmVzcG9uc2VDb2RlcywgIFJlc3BvbnNlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1Jlc3BvbnNlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE1lc3NhZ2VSZWFzb25FbmNvdW50ZXJDb2RpbmdzLCBNZXNzYWdlUmVhc29uRW5jb3VudGVyQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTWVzc2FnZVJlYXNvbkVuY291bnRlckNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE1lc3NhZ2VSZWFzb25FbmNvdW50ZXJDb2RlcywgIE1lc3NhZ2VSZWFzb25FbmNvdW50ZXJDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTWVzc2FnZVJlYXNvbkVuY291bnRlckNvZGVzLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lc3NhZ2VIZWFkZXJEZXN0aW5hdGlvbiB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlSGVhZGVyRGVzdGluYXRpb25BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBIdW1hbi1yZWFkYWJsZSBuYW1lIGZvciB0aGUgdGFyZ2V0IHN5c3RlbS5cclxuICAgKi9cclxuICBuYW1lPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE1lc3NhZ2VIZWFkZXIuZGVzdGluYXRpb24ubmFtZVxyXG4gICAqL1xyXG4gIF9uYW1lPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHRoZSB0YXJnZXQgZW5kIHN5c3RlbSBpbiBzaXR1YXRpb25zIHdoZXJlIHRoZSBpbml0aWFsIG1lc3NhZ2UgdHJhbnNtaXNzaW9uIGlzIHRvIGFuIGludGVybWVkaWFyeSBzeXN0ZW0uXHJcbiAgICovXHJcbiAgdGFyZ2V0PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgaWQgbWF5IGJlIGEgbm9uLXJlc29sdmFibGUgVVJJIGZvciBzeXN0ZW1zIHRoYXQgZG8gbm90IHVzZSBzdGFuZGFyZCBuZXR3b3JrLWJhc2VkIGFkZHJlc3Nlcy5cclxuICAgKi9cclxuICBlbmRwb2ludDogZmhpci5GaGlyVXJsfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE1lc3NhZ2VIZWFkZXIuZGVzdGluYXRpb24uZW5kcG9pbnRcclxuICAgKi9cclxuICBfZW5kcG9pbnQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEFsbG93cyBkYXRhIGNvbnZleWVkIGJ5IGEgbWVzc2FnZSB0byBiZSBhZGRyZXNzZWQgdG8gYSBwYXJ0aWN1bGFyIHBlcnNvbiBvciBkZXBhcnRtZW50IHdoZW4gcm91dGluZyB0byBhIHNwZWNpZmljIGFwcGxpY2F0aW9uIGlzbid0IHN1ZmZpY2llbnQuXHJcbiAgICovXHJcbiAgcmVjZWl2ZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlcmUgU0hPVUxEIGJlIGF0IGxlYXN0IG9uZSBkZXN0aW5hdGlvbiwgYnV0IGluIHNvbWUgY2lyY3Vtc3RhbmNlcywgdGhlIHNvdXJjZSBzeXN0ZW0gaXMgdW5hd2FyZSBvZiBhbnkgcGFydGljdWxhciBkZXN0aW5hdGlvbiBzeXN0ZW0uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVzc2FnZUhlYWRlckRlc3RpbmF0aW9uIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVzc2FnZUhlYWRlckRlc3RpbmF0aW9uJztcclxuICAvKipcclxuICAgKiBIdW1hbi1yZWFkYWJsZSBuYW1lIGZvciB0aGUgdGFyZ2V0IHN5c3RlbS5cclxuICAgKi9cclxuICBwdWJsaWMgbmFtZT86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgdGFyZ2V0IGVuZCBzeXN0ZW0gaW4gc2l0dWF0aW9ucyB3aGVyZSB0aGUgaW5pdGlhbCBtZXNzYWdlIHRyYW5zbWlzc2lvbiBpcyB0byBhbiBpbnRlcm1lZGlhcnkgc3lzdGVtLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0YXJnZXQ/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGlkIG1heSBiZSBhIG5vbi1yZXNvbHZhYmxlIFVSSSBmb3Igc3lzdGVtcyB0aGF0IGRvIG5vdCB1c2Ugc3RhbmRhcmQgbmV0d29yay1iYXNlZCBhZGRyZXNzZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGVuZHBvaW50OiBmaGlyLkZoaXJVcmx8bnVsbDtcclxuICAvKipcclxuICAgKiBBbGxvd3MgZGF0YSBjb252ZXllZCBieSBhIG1lc3NhZ2UgdG8gYmUgYWRkcmVzc2VkIHRvIGEgcGFydGljdWxhciBwZXJzb24gb3IgZGVwYXJ0bWVudCB3aGVuIHJvdXRpbmcgdG8gYSBzcGVjaWZpYyBhcHBsaWNhdGlvbiBpc24ndCBzdWZmaWNpZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWNlaXZlcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBNZXNzYWdlSGVhZGVyRGVzdGluYXRpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxNZXNzYWdlSGVhZGVyRGVzdGluYXRpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnbmFtZSddKSB7IHRoaXMubmFtZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UubmFtZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfbmFtZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLm5hbWUpIHsgdGhpcy5uYW1lLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX25hbWUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5uYW1lID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX25hbWUgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3RhcmdldCddKSB7IHRoaXMudGFyZ2V0ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS50YXJnZXQpOyB9XHJcbiAgICBpZiAoc291cmNlWydlbmRwb2ludCddKSB7IHRoaXMuZW5kcG9pbnQgPSBuZXcgZmhpci5GaGlyVXJsKHt2YWx1ZTogc291cmNlLmVuZHBvaW50fSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmVuZHBvaW50ID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2VuZHBvaW50J10pIHtcclxuICAgICAgaWYgKHRoaXMuZW5kcG9pbnQpIHsgdGhpcy5lbmRwb2ludC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9lbmRwb2ludCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmVuZHBvaW50ID0gbmV3IGZoaXIuRmhpclVybChzb3VyY2UuX2VuZHBvaW50IGFzIFBhcnRpYWw8Zmhpci5GaGlyVXJsQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydyZWNlaXZlciddKSB7IHRoaXMucmVjZWl2ZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnJlY2VpdmVyKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdNZXNzYWdlSGVhZGVyLmRlc3RpbmF0aW9uJyB9XHJcbiAgICBpZiAodGhpc1tcIm5hbWVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5uYW1lLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5uYW1lJykpOyB9XHJcbiAgICBpZiAodGhpc1tcInRhcmdldFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnRhcmdldC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycudGFyZ2V0JykpOyB9XHJcbiAgICBpZiAoIXRoaXNbJ2VuZHBvaW50J10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IGVuZHBvaW50IGZoaXI6IE1lc3NhZ2VIZWFkZXIuZGVzdGluYXRpb24uZW5kcG9pbnQ6dXJsJywgZXhwcmVzc2lvbjogW2V4cHJlc3Npb25dIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJlbmRwb2ludFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmVuZHBvaW50LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5lbmRwb2ludCcpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJyZWNlaXZlclwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnJlY2VpdmVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5yZWNlaXZlcicpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lc3NhZ2VIZWFkZXJTb3VyY2UgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZUhlYWRlclNvdXJjZUFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEh1bWFuLXJlYWRhYmxlIG5hbWUgZm9yIHRoZSBzb3VyY2Ugc3lzdGVtLlxyXG4gICAqL1xyXG4gIG5hbWU/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogTWVzc2FnZUhlYWRlci5zb3VyY2UubmFtZVxyXG4gICAqL1xyXG4gIF9uYW1lPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBNYXkgaW5jbHVkZSBjb25maWd1cmF0aW9uIG9yIG90aGVyIGluZm9ybWF0aW9uIHVzZWZ1bCBpbiBkZWJ1Z2dpbmcuXHJcbiAgICovXHJcbiAgc29mdHdhcmU/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogTWVzc2FnZUhlYWRlci5zb3VyY2Uuc29mdHdhcmVcclxuICAgKi9cclxuICBfc29mdHdhcmU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIENhbiBjb252ZXkgdmVyc2lvbnMgb2YgbXVsdGlwbGUgc3lzdGVtcyBpbiBzaXR1YXRpb25zIHdoZXJlIGEgbWVzc2FnZSBwYXNzZXMgdGhyb3VnaCBtdWx0aXBsZSBoYW5kcy5cclxuICAgKi9cclxuICB2ZXJzaW9uPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE1lc3NhZ2VIZWFkZXIuc291cmNlLnZlcnNpb25cclxuICAgKi9cclxuICBfdmVyc2lvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQW4gZS1tYWlsLCBwaG9uZSwgd2Vic2l0ZSBvciBvdGhlciBjb250YWN0IHBvaW50IHRvIHVzZSB0byByZXNvbHZlIGlzc3VlcyB3aXRoIG1lc3NhZ2UgY29tbXVuaWNhdGlvbnMuXHJcbiAgICovXHJcbiAgY29udGFjdD86IGZoaXIuQ29udGFjdFBvaW50QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGlkIG1heSBiZSBhIG5vbi1yZXNvbHZhYmxlIFVSSSBmb3Igc3lzdGVtcyB0aGF0IGRvIG5vdCB1c2Ugc3RhbmRhcmQgbmV0d29yay1iYXNlZCBhZGRyZXNzZXMuXHJcbiAgICovXHJcbiAgZW5kcG9pbnQ6IGZoaXIuRmhpclVybHxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBNZXNzYWdlSGVhZGVyLnNvdXJjZS5lbmRwb2ludFxyXG4gICAqL1xyXG4gIF9lbmRwb2ludD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgc291cmNlIGFwcGxpY2F0aW9uIGZyb20gd2hpY2ggdGhpcyBtZXNzYWdlIG9yaWdpbmF0ZWQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVzc2FnZUhlYWRlclNvdXJjZSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ01lc3NhZ2VIZWFkZXJTb3VyY2UnO1xyXG4gIC8qKlxyXG4gICAqIEh1bWFuLXJlYWRhYmxlIG5hbWUgZm9yIHRoZSBzb3VyY2Ugc3lzdGVtLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBuYW1lPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBNYXkgaW5jbHVkZSBjb25maWd1cmF0aW9uIG9yIG90aGVyIGluZm9ybWF0aW9uIHVzZWZ1bCBpbiBkZWJ1Z2dpbmcuXHJcbiAgICovXHJcbiAgcHVibGljIHNvZnR3YXJlPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDYW4gY29udmV5IHZlcnNpb25zIG9mIG11bHRpcGxlIHN5c3RlbXMgaW4gc2l0dWF0aW9ucyB3aGVyZSBhIG1lc3NhZ2UgcGFzc2VzIHRocm91Z2ggbXVsdGlwbGUgaGFuZHMuXHJcbiAgICovXHJcbiAgcHVibGljIHZlcnNpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFuIGUtbWFpbCwgcGhvbmUsIHdlYnNpdGUgb3Igb3RoZXIgY29udGFjdCBwb2ludCB0byB1c2UgdG8gcmVzb2x2ZSBpc3N1ZXMgd2l0aCBtZXNzYWdlIGNvbW11bmljYXRpb25zLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb250YWN0PzogZmhpci5Db250YWN0UG9pbnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpZCBtYXkgYmUgYSBub24tcmVzb2x2YWJsZSBVUkkgZm9yIHN5c3RlbXMgdGhhdCBkbyBub3QgdXNlIHN0YW5kYXJkIG5ldHdvcmstYmFzZWQgYWRkcmVzc2VzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBlbmRwb2ludDogZmhpci5GaGlyVXJsfG51bGw7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgTWVzc2FnZUhlYWRlclNvdXJjZSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE1lc3NhZ2VIZWFkZXJTb3VyY2VBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnbmFtZSddKSB7IHRoaXMubmFtZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UubmFtZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfbmFtZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLm5hbWUpIHsgdGhpcy5uYW1lLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX25hbWUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5uYW1lID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX25hbWUgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3NvZnR3YXJlJ10pIHsgdGhpcy5zb2Z0d2FyZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2Uuc29mdHdhcmV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3NvZnR3YXJlJ10pIHtcclxuICAgICAgaWYgKHRoaXMuc29mdHdhcmUpIHsgdGhpcy5zb2Z0d2FyZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zb2Z0d2FyZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnNvZnR3YXJlID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3NvZnR3YXJlIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd2ZXJzaW9uJ10pIHsgdGhpcy52ZXJzaW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS52ZXJzaW9ufSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ192ZXJzaW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMudmVyc2lvbikgeyB0aGlzLnZlcnNpb24uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdmVyc2lvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnZlcnNpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fdmVyc2lvbiBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29udGFjdCddKSB7IHRoaXMuY29udGFjdCA9IG5ldyBmaGlyLkNvbnRhY3RQb2ludChzb3VyY2UuY29udGFjdCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2VuZHBvaW50J10pIHsgdGhpcy5lbmRwb2ludCA9IG5ldyBmaGlyLkZoaXJVcmwoe3ZhbHVlOiBzb3VyY2UuZW5kcG9pbnR9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZW5kcG9pbnQgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfZW5kcG9pbnQnXSkge1xyXG4gICAgICBpZiAodGhpcy5lbmRwb2ludCkgeyB0aGlzLmVuZHBvaW50LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2VuZHBvaW50ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZW5kcG9pbnQgPSBuZXcgZmhpci5GaGlyVXJsKHNvdXJjZS5fZW5kcG9pbnQgYXMgUGFydGlhbDxmaGlyLkZoaXJVcmxBcmdzPik7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb246c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24pO1xyXG4gICAgaWYgKGV4cHJlc3Npb24gPT09ICcnKSB7IGV4cHJlc3Npb24gPSAnTWVzc2FnZUhlYWRlci5zb3VyY2UnIH1cclxuICAgIGlmICh0aGlzW1wibmFtZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm5hbWUuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLm5hbWUnKSk7IH1cclxuICAgIGlmICh0aGlzW1wic29mdHdhcmVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5zb2Z0d2FyZS5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuc29mdHdhcmUnKSk7IH1cclxuICAgIGlmICh0aGlzW1widmVyc2lvblwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnZlcnNpb24uZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLnZlcnNpb24nKSk7IH1cclxuICAgIGlmICh0aGlzW1wiY29udGFjdFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmNvbnRhY3QuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLmNvbnRhY3QnKSk7IH1cclxuICAgIGlmICghdGhpc1snZW5kcG9pbnQnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgZW5kcG9pbnQgZmhpcjogTWVzc2FnZUhlYWRlci5zb3VyY2UuZW5kcG9pbnQ6dXJsJywgZXhwcmVzc2lvbjogW2V4cHJlc3Npb25dIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJlbmRwb2ludFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmVuZHBvaW50LmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5lbmRwb2ludCcpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lc3NhZ2VIZWFkZXJSZXNwb25zZSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlSGVhZGVyUmVzcG9uc2VBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgTWVzc2FnZUhlYWRlci5pZCBvZiB0aGUgbWVzc2FnZSB0byB3aGljaCB0aGlzIG1lc3NhZ2UgaXMgYSByZXNwb25zZS5cclxuICAgKi9cclxuICBpZGVudGlmaWVyOiBmaGlyLkZoaXJJZHxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBNZXNzYWdlSGVhZGVyLnJlc3BvbnNlLmlkZW50aWZpZXJcclxuICAgKi9cclxuICBfaWRlbnRpZmllcj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBhIGdlbmVyaWMgcmVzcG9uc2UgdG8gdGhlIHJlcXVlc3QgbWVzc2FnZS4gU3BlY2lmaWMgZGF0YSBmb3IgdGhlIHJlc3BvbnNlIHdpbGwgYmUgZm91bmQgaW4gTWVzc2FnZUhlYWRlci5mb2N1cy5cclxuICAgKi9cclxuICBjb2RlOiBmaGlyLkZoaXJDb2RlPFJlc3BvbnNlQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE1lc3NhZ2VIZWFkZXIucmVzcG9uc2UuY29kZVxyXG4gICAqL1xyXG4gIF9jb2RlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGlzIFNIQUxMIGJlIGNvbnRhaW5lZCBpbiB0aGUgYnVuZGxlLiBJZiBhbnkgb2YgdGhlIGlzc3VlcyBhcmUgZXJyb3JzLCB0aGUgcmVzcG9uc2UgY29kZSBTSEFMTCBiZSBhbiBlcnJvci5cclxuICAgKi9cclxuICBkZXRhaWxzPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEluZm9ybWF0aW9uIGFib3V0IHRoZSBtZXNzYWdlIHRoYXQgdGhpcyBtZXNzYWdlIGlzIGEgcmVzcG9uc2UgdG8uICBPbmx5IHByZXNlbnQgaWYgdGhpcyBtZXNzYWdlIGlzIGEgcmVzcG9uc2UuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVzc2FnZUhlYWRlclJlc3BvbnNlIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVzc2FnZUhlYWRlclJlc3BvbnNlJztcclxuICAvKipcclxuICAgKiBUaGUgTWVzc2FnZUhlYWRlci5pZCBvZiB0aGUgbWVzc2FnZSB0byB3aGljaCB0aGlzIG1lc3NhZ2UgaXMgYSByZXNwb25zZS5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcjogZmhpci5GaGlySWR8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGlzIGlzIGEgZ2VuZXJpYyByZXNwb25zZSB0byB0aGUgcmVxdWVzdCBtZXNzYWdlLiBTcGVjaWZpYyBkYXRhIGZvciB0aGUgcmVzcG9uc2Ugd2lsbCBiZSBmb3VuZCBpbiBNZXNzYWdlSGVhZGVyLmZvY3VzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb2RlOiBmaGlyLkZoaXJDb2RlPFJlc3BvbnNlQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBTSEFMTCBiZSBjb250YWluZWQgaW4gdGhlIGJ1bmRsZS4gSWYgYW55IG9mIHRoZSBpc3N1ZXMgYXJlIGVycm9ycywgdGhlIHJlc3BvbnNlIGNvZGUgU0hBTEwgYmUgYW4gZXJyb3IuXHJcbiAgICovXHJcbiAgcHVibGljIGRldGFpbHM/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgTWVzc2FnZUhlYWRlclJlc3BvbnNlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVzc2FnZUhlYWRlclJlc3BvbnNlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBuZXcgZmhpci5GaGlySWQoe3ZhbHVlOiBzb3VyY2UuaWRlbnRpZmllcn0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pZGVudGlmaWVyID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2lkZW50aWZpZXInXSkge1xyXG4gICAgICBpZiAodGhpcy5pZGVudGlmaWVyKSB7IHRoaXMuaWRlbnRpZmllci5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9pZGVudGlmaWVyISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuaWRlbnRpZmllciA9IG5ldyBmaGlyLkZoaXJJZChzb3VyY2UuX2lkZW50aWZpZXIgYXMgUGFydGlhbDxmaGlyLkZoaXJJZEFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkZoaXJDb2RlPFJlc3BvbnNlQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLmNvZGV9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY29kZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19jb2RlJ10pIHtcclxuICAgICAgaWYgKHRoaXMuY29kZSkgeyB0aGlzLmNvZGUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fY29kZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmNvZGUgPSBuZXcgZmhpci5GaGlyQ29kZTxSZXNwb25zZUNvZGVUeXBlPihzb3VyY2UuX2NvZGUgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2RldGFpbHMnXSkgeyB0aGlzLmRldGFpbHMgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmRldGFpbHMpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlcXVpcmVkLWJvdW5kIFZhbHVlIFNldCBmb3IgY29kZSAoTWVzc2FnZUhlYWRlci5yZXNwb25zZS5jb2RlKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IGNvZGVSZXF1aXJlZENvZGVzKCkge1xyXG4gICAgcmV0dXJuIFJlc3BvbnNlQ29kZXM7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKTtcclxuICAgIGlmIChleHByZXNzaW9uID09PSAnJykgeyBleHByZXNzaW9uID0gJ01lc3NhZ2VIZWFkZXIucmVzcG9uc2UnIH1cclxuICAgIGlmICghdGhpc1snaWRlbnRpZmllciddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBpZGVudGlmaWVyIGZoaXI6IE1lc3NhZ2VIZWFkZXIucmVzcG9uc2UuaWRlbnRpZmllcjppZCcsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiaWRlbnRpZmllclwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmlkZW50aWZpZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLmlkZW50aWZpZXInKSk7IH1cclxuICAgIGlmICghdGhpc1snY29kZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBjb2RlIGZoaXI6IE1lc3NhZ2VIZWFkZXIucmVzcG9uc2UuY29kZTpjb2RlJywgZXhwcmVzc2lvbjogW2V4cHJlc3Npb25dIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbJ2NvZGUnXSAmJiAoIU9iamVjdC52YWx1ZXMoUmVzcG9uc2VDb2RlcykuaW5jbHVkZXModGhpcy5jb2RlLnZhbHVlIGFzIGFueSkpKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdjb2RlLWludmFsaWQnLCBkaWFnbm9zdGljczogJ0ludmFsaWQgY29kZSBwcm9wZXJ0eSBjb2RlIGZoaXI6IE1lc3NhZ2VIZWFkZXIucmVzcG9uc2UuY29kZTpjb2RlIFJlcXVpcmVkIGJpbmRpbmcgdG86IFJlc3BvbnNlJywgZXhwcmVzc2lvbjogW2V4cHJlc3Npb25dIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJjb2RlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY29kZS5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuY29kZScpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJkZXRhaWxzXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZGV0YWlscy5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuZGV0YWlscycpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lc3NhZ2VIZWFkZXIgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZUhlYWRlckFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIk1lc3NhZ2VIZWFkZXJcInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRpbWUgb2YgdGhlIGV2ZW50IHdpbGwgYmUgZm91bmQgaW4gdGhlIGZvY3VzIHJlc291cmNlLiBUaGUgdGltZSBvZiB0aGUgbWVzc2FnZSB3aWxsIGJlIGZvdW5kIGluIFtCdW5kbGUudGltZXN0YW1wXShidW5kbGUtZGVmaW5pdGlvbnMuaHRtbCNCdW5kbGUudGltZXN0YW1wKS5cclxuICAgKi9cclxuICBldmVudD86IGZoaXIuQ29kaW5nfGZoaXIuRmhpclVyaXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRpbWUgb2YgdGhlIGV2ZW50IHdpbGwgYmUgZm91bmQgaW4gdGhlIGZvY3VzIHJlc291cmNlLiBUaGUgdGltZSBvZiB0aGUgbWVzc2FnZSB3aWxsIGJlIGZvdW5kIGluIFtCdW5kbGUudGltZXN0YW1wXShidW5kbGUtZGVmaW5pdGlvbnMuaHRtbCNCdW5kbGUudGltZXN0YW1wKS5cclxuICAgKi9cclxuICBldmVudENvZGluZz86IGZoaXIuQ29kaW5nQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRpbWUgb2YgdGhlIGV2ZW50IHdpbGwgYmUgZm91bmQgaW4gdGhlIGZvY3VzIHJlc291cmNlLiBUaGUgdGltZSBvZiB0aGUgbWVzc2FnZSB3aWxsIGJlIGZvdW5kIGluIFtCdW5kbGUudGltZXN0YW1wXShidW5kbGUtZGVmaW5pdGlvbnMuaHRtbCNCdW5kbGUudGltZXN0YW1wKS5cclxuICAgKi9cclxuICBldmVudFVyaT86IGZoaXIuRmhpclVyaXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZXJlIFNIT1VMRCBiZSBhdCBsZWFzdCBvbmUgZGVzdGluYXRpb24sIGJ1dCBpbiBzb21lIGNpcmN1bXN0YW5jZXMsIHRoZSBzb3VyY2Ugc3lzdGVtIGlzIHVuYXdhcmUgb2YgYW55IHBhcnRpY3VsYXIgZGVzdGluYXRpb24gc3lzdGVtLlxyXG4gICAqL1xyXG4gIGRlc3RpbmF0aW9uPzogZmhpci5NZXNzYWdlSGVhZGVyRGVzdGluYXRpb25BcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFVzZSBjYXNlIGlzIGZvciB3aGVyZSBhICh0cnVzdGVkKSBzZW5kaW5nIHN5c3RlbSBpcyByZXNwb25zaWJsZSBmb3IgbXVsdGlwbGUgb3JnYW5pemF0aW9ucywgYW5kIHRoZXJlZm9yZSBjYW5ub3QgZGlmZmVyZW50aWF0ZSBiYXNlZCBvbiBzb3VyY2UgZW5kcG9pbnQgLyBhdXRoZW50aWNhdGlvbiBhbG9uZS5cclxuICAgKi9cclxuICBzZW5kZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFVzdWFsbHkgb25seSBmb3IgdGhlIHJlcXVlc3QgYnV0IGNhbiBiZSB1c2VkIGluIGEgcmVzcG9uc2UuXHJcbiAgICovXHJcbiAgZW50ZXJlcj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVXN1YWxseSBvbmx5IGZvciB0aGUgcmVxdWVzdCBidXQgY2FuIGJlIHVzZWQgaW4gYSByZXNwb25zZS5cclxuICAgKi9cclxuICBhdXRob3I/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzb3VyY2UgYXBwbGljYXRpb24gZnJvbSB3aGljaCB0aGlzIG1lc3NhZ2Ugb3JpZ2luYXRlZC5cclxuICAgKi9cclxuICBzb3VyY2U6IGZoaXIuTWVzc2FnZUhlYWRlclNvdXJjZUFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBVc3VhbGx5IG9ubHkgZm9yIHRoZSByZXF1ZXN0IGJ1dCBjYW4gYmUgdXNlZCBpbiBhIHJlc3BvbnNlLlxyXG4gICAqL1xyXG4gIHJlc3BvbnNpYmxlPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDb2RlZCBpbmRpY2F0aW9uIG9mIHRoZSBjYXVzZSBmb3IgdGhlIGV2ZW50IC0gaW5kaWNhdGVzICBhIHJlYXNvbiBmb3IgdGhlIG9jY3VycmVuY2Ugb2YgdGhlIGV2ZW50IHRoYXQgaXMgYSBmb2N1cyBvZiB0aGlzIG1lc3NhZ2UuXHJcbiAgICovXHJcbiAgcmVhc29uPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmZvcm1hdGlvbiBhYm91dCB0aGUgbWVzc2FnZSB0aGF0IHRoaXMgbWVzc2FnZSBpcyBhIHJlc3BvbnNlIHRvLiAgT25seSBwcmVzZW50IGlmIHRoaXMgbWVzc2FnZSBpcyBhIHJlc3BvbnNlLlxyXG4gICAqL1xyXG4gIHJlc3BvbnNlPzogZmhpci5NZXNzYWdlSGVhZGVyUmVzcG9uc2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0YSBpcyBkZWZpbmVkIHdoZXJlIHRoZSB0cmFuc2FjdGlvbiB0eXBlIGlzIGRlZmluZWQuIFRoZSB0cmFuc2FjdGlvbiBkYXRhIGlzIGFsd2F5cyBpbmNsdWRlZCBpbiB0aGUgYnVuZGxlIHRoYXQgaXMgdGhlIGZ1bGwgbWVzc2FnZS4gIE9ubHkgdGhlIHJvb3QgcmVzb3VyY2UgaXMgc3BlY2lmaWVkLiAgVGhlIHJlc291cmNlcyBpdCByZWZlcmVuY2VzIHNob3VsZCBiZSBjb250YWluZWQgaW4gdGhlIGJ1bmRsZSBidXQgYXJlIG5vdCBhbHNvIGxpc3RlZCBoZXJlLiAgTXVsdGlwbGUgcmVwZXRpdGlvbnMgYXJlIGFsbG93ZWQgdG8gY2F0ZXIgZm9yIG1lcmdlcyBhbmQgb3RoZXIgc2l0dWF0aW9ucyB3aXRoIG11bHRpcGxlIGZvY2FsIHRhcmdldHMuXHJcbiAgICovXHJcbiAgZm9jdXM/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUGVybWFuZW50IGxpbmsgdG8gdGhlIE1lc3NhZ2VEZWZpbml0aW9uIGZvciB0aGlzIG1lc3NhZ2UuXHJcbiAgICovXHJcbiAgZGVmaW5pdGlvbj86IGZoaXIuRmhpckNhbm9uaWNhbHxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBNZXNzYWdlSGVhZGVyLmRlZmluaXRpb25cclxuICAgKi9cclxuICBfZGVmaW5pdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgaGVhZGVyIGZvciBhIG1lc3NhZ2UgZXhjaGFuZ2UgdGhhdCBpcyBlaXRoZXIgcmVxdWVzdGluZyBvciByZXNwb25kaW5nIHRvIGFuIGFjdGlvbi4gIFRoZSByZWZlcmVuY2UocykgdGhhdCBhcmUgdGhlIHN1YmplY3Qgb2YgdGhlIGFjdGlvbiBhcyB3ZWxsIGFzIG90aGVyIGluZm9ybWF0aW9uIHJlbGF0ZWQgdG8gdGhlIGFjdGlvbiBhcmUgdHlwaWNhbGx5IHRyYW5zbWl0dGVkIGluIGEgYnVuZGxlIGluIHdoaWNoIHRoZSBNZXNzYWdlSGVhZGVyIHJlc291cmNlIGluc3RhbmNlIGlzIHRoZSBmaXJzdCByZXNvdXJjZSBpbiB0aGUgYnVuZGxlLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1lc3NhZ2VIZWFkZXIgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ01lc3NhZ2VIZWFkZXInO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNvdXJjZVR5cGU6IFwiTWVzc2FnZUhlYWRlclwiO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0aW1lIG9mIHRoZSBldmVudCB3aWxsIGJlIGZvdW5kIGluIHRoZSBmb2N1cyByZXNvdXJjZS4gVGhlIHRpbWUgb2YgdGhlIG1lc3NhZ2Ugd2lsbCBiZSBmb3VuZCBpbiBbQnVuZGxlLnRpbWVzdGFtcF0oYnVuZGxlLWRlZmluaXRpb25zLmh0bWwjQnVuZGxlLnRpbWVzdGFtcCkuXHJcbiAgICovXHJcbiAgcHVibGljIGV2ZW50OiAoZmhpci5Db2Rpbmd8Zmhpci5GaGlyVXJpKXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgTWVzc2FnZUhlYWRlci5ldmVudFt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c19ldmVudElzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIFRoZXJlIFNIT1VMRCBiZSBhdCBsZWFzdCBvbmUgZGVzdGluYXRpb24sIGJ1dCBpbiBzb21lIGNpcmN1bXN0YW5jZXMsIHRoZSBzb3VyY2Ugc3lzdGVtIGlzIHVuYXdhcmUgb2YgYW55IHBhcnRpY3VsYXIgZGVzdGluYXRpb24gc3lzdGVtLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZXN0aW5hdGlvbjogZmhpci5NZXNzYWdlSGVhZGVyRGVzdGluYXRpb25bXTtcclxuICAvKipcclxuICAgKiBVc2UgY2FzZSBpcyBmb3Igd2hlcmUgYSAodHJ1c3RlZCkgc2VuZGluZyBzeXN0ZW0gaXMgcmVzcG9uc2libGUgZm9yIG11bHRpcGxlIG9yZ2FuaXphdGlvbnMsIGFuZCB0aGVyZWZvcmUgY2Fubm90IGRpZmZlcmVudGlhdGUgYmFzZWQgb24gc291cmNlIGVuZHBvaW50IC8gYXV0aGVudGljYXRpb24gYWxvbmUuXHJcbiAgICovXHJcbiAgcHVibGljIHNlbmRlcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBVc3VhbGx5IG9ubHkgZm9yIHRoZSByZXF1ZXN0IGJ1dCBjYW4gYmUgdXNlZCBpbiBhIHJlc3BvbnNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBlbnRlcmVyPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFVzdWFsbHkgb25seSBmb3IgdGhlIHJlcXVlc3QgYnV0IGNhbiBiZSB1c2VkIGluIGEgcmVzcG9uc2UuXHJcbiAgICovXHJcbiAgcHVibGljIGF1dGhvcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc291cmNlIGFwcGxpY2F0aW9uIGZyb20gd2hpY2ggdGhpcyBtZXNzYWdlIG9yaWdpbmF0ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHNvdXJjZTogZmhpci5NZXNzYWdlSGVhZGVyU291cmNlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVXN1YWxseSBvbmx5IGZvciB0aGUgcmVxdWVzdCBidXQgY2FuIGJlIHVzZWQgaW4gYSByZXNwb25zZS5cclxuICAgKi9cclxuICBwdWJsaWMgcmVzcG9uc2libGU/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ29kZWQgaW5kaWNhdGlvbiBvZiB0aGUgY2F1c2UgZm9yIHRoZSBldmVudCAtIGluZGljYXRlcyAgYSByZWFzb24gZm9yIHRoZSBvY2N1cnJlbmNlIG9mIHRoZSBldmVudCB0aGF0IGlzIGEgZm9jdXMgb2YgdGhpcyBtZXNzYWdlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWFzb24/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5mb3JtYXRpb24gYWJvdXQgdGhlIG1lc3NhZ2UgdGhhdCB0aGlzIG1lc3NhZ2UgaXMgYSByZXNwb25zZSB0by4gIE9ubHkgcHJlc2VudCBpZiB0aGlzIG1lc3NhZ2UgaXMgYSByZXNwb25zZS5cclxuICAgKi9cclxuICBwdWJsaWMgcmVzcG9uc2U/OiBmaGlyLk1lc3NhZ2VIZWFkZXJSZXNwb25zZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGEgaXMgZGVmaW5lZCB3aGVyZSB0aGUgdHJhbnNhY3Rpb24gdHlwZSBpcyBkZWZpbmVkLiBUaGUgdHJhbnNhY3Rpb24gZGF0YSBpcyBhbHdheXMgaW5jbHVkZWQgaW4gdGhlIGJ1bmRsZSB0aGF0IGlzIHRoZSBmdWxsIG1lc3NhZ2UuICBPbmx5IHRoZSByb290IHJlc291cmNlIGlzIHNwZWNpZmllZC4gIFRoZSByZXNvdXJjZXMgaXQgcmVmZXJlbmNlcyBzaG91bGQgYmUgY29udGFpbmVkIGluIHRoZSBidW5kbGUgYnV0IGFyZSBub3QgYWxzbyBsaXN0ZWQgaGVyZS4gIE11bHRpcGxlIHJlcGV0aXRpb25zIGFyZSBhbGxvd2VkIHRvIGNhdGVyIGZvciBtZXJnZXMgYW5kIG90aGVyIHNpdHVhdGlvbnMgd2l0aCBtdWx0aXBsZSBmb2NhbCB0YXJnZXRzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBmb2N1czogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBQZXJtYW5lbnQgbGluayB0byB0aGUgTWVzc2FnZURlZmluaXRpb24gZm9yIHRoaXMgbWVzc2FnZS5cclxuICAgKi9cclxuICBwdWJsaWMgZGVmaW5pdGlvbj86IGZoaXIuRmhpckNhbm9uaWNhbHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgTWVzc2FnZUhlYWRlciAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE1lc3NhZ2VIZWFkZXJBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnTWVzc2FnZUhlYWRlcic7XHJcbiAgICBpZiAoc291cmNlWydldmVudCddKSB7IHRoaXMuZXZlbnQgPSBzb3VyY2UuZXZlbnQ7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnZXZlbnRDb2RpbmcnXSkgeyB0aGlzLmV2ZW50ID0gbmV3IGZoaXIuQ29kaW5nKHNvdXJjZS5ldmVudENvZGluZyk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnZXZlbnRVcmknXSkgeyB0aGlzLmV2ZW50ID0gbmV3IGZoaXIuRmhpclVyaSh7dmFsdWU6IHNvdXJjZS5ldmVudFVyaX0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5ldmVudCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ2Rlc3RpbmF0aW9uJ10pIHsgdGhpcy5kZXN0aW5hdGlvbiA9IHNvdXJjZS5kZXN0aW5hdGlvbi5tYXAoKHgpID0+IG5ldyBmaGlyLk1lc3NhZ2VIZWFkZXJEZXN0aW5hdGlvbih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmRlc3RpbmF0aW9uID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3NlbmRlciddKSB7IHRoaXMuc2VuZGVyID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5zZW5kZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWydlbnRlcmVyJ10pIHsgdGhpcy5lbnRlcmVyID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5lbnRlcmVyKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYXV0aG9yJ10pIHsgdGhpcy5hdXRob3IgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmF1dGhvcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ3NvdXJjZSddKSB7IHRoaXMuc291cmNlID0gbmV3IGZoaXIuTWVzc2FnZUhlYWRlclNvdXJjZShzb3VyY2Uuc291cmNlKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc291cmNlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVzcG9uc2libGUnXSkgeyB0aGlzLnJlc3BvbnNpYmxlID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5yZXNwb25zaWJsZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3JlYXNvbiddKSB7IHRoaXMucmVhc29uID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5yZWFzb24pOyB9XHJcbiAgICBpZiAoc291cmNlWydyZXNwb25zZSddKSB7IHRoaXMucmVzcG9uc2UgPSBuZXcgZmhpci5NZXNzYWdlSGVhZGVyUmVzcG9uc2Uoc291cmNlLnJlc3BvbnNlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZm9jdXMnXSkgeyB0aGlzLmZvY3VzID0gc291cmNlLmZvY3VzLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZm9jdXMgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGVmaW5pdGlvbiddKSB7IHRoaXMuZGVmaW5pdGlvbiA9IG5ldyBmaGlyLkZoaXJDYW5vbmljYWwoe3ZhbHVlOiBzb3VyY2UuZGVmaW5pdGlvbn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfZGVmaW5pdGlvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLmRlZmluaXRpb24pIHsgdGhpcy5kZWZpbml0aW9uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2RlZmluaXRpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5kZWZpbml0aW9uID0gbmV3IGZoaXIuRmhpckNhbm9uaWNhbChzb3VyY2UuX2RlZmluaXRpb24gYXMgUGFydGlhbDxmaGlyLkZoaXJDYW5vbmljYWxBcmdzPik7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb246c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24pO1xyXG4gICAgaWYgKGV4cHJlc3Npb24gPT09ICcnKSB7IGV4cHJlc3Npb24gPSAnTWVzc2FnZUhlYWRlcicgfVxyXG4gICAgaWYgKCF0aGlzWydyZXNvdXJjZVR5cGUnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgcmVzb3VyY2VUeXBlIGZoaXI6IE1lc3NhZ2VIZWFkZXIucmVzb3VyY2VUeXBlOlwiTWVzc2FnZUhlYWRlclwiJywgZXhwcmVzc2lvbjogW2V4cHJlc3Npb25dIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCF0aGlzWydldmVudCddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBldmVudCBmaGlyOiBNZXNzYWdlSGVhZGVyLmV2ZW50W3hdOicsIGV4cHJlc3Npb246IFtleHByZXNzaW9uXSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiZGVzdGluYXRpb25cIl0pIHsgdGhpcy5kZXN0aW5hdGlvbi5mb3JFYWNoKCh4LGkpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uK2AuZGVzdGluYXRpb25bJHtpfV1gKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wic2VuZGVyXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc2VuZGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5zZW5kZXInKSk7IH1cclxuICAgIGlmICh0aGlzW1wiZW50ZXJlclwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmVudGVyZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLmVudGVyZXInKSk7IH1cclxuICAgIGlmICh0aGlzW1wiYXV0aG9yXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuYXV0aG9yLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5hdXRob3InKSk7IH1cclxuICAgIGlmICghdGhpc1snc291cmNlJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IHNvdXJjZSBmaGlyOiBNZXNzYWdlSGVhZGVyLnNvdXJjZTpzb3VyY2UnLCBleHByZXNzaW9uOiBbZXhwcmVzc2lvbl0gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInNvdXJjZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnNvdXJjZS5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycuc291cmNlJykpOyB9XHJcbiAgICBpZiAodGhpc1tcInJlc3BvbnNpYmxlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucmVzcG9uc2libGUuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLnJlc3BvbnNpYmxlJykpOyB9XHJcbiAgICBpZiAodGhpc1tcInJlYXNvblwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnJlYXNvbi5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKycucmVhc29uJykpOyB9XHJcbiAgICBpZiAodGhpc1tcInJlc3BvbnNlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucmVzcG9uc2UuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbisnLnJlc3BvbnNlJykpOyB9XHJcbiAgICBpZiAodGhpc1tcImZvY3VzXCJdKSB7IHRoaXMuZm9jdXMuZm9yRWFjaCgoeCxpKSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbitgLmZvY3VzWyR7aX1dYCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImRlZmluaXRpb25cIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5kZWZpbml0aW9uLmRvTW9kZWxWYWxpZGF0aW9uKGV4cHJlc3Npb24rJy5kZWZpbml0aW9uJykpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=