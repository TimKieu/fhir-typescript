// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: MessageHeader
import * as fhir from '../fhir.js';
// @ts-ignore
import { ResponseCodes } from '../fhirValueSets/ResponseCodes.js';
/**
 * There SHOULD be at least one destination, but in some circumstances, the source system is unaware of any particular destination system.
 */
export class MessageHeaderDestination extends fhir.BackboneElement {
    /**
     * Default constructor for MessageHeaderDestination - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['name']) {
            this.name = new fhir.FhirString({ value: source.name });
        }
        if (source['_name']) {
            if (this.name) {
                this.name.addExtendedProperties(source._name);
            }
            else {
                this.name = new fhir.FhirString(source._name);
            }
        }
        if (source['target']) {
            this.target = new fhir.Reference(source.target);
        }
        if (source['endpoint']) {
            this.endpoint = new fhir.FhirUrl({ value: source.endpoint });
        }
        else {
            this.endpoint = null;
        }
        if (source['_endpoint']) {
            if (this.endpoint) {
                this.endpoint.addExtendedProperties(source._endpoint);
            }
            else {
                this.endpoint = new fhir.FhirUrl(source._endpoint);
            }
        }
        if (source['receiver']) {
            this.receiver = new fhir.Reference(source.receiver);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["name"]) {
            issues.push(...this.name.doModelValidation());
        }
        if (this["target"]) {
            issues.push(...this.target.doModelValidation());
        }
        if (!this['endpoint']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property endpoint:fhir.FhirUrl fhir: MessageHeader.destination.endpoint:url' });
        }
        if (this["endpoint"]) {
            issues.push(...this.endpoint.doModelValidation());
        }
        if (this["receiver"]) {
            issues.push(...this.receiver.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MessageHeaderDestination._fts_dataType = 'MessageHeaderDestination';
/**
 * The source application from which this message originated.
 */
export class MessageHeaderSource extends fhir.BackboneElement {
    /**
     * Default constructor for MessageHeaderSource - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['name']) {
            this.name = new fhir.FhirString({ value: source.name });
        }
        if (source['_name']) {
            if (this.name) {
                this.name.addExtendedProperties(source._name);
            }
            else {
                this.name = new fhir.FhirString(source._name);
            }
        }
        if (source['software']) {
            this.software = new fhir.FhirString({ value: source.software });
        }
        if (source['_software']) {
            if (this.software) {
                this.software.addExtendedProperties(source._software);
            }
            else {
                this.software = new fhir.FhirString(source._software);
            }
        }
        if (source['version']) {
            this.version = new fhir.FhirString({ value: source.version });
        }
        if (source['_version']) {
            if (this.version) {
                this.version.addExtendedProperties(source._version);
            }
            else {
                this.version = new fhir.FhirString(source._version);
            }
        }
        if (source['contact']) {
            this.contact = new fhir.ContactPoint(source.contact);
        }
        if (source['endpoint']) {
            this.endpoint = new fhir.FhirUrl({ value: source.endpoint });
        }
        else {
            this.endpoint = null;
        }
        if (source['_endpoint']) {
            if (this.endpoint) {
                this.endpoint.addExtendedProperties(source._endpoint);
            }
            else {
                this.endpoint = new fhir.FhirUrl(source._endpoint);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["name"]) {
            issues.push(...this.name.doModelValidation());
        }
        if (this["software"]) {
            issues.push(...this.software.doModelValidation());
        }
        if (this["version"]) {
            issues.push(...this.version.doModelValidation());
        }
        if (this["contact"]) {
            issues.push(...this.contact.doModelValidation());
        }
        if (!this['endpoint']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property endpoint:fhir.FhirUrl fhir: MessageHeader.source.endpoint:url' });
        }
        if (this["endpoint"]) {
            issues.push(...this.endpoint.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MessageHeaderSource._fts_dataType = 'MessageHeaderSource';
/**
 * Information about the message that this message is a response to.  Only present if this message is a response.
 */
export class MessageHeaderResponse extends fhir.BackboneElement {
    /**
     * Default constructor for MessageHeaderResponse - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['identifier']) {
            this.identifier = new fhir.FhirId({ value: source.identifier });
        }
        else {
            this.identifier = null;
        }
        if (source['_identifier']) {
            if (this.identifier) {
                this.identifier.addExtendedProperties(source._identifier);
            }
            else {
                this.identifier = new fhir.FhirId(source._identifier);
            }
        }
        if (source['code']) {
            this.code = new fhir.FhirCode({ value: source.code });
        }
        else {
            this.code = null;
        }
        if (source['_code']) {
            if (this.code) {
                this.code.addExtendedProperties(source._code);
            }
            else {
                this.code = new fhir.FhirCode(source._code);
            }
        }
        if (source['details']) {
            this.details = new fhir.Reference(source.details);
        }
    }
    /**
     * Required-bound Value Set for code (MessageHeader.response.code)
     */
    static get codeRequiredCodes() {
        return ResponseCodes;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['identifier']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property identifier:fhir.FhirId fhir: MessageHeader.response.identifier:id' });
        }
        if (this["identifier"]) {
            issues.push(...this.identifier.doModelValidation());
        }
        if (!this['code']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property code:fhir.FhirCode<ResponseCodeType> fhir: MessageHeader.response.code:code' });
        }
        if (this['code'] && (!Object.values(ResponseCodes).includes(this.code))) {
            issues.push({ severity: 'error', code: 'code-invalid', diagnostics: 'Invalid code property code:fhir.FhirCode<ResponseCodeType> fhir: MessageHeader.response.code:code Required binding to: Response' });
        }
        if (this["code"]) {
            issues.push(...this.code.doModelValidation());
        }
        if (this["details"]) {
            issues.push(...this.details.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MessageHeaderResponse._fts_dataType = 'MessageHeaderResponse';
/**
 * The header for a message exchange that is either requesting or responding to an action.  The reference(s) that are the subject of the action as well as other information related to the action are typically transmitted in a bundle in which the MessageHeader resource instance is the first resource in the bundle.
 */
export class MessageHeader extends fhir.DomainResource {
    /**
     * Default constructor for MessageHeader - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'MessageHeader';
        if (source['event']) {
            this.event = source.event;
        }
        else if (source['eventCoding']) {
            this.event = new fhir.Coding(source.eventCoding);
        }
        else if (source['eventUri']) {
            this.event = new fhir.FhirUri({ value: source.eventUri });
        }
        else {
            this.event = null;
        }
        if (source['destination']) {
            this.destination = source.destination.map((x) => new fhir.MessageHeaderDestination(x));
        }
        else {
            this.destination = [];
        }
        if (source['sender']) {
            this.sender = new fhir.Reference(source.sender);
        }
        if (source['enterer']) {
            this.enterer = new fhir.Reference(source.enterer);
        }
        if (source['author']) {
            this.author = new fhir.Reference(source.author);
        }
        if (source['source']) {
            this.source = new fhir.MessageHeaderSource(source.source);
        }
        else {
            this.source = null;
        }
        if (source['responsible']) {
            this.responsible = new fhir.Reference(source.responsible);
        }
        if (source['reason']) {
            this.reason = new fhir.CodeableConcept(source.reason);
        }
        if (source['response']) {
            this.response = new fhir.MessageHeaderResponse(source.response);
        }
        if (source['focus']) {
            this.focus = source.focus.map((x) => new fhir.Reference(x));
        }
        else {
            this.focus = [];
        }
        if (source['definition']) {
            this.definition = new fhir.FhirCanonical({ value: source.definition });
        }
        if (source['_definition']) {
            if (this.definition) {
                this.definition.addExtendedProperties(source._definition);
            }
            else {
                this.definition = new fhir.FhirCanonical(source._definition);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType:"MessageHeader" fhir: MessageHeader.resourceType:"MessageHeader"' });
        }
        if (!this['event']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property event: fhir: MessageHeader.event[x]:' });
        }
        if (this["destination"]) {
            this.destination.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["sender"]) {
            issues.push(...this.sender.doModelValidation());
        }
        if (this["enterer"]) {
            issues.push(...this.enterer.doModelValidation());
        }
        if (this["author"]) {
            issues.push(...this.author.doModelValidation());
        }
        if (!this['source']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property source:fhir.MessageHeaderSource fhir: MessageHeader.source:source' });
        }
        if (this["source"]) {
            issues.push(...this.source.doModelValidation());
        }
        if (this["responsible"]) {
            issues.push(...this.responsible.doModelValidation());
        }
        if (this["reason"]) {
            issues.push(...this.reason.doModelValidation());
        }
        if (this["response"]) {
            issues.push(...this.response.doModelValidation());
        }
        if (this["focus"]) {
            this.focus.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["definition"]) {
            issues.push(...this.definition.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MessageHeader._fts_dataType = 'MessageHeader';
/**
 * Internal flag to properly serialize choice-type element MessageHeader.event[x]
 */
MessageHeader._fts_eventIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVzc2FnZUhlYWRlci5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvTWVzc2FnZUhlYWRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQywrQkFBK0I7QUFFL0IsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFJbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSxhQUFhLEVBQXFCLE1BQU0sbUNBQW1DLENBQUM7QUFtQ3JGOztHQUVHO0FBQ0gsTUFBTSxPQUFPLHdCQUF5QixTQUFRLElBQUksQ0FBQyxlQUFlO0lBcUJoRTs7T0FFRztJQUNILFlBQVksU0FBK0MsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDckcsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxJQUFJLEVBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDOUUsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFDbkIsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFO2dCQUFFLElBQUksQ0FBQyxJQUFJLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLEtBQU0sQ0FBQyxDQUFDO2FBQUU7aUJBQzdEO2dCQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxLQUFxQyxDQUFDLENBQUM7YUFBRTtTQUN4RjtRQUNELElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQUU7UUFDMUUsSUFBSSxN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QU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7U0FBRTtRQUM1RixJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQ2hGLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBN0dEOztHQUVHO0FBQzZCLDJCQUFhLEdBQVUsZUFBZSxDQUFDO0FBU3ZFOztHQUVHO0FBQ3VCLGdDQUFrQixHQUFRLElBQUksQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNC5jb3JlIHZlcnNpb246IDQuMC4xXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogTWVzc2FnZUhlYWRlclxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUmVzcG9uc2VDb2RpbmdzLCBSZXNwb25zZUNvZGluZ1R5cGUsfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1Jlc3BvbnNlQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUmVzcG9uc2VDb2RlcywgIFJlc3BvbnNlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1Jlc3BvbnNlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE1lc3NhZ2VSZWFzb25FbmNvdW50ZXJDb2RpbmdzLCBNZXNzYWdlUmVhc29uRW5jb3VudGVyQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTWVzc2FnZVJlYXNvbkVuY291bnRlckNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE1lc3NhZ2VSZWFzb25FbmNvdW50ZXJDb2RlcywgIE1lc3NhZ2VSZWFzb25FbmNvdW50ZXJDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTWVzc2FnZVJlYXNvbkVuY291bnRlckNvZGVzLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lc3NhZ2VIZWFkZXJEZXN0aW5hdGlvbiB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlSGVhZGVyRGVzdGluYXRpb25BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBIdW1hbi1yZWFkYWJsZSBuYW1lIGZvciB0aGUgdGFyZ2V0IHN5c3RlbS5cclxuICAgKi9cclxuICBuYW1lPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE1lc3NhZ2VIZWFkZXIuZGVzdGluYXRpb24ubmFtZVxyXG4gICAqL1xyXG4gIF9uYW1lPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHRoZSB0YXJnZXQgZW5kIHN5c3RlbSBpbiBzaXR1YXRpb25zIHdoZXJlIHRoZSBpbml0aWFsIG1lc3NhZ2UgdHJhbnNtaXNzaW9uIGlzIHRvIGFuIGludGVybWVkaWFyeSBzeXN0ZW0uXHJcbiAgICovXHJcbiAgdGFyZ2V0PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgaWQgbWF5IGJlIGEgbm9uLXJlc29sdmFibGUgVVJJIGZvciBzeXN0ZW1zIHRoYXQgZG8gbm90IHVzZSBzdGFuZGFyZCBuZXR3b3JrLWJhc2VkIGFkZHJlc3Nlcy5cclxuICAgKi9cclxuICBlbmRwb2ludDogZmhpci5GaGlyVXJsfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE1lc3NhZ2VIZWFkZXIuZGVzdGluYXRpb24uZW5kcG9pbnRcclxuICAgKi9cclxuICBfZW5kcG9pbnQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEFsbG93cyBkYXRhIGNvbnZleWVkIGJ5IGEgbWVzc2FnZSB0byBiZSBhZGRyZXNzZWQgdG8gYSBwYXJ0aWN1bGFyIHBlcnNvbiBvciBkZXBhcnRtZW50IHdoZW4gcm91dGluZyB0byBhIHNwZWNpZmljIGFwcGxpY2F0aW9uIGlzbid0IHN1ZmZpY2llbnQuXHJcbiAgICovXHJcbiAgcmVjZWl2ZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlcmUgU0hPVUxEIGJlIGF0IGxlYXN0IG9uZSBkZXN0aW5hdGlvbiwgYnV0IGluIHNvbWUgY2lyY3Vtc3RhbmNlcywgdGhlIHNvdXJjZSBzeXN0ZW0gaXMgdW5hd2FyZSBvZiBhbnkgcGFydGljdWxhciBkZXN0aW5hdGlvbiBzeXN0ZW0uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVzc2FnZUhlYWRlckRlc3RpbmF0aW9uIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVzc2FnZUhlYWRlckRlc3RpbmF0aW9uJztcclxuICAvKipcclxuICAgKiBIdW1hbi1yZWFkYWJsZSBuYW1lIGZvciB0aGUgdGFyZ2V0IHN5c3RlbS5cclxuICAgKi9cclxuICBwdWJsaWMgbmFtZT86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgdGFyZ2V0IGVuZCBzeXN0ZW0gaW4gc2l0dWF0aW9ucyB3aGVyZSB0aGUgaW5pdGlhbCBtZXNzYWdlIHRyYW5zbWlzc2lvbiBpcyB0byBhbiBpbnRlcm1lZGlhcnkgc3lzdGVtLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0YXJnZXQ/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGlkIG1heSBiZSBhIG5vbi1yZXNvbHZhYmxlIFVSSSBmb3Igc3lzdGVtcyB0aGF0IGRvIG5vdCB1c2Ugc3RhbmRhcmQgbmV0d29yay1iYXNlZCBhZGRyZXNzZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGVuZHBvaW50OiBmaGlyLkZoaXJVcmx8bnVsbDtcclxuICAvKipcclxuICAgKiBBbGxvd3MgZGF0YSBjb252ZXllZCBieSBhIG1lc3NhZ2UgdG8gYmUgYWRkcmVzc2VkIHRvIGEgcGFydGljdWxhciBwZXJzb24gb3IgZGVwYXJ0bWVudCB3aGVuIHJvdXRpbmcgdG8gYSBzcGVjaWZpYyBhcHBsaWNhdGlvbiBpc24ndCBzdWZmaWNpZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWNlaXZlcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBNZXNzYWdlSGVhZGVyRGVzdGluYXRpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxNZXNzYWdlSGVhZGVyRGVzdGluYXRpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnbmFtZSddKSB7IHRoaXMubmFtZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UubmFtZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfbmFtZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLm5hbWUpIHsgdGhpcy5uYW1lLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX25hbWUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5uYW1lID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX25hbWUgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3RhcmdldCddKSB7IHRoaXMudGFyZ2V0ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS50YXJnZXQpOyB9XHJcbiAgICBpZiAoc291cmNlWydlbmRwb2ludCddKSB7IHRoaXMuZW5kcG9pbnQgPSBuZXcgZmhpci5GaGlyVXJsKHt2YWx1ZTogc291cmNlLmVuZHBvaW50fSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmVuZHBvaW50ID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2VuZHBvaW50J10pIHtcclxuICAgICAgaWYgKHRoaXMuZW5kcG9pbnQpIHsgdGhpcy5lbmRwb2ludC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9lbmRwb2ludCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmVuZHBvaW50ID0gbmV3IGZoaXIuRmhpclVybChzb3VyY2UuX2VuZHBvaW50IGFzIFBhcnRpYWw8Zmhpci5GaGlyVXJsQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydyZWNlaXZlciddKSB7IHRoaXMucmVjZWl2ZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnJlY2VpdmVyKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKHRoaXNbXCJuYW1lXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMubmFtZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJ0YXJnZXRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy50YXJnZXQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICghdGhpc1snZW5kcG9pbnQnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgZW5kcG9pbnQ6Zmhpci5GaGlyVXJsIGZoaXI6IE1lc3NhZ2VIZWFkZXIuZGVzdGluYXRpb24uZW5kcG9pbnQ6dXJsJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiZW5kcG9pbnRcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5lbmRwb2ludC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJyZWNlaXZlclwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnJlY2VpdmVyLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgTWVzc2FnZUhlYWRlclNvdXJjZSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlSGVhZGVyU291cmNlQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogSHVtYW4tcmVhZGFibGUgbmFtZSBmb3IgdGhlIHNvdXJjZSBzeXN0ZW0uXHJcbiAgICovXHJcbiAgbmFtZT86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBNZXNzYWdlSGVhZGVyLnNvdXJjZS5uYW1lXHJcbiAgICovXHJcbiAgX25hbWU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIE1heSBpbmNsdWRlIGNvbmZpZ3VyYXRpb24gb3Igb3RoZXIgaW5mb3JtYXRpb24gdXNlZnVsIGluIGRlYnVnZ2luZy5cclxuICAgKi9cclxuICBzb2Z0d2FyZT86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBNZXNzYWdlSGVhZGVyLnNvdXJjZS5zb2Z0d2FyZVxyXG4gICAqL1xyXG4gIF9zb2Z0d2FyZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQ2FuIGNvbnZleSB2ZXJzaW9ucyBvZiBtdWx0aXBsZSBzeXN0ZW1zIGluIHNpdHVhdGlvbnMgd2hlcmUgYSBtZXNzYWdlIHBhc3NlcyB0aHJvdWdoIG11bHRpcGxlIGhhbmRzLlxyXG4gICAqL1xyXG4gIHZlcnNpb24/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogTWVzc2FnZUhlYWRlci5zb3VyY2UudmVyc2lvblxyXG4gICAqL1xyXG4gIF92ZXJzaW9uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBBbiBlLW1haWwsIHBob25lLCB3ZWJzaXRlIG9yIG90aGVyIGNvbnRhY3QgcG9pbnQgdG8gdXNlIHRvIHJlc29sdmUgaXNzdWVzIHdpdGggbWVzc2FnZSBjb21tdW5pY2F0aW9ucy5cclxuICAgKi9cclxuICBjb250YWN0PzogZmhpci5Db250YWN0UG9pbnRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgaWQgbWF5IGJlIGEgbm9uLXJlc29sdmFibGUgVVJJIGZvciBzeXN0ZW1zIHRoYXQgZG8gbm90IHVzZSBzdGFuZGFyZCBuZXR3b3JrLWJhc2VkIGFkZHJlc3Nlcy5cclxuICAgKi9cclxuICBlbmRwb2ludDogZmhpci5GaGlyVXJsfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE1lc3NhZ2VIZWFkZXIuc291cmNlLmVuZHBvaW50XHJcbiAgICovXHJcbiAgX2VuZHBvaW50PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBzb3VyY2UgYXBwbGljYXRpb24gZnJvbSB3aGljaCB0aGlzIG1lc3NhZ2Ugb3JpZ2luYXRlZC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZXNzYWdlSGVhZGVyU291cmNlIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVzc2FnZUhlYWRlclNvdXJjZSc7XHJcbiAgLyoqXHJcbiAgICogSHVtYW4tcmVhZGFibGUgbmFtZSBmb3IgdGhlIHNvdXJjZSBzeXN0ZW0uXHJcbiAgICovXHJcbiAgcHVibGljIG5hbWU/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE1heSBpbmNsdWRlIGNvbmZpZ3VyYXRpb24gb3Igb3RoZXIgaW5mb3JtYXRpb24gdXNlZnVsIGluIGRlYnVnZ2luZy5cclxuICAgKi9cclxuICBwdWJsaWMgc29mdHdhcmU/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENhbiBjb252ZXkgdmVyc2lvbnMgb2YgbXVsdGlwbGUgc3lzdGVtcyBpbiBzaXR1YXRpb25zIHdoZXJlIGEgbWVzc2FnZSBwYXNzZXMgdGhyb3VnaCBtdWx0aXBsZSBoYW5kcy5cclxuICAgKi9cclxuICBwdWJsaWMgdmVyc2lvbj86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQW4gZS1tYWlsLCBwaG9uZSwgd2Vic2l0ZSBvciBvdGhlciBjb250YWN0IHBvaW50IHRvIHVzZSB0byByZXNvbHZlIGlzc3VlcyB3aXRoIG1lc3NhZ2UgY29tbXVuaWNhdGlvbnMuXHJcbiAgICovXHJcbiAgcHVibGljIGNvbnRhY3Q/OiBmaGlyLkNvbnRhY3RQb2ludHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGlkIG1heSBiZSBhIG5vbi1yZXNvbHZhYmxlIFVSSSBmb3Igc3lzdGVtcyB0aGF0IGRvIG5vdCB1c2Ugc3RhbmRhcmQgbmV0d29yay1iYXNlZCBhZGRyZXNzZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGVuZHBvaW50OiBmaGlyLkZoaXJVcmx8bnVsbDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBNZXNzYWdlSGVhZGVyU291cmNlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVzc2FnZUhlYWRlclNvdXJjZUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWyduYW1lJ10pIHsgdGhpcy5uYW1lID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5uYW1lfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19uYW1lJ10pIHtcclxuICAgICAgaWYgKHRoaXMubmFtZSkgeyB0aGlzLm5hbWUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbmFtZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLm5hbWUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fbmFtZSBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnc29mdHdhcmUnXSkgeyB0aGlzLnNvZnR3YXJlID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5zb2Z0d2FyZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfc29mdHdhcmUnXSkge1xyXG4gICAgICBpZiAodGhpcy5zb2Z0d2FyZSkgeyB0aGlzLnNvZnR3YXJlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3NvZnR3YXJlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc29mdHdhcmUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fc29mdHdhcmUgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3ZlcnNpb24nXSkgeyB0aGlzLnZlcnNpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnZlcnNpb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3ZlcnNpb24nXSkge1xyXG4gICAgICBpZiAodGhpcy52ZXJzaW9uKSB7IHRoaXMudmVyc2lvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl92ZXJzaW9uISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudmVyc2lvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl92ZXJzaW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydjb250YWN0J10pIHsgdGhpcy5jb250YWN0ID0gbmV3IGZoaXIuQ29udGFjdFBvaW50KHNvdXJjZS5jb250YWN0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZW5kcG9pbnQnXSkgeyB0aGlzLmVuZHBvaW50ID0gbmV3IGZoaXIuRmhpclVybCh7dmFsdWU6IHNvdXJjZS5lbmRwb2ludH0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5lbmRwb2ludCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19lbmRwb2ludCddKSB7XHJcbiAgICAgIGlmICh0aGlzLmVuZHBvaW50KSB7IHRoaXMuZW5kcG9pbnQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZW5kcG9pbnQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5lbmRwb2ludCA9IG5ldyBmaGlyLkZoaXJVcmwoc291cmNlLl9lbmRwb2ludCBhcyBQYXJ0aWFsPGZoaXIuRmhpclVybEFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKHRoaXNbXCJuYW1lXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMubmFtZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJzb2Z0d2FyZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnNvZnR3YXJlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInZlcnNpb25cIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy52ZXJzaW9uLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImNvbnRhY3RcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5jb250YWN0LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAoIXRoaXNbJ2VuZHBvaW50J10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IGVuZHBvaW50OmZoaXIuRmhpclVybCBmaGlyOiBNZXNzYWdlSGVhZGVyLnNvdXJjZS5lbmRwb2ludDp1cmwnIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJlbmRwb2ludFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmVuZHBvaW50LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgTWVzc2FnZUhlYWRlclJlc3BvbnNlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VIZWFkZXJSZXNwb25zZUFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBNZXNzYWdlSGVhZGVyLmlkIG9mIHRoZSBtZXNzYWdlIHRvIHdoaWNoIHRoaXMgbWVzc2FnZSBpcyBhIHJlc3BvbnNlLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI6IGZoaXIuRmhpcklkfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE1lc3NhZ2VIZWFkZXIucmVzcG9uc2UuaWRlbnRpZmllclxyXG4gICAqL1xyXG4gIF9pZGVudGlmaWVyPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGlzIGlzIGEgZ2VuZXJpYyByZXNwb25zZSB0byB0aGUgcmVxdWVzdCBtZXNzYWdlLiBTcGVjaWZpYyBkYXRhIGZvciB0aGUgcmVzcG9uc2Ugd2lsbCBiZSBmb3VuZCBpbiBNZXNzYWdlSGVhZGVyLmZvY3VzLlxyXG4gICAqL1xyXG4gIGNvZGU6IGZoaXIuRmhpckNvZGU8UmVzcG9uc2VDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogTWVzc2FnZUhlYWRlci5yZXNwb25zZS5jb2RlXHJcbiAgICovXHJcbiAgX2NvZGU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgU0hBTEwgYmUgY29udGFpbmVkIGluIHRoZSBidW5kbGUuIElmIGFueSBvZiB0aGUgaXNzdWVzIGFyZSBlcnJvcnMsIHRoZSByZXNwb25zZSBjb2RlIFNIQUxMIGJlIGFuIGVycm9yLlxyXG4gICAqL1xyXG4gIGRldGFpbHM/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogSW5mb3JtYXRpb24gYWJvdXQgdGhlIG1lc3NhZ2UgdGhhdCB0aGlzIG1lc3NhZ2UgaXMgYSByZXNwb25zZSB0by4gIE9ubHkgcHJlc2VudCBpZiB0aGlzIG1lc3NhZ2UgaXMgYSByZXNwb25zZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZXNzYWdlSGVhZGVyUmVzcG9uc2UgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdNZXNzYWdlSGVhZGVyUmVzcG9uc2UnO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBNZXNzYWdlSGVhZGVyLmlkIG9mIHRoZSBtZXNzYWdlIHRvIHdoaWNoIHRoaXMgbWVzc2FnZSBpcyBhIHJlc3BvbnNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyOiBmaGlyLkZoaXJJZHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaXMgYSBnZW5lcmljIHJlc3BvbnNlIHRvIHRoZSByZXF1ZXN0IG1lc3NhZ2UuIFNwZWNpZmljIGRhdGEgZm9yIHRoZSByZXNwb25zZSB3aWxsIGJlIGZvdW5kIGluIE1lc3NhZ2VIZWFkZXIuZm9jdXMuXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGU6IGZoaXIuRmhpckNvZGU8UmVzcG9uc2VDb2RlVHlwZT58bnVsbDtcclxuICAvKipcclxuICAgKiBUaGlzIFNIQUxMIGJlIGNvbnRhaW5lZCBpbiB0aGUgYnVuZGxlLiBJZiBhbnkgb2YgdGhlIGlzc3VlcyBhcmUgZXJyb3JzLCB0aGUgcmVzcG9uc2UgY29kZSBTSEFMTCBiZSBhbiBlcnJvci5cclxuICAgKi9cclxuICBwdWJsaWMgZGV0YWlscz86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBNZXNzYWdlSGVhZGVyUmVzcG9uc2UgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxNZXNzYWdlSGVhZGVyUmVzcG9uc2VBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IG5ldyBmaGlyLkZoaXJJZCh7dmFsdWU6IHNvdXJjZS5pZGVudGlmaWVyfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmlkZW50aWZpZXIgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfaWRlbnRpZmllciddKSB7XHJcbiAgICAgIGlmICh0aGlzLmlkZW50aWZpZXIpIHsgdGhpcy5pZGVudGlmaWVyLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2lkZW50aWZpZXIhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5pZGVudGlmaWVyID0gbmV3IGZoaXIuRmhpcklkKHNvdXJjZS5faWRlbnRpZmllciBhcyBQYXJ0aWFsPGZoaXIuRmhpcklkQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gbmV3IGZoaXIuRmhpckNvZGU8UmVzcG9uc2VDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2UuY29kZX0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb2RlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2NvZGUnXSkge1xyXG4gICAgICBpZiAodGhpcy5jb2RlKSB7IHRoaXMuY29kZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9jb2RlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkZoaXJDb2RlPFJlc3BvbnNlQ29kZVR5cGU+KHNvdXJjZS5fY29kZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGV0YWlscyddKSB7IHRoaXMuZGV0YWlscyA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuZGV0YWlscyk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZWQtYm91bmQgVmFsdWUgU2V0IGZvciBjb2RlIChNZXNzYWdlSGVhZGVyLnJlc3BvbnNlLmNvZGUpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXQgY29kZVJlcXVpcmVkQ29kZXMoKSB7XHJcbiAgICByZXR1cm4gUmVzcG9uc2VDb2RlcztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICghdGhpc1snaWRlbnRpZmllciddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBpZGVudGlmaWVyOmZoaXIuRmhpcklkIGZoaXI6IE1lc3NhZ2VIZWFkZXIucmVzcG9uc2UuaWRlbnRpZmllcjppZCcgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImlkZW50aWZpZXJcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5pZGVudGlmaWVyLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAoIXRoaXNbJ2NvZGUnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgY29kZTpmaGlyLkZoaXJDb2RlPFJlc3BvbnNlQ29kZVR5cGU+IGZoaXI6IE1lc3NhZ2VIZWFkZXIucmVzcG9uc2UuY29kZTpjb2RlJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzWydjb2RlJ10gJiYgKCFPYmplY3QudmFsdWVzKFJlc3BvbnNlQ29kZXMpLmluY2x1ZGVzKHRoaXMuY29kZSBhcyBhbnkpKSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAnY29kZS1pbnZhbGlkJywgZGlhZ25vc3RpY3M6ICdJbnZhbGlkIGNvZGUgcHJvcGVydHkgY29kZTpmaGlyLkZoaXJDb2RlPFJlc3BvbnNlQ29kZVR5cGU+IGZoaXI6IE1lc3NhZ2VIZWFkZXIucmVzcG9uc2UuY29kZTpjb2RlIFJlcXVpcmVkIGJpbmRpbmcgdG86IFJlc3BvbnNlJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wiY29kZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmNvZGUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiZGV0YWlsc1wiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmRldGFpbHMuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBNZXNzYWdlSGVhZGVyIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VIZWFkZXJBcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJNZXNzYWdlSGVhZGVyXCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0aW1lIG9mIHRoZSBldmVudCB3aWxsIGJlIGZvdW5kIGluIHRoZSBmb2N1cyByZXNvdXJjZS4gVGhlIHRpbWUgb2YgdGhlIG1lc3NhZ2Ugd2lsbCBiZSBmb3VuZCBpbiBbQnVuZGxlLnRpbWVzdGFtcF0oYnVuZGxlLWRlZmluaXRpb25zLmh0bWwjQnVuZGxlLnRpbWVzdGFtcCkuXHJcbiAgICovXHJcbiAgZXZlbnQ/OiBmaGlyLkNvZGluZ3xmaGlyLkZoaXJVcml8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0aW1lIG9mIHRoZSBldmVudCB3aWxsIGJlIGZvdW5kIGluIHRoZSBmb2N1cyByZXNvdXJjZS4gVGhlIHRpbWUgb2YgdGhlIG1lc3NhZ2Ugd2lsbCBiZSBmb3VuZCBpbiBbQnVuZGxlLnRpbWVzdGFtcF0oYnVuZGxlLWRlZmluaXRpb25zLmh0bWwjQnVuZGxlLnRpbWVzdGFtcCkuXHJcbiAgICovXHJcbiAgZXZlbnRDb2Rpbmc/OiBmaGlyLkNvZGluZ0FyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0aW1lIG9mIHRoZSBldmVudCB3aWxsIGJlIGZvdW5kIGluIHRoZSBmb2N1cyByZXNvdXJjZS4gVGhlIHRpbWUgb2YgdGhlIG1lc3NhZ2Ugd2lsbCBiZSBmb3VuZCBpbiBbQnVuZGxlLnRpbWVzdGFtcF0oYnVuZGxlLWRlZmluaXRpb25zLmh0bWwjQnVuZGxlLnRpbWVzdGFtcCkuXHJcbiAgICovXHJcbiAgZXZlbnRVcmk/OiBmaGlyLkZoaXJVcml8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGVyZSBTSE9VTEQgYmUgYXQgbGVhc3Qgb25lIGRlc3RpbmF0aW9uLCBidXQgaW4gc29tZSBjaXJjdW1zdGFuY2VzLCB0aGUgc291cmNlIHN5c3RlbSBpcyB1bmF3YXJlIG9mIGFueSBwYXJ0aWN1bGFyIGRlc3RpbmF0aW9uIHN5c3RlbS5cclxuICAgKi9cclxuICBkZXN0aW5hdGlvbj86IGZoaXIuTWVzc2FnZUhlYWRlckRlc3RpbmF0aW9uQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBVc2UgY2FzZSBpcyBmb3Igd2hlcmUgYSAodHJ1c3RlZCkgc2VuZGluZyBzeXN0ZW0gaXMgcmVzcG9uc2libGUgZm9yIG11bHRpcGxlIG9yZ2FuaXphdGlvbnMsIGFuZCB0aGVyZWZvcmUgY2Fubm90IGRpZmZlcmVudGlhdGUgYmFzZWQgb24gc291cmNlIGVuZHBvaW50IC8gYXV0aGVudGljYXRpb24gYWxvbmUuXHJcbiAgICovXHJcbiAgc2VuZGVyPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBVc3VhbGx5IG9ubHkgZm9yIHRoZSByZXF1ZXN0IGJ1dCBjYW4gYmUgdXNlZCBpbiBhIHJlc3BvbnNlLlxyXG4gICAqL1xyXG4gIGVudGVyZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFVzdWFsbHkgb25seSBmb3IgdGhlIHJlcXVlc3QgYnV0IGNhbiBiZSB1c2VkIGluIGEgcmVzcG9uc2UuXHJcbiAgICovXHJcbiAgYXV0aG9yPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc291cmNlIGFwcGxpY2F0aW9uIGZyb20gd2hpY2ggdGhpcyBtZXNzYWdlIG9yaWdpbmF0ZWQuXHJcbiAgICovXHJcbiAgc291cmNlOiBmaGlyLk1lc3NhZ2VIZWFkZXJTb3VyY2VBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVXN1YWxseSBvbmx5IGZvciB0aGUgcmVxdWVzdCBidXQgY2FuIGJlIHVzZWQgaW4gYSByZXNwb25zZS5cclxuICAgKi9cclxuICByZXNwb25zaWJsZT86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ29kZWQgaW5kaWNhdGlvbiBvZiB0aGUgY2F1c2UgZm9yIHRoZSBldmVudCAtIGluZGljYXRlcyAgYSByZWFzb24gZm9yIHRoZSBvY2N1cnJlbmNlIG9mIHRoZSBldmVudCB0aGF0IGlzIGEgZm9jdXMgb2YgdGhpcyBtZXNzYWdlLlxyXG4gICAqL1xyXG4gIHJlYXNvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5mb3JtYXRpb24gYWJvdXQgdGhlIG1lc3NhZ2UgdGhhdCB0aGlzIG1lc3NhZ2UgaXMgYSByZXNwb25zZSB0by4gIE9ubHkgcHJlc2VudCBpZiB0aGlzIG1lc3NhZ2UgaXMgYSByZXNwb25zZS5cclxuICAgKi9cclxuICByZXNwb25zZT86IGZoaXIuTWVzc2FnZUhlYWRlclJlc3BvbnNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGEgaXMgZGVmaW5lZCB3aGVyZSB0aGUgdHJhbnNhY3Rpb24gdHlwZSBpcyBkZWZpbmVkLiBUaGUgdHJhbnNhY3Rpb24gZGF0YSBpcyBhbHdheXMgaW5jbHVkZWQgaW4gdGhlIGJ1bmRsZSB0aGF0IGlzIHRoZSBmdWxsIG1lc3NhZ2UuICBPbmx5IHRoZSByb290IHJlc291cmNlIGlzIHNwZWNpZmllZC4gIFRoZSByZXNvdXJjZXMgaXQgcmVmZXJlbmNlcyBzaG91bGQgYmUgY29udGFpbmVkIGluIHRoZSBidW5kbGUgYnV0IGFyZSBub3QgYWxzbyBsaXN0ZWQgaGVyZS4gIE11bHRpcGxlIHJlcGV0aXRpb25zIGFyZSBhbGxvd2VkIHRvIGNhdGVyIGZvciBtZXJnZXMgYW5kIG90aGVyIHNpdHVhdGlvbnMgd2l0aCBtdWx0aXBsZSBmb2NhbCB0YXJnZXRzLlxyXG4gICAqL1xyXG4gIGZvY3VzPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFBlcm1hbmVudCBsaW5rIHRvIHRoZSBNZXNzYWdlRGVmaW5pdGlvbiBmb3IgdGhpcyBtZXNzYWdlLlxyXG4gICAqL1xyXG4gIGRlZmluaXRpb24/OiBmaGlyLkZoaXJDYW5vbmljYWx8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogTWVzc2FnZUhlYWRlci5kZWZpbml0aW9uXHJcbiAgICovXHJcbiAgX2RlZmluaXRpb24/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlIGhlYWRlciBmb3IgYSBtZXNzYWdlIGV4Y2hhbmdlIHRoYXQgaXMgZWl0aGVyIHJlcXVlc3Rpbmcgb3IgcmVzcG9uZGluZyB0byBhbiBhY3Rpb24uICBUaGUgcmVmZXJlbmNlKHMpIHRoYXQgYXJlIHRoZSBzdWJqZWN0IG9mIHRoZSBhY3Rpb24gYXMgd2VsbCBhcyBvdGhlciBpbmZvcm1hdGlvbiByZWxhdGVkIHRvIHRoZSBhY3Rpb24gYXJlIHR5cGljYWxseSB0cmFuc21pdHRlZCBpbiBhIGJ1bmRsZSBpbiB3aGljaCB0aGUgTWVzc2FnZUhlYWRlciByZXNvdXJjZSBpbnN0YW5jZSBpcyB0aGUgZmlyc3QgcmVzb3VyY2UgaW4gdGhlIGJ1bmRsZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZXNzYWdlSGVhZGVyIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdNZXNzYWdlSGVhZGVyJztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIk1lc3NhZ2VIZWFkZXJcIjtcclxuICAvKipcclxuICAgKiBUaGUgdGltZSBvZiB0aGUgZXZlbnQgd2lsbCBiZSBmb3VuZCBpbiB0aGUgZm9jdXMgcmVzb3VyY2UuIFRoZSB0aW1lIG9mIHRoZSBtZXNzYWdlIHdpbGwgYmUgZm91bmQgaW4gW0J1bmRsZS50aW1lc3RhbXBdKGJ1bmRsZS1kZWZpbml0aW9ucy5odG1sI0J1bmRsZS50aW1lc3RhbXApLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBldmVudDogKGZoaXIuQ29kaW5nfGZoaXIuRmhpclVyaSl8bnVsbDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IE1lc3NhZ2VIZWFkZXIuZXZlbnRbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfZXZlbnRJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBUaGVyZSBTSE9VTEQgYmUgYXQgbGVhc3Qgb25lIGRlc3RpbmF0aW9uLCBidXQgaW4gc29tZSBjaXJjdW1zdGFuY2VzLCB0aGUgc291cmNlIHN5c3RlbSBpcyB1bmF3YXJlIG9mIGFueSBwYXJ0aWN1bGFyIGRlc3RpbmF0aW9uIHN5c3RlbS5cclxuICAgKi9cclxuICBwdWJsaWMgZGVzdGluYXRpb246IGZoaXIuTWVzc2FnZUhlYWRlckRlc3RpbmF0aW9uW107XHJcbiAgLyoqXHJcbiAgICogVXNlIGNhc2UgaXMgZm9yIHdoZXJlIGEgKHRydXN0ZWQpIHNlbmRpbmcgc3lzdGVtIGlzIHJlc3BvbnNpYmxlIGZvciBtdWx0aXBsZSBvcmdhbml6YXRpb25zLCBhbmQgdGhlcmVmb3JlIGNhbm5vdCBkaWZmZXJlbnRpYXRlIGJhc2VkIG9uIHNvdXJjZSBlbmRwb2ludCAvIGF1dGhlbnRpY2F0aW9uIGFsb25lLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZW5kZXI/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVXN1YWxseSBvbmx5IGZvciB0aGUgcmVxdWVzdCBidXQgY2FuIGJlIHVzZWQgaW4gYSByZXNwb25zZS5cclxuICAgKi9cclxuICBwdWJsaWMgZW50ZXJlcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBVc3VhbGx5IG9ubHkgZm9yIHRoZSByZXF1ZXN0IGJ1dCBjYW4gYmUgdXNlZCBpbiBhIHJlc3BvbnNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhdXRob3I/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNvdXJjZSBhcHBsaWNhdGlvbiBmcm9tIHdoaWNoIHRoaXMgbWVzc2FnZSBvcmlnaW5hdGVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzb3VyY2U6IGZoaXIuTWVzc2FnZUhlYWRlclNvdXJjZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFVzdWFsbHkgb25seSBmb3IgdGhlIHJlcXVlc3QgYnV0IGNhbiBiZSB1c2VkIGluIGEgcmVzcG9uc2UuXHJcbiAgICovXHJcbiAgcHVibGljIHJlc3BvbnNpYmxlPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENvZGVkIGluZGljYXRpb24gb2YgdGhlIGNhdXNlIGZvciB0aGUgZXZlbnQgLSBpbmRpY2F0ZXMgIGEgcmVhc29uIGZvciB0aGUgb2NjdXJyZW5jZSBvZiB0aGUgZXZlbnQgdGhhdCBpcyBhIGZvY3VzIG9mIHRoaXMgbWVzc2FnZS5cclxuICAgKi9cclxuICBwdWJsaWMgcmVhc29uPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZm9ybWF0aW9uIGFib3V0IHRoZSBtZXNzYWdlIHRoYXQgdGhpcyBtZXNzYWdlIGlzIGEgcmVzcG9uc2UgdG8uICBPbmx5IHByZXNlbnQgaWYgdGhpcyBtZXNzYWdlIGlzIGEgcmVzcG9uc2UuXHJcbiAgICovXHJcbiAgcHVibGljIHJlc3BvbnNlPzogZmhpci5NZXNzYWdlSGVhZGVyUmVzcG9uc2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRhIGlzIGRlZmluZWQgd2hlcmUgdGhlIHRyYW5zYWN0aW9uIHR5cGUgaXMgZGVmaW5lZC4gVGhlIHRyYW5zYWN0aW9uIGRhdGEgaXMgYWx3YXlzIGluY2x1ZGVkIGluIHRoZSBidW5kbGUgdGhhdCBpcyB0aGUgZnVsbCBtZXNzYWdlLiAgT25seSB0aGUgcm9vdCByZXNvdXJjZSBpcyBzcGVjaWZpZWQuICBUaGUgcmVzb3VyY2VzIGl0IHJlZmVyZW5jZXMgc2hvdWxkIGJlIGNvbnRhaW5lZCBpbiB0aGUgYnVuZGxlIGJ1dCBhcmUgbm90IGFsc28gbGlzdGVkIGhlcmUuICBNdWx0aXBsZSByZXBldGl0aW9ucyBhcmUgYWxsb3dlZCB0byBjYXRlciBmb3IgbWVyZ2VzIGFuZCBvdGhlciBzaXR1YXRpb25zIHdpdGggbXVsdGlwbGUgZm9jYWwgdGFyZ2V0cy5cclxuICAgKi9cclxuICBwdWJsaWMgZm9jdXM6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogUGVybWFuZW50IGxpbmsgdG8gdGhlIE1lc3NhZ2VEZWZpbml0aW9uIGZvciB0aGlzIG1lc3NhZ2UuXHJcbiAgICovXHJcbiAgcHVibGljIGRlZmluaXRpb24/OiBmaGlyLkZoaXJDYW5vbmljYWx8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE1lc3NhZ2VIZWFkZXIgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxNZXNzYWdlSGVhZGVyQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ01lc3NhZ2VIZWFkZXInO1xyXG4gICAgaWYgKHNvdXJjZVsnZXZlbnQnXSkgeyB0aGlzLmV2ZW50ID0gc291cmNlLmV2ZW50OyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2V2ZW50Q29kaW5nJ10pIHsgdGhpcy5ldmVudCA9IG5ldyBmaGlyLkNvZGluZyhzb3VyY2UuZXZlbnRDb2RpbmcpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2V2ZW50VXJpJ10pIHsgdGhpcy5ldmVudCA9IG5ldyBmaGlyLkZoaXJVcmkoe3ZhbHVlOiBzb3VyY2UuZXZlbnRVcml9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZXZlbnQgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydkZXN0aW5hdGlvbiddKSB7IHRoaXMuZGVzdGluYXRpb24gPSBzb3VyY2UuZGVzdGluYXRpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5NZXNzYWdlSGVhZGVyRGVzdGluYXRpb24oeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5kZXN0aW5hdGlvbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydzZW5kZXInXSkgeyB0aGlzLnNlbmRlciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2Uuc2VuZGVyKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZW50ZXJlciddKSB7IHRoaXMuZW50ZXJlciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuZW50ZXJlcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ2F1dGhvciddKSB7IHRoaXMuYXV0aG9yID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5hdXRob3IpOyB9XHJcbiAgICBpZiAoc291cmNlWydzb3VyY2UnXSkgeyB0aGlzLnNvdXJjZSA9IG5ldyBmaGlyLk1lc3NhZ2VIZWFkZXJTb3VyY2Uoc291cmNlLnNvdXJjZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnNvdXJjZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3Jlc3BvbnNpYmxlJ10pIHsgdGhpcy5yZXNwb25zaWJsZSA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UucmVzcG9uc2libGUpOyB9XHJcbiAgICBpZiAoc291cmNlWydyZWFzb24nXSkgeyB0aGlzLnJlYXNvbiA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UucmVhc29uKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVzcG9uc2UnXSkgeyB0aGlzLnJlc3BvbnNlID0gbmV3IGZoaXIuTWVzc2FnZUhlYWRlclJlc3BvbnNlKHNvdXJjZS5yZXNwb25zZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2ZvY3VzJ10pIHsgdGhpcy5mb2N1cyA9IHNvdXJjZS5mb2N1cy5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmZvY3VzID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2RlZmluaXRpb24nXSkgeyB0aGlzLmRlZmluaXRpb24gPSBuZXcgZmhpci5GaGlyQ2Fub25pY2FsKHt2YWx1ZTogc291cmNlLmRlZmluaXRpb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2RlZmluaXRpb24nXSkge1xyXG4gICAgICBpZiAodGhpcy5kZWZpbml0aW9uKSB7IHRoaXMuZGVmaW5pdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9kZWZpbml0aW9uISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZGVmaW5pdGlvbiA9IG5ldyBmaGlyLkZoaXJDYW5vbmljYWwoc291cmNlLl9kZWZpbml0aW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ2Fub25pY2FsQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAoIXRoaXNbJ3Jlc291cmNlVHlwZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSByZXNvdXJjZVR5cGU6XCJNZXNzYWdlSGVhZGVyXCIgZmhpcjogTWVzc2FnZUhlYWRlci5yZXNvdXJjZVR5cGU6XCJNZXNzYWdlSGVhZGVyXCInIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCF0aGlzWydldmVudCddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBldmVudDogZmhpcjogTWVzc2FnZUhlYWRlci5ldmVudFt4XTonIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJkZXN0aW5hdGlvblwiXSkgeyB0aGlzLmRlc3RpbmF0aW9uLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJzZW5kZXJcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5zZW5kZXIuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiZW50ZXJlclwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmVudGVyZXIuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiYXV0aG9yXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuYXV0aG9yLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAoIXRoaXNbJ3NvdXJjZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBzb3VyY2U6Zmhpci5NZXNzYWdlSGVhZGVyU291cmNlIGZoaXI6IE1lc3NhZ2VIZWFkZXIuc291cmNlOnNvdXJjZScgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcInNvdXJjZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnNvdXJjZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJyZXNwb25zaWJsZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnJlc3BvbnNpYmxlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInJlYXNvblwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnJlYXNvbi5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJyZXNwb25zZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnJlc3BvbnNlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImZvY3VzXCJdKSB7IHRoaXMuZm9jdXMuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImRlZmluaXRpb25cIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5kZWZpbml0aW9uLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=