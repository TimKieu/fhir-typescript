// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: MessageHeader
import * as fhir from '../fhir.js';
// @ts-ignore
import { ResponseCodeCodings, } from '../fhirValueSets/ResponseCodeCodings.js';
/**
 * There SHOULD be at least one destination, but in some circumstances, the source system is unaware of any particular destination system.
 */
export class MessageHeaderDestination extends fhir.BackboneElement {
    /**
     * Default constructor for MessageHeaderDestination - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['name']) {
            this.name = new fhir.FhirString({ value: source.name });
        }
        if (source['target']) {
            this.target = new fhir.Reference(source.target);
        }
        if (source['endpoint']) {
            this.endpoint = new fhir.FhirUrl({ value: source.endpoint });
        }
        else {
            this.endpoint = null;
        }
        if (source['receiver']) {
            this.receiver = new fhir.Reference(source.receiver);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["name"]) {
            issues.push(...this.name.doModelValidation());
        }
        if (this["target"]) {
            issues.push(...this.target.doModelValidation());
        }
        if (!this['endpoint']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property endpoint:fhir.FhirUrl fhir: MessageHeader.destination.endpoint:url', });
        }
        if (this["endpoint"]) {
            issues.push(...this.endpoint.doModelValidation());
        }
        if (this["receiver"]) {
            issues.push(...this.receiver.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MessageHeaderDestination._fts_dataType = 'MessageHeaderDestination';
/**
 * The source application from which this message originated.
 */
export class MessageHeaderSource extends fhir.BackboneElement {
    /**
     * Default constructor for MessageHeaderSource - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['name']) {
            this.name = new fhir.FhirString({ value: source.name });
        }
        if (source['software']) {
            this.software = new fhir.FhirString({ value: source.software });
        }
        if (source['version']) {
            this.version = new fhir.FhirString({ value: source.version });
        }
        if (source['contact']) {
            this.contact = new fhir.ContactPoint(source.contact);
        }
        if (source['endpoint']) {
            this.endpoint = new fhir.FhirUrl({ value: source.endpoint });
        }
        else {
            this.endpoint = null;
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["name"]) {
            issues.push(...this.name.doModelValidation());
        }
        if (this["software"]) {
            issues.push(...this.software.doModelValidation());
        }
        if (this["version"]) {
            issues.push(...this.version.doModelValidation());
        }
        if (this["contact"]) {
            issues.push(...this.contact.doModelValidation());
        }
        if (!this['endpoint']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property endpoint:fhir.FhirUrl fhir: MessageHeader.source.endpoint:url', });
        }
        if (this["endpoint"]) {
            issues.push(...this.endpoint.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MessageHeaderSource._fts_dataType = 'MessageHeaderSource';
/**
 * Information about the message that this message is a response to.  Only present if this message is a response.
 */
export class MessageHeaderResponse extends fhir.BackboneElement {
    /**
     * Default constructor for MessageHeaderResponse - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['identifier']) {
            this.identifier = new fhir.FhirId({ value: source.identifier });
        }
        else {
            this.identifier = null;
        }
        if (source['code']) {
            this.code = source.code;
        }
        else {
            this.code = null;
        }
        if (source['details']) {
            this.details = new fhir.Reference(source.details);
        }
    }
    /**
     * Required-bound Value Set for code (MessageHeader.response.code)
     */
    static codeRequiredCoding() {
        return ResponseCodeCodings;
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['identifier']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property identifier:fhir.FhirId fhir: MessageHeader.response.identifier:id', });
        }
        if (this["identifier"]) {
            issues.push(...this.identifier.doModelValidation());
        }
        if (!this['code']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property code:ResponseCodeCodeType fhir: MessageHeader.response.code:code', });
        }
        if (this["details"]) {
            issues.push(...this.details.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MessageHeaderResponse._fts_dataType = 'MessageHeaderResponse';
/**
 * The header for a message exchange that is either requesting or responding to an action.  The reference(s) that are the subject of the action as well as other information related to the action are typically transmitted in a bundle in which the MessageHeader resource instance is the first resource in the bundle.
 */
export class MessageHeader extends fhir.DomainResource {
    /**
     * Default constructor for MessageHeader - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'MessageHeader';
        if (source['event']) {
            this.event = source.event;
        }
        else if (source['eventCoding']) {
            this.event = new fhir.Coding(source.eventCoding);
        }
        else if (source['eventUri']) {
            this.event = new fhir.FhirUri({ value: source.eventUri });
        }
        else {
            this.event = null;
        }
        if (source['destination']) {
            this.destination = source.destination.map((x) => new fhir.MessageHeaderDestination(x));
        }
        else {
            this.destination = [];
        }
        if (source['sender']) {
            this.sender = new fhir.Reference(source.sender);
        }
        if (source['enterer']) {
            this.enterer = new fhir.Reference(source.enterer);
        }
        if (source['author']) {
            this.author = new fhir.Reference(source.author);
        }
        if (source['source']) {
            this.source = new fhir.MessageHeaderSource(source.source);
        }
        else {
            this.source = null;
        }
        if (source['responsible']) {
            this.responsible = new fhir.Reference(source.responsible);
        }
        if (source['reason']) {
            this.reason = new fhir.CodeableConcept(source.reason);
        }
        if (source['response']) {
            this.response = new fhir.MessageHeaderResponse(source.response);
        }
        if (source['focus']) {
            this.focus = source.focus.map((x) => new fhir.Reference(x));
        }
        else {
            this.focus = [];
        }
        if (source['definition']) {
            this.definition = new fhir.FhirCanonical({ value: source.definition });
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType:"MessageHeader" fhir: MessageHeader.resourceType:"MessageHeader"', });
        }
        if (!this['event']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property event: fhir: MessageHeader.event[x]:', });
        }
        if (this["destination"]) {
            this.destination.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["sender"]) {
            issues.push(...this.sender.doModelValidation());
        }
        if (this["enterer"]) {
            issues.push(...this.enterer.doModelValidation());
        }
        if (this["author"]) {
            issues.push(...this.author.doModelValidation());
        }
        if (!this['source']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property source:fhir.MessageHeaderSource fhir: MessageHeader.source:source', });
        }
        if (this["source"]) {
            issues.push(...this.source.doModelValidation());
        }
        if (this["responsible"]) {
            issues.push(...this.responsible.doModelValidation());
        }
        if (this["reason"]) {
            issues.push(...this.reason.doModelValidation());
        }
        if (this["response"]) {
            issues.push(...this.response.doModelValidation());
        }
        if (this["focus"]) {
            this.focus.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["definition"]) {
            issues.push(...this.definition.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MessageHeader._fts_dataType = 'MessageHeader';
/**
 * Internal flag to properly serialize choice-type element MessageHeader.event[x]
 */
MessageHeader._fts_eventIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVzc2FnZUhlYWRlci5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvTWVzc2FnZUhlYWRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQywrQkFBK0I7QUFFL0IsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFFbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSxtQkFBbUIsR0FBMEIsTUFBTSx5Q0FBeUMsQ0FBQztBQTZCdEc7O0dBRUc7QUFDSCxNQUFNLE9BQU8sd0JBQXlCLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFxQmhFOztPQUVHO0lBQ0gsWUFBWSxTQUErQyxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUNyRyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLElBQUksRUFBQyxDQUFDLENBQUM7U0FBRTtRQUM5RSxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUFFO1FBQzFFLElBQUksTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLFFBQVEsRUFBQyxDQUFDLENBQUM7U0FBRTthQUNsRjtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDOUIsSUFBSSxNQUFNLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsUUFBUSxH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LE1BQU0sQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUN4RSxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQzVFLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7U0FBRTtRQUM1RixJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRTtZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQ2hGLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBekdEOztHQUVHO0FBQzZCLDJCQUFhLEdBQVUsZUFBZSxDQUFDO0FBU3ZFOztHQUVHO0FBQ3VCLGdDQUFrQixHQUFRLElBQUksQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNC5jb3JlIHZlcnNpb246IDQuMC4xXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogTWVzc2FnZUhlYWRlclxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUmVzcG9uc2VDb2RlQ29kaW5ncywgUmVzcG9uc2VDb2RlQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUmVzcG9uc2VDb2RlQ29kaW5ncy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUmVzcG9uc2VDb2RlQ29kZXMsICBSZXNwb25zZUNvZGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUmVzcG9uc2VDb2RlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE1lc3NhZ2VSZWFzb25FbmNvdW50ZXJDb2RpbmdzLCBNZXNzYWdlUmVhc29uRW5jb3VudGVyQ29kaW5nVHlwZSx9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTWVzc2FnZVJlYXNvbkVuY291bnRlckNvZGluZ3MuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE1lc3NhZ2VSZWFzb25FbmNvdW50ZXJDb2RlcywgIE1lc3NhZ2VSZWFzb25FbmNvdW50ZXJDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTWVzc2FnZVJlYXNvbkVuY291bnRlckNvZGVzLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lc3NhZ2VIZWFkZXJEZXN0aW5hdGlvbiB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlSGVhZGVyRGVzdGluYXRpb25BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBIdW1hbi1yZWFkYWJsZSBuYW1lIGZvciB0aGUgdGFyZ2V0IHN5c3RlbS5cclxuICAgKi9cclxuICBuYW1lPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgdGFyZ2V0IGVuZCBzeXN0ZW0gaW4gc2l0dWF0aW9ucyB3aGVyZSB0aGUgaW5pdGlhbCBtZXNzYWdlIHRyYW5zbWlzc2lvbiBpcyB0byBhbiBpbnRlcm1lZGlhcnkgc3lzdGVtLlxyXG4gICAqL1xyXG4gIHRhcmdldD86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGlkIG1heSBiZSBhIG5vbi1yZXNvbHZhYmxlIFVSSSBmb3Igc3lzdGVtcyB0aGF0IGRvIG5vdCB1c2Ugc3RhbmRhcmQgbmV0d29yay1iYXNlZCBhZGRyZXNzZXMuXHJcbiAgICovXHJcbiAgZW5kcG9pbnQ6IGZoaXIuRmhpclVybHxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFsbG93cyBkYXRhIGNvbnZleWVkIGJ5IGEgbWVzc2FnZSB0byBiZSBhZGRyZXNzZWQgdG8gYSBwYXJ0aWN1bGFyIHBlcnNvbiBvciBkZXBhcnRtZW50IHdoZW4gcm91dGluZyB0byBhIHNwZWNpZmljIGFwcGxpY2F0aW9uIGlzbid0IHN1ZmZpY2llbnQuXHJcbiAgICovXHJcbiAgcmVjZWl2ZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlcmUgU0hPVUxEIGJlIGF0IGxlYXN0IG9uZSBkZXN0aW5hdGlvbiwgYnV0IGluIHNvbWUgY2lyY3Vtc3RhbmNlcywgdGhlIHNvdXJjZSBzeXN0ZW0gaXMgdW5hd2FyZSBvZiBhbnkgcGFydGljdWxhciBkZXN0aW5hdGlvbiBzeXN0ZW0uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVzc2FnZUhlYWRlckRlc3RpbmF0aW9uIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVzc2FnZUhlYWRlckRlc3RpbmF0aW9uJztcclxuICAvKipcclxuICAgKiBIdW1hbi1yZWFkYWJsZSBuYW1lIGZvciB0aGUgdGFyZ2V0IHN5c3RlbS5cclxuICAgKi9cclxuICBwdWJsaWMgbmFtZT86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgdGFyZ2V0IGVuZCBzeXN0ZW0gaW4gc2l0dWF0aW9ucyB3aGVyZSB0aGUgaW5pdGlhbCBtZXNzYWdlIHRyYW5zbWlzc2lvbiBpcyB0byBhbiBpbnRlcm1lZGlhcnkgc3lzdGVtLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0YXJnZXQ/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGlkIG1heSBiZSBhIG5vbi1yZXNvbHZhYmxlIFVSSSBmb3Igc3lzdGVtcyB0aGF0IGRvIG5vdCB1c2Ugc3RhbmRhcmQgbmV0d29yay1iYXNlZCBhZGRyZXNzZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGVuZHBvaW50OiBmaGlyLkZoaXJVcmx8bnVsbDtcclxuICAvKipcclxuICAgKiBBbGxvd3MgZGF0YSBjb252ZXllZCBieSBhIG1lc3NhZ2UgdG8gYmUgYWRkcmVzc2VkIHRvIGEgcGFydGljdWxhciBwZXJzb24gb3IgZGVwYXJ0bWVudCB3aGVuIHJvdXRpbmcgdG8gYSBzcGVjaWZpYyBhcHBsaWNhdGlvbiBpc24ndCBzdWZmaWNpZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWNlaXZlcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBNZXNzYWdlSGVhZGVyRGVzdGluYXRpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxNZXNzYWdlSGVhZGVyRGVzdGluYXRpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnbmFtZSddKSB7IHRoaXMubmFtZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UubmFtZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWyd0YXJnZXQnXSkgeyB0aGlzLnRhcmdldCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UudGFyZ2V0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZW5kcG9pbnQnXSkgeyB0aGlzLmVuZHBvaW50ID0gbmV3IGZoaXIuRmhpclVybCh7dmFsdWU6IHNvdXJjZS5lbmRwb2ludH0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5lbmRwb2ludCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3JlY2VpdmVyJ10pIHsgdGhpcy5yZWNlaXZlciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UucmVjZWl2ZXIpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAodGhpc1tcIm5hbWVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5uYW1lLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInRhcmdldFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnRhcmdldC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKCF0aGlzWydlbmRwb2ludCddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsICBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgZW5kcG9pbnQ6Zmhpci5GaGlyVXJsIGZoaXI6IE1lc3NhZ2VIZWFkZXIuZGVzdGluYXRpb24uZW5kcG9pbnQ6dXJsJywgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImVuZHBvaW50XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuZW5kcG9pbnQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wicmVjZWl2ZXJcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5yZWNlaXZlci5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lc3NhZ2VIZWFkZXJTb3VyY2UgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZUhlYWRlclNvdXJjZUFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEh1bWFuLXJlYWRhYmxlIG5hbWUgZm9yIHRoZSBzb3VyY2Ugc3lzdGVtLlxyXG4gICAqL1xyXG4gIG5hbWU/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBNYXkgaW5jbHVkZSBjb25maWd1cmF0aW9uIG9yIG90aGVyIGluZm9ybWF0aW9uIHVzZWZ1bCBpbiBkZWJ1Z2dpbmcuXHJcbiAgICovXHJcbiAgc29mdHdhcmU/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDYW4gY29udmV5IHZlcnNpb25zIG9mIG11bHRpcGxlIHN5c3RlbXMgaW4gc2l0dWF0aW9ucyB3aGVyZSBhIG1lc3NhZ2UgcGFzc2VzIHRocm91Z2ggbXVsdGlwbGUgaGFuZHMuXHJcbiAgICovXHJcbiAgdmVyc2lvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFuIGUtbWFpbCwgcGhvbmUsIHdlYnNpdGUgb3Igb3RoZXIgY29udGFjdCBwb2ludCB0byB1c2UgdG8gcmVzb2x2ZSBpc3N1ZXMgd2l0aCBtZXNzYWdlIGNvbW11bmljYXRpb25zLlxyXG4gICAqL1xyXG4gIGNvbnRhY3Q/OiBmaGlyLkNvbnRhY3RQb2ludEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpZCBtYXkgYmUgYSBub24tcmVzb2x2YWJsZSBVUkkgZm9yIHN5c3RlbXMgdGhhdCBkbyBub3QgdXNlIHN0YW5kYXJkIG5ldHdvcmstYmFzZWQgYWRkcmVzc2VzLlxyXG4gICAqL1xyXG4gIGVuZHBvaW50OiBmaGlyLkZoaXJVcmx8c3RyaW5nfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBzb3VyY2UgYXBwbGljYXRpb24gZnJvbSB3aGljaCB0aGlzIG1lc3NhZ2Ugb3JpZ2luYXRlZC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZXNzYWdlSGVhZGVyU291cmNlIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVzc2FnZUhlYWRlclNvdXJjZSc7XHJcbiAgLyoqXHJcbiAgICogSHVtYW4tcmVhZGFibGUgbmFtZSBmb3IgdGhlIHNvdXJjZSBzeXN0ZW0uXHJcbiAgICovXHJcbiAgcHVibGljIG5hbWU/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE1heSBpbmNsdWRlIGNvbmZpZ3VyYXRpb24gb3Igb3RoZXIgaW5mb3JtYXRpb24gdXNlZnVsIGluIGRlYnVnZ2luZy5cclxuICAgKi9cclxuICBwdWJsaWMgc29mdHdhcmU/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENhbiBjb252ZXkgdmVyc2lvbnMgb2YgbXVsdGlwbGUgc3lzdGVtcyBpbiBzaXR1YXRpb25zIHdoZXJlIGEgbWVzc2FnZSBwYXNzZXMgdGhyb3VnaCBtdWx0aXBsZSBoYW5kcy5cclxuICAgKi9cclxuICBwdWJsaWMgdmVyc2lvbj86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQW4gZS1tYWlsLCBwaG9uZSwgd2Vic2l0ZSBvciBvdGhlciBjb250YWN0IHBvaW50IHRvIHVzZSB0byByZXNvbHZlIGlzc3VlcyB3aXRoIG1lc3NhZ2UgY29tbXVuaWNhdGlvbnMuXHJcbiAgICovXHJcbiAgcHVibGljIGNvbnRhY3Q/OiBmaGlyLkNvbnRhY3RQb2ludHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGlkIG1heSBiZSBhIG5vbi1yZXNvbHZhYmxlIFVSSSBmb3Igc3lzdGVtcyB0aGF0IGRvIG5vdCB1c2Ugc3RhbmRhcmQgbmV0d29yay1iYXNlZCBhZGRyZXNzZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGVuZHBvaW50OiBmaGlyLkZoaXJVcmx8bnVsbDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBNZXNzYWdlSGVhZGVyU291cmNlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVzc2FnZUhlYWRlclNvdXJjZUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWyduYW1lJ10pIHsgdGhpcy5uYW1lID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5uYW1lfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3NvZnR3YXJlJ10pIHsgdGhpcy5zb2Z0d2FyZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2Uuc29mdHdhcmV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndmVyc2lvbiddKSB7IHRoaXMudmVyc2lvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UudmVyc2lvbn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydjb250YWN0J10pIHsgdGhpcy5jb250YWN0ID0gbmV3IGZoaXIuQ29udGFjdFBvaW50KHNvdXJjZS5jb250YWN0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZW5kcG9pbnQnXSkgeyB0aGlzLmVuZHBvaW50ID0gbmV3IGZoaXIuRmhpclVybCh7dmFsdWU6IHNvdXJjZS5lbmRwb2ludH0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5lbmRwb2ludCA9IG51bGw7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICh0aGlzW1wibmFtZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm5hbWUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wic29mdHdhcmVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5zb2Z0d2FyZS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJ2ZXJzaW9uXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMudmVyc2lvbi5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJjb250YWN0XCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuY29udGFjdC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKCF0aGlzWydlbmRwb2ludCddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsICBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgZW5kcG9pbnQ6Zmhpci5GaGlyVXJsIGZoaXI6IE1lc3NhZ2VIZWFkZXIuc291cmNlLmVuZHBvaW50OnVybCcsIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJlbmRwb2ludFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmVuZHBvaW50LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgTWVzc2FnZUhlYWRlclJlc3BvbnNlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VIZWFkZXJSZXNwb25zZUFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBNZXNzYWdlSGVhZGVyLmlkIG9mIHRoZSBtZXNzYWdlIHRvIHdoaWNoIHRoaXMgbWVzc2FnZSBpcyBhIHJlc3BvbnNlLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI6IGZoaXIuRmhpcklkfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBhIGdlbmVyaWMgcmVzcG9uc2UgdG8gdGhlIHJlcXVlc3QgbWVzc2FnZS4gU3BlY2lmaWMgZGF0YSBmb3IgdGhlIHJlc3BvbnNlIHdpbGwgYmUgZm91bmQgaW4gTWVzc2FnZUhlYWRlci5mb2N1cy5cclxuICAgKi9cclxuICBjb2RlOiBSZXNwb25zZUNvZGVDb2RlVHlwZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgU0hBTEwgYmUgY29udGFpbmVkIGluIHRoZSBidW5kbGUuIElmIGFueSBvZiB0aGUgaXNzdWVzIGFyZSBlcnJvcnMsIHRoZSByZXNwb25zZSBjb2RlIFNIQUxMIGJlIGFuIGVycm9yLlxyXG4gICAqL1xyXG4gIGRldGFpbHM/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogSW5mb3JtYXRpb24gYWJvdXQgdGhlIG1lc3NhZ2UgdGhhdCB0aGlzIG1lc3NhZ2UgaXMgYSByZXNwb25zZSB0by4gIE9ubHkgcHJlc2VudCBpZiB0aGlzIG1lc3NhZ2UgaXMgYSByZXNwb25zZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZXNzYWdlSGVhZGVyUmVzcG9uc2UgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdNZXNzYWdlSGVhZGVyUmVzcG9uc2UnO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBNZXNzYWdlSGVhZGVyLmlkIG9mIHRoZSBtZXNzYWdlIHRvIHdoaWNoIHRoaXMgbWVzc2FnZSBpcyBhIHJlc3BvbnNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyOiBmaGlyLkZoaXJJZHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaXMgYSBnZW5lcmljIHJlc3BvbnNlIHRvIHRoZSByZXF1ZXN0IG1lc3NhZ2UuIFNwZWNpZmljIGRhdGEgZm9yIHRoZSByZXNwb25zZSB3aWxsIGJlIGZvdW5kIGluIE1lc3NhZ2VIZWFkZXIuZm9jdXMuXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGU6IFJlc3BvbnNlQ29kZUNvZGVUeXBlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBTSEFMTCBiZSBjb250YWluZWQgaW4gdGhlIGJ1bmRsZS4gSWYgYW55IG9mIHRoZSBpc3N1ZXMgYXJlIGVycm9ycywgdGhlIHJlc3BvbnNlIGNvZGUgU0hBTEwgYmUgYW4gZXJyb3IuXHJcbiAgICovXHJcbiAgcHVibGljIGRldGFpbHM/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgTWVzc2FnZUhlYWRlclJlc3BvbnNlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVzc2FnZUhlYWRlclJlc3BvbnNlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBuZXcgZmhpci5GaGlySWQoe3ZhbHVlOiBzb3VyY2UuaWRlbnRpZmllcn0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pZGVudGlmaWVyID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IHNvdXJjZS5jb2RlOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb2RlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGV0YWlscyddKSB7IHRoaXMuZGV0YWlscyA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuZGV0YWlscyk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWlyZWQtYm91bmQgVmFsdWUgU2V0IGZvciBjb2RlIChNZXNzYWdlSGVhZGVyLnJlc3BvbnNlLmNvZGUpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBjb2RlUmVxdWlyZWRDb2RpbmcoKTpSZXNwb25zZUNvZGVDb2RpbmdUeXBlIHtcclxuICAgIHJldHVybiBSZXNwb25zZUNvZGVDb2RpbmdzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbigpO1xyXG4gICAgaWYgKCF0aGlzWydpZGVudGlmaWVyJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBpZGVudGlmaWVyOmZoaXIuRmhpcklkIGZoaXI6IE1lc3NhZ2VIZWFkZXIucmVzcG9uc2UuaWRlbnRpZmllcjppZCcsIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJpZGVudGlmaWVyXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuaWRlbnRpZmllci5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKCF0aGlzWydjb2RlJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBjb2RlOlJlc3BvbnNlQ29kZUNvZGVUeXBlIGZoaXI6IE1lc3NhZ2VIZWFkZXIucmVzcG9uc2UuY29kZTpjb2RlJywgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpc1tcImRldGFpbHNcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5kZXRhaWxzLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgTWVzc2FnZUhlYWRlciB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlSGVhZGVyQXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiTWVzc2FnZUhlYWRlclwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdGltZSBvZiB0aGUgZXZlbnQgd2lsbCBiZSBmb3VuZCBpbiB0aGUgZm9jdXMgcmVzb3VyY2UuIFRoZSB0aW1lIG9mIHRoZSBtZXNzYWdlIHdpbGwgYmUgZm91bmQgaW4gW0J1bmRsZS50aW1lc3RhbXBdKGJ1bmRsZS1kZWZpbml0aW9ucy5odG1sI0J1bmRsZS50aW1lc3RhbXApLlxyXG4gICAqL1xyXG4gIGV2ZW50PzogZmhpci5Db2Rpbmd8Zmhpci5GaGlyVXJpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdGltZSBvZiB0aGUgZXZlbnQgd2lsbCBiZSBmb3VuZCBpbiB0aGUgZm9jdXMgcmVzb3VyY2UuIFRoZSB0aW1lIG9mIHRoZSBtZXNzYWdlIHdpbGwgYmUgZm91bmQgaW4gW0J1bmRsZS50aW1lc3RhbXBdKGJ1bmRsZS1kZWZpbml0aW9ucy5odG1sI0J1bmRsZS50aW1lc3RhbXApLlxyXG4gICAqL1xyXG4gIGV2ZW50Q29kaW5nPzogZmhpci5Db2RpbmdBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdGltZSBvZiB0aGUgZXZlbnQgd2lsbCBiZSBmb3VuZCBpbiB0aGUgZm9jdXMgcmVzb3VyY2UuIFRoZSB0aW1lIG9mIHRoZSBtZXNzYWdlIHdpbGwgYmUgZm91bmQgaW4gW0J1bmRsZS50aW1lc3RhbXBdKGJ1bmRsZS1kZWZpbml0aW9ucy5odG1sI0J1bmRsZS50aW1lc3RhbXApLlxyXG4gICAqL1xyXG4gIGV2ZW50VXJpPzogZmhpci5GaGlyVXJpfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlcmUgU0hPVUxEIGJlIGF0IGxlYXN0IG9uZSBkZXN0aW5hdGlvbiwgYnV0IGluIHNvbWUgY2lyY3Vtc3RhbmNlcywgdGhlIHNvdXJjZSBzeXN0ZW0gaXMgdW5hd2FyZSBvZiBhbnkgcGFydGljdWxhciBkZXN0aW5hdGlvbiBzeXN0ZW0uXHJcbiAgICovXHJcbiAgZGVzdGluYXRpb24/OiBmaGlyLk1lc3NhZ2VIZWFkZXJEZXN0aW5hdGlvbkFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVXNlIGNhc2UgaXMgZm9yIHdoZXJlIGEgKHRydXN0ZWQpIHNlbmRpbmcgc3lzdGVtIGlzIHJlc3BvbnNpYmxlIGZvciBtdWx0aXBsZSBvcmdhbml6YXRpb25zLCBhbmQgdGhlcmVmb3JlIGNhbm5vdCBkaWZmZXJlbnRpYXRlIGJhc2VkIG9uIHNvdXJjZSBlbmRwb2ludCAvIGF1dGhlbnRpY2F0aW9uIGFsb25lLlxyXG4gICAqL1xyXG4gIHNlbmRlcj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVXN1YWxseSBvbmx5IGZvciB0aGUgcmVxdWVzdCBidXQgY2FuIGJlIHVzZWQgaW4gYSByZXNwb25zZS5cclxuICAgKi9cclxuICBlbnRlcmVyPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBVc3VhbGx5IG9ubHkgZm9yIHRoZSByZXF1ZXN0IGJ1dCBjYW4gYmUgdXNlZCBpbiBhIHJlc3BvbnNlLlxyXG4gICAqL1xyXG4gIGF1dGhvcj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNvdXJjZSBhcHBsaWNhdGlvbiBmcm9tIHdoaWNoIHRoaXMgbWVzc2FnZSBvcmlnaW5hdGVkLlxyXG4gICAqL1xyXG4gIHNvdXJjZTogZmhpci5NZXNzYWdlSGVhZGVyU291cmNlQXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFVzdWFsbHkgb25seSBmb3IgdGhlIHJlcXVlc3QgYnV0IGNhbiBiZSB1c2VkIGluIGEgcmVzcG9uc2UuXHJcbiAgICovXHJcbiAgcmVzcG9uc2libGU/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENvZGVkIGluZGljYXRpb24gb2YgdGhlIGNhdXNlIGZvciB0aGUgZXZlbnQgLSBpbmRpY2F0ZXMgIGEgcmVhc29uIGZvciB0aGUgb2NjdXJyZW5jZSBvZiB0aGUgZXZlbnQgdGhhdCBpcyBhIGZvY3VzIG9mIHRoaXMgbWVzc2FnZS5cclxuICAgKi9cclxuICByZWFzb24/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZm9ybWF0aW9uIGFib3V0IHRoZSBtZXNzYWdlIHRoYXQgdGhpcyBtZXNzYWdlIGlzIGEgcmVzcG9uc2UgdG8uICBPbmx5IHByZXNlbnQgaWYgdGhpcyBtZXNzYWdlIGlzIGEgcmVzcG9uc2UuXHJcbiAgICovXHJcbiAgcmVzcG9uc2U/OiBmaGlyLk1lc3NhZ2VIZWFkZXJSZXNwb25zZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRhIGlzIGRlZmluZWQgd2hlcmUgdGhlIHRyYW5zYWN0aW9uIHR5cGUgaXMgZGVmaW5lZC4gVGhlIHRyYW5zYWN0aW9uIGRhdGEgaXMgYWx3YXlzIGluY2x1ZGVkIGluIHRoZSBidW5kbGUgdGhhdCBpcyB0aGUgZnVsbCBtZXNzYWdlLiAgT25seSB0aGUgcm9vdCByZXNvdXJjZSBpcyBzcGVjaWZpZWQuICBUaGUgcmVzb3VyY2VzIGl0IHJlZmVyZW5jZXMgc2hvdWxkIGJlIGNvbnRhaW5lZCBpbiB0aGUgYnVuZGxlIGJ1dCBhcmUgbm90IGFsc28gbGlzdGVkIGhlcmUuICBNdWx0aXBsZSByZXBldGl0aW9ucyBhcmUgYWxsb3dlZCB0byBjYXRlciBmb3IgbWVyZ2VzIGFuZCBvdGhlciBzaXR1YXRpb25zIHdpdGggbXVsdGlwbGUgZm9jYWwgdGFyZ2V0cy5cclxuICAgKi9cclxuICBmb2N1cz86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBQZXJtYW5lbnQgbGluayB0byB0aGUgTWVzc2FnZURlZmluaXRpb24gZm9yIHRoaXMgbWVzc2FnZS5cclxuICAgKi9cclxuICBkZWZpbml0aW9uPzogZmhpci5GaGlyQ2Fub25pY2FsfHN0cmluZ3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgaGVhZGVyIGZvciBhIG1lc3NhZ2UgZXhjaGFuZ2UgdGhhdCBpcyBlaXRoZXIgcmVxdWVzdGluZyBvciByZXNwb25kaW5nIHRvIGFuIGFjdGlvbi4gIFRoZSByZWZlcmVuY2UocykgdGhhdCBhcmUgdGhlIHN1YmplY3Qgb2YgdGhlIGFjdGlvbiBhcyB3ZWxsIGFzIG90aGVyIGluZm9ybWF0aW9uIHJlbGF0ZWQgdG8gdGhlIGFjdGlvbiBhcmUgdHlwaWNhbGx5IHRyYW5zbWl0dGVkIGluIGEgYnVuZGxlIGluIHdoaWNoIHRoZSBNZXNzYWdlSGVhZGVyIHJlc291cmNlIGluc3RhbmNlIGlzIHRoZSBmaXJzdCByZXNvdXJjZSBpbiB0aGUgYnVuZGxlLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1lc3NhZ2VIZWFkZXIgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ01lc3NhZ2VIZWFkZXInO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNvdXJjZVR5cGU6IFwiTWVzc2FnZUhlYWRlclwiO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0aW1lIG9mIHRoZSBldmVudCB3aWxsIGJlIGZvdW5kIGluIHRoZSBmb2N1cyByZXNvdXJjZS4gVGhlIHRpbWUgb2YgdGhlIG1lc3NhZ2Ugd2lsbCBiZSBmb3VuZCBpbiBbQnVuZGxlLnRpbWVzdGFtcF0oYnVuZGxlLWRlZmluaXRpb25zLmh0bWwjQnVuZGxlLnRpbWVzdGFtcCkuXHJcbiAgICovXHJcbiAgcHVibGljIGV2ZW50OiAoZmhpci5Db2Rpbmd8Zmhpci5GaGlyVXJpKXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgTWVzc2FnZUhlYWRlci5ldmVudFt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c19ldmVudElzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIFRoZXJlIFNIT1VMRCBiZSBhdCBsZWFzdCBvbmUgZGVzdGluYXRpb24sIGJ1dCBpbiBzb21lIGNpcmN1bXN0YW5jZXMsIHRoZSBzb3VyY2Ugc3lzdGVtIGlzIHVuYXdhcmUgb2YgYW55IHBhcnRpY3VsYXIgZGVzdGluYXRpb24gc3lzdGVtLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZXN0aW5hdGlvbj86IGZoaXIuTWVzc2FnZUhlYWRlckRlc3RpbmF0aW9uW107XHJcbiAgLyoqXHJcbiAgICogVXNlIGNhc2UgaXMgZm9yIHdoZXJlIGEgKHRydXN0ZWQpIHNlbmRpbmcgc3lzdGVtIGlzIHJlc3BvbnNpYmxlIGZvciBtdWx0aXBsZSBvcmdhbml6YXRpb25zLCBhbmQgdGhlcmVmb3JlIGNhbm5vdCBkaWZmZXJlbnRpYXRlIGJhc2VkIG9uIHNvdXJjZSBlbmRwb2ludCAvIGF1dGhlbnRpY2F0aW9uIGFsb25lLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZW5kZXI/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVXN1YWxseSBvbmx5IGZvciB0aGUgcmVxdWVzdCBidXQgY2FuIGJlIHVzZWQgaW4gYSByZXNwb25zZS5cclxuICAgKi9cclxuICBwdWJsaWMgZW50ZXJlcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBVc3VhbGx5IG9ubHkgZm9yIHRoZSByZXF1ZXN0IGJ1dCBjYW4gYmUgdXNlZCBpbiBhIHJlc3BvbnNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhdXRob3I/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNvdXJjZSBhcHBsaWNhdGlvbiBmcm9tIHdoaWNoIHRoaXMgbWVzc2FnZSBvcmlnaW5hdGVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzb3VyY2U6IGZoaXIuTWVzc2FnZUhlYWRlclNvdXJjZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFVzdWFsbHkgb25seSBmb3IgdGhlIHJlcXVlc3QgYnV0IGNhbiBiZSB1c2VkIGluIGEgcmVzcG9uc2UuXHJcbiAgICovXHJcbiAgcHVibGljIHJlc3BvbnNpYmxlPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENvZGVkIGluZGljYXRpb24gb2YgdGhlIGNhdXNlIGZvciB0aGUgZXZlbnQgLSBpbmRpY2F0ZXMgIGEgcmVhc29uIGZvciB0aGUgb2NjdXJyZW5jZSBvZiB0aGUgZXZlbnQgdGhhdCBpcyBhIGZvY3VzIG9mIHRoaXMgbWVzc2FnZS5cclxuICAgKi9cclxuICBwdWJsaWMgcmVhc29uPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZm9ybWF0aW9uIGFib3V0IHRoZSBtZXNzYWdlIHRoYXQgdGhpcyBtZXNzYWdlIGlzIGEgcmVzcG9uc2UgdG8uICBPbmx5IHByZXNlbnQgaWYgdGhpcyBtZXNzYWdlIGlzIGEgcmVzcG9uc2UuXHJcbiAgICovXHJcbiAgcHVibGljIHJlc3BvbnNlPzogZmhpci5NZXNzYWdlSGVhZGVyUmVzcG9uc2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRhIGlzIGRlZmluZWQgd2hlcmUgdGhlIHRyYW5zYWN0aW9uIHR5cGUgaXMgZGVmaW5lZC4gVGhlIHRyYW5zYWN0aW9uIGRhdGEgaXMgYWx3YXlzIGluY2x1ZGVkIGluIHRoZSBidW5kbGUgdGhhdCBpcyB0aGUgZnVsbCBtZXNzYWdlLiAgT25seSB0aGUgcm9vdCByZXNvdXJjZSBpcyBzcGVjaWZpZWQuICBUaGUgcmVzb3VyY2VzIGl0IHJlZmVyZW5jZXMgc2hvdWxkIGJlIGNvbnRhaW5lZCBpbiB0aGUgYnVuZGxlIGJ1dCBhcmUgbm90IGFsc28gbGlzdGVkIGhlcmUuICBNdWx0aXBsZSByZXBldGl0aW9ucyBhcmUgYWxsb3dlZCB0byBjYXRlciBmb3IgbWVyZ2VzIGFuZCBvdGhlciBzaXR1YXRpb25zIHdpdGggbXVsdGlwbGUgZm9jYWwgdGFyZ2V0cy5cclxuICAgKi9cclxuICBwdWJsaWMgZm9jdXM/OiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIFBlcm1hbmVudCBsaW5rIHRvIHRoZSBNZXNzYWdlRGVmaW5pdGlvbiBmb3IgdGhpcyBtZXNzYWdlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZWZpbml0aW9uPzogZmhpci5GaGlyQ2Fub25pY2FsfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBNZXNzYWdlSGVhZGVyIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVzc2FnZUhlYWRlckFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdNZXNzYWdlSGVhZGVyJztcclxuICAgIGlmIChzb3VyY2VbJ2V2ZW50J10pIHsgdGhpcy5ldmVudCA9IHNvdXJjZS5ldmVudDsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydldmVudENvZGluZyddKSB7IHRoaXMuZXZlbnQgPSBuZXcgZmhpci5Db2Rpbmcoc291cmNlLmV2ZW50Q29kaW5nKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydldmVudFVyaSddKSB7IHRoaXMuZXZlbnQgPSBuZXcgZmhpci5GaGlyVXJpKHt2YWx1ZTogc291cmNlLmV2ZW50VXJpfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmV2ZW50ID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGVzdGluYXRpb24nXSkgeyB0aGlzLmRlc3RpbmF0aW9uID0gc291cmNlLmRlc3RpbmF0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuTWVzc2FnZUhlYWRlckRlc3RpbmF0aW9uKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZGVzdGluYXRpb24gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2VuZGVyJ10pIHsgdGhpcy5zZW5kZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnNlbmRlcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ2VudGVyZXInXSkgeyB0aGlzLmVudGVyZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmVudGVyZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWydhdXRob3InXSkgeyB0aGlzLmF1dGhvciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuYXV0aG9yKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc291cmNlJ10pIHsgdGhpcy5zb3VyY2UgPSBuZXcgZmhpci5NZXNzYWdlSGVhZGVyU291cmNlKHNvdXJjZS5zb3VyY2UpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zb3VyY2UgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydyZXNwb25zaWJsZSddKSB7IHRoaXMucmVzcG9uc2libGUgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnJlc3BvbnNpYmxlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVhc29uJ10pIHsgdGhpcy5yZWFzb24gPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnJlYXNvbik7IH1cclxuICAgIGlmIChzb3VyY2VbJ3Jlc3BvbnNlJ10pIHsgdGhpcy5yZXNwb25zZSA9IG5ldyBmaGlyLk1lc3NhZ2VIZWFkZXJSZXNwb25zZShzb3VyY2UucmVzcG9uc2UpOyB9XHJcbiAgICBpZiAoc291cmNlWydmb2N1cyddKSB7IHRoaXMuZm9jdXMgPSBzb3VyY2UuZm9jdXMubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5mb2N1cyA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydkZWZpbml0aW9uJ10pIHsgdGhpcy5kZWZpbml0aW9uID0gbmV3IGZoaXIuRmhpckNhbm9uaWNhbCh7dmFsdWU6IHNvdXJjZS5kZWZpbml0aW9ufSk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICghdGhpc1sncmVzb3VyY2VUeXBlJ10pIHtcclxuICAgICAgaXNzdWVzLnB1c2goeyBzZXZlcml0eTogJ2Vycm9yJywgY29kZTogJ3JlcXVpcmVkJywgIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSByZXNvdXJjZVR5cGU6XCJNZXNzYWdlSGVhZGVyXCIgZmhpcjogTWVzc2FnZUhlYWRlci5yZXNvdXJjZVR5cGU6XCJNZXNzYWdlSGVhZGVyXCInLCB9KTtcclxuICAgIH1cclxuICAgIGlmICghdGhpc1snZXZlbnQnXSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCh7IHNldmVyaXR5OiAnZXJyb3InLCBjb2RlOiAncmVxdWlyZWQnLCAgZGlhZ25vc3RpY3M6ICdNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IGV2ZW50OiBmaGlyOiBNZXNzYWdlSGVhZGVyLmV2ZW50W3hdOicsIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJkZXN0aW5hdGlvblwiXSkgeyB0aGlzLmRlc3RpbmF0aW9uLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJzZW5kZXJcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5zZW5kZXIuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiZW50ZXJlclwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmVudGVyZXIuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiYXV0aG9yXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuYXV0aG9yLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAoIXRoaXNbJ3NvdXJjZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsICBkaWFnbm9zdGljczogJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgc291cmNlOmZoaXIuTWVzc2FnZUhlYWRlclNvdXJjZSBmaGlyOiBNZXNzYWdlSGVhZGVyLnNvdXJjZTpzb3VyY2UnLCB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzW1wic291cmNlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc291cmNlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInJlc3BvbnNpYmxlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucmVzcG9uc2libGUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wicmVhc29uXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucmVhc29uLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInJlc3BvbnNlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucmVzcG9uc2UuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiZm9jdXNcIl0pIHsgdGhpcy5mb2N1cy5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wiZGVmaW5pdGlvblwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmRlZmluaXRpb24uZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbiJdfQ==