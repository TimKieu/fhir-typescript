// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: MessageHeader
import * as fhir from '../fhir.js';
// @ts-ignore
import { ResponseVsValidation } from '../fhirValueSets/ResponseVsValidation.js';
/**
 * There SHOULD be at least one destination, but in some circumstances, the source system is unaware of any particular destination system.
 */
export class MessageHeaderDestination extends fhir.BackboneElement {
    /**
     * Default constructor for MessageHeaderDestination - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['name']) {
            this.name = new fhir.FhirString({ value: source.name });
        }
        if (source['_name']) {
            if (this.name) {
                this.name.addExtendedProperties(source._name);
            }
            else {
                this.name = new fhir.FhirString(source._name);
            }
        }
        if (source['target']) {
            this.target = new fhir.Reference(source.target);
        }
        if (source['endpoint']) {
            this.endpoint = new fhir.FhirUrl({ value: source.endpoint });
        }
        else {
            this.endpoint = null;
        }
        if (source['_endpoint']) {
            if (this.endpoint) {
                this.endpoint.addExtendedProperties(source._endpoint);
            }
            else {
                this.endpoint = new fhir.FhirUrl(source._endpoint);
            }
        }
        if (source['receiver']) {
            this.receiver = new fhir.Reference(source.receiver);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'MessageHeader.destination';
        }
        this.vOptS('name', expression);
        this.vOptS('target', expression);
        this.vReqS('endpoint', expression);
        this.vOptS('receiver', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MessageHeaderDestination._fts_dataType = 'MessageHeaderDestination';
/**
 * The source application from which this message originated.
 */
export class MessageHeaderSource extends fhir.BackboneElement {
    /**
     * Default constructor for MessageHeaderSource - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['name']) {
            this.name = new fhir.FhirString({ value: source.name });
        }
        if (source['_name']) {
            if (this.name) {
                this.name.addExtendedProperties(source._name);
            }
            else {
                this.name = new fhir.FhirString(source._name);
            }
        }
        if (source['software']) {
            this.software = new fhir.FhirString({ value: source.software });
        }
        if (source['_software']) {
            if (this.software) {
                this.software.addExtendedProperties(source._software);
            }
            else {
                this.software = new fhir.FhirString(source._software);
            }
        }
        if (source['version']) {
            this.version = new fhir.FhirString({ value: source.version });
        }
        if (source['_version']) {
            if (this.version) {
                this.version.addExtendedProperties(source._version);
            }
            else {
                this.version = new fhir.FhirString(source._version);
            }
        }
        if (source['contact']) {
            this.contact = new fhir.ContactPoint(source.contact);
        }
        if (source['endpoint']) {
            this.endpoint = new fhir.FhirUrl({ value: source.endpoint });
        }
        else {
            this.endpoint = null;
        }
        if (source['_endpoint']) {
            if (this.endpoint) {
                this.endpoint.addExtendedProperties(source._endpoint);
            }
            else {
                this.endpoint = new fhir.FhirUrl(source._endpoint);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'MessageHeader.source';
        }
        this.vOptS('name', expression);
        this.vOptS('software', expression);
        this.vOptS('version', expression);
        this.vOptS('contact', expression);
        this.vReqS('endpoint', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MessageHeaderSource._fts_dataType = 'MessageHeaderSource';
/**
 * Information about the message that this message is a response to.  Only present if this message is a response.
 */
export class MessageHeaderResponse extends fhir.BackboneElement {
    /**
     * Default constructor for MessageHeaderResponse - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['identifier']) {
            this.identifier = new fhir.FhirId({ value: source.identifier });
        }
        else {
            this.identifier = null;
        }
        if (source['_identifier']) {
            if (this.identifier) {
                this.identifier.addExtendedProperties(source._identifier);
            }
            else {
                this.identifier = new fhir.FhirId(source._identifier);
            }
        }
        if (source['code']) {
            this.code = new fhir.FhirCode({ value: source.code });
        }
        else {
            this.code = null;
        }
        if (source['_code']) {
            if (this.code) {
                this.code.addExtendedProperties(source._code);
            }
            else {
                this.code = new fhir.FhirCode(source._code);
            }
        }
        if (source['details']) {
            this.details = new fhir.Reference(source.details);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'MessageHeader.response';
        }
        this.vReqS('identifier', expression);
        this.vReqSV('code', expression, 'Response', ResponseVsValidation, 'r');
        this.vOptS('details', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MessageHeaderResponse._fts_dataType = 'MessageHeaderResponse';
/**
 * The header for a message exchange that is either requesting or responding to an action.  The reference(s) that are the subject of the action as well as other information related to the action are typically transmitted in a bundle in which the MessageHeader resource instance is the first resource in the bundle.
 */
export class MessageHeader extends fhir.DomainResource {
    /**
     * Default constructor for MessageHeader - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'MessageHeader';
        if (source['event']) {
            this.event = source.event;
        }
        else if (source['eventCoding']) {
            this.event = new fhir.Coding(source.eventCoding);
        }
        else if (source['eventUri']) {
            this.event = new fhir.FhirUri({ value: source.eventUri });
        }
        else {
            this.event = null;
        }
        if (source['destination']) {
            this.destination = source.destination.map((x) => new fhir.MessageHeaderDestination(x));
        }
        else {
            this.destination = [];
        }
        if (source['sender']) {
            this.sender = new fhir.Reference(source.sender);
        }
        if (source['enterer']) {
            this.enterer = new fhir.Reference(source.enterer);
        }
        if (source['author']) {
            this.author = new fhir.Reference(source.author);
        }
        if (source['source']) {
            this.source = new fhir.MessageHeaderSource(source.source);
        }
        else {
            this.source = null;
        }
        if (source['responsible']) {
            this.responsible = new fhir.Reference(source.responsible);
        }
        if (source['reason']) {
            this.reason = new fhir.CodeableConcept(source.reason);
        }
        if (source['response']) {
            this.response = new fhir.MessageHeaderResponse(source.response);
        }
        if (source['focus']) {
            this.focus = source.focus.map((x) => new fhir.Reference(x));
        }
        else {
            this.focus = [];
        }
        if (source['definition']) {
            this.definition = new fhir.FhirCanonical({ value: source.definition });
        }
        if (source['_definition']) {
            if (this.definition) {
                this.definition.addExtendedProperties(source._definition);
            }
            else {
                this.definition = new fhir.FhirCanonical(source._definition);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(expression = '') {
        let issues = super.doModelValidation(expression);
        if (expression === '') {
            expression = 'MessageHeader';
        }
        this.vReqS('resourceType', expression);
        this.vReqS('event', expression);
        this.vOptA('destination', expression);
        this.vOptS('sender', expression);
        this.vOptS('enterer', expression);
        this.vOptS('author', expression);
        this.vReqS('source', expression);
        this.vOptS('responsible', expression);
        this.vOptS('reason', expression);
        this.vOptS('response', expression);
        this.vOptA('focus', expression);
        this.vOptS('definition', expression);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MessageHeader._fts_dataType = 'MessageHeader';
/**
 * Internal flag to properly serialize choice-type element MessageHeader.event[x]
 */
MessageHeader._fts_eventIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVzc2FnZUhlYWRlci5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvTWVzc2FnZUhlYWRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQywrQkFBK0I7QUFFL0IsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFJbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLDBDQUEwQyxDQUFDO0FBbUNoRjs7R0FFRztBQUNILE1BQU0sT0FBTyx3QkFBeUIsU0FBUSxJQUFJLENBQUMsZUFBZTtJQXFCaEU7O09BRUc7SUFDSCxZQUFZLFNBQStDLEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQ3JHLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsSUFBSSxFQUFDLENBQUMsQ0FBQztTQUFFO1FBQzlFLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQ25CLElBQUksSUFBSSxDQUFDLElBQUksRUFBRTtnQkFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxLQUFNLENBQUMsQ0FBQzthQUFFO2lCQUM3RDtnQkFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsS0FBcUMsQ0FBQyxDQUFDO2FBQUU7U0FDeEY7UUFDRCxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUFFO1FBQzFFLElBQUks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LENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUM5QixJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUNwQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUMvQixJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUNoQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUMvQixJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUMvQixJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUNwQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUMvQixJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUNqQyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUM5QixJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksRUFBQyxVQUFVLENBQUMsQ0FBQTtRQUNuQyxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQXZHRDs7R0FFRztBQUM2QiwyQkFBYSxHQUFVLGVBQWUsQ0FBQztBQVN2RTs7R0FFRztBQUN1QixnQ0FBa0IsR0FBUSxJQUFJLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjQuY29yZSB2ZXJzaW9uOiA0LjAuMVxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IE1lc3NhZ2VIZWFkZXJcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFJlc3BvbnNlQ29kZXMsICBSZXNwb25zZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9SZXNwb25zZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBSZXNwb25zZVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUmVzcG9uc2VWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE1lc3NhZ2VSZWFzb25FbmNvdW50ZXJDb2RlcywgIE1lc3NhZ2VSZWFzb25FbmNvdW50ZXJDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTWVzc2FnZVJlYXNvbkVuY291bnRlckNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBNZXNzYWdlUmVhc29uRW5jb3VudGVyVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9NZXNzYWdlUmVhc29uRW5jb3VudGVyVnNWYWxpZGF0aW9uLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lc3NhZ2VIZWFkZXJEZXN0aW5hdGlvbiB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlSGVhZGVyRGVzdGluYXRpb25BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBIdW1hbi1yZWFkYWJsZSBuYW1lIGZvciB0aGUgdGFyZ2V0IHN5c3RlbS5cclxuICAgKi9cclxuICBuYW1lPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE1lc3NhZ2VIZWFkZXIuZGVzdGluYXRpb24ubmFtZVxyXG4gICAqL1xyXG4gIF9uYW1lPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHRoZSB0YXJnZXQgZW5kIHN5c3RlbSBpbiBzaXR1YXRpb25zIHdoZXJlIHRoZSBpbml0aWFsIG1lc3NhZ2UgdHJhbnNtaXNzaW9uIGlzIHRvIGFuIGludGVybWVkaWFyeSBzeXN0ZW0uXHJcbiAgICovXHJcbiAgdGFyZ2V0PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgaWQgbWF5IGJlIGEgbm9uLXJlc29sdmFibGUgVVJJIGZvciBzeXN0ZW1zIHRoYXQgZG8gbm90IHVzZSBzdGFuZGFyZCBuZXR3b3JrLWJhc2VkIGFkZHJlc3Nlcy5cclxuICAgKi9cclxuICBlbmRwb2ludDogZmhpci5GaGlyVXJsfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE1lc3NhZ2VIZWFkZXIuZGVzdGluYXRpb24uZW5kcG9pbnRcclxuICAgKi9cclxuICBfZW5kcG9pbnQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEFsbG93cyBkYXRhIGNvbnZleWVkIGJ5IGEgbWVzc2FnZSB0byBiZSBhZGRyZXNzZWQgdG8gYSBwYXJ0aWN1bGFyIHBlcnNvbiBvciBkZXBhcnRtZW50IHdoZW4gcm91dGluZyB0byBhIHNwZWNpZmljIGFwcGxpY2F0aW9uIGlzbid0IHN1ZmZpY2llbnQuXHJcbiAgICovXHJcbiAgcmVjZWl2ZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlcmUgU0hPVUxEIGJlIGF0IGxlYXN0IG9uZSBkZXN0aW5hdGlvbiwgYnV0IGluIHNvbWUgY2lyY3Vtc3RhbmNlcywgdGhlIHNvdXJjZSBzeXN0ZW0gaXMgdW5hd2FyZSBvZiBhbnkgcGFydGljdWxhciBkZXN0aW5hdGlvbiBzeXN0ZW0uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVzc2FnZUhlYWRlckRlc3RpbmF0aW9uIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVzc2FnZUhlYWRlckRlc3RpbmF0aW9uJztcclxuICAvKipcclxuICAgKiBIdW1hbi1yZWFkYWJsZSBuYW1lIGZvciB0aGUgdGFyZ2V0IHN5c3RlbS5cclxuICAgKi9cclxuICBwdWJsaWMgbmFtZT86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgdGFyZ2V0IGVuZCBzeXN0ZW0gaW4gc2l0dWF0aW9ucyB3aGVyZSB0aGUgaW5pdGlhbCBtZXNzYWdlIHRyYW5zbWlzc2lvbiBpcyB0byBhbiBpbnRlcm1lZGlhcnkgc3lzdGVtLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0YXJnZXQ/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGlkIG1heSBiZSBhIG5vbi1yZXNvbHZhYmxlIFVSSSBmb3Igc3lzdGVtcyB0aGF0IGRvIG5vdCB1c2Ugc3RhbmRhcmQgbmV0d29yay1iYXNlZCBhZGRyZXNzZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGVuZHBvaW50OiBmaGlyLkZoaXJVcmx8bnVsbDtcclxuICAvKipcclxuICAgKiBBbGxvd3MgZGF0YSBjb252ZXllZCBieSBhIG1lc3NhZ2UgdG8gYmUgYWRkcmVzc2VkIHRvIGEgcGFydGljdWxhciBwZXJzb24gb3IgZGVwYXJ0bWVudCB3aGVuIHJvdXRpbmcgdG8gYSBzcGVjaWZpYyBhcHBsaWNhdGlvbiBpc24ndCBzdWZmaWNpZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWNlaXZlcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBNZXNzYWdlSGVhZGVyRGVzdGluYXRpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxNZXNzYWdlSGVhZGVyRGVzdGluYXRpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnbmFtZSddKSB7IHRoaXMubmFtZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UubmFtZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfbmFtZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLm5hbWUpIHsgdGhpcy5uYW1lLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX25hbWUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5uYW1lID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX25hbWUgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3RhcmdldCddKSB7IHRoaXMudGFyZ2V0ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS50YXJnZXQpOyB9XHJcbiAgICBpZiAoc291cmNlWydlbmRwb2ludCddKSB7IHRoaXMuZW5kcG9pbnQgPSBuZXcgZmhpci5GaGlyVXJsKHt2YWx1ZTogc291cmNlLmVuZHBvaW50fSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmVuZHBvaW50ID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2VuZHBvaW50J10pIHtcclxuICAgICAgaWYgKHRoaXMuZW5kcG9pbnQpIHsgdGhpcy5lbmRwb2ludC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9lbmRwb2ludCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmVuZHBvaW50ID0gbmV3IGZoaXIuRmhpclVybChzb3VyY2UuX2VuZHBvaW50IGFzIFBhcnRpYWw8Zmhpci5GaGlyVXJsQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydyZWNlaXZlciddKSB7IHRoaXMucmVjZWl2ZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnJlY2VpdmVyKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdNZXNzYWdlSGVhZGVyLmRlc3RpbmF0aW9uJyB9XHJcbiAgICB0aGlzLnZPcHRTKCduYW1lJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygndGFyZ2V0JyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52UmVxUygnZW5kcG9pbnQnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCdyZWNlaXZlcicsZXhwcmVzc2lvbilcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBNZXNzYWdlSGVhZGVyU291cmNlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VIZWFkZXJTb3VyY2VBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBIdW1hbi1yZWFkYWJsZSBuYW1lIGZvciB0aGUgc291cmNlIHN5c3RlbS5cclxuICAgKi9cclxuICBuYW1lPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE1lc3NhZ2VIZWFkZXIuc291cmNlLm5hbWVcclxuICAgKi9cclxuICBfbmFtZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogTWF5IGluY2x1ZGUgY29uZmlndXJhdGlvbiBvciBvdGhlciBpbmZvcm1hdGlvbiB1c2VmdWwgaW4gZGVidWdnaW5nLlxyXG4gICAqL1xyXG4gIHNvZnR3YXJlPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE1lc3NhZ2VIZWFkZXIuc291cmNlLnNvZnR3YXJlXHJcbiAgICovXHJcbiAgX3NvZnR3YXJlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBDYW4gY29udmV5IHZlcnNpb25zIG9mIG11bHRpcGxlIHN5c3RlbXMgaW4gc2l0dWF0aW9ucyB3aGVyZSBhIG1lc3NhZ2UgcGFzc2VzIHRocm91Z2ggbXVsdGlwbGUgaGFuZHMuXHJcbiAgICovXHJcbiAgdmVyc2lvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBNZXNzYWdlSGVhZGVyLnNvdXJjZS52ZXJzaW9uXHJcbiAgICovXHJcbiAgX3ZlcnNpb24/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEFuIGUtbWFpbCwgcGhvbmUsIHdlYnNpdGUgb3Igb3RoZXIgY29udGFjdCBwb2ludCB0byB1c2UgdG8gcmVzb2x2ZSBpc3N1ZXMgd2l0aCBtZXNzYWdlIGNvbW11bmljYXRpb25zLlxyXG4gICAqL1xyXG4gIGNvbnRhY3Q/OiBmaGlyLkNvbnRhY3RQb2ludEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpZCBtYXkgYmUgYSBub24tcmVzb2x2YWJsZSBVUkkgZm9yIHN5c3RlbXMgdGhhdCBkbyBub3QgdXNlIHN0YW5kYXJkIG5ldHdvcmstYmFzZWQgYWRkcmVzc2VzLlxyXG4gICAqL1xyXG4gIGVuZHBvaW50OiBmaGlyLkZoaXJVcmx8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogTWVzc2FnZUhlYWRlci5zb3VyY2UuZW5kcG9pbnRcclxuICAgKi9cclxuICBfZW5kcG9pbnQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlIHNvdXJjZSBhcHBsaWNhdGlvbiBmcm9tIHdoaWNoIHRoaXMgbWVzc2FnZSBvcmlnaW5hdGVkLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1lc3NhZ2VIZWFkZXJTb3VyY2UgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdNZXNzYWdlSGVhZGVyU291cmNlJztcclxuICAvKipcclxuICAgKiBIdW1hbi1yZWFkYWJsZSBuYW1lIGZvciB0aGUgc291cmNlIHN5c3RlbS5cclxuICAgKi9cclxuICBwdWJsaWMgbmFtZT86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTWF5IGluY2x1ZGUgY29uZmlndXJhdGlvbiBvciBvdGhlciBpbmZvcm1hdGlvbiB1c2VmdWwgaW4gZGVidWdnaW5nLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzb2Z0d2FyZT86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ2FuIGNvbnZleSB2ZXJzaW9ucyBvZiBtdWx0aXBsZSBzeXN0ZW1zIGluIHNpdHVhdGlvbnMgd2hlcmUgYSBtZXNzYWdlIHBhc3NlcyB0aHJvdWdoIG11bHRpcGxlIGhhbmRzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB2ZXJzaW9uPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBbiBlLW1haWwsIHBob25lLCB3ZWJzaXRlIG9yIG90aGVyIGNvbnRhY3QgcG9pbnQgdG8gdXNlIHRvIHJlc29sdmUgaXNzdWVzIHdpdGggbWVzc2FnZSBjb21tdW5pY2F0aW9ucy5cclxuICAgKi9cclxuICBwdWJsaWMgY29udGFjdD86IGZoaXIuQ29udGFjdFBvaW50fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgaWQgbWF5IGJlIGEgbm9uLXJlc29sdmFibGUgVVJJIGZvciBzeXN0ZW1zIHRoYXQgZG8gbm90IHVzZSBzdGFuZGFyZCBuZXR3b3JrLWJhc2VkIGFkZHJlc3Nlcy5cclxuICAgKi9cclxuICBwdWJsaWMgZW5kcG9pbnQ6IGZoaXIuRmhpclVybHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE1lc3NhZ2VIZWFkZXJTb3VyY2UgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxNZXNzYWdlSGVhZGVyU291cmNlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ25hbWUnXSkgeyB0aGlzLm5hbWUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLm5hbWV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX25hbWUnXSkge1xyXG4gICAgICBpZiAodGhpcy5uYW1lKSB7IHRoaXMubmFtZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9uYW1lISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubmFtZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9uYW1lIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydzb2Z0d2FyZSddKSB7IHRoaXMuc29mdHdhcmUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnNvZnR3YXJlfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zb2Z0d2FyZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnNvZnR3YXJlKSB7IHRoaXMuc29mdHdhcmUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc29mdHdhcmUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zb2Z0d2FyZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9zb2Z0d2FyZSBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsndmVyc2lvbiddKSB7IHRoaXMudmVyc2lvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UudmVyc2lvbn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfdmVyc2lvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLnZlcnNpb24pIHsgdGhpcy52ZXJzaW9uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3ZlcnNpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy52ZXJzaW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3ZlcnNpb24gYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2NvbnRhY3QnXSkgeyB0aGlzLmNvbnRhY3QgPSBuZXcgZmhpci5Db250YWN0UG9pbnQoc291cmNlLmNvbnRhY3QpOyB9XHJcbiAgICBpZiAoc291cmNlWydlbmRwb2ludCddKSB7IHRoaXMuZW5kcG9pbnQgPSBuZXcgZmhpci5GaGlyVXJsKHt2YWx1ZTogc291cmNlLmVuZHBvaW50fSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmVuZHBvaW50ID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2VuZHBvaW50J10pIHtcclxuICAgICAgaWYgKHRoaXMuZW5kcG9pbnQpIHsgdGhpcy5lbmRwb2ludC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9lbmRwb2ludCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmVuZHBvaW50ID0gbmV3IGZoaXIuRmhpclVybChzb3VyY2UuX2VuZHBvaW50IGFzIFBhcnRpYWw8Zmhpci5GaGlyVXJsQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKTtcclxuICAgIGlmIChleHByZXNzaW9uID09PSAnJykgeyBleHByZXNzaW9uID0gJ01lc3NhZ2VIZWFkZXIuc291cmNlJyB9XHJcbiAgICB0aGlzLnZPcHRTKCduYW1lJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0Uygnc29mdHdhcmUnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRTKCd2ZXJzaW9uJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnY29udGFjdCcsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudlJlcVMoJ2VuZHBvaW50JyxleHByZXNzaW9uKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lc3NhZ2VIZWFkZXJSZXNwb25zZSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlSGVhZGVyUmVzcG9uc2VBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgTWVzc2FnZUhlYWRlci5pZCBvZiB0aGUgbWVzc2FnZSB0byB3aGljaCB0aGlzIG1lc3NhZ2UgaXMgYSByZXNwb25zZS5cclxuICAgKi9cclxuICBpZGVudGlmaWVyOiBmaGlyLkZoaXJJZHxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBNZXNzYWdlSGVhZGVyLnJlc3BvbnNlLmlkZW50aWZpZXJcclxuICAgKi9cclxuICBfaWRlbnRpZmllcj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBhIGdlbmVyaWMgcmVzcG9uc2UgdG8gdGhlIHJlcXVlc3QgbWVzc2FnZS4gU3BlY2lmaWMgZGF0YSBmb3IgdGhlIHJlc3BvbnNlIHdpbGwgYmUgZm91bmQgaW4gTWVzc2FnZUhlYWRlci5mb2N1cy5cclxuICAgKi9cclxuICBjb2RlOiBmaGlyLkZoaXJDb2RlPFJlc3BvbnNlQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE1lc3NhZ2VIZWFkZXIucmVzcG9uc2UuY29kZVxyXG4gICAqL1xyXG4gIF9jb2RlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGlzIFNIQUxMIGJlIGNvbnRhaW5lZCBpbiB0aGUgYnVuZGxlLiBJZiBhbnkgb2YgdGhlIGlzc3VlcyBhcmUgZXJyb3JzLCB0aGUgcmVzcG9uc2UgY29kZSBTSEFMTCBiZSBhbiBlcnJvci5cclxuICAgKi9cclxuICBkZXRhaWxzPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEluZm9ybWF0aW9uIGFib3V0IHRoZSBtZXNzYWdlIHRoYXQgdGhpcyBtZXNzYWdlIGlzIGEgcmVzcG9uc2UgdG8uICBPbmx5IHByZXNlbnQgaWYgdGhpcyBtZXNzYWdlIGlzIGEgcmVzcG9uc2UuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVzc2FnZUhlYWRlclJlc3BvbnNlIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVzc2FnZUhlYWRlclJlc3BvbnNlJztcclxuICAvKipcclxuICAgKiBUaGUgTWVzc2FnZUhlYWRlci5pZCBvZiB0aGUgbWVzc2FnZSB0byB3aGljaCB0aGlzIG1lc3NhZ2UgaXMgYSByZXNwb25zZS5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcjogZmhpci5GaGlySWR8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGlzIGlzIGEgZ2VuZXJpYyByZXNwb25zZSB0byB0aGUgcmVxdWVzdCBtZXNzYWdlLiBTcGVjaWZpYyBkYXRhIGZvciB0aGUgcmVzcG9uc2Ugd2lsbCBiZSBmb3VuZCBpbiBNZXNzYWdlSGVhZGVyLmZvY3VzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb2RlOiBmaGlyLkZoaXJDb2RlPFJlc3BvbnNlQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBTSEFMTCBiZSBjb250YWluZWQgaW4gdGhlIGJ1bmRsZS4gSWYgYW55IG9mIHRoZSBpc3N1ZXMgYXJlIGVycm9ycywgdGhlIHJlc3BvbnNlIGNvZGUgU0hBTEwgYmUgYW4gZXJyb3IuXHJcbiAgICovXHJcbiAgcHVibGljIGRldGFpbHM/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgTWVzc2FnZUhlYWRlclJlc3BvbnNlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVzc2FnZUhlYWRlclJlc3BvbnNlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBuZXcgZmhpci5GaGlySWQoe3ZhbHVlOiBzb3VyY2UuaWRlbnRpZmllcn0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pZGVudGlmaWVyID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2lkZW50aWZpZXInXSkge1xyXG4gICAgICBpZiAodGhpcy5pZGVudGlmaWVyKSB7IHRoaXMuaWRlbnRpZmllci5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9pZGVudGlmaWVyISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuaWRlbnRpZmllciA9IG5ldyBmaGlyLkZoaXJJZChzb3VyY2UuX2lkZW50aWZpZXIgYXMgUGFydGlhbDxmaGlyLkZoaXJJZEFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkZoaXJDb2RlPFJlc3BvbnNlQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLmNvZGV9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY29kZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19jb2RlJ10pIHtcclxuICAgICAgaWYgKHRoaXMuY29kZSkgeyB0aGlzLmNvZGUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fY29kZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmNvZGUgPSBuZXcgZmhpci5GaGlyQ29kZTxSZXNwb25zZUNvZGVUeXBlPihzb3VyY2UuX2NvZGUgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2RldGFpbHMnXSkgeyB0aGlzLmRldGFpbHMgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmRldGFpbHMpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHByZXNzaW9uKTtcclxuICAgIGlmIChleHByZXNzaW9uID09PSAnJykgeyBleHByZXNzaW9uID0gJ01lc3NhZ2VIZWFkZXIucmVzcG9uc2UnIH1cclxuICAgIHRoaXMudlJlcVMoJ2lkZW50aWZpZXInLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZSZXFTVignY29kZScsZXhwcmVzc2lvbiwnUmVzcG9uc2UnLFJlc3BvbnNlVnNWYWxpZGF0aW9uLCdyJylcclxuICAgIHRoaXMudk9wdFMoJ2RldGFpbHMnLGV4cHJlc3Npb24pXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgTWVzc2FnZUhlYWRlciB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlSGVhZGVyQXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiTWVzc2FnZUhlYWRlclwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdGltZSBvZiB0aGUgZXZlbnQgd2lsbCBiZSBmb3VuZCBpbiB0aGUgZm9jdXMgcmVzb3VyY2UuIFRoZSB0aW1lIG9mIHRoZSBtZXNzYWdlIHdpbGwgYmUgZm91bmQgaW4gW0J1bmRsZS50aW1lc3RhbXBdKGJ1bmRsZS1kZWZpbml0aW9ucy5odG1sI0J1bmRsZS50aW1lc3RhbXApLlxyXG4gICAqL1xyXG4gIGV2ZW50PzogZmhpci5Db2Rpbmd8Zmhpci5GaGlyVXJpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdGltZSBvZiB0aGUgZXZlbnQgd2lsbCBiZSBmb3VuZCBpbiB0aGUgZm9jdXMgcmVzb3VyY2UuIFRoZSB0aW1lIG9mIHRoZSBtZXNzYWdlIHdpbGwgYmUgZm91bmQgaW4gW0J1bmRsZS50aW1lc3RhbXBdKGJ1bmRsZS1kZWZpbml0aW9ucy5odG1sI0J1bmRsZS50aW1lc3RhbXApLlxyXG4gICAqL1xyXG4gIGV2ZW50Q29kaW5nPzogZmhpci5Db2RpbmdBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdGltZSBvZiB0aGUgZXZlbnQgd2lsbCBiZSBmb3VuZCBpbiB0aGUgZm9jdXMgcmVzb3VyY2UuIFRoZSB0aW1lIG9mIHRoZSBtZXNzYWdlIHdpbGwgYmUgZm91bmQgaW4gW0J1bmRsZS50aW1lc3RhbXBdKGJ1bmRsZS1kZWZpbml0aW9ucy5odG1sI0J1bmRsZS50aW1lc3RhbXApLlxyXG4gICAqL1xyXG4gIGV2ZW50VXJpPzogZmhpci5GaGlyVXJpfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlcmUgU0hPVUxEIGJlIGF0IGxlYXN0IG9uZSBkZXN0aW5hdGlvbiwgYnV0IGluIHNvbWUgY2lyY3Vtc3RhbmNlcywgdGhlIHNvdXJjZSBzeXN0ZW0gaXMgdW5hd2FyZSBvZiBhbnkgcGFydGljdWxhciBkZXN0aW5hdGlvbiBzeXN0ZW0uXHJcbiAgICovXHJcbiAgZGVzdGluYXRpb24/OiBmaGlyLk1lc3NhZ2VIZWFkZXJEZXN0aW5hdGlvbkFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVXNlIGNhc2UgaXMgZm9yIHdoZXJlIGEgKHRydXN0ZWQpIHNlbmRpbmcgc3lzdGVtIGlzIHJlc3BvbnNpYmxlIGZvciBtdWx0aXBsZSBvcmdhbml6YXRpb25zLCBhbmQgdGhlcmVmb3JlIGNhbm5vdCBkaWZmZXJlbnRpYXRlIGJhc2VkIG9uIHNvdXJjZSBlbmRwb2ludCAvIGF1dGhlbnRpY2F0aW9uIGFsb25lLlxyXG4gICAqL1xyXG4gIHNlbmRlcj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVXN1YWxseSBvbmx5IGZvciB0aGUgcmVxdWVzdCBidXQgY2FuIGJlIHVzZWQgaW4gYSByZXNwb25zZS5cclxuICAgKi9cclxuICBlbnRlcmVyPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBVc3VhbGx5IG9ubHkgZm9yIHRoZSByZXF1ZXN0IGJ1dCBjYW4gYmUgdXNlZCBpbiBhIHJlc3BvbnNlLlxyXG4gICAqL1xyXG4gIGF1dGhvcj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNvdXJjZSBhcHBsaWNhdGlvbiBmcm9tIHdoaWNoIHRoaXMgbWVzc2FnZSBvcmlnaW5hdGVkLlxyXG4gICAqL1xyXG4gIHNvdXJjZTogZmhpci5NZXNzYWdlSGVhZGVyU291cmNlQXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFVzdWFsbHkgb25seSBmb3IgdGhlIHJlcXVlc3QgYnV0IGNhbiBiZSB1c2VkIGluIGEgcmVzcG9uc2UuXHJcbiAgICovXHJcbiAgcmVzcG9uc2libGU/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENvZGVkIGluZGljYXRpb24gb2YgdGhlIGNhdXNlIGZvciB0aGUgZXZlbnQgLSBpbmRpY2F0ZXMgIGEgcmVhc29uIGZvciB0aGUgb2NjdXJyZW5jZSBvZiB0aGUgZXZlbnQgdGhhdCBpcyBhIGZvY3VzIG9mIHRoaXMgbWVzc2FnZS5cclxuICAgKi9cclxuICByZWFzb24/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZm9ybWF0aW9uIGFib3V0IHRoZSBtZXNzYWdlIHRoYXQgdGhpcyBtZXNzYWdlIGlzIGEgcmVzcG9uc2UgdG8uICBPbmx5IHByZXNlbnQgaWYgdGhpcyBtZXNzYWdlIGlzIGEgcmVzcG9uc2UuXHJcbiAgICovXHJcbiAgcmVzcG9uc2U/OiBmaGlyLk1lc3NhZ2VIZWFkZXJSZXNwb25zZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRhIGlzIGRlZmluZWQgd2hlcmUgdGhlIHRyYW5zYWN0aW9uIHR5cGUgaXMgZGVmaW5lZC4gVGhlIHRyYW5zYWN0aW9uIGRhdGEgaXMgYWx3YXlzIGluY2x1ZGVkIGluIHRoZSBidW5kbGUgdGhhdCBpcyB0aGUgZnVsbCBtZXNzYWdlLiAgT25seSB0aGUgcm9vdCByZXNvdXJjZSBpcyBzcGVjaWZpZWQuICBUaGUgcmVzb3VyY2VzIGl0IHJlZmVyZW5jZXMgc2hvdWxkIGJlIGNvbnRhaW5lZCBpbiB0aGUgYnVuZGxlIGJ1dCBhcmUgbm90IGFsc28gbGlzdGVkIGhlcmUuICBNdWx0aXBsZSByZXBldGl0aW9ucyBhcmUgYWxsb3dlZCB0byBjYXRlciBmb3IgbWVyZ2VzIGFuZCBvdGhlciBzaXR1YXRpb25zIHdpdGggbXVsdGlwbGUgZm9jYWwgdGFyZ2V0cy5cclxuICAgKi9cclxuICBmb2N1cz86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBQZXJtYW5lbnQgbGluayB0byB0aGUgTWVzc2FnZURlZmluaXRpb24gZm9yIHRoaXMgbWVzc2FnZS5cclxuICAgKi9cclxuICBkZWZpbml0aW9uPzogZmhpci5GaGlyQ2Fub25pY2FsfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE1lc3NhZ2VIZWFkZXIuZGVmaW5pdGlvblxyXG4gICAqL1xyXG4gIF9kZWZpbml0aW9uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBoZWFkZXIgZm9yIGEgbWVzc2FnZSBleGNoYW5nZSB0aGF0IGlzIGVpdGhlciByZXF1ZXN0aW5nIG9yIHJlc3BvbmRpbmcgdG8gYW4gYWN0aW9uLiAgVGhlIHJlZmVyZW5jZShzKSB0aGF0IGFyZSB0aGUgc3ViamVjdCBvZiB0aGUgYWN0aW9uIGFzIHdlbGwgYXMgb3RoZXIgaW5mb3JtYXRpb24gcmVsYXRlZCB0byB0aGUgYWN0aW9uIGFyZSB0eXBpY2FsbHkgdHJhbnNtaXR0ZWQgaW4gYSBidW5kbGUgaW4gd2hpY2ggdGhlIE1lc3NhZ2VIZWFkZXIgcmVzb3VyY2UgaW5zdGFuY2UgaXMgdGhlIGZpcnN0IHJlc291cmNlIGluIHRoZSBidW5kbGUuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVzc2FnZUhlYWRlciBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVzc2FnZUhlYWRlcic7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJNZXNzYWdlSGVhZGVyXCI7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRpbWUgb2YgdGhlIGV2ZW50IHdpbGwgYmUgZm91bmQgaW4gdGhlIGZvY3VzIHJlc291cmNlLiBUaGUgdGltZSBvZiB0aGUgbWVzc2FnZSB3aWxsIGJlIGZvdW5kIGluIFtCdW5kbGUudGltZXN0YW1wXShidW5kbGUtZGVmaW5pdGlvbnMuaHRtbCNCdW5kbGUudGltZXN0YW1wKS5cclxuICAgKi9cclxuICBwdWJsaWMgZXZlbnQ6IChmaGlyLkNvZGluZ3xmaGlyLkZoaXJVcmkpfG51bGw7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBNZXNzYWdlSGVhZGVyLmV2ZW50W3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX2V2ZW50SXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogVGhlcmUgU0hPVUxEIGJlIGF0IGxlYXN0IG9uZSBkZXN0aW5hdGlvbiwgYnV0IGluIHNvbWUgY2lyY3Vtc3RhbmNlcywgdGhlIHNvdXJjZSBzeXN0ZW0gaXMgdW5hd2FyZSBvZiBhbnkgcGFydGljdWxhciBkZXN0aW5hdGlvbiBzeXN0ZW0uXHJcbiAgICovXHJcbiAgcHVibGljIGRlc3RpbmF0aW9uOiBmaGlyLk1lc3NhZ2VIZWFkZXJEZXN0aW5hdGlvbltdO1xyXG4gIC8qKlxyXG4gICAqIFVzZSBjYXNlIGlzIGZvciB3aGVyZSBhICh0cnVzdGVkKSBzZW5kaW5nIHN5c3RlbSBpcyByZXNwb25zaWJsZSBmb3IgbXVsdGlwbGUgb3JnYW5pemF0aW9ucywgYW5kIHRoZXJlZm9yZSBjYW5ub3QgZGlmZmVyZW50aWF0ZSBiYXNlZCBvbiBzb3VyY2UgZW5kcG9pbnQgLyBhdXRoZW50aWNhdGlvbiBhbG9uZS5cclxuICAgKi9cclxuICBwdWJsaWMgc2VuZGVyPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFVzdWFsbHkgb25seSBmb3IgdGhlIHJlcXVlc3QgYnV0IGNhbiBiZSB1c2VkIGluIGEgcmVzcG9uc2UuXHJcbiAgICovXHJcbiAgcHVibGljIGVudGVyZXI/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVXN1YWxseSBvbmx5IGZvciB0aGUgcmVxdWVzdCBidXQgY2FuIGJlIHVzZWQgaW4gYSByZXNwb25zZS5cclxuICAgKi9cclxuICBwdWJsaWMgYXV0aG9yPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzb3VyY2UgYXBwbGljYXRpb24gZnJvbSB3aGljaCB0aGlzIG1lc3NhZ2Ugb3JpZ2luYXRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgc291cmNlOiBmaGlyLk1lc3NhZ2VIZWFkZXJTb3VyY2V8bnVsbDtcclxuICAvKipcclxuICAgKiBVc3VhbGx5IG9ubHkgZm9yIHRoZSByZXF1ZXN0IGJ1dCBjYW4gYmUgdXNlZCBpbiBhIHJlc3BvbnNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZXNwb25zaWJsZT86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDb2RlZCBpbmRpY2F0aW9uIG9mIHRoZSBjYXVzZSBmb3IgdGhlIGV2ZW50IC0gaW5kaWNhdGVzICBhIHJlYXNvbiBmb3IgdGhlIG9jY3VycmVuY2Ugb2YgdGhlIGV2ZW50IHRoYXQgaXMgYSBmb2N1cyBvZiB0aGlzIG1lc3NhZ2UuXHJcbiAgICovXHJcbiAgcHVibGljIHJlYXNvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmZvcm1hdGlvbiBhYm91dCB0aGUgbWVzc2FnZSB0aGF0IHRoaXMgbWVzc2FnZSBpcyBhIHJlc3BvbnNlIHRvLiAgT25seSBwcmVzZW50IGlmIHRoaXMgbWVzc2FnZSBpcyBhIHJlc3BvbnNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZXNwb25zZT86IGZoaXIuTWVzc2FnZUhlYWRlclJlc3BvbnNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0YSBpcyBkZWZpbmVkIHdoZXJlIHRoZSB0cmFuc2FjdGlvbiB0eXBlIGlzIGRlZmluZWQuIFRoZSB0cmFuc2FjdGlvbiBkYXRhIGlzIGFsd2F5cyBpbmNsdWRlZCBpbiB0aGUgYnVuZGxlIHRoYXQgaXMgdGhlIGZ1bGwgbWVzc2FnZS4gIE9ubHkgdGhlIHJvb3QgcmVzb3VyY2UgaXMgc3BlY2lmaWVkLiAgVGhlIHJlc291cmNlcyBpdCByZWZlcmVuY2VzIHNob3VsZCBiZSBjb250YWluZWQgaW4gdGhlIGJ1bmRsZSBidXQgYXJlIG5vdCBhbHNvIGxpc3RlZCBoZXJlLiAgTXVsdGlwbGUgcmVwZXRpdGlvbnMgYXJlIGFsbG93ZWQgdG8gY2F0ZXIgZm9yIG1lcmdlcyBhbmQgb3RoZXIgc2l0dWF0aW9ucyB3aXRoIG11bHRpcGxlIGZvY2FsIHRhcmdldHMuXHJcbiAgICovXHJcbiAgcHVibGljIGZvY3VzOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIFBlcm1hbmVudCBsaW5rIHRvIHRoZSBNZXNzYWdlRGVmaW5pdGlvbiBmb3IgdGhpcyBtZXNzYWdlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZWZpbml0aW9uPzogZmhpci5GaGlyQ2Fub25pY2FsfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBNZXNzYWdlSGVhZGVyIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVzc2FnZUhlYWRlckFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdNZXNzYWdlSGVhZGVyJztcclxuICAgIGlmIChzb3VyY2VbJ2V2ZW50J10pIHsgdGhpcy5ldmVudCA9IHNvdXJjZS5ldmVudDsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydldmVudENvZGluZyddKSB7IHRoaXMuZXZlbnQgPSBuZXcgZmhpci5Db2Rpbmcoc291cmNlLmV2ZW50Q29kaW5nKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydldmVudFVyaSddKSB7IHRoaXMuZXZlbnQgPSBuZXcgZmhpci5GaGlyVXJpKHt2YWx1ZTogc291cmNlLmV2ZW50VXJpfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmV2ZW50ID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGVzdGluYXRpb24nXSkgeyB0aGlzLmRlc3RpbmF0aW9uID0gc291cmNlLmRlc3RpbmF0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuTWVzc2FnZUhlYWRlckRlc3RpbmF0aW9uKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZGVzdGluYXRpb24gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2VuZGVyJ10pIHsgdGhpcy5zZW5kZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnNlbmRlcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ2VudGVyZXInXSkgeyB0aGlzLmVudGVyZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmVudGVyZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWydhdXRob3InXSkgeyB0aGlzLmF1dGhvciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuYXV0aG9yKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc291cmNlJ10pIHsgdGhpcy5zb3VyY2UgPSBuZXcgZmhpci5NZXNzYWdlSGVhZGVyU291cmNlKHNvdXJjZS5zb3VyY2UpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zb3VyY2UgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydyZXNwb25zaWJsZSddKSB7IHRoaXMucmVzcG9uc2libGUgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnJlc3BvbnNpYmxlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVhc29uJ10pIHsgdGhpcy5yZWFzb24gPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnJlYXNvbik7IH1cclxuICAgIGlmIChzb3VyY2VbJ3Jlc3BvbnNlJ10pIHsgdGhpcy5yZXNwb25zZSA9IG5ldyBmaGlyLk1lc3NhZ2VIZWFkZXJSZXNwb25zZShzb3VyY2UucmVzcG9uc2UpOyB9XHJcbiAgICBpZiAoc291cmNlWydmb2N1cyddKSB7IHRoaXMuZm9jdXMgPSBzb3VyY2UuZm9jdXMubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5mb2N1cyA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydkZWZpbml0aW9uJ10pIHsgdGhpcy5kZWZpbml0aW9uID0gbmV3IGZoaXIuRmhpckNhbm9uaWNhbCh7dmFsdWU6IHNvdXJjZS5kZWZpbml0aW9ufSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19kZWZpbml0aW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZGVmaW5pdGlvbikgeyB0aGlzLmRlZmluaXRpb24uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZGVmaW5pdGlvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRlZmluaXRpb24gPSBuZXcgZmhpci5GaGlyQ2Fub25pY2FsKHNvdXJjZS5fZGVmaW5pdGlvbiBhcyBQYXJ0aWFsPGZoaXIuRmhpckNhbm9uaWNhbEFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbjpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwcmVzc2lvbik7XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHsgZXhwcmVzc2lvbiA9ICdNZXNzYWdlSGVhZGVyJyB9XHJcbiAgICB0aGlzLnZSZXFTKCdyZXNvdXJjZVR5cGUnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZSZXFTKCdldmVudCcsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdEEoJ2Rlc3RpbmF0aW9uJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0Uygnc2VuZGVyJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygnZW50ZXJlcicsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ2F1dGhvcicsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudlJlcVMoJ3NvdXJjZScsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ3Jlc3BvbnNpYmxlJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygncmVhc29uJyxleHByZXNzaW9uKVxyXG4gICAgdGhpcy52T3B0UygncmVzcG9uc2UnLGV4cHJlc3Npb24pXHJcbiAgICB0aGlzLnZPcHRBKCdmb2N1cycsZXhwcmVzc2lvbilcclxuICAgIHRoaXMudk9wdFMoJ2RlZmluaXRpb24nLGV4cHJlc3Npb24pXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=