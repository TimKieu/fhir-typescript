// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: SubstanceSourceMaterial
import * as fhir from '../fhir.js';
/**
 * Many complex materials are fractions of parts of plants, animals, or minerals. Fraction elements are often necessary to define both Substances and Specified Group 1 Substances. For substances derived from Plants, fraction information will be captured at the Substance information level ( . Oils, Juices and Exudates). Additional information for Extracts, such as extraction solvent composition, will be captured at the Specified Substance Group 1 information level. For plasma-derived products fraction information will be captured at the Substance and the Specified Substance Group 1 levels.
 */
export class SubstanceSourceMaterialFractionDescription extends fhir.BackboneElement {
    /**
     * Default constructor for SubstanceSourceMaterialFractionDescription - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['fraction']) {
            this.fraction = new fhir.FhirString({ value: source.fraction });
        }
        if (source['_fraction']) {
            if (this.fraction) {
                this.fraction.addExtendedProperties(source._fraction);
            }
            else {
                this.fraction = new fhir.FhirString(source._fraction);
            }
        }
        if (source['materialType']) {
            this.materialType = new fhir.CodeableConcept(source.materialType);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["fraction"]) {
            issues.push(...this.fraction.doModelValidation());
        }
        if (this["materialType"]) {
            issues.push(...this.materialType.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceSourceMaterialFractionDescription._fts_dataType = 'SubstanceSourceMaterialFractionDescription';
/**
 * 4.9.13.6.1 Author type (Conditional).
 */
export class SubstanceSourceMaterialOrganismAuthor extends fhir.BackboneElement {
    /**
     * Default constructor for SubstanceSourceMaterialOrganismAuthor - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['authorType']) {
            this.authorType = new fhir.CodeableConcept(source.authorType);
        }
        if (source['authorDescription']) {
            this.authorDescription = new fhir.FhirString({ value: source.authorDescription });
        }
        if (source['_authorDescription']) {
            if (this.authorDescription) {
                this.authorDescription.addExtendedProperties(source._authorDescription);
            }
            else {
                this.authorDescription = new fhir.FhirString(source._authorDescription);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["authorType"]) {
            issues.push(...this.authorType.doModelValidation());
        }
        if (this["authorDescription"]) {
            issues.push(...this.authorDescription.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceSourceMaterialOrganismAuthor._fts_dataType = 'SubstanceSourceMaterialOrganismAuthor';
/**
 * 4.9.13.8.1 Hybrid species maternal organism ID (Optional).
 */
export class SubstanceSourceMaterialOrganismHybrid extends fhir.BackboneElement {
    /**
     * Default constructor for SubstanceSourceMaterialOrganismHybrid - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['maternalOrganismId']) {
            this.maternalOrganismId = new fhir.FhirString({ value: source.maternalOrganismId });
        }
        if (source['_maternalOrganismId']) {
            if (this.maternalOrganismId) {
                this.maternalOrganismId.addExtendedProperties(source._maternalOrganismId);
            }
            else {
                this.maternalOrganismId = new fhir.FhirString(source._maternalOrganismId);
            }
        }
        if (source['maternalOrganismName']) {
            this.maternalOrganismName = new fhir.FhirString({ value: source.maternalOrganismName });
        }
        if (source['_maternalOrganismName']) {
            if (this.maternalOrganismName) {
                this.maternalOrganismName.addExtendedProperties(source._maternalOrganismName);
            }
            else {
                this.maternalOrganismName = new fhir.FhirString(source._maternalOrganismName);
            }
        }
        if (source['paternalOrganismId']) {
            this.paternalOrganismId = new fhir.FhirString({ value: source.paternalOrganismId });
        }
        if (source['_paternalOrganismId']) {
            if (this.paternalOrganismId) {
                this.paternalOrganismId.addExtendedProperties(source._paternalOrganismId);
            }
            else {
                this.paternalOrganismId = new fhir.FhirString(source._paternalOrganismId);
            }
        }
        if (source['paternalOrganismName']) {
            this.paternalOrganismName = new fhir.FhirString({ value: source.paternalOrganismName });
        }
        if (source['_paternalOrganismName']) {
            if (this.paternalOrganismName) {
                this.paternalOrganismName.addExtendedProperties(source._paternalOrganismName);
            }
            else {
                this.paternalOrganismName = new fhir.FhirString(source._paternalOrganismName);
            }
        }
        if (source['hybridType']) {
            this.hybridType = new fhir.CodeableConcept(source.hybridType);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["maternalOrganismId"]) {
            issues.push(...this.maternalOrganismId.doModelValidation());
        }
        if (this["maternalOrganismName"]) {
            issues.push(...this.maternalOrganismName.doModelValidation());
        }
        if (this["paternalOrganismId"]) {
            issues.push(...this.paternalOrganismId.doModelValidation());
        }
        if (this["paternalOrganismName"]) {
            issues.push(...this.paternalOrganismName.doModelValidation());
        }
        if (this["hybridType"]) {
            issues.push(...this.hybridType.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceSourceMaterialOrganismHybrid._fts_dataType = 'SubstanceSourceMaterialOrganismHybrid';
/**
 * 4.9.13.7.1 Kingdom (Conditional).
 */
export class SubstanceSourceMaterialOrganismOrganismGeneral extends fhir.BackboneElement {
    /**
     * Default constructor for SubstanceSourceMaterialOrganismOrganismGeneral - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['kingdom']) {
            this.kingdom = new fhir.CodeableConcept(source.kingdom);
        }
        if (source['phylum']) {
            this.phylum = new fhir.CodeableConcept(source.phylum);
        }
        if (source['class']) {
            this.class = new fhir.CodeableConcept(source.class);
        }
        if (source['order']) {
            this.order = new fhir.CodeableConcept(source.order);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["kingdom"]) {
            issues.push(...this.kingdom.doModelValidation());
        }
        if (this["phylum"]) {
            issues.push(...this.phylum.doModelValidation());
        }
        if (this["class"]) {
            issues.push(...this.class.doModelValidation());
        }
        if (this["order"]) {
            issues.push(...this.order.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceSourceMaterialOrganismOrganismGeneral._fts_dataType = 'SubstanceSourceMaterialOrganismOrganismGeneral';
/**
 * This subclause describes the organism which the substance is derived from. For vaccines, the parent organism shall be specified based on these subclause elements. As an example, full taxonomy will be described for the Substance Name: ., Leaf.
 */
export class SubstanceSourceMaterialOrganism extends fhir.BackboneElement {
    /**
     * Default constructor for SubstanceSourceMaterialOrganism - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['family']) {
            this.family = new fhir.CodeableConcept(source.family);
        }
        if (source['genus']) {
            this.genus = new fhir.CodeableConcept(source.genus);
        }
        if (source['species']) {
            this.species = new fhir.CodeableConcept(source.species);
        }
        if (source['intraspecificType']) {
            this.intraspecificType = new fhir.CodeableConcept(source.intraspecificType);
        }
        if (source['intraspecificDescription']) {
            this.intraspecificDescription = new fhir.FhirString({ value: source.intraspecificDescription });
        }
        if (source['_intraspecificDescription']) {
            if (this.intraspecificDescription) {
                this.intraspecificDescription.addExtendedProperties(source._intraspecificDescription);
            }
            else {
                this.intraspecificDescription = new fhir.FhirString(source._intraspecificDescription);
            }
        }
        if (source['author']) {
            this.author = source.author.map((x) => new fhir.SubstanceSourceMaterialOrganismAuthor(x));
        }
        else {
            this.author = [];
        }
        if (source['hybrid']) {
            this.hybrid = new fhir.SubstanceSourceMaterialOrganismHybrid(source.hybrid);
        }
        if (source['organismGeneral']) {
            this.organismGeneral = new fhir.SubstanceSourceMaterialOrganismOrganismGeneral(source.organismGeneral);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["family"]) {
            issues.push(...this.family.doModelValidation());
        }
        if (this["genus"]) {
            issues.push(...this.genus.doModelValidation());
        }
        if (this["species"]) {
            issues.push(...this.species.doModelValidation());
        }
        if (this["intraspecificType"]) {
            issues.push(...this.intraspecificType.doModelValidation());
        }
        if (this["intraspecificDescription"]) {
            issues.push(...this.intraspecificDescription.doModelValidation());
        }
        if (this["author"]) {
            this.author.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["hybrid"]) {
            issues.push(...this.hybrid.doModelValidation());
        }
        if (this["organismGeneral"]) {
            issues.push(...this.organismGeneral.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceSourceMaterialOrganism._fts_dataType = 'SubstanceSourceMaterialOrganism';
/**
 * To do.
 */
export class SubstanceSourceMaterialPartDescription extends fhir.BackboneElement {
    /**
     * Default constructor for SubstanceSourceMaterialPartDescription - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['part']) {
            this.part = new fhir.CodeableConcept(source.part);
        }
        if (source['partLocation']) {
            this.partLocation = new fhir.CodeableConcept(source.partLocation);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (this["part"]) {
            issues.push(...this.part.doModelValidation());
        }
        if (this["partLocation"]) {
            issues.push(...this.partLocation.doModelValidation());
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceSourceMaterialPartDescription._fts_dataType = 'SubstanceSourceMaterialPartDescription';
/**
 * Source material shall capture information on the taxonomic and anatomical origins as well as the fraction of a material that can result in or can be modified to form a substance. This set of data elements shall be used to define polymer substances isolated from biological matrices. Taxonomic and anatomical origins shall be described using a controlled vocabulary as required. This information is captured for naturally derived polymers ( . starch) and structurally diverse substances. For Organisms belonging to the Kingdom Plantae the Substance level defines the fresh material of a single species or infraspecies, the Herbal Drug and the Herbal preparation. For Herbal preparations, the fraction information will be captured at the Substance information level and additional information for herbal extracts will be captured at the Specified Substance Group 1 information level. See for further explanation the Substance Class: Structurally Diverse and the herbal annex.
 */
export class SubstanceSourceMaterial extends fhir.DomainResource {
    /**
     * Default constructor for SubstanceSourceMaterial - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'SubstanceSourceMaterial';
        if (source['sourceMaterialClass']) {
            this.sourceMaterialClass = new fhir.CodeableConcept(source.sourceMaterialClass);
        }
        if (source['sourceMaterialType']) {
            this.sourceMaterialType = new fhir.CodeableConcept(source.sourceMaterialType);
        }
        if (source['sourceMaterialState']) {
            this.sourceMaterialState = new fhir.CodeableConcept(source.sourceMaterialState);
        }
        if (source['organismId']) {
            this.organismId = new fhir.Identifier(source.organismId);
        }
        if (source['organismName']) {
            this.organismName = new fhir.FhirString({ value: source.organismName });
        }
        if (source['_organismName']) {
            if (this.organismName) {
                this.organismName.addExtendedProperties(source._organismName);
            }
            else {
                this.organismName = new fhir.FhirString(source._organismName);
            }
        }
        if (source['parentSubstanceId']) {
            this.parentSubstanceId = source.parentSubstanceId.map((x) => new fhir.Identifier(x));
        }
        else {
            this.parentSubstanceId = [];
        }
        if (source['parentSubstanceName']) {
            this.parentSubstanceName = source.parentSubstanceName.map((x) => new fhir.FhirString({ value: x }));
        }
        else {
            this.parentSubstanceName = [];
        }
        if (source['_parentSubstanceName']) {
            source._parentSubstanceName.forEach((x, i) => {
                if (this.parentSubstanceName.length >= i) {
                    if (x) {
                        this.parentSubstanceName[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.parentSubstanceName.push(new fhir.FhirString(x));
                    }
                }
            });
        }
        if (source['countryOfOrigin']) {
            this.countryOfOrigin = source.countryOfOrigin.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.countryOfOrigin = [];
        }
        if (source['geographicalLocation']) {
            this.geographicalLocation = source.geographicalLocation.map((x) => new fhir.FhirString({ value: x }));
        }
        else {
            this.geographicalLocation = [];
        }
        if (source['_geographicalLocation']) {
            source._geographicalLocation.forEach((x, i) => {
                if (this.geographicalLocation.length >= i) {
                    if (x) {
                        this.geographicalLocation[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.geographicalLocation.push(new fhir.FhirString(x));
                    }
                }
            });
        }
        if (source['developmentStage']) {
            this.developmentStage = new fhir.CodeableConcept(source.developmentStage);
        }
        if (source['fractionDescription']) {
            this.fractionDescription = source.fractionDescription.map((x) => new fhir.SubstanceSourceMaterialFractionDescription(x));
        }
        else {
            this.fractionDescription = [];
        }
        if (source['organism']) {
            this.organism = new fhir.SubstanceSourceMaterialOrganism(source.organism);
        }
        if (source['partDescription']) {
            this.partDescription = source.partDescription.map((x) => new fhir.SubstanceSourceMaterialPartDescription(x));
        }
        else {
            this.partDescription = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation() {
        let issues = super.doModelValidation();
        if (!this['resourceType']) {
            issues.push({ severity: 'error', code: 'required', diagnostics: 'Missing required property resourceType:"SubstanceSourceMaterial" fhir: SubstanceSourceMaterial.resourceType:"SubstanceSourceMaterial"' });
        }
        if (this["sourceMaterialClass"]) {
            issues.push(...this.sourceMaterialClass.doModelValidation());
        }
        if (this["sourceMaterialType"]) {
            issues.push(...this.sourceMaterialType.doModelValidation());
        }
        if (this["sourceMaterialState"]) {
            issues.push(...this.sourceMaterialState.doModelValidation());
        }
        if (this["organismId"]) {
            issues.push(...this.organismId.doModelValidation());
        }
        if (this["organismName"]) {
            issues.push(...this.organismName.doModelValidation());
        }
        if (this["parentSubstanceId"]) {
            this.parentSubstanceId.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["parentSubstanceName"]) {
            this.parentSubstanceName.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["countryOfOrigin"]) {
            this.countryOfOrigin.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["geographicalLocation"]) {
            this.geographicalLocation.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["developmentStage"]) {
            issues.push(...this.developmentStage.doModelValidation());
        }
        if (this["fractionDescription"]) {
            this.fractionDescription.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        if (this["organism"]) {
            issues.push(...this.organism.doModelValidation());
        }
        if (this["partDescription"]) {
            this.partDescription.forEach((x) => { issues.push(...x.doModelValidation()); });
        }
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubstanceSourceMaterial._fts_dataType = 'SubstanceSourceMaterial';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3Vic3RhbmNlU291cmNlTWF0ZXJpYWwuanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL1N1YnN0YW5jZVNvdXJjZU1hdGVyaWFsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQiwrQ0FBK0M7QUFDL0Msa0NBQWtDO0FBQ2xDLHlDQUF5QztBQUV6QyxPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQW9CbkM7O0dBRUc7QUFDSCxNQUFNLE9BQU8sMENBQTJDLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFhbEY7O09BRUc7SUFDSCxZQUFZLFNBQWlFLEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQ3ZILEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsUUFBUSxFQUFDLENBQUMsQ0FBQztTQUFFO1FBQzFGLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQ3ZCLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtnQkFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxTQUFVLENBQUMsQ0FBQzthQUFFO2lCQUN6RTtnQkFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsU0FBeUMsQ0FBQyxDQUFDO2FBQUU7U0FDaEc7UUFDRCxJQUFJLE1BQU0sQ0FBQyxjQUFjLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQztTQUFFO0lBQ3BHLENBQUM7SUFDRDs7T0FFRztJQUNhLGlCQUFpQjtRQUMvQixJQUFJLE1B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QUFDLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztTQUFFO1FBQzVGLElBQUksSUFBSSxDQUFDLHFCQUFxQixDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsbUJBQW1CLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQUU7UUFDeEgsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUM1RSxJQUFJLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7U0FBRTtRQUNoSCxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQTVIRDs7R0FFRztBQUM2QixxQ0FBYSxHQUFVLHlCQUF5QixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0LmNvcmUgdmVyc2lvbjogNC4wLjFcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBTdWJzdGFuY2VTb3VyY2VNYXRlcmlhbFxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBTdWJzdGFuY2VTb3VyY2VNYXRlcmlhbEZyYWN0aW9uRGVzY3JpcHRpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3Vic3RhbmNlU291cmNlTWF0ZXJpYWxGcmFjdGlvbkRlc2NyaXB0aW9uQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IGlzIGNhcHR1cmluZyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgZnJhY3Rpb24gb2YgYSBwbGFudCBwYXJ0LCBvciBodW1hbiBwbGFzbWEgZm9yIGZyYWN0aW9uYXRpb24uXHJcbiAgICovXHJcbiAgZnJhY3Rpb24/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3Vic3RhbmNlU291cmNlTWF0ZXJpYWwuZnJhY3Rpb25EZXNjcmlwdGlvbi5mcmFjdGlvblxyXG4gICAqL1xyXG4gIF9mcmFjdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNwZWNpZmljIHR5cGUgb2YgdGhlIG1hdGVyaWFsIGNvbnN0aXR1dGluZyB0aGUgY29tcG9uZW50LiBGb3IgSGVyYmFsIHByZXBhcmF0aW9ucyB0aGUgcGFydGljdWxhcnMgb2YgdGhlIGV4dHJhY3RzIChsaXF1aWQvZHJ5KSBpcyBkZXNjcmliZWQgaW4gU3BlY2lmaWVkIFN1YnN0YW5jZSBHcm91cCAxLlxyXG4gICAqL1xyXG4gIG1hdGVyaWFsVHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNYW55IGNvbXBsZXggbWF0ZXJpYWxzIGFyZSBmcmFjdGlvbnMgb2YgcGFydHMgb2YgcGxhbnRzLCBhbmltYWxzLCBvciBtaW5lcmFscy4gRnJhY3Rpb24gZWxlbWVudHMgYXJlIG9mdGVuIG5lY2Vzc2FyeSB0byBkZWZpbmUgYm90aCBTdWJzdGFuY2VzIGFuZCBTcGVjaWZpZWQgR3JvdXAgMSBTdWJzdGFuY2VzLiBGb3Igc3Vic3RhbmNlcyBkZXJpdmVkIGZyb20gUGxhbnRzLCBmcmFjdGlvbiBpbmZvcm1hdGlvbiB3aWxsIGJlIGNhcHR1cmVkIGF0IHRoZSBTdWJzdGFuY2UgaW5mb3JtYXRpb24gbGV2ZWwgKCAuIE9pbHMsIEp1aWNlcyBhbmQgRXh1ZGF0ZXMpLiBBZGRpdGlvbmFsIGluZm9ybWF0aW9uIGZvciBFeHRyYWN0cywgc3VjaCBhcyBleHRyYWN0aW9uIHNvbHZlbnQgY29tcG9zaXRpb24sIHdpbGwgYmUgY2FwdHVyZWQgYXQgdGhlIFNwZWNpZmllZCBTdWJzdGFuY2UgR3JvdXAgMSBpbmZvcm1hdGlvbiBsZXZlbC4gRm9yIHBsYXNtYS1kZXJpdmVkIHByb2R1Y3RzIGZyYWN0aW9uIGluZm9ybWF0aW9uIHdpbGwgYmUgY2FwdHVyZWQgYXQgdGhlIFN1YnN0YW5jZSBhbmQgdGhlIFNwZWNpZmllZCBTdWJzdGFuY2UgR3JvdXAgMSBsZXZlbHMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3Vic3RhbmNlU291cmNlTWF0ZXJpYWxGcmFjdGlvbkRlc2NyaXB0aW9uIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnU3Vic3RhbmNlU291cmNlTWF0ZXJpYWxGcmFjdGlvbkRlc2NyaXB0aW9uJztcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgY2FwdHVyaW5nIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmcmFjdGlvbiBvZiBhIHBsYW50IHBhcnQsIG9yIGh1bWFuIHBsYXNtYSBmb3IgZnJhY3Rpb25hdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgZnJhY3Rpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzcGVjaWZpYyB0eXBlIG9mIHRoZSBtYXRlcmlhbCBjb25zdGl0dXRpbmcgdGhlIGNvbXBvbmVudC4gRm9yIEhlcmJhbCBwcmVwYXJhdGlvbnMgdGhlIHBhcnRpY3VsYXJzIG9mIHRoZSBleHRyYWN0cyAobGlxdWlkL2RyeSkgaXMgZGVzY3JpYmVkIGluIFNwZWNpZmllZCBTdWJzdGFuY2UgR3JvdXAgMS5cclxuICAgKi9cclxuICBwdWJsaWMgbWF0ZXJpYWxUeXBlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFN1YnN0YW5jZVNvdXJjZU1hdGVyaWFsRnJhY3Rpb25EZXNjcmlwdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFN1YnN0YW5jZVNvdXJjZU1hdGVyaWFsRnJhY3Rpb25EZXNjcmlwdGlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydmcmFjdGlvbiddKSB7IHRoaXMuZnJhY3Rpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmZyYWN0aW9ufSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19mcmFjdGlvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLmZyYWN0aW9uKSB7IHRoaXMuZnJhY3Rpb24uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZnJhY3Rpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5mcmFjdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9mcmFjdGlvbiBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnbWF0ZXJpYWxUeXBlJ10pIHsgdGhpcy5tYXRlcmlhbFR5cGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLm1hdGVyaWFsVHlwZSk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICh0aGlzW1wiZnJhY3Rpb25cIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5mcmFjdGlvbi5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJtYXRlcmlhbFR5cGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5tYXRlcmlhbFR5cGUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBTdWJzdGFuY2VTb3VyY2VNYXRlcmlhbE9yZ2FuaXNtQXV0aG9yIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFN1YnN0YW5jZVNvdXJjZU1hdGVyaWFsT3JnYW5pc21BdXRob3JBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgdHlwZSBvZiBhdXRob3Igb2YgYW4gb3JnYW5pc20gc3BlY2llcyBzaGFsbCBiZSBzcGVjaWZpZWQuIFRoZSBwYXJlbnRoZXRpY2FsIGF1dGhvciBvZiBhbiBvcmdhbmlzbSBzcGVjaWVzIHJlZmVycyB0byB0aGUgZmlyc3QgYXV0aG9yIHdobyBwdWJsaXNoZWQgdGhlIHBsYW50L2FuaW1hbCBuYW1lIChvZiBhbnkgcmFuaykuIFRoZSBwcmltYXJ5IGF1dGhvciBvZiBhbiBvcmdhbmlzbSBzcGVjaWVzIHJlZmVycyB0byB0aGUgZmlyc3QgYXV0aG9yKHMpLCB3aG8gdmFsaWRseSBwdWJsaXNoZWQgdGhlIHBsYW50L2FuaW1hbCBuYW1lLlxyXG4gICAqL1xyXG4gIGF1dGhvclR5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBhdXRob3Igb2YgYW4gb3JnYW5pc20gc3BlY2llcyBzaGFsbCBiZSBzcGVjaWZpZWQuIFRoZSBhdXRob3IgeWVhciBvZiBhbiBvcmdhbmlzbSBzaGFsbCBhbHNvIGJlIHNwZWNpZmllZCB3aGVuIGFwcGxpY2FibGU7IHJlZmVycyB0byB0aGUgeWVhciBpbiB3aGljaCB0aGUgZmlyc3QgYXV0aG9yKHMpIHB1Ymxpc2hlZCB0aGUgaW5mcmFzcGVjaWZpYyBwbGFudC9hbmltYWwgbmFtZSAob2YgYW55IHJhbmspLlxyXG4gICAqL1xyXG4gIGF1dGhvckRlc2NyaXB0aW9uPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFN1YnN0YW5jZVNvdXJjZU1hdGVyaWFsLm9yZ2FuaXNtLmF1dGhvci5hdXRob3JEZXNjcmlwdGlvblxyXG4gICAqL1xyXG4gIF9hdXRob3JEZXNjcmlwdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiA0LjkuMTMuNi4xIEF1dGhvciB0eXBlIChDb25kaXRpb25hbCkuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3Vic3RhbmNlU291cmNlTWF0ZXJpYWxPcmdhbmlzbUF1dGhvciBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1N1YnN0YW5jZVNvdXJjZU1hdGVyaWFsT3JnYW5pc21BdXRob3InO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0eXBlIG9mIGF1dGhvciBvZiBhbiBvcmdhbmlzbSBzcGVjaWVzIHNoYWxsIGJlIHNwZWNpZmllZC4gVGhlIHBhcmVudGhldGljYWwgYXV0aG9yIG9mIGFuIG9yZ2FuaXNtIHNwZWNpZXMgcmVmZXJzIHRvIHRoZSBmaXJzdCBhdXRob3Igd2hvIHB1Ymxpc2hlZCB0aGUgcGxhbnQvYW5pbWFsIG5hbWUgKG9mIGFueSByYW5rKS4gVGhlIHByaW1hcnkgYXV0aG9yIG9mIGFuIG9yZ2FuaXNtIHNwZWNpZXMgcmVmZXJzIHRvIHRoZSBmaXJzdCBhdXRob3IocyksIHdobyB2YWxpZGx5IHB1Ymxpc2hlZCB0aGUgcGxhbnQvYW5pbWFsIG5hbWUuXHJcbiAgICovXHJcbiAgcHVibGljIGF1dGhvclR5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGF1dGhvciBvZiBhbiBvcmdhbmlzbSBzcGVjaWVzIHNoYWxsIGJlIHNwZWNpZmllZC4gVGhlIGF1dGhvciB5ZWFyIG9mIGFuIG9yZ2FuaXNtIHNoYWxsIGFsc28gYmUgc3BlY2lmaWVkIHdoZW4gYXBwbGljYWJsZTsgcmVmZXJzIHRvIHRoZSB5ZWFyIGluIHdoaWNoIHRoZSBmaXJzdCBhdXRob3IocykgcHVibGlzaGVkIHRoZSBpbmZyYXNwZWNpZmljIHBsYW50L2FuaW1hbCBuYW1lIChvZiBhbnkgcmFuaykuXHJcbiAgICovXHJcbiAgcHVibGljIGF1dGhvckRlc2NyaXB0aW9uPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBTdWJzdGFuY2VTb3VyY2VNYXRlcmlhbE9yZ2FuaXNtQXV0aG9yIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8U3Vic3RhbmNlU291cmNlTWF0ZXJpYWxPcmdhbmlzbUF1dGhvckFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydhdXRob3JUeXBlJ10pIHsgdGhpcy5hdXRob3JUeXBlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5hdXRob3JUeXBlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYXV0aG9yRGVzY3JpcHRpb24nXSkgeyB0aGlzLmF1dGhvckRlc2NyaXB0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5hdXRob3JEZXNjcmlwdGlvbn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfYXV0aG9yRGVzY3JpcHRpb24nXSkge1xyXG4gICAgICBpZiAodGhpcy5hdXRob3JEZXNjcmlwdGlvbikgeyB0aGlzLmF1dGhvckRlc2NyaXB0aW9uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2F1dGhvckRlc2NyaXB0aW9uISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuYXV0aG9yRGVzY3JpcHRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fYXV0aG9yRGVzY3JpcHRpb24gYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICh0aGlzW1wiYXV0aG9yVHlwZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmF1dGhvclR5cGUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiYXV0aG9yRGVzY3JpcHRpb25cIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5hdXRob3JEZXNjcmlwdGlvbi5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFN1YnN0YW5jZVNvdXJjZU1hdGVyaWFsT3JnYW5pc21IeWJyaWQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3Vic3RhbmNlU291cmNlTWF0ZXJpYWxPcmdhbmlzbUh5YnJpZEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpZGVudGlmaWVyIG9mIHRoZSBtYXRlcm5hbCBzcGVjaWVzIGNvbnN0aXR1dGluZyB0aGUgaHlicmlkIG9yZ2FuaXNtIHNoYWxsIGJlIHNwZWNpZmllZCBiYXNlZCBvbiBhIGNvbnRyb2xsZWQgdm9jYWJ1bGFyeS4gRm9yIHBsYW50cywgdGhlIHBhcmVudHMgYXJlbuKAmXQgYWx3YXlzIGtub3duLCBhbmQgaXQgaXMgdW5saWtlbHkgdGhhdCBpdCB3aWxsIGJlIGtub3duIHdoaWNoIGlzIG1hdGVybmFsIGFuZCB3aGljaCBpcyBwYXRlcm5hbC5cclxuICAgKi9cclxuICBtYXRlcm5hbE9yZ2FuaXNtSWQ/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3Vic3RhbmNlU291cmNlTWF0ZXJpYWwub3JnYW5pc20uaHlicmlkLm1hdGVybmFsT3JnYW5pc21JZFxyXG4gICAqL1xyXG4gIF9tYXRlcm5hbE9yZ2FuaXNtSWQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBtYXRlcm5hbCBzcGVjaWVzIGNvbnN0aXR1dGluZyB0aGUgaHlicmlkIG9yZ2FuaXNtIHNoYWxsIGJlIHNwZWNpZmllZC4gRm9yIHBsYW50cywgdGhlIHBhcmVudHMgYXJlbuKAmXQgYWx3YXlzIGtub3duLCBhbmQgaXQgaXMgdW5saWtlbHkgdGhhdCBpdCB3aWxsIGJlIGtub3duIHdoaWNoIGlzIG1hdGVybmFsIGFuZCB3aGljaCBpcyBwYXRlcm5hbC5cclxuICAgKi9cclxuICBtYXRlcm5hbE9yZ2FuaXNtTmFtZT86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTdWJzdGFuY2VTb3VyY2VNYXRlcmlhbC5vcmdhbmlzbS5oeWJyaWQubWF0ZXJuYWxPcmdhbmlzbU5hbWVcclxuICAgKi9cclxuICBfbWF0ZXJuYWxPcmdhbmlzbU5hbWU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpZGVudGlmaWVyIG9mIHRoZSBwYXRlcm5hbCBzcGVjaWVzIGNvbnN0aXR1dGluZyB0aGUgaHlicmlkIG9yZ2FuaXNtIHNoYWxsIGJlIHNwZWNpZmllZCBiYXNlZCBvbiBhIGNvbnRyb2xsZWQgdm9jYWJ1bGFyeS5cclxuICAgKi9cclxuICBwYXRlcm5hbE9yZ2FuaXNtSWQ/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3Vic3RhbmNlU291cmNlTWF0ZXJpYWwub3JnYW5pc20uaHlicmlkLnBhdGVybmFsT3JnYW5pc21JZFxyXG4gICAqL1xyXG4gIF9wYXRlcm5hbE9yZ2FuaXNtSWQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBwYXRlcm5hbCBzcGVjaWVzIGNvbnN0aXR1dGluZyB0aGUgaHlicmlkIG9yZ2FuaXNtIHNoYWxsIGJlIHNwZWNpZmllZC5cclxuICAgKi9cclxuICBwYXRlcm5hbE9yZ2FuaXNtTmFtZT86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTdWJzdGFuY2VTb3VyY2VNYXRlcmlhbC5vcmdhbmlzbS5oeWJyaWQucGF0ZXJuYWxPcmdhbmlzbU5hbWVcclxuICAgKi9cclxuICBfcGF0ZXJuYWxPcmdhbmlzbU5hbWU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBoeWJyaWQgdHlwZSBvZiBhbiBvcmdhbmlzbSBzaGFsbCBiZSBzcGVjaWZpZWQuXHJcbiAgICovXHJcbiAgaHlicmlkVHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiA0LjkuMTMuOC4xIEh5YnJpZCBzcGVjaWVzIG1hdGVybmFsIG9yZ2FuaXNtIElEIChPcHRpb25hbCkuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3Vic3RhbmNlU291cmNlTWF0ZXJpYWxPcmdhbmlzbUh5YnJpZCBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1N1YnN0YW5jZVNvdXJjZU1hdGVyaWFsT3JnYW5pc21IeWJyaWQnO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpZGVudGlmaWVyIG9mIHRoZSBtYXRlcm5hbCBzcGVjaWVzIGNvbnN0aXR1dGluZyB0aGUgaHlicmlkIG9yZ2FuaXNtIHNoYWxsIGJlIHNwZWNpZmllZCBiYXNlZCBvbiBhIGNvbnRyb2xsZWQgdm9jYWJ1bGFyeS4gRm9yIHBsYW50cywgdGhlIHBhcmVudHMgYXJlbuKAmXQgYWx3YXlzIGtub3duLCBhbmQgaXQgaXMgdW5saWtlbHkgdGhhdCBpdCB3aWxsIGJlIGtub3duIHdoaWNoIGlzIG1hdGVybmFsIGFuZCB3aGljaCBpcyBwYXRlcm5hbC5cclxuICAgKi9cclxuICBwdWJsaWMgbWF0ZXJuYWxPcmdhbmlzbUlkPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbmFtZSBvZiB0aGUgbWF0ZXJuYWwgc3BlY2llcyBjb25zdGl0dXRpbmcgdGhlIGh5YnJpZCBvcmdhbmlzbSBzaGFsbCBiZSBzcGVjaWZpZWQuIEZvciBwbGFudHMsIHRoZSBwYXJlbnRzIGFyZW7igJl0IGFsd2F5cyBrbm93biwgYW5kIGl0IGlzIHVubGlrZWx5IHRoYXQgaXQgd2lsbCBiZSBrbm93biB3aGljaCBpcyBtYXRlcm5hbCBhbmQgd2hpY2ggaXMgcGF0ZXJuYWwuXHJcbiAgICovXHJcbiAgcHVibGljIG1hdGVybmFsT3JnYW5pc21OYW1lPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgaWRlbnRpZmllciBvZiB0aGUgcGF0ZXJuYWwgc3BlY2llcyBjb25zdGl0dXRpbmcgdGhlIGh5YnJpZCBvcmdhbmlzbSBzaGFsbCBiZSBzcGVjaWZpZWQgYmFzZWQgb24gYSBjb250cm9sbGVkIHZvY2FidWxhcnkuXHJcbiAgICovXHJcbiAgcHVibGljIHBhdGVybmFsT3JnYW5pc21JZD86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG5hbWUgb2YgdGhlIHBhdGVybmFsIHNwZWNpZXMgY29uc3RpdHV0aW5nIHRoZSBoeWJyaWQgb3JnYW5pc20gc2hhbGwgYmUgc3BlY2lmaWVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXRlcm5hbE9yZ2FuaXNtTmFtZT86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGh5YnJpZCB0eXBlIG9mIGFuIG9yZ2FuaXNtIHNoYWxsIGJlIHNwZWNpZmllZC5cclxuICAgKi9cclxuICBwdWJsaWMgaHlicmlkVHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBTdWJzdGFuY2VTb3VyY2VNYXRlcmlhbE9yZ2FuaXNtSHlicmlkIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8U3Vic3RhbmNlU291cmNlTWF0ZXJpYWxPcmdhbmlzbUh5YnJpZEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydtYXRlcm5hbE9yZ2FuaXNtSWQnXSkgeyB0aGlzLm1hdGVybmFsT3JnYW5pc21JZCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UubWF0ZXJuYWxPcmdhbmlzbUlkfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19tYXRlcm5hbE9yZ2FuaXNtSWQnXSkge1xyXG4gICAgICBpZiAodGhpcy5tYXRlcm5hbE9yZ2FuaXNtSWQpIHsgdGhpcy5tYXRlcm5hbE9yZ2FuaXNtSWQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbWF0ZXJuYWxPcmdhbmlzbUlkISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubWF0ZXJuYWxPcmdhbmlzbUlkID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX21hdGVybmFsT3JnYW5pc21JZCBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnbWF0ZXJuYWxPcmdhbmlzbU5hbWUnXSkgeyB0aGlzLm1hdGVybmFsT3JnYW5pc21OYW1lID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5tYXRlcm5hbE9yZ2FuaXNtTmFtZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfbWF0ZXJuYWxPcmdhbmlzbU5hbWUnXSkge1xyXG4gICAgICBpZiAodGhpcy5tYXRlcm5hbE9yZ2FuaXNtTmFtZSkgeyB0aGlzLm1hdGVybmFsT3JnYW5pc21OYW1lLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX21hdGVybmFsT3JnYW5pc21OYW1lISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubWF0ZXJuYWxPcmdhbmlzbU5hbWUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fbWF0ZXJuYWxPcmdhbmlzbU5hbWUgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3BhdGVybmFsT3JnYW5pc21JZCddKSB7IHRoaXMucGF0ZXJuYWxPcmdhbmlzbUlkID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5wYXRlcm5hbE9yZ2FuaXNtSWR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3BhdGVybmFsT3JnYW5pc21JZCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnBhdGVybmFsT3JnYW5pc21JZCkgeyB0aGlzLnBhdGVybmFsT3JnYW5pc21JZC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9wYXRlcm5hbE9yZ2FuaXNtSWQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5wYXRlcm5hbE9yZ2FuaXNtSWQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fcGF0ZXJuYWxPcmdhbmlzbUlkIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydwYXRlcm5hbE9yZ2FuaXNtTmFtZSddKSB7IHRoaXMucGF0ZXJuYWxPcmdhbmlzbU5hbWUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnBhdGVybmFsT3JnYW5pc21OYW1lfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19wYXRlcm5hbE9yZ2FuaXNtTmFtZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnBhdGVybmFsT3JnYW5pc21OYW1lKSB7IHRoaXMucGF0ZXJuYWxPcmdhbmlzbU5hbWUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fcGF0ZXJuYWxPcmdhbmlzbU5hbWUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5wYXRlcm5hbE9yZ2FuaXNtTmFtZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9wYXRlcm5hbE9yZ2FuaXNtTmFtZSBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnaHlicmlkVHlwZSddKSB7IHRoaXMuaHlicmlkVHlwZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuaHlicmlkVHlwZSk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICh0aGlzW1wibWF0ZXJuYWxPcmdhbmlzbUlkXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMubWF0ZXJuYWxPcmdhbmlzbUlkLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcIm1hdGVybmFsT3JnYW5pc21OYW1lXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMubWF0ZXJuYWxPcmdhbmlzbU5hbWUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wicGF0ZXJuYWxPcmdhbmlzbUlkXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucGF0ZXJuYWxPcmdhbmlzbUlkLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInBhdGVybmFsT3JnYW5pc21OYW1lXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucGF0ZXJuYWxPcmdhbmlzbU5hbWUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiaHlicmlkVHlwZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmh5YnJpZFR5cGUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBTdWJzdGFuY2VTb3VyY2VNYXRlcmlhbE9yZ2FuaXNtT3JnYW5pc21HZW5lcmFsIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFN1YnN0YW5jZVNvdXJjZU1hdGVyaWFsT3JnYW5pc21PcmdhbmlzbUdlbmVyYWxBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUga2luZ2RvbSBvZiBhbiBvcmdhbmlzbSBzaGFsbCBiZSBzcGVjaWZpZWQuXHJcbiAgICovXHJcbiAga2luZ2RvbT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBoeWx1bSBvZiBhbiBvcmdhbmlzbSBzaGFsbCBiZSBzcGVjaWZpZWQuXHJcbiAgICovXHJcbiAgcGh5bHVtPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgY2xhc3Mgb2YgYW4gb3JnYW5pc20gc2hhbGwgYmUgc3BlY2lmaWVkLlxyXG4gICAqL1xyXG4gIGNsYXNzPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgb3JkZXIgb2YgYW4gb3JnYW5pc20gc2hhbGwgYmUgc3BlY2lmaWVkLC5cclxuICAgKi9cclxuICBvcmRlcj86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiA0LjkuMTMuNy4xIEtpbmdkb20gKENvbmRpdGlvbmFsKS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTdWJzdGFuY2VTb3VyY2VNYXRlcmlhbE9yZ2FuaXNtT3JnYW5pc21HZW5lcmFsIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnU3Vic3RhbmNlU291cmNlTWF0ZXJpYWxPcmdhbmlzbU9yZ2FuaXNtR2VuZXJhbCc7XHJcbiAgLyoqXHJcbiAgICogVGhlIGtpbmdkb20gb2YgYW4gb3JnYW5pc20gc2hhbGwgYmUgc3BlY2lmaWVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBraW5nZG9tPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwaHlsdW0gb2YgYW4gb3JnYW5pc20gc2hhbGwgYmUgc3BlY2lmaWVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwaHlsdW0/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNsYXNzIG9mIGFuIG9yZ2FuaXNtIHNoYWxsIGJlIHNwZWNpZmllZC5cclxuICAgKi9cclxuICBwdWJsaWMgY2xhc3M/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG9yZGVyIG9mIGFuIG9yZ2FuaXNtIHNoYWxsIGJlIHNwZWNpZmllZCwuXHJcbiAgICovXHJcbiAgcHVibGljIG9yZGVyPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFN1YnN0YW5jZVNvdXJjZU1hdGVyaWFsT3JnYW5pc21PcmdhbmlzbUdlbmVyYWwgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxTdWJzdGFuY2VTb3VyY2VNYXRlcmlhbE9yZ2FuaXNtT3JnYW5pc21HZW5lcmFsQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2tpbmdkb20nXSkgeyB0aGlzLmtpbmdkb20gPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmtpbmdkb20pOyB9XHJcbiAgICBpZiAoc291cmNlWydwaHlsdW0nXSkgeyB0aGlzLnBoeWx1bSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UucGh5bHVtKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY2xhc3MnXSkgeyB0aGlzLmNsYXNzID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jbGFzcyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ29yZGVyJ10pIHsgdGhpcy5vcmRlciA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2Uub3JkZXIpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAodGhpc1tcImtpbmdkb21cIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5raW5nZG9tLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInBoeWx1bVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnBoeWx1bS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJjbGFzc1wiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmNsYXNzLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcIm9yZGVyXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMub3JkZXIuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBTdWJzdGFuY2VTb3VyY2VNYXRlcmlhbE9yZ2FuaXNtIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFN1YnN0YW5jZVNvdXJjZU1hdGVyaWFsT3JnYW5pc21BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgZmFtaWx5IG9mIGFuIG9yZ2FuaXNtIHNoYWxsIGJlIHNwZWNpZmllZC5cclxuICAgKi9cclxuICBmYW1pbHk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBnZW51cyBvZiBhbiBvcmdhbmlzbSBzaGFsbCBiZSBzcGVjaWZpZWQ7IHJlZmVycyB0byB0aGUgTGF0aW4gZXBpdGhldCBvZiB0aGUgZ2VudXMgZWxlbWVudCBvZiB0aGUgcGxhbnQvYW5pbWFsIHNjaWVudGlmaWMgbmFtZTsgaXQgaXMgcHJlc2VudCBpbiBuYW1lcyBmb3IgZ2VuZXJhLCBzcGVjaWVzIGFuZCBpbmZyYXNwZWNpZXMuXHJcbiAgICovXHJcbiAgZ2VudXM/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzcGVjaWVzIG9mIGFuIG9yZ2FuaXNtIHNoYWxsIGJlIHNwZWNpZmllZDsgcmVmZXJzIHRvIHRoZSBMYXRpbiBlcGl0aGV0IG9mIHRoZSBzcGVjaWVzIG9mIHRoZSBwbGFudC9hbmltYWw7IGl0IGlzIHByZXNlbnQgaW4gbmFtZXMgZm9yIHNwZWNpZXMgYW5kIGluZnJhc3BlY2llcy5cclxuICAgKi9cclxuICBzcGVjaWVzPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgSW50cmFzcGVjaWZpYyB0eXBlIG9mIGFuIG9yZ2FuaXNtIHNoYWxsIGJlIHNwZWNpZmllZC5cclxuICAgKi9cclxuICBpbnRyYXNwZWNpZmljVHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGludHJhc3BlY2lmaWMgZGVzY3JpcHRpb24gb2YgYW4gb3JnYW5pc20gc2hhbGwgYmUgc3BlY2lmaWVkIGJhc2VkIG9uIGEgY29udHJvbGxlZCB2b2NhYnVsYXJ5LiBGb3IgSW5mbHVlbnphIFZhY2NpbmUsIHRoZSBpbnRyYXNwZWNpZmljIGRlc2NyaXB0aW9uIHNoYWxsIGNvbnRhaW4gdGhlIHN5bnRheCBvZiB0aGUgYW50aWdlbiBpbiBsaW5lIHdpdGggdGhlIFdITyBjb252ZW50aW9uLlxyXG4gICAqL1xyXG4gIGludHJhc3BlY2lmaWNEZXNjcmlwdGlvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTdWJzdGFuY2VTb3VyY2VNYXRlcmlhbC5vcmdhbmlzbS5pbnRyYXNwZWNpZmljRGVzY3JpcHRpb25cclxuICAgKi9cclxuICBfaW50cmFzcGVjaWZpY0Rlc2NyaXB0aW9uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiA0LjkuMTMuNi4xIEF1dGhvciB0eXBlIChDb25kaXRpb25hbCkuXHJcbiAgICovXHJcbiAgYXV0aG9yPzogZmhpci5TdWJzdGFuY2VTb3VyY2VNYXRlcmlhbE9yZ2FuaXNtQXV0aG9yQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiA0LjkuMTMuOC4xIEh5YnJpZCBzcGVjaWVzIG1hdGVybmFsIG9yZ2FuaXNtIElEIChPcHRpb25hbCkuXHJcbiAgICovXHJcbiAgaHlicmlkPzogZmhpci5TdWJzdGFuY2VTb3VyY2VNYXRlcmlhbE9yZ2FuaXNtSHlicmlkQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogNC45LjEzLjcuMSBLaW5nZG9tIChDb25kaXRpb25hbCkuXHJcbiAgICovXHJcbiAgb3JnYW5pc21HZW5lcmFsPzogZmhpci5TdWJzdGFuY2VTb3VyY2VNYXRlcmlhbE9yZ2FuaXNtT3JnYW5pc21HZW5lcmFsQXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGlzIHN1YmNsYXVzZSBkZXNjcmliZXMgdGhlIG9yZ2FuaXNtIHdoaWNoIHRoZSBzdWJzdGFuY2UgaXMgZGVyaXZlZCBmcm9tLiBGb3IgdmFjY2luZXMsIHRoZSBwYXJlbnQgb3JnYW5pc20gc2hhbGwgYmUgc3BlY2lmaWVkIGJhc2VkIG9uIHRoZXNlIHN1YmNsYXVzZSBlbGVtZW50cy4gQXMgYW4gZXhhbXBsZSwgZnVsbCB0YXhvbm9teSB3aWxsIGJlIGRlc2NyaWJlZCBmb3IgdGhlIFN1YnN0YW5jZSBOYW1lOiAuLCBMZWFmLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFN1YnN0YW5jZVNvdXJjZU1hdGVyaWFsT3JnYW5pc20gZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdTdWJzdGFuY2VTb3VyY2VNYXRlcmlhbE9yZ2FuaXNtJztcclxuICAvKipcclxuICAgKiBUaGUgZmFtaWx5IG9mIGFuIG9yZ2FuaXNtIHNoYWxsIGJlIHNwZWNpZmllZC5cclxuICAgKi9cclxuICBwdWJsaWMgZmFtaWx5PzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBnZW51cyBvZiBhbiBvcmdhbmlzbSBzaGFsbCBiZSBzcGVjaWZpZWQ7IHJlZmVycyB0byB0aGUgTGF0aW4gZXBpdGhldCBvZiB0aGUgZ2VudXMgZWxlbWVudCBvZiB0aGUgcGxhbnQvYW5pbWFsIHNjaWVudGlmaWMgbmFtZTsgaXQgaXMgcHJlc2VudCBpbiBuYW1lcyBmb3IgZ2VuZXJhLCBzcGVjaWVzIGFuZCBpbmZyYXNwZWNpZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGdlbnVzPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzcGVjaWVzIG9mIGFuIG9yZ2FuaXNtIHNoYWxsIGJlIHNwZWNpZmllZDsgcmVmZXJzIHRvIHRoZSBMYXRpbiBlcGl0aGV0IG9mIHRoZSBzcGVjaWVzIG9mIHRoZSBwbGFudC9hbmltYWw7IGl0IGlzIHByZXNlbnQgaW4gbmFtZXMgZm9yIHNwZWNpZXMgYW5kIGluZnJhc3BlY2llcy5cclxuICAgKi9cclxuICBwdWJsaWMgc3BlY2llcz86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgSW50cmFzcGVjaWZpYyB0eXBlIG9mIGFuIG9yZ2FuaXNtIHNoYWxsIGJlIHNwZWNpZmllZC5cclxuICAgKi9cclxuICBwdWJsaWMgaW50cmFzcGVjaWZpY1R5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGludHJhc3BlY2lmaWMgZGVzY3JpcHRpb24gb2YgYW4gb3JnYW5pc20gc2hhbGwgYmUgc3BlY2lmaWVkIGJhc2VkIG9uIGEgY29udHJvbGxlZCB2b2NhYnVsYXJ5LiBGb3IgSW5mbHVlbnphIFZhY2NpbmUsIHRoZSBpbnRyYXNwZWNpZmljIGRlc2NyaXB0aW9uIHNoYWxsIGNvbnRhaW4gdGhlIHN5bnRheCBvZiB0aGUgYW50aWdlbiBpbiBsaW5lIHdpdGggdGhlIFdITyBjb252ZW50aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpbnRyYXNwZWNpZmljRGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIDQuOS4xMy42LjEgQXV0aG9yIHR5cGUgKENvbmRpdGlvbmFsKS5cclxuICAgKi9cclxuICBwdWJsaWMgYXV0aG9yOiBmaGlyLlN1YnN0YW5jZVNvdXJjZU1hdGVyaWFsT3JnYW5pc21BdXRob3JbXTtcclxuICAvKipcclxuICAgKiA0LjkuMTMuOC4xIEh5YnJpZCBzcGVjaWVzIG1hdGVybmFsIG9yZ2FuaXNtIElEIChPcHRpb25hbCkuXHJcbiAgICovXHJcbiAgcHVibGljIGh5YnJpZD86IGZoaXIuU3Vic3RhbmNlU291cmNlTWF0ZXJpYWxPcmdhbmlzbUh5YnJpZHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogNC45LjEzLjcuMSBLaW5nZG9tIChDb25kaXRpb25hbCkuXHJcbiAgICovXHJcbiAgcHVibGljIG9yZ2FuaXNtR2VuZXJhbD86IGZoaXIuU3Vic3RhbmNlU291cmNlTWF0ZXJpYWxPcmdhbmlzbU9yZ2FuaXNtR2VuZXJhbHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgU3Vic3RhbmNlU291cmNlTWF0ZXJpYWxPcmdhbmlzbSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFN1YnN0YW5jZVNvdXJjZU1hdGVyaWFsT3JnYW5pc21BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnZmFtaWx5J10pIHsgdGhpcy5mYW1pbHkgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmZhbWlseSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2dlbnVzJ10pIHsgdGhpcy5nZW51cyA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuZ2VudXMpOyB9XHJcbiAgICBpZiAoc291cmNlWydzcGVjaWVzJ10pIHsgdGhpcy5zcGVjaWVzID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5zcGVjaWVzKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaW50cmFzcGVjaWZpY1R5cGUnXSkgeyB0aGlzLmludHJhc3BlY2lmaWNUeXBlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5pbnRyYXNwZWNpZmljVHlwZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2ludHJhc3BlY2lmaWNEZXNjcmlwdGlvbiddKSB7IHRoaXMuaW50cmFzcGVjaWZpY0Rlc2NyaXB0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5pbnRyYXNwZWNpZmljRGVzY3JpcHRpb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2ludHJhc3BlY2lmaWNEZXNjcmlwdGlvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLmludHJhc3BlY2lmaWNEZXNjcmlwdGlvbikgeyB0aGlzLmludHJhc3BlY2lmaWNEZXNjcmlwdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9pbnRyYXNwZWNpZmljRGVzY3JpcHRpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5pbnRyYXNwZWNpZmljRGVzY3JpcHRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5faW50cmFzcGVjaWZpY0Rlc2NyaXB0aW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydhdXRob3InXSkgeyB0aGlzLmF1dGhvciA9IHNvdXJjZS5hdXRob3IubWFwKCh4KSA9PiBuZXcgZmhpci5TdWJzdGFuY2VTb3VyY2VNYXRlcmlhbE9yZ2FuaXNtQXV0aG9yKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYXV0aG9yID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2h5YnJpZCddKSB7IHRoaXMuaHlicmlkID0gbmV3IGZoaXIuU3Vic3RhbmNlU291cmNlTWF0ZXJpYWxPcmdhbmlzbUh5YnJpZChzb3VyY2UuaHlicmlkKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnb3JnYW5pc21HZW5lcmFsJ10pIHsgdGhpcy5vcmdhbmlzbUdlbmVyYWwgPSBuZXcgZmhpci5TdWJzdGFuY2VTb3VyY2VNYXRlcmlhbE9yZ2FuaXNtT3JnYW5pc21HZW5lcmFsKHNvdXJjZS5vcmdhbmlzbUdlbmVyYWwpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAodGhpc1tcImZhbWlseVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmZhbWlseS5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJnZW51c1wiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLmdlbnVzLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInNwZWNpZXNcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5zcGVjaWVzLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImludHJhc3BlY2lmaWNUeXBlXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuaW50cmFzcGVjaWZpY1R5cGUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wiaW50cmFzcGVjaWZpY0Rlc2NyaXB0aW9uXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuaW50cmFzcGVjaWZpY0Rlc2NyaXB0aW9uLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImF1dGhvclwiXSkgeyB0aGlzLmF1dGhvci5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIGlmICh0aGlzW1wiaHlicmlkXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuaHlicmlkLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcIm9yZ2FuaXNtR2VuZXJhbFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm9yZ2FuaXNtR2VuZXJhbC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFN1YnN0YW5jZVNvdXJjZU1hdGVyaWFsUGFydERlc2NyaXB0aW9uIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFN1YnN0YW5jZVNvdXJjZU1hdGVyaWFsUGFydERlc2NyaXB0aW9uQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogRW50aXR5IG9mIGFuYXRvbWljYWwgb3JpZ2luIG9mIHNvdXJjZSBtYXRlcmlhbCB3aXRoaW4gYW4gb3JnYW5pc20uXHJcbiAgICovXHJcbiAgcGFydD86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRldGFpbGVkIGFuYXRvbWljIGxvY2F0aW9uIHdoZW4gdGhlIHBhcnQgY2FuIGJlIGV4dHJhY3RlZCBmcm9tIGRpZmZlcmVudCBhbmF0b21pY2FsIGxvY2F0aW9ucyBvZiB0aGUgb3JnYW5pc20uIE11bHRpcGxlIGFsdGVybmF0aXZlIGxvY2F0aW9ucyBtYXkgYXBwbHkuXHJcbiAgICovXHJcbiAgcGFydExvY2F0aW9uPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRvIGRvLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFN1YnN0YW5jZVNvdXJjZU1hdGVyaWFsUGFydERlc2NyaXB0aW9uIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnU3Vic3RhbmNlU291cmNlTWF0ZXJpYWxQYXJ0RGVzY3JpcHRpb24nO1xyXG4gIC8qKlxyXG4gICAqIEVudGl0eSBvZiBhbmF0b21pY2FsIG9yaWdpbiBvZiBzb3VyY2UgbWF0ZXJpYWwgd2l0aGluIGFuIG9yZ2FuaXNtLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXJ0PzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkZXRhaWxlZCBhbmF0b21pYyBsb2NhdGlvbiB3aGVuIHRoZSBwYXJ0IGNhbiBiZSBleHRyYWN0ZWQgZnJvbSBkaWZmZXJlbnQgYW5hdG9taWNhbCBsb2NhdGlvbnMgb2YgdGhlIG9yZ2FuaXNtLiBNdWx0aXBsZSBhbHRlcm5hdGl2ZSBsb2NhdGlvbnMgbWF5IGFwcGx5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXJ0TG9jYXRpb24/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgU3Vic3RhbmNlU291cmNlTWF0ZXJpYWxQYXJ0RGVzY3JpcHRpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxTdWJzdGFuY2VTb3VyY2VNYXRlcmlhbFBhcnREZXNjcmlwdGlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydwYXJ0J10pIHsgdGhpcy5wYXJ0ID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5wYXJ0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncGFydExvY2F0aW9uJ10pIHsgdGhpcy5wYXJ0TG9jYXRpb24gPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnBhcnRMb2NhdGlvbik7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKCk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oKTtcclxuICAgIGlmICh0aGlzW1wicGFydFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnBhcnQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wicGFydExvY2F0aW9uXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMucGFydExvY2F0aW9uLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgU3Vic3RhbmNlU291cmNlTWF0ZXJpYWwgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3Vic3RhbmNlU291cmNlTWF0ZXJpYWxBcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJTdWJzdGFuY2VTb3VyY2VNYXRlcmlhbFwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBHZW5lcmFsIGhpZ2ggbGV2ZWwgY2xhc3NpZmljYXRpb24gb2YgdGhlIHNvdXJjZSBtYXRlcmlhbCBzcGVjaWZpYyB0byB0aGUgb3JpZ2luIG9mIHRoZSBtYXRlcmlhbC5cclxuICAgKi9cclxuICBzb3VyY2VNYXRlcmlhbENsYXNzPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdHlwZSBvZiB0aGUgc291cmNlIG1hdGVyaWFsIHNoYWxsIGJlIHNwZWNpZmllZCBiYXNlZCBvbiBhIGNvbnRyb2xsZWQgdm9jYWJ1bGFyeS4gRm9yIHZhY2NpbmVzLCB0aGlzIHN1YmNsYXVzZSByZWZlcnMgdG8gdGhlIGNsYXNzIG9mIGluZmVjdGlvdXMgYWdlbnQuXHJcbiAgICovXHJcbiAgc291cmNlTWF0ZXJpYWxUeXBlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc3RhdGUgb2YgdGhlIHNvdXJjZSBtYXRlcmlhbCB3aGVuIGV4dHJhY3RlZC5cclxuICAgKi9cclxuICBzb3VyY2VNYXRlcmlhbFN0YXRlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdW5pcXVlIGlkZW50aWZpZXIgYXNzb2NpYXRlZCB3aXRoIHRoZSBzb3VyY2UgbWF0ZXJpYWwgcGFyZW50IG9yZ2FuaXNtIHNoYWxsIGJlIHNwZWNpZmllZC5cclxuICAgKi9cclxuICBvcmdhbmlzbUlkPzogZmhpci5JZGVudGlmaWVyQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG9yZ2FuaXNtIGFjY2VwdGVkIFNjaWVudGlmaWMgbmFtZSBzaGFsbCBiZSBwcm92aWRlZCBiYXNlZCBvbiB0aGUgb3JnYW5pc20gdGF4b25vbXkuXHJcbiAgICovXHJcbiAgb3JnYW5pc21OYW1lPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFN1YnN0YW5jZVNvdXJjZU1hdGVyaWFsLm9yZ2FuaXNtTmFtZVxyXG4gICAqL1xyXG4gIF9vcmdhbmlzbU5hbWU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXJlbnQgb2YgdGhlIGhlcmJhbCBkcnVnIEdpbmtnbyBiaWxvYmEsIExlYWYgaXMgdGhlIHN1YnN0YW5jZSBJRCBvZiB0aGUgc3Vic3RhbmNlIChmcmVzaCkgb2YgR2lua2dvIGJpbG9iYSBMLiBvciBHaW5rZ28gYmlsb2JhIEwuIChXaG9sZSBwbGFudCkuXHJcbiAgICovXHJcbiAgcGFyZW50U3Vic3RhbmNlSWQ/OiBmaGlyLklkZW50aWZpZXJBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXJlbnQgc3Vic3RhbmNlIG9mIHRoZSBIZXJiYWwgRHJ1Zywgb3IgSGVyYmFsIHByZXBhcmF0aW9uLlxyXG4gICAqL1xyXG4gIHBhcmVudFN1YnN0YW5jZU5hbWU/OiBmaGlyLkZoaXJTdHJpbmdbXXxzdHJpbmdbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFN1YnN0YW5jZVNvdXJjZU1hdGVyaWFsLnBhcmVudFN1YnN0YW5jZU5hbWVcclxuICAgKi9cclxuICBfcGFyZW50U3Vic3RhbmNlTmFtZT86KGZoaXIuRmhpckVsZW1lbnRBcmdzfG51bGwpW107XHJcbiAgLyoqXHJcbiAgICogVGhlIGNvdW50cnkgd2hlcmUgdGhlIHBsYW50IG1hdGVyaWFsIGlzIGhhcnZlc3RlZCBvciB0aGUgY291bnRyaWVzIHdoZXJlIHRoZSBwbGFzbWEgaXMgc291cmNlZCBmcm9tIGFzIGxhaWQgZG93biBpbiBhY2NvcmRhbmNlIHdpdGggdGhlIFBsYXNtYSBNYXN0ZXIgRmlsZS4gRm9yIOKAnFBsYXNtYS1kZXJpdmVkIHN1YnN0YW5jZXPigJ0gdGhlIGF0dHJpYnV0ZSBjb3VudHJ5IG9mIG9yaWdpbiBwcm92aWRlcyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgY291bnRyaWVzIHVzZWQgZm9yIHRoZSBtYW51ZmFjdHVyaW5nIG9mIHRoZSBDcnlvcG9vciBwbGFtYSBvciBDcmlvcHJlY2lwaXRhdGUuXHJcbiAgICovXHJcbiAgY291bnRyeU9mT3JpZ2luPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwbGFjZS9yZWdpb24gd2hlcmUgdGhlIHBsYW50IGlzIGhhcnZlc3RlZCBvciB0aGUgcGxhY2VzL3JlZ2lvbnMgd2hlcmUgdGhlIGFuaW1hbCBzb3VyY2UgbWF0ZXJpYWwgaGFzIGl0cyBoYWJpdGF0LlxyXG4gICAqL1xyXG4gIGdlb2dyYXBoaWNhbExvY2F0aW9uPzogZmhpci5GaGlyU3RyaW5nW118c3RyaW5nW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTdWJzdGFuY2VTb3VyY2VNYXRlcmlhbC5nZW9ncmFwaGljYWxMb2NhdGlvblxyXG4gICAqL1xyXG4gIF9nZW9ncmFwaGljYWxMb2NhdGlvbj86KGZoaXIuRmhpckVsZW1lbnRBcmdzfG51bGwpW107XHJcbiAgLyoqXHJcbiAgICogU3RhZ2Ugb2YgbGlmZSBmb3IgYW5pbWFscywgcGxhbnRzLCBpbnNlY3RzIGFuZCBtaWNyb29yZ2FuaXNtcy4gVGhpcyBpbmZvcm1hdGlvbiBzaGFsbCBiZSBwcm92aWRlZCBvbmx5IHdoZW4gdGhlIHN1YnN0YW5jZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCBpbiB0aGVzZSBzdGFnZXMgKGUuZy4gZm9ldGFsIGJvdmluZSBzZXJ1bSkuXHJcbiAgICovXHJcbiAgZGV2ZWxvcG1lbnRTdGFnZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTWFueSBjb21wbGV4IG1hdGVyaWFscyBhcmUgZnJhY3Rpb25zIG9mIHBhcnRzIG9mIHBsYW50cywgYW5pbWFscywgb3IgbWluZXJhbHMuIEZyYWN0aW9uIGVsZW1lbnRzIGFyZSBvZnRlbiBuZWNlc3NhcnkgdG8gZGVmaW5lIGJvdGggU3Vic3RhbmNlcyBhbmQgU3BlY2lmaWVkIEdyb3VwIDEgU3Vic3RhbmNlcy4gRm9yIHN1YnN0YW5jZXMgZGVyaXZlZCBmcm9tIFBsYW50cywgZnJhY3Rpb24gaW5mb3JtYXRpb24gd2lsbCBiZSBjYXB0dXJlZCBhdCB0aGUgU3Vic3RhbmNlIGluZm9ybWF0aW9uIGxldmVsICggLiBPaWxzLCBKdWljZXMgYW5kIEV4dWRhdGVzKS4gQWRkaXRpb25hbCBpbmZvcm1hdGlvbiBmb3IgRXh0cmFjdHMsIHN1Y2ggYXMgZXh0cmFjdGlvbiBzb2x2ZW50IGNvbXBvc2l0aW9uLCB3aWxsIGJlIGNhcHR1cmVkIGF0IHRoZSBTcGVjaWZpZWQgU3Vic3RhbmNlIEdyb3VwIDEgaW5mb3JtYXRpb24gbGV2ZWwuIEZvciBwbGFzbWEtZGVyaXZlZCBwcm9kdWN0cyBmcmFjdGlvbiBpbmZvcm1hdGlvbiB3aWxsIGJlIGNhcHR1cmVkIGF0IHRoZSBTdWJzdGFuY2UgYW5kIHRoZSBTcGVjaWZpZWQgU3Vic3RhbmNlIEdyb3VwIDEgbGV2ZWxzLlxyXG4gICAqL1xyXG4gIGZyYWN0aW9uRGVzY3JpcHRpb24/OiBmaGlyLlN1YnN0YW5jZVNvdXJjZU1hdGVyaWFsRnJhY3Rpb25EZXNjcmlwdGlvbkFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBzdWJjbGF1c2UgZGVzY3JpYmVzIHRoZSBvcmdhbmlzbSB3aGljaCB0aGUgc3Vic3RhbmNlIGlzIGRlcml2ZWQgZnJvbS4gRm9yIHZhY2NpbmVzLCB0aGUgcGFyZW50IG9yZ2FuaXNtIHNoYWxsIGJlIHNwZWNpZmllZCBiYXNlZCBvbiB0aGVzZSBzdWJjbGF1c2UgZWxlbWVudHMuIEFzIGFuIGV4YW1wbGUsIGZ1bGwgdGF4b25vbXkgd2lsbCBiZSBkZXNjcmliZWQgZm9yIHRoZSBTdWJzdGFuY2UgTmFtZTogLiwgTGVhZi5cclxuICAgKi9cclxuICBvcmdhbmlzbT86IGZoaXIuU3Vic3RhbmNlU291cmNlTWF0ZXJpYWxPcmdhbmlzbUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRvIGRvLlxyXG4gICAqL1xyXG4gIHBhcnREZXNjcmlwdGlvbj86IGZoaXIuU3Vic3RhbmNlU291cmNlTWF0ZXJpYWxQYXJ0RGVzY3JpcHRpb25BcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogU291cmNlIG1hdGVyaWFsIHNoYWxsIGNhcHR1cmUgaW5mb3JtYXRpb24gb24gdGhlIHRheG9ub21pYyBhbmQgYW5hdG9taWNhbCBvcmlnaW5zIGFzIHdlbGwgYXMgdGhlIGZyYWN0aW9uIG9mIGEgbWF0ZXJpYWwgdGhhdCBjYW4gcmVzdWx0IGluIG9yIGNhbiBiZSBtb2RpZmllZCB0byBmb3JtIGEgc3Vic3RhbmNlLiBUaGlzIHNldCBvZiBkYXRhIGVsZW1lbnRzIHNoYWxsIGJlIHVzZWQgdG8gZGVmaW5lIHBvbHltZXIgc3Vic3RhbmNlcyBpc29sYXRlZCBmcm9tIGJpb2xvZ2ljYWwgbWF0cmljZXMuIFRheG9ub21pYyBhbmQgYW5hdG9taWNhbCBvcmlnaW5zIHNoYWxsIGJlIGRlc2NyaWJlZCB1c2luZyBhIGNvbnRyb2xsZWQgdm9jYWJ1bGFyeSBhcyByZXF1aXJlZC4gVGhpcyBpbmZvcm1hdGlvbiBpcyBjYXB0dXJlZCBmb3IgbmF0dXJhbGx5IGRlcml2ZWQgcG9seW1lcnMgKCAuIHN0YXJjaCkgYW5kIHN0cnVjdHVyYWxseSBkaXZlcnNlIHN1YnN0YW5jZXMuIEZvciBPcmdhbmlzbXMgYmVsb25naW5nIHRvIHRoZSBLaW5nZG9tIFBsYW50YWUgdGhlIFN1YnN0YW5jZSBsZXZlbCBkZWZpbmVzIHRoZSBmcmVzaCBtYXRlcmlhbCBvZiBhIHNpbmdsZSBzcGVjaWVzIG9yIGluZnJhc3BlY2llcywgdGhlIEhlcmJhbCBEcnVnIGFuZCB0aGUgSGVyYmFsIHByZXBhcmF0aW9uLiBGb3IgSGVyYmFsIHByZXBhcmF0aW9ucywgdGhlIGZyYWN0aW9uIGluZm9ybWF0aW9uIHdpbGwgYmUgY2FwdHVyZWQgYXQgdGhlIFN1YnN0YW5jZSBpbmZvcm1hdGlvbiBsZXZlbCBhbmQgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiBmb3IgaGVyYmFsIGV4dHJhY3RzIHdpbGwgYmUgY2FwdHVyZWQgYXQgdGhlIFNwZWNpZmllZCBTdWJzdGFuY2UgR3JvdXAgMSBpbmZvcm1hdGlvbiBsZXZlbC4gU2VlIGZvciBmdXJ0aGVyIGV4cGxhbmF0aW9uIHRoZSBTdWJzdGFuY2UgQ2xhc3M6IFN0cnVjdHVyYWxseSBEaXZlcnNlIGFuZCB0aGUgaGVyYmFsIGFubmV4LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFN1YnN0YW5jZVNvdXJjZU1hdGVyaWFsIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdTdWJzdGFuY2VTb3VyY2VNYXRlcmlhbCc7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJTdWJzdGFuY2VTb3VyY2VNYXRlcmlhbFwiO1xyXG4gIC8qKlxyXG4gICAqIEdlbmVyYWwgaGlnaCBsZXZlbCBjbGFzc2lmaWNhdGlvbiBvZiB0aGUgc291cmNlIG1hdGVyaWFsIHNwZWNpZmljIHRvIHRoZSBvcmlnaW4gb2YgdGhlIG1hdGVyaWFsLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzb3VyY2VNYXRlcmlhbENsYXNzPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0eXBlIG9mIHRoZSBzb3VyY2UgbWF0ZXJpYWwgc2hhbGwgYmUgc3BlY2lmaWVkIGJhc2VkIG9uIGEgY29udHJvbGxlZCB2b2NhYnVsYXJ5LiBGb3IgdmFjY2luZXMsIHRoaXMgc3ViY2xhdXNlIHJlZmVycyB0byB0aGUgY2xhc3Mgb2YgaW5mZWN0aW91cyBhZ2VudC5cclxuICAgKi9cclxuICBwdWJsaWMgc291cmNlTWF0ZXJpYWxUeXBlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzdGF0ZSBvZiB0aGUgc291cmNlIG1hdGVyaWFsIHdoZW4gZXh0cmFjdGVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzb3VyY2VNYXRlcmlhbFN0YXRlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB1bmlxdWUgaWRlbnRpZmllciBhc3NvY2lhdGVkIHdpdGggdGhlIHNvdXJjZSBtYXRlcmlhbCBwYXJlbnQgb3JnYW5pc20gc2hhbGwgYmUgc3BlY2lmaWVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvcmdhbmlzbUlkPzogZmhpci5JZGVudGlmaWVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgb3JnYW5pc20gYWNjZXB0ZWQgU2NpZW50aWZpYyBuYW1lIHNoYWxsIGJlIHByb3ZpZGVkIGJhc2VkIG9uIHRoZSBvcmdhbmlzbSB0YXhvbm9teS5cclxuICAgKi9cclxuICBwdWJsaWMgb3JnYW5pc21OYW1lPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcGFyZW50IG9mIHRoZSBoZXJiYWwgZHJ1ZyBHaW5rZ28gYmlsb2JhLCBMZWFmIGlzIHRoZSBzdWJzdGFuY2UgSUQgb2YgdGhlIHN1YnN0YW5jZSAoZnJlc2gpIG9mIEdpbmtnbyBiaWxvYmEgTC4gb3IgR2lua2dvIGJpbG9iYSBMLiAoV2hvbGUgcGxhbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXJlbnRTdWJzdGFuY2VJZDogZmhpci5JZGVudGlmaWVyW107XHJcbiAgLyoqXHJcbiAgICogVGhlIHBhcmVudCBzdWJzdGFuY2Ugb2YgdGhlIEhlcmJhbCBEcnVnLCBvciBIZXJiYWwgcHJlcGFyYXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHBhcmVudFN1YnN0YW5jZU5hbWU6IGZoaXIuRmhpclN0cmluZ1tdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjb3VudHJ5IHdoZXJlIHRoZSBwbGFudCBtYXRlcmlhbCBpcyBoYXJ2ZXN0ZWQgb3IgdGhlIGNvdW50cmllcyB3aGVyZSB0aGUgcGxhc21hIGlzIHNvdXJjZWQgZnJvbSBhcyBsYWlkIGRvd24gaW4gYWNjb3JkYW5jZSB3aXRoIHRoZSBQbGFzbWEgTWFzdGVyIEZpbGUuIEZvciDigJxQbGFzbWEtZGVyaXZlZCBzdWJzdGFuY2Vz4oCdIHRoZSBhdHRyaWJ1dGUgY291bnRyeSBvZiBvcmlnaW4gcHJvdmlkZXMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGNvdW50cmllcyB1c2VkIGZvciB0aGUgbWFudWZhY3R1cmluZyBvZiB0aGUgQ3J5b3Bvb3IgcGxhbWEgb3IgQ3Jpb3ByZWNpcGl0YXRlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb3VudHJ5T2ZPcmlnaW46IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogVGhlIHBsYWNlL3JlZ2lvbiB3aGVyZSB0aGUgcGxhbnQgaXMgaGFydmVzdGVkIG9yIHRoZSBwbGFjZXMvcmVnaW9ucyB3aGVyZSB0aGUgYW5pbWFsIHNvdXJjZSBtYXRlcmlhbCBoYXMgaXRzIGhhYml0YXQuXHJcbiAgICovXHJcbiAgcHVibGljIGdlb2dyYXBoaWNhbExvY2F0aW9uOiBmaGlyLkZoaXJTdHJpbmdbXTtcclxuICAvKipcclxuICAgKiBTdGFnZSBvZiBsaWZlIGZvciBhbmltYWxzLCBwbGFudHMsIGluc2VjdHMgYW5kIG1pY3Jvb3JnYW5pc21zLiBUaGlzIGluZm9ybWF0aW9uIHNoYWxsIGJlIHByb3ZpZGVkIG9ubHkgd2hlbiB0aGUgc3Vic3RhbmNlIGlzIHNpZ25pZmljYW50bHkgZGlmZmVyZW50IGluIHRoZXNlIHN0YWdlcyAoZS5nLiBmb2V0YWwgYm92aW5lIHNlcnVtKS5cclxuICAgKi9cclxuICBwdWJsaWMgZGV2ZWxvcG1lbnRTdGFnZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBNYW55IGNvbXBsZXggbWF0ZXJpYWxzIGFyZSBmcmFjdGlvbnMgb2YgcGFydHMgb2YgcGxhbnRzLCBhbmltYWxzLCBvciBtaW5lcmFscy4gRnJhY3Rpb24gZWxlbWVudHMgYXJlIG9mdGVuIG5lY2Vzc2FyeSB0byBkZWZpbmUgYm90aCBTdWJzdGFuY2VzIGFuZCBTcGVjaWZpZWQgR3JvdXAgMSBTdWJzdGFuY2VzLiBGb3Igc3Vic3RhbmNlcyBkZXJpdmVkIGZyb20gUGxhbnRzLCBmcmFjdGlvbiBpbmZvcm1hdGlvbiB3aWxsIGJlIGNhcHR1cmVkIGF0IHRoZSBTdWJzdGFuY2UgaW5mb3JtYXRpb24gbGV2ZWwgKCAuIE9pbHMsIEp1aWNlcyBhbmQgRXh1ZGF0ZXMpLiBBZGRpdGlvbmFsIGluZm9ybWF0aW9uIGZvciBFeHRyYWN0cywgc3VjaCBhcyBleHRyYWN0aW9uIHNvbHZlbnQgY29tcG9zaXRpb24sIHdpbGwgYmUgY2FwdHVyZWQgYXQgdGhlIFNwZWNpZmllZCBTdWJzdGFuY2UgR3JvdXAgMSBpbmZvcm1hdGlvbiBsZXZlbC4gRm9yIHBsYXNtYS1kZXJpdmVkIHByb2R1Y3RzIGZyYWN0aW9uIGluZm9ybWF0aW9uIHdpbGwgYmUgY2FwdHVyZWQgYXQgdGhlIFN1YnN0YW5jZSBhbmQgdGhlIFNwZWNpZmllZCBTdWJzdGFuY2UgR3JvdXAgMSBsZXZlbHMuXHJcbiAgICovXHJcbiAgcHVibGljIGZyYWN0aW9uRGVzY3JpcHRpb246IGZoaXIuU3Vic3RhbmNlU291cmNlTWF0ZXJpYWxGcmFjdGlvbkRlc2NyaXB0aW9uW107XHJcbiAgLyoqXHJcbiAgICogVGhpcyBzdWJjbGF1c2UgZGVzY3JpYmVzIHRoZSBvcmdhbmlzbSB3aGljaCB0aGUgc3Vic3RhbmNlIGlzIGRlcml2ZWQgZnJvbS4gRm9yIHZhY2NpbmVzLCB0aGUgcGFyZW50IG9yZ2FuaXNtIHNoYWxsIGJlIHNwZWNpZmllZCBiYXNlZCBvbiB0aGVzZSBzdWJjbGF1c2UgZWxlbWVudHMuIEFzIGFuIGV4YW1wbGUsIGZ1bGwgdGF4b25vbXkgd2lsbCBiZSBkZXNjcmliZWQgZm9yIHRoZSBTdWJzdGFuY2UgTmFtZTogLiwgTGVhZi5cclxuICAgKi9cclxuICBwdWJsaWMgb3JnYW5pc20/OiBmaGlyLlN1YnN0YW5jZVNvdXJjZU1hdGVyaWFsT3JnYW5pc218dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRvIGRvLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXJ0RGVzY3JpcHRpb246IGZoaXIuU3Vic3RhbmNlU291cmNlTWF0ZXJpYWxQYXJ0RGVzY3JpcHRpb25bXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBTdWJzdGFuY2VTb3VyY2VNYXRlcmlhbCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFN1YnN0YW5jZVNvdXJjZU1hdGVyaWFsQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ1N1YnN0YW5jZVNvdXJjZU1hdGVyaWFsJztcclxuICAgIGlmIChzb3VyY2VbJ3NvdXJjZU1hdGVyaWFsQ2xhc3MnXSkgeyB0aGlzLnNvdXJjZU1hdGVyaWFsQ2xhc3MgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnNvdXJjZU1hdGVyaWFsQ2xhc3MpOyB9XHJcbiAgICBpZiAoc291cmNlWydzb3VyY2VNYXRlcmlhbFR5cGUnXSkgeyB0aGlzLnNvdXJjZU1hdGVyaWFsVHlwZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2Uuc291cmNlTWF0ZXJpYWxUeXBlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc291cmNlTWF0ZXJpYWxTdGF0ZSddKSB7IHRoaXMuc291cmNlTWF0ZXJpYWxTdGF0ZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2Uuc291cmNlTWF0ZXJpYWxTdGF0ZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ29yZ2FuaXNtSWQnXSkgeyB0aGlzLm9yZ2FuaXNtSWQgPSBuZXcgZmhpci5JZGVudGlmaWVyKHNvdXJjZS5vcmdhbmlzbUlkKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnb3JnYW5pc21OYW1lJ10pIHsgdGhpcy5vcmdhbmlzbU5hbWUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLm9yZ2FuaXNtTmFtZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfb3JnYW5pc21OYW1lJ10pIHtcclxuICAgICAgaWYgKHRoaXMub3JnYW5pc21OYW1lKSB7IHRoaXMub3JnYW5pc21OYW1lLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX29yZ2FuaXNtTmFtZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLm9yZ2FuaXNtTmFtZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9vcmdhbmlzbU5hbWUgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3BhcmVudFN1YnN0YW5jZUlkJ10pIHsgdGhpcy5wYXJlbnRTdWJzdGFuY2VJZCA9IHNvdXJjZS5wYXJlbnRTdWJzdGFuY2VJZC5tYXAoKHgpID0+IG5ldyBmaGlyLklkZW50aWZpZXIoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wYXJlbnRTdWJzdGFuY2VJZCA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwYXJlbnRTdWJzdGFuY2VOYW1lJ10pIHsgdGhpcy5wYXJlbnRTdWJzdGFuY2VOYW1lID0gc291cmNlLnBhcmVudFN1YnN0YW5jZU5hbWUubWFwKCh4KSA9PiBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogeH0pKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucGFyZW50U3Vic3RhbmNlTmFtZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydfcGFyZW50U3Vic3RhbmNlTmFtZSddKSB7XHJcbiAgICAgIHNvdXJjZS5fcGFyZW50U3Vic3RhbmNlTmFtZS5mb3JFYWNoKCh4LGkpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5wYXJlbnRTdWJzdGFuY2VOYW1lLmxlbmd0aCA+PSBpKSB7IGlmICh4KSB7IHRoaXMucGFyZW50U3Vic3RhbmNlTmFtZVtpXS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoeCk7IH0gfVxyXG4gICAgICAgIGVsc2UgeyBpZiAoeCkgeyB0aGlzLnBhcmVudFN1YnN0YW5jZU5hbWUucHVzaChuZXcgZmhpci5GaGlyU3RyaW5nKHggYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPikpOyB9IH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydjb3VudHJ5T2ZPcmlnaW4nXSkgeyB0aGlzLmNvdW50cnlPZk9yaWdpbiA9IHNvdXJjZS5jb3VudHJ5T2ZPcmlnaW4ubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb3VudHJ5T2ZPcmlnaW4gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZ2VvZ3JhcGhpY2FsTG9jYXRpb24nXSkgeyB0aGlzLmdlb2dyYXBoaWNhbExvY2F0aW9uID0gc291cmNlLmdlb2dyYXBoaWNhbExvY2F0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHh9KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmdlb2dyYXBoaWNhbExvY2F0aW9uID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ19nZW9ncmFwaGljYWxMb2NhdGlvbiddKSB7XHJcbiAgICAgIHNvdXJjZS5fZ2VvZ3JhcGhpY2FsTG9jYXRpb24uZm9yRWFjaCgoeCxpKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuZ2VvZ3JhcGhpY2FsTG9jYXRpb24ubGVuZ3RoID49IGkpIHsgaWYgKHgpIHsgdGhpcy5nZW9ncmFwaGljYWxMb2NhdGlvbltpXS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoeCk7IH0gfVxyXG4gICAgICAgIGVsc2UgeyBpZiAoeCkgeyB0aGlzLmdlb2dyYXBoaWNhbExvY2F0aW9uLnB1c2gobmV3IGZoaXIuRmhpclN0cmluZyh4IGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pKTsgfSB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGV2ZWxvcG1lbnRTdGFnZSddKSB7IHRoaXMuZGV2ZWxvcG1lbnRTdGFnZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuZGV2ZWxvcG1lbnRTdGFnZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2ZyYWN0aW9uRGVzY3JpcHRpb24nXSkgeyB0aGlzLmZyYWN0aW9uRGVzY3JpcHRpb24gPSBzb3VyY2UuZnJhY3Rpb25EZXNjcmlwdGlvbi5tYXAoKHgpID0+IG5ldyBmaGlyLlN1YnN0YW5jZVNvdXJjZU1hdGVyaWFsRnJhY3Rpb25EZXNjcmlwdGlvbih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmZyYWN0aW9uRGVzY3JpcHRpb24gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnb3JnYW5pc20nXSkgeyB0aGlzLm9yZ2FuaXNtID0gbmV3IGZoaXIuU3Vic3RhbmNlU291cmNlTWF0ZXJpYWxPcmdhbmlzbShzb3VyY2Uub3JnYW5pc20pOyB9XHJcbiAgICBpZiAoc291cmNlWydwYXJ0RGVzY3JpcHRpb24nXSkgeyB0aGlzLnBhcnREZXNjcmlwdGlvbiA9IHNvdXJjZS5wYXJ0RGVzY3JpcHRpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5TdWJzdGFuY2VTb3VyY2VNYXRlcmlhbFBhcnREZXNjcmlwdGlvbih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnBhcnREZXNjcmlwdGlvbiA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbigpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKCk7XHJcbiAgICBpZiAoIXRoaXNbJ3Jlc291cmNlVHlwZSddKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHsgc2V2ZXJpdHk6ICdlcnJvcicsIGNvZGU6ICdyZXF1aXJlZCcsIGRpYWdub3N0aWNzOiAnTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSByZXNvdXJjZVR5cGU6XCJTdWJzdGFuY2VTb3VyY2VNYXRlcmlhbFwiIGZoaXI6IFN1YnN0YW5jZVNvdXJjZU1hdGVyaWFsLnJlc291cmNlVHlwZTpcIlN1YnN0YW5jZVNvdXJjZU1hdGVyaWFsXCInIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNbXCJzb3VyY2VNYXRlcmlhbENsYXNzXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMuc291cmNlTWF0ZXJpYWxDbGFzcy5kb01vZGVsVmFsaWRhdGlvbigpKTsgfVxyXG4gICAgaWYgKHRoaXNbXCJzb3VyY2VNYXRlcmlhbFR5cGVcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5zb3VyY2VNYXRlcmlhbFR5cGUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wic291cmNlTWF0ZXJpYWxTdGF0ZVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLnNvdXJjZU1hdGVyaWFsU3RhdGUuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wib3JnYW5pc21JZFwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm9yZ2FuaXNtSWQuZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH1cclxuICAgIGlmICh0aGlzW1wib3JnYW5pc21OYW1lXCJdKSB7IGlzc3Vlcy5wdXNoKC4uLnRoaXMub3JnYW5pc21OYW1lLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInBhcmVudFN1YnN0YW5jZUlkXCJdKSB7IHRoaXMucGFyZW50U3Vic3RhbmNlSWQuZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcInBhcmVudFN1YnN0YW5jZU5hbWVcIl0pIHsgdGhpcy5wYXJlbnRTdWJzdGFuY2VOYW1lLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJjb3VudHJ5T2ZPcmlnaW5cIl0pIHsgdGhpcy5jb3VudHJ5T2ZPcmlnaW4uZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImdlb2dyYXBoaWNhbExvY2F0aW9uXCJdKSB7IHRoaXMuZ2VvZ3JhcGhpY2FsTG9jYXRpb24uZm9yRWFjaCgoeCkgPT4geyBpc3N1ZXMucHVzaCguLi54LmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9KSB9XHJcbiAgICBpZiAodGhpc1tcImRldmVsb3BtZW50U3RhZ2VcIl0pIHsgaXNzdWVzLnB1c2goLi4udGhpcy5kZXZlbG9wbWVudFN0YWdlLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcImZyYWN0aW9uRGVzY3JpcHRpb25cIl0pIHsgdGhpcy5mcmFjdGlvbkRlc2NyaXB0aW9uLmZvckVhY2goKHgpID0+IHsgaXNzdWVzLnB1c2goLi4ueC5kb01vZGVsVmFsaWRhdGlvbigpKTsgfSkgfVxyXG4gICAgaWYgKHRoaXNbXCJvcmdhbmlzbVwiXSkgeyBpc3N1ZXMucHVzaCguLi50aGlzLm9yZ2FuaXNtLmRvTW9kZWxWYWxpZGF0aW9uKCkpOyB9XHJcbiAgICBpZiAodGhpc1tcInBhcnREZXNjcmlwdGlvblwiXSkgeyB0aGlzLnBhcnREZXNjcmlwdGlvbi5mb3JFYWNoKCh4KSA9PiB7IGlzc3Vlcy5wdXNoKC4uLnguZG9Nb2RlbFZhbGlkYXRpb24oKSk7IH0pIH1cclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbiJdfQ==