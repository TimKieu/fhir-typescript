// <auto-generated/>
// Contents of: hl7.fhir.r3.core version: 3.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: Provenance
import * as fhir from '../fhir.js';
// @ts-ignore
import { ProvenanceEntityRoleVsValidation } from '../fhirValueSets/ProvenanceEntityRoleVsValidation.js';
/**
 * Several agents may be associated (i.e. has some responsibility for an activity) with an activity and vice-versa.
 */
export class ProvenanceAgent extends fhir.BackboneElement {
    /**
     * Default constructor for ProvenanceAgent - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['role']) {
            this.role = source.role.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.role = [];
        }
        if (source['who']) {
            this.who = source.who;
        }
        else if (source['whoUri']) {
            this.who = new fhir.FhirUri({ value: source.whoUri });
        }
        else if (source['whoReference']) {
            this.who = new fhir.Reference(source.whoReference);
        }
        else {
            this.who = null;
        }
        if (source['onBehalfOf']) {
            this.onBehalfOf = source.onBehalfOf;
        }
        else if (source['onBehalfOfUri']) {
            this.onBehalfOf = new fhir.FhirUri({ value: source.onBehalfOfUri });
        }
        else if (source['onBehalfOfReference']) {
            this.onBehalfOf = new fhir.Reference(source.onBehalfOfReference);
        }
        if (source['relatedAgentType']) {
            this.relatedAgentType = new fhir.CodeableConcept(source.relatedAgentType);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Provenance.agent';
        }
        iss.push(...this.vOA('role', exp));
        iss.push(...this.vRS('who', exp));
        iss.push(...this.vOS('onBehalfOf', exp));
        iss.push(...this.vOS('relatedAgentType', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ProvenanceAgent._fts_dataType = 'ProvenanceAgent';
/**
 * Internal flag to properly serialize choice-type element Provenance.agent.who[x]
 */
ProvenanceAgent._fts_whoIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element Provenance.agent.onBehalfOf[x]
 */
ProvenanceAgent._fts_onBehalfOfIsChoice = true;
/**
 * Multiple userIds may be associated with the same Practitioner or other individual across various appearances, each with distinct privileges.
 */
export class ProvenanceEntity extends fhir.BackboneElement {
    /**
     * Default constructor for ProvenanceEntity - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['role']) {
            this.role = new fhir.FhirCode({ value: source.role });
        }
        else {
            this.role = null;
        }
        if (source['_role']) {
            if (this.role) {
                this.role.addExtendedProperties(source._role);
            }
            else {
                this.role = new fhir.FhirCode(source._role);
            }
        }
        if (source['what']) {
            this.what = source.what;
        }
        else if (source['whatUri']) {
            this.what = new fhir.FhirUri({ value: source.whatUri });
        }
        else if (source['whatReference']) {
            this.what = new fhir.Reference(source.whatReference);
        }
        else if (source['whatIdentifier']) {
            this.what = new fhir.Identifier(source.whatIdentifier);
        }
        else {
            this.what = null;
        }
        if (source['agent']) {
            this.agent = source.agent.map((x) => new fhir.ProvenanceAgent(x));
        }
        else {
            this.agent = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Provenance.entity';
        }
        iss.push(...this.vRSV('role', exp, 'ProvenanceEntityRole', ProvenanceEntityRoleVsValidation, 'r'));
        iss.push(...this.vRS('what', exp));
        iss.push(...this.vOA('agent', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ProvenanceEntity._fts_dataType = 'ProvenanceEntity';
/**
 * Internal flag to properly serialize choice-type element Provenance.entity.what[x]
 */
ProvenanceEntity._fts_whatIsChoice = true;
/**
 * Provenance of a resource is a record that describes entities and processes involved in producing and delivering or otherwise influencing that resource. Provenance provides a critical foundation for assessing authenticity, enabling trust, and allowing reproducibility. Provenance assertions are a form of contextual metadata and can themselves become important records with their own provenance. Provenance statement indicates clinical significance in terms of confidence in authenticity, reliability, and trustworthiness, integrity, and stage in lifecycle (e.g. Document Completion - has the artifact been legally authenticated), all of which may impact security, privacy, and trust policies.
 */
export class Provenance extends fhir.DomainResource {
    /**
     * Default constructor for Provenance - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'Provenance';
        if (source['target']) {
            this.target = source.target.map((x) => new fhir.Reference(x));
        }
        else {
            this.target = [];
        }
        if (source['period']) {
            this.period = new fhir.Period(source.period);
        }
        if (source['recorded']) {
            this.recorded = new fhir.FhirInstant({ value: source.recorded });
        }
        else {
            this.recorded = null;
        }
        if (source['_recorded']) {
            if (this.recorded) {
                this.recorded.addExtendedProperties(source._recorded);
            }
            else {
                this.recorded = new fhir.FhirInstant(source._recorded);
            }
        }
        if (source['policy']) {
            this.policy = source.policy.map((x) => new fhir.FhirUri({ value: x }));
        }
        else {
            this.policy = [];
        }
        if (source['_policy']) {
            source._policy.forEach((x, i) => {
                if (this.policy.length >= i) {
                    if (x) {
                        this.policy[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.policy.push(new fhir.FhirUri(x));
                    }
                }
            });
        }
        if (source['location']) {
            this.location = new fhir.Reference(source.location);
        }
        if (source['reason']) {
            this.reason = source.reason.map((x) => new fhir.Coding(x));
        }
        else {
            this.reason = [];
        }
        if (source['activity']) {
            this.activity = new fhir.Coding(source.activity);
        }
        if (source['agent']) {
            this.agent = source.agent.map((x) => new fhir.ProvenanceAgent(x));
        }
        else {
            this.agent = [];
        }
        if (source['entity']) {
            this.entity = source.entity.map((x) => new fhir.ProvenanceEntity(x));
        }
        else {
            this.entity = [];
        }
        if (source['signature']) {
            this.signature = source.signature.map((x) => new fhir.Signature(x));
        }
        else {
            this.signature = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Provenance';
        }
        iss.push(...this.vRPS('resourceType', exp));
        iss.push(...this.vRA('target', exp));
        iss.push(...this.vOS('period', exp));
        iss.push(...this.vRS('recorded', exp));
        iss.push(...this.vOA('policy', exp));
        iss.push(...this.vOS('location', exp));
        iss.push(...this.vOA('reason', exp));
        iss.push(...this.vOS('activity', exp));
        iss.push(...this.vRA('agent', exp));
        iss.push(...this.vOA('entity', exp));
        iss.push(...this.vOA('signature', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
Provenance._fts_dataType = 'Provenance';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUHJvdmVuYW5jZS5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvUHJvdmVuYW5jZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQyw0QkFBNEI7QUFFNUIsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFRbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSxnQ0FBZ0MsRUFBRSxNQUFNLHNEQUFzRCxDQUFDO0FBK0N4Rzs7R0FFRztBQUNILE1BQU0sT0FBTyxlQUFnQixTQUFRLElBQUksQ0FBQyxlQUFlO0lBNkJ2RDs7T0FFRztJQUNILFlBQVksU0FBc0MsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDNUYsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDbkY7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQztTQUFFO1FBQ3hCLElBQUksTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLEdBQUcsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDO1NBQUU7YUFDeEMsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsTUFBTSxFQUFDLENBQUMsQ0FBQztTQUFFO2FBQzlFLElBQUksTUFBTSxDQUFDLGNBQWMsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJ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Q0FBQyxVQUFVLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN0QyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNwQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN0QyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNuQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNwQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN2QyxPQUFPLEdBQUcsQ0FBQztJQUNiLENBQUM7O0FBcEdEOztHQUVHO0FBQzZCLHdCQUFhLEdBQVUsWUFBWSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnIzLmNvcmUgdmVyc2lvbjogMy4wLjJcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBQcm92ZW5hbmNlXHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBWM1JvbGVMaW5rVHlwZUNvZGVzLCAgVjNSb2xlTGlua1R5cGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVjNSb2xlTGlua1R5cGVDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgVjNSb2xlTGlua1R5cGVWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1YzUm9sZUxpbmtUeXBlVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBQcm92ZW5hbmNlRW50aXR5Um9sZUNvZGVzLCAgUHJvdmVuYW5jZUVudGl0eVJvbGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUHJvdmVuYW5jZUVudGl0eVJvbGVDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUHJvdmVuYW5jZUVudGl0eVJvbGVWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1Byb3ZlbmFuY2VFbnRpdHlSb2xlVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBWM1B1cnBvc2VPZlVzZUNvZGVzLCAgVjNQdXJwb3NlT2ZVc2VDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVjNQdXJwb3NlT2ZVc2VDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgVjNQdXJwb3NlT2ZVc2VWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1YzUHVycG9zZU9mVXNlVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBQcm92ZW5hbmNlQWN0aXZpdHlUeXBlQ29kZXMsICBQcm92ZW5hbmNlQWN0aXZpdHlUeXBlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1Byb3ZlbmFuY2VBY3Rpdml0eVR5cGVDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUHJvdmVuYW5jZUFjdGl2aXR5VHlwZVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUHJvdmVuYW5jZUFjdGl2aXR5VHlwZVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBQcm92ZW5hbmNlQWdlbnQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgUHJvdmVuYW5jZUFnZW50QXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogRm9yIGV4YW1wbGU6IGF1dGhvciwgcGVyZm9ybWVyLCBlbnRlcmVyLCBhdHRlc3RlciwgZG9jdG9yLCBudXJzZSwgY2xlcmssIGV0Yy5cclxuICAgKi9cclxuICByb2xlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpbmRpdmlkdWFsLCBkZXZpY2Ugb3Igb3JnYW5pemF0aW9uIHRoYXQgcGFydGljaXBhdGVkIGluIHRoZSBldmVudC5cclxuICAgKi9cclxuICB3aG8/OiBmaGlyLkZoaXJVcml8Zmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpbmRpdmlkdWFsLCBkZXZpY2Ugb3Igb3JnYW5pemF0aW9uIHRoYXQgcGFydGljaXBhdGVkIGluIHRoZSBldmVudC5cclxuICAgKi9cclxuICB3aG9Vcmk/OiBmaGlyLkZoaXJVcml8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgaW5kaXZpZHVhbCwgZGV2aWNlIG9yIG9yZ2FuaXphdGlvbiB0aGF0IHBhcnRpY2lwYXRlZCBpbiB0aGUgZXZlbnQuXHJcbiAgICovXHJcbiAgd2hvUmVmZXJlbmNlPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgaW5kaXZpZHVhbCwgZGV2aWNlLCBvciBvcmdhbml6YXRpb24gZm9yIHdob20gdGhlIGNoYW5nZSB3YXMgbWFkZS5cclxuICAgKi9cclxuICBvbkJlaGFsZk9mPzogZmhpci5GaGlyVXJpfGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgaW5kaXZpZHVhbCwgZGV2aWNlLCBvciBvcmdhbml6YXRpb24gZm9yIHdob20gdGhlIGNoYW5nZSB3YXMgbWFkZS5cclxuICAgKi9cclxuICBvbkJlaGFsZk9mVXJpPzogZmhpci5GaGlyVXJpfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGluZGl2aWR1YWwsIGRldmljZSwgb3Igb3JnYW5pemF0aW9uIGZvciB3aG9tIHRoZSBjaGFuZ2Ugd2FzIG1hZGUuXHJcbiAgICovXHJcbiAgb25CZWhhbGZPZlJlZmVyZW5jZT86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHR5cGUgb2YgcmVsYXRpb25zaGlwIGJldHdlZW4gYWdlbnRzLlxyXG4gICAqL1xyXG4gIHJlbGF0ZWRBZ2VudFR5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogU2V2ZXJhbCBhZ2VudHMgbWF5IGJlIGFzc29jaWF0ZWQgKGkuZS4gaGFzIHNvbWUgcmVzcG9uc2liaWxpdHkgZm9yIGFuIGFjdGl2aXR5KSB3aXRoIGFuIGFjdGl2aXR5IGFuZCB2aWNlLXZlcnNhLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFByb3ZlbmFuY2VBZ2VudCBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1Byb3ZlbmFuY2VBZ2VudCc7XHJcbiAgLyoqXHJcbiAgICogRm9yIGV4YW1wbGU6IGF1dGhvciwgcGVyZm9ybWVyLCBlbnRlcmVyLCBhdHRlc3RlciwgZG9jdG9yLCBudXJzZSwgY2xlcmssIGV0Yy5cclxuICAgKi9cclxuICBwdWJsaWMgcm9sZTogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBUaGUgaW5kaXZpZHVhbCwgZGV2aWNlIG9yIG9yZ2FuaXphdGlvbiB0aGF0IHBhcnRpY2lwYXRlZCBpbiB0aGUgZXZlbnQuXHJcbiAgICovXHJcbiAgcHVibGljIHdobzogKGZoaXIuRmhpclVyaXxmaGlyLlJlZmVyZW5jZSl8bnVsbDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IFByb3ZlbmFuY2UuYWdlbnQud2hvW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX3dob0lzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpbmRpdmlkdWFsLCBkZXZpY2UsIG9yIG9yZ2FuaXphdGlvbiBmb3Igd2hvbSB0aGUgY2hhbmdlIHdhcyBtYWRlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvbkJlaGFsZk9mPzogKGZoaXIuRmhpclVyaXxmaGlyLlJlZmVyZW5jZSl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgUHJvdmVuYW5jZS5hZ2VudC5vbkJlaGFsZk9mW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX29uQmVoYWxmT2ZJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBUaGUgdHlwZSBvZiByZWxhdGlvbnNoaXAgYmV0d2VlbiBhZ2VudHMuXHJcbiAgICovXHJcbiAgcHVibGljIHJlbGF0ZWRBZ2VudFR5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgUHJvdmVuYW5jZUFnZW50IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8UHJvdmVuYW5jZUFnZW50QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3JvbGUnXSkgeyB0aGlzLnJvbGUgPSBzb3VyY2Uucm9sZS5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnJvbGUgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnd2hvJ10pIHsgdGhpcy53aG8gPSBzb3VyY2Uud2hvOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3dob1VyaSddKSB7IHRoaXMud2hvID0gbmV3IGZoaXIuRmhpclVyaSh7dmFsdWU6IHNvdXJjZS53aG9Vcml9KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd3aG9SZWZlcmVuY2UnXSkgeyB0aGlzLndobyA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2Uud2hvUmVmZXJlbmNlKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMud2hvID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnb25CZWhhbGZPZiddKSB7IHRoaXMub25CZWhhbGZPZiA9IHNvdXJjZS5vbkJlaGFsZk9mOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ29uQmVoYWxmT2ZVcmknXSkgeyB0aGlzLm9uQmVoYWxmT2YgPSBuZXcgZmhpci5GaGlyVXJpKHt2YWx1ZTogc291cmNlLm9uQmVoYWxmT2ZVcml9KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydvbkJlaGFsZk9mUmVmZXJlbmNlJ10pIHsgdGhpcy5vbkJlaGFsZk9mID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5vbkJlaGFsZk9mUmVmZXJlbmNlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVsYXRlZEFnZW50VHlwZSddKSB7IHRoaXMucmVsYXRlZEFnZW50VHlwZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UucmVsYXRlZEFnZW50VHlwZSk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdQcm92ZW5hbmNlLmFnZW50JyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgncm9sZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygnd2hvJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdvbkJlaGFsZk9mJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdyZWxhdGVkQWdlbnRUeXBlJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBQcm92ZW5hbmNlRW50aXR5IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFByb3ZlbmFuY2VFbnRpdHlBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBIb3cgdGhlIGVudGl0eSB3YXMgdXNlZCBkdXJpbmcgdGhlIGFjdGl2aXR5LlxyXG4gICAqL1xyXG4gIHJvbGU6IGZoaXIuRmhpckNvZGU8UHJvdmVuYW5jZUVudGl0eVJvbGVDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogUHJvdmVuYW5jZS5lbnRpdHkucm9sZVxyXG4gICAqL1xyXG4gIF9yb2xlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBJZGVudGl0eSBtYXkgYmUgYSByZWZlcmVuY2UgdG8gYSByZXNvdXJjZSBvciB0byBzb21ldGhpbmcgZWxzZSwgZGVwZW5kaW5nIG9uIHRoZSB0eXBlLlxyXG4gICAqL1xyXG4gIHdoYXQ/OiBmaGlyLkZoaXJVcml8Zmhpci5SZWZlcmVuY2V8Zmhpci5JZGVudGlmaWVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZGVudGl0eSBtYXkgYmUgYSByZWZlcmVuY2UgdG8gYSByZXNvdXJjZSBvciB0byBzb21ldGhpbmcgZWxzZSwgZGVwZW5kaW5nIG9uIHRoZSB0eXBlLlxyXG4gICAqL1xyXG4gIHdoYXRVcmk/OiBmaGlyLkZoaXJVcml8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZGVudGl0eSBtYXkgYmUgYSByZWZlcmVuY2UgdG8gYSByZXNvdXJjZSBvciB0byBzb21ldGhpbmcgZWxzZSwgZGVwZW5kaW5nIG9uIHRoZSB0eXBlLlxyXG4gICAqL1xyXG4gIHdoYXRSZWZlcmVuY2U/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aXR5IG1heSBiZSBhIHJlZmVyZW5jZSB0byBhIHJlc291cmNlIG9yIHRvIHNvbWV0aGluZyBlbHNlLCBkZXBlbmRpbmcgb24gdGhlIHR5cGUuXHJcbiAgICovXHJcbiAgd2hhdElkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHVzZWNhc2Ugd2hlcmUgb25lIFByb3ZlbmFuY2UuZW50aXR5LmFnZW50IGlzIHVzZWQgd2hlcmUgdGhlIEVudGl0eSB0aGF0IHdhcyB1c2VkIGluIHRoZSBjcmVhdGlvbi91cGRhdGluZyBvZiB0aGUgVGFyZ2V0LCBpcyBub3QgaW4gdGhlIGNvbnRleHQgb2YgdGhlIHNhbWUgY3VzdG9kaWFuc2hpcCBhcyB0aGUgVGFyZ2V0LCBhbmQgdGh1cyB0aGUgbWVhbmluZyBvZiBQcm92ZW5hbmNlLmVudGl0eS5hZ2VudCBpcyB0byBzYXkgdGhhdCB0aGUgZW50aXR5IHJlZmVyZW5jZWQgaXMgbWFuYWdlZCBlbHNld2hlcmUgYW5kIHRoYXQgdGhpcyBBZ2VudCBwcm92aWRlZCBhY2Nlc3MgdG8gaXQuICBUaGlzIHdvdWxkIGJlIHNpbWlsYXIgdG8gd2hlcmUgdGhlIEVudGl0eSBiZWluZyByZWZlcmVuY2VkIGlzIG1hbmFnZWQgb3V0c2lkZSBGSElSLCBzdWNoIGFzIHRocm91Z2ggSEw3IHYyLCB2Mywgb3IgWERTLiBUaGlzIG1pZ2h0IGJlIHdoZXJlIHRoZSBFbnRpdHkgYmVpbmcgcmVmZXJlbmNlZCBpcyBtYW5hZ2VkIGluIGFub3RoZXIgRkhJUiByZXNvdXJjZSBzZXJ2ZXIuIFRodXMgaXQgZXhwbGFpbnMgdGhlIFByb3ZlbmFuY2Ugb2YgdGhhdCBFbnRpdHkncyB1c2UgaW4gdGhlIGNvbnRleHQgb2YgdGhpcyBQcm92ZW5hbmNlIGFjdGl2aXR5LlxyXG4gICAqL1xyXG4gIGFnZW50PzogZmhpci5Qcm92ZW5hbmNlQWdlbnRBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogTXVsdGlwbGUgdXNlcklkcyBtYXkgYmUgYXNzb2NpYXRlZCB3aXRoIHRoZSBzYW1lIFByYWN0aXRpb25lciBvciBvdGhlciBpbmRpdmlkdWFsIGFjcm9zcyB2YXJpb3VzIGFwcGVhcmFuY2VzLCBlYWNoIHdpdGggZGlzdGluY3QgcHJpdmlsZWdlcy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBQcm92ZW5hbmNlRW50aXR5IGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnUHJvdmVuYW5jZUVudGl0eSc7XHJcbiAgLyoqXHJcbiAgICogSG93IHRoZSBlbnRpdHkgd2FzIHVzZWQgZHVyaW5nIHRoZSBhY3Rpdml0eS5cclxuICAgKi9cclxuICBwdWJsaWMgcm9sZTogZmhpci5GaGlyQ29kZTxQcm92ZW5hbmNlRW50aXR5Um9sZUNvZGVUeXBlPnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aXR5IG1heSBiZSBhIHJlZmVyZW5jZSB0byBhIHJlc291cmNlIG9yIHRvIHNvbWV0aGluZyBlbHNlLCBkZXBlbmRpbmcgb24gdGhlIHR5cGUuXHJcbiAgICovXHJcbiAgcHVibGljIHdoYXQ6IChmaGlyLkZoaXJVcml8Zmhpci5SZWZlcmVuY2V8Zmhpci5JZGVudGlmaWVyKXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgUHJvdmVuYW5jZS5lbnRpdHkud2hhdFt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c193aGF0SXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogQSB1c2VjYXNlIHdoZXJlIG9uZSBQcm92ZW5hbmNlLmVudGl0eS5hZ2VudCBpcyB1c2VkIHdoZXJlIHRoZSBFbnRpdHkgdGhhdCB3YXMgdXNlZCBpbiB0aGUgY3JlYXRpb24vdXBkYXRpbmcgb2YgdGhlIFRhcmdldCwgaXMgbm90IGluIHRoZSBjb250ZXh0IG9mIHRoZSBzYW1lIGN1c3RvZGlhbnNoaXAgYXMgdGhlIFRhcmdldCwgYW5kIHRodXMgdGhlIG1lYW5pbmcgb2YgUHJvdmVuYW5jZS5lbnRpdHkuYWdlbnQgaXMgdG8gc2F5IHRoYXQgdGhlIGVudGl0eSByZWZlcmVuY2VkIGlzIG1hbmFnZWQgZWxzZXdoZXJlIGFuZCB0aGF0IHRoaXMgQWdlbnQgcHJvdmlkZWQgYWNjZXNzIHRvIGl0LiAgVGhpcyB3b3VsZCBiZSBzaW1pbGFyIHRvIHdoZXJlIHRoZSBFbnRpdHkgYmVpbmcgcmVmZXJlbmNlZCBpcyBtYW5hZ2VkIG91dHNpZGUgRkhJUiwgc3VjaCBhcyB0aHJvdWdoIEhMNyB2MiwgdjMsIG9yIFhEUy4gVGhpcyBtaWdodCBiZSB3aGVyZSB0aGUgRW50aXR5IGJlaW5nIHJlZmVyZW5jZWQgaXMgbWFuYWdlZCBpbiBhbm90aGVyIEZISVIgcmVzb3VyY2Ugc2VydmVyLiBUaHVzIGl0IGV4cGxhaW5zIHRoZSBQcm92ZW5hbmNlIG9mIHRoYXQgRW50aXR5J3MgdXNlIGluIHRoZSBjb250ZXh0IG9mIHRoaXMgUHJvdmVuYW5jZSBhY3Rpdml0eS5cclxuICAgKi9cclxuICBwdWJsaWMgYWdlbnQ6IGZoaXIuUHJvdmVuYW5jZUFnZW50W107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgUHJvdmVuYW5jZUVudGl0eSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFByb3ZlbmFuY2VFbnRpdHlBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsncm9sZSddKSB7IHRoaXMucm9sZSA9IG5ldyBmaGlyLkZoaXJDb2RlPFByb3ZlbmFuY2VFbnRpdHlSb2xlQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnJvbGV9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucm9sZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19yb2xlJ10pIHtcclxuICAgICAgaWYgKHRoaXMucm9sZSkgeyB0aGlzLnJvbGUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fcm9sZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnJvbGUgPSBuZXcgZmhpci5GaGlyQ29kZTxQcm92ZW5hbmNlRW50aXR5Um9sZUNvZGVUeXBlPihzb3VyY2UuX3JvbGUgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3doYXQnXSkgeyB0aGlzLndoYXQgPSBzb3VyY2Uud2hhdDsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd3aGF0VXJpJ10pIHsgdGhpcy53aGF0ID0gbmV3IGZoaXIuRmhpclVyaSh7dmFsdWU6IHNvdXJjZS53aGF0VXJpfSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnd2hhdFJlZmVyZW5jZSddKSB7IHRoaXMud2hhdCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2Uud2hhdFJlZmVyZW5jZSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnd2hhdElkZW50aWZpZXInXSkgeyB0aGlzLndoYXQgPSBuZXcgZmhpci5JZGVudGlmaWVyKHNvdXJjZS53aGF0SWRlbnRpZmllcik7IH1cclxuICAgIGVsc2UgeyB0aGlzLndoYXQgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydhZ2VudCddKSB7IHRoaXMuYWdlbnQgPSBzb3VyY2UuYWdlbnQubWFwKCh4KSA9PiBuZXcgZmhpci5Qcm92ZW5hbmNlQWdlbnQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5hZ2VudCA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnUHJvdmVuYW5jZS5lbnRpdHknIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTVigncm9sZScsZXhwLCdQcm92ZW5hbmNlRW50aXR5Um9sZScsUHJvdmVuYW5jZUVudGl0eVJvbGVWc1ZhbGlkYXRpb24sJ3InKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygnd2hhdCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnYWdlbnQnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFByb3ZlbmFuY2UgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgUHJvdmVuYW5jZUFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIlByb3ZlbmFuY2VcInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGFyZ2V0IHJlZmVyZW5jZXMgYXJlIHVzdWFsbHkgdmVyc2lvbiBzcGVjaWZpYywgYnV0IG1heSBub3QgYmUsIGlmIGEgdmVyc2lvbiBoYXMgbm90IGJlZW4gYXNzaWduZWQgb3IgaWYgdGhlIHByb3ZlbmFuY2UgaW5mb3JtYXRpb24gaXMgcGFydCBvZiB0aGUgc2V0IG9mIHJlc291cmNlcyBiZWluZyBtYWludGFpbmVkIChpLmUuIGEgZG9jdW1lbnQpLiBXaGVuIHVzaW5nIHRoZSBSRVNUZnVsIEFQSSwgdGhlIGlkZW50aXR5IG9mIHRoZSByZXNvdXJjZSBtYXkgbm90IGJlIGtub3duIChlc3BlY2lhbGx5IG5vdCB0aGUgdmVyc2lvbiBzcGVjaWZpYyBvbmUpOyB0aGUgY2xpZW50IG1heSBlaXRoZXIgc3VibWl0IHRoZSByZXNvdXJjZSBmaXJzdCwgYW5kIHRoZW4gdGhlIHByb3ZlbmFuY2UsIG9yIGl0IG1heSBzdWJtaXQgYm90aCB1c2luZyBhIHNpbmdsZSB0cmFuc2FjdGlvbi4gU2VlIHRoZSBub3RlcyBvbiB0cmFuc2FjdGlvbiBmb3IgZnVydGhlciBkaXNjdXNzaW9uLlxyXG4gICAqL1xyXG4gIHRhcmdldDogZmhpci5SZWZlcmVuY2VBcmdzW118bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgcGVyaW9kIGNhbiBiZSBhIGxpdHRsZSBhcmJpdHJhcnk7IHdoZXJlIHBvc3NpYmxlLCB0aGUgdGltZSBzaG91bGQgY29ycmVzcG9uZCB0byBodW1hbiBhc3Nlc3NtZW50IG9mIHRoZSBhY3Rpdml0eSB0aW1lLlxyXG4gICAqL1xyXG4gIHBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBjYW4gYmUgYSBsaXR0bGUgZGlmZmVyZW50IGZyb20gdGhlIHRpbWUgc3RhbXAgb24gdGhlIHJlc291cmNlIGlmIHRoZXJlIGlzIGEgZGVsYXkgYmV0d2VlbiByZWNvcmRpbmcgdGhlIGV2ZW50IGFuZCB1cGRhdGluZyB0aGUgcHJvdmVuYW5jZSBhbmQgdGFyZ2V0IHJlc291cmNlLlxyXG4gICAqL1xyXG4gIHJlY29yZGVkOiBmaGlyLkZoaXJJbnN0YW50fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFByb3ZlbmFuY2UucmVjb3JkZWRcclxuICAgKi9cclxuICBfcmVjb3JkZWQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEZvciBleGFtcGxlOiBXaGVyZSBhbiBPQXV0aCB0b2tlbiBhdXRob3JpemVzLCB0aGUgdW5pcXVlIGlkZW50aWZpZXIgZnJvbSB0aGUgT0F1dGggdG9rZW4gaXMgcGxhY2VkIGludG8gdGhlIHBvbGljeSBlbGVtZW50IFdoZXJlIGEgcG9saWN5IGVuZ2luZSAoZS5nLiBYQUNNTCkgaG9sZHMgcG9saWN5IGxvZ2ljLCB0aGUgdW5pcXVlIHBvbGljeSBpZGVudGlmaWVyIGlzIHBsYWNlZCBpbnRvIHRoZSBwb2xpY3kgZWxlbWVudC5cclxuICAgKi9cclxuICBwb2xpY3k/OiBmaGlyLkZoaXJVcmlbXXwoc3RyaW5nfG51bGwpW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBQcm92ZW5hbmNlLnBvbGljeVxyXG4gICAqL1xyXG4gIF9wb2xpY3k/OihmaGlyLkZoaXJFbGVtZW50QXJnc3xudWxsKVtdO1xyXG4gIC8qKlxyXG4gICAqIFdoZXJlIHRoZSBhY3Rpdml0eSBvY2N1cnJlZCwgaWYgcmVsZXZhbnQuXHJcbiAgICovXHJcbiAgbG9jYXRpb24/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZWFzb24gdGhhdCB0aGUgYWN0aXZpdHkgd2FzIHRha2luZyBwbGFjZS5cclxuICAgKi9cclxuICByZWFzb24/OiBmaGlyLkNvZGluZ0FyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQW4gYWN0aXZpdHkgaXMgc29tZXRoaW5nIHRoYXQgb2NjdXJzIG92ZXIgYSBwZXJpb2Qgb2YgdGltZSBhbmQgYWN0cyB1cG9uIG9yIHdpdGggZW50aXRpZXM7IGl0IG1heSBpbmNsdWRlIGNvbnN1bWluZywgcHJvY2Vzc2luZywgdHJhbnNmb3JtaW5nLCBtb2RpZnlpbmcsIHJlbG9jYXRpbmcsIHVzaW5nLCBvciBnZW5lcmF0aW5nIGVudGl0aWVzLlxyXG4gICAqL1xyXG4gIGFjdGl2aXR5PzogZmhpci5Db2RpbmdBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTZXZlcmFsIGFnZW50cyBtYXkgYmUgYXNzb2NpYXRlZCAoaS5lLiBoYXMgc29tZSByZXNwb25zaWJpbGl0eSBmb3IgYW4gYWN0aXZpdHkpIHdpdGggYW4gYWN0aXZpdHkgYW5kIHZpY2UtdmVyc2EuXHJcbiAgICovXHJcbiAgYWdlbnQ6IGZoaXIuUHJvdmVuYW5jZUFnZW50QXJnc1tdfG51bGw7XHJcbiAgLyoqXHJcbiAgICogTXVsdGlwbGUgdXNlcklkcyBtYXkgYmUgYXNzb2NpYXRlZCB3aXRoIHRoZSBzYW1lIFByYWN0aXRpb25lciBvciBvdGhlciBpbmRpdmlkdWFsIGFjcm9zcyB2YXJpb3VzIGFwcGVhcmFuY2VzLCBlYWNoIHdpdGggZGlzdGluY3QgcHJpdmlsZWdlcy5cclxuICAgKi9cclxuICBlbnRpdHk/OiBmaGlyLlByb3ZlbmFuY2VFbnRpdHlBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgZGlnaXRhbCBzaWduYXR1cmUgb24gdGhlIHRhcmdldCBSZWZlcmVuY2UocykuIFRoZSBzaWduZXIgc2hvdWxkIG1hdGNoIGEgUHJvdmVuYW5jZS5hZ2VudC4gVGhlIHB1cnBvc2Ugb2YgdGhlIHNpZ25hdHVyZSBpcyBpbmRpY2F0ZWQuXHJcbiAgICovXHJcbiAgc2lnbmF0dXJlPzogZmhpci5TaWduYXR1cmVBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogUHJvdmVuYW5jZSBvZiBhIHJlc291cmNlIGlzIGEgcmVjb3JkIHRoYXQgZGVzY3JpYmVzIGVudGl0aWVzIGFuZCBwcm9jZXNzZXMgaW52b2x2ZWQgaW4gcHJvZHVjaW5nIGFuZCBkZWxpdmVyaW5nIG9yIG90aGVyd2lzZSBpbmZsdWVuY2luZyB0aGF0IHJlc291cmNlLiBQcm92ZW5hbmNlIHByb3ZpZGVzIGEgY3JpdGljYWwgZm91bmRhdGlvbiBmb3IgYXNzZXNzaW5nIGF1dGhlbnRpY2l0eSwgZW5hYmxpbmcgdHJ1c3QsIGFuZCBhbGxvd2luZyByZXByb2R1Y2liaWxpdHkuIFByb3ZlbmFuY2UgYXNzZXJ0aW9ucyBhcmUgYSBmb3JtIG9mIGNvbnRleHR1YWwgbWV0YWRhdGEgYW5kIGNhbiB0aGVtc2VsdmVzIGJlY29tZSBpbXBvcnRhbnQgcmVjb3JkcyB3aXRoIHRoZWlyIG93biBwcm92ZW5hbmNlLiBQcm92ZW5hbmNlIHN0YXRlbWVudCBpbmRpY2F0ZXMgY2xpbmljYWwgc2lnbmlmaWNhbmNlIGluIHRlcm1zIG9mIGNvbmZpZGVuY2UgaW4gYXV0aGVudGljaXR5LCByZWxpYWJpbGl0eSwgYW5kIHRydXN0d29ydGhpbmVzcywgaW50ZWdyaXR5LCBhbmQgc3RhZ2UgaW4gbGlmZWN5Y2xlIChlLmcuIERvY3VtZW50IENvbXBsZXRpb24gLSBoYXMgdGhlIGFydGlmYWN0IGJlZW4gbGVnYWxseSBhdXRoZW50aWNhdGVkKSwgYWxsIG9mIHdoaWNoIG1heSBpbXBhY3Qgc2VjdXJpdHksIHByaXZhY3ksIGFuZCB0cnVzdCBwb2xpY2llcy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBQcm92ZW5hbmNlIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdQcm92ZW5hbmNlJztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIlByb3ZlbmFuY2VcIjtcclxuICAvKipcclxuICAgKiBUYXJnZXQgcmVmZXJlbmNlcyBhcmUgdXN1YWxseSB2ZXJzaW9uIHNwZWNpZmljLCBidXQgbWF5IG5vdCBiZSwgaWYgYSB2ZXJzaW9uIGhhcyBub3QgYmVlbiBhc3NpZ25lZCBvciBpZiB0aGUgcHJvdmVuYW5jZSBpbmZvcm1hdGlvbiBpcyBwYXJ0IG9mIHRoZSBzZXQgb2YgcmVzb3VyY2VzIGJlaW5nIG1haW50YWluZWQgKGkuZS4gYSBkb2N1bWVudCkuIFdoZW4gdXNpbmcgdGhlIFJFU1RmdWwgQVBJLCB0aGUgaWRlbnRpdHkgb2YgdGhlIHJlc291cmNlIG1heSBub3QgYmUga25vd24gKGVzcGVjaWFsbHkgbm90IHRoZSB2ZXJzaW9uIHNwZWNpZmljIG9uZSk7IHRoZSBjbGllbnQgbWF5IGVpdGhlciBzdWJtaXQgdGhlIHJlc291cmNlIGZpcnN0LCBhbmQgdGhlbiB0aGUgcHJvdmVuYW5jZSwgb3IgaXQgbWF5IHN1Ym1pdCBib3RoIHVzaW5nIGEgc2luZ2xlIHRyYW5zYWN0aW9uLiBTZWUgdGhlIG5vdGVzIG9uIHRyYW5zYWN0aW9uIGZvciBmdXJ0aGVyIGRpc2N1c3Npb24uXHJcbiAgICovXHJcbiAgcHVibGljIHRhcmdldDogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBUaGUgcGVyaW9kIGNhbiBiZSBhIGxpdHRsZSBhcmJpdHJhcnk7IHdoZXJlIHBvc3NpYmxlLCB0aGUgdGltZSBzaG91bGQgY29ycmVzcG9uZCB0byBodW1hbiBhc3Nlc3NtZW50IG9mIHRoZSBhY3Rpdml0eSB0aW1lLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwZXJpb2Q/OiBmaGlyLlBlcmlvZHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBjYW4gYmUgYSBsaXR0bGUgZGlmZmVyZW50IGZyb20gdGhlIHRpbWUgc3RhbXAgb24gdGhlIHJlc291cmNlIGlmIHRoZXJlIGlzIGEgZGVsYXkgYmV0d2VlbiByZWNvcmRpbmcgdGhlIGV2ZW50IGFuZCB1cGRhdGluZyB0aGUgcHJvdmVuYW5jZSBhbmQgdGFyZ2V0IHJlc291cmNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWNvcmRlZDogZmhpci5GaGlySW5zdGFudHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEZvciBleGFtcGxlOiBXaGVyZSBhbiBPQXV0aCB0b2tlbiBhdXRob3JpemVzLCB0aGUgdW5pcXVlIGlkZW50aWZpZXIgZnJvbSB0aGUgT0F1dGggdG9rZW4gaXMgcGxhY2VkIGludG8gdGhlIHBvbGljeSBlbGVtZW50IFdoZXJlIGEgcG9saWN5IGVuZ2luZSAoZS5nLiBYQUNNTCkgaG9sZHMgcG9saWN5IGxvZ2ljLCB0aGUgdW5pcXVlIHBvbGljeSBpZGVudGlmaWVyIGlzIHBsYWNlZCBpbnRvIHRoZSBwb2xpY3kgZWxlbWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgcG9saWN5OiBmaGlyLkZoaXJVcmlbXTtcclxuICAvKipcclxuICAgKiBXaGVyZSB0aGUgYWN0aXZpdHkgb2NjdXJyZWQsIGlmIHJlbGV2YW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBsb2NhdGlvbj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcmVhc29uIHRoYXQgdGhlIGFjdGl2aXR5IHdhcyB0YWtpbmcgcGxhY2UuXHJcbiAgICovXHJcbiAgcHVibGljIHJlYXNvbjogZmhpci5Db2RpbmdbXTtcclxuICAvKipcclxuICAgKiBBbiBhY3Rpdml0eSBpcyBzb21ldGhpbmcgdGhhdCBvY2N1cnMgb3ZlciBhIHBlcmlvZCBvZiB0aW1lIGFuZCBhY3RzIHVwb24gb3Igd2l0aCBlbnRpdGllczsgaXQgbWF5IGluY2x1ZGUgY29uc3VtaW5nLCBwcm9jZXNzaW5nLCB0cmFuc2Zvcm1pbmcsIG1vZGlmeWluZywgcmVsb2NhdGluZywgdXNpbmcsIG9yIGdlbmVyYXRpbmcgZW50aXRpZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGFjdGl2aXR5PzogZmhpci5Db2Rpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFNldmVyYWwgYWdlbnRzIG1heSBiZSBhc3NvY2lhdGVkIChpLmUuIGhhcyBzb21lIHJlc3BvbnNpYmlsaXR5IGZvciBhbiBhY3Rpdml0eSkgd2l0aCBhbiBhY3Rpdml0eSBhbmQgdmljZS12ZXJzYS5cclxuICAgKi9cclxuICBwdWJsaWMgYWdlbnQ6IGZoaXIuUHJvdmVuYW5jZUFnZW50W107XHJcbiAgLyoqXHJcbiAgICogTXVsdGlwbGUgdXNlcklkcyBtYXkgYmUgYXNzb2NpYXRlZCB3aXRoIHRoZSBzYW1lIFByYWN0aXRpb25lciBvciBvdGhlciBpbmRpdmlkdWFsIGFjcm9zcyB2YXJpb3VzIGFwcGVhcmFuY2VzLCBlYWNoIHdpdGggZGlzdGluY3QgcHJpdmlsZWdlcy5cclxuICAgKi9cclxuICBwdWJsaWMgZW50aXR5OiBmaGlyLlByb3ZlbmFuY2VFbnRpdHlbXTtcclxuICAvKipcclxuICAgKiBBIGRpZ2l0YWwgc2lnbmF0dXJlIG9uIHRoZSB0YXJnZXQgUmVmZXJlbmNlKHMpLiBUaGUgc2lnbmVyIHNob3VsZCBtYXRjaCBhIFByb3ZlbmFuY2UuYWdlbnQuIFRoZSBwdXJwb3NlIG9mIHRoZSBzaWduYXR1cmUgaXMgaW5kaWNhdGVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzaWduYXR1cmU6IGZoaXIuU2lnbmF0dXJlW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgUHJvdmVuYW5jZSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFByb3ZlbmFuY2VBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnUHJvdmVuYW5jZSc7XHJcbiAgICBpZiAoc291cmNlWyd0YXJnZXQnXSkgeyB0aGlzLnRhcmdldCA9IHNvdXJjZS50YXJnZXQubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy50YXJnZXQgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncGVyaW9kJ10pIHsgdGhpcy5wZXJpb2QgPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLnBlcmlvZCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3JlY29yZGVkJ10pIHsgdGhpcy5yZWNvcmRlZCA9IG5ldyBmaGlyLkZoaXJJbnN0YW50KHt2YWx1ZTogc291cmNlLnJlY29yZGVkfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnJlY29yZGVkID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3JlY29yZGVkJ10pIHtcclxuICAgICAgaWYgKHRoaXMucmVjb3JkZWQpIHsgdGhpcy5yZWNvcmRlZC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9yZWNvcmRlZCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnJlY29yZGVkID0gbmV3IGZoaXIuRmhpckluc3RhbnQoc291cmNlLl9yZWNvcmRlZCBhcyBQYXJ0aWFsPGZoaXIuRmhpckluc3RhbnRBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3BvbGljeSddKSB7IHRoaXMucG9saWN5ID0gc291cmNlLnBvbGljeS5tYXAoKHgpID0+IG5ldyBmaGlyLkZoaXJVcmkoe3ZhbHVlOiB4fSkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wb2xpY3kgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3BvbGljeSddKSB7XHJcbiAgICAgIHNvdXJjZS5fcG9saWN5LmZvckVhY2goKHgsaSkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLnBvbGljeS5sZW5ndGggPj0gaSkgeyBpZiAoeCkgeyB0aGlzLnBvbGljeVtpXS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoeCk7IH0gfVxyXG4gICAgICAgIGVsc2UgeyBpZiAoeCkgeyB0aGlzLnBvbGljeS5wdXNoKG5ldyBmaGlyLkZoaXJVcmkoeCBhcyBQYXJ0aWFsPGZoaXIuRmhpclVyaUFyZ3M+KSk7IH0gfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2xvY2F0aW9uJ10pIHsgdGhpcy5sb2NhdGlvbiA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UubG9jYXRpb24pOyB9XHJcbiAgICBpZiAoc291cmNlWydyZWFzb24nXSkgeyB0aGlzLnJlYXNvbiA9IHNvdXJjZS5yZWFzb24ubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RpbmcoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZWFzb24gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYWN0aXZpdHknXSkgeyB0aGlzLmFjdGl2aXR5ID0gbmV3IGZoaXIuQ29kaW5nKHNvdXJjZS5hY3Rpdml0eSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2FnZW50J10pIHsgdGhpcy5hZ2VudCA9IHNvdXJjZS5hZ2VudC5tYXAoKHgpID0+IG5ldyBmaGlyLlByb3ZlbmFuY2VBZ2VudCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmFnZW50ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2VudGl0eSddKSB7IHRoaXMuZW50aXR5ID0gc291cmNlLmVudGl0eS5tYXAoKHgpID0+IG5ldyBmaGlyLlByb3ZlbmFuY2VFbnRpdHkoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5lbnRpdHkgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2lnbmF0dXJlJ10pIHsgdGhpcy5zaWduYXR1cmUgPSBzb3VyY2Uuc2lnbmF0dXJlLm1hcCgoeCkgPT4gbmV3IGZoaXIuU2lnbmF0dXJlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc2lnbmF0dXJlID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdQcm92ZW5hbmNlJyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUFMoJ3Jlc291cmNlVHlwZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSQSgndGFyZ2V0JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdwZXJpb2QnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ3JlY29yZGVkJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdwb2xpY3knLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2xvY2F0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdyZWFzb24nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2FjdGl2aXR5JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJBKCdhZ2VudCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnZW50aXR5JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdzaWduYXR1cmUnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuIl19