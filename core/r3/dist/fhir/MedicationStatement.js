// <auto-generated/>
// Contents of: hl7.fhir.r3.core version: 3.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: MedicationStatement
import * as fhir from '../fhir.js';
// @ts-ignore
import { MedicationStatementStatusVsValidation } from '../fhirValueSets/MedicationStatementStatusVsValidation.js';
// @ts-ignore
import { MedicationStatementTakenVsValidation } from '../fhirValueSets/MedicationStatementTakenVsValidation.js';
/**
 * A record of a medication that is being consumed by a patient.   A MedicationStatement may indicate that the patient may be taking the medication now, or has taken the medication in the past or will be taking the medication in the future.  The source of this information can be the patient, significant other (such as a family member or spouse), or a clinician.  A common scenario where this information is captured is during the history taking process during a patient visit or stay.   The medication information may come from sources such as the patient's memory, from a prescription bottle,  or from a list of medications the patient, clinician or other party maintains
 * The primary difference between a medication statement and a medication administration is that the medication administration has complete administration information and is based on actual administration information from the person who administered the medication.  A medication statement is often, if not always, less specific.  There is no required date/time when the medication was administered, in fact we only know that a source has reported the patient is taking this medication, where details such as time, quantity, or rate or even medication product may be incomplete or missing or less precise.  As stated earlier, the medication statement information may come from the patient's memory, from a prescription bottle or from a list of medications the patient, clinician or other party maintains.  Medication administration is more formal and is not missing detailed information.
 */
export class MedicationStatement extends fhir.DomainResource {
    /**
     * Default constructor for MedicationStatement - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'MedicationStatement';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['basedOn']) {
            this.basedOn = source.basedOn.map((x) => new fhir.Reference(x));
        }
        else {
            this.basedOn = [];
        }
        if (source['partOf']) {
            this.partOf = source.partOf.map((x) => new fhir.Reference(x));
        }
        else {
            this.partOf = [];
        }
        if (source['context']) {
            this.context = new fhir.Reference(source.context);
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['category']) {
            this.category = new fhir.CodeableConcept(source.category);
        }
        if (source['medication']) {
            this.medication = source.medication;
        }
        else if (source['medicationCodeableConcept']) {
            this.medication = new fhir.CodeableConcept(source.medicationCodeableConcept);
        }
        else if (source['medicationReference']) {
            this.medication = new fhir.Reference(source.medicationReference);
        }
        else {
            this.medication = null;
        }
        if (source['effective']) {
            this.effective = source.effective;
        }
        else if (source['effectiveDateTime']) {
            this.effective = new fhir.FhirDateTime({ value: source.effectiveDateTime });
        }
        else if (source['effectivePeriod']) {
            this.effective = new fhir.Period(source.effectivePeriod);
        }
        if (source['dateAsserted']) {
            this.dateAsserted = new fhir.FhirDateTime({ value: source.dateAsserted });
        }
        if (source['_dateAsserted']) {
            if (this.dateAsserted) {
                this.dateAsserted.addExtendedProperties(source._dateAsserted);
            }
            else {
                this.dateAsserted = new fhir.FhirDateTime(source._dateAsserted);
            }
        }
        if (source['informationSource']) {
            this.informationSource = new fhir.Reference(source.informationSource);
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject);
        }
        else {
            this.subject = null;
        }
        if (source['derivedFrom']) {
            this.derivedFrom = source.derivedFrom.map((x) => new fhir.Reference(x));
        }
        else {
            this.derivedFrom = [];
        }
        if (source['taken']) {
            this.taken = new fhir.FhirCode({ value: source.taken });
        }
        else {
            this.taken = null;
        }
        if (source['_taken']) {
            if (this.taken) {
                this.taken.addExtendedProperties(source._taken);
            }
            else {
                this.taken = new fhir.FhirCode(source._taken);
            }
        }
        if (source['reasonNotTaken']) {
            this.reasonNotTaken = source.reasonNotTaken.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.reasonNotTaken = [];
        }
        if (source['reasonCode']) {
            this.reasonCode = source.reasonCode.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.reasonCode = [];
        }
        if (source['reasonReference']) {
            this.reasonReference = source.reasonReference.map((x) => new fhir.Reference(x));
        }
        else {
            this.reasonReference = [];
        }
        if (source['note']) {
            this.note = source.note.map((x) => new fhir.Annotation(x));
        }
        else {
            this.note = [];
        }
        if (source['dosage']) {
            this.dosage = source.dosage.map((x) => new fhir.Dosage(x));
        }
        else {
            this.dosage = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicationStatement';
        }
        iss.push(...this.vOA('identifier', exp));
        iss.push(...this.vOA('basedOn', exp));
        iss.push(...this.vOA('partOf', exp));
        iss.push(...this.vOS('context', exp));
        iss.push(...this.vRSV('status', exp, 'MedicationStatementStatus', MedicationStatementStatusVsValidation, 'r'));
        iss.push(...this.vOS('category', exp));
        iss.push(...this.vRS('medication', exp));
        iss.push(...this.vOS('effective', exp));
        iss.push(...this.vOS('dateAsserted', exp));
        iss.push(...this.vOS('informationSource', exp));
        iss.push(...this.vRS('subject', exp));
        iss.push(...this.vOA('derivedFrom', exp));
        iss.push(...this.vRSV('taken', exp, 'MedicationStatementTaken', MedicationStatementTakenVsValidation, 'r'));
        iss.push(...this.vOA('reasonNotTaken', exp));
        iss.push(...this.vOA('reasonCode', exp));
        iss.push(...this.vOA('reasonReference', exp));
        iss.push(...this.vOA('note', exp));
        iss.push(...this.vOA('dosage', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicationStatement._fts_dataType = 'MedicationStatement';
/**
 * Internal flag to properly serialize choice-type element MedicationStatement.medication[x]
 */
MedicationStatement._fts_medicationIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element MedicationStatement.effective[x]
 */
MedicationStatement._fts_effectiveIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVkaWNhdGlvblN0YXRlbWVudC5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvTWVkaWNhdGlvblN0YXRlbWVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQyxxQ0FBcUM7QUFFckMsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFJbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSxxQ0FBcUMsRUFBRSxNQUFNLDJEQUEyRCxDQUFDO0FBT2xILGFBQWE7QUFDYixPQUFPLEVBQUUsb0NBQW9DLEVBQUUsTUFBTSwwREFBMEQsQ0FBQztBQXdIaEg7OztHQUdHO0FBQ0gsTUFBTSxPQUFPLG1CQUFvQixTQUFRLElBQUksQ0FBQyxjQUFjO0lBMEYxRDs7T0FFRztJQUNILFlBQVksU0FBMEMsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDaEcsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLENBQUMsWUFBWSxHQUFHLHFCQUFxQixDQUFDO1FBQzFDLElBQUksTUFBTSxDQUFDLFlBQVksQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUNoRztZQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsRUFBRSxDQUFDO1NBQUU7UUFDOUIsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQ3RGO1lB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QyxDQUFDO1FBQ3hDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGlCQUFpQixFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDN0MsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDcEMsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDOztBQXhLRDs7R0FFRztBQUM2QixpQ0FBYSxHQUFVLHFCQUFxQixDQUFDO0FBa0M3RTs7R0FFRztBQUN1QiwyQ0FBdUIsR0FBUSxJQUFJLENBQUM7QUFLOUQ7O0dBRUc7QUFDdUIsMENBQXNCLEdBQVEsSUFBSSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnIzLmNvcmUgdmVyc2lvbjogMy4wLjJcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBNZWRpY2F0aW9uU3RhdGVtZW50XHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBNZWRpY2F0aW9uU3RhdGVtZW50U3RhdHVzQ29kZXMsICBNZWRpY2F0aW9uU3RhdGVtZW50U3RhdHVzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL01lZGljYXRpb25TdGF0ZW1lbnRTdGF0dXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTWVkaWNhdGlvblN0YXRlbWVudFN0YXR1c1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTWVkaWNhdGlvblN0YXRlbWVudFN0YXR1c1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTWVkaWNhdGlvblN0YXRlbWVudENhdGVnb3J5Q29kZXMsICBNZWRpY2F0aW9uU3RhdGVtZW50Q2F0ZWdvcnlDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTWVkaWNhdGlvblN0YXRlbWVudENhdGVnb3J5Q29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE1lZGljYXRpb25TdGF0ZW1lbnRDYXRlZ29yeVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTWVkaWNhdGlvblN0YXRlbWVudENhdGVnb3J5VnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBNZWRpY2F0aW9uU3RhdGVtZW50VGFrZW5Db2RlcywgIE1lZGljYXRpb25TdGF0ZW1lbnRUYWtlbkNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9NZWRpY2F0aW9uU3RhdGVtZW50VGFrZW5Db2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTWVkaWNhdGlvblN0YXRlbWVudFRha2VuVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9NZWRpY2F0aW9uU3RhdGVtZW50VGFrZW5Wc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFJlYXNvbk1lZGljYXRpb25Ob3RUYWtlbkNvZGVzLCAgUmVhc29uTWVkaWNhdGlvbk5vdFRha2VuQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1JlYXNvbk1lZGljYXRpb25Ob3RUYWtlbkNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBSZWFzb25NZWRpY2F0aW9uTm90VGFrZW5Wc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1JlYXNvbk1lZGljYXRpb25Ob3RUYWtlblZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29uZGl0aW9uQ29kZXMsICBDb25kaXRpb25Db2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uZGl0aW9uQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbmRpdGlvblZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uZGl0aW9uVnNWYWxpZGF0aW9uLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lZGljYXRpb25TdGF0ZW1lbnQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVkaWNhdGlvblN0YXRlbWVudEFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIk1lZGljYXRpb25TdGF0ZW1lbnRcInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZXJuYWwgaWRlbnRpZmllciAtIEZISVIgd2lsbCBnZW5lcmF0ZSBpdHMgb3duIGludGVybmFsIGlkZW50aWZpZXJzIChwcm9iYWJseSBVUkxzKSB3aGljaCBkbyBub3QgbmVlZCB0byBiZSBleHBsaWNpdGx5IG1hbmFnZWQgYnkgdGhlIHJlc291cmNlLiAgVGhlIGlkZW50aWZpZXIgaGVyZSBpcyBvbmUgdGhhdCB3b3VsZCBiZSB1c2VkIGJ5IGFub3RoZXIgbm9uLUZISVIgc3lzdGVtIC0gZm9yIGV4YW1wbGUgYW4gYXV0b21hdGVkIG1lZGljYXRpb24gcHVtcCB3b3VsZCBwcm92aWRlIGEgcmVjb3JkIGVhY2ggdGltZSBpdCBvcGVyYXRlZDsgYW4gYWRtaW5pc3RyYXRpb24gd2hpbGUgdGhlIHBhdGllbnQgd2FzIG9mZiB0aGUgd2FyZCBtaWdodCBiZSBtYWRlIHdpdGggYSBkaWZmZXJlbnQgc3lzdGVtIGFuZCBlbnRlcmVkIGFmdGVyIHRoZSBldmVudC4gIFBhcnRpY3VsYXJseSBpbXBvcnRhbnQgaWYgdGhlc2UgcmVjb3JkcyBoYXZlIHRvIGJlIHVwZGF0ZWQuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBwbGFuLCBwcm9wb3NhbCBvciBvcmRlciB0aGF0IGlzIGZ1bGZpbGxlZCBpbiB3aG9sZSBvciBpbiBwYXJ0IGJ5IHRoaXMgZXZlbnQuXHJcbiAgICovXHJcbiAgYmFzZWRPbj86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGxhcmdlciBldmVudCBvZiB3aGljaCB0aGlzIHBhcnRpY3VsYXIgZXZlbnQgaXMgYSBjb21wb25lbnQgb3Igc3RlcC5cclxuICAgKi9cclxuICBwYXJ0T2Y/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGVuY291bnRlciBvciBlcGlzb2RlIG9mIGNhcmUgdGhhdCBlc3RhYmxpc2hlcyB0aGUgY29udGV4dCBmb3IgdGhpcyBNZWRpY2F0aW9uU3RhdGVtZW50LlxyXG4gICAqL1xyXG4gIGNvbnRleHQ/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE1lZGljYXRpb25TdGF0ZW1lbnQgaXMgYSBzdGF0ZW1lbnQgYXQgYSBwb2ludCBpbiB0aW1lLiAgVGhlIHN0YXR1cyBpcyBvbmx5IHJlcHJlc2VudGF0aXZlIGF0IHRoZSBwb2ludCB3aGVuIGl0IHdhcyBhc3NlcnRlZC4gIFRoZSB2YWx1ZSBzZXQgZm9yIE1lZGljYXRpb25TdGF0ZW1lbnQuc3RhdHVzIGNvbnRhaW5zIGNvZGVzIHRoYXQgYXNzZXJ0IHRoZSBzdGF0dXMgb2YgdGhlIHVzZSBvZiB0aGUgbWVkaWNhdGlvbiBieSB0aGUgcGF0aWVudCAoZm9yIGV4YW1wbGUsIHN0b3BwZWQgb3Igb24gaG9sZCkgYXMgd2VsbCBhcyBjb2RlcyB0aGF0IGFzc2VydCB0aGUgc3RhdHVzIG9mIHRoZSBtZWRpY2F0aW9uIHN0YXRlbWVudCBpdHNlbGYgKGZvciBleGFtcGxlLCBlbnRlcmVkIGluIGVycm9yKS5cclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIGJlY2F1c2UgdGhlIHN0YXR1cyBjb250YWlucyBjb2RlcyB0aGF0IG1hcmsgdGhlIHJlc291cmNlIGFzIG5vdCBjdXJyZW50bHkgdmFsaWQuXHJcbiAgICovXHJcbiAgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPE1lZGljYXRpb25TdGF0ZW1lbnRTdGF0dXNDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogTWVkaWNhdGlvblN0YXRlbWVudC5zdGF0dXNcclxuICAgKi9cclxuICBfc3RhdHVzPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgd2hlcmUgdHlwZSBvZiBtZWRpY2F0aW9uIHN0YXRlbWVudCBhbmQgd2hlcmUgdGhlIG1lZGljYXRpb24gaXMgZXhwZWN0ZWQgdG8gYmUgY29uc3VtZWQgb3IgYWRtaW5pc3RlcmVkLlxyXG4gICAqL1xyXG4gIGNhdGVnb3J5PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiBvbmx5IGEgY29kZSBpcyBzcGVjaWZpZWQsIHRoZW4gaXQgbmVlZHMgdG8gYmUgYSBjb2RlIGZvciBhIHNwZWNpZmljIHByb2R1Y3QuIElmIG1vcmUgaW5mb3JtYXRpb24gaXMgcmVxdWlyZWQsIHRoZW4gdGhlIHVzZSBvZiB0aGUgbWVkaWNhdGlvbiByZXNvdXJjZSBpcyByZWNvbW1lbmRlZC7CoCBGb3IgZXhhbXBsZSBpZsKgeW91IHJlcXVpcmXCoGZvcm0gb3LCoGxvdCBudW1iZXIsIHRoZW4geW91IG11c3TCoHJlZmVyZW5jZSB0aGUgTWVkaWNhdGlvbiByZXNvdXJjZS7CoC5cclxuICAgKi9cclxuICBtZWRpY2F0aW9uPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8Zmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIG9ubHkgYSBjb2RlIGlzIHNwZWNpZmllZCwgdGhlbiBpdCBuZWVkcyB0byBiZSBhIGNvZGUgZm9yIGEgc3BlY2lmaWMgcHJvZHVjdC4gSWYgbW9yZSBpbmZvcm1hdGlvbiBpcyByZXF1aXJlZCwgdGhlbiB0aGUgdXNlIG9mIHRoZSBtZWRpY2F0aW9uIHJlc291cmNlIGlzIHJlY29tbWVuZGVkLsKgIEZvciBleGFtcGxlIGlmwqB5b3UgcmVxdWlyZcKgZm9ybSBvcsKgbG90IG51bWJlciwgdGhlbiB5b3UgbXVzdMKgcmVmZXJlbmNlIHRoZSBNZWRpY2F0aW9uIHJlc291cmNlLsKgLlxyXG4gICAqL1xyXG4gIG1lZGljYXRpb25Db2RlYWJsZUNvbmNlcHQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIG9ubHkgYSBjb2RlIGlzIHNwZWNpZmllZCwgdGhlbiBpdCBuZWVkcyB0byBiZSBhIGNvZGUgZm9yIGEgc3BlY2lmaWMgcHJvZHVjdC4gSWYgbW9yZSBpbmZvcm1hdGlvbiBpcyByZXF1aXJlZCwgdGhlbiB0aGUgdXNlIG9mIHRoZSBtZWRpY2F0aW9uIHJlc291cmNlIGlzIHJlY29tbWVuZGVkLsKgIEZvciBleGFtcGxlIGlmwqB5b3UgcmVxdWlyZcKgZm9ybSBvcsKgbG90IG51bWJlciwgdGhlbiB5b3UgbXVzdMKgcmVmZXJlbmNlIHRoZSBNZWRpY2F0aW9uIHJlc291cmNlLsKgLlxyXG4gICAqL1xyXG4gIG1lZGljYXRpb25SZWZlcmVuY2U/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgYXR0cmlidXRlIHJlZmxlY3RzIHRoZSBwZXJpb2Qgb3ZlciB3aGljaCB0aGUgcGF0aWVudCBjb25zdW1lZCB0aGUgbWVkaWNhdGlvbiBhbmQgaXMgZXhwZWN0ZWQgdG8gYmUgcG9wdWxhdGVkIG9uIHRoZSBtYWpvcml0eSBvZiBNZWRpY2F0aW9uIFN0YXRlbWVudHMuIElmIHRoZSBtZWRpY2F0aW9uIGlzIHN0aWxsIGJlaW5nIHRha2VuIGF0IHRoZSB0aW1lIHRoZSBzdGF0ZW1lbnQgaXMgcmVjb3JkZWQsIHRoZSBcImVuZFwiIGRhdGUgd2lsbCBiZSBvbWl0dGVkLlxyXG4gICAqL1xyXG4gIGVmZmVjdGl2ZT86IGZoaXIuRmhpckRhdGVUaW1lfGZoaXIuUGVyaW9kfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGF0dHJpYnV0ZSByZWZsZWN0cyB0aGUgcGVyaW9kIG92ZXIgd2hpY2ggdGhlIHBhdGllbnQgY29uc3VtZWQgdGhlIG1lZGljYXRpb24gYW5kIGlzIGV4cGVjdGVkIHRvIGJlIHBvcHVsYXRlZCBvbiB0aGUgbWFqb3JpdHkgb2YgTWVkaWNhdGlvbiBTdGF0ZW1lbnRzLiBJZiB0aGUgbWVkaWNhdGlvbiBpcyBzdGlsbCBiZWluZyB0YWtlbiBhdCB0aGUgdGltZSB0aGUgc3RhdGVtZW50IGlzIHJlY29yZGVkLCB0aGUgXCJlbmRcIiBkYXRlIHdpbGwgYmUgb21pdHRlZC5cclxuICAgKi9cclxuICBlZmZlY3RpdmVEYXRlVGltZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBhdHRyaWJ1dGUgcmVmbGVjdHMgdGhlIHBlcmlvZCBvdmVyIHdoaWNoIHRoZSBwYXRpZW50IGNvbnN1bWVkIHRoZSBtZWRpY2F0aW9uIGFuZCBpcyBleHBlY3RlZCB0byBiZSBwb3B1bGF0ZWQgb24gdGhlIG1ham9yaXR5IG9mIE1lZGljYXRpb24gU3RhdGVtZW50cy4gSWYgdGhlIG1lZGljYXRpb24gaXMgc3RpbGwgYmVpbmcgdGFrZW4gYXQgdGhlIHRpbWUgdGhlIHN0YXRlbWVudCBpcyByZWNvcmRlZCwgdGhlIFwiZW5kXCIgZGF0ZSB3aWxsIGJlIG9taXR0ZWQuXHJcbiAgICovXHJcbiAgZWZmZWN0aXZlUGVyaW9kPzogZmhpci5QZXJpb2RBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSB3aGVuIHRoZSBtZWRpY2F0aW9uIHN0YXRlbWVudCB3YXMgYXNzZXJ0ZWQgYnkgdGhlIGluZm9ybWF0aW9uIHNvdXJjZS5cclxuICAgKi9cclxuICBkYXRlQXNzZXJ0ZWQ/OiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBNZWRpY2F0aW9uU3RhdGVtZW50LmRhdGVBc3NlcnRlZFxyXG4gICAqL1xyXG4gIF9kYXRlQXNzZXJ0ZWQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwZXJzb24gb3Igb3JnYW5pemF0aW9uIHRoYXQgcHJvdmlkZWQgdGhlIGluZm9ybWF0aW9uIGFib3V0IHRoZSB0YWtpbmcgb2YgdGhpcyBtZWRpY2F0aW9uLiBOb3RlOiBVc2UgZGVyaXZlZEZyb20gd2hlbiBhIE1lZGljYXRpb25TdGF0ZW1lbnQgaXMgZGVyaXZlZCBmcm9tIG90aGVyIHJlc291cmNlcywgZS5nIENsYWltIG9yIE1lZGljYXRpb25SZXF1ZXN0LlxyXG4gICAqL1xyXG4gIGluZm9ybWF0aW9uU291cmNlPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcGVyc29uLCBhbmltYWwgb3IgZ3JvdXAgd2hvIGlzL3dhcyB0YWtpbmcgdGhlIG1lZGljYXRpb24uXHJcbiAgICovXHJcbiAgc3ViamVjdDogZmhpci5SZWZlcmVuY2VBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogTGlrZWx5IHJlZmVyZW5jZXMgd291bGQgYmUgdG8gTWVkaWNhdGlvblJlcXVlc3QsIE1lZGljYXRpb25EaXNwZW5zZSwgQ2xhaW0sIE9ic2VydmF0aW9uIG9yIFF1ZXN0aW9ubmFpcmVBbnN3ZXJzLiAgVGhlIG1vc3QgY29tbW9uIHVzZSBjYXNlcyBmb3IgZGVyaXZpbmcgYSBNZWRpY2F0aW9uU3RhdGVtZW50IGNvbWVzIGZyb20gY3JlYXRpbmcgYSBNZWRpY2F0aW9uU3RhdGVtZW50IGZyb20gYSBNZWRpY2F0aW9uUmVxdWVzdCBvciBmcm9tIGEgbGFiIG9ic2VydmF0aW9uIG9yIGEgY2xhaW0uICBpdCBzaG91bGQgYmUgbm90ZWQgdGhhdCB0aGUgYW1vdW50IG9mIGluZm9ybWF0aW9uIHRoYXQgaXMgYXZhaWxhYmxlIHZhcmllcyBmcm9tIHRoZSB0eXBlIHJlc291cmNlIHRoYXQgeW91IGRlcml2ZSB0aGUgTWVkaWNhdGlvblN0YXRlbWVudCBmcm9tLlxyXG4gICAqL1xyXG4gIGRlcml2ZWRGcm9tPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgYmVjYXVzZSBpdCBpbmRpY2F0ZXMgdGhhdCB0aGUgbWVkaWNhdGlvbiB3YXMgbm90IHRha2VuLlxyXG4gICAqL1xyXG4gIHRha2VuOiBmaGlyLkZoaXJDb2RlPE1lZGljYXRpb25TdGF0ZW1lbnRUYWtlbkNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBNZWRpY2F0aW9uU3RhdGVtZW50LnRha2VuXHJcbiAgICovXHJcbiAgX3Rha2VuPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBBIGNvZGUgaW5kaWNhdGluZyB3aHkgdGhlIG1lZGljYXRpb24gd2FzIG5vdCB0YWtlbi5cclxuICAgKi9cclxuICByZWFzb25Ob3RUYWtlbj86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGNvdWxkIGJlIGEgZGlhZ25vc2lzIGNvZGUuIElmIGEgZnVsbCBjb25kaXRpb24gcmVjb3JkIGV4aXN0cyBvciBhZGRpdGlvbmFsIGRldGFpbCBpcyBuZWVkZWQsIHVzZSByZWFzb25Gb3JVc2VSZWZlcmVuY2UuXHJcbiAgICovXHJcbiAgcmVhc29uQ29kZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGlzIGEgcmVmZXJlbmNlIHRvIGEgY29uZGl0aW9uIHRoYXQgaXMgdGhlIHJlYXNvbiB3aHkgdGhlIG1lZGljYXRpb24gaXMgYmVpbmcvd2FzIHRha2VuLiAgSWYgb25seSBhIGNvZGUgZXhpc3RzLCB1c2UgcmVhc29uRm9yVXNlQ29kZS5cclxuICAgKi9cclxuICByZWFzb25SZWZlcmVuY2U/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUHJvdmlkZXMgZXh0cmEgaW5mb3JtYXRpb24gYWJvdXQgdGhlIG1lZGljYXRpb24gc3RhdGVtZW50IHRoYXQgaXMgbm90IGNvbnZleWVkIGJ5IHRoZSBvdGhlciBhdHRyaWJ1dGVzLlxyXG4gICAqL1xyXG4gIG5vdGU/OiBmaGlyLkFubm90YXRpb25BcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRlcyBpbmNsdWRlZCBpbiB0aGUgZG9zYWdlIG9uIGEgTWVkaWNhdGlvbiBTdGF0ZW1lbnQgcmVmbGVjdCB0aGUgZGF0ZXMgZm9yIGEgZ2l2ZW4gZG9zZS4gIEZvciBleGFtcGxlLCBcImZyb20gTm92ZW1iZXIgMSwgMjAxNiB0byBOb3ZlbWJlciAzLCAyMDE2LCB0YWtlIG9uZSB0YWJsZXQgZGFpbHkgYW5kIGZyb20gTm92ZW1iZXIgNCwgMjAxNiB0byBOb3ZlbWJlciA3LCAyMDE2LCB0YWtlIHR3byB0YWJsZXRzIGRhaWx5LlwiICBJdCBpcyBleHBlY3RlZCB0aGF0IHRoaXMgc3BlY2lmaWNpdHkgbWF5IG9ubHkgYmUgcG9wdWxhdGVkIHdoZXJlIHRoZSBwYXRpZW50IGJyaW5ncyBpbiB0aGVpciBsYWJlbGVkIGNvbnRhaW5lciBvciB3aGVyZSB0aGUgTWVkaWNhdGlvbiBTdGF0ZW1lbnQgaXMgZGVyaXZlZCBmcm9tIGEgTWVkaWNhdGlvblJlcXVlc3QuXHJcbiAgICovXHJcbiAgZG9zYWdlPzogZmhpci5Eb3NhZ2VBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQSByZWNvcmQgb2YgYSBtZWRpY2F0aW9uIHRoYXQgaXMgYmVpbmcgY29uc3VtZWQgYnkgYSBwYXRpZW50LiAgIEEgTWVkaWNhdGlvblN0YXRlbWVudCBtYXkgaW5kaWNhdGUgdGhhdCB0aGUgcGF0aWVudCBtYXkgYmUgdGFraW5nIHRoZSBtZWRpY2F0aW9uIG5vdywgb3IgaGFzIHRha2VuIHRoZSBtZWRpY2F0aW9uIGluIHRoZSBwYXN0IG9yIHdpbGwgYmUgdGFraW5nIHRoZSBtZWRpY2F0aW9uIGluIHRoZSBmdXR1cmUuICBUaGUgc291cmNlIG9mIHRoaXMgaW5mb3JtYXRpb24gY2FuIGJlIHRoZSBwYXRpZW50LCBzaWduaWZpY2FudCBvdGhlciAoc3VjaCBhcyBhIGZhbWlseSBtZW1iZXIgb3Igc3BvdXNlKSwgb3IgYSBjbGluaWNpYW4uICBBIGNvbW1vbiBzY2VuYXJpbyB3aGVyZSB0aGlzIGluZm9ybWF0aW9uIGlzIGNhcHR1cmVkIGlzIGR1cmluZyB0aGUgaGlzdG9yeSB0YWtpbmcgcHJvY2VzcyBkdXJpbmcgYSBwYXRpZW50IHZpc2l0IG9yIHN0YXkuICAgVGhlIG1lZGljYXRpb24gaW5mb3JtYXRpb24gbWF5IGNvbWUgZnJvbSBzb3VyY2VzIHN1Y2ggYXMgdGhlIHBhdGllbnQncyBtZW1vcnksIGZyb20gYSBwcmVzY3JpcHRpb24gYm90dGxlLCAgb3IgZnJvbSBhIGxpc3Qgb2YgbWVkaWNhdGlvbnMgdGhlIHBhdGllbnQsIGNsaW5pY2lhbiBvciBvdGhlciBwYXJ0eSBtYWludGFpbnMgXHJcbiAqIFRoZSBwcmltYXJ5IGRpZmZlcmVuY2UgYmV0d2VlbiBhIG1lZGljYXRpb24gc3RhdGVtZW50IGFuZCBhIG1lZGljYXRpb24gYWRtaW5pc3RyYXRpb24gaXMgdGhhdCB0aGUgbWVkaWNhdGlvbiBhZG1pbmlzdHJhdGlvbiBoYXMgY29tcGxldGUgYWRtaW5pc3RyYXRpb24gaW5mb3JtYXRpb24gYW5kIGlzIGJhc2VkIG9uIGFjdHVhbCBhZG1pbmlzdHJhdGlvbiBpbmZvcm1hdGlvbiBmcm9tIHRoZSBwZXJzb24gd2hvIGFkbWluaXN0ZXJlZCB0aGUgbWVkaWNhdGlvbi4gIEEgbWVkaWNhdGlvbiBzdGF0ZW1lbnQgaXMgb2Z0ZW4sIGlmIG5vdCBhbHdheXMsIGxlc3Mgc3BlY2lmaWMuICBUaGVyZSBpcyBubyByZXF1aXJlZCBkYXRlL3RpbWUgd2hlbiB0aGUgbWVkaWNhdGlvbiB3YXMgYWRtaW5pc3RlcmVkLCBpbiBmYWN0IHdlIG9ubHkga25vdyB0aGF0IGEgc291cmNlIGhhcyByZXBvcnRlZCB0aGUgcGF0aWVudCBpcyB0YWtpbmcgdGhpcyBtZWRpY2F0aW9uLCB3aGVyZSBkZXRhaWxzIHN1Y2ggYXMgdGltZSwgcXVhbnRpdHksIG9yIHJhdGUgb3IgZXZlbiBtZWRpY2F0aW9uIHByb2R1Y3QgbWF5IGJlIGluY29tcGxldGUgb3IgbWlzc2luZyBvciBsZXNzIHByZWNpc2UuICBBcyBzdGF0ZWQgZWFybGllciwgdGhlIG1lZGljYXRpb24gc3RhdGVtZW50IGluZm9ybWF0aW9uIG1heSBjb21lIGZyb20gdGhlIHBhdGllbnQncyBtZW1vcnksIGZyb20gYSBwcmVzY3JpcHRpb24gYm90dGxlIG9yIGZyb20gYSBsaXN0IG9mIG1lZGljYXRpb25zIHRoZSBwYXRpZW50LCBjbGluaWNpYW4gb3Igb3RoZXIgcGFydHkgbWFpbnRhaW5zLiAgTWVkaWNhdGlvbiBhZG1pbmlzdHJhdGlvbiBpcyBtb3JlIGZvcm1hbCBhbmQgaXMgbm90IG1pc3NpbmcgZGV0YWlsZWQgaW5mb3JtYXRpb24uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNhdGlvblN0YXRlbWVudCBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVkaWNhdGlvblN0YXRlbWVudCc7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJNZWRpY2F0aW9uU3RhdGVtZW50XCI7XHJcbiAgLyoqXHJcbiAgICogRXh0ZXJuYWwgaWRlbnRpZmllciAtIEZISVIgd2lsbCBnZW5lcmF0ZSBpdHMgb3duIGludGVybmFsIGlkZW50aWZpZXJzIChwcm9iYWJseSBVUkxzKSB3aGljaCBkbyBub3QgbmVlZCB0byBiZSBleHBsaWNpdGx5IG1hbmFnZWQgYnkgdGhlIHJlc291cmNlLiAgVGhlIGlkZW50aWZpZXIgaGVyZSBpcyBvbmUgdGhhdCB3b3VsZCBiZSB1c2VkIGJ5IGFub3RoZXIgbm9uLUZISVIgc3lzdGVtIC0gZm9yIGV4YW1wbGUgYW4gYXV0b21hdGVkIG1lZGljYXRpb24gcHVtcCB3b3VsZCBwcm92aWRlIGEgcmVjb3JkIGVhY2ggdGltZSBpdCBvcGVyYXRlZDsgYW4gYWRtaW5pc3RyYXRpb24gd2hpbGUgdGhlIHBhdGllbnQgd2FzIG9mZiB0aGUgd2FyZCBtaWdodCBiZSBtYWRlIHdpdGggYSBkaWZmZXJlbnQgc3lzdGVtIGFuZCBlbnRlcmVkIGFmdGVyIHRoZSBldmVudC4gIFBhcnRpY3VsYXJseSBpbXBvcnRhbnQgaWYgdGhlc2UgcmVjb3JkcyBoYXZlIHRvIGJlIHVwZGF0ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI6IGZoaXIuSWRlbnRpZmllcltdO1xyXG4gIC8qKlxyXG4gICAqIEEgcGxhbiwgcHJvcG9zYWwgb3Igb3JkZXIgdGhhdCBpcyBmdWxmaWxsZWQgaW4gd2hvbGUgb3IgaW4gcGFydCBieSB0aGlzIGV2ZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBiYXNlZE9uOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIEEgbGFyZ2VyIGV2ZW50IG9mIHdoaWNoIHRoaXMgcGFydGljdWxhciBldmVudCBpcyBhIGNvbXBvbmVudCBvciBzdGVwLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXJ0T2Y6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogVGhlIGVuY291bnRlciBvciBlcGlzb2RlIG9mIGNhcmUgdGhhdCBlc3RhYmxpc2hlcyB0aGUgY29udGV4dCBmb3IgdGhpcyBNZWRpY2F0aW9uU3RhdGVtZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb250ZXh0PzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE1lZGljYXRpb25TdGF0ZW1lbnQgaXMgYSBzdGF0ZW1lbnQgYXQgYSBwb2ludCBpbiB0aW1lLiAgVGhlIHN0YXR1cyBpcyBvbmx5IHJlcHJlc2VudGF0aXZlIGF0IHRoZSBwb2ludCB3aGVuIGl0IHdhcyBhc3NlcnRlZC4gIFRoZSB2YWx1ZSBzZXQgZm9yIE1lZGljYXRpb25TdGF0ZW1lbnQuc3RhdHVzIGNvbnRhaW5zIGNvZGVzIHRoYXQgYXNzZXJ0IHRoZSBzdGF0dXMgb2YgdGhlIHVzZSBvZiB0aGUgbWVkaWNhdGlvbiBieSB0aGUgcGF0aWVudCAoZm9yIGV4YW1wbGUsIHN0b3BwZWQgb3Igb24gaG9sZCkgYXMgd2VsbCBhcyBjb2RlcyB0aGF0IGFzc2VydCB0aGUgc3RhdHVzIG9mIHRoZSBtZWRpY2F0aW9uIHN0YXRlbWVudCBpdHNlbGYgKGZvciBleGFtcGxlLCBlbnRlcmVkIGluIGVycm9yKS5cclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIGJlY2F1c2UgdGhlIHN0YXR1cyBjb250YWlucyBjb2RlcyB0aGF0IG1hcmsgdGhlIHJlc291cmNlIGFzIG5vdCBjdXJyZW50bHkgdmFsaWQuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1czogZmhpci5GaGlyQ29kZTxNZWRpY2F0aW9uU3RhdGVtZW50U3RhdHVzQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHdoZXJlIHR5cGUgb2YgbWVkaWNhdGlvbiBzdGF0ZW1lbnQgYW5kIHdoZXJlIHRoZSBtZWRpY2F0aW9uIGlzIGV4cGVjdGVkIHRvIGJlIGNvbnN1bWVkIG9yIGFkbWluaXN0ZXJlZC5cclxuICAgKi9cclxuICBwdWJsaWMgY2F0ZWdvcnk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgb25seSBhIGNvZGUgaXMgc3BlY2lmaWVkLCB0aGVuIGl0IG5lZWRzIHRvIGJlIGEgY29kZSBmb3IgYSBzcGVjaWZpYyBwcm9kdWN0LiBJZiBtb3JlIGluZm9ybWF0aW9uIGlzIHJlcXVpcmVkLCB0aGVuIHRoZSB1c2Ugb2YgdGhlIG1lZGljYXRpb24gcmVzb3VyY2UgaXMgcmVjb21tZW5kZWQuwqAgRm9yIGV4YW1wbGUgaWbCoHlvdSByZXF1aXJlwqBmb3JtIG9ywqBsb3QgbnVtYmVyLCB0aGVuIHlvdSBtdXN0wqByZWZlcmVuY2UgdGhlIE1lZGljYXRpb24gcmVzb3VyY2UuwqAuXHJcbiAgICovXHJcbiAgcHVibGljIG1lZGljYXRpb246IChmaGlyLkNvZGVhYmxlQ29uY2VwdHxmaGlyLlJlZmVyZW5jZSl8bnVsbDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IE1lZGljYXRpb25TdGF0ZW1lbnQubWVkaWNhdGlvblt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c19tZWRpY2F0aW9uSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBhdHRyaWJ1dGUgcmVmbGVjdHMgdGhlIHBlcmlvZCBvdmVyIHdoaWNoIHRoZSBwYXRpZW50IGNvbnN1bWVkIHRoZSBtZWRpY2F0aW9uIGFuZCBpcyBleHBlY3RlZCB0byBiZSBwb3B1bGF0ZWQgb24gdGhlIG1ham9yaXR5IG9mIE1lZGljYXRpb24gU3RhdGVtZW50cy4gSWYgdGhlIG1lZGljYXRpb24gaXMgc3RpbGwgYmVpbmcgdGFrZW4gYXQgdGhlIHRpbWUgdGhlIHN0YXRlbWVudCBpcyByZWNvcmRlZCwgdGhlIFwiZW5kXCIgZGF0ZSB3aWxsIGJlIG9taXR0ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGVmZmVjdGl2ZT86IChmaGlyLkZoaXJEYXRlVGltZXxmaGlyLlBlcmlvZCl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgTWVkaWNhdGlvblN0YXRlbWVudC5lZmZlY3RpdmVbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfZWZmZWN0aXZlSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgd2hlbiB0aGUgbWVkaWNhdGlvbiBzdGF0ZW1lbnQgd2FzIGFzc2VydGVkIGJ5IHRoZSBpbmZvcm1hdGlvbiBzb3VyY2UuXHJcbiAgICovXHJcbiAgcHVibGljIGRhdGVBc3NlcnRlZD86IGZoaXIuRmhpckRhdGVUaW1lfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcGVyc29uIG9yIG9yZ2FuaXphdGlvbiB0aGF0IHByb3ZpZGVkIHRoZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgdGFraW5nIG9mIHRoaXMgbWVkaWNhdGlvbi4gTm90ZTogVXNlIGRlcml2ZWRGcm9tIHdoZW4gYSBNZWRpY2F0aW9uU3RhdGVtZW50IGlzIGRlcml2ZWQgZnJvbSBvdGhlciByZXNvdXJjZXMsIGUuZyBDbGFpbSBvciBNZWRpY2F0aW9uUmVxdWVzdC5cclxuICAgKi9cclxuICBwdWJsaWMgaW5mb3JtYXRpb25Tb3VyY2U/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBlcnNvbiwgYW5pbWFsIG9yIGdyb3VwIHdobyBpcy93YXMgdGFraW5nIHRoZSBtZWRpY2F0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdWJqZWN0OiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIExpa2VseSByZWZlcmVuY2VzIHdvdWxkIGJlIHRvIE1lZGljYXRpb25SZXF1ZXN0LCBNZWRpY2F0aW9uRGlzcGVuc2UsIENsYWltLCBPYnNlcnZhdGlvbiBvciBRdWVzdGlvbm5haXJlQW5zd2Vycy4gIFRoZSBtb3N0IGNvbW1vbiB1c2UgY2FzZXMgZm9yIGRlcml2aW5nIGEgTWVkaWNhdGlvblN0YXRlbWVudCBjb21lcyBmcm9tIGNyZWF0aW5nIGEgTWVkaWNhdGlvblN0YXRlbWVudCBmcm9tIGEgTWVkaWNhdGlvblJlcXVlc3Qgb3IgZnJvbSBhIGxhYiBvYnNlcnZhdGlvbiBvciBhIGNsYWltLiAgaXQgc2hvdWxkIGJlIG5vdGVkIHRoYXQgdGhlIGFtb3VudCBvZiBpbmZvcm1hdGlvbiB0aGF0IGlzIGF2YWlsYWJsZSB2YXJpZXMgZnJvbSB0aGUgdHlwZSByZXNvdXJjZSB0aGF0IHlvdSBkZXJpdmUgdGhlIE1lZGljYXRpb25TdGF0ZW1lbnQgZnJvbS5cclxuICAgKi9cclxuICBwdWJsaWMgZGVyaXZlZEZyb206IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IGlzIGxhYmVsZWQgYXMgYSBtb2RpZmllciBiZWNhdXNlIGl0IGluZGljYXRlcyB0aGF0IHRoZSBtZWRpY2F0aW9uIHdhcyBub3QgdGFrZW4uXHJcbiAgICovXHJcbiAgcHVibGljIHRha2VuOiBmaGlyLkZoaXJDb2RlPE1lZGljYXRpb25TdGF0ZW1lbnRUYWtlbkNvZGVUeXBlPnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEEgY29kZSBpbmRpY2F0aW5nIHdoeSB0aGUgbWVkaWNhdGlvbiB3YXMgbm90IHRha2VuLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWFzb25Ob3RUYWtlbjogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBUaGlzIGNvdWxkIGJlIGEgZGlhZ25vc2lzIGNvZGUuIElmIGEgZnVsbCBjb25kaXRpb24gcmVjb3JkIGV4aXN0cyBvciBhZGRpdGlvbmFsIGRldGFpbCBpcyBuZWVkZWQsIHVzZSByZWFzb25Gb3JVc2VSZWZlcmVuY2UuXHJcbiAgICovXHJcbiAgcHVibGljIHJlYXNvbkNvZGU6IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBhIHJlZmVyZW5jZSB0byBhIGNvbmRpdGlvbiB0aGF0IGlzIHRoZSByZWFzb24gd2h5IHRoZSBtZWRpY2F0aW9uIGlzIGJlaW5nL3dhcyB0YWtlbi4gIElmIG9ubHkgYSBjb2RlIGV4aXN0cywgdXNlIHJlYXNvbkZvclVzZUNvZGUuXHJcbiAgICovXHJcbiAgcHVibGljIHJlYXNvblJlZmVyZW5jZTogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBQcm92aWRlcyBleHRyYSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgbWVkaWNhdGlvbiBzdGF0ZW1lbnQgdGhhdCBpcyBub3QgY29udmV5ZWQgYnkgdGhlIG90aGVyIGF0dHJpYnV0ZXMuXHJcbiAgICovXHJcbiAgcHVibGljIG5vdGU6IGZoaXIuQW5ub3RhdGlvbltdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRlcyBpbmNsdWRlZCBpbiB0aGUgZG9zYWdlIG9uIGEgTWVkaWNhdGlvbiBTdGF0ZW1lbnQgcmVmbGVjdCB0aGUgZGF0ZXMgZm9yIGEgZ2l2ZW4gZG9zZS4gIEZvciBleGFtcGxlLCBcImZyb20gTm92ZW1iZXIgMSwgMjAxNiB0byBOb3ZlbWJlciAzLCAyMDE2LCB0YWtlIG9uZSB0YWJsZXQgZGFpbHkgYW5kIGZyb20gTm92ZW1iZXIgNCwgMjAxNiB0byBOb3ZlbWJlciA3LCAyMDE2LCB0YWtlIHR3byB0YWJsZXRzIGRhaWx5LlwiICBJdCBpcyBleHBlY3RlZCB0aGF0IHRoaXMgc3BlY2lmaWNpdHkgbWF5IG9ubHkgYmUgcG9wdWxhdGVkIHdoZXJlIHRoZSBwYXRpZW50IGJyaW5ncyBpbiB0aGVpciBsYWJlbGVkIGNvbnRhaW5lciBvciB3aGVyZSB0aGUgTWVkaWNhdGlvbiBTdGF0ZW1lbnQgaXMgZGVyaXZlZCBmcm9tIGEgTWVkaWNhdGlvblJlcXVlc3QuXHJcbiAgICovXHJcbiAgcHVibGljIGRvc2FnZTogZmhpci5Eb3NhZ2VbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBNZWRpY2F0aW9uU3RhdGVtZW50IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVkaWNhdGlvblN0YXRlbWVudEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdNZWRpY2F0aW9uU3RhdGVtZW50JztcclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBzb3VyY2UuaWRlbnRpZmllci5tYXAoKHgpID0+IG5ldyBmaGlyLklkZW50aWZpZXIoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pZGVudGlmaWVyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2Jhc2VkT24nXSkgeyB0aGlzLmJhc2VkT24gPSBzb3VyY2UuYmFzZWRPbi5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmJhc2VkT24gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncGFydE9mJ10pIHsgdGhpcy5wYXJ0T2YgPSBzb3VyY2UucGFydE9mLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucGFydE9mID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvbnRleHQnXSkgeyB0aGlzLmNvbnRleHQgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmNvbnRleHQpOyB9XHJcbiAgICBpZiAoc291cmNlWydzdGF0dXMnXSkgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPE1lZGljYXRpb25TdGF0ZW1lbnRTdGF0dXNDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2Uuc3RhdHVzfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zdGF0dXMnXSkge1xyXG4gICAgICBpZiAodGhpcy5zdGF0dXMpIHsgdGhpcy5zdGF0dXMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc3RhdHVzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8TWVkaWNhdGlvblN0YXRlbWVudFN0YXR1c0NvZGVUeXBlPihzb3VyY2UuX3N0YXR1cyBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnY2F0ZWdvcnknXSkgeyB0aGlzLmNhdGVnb3J5ID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jYXRlZ29yeSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ21lZGljYXRpb24nXSkgeyB0aGlzLm1lZGljYXRpb24gPSBzb3VyY2UubWVkaWNhdGlvbjsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydtZWRpY2F0aW9uQ29kZWFibGVDb25jZXB0J10pIHsgdGhpcy5tZWRpY2F0aW9uID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5tZWRpY2F0aW9uQ29kZWFibGVDb25jZXB0KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydtZWRpY2F0aW9uUmVmZXJlbmNlJ10pIHsgdGhpcy5tZWRpY2F0aW9uID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5tZWRpY2F0aW9uUmVmZXJlbmNlKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubWVkaWNhdGlvbiA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ2VmZmVjdGl2ZSddKSB7IHRoaXMuZWZmZWN0aXZlID0gc291cmNlLmVmZmVjdGl2ZTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydlZmZlY3RpdmVEYXRlVGltZSddKSB7IHRoaXMuZWZmZWN0aXZlID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLmVmZmVjdGl2ZURhdGVUaW1lfSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnZWZmZWN0aXZlUGVyaW9kJ10pIHsgdGhpcy5lZmZlY3RpdmUgPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLmVmZmVjdGl2ZVBlcmlvZCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2RhdGVBc3NlcnRlZCddKSB7IHRoaXMuZGF0ZUFzc2VydGVkID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLmRhdGVBc3NlcnRlZH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfZGF0ZUFzc2VydGVkJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZGF0ZUFzc2VydGVkKSB7IHRoaXMuZGF0ZUFzc2VydGVkLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2RhdGVBc3NlcnRlZCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRhdGVBc3NlcnRlZCA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZShzb3VyY2UuX2RhdGVBc3NlcnRlZCBhcyBQYXJ0aWFsPGZoaXIuRmhpckRhdGVUaW1lQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydpbmZvcm1hdGlvblNvdXJjZSddKSB7IHRoaXMuaW5mb3JtYXRpb25Tb3VyY2UgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmluZm9ybWF0aW9uU291cmNlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3ViamVjdCddKSB7IHRoaXMuc3ViamVjdCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2Uuc3ViamVjdCk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN1YmplY3QgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydkZXJpdmVkRnJvbSddKSB7IHRoaXMuZGVyaXZlZEZyb20gPSBzb3VyY2UuZGVyaXZlZEZyb20ubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5kZXJpdmVkRnJvbSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWyd0YWtlbiddKSB7IHRoaXMudGFrZW4gPSBuZXcgZmhpci5GaGlyQ29kZTxNZWRpY2F0aW9uU3RhdGVtZW50VGFrZW5Db2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2UudGFrZW59KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudGFrZW4gPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfdGFrZW4nXSkge1xyXG4gICAgICBpZiAodGhpcy50YWtlbikgeyB0aGlzLnRha2VuLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3Rha2VuISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudGFrZW4gPSBuZXcgZmhpci5GaGlyQ29kZTxNZWRpY2F0aW9uU3RhdGVtZW50VGFrZW5Db2RlVHlwZT4oc291cmNlLl90YWtlbiBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVhc29uTm90VGFrZW4nXSkgeyB0aGlzLnJlYXNvbk5vdFRha2VuID0gc291cmNlLnJlYXNvbk5vdFRha2VuLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVhc29uTm90VGFrZW4gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVhc29uQ29kZSddKSB7IHRoaXMucmVhc29uQ29kZSA9IHNvdXJjZS5yZWFzb25Db2RlLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVhc29uQ29kZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydyZWFzb25SZWZlcmVuY2UnXSkgeyB0aGlzLnJlYXNvblJlZmVyZW5jZSA9IHNvdXJjZS5yZWFzb25SZWZlcmVuY2UubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZWFzb25SZWZlcmVuY2UgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbm90ZSddKSB7IHRoaXMubm90ZSA9IHNvdXJjZS5ub3RlLm1hcCgoeCkgPT4gbmV3IGZoaXIuQW5ub3RhdGlvbih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm5vdGUgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZG9zYWdlJ10pIHsgdGhpcy5kb3NhZ2UgPSBzb3VyY2UuZG9zYWdlLm1hcCgoeCkgPT4gbmV3IGZoaXIuRG9zYWdlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZG9zYWdlID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdNZWRpY2F0aW9uU3RhdGVtZW50JyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnaWRlbnRpZmllcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnYmFzZWRPbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgncGFydE9mJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdjb250ZXh0JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTVignc3RhdHVzJyxleHAsJ01lZGljYXRpb25TdGF0ZW1lbnRTdGF0dXMnLE1lZGljYXRpb25TdGF0ZW1lbnRTdGF0dXNWc1ZhbGlkYXRpb24sJ3InKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnY2F0ZWdvcnknLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ21lZGljYXRpb24nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2VmZmVjdGl2ZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnZGF0ZUFzc2VydGVkJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdpbmZvcm1hdGlvblNvdXJjZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygnc3ViamVjdCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnZGVyaXZlZEZyb20nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlNWKCd0YWtlbicsZXhwLCdNZWRpY2F0aW9uU3RhdGVtZW50VGFrZW4nLE1lZGljYXRpb25TdGF0ZW1lbnRUYWtlblZzVmFsaWRhdGlvbiwncicpKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdyZWFzb25Ob3RUYWtlbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgncmVhc29uQ29kZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgncmVhc29uUmVmZXJlbmNlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdub3RlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdkb3NhZ2UnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuIl19