// <auto-generated/>
// Contents of: hl7.fhir.r3.core version: 3.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: Composition
import * as fhir from '../fhir.js';
// @ts-ignore
import { CompositionAttestationModeVsValidation } from '../fhirValueSets/CompositionAttestationModeVsValidation.js';
// @ts-ignore
import { DocumentRelationshipTypeVsValidation } from '../fhirValueSets/DocumentRelationshipTypeVsValidation.js';
// @ts-ignore
import { ListModeVsValidation } from '../fhirValueSets/ListModeVsValidation.js';
// @ts-ignore
import { CompositionStatusVsValidation } from '../fhirValueSets/CompositionStatusVsValidation.js';
// @ts-ignore
import { V3ConfidentialityClassificationVsValidation } from '../fhirValueSets/V3ConfidentialityClassificationVsValidation.js';
/**
 * Only list each attester once.
 */
export class CompositionAttester extends fhir.BackboneElement {
    /**
     * Default constructor for CompositionAttester - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['mode']) {
            this.mode = source.mode.map((x) => new fhir.FhirCode({ value: x }));
        }
        else {
            this.mode = [];
        }
        if (source['_mode']) {
            source._mode.forEach((x, i) => {
                if (this.mode.length >= i) {
                    if (x) {
                        this.mode[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.mode.push(new fhir.FhirCode(x));
                    }
                }
            });
        }
        if (source['time']) {
            this.time = new fhir.FhirDateTime({ value: source.time });
        }
        if (source['_time']) {
            if (this.time) {
                this.time.addExtendedProperties(source._time);
            }
            else {
                this.time = new fhir.FhirDateTime(source._time);
            }
        }
        if (source['party']) {
            this.party = new fhir.Reference(source.party);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Composition.attester';
        }
        this.vRAV('mode', exp, 'CompositionAttestationMode', CompositionAttestationModeVsValidation, 'r');
        this.vOS('time', exp);
        this.vOS('party', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
CompositionAttester._fts_dataType = 'CompositionAttester';
/**
 * A document is a version specific composition.
 */
export class CompositionRelatesTo extends fhir.BackboneElement {
    /**
     * Default constructor for CompositionRelatesTo - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.FhirCode({ value: source.code });
        }
        else {
            this.code = null;
        }
        if (source['_code']) {
            if (this.code) {
                this.code.addExtendedProperties(source._code);
            }
            else {
                this.code = new fhir.FhirCode(source._code);
            }
        }
        if (source['target']) {
            this.target = source.target;
        }
        else if (source['targetIdentifier']) {
            this.target = new fhir.Identifier(source.targetIdentifier);
        }
        else if (source['targetReference']) {
            this.target = new fhir.Reference(source.targetReference);
        }
        else {
            this.target = null;
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Composition.relatesTo';
        }
        this.vRSV('code', exp, 'DocumentRelationshipType', DocumentRelationshipTypeVsValidation, 'r');
        this.vRS('target', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
CompositionRelatesTo._fts_dataType = 'CompositionRelatesTo';
/**
 * Internal flag to properly serialize choice-type element Composition.relatesTo.target[x]
 */
CompositionRelatesTo._fts_targetIsChoice = true;
/**
 * The event needs to be consistent with the type element, though can provide further information if desired.
 */
export class CompositionEvent extends fhir.BackboneElement {
    /**
     * Default constructor for CompositionEvent - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = source.code.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.code = [];
        }
        if (source['period']) {
            this.period = new fhir.Period(source.period);
        }
        if (source['detail']) {
            this.detail = source.detail.map((x) => new fhir.Reference(x));
        }
        else {
            this.detail = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Composition.event';
        }
        this.vOA('code', exp);
        this.vOS('period', exp);
        this.vOA('detail', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
CompositionEvent._fts_dataType = 'CompositionEvent';
/**
 * The root of the sections that make up the composition.
 */
export class CompositionSection extends fhir.BackboneElement {
    /**
     * Default constructor for CompositionSection - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['title']) {
            this.title = new fhir.FhirString({ value: source.title });
        }
        if (source['_title']) {
            if (this.title) {
                this.title.addExtendedProperties(source._title);
            }
            else {
                this.title = new fhir.FhirString(source._title);
            }
        }
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        if (source['text']) {
            this.text = new fhir.Narrative(source.text);
        }
        if (source['mode']) {
            this.mode = new fhir.FhirCode({ value: source.mode });
        }
        if (source['_mode']) {
            if (this.mode) {
                this.mode.addExtendedProperties(source._mode);
            }
            else {
                this.mode = new fhir.FhirCode(source._mode);
            }
        }
        if (source['orderedBy']) {
            this.orderedBy = new fhir.CodeableConcept(source.orderedBy);
        }
        if (source['entry']) {
            this.entry = source.entry.map((x) => new fhir.Reference(x));
        }
        else {
            this.entry = [];
        }
        if (source['emptyReason']) {
            this.emptyReason = new fhir.CodeableConcept(source.emptyReason);
        }
        if (source['section']) {
            this.section = source.section.map((x) => new fhir.CompositionSection(x));
        }
        else {
            this.section = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Composition.section';
        }
        this.vOS('title', exp);
        this.vOS('code', exp);
        this.vOS('text', exp);
        this.vOSV('mode', exp, 'ListMode', ListModeVsValidation, 'r');
        this.vOS('orderedBy', exp);
        this.vOA('entry', exp);
        this.vOS('emptyReason', exp);
        this.vOA('section', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
CompositionSection._fts_dataType = 'CompositionSection';
/**
 * A set of healthcare-related information that is assembled together into a single logical document that provides a single coherent statement of meaning, establishes its own context and that has clinical attestation with regard to who is making the statement. While a Composition defines the structure, it does not actually contain the content: rather the full content of a document is contained in a Bundle, of which the Composition is the first resource contained.
 */
export class Composition extends fhir.DomainResource {
    /**
     * Default constructor for Composition - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'Composition';
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier);
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type);
        }
        else {
            this.type = null;
        }
        if (source['class']) {
            this.class = new fhir.CodeableConcept(source.class);
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject);
        }
        else {
            this.subject = null;
        }
        if (source['encounter']) {
            this.encounter = new fhir.Reference(source.encounter);
        }
        if (source['date']) {
            this.date = new fhir.FhirDateTime({ value: source.date });
        }
        else {
            this.date = null;
        }
        if (source['_date']) {
            if (this.date) {
                this.date.addExtendedProperties(source._date);
            }
            else {
                this.date = new fhir.FhirDateTime(source._date);
            }
        }
        if (source['author']) {
            this.author = source.author.map((x) => new fhir.Reference(x));
        }
        else {
            this.author = [];
        }
        if (source['title']) {
            this.title = new fhir.FhirString({ value: source.title });
        }
        else {
            this.title = null;
        }
        if (source['_title']) {
            if (this.title) {
                this.title.addExtendedProperties(source._title);
            }
            else {
                this.title = new fhir.FhirString(source._title);
            }
        }
        if (source['confidentiality']) {
            this.confidentiality = new fhir.FhirCode({ value: source.confidentiality });
        }
        if (source['_confidentiality']) {
            if (this.confidentiality) {
                this.confidentiality.addExtendedProperties(source._confidentiality);
            }
            else {
                this.confidentiality = new fhir.FhirCode(source._confidentiality);
            }
        }
        if (source['attester']) {
            this.attester = source.attester.map((x) => new fhir.CompositionAttester(x));
        }
        else {
            this.attester = [];
        }
        if (source['custodian']) {
            this.custodian = new fhir.Reference(source.custodian);
        }
        if (source['relatesTo']) {
            this.relatesTo = source.relatesTo.map((x) => new fhir.CompositionRelatesTo(x));
        }
        else {
            this.relatesTo = [];
        }
        if (source['event']) {
            this.event = source.event.map((x) => new fhir.CompositionEvent(x));
        }
        else {
            this.event = [];
        }
        if (source['section']) {
            this.section = source.section.map((x) => new fhir.CompositionSection(x));
        }
        else {
            this.section = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Composition';
        }
        this.vRS('resourceType', exp);
        this.vOS('identifier', exp);
        this.vRSV('status', exp, 'CompositionStatus', CompositionStatusVsValidation, 'r');
        this.vRS('type', exp);
        this.vOS('class', exp);
        this.vRS('subject', exp);
        this.vOS('encounter', exp);
        this.vRS('date', exp);
        this.vRA('author', exp);
        this.vRS('title', exp);
        this.vOSV('confidentiality', exp, 'V3ConfidentialityClassification', V3ConfidentialityClassificationVsValidation, 'r');
        this.vOA('attester', exp);
        this.vOS('custodian', exp);
        this.vOA('relatesTo', exp);
        this.vOA('event', exp);
        this.vOA('section', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
Composition._fts_dataType = 'Composition';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29tcG9zaXRpb24uanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL0NvbXBvc2l0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQiwrQ0FBK0M7QUFDL0Msa0NBQWtDO0FBQ2xDLDZCQUE2QjtBQUU3QixPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQUluQyxhQUFhO0FBQ2IsT0FBTyxFQUFFLHNDQUFzQyxFQUFFLE1BQU0sNERBQTRELENBQUM7QUFHcEgsYUFBYTtBQUNiLE9BQU8sRUFBRSxvQ0FBb0MsRUFBRSxNQUFNLDBEQUEwRCxDQUFDO0FBV2hILGFBQWE7QUFDYixPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSwwQ0FBMEMsQ0FBQztBQVdoRixhQUFhO0FBQ2IsT0FBTyxFQUFFLDZCQUE2QixFQUFFLE1BQU0sbURBQW1ELENBQUM7QUFXbEcsYUFBYTtBQUNiLE9BQU8sRUFBRSwyQ0FBMkMsRUFBRSxNQUFNLGlFQUFpRSxDQUFDO0FBMkI5SDs7R0FFRztBQUNILE1BQU0sT0FBTyxtQkFBb0IsU0FBUSxJQUFJLENBQUMsZUFBZTtJQWlCM0Q7O09BRUc7SUFDSCxZQUFZLFNBQTBDLEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQ2hHLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQXFDLEVBQUMsS0FBSyxFQUFFLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQ3pIO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUM7U0FBRTtRQUN4QixJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUNuQixN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QyxDQUFBO1FBQ3JCLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ3ZCLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBN0lEOztHQUVHO0FBQzZCLHlCQUFhLEdBQVUsYUFBYSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnIzLmNvcmUgdmVyc2lvbjogMy4wLjJcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBDb21wb3NpdGlvblxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29tcG9zaXRpb25BdHRlc3RhdGlvbk1vZGVDb2RlcywgIENvbXBvc2l0aW9uQXR0ZXN0YXRpb25Nb2RlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbXBvc2l0aW9uQXR0ZXN0YXRpb25Nb2RlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbXBvc2l0aW9uQXR0ZXN0YXRpb25Nb2RlVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db21wb3NpdGlvbkF0dGVzdGF0aW9uTW9kZVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRG9jdW1lbnRSZWxhdGlvbnNoaXBUeXBlQ29kZXMsICBEb2N1bWVudFJlbGF0aW9uc2hpcFR5cGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRG9jdW1lbnRSZWxhdGlvbnNoaXBUeXBlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IERvY3VtZW50UmVsYXRpb25zaGlwVHlwZVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRG9jdW1lbnRSZWxhdGlvbnNoaXBUeXBlVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBWM0FjdENvZGVzLCAgVjNBY3RDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVjNBY3RDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgVjNBY3RWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1YzQWN0VnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEb2NTZWN0aW9uQ29kZXMsICBEb2NTZWN0aW9uQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0RvY1NlY3Rpb25Db2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRG9jU2VjdGlvblZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRG9jU2VjdGlvblZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTGlzdE1vZGVDb2RlcywgIExpc3RNb2RlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0xpc3RNb2RlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IExpc3RNb2RlVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9MaXN0TW9kZVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTGlzdE9yZGVyQ29kZXMsICBMaXN0T3JkZXJDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTGlzdE9yZGVyQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IExpc3RPcmRlclZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTGlzdE9yZGVyVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBMaXN0RW1wdHlSZWFzb25Db2RlcywgIExpc3RFbXB0eVJlYXNvbkNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9MaXN0RW1wdHlSZWFzb25Db2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTGlzdEVtcHR5UmVhc29uVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9MaXN0RW1wdHlSZWFzb25Wc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbXBvc2l0aW9uU3RhdHVzQ29kZXMsICBDb21wb3NpdGlvblN0YXR1c0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db21wb3NpdGlvblN0YXR1c0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDb21wb3NpdGlvblN0YXR1c1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29tcG9zaXRpb25TdGF0dXNWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IERvY1R5cGVDb2RlcywgIERvY1R5cGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRG9jVHlwZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEb2NUeXBlVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Eb2NUeXBlVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEb2NDbGFzc0NvZGVzLCAgRG9jQ2xhc3NDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRG9jQ2xhc3NDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRG9jQ2xhc3NWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0RvY0NsYXNzVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBWM0NvbmZpZGVudGlhbGl0eUNsYXNzaWZpY2F0aW9uQ29kZXMsICBWM0NvbmZpZGVudGlhbGl0eUNsYXNzaWZpY2F0aW9uQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1YzQ29uZmlkZW50aWFsaXR5Q2xhc3NpZmljYXRpb25Db2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgVjNDb25maWRlbnRpYWxpdHlDbGFzc2lmaWNhdGlvblZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVjNDb25maWRlbnRpYWxpdHlDbGFzc2lmaWNhdGlvblZzVmFsaWRhdGlvbi5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBDb21wb3NpdGlvbkF0dGVzdGVyIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENvbXBvc2l0aW9uQXR0ZXN0ZXJBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBVc2UgbW9yZSB0aGFuIG9uZSBjb2RlIHdoZXJlIGEgc2luZ2xlIGF0dGVzdGVyIGhhcyBtb3JlIHRoYW4gb25lIG1vZGUgKHByb2Zlc3Npb25hbCBhbmQgbGVnYWwgYXJlIG9mdGVuIHBhaXJlZCkuXHJcbiAgICovXHJcbiAgbW9kZTogZmhpci5GaGlyQ29kZTxDb21wb3NpdGlvbkF0dGVzdGF0aW9uTW9kZUNvZGVUeXBlPltdfChzdHJpbmd8bnVsbClbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENvbXBvc2l0aW9uLmF0dGVzdGVyLm1vZGVcclxuICAgKi9cclxuICBfbW9kZT86KGZoaXIuRmhpckVsZW1lbnRBcmdzfG51bGwpW107XHJcbiAgLyoqXHJcbiAgICogV2hlbiB0aGUgY29tcG9zaXRpb24gd2FzIGF0dGVzdGVkIGJ5IHRoZSBwYXJ0eS5cclxuICAgKi9cclxuICB0aW1lPzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ29tcG9zaXRpb24uYXR0ZXN0ZXIudGltZVxyXG4gICAqL1xyXG4gIF90aW1lPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBXaG8gYXR0ZXN0ZWQgdGhlIGNvbXBvc2l0aW9uIGluIHRoZSBzcGVjaWZpZWQgd2F5LlxyXG4gICAqL1xyXG4gIHBhcnR5PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIE9ubHkgbGlzdCBlYWNoIGF0dGVzdGVyIG9uY2UuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29tcG9zaXRpb25BdHRlc3RlciBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0NvbXBvc2l0aW9uQXR0ZXN0ZXInO1xyXG4gIC8qKlxyXG4gICAqIFVzZSBtb3JlIHRoYW4gb25lIGNvZGUgd2hlcmUgYSBzaW5nbGUgYXR0ZXN0ZXIgaGFzIG1vcmUgdGhhbiBvbmUgbW9kZSAocHJvZmVzc2lvbmFsIGFuZCBsZWdhbCBhcmUgb2Z0ZW4gcGFpcmVkKS5cclxuICAgKi9cclxuICBwdWJsaWMgbW9kZTogZmhpci5GaGlyQ29kZTxDb21wb3NpdGlvbkF0dGVzdGF0aW9uTW9kZUNvZGVUeXBlPltdO1xyXG4gIC8qKlxyXG4gICAqIFdoZW4gdGhlIGNvbXBvc2l0aW9uIHdhcyBhdHRlc3RlZCBieSB0aGUgcGFydHkuXHJcbiAgICovXHJcbiAgcHVibGljIHRpbWU/OiBmaGlyLkZoaXJEYXRlVGltZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogV2hvIGF0dGVzdGVkIHRoZSBjb21wb3NpdGlvbiBpbiB0aGUgc3BlY2lmaWVkIHdheS5cclxuICAgKi9cclxuICBwdWJsaWMgcGFydHk/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQ29tcG9zaXRpb25BdHRlc3RlciAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENvbXBvc2l0aW9uQXR0ZXN0ZXJBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnbW9kZSddKSB7IHRoaXMubW9kZSA9IHNvdXJjZS5tb2RlLm1hcCgoeCkgPT4gbmV3IGZoaXIuRmhpckNvZGU8Q29tcG9zaXRpb25BdHRlc3RhdGlvbk1vZGVDb2RlVHlwZT4oe3ZhbHVlOiB4fSkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5tb2RlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ19tb2RlJ10pIHtcclxuICAgICAgc291cmNlLl9tb2RlLmZvckVhY2goKHgsaSkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLm1vZGUubGVuZ3RoID49IGkpIHsgaWYgKHgpIHsgdGhpcy5tb2RlW2ldLmFkZEV4dGVuZGVkUHJvcGVydGllcyh4KTsgfSB9XHJcbiAgICAgICAgZWxzZSB7IGlmICh4KSB7IHRoaXMubW9kZS5wdXNoKG5ldyBmaGlyLkZoaXJDb2RlPENvbXBvc2l0aW9uQXR0ZXN0YXRpb25Nb2RlQ29kZVR5cGU+KHggYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPikpOyB9IH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd0aW1lJ10pIHsgdGhpcy50aW1lID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLnRpbWV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3RpbWUnXSkge1xyXG4gICAgICBpZiAodGhpcy50aW1lKSB7IHRoaXMudGltZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl90aW1lISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudGltZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZShzb3VyY2UuX3RpbWUgYXMgUGFydGlhbDxmaGlyLkZoaXJEYXRlVGltZUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsncGFydHknXSkgeyB0aGlzLnBhcnR5ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5wYXJ0eSk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdDb21wb3NpdGlvbi5hdHRlc3RlcicgfVxyXG4gICAgdGhpcy52UkFWKCdtb2RlJyxleHAsJ0NvbXBvc2l0aW9uQXR0ZXN0YXRpb25Nb2RlJyxDb21wb3NpdGlvbkF0dGVzdGF0aW9uTW9kZVZzVmFsaWRhdGlvbiwncicpXHJcbiAgICB0aGlzLnZPUygndGltZScsZXhwKVxyXG4gICAgdGhpcy52T1MoJ3BhcnR5JyxleHApXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQ29tcG9zaXRpb25SZWxhdGVzVG8gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29tcG9zaXRpb25SZWxhdGVzVG9BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBJZiB0aGlzIGRvY3VtZW50IGFwcGVuZHMgYW5vdGhlciBkb2N1bWVudCwgdGhlbiB0aGUgZG9jdW1lbnQgY2Fubm90IGJlIGZ1bGx5IHVuZGVyc3Rvb2Qgd2l0aG91dCBhbHNvIGFjY2Vzc2luZyB0aGUgcmVmZXJlbmNlZCBkb2N1bWVudC5cclxuICAgKi9cclxuICBjb2RlOiBmaGlyLkZoaXJDb2RlPERvY3VtZW50UmVsYXRpb25zaGlwVHlwZUNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDb21wb3NpdGlvbi5yZWxhdGVzVG8uY29kZVxyXG4gICAqL1xyXG4gIF9jb2RlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgdGFyZ2V0IGNvbXBvc2l0aW9uL2RvY3VtZW50IG9mIHRoaXMgcmVsYXRpb25zaGlwLlxyXG4gICAqL1xyXG4gIHRhcmdldD86IGZoaXIuSWRlbnRpZmllcnxmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRhcmdldCBjb21wb3NpdGlvbi9kb2N1bWVudCBvZiB0aGlzIHJlbGF0aW9uc2hpcC5cclxuICAgKi9cclxuICB0YXJnZXRJZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRhcmdldCBjb21wb3NpdGlvbi9kb2N1bWVudCBvZiB0aGlzIHJlbGF0aW9uc2hpcC5cclxuICAgKi9cclxuICB0YXJnZXRSZWZlcmVuY2U/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQSBkb2N1bWVudCBpcyBhIHZlcnNpb24gc3BlY2lmaWMgY29tcG9zaXRpb24uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29tcG9zaXRpb25SZWxhdGVzVG8gZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdDb21wb3NpdGlvblJlbGF0ZXNUbyc7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhpcyBkb2N1bWVudCBhcHBlbmRzIGFub3RoZXIgZG9jdW1lbnQsIHRoZW4gdGhlIGRvY3VtZW50IGNhbm5vdCBiZSBmdWxseSB1bmRlcnN0b29kIHdpdGhvdXQgYWxzbyBhY2Nlc3NpbmcgdGhlIHJlZmVyZW5jZWQgZG9jdW1lbnQuXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGU6IGZoaXIuRmhpckNvZGU8RG9jdW1lbnRSZWxhdGlvbnNoaXBUeXBlQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRhcmdldCBjb21wb3NpdGlvbi9kb2N1bWVudCBvZiB0aGlzIHJlbGF0aW9uc2hpcC5cclxuICAgKi9cclxuICBwdWJsaWMgdGFyZ2V0OiAoZmhpci5JZGVudGlmaWVyfGZoaXIuUmVmZXJlbmNlKXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgQ29tcG9zaXRpb24ucmVsYXRlc1RvLnRhcmdldFt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c190YXJnZXRJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBDb21wb3NpdGlvblJlbGF0ZXNUbyAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENvbXBvc2l0aW9uUmVsYXRlc1RvQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2NvZGUnXSkgeyB0aGlzLmNvZGUgPSBuZXcgZmhpci5GaGlyQ29kZTxEb2N1bWVudFJlbGF0aW9uc2hpcFR5cGVDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2UuY29kZX0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb2RlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2NvZGUnXSkge1xyXG4gICAgICBpZiAodGhpcy5jb2RlKSB7IHRoaXMuY29kZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9jb2RlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkZoaXJDb2RlPERvY3VtZW50UmVsYXRpb25zaGlwVHlwZUNvZGVUeXBlPihzb3VyY2UuX2NvZGUgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3RhcmdldCddKSB7IHRoaXMudGFyZ2V0ID0gc291cmNlLnRhcmdldDsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd0YXJnZXRJZGVudGlmaWVyJ10pIHsgdGhpcy50YXJnZXQgPSBuZXcgZmhpci5JZGVudGlmaWVyKHNvdXJjZS50YXJnZXRJZGVudGlmaWVyKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd0YXJnZXRSZWZlcmVuY2UnXSkgeyB0aGlzLnRhcmdldCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UudGFyZ2V0UmVmZXJlbmNlKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudGFyZ2V0ID0gbnVsbDsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0NvbXBvc2l0aW9uLnJlbGF0ZXNUbycgfVxyXG4gICAgdGhpcy52UlNWKCdjb2RlJyxleHAsJ0RvY3VtZW50UmVsYXRpb25zaGlwVHlwZScsRG9jdW1lbnRSZWxhdGlvbnNoaXBUeXBlVnNWYWxpZGF0aW9uLCdyJylcclxuICAgIHRoaXMudlJTKCd0YXJnZXQnLGV4cClcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBDb21wb3NpdGlvbkV2ZW50IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENvbXBvc2l0aW9uRXZlbnRBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBBbiBldmVudCBjYW4gZnVydGhlciBzcGVjaWFsaXplIHRoZSBhY3QgaW5oZXJlbnQgaW4gdGhlIHR5cGVDb2RlLCBzdWNoIGFzIHdoZXJlIGl0IGlzIHNpbXBseSBcIlByb2NlZHVyZSBSZXBvcnRcIiBhbmQgdGhlIHByb2NlZHVyZSB3YXMgYSBcImNvbG9ub3Njb3B5XCIuIElmIG9uZSBvciBtb3JlIGV2ZW50Q29kZXMgYXJlIGluY2x1ZGVkLCB0aGV5IFNIQUxMIE5PVCBjb25mbGljdCB3aXRoIHRoZSB2YWx1ZXMgaW5oZXJlbnQgaW4gdGhlIGNsYXNzQ29kZSwgcHJhY3RpY2VTZXR0aW5nQ29kZSBvciB0eXBlQ29kZSwgYXMgc3VjaCBhIGNvbmZsaWN0IHdvdWxkIGNyZWF0ZSBhbiBhbWJpZ3VvdXMgc2l0dWF0aW9uLiBUaGlzIHNob3J0IGxpc3Qgb2YgY29kZXMgaXMgcHJvdmlkZWQgdG8gYmUgdXNlZCBhcyBrZXkgd29yZHMgZm9yIGNlcnRhaW4gdHlwZXMgb2YgcXVlcmllcy5cclxuICAgKi9cclxuICBjb2RlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwZXJpb2Qgb2YgdGltZSBjb3ZlcmVkIGJ5IHRoZSBkb2N1bWVudGF0aW9uLiBUaGVyZSBpcyBubyBhc3NlcnRpb24gdGhhdCB0aGUgZG9jdW1lbnRhdGlvbiBpcyBhIGNvbXBsZXRlIHJlcHJlc2VudGF0aW9uIGZvciB0aGlzIHBlcmlvZCwgb25seSB0aGF0IGl0IGRvY3VtZW50cyBldmVudHMgZHVyaW5nIHRoaXMgdGltZS5cclxuICAgKi9cclxuICBwZXJpb2Q/OiBmaGlyLlBlcmlvZEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkZXNjcmlwdGlvbiBhbmQvb3IgcmVmZXJlbmNlIG9mIHRoZSBldmVudChzKSBiZWluZyBkb2N1bWVudGVkLiBGb3IgZXhhbXBsZSwgdGhpcyBjb3VsZCBiZSB1c2VkIHRvIGRvY3VtZW50IHN1Y2ggYSBjb2xvbm9zY29weSBvciBhbiBhcHBlbmRlY3RvbXkuXHJcbiAgICovXHJcbiAgZGV0YWlsPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlIGV2ZW50IG5lZWRzIHRvIGJlIGNvbnNpc3RlbnQgd2l0aCB0aGUgdHlwZSBlbGVtZW50LCB0aG91Z2ggY2FuIHByb3ZpZGUgZnVydGhlciBpbmZvcm1hdGlvbiBpZiBkZXNpcmVkLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENvbXBvc2l0aW9uRXZlbnQgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdDb21wb3NpdGlvbkV2ZW50JztcclxuICAvKipcclxuICAgKiBBbiBldmVudCBjYW4gZnVydGhlciBzcGVjaWFsaXplIHRoZSBhY3QgaW5oZXJlbnQgaW4gdGhlIHR5cGVDb2RlLCBzdWNoIGFzIHdoZXJlIGl0IGlzIHNpbXBseSBcIlByb2NlZHVyZSBSZXBvcnRcIiBhbmQgdGhlIHByb2NlZHVyZSB3YXMgYSBcImNvbG9ub3Njb3B5XCIuIElmIG9uZSBvciBtb3JlIGV2ZW50Q29kZXMgYXJlIGluY2x1ZGVkLCB0aGV5IFNIQUxMIE5PVCBjb25mbGljdCB3aXRoIHRoZSB2YWx1ZXMgaW5oZXJlbnQgaW4gdGhlIGNsYXNzQ29kZSwgcHJhY3RpY2VTZXR0aW5nQ29kZSBvciB0eXBlQ29kZSwgYXMgc3VjaCBhIGNvbmZsaWN0IHdvdWxkIGNyZWF0ZSBhbiBhbWJpZ3VvdXMgc2l0dWF0aW9uLiBUaGlzIHNob3J0IGxpc3Qgb2YgY29kZXMgaXMgcHJvdmlkZWQgdG8gYmUgdXNlZCBhcyBrZXkgd29yZHMgZm9yIGNlcnRhaW4gdHlwZXMgb2YgcXVlcmllcy5cclxuICAgKi9cclxuICBwdWJsaWMgY29kZTogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBUaGUgcGVyaW9kIG9mIHRpbWUgY292ZXJlZCBieSB0aGUgZG9jdW1lbnRhdGlvbi4gVGhlcmUgaXMgbm8gYXNzZXJ0aW9uIHRoYXQgdGhlIGRvY3VtZW50YXRpb24gaXMgYSBjb21wbGV0ZSByZXByZXNlbnRhdGlvbiBmb3IgdGhpcyBwZXJpb2QsIG9ubHkgdGhhdCBpdCBkb2N1bWVudHMgZXZlbnRzIGR1cmluZyB0aGlzIHRpbWUuXHJcbiAgICovXHJcbiAgcHVibGljIHBlcmlvZD86IGZoaXIuUGVyaW9kfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGVzY3JpcHRpb24gYW5kL29yIHJlZmVyZW5jZSBvZiB0aGUgZXZlbnQocykgYmVpbmcgZG9jdW1lbnRlZC4gRm9yIGV4YW1wbGUsIHRoaXMgY291bGQgYmUgdXNlZCB0byBkb2N1bWVudCBzdWNoIGEgY29sb25vc2NvcHkgb3IgYW4gYXBwZW5kZWN0b215LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZXRhaWw6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQ29tcG9zaXRpb25FdmVudCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENvbXBvc2l0aW9uRXZlbnRBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IHNvdXJjZS5jb2RlLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY29kZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwZXJpb2QnXSkgeyB0aGlzLnBlcmlvZCA9IG5ldyBmaGlyLlBlcmlvZChzb3VyY2UucGVyaW9kKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGV0YWlsJ10pIHsgdGhpcy5kZXRhaWwgPSBzb3VyY2UuZGV0YWlsLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZGV0YWlsID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdDb21wb3NpdGlvbi5ldmVudCcgfVxyXG4gICAgdGhpcy52T0EoJ2NvZGUnLGV4cClcclxuICAgIHRoaXMudk9TKCdwZXJpb2QnLGV4cClcclxuICAgIHRoaXMudk9BKCdkZXRhaWwnLGV4cClcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBDb21wb3NpdGlvblNlY3Rpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29tcG9zaXRpb25TZWN0aW9uQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRpdGxlIGlkZW50aWZpZXMgdGhlIHNlY3Rpb24gZm9yIGEgaHVtYW4gcmVhZGVyLiBUaGUgdGl0bGUgbXVzdCBiZSBjb25zaXN0ZW50IHdpdGggdGhlIG5hcnJhdGl2ZSBvZiB0aGUgcmVzb3VyY2UgdGhhdCBpcyB0aGUgdGFyZ2V0IG9mIHRoZSBzZWN0aW9uLmNvbnRlbnQgcmVmZXJlbmNlLiBHZW5lcmFsbHksIHNlY3Rpb25zIFNIT1VMRCBoYXZlIHRpdGxlcywgYnV0IGluIHNvbWUgZG9jdW1lbnRzLCBpdCBpcyB1bm5lY2Vzc2FyeSBvciBpbmFwcHJvcHJpYXRlLiBUeXBpY2FsbHksIHRoaXMgaXMgd2hlcmUgYSBzZWN0aW9uIGhhcyBzdWJzZWN0aW9ucyB0aGF0IGhhdmUgdGhlaXIgb3duIGFkZXF1YXRlbHkgZGlzdGluZ3Vpc2hpbmcgdGl0bGUsICBvciBkb2N1bWVudHMgdGhhdCBvbmx5IGhhdmUgYSBzaW5nbGUgc2VjdGlvbi4gTW9zdCBJbXBsZW1lbnRhdGlvbiBHdWlkZXMgd2lsbCBtYWtlIHNlY3Rpb24gdGl0bGUgdG8gYmUgYSByZXF1aXJlZCBlbGVtZW50LlxyXG4gICAqL1xyXG4gIHRpdGxlPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENvbXBvc2l0aW9uLnNlY3Rpb24udGl0bGVcclxuICAgKi9cclxuICBfdGl0bGU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjb2RlIGlkZW50aWZpZXMgdGhlIHNlY3Rpb24gZm9yIGFuIGF1dG9tYXRlZCBwcm9jZXNzb3Igb2YgdGhlIGRvY3VtZW50LiBUaGlzIGlzIHBhcnRpY3VsYXJseSByZWxldmFudCB3aGVuIHVzaW5nIHByb2ZpbGVzIHRvIGNvbnRyb2wgdGhlIHN0cnVjdHVyZSBvZiB0aGUgZG9jdW1lbnQuICAgSWYgdGhlIHNlY3Rpb24gaGFzIGNvbnRlbnQgKGluc3RlYWQgb2Ygc3ViLXNlY3Rpb25zKSwgdGhlIHNlY3Rpb24uY29kZSBkb2VzIG5vdCBjaGFuZ2UgdGhlIG1lYW5pbmcgb3IgaW50ZXJwcmV0YXRpb24gb2YgdGhlIHJlc291cmNlIHRoYXQgaXMgdGhlIGNvbnRlbnQgb2YgdGhlIHNlY3Rpb24gaW4gdGhlIGNvbW1lbnRzIGZvciB0aGUgc2VjdGlvbi5jb2RlLlxyXG4gICAqL1xyXG4gIGNvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERvY3VtZW50IHByb2ZpbGVzIG1heSBkZWZpbmUgd2hhdCBjb250ZW50IHNob3VsZCBiZSByZXByZXNlbnRlZCBpbiB0aGUgbmFycmF0aXZlIHRvIGVuc3VyZSBjbGluaWNhbCBzYWZldHkuXHJcbiAgICovXHJcbiAgdGV4dD86IGZoaXIuTmFycmF0aXZlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IGlzIGxhYmVsZWQgYXMgYSBtb2RpZmllciBiZWNhdXNlIGEgY2hhbmdlIGxpc3QgbXVzdCBub3QgYmUgbWlzLXVuZGVyc3Rvb2QgYXMgYSBjb21wbGV0ZSBsaXN0LlxyXG4gICAqL1xyXG4gIG1vZGU/OiBmaGlyLkZoaXJDb2RlPExpc3RNb2RlQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENvbXBvc2l0aW9uLnNlY3Rpb24ubW9kZVxyXG4gICAqL1xyXG4gIF9tb2RlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBBcHBsaWNhdGlvbnMgU0hPVUxEIHJlbmRlciBvcmRlcmVkIGxpc3RzIGluIHRoZSBvcmRlciBwcm92aWRlZCwgYnV0IE1BWSBhbGxvdyB1c2VycyB0byByZS1vcmRlciBiYXNlZCBvbiB0aGVpciBvd24gcHJlZmVyZW5jZXMgYXMgd2VsbC4gSWYgdGhlcmUgaXMgbm8gb3JkZXIgc3BlY2lmaWVkLCB0aGUgb3JkZXIgaXMgdW5rbm93biwgdGhvdWdoIHRoZXJlIG1heSBzdGlsbCBiZSBzb21lIG9yZGVyLlxyXG4gICAqL1xyXG4gIG9yZGVyZWRCeT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhlcmUgYXJlIG5vIGVudHJpZXMgaW4gdGhlIGxpc3QsIGFuIGVtcHR5UmVhc29uIFNIT1VMRCBiZSBwcm92aWRlZC5cclxuICAgKi9cclxuICBlbnRyeT86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdmFyaW91cyByZWFzb25zIGZvciBhbiBlbXB0eSBzZWN0aW9uIG1ha2UgYSBzaWduaWZpY2FudCBpbnRlcnByZXRhdGlvbiB0byBpdHMgaW50ZXJwcmV0YXRpb24uIE5vdGUgdGhhdCB0aGlzIGNvZGUgaXMgZm9yIHVzZSB3aGVuIHRoZSBlbnRpcmUgc2VjdGlvbiBjb250ZW50IGhhcyBiZWVuIHN1cHByZXNzZWQsIGFuZCBub3QgZm9yIHdoZW4gaW5kaXZpZHVhbCBpdGVtcyBhcmUgb21pdHRlZCAtIGltcGxlbWVudGVycyBtYXkgY29uc2lkZXIgdXNpbmcgYSB0ZXh0IG5vdGUgb3IgYSBmbGFnIG9uIGFuIGVudHJ5IGluIHRoZXNlIGNhc2VzLlxyXG4gICAqL1xyXG4gIGVtcHR5UmVhc29uPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBOZXN0ZWQgc2VjdGlvbnMgYXJlIHByaW1hcmlseSB1c2VkIHRvIGhlbHAgaHVtYW4gcmVhZGVycyBuYXZpZ2F0ZSB0byBwYXJ0aWN1bGFyIHBvcnRpb25zIG9mIHRoZSBkb2N1bWVudC5cclxuICAgKi9cclxuICBzZWN0aW9uPzogZmhpci5Db21wb3NpdGlvblNlY3Rpb25BcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlIHJvb3Qgb2YgdGhlIHNlY3Rpb25zIHRoYXQgbWFrZSB1cCB0aGUgY29tcG9zaXRpb24uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29tcG9zaXRpb25TZWN0aW9uIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQ29tcG9zaXRpb25TZWN0aW9uJztcclxuICAvKipcclxuICAgKiBUaGUgdGl0bGUgaWRlbnRpZmllcyB0aGUgc2VjdGlvbiBmb3IgYSBodW1hbiByZWFkZXIuIFRoZSB0aXRsZSBtdXN0IGJlIGNvbnNpc3RlbnQgd2l0aCB0aGUgbmFycmF0aXZlIG9mIHRoZSByZXNvdXJjZSB0aGF0IGlzIHRoZSB0YXJnZXQgb2YgdGhlIHNlY3Rpb24uY29udGVudCByZWZlcmVuY2UuIEdlbmVyYWxseSwgc2VjdGlvbnMgU0hPVUxEIGhhdmUgdGl0bGVzLCBidXQgaW4gc29tZSBkb2N1bWVudHMsIGl0IGlzIHVubmVjZXNzYXJ5IG9yIGluYXBwcm9wcmlhdGUuIFR5cGljYWxseSwgdGhpcyBpcyB3aGVyZSBhIHNlY3Rpb24gaGFzIHN1YnNlY3Rpb25zIHRoYXQgaGF2ZSB0aGVpciBvd24gYWRlcXVhdGVseSBkaXN0aW5ndWlzaGluZyB0aXRsZSwgIG9yIGRvY3VtZW50cyB0aGF0IG9ubHkgaGF2ZSBhIHNpbmdsZSBzZWN0aW9uLiBNb3N0IEltcGxlbWVudGF0aW9uIEd1aWRlcyB3aWxsIG1ha2Ugc2VjdGlvbiB0aXRsZSB0byBiZSBhIHJlcXVpcmVkIGVsZW1lbnQuXHJcbiAgICovXHJcbiAgcHVibGljIHRpdGxlPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgY29kZSBpZGVudGlmaWVzIHRoZSBzZWN0aW9uIGZvciBhbiBhdXRvbWF0ZWQgcHJvY2Vzc29yIG9mIHRoZSBkb2N1bWVudC4gVGhpcyBpcyBwYXJ0aWN1bGFybHkgcmVsZXZhbnQgd2hlbiB1c2luZyBwcm9maWxlcyB0byBjb250cm9sIHRoZSBzdHJ1Y3R1cmUgb2YgdGhlIGRvY3VtZW50LiAgIElmIHRoZSBzZWN0aW9uIGhhcyBjb250ZW50IChpbnN0ZWFkIG9mIHN1Yi1zZWN0aW9ucyksIHRoZSBzZWN0aW9uLmNvZGUgZG9lcyBub3QgY2hhbmdlIHRoZSBtZWFuaW5nIG9yIGludGVycHJldGF0aW9uIG9mIHRoZSByZXNvdXJjZSB0aGF0IGlzIHRoZSBjb250ZW50IG9mIHRoZSBzZWN0aW9uIGluIHRoZSBjb21tZW50cyBmb3IgdGhlIHNlY3Rpb24uY29kZS5cclxuICAgKi9cclxuICBwdWJsaWMgY29kZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEb2N1bWVudCBwcm9maWxlcyBtYXkgZGVmaW5lIHdoYXQgY29udGVudCBzaG91bGQgYmUgcmVwcmVzZW50ZWQgaW4gdGhlIG5hcnJhdGl2ZSB0byBlbnN1cmUgY2xpbmljYWwgc2FmZXR5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0ZXh0PzogZmhpci5OYXJyYXRpdmV8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgYmVjYXVzZSBhIGNoYW5nZSBsaXN0IG11c3Qgbm90IGJlIG1pcy11bmRlcnN0b29kIGFzIGEgY29tcGxldGUgbGlzdC5cclxuICAgKi9cclxuICBwdWJsaWMgbW9kZT86IGZoaXIuRmhpckNvZGU8TGlzdE1vZGVDb2RlVHlwZT58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFwcGxpY2F0aW9ucyBTSE9VTEQgcmVuZGVyIG9yZGVyZWQgbGlzdHMgaW4gdGhlIG9yZGVyIHByb3ZpZGVkLCBidXQgTUFZIGFsbG93IHVzZXJzIHRvIHJlLW9yZGVyIGJhc2VkIG9uIHRoZWlyIG93biBwcmVmZXJlbmNlcyBhcyB3ZWxsLiBJZiB0aGVyZSBpcyBubyBvcmRlciBzcGVjaWZpZWQsIHRoZSBvcmRlciBpcyB1bmtub3duLCB0aG91Z2ggdGhlcmUgbWF5IHN0aWxsIGJlIHNvbWUgb3JkZXIuXHJcbiAgICovXHJcbiAgcHVibGljIG9yZGVyZWRCeT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiB0aGVyZSBhcmUgbm8gZW50cmllcyBpbiB0aGUgbGlzdCwgYW4gZW1wdHlSZWFzb24gU0hPVUxEIGJlIHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBlbnRyeTogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBUaGUgdmFyaW91cyByZWFzb25zIGZvciBhbiBlbXB0eSBzZWN0aW9uIG1ha2UgYSBzaWduaWZpY2FudCBpbnRlcnByZXRhdGlvbiB0byBpdHMgaW50ZXJwcmV0YXRpb24uIE5vdGUgdGhhdCB0aGlzIGNvZGUgaXMgZm9yIHVzZSB3aGVuIHRoZSBlbnRpcmUgc2VjdGlvbiBjb250ZW50IGhhcyBiZWVuIHN1cHByZXNzZWQsIGFuZCBub3QgZm9yIHdoZW4gaW5kaXZpZHVhbCBpdGVtcyBhcmUgb21pdHRlZCAtIGltcGxlbWVudGVycyBtYXkgY29uc2lkZXIgdXNpbmcgYSB0ZXh0IG5vdGUgb3IgYSBmbGFnIG9uIGFuIGVudHJ5IGluIHRoZXNlIGNhc2VzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBlbXB0eVJlYXNvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBOZXN0ZWQgc2VjdGlvbnMgYXJlIHByaW1hcmlseSB1c2VkIHRvIGhlbHAgaHVtYW4gcmVhZGVycyBuYXZpZ2F0ZSB0byBwYXJ0aWN1bGFyIHBvcnRpb25zIG9mIHRoZSBkb2N1bWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgc2VjdGlvbjogZmhpci5Db21wb3NpdGlvblNlY3Rpb25bXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBDb21wb3NpdGlvblNlY3Rpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxDb21wb3NpdGlvblNlY3Rpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsndGl0bGUnXSkgeyB0aGlzLnRpdGxlID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS50aXRsZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfdGl0bGUnXSkge1xyXG4gICAgICBpZiAodGhpcy50aXRsZSkgeyB0aGlzLnRpdGxlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3RpdGxlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudGl0bGUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fdGl0bGUgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2NvZGUnXSkgeyB0aGlzLmNvZGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmNvZGUpOyB9XHJcbiAgICBpZiAoc291cmNlWyd0ZXh0J10pIHsgdGhpcy50ZXh0ID0gbmV3IGZoaXIuTmFycmF0aXZlKHNvdXJjZS50ZXh0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbW9kZSddKSB7IHRoaXMubW9kZSA9IG5ldyBmaGlyLkZoaXJDb2RlPExpc3RNb2RlQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLm1vZGV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX21vZGUnXSkge1xyXG4gICAgICBpZiAodGhpcy5tb2RlKSB7IHRoaXMubW9kZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9tb2RlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubW9kZSA9IG5ldyBmaGlyLkZoaXJDb2RlPExpc3RNb2RlQ29kZVR5cGU+KHNvdXJjZS5fbW9kZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnb3JkZXJlZEJ5J10pIHsgdGhpcy5vcmRlcmVkQnkgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLm9yZGVyZWRCeSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2VudHJ5J10pIHsgdGhpcy5lbnRyeSA9IHNvdXJjZS5lbnRyeS5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmVudHJ5ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2VtcHR5UmVhc29uJ10pIHsgdGhpcy5lbXB0eVJlYXNvbiA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuZW1wdHlSZWFzb24pOyB9XHJcbiAgICBpZiAoc291cmNlWydzZWN0aW9uJ10pIHsgdGhpcy5zZWN0aW9uID0gc291cmNlLnNlY3Rpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5Db21wb3NpdGlvblNlY3Rpb24oeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zZWN0aW9uID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdDb21wb3NpdGlvbi5zZWN0aW9uJyB9XHJcbiAgICB0aGlzLnZPUygndGl0bGUnLGV4cClcclxuICAgIHRoaXMudk9TKCdjb2RlJyxleHApXHJcbiAgICB0aGlzLnZPUygndGV4dCcsZXhwKVxyXG4gICAgdGhpcy52T1NWKCdtb2RlJyxleHAsJ0xpc3RNb2RlJyxMaXN0TW9kZVZzVmFsaWRhdGlvbiwncicpXHJcbiAgICB0aGlzLnZPUygnb3JkZXJlZEJ5JyxleHApXHJcbiAgICB0aGlzLnZPQSgnZW50cnknLGV4cClcclxuICAgIHRoaXMudk9TKCdlbXB0eVJlYXNvbicsZXhwKVxyXG4gICAgdGhpcy52T0EoJ3NlY3Rpb24nLGV4cClcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBDb21wb3NpdGlvbiB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBDb21wb3NpdGlvbkFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIkNvbXBvc2l0aW9uXCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFNlZSBkaXNjdXNzaW9uIGluIHJlc291cmNlIGRlZmluaXRpb24gZm9yIGhvdyB0aGVzZSByZWxhdGUuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIGEgY29tcG9zaXRpb24gaXMgbWFya2VkIGFzIHdpdGhkcmF3biwgdGhlIGNvbXBvc2l0aW9ucy9kb2N1bWVudHMgaW4gdGhlIHNlcmllcywgb3IgZGF0YSBmcm9tIHRoZSBjb21wb3NpdGlvbiBvciBkb2N1bWVudCBzZXJpZXMsIHNob3VsZCBuZXZlciBiZSBkaXNwbGF5ZWQgdG8gYSB1c2VyIHdpdGhvdXQgYmVpbmcgY2xlYXJseSBtYXJrZWQgYXMgdW50cnVzdHdvcnRoeS4gVGhlIGZsYWcgXCJlbnRlcmVkLWluLWVycm9yXCIgaXMgd2h5IHRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgb2Ygb3RoZXIgZWxlbWVudHMuIFxyXG4gICAqIFNvbWUgcmVwb3J0aW5nIHdvcmsgZmxvd3MgcmVxdWlyZSB0aGF0IHRoZSBvcmlnaW5hbCBuYXJyYXRpdmUgb2YgYSBmaW5hbCBkb2N1bWVudCBuZXZlciBiZSBhbHRlcmVkOyBpbnN0ZWFkLCBvbmx5IG5ldyBuYXJyYXRpdmUgY2FuIGJlIGFkZGVkLiBUaGUgY29tcG9zaXRpb24gcmVzb3VyY2UgaGFzIG5vIGV4cGxpY2l0IHN0YXR1cyBmb3IgZXhwbGljaXRseSBub3Rpbmcgd2hldGhlciB0aGlzIGJ1c2luZXNzIHJ1bGUgaXMgaW4gZWZmZWN0LiBUaGlzIHdvdWxkIGJlIGhhbmRsZWQgYnkgYW4gZXh0ZW5zaW9uIGlmIHJlcXVpcmVkLlxyXG4gICAqL1xyXG4gIHN0YXR1czogZmhpci5GaGlyQ29kZTxDb21wb3NpdGlvblN0YXR1c0NvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDb21wb3NpdGlvbi5zdGF0dXNcclxuICAgKi9cclxuICBfc3RhdHVzPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBGb3IgQ29tcG9zaXRpb24gdHlwZSwgTE9JTkMgaXMgdWJpcXVpdG91cyBhbmQgc3Ryb25nbHkgZW5kb3JzZWQgYnkgSEw3LiBNb3N0IGltcGxlbWVudGF0aW9uIGd1aWRlcyB3aWxsIHJlcXVpcmUgYSBzcGVjaWZpYyBMT0lOQyBjb2RlLCBvciB1c2UgTE9JTkMgYXMgYW4gZXh0ZW5zaWJsZSBiaW5kaW5nLlxyXG4gICAqL1xyXG4gIHR5cGU6IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaXMgYSBtZXRhZGF0YSBmaWVsZCBmcm9tIFtYRFMvTUhEXShodHRwOi8vd2lraS5paGUubmV0L2luZGV4LnBocD90aXRsZT1Nb2JpbGVfYWNjZXNzX3RvX0hlYWx0aF9Eb2N1bWVudHNfKE1IRCkpLlxyXG4gICAqL1xyXG4gIGNsYXNzPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBGb3IgY2xpbmljYWwgZG9jdW1lbnRzLCB0aGlzIGlzIHVzdWFsbHkgdGhlIHBhdGllbnQuXHJcbiAgICovXHJcbiAgc3ViamVjdDogZmhpci5SZWZlcmVuY2VBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHRoZSBjbGluaWNhbCBlbmNvdW50ZXIgb3IgdHlwZSBvZiBjYXJlIHRoaXMgZG9jdW1lbnRhdGlvbiBpcyBhc3NvY2lhdGVkIHdpdGguXHJcbiAgICovXHJcbiAgZW5jb3VudGVyPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgTGFzdCBNb2RpZmllZCBEYXRlIG9uIHRoZSBjb21wb3NpdGlvbiBtYXkgYmUgYWZ0ZXIgdGhlIGRhdGUgb2YgdGhlIGRvY3VtZW50IHdhcyBhdHRlc3RlZCB3aXRob3V0IGJlaW5nIGNoYW5nZWQuXHJcbiAgICovXHJcbiAgZGF0ZTogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ29tcG9zaXRpb24uZGF0ZVxyXG4gICAqL1xyXG4gIF9kYXRlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHdobyBpcyByZXNwb25zaWJsZSBmb3IgdGhlIGluZm9ybWF0aW9uIGluIHRoZSBjb21wb3NpdGlvbiwgbm90IG5lY2Vzc2FyaWx5IHdobyB0eXBlZCBpdCBpbi5cclxuICAgKi9cclxuICBhdXRob3I6IGZoaXIuUmVmZXJlbmNlQXJnc1tdfG51bGw7XHJcbiAgLyoqXHJcbiAgICogRm9yIG1hbnkgY29tcG9zaXRpb25zLCB0aGUgdGl0bGUgaXMgdGhlIHNhbWUgYXMgdGhlIHRleHQgb3IgYSBkaXNwbGF5IG5hbWUgb2YgQ29tcG9zaXRpb24udHlwZSAoZS5nLiBhIFwiY29uc3VsdGF0aW9uXCIgb3IgXCJwcm9ncmVzcyBub3RlXCIpLiBOb3RlIHRoYXQgQ0RBIGRvZXMgbm90IG1ha2UgdGl0bGUgbWFuZGF0b3J5LCBidXQgdGhlcmUgYXJlIG5vIGtub3duIGNhc2VzIHdoZXJlIGl0IGlzIHVzZWZ1bCBmb3IgdGl0bGUgdG8gYmUgb21pdHRlZCwgc28gaXQgaXMgbWFuZGF0b3J5IGhlcmUuIEZlZWRiYWNrIG9uIHRoaXMgcmVxdWlyZW1lbnQgaXMgd2VsY29tZSBkdXJpbmcgdGhlIHRyaWFsIHVzZSBwZXJpb2QuXHJcbiAgICovXHJcbiAgdGl0bGU6IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDb21wb3NpdGlvbi50aXRsZVxyXG4gICAqL1xyXG4gIF90aXRsZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGV4YWN0IHVzZSBvZiB0aGlzIGVsZW1lbnQsIGFuZCBlbmZvcmNlbWVudCBhbmQgaXNzdWVzIHJlbGF0ZWQgdG8gaGlnaGx5IHNlbnNpdGl2ZSBkb2N1bWVudHMgYXJlIG91dCBvZiBzY29wZSBmb3IgdGhlIGJhc2Ugc3BlY2lmaWNhdGlvbiwgYW5kIGRlbGVnYXRlZCB0byBpbXBsZW1lbnRhdGlvbiBwcm9maWxlcyAoc2VlIHNlY3VyaXR5IHNlY3Rpb24pLlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgYmVjYXVzZSBoaWdobHkgY29uZmlkZW50aWFsIGRvY3VtZW50cyBtdXN0IG5vdCBiZSB0cmVhdGVkIGFzIGlmIHRoZXkgYXJlIG5vdC5cclxuICAgKi9cclxuICBjb25maWRlbnRpYWxpdHk/OiBmaGlyLkZoaXJDb2RlfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENvbXBvc2l0aW9uLmNvbmZpZGVudGlhbGl0eVxyXG4gICAqL1xyXG4gIF9jb25maWRlbnRpYWxpdHk/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIE9ubHkgbGlzdCBlYWNoIGF0dGVzdGVyIG9uY2UuXHJcbiAgICovXHJcbiAgYXR0ZXN0ZXI/OiBmaGlyLkNvbXBvc2l0aW9uQXR0ZXN0ZXJBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaXMgdXNlZnVsIHdoZW4gZG9jdW1lbnRzIGFyZSBkZXJpdmVkIGZyb20gYSBjb21wb3NpdGlvbiAtIHByb3ZpZGVzIGd1aWRhbmNlIGZvciBob3cgdG8gZ2V0IHRoZSBsYXRlc3QgdmVyc2lvbiBvZiB0aGUgZG9jdW1lbnQuIFRoaXMgaXMgb3B0aW9uYWwgYmVjYXVzZSB0aGlzIGlzIHNvbWV0aW1lcyBub3Qga25vd24gYnkgdGhlIGF1dGhvcmluZyBzeXN0ZW0sIGFuZCBjYW4gYmUgaW5mZXJyZWQgYnkgY29udGV4dC4gSG93ZXZlciwgaXQgaXMgaW1wb3J0YW50IHRoYXQgdGhpcyBpbmZvcm1hdGlvbiBiZSBrbm93biB3aGVuIHdvcmtpbmcgd2l0aCBhIGRlcml2ZWQgZG9jdW1lbnQsIHNvIHByb3ZpZGluZyBhIGN1c3RvZGlhbiBpcyBlbmNvdXJhZ2VkLlxyXG4gICAqL1xyXG4gIGN1c3RvZGlhbj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBkb2N1bWVudCBpcyBhIHZlcnNpb24gc3BlY2lmaWMgY29tcG9zaXRpb24uXHJcbiAgICovXHJcbiAgcmVsYXRlc1RvPzogZmhpci5Db21wb3NpdGlvblJlbGF0ZXNUb0FyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGV2ZW50IG5lZWRzIHRvIGJlIGNvbnNpc3RlbnQgd2l0aCB0aGUgdHlwZSBlbGVtZW50LCB0aG91Z2ggY2FuIHByb3ZpZGUgZnVydGhlciBpbmZvcm1hdGlvbiBpZiBkZXNpcmVkLlxyXG4gICAqL1xyXG4gIGV2ZW50PzogZmhpci5Db21wb3NpdGlvbkV2ZW50QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcm9vdCBvZiB0aGUgc2VjdGlvbnMgdGhhdCBtYWtlIHVwIHRoZSBjb21wb3NpdGlvbi5cclxuICAgKi9cclxuICBzZWN0aW9uPzogZmhpci5Db21wb3NpdGlvblNlY3Rpb25BcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQSBzZXQgb2YgaGVhbHRoY2FyZS1yZWxhdGVkIGluZm9ybWF0aW9uIHRoYXQgaXMgYXNzZW1ibGVkIHRvZ2V0aGVyIGludG8gYSBzaW5nbGUgbG9naWNhbCBkb2N1bWVudCB0aGF0IHByb3ZpZGVzIGEgc2luZ2xlIGNvaGVyZW50IHN0YXRlbWVudCBvZiBtZWFuaW5nLCBlc3RhYmxpc2hlcyBpdHMgb3duIGNvbnRleHQgYW5kIHRoYXQgaGFzIGNsaW5pY2FsIGF0dGVzdGF0aW9uIHdpdGggcmVnYXJkIHRvIHdobyBpcyBtYWtpbmcgdGhlIHN0YXRlbWVudC4gV2hpbGUgYSBDb21wb3NpdGlvbiBkZWZpbmVzIHRoZSBzdHJ1Y3R1cmUsIGl0IGRvZXMgbm90IGFjdHVhbGx5IGNvbnRhaW4gdGhlIGNvbnRlbnQ6IHJhdGhlciB0aGUgZnVsbCBjb250ZW50IG9mIGEgZG9jdW1lbnQgaXMgY29udGFpbmVkIGluIGEgQnVuZGxlLCBvZiB3aGljaCB0aGUgQ29tcG9zaXRpb24gaXMgdGhlIGZpcnN0IHJlc291cmNlIGNvbnRhaW5lZC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb21wb3NpdGlvbiBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQ29tcG9zaXRpb24nO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNvdXJjZVR5cGU6IFwiQ29tcG9zaXRpb25cIjtcclxuICAvKipcclxuICAgKiBTZWUgZGlzY3Vzc2lvbiBpbiByZXNvdXJjZSBkZWZpbml0aW9uIGZvciBob3cgdGhlc2UgcmVsYXRlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiBhIGNvbXBvc2l0aW9uIGlzIG1hcmtlZCBhcyB3aXRoZHJhd24sIHRoZSBjb21wb3NpdGlvbnMvZG9jdW1lbnRzIGluIHRoZSBzZXJpZXMsIG9yIGRhdGEgZnJvbSB0aGUgY29tcG9zaXRpb24gb3IgZG9jdW1lbnQgc2VyaWVzLCBzaG91bGQgbmV2ZXIgYmUgZGlzcGxheWVkIHRvIGEgdXNlciB3aXRob3V0IGJlaW5nIGNsZWFybHkgbWFya2VkIGFzIHVudHJ1c3R3b3J0aHkuIFRoZSBmbGFnIFwiZW50ZXJlZC1pbi1lcnJvclwiIGlzIHdoeSB0aGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIG9mIG90aGVyIGVsZW1lbnRzLiBcclxuICAgKiBTb21lIHJlcG9ydGluZyB3b3JrIGZsb3dzIHJlcXVpcmUgdGhhdCB0aGUgb3JpZ2luYWwgbmFycmF0aXZlIG9mIGEgZmluYWwgZG9jdW1lbnQgbmV2ZXIgYmUgYWx0ZXJlZDsgaW5zdGVhZCwgb25seSBuZXcgbmFycmF0aXZlIGNhbiBiZSBhZGRlZC4gVGhlIGNvbXBvc2l0aW9uIHJlc291cmNlIGhhcyBubyBleHBsaWNpdCBzdGF0dXMgZm9yIGV4cGxpY2l0bHkgbm90aW5nIHdoZXRoZXIgdGhpcyBidXNpbmVzcyBydWxlIGlzIGluIGVmZmVjdC4gVGhpcyB3b3VsZCBiZSBoYW5kbGVkIGJ5IGFuIGV4dGVuc2lvbiBpZiByZXF1aXJlZC5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPENvbXBvc2l0aW9uU3RhdHVzQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogRm9yIENvbXBvc2l0aW9uIHR5cGUsIExPSU5DIGlzIHViaXF1aXRvdXMgYW5kIHN0cm9uZ2x5IGVuZG9yc2VkIGJ5IEhMNy4gTW9zdCBpbXBsZW1lbnRhdGlvbiBndWlkZXMgd2lsbCByZXF1aXJlIGEgc3BlY2lmaWMgTE9JTkMgY29kZSwgb3IgdXNlIExPSU5DIGFzIGFuIGV4dGVuc2libGUgYmluZGluZy5cclxuICAgKi9cclxuICBwdWJsaWMgdHlwZTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGlzIGlzIGEgbWV0YWRhdGEgZmllbGQgZnJvbSBbWERTL01IRF0oaHR0cDovL3dpa2kuaWhlLm5ldC9pbmRleC5waHA/dGl0bGU9TW9iaWxlX2FjY2Vzc190b19IZWFsdGhfRG9jdW1lbnRzXyhNSEQpKS5cclxuICAgKi9cclxuICBwdWJsaWMgY2xhc3M/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRm9yIGNsaW5pY2FsIGRvY3VtZW50cywgdGhpcyBpcyB1c3VhbGx5IHRoZSBwYXRpZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdWJqZWN0OiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB0aGUgY2xpbmljYWwgZW5jb3VudGVyIG9yIHR5cGUgb2YgY2FyZSB0aGlzIGRvY3VtZW50YXRpb24gaXMgYXNzb2NpYXRlZCB3aXRoLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBlbmNvdW50ZXI/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIExhc3QgTW9kaWZpZWQgRGF0ZSBvbiB0aGUgY29tcG9zaXRpb24gbWF5IGJlIGFmdGVyIHRoZSBkYXRlIG9mIHRoZSBkb2N1bWVudCB3YXMgYXR0ZXN0ZWQgd2l0aG91dCBiZWluZyBjaGFuZ2VkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkYXRlOiBmaGlyLkZoaXJEYXRlVGltZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgd2hvIGlzIHJlc3BvbnNpYmxlIGZvciB0aGUgaW5mb3JtYXRpb24gaW4gdGhlIGNvbXBvc2l0aW9uLCBub3QgbmVjZXNzYXJpbHkgd2hvIHR5cGVkIGl0IGluLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhdXRob3I6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogRm9yIG1hbnkgY29tcG9zaXRpb25zLCB0aGUgdGl0bGUgaXMgdGhlIHNhbWUgYXMgdGhlIHRleHQgb3IgYSBkaXNwbGF5IG5hbWUgb2YgQ29tcG9zaXRpb24udHlwZSAoZS5nLiBhIFwiY29uc3VsdGF0aW9uXCIgb3IgXCJwcm9ncmVzcyBub3RlXCIpLiBOb3RlIHRoYXQgQ0RBIGRvZXMgbm90IG1ha2UgdGl0bGUgbWFuZGF0b3J5LCBidXQgdGhlcmUgYXJlIG5vIGtub3duIGNhc2VzIHdoZXJlIGl0IGlzIHVzZWZ1bCBmb3IgdGl0bGUgdG8gYmUgb21pdHRlZCwgc28gaXQgaXMgbWFuZGF0b3J5IGhlcmUuIEZlZWRiYWNrIG9uIHRoaXMgcmVxdWlyZW1lbnQgaXMgd2VsY29tZSBkdXJpbmcgdGhlIHRyaWFsIHVzZSBwZXJpb2QuXHJcbiAgICovXHJcbiAgcHVibGljIHRpdGxlOiBmaGlyLkZoaXJTdHJpbmd8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgZXhhY3QgdXNlIG9mIHRoaXMgZWxlbWVudCwgYW5kIGVuZm9yY2VtZW50IGFuZCBpc3N1ZXMgcmVsYXRlZCB0byBoaWdobHkgc2Vuc2l0aXZlIGRvY3VtZW50cyBhcmUgb3V0IG9mIHNjb3BlIGZvciB0aGUgYmFzZSBzcGVjaWZpY2F0aW9uLCBhbmQgZGVsZWdhdGVkIHRvIGltcGxlbWVudGF0aW9uIHByb2ZpbGVzIChzZWUgc2VjdXJpdHkgc2VjdGlvbikuXHJcbiAgICogVGhpcyBlbGVtZW50IGlzIGxhYmVsZWQgYXMgYSBtb2RpZmllciBiZWNhdXNlIGhpZ2hseSBjb25maWRlbnRpYWwgZG9jdW1lbnRzIG11c3Qgbm90IGJlIHRyZWF0ZWQgYXMgaWYgdGhleSBhcmUgbm90LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25maWRlbnRpYWxpdHk/OiBmaGlyLkZoaXJDb2RlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBPbmx5IGxpc3QgZWFjaCBhdHRlc3RlciBvbmNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhdHRlc3RlcjogZmhpci5Db21wb3NpdGlvbkF0dGVzdGVyW107XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyB1c2VmdWwgd2hlbiBkb2N1bWVudHMgYXJlIGRlcml2ZWQgZnJvbSBhIGNvbXBvc2l0aW9uIC0gcHJvdmlkZXMgZ3VpZGFuY2UgZm9yIGhvdyB0byBnZXQgdGhlIGxhdGVzdCB2ZXJzaW9uIG9mIHRoZSBkb2N1bWVudC4gVGhpcyBpcyBvcHRpb25hbCBiZWNhdXNlIHRoaXMgaXMgc29tZXRpbWVzIG5vdCBrbm93biBieSB0aGUgYXV0aG9yaW5nIHN5c3RlbSwgYW5kIGNhbiBiZSBpbmZlcnJlZCBieSBjb250ZXh0LiBIb3dldmVyLCBpdCBpcyBpbXBvcnRhbnQgdGhhdCB0aGlzIGluZm9ybWF0aW9uIGJlIGtub3duIHdoZW4gd29ya2luZyB3aXRoIGEgZGVyaXZlZCBkb2N1bWVudCwgc28gcHJvdmlkaW5nIGEgY3VzdG9kaWFuIGlzIGVuY291cmFnZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGN1c3RvZGlhbj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGRvY3VtZW50IGlzIGEgdmVyc2lvbiBzcGVjaWZpYyBjb21wb3NpdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgcmVsYXRlc1RvOiBmaGlyLkNvbXBvc2l0aW9uUmVsYXRlc1RvW107XHJcbiAgLyoqXHJcbiAgICogVGhlIGV2ZW50IG5lZWRzIHRvIGJlIGNvbnNpc3RlbnQgd2l0aCB0aGUgdHlwZSBlbGVtZW50LCB0aG91Z2ggY2FuIHByb3ZpZGUgZnVydGhlciBpbmZvcm1hdGlvbiBpZiBkZXNpcmVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBldmVudDogZmhpci5Db21wb3NpdGlvbkV2ZW50W107XHJcbiAgLyoqXHJcbiAgICogVGhlIHJvb3Qgb2YgdGhlIHNlY3Rpb25zIHRoYXQgbWFrZSB1cCB0aGUgY29tcG9zaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHNlY3Rpb246IGZoaXIuQ29tcG9zaXRpb25TZWN0aW9uW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQ29tcG9zaXRpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxDb21wb3NpdGlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdDb21wb3NpdGlvbic7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gbmV3IGZoaXIuSWRlbnRpZmllcihzb3VyY2UuaWRlbnRpZmllcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0YXR1cyddKSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8Q29tcG9zaXRpb25TdGF0dXNDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2Uuc3RhdHVzfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zdGF0dXMnXSkge1xyXG4gICAgICBpZiAodGhpcy5zdGF0dXMpIHsgdGhpcy5zdGF0dXMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc3RhdHVzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8Q29tcG9zaXRpb25TdGF0dXNDb2RlVHlwZT4oc291cmNlLl9zdGF0dXMgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3R5cGUnXSkgeyB0aGlzLnR5cGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnR5cGUpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy50eXBlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY2xhc3MnXSkgeyB0aGlzLmNsYXNzID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jbGFzcyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N1YmplY3QnXSkgeyB0aGlzLnN1YmplY3QgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnN1YmplY3QpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdWJqZWN0ID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZW5jb3VudGVyJ10pIHsgdGhpcy5lbmNvdW50ZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmVuY291bnRlcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ2RhdGUnXSkgeyB0aGlzLmRhdGUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2UuZGF0ZX0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5kYXRlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2RhdGUnXSkge1xyXG4gICAgICBpZiAodGhpcy5kYXRlKSB7IHRoaXMuZGF0ZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9kYXRlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZGF0ZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZShzb3VyY2UuX2RhdGUgYXMgUGFydGlhbDxmaGlyLkZoaXJEYXRlVGltZUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnYXV0aG9yJ10pIHsgdGhpcy5hdXRob3IgPSBzb3VyY2UuYXV0aG9yLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYXV0aG9yID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3RpdGxlJ10pIHsgdGhpcy50aXRsZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UudGl0bGV9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudGl0bGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfdGl0bGUnXSkge1xyXG4gICAgICBpZiAodGhpcy50aXRsZSkgeyB0aGlzLnRpdGxlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3RpdGxlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudGl0bGUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fdGl0bGUgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2NvbmZpZGVudGlhbGl0eSddKSB7IHRoaXMuY29uZmlkZW50aWFsaXR5ID0gbmV3IGZoaXIuRmhpckNvZGUoe3ZhbHVlOiBzb3VyY2UuY29uZmlkZW50aWFsaXR5fSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19jb25maWRlbnRpYWxpdHknXSkge1xyXG4gICAgICBpZiAodGhpcy5jb25maWRlbnRpYWxpdHkpIHsgdGhpcy5jb25maWRlbnRpYWxpdHkuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fY29uZmlkZW50aWFsaXR5ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuY29uZmlkZW50aWFsaXR5ID0gbmV3IGZoaXIuRmhpckNvZGUoc291cmNlLl9jb25maWRlbnRpYWxpdHkgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydhdHRlc3RlciddKSB7IHRoaXMuYXR0ZXN0ZXIgPSBzb3VyY2UuYXR0ZXN0ZXIubWFwKCh4KSA9PiBuZXcgZmhpci5Db21wb3NpdGlvbkF0dGVzdGVyKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYXR0ZXN0ZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY3VzdG9kaWFuJ10pIHsgdGhpcy5jdXN0b2RpYW4gPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmN1c3RvZGlhbik7IH1cclxuICAgIGlmIChzb3VyY2VbJ3JlbGF0ZXNUbyddKSB7IHRoaXMucmVsYXRlc1RvID0gc291cmNlLnJlbGF0ZXNUby5tYXAoKHgpID0+IG5ldyBmaGlyLkNvbXBvc2l0aW9uUmVsYXRlc1RvKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVsYXRlc1RvID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2V2ZW50J10pIHsgdGhpcy5ldmVudCA9IHNvdXJjZS5ldmVudC5tYXAoKHgpID0+IG5ldyBmaGlyLkNvbXBvc2l0aW9uRXZlbnQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5ldmVudCA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydzZWN0aW9uJ10pIHsgdGhpcy5zZWN0aW9uID0gc291cmNlLnNlY3Rpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5Db21wb3NpdGlvblNlY3Rpb24oeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zZWN0aW9uID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdDb21wb3NpdGlvbicgfVxyXG4gICAgdGhpcy52UlMoJ3Jlc291cmNlVHlwZScsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2lkZW50aWZpZXInLGV4cClcclxuICAgIHRoaXMudlJTVignc3RhdHVzJyxleHAsJ0NvbXBvc2l0aW9uU3RhdHVzJyxDb21wb3NpdGlvblN0YXR1c1ZzVmFsaWRhdGlvbiwncicpXHJcbiAgICB0aGlzLnZSUygndHlwZScsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2NsYXNzJyxleHApXHJcbiAgICB0aGlzLnZSUygnc3ViamVjdCcsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2VuY291bnRlcicsZXhwKVxyXG4gICAgdGhpcy52UlMoJ2RhdGUnLGV4cClcclxuICAgIHRoaXMudlJBKCdhdXRob3InLGV4cClcclxuICAgIHRoaXMudlJTKCd0aXRsZScsZXhwKVxyXG4gICAgdGhpcy52T1NWKCdjb25maWRlbnRpYWxpdHknLGV4cCwnVjNDb25maWRlbnRpYWxpdHlDbGFzc2lmaWNhdGlvbicsVjNDb25maWRlbnRpYWxpdHlDbGFzc2lmaWNhdGlvblZzVmFsaWRhdGlvbiwncicpXHJcbiAgICB0aGlzLnZPQSgnYXR0ZXN0ZXInLGV4cClcclxuICAgIHRoaXMudk9TKCdjdXN0b2RpYW4nLGV4cClcclxuICAgIHRoaXMudk9BKCdyZWxhdGVzVG8nLGV4cClcclxuICAgIHRoaXMudk9BKCdldmVudCcsZXhwKVxyXG4gICAgdGhpcy52T0EoJ3NlY3Rpb24nLGV4cClcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbiJdfQ==