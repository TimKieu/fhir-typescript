// <auto-generated/>
// Contents of: hl7.fhir.r3.core version: 3.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: DeviceComponent
import * as fhir from '../fhir.js';
// @ts-ignore
import { MeasurementPrincipleVsValidation } from '../fhirValueSets/MeasurementPrincipleVsValidation.js';
/**
 * The production specification such as component revision, serial number, etc.
 */
export class DeviceComponentProductionSpecification extends fhir.BackboneElement {
    /**
     * Default constructor for DeviceComponentProductionSpecification - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['specType']) {
            this.specType = new fhir.CodeableConcept(source.specType);
        }
        if (source['componentId']) {
            this.componentId = new fhir.Identifier(source.componentId);
        }
        if (source['productionSpec']) {
            this.productionSpec = new fhir.FhirString({ value: source.productionSpec });
        }
        if (source['_productionSpec']) {
            if (this.productionSpec) {
                this.productionSpec.addExtendedProperties(source._productionSpec);
            }
            else {
                this.productionSpec = new fhir.FhirString(source._productionSpec);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'DeviceComponent.productionSpecification';
        }
        iss.push(...this.vOS('specType', exp));
        iss.push(...this.vOS('componentId', exp));
        iss.push(...this.vOS('productionSpec', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DeviceComponentProductionSpecification._fts_dataType = 'DeviceComponentProductionSpecification';
/**
 * The characteristics, operational status and capabilities of a medical-related component of a medical device.
 */
export class DeviceComponent extends fhir.DomainResource {
    /**
     * Default constructor for DeviceComponent - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'DeviceComponent';
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier);
        }
        else {
            this.identifier = null;
        }
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type);
        }
        else {
            this.type = null;
        }
        if (source['lastSystemChange']) {
            this.lastSystemChange = new fhir.FhirInstant({ value: source.lastSystemChange });
        }
        if (source['_lastSystemChange']) {
            if (this.lastSystemChange) {
                this.lastSystemChange.addExtendedProperties(source._lastSystemChange);
            }
            else {
                this.lastSystemChange = new fhir.FhirInstant(source._lastSystemChange);
            }
        }
        if (source['source']) {
            this.source = new fhir.Reference(source.source);
        }
        if (source['parent']) {
            this.parent = new fhir.Reference(source.parent);
        }
        if (source['operationalStatus']) {
            this.operationalStatus = source.operationalStatus.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.operationalStatus = [];
        }
        if (source['parameterGroup']) {
            this.parameterGroup = new fhir.CodeableConcept(source.parameterGroup);
        }
        if (source['measurementPrinciple']) {
            this.measurementPrinciple = new fhir.FhirCode({ value: source.measurementPrinciple });
        }
        if (source['_measurementPrinciple']) {
            if (this.measurementPrinciple) {
                this.measurementPrinciple.addExtendedProperties(source._measurementPrinciple);
            }
            else {
                this.measurementPrinciple = new fhir.FhirCode(source._measurementPrinciple);
            }
        }
        if (source['productionSpecification']) {
            this.productionSpecification = source.productionSpecification.map((x) => new fhir.DeviceComponentProductionSpecification(x));
        }
        else {
            this.productionSpecification = [];
        }
        if (source['languageCode']) {
            this.languageCode = new fhir.CodeableConcept(source.languageCode);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'DeviceComponent';
        }
        iss.push(...this.vRS('identifier', exp));
        iss.push(...this.vRS('type', exp));
        iss.push(...this.vOS('lastSystemChange', exp));
        iss.push(...this.vOS('source', exp));
        iss.push(...this.vOS('parent', exp));
        iss.push(...this.vOA('operationalStatus', exp));
        iss.push(...this.vOS('parameterGroup', exp));
        iss.push(...this.vOSV('measurementPrinciple', exp, 'MeasurementPrinciple', MeasurementPrincipleVsValidation, 'r'));
        iss.push(...this.vOA('productionSpecification', exp));
        iss.push(...this.vOS('languageCode', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DeviceComponent._fts_dataType = 'DeviceComponent';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGV2aWNlQ29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9EZXZpY2VDb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsaUNBQWlDO0FBRWpDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBb0JuQyxhQUFhO0FBQ2IsT0FBTyxFQUFFLGdDQUFnQyxFQUFFLE1BQU0sc0RBQXNELENBQUM7QUEyQnhHOztHQUVHO0FBQ0gsTUFBTSxPQUFPLHNDQUF1QyxTQUFRLElBQUksQ0FBQyxlQUFlO0lBaUI5RTs7T0FFRztJQUNILFlBQVksU0FBNkQsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDbkgsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztTQUFFO1FBQ3RGLElBQUksTUFBTSxDQUFDLGFBQWEsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1NBQUU7UUFDMUYsSUFBSSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxjQUFjLEVBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDNUcsSUFBSSxNQUFNLENBQUMsaUJBQWlCLENBQUMsRUFBRTtZQUM3QixJQUFJLElBQUksQ0FBQyxjQUFjLEVBQUU7Z0JBQUUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMs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QyxzQkFBc0IsRUFBQyxnQ0FBZ0MsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQy9HLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLHlCQUF5QixFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDckQsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDMUMsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDOztBQTlGRDs7R0FFRztBQUM2Qiw2QkFBYSxHQUFVLGlCQUFpQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnIzLmNvcmUgdmVyc2lvbjogMy4wLjJcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBEZXZpY2VDb21wb25lbnRcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFNwZWNpZmljYXRpb25UeXBlQ29kZXMsICBTcGVjaWZpY2F0aW9uVHlwZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9TcGVjaWZpY2F0aW9uVHlwZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBTcGVjaWZpY2F0aW9uVHlwZVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvU3BlY2lmaWNhdGlvblR5cGVWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IERldmljZUtpbmRDb2RlcywgIERldmljZUtpbmRDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRGV2aWNlS2luZENvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEZXZpY2VLaW5kVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9EZXZpY2VLaW5kVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBPcGVyYXRpb25hbFN0YXR1c0NvZGVzLCAgT3BlcmF0aW9uYWxTdGF0dXNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvT3BlcmF0aW9uYWxTdGF0dXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgT3BlcmF0aW9uYWxTdGF0dXNWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL09wZXJhdGlvbmFsU3RhdHVzVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBQYXJhbWV0ZXJHcm91cENvZGVzLCAgUGFyYW1ldGVyR3JvdXBDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUGFyYW1ldGVyR3JvdXBDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUGFyYW1ldGVyR3JvdXBWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1BhcmFtZXRlckdyb3VwVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBNZWFzdXJlbWVudFByaW5jaXBsZUNvZGVzLCAgTWVhc3VyZW1lbnRQcmluY2lwbGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTWVhc3VyZW1lbnRQcmluY2lwbGVDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTWVhc3VyZW1lbnRQcmluY2lwbGVWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL01lYXN1cmVtZW50UHJpbmNpcGxlVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBMYW5ndWFnZXNDb2RlcywgIExhbmd1YWdlc0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9MYW5ndWFnZXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTGFuZ3VhZ2VzVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9MYW5ndWFnZXNWc1ZhbGlkYXRpb24uanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgRGV2aWNlQ29tcG9uZW50UHJvZHVjdGlvblNwZWNpZmljYXRpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgRGV2aWNlQ29tcG9uZW50UHJvZHVjdGlvblNwZWNpZmljYXRpb25BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgc3BlY2lmaWNhdGlvbiB0eXBlLCBzdWNoIGFzLCBzZXJpYWwgbnVtYmVyLCBwYXJ0IG51bWJlciwgaGFyZHdhcmUgcmV2aXNpb24sIHNvZnR3YXJlIHJldmlzaW9uLCBldGMuXHJcbiAgICovXHJcbiAgc3BlY1R5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpbnRlcm5hbCBjb21wb25lbnQgdW5pcXVlIGlkZW50aWZpY2F0aW9uLiBUaGlzIGlzIGEgcHJvdmlzaW9uIGZvciBtYW51ZmFjdHVyZSBzcGVjaWZpYyBzdGFuZGFyZCBjb21wb25lbnRzIHVzaW5nIGEgcHJpdmF0ZSBPSUQuIDExMDczLTEwMTAxIGhhcyBhIHBhcnRpdGlvbiBmb3IgcHJpdmF0ZSBPSUQgc2VtYW50aWMgdGhhdCB0aGUgbWFudWZhY3R1cmVyIGNhbiBtYWtlIHVzZSBvZi5cclxuICAgKi9cclxuICBjb21wb25lbnRJZD86IGZoaXIuSWRlbnRpZmllckFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwcmludGFibGUgc3RyaW5nIGRlZmluaW5nIHRoZSBjb21wb25lbnQuXHJcbiAgICovXHJcbiAgcHJvZHVjdGlvblNwZWM/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogRGV2aWNlQ29tcG9uZW50LnByb2R1Y3Rpb25TcGVjaWZpY2F0aW9uLnByb2R1Y3Rpb25TcGVjXHJcbiAgICovXHJcbiAgX3Byb2R1Y3Rpb25TcGVjPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBwcm9kdWN0aW9uIHNwZWNpZmljYXRpb24gc3VjaCBhcyBjb21wb25lbnQgcmV2aXNpb24sIHNlcmlhbCBudW1iZXIsIGV0Yy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBEZXZpY2VDb21wb25lbnRQcm9kdWN0aW9uU3BlY2lmaWNhdGlvbiBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0RldmljZUNvbXBvbmVudFByb2R1Y3Rpb25TcGVjaWZpY2F0aW9uJztcclxuICAvKipcclxuICAgKiBUaGUgc3BlY2lmaWNhdGlvbiB0eXBlLCBzdWNoIGFzLCBzZXJpYWwgbnVtYmVyLCBwYXJ0IG51bWJlciwgaGFyZHdhcmUgcmV2aXNpb24sIHNvZnR3YXJlIHJldmlzaW9uLCBldGMuXHJcbiAgICovXHJcbiAgcHVibGljIHNwZWNUeXBlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpbnRlcm5hbCBjb21wb25lbnQgdW5pcXVlIGlkZW50aWZpY2F0aW9uLiBUaGlzIGlzIGEgcHJvdmlzaW9uIGZvciBtYW51ZmFjdHVyZSBzcGVjaWZpYyBzdGFuZGFyZCBjb21wb25lbnRzIHVzaW5nIGEgcHJpdmF0ZSBPSUQuIDExMDczLTEwMTAxIGhhcyBhIHBhcnRpdGlvbiBmb3IgcHJpdmF0ZSBPSUQgc2VtYW50aWMgdGhhdCB0aGUgbWFudWZhY3R1cmVyIGNhbiBtYWtlIHVzZSBvZi5cclxuICAgKi9cclxuICBwdWJsaWMgY29tcG9uZW50SWQ/OiBmaGlyLklkZW50aWZpZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwcmludGFibGUgc3RyaW5nIGRlZmluaW5nIHRoZSBjb21wb25lbnQuXHJcbiAgICovXHJcbiAgcHVibGljIHByb2R1Y3Rpb25TcGVjPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBEZXZpY2VDb21wb25lbnRQcm9kdWN0aW9uU3BlY2lmaWNhdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPERldmljZUNvbXBvbmVudFByb2R1Y3Rpb25TcGVjaWZpY2F0aW9uQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3NwZWNUeXBlJ10pIHsgdGhpcy5zcGVjVHlwZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2Uuc3BlY1R5cGUpOyB9XHJcbiAgICBpZiAoc291cmNlWydjb21wb25lbnRJZCddKSB7IHRoaXMuY29tcG9uZW50SWQgPSBuZXcgZmhpci5JZGVudGlmaWVyKHNvdXJjZS5jb21wb25lbnRJZCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3Byb2R1Y3Rpb25TcGVjJ10pIHsgdGhpcy5wcm9kdWN0aW9uU3BlYyA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UucHJvZHVjdGlvblNwZWN9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3Byb2R1Y3Rpb25TcGVjJ10pIHtcclxuICAgICAgaWYgKHRoaXMucHJvZHVjdGlvblNwZWMpIHsgdGhpcy5wcm9kdWN0aW9uU3BlYy5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9wcm9kdWN0aW9uU3BlYyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnByb2R1Y3Rpb25TcGVjID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3Byb2R1Y3Rpb25TcGVjIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnRGV2aWNlQ29tcG9uZW50LnByb2R1Y3Rpb25TcGVjaWZpY2F0aW9uJyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnc3BlY1R5cGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2NvbXBvbmVudElkJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdwcm9kdWN0aW9uU3BlYycsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgRGV2aWNlQ29tcG9uZW50IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIERldmljZUNvbXBvbmVudEFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIkRldmljZUNvbXBvbmVudFwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbG9jYWxseSBhc3NpZ25lZCB1bmlxdWUgaWRlbnRpZmljYXRpb24gYnkgdGhlIHNvZnR3YXJlLiBGb3IgZXhhbXBsZTogaGFuZGxlIElELlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI6IGZoaXIuSWRlbnRpZmllckFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBEZXZpY2VDb21wb25lbnQudHlwZSBjYW4gYmUgcmVmZXJyZWQgdG8gZWl0aGVyIEdETU4gKG5vbWVuY2xhdHVyZSBzeXN0ZW0gc3VwcG9ydGVkIGJ5IEZEQSBHbG9iYWwgVURJIERhdGFiYXNlKSBvciBwcmVmZXJhYmxlIFJUTU1TIGNvZGluZyBzeXN0ZW0uXHJcbiAgICovXHJcbiAgdHlwZTogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRpbWVzdGFtcCBmb3IgdGhlIG1vc3QgcmVjZW50IHN5c3RlbSBjaGFuZ2Ugd2hpY2ggaW5jbHVkZXMgZGV2aWNlIGNvbmZpZ3VyYXRpb24gb3Igc2V0dGluZyBjaGFuZ2UuXHJcbiAgICovXHJcbiAgbGFzdFN5c3RlbUNoYW5nZT86IGZoaXIuRmhpckluc3RhbnR8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogRGV2aWNlQ29tcG9uZW50Lmxhc3RTeXN0ZW1DaGFuZ2VcclxuICAgKi9cclxuICBfbGFzdFN5c3RlbUNoYW5nZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGxpbmsgdG8gdGhlIHNvdXJjZSBEZXZpY2UgdGhhdCBjb250YWlucyBhZG1pbmlzdHJhdGl2ZSBkZXZpY2UgaW5mb3JtYXRpb24gc3VjaCBhcyBtYW51ZmFjdHVyZSwgc2VyaWFsIG51bWJlciwgZXRjLlxyXG4gICAqL1xyXG4gIHNvdXJjZT86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGxpbmsgdG8gdGhlIHBhcmVudCByZXNvdXJjZS4gRm9yIGV4YW1wbGU6IENoYW5uZWwgaXMgbGlua2VkIHRvIGl0cyBWTUQgcGFyZW50LlxyXG4gICAqL1xyXG4gIHBhcmVudD86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogT3BlcmF0aW9uYWxTdGF0dXMgZm9yIHRoZSBNRFMsIFZNRCwgb3IgQ2hhbm5lbCB3aWxsIGJlIGJvdW5kIHRvIGEgc3BlY2lmaWMgVmFsdWVTZXQgdGhhdCBpcyBkZWZpbmVkIGluIGl0cyBwcm9maWxlLlxyXG4gICAqL1xyXG4gIG9wZXJhdGlvbmFsU3RhdHVzPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXJhbWV0ZXIgZ3JvdXAgc3VwcG9ydGVkIGJ5IHRoZSBjdXJyZW50IGRldmljZSBjb21wb25lbnQgdGhhdCBpcyBiYXNlZCBvbiBzb21lIG5vbWVuY2xhdHVyZSwgZS5nLiBjYXJkaW92YXNjdWxhci5cclxuICAgKi9cclxuICBwYXJhbWV0ZXJHcm91cD86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBoeXNpY2FsIHByaW5jaXBsZSBvZiB0aGUgbWVhc3VyZW1lbnQuIEZvciBleGFtcGxlOiB0aGVybWFsLCBjaGVtaWNhbCwgYWNvdXN0aWNhbCwgZXRjLlxyXG4gICAqL1xyXG4gIG1lYXN1cmVtZW50UHJpbmNpcGxlPzogZmhpci5GaGlyQ29kZTxNZWFzdXJlbWVudFByaW5jaXBsZUNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBEZXZpY2VDb21wb25lbnQubWVhc3VyZW1lbnRQcmluY2lwbGVcclxuICAgKi9cclxuICBfbWVhc3VyZW1lbnRQcmluY2lwbGU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwcm9kdWN0aW9uIHNwZWNpZmljYXRpb24gc3VjaCBhcyBjb21wb25lbnQgcmV2aXNpb24sIHNlcmlhbCBudW1iZXIsIGV0Yy5cclxuICAgKi9cclxuICBwcm9kdWN0aW9uU3BlY2lmaWNhdGlvbj86IGZoaXIuRGV2aWNlQ29tcG9uZW50UHJvZHVjdGlvblNwZWNpZmljYXRpb25BcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsYW5ndWFnZSBjb2RlIGZvciB0aGUgaHVtYW4tcmVhZGFibGUgdGV4dCBzdHJpbmcgcHJvZHVjZWQgYnkgdGhlIGRldmljZS4gVGhpcyBsYW5ndWFnZSBjb2RlIHdpbGwgZm9sbG93IHRoZSBJRVRGIGxhbmd1YWdlIHRhZy4gRXhhbXBsZTogZW4tVVMuXHJcbiAgICovXHJcbiAgbGFuZ3VhZ2VDb2RlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBjaGFyYWN0ZXJpc3RpY3MsIG9wZXJhdGlvbmFsIHN0YXR1cyBhbmQgY2FwYWJpbGl0aWVzIG9mIGEgbWVkaWNhbC1yZWxhdGVkIGNvbXBvbmVudCBvZiBhIG1lZGljYWwgZGV2aWNlLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIERldmljZUNvbXBvbmVudCBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnRGV2aWNlQ29tcG9uZW50JztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIkRldmljZUNvbXBvbmVudFwiO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsb2NhbGx5IGFzc2lnbmVkIHVuaXF1ZSBpZGVudGlmaWNhdGlvbiBieSB0aGUgc29mdHdhcmUuIEZvciBleGFtcGxlOiBoYW5kbGUgSUQuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI6IGZoaXIuSWRlbnRpZmllcnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIERldmljZUNvbXBvbmVudC50eXBlIGNhbiBiZSByZWZlcnJlZCB0byBlaXRoZXIgR0RNTiAobm9tZW5jbGF0dXJlIHN5c3RlbSBzdXBwb3J0ZWQgYnkgRkRBIEdsb2JhbCBVREkgRGF0YWJhc2UpIG9yIHByZWZlcmFibGUgUlRNTVMgY29kaW5nIHN5c3RlbS5cclxuICAgKi9cclxuICBwdWJsaWMgdHlwZTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgdGltZXN0YW1wIGZvciB0aGUgbW9zdCByZWNlbnQgc3lzdGVtIGNoYW5nZSB3aGljaCBpbmNsdWRlcyBkZXZpY2UgY29uZmlndXJhdGlvbiBvciBzZXR0aW5nIGNoYW5nZS5cclxuICAgKi9cclxuICBwdWJsaWMgbGFzdFN5c3RlbUNoYW5nZT86IGZoaXIuRmhpckluc3RhbnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsaW5rIHRvIHRoZSBzb3VyY2UgRGV2aWNlIHRoYXQgY29udGFpbnMgYWRtaW5pc3RyYXRpdmUgZGV2aWNlIGluZm9ybWF0aW9uIHN1Y2ggYXMgbWFudWZhY3R1cmUsIHNlcmlhbCBudW1iZXIsIGV0Yy5cclxuICAgKi9cclxuICBwdWJsaWMgc291cmNlPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsaW5rIHRvIHRoZSBwYXJlbnQgcmVzb3VyY2UuIEZvciBleGFtcGxlOiBDaGFubmVsIGlzIGxpbmtlZCB0byBpdHMgVk1EIHBhcmVudC5cclxuICAgKi9cclxuICBwdWJsaWMgcGFyZW50PzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE9wZXJhdGlvbmFsU3RhdHVzIGZvciB0aGUgTURTLCBWTUQsIG9yIENoYW5uZWwgd2lsbCBiZSBib3VuZCB0byBhIHNwZWNpZmljIFZhbHVlU2V0IHRoYXQgaXMgZGVmaW5lZCBpbiBpdHMgcHJvZmlsZS5cclxuICAgKi9cclxuICBwdWJsaWMgb3BlcmF0aW9uYWxTdGF0dXM6IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogVGhlIHBhcmFtZXRlciBncm91cCBzdXBwb3J0ZWQgYnkgdGhlIGN1cnJlbnQgZGV2aWNlIGNvbXBvbmVudCB0aGF0IGlzIGJhc2VkIG9uIHNvbWUgbm9tZW5jbGF0dXJlLCBlLmcuIGNhcmRpb3Zhc2N1bGFyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXJhbWV0ZXJHcm91cD86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcGh5c2ljYWwgcHJpbmNpcGxlIG9mIHRoZSBtZWFzdXJlbWVudC4gRm9yIGV4YW1wbGU6IHRoZXJtYWwsIGNoZW1pY2FsLCBhY291c3RpY2FsLCBldGMuXHJcbiAgICovXHJcbiAgcHVibGljIG1lYXN1cmVtZW50UHJpbmNpcGxlPzogZmhpci5GaGlyQ29kZTxNZWFzdXJlbWVudFByaW5jaXBsZUNvZGVUeXBlPnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHByb2R1Y3Rpb24gc3BlY2lmaWNhdGlvbiBzdWNoIGFzIGNvbXBvbmVudCByZXZpc2lvbiwgc2VyaWFsIG51bWJlciwgZXRjLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcm9kdWN0aW9uU3BlY2lmaWNhdGlvbjogZmhpci5EZXZpY2VDb21wb25lbnRQcm9kdWN0aW9uU3BlY2lmaWNhdGlvbltdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsYW5ndWFnZSBjb2RlIGZvciB0aGUgaHVtYW4tcmVhZGFibGUgdGV4dCBzdHJpbmcgcHJvZHVjZWQgYnkgdGhlIGRldmljZS4gVGhpcyBsYW5ndWFnZSBjb2RlIHdpbGwgZm9sbG93IHRoZSBJRVRGIGxhbmd1YWdlIHRhZy4gRXhhbXBsZTogZW4tVVMuXHJcbiAgICovXHJcbiAgcHVibGljIGxhbmd1YWdlQ29kZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBEZXZpY2VDb21wb25lbnQgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxEZXZpY2VDb21wb25lbnRBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnRGV2aWNlQ29tcG9uZW50JztcclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBuZXcgZmhpci5JZGVudGlmaWVyKHNvdXJjZS5pZGVudGlmaWVyKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaWRlbnRpZmllciA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3R5cGUnXSkgeyB0aGlzLnR5cGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnR5cGUpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy50eXBlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbGFzdFN5c3RlbUNoYW5nZSddKSB7IHRoaXMubGFzdFN5c3RlbUNoYW5nZSA9IG5ldyBmaGlyLkZoaXJJbnN0YW50KHt2YWx1ZTogc291cmNlLmxhc3RTeXN0ZW1DaGFuZ2V9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2xhc3RTeXN0ZW1DaGFuZ2UnXSkge1xyXG4gICAgICBpZiAodGhpcy5sYXN0U3lzdGVtQ2hhbmdlKSB7IHRoaXMubGFzdFN5c3RlbUNoYW5nZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9sYXN0U3lzdGVtQ2hhbmdlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubGFzdFN5c3RlbUNoYW5nZSA9IG5ldyBmaGlyLkZoaXJJbnN0YW50KHNvdXJjZS5fbGFzdFN5c3RlbUNoYW5nZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckluc3RhbnRBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3NvdXJjZSddKSB7IHRoaXMuc291cmNlID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5zb3VyY2UpOyB9XHJcbiAgICBpZiAoc291cmNlWydwYXJlbnQnXSkgeyB0aGlzLnBhcmVudCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UucGFyZW50KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnb3BlcmF0aW9uYWxTdGF0dXMnXSkgeyB0aGlzLm9wZXJhdGlvbmFsU3RhdHVzID0gc291cmNlLm9wZXJhdGlvbmFsU3RhdHVzLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMub3BlcmF0aW9uYWxTdGF0dXMgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncGFyYW1ldGVyR3JvdXAnXSkgeyB0aGlzLnBhcmFtZXRlckdyb3VwID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5wYXJhbWV0ZXJHcm91cCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ21lYXN1cmVtZW50UHJpbmNpcGxlJ10pIHsgdGhpcy5tZWFzdXJlbWVudFByaW5jaXBsZSA9IG5ldyBmaGlyLkZoaXJDb2RlPE1lYXN1cmVtZW50UHJpbmNpcGxlQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLm1lYXN1cmVtZW50UHJpbmNpcGxlfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19tZWFzdXJlbWVudFByaW5jaXBsZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLm1lYXN1cmVtZW50UHJpbmNpcGxlKSB7IHRoaXMubWVhc3VyZW1lbnRQcmluY2lwbGUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbWVhc3VyZW1lbnRQcmluY2lwbGUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5tZWFzdXJlbWVudFByaW5jaXBsZSA9IG5ldyBmaGlyLkZoaXJDb2RlPE1lYXN1cmVtZW50UHJpbmNpcGxlQ29kZVR5cGU+KHNvdXJjZS5fbWVhc3VyZW1lbnRQcmluY2lwbGUgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3Byb2R1Y3Rpb25TcGVjaWZpY2F0aW9uJ10pIHsgdGhpcy5wcm9kdWN0aW9uU3BlY2lmaWNhdGlvbiA9IHNvdXJjZS5wcm9kdWN0aW9uU3BlY2lmaWNhdGlvbi5tYXAoKHgpID0+IG5ldyBmaGlyLkRldmljZUNvbXBvbmVudFByb2R1Y3Rpb25TcGVjaWZpY2F0aW9uKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucHJvZHVjdGlvblNwZWNpZmljYXRpb24gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbGFuZ3VhZ2VDb2RlJ10pIHsgdGhpcy5sYW5ndWFnZUNvZGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmxhbmd1YWdlQ29kZSk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdEZXZpY2VDb21wb25lbnQnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdpZGVudGlmaWVyJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCd0eXBlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdsYXN0U3lzdGVtQ2hhbmdlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdzb3VyY2UnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3BhcmVudCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnb3BlcmF0aW9uYWxTdGF0dXMnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3BhcmFtZXRlckdyb3VwJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TVignbWVhc3VyZW1lbnRQcmluY2lwbGUnLGV4cCwnTWVhc3VyZW1lbnRQcmluY2lwbGUnLE1lYXN1cmVtZW50UHJpbmNpcGxlVnNWYWxpZGF0aW9uLCdyJykpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3Byb2R1Y3Rpb25TcGVjaWZpY2F0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdsYW5ndWFnZUNvZGUnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuIl19