// <auto-generated/>
// Contents of: hl7.fhir.r3.core version: 3.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: DeviceComponent
import * as fhir from '../fhir.js';
// @ts-ignore
import { MeasurementPrincipleVsValidation } from '../fhirValueSets/MeasurementPrincipleVsValidation.js';
/**
 * The production specification such as component revision, serial number, etc.
 */
export class DeviceComponentProductionSpecification extends fhir.BackboneElement {
    /**
     * Default constructor for DeviceComponentProductionSpecification - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['specType']) {
            this.specType = new fhir.CodeableConcept(source.specType, options);
        }
        if (source['componentId']) {
            this.componentId = new fhir.Identifier(source.componentId, options);
        }
        if (source['productionSpec'] !== undefined) {
            this.productionSpec = new fhir.FhirString({ value: source.productionSpec }, options);
        }
        if (source['_productionSpec']) {
            if (this.productionSpec) {
                this.productionSpec.addExtendedProperties(source._productionSpec);
            }
            else {
                this.productionSpec = new fhir.FhirString(source._productionSpec, options);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'DeviceComponent.productionSpecification';
        }
        iss.push(...this.vOS('specType', exp));
        iss.push(...this.vOS('componentId', exp));
        iss.push(...this.vOS('productionSpec', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DeviceComponentProductionSpecification._fts_dataType = 'DeviceComponentProductionSpecification';
/**
 * The characteristics, operational status and capabilities of a medical-related component of a medical device.
 */
export class DeviceComponent extends fhir.DomainResource {
    /**
     * Default constructor for DeviceComponent - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'DeviceComponent';
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier, options);
        }
        else {
            this.identifier = null;
        }
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type, options);
        }
        else {
            this.type = null;
        }
        if (source['lastSystemChange'] !== undefined) {
            this.lastSystemChange = new fhir.FhirInstant({ value: source.lastSystemChange }, options);
        }
        if (source['_lastSystemChange']) {
            if (this.lastSystemChange) {
                this.lastSystemChange.addExtendedProperties(source._lastSystemChange);
            }
            else {
                this.lastSystemChange = new fhir.FhirInstant(source._lastSystemChange, options);
            }
        }
        if (source['source']) {
            this.source = new fhir.Reference(source.source, options);
        }
        if (source['parent']) {
            this.parent = new fhir.Reference(source.parent, options);
        }
        if (source['operationalStatus']) {
            this.operationalStatus = source.operationalStatus.map((x) => new fhir.CodeableConcept(x, options));
        }
        else {
            this.operationalStatus = [];
        }
        if (source['parameterGroup']) {
            this.parameterGroup = new fhir.CodeableConcept(source.parameterGroup, options);
        }
        if (source['measurementPrinciple'] !== undefined) {
            this.measurementPrinciple = new fhir.FhirCode({ value: source.measurementPrinciple }, options);
        }
        if (source['_measurementPrinciple']) {
            if (this.measurementPrinciple) {
                this.measurementPrinciple.addExtendedProperties(source._measurementPrinciple);
            }
            else {
                this.measurementPrinciple = new fhir.FhirCode(source._measurementPrinciple, options);
            }
        }
        if (source['productionSpecification']) {
            this.productionSpecification = source.productionSpecification.map((x) => new fhir.DeviceComponentProductionSpecification(x, options));
        }
        else {
            this.productionSpecification = [];
        }
        if (source['languageCode']) {
            this.languageCode = new fhir.CodeableConcept(source.languageCode, options);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'DeviceComponent';
        }
        iss.push(...this.vRS('identifier', exp));
        iss.push(...this.vRS('type', exp));
        iss.push(...this.vOS('lastSystemChange', exp));
        iss.push(...this.vOS('source', exp));
        iss.push(...this.vOS('parent', exp));
        iss.push(...this.vOA('operationalStatus', exp));
        iss.push(...this.vOS('parameterGroup', exp));
        iss.push(...this.vOSV('measurementPrinciple', exp, 'MeasurementPrinciple', MeasurementPrincipleVsValidation, 'r'));
        iss.push(...this.vOA('productionSpecification', exp));
        iss.push(...this.vOS('languageCode', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DeviceComponent._fts_dataType = 'DeviceComponent';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGV2aWNlQ29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9EZXZpY2VDb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsaUNBQWlDO0FBRWpDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBb0JuQyxhQUFhO0FBQ2IsT0FBTyxFQUFFLGdDQUFnQyxFQUFFLE1BQU0sc0RBQXNELENBQUM7QUEyQnhHOztHQUVHO0FBQ0gsTUFBTSxPQUFPLHNDQUF1QyxTQUFRLElBQUksQ0FBQyxlQUFlO0lBaUI5RTs7T0FFRztJQUNILFlBQVksU0FBNkQsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDbkgsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FBRTtRQUMvRixJQUFJLE1BQU0sQ0FBQyxhQUFhLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxXQUFXLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FBRTtRQUNuRyxJQUFJLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLFNBQVMsRUFBRTtZQUFFLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxjQUFjLEVBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztTQUFFO1FBQ25JLElBQUksTUFBTSxDQUFDLGlCQUFpQixDQUFDLEVBQUU7WUFDN0IsSUFBSSxJQUFJLENBQUMsY0FBYyxFQUFFO2dCQUFFLElB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QUFDLG1CQUFtQixFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDL0MsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUM1QyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxzQkFBc0IsRUFBQyxHQUFHLEVBQUMsc0JBQXNCLEVBQUMsZ0NBQWdDLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUMvRyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyx5QkFBeUIsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3JELEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzFDLE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQzs7QUE5RkQ7O0dBRUc7QUFDNkIsNkJBQWEsR0FBVSxpQkFBaUIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yMy5jb3JlIHZlcnNpb246IDMuMC4yXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogRGV2aWNlQ29tcG9uZW50XHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBTcGVjaWZpY2F0aW9uVHlwZUNvZGVzLCAgU3BlY2lmaWNhdGlvblR5cGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvU3BlY2lmaWNhdGlvblR5cGVDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgU3BlY2lmaWNhdGlvblR5cGVWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1NwZWNpZmljYXRpb25UeXBlVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEZXZpY2VLaW5kQ29kZXMsICBEZXZpY2VLaW5kQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0RldmljZUtpbmRDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRGV2aWNlS2luZFZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRGV2aWNlS2luZFZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgT3BlcmF0aW9uYWxTdGF0dXNDb2RlcywgIE9wZXJhdGlvbmFsU3RhdHVzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL09wZXJhdGlvbmFsU3RhdHVzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE9wZXJhdGlvbmFsU3RhdHVzVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9PcGVyYXRpb25hbFN0YXR1c1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUGFyYW1ldGVyR3JvdXBDb2RlcywgIFBhcmFtZXRlckdyb3VwQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1BhcmFtZXRlckdyb3VwQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFBhcmFtZXRlckdyb3VwVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9QYXJhbWV0ZXJHcm91cFZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTWVhc3VyZW1lbnRQcmluY2lwbGVDb2RlcywgIE1lYXN1cmVtZW50UHJpbmNpcGxlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL01lYXN1cmVtZW50UHJpbmNpcGxlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE1lYXN1cmVtZW50UHJpbmNpcGxlVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9NZWFzdXJlbWVudFByaW5jaXBsZVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTGFuZ3VhZ2VzQ29kZXMsICBMYW5ndWFnZXNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTGFuZ3VhZ2VzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IExhbmd1YWdlc1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTGFuZ3VhZ2VzVnNWYWxpZGF0aW9uLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIERldmljZUNvbXBvbmVudFByb2R1Y3Rpb25TcGVjaWZpY2F0aW9uIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIERldmljZUNvbXBvbmVudFByb2R1Y3Rpb25TcGVjaWZpY2F0aW9uQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNwZWNpZmljYXRpb24gdHlwZSwgc3VjaCBhcywgc2VyaWFsIG51bWJlciwgcGFydCBudW1iZXIsIGhhcmR3YXJlIHJldmlzaW9uLCBzb2Z0d2FyZSByZXZpc2lvbiwgZXRjLlxyXG4gICAqL1xyXG4gIHNwZWNUeXBlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgaW50ZXJuYWwgY29tcG9uZW50IHVuaXF1ZSBpZGVudGlmaWNhdGlvbi4gVGhpcyBpcyBhIHByb3Zpc2lvbiBmb3IgbWFudWZhY3R1cmUgc3BlY2lmaWMgc3RhbmRhcmQgY29tcG9uZW50cyB1c2luZyBhIHByaXZhdGUgT0lELiAxMTA3My0xMDEwMSBoYXMgYSBwYXJ0aXRpb24gZm9yIHByaXZhdGUgT0lEIHNlbWFudGljIHRoYXQgdGhlIG1hbnVmYWN0dXJlciBjYW4gbWFrZSB1c2Ugb2YuXHJcbiAgICovXHJcbiAgY29tcG9uZW50SWQ/OiBmaGlyLklkZW50aWZpZXJBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcHJpbnRhYmxlIHN0cmluZyBkZWZpbmluZyB0aGUgY29tcG9uZW50LlxyXG4gICAqL1xyXG4gIHByb2R1Y3Rpb25TcGVjPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IERldmljZUNvbXBvbmVudC5wcm9kdWN0aW9uU3BlY2lmaWNhdGlvbi5wcm9kdWN0aW9uU3BlY1xyXG4gICAqL1xyXG4gIF9wcm9kdWN0aW9uU3BlYz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgcHJvZHVjdGlvbiBzcGVjaWZpY2F0aW9uIHN1Y2ggYXMgY29tcG9uZW50IHJldmlzaW9uLCBzZXJpYWwgbnVtYmVyLCBldGMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRGV2aWNlQ29tcG9uZW50UHJvZHVjdGlvblNwZWNpZmljYXRpb24gZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdEZXZpY2VDb21wb25lbnRQcm9kdWN0aW9uU3BlY2lmaWNhdGlvbic7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNwZWNpZmljYXRpb24gdHlwZSwgc3VjaCBhcywgc2VyaWFsIG51bWJlciwgcGFydCBudW1iZXIsIGhhcmR3YXJlIHJldmlzaW9uLCBzb2Z0d2FyZSByZXZpc2lvbiwgZXRjLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzcGVjVHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgaW50ZXJuYWwgY29tcG9uZW50IHVuaXF1ZSBpZGVudGlmaWNhdGlvbi4gVGhpcyBpcyBhIHByb3Zpc2lvbiBmb3IgbWFudWZhY3R1cmUgc3BlY2lmaWMgc3RhbmRhcmQgY29tcG9uZW50cyB1c2luZyBhIHByaXZhdGUgT0lELiAxMTA3My0xMDEwMSBoYXMgYSBwYXJ0aXRpb24gZm9yIHByaXZhdGUgT0lEIHNlbWFudGljIHRoYXQgdGhlIG1hbnVmYWN0dXJlciBjYW4gbWFrZSB1c2Ugb2YuXHJcbiAgICovXHJcbiAgcHVibGljIGNvbXBvbmVudElkPzogZmhpci5JZGVudGlmaWVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcHJpbnRhYmxlIHN0cmluZyBkZWZpbmluZyB0aGUgY29tcG9uZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcm9kdWN0aW9uU3BlYz86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgRGV2aWNlQ29tcG9uZW50UHJvZHVjdGlvblNwZWNpZmljYXRpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxEZXZpY2VDb21wb25lbnRQcm9kdWN0aW9uU3BlY2lmaWNhdGlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydzcGVjVHlwZSddKSB7IHRoaXMuc3BlY1R5cGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnNwZWNUeXBlLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29tcG9uZW50SWQnXSkgeyB0aGlzLmNvbXBvbmVudElkID0gbmV3IGZoaXIuSWRlbnRpZmllcihzb3VyY2UuY29tcG9uZW50SWQsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydwcm9kdWN0aW9uU3BlYyddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5wcm9kdWN0aW9uU3BlYyA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UucHJvZHVjdGlvblNwZWN9LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3Byb2R1Y3Rpb25TcGVjJ10pIHtcclxuICAgICAgaWYgKHRoaXMucHJvZHVjdGlvblNwZWMpIHsgdGhpcy5wcm9kdWN0aW9uU3BlYy5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9wcm9kdWN0aW9uU3BlYyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnByb2R1Y3Rpb25TcGVjID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3Byb2R1Y3Rpb25TcGVjIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnRGV2aWNlQ29tcG9uZW50LnByb2R1Y3Rpb25TcGVjaWZpY2F0aW9uJyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnc3BlY1R5cGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2NvbXBvbmVudElkJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdwcm9kdWN0aW9uU3BlYycsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgRGV2aWNlQ29tcG9uZW50IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIERldmljZUNvbXBvbmVudEFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIkRldmljZUNvbXBvbmVudFwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbG9jYWxseSBhc3NpZ25lZCB1bmlxdWUgaWRlbnRpZmljYXRpb24gYnkgdGhlIHNvZnR3YXJlLiBGb3IgZXhhbXBsZTogaGFuZGxlIElELlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI6IGZoaXIuSWRlbnRpZmllckFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBEZXZpY2VDb21wb25lbnQudHlwZSBjYW4gYmUgcmVmZXJyZWQgdG8gZWl0aGVyIEdETU4gKG5vbWVuY2xhdHVyZSBzeXN0ZW0gc3VwcG9ydGVkIGJ5IEZEQSBHbG9iYWwgVURJIERhdGFiYXNlKSBvciBwcmVmZXJhYmxlIFJUTU1TIGNvZGluZyBzeXN0ZW0uXHJcbiAgICovXHJcbiAgdHlwZTogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRpbWVzdGFtcCBmb3IgdGhlIG1vc3QgcmVjZW50IHN5c3RlbSBjaGFuZ2Ugd2hpY2ggaW5jbHVkZXMgZGV2aWNlIGNvbmZpZ3VyYXRpb24gb3Igc2V0dGluZyBjaGFuZ2UuXHJcbiAgICovXHJcbiAgbGFzdFN5c3RlbUNoYW5nZT86IGZoaXIuRmhpckluc3RhbnR8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogRGV2aWNlQ29tcG9uZW50Lmxhc3RTeXN0ZW1DaGFuZ2VcclxuICAgKi9cclxuICBfbGFzdFN5c3RlbUNoYW5nZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGxpbmsgdG8gdGhlIHNvdXJjZSBEZXZpY2UgdGhhdCBjb250YWlucyBhZG1pbmlzdHJhdGl2ZSBkZXZpY2UgaW5mb3JtYXRpb24gc3VjaCBhcyBtYW51ZmFjdHVyZSwgc2VyaWFsIG51bWJlciwgZXRjLlxyXG4gICAqL1xyXG4gIHNvdXJjZT86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGxpbmsgdG8gdGhlIHBhcmVudCByZXNvdXJjZS4gRm9yIGV4YW1wbGU6IENoYW5uZWwgaXMgbGlua2VkIHRvIGl0cyBWTUQgcGFyZW50LlxyXG4gICAqL1xyXG4gIHBhcmVudD86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogT3BlcmF0aW9uYWxTdGF0dXMgZm9yIHRoZSBNRFMsIFZNRCwgb3IgQ2hhbm5lbCB3aWxsIGJlIGJvdW5kIHRvIGEgc3BlY2lmaWMgVmFsdWVTZXQgdGhhdCBpcyBkZWZpbmVkIGluIGl0cyBwcm9maWxlLlxyXG4gICAqL1xyXG4gIG9wZXJhdGlvbmFsU3RhdHVzPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXJhbWV0ZXIgZ3JvdXAgc3VwcG9ydGVkIGJ5IHRoZSBjdXJyZW50IGRldmljZSBjb21wb25lbnQgdGhhdCBpcyBiYXNlZCBvbiBzb21lIG5vbWVuY2xhdHVyZSwgZS5nLiBjYXJkaW92YXNjdWxhci5cclxuICAgKi9cclxuICBwYXJhbWV0ZXJHcm91cD86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBoeXNpY2FsIHByaW5jaXBsZSBvZiB0aGUgbWVhc3VyZW1lbnQuIEZvciBleGFtcGxlOiB0aGVybWFsLCBjaGVtaWNhbCwgYWNvdXN0aWNhbCwgZXRjLlxyXG4gICAqL1xyXG4gIG1lYXN1cmVtZW50UHJpbmNpcGxlPzogZmhpci5GaGlyQ29kZTxNZWFzdXJlbWVudFByaW5jaXBsZUNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBEZXZpY2VDb21wb25lbnQubWVhc3VyZW1lbnRQcmluY2lwbGVcclxuICAgKi9cclxuICBfbWVhc3VyZW1lbnRQcmluY2lwbGU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwcm9kdWN0aW9uIHNwZWNpZmljYXRpb24gc3VjaCBhcyBjb21wb25lbnQgcmV2aXNpb24sIHNlcmlhbCBudW1iZXIsIGV0Yy5cclxuICAgKi9cclxuICBwcm9kdWN0aW9uU3BlY2lmaWNhdGlvbj86IGZoaXIuRGV2aWNlQ29tcG9uZW50UHJvZHVjdGlvblNwZWNpZmljYXRpb25BcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsYW5ndWFnZSBjb2RlIGZvciB0aGUgaHVtYW4tcmVhZGFibGUgdGV4dCBzdHJpbmcgcHJvZHVjZWQgYnkgdGhlIGRldmljZS4gVGhpcyBsYW5ndWFnZSBjb2RlIHdpbGwgZm9sbG93IHRoZSBJRVRGIGxhbmd1YWdlIHRhZy4gRXhhbXBsZTogZW4tVVMuXHJcbiAgICovXHJcbiAgbGFuZ3VhZ2VDb2RlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBjaGFyYWN0ZXJpc3RpY3MsIG9wZXJhdGlvbmFsIHN0YXR1cyBhbmQgY2FwYWJpbGl0aWVzIG9mIGEgbWVkaWNhbC1yZWxhdGVkIGNvbXBvbmVudCBvZiBhIG1lZGljYWwgZGV2aWNlLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIERldmljZUNvbXBvbmVudCBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnRGV2aWNlQ29tcG9uZW50JztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIkRldmljZUNvbXBvbmVudFwiO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsb2NhbGx5IGFzc2lnbmVkIHVuaXF1ZSBpZGVudGlmaWNhdGlvbiBieSB0aGUgc29mdHdhcmUuIEZvciBleGFtcGxlOiBoYW5kbGUgSUQuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI6IGZoaXIuSWRlbnRpZmllcnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIERldmljZUNvbXBvbmVudC50eXBlIGNhbiBiZSByZWZlcnJlZCB0byBlaXRoZXIgR0RNTiAobm9tZW5jbGF0dXJlIHN5c3RlbSBzdXBwb3J0ZWQgYnkgRkRBIEdsb2JhbCBVREkgRGF0YWJhc2UpIG9yIHByZWZlcmFibGUgUlRNTVMgY29kaW5nIHN5c3RlbS5cclxuICAgKi9cclxuICBwdWJsaWMgdHlwZTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgdGltZXN0YW1wIGZvciB0aGUgbW9zdCByZWNlbnQgc3lzdGVtIGNoYW5nZSB3aGljaCBpbmNsdWRlcyBkZXZpY2UgY29uZmlndXJhdGlvbiBvciBzZXR0aW5nIGNoYW5nZS5cclxuICAgKi9cclxuICBwdWJsaWMgbGFzdFN5c3RlbUNoYW5nZT86IGZoaXIuRmhpckluc3RhbnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsaW5rIHRvIHRoZSBzb3VyY2UgRGV2aWNlIHRoYXQgY29udGFpbnMgYWRtaW5pc3RyYXRpdmUgZGV2aWNlIGluZm9ybWF0aW9uIHN1Y2ggYXMgbWFudWZhY3R1cmUsIHNlcmlhbCBudW1iZXIsIGV0Yy5cclxuICAgKi9cclxuICBwdWJsaWMgc291cmNlPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsaW5rIHRvIHRoZSBwYXJlbnQgcmVzb3VyY2UuIEZvciBleGFtcGxlOiBDaGFubmVsIGlzIGxpbmtlZCB0byBpdHMgVk1EIHBhcmVudC5cclxuICAgKi9cclxuICBwdWJsaWMgcGFyZW50PzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE9wZXJhdGlvbmFsU3RhdHVzIGZvciB0aGUgTURTLCBWTUQsIG9yIENoYW5uZWwgd2lsbCBiZSBib3VuZCB0byBhIHNwZWNpZmljIFZhbHVlU2V0IHRoYXQgaXMgZGVmaW5lZCBpbiBpdHMgcHJvZmlsZS5cclxuICAgKi9cclxuICBwdWJsaWMgb3BlcmF0aW9uYWxTdGF0dXM6IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogVGhlIHBhcmFtZXRlciBncm91cCBzdXBwb3J0ZWQgYnkgdGhlIGN1cnJlbnQgZGV2aWNlIGNvbXBvbmVudCB0aGF0IGlzIGJhc2VkIG9uIHNvbWUgbm9tZW5jbGF0dXJlLCBlLmcuIGNhcmRpb3Zhc2N1bGFyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXJhbWV0ZXJHcm91cD86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcGh5c2ljYWwgcHJpbmNpcGxlIG9mIHRoZSBtZWFzdXJlbWVudC4gRm9yIGV4YW1wbGU6IHRoZXJtYWwsIGNoZW1pY2FsLCBhY291c3RpY2FsLCBldGMuXHJcbiAgICovXHJcbiAgcHVibGljIG1lYXN1cmVtZW50UHJpbmNpcGxlPzogZmhpci5GaGlyQ29kZTxNZWFzdXJlbWVudFByaW5jaXBsZUNvZGVUeXBlPnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHByb2R1Y3Rpb24gc3BlY2lmaWNhdGlvbiBzdWNoIGFzIGNvbXBvbmVudCByZXZpc2lvbiwgc2VyaWFsIG51bWJlciwgZXRjLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcm9kdWN0aW9uU3BlY2lmaWNhdGlvbjogZmhpci5EZXZpY2VDb21wb25lbnRQcm9kdWN0aW9uU3BlY2lmaWNhdGlvbltdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsYW5ndWFnZSBjb2RlIGZvciB0aGUgaHVtYW4tcmVhZGFibGUgdGV4dCBzdHJpbmcgcHJvZHVjZWQgYnkgdGhlIGRldmljZS4gVGhpcyBsYW5ndWFnZSBjb2RlIHdpbGwgZm9sbG93IHRoZSBJRVRGIGxhbmd1YWdlIHRhZy4gRXhhbXBsZTogZW4tVVMuXHJcbiAgICovXHJcbiAgcHVibGljIGxhbmd1YWdlQ29kZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBEZXZpY2VDb21wb25lbnQgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxEZXZpY2VDb21wb25lbnRBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnRGV2aWNlQ29tcG9uZW50JztcclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBuZXcgZmhpci5JZGVudGlmaWVyKHNvdXJjZS5pZGVudGlmaWVyLCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaWRlbnRpZmllciA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3R5cGUnXSkgeyB0aGlzLnR5cGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnR5cGUsIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy50eXBlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbGFzdFN5c3RlbUNoYW5nZSddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5sYXN0U3lzdGVtQ2hhbmdlID0gbmV3IGZoaXIuRmhpckluc3RhbnQoe3ZhbHVlOiBzb3VyY2UubGFzdFN5c3RlbUNoYW5nZX0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfbGFzdFN5c3RlbUNoYW5nZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLmxhc3RTeXN0ZW1DaGFuZ2UpIHsgdGhpcy5sYXN0U3lzdGVtQ2hhbmdlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2xhc3RTeXN0ZW1DaGFuZ2UhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5sYXN0U3lzdGVtQ2hhbmdlID0gbmV3IGZoaXIuRmhpckluc3RhbnQoc291cmNlLl9sYXN0U3lzdGVtQ2hhbmdlIGFzIFBhcnRpYWw8Zmhpci5GaGlySW5zdGFudEFyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnc291cmNlJ10pIHsgdGhpcy5zb3VyY2UgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnNvdXJjZSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3BhcmVudCddKSB7IHRoaXMucGFyZW50ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5wYXJlbnQsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydvcGVyYXRpb25hbFN0YXR1cyddKSB7IHRoaXMub3BlcmF0aW9uYWxTdGF0dXMgPSBzb3VyY2Uub3BlcmF0aW9uYWxTdGF0dXMubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5vcGVyYXRpb25hbFN0YXR1cyA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwYXJhbWV0ZXJHcm91cCddKSB7IHRoaXMucGFyYW1ldGVyR3JvdXAgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnBhcmFtZXRlckdyb3VwLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbWVhc3VyZW1lbnRQcmluY2lwbGUnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMubWVhc3VyZW1lbnRQcmluY2lwbGUgPSBuZXcgZmhpci5GaGlyQ29kZTxNZWFzdXJlbWVudFByaW5jaXBsZUNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5tZWFzdXJlbWVudFByaW5jaXBsZX0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfbWVhc3VyZW1lbnRQcmluY2lwbGUnXSkge1xyXG4gICAgICBpZiAodGhpcy5tZWFzdXJlbWVudFByaW5jaXBsZSkgeyB0aGlzLm1lYXN1cmVtZW50UHJpbmNpcGxlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX21lYXN1cmVtZW50UHJpbmNpcGxlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubWVhc3VyZW1lbnRQcmluY2lwbGUgPSBuZXcgZmhpci5GaGlyQ29kZTxNZWFzdXJlbWVudFByaW5jaXBsZUNvZGVUeXBlPihzb3VyY2UuX21lYXN1cmVtZW50UHJpbmNpcGxlIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydwcm9kdWN0aW9uU3BlY2lmaWNhdGlvbiddKSB7IHRoaXMucHJvZHVjdGlvblNwZWNpZmljYXRpb24gPSBzb3VyY2UucHJvZHVjdGlvblNwZWNpZmljYXRpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5EZXZpY2VDb21wb25lbnRQcm9kdWN0aW9uU3BlY2lmaWNhdGlvbih4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnByb2R1Y3Rpb25TcGVjaWZpY2F0aW9uID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2xhbmd1YWdlQ29kZSddKSB7IHRoaXMubGFuZ3VhZ2VDb2RlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5sYW5ndWFnZUNvZGUsIG9wdGlvbnMpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnRGV2aWNlQ29tcG9uZW50JyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygnaWRlbnRpZmllcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygndHlwZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnbGFzdFN5c3RlbUNoYW5nZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnc291cmNlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdwYXJlbnQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ29wZXJhdGlvbmFsU3RhdHVzJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdwYXJhbWV0ZXJHcm91cCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPU1YoJ21lYXN1cmVtZW50UHJpbmNpcGxlJyxleHAsJ01lYXN1cmVtZW50UHJpbmNpcGxlJyxNZWFzdXJlbWVudFByaW5jaXBsZVZzVmFsaWRhdGlvbiwncicpKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdwcm9kdWN0aW9uU3BlY2lmaWNhdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnbGFuZ3VhZ2VDb2RlJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbiJdfQ==