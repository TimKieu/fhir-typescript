// <auto-generated/>
// Contents of: hl7.fhir.r3.core version: 3.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: DocumentManifest
import * as fhir from '../fhir.js';
// @ts-ignore
import { DocumentReferenceStatusVsValidation } from '../fhirValueSets/DocumentReferenceStatusVsValidation.js';
/**
 * The list of Documents included in the manifest.
 */
export class DocumentManifestContent extends fhir.BackboneElement {
    /**
     * Default constructor for DocumentManifestContent - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['p']) {
            this.p = source.p;
        }
        else if (source['pAttachment']) {
            this.p = new fhir.Attachment(source.pAttachment, options);
        }
        else if (source['pReference']) {
            this.p = new fhir.Reference(source.pReference, options);
        }
        else {
            this.p = null;
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'DocumentManifest.content';
        }
        iss.push(...this.vRS('p', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DocumentManifestContent._fts_dataType = 'DocumentManifestContent';
/**
 * Internal flag to properly serialize choice-type element DocumentManifest.content.p[x]
 */
DocumentManifestContent._fts_pIsChoice = true;
/**
 * May be identifiers or resources that caused the DocumentManifest to be created.
 */
export class DocumentManifestRelated extends fhir.BackboneElement {
    /**
     * Default constructor for DocumentManifestRelated - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier, options);
        }
        if (source['ref']) {
            this.ref = new fhir.Reference(source.ref, options);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'DocumentManifest.related';
        }
        iss.push(...this.vOS('identifier', exp));
        iss.push(...this.vOS('ref', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DocumentManifestRelated._fts_dataType = 'DocumentManifestRelated';
/**
 * A collection of documents compiled for a purpose together with metadata that applies to the collection.
 */
export class DocumentManifest extends fhir.DomainResource {
    /**
     * Default constructor for DocumentManifest - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'DocumentManifest';
        if (source['masterIdentifier']) {
            this.masterIdentifier = new fhir.Identifier(source.masterIdentifier, options);
        }
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x, options));
        }
        else {
            this.identifier = [];
        }
        if (source['status'] !== undefined) {
            this.status = new fhir.FhirCode({ value: source.status }, options);
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status, options);
            }
        }
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type, options);
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject, options);
        }
        if (source['created'] !== undefined) {
            this.created = new fhir.FhirDateTime({ value: source.created }, options);
        }
        if (source['_created']) {
            if (this.created) {
                this.created.addExtendedProperties(source._created);
            }
            else {
                this.created = new fhir.FhirDateTime(source._created, options);
            }
        }
        if (source['author']) {
            this.author = source.author.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.author = [];
        }
        if (source['recipient']) {
            this.recipient = source.recipient.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.recipient = [];
        }
        if (source['source'] !== undefined) {
            this.source = new fhir.FhirUri({ value: source.source }, options);
        }
        if (source['_source']) {
            if (this.source) {
                this.source.addExtendedProperties(source._source);
            }
            else {
                this.source = new fhir.FhirUri(source._source, options);
            }
        }
        if (source['description'] !== undefined) {
            this.description = new fhir.FhirString({ value: source.description }, options);
        }
        if (source['_description']) {
            if (this.description) {
                this.description.addExtendedProperties(source._description);
            }
            else {
                this.description = new fhir.FhirString(source._description, options);
            }
        }
        if (source['content']) {
            this.content = source.content.map((x) => new fhir.DocumentManifestContent(x, options));
        }
        else {
            this.content = [];
        }
        if (source['related']) {
            this.related = source.related.map((x) => new fhir.DocumentManifestRelated(x, options));
        }
        else {
            this.related = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'DocumentManifest';
        }
        iss.push(...this.vOS('masterIdentifier', exp));
        iss.push(...this.vOA('identifier', exp));
        iss.push(...this.vRSV('status', exp, 'DocumentReferenceStatus', DocumentReferenceStatusVsValidation, 'r'));
        iss.push(...this.vOS('type', exp));
        iss.push(...this.vOS('subject', exp));
        iss.push(...this.vOS('created', exp));
        iss.push(...this.vOA('author', exp));
        iss.push(...this.vOA('recipient', exp));
        iss.push(...this.vOS('source', exp));
        iss.push(...this.vOS('description', exp));
        iss.push(...this.vRA('content', exp));
        iss.push(...this.vOA('related', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DocumentManifest._fts_dataType = 'DocumentManifest';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRG9jdW1lbnRNYW5pZmVzdC5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvRG9jdW1lbnRNYW5pZmVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQyxrQ0FBa0M7QUFFbEMsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFJbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSxtQ0FBbUMsRUFBRSxNQUFNLHlEQUF5RCxDQUFDO0FBdUI5Rzs7R0FFRztBQUNILE1BQU0sT0FBTyx1QkFBd0IsU0FBUSxJQUFJLENBQUMsZUFBZTtJQWEvRDs7T0FFRztJQUNILFlBQVksU0FBOEMsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDcEcsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQ2xDLElBQUksTUFBTSxDQUFDLGFBQWEsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLFdBQVcsRUFBRSxPQUFPLENBQUMsQ0FBQztTQUFFO2FBQ3pGLElBQUksTUFBTSxDQUFDLFlBQVksQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxPQUFPLENBQUMsQ0FBQztTQUFFO2FBQ3RGO1lBQUUsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUM7U0FBRTtJQUN6QixDQUFDO0lBQ0Q7O09BRUc7SUFDYSxpQkFBaUIsQ0FBQyxNQUFhLEVBQUU7UUFDL0MsSUFBSSxHQUFHLEdBQW1CLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLENBQUMs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RyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDckMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDckMsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDOztBQXBIRDs7R0FFRztBQUM2Qiw4QkFBYSxHQUFVLGtCQUFrQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnIzLmNvcmUgdmVyc2lvbjogMy4wLjJcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBEb2N1bWVudE1hbmlmZXN0XHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEb2N1bWVudFJlZmVyZW5jZVN0YXR1c0NvZGVzLCAgRG9jdW1lbnRSZWZlcmVuY2VTdGF0dXNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRG9jdW1lbnRSZWZlcmVuY2VTdGF0dXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRG9jdW1lbnRSZWZlcmVuY2VTdGF0dXNWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0RvY3VtZW50UmVmZXJlbmNlU3RhdHVzVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDODBEb2NUeXBlQ29kZXMsICBDODBEb2NUeXBlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0M4MERvY1R5cGVDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQzgwRG9jVHlwZVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQzgwRG9jVHlwZVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBEb2N1bWVudE1hbmlmZXN0Q29udGVudCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBEb2N1bWVudE1hbmlmZXN0Q29udGVudEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpbnRlbmRlZCBmb2N1cyBvZiB0aGUgRG9jdW1lbnRNYW5pZmVzdCBpcyBmb3IgdGhlIHJlZmVyZW5jZSB0byB0YXJnZXQgZWl0aGVyIERvY3VtZW50UmVmZXJlbmNlIG9yIE1lZGlhIFJlc291cmNlcywgYW5kIG1vc3QgaW1wbGVtZW50YXRpb24gZ3VpZGVzIHdpbGwgcmVzdHJpY3QgdG8gdGhlc2UgcmVzb3VyY2VzLiBUaGUgcmVmZXJlbmNlIGlzIHRvIFwiQW55XCIgdG8gc3VwcG9ydCBFTiAxMzYwNiB1c2FnZSwgd2hlcmUgYW4gZXh0cmFjdCBpcyBEb2N1bWVudE1hbmlmZXN0IHRoYXQgcmVmZXJlbmNlcyAgTGlzdCBhbmQgQ29tcG9zaXRpb24gcmVzb3VyY2VzLlxyXG4gICAqL1xyXG4gIHA/OiBmaGlyLkF0dGFjaG1lbnR8Zmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpbnRlbmRlZCBmb2N1cyBvZiB0aGUgRG9jdW1lbnRNYW5pZmVzdCBpcyBmb3IgdGhlIHJlZmVyZW5jZSB0byB0YXJnZXQgZWl0aGVyIERvY3VtZW50UmVmZXJlbmNlIG9yIE1lZGlhIFJlc291cmNlcywgYW5kIG1vc3QgaW1wbGVtZW50YXRpb24gZ3VpZGVzIHdpbGwgcmVzdHJpY3QgdG8gdGhlc2UgcmVzb3VyY2VzLiBUaGUgcmVmZXJlbmNlIGlzIHRvIFwiQW55XCIgdG8gc3VwcG9ydCBFTiAxMzYwNiB1c2FnZSwgd2hlcmUgYW4gZXh0cmFjdCBpcyBEb2N1bWVudE1hbmlmZXN0IHRoYXQgcmVmZXJlbmNlcyAgTGlzdCBhbmQgQ29tcG9zaXRpb24gcmVzb3VyY2VzLlxyXG4gICAqL1xyXG4gIHBBdHRhY2htZW50PzogZmhpci5BdHRhY2htZW50QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGludGVuZGVkIGZvY3VzIG9mIHRoZSBEb2N1bWVudE1hbmlmZXN0IGlzIGZvciB0aGUgcmVmZXJlbmNlIHRvIHRhcmdldCBlaXRoZXIgRG9jdW1lbnRSZWZlcmVuY2Ugb3IgTWVkaWEgUmVzb3VyY2VzLCBhbmQgbW9zdCBpbXBsZW1lbnRhdGlvbiBndWlkZXMgd2lsbCByZXN0cmljdCB0byB0aGVzZSByZXNvdXJjZXMuIFRoZSByZWZlcmVuY2UgaXMgdG8gXCJBbnlcIiB0byBzdXBwb3J0IEVOIDEzNjA2IHVzYWdlLCB3aGVyZSBhbiBleHRyYWN0IGlzIERvY3VtZW50TWFuaWZlc3QgdGhhdCByZWZlcmVuY2VzICBMaXN0IGFuZCBDb21wb3NpdGlvbiByZXNvdXJjZXMuXHJcbiAgICovXHJcbiAgcFJlZmVyZW5jZT86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgbGlzdCBvZiBEb2N1bWVudHMgaW5jbHVkZWQgaW4gdGhlIG1hbmlmZXN0LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIERvY3VtZW50TWFuaWZlc3RDb250ZW50IGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnRG9jdW1lbnRNYW5pZmVzdENvbnRlbnQnO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpbnRlbmRlZCBmb2N1cyBvZiB0aGUgRG9jdW1lbnRNYW5pZmVzdCBpcyBmb3IgdGhlIHJlZmVyZW5jZSB0byB0YXJnZXQgZWl0aGVyIERvY3VtZW50UmVmZXJlbmNlIG9yIE1lZGlhIFJlc291cmNlcywgYW5kIG1vc3QgaW1wbGVtZW50YXRpb24gZ3VpZGVzIHdpbGwgcmVzdHJpY3QgdG8gdGhlc2UgcmVzb3VyY2VzLiBUaGUgcmVmZXJlbmNlIGlzIHRvIFwiQW55XCIgdG8gc3VwcG9ydCBFTiAxMzYwNiB1c2FnZSwgd2hlcmUgYW4gZXh0cmFjdCBpcyBEb2N1bWVudE1hbmlmZXN0IHRoYXQgcmVmZXJlbmNlcyAgTGlzdCBhbmQgQ29tcG9zaXRpb24gcmVzb3VyY2VzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwOiAoZmhpci5BdHRhY2htZW50fGZoaXIuUmVmZXJlbmNlKXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgRG9jdW1lbnRNYW5pZmVzdC5jb250ZW50LnBbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfcElzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIERvY3VtZW50TWFuaWZlc3RDb250ZW50IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8RG9jdW1lbnRNYW5pZmVzdENvbnRlbnRBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsncCddKSB7IHRoaXMucCA9IHNvdXJjZS5wOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3BBdHRhY2htZW50J10pIHsgdGhpcy5wID0gbmV3IGZoaXIuQXR0YWNobWVudChzb3VyY2UucEF0dGFjaG1lbnQsIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3BSZWZlcmVuY2UnXSkgeyB0aGlzLnAgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnBSZWZlcmVuY2UsIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wID0gbnVsbDsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0RvY3VtZW50TWFuaWZlc3QuY29udGVudCcgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ3AnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIERvY3VtZW50TWFuaWZlc3RSZWxhdGVkIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIERvY3VtZW50TWFuaWZlc3RSZWxhdGVkQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogSWYgYm90aCBpZGVudGlmaWVyIGFuZCByZWYgZWxlbWVudHMgYXJlIHByZXNlbnQgdGhleSBzaGFsbCByZWZlciB0byB0aGUgc2FtZSB0aGluZy5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgYm90aCBpZGVudGlmaWVyIGFuZCByZWYgZWxlbWVudHMgYXJlIHByZXNlbnQgdGhleSBzaGFsbCByZWZlciB0byB0aGUgc2FtZSB0aGluZy5cclxuICAgKi9cclxuICByZWY/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogTWF5IGJlIGlkZW50aWZpZXJzIG9yIHJlc291cmNlcyB0aGF0IGNhdXNlZCB0aGUgRG9jdW1lbnRNYW5pZmVzdCB0byBiZSBjcmVhdGVkLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIERvY3VtZW50TWFuaWZlc3RSZWxhdGVkIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnRG9jdW1lbnRNYW5pZmVzdFJlbGF0ZWQnO1xyXG4gIC8qKlxyXG4gICAqIElmIGJvdGggaWRlbnRpZmllciBhbmQgcmVmIGVsZW1lbnRzIGFyZSBwcmVzZW50IHRoZXkgc2hhbGwgcmVmZXIgdG8gdGhlIHNhbWUgdGhpbmcuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIGJvdGggaWRlbnRpZmllciBhbmQgcmVmIGVsZW1lbnRzIGFyZSBwcmVzZW50IHRoZXkgc2hhbGwgcmVmZXIgdG8gdGhlIHNhbWUgdGhpbmcuXHJcbiAgICovXHJcbiAgcHVibGljIHJlZj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBEb2N1bWVudE1hbmlmZXN0UmVsYXRlZCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPERvY3VtZW50TWFuaWZlc3RSZWxhdGVkQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBuZXcgZmhpci5JZGVudGlmaWVyKHNvdXJjZS5pZGVudGlmaWVyLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVmJ10pIHsgdGhpcy5yZWYgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnJlZiwgb3B0aW9ucyk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdEb2N1bWVudE1hbmlmZXN0LnJlbGF0ZWQnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdpZGVudGlmaWVyJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdyZWYnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIERvY3VtZW50TWFuaWZlc3QgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgRG9jdW1lbnRNYW5pZmVzdEFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIkRvY3VtZW50TWFuaWZlc3RcInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBzaW5nbGUgaWRlbnRpZmllciB0aGF0IHVuaXF1ZWx5IGlkZW50aWZpZXMgdGhpcyBtYW5pZmVzdC4gUHJpbmNpcGFsbHkgdXNlZCB0byByZWZlciB0byB0aGUgbWFuaWZlc3QgaW4gbm9uLUZISVIgY29udGV4dHMuXHJcbiAgICovXHJcbiAgbWFzdGVySWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE90aGVyIGlkZW50aWZpZXJzIGFzc29jaWF0ZWQgd2l0aCB0aGUgZG9jdW1lbnQgbWFuaWZlc3QsIGluY2x1ZGluZyB2ZXJzaW9uIGluZGVwZW5kZW50ICBpZGVudGlmaWVycy5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIGJlY2F1c2UgdGhlIHN0YXR1cyBjb250YWlucyB0aGUgY29kZXMgdGhhdCBtYXJrIHRoZSBtYW5pZmVzdCBhcyBub3QgY3VycmVudGx5IHZhbGlkLlxyXG4gICAqL1xyXG4gIHN0YXR1czogZmhpci5GaGlyQ29kZTxEb2N1bWVudFJlZmVyZW5jZVN0YXR1c0NvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBEb2N1bWVudE1hbmlmZXN0LnN0YXR1c1xyXG4gICAqL1xyXG4gIF9zdGF0dXM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFNwZWNpZmllcyB0aGUga2luZCBvZiB0aGlzIHNldCBvZiBkb2N1bWVudHMgKGUuZy4gUGF0aWVudCBTdW1tYXJ5LCBEaXNjaGFyZ2UgU3VtbWFyeSwgUHJlc2NyaXB0aW9uLCBldGMuKS4gVGhlIHR5cGUgb2YgYSBzZXQgb2YgZG9jdW1lbnRzIG1heSBiZSB0aGUgc2FtZSBhcyBvbmUgb2YgdGhlIGRvY3VtZW50cyBpbiBpdCAtIGVzcGVjaWFsbHkgaWYgdGhlcmUgaXMgb25seSBvbmUgLSBidXQgaXQgbWF5IGJlIHdpZGVyLlxyXG4gICAqL1xyXG4gIHR5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFdobyBvciB3aGF0IHRoZSBzZXQgb2YgZG9jdW1lbnRzIGlzIGFib3V0LiBUaGUgZG9jdW1lbnRzIGNhbiBiZSBhYm91dCBhIHBlcnNvbiwgKHBhdGllbnQgb3IgaGVhbHRoY2FyZSBwcmFjdGl0aW9uZXIpLCBhIGRldmljZSAoaS5lLiBtYWNoaW5lKSBvciBldmVuIGEgZ3JvdXAgb2Ygc3ViamVjdHMgKHN1Y2ggYXMgYSBkb2N1bWVudCBhYm91dCBhIGhlcmQgb2YgZmFybSBhbmltYWxzLCBvciBhIHNldCBvZiBwYXRpZW50cyB0aGF0IHNoYXJlIGEgY29tbW9uIGV4cG9zdXJlKS4gSWYgdGhlIGRvY3VtZW50cyBjcm9zcyBtb3JlIHRoYW4gb25lIHN1YmplY3QsIHRoZW4gbW9yZSB0aGFuIG9uZSBzdWJqZWN0IGlzIGFsbG93ZWQgaGVyZSAodW51c3VhbCB1c2UgY2FzZSkuXHJcbiAgICovXHJcbiAgc3ViamVjdD86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ3JlYXRpb24gdGltZSBpcyB1c2VkIGZvciB0cmFja2luZywgb3JnYW5pemluZyB2ZXJzaW9ucyBhbmQgc2VhcmNoaW5nLiBUaGlzIGlzIHRoZSBjcmVhdGlvbiB0aW1lIG9mIHRoZSBkb2N1bWVudCBzZXQsIG5vdCB0aGUgZG9jdW1lbnRzIG9uIHdoaWNoIGl0IGlzIGJhc2VkLlxyXG4gICAqL1xyXG4gIGNyZWF0ZWQ/OiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBEb2N1bWVudE1hbmlmZXN0LmNyZWF0ZWRcclxuICAgKi9cclxuICBfY3JlYXRlZD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogTm90IG5lY2Vzc2FyaWx5IHdobyBkaWQgdGhlIGFjdHVhbCBkYXRhIGVudHJ5IChpLmUuIHR5cGlzdCkgb3Igd2hvIHdhcyB0aGUgc291cmNlIChpbmZvcm1hbnQpLlxyXG4gICAqL1xyXG4gIGF1dGhvcj86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBIb3cgdGhlIHJlY2lwaWVudCByZWNlaXZlcyB0aGUgZG9jdW1lbnQgc2V0IG9yIGlzIG5vdGlmaWVkIG9mIGl0IGlzIHVwIHRvIHRoZSBpbXBsZW1lbnRhdGlvbi4gVGhpcyBlbGVtZW50IGlzIGp1c3QgYSBzdGF0ZW1lbnQgb2YgaW50ZW50LiBJZiB0aGUgcmVjaXBpZW50IGlzIGEgcGVyc29uLCBhbmQgaXQgaXMgbm90IGtub3duIHdoZXRoZXIgdGhlIHBlcnNvbiBpcyBhIHBhdGllbnQgb3IgYSBwcmFjdGl0aW9uZXIsIFJlbGF0ZWRQZXJzb24gd291bGQgYmUgdGhlIGRlZmF1bHQgY2hvaWNlLlxyXG4gICAqL1xyXG4gIHJlY2lwaWVudD86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHRoZSBzb3VyY2Ugc3lzdGVtLCBhcHBsaWNhdGlvbiwgb3Igc29mdHdhcmUgdGhhdCBwcm9kdWNlZCB0aGUgZG9jdW1lbnQgbWFuaWZlc3QuXHJcbiAgICovXHJcbiAgc291cmNlPzogZmhpci5GaGlyVXJpfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IERvY3VtZW50TWFuaWZlc3Quc291cmNlXHJcbiAgICovXHJcbiAgX3NvdXJjZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogV2hhdCB0aGUgZG9jdW1lbnQgaXMgYWJvdXQsIHJhdGhlciB0aGFuIGEgdGVyc2Ugc3VtbWFyeSBvZiB0aGUgZG9jdW1lbnQuIEl0IGlzIGNvbW1vbmx5IHRoZSBjYXNlIHRoYXQgcmVjb3JkcyBkbyBub3QgaGF2ZSBhIHRpdGxlIGFuZCBhcmUgY29sbGVjdGl2ZWx5IHJlZmVycmVkIHRvIGJ5IHRoZSBkaXNwbGF5IG5hbWUgb2YgUmVjb3JkIGNvZGUgKGUuZy4gYSBcImNvbnN1bHRhdGlvblwiIG9yIFwicHJvZ3Jlc3Mgbm90ZVwiKS5cclxuICAgKi9cclxuICBkZXNjcmlwdGlvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBEb2N1bWVudE1hbmlmZXN0LmRlc2NyaXB0aW9uXHJcbiAgICovXHJcbiAgX2Rlc2NyaXB0aW9uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgbGlzdCBvZiBEb2N1bWVudHMgaW5jbHVkZWQgaW4gdGhlIG1hbmlmZXN0LlxyXG4gICAqL1xyXG4gIGNvbnRlbnQ6IGZoaXIuRG9jdW1lbnRNYW5pZmVzdENvbnRlbnRBcmdzW118bnVsbDtcclxuICAvKipcclxuICAgKiBNYXkgYmUgaWRlbnRpZmllcnMgb3IgcmVzb3VyY2VzIHRoYXQgY2F1c2VkIHRoZSBEb2N1bWVudE1hbmlmZXN0IHRvIGJlIGNyZWF0ZWQuXHJcbiAgICovXHJcbiAgcmVsYXRlZD86IGZoaXIuRG9jdW1lbnRNYW5pZmVzdFJlbGF0ZWRBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQSBjb2xsZWN0aW9uIG9mIGRvY3VtZW50cyBjb21waWxlZCBmb3IgYSBwdXJwb3NlIHRvZ2V0aGVyIHdpdGggbWV0YWRhdGEgdGhhdCBhcHBsaWVzIHRvIHRoZSBjb2xsZWN0aW9uLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIERvY3VtZW50TWFuaWZlc3QgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0RvY3VtZW50TWFuaWZlc3QnO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNvdXJjZVR5cGU6IFwiRG9jdW1lbnRNYW5pZmVzdFwiO1xyXG4gIC8qKlxyXG4gICAqIEEgc2luZ2xlIGlkZW50aWZpZXIgdGhhdCB1bmlxdWVseSBpZGVudGlmaWVzIHRoaXMgbWFuaWZlc3QuIFByaW5jaXBhbGx5IHVzZWQgdG8gcmVmZXIgdG8gdGhlIG1hbmlmZXN0IGluIG5vbi1GSElSIGNvbnRleHRzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtYXN0ZXJJZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBPdGhlciBpZGVudGlmaWVycyBhc3NvY2lhdGVkIHdpdGggdGhlIGRvY3VtZW50IG1hbmlmZXN0LCBpbmNsdWRpbmcgdmVyc2lvbiBpbmRlcGVuZGVudCAgaWRlbnRpZmllcnMuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI6IGZoaXIuSWRlbnRpZmllcltdO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgYmVjYXVzZSB0aGUgc3RhdHVzIGNvbnRhaW5zIHRoZSBjb2RlcyB0aGF0IG1hcmsgdGhlIG1hbmlmZXN0IGFzIG5vdCBjdXJyZW50bHkgdmFsaWQuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1czogZmhpci5GaGlyQ29kZTxEb2N1bWVudFJlZmVyZW5jZVN0YXR1c0NvZGVUeXBlPnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFNwZWNpZmllcyB0aGUga2luZCBvZiB0aGlzIHNldCBvZiBkb2N1bWVudHMgKGUuZy4gUGF0aWVudCBTdW1tYXJ5LCBEaXNjaGFyZ2UgU3VtbWFyeSwgUHJlc2NyaXB0aW9uLCBldGMuKS4gVGhlIHR5cGUgb2YgYSBzZXQgb2YgZG9jdW1lbnRzIG1heSBiZSB0aGUgc2FtZSBhcyBvbmUgb2YgdGhlIGRvY3VtZW50cyBpbiBpdCAtIGVzcGVjaWFsbHkgaWYgdGhlcmUgaXMgb25seSBvbmUgLSBidXQgaXQgbWF5IGJlIHdpZGVyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0eXBlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFdobyBvciB3aGF0IHRoZSBzZXQgb2YgZG9jdW1lbnRzIGlzIGFib3V0LiBUaGUgZG9jdW1lbnRzIGNhbiBiZSBhYm91dCBhIHBlcnNvbiwgKHBhdGllbnQgb3IgaGVhbHRoY2FyZSBwcmFjdGl0aW9uZXIpLCBhIGRldmljZSAoaS5lLiBtYWNoaW5lKSBvciBldmVuIGEgZ3JvdXAgb2Ygc3ViamVjdHMgKHN1Y2ggYXMgYSBkb2N1bWVudCBhYm91dCBhIGhlcmQgb2YgZmFybSBhbmltYWxzLCBvciBhIHNldCBvZiBwYXRpZW50cyB0aGF0IHNoYXJlIGEgY29tbW9uIGV4cG9zdXJlKS4gSWYgdGhlIGRvY3VtZW50cyBjcm9zcyBtb3JlIHRoYW4gb25lIHN1YmplY3QsIHRoZW4gbW9yZSB0aGFuIG9uZSBzdWJqZWN0IGlzIGFsbG93ZWQgaGVyZSAodW51c3VhbCB1c2UgY2FzZSkuXHJcbiAgICovXHJcbiAgcHVibGljIHN1YmplY3Q/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ3JlYXRpb24gdGltZSBpcyB1c2VkIGZvciB0cmFja2luZywgb3JnYW5pemluZyB2ZXJzaW9ucyBhbmQgc2VhcmNoaW5nLiBUaGlzIGlzIHRoZSBjcmVhdGlvbiB0aW1lIG9mIHRoZSBkb2N1bWVudCBzZXQsIG5vdCB0aGUgZG9jdW1lbnRzIG9uIHdoaWNoIGl0IGlzIGJhc2VkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjcmVhdGVkPzogZmhpci5GaGlyRGF0ZVRpbWV8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE5vdCBuZWNlc3NhcmlseSB3aG8gZGlkIHRoZSBhY3R1YWwgZGF0YSBlbnRyeSAoaS5lLiB0eXBpc3QpIG9yIHdobyB3YXMgdGhlIHNvdXJjZSAoaW5mb3JtYW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgYXV0aG9yOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIEhvdyB0aGUgcmVjaXBpZW50IHJlY2VpdmVzIHRoZSBkb2N1bWVudCBzZXQgb3IgaXMgbm90aWZpZWQgb2YgaXQgaXMgdXAgdG8gdGhlIGltcGxlbWVudGF0aW9uLiBUaGlzIGVsZW1lbnQgaXMganVzdCBhIHN0YXRlbWVudCBvZiBpbnRlbnQuIElmIHRoZSByZWNpcGllbnQgaXMgYSBwZXJzb24sIGFuZCBpdCBpcyBub3Qga25vd24gd2hldGhlciB0aGUgcGVyc29uIGlzIGEgcGF0aWVudCBvciBhIHByYWN0aXRpb25lciwgUmVsYXRlZFBlcnNvbiB3b3VsZCBiZSB0aGUgZGVmYXVsdCBjaG9pY2UuXHJcbiAgICovXHJcbiAgcHVibGljIHJlY2lwaWVudDogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHRoZSBzb3VyY2Ugc3lzdGVtLCBhcHBsaWNhdGlvbiwgb3Igc29mdHdhcmUgdGhhdCBwcm9kdWNlZCB0aGUgZG9jdW1lbnQgbWFuaWZlc3QuXHJcbiAgICovXHJcbiAgcHVibGljIHNvdXJjZT86IGZoaXIuRmhpclVyaXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogV2hhdCB0aGUgZG9jdW1lbnQgaXMgYWJvdXQsIHJhdGhlciB0aGFuIGEgdGVyc2Ugc3VtbWFyeSBvZiB0aGUgZG9jdW1lbnQuIEl0IGlzIGNvbW1vbmx5IHRoZSBjYXNlIHRoYXQgcmVjb3JkcyBkbyBub3QgaGF2ZSBhIHRpdGxlIGFuZCBhcmUgY29sbGVjdGl2ZWx5IHJlZmVycmVkIHRvIGJ5IHRoZSBkaXNwbGF5IG5hbWUgb2YgUmVjb3JkIGNvZGUgKGUuZy4gYSBcImNvbnN1bHRhdGlvblwiIG9yIFwicHJvZ3Jlc3Mgbm90ZVwiKS5cclxuICAgKi9cclxuICBwdWJsaWMgZGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsaXN0IG9mIERvY3VtZW50cyBpbmNsdWRlZCBpbiB0aGUgbWFuaWZlc3QuXHJcbiAgICovXHJcbiAgcHVibGljIGNvbnRlbnQ6IGZoaXIuRG9jdW1lbnRNYW5pZmVzdENvbnRlbnRbXTtcclxuICAvKipcclxuICAgKiBNYXkgYmUgaWRlbnRpZmllcnMgb3IgcmVzb3VyY2VzIHRoYXQgY2F1c2VkIHRoZSBEb2N1bWVudE1hbmlmZXN0IHRvIGJlIGNyZWF0ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHJlbGF0ZWQ6IGZoaXIuRG9jdW1lbnRNYW5pZmVzdFJlbGF0ZWRbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBEb2N1bWVudE1hbmlmZXN0IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8RG9jdW1lbnRNYW5pZmVzdEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdEb2N1bWVudE1hbmlmZXN0JztcclxuICAgIGlmIChzb3VyY2VbJ21hc3RlcklkZW50aWZpZXInXSkgeyB0aGlzLm1hc3RlcklkZW50aWZpZXIgPSBuZXcgZmhpci5JZGVudGlmaWVyKHNvdXJjZS5tYXN0ZXJJZGVudGlmaWVyLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IHNvdXJjZS5pZGVudGlmaWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuSWRlbnRpZmllcih4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmlkZW50aWZpZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RhdHVzJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPERvY3VtZW50UmVmZXJlbmNlU3RhdHVzQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnN0YXR1c30sIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfc3RhdHVzJ10pIHtcclxuICAgICAgaWYgKHRoaXMuc3RhdHVzKSB7IHRoaXMuc3RhdHVzLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3N0YXR1cyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPERvY3VtZW50UmVmZXJlbmNlU3RhdHVzQ29kZVR5cGU+KHNvdXJjZS5fc3RhdHVzIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd0eXBlJ10pIHsgdGhpcy50eXBlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS50eXBlLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3ViamVjdCddKSB7IHRoaXMuc3ViamVjdCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2Uuc3ViamVjdCwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NyZWF0ZWQnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuY3JlYXRlZCA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5jcmVhdGVkfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19jcmVhdGVkJ10pIHtcclxuICAgICAgaWYgKHRoaXMuY3JlYXRlZCkgeyB0aGlzLmNyZWF0ZWQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fY3JlYXRlZCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmNyZWF0ZWQgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoc291cmNlLl9jcmVhdGVkIGFzIFBhcnRpYWw8Zmhpci5GaGlyRGF0ZVRpbWVBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2F1dGhvciddKSB7IHRoaXMuYXV0aG9yID0gc291cmNlLmF1dGhvci5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmF1dGhvciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydyZWNpcGllbnQnXSkgeyB0aGlzLnJlY2lwaWVudCA9IHNvdXJjZS5yZWNpcGllbnQubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZWNpcGllbnQgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc291cmNlJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnNvdXJjZSA9IG5ldyBmaGlyLkZoaXJVcmkoe3ZhbHVlOiBzb3VyY2Uuc291cmNlfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zb3VyY2UnXSkge1xyXG4gICAgICBpZiAodGhpcy5zb3VyY2UpIHsgdGhpcy5zb3VyY2UuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc291cmNlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc291cmNlID0gbmV3IGZoaXIuRmhpclVyaShzb3VyY2UuX3NvdXJjZSBhcyBQYXJ0aWFsPGZoaXIuRmhpclVyaUFyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGVzY3JpcHRpb24nXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuZGVzY3JpcHRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmRlc2NyaXB0aW9ufSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19kZXNjcmlwdGlvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLmRlc2NyaXB0aW9uKSB7IHRoaXMuZGVzY3JpcHRpb24uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZGVzY3JpcHRpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5kZXNjcmlwdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9kZXNjcmlwdGlvbiBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29udGVudCddKSB7IHRoaXMuY29udGVudCA9IHNvdXJjZS5jb250ZW50Lm1hcCgoeCkgPT4gbmV3IGZoaXIuRG9jdW1lbnRNYW5pZmVzdENvbnRlbnQoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb250ZW50ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3JlbGF0ZWQnXSkgeyB0aGlzLnJlbGF0ZWQgPSBzb3VyY2UucmVsYXRlZC5tYXAoKHgpID0+IG5ldyBmaGlyLkRvY3VtZW50TWFuaWZlc3RSZWxhdGVkKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVsYXRlZCA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnRG9jdW1lbnRNYW5pZmVzdCcgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ21hc3RlcklkZW50aWZpZXInLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2lkZW50aWZpZXInLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlNWKCdzdGF0dXMnLGV4cCwnRG9jdW1lbnRSZWZlcmVuY2VTdGF0dXMnLERvY3VtZW50UmVmZXJlbmNlU3RhdHVzVnNWYWxpZGF0aW9uLCdyJykpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3R5cGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3N1YmplY3QnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2NyZWF0ZWQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2F1dGhvcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgncmVjaXBpZW50JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdzb3VyY2UnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2Rlc2NyaXB0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJBKCdjb250ZW50JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdyZWxhdGVkJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbiJdfQ==