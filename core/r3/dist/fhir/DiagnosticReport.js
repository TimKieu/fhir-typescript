// <auto-generated/>
// Contents of: hl7.fhir.r3.core version: 3.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: DiagnosticReport
import * as fhir from '../fhir.js';
// @ts-ignore
import { DiagnosticReportStatusVsValidation } from '../fhirValueSets/DiagnosticReportStatusVsValidation.js';
/**
 * Indicates who or what participated in producing the report.
 */
export class DiagnosticReportPerformer extends fhir.BackboneElement {
    /**
     * Default constructor for DiagnosticReportPerformer - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['role']) {
            this.role = new fhir.CodeableConcept(source.role);
        }
        if (source['actor']) {
            this.actor = new fhir.Reference(source.actor);
        }
        else {
            this.actor = null;
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'DiagnosticReport.performer';
        }
        this.vOS('role', exp);
        this.vRS('actor', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DiagnosticReportPerformer._fts_dataType = 'DiagnosticReportPerformer';
/**
 * A list of key images associated with this report. The images are generally created during the diagnostic process, and may be directly of the patient, or of treated specimens (i.e. slides of interest).
 */
export class DiagnosticReportImage extends fhir.BackboneElement {
    /**
     * Default constructor for DiagnosticReportImage - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['comment']) {
            this.comment = new fhir.FhirString({ value: source.comment });
        }
        if (source['_comment']) {
            if (this.comment) {
                this.comment.addExtendedProperties(source._comment);
            }
            else {
                this.comment = new fhir.FhirString(source._comment);
            }
        }
        if (source['link']) {
            this.link = new fhir.Reference(source.link);
        }
        else {
            this.link = null;
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'DiagnosticReport.image';
        }
        this.vOS('comment', exp);
        this.vRS('link', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DiagnosticReportImage._fts_dataType = 'DiagnosticReportImage';
/**
 * The findings and interpretation of diagnostic  tests performed on patients, groups of patients, devices, and locations, and/or specimens derived from these. The report includes clinical context such as requesting and provider information, and some mix of atomic results, images, textual and coded interpretations, and formatted representation of diagnostic reports.
 */
export class DiagnosticReport extends fhir.DomainResource {
    /**
     * Default constructor for DiagnosticReport - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'DiagnosticReport';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['basedOn']) {
            this.basedOn = source.basedOn.map((x) => new fhir.Reference(x));
        }
        else {
            this.basedOn = [];
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['category']) {
            this.category = new fhir.CodeableConcept(source.category);
        }
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        else {
            this.code = null;
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject);
        }
        if (source['context']) {
            this.context = new fhir.Reference(source.context);
        }
        if (source['effective']) {
            this.effective = source.effective;
        }
        else if (source['effectiveDateTime']) {
            this.effective = new fhir.FhirDateTime({ value: source.effectiveDateTime });
        }
        else if (source['effectivePeriod']) {
            this.effective = new fhir.Period(source.effectivePeriod);
        }
        if (source['issued']) {
            this.issued = new fhir.FhirInstant({ value: source.issued });
        }
        if (source['_issued']) {
            if (this.issued) {
                this.issued.addExtendedProperties(source._issued);
            }
            else {
                this.issued = new fhir.FhirInstant(source._issued);
            }
        }
        if (source['performer']) {
            this.performer = source.performer.map((x) => new fhir.DiagnosticReportPerformer(x));
        }
        else {
            this.performer = [];
        }
        if (source['specimen']) {
            this.specimen = source.specimen.map((x) => new fhir.Reference(x));
        }
        else {
            this.specimen = [];
        }
        if (source['result']) {
            this.result = source.result.map((x) => new fhir.Reference(x));
        }
        else {
            this.result = [];
        }
        if (source['imagingStudy']) {
            this.imagingStudy = source.imagingStudy.map((x) => new fhir.Reference(x));
        }
        else {
            this.imagingStudy = [];
        }
        if (source['image']) {
            this.image = source.image.map((x) => new fhir.DiagnosticReportImage(x));
        }
        else {
            this.image = [];
        }
        if (source['conclusion']) {
            this.conclusion = new fhir.FhirString({ value: source.conclusion });
        }
        if (source['_conclusion']) {
            if (this.conclusion) {
                this.conclusion.addExtendedProperties(source._conclusion);
            }
            else {
                this.conclusion = new fhir.FhirString(source._conclusion);
            }
        }
        if (source['codedDiagnosis']) {
            this.codedDiagnosis = source.codedDiagnosis.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.codedDiagnosis = [];
        }
        if (source['presentedForm']) {
            this.presentedForm = source.presentedForm.map((x) => new fhir.Attachment(x));
        }
        else {
            this.presentedForm = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'DiagnosticReport';
        }
        this.vRS('resourceType', exp);
        this.vOA('identifier', exp);
        this.vOA('basedOn', exp);
        this.vRSV('status', exp, 'DiagnosticReportStatus', DiagnosticReportStatusVsValidation, 'r');
        this.vOS('category', exp);
        this.vRS('code', exp);
        this.vOS('subject', exp);
        this.vOS('context', exp);
        this.vOS('effective', exp);
        this.vOS('issued', exp);
        this.vOA('performer', exp);
        this.vOA('specimen', exp);
        this.vOA('result', exp);
        this.vOA('imagingStudy', exp);
        this.vOA('image', exp);
        this.vOS('conclusion', exp);
        this.vOA('codedDiagnosis', exp);
        this.vOA('presentedForm', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DiagnosticReport._fts_dataType = 'DiagnosticReport';
/**
 * Internal flag to properly serialize choice-type element DiagnosticReport.effective[x]
 */
DiagnosticReport._fts_effectiveIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGlhZ25vc3RpY1JlcG9ydC5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvRGlhZ25vc3RpY1JlcG9ydC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQyxrQ0FBa0M7QUFFbEMsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFRbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSxrQ0FBa0MsRUFBRSxNQUFNLHdEQUF3RCxDQUFDO0FBMkI1Rzs7R0FFRztBQUNILE1BQU0sT0FBTyx5QkFBMEIsU0FBUSxJQUFJLENBQUMsZUFBZTtJQWFqRTs7T0FFRztJQUNILFlBQVksU0FBZ0QsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDdEcsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUFFO1FBQzFFLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQUU7YUFDbEU7WUFBRSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztTQUFFO0lBQzdCLENBQUM7SUFDRDs7T0FFRztJQUNhLGlCQUFpQixDQUFDLE1BQWEsRUFBRTtRQUMvQyxJQUFJLE1BQU0sR0FBbUIsS0FBSyxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzFELElBQUksR0FBRyxLQUFLLEVBQUUsRUFBRTtZQUFFLEdBQUcsR0FBRyw0QkFBNEIsQ0FBQTtTQUFFO1FBQ3RELElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFDLEdB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QkFBZ0IsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUM5QixJQUFJLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUM3QixPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQTFKRDs7R0FFRztBQUM2Qiw4QkFBYSxHQUFVLGtCQUFrQixDQUFDO0FBcUMxRTs7R0FFRztBQUN1Qix1Q0FBc0IsR0FBUSxJQUFJLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjMuY29yZSB2ZXJzaW9uOiAzLjAuMlxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IERpYWdub3N0aWNSZXBvcnRcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFBlcmZvcm1lclJvbGVDb2RlcywgIFBlcmZvcm1lclJvbGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUGVyZm9ybWVyUm9sZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBQZXJmb3JtZXJSb2xlVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9QZXJmb3JtZXJSb2xlVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEaWFnbm9zdGljUmVwb3J0U3RhdHVzQ29kZXMsICBEaWFnbm9zdGljUmVwb3J0U3RhdHVzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0RpYWdub3N0aWNSZXBvcnRTdGF0dXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRGlhZ25vc3RpY1JlcG9ydFN0YXR1c1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRGlhZ25vc3RpY1JlcG9ydFN0YXR1c1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRGlhZ25vc3RpY1NlcnZpY2VTZWN0aW9uc0NvZGVzLCAgRGlhZ25vc3RpY1NlcnZpY2VTZWN0aW9uc0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9EaWFnbm9zdGljU2VydmljZVNlY3Rpb25zQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IERpYWdub3N0aWNTZXJ2aWNlU2VjdGlvbnNWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0RpYWdub3N0aWNTZXJ2aWNlU2VjdGlvbnNWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFJlcG9ydENvZGVzLCAgUmVwb3J0Q29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1JlcG9ydENvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBSZXBvcnRWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1JlcG9ydFZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ2xpbmljYWxGaW5kaW5nc0NvZGVzLCAgQ2xpbmljYWxGaW5kaW5nc0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9DbGluaWNhbEZpbmRpbmdzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENsaW5pY2FsRmluZGluZ3NWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NsaW5pY2FsRmluZGluZ3NWc1ZhbGlkYXRpb24uanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgRGlhZ25vc3RpY1JlcG9ydFBlcmZvcm1lciB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBEaWFnbm9zdGljUmVwb3J0UGVyZm9ybWVyQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHRoZSB0eXBlIG9mIHBhcnRpY2lwYXRpb24gKGUuZy4gIGEgcmVzcG9uc2libGUgcGFydHksIGF1dGhvciwgb3IgdmVyaWZpZXIpLlxyXG4gICAqL1xyXG4gIHJvbGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaXMgbm90IG5lY2Vzc2FyaWx5IHRoZSBzb3VyY2Ugb2YgdGhlIGF0b21pYyBkYXRhIGl0ZW1zLiBJdCBpcyB0aGUgZW50aXR5IHRoYXQgdGFrZXMgcmVzcG9uc2liaWxpdHkgZm9yIHRoZSBjbGluaWNhbCByZXBvcnQuXHJcbiAgICovXHJcbiAgYWN0b3I6IGZoaXIuUmVmZXJlbmNlQXJnc3xudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogSW5kaWNhdGVzIHdobyBvciB3aGF0IHBhcnRpY2lwYXRlZCBpbiBwcm9kdWNpbmcgdGhlIHJlcG9ydC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBEaWFnbm9zdGljUmVwb3J0UGVyZm9ybWVyIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnRGlhZ25vc3RpY1JlcG9ydFBlcmZvcm1lcic7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHRoZSB0eXBlIG9mIHBhcnRpY2lwYXRpb24gKGUuZy4gIGEgcmVzcG9uc2libGUgcGFydHksIGF1dGhvciwgb3IgdmVyaWZpZXIpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByb2xlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaXMgbm90IG5lY2Vzc2FyaWx5IHRoZSBzb3VyY2Ugb2YgdGhlIGF0b21pYyBkYXRhIGl0ZW1zLiBJdCBpcyB0aGUgZW50aXR5IHRoYXQgdGFrZXMgcmVzcG9uc2liaWxpdHkgZm9yIHRoZSBjbGluaWNhbCByZXBvcnQuXHJcbiAgICovXHJcbiAgcHVibGljIGFjdG9yOiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIERpYWdub3N0aWNSZXBvcnRQZXJmb3JtZXIgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxEaWFnbm9zdGljUmVwb3J0UGVyZm9ybWVyQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3JvbGUnXSkgeyB0aGlzLnJvbGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnJvbGUpOyB9XHJcbiAgICBpZiAoc291cmNlWydhY3RvciddKSB7IHRoaXMuYWN0b3IgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmFjdG9yKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYWN0b3IgPSBudWxsOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnRGlhZ25vc3RpY1JlcG9ydC5wZXJmb3JtZXInIH1cclxuICAgIHRoaXMudk9TKCdyb2xlJyxleHApXHJcbiAgICB0aGlzLnZSUygnYWN0b3InLGV4cClcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBEaWFnbm9zdGljUmVwb3J0SW1hZ2UgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgRGlhZ25vc3RpY1JlcG9ydEltYWdlQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNvbW1lbnQgc2hvdWxkIGJlIGRpc3BsYXllZCB3aXRoIHRoZSBpbWFnZS4gSXQgd291bGQgYmUgY29tbW9uIGZvciB0aGUgcmVwb3J0IHRvIGluY2x1ZGUgYWRkaXRpb25hbCBkaXNjdXNzaW9uIG9mIHRoZSBpbWFnZSBjb250ZW50cyBpbiBvdGhlciBzZWN0aW9ucyBzdWNoIGFzIHRoZSBjb25jbHVzaW9uLlxyXG4gICAqL1xyXG4gIGNvbW1lbnQ/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogRGlhZ25vc3RpY1JlcG9ydC5pbWFnZS5jb21tZW50XHJcbiAgICovXHJcbiAgX2NvbW1lbnQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFJlZmVyZW5jZSB0byB0aGUgaW1hZ2Ugc291cmNlLlxyXG4gICAqL1xyXG4gIGxpbms6IGZoaXIuUmVmZXJlbmNlQXJnc3xudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogQSBsaXN0IG9mIGtleSBpbWFnZXMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgcmVwb3J0LiBUaGUgaW1hZ2VzIGFyZSBnZW5lcmFsbHkgY3JlYXRlZCBkdXJpbmcgdGhlIGRpYWdub3N0aWMgcHJvY2VzcywgYW5kIG1heSBiZSBkaXJlY3RseSBvZiB0aGUgcGF0aWVudCwgb3Igb2YgdHJlYXRlZCBzcGVjaW1lbnMgKGkuZS4gc2xpZGVzIG9mIGludGVyZXN0KS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBEaWFnbm9zdGljUmVwb3J0SW1hZ2UgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdEaWFnbm9zdGljUmVwb3J0SW1hZ2UnO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjb21tZW50IHNob3VsZCBiZSBkaXNwbGF5ZWQgd2l0aCB0aGUgaW1hZ2UuIEl0IHdvdWxkIGJlIGNvbW1vbiBmb3IgdGhlIHJlcG9ydCB0byBpbmNsdWRlIGFkZGl0aW9uYWwgZGlzY3Vzc2lvbiBvZiB0aGUgaW1hZ2UgY29udGVudHMgaW4gb3RoZXIgc2VjdGlvbnMgc3VjaCBhcyB0aGUgY29uY2x1c2lvbi5cclxuICAgKi9cclxuICBwdWJsaWMgY29tbWVudD86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUmVmZXJlbmNlIHRvIHRoZSBpbWFnZSBzb3VyY2UuXHJcbiAgICovXHJcbiAgcHVibGljIGxpbms6IGZoaXIuUmVmZXJlbmNlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgRGlhZ25vc3RpY1JlcG9ydEltYWdlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8RGlhZ25vc3RpY1JlcG9ydEltYWdlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2NvbW1lbnQnXSkgeyB0aGlzLmNvbW1lbnQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmNvbW1lbnR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2NvbW1lbnQnXSkge1xyXG4gICAgICBpZiAodGhpcy5jb21tZW50KSB7IHRoaXMuY29tbWVudC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9jb21tZW50ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuY29tbWVudCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9jb21tZW50IGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydsaW5rJ10pIHsgdGhpcy5saW5rID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5saW5rKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubGluayA9IG51bGw7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdEaWFnbm9zdGljUmVwb3J0LmltYWdlJyB9XHJcbiAgICB0aGlzLnZPUygnY29tbWVudCcsZXhwKVxyXG4gICAgdGhpcy52UlMoJ2xpbmsnLGV4cClcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBEaWFnbm9zdGljUmVwb3J0IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIERpYWdub3N0aWNSZXBvcnRBcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJEaWFnbm9zdGljUmVwb3J0XCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFVzdWFsbHkgYXNzaWduZWQgYnkgdGhlIEluZm9ybWF0aW9uIFN5c3RlbSBvZiB0aGUgZGlhZ25vc3RpYyBzZXJ2aWNlIHByb3ZpZGVyIChmaWxsZXIgaWQpLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE5vdGU6IFVzdWFsbHkgdGhlcmUgaXMgb25lIHRlc3QgcmVxdWVzdCBmb3IgZWFjaCByZXN1bHQsIGhvd2V2ZXIgaW4gc29tZSBjaXJjdW1zdGFuY2VzIG11bHRpcGxlIHRlc3QgcmVxdWVzdHMgbWF5IGJlIHJlcHJlc2VudGVkIHVzaW5nIGEgc2luZ2xlIHRlc3QgcmVzdWx0IHJlc291cmNlLiBOb3RlIHRoYXQgdGhlcmUgYXJlIGFsc28gY2FzZXMgd2hlcmUgb25lIHJlcXVlc3QgbGVhZHMgdG8gbXVsdGlwbGUgcmVwb3J0cy5cclxuICAgKi9cclxuICBiYXNlZE9uPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaXMgbGFiZWxlZCBhcyBcIklzIE1vZGlmaWVyXCIgYmVjYXVzZSBhcHBsaWNhdGlvbnMgbmVlZCB0byB0YWtlIGFwcHJvcHJpYXRlIGFjdGlvbiBpZiBhIHJlcG9ydCBpcyB3aXRoZHJhd24uXHJcbiAgICovXHJcbiAgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPERpYWdub3N0aWNSZXBvcnRTdGF0dXNDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogRGlhZ25vc3RpY1JlcG9ydC5zdGF0dXNcclxuICAgKi9cclxuICBfc3RhdHVzPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgbGV2ZWwgb2YgZ3JhbnVsYXJpdHkgaXMgZGVmaW5lZCBieSB0aGUgY2F0ZWdvcnkgY29uY2VwdHMgaW4gdGhlIHZhbHVlIHNldC4gTW9yZSBmaW5lLWdyYWluZWQgZmlsdGVyaW5nIGNhbiBiZSBwZXJmb3JtZWQgdXNpbmcgdGhlIG1ldGFkYXRhIGFuZC9vciB0ZXJtaW5vbG9neSBoaWVyYXJjaHkgaW4gRGlhZ25vc3RpY1JlcG9ydC5jb2RlLlxyXG4gICAqL1xyXG4gIGNhdGVnb3J5PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGNvZGUgb3IgbmFtZSB0aGF0IGRlc2NyaWJlcyB0aGlzIGRpYWdub3N0aWMgcmVwb3J0LlxyXG4gICAqL1xyXG4gIGNvZGU6IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzdWJqZWN0IG9mIHRoZSByZXBvcnQuIFVzdWFsbHksIGJ1dCBub3QgYWx3YXlzLCB0aGlzIGlzIGEgcGF0aWVudC4gSG93ZXZlciBkaWFnbm9zdGljIHNlcnZpY2VzIGFsc28gcGVyZm9ybSBhbmFseXNlcyBvbiBzcGVjaW1lbnMgY29sbGVjdGVkIGZyb20gYSB2YXJpZXR5IG9mIG90aGVyIHNvdXJjZXMuXHJcbiAgICovXHJcbiAgc3ViamVjdD86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyB3aWxsIHR5cGljYWxseSBiZSB0aGUgZW5jb3VudGVyIHRoZSBldmVudCBvY2N1cnJlZCB3aXRoaW4sIGJ1dCBzb21lIGV2ZW50cyBtYXkgYmUgaW5pdGlhdGVkIHByaW9yIHRvIG9yIGFmdGVyIHRoZSBvZmZpY2lhbCBjb21wbGV0aW9uIG9mIGFuIGVuY291bnRlciBvciBlcGlzb2RlIGJ1dCBzdGlsbCBiZSB0aWVkIHRvIHRoZSBjb250ZXh0IG9mIHRoZSBlbmNvdW50ZXIgb3IgZXBpc29kZSAoZS5nLiBwcmUtYWRtaXNzaW9uIGxhYiB0ZXN0cykuXHJcbiAgICovXHJcbiAgY29udGV4dD86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhlIGRpYWdub3N0aWMgcHJvY2VkdXJlIHdhcyBwZXJmb3JtZWQgb24gdGhlIHBhdGllbnQsIHRoaXMgaXMgdGhlIHRpbWUgaXQgd2FzIHBlcmZvcm1lZC4gSWYgdGhlcmUgYXJlIHNwZWNpbWVucywgdGhlIGRpYWdub3N0aWNhbGx5IHJlbGV2YW50IHRpbWUgY2FuIGJlIGRlcml2ZWQgZnJvbSB0aGUgc3BlY2ltZW4gY29sbGVjdGlvbiB0aW1lcywgYnV0IHRoZSBzcGVjaW1lbiBpbmZvcm1hdGlvbiBpcyBub3QgYWx3YXlzIGF2YWlsYWJsZSwgYW5kIHRoZSBleGFjdCByZWxhdGlvbnNoaXAgYmV0d2VlbiB0aGUgc3BlY2ltZW5zIGFuZCB0aGUgZGlhZ25vc3RpY2FsbHkgcmVsZXZhbnQgdGltZSBpcyBub3QgYWx3YXlzIGF1dG9tYXRpYy5cclxuICAgKi9cclxuICBlZmZlY3RpdmU/OiBmaGlyLkZoaXJEYXRlVGltZXxmaGlyLlBlcmlvZHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhlIGRpYWdub3N0aWMgcHJvY2VkdXJlIHdhcyBwZXJmb3JtZWQgb24gdGhlIHBhdGllbnQsIHRoaXMgaXMgdGhlIHRpbWUgaXQgd2FzIHBlcmZvcm1lZC4gSWYgdGhlcmUgYXJlIHNwZWNpbWVucywgdGhlIGRpYWdub3N0aWNhbGx5IHJlbGV2YW50IHRpbWUgY2FuIGJlIGRlcml2ZWQgZnJvbSB0aGUgc3BlY2ltZW4gY29sbGVjdGlvbiB0aW1lcywgYnV0IHRoZSBzcGVjaW1lbiBpbmZvcm1hdGlvbiBpcyBub3QgYWx3YXlzIGF2YWlsYWJsZSwgYW5kIHRoZSBleGFjdCByZWxhdGlvbnNoaXAgYmV0d2VlbiB0aGUgc3BlY2ltZW5zIGFuZCB0aGUgZGlhZ25vc3RpY2FsbHkgcmVsZXZhbnQgdGltZSBpcyBub3QgYWx3YXlzIGF1dG9tYXRpYy5cclxuICAgKi9cclxuICBlZmZlY3RpdmVEYXRlVGltZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhlIGRpYWdub3N0aWMgcHJvY2VkdXJlIHdhcyBwZXJmb3JtZWQgb24gdGhlIHBhdGllbnQsIHRoaXMgaXMgdGhlIHRpbWUgaXQgd2FzIHBlcmZvcm1lZC4gSWYgdGhlcmUgYXJlIHNwZWNpbWVucywgdGhlIGRpYWdub3N0aWNhbGx5IHJlbGV2YW50IHRpbWUgY2FuIGJlIGRlcml2ZWQgZnJvbSB0aGUgc3BlY2ltZW4gY29sbGVjdGlvbiB0aW1lcywgYnV0IHRoZSBzcGVjaW1lbiBpbmZvcm1hdGlvbiBpcyBub3QgYWx3YXlzIGF2YWlsYWJsZSwgYW5kIHRoZSBleGFjdCByZWxhdGlvbnNoaXAgYmV0d2VlbiB0aGUgc3BlY2ltZW5zIGFuZCB0aGUgZGlhZ25vc3RpY2FsbHkgcmVsZXZhbnQgdGltZSBpcyBub3QgYWx3YXlzIGF1dG9tYXRpYy5cclxuICAgKi9cclxuICBlZmZlY3RpdmVQZXJpb2Q/OiBmaGlyLlBlcmlvZEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE1heSBiZSBkaWZmZXJlbnQgZnJvbSB0aGUgdXBkYXRlIHRpbWUgb2YgdGhlIHJlc291cmNlIGl0c2VsZiwgYmVjYXVzZSB0aGF0IGlzIHRoZSBzdGF0dXMgb2YgdGhlIHJlY29yZCAocG90ZW50aWFsbHkgYSBzZWNvbmRhcnkgY29weSksIG5vdCB0aGUgYWN0dWFsIHJlbGVhc2UgdGltZSBvZiB0aGUgcmVwb3J0LlxyXG4gICAqL1xyXG4gIGlzc3VlZD86IGZoaXIuRmhpckluc3RhbnR8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogRGlhZ25vc3RpY1JlcG9ydC5pc3N1ZWRcclxuICAgKi9cclxuICBfaXNzdWVkPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgd2hvIG9yIHdoYXQgcGFydGljaXBhdGVkIGluIHByb2R1Y2luZyB0aGUgcmVwb3J0LlxyXG4gICAqL1xyXG4gIHBlcmZvcm1lcj86IGZoaXIuRGlhZ25vc3RpY1JlcG9ydFBlcmZvcm1lckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhlIHNwZWNpbWVuIGlzIHN1ZmZpY2llbnRseSBzcGVjaWZpZWQgd2l0aCBhIGNvZGUgaW4gdGhlIHRlc3QgcmVzdWx0IG5hbWUsIHRoZW4gdGhpcyBhZGRpdGlvbmFsIGRhdGEgbWF5IGJlIHJlZHVuZGFudC4gSWYgdGhlcmUgYXJlIG11bHRpcGxlIHNwZWNpbWVucywgdGhlc2UgbWF5IGJlIHJlcHJlc2VudGVkIHBlciBvYnNlcnZhdGlvbiBvciBncm91cC5cclxuICAgKi9cclxuICBzcGVjaW1lbj86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBPYnNlcnZhdGlvbnMgdGhhdCBhcmUgcGFydCBvZiB0aGlzIGRpYWdub3N0aWMgcmVwb3J0LiBPYnNlcnZhdGlvbnMgY2FuIGJlIHNpbXBsZSBuYW1lL3ZhbHVlIHBhaXJzIChlLmcuIFwiYXRvbWljXCIgcmVzdWx0cyksIG9yIHRoZXkgY2FuIGJlIGdyb3VwaW5nIG9ic2VydmF0aW9ucyB0aGF0IGluY2x1ZGUgcmVmZXJlbmNlcyB0byBvdGhlciBtZW1iZXJzIG9mIHRoZSBncm91cCAoZS5nLiBcInBhbmVsc1wiKS5cclxuICAgKi9cclxuICByZXN1bHQ/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW1hZ2luZ1N0dWR5IGFuZCBJbWFnZU1hbmlmZXN0IGFuZCB0aGUgaW1hZ2UgZWxlbWVudCBhcmUgc29tZXdoYXQgb3ZlcmxhcHBpbmcgLSB0eXBpY2FsbHksIHRoZSBsaXN0IG9mIGltYWdlIHJlZmVyZW5jZXMgaW4gdGhlIGltYWdlIGVsZW1lbnQgd2lsbCBhbHNvIGJlIGZvdW5kIGluIG9uZSBvZiB0aGUgaW1hZ2luZyBzdHVkeSByZXNvdXJjZXMuIEhvd2V2ZXIgZWFjaCBjYXRlcnMgdG8gZGlmZmVyZW50IHR5cGVzIG9mIGRpc3BsYXlzIGZvciBkaWZmZXJlbnQgdHlwZXMgb2YgcHVycG9zZXMuIE5laXRoZXIsIGVpdGhlciwgb3IgYm90aCBtYXkgYmUgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgaW1hZ2luZ1N0dWR5PzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgbGlzdCBvZiBrZXkgaW1hZ2VzIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHJlcG9ydC4gVGhlIGltYWdlcyBhcmUgZ2VuZXJhbGx5IGNyZWF0ZWQgZHVyaW5nIHRoZSBkaWFnbm9zdGljIHByb2Nlc3MsIGFuZCBtYXkgYmUgZGlyZWN0bHkgb2YgdGhlIHBhdGllbnQsIG9yIG9mIHRyZWF0ZWQgc3BlY2ltZW5zIChpLmUuIHNsaWRlcyBvZiBpbnRlcmVzdCkuXHJcbiAgICovXHJcbiAgaW1hZ2U/OiBmaGlyLkRpYWdub3N0aWNSZXBvcnRJbWFnZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ29uY2lzZSBhbmQgY2xpbmljYWxseSBjb250ZXh0dWFsaXplZCBpbXByZXNzaW9uIC8gc3VtbWFyeSBvZiB0aGUgZGlhZ25vc3RpYyByZXBvcnQuXHJcbiAgICovXHJcbiAgY29uY2x1c2lvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBEaWFnbm9zdGljUmVwb3J0LmNvbmNsdXNpb25cclxuICAgKi9cclxuICBfY29uY2x1c2lvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQ29kZXMgZm9yIHRoZSBjb25jbHVzaW9uLlxyXG4gICAqL1xyXG4gIGNvZGVkRGlhZ25vc2lzPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFwiYXBwbGljYXRpb24vcGRmXCIgaXMgcmVjb21tZW5kZWQgYXMgdGhlIG1vc3QgcmVsaWFibGUgYW5kIGludGVyb3BlcmFibGUgaW4gdGhpcyBjb250ZXh0LlxyXG4gICAqL1xyXG4gIHByZXNlbnRlZEZvcm0/OiBmaGlyLkF0dGFjaG1lbnRBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlIGZpbmRpbmdzIGFuZCBpbnRlcnByZXRhdGlvbiBvZiBkaWFnbm9zdGljICB0ZXN0cyBwZXJmb3JtZWQgb24gcGF0aWVudHMsIGdyb3VwcyBvZiBwYXRpZW50cywgZGV2aWNlcywgYW5kIGxvY2F0aW9ucywgYW5kL29yIHNwZWNpbWVucyBkZXJpdmVkIGZyb20gdGhlc2UuIFRoZSByZXBvcnQgaW5jbHVkZXMgY2xpbmljYWwgY29udGV4dCBzdWNoIGFzIHJlcXVlc3RpbmcgYW5kIHByb3ZpZGVyIGluZm9ybWF0aW9uLCBhbmQgc29tZSBtaXggb2YgYXRvbWljIHJlc3VsdHMsIGltYWdlcywgdGV4dHVhbCBhbmQgY29kZWQgaW50ZXJwcmV0YXRpb25zLCBhbmQgZm9ybWF0dGVkIHJlcHJlc2VudGF0aW9uIG9mIGRpYWdub3N0aWMgcmVwb3J0cy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBEaWFnbm9zdGljUmVwb3J0IGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdEaWFnbm9zdGljUmVwb3J0JztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIkRpYWdub3N0aWNSZXBvcnRcIjtcclxuICAvKipcclxuICAgKiBVc3VhbGx5IGFzc2lnbmVkIGJ5IHRoZSBJbmZvcm1hdGlvbiBTeXN0ZW0gb2YgdGhlIGRpYWdub3N0aWMgc2VydmljZSBwcm92aWRlciAoZmlsbGVyIGlkKS5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcjogZmhpci5JZGVudGlmaWVyW107XHJcbiAgLyoqXHJcbiAgICogTm90ZTogVXN1YWxseSB0aGVyZSBpcyBvbmUgdGVzdCByZXF1ZXN0IGZvciBlYWNoIHJlc3VsdCwgaG93ZXZlciBpbiBzb21lIGNpcmN1bXN0YW5jZXMgbXVsdGlwbGUgdGVzdCByZXF1ZXN0cyBtYXkgYmUgcmVwcmVzZW50ZWQgdXNpbmcgYSBzaW5nbGUgdGVzdCByZXN1bHQgcmVzb3VyY2UuIE5vdGUgdGhhdCB0aGVyZSBhcmUgYWxzbyBjYXNlcyB3aGVyZSBvbmUgcmVxdWVzdCBsZWFkcyB0byBtdWx0aXBsZSByZXBvcnRzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBiYXNlZE9uOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaXMgbGFiZWxlZCBhcyBcIklzIE1vZGlmaWVyXCIgYmVjYXVzZSBhcHBsaWNhdGlvbnMgbmVlZCB0byB0YWtlIGFwcHJvcHJpYXRlIGFjdGlvbiBpZiBhIHJlcG9ydCBpcyB3aXRoZHJhd24uXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1czogZmhpci5GaGlyQ29kZTxEaWFnbm9zdGljUmVwb3J0U3RhdHVzQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGxldmVsIG9mIGdyYW51bGFyaXR5IGlzIGRlZmluZWQgYnkgdGhlIGNhdGVnb3J5IGNvbmNlcHRzIGluIHRoZSB2YWx1ZSBzZXQuIE1vcmUgZmluZS1ncmFpbmVkIGZpbHRlcmluZyBjYW4gYmUgcGVyZm9ybWVkIHVzaW5nIHRoZSBtZXRhZGF0YSBhbmQvb3IgdGVybWlub2xvZ3kgaGllcmFyY2h5IGluIERpYWdub3N0aWNSZXBvcnQuY29kZS5cclxuICAgKi9cclxuICBwdWJsaWMgY2F0ZWdvcnk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBjb2RlIG9yIG5hbWUgdGhhdCBkZXNjcmliZXMgdGhpcyBkaWFnbm9zdGljIHJlcG9ydC5cclxuICAgKi9cclxuICBwdWJsaWMgY29kZTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgc3ViamVjdCBvZiB0aGUgcmVwb3J0LiBVc3VhbGx5LCBidXQgbm90IGFsd2F5cywgdGhpcyBpcyBhIHBhdGllbnQuIEhvd2V2ZXIgZGlhZ25vc3RpYyBzZXJ2aWNlcyBhbHNvIHBlcmZvcm0gYW5hbHlzZXMgb24gc3BlY2ltZW5zIGNvbGxlY3RlZCBmcm9tIGEgdmFyaWV0eSBvZiBvdGhlciBzb3VyY2VzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdWJqZWN0PzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgd2lsbCB0eXBpY2FsbHkgYmUgdGhlIGVuY291bnRlciB0aGUgZXZlbnQgb2NjdXJyZWQgd2l0aGluLCBidXQgc29tZSBldmVudHMgbWF5IGJlIGluaXRpYXRlZCBwcmlvciB0byBvciBhZnRlciB0aGUgb2ZmaWNpYWwgY29tcGxldGlvbiBvZiBhbiBlbmNvdW50ZXIgb3IgZXBpc29kZSBidXQgc3RpbGwgYmUgdGllZCB0byB0aGUgY29udGV4dCBvZiB0aGUgZW5jb3VudGVyIG9yIGVwaXNvZGUgKGUuZy4gcHJlLWFkbWlzc2lvbiBsYWIgdGVzdHMpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb250ZXh0PzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIHRoZSBkaWFnbm9zdGljIHByb2NlZHVyZSB3YXMgcGVyZm9ybWVkIG9uIHRoZSBwYXRpZW50LCB0aGlzIGlzIHRoZSB0aW1lIGl0IHdhcyBwZXJmb3JtZWQuIElmIHRoZXJlIGFyZSBzcGVjaW1lbnMsIHRoZSBkaWFnbm9zdGljYWxseSByZWxldmFudCB0aW1lIGNhbiBiZSBkZXJpdmVkIGZyb20gdGhlIHNwZWNpbWVuIGNvbGxlY3Rpb24gdGltZXMsIGJ1dCB0aGUgc3BlY2ltZW4gaW5mb3JtYXRpb24gaXMgbm90IGFsd2F5cyBhdmFpbGFibGUsIGFuZCB0aGUgZXhhY3QgcmVsYXRpb25zaGlwIGJldHdlZW4gdGhlIHNwZWNpbWVucyBhbmQgdGhlIGRpYWdub3N0aWNhbGx5IHJlbGV2YW50IHRpbWUgaXMgbm90IGFsd2F5cyBhdXRvbWF0aWMuXHJcbiAgICovXHJcbiAgcHVibGljIGVmZmVjdGl2ZT86IChmaGlyLkZoaXJEYXRlVGltZXxmaGlyLlBlcmlvZCl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgRGlhZ25vc3RpY1JlcG9ydC5lZmZlY3RpdmVbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfZWZmZWN0aXZlSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogTWF5IGJlIGRpZmZlcmVudCBmcm9tIHRoZSB1cGRhdGUgdGltZSBvZiB0aGUgcmVzb3VyY2UgaXRzZWxmLCBiZWNhdXNlIHRoYXQgaXMgdGhlIHN0YXR1cyBvZiB0aGUgcmVjb3JkIChwb3RlbnRpYWxseSBhIHNlY29uZGFyeSBjb3B5KSwgbm90IHRoZSBhY3R1YWwgcmVsZWFzZSB0aW1lIG9mIHRoZSByZXBvcnQuXHJcbiAgICovXHJcbiAgcHVibGljIGlzc3VlZD86IGZoaXIuRmhpckluc3RhbnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB3aG8gb3Igd2hhdCBwYXJ0aWNpcGF0ZWQgaW4gcHJvZHVjaW5nIHRoZSByZXBvcnQuXHJcbiAgICovXHJcbiAgcHVibGljIHBlcmZvcm1lcjogZmhpci5EaWFnbm9zdGljUmVwb3J0UGVyZm9ybWVyW107XHJcbiAgLyoqXHJcbiAgICogSWYgdGhlIHNwZWNpbWVuIGlzIHN1ZmZpY2llbnRseSBzcGVjaWZpZWQgd2l0aCBhIGNvZGUgaW4gdGhlIHRlc3QgcmVzdWx0IG5hbWUsIHRoZW4gdGhpcyBhZGRpdGlvbmFsIGRhdGEgbWF5IGJlIHJlZHVuZGFudC4gSWYgdGhlcmUgYXJlIG11bHRpcGxlIHNwZWNpbWVucywgdGhlc2UgbWF5IGJlIHJlcHJlc2VudGVkIHBlciBvYnNlcnZhdGlvbiBvciBncm91cC5cclxuICAgKi9cclxuICBwdWJsaWMgc3BlY2ltZW46IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogT2JzZXJ2YXRpb25zIHRoYXQgYXJlIHBhcnQgb2YgdGhpcyBkaWFnbm9zdGljIHJlcG9ydC4gT2JzZXJ2YXRpb25zIGNhbiBiZSBzaW1wbGUgbmFtZS92YWx1ZSBwYWlycyAoZS5nLiBcImF0b21pY1wiIHJlc3VsdHMpLCBvciB0aGV5IGNhbiBiZSBncm91cGluZyBvYnNlcnZhdGlvbnMgdGhhdCBpbmNsdWRlIHJlZmVyZW5jZXMgdG8gb3RoZXIgbWVtYmVycyBvZiB0aGUgZ3JvdXAgKGUuZy4gXCJwYW5lbHNcIikuXHJcbiAgICovXHJcbiAgcHVibGljIHJlc3VsdDogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBJbWFnaW5nU3R1ZHkgYW5kIEltYWdlTWFuaWZlc3QgYW5kIHRoZSBpbWFnZSBlbGVtZW50IGFyZSBzb21ld2hhdCBvdmVybGFwcGluZyAtIHR5cGljYWxseSwgdGhlIGxpc3Qgb2YgaW1hZ2UgcmVmZXJlbmNlcyBpbiB0aGUgaW1hZ2UgZWxlbWVudCB3aWxsIGFsc28gYmUgZm91bmQgaW4gb25lIG9mIHRoZSBpbWFnaW5nIHN0dWR5IHJlc291cmNlcy4gSG93ZXZlciBlYWNoIGNhdGVycyB0byBkaWZmZXJlbnQgdHlwZXMgb2YgZGlzcGxheXMgZm9yIGRpZmZlcmVudCB0eXBlcyBvZiBwdXJwb3Nlcy4gTmVpdGhlciwgZWl0aGVyLCBvciBib3RoIG1heSBiZSBwcm92aWRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgaW1hZ2luZ1N0dWR5OiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIEEgbGlzdCBvZiBrZXkgaW1hZ2VzIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHJlcG9ydC4gVGhlIGltYWdlcyBhcmUgZ2VuZXJhbGx5IGNyZWF0ZWQgZHVyaW5nIHRoZSBkaWFnbm9zdGljIHByb2Nlc3MsIGFuZCBtYXkgYmUgZGlyZWN0bHkgb2YgdGhlIHBhdGllbnQsIG9yIG9mIHRyZWF0ZWQgc3BlY2ltZW5zIChpLmUuIHNsaWRlcyBvZiBpbnRlcmVzdCkuXHJcbiAgICovXHJcbiAgcHVibGljIGltYWdlOiBmaGlyLkRpYWdub3N0aWNSZXBvcnRJbWFnZVtdO1xyXG4gIC8qKlxyXG4gICAqIENvbmNpc2UgYW5kIGNsaW5pY2FsbHkgY29udGV4dHVhbGl6ZWQgaW1wcmVzc2lvbiAvIHN1bW1hcnkgb2YgdGhlIGRpYWdub3N0aWMgcmVwb3J0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25jbHVzaW9uPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDb2RlcyBmb3IgdGhlIGNvbmNsdXNpb24uXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGVkRGlhZ25vc2lzOiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIFwiYXBwbGljYXRpb24vcGRmXCIgaXMgcmVjb21tZW5kZWQgYXMgdGhlIG1vc3QgcmVsaWFibGUgYW5kIGludGVyb3BlcmFibGUgaW4gdGhpcyBjb250ZXh0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcmVzZW50ZWRGb3JtOiBmaGlyLkF0dGFjaG1lbnRbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBEaWFnbm9zdGljUmVwb3J0IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8RGlhZ25vc3RpY1JlcG9ydEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdEaWFnbm9zdGljUmVwb3J0JztcclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBzb3VyY2UuaWRlbnRpZmllci5tYXAoKHgpID0+IG5ldyBmaGlyLklkZW50aWZpZXIoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pZGVudGlmaWVyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2Jhc2VkT24nXSkgeyB0aGlzLmJhc2VkT24gPSBzb3VyY2UuYmFzZWRPbi5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmJhc2VkT24gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RhdHVzJ10pIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxEaWFnbm9zdGljUmVwb3J0U3RhdHVzQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnN0YXR1c30pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfc3RhdHVzJ10pIHtcclxuICAgICAgaWYgKHRoaXMuc3RhdHVzKSB7IHRoaXMuc3RhdHVzLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3N0YXR1cyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPERpYWdub3N0aWNSZXBvcnRTdGF0dXNDb2RlVHlwZT4oc291cmNlLl9zdGF0dXMgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2NhdGVnb3J5J10pIHsgdGhpcy5jYXRlZ29yeSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY2F0ZWdvcnkpOyB9XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jb2RlKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY29kZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N1YmplY3QnXSkgeyB0aGlzLnN1YmplY3QgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnN1YmplY3QpOyB9XHJcbiAgICBpZiAoc291cmNlWydjb250ZXh0J10pIHsgdGhpcy5jb250ZXh0ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5jb250ZXh0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZWZmZWN0aXZlJ10pIHsgdGhpcy5lZmZlY3RpdmUgPSBzb3VyY2UuZWZmZWN0aXZlOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2VmZmVjdGl2ZURhdGVUaW1lJ10pIHsgdGhpcy5lZmZlY3RpdmUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2UuZWZmZWN0aXZlRGF0ZVRpbWV9KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydlZmZlY3RpdmVQZXJpb2QnXSkgeyB0aGlzLmVmZmVjdGl2ZSA9IG5ldyBmaGlyLlBlcmlvZChzb3VyY2UuZWZmZWN0aXZlUGVyaW9kKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaXNzdWVkJ10pIHsgdGhpcy5pc3N1ZWQgPSBuZXcgZmhpci5GaGlySW5zdGFudCh7dmFsdWU6IHNvdXJjZS5pc3N1ZWR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2lzc3VlZCddKSB7XHJcbiAgICAgIGlmICh0aGlzLmlzc3VlZCkgeyB0aGlzLmlzc3VlZC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9pc3N1ZWQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5pc3N1ZWQgPSBuZXcgZmhpci5GaGlySW5zdGFudChzb3VyY2UuX2lzc3VlZCBhcyBQYXJ0aWFsPGZoaXIuRmhpckluc3RhbnRBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3BlcmZvcm1lciddKSB7IHRoaXMucGVyZm9ybWVyID0gc291cmNlLnBlcmZvcm1lci5tYXAoKHgpID0+IG5ldyBmaGlyLkRpYWdub3N0aWNSZXBvcnRQZXJmb3JtZXIoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wZXJmb3JtZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3BlY2ltZW4nXSkgeyB0aGlzLnNwZWNpbWVuID0gc291cmNlLnNwZWNpbWVuLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3BlY2ltZW4gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVzdWx0J10pIHsgdGhpcy5yZXN1bHQgPSBzb3VyY2UucmVzdWx0Lm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVzdWx0ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2ltYWdpbmdTdHVkeSddKSB7IHRoaXMuaW1hZ2luZ1N0dWR5ID0gc291cmNlLmltYWdpbmdTdHVkeS5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmltYWdpbmdTdHVkeSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydpbWFnZSddKSB7IHRoaXMuaW1hZ2UgPSBzb3VyY2UuaW1hZ2UubWFwKCh4KSA9PiBuZXcgZmhpci5EaWFnbm9zdGljUmVwb3J0SW1hZ2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pbWFnZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydjb25jbHVzaW9uJ10pIHsgdGhpcy5jb25jbHVzaW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5jb25jbHVzaW9ufSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19jb25jbHVzaW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMuY29uY2x1c2lvbikgeyB0aGlzLmNvbmNsdXNpb24uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fY29uY2x1c2lvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmNvbmNsdXNpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fY29uY2x1c2lvbiBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29kZWREaWFnbm9zaXMnXSkgeyB0aGlzLmNvZGVkRGlhZ25vc2lzID0gc291cmNlLmNvZGVkRGlhZ25vc2lzLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY29kZWREaWFnbm9zaXMgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJlc2VudGVkRm9ybSddKSB7IHRoaXMucHJlc2VudGVkRm9ybSA9IHNvdXJjZS5wcmVzZW50ZWRGb3JtLm1hcCgoeCkgPT4gbmV3IGZoaXIuQXR0YWNobWVudCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnByZXNlbnRlZEZvcm0gPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0RpYWdub3N0aWNSZXBvcnQnIH1cclxuICAgIHRoaXMudlJTKCdyZXNvdXJjZVR5cGUnLGV4cClcclxuICAgIHRoaXMudk9BKCdpZGVudGlmaWVyJyxleHApXHJcbiAgICB0aGlzLnZPQSgnYmFzZWRPbicsZXhwKVxyXG4gICAgdGhpcy52UlNWKCdzdGF0dXMnLGV4cCwnRGlhZ25vc3RpY1JlcG9ydFN0YXR1cycsRGlhZ25vc3RpY1JlcG9ydFN0YXR1c1ZzVmFsaWRhdGlvbiwncicpXHJcbiAgICB0aGlzLnZPUygnY2F0ZWdvcnknLGV4cClcclxuICAgIHRoaXMudlJTKCdjb2RlJyxleHApXHJcbiAgICB0aGlzLnZPUygnc3ViamVjdCcsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2NvbnRleHQnLGV4cClcclxuICAgIHRoaXMudk9TKCdlZmZlY3RpdmUnLGV4cClcclxuICAgIHRoaXMudk9TKCdpc3N1ZWQnLGV4cClcclxuICAgIHRoaXMudk9BKCdwZXJmb3JtZXInLGV4cClcclxuICAgIHRoaXMudk9BKCdzcGVjaW1lbicsZXhwKVxyXG4gICAgdGhpcy52T0EoJ3Jlc3VsdCcsZXhwKVxyXG4gICAgdGhpcy52T0EoJ2ltYWdpbmdTdHVkeScsZXhwKVxyXG4gICAgdGhpcy52T0EoJ2ltYWdlJyxleHApXHJcbiAgICB0aGlzLnZPUygnY29uY2x1c2lvbicsZXhwKVxyXG4gICAgdGhpcy52T0EoJ2NvZGVkRGlhZ25vc2lzJyxleHApXHJcbiAgICB0aGlzLnZPQSgncHJlc2VudGVkRm9ybScsZXhwKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuIl19