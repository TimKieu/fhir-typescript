// <auto-generated/>
// Contents of: hl7.fhir.r3.core version: 3.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: AdverseEvent
import * as fhir from '../fhir.js';
// @ts-ignore
import { AdverseEventCausalityVsValidation } from '../fhirValueSets/AdverseEventCausalityVsValidation.js';
// @ts-ignore
import { AdverseEventCategoryVsValidation } from '../fhirValueSets/AdverseEventCategoryVsValidation.js';
// @ts-ignore
import { AdverseEventOutcomeVsValidation } from '../fhirValueSets/AdverseEventOutcomeVsValidation.js';
/**
 * Describes the entity that is suspected to have caused the adverse event.
 */
export class AdverseEventSuspectEntity extends fhir.BackboneElement {
    /**
     * Default constructor for AdverseEventSuspectEntity - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['instance']) {
            this.instance = new fhir.Reference(source.instance, options);
        }
        else {
            this.instance = null;
        }
        if (source['causality'] !== undefined) {
            this.causality = new fhir.FhirCode({ value: source.causality }, options);
        }
        if (source['_causality']) {
            if (this.causality) {
                this.causality.addExtendedProperties(source._causality);
            }
            else {
                this.causality = new fhir.FhirCode(source._causality, options);
            }
        }
        if (source['causalityAssessment']) {
            this.causalityAssessment = new fhir.CodeableConcept(source.causalityAssessment, options);
        }
        if (source['causalityProductRelatedness'] !== undefined) {
            this.causalityProductRelatedness = new fhir.FhirString({ value: source.causalityProductRelatedness }, options);
        }
        if (source['_causalityProductRelatedness']) {
            if (this.causalityProductRelatedness) {
                this.causalityProductRelatedness.addExtendedProperties(source._causalityProductRelatedness);
            }
            else {
                this.causalityProductRelatedness = new fhir.FhirString(source._causalityProductRelatedness, options);
            }
        }
        if (source['causalityMethod']) {
            this.causalityMethod = new fhir.CodeableConcept(source.causalityMethod, options);
        }
        if (source['causalityAuthor']) {
            this.causalityAuthor = new fhir.Reference(source.causalityAuthor, options);
        }
        if (source['causalityResult']) {
            this.causalityResult = new fhir.CodeableConcept(source.causalityResult, options);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'AdverseEvent.suspectEntity';
        }
        iss.push(...this.vRS('instance', exp));
        iss.push(...this.vOSV('causality', exp, 'AdverseEventCausality', AdverseEventCausalityVsValidation, 'r'));
        iss.push(...this.vOS('causalityAssessment', exp));
        iss.push(...this.vOS('causalityProductRelatedness', exp));
        iss.push(...this.vOS('causalityMethod', exp));
        iss.push(...this.vOS('causalityAuthor', exp));
        iss.push(...this.vOS('causalityResult', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
AdverseEventSuspectEntity._fts_dataType = 'AdverseEventSuspectEntity';
/**
 * Actual or  potential/avoided event causing unintended physical injury resulting from or contributed to by medical care, a research study or other healthcare setting factors that requires additional monitoring, treatment, or hospitalization, or that results in death.
 */
export class AdverseEvent extends fhir.DomainResource {
    /**
     * Default constructor for AdverseEvent - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'AdverseEvent';
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier, options);
        }
        if (source['category'] !== undefined) {
            this.category = new fhir.FhirCode({ value: source.category }, options);
        }
        if (source['_category']) {
            if (this.category) {
                this.category.addExtendedProperties(source._category);
            }
            else {
                this.category = new fhir.FhirCode(source._category, options);
            }
        }
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type, options);
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject, options);
        }
        if (source['date'] !== undefined) {
            this.date = new fhir.FhirDateTime({ value: source.date }, options);
        }
        if (source['_date']) {
            if (this.date) {
                this.date.addExtendedProperties(source._date);
            }
            else {
                this.date = new fhir.FhirDateTime(source._date, options);
            }
        }
        if (source['reaction']) {
            this.reaction = source.reaction.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.reaction = [];
        }
        if (source['location']) {
            this.location = new fhir.Reference(source.location, options);
        }
        if (source['seriousness']) {
            this.seriousness = new fhir.CodeableConcept(source.seriousness, options);
        }
        if (source['outcome']) {
            this.outcome = new fhir.CodeableConcept(source.outcome, options);
        }
        if (source['recorder']) {
            this.recorder = new fhir.Reference(source.recorder, options);
        }
        if (source['eventParticipant']) {
            this.eventParticipant = new fhir.Reference(source.eventParticipant, options);
        }
        if (source['description'] !== undefined) {
            this.description = new fhir.FhirString({ value: source.description }, options);
        }
        if (source['_description']) {
            if (this.description) {
                this.description.addExtendedProperties(source._description);
            }
            else {
                this.description = new fhir.FhirString(source._description, options);
            }
        }
        if (source['suspectEntity']) {
            this.suspectEntity = source.suspectEntity.map((x) => new fhir.AdverseEventSuspectEntity(x, options));
        }
        else {
            this.suspectEntity = [];
        }
        if (source['subjectMedicalHistory']) {
            this.subjectMedicalHistory = source.subjectMedicalHistory.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.subjectMedicalHistory = [];
        }
        if (source['referenceDocument']) {
            this.referenceDocument = source.referenceDocument.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.referenceDocument = [];
        }
        if (source['study']) {
            this.study = source.study.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.study = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'AdverseEvent';
        }
        iss.push(...this.vOS('identifier', exp));
        iss.push(...this.vOSV('category', exp, 'AdverseEventCategory', AdverseEventCategoryVsValidation, 'r'));
        iss.push(...this.vOS('type', exp));
        iss.push(...this.vOS('subject', exp));
        iss.push(...this.vOS('date', exp));
        iss.push(...this.vOA('reaction', exp));
        iss.push(...this.vOS('location', exp));
        iss.push(...this.vOS('seriousness', exp));
        iss.push(...this.vOSV('outcome', exp, 'AdverseEventOutcome', AdverseEventOutcomeVsValidation, 'r'));
        iss.push(...this.vOS('recorder', exp));
        iss.push(...this.vOS('eventParticipant', exp));
        iss.push(...this.vOS('description', exp));
        iss.push(...this.vOA('suspectEntity', exp));
        iss.push(...this.vOA('subjectMedicalHistory', exp));
        iss.push(...this.vOA('referenceDocument', exp));
        iss.push(...this.vOA('study', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
AdverseEvent._fts_dataType = 'AdverseEvent';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQWR2ZXJzZUV2ZW50LmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9BZHZlcnNlRXZlbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsOEJBQThCO0FBRTlCLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBSW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsaUNBQWlDLEVBQUUsTUFBTSx1REFBdUQsQ0FBQztBQWUxRyxhQUFhO0FBQ2IsT0FBTyxFQUFFLGdDQUFnQyxFQUFFLE1BQU0sc0RBQXNELENBQUM7QUFXeEcsYUFBYTtBQUNiLE9BQU8sRUFBRSwrQkFBK0IsRUFBRSxNQUFNLHFEQUFxRCxDQUFDO0FBMkN0Rzs7R0FFRztBQUNILE1BQU0sT0FBTyx5QkFBMEIsU0FBUSxJQUFJLENBQUMsZUFBZTtJQWlDakU7O09BRUc7SUFDSCxZQUFZLFNBQWdELEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQ3RHLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1NBQUU7YUFDcEY7WUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztTQUFFO1FBQzlCLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxLQUFLLFNBQVMsRUFBRTtZQUFFLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFnQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsU0FBUyxFQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FBRTtRQUNqSixJQUFJLE1BQU0sQ0FBQyxZQUFZLENBQUMsRUFBRTtZQUN4QixJQUFJLElBQUksQ0FB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QWEsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3pDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBQyxHQUFHLEVBQUMscUJBQXFCLEVBQUMsK0JBQStCLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNoRyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN0QyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzlDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3pDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzNDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLHVCQUF1QixFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbkQsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsbUJBQW1CLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUMvQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNuQyxPQUFPLEdBQUcsQ0FBQztJQUNiLENBQUM7O0FBdklEOztHQUVHO0FBQzZCLDBCQUFhLEdBQVUsY0FBYyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnIzLmNvcmUgdmVyc2lvbjogMy4wLjJcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBBZHZlcnNlRXZlbnRcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFkdmVyc2VFdmVudENhdXNhbGl0eUNvZGVzLCAgQWR2ZXJzZUV2ZW50Q2F1c2FsaXR5Q29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0FkdmVyc2VFdmVudENhdXNhbGl0eUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBBZHZlcnNlRXZlbnRDYXVzYWxpdHlWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0FkdmVyc2VFdmVudENhdXNhbGl0eVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQWR2ZXJzZUV2ZW50Q2F1c2FsaXR5QXNzZXNzQ29kZXMsICBBZHZlcnNlRXZlbnRDYXVzYWxpdHlBc3Nlc3NDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQWR2ZXJzZUV2ZW50Q2F1c2FsaXR5QXNzZXNzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFkdmVyc2VFdmVudENhdXNhbGl0eUFzc2Vzc1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQWR2ZXJzZUV2ZW50Q2F1c2FsaXR5QXNzZXNzVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBBZHZlcnNlRXZlbnRDYXVzYWxpdHlNZXRob2RDb2RlcywgIEFkdmVyc2VFdmVudENhdXNhbGl0eU1ldGhvZENvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BZHZlcnNlRXZlbnRDYXVzYWxpdHlNZXRob2RDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQWR2ZXJzZUV2ZW50Q2F1c2FsaXR5TWV0aG9kVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BZHZlcnNlRXZlbnRDYXVzYWxpdHlNZXRob2RWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFkdmVyc2VFdmVudENhdXNhbGl0eVJlc3VsdENvZGVzLCAgQWR2ZXJzZUV2ZW50Q2F1c2FsaXR5UmVzdWx0Q29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0FkdmVyc2VFdmVudENhdXNhbGl0eVJlc3VsdENvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBBZHZlcnNlRXZlbnRDYXVzYWxpdHlSZXN1bHRWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0FkdmVyc2VFdmVudENhdXNhbGl0eVJlc3VsdFZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQWR2ZXJzZUV2ZW50Q2F0ZWdvcnlDb2RlcywgIEFkdmVyc2VFdmVudENhdGVnb3J5Q29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0FkdmVyc2VFdmVudENhdGVnb3J5Q29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFkdmVyc2VFdmVudENhdGVnb3J5VnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BZHZlcnNlRXZlbnRDYXRlZ29yeVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQWR2ZXJzZUV2ZW50VHlwZUNvZGVzLCAgQWR2ZXJzZUV2ZW50VHlwZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BZHZlcnNlRXZlbnRUeXBlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFkdmVyc2VFdmVudFR5cGVWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0FkdmVyc2VFdmVudFR5cGVWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFkdmVyc2VFdmVudFNlcmlvdXNuZXNzQ29kZXMsICBBZHZlcnNlRXZlbnRTZXJpb3VzbmVzc0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BZHZlcnNlRXZlbnRTZXJpb3VzbmVzc0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBBZHZlcnNlRXZlbnRTZXJpb3VzbmVzc1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQWR2ZXJzZUV2ZW50U2VyaW91c25lc3NWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFkdmVyc2VFdmVudE91dGNvbWVDb2RlcywgIEFkdmVyc2VFdmVudE91dGNvbWVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQWR2ZXJzZUV2ZW50T3V0Y29tZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBBZHZlcnNlRXZlbnRPdXRjb21lVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BZHZlcnNlRXZlbnRPdXRjb21lVnNWYWxpZGF0aW9uLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEFkdmVyc2VFdmVudFN1c3BlY3RFbnRpdHkgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQWR2ZXJzZUV2ZW50U3VzcGVjdEVudGl0eUFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgdGhlIGFjdHVhbCBpbnN0YW5jZSBvZiB3aGF0IGNhdXNlZCB0aGUgYWR2ZXJzZSBldmVudC4gIE1heSBiZSBhIHN1YnN0YW5jZSwgbWVkaWNhdGlvbiwgbWVkaWNhdGlvbiBhZG1pbmlzdHJhdGlvbiwgbWVkaWNhdGlvbiBzdGF0ZW1lbnQgb3IgYSBkZXZpY2UuXHJcbiAgICovXHJcbiAgaW5zdGFuY2U6IGZoaXIuUmVmZXJlbmNlQXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIGNhdXNhbGl0eTEgfCBjYXVzYWxpdHkyLlxyXG4gICAqL1xyXG4gIGNhdXNhbGl0eT86IGZoaXIuRmhpckNvZGU8QWR2ZXJzZUV2ZW50Q2F1c2FsaXR5Q29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEFkdmVyc2VFdmVudC5zdXNwZWN0RW50aXR5LmNhdXNhbGl0eVxyXG4gICAqL1xyXG4gIF9jYXVzYWxpdHk/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIGFzc2VzczEgfCBhc3Nlc3MyLlxyXG4gICAqL1xyXG4gIGNhdXNhbGl0eUFzc2Vzc21lbnQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFkdmVyc2VFdmVudC5zdXNwZWN0RW50aXR5LmNhdXNhbGl0eVByb2R1Y3RSZWxhdGVkbmVzcy5cclxuICAgKi9cclxuICBjYXVzYWxpdHlQcm9kdWN0UmVsYXRlZG5lc3M/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQWR2ZXJzZUV2ZW50LnN1c3BlY3RFbnRpdHkuY2F1c2FsaXR5UHJvZHVjdFJlbGF0ZWRuZXNzXHJcbiAgICovXHJcbiAgX2NhdXNhbGl0eVByb2R1Y3RSZWxhdGVkbmVzcz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogbWV0aG9kMSB8IG1ldGhvZDIuXHJcbiAgICovXHJcbiAgY2F1c2FsaXR5TWV0aG9kPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBZHZlcnNlRXZlbnQuc3VzcGVjdEVudGl0eS5jYXVzYWxpdHlBdXRob3IuXHJcbiAgICovXHJcbiAgY2F1c2FsaXR5QXV0aG9yPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiByZXN1bHQxIHwgcmVzdWx0Mi5cclxuICAgKi9cclxuICBjYXVzYWxpdHlSZXN1bHQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogRGVzY3JpYmVzIHRoZSBlbnRpdHkgdGhhdCBpcyBzdXNwZWN0ZWQgdG8gaGF2ZSBjYXVzZWQgdGhlIGFkdmVyc2UgZXZlbnQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQWR2ZXJzZUV2ZW50U3VzcGVjdEVudGl0eSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0FkdmVyc2VFdmVudFN1c3BlY3RFbnRpdHknO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgdGhlIGFjdHVhbCBpbnN0YW5jZSBvZiB3aGF0IGNhdXNlZCB0aGUgYWR2ZXJzZSBldmVudC4gIE1heSBiZSBhIHN1YnN0YW5jZSwgbWVkaWNhdGlvbiwgbWVkaWNhdGlvbiBhZG1pbmlzdHJhdGlvbiwgbWVkaWNhdGlvbiBzdGF0ZW1lbnQgb3IgYSBkZXZpY2UuXHJcbiAgICovXHJcbiAgcHVibGljIGluc3RhbmNlOiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIGNhdXNhbGl0eTEgfCBjYXVzYWxpdHkyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjYXVzYWxpdHk/OiBmaGlyLkZoaXJDb2RlPEFkdmVyc2VFdmVudENhdXNhbGl0eUNvZGVUeXBlPnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogYXNzZXNzMSB8IGFzc2VzczIuXHJcbiAgICovXHJcbiAgcHVibGljIGNhdXNhbGl0eUFzc2Vzc21lbnQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWR2ZXJzZUV2ZW50LnN1c3BlY3RFbnRpdHkuY2F1c2FsaXR5UHJvZHVjdFJlbGF0ZWRuZXNzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjYXVzYWxpdHlQcm9kdWN0UmVsYXRlZG5lc3M/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIG1ldGhvZDEgfCBtZXRob2QyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjYXVzYWxpdHlNZXRob2Q/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWR2ZXJzZUV2ZW50LnN1c3BlY3RFbnRpdHkuY2F1c2FsaXR5QXV0aG9yLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjYXVzYWxpdHlBdXRob3I/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogcmVzdWx0MSB8IHJlc3VsdDIuXHJcbiAgICovXHJcbiAgcHVibGljIGNhdXNhbGl0eVJlc3VsdD86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBBZHZlcnNlRXZlbnRTdXNwZWN0RW50aXR5IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8QWR2ZXJzZUV2ZW50U3VzcGVjdEVudGl0eUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydpbnN0YW5jZSddKSB7IHRoaXMuaW5zdGFuY2UgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmluc3RhbmNlLCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaW5zdGFuY2UgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydjYXVzYWxpdHknXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuY2F1c2FsaXR5ID0gbmV3IGZoaXIuRmhpckNvZGU8QWR2ZXJzZUV2ZW50Q2F1c2FsaXR5Q29kZVR5cGU+KHt2YWx1ZTogc291cmNlLmNhdXNhbGl0eX0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfY2F1c2FsaXR5J10pIHtcclxuICAgICAgaWYgKHRoaXMuY2F1c2FsaXR5KSB7IHRoaXMuY2F1c2FsaXR5LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2NhdXNhbGl0eSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmNhdXNhbGl0eSA9IG5ldyBmaGlyLkZoaXJDb2RlPEFkdmVyc2VFdmVudENhdXNhbGl0eUNvZGVUeXBlPihzb3VyY2UuX2NhdXNhbGl0eSBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnY2F1c2FsaXR5QXNzZXNzbWVudCddKSB7IHRoaXMuY2F1c2FsaXR5QXNzZXNzbWVudCA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY2F1c2FsaXR5QXNzZXNzbWVudCwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NhdXNhbGl0eVByb2R1Y3RSZWxhdGVkbmVzcyddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5jYXVzYWxpdHlQcm9kdWN0UmVsYXRlZG5lc3MgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmNhdXNhbGl0eVByb2R1Y3RSZWxhdGVkbmVzc30sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfY2F1c2FsaXR5UHJvZHVjdFJlbGF0ZWRuZXNzJ10pIHtcclxuICAgICAgaWYgKHRoaXMuY2F1c2FsaXR5UHJvZHVjdFJlbGF0ZWRuZXNzKSB7IHRoaXMuY2F1c2FsaXR5UHJvZHVjdFJlbGF0ZWRuZXNzLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2NhdXNhbGl0eVByb2R1Y3RSZWxhdGVkbmVzcyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmNhdXNhbGl0eVByb2R1Y3RSZWxhdGVkbmVzcyA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9jYXVzYWxpdHlQcm9kdWN0UmVsYXRlZG5lc3MgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2NhdXNhbGl0eU1ldGhvZCddKSB7IHRoaXMuY2F1c2FsaXR5TWV0aG9kID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jYXVzYWxpdHlNZXRob2QsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydjYXVzYWxpdHlBdXRob3InXSkgeyB0aGlzLmNhdXNhbGl0eUF1dGhvciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuY2F1c2FsaXR5QXV0aG9yLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY2F1c2FsaXR5UmVzdWx0J10pIHsgdGhpcy5jYXVzYWxpdHlSZXN1bHQgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmNhdXNhbGl0eVJlc3VsdCwgb3B0aW9ucyk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdBZHZlcnNlRXZlbnQuc3VzcGVjdEVudGl0eScgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ2luc3RhbmNlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TVignY2F1c2FsaXR5JyxleHAsJ0FkdmVyc2VFdmVudENhdXNhbGl0eScsQWR2ZXJzZUV2ZW50Q2F1c2FsaXR5VnNWYWxpZGF0aW9uLCdyJykpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2NhdXNhbGl0eUFzc2Vzc21lbnQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2NhdXNhbGl0eVByb2R1Y3RSZWxhdGVkbmVzcycsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnY2F1c2FsaXR5TWV0aG9kJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdjYXVzYWxpdHlBdXRob3InLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2NhdXNhbGl0eVJlc3VsdCcsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQWR2ZXJzZUV2ZW50IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEFkdmVyc2VFdmVudEFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIkFkdmVyc2VFdmVudFwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgaWRlbnRpZmllcihzKSBvZiB0aGlzIGFkdmVyc2UgZXZlbnQgdGhhdCBhcmUgYXNzaWduZWQgYnkgYnVzaW5lc3MgcHJvY2Vzc2VzIGFuZC9vciB1c2VkIHRvIHJlZmVyIHRvIGl0IHdoZW4gYSBkaXJlY3QgVVJMIHJlZmVyZW5jZSB0byB0aGUgcmVzb3VyY2UgaXRzZWZsIGlzIG5vdCBhcHByb3ByaWF0ZS5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHR5cGUgb2YgZXZlbnQgd2hpY2ggaXMgaW1wb3J0YW50IHRvIGNoYXJhY3Rlcml6ZSB3aGF0IG9jY3VycmVkIGFuZCBjYXVzZWQgaGFybSB0byB0aGUgc3ViamVjdCwgb3IgaGFkIHRoZSBwb3RlbnRpYWwgdG8gY2F1c2UgaGFybSB0byB0aGUgc3ViamVjdC5cclxuICAgKi9cclxuICBjYXRlZ29yeT86IGZoaXIuRmhpckNvZGU8QWR2ZXJzZUV2ZW50Q2F0ZWdvcnlDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQWR2ZXJzZUV2ZW50LmNhdGVnb3J5XHJcbiAgICovXHJcbiAgX2NhdGVnb3J5PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgZGVmaW5lcyB0aGUgc3BlY2lmaWMgdHlwZSBvZiBldmVudCB0aGF0IG9jY3VycmVkIG9yIHRoYXQgd2FzIHByZXZlbnRlZCBmcm9tIG9jY3VycmluZy5cclxuICAgKi9cclxuICB0eXBlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIHN1YmplY3Qgb3IgZ3JvdXAgaW1wYWN0ZWQgYnkgdGhlIGV2ZW50LiAgV2l0aCBhIHByb3NwZWN0aXZlIGFkdmVyc2UgZXZlbnQsIHRoZXJlIHdpbGwgYmUgbm8gc3ViamVjdCBhcyB0aGUgYWR2ZXJzZSBldmVudCB3YXMgcHJldmVudGVkLlxyXG4gICAqL1xyXG4gIHN1YmplY3Q/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRlIChhbmQgcGVyaGFwcyB0aW1lKSB3aGVuIHRoZSBhZHZlcnNlIGV2ZW50IG9jY3VycmVkLlxyXG4gICAqL1xyXG4gIGRhdGU/OiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBBZHZlcnNlRXZlbnQuZGF0ZVxyXG4gICAqL1xyXG4gIF9kYXRlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBJbmNsdWRlcyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgcmVhY3Rpb24gdGhhdCBvY2N1cnJlZCBhcyBhIHJlc3VsdCBvZiBleHBvc3VyZSB0byBhIHN1YnN0YW5jZSAoZm9yIGV4YW1wbGUsIGEgZHJ1ZyBvciBhIGNoZW1pY2FsKS5cclxuICAgKi9cclxuICByZWFjdGlvbj86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgaW5mb3JtYXRpb24gYWJvdXQgd2hlcmUgdGhlIGFkdmVyc2UgZXZlbnQgb2NjdXJyZWQuXHJcbiAgICovXHJcbiAgbG9jYXRpb24/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB0aGUgc2VyaW91c25lc3Mgb3Igc2V2ZXJpdHkgb2YgdGhlIGFkdmVyc2UgZXZlbnQuXHJcbiAgICovXHJcbiAgc2VyaW91c25lc3M/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB0aGUgdHlwZSBvZiBvdXRjb21lIGZyb20gdGhlIGFkdmVyc2UgZXZlbnQuXHJcbiAgICovXHJcbiAgb3V0Y29tZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5mb3JtYXRpb24gb24gd2hvIHJlY29yZGVkIHRoZSBhZHZlcnNlIGV2ZW50LiAgTWF5IGJlIHRoZSBwYXRpZW50IG9yIGEgcHJhY3RpdGlvbmVyLlxyXG4gICAqL1xyXG4gIHJlY29yZGVyPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBQYXJ0aWVzIHRoYXQgbWF5IG9yIHNob3VsZCBjb250cmlidXRlIG9yIGhhdmUgY29udHJpYnV0ZWQgaW5mb3JtYXRpb24gdG8gdGhlIEFjdC4gU3VjaCBpbmZvcm1hdGlvbiBpbmNsdWRlcyBpbmZvcm1hdGlvbiBsZWFkaW5nIHRvIHRoZSBkZWNpc2lvbiB0byBwZXJmb3JtIHRoZSBBY3QgYW5kIGhvdyB0byBwZXJmb3JtIHRoZSBBY3QgKGUuZy4gY29uc3VsdGFudCksIGluZm9ybWF0aW9uIHRoYXQgdGhlIEFjdCBpdHNlbGYgc2Vla3MgdG8gcmV2ZWFsIChlLmcuIGluZm9ybWFudCBvZiBjbGluaWNhbCBoaXN0b3J5KSwgb3IgaW5mb3JtYXRpb24gYWJvdXQgd2hhdCBBY3Qgd2FzIHBlcmZvcm1lZCAoZS5nLiBpbmZvcm1hbnQgd2l0bmVzcykuXHJcbiAgICovXHJcbiAgZXZlbnRQYXJ0aWNpcGFudD86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHRoZSBhZHZlcnNlIGV2ZW50IGluIHRleHQuXHJcbiAgICovXHJcbiAgZGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQWR2ZXJzZUV2ZW50LmRlc2NyaXB0aW9uXHJcbiAgICovXHJcbiAgX2Rlc2NyaXB0aW9uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgdGhlIGVudGl0eSB0aGF0IGlzIHN1c3BlY3RlZCB0byBoYXZlIGNhdXNlZCB0aGUgYWR2ZXJzZSBldmVudC5cclxuICAgKi9cclxuICBzdXNwZWN0RW50aXR5PzogZmhpci5BZHZlcnNlRXZlbnRTdXNwZWN0RW50aXR5QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBZHZlcnNlRXZlbnQuc3ViamVjdE1lZGljYWxIaXN0b3J5LlxyXG4gICAqL1xyXG4gIHN1YmplY3RNZWRpY2FsSGlzdG9yeT86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBZHZlcnNlRXZlbnQucmVmZXJlbmNlRG9jdW1lbnQuXHJcbiAgICovXHJcbiAgcmVmZXJlbmNlRG9jdW1lbnQ/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWR2ZXJzZUV2ZW50LnN0dWR5LlxyXG4gICAqL1xyXG4gIHN0dWR5PzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQWN0dWFsIG9yICBwb3RlbnRpYWwvYXZvaWRlZCBldmVudCBjYXVzaW5nIHVuaW50ZW5kZWQgcGh5c2ljYWwgaW5qdXJ5IHJlc3VsdGluZyBmcm9tIG9yIGNvbnRyaWJ1dGVkIHRvIGJ5IG1lZGljYWwgY2FyZSwgYSByZXNlYXJjaCBzdHVkeSBvciBvdGhlciBoZWFsdGhjYXJlIHNldHRpbmcgZmFjdG9ycyB0aGF0IHJlcXVpcmVzIGFkZGl0aW9uYWwgbW9uaXRvcmluZywgdHJlYXRtZW50LCBvciBob3NwaXRhbGl6YXRpb24sIG9yIHRoYXQgcmVzdWx0cyBpbiBkZWF0aC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBBZHZlcnNlRXZlbnQgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0FkdmVyc2VFdmVudCc7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJBZHZlcnNlRXZlbnRcIjtcclxuICAvKipcclxuICAgKiBUaGUgaWRlbnRpZmllcihzKSBvZiB0aGlzIGFkdmVyc2UgZXZlbnQgdGhhdCBhcmUgYXNzaWduZWQgYnkgYnVzaW5lc3MgcHJvY2Vzc2VzIGFuZC9vciB1c2VkIHRvIHJlZmVyIHRvIGl0IHdoZW4gYSBkaXJlY3QgVVJMIHJlZmVyZW5jZSB0byB0aGUgcmVzb3VyY2UgaXRzZWZsIGlzIG5vdCBhcHByb3ByaWF0ZS5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHR5cGUgb2YgZXZlbnQgd2hpY2ggaXMgaW1wb3J0YW50IHRvIGNoYXJhY3Rlcml6ZSB3aGF0IG9jY3VycmVkIGFuZCBjYXVzZWQgaGFybSB0byB0aGUgc3ViamVjdCwgb3IgaGFkIHRoZSBwb3RlbnRpYWwgdG8gY2F1c2UgaGFybSB0byB0aGUgc3ViamVjdC5cclxuICAgKi9cclxuICBwdWJsaWMgY2F0ZWdvcnk/OiBmaGlyLkZoaXJDb2RlPEFkdmVyc2VFdmVudENhdGVnb3J5Q29kZVR5cGU+fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgZGVmaW5lcyB0aGUgc3BlY2lmaWMgdHlwZSBvZiBldmVudCB0aGF0IG9jY3VycmVkIG9yIHRoYXQgd2FzIHByZXZlbnRlZCBmcm9tIG9jY3VycmluZy5cclxuICAgKi9cclxuICBwdWJsaWMgdHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIHN1YmplY3Qgb3IgZ3JvdXAgaW1wYWN0ZWQgYnkgdGhlIGV2ZW50LiAgV2l0aCBhIHByb3NwZWN0aXZlIGFkdmVyc2UgZXZlbnQsIHRoZXJlIHdpbGwgYmUgbm8gc3ViamVjdCBhcyB0aGUgYWR2ZXJzZSBldmVudCB3YXMgcHJldmVudGVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdWJqZWN0PzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRlIChhbmQgcGVyaGFwcyB0aW1lKSB3aGVuIHRoZSBhZHZlcnNlIGV2ZW50IG9jY3VycmVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkYXRlPzogZmhpci5GaGlyRGF0ZVRpbWV8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluY2x1ZGVzIGluZm9ybWF0aW9uIGFib3V0IHRoZSByZWFjdGlvbiB0aGF0IG9jY3VycmVkIGFzIGEgcmVzdWx0IG9mIGV4cG9zdXJlIHRvIGEgc3Vic3RhbmNlIChmb3IgZXhhbXBsZSwgYSBkcnVnIG9yIGEgY2hlbWljYWwpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWFjdGlvbjogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBUaGUgaW5mb3JtYXRpb24gYWJvdXQgd2hlcmUgdGhlIGFkdmVyc2UgZXZlbnQgb2NjdXJyZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGxvY2F0aW9uPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB0aGUgc2VyaW91c25lc3Mgb3Igc2V2ZXJpdHkgb2YgdGhlIGFkdmVyc2UgZXZlbnQuXHJcbiAgICovXHJcbiAgcHVibGljIHNlcmlvdXNuZXNzPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB0aGUgdHlwZSBvZiBvdXRjb21lIGZyb20gdGhlIGFkdmVyc2UgZXZlbnQuXHJcbiAgICovXHJcbiAgcHVibGljIG91dGNvbWU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5mb3JtYXRpb24gb24gd2hvIHJlY29yZGVkIHRoZSBhZHZlcnNlIGV2ZW50LiAgTWF5IGJlIHRoZSBwYXRpZW50IG9yIGEgcHJhY3RpdGlvbmVyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWNvcmRlcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBQYXJ0aWVzIHRoYXQgbWF5IG9yIHNob3VsZCBjb250cmlidXRlIG9yIGhhdmUgY29udHJpYnV0ZWQgaW5mb3JtYXRpb24gdG8gdGhlIEFjdC4gU3VjaCBpbmZvcm1hdGlvbiBpbmNsdWRlcyBpbmZvcm1hdGlvbiBsZWFkaW5nIHRvIHRoZSBkZWNpc2lvbiB0byBwZXJmb3JtIHRoZSBBY3QgYW5kIGhvdyB0byBwZXJmb3JtIHRoZSBBY3QgKGUuZy4gY29uc3VsdGFudCksIGluZm9ybWF0aW9uIHRoYXQgdGhlIEFjdCBpdHNlbGYgc2Vla3MgdG8gcmV2ZWFsIChlLmcuIGluZm9ybWFudCBvZiBjbGluaWNhbCBoaXN0b3J5KSwgb3IgaW5mb3JtYXRpb24gYWJvdXQgd2hhdCBBY3Qgd2FzIHBlcmZvcm1lZCAoZS5nLiBpbmZvcm1hbnQgd2l0bmVzcykuXHJcbiAgICovXHJcbiAgcHVibGljIGV2ZW50UGFydGljaXBhbnQ/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHRoZSBhZHZlcnNlIGV2ZW50IGluIHRleHQuXHJcbiAgICovXHJcbiAgcHVibGljIGRlc2NyaXB0aW9uPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgdGhlIGVudGl0eSB0aGF0IGlzIHN1c3BlY3RlZCB0byBoYXZlIGNhdXNlZCB0aGUgYWR2ZXJzZSBldmVudC5cclxuICAgKi9cclxuICBwdWJsaWMgc3VzcGVjdEVudGl0eTogZmhpci5BZHZlcnNlRXZlbnRTdXNwZWN0RW50aXR5W107XHJcbiAgLyoqXHJcbiAgICogQWR2ZXJzZUV2ZW50LnN1YmplY3RNZWRpY2FsSGlzdG9yeS5cclxuICAgKi9cclxuICBwdWJsaWMgc3ViamVjdE1lZGljYWxIaXN0b3J5OiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIEFkdmVyc2VFdmVudC5yZWZlcmVuY2VEb2N1bWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgcmVmZXJlbmNlRG9jdW1lbnQ6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogQWR2ZXJzZUV2ZW50LnN0dWR5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdHVkeTogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBBZHZlcnNlRXZlbnQgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxBZHZlcnNlRXZlbnRBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnQWR2ZXJzZUV2ZW50JztcclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBuZXcgZmhpci5JZGVudGlmaWVyKHNvdXJjZS5pZGVudGlmaWVyLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY2F0ZWdvcnknXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuY2F0ZWdvcnkgPSBuZXcgZmhpci5GaGlyQ29kZTxBZHZlcnNlRXZlbnRDYXRlZ29yeUNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5jYXRlZ29yeX0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfY2F0ZWdvcnknXSkge1xyXG4gICAgICBpZiAodGhpcy5jYXRlZ29yeSkgeyB0aGlzLmNhdGVnb3J5LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2NhdGVnb3J5ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuY2F0ZWdvcnkgPSBuZXcgZmhpci5GaGlyQ29kZTxBZHZlcnNlRXZlbnRDYXRlZ29yeUNvZGVUeXBlPihzb3VyY2UuX2NhdGVnb3J5IGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd0eXBlJ10pIHsgdGhpcy50eXBlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS50eXBlLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3ViamVjdCddKSB7IHRoaXMuc3ViamVjdCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2Uuc3ViamVjdCwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2RhdGUnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuZGF0ZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5kYXRlfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19kYXRlJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZGF0ZSkgeyB0aGlzLmRhdGUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZGF0ZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRhdGUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoc291cmNlLl9kYXRlIGFzIFBhcnRpYWw8Zmhpci5GaGlyRGF0ZVRpbWVBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3JlYWN0aW9uJ10pIHsgdGhpcy5yZWFjdGlvbiA9IHNvdXJjZS5yZWFjdGlvbi5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnJlYWN0aW9uID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2xvY2F0aW9uJ10pIHsgdGhpcy5sb2NhdGlvbiA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UubG9jYXRpb24sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydzZXJpb3VzbmVzcyddKSB7IHRoaXMuc2VyaW91c25lc3MgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnNlcmlvdXNuZXNzLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnb3V0Y29tZSddKSB7IHRoaXMub3V0Y29tZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2Uub3V0Y29tZSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3JlY29yZGVyJ10pIHsgdGhpcy5yZWNvcmRlciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UucmVjb3JkZXIsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydldmVudFBhcnRpY2lwYW50J10pIHsgdGhpcy5ldmVudFBhcnRpY2lwYW50ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5ldmVudFBhcnRpY2lwYW50LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGVzY3JpcHRpb24nXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuZGVzY3JpcHRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmRlc2NyaXB0aW9ufSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19kZXNjcmlwdGlvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLmRlc2NyaXB0aW9uKSB7IHRoaXMuZGVzY3JpcHRpb24uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZGVzY3JpcHRpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5kZXNjcmlwdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9kZXNjcmlwdGlvbiBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3VzcGVjdEVudGl0eSddKSB7IHRoaXMuc3VzcGVjdEVudGl0eSA9IHNvdXJjZS5zdXNwZWN0RW50aXR5Lm1hcCgoeCkgPT4gbmV3IGZoaXIuQWR2ZXJzZUV2ZW50U3VzcGVjdEVudGl0eSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN1c3BlY3RFbnRpdHkgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3ViamVjdE1lZGljYWxIaXN0b3J5J10pIHsgdGhpcy5zdWJqZWN0TWVkaWNhbEhpc3RvcnkgPSBzb3VyY2Uuc3ViamVjdE1lZGljYWxIaXN0b3J5Lm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3ViamVjdE1lZGljYWxIaXN0b3J5ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3JlZmVyZW5jZURvY3VtZW50J10pIHsgdGhpcy5yZWZlcmVuY2VEb2N1bWVudCA9IHNvdXJjZS5yZWZlcmVuY2VEb2N1bWVudC5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnJlZmVyZW5jZURvY3VtZW50ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0dWR5J10pIHsgdGhpcy5zdHVkeSA9IHNvdXJjZS5zdHVkeS5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0dWR5ID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdBZHZlcnNlRXZlbnQnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdpZGVudGlmaWVyJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TVignY2F0ZWdvcnknLGV4cCwnQWR2ZXJzZUV2ZW50Q2F0ZWdvcnknLEFkdmVyc2VFdmVudENhdGVnb3J5VnNWYWxpZGF0aW9uLCdyJykpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3R5cGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3N1YmplY3QnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2RhdGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3JlYWN0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdsb2NhdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnc2VyaW91c25lc3MnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1NWKCdvdXRjb21lJyxleHAsJ0FkdmVyc2VFdmVudE91dGNvbWUnLEFkdmVyc2VFdmVudE91dGNvbWVWc1ZhbGlkYXRpb24sJ3InKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygncmVjb3JkZXInLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2V2ZW50UGFydGljaXBhbnQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2Rlc2NyaXB0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdzdXNwZWN0RW50aXR5JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdzdWJqZWN0TWVkaWNhbEhpc3RvcnknLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3JlZmVyZW5jZURvY3VtZW50JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdzdHVkeScsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4iXX0=