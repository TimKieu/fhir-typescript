// <auto-generated/>
// Contents of: hl7.fhir.r3.core version: 3.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: AdverseEvent
import * as fhir from '../fhir.js';
// @ts-ignore
import { AdverseEventCausalityVsValidation } from '../fhirValueSets/AdverseEventCausalityVsValidation.js';
// @ts-ignore
import { AdverseEventCategoryVsValidation } from '../fhirValueSets/AdverseEventCategoryVsValidation.js';
// @ts-ignore
import { AdverseEventOutcomeVsValidation } from '../fhirValueSets/AdverseEventOutcomeVsValidation.js';
/**
 * Describes the entity that is suspected to have caused the adverse event.
 */
export class AdverseEventSuspectEntity extends fhir.BackboneElement {
    /**
     * Default constructor for AdverseEventSuspectEntity - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['instance']) {
            this.instance = new fhir.Reference(source.instance);
        }
        else {
            this.instance = null;
        }
        if (source['causality']) {
            this.causality = new fhir.FhirCode({ value: source.causality });
        }
        if (source['_causality']) {
            if (this.causality) {
                this.causality.addExtendedProperties(source._causality);
            }
            else {
                this.causality = new fhir.FhirCode(source._causality);
            }
        }
        if (source['causalityAssessment']) {
            this.causalityAssessment = new fhir.CodeableConcept(source.causalityAssessment);
        }
        if (source['causalityProductRelatedness']) {
            this.causalityProductRelatedness = new fhir.FhirString({ value: source.causalityProductRelatedness });
        }
        if (source['_causalityProductRelatedness']) {
            if (this.causalityProductRelatedness) {
                this.causalityProductRelatedness.addExtendedProperties(source._causalityProductRelatedness);
            }
            else {
                this.causalityProductRelatedness = new fhir.FhirString(source._causalityProductRelatedness);
            }
        }
        if (source['causalityMethod']) {
            this.causalityMethod = new fhir.CodeableConcept(source.causalityMethod);
        }
        if (source['causalityAuthor']) {
            this.causalityAuthor = new fhir.Reference(source.causalityAuthor);
        }
        if (source['causalityResult']) {
            this.causalityResult = new fhir.CodeableConcept(source.causalityResult);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'AdverseEvent.suspectEntity';
        }
        this.vRS('instance', exp);
        this.vOSV('causality', exp, 'AdverseEventCausality', AdverseEventCausalityVsValidation, 'r');
        this.vOS('causalityAssessment', exp);
        this.vOS('causalityProductRelatedness', exp);
        this.vOS('causalityMethod', exp);
        this.vOS('causalityAuthor', exp);
        this.vOS('causalityResult', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
AdverseEventSuspectEntity._fts_dataType = 'AdverseEventSuspectEntity';
/**
 * Actual or  potential/avoided event causing unintended physical injury resulting from or contributed to by medical care, a research study or other healthcare setting factors that requires additional monitoring, treatment, or hospitalization, or that results in death.
 */
export class AdverseEvent extends fhir.DomainResource {
    /**
     * Default constructor for AdverseEvent - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'AdverseEvent';
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier);
        }
        if (source['category']) {
            this.category = new fhir.FhirCode({ value: source.category });
        }
        if (source['_category']) {
            if (this.category) {
                this.category.addExtendedProperties(source._category);
            }
            else {
                this.category = new fhir.FhirCode(source._category);
            }
        }
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type);
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject);
        }
        if (source['date']) {
            this.date = new fhir.FhirDateTime({ value: source.date });
        }
        if (source['_date']) {
            if (this.date) {
                this.date.addExtendedProperties(source._date);
            }
            else {
                this.date = new fhir.FhirDateTime(source._date);
            }
        }
        if (source['reaction']) {
            this.reaction = source.reaction.map((x) => new fhir.Reference(x));
        }
        else {
            this.reaction = [];
        }
        if (source['location']) {
            this.location = new fhir.Reference(source.location);
        }
        if (source['seriousness']) {
            this.seriousness = new fhir.CodeableConcept(source.seriousness);
        }
        if (source['outcome']) {
            this.outcome = new fhir.CodeableConcept(source.outcome);
        }
        if (source['recorder']) {
            this.recorder = new fhir.Reference(source.recorder);
        }
        if (source['eventParticipant']) {
            this.eventParticipant = new fhir.Reference(source.eventParticipant);
        }
        if (source['description']) {
            this.description = new fhir.FhirString({ value: source.description });
        }
        if (source['_description']) {
            if (this.description) {
                this.description.addExtendedProperties(source._description);
            }
            else {
                this.description = new fhir.FhirString(source._description);
            }
        }
        if (source['suspectEntity']) {
            this.suspectEntity = source.suspectEntity.map((x) => new fhir.AdverseEventSuspectEntity(x));
        }
        else {
            this.suspectEntity = [];
        }
        if (source['subjectMedicalHistory']) {
            this.subjectMedicalHistory = source.subjectMedicalHistory.map((x) => new fhir.Reference(x));
        }
        else {
            this.subjectMedicalHistory = [];
        }
        if (source['referenceDocument']) {
            this.referenceDocument = source.referenceDocument.map((x) => new fhir.Reference(x));
        }
        else {
            this.referenceDocument = [];
        }
        if (source['study']) {
            this.study = source.study.map((x) => new fhir.Reference(x));
        }
        else {
            this.study = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'AdverseEvent';
        }
        this.vRS('resourceType', exp);
        this.vOS('identifier', exp);
        this.vOSV('category', exp, 'AdverseEventCategory', AdverseEventCategoryVsValidation, 'r');
        this.vOS('type', exp);
        this.vOS('subject', exp);
        this.vOS('date', exp);
        this.vOA('reaction', exp);
        this.vOS('location', exp);
        this.vOS('seriousness', exp);
        this.vOSV('outcome', exp, 'AdverseEventOutcome', AdverseEventOutcomeVsValidation, 'r');
        this.vOS('recorder', exp);
        this.vOS('eventParticipant', exp);
        this.vOS('description', exp);
        this.vOA('suspectEntity', exp);
        this.vOA('subjectMedicalHistory', exp);
        this.vOA('referenceDocument', exp);
        this.vOA('study', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
AdverseEvent._fts_dataType = 'AdverseEvent';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQWR2ZXJzZUV2ZW50LmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9BZHZlcnNlRXZlbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsOEJBQThCO0FBRTlCLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBSW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsaUNBQWlDLEVBQUUsTUFBTSx1REFBdUQsQ0FBQztBQWUxRyxhQUFhO0FBQ2IsT0FBTyxFQUFFLGdDQUFnQyxFQUFFLE1BQU0sc0RBQXNELENBQUM7QUFXeEcsYUFBYTtBQUNiLE9BQU8sRUFBRSwrQkFBK0IsRUFBRSxNQUFNLHFEQUFxRCxDQUFDO0FBMkN0Rzs7R0FFRztBQUNILE1BQU0sT0FBTyx5QkFBMEIsU0FBUSxJQUFJLENBQUMsZUFBZTtJQWlDakU7O09BRUc7SUFDSCxZQUFZLFNBQWdELEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQ3RHLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7U0FBRTthQUMzRTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDOUIsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBZ0MsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLFNBQVMsRUFBQyxDQUFDLENBQUM7U0FBRTtRQUMxSCxJQUFJLE1BQU0sQ0FBQyxZQUFZLENBQUMsRUFBRTtZQUN4QixJQUFJLElBQUksQ0FBQyxTQUFTLEVBQUU7Z0JBQUUsSUFBSSxDQUFDLFNB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QixJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUNwQixJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUN4QixJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUN4QixJQUFJLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUMzQixJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBQyxHQUFHLEVBQUMscUJBQXFCLEVBQUMsK0JBQStCLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDbEYsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDeEIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUNoQyxJQUFJLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUMzQixJQUFJLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUM3QixJQUFJLENBQUMsR0FBRyxDQUFDLHVCQUF1QixFQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ3JDLElBQUksQ0FBQyxHQUFHLENBQUMsbUJBQW1CLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDakMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDckIsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQzs7QUF4SUQ7O0dBRUc7QUFDNkIsMEJBQWEsR0FBVSxjQUFjLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjMuY29yZSB2ZXJzaW9uOiAzLjAuMlxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IEFkdmVyc2VFdmVudFxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQWR2ZXJzZUV2ZW50Q2F1c2FsaXR5Q29kZXMsICBBZHZlcnNlRXZlbnRDYXVzYWxpdHlDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQWR2ZXJzZUV2ZW50Q2F1c2FsaXR5Q29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFkdmVyc2VFdmVudENhdXNhbGl0eVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQWR2ZXJzZUV2ZW50Q2F1c2FsaXR5VnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBBZHZlcnNlRXZlbnRDYXVzYWxpdHlBc3Nlc3NDb2RlcywgIEFkdmVyc2VFdmVudENhdXNhbGl0eUFzc2Vzc0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BZHZlcnNlRXZlbnRDYXVzYWxpdHlBc3Nlc3NDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQWR2ZXJzZUV2ZW50Q2F1c2FsaXR5QXNzZXNzVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BZHZlcnNlRXZlbnRDYXVzYWxpdHlBc3Nlc3NWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFkdmVyc2VFdmVudENhdXNhbGl0eU1ldGhvZENvZGVzLCAgQWR2ZXJzZUV2ZW50Q2F1c2FsaXR5TWV0aG9kQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0FkdmVyc2VFdmVudENhdXNhbGl0eU1ldGhvZENvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBBZHZlcnNlRXZlbnRDYXVzYWxpdHlNZXRob2RWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0FkdmVyc2VFdmVudENhdXNhbGl0eU1ldGhvZFZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQWR2ZXJzZUV2ZW50Q2F1c2FsaXR5UmVzdWx0Q29kZXMsICBBZHZlcnNlRXZlbnRDYXVzYWxpdHlSZXN1bHRDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQWR2ZXJzZUV2ZW50Q2F1c2FsaXR5UmVzdWx0Q29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFkdmVyc2VFdmVudENhdXNhbGl0eVJlc3VsdFZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQWR2ZXJzZUV2ZW50Q2F1c2FsaXR5UmVzdWx0VnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBBZHZlcnNlRXZlbnRDYXRlZ29yeUNvZGVzLCAgQWR2ZXJzZUV2ZW50Q2F0ZWdvcnlDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQWR2ZXJzZUV2ZW50Q2F0ZWdvcnlDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQWR2ZXJzZUV2ZW50Q2F0ZWdvcnlWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0FkdmVyc2VFdmVudENhdGVnb3J5VnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBBZHZlcnNlRXZlbnRUeXBlQ29kZXMsICBBZHZlcnNlRXZlbnRUeXBlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0FkdmVyc2VFdmVudFR5cGVDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQWR2ZXJzZUV2ZW50VHlwZVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQWR2ZXJzZUV2ZW50VHlwZVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQWR2ZXJzZUV2ZW50U2VyaW91c25lc3NDb2RlcywgIEFkdmVyc2VFdmVudFNlcmlvdXNuZXNzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0FkdmVyc2VFdmVudFNlcmlvdXNuZXNzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFkdmVyc2VFdmVudFNlcmlvdXNuZXNzVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BZHZlcnNlRXZlbnRTZXJpb3VzbmVzc1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQWR2ZXJzZUV2ZW50T3V0Y29tZUNvZGVzLCAgQWR2ZXJzZUV2ZW50T3V0Y29tZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BZHZlcnNlRXZlbnRPdXRjb21lQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFkdmVyc2VFdmVudE91dGNvbWVWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0FkdmVyc2VFdmVudE91dGNvbWVWc1ZhbGlkYXRpb24uanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQWR2ZXJzZUV2ZW50U3VzcGVjdEVudGl0eSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBBZHZlcnNlRXZlbnRTdXNwZWN0RW50aXR5QXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgYWN0dWFsIGluc3RhbmNlIG9mIHdoYXQgY2F1c2VkIHRoZSBhZHZlcnNlIGV2ZW50LiAgTWF5IGJlIGEgc3Vic3RhbmNlLCBtZWRpY2F0aW9uLCBtZWRpY2F0aW9uIGFkbWluaXN0cmF0aW9uLCBtZWRpY2F0aW9uIHN0YXRlbWVudCBvciBhIGRldmljZS5cclxuICAgKi9cclxuICBpbnN0YW5jZTogZmhpci5SZWZlcmVuY2VBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogY2F1c2FsaXR5MSB8IGNhdXNhbGl0eTIuXHJcbiAgICovXHJcbiAgY2F1c2FsaXR5PzogZmhpci5GaGlyQ29kZTxBZHZlcnNlRXZlbnRDYXVzYWxpdHlDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQWR2ZXJzZUV2ZW50LnN1c3BlY3RFbnRpdHkuY2F1c2FsaXR5XHJcbiAgICovXHJcbiAgX2NhdXNhbGl0eT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogYXNzZXNzMSB8IGFzc2VzczIuXHJcbiAgICovXHJcbiAgY2F1c2FsaXR5QXNzZXNzbWVudD86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWR2ZXJzZUV2ZW50LnN1c3BlY3RFbnRpdHkuY2F1c2FsaXR5UHJvZHVjdFJlbGF0ZWRuZXNzLlxyXG4gICAqL1xyXG4gIGNhdXNhbGl0eVByb2R1Y3RSZWxhdGVkbmVzcz86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBBZHZlcnNlRXZlbnQuc3VzcGVjdEVudGl0eS5jYXVzYWxpdHlQcm9kdWN0UmVsYXRlZG5lc3NcclxuICAgKi9cclxuICBfY2F1c2FsaXR5UHJvZHVjdFJlbGF0ZWRuZXNzPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBtZXRob2QxIHwgbWV0aG9kMi5cclxuICAgKi9cclxuICBjYXVzYWxpdHlNZXRob2Q/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFkdmVyc2VFdmVudC5zdXNwZWN0RW50aXR5LmNhdXNhbGl0eUF1dGhvci5cclxuICAgKi9cclxuICBjYXVzYWxpdHlBdXRob3I/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIHJlc3VsdDEgfCByZXN1bHQyLlxyXG4gICAqL1xyXG4gIGNhdXNhbGl0eVJlc3VsdD86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEZXNjcmliZXMgdGhlIGVudGl0eSB0aGF0IGlzIHN1c3BlY3RlZCB0byBoYXZlIGNhdXNlZCB0aGUgYWR2ZXJzZSBldmVudC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBBZHZlcnNlRXZlbnRTdXNwZWN0RW50aXR5IGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQWR2ZXJzZUV2ZW50U3VzcGVjdEVudGl0eSc7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgYWN0dWFsIGluc3RhbmNlIG9mIHdoYXQgY2F1c2VkIHRoZSBhZHZlcnNlIGV2ZW50LiAgTWF5IGJlIGEgc3Vic3RhbmNlLCBtZWRpY2F0aW9uLCBtZWRpY2F0aW9uIGFkbWluaXN0cmF0aW9uLCBtZWRpY2F0aW9uIHN0YXRlbWVudCBvciBhIGRldmljZS5cclxuICAgKi9cclxuICBwdWJsaWMgaW5zdGFuY2U6IGZoaXIuUmVmZXJlbmNlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogY2F1c2FsaXR5MSB8IGNhdXNhbGl0eTIuXHJcbiAgICovXHJcbiAgcHVibGljIGNhdXNhbGl0eT86IGZoaXIuRmhpckNvZGU8QWR2ZXJzZUV2ZW50Q2F1c2FsaXR5Q29kZVR5cGU+fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBhc3Nlc3MxIHwgYXNzZXNzMi5cclxuICAgKi9cclxuICBwdWJsaWMgY2F1c2FsaXR5QXNzZXNzbWVudD86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBZHZlcnNlRXZlbnQuc3VzcGVjdEVudGl0eS5jYXVzYWxpdHlQcm9kdWN0UmVsYXRlZG5lc3MuXHJcbiAgICovXHJcbiAgcHVibGljIGNhdXNhbGl0eVByb2R1Y3RSZWxhdGVkbmVzcz86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogbWV0aG9kMSB8IG1ldGhvZDIuXHJcbiAgICovXHJcbiAgcHVibGljIGNhdXNhbGl0eU1ldGhvZD86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBZHZlcnNlRXZlbnQuc3VzcGVjdEVudGl0eS5jYXVzYWxpdHlBdXRob3IuXHJcbiAgICovXHJcbiAgcHVibGljIGNhdXNhbGl0eUF1dGhvcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiByZXN1bHQxIHwgcmVzdWx0Mi5cclxuICAgKi9cclxuICBwdWJsaWMgY2F1c2FsaXR5UmVzdWx0PzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEFkdmVyc2VFdmVudFN1c3BlY3RFbnRpdHkgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxBZHZlcnNlRXZlbnRTdXNwZWN0RW50aXR5QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2luc3RhbmNlJ10pIHsgdGhpcy5pbnN0YW5jZSA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuaW5zdGFuY2UpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pbnN0YW5jZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NhdXNhbGl0eSddKSB7IHRoaXMuY2F1c2FsaXR5ID0gbmV3IGZoaXIuRmhpckNvZGU8QWR2ZXJzZUV2ZW50Q2F1c2FsaXR5Q29kZVR5cGU+KHt2YWx1ZTogc291cmNlLmNhdXNhbGl0eX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfY2F1c2FsaXR5J10pIHtcclxuICAgICAgaWYgKHRoaXMuY2F1c2FsaXR5KSB7IHRoaXMuY2F1c2FsaXR5LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2NhdXNhbGl0eSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmNhdXNhbGl0eSA9IG5ldyBmaGlyLkZoaXJDb2RlPEFkdmVyc2VFdmVudENhdXNhbGl0eUNvZGVUeXBlPihzb3VyY2UuX2NhdXNhbGl0eSBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnY2F1c2FsaXR5QXNzZXNzbWVudCddKSB7IHRoaXMuY2F1c2FsaXR5QXNzZXNzbWVudCA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY2F1c2FsaXR5QXNzZXNzbWVudCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NhdXNhbGl0eVByb2R1Y3RSZWxhdGVkbmVzcyddKSB7IHRoaXMuY2F1c2FsaXR5UHJvZHVjdFJlbGF0ZWRuZXNzID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5jYXVzYWxpdHlQcm9kdWN0UmVsYXRlZG5lc3N9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2NhdXNhbGl0eVByb2R1Y3RSZWxhdGVkbmVzcyddKSB7XHJcbiAgICAgIGlmICh0aGlzLmNhdXNhbGl0eVByb2R1Y3RSZWxhdGVkbmVzcykgeyB0aGlzLmNhdXNhbGl0eVByb2R1Y3RSZWxhdGVkbmVzcy5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9jYXVzYWxpdHlQcm9kdWN0UmVsYXRlZG5lc3MhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5jYXVzYWxpdHlQcm9kdWN0UmVsYXRlZG5lc3MgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fY2F1c2FsaXR5UHJvZHVjdFJlbGF0ZWRuZXNzIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydjYXVzYWxpdHlNZXRob2QnXSkgeyB0aGlzLmNhdXNhbGl0eU1ldGhvZCA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY2F1c2FsaXR5TWV0aG9kKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY2F1c2FsaXR5QXV0aG9yJ10pIHsgdGhpcy5jYXVzYWxpdHlBdXRob3IgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmNhdXNhbGl0eUF1dGhvcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NhdXNhbGl0eVJlc3VsdCddKSB7IHRoaXMuY2F1c2FsaXR5UmVzdWx0ID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jYXVzYWxpdHlSZXN1bHQpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnQWR2ZXJzZUV2ZW50LnN1c3BlY3RFbnRpdHknIH1cclxuICAgIHRoaXMudlJTKCdpbnN0YW5jZScsZXhwKVxyXG4gICAgdGhpcy52T1NWKCdjYXVzYWxpdHknLGV4cCwnQWR2ZXJzZUV2ZW50Q2F1c2FsaXR5JyxBZHZlcnNlRXZlbnRDYXVzYWxpdHlWc1ZhbGlkYXRpb24sJ3InKVxyXG4gICAgdGhpcy52T1MoJ2NhdXNhbGl0eUFzc2Vzc21lbnQnLGV4cClcclxuICAgIHRoaXMudk9TKCdjYXVzYWxpdHlQcm9kdWN0UmVsYXRlZG5lc3MnLGV4cClcclxuICAgIHRoaXMudk9TKCdjYXVzYWxpdHlNZXRob2QnLGV4cClcclxuICAgIHRoaXMudk9TKCdjYXVzYWxpdHlBdXRob3InLGV4cClcclxuICAgIHRoaXMudk9TKCdjYXVzYWxpdHlSZXN1bHQnLGV4cClcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBBZHZlcnNlRXZlbnQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQWR2ZXJzZUV2ZW50QXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiQWR2ZXJzZUV2ZW50XCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpZGVudGlmaWVyKHMpIG9mIHRoaXMgYWR2ZXJzZSBldmVudCB0aGF0IGFyZSBhc3NpZ25lZCBieSBidXNpbmVzcyBwcm9jZXNzZXMgYW5kL29yIHVzZWQgdG8gcmVmZXIgdG8gaXQgd2hlbiBhIGRpcmVjdCBVUkwgcmVmZXJlbmNlIHRvIHRoZSByZXNvdXJjZSBpdHNlZmwgaXMgbm90IGFwcHJvcHJpYXRlLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdHlwZSBvZiBldmVudCB3aGljaCBpcyBpbXBvcnRhbnQgdG8gY2hhcmFjdGVyaXplIHdoYXQgb2NjdXJyZWQgYW5kIGNhdXNlZCBoYXJtIHRvIHRoZSBzdWJqZWN0LCBvciBoYWQgdGhlIHBvdGVudGlhbCB0byBjYXVzZSBoYXJtIHRvIHRoZSBzdWJqZWN0LlxyXG4gICAqL1xyXG4gIGNhdGVnb3J5PzogZmhpci5GaGlyQ29kZTxBZHZlcnNlRXZlbnRDYXRlZ29yeUNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBBZHZlcnNlRXZlbnQuY2F0ZWdvcnlcclxuICAgKi9cclxuICBfY2F0ZWdvcnk/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBkZWZpbmVzIHRoZSBzcGVjaWZpYyB0eXBlIG9mIGV2ZW50IHRoYXQgb2NjdXJyZWQgb3IgdGhhdCB3YXMgcHJldmVudGVkIGZyb20gb2NjdXJyaW5nLlxyXG4gICAqL1xyXG4gIHR5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgc3ViamVjdCBvciBncm91cCBpbXBhY3RlZCBieSB0aGUgZXZlbnQuICBXaXRoIGEgcHJvc3BlY3RpdmUgYWR2ZXJzZSBldmVudCwgdGhlcmUgd2lsbCBiZSBubyBzdWJqZWN0IGFzIHRoZSBhZHZlcnNlIGV2ZW50IHdhcyBwcmV2ZW50ZWQuXHJcbiAgICovXHJcbiAgc3ViamVjdD86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgKGFuZCBwZXJoYXBzIHRpbWUpIHdoZW4gdGhlIGFkdmVyc2UgZXZlbnQgb2NjdXJyZWQuXHJcbiAgICovXHJcbiAgZGF0ZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEFkdmVyc2VFdmVudC5kYXRlXHJcbiAgICovXHJcbiAgX2RhdGU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEluY2x1ZGVzIGluZm9ybWF0aW9uIGFib3V0IHRoZSByZWFjdGlvbiB0aGF0IG9jY3VycmVkIGFzIGEgcmVzdWx0IG9mIGV4cG9zdXJlIHRvIGEgc3Vic3RhbmNlIChmb3IgZXhhbXBsZSwgYSBkcnVnIG9yIGEgY2hlbWljYWwpLlxyXG4gICAqL1xyXG4gIHJlYWN0aW9uPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpbmZvcm1hdGlvbiBhYm91dCB3aGVyZSB0aGUgYWR2ZXJzZSBldmVudCBvY2N1cnJlZC5cclxuICAgKi9cclxuICBsb2NhdGlvbj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHRoZSBzZXJpb3VzbmVzcyBvciBzZXZlcml0eSBvZiB0aGUgYWR2ZXJzZSBldmVudC5cclxuICAgKi9cclxuICBzZXJpb3VzbmVzcz86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHRoZSB0eXBlIG9mIG91dGNvbWUgZnJvbSB0aGUgYWR2ZXJzZSBldmVudC5cclxuICAgKi9cclxuICBvdXRjb21lPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmZvcm1hdGlvbiBvbiB3aG8gcmVjb3JkZWQgdGhlIGFkdmVyc2UgZXZlbnQuICBNYXkgYmUgdGhlIHBhdGllbnQgb3IgYSBwcmFjdGl0aW9uZXIuXHJcbiAgICovXHJcbiAgcmVjb3JkZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFBhcnRpZXMgdGhhdCBtYXkgb3Igc2hvdWxkIGNvbnRyaWJ1dGUgb3IgaGF2ZSBjb250cmlidXRlZCBpbmZvcm1hdGlvbiB0byB0aGUgQWN0LiBTdWNoIGluZm9ybWF0aW9uIGluY2x1ZGVzIGluZm9ybWF0aW9uIGxlYWRpbmcgdG8gdGhlIGRlY2lzaW9uIHRvIHBlcmZvcm0gdGhlIEFjdCBhbmQgaG93IHRvIHBlcmZvcm0gdGhlIEFjdCAoZS5nLiBjb25zdWx0YW50KSwgaW5mb3JtYXRpb24gdGhhdCB0aGUgQWN0IGl0c2VsZiBzZWVrcyB0byByZXZlYWwgKGUuZy4gaW5mb3JtYW50IG9mIGNsaW5pY2FsIGhpc3RvcnkpLCBvciBpbmZvcm1hdGlvbiBhYm91dCB3aGF0IEFjdCB3YXMgcGVyZm9ybWVkIChlLmcuIGluZm9ybWFudCB3aXRuZXNzKS5cclxuICAgKi9cclxuICBldmVudFBhcnRpY2lwYW50PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgdGhlIGFkdmVyc2UgZXZlbnQgaW4gdGV4dC5cclxuICAgKi9cclxuICBkZXNjcmlwdGlvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBBZHZlcnNlRXZlbnQuZGVzY3JpcHRpb25cclxuICAgKi9cclxuICBfZGVzY3JpcHRpb24/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB0aGUgZW50aXR5IHRoYXQgaXMgc3VzcGVjdGVkIHRvIGhhdmUgY2F1c2VkIHRoZSBhZHZlcnNlIGV2ZW50LlxyXG4gICAqL1xyXG4gIHN1c3BlY3RFbnRpdHk/OiBmaGlyLkFkdmVyc2VFdmVudFN1c3BlY3RFbnRpdHlBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFkdmVyc2VFdmVudC5zdWJqZWN0TWVkaWNhbEhpc3RvcnkuXHJcbiAgICovXHJcbiAgc3ViamVjdE1lZGljYWxIaXN0b3J5PzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFkdmVyc2VFdmVudC5yZWZlcmVuY2VEb2N1bWVudC5cclxuICAgKi9cclxuICByZWZlcmVuY2VEb2N1bWVudD86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBZHZlcnNlRXZlbnQuc3R1ZHkuXHJcbiAgICovXHJcbiAgc3R1ZHk/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBY3R1YWwgb3IgIHBvdGVudGlhbC9hdm9pZGVkIGV2ZW50IGNhdXNpbmcgdW5pbnRlbmRlZCBwaHlzaWNhbCBpbmp1cnkgcmVzdWx0aW5nIGZyb20gb3IgY29udHJpYnV0ZWQgdG8gYnkgbWVkaWNhbCBjYXJlLCBhIHJlc2VhcmNoIHN0dWR5IG9yIG90aGVyIGhlYWx0aGNhcmUgc2V0dGluZyBmYWN0b3JzIHRoYXQgcmVxdWlyZXMgYWRkaXRpb25hbCBtb25pdG9yaW5nLCB0cmVhdG1lbnQsIG9yIGhvc3BpdGFsaXphdGlvbiwgb3IgdGhhdCByZXN1bHRzIGluIGRlYXRoLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEFkdmVyc2VFdmVudCBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQWR2ZXJzZUV2ZW50JztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIkFkdmVyc2VFdmVudFwiO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpZGVudGlmaWVyKHMpIG9mIHRoaXMgYWR2ZXJzZSBldmVudCB0aGF0IGFyZSBhc3NpZ25lZCBieSBidXNpbmVzcyBwcm9jZXNzZXMgYW5kL29yIHVzZWQgdG8gcmVmZXIgdG8gaXQgd2hlbiBhIGRpcmVjdCBVUkwgcmVmZXJlbmNlIHRvIHRoZSByZXNvdXJjZSBpdHNlZmwgaXMgbm90IGFwcHJvcHJpYXRlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdHlwZSBvZiBldmVudCB3aGljaCBpcyBpbXBvcnRhbnQgdG8gY2hhcmFjdGVyaXplIHdoYXQgb2NjdXJyZWQgYW5kIGNhdXNlZCBoYXJtIHRvIHRoZSBzdWJqZWN0LCBvciBoYWQgdGhlIHBvdGVudGlhbCB0byBjYXVzZSBoYXJtIHRvIHRoZSBzdWJqZWN0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjYXRlZ29yeT86IGZoaXIuRmhpckNvZGU8QWR2ZXJzZUV2ZW50Q2F0ZWdvcnlDb2RlVHlwZT58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBkZWZpbmVzIHRoZSBzcGVjaWZpYyB0eXBlIG9mIGV2ZW50IHRoYXQgb2NjdXJyZWQgb3IgdGhhdCB3YXMgcHJldmVudGVkIGZyb20gb2NjdXJyaW5nLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0eXBlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgc3ViamVjdCBvciBncm91cCBpbXBhY3RlZCBieSB0aGUgZXZlbnQuICBXaXRoIGEgcHJvc3BlY3RpdmUgYWR2ZXJzZSBldmVudCwgdGhlcmUgd2lsbCBiZSBubyBzdWJqZWN0IGFzIHRoZSBhZHZlcnNlIGV2ZW50IHdhcyBwcmV2ZW50ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHN1YmplY3Q/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgKGFuZCBwZXJoYXBzIHRpbWUpIHdoZW4gdGhlIGFkdmVyc2UgZXZlbnQgb2NjdXJyZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGRhdGU/OiBmaGlyLkZoaXJEYXRlVGltZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5jbHVkZXMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHJlYWN0aW9uIHRoYXQgb2NjdXJyZWQgYXMgYSByZXN1bHQgb2YgZXhwb3N1cmUgdG8gYSBzdWJzdGFuY2UgKGZvciBleGFtcGxlLCBhIGRydWcgb3IgYSBjaGVtaWNhbCkuXHJcbiAgICovXHJcbiAgcHVibGljIHJlYWN0aW9uOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpbmZvcm1hdGlvbiBhYm91dCB3aGVyZSB0aGUgYWR2ZXJzZSBldmVudCBvY2N1cnJlZC5cclxuICAgKi9cclxuICBwdWJsaWMgbG9jYXRpb24/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHRoZSBzZXJpb3VzbmVzcyBvciBzZXZlcml0eSBvZiB0aGUgYWR2ZXJzZSBldmVudC5cclxuICAgKi9cclxuICBwdWJsaWMgc2VyaW91c25lc3M/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHRoZSB0eXBlIG9mIG91dGNvbWUgZnJvbSB0aGUgYWR2ZXJzZSBldmVudC5cclxuICAgKi9cclxuICBwdWJsaWMgb3V0Y29tZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmZvcm1hdGlvbiBvbiB3aG8gcmVjb3JkZWQgdGhlIGFkdmVyc2UgZXZlbnQuICBNYXkgYmUgdGhlIHBhdGllbnQgb3IgYSBwcmFjdGl0aW9uZXIuXHJcbiAgICovXHJcbiAgcHVibGljIHJlY29yZGVyPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFBhcnRpZXMgdGhhdCBtYXkgb3Igc2hvdWxkIGNvbnRyaWJ1dGUgb3IgaGF2ZSBjb250cmlidXRlZCBpbmZvcm1hdGlvbiB0byB0aGUgQWN0LiBTdWNoIGluZm9ybWF0aW9uIGluY2x1ZGVzIGluZm9ybWF0aW9uIGxlYWRpbmcgdG8gdGhlIGRlY2lzaW9uIHRvIHBlcmZvcm0gdGhlIEFjdCBhbmQgaG93IHRvIHBlcmZvcm0gdGhlIEFjdCAoZS5nLiBjb25zdWx0YW50KSwgaW5mb3JtYXRpb24gdGhhdCB0aGUgQWN0IGl0c2VsZiBzZWVrcyB0byByZXZlYWwgKGUuZy4gaW5mb3JtYW50IG9mIGNsaW5pY2FsIGhpc3RvcnkpLCBvciBpbmZvcm1hdGlvbiBhYm91dCB3aGF0IEFjdCB3YXMgcGVyZm9ybWVkIChlLmcuIGluZm9ybWFudCB3aXRuZXNzKS5cclxuICAgKi9cclxuICBwdWJsaWMgZXZlbnRQYXJ0aWNpcGFudD86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgdGhlIGFkdmVyc2UgZXZlbnQgaW4gdGV4dC5cclxuICAgKi9cclxuICBwdWJsaWMgZGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB0aGUgZW50aXR5IHRoYXQgaXMgc3VzcGVjdGVkIHRvIGhhdmUgY2F1c2VkIHRoZSBhZHZlcnNlIGV2ZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdXNwZWN0RW50aXR5OiBmaGlyLkFkdmVyc2VFdmVudFN1c3BlY3RFbnRpdHlbXTtcclxuICAvKipcclxuICAgKiBBZHZlcnNlRXZlbnQuc3ViamVjdE1lZGljYWxIaXN0b3J5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdWJqZWN0TWVkaWNhbEhpc3Rvcnk6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogQWR2ZXJzZUV2ZW50LnJlZmVyZW5jZURvY3VtZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWZlcmVuY2VEb2N1bWVudDogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBBZHZlcnNlRXZlbnQuc3R1ZHkuXHJcbiAgICovXHJcbiAgcHVibGljIHN0dWR5OiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEFkdmVyc2VFdmVudCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEFkdmVyc2VFdmVudEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdBZHZlcnNlRXZlbnQnO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IG5ldyBmaGlyLklkZW50aWZpZXIoc291cmNlLmlkZW50aWZpZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWydjYXRlZ29yeSddKSB7IHRoaXMuY2F0ZWdvcnkgPSBuZXcgZmhpci5GaGlyQ29kZTxBZHZlcnNlRXZlbnRDYXRlZ29yeUNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5jYXRlZ29yeX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfY2F0ZWdvcnknXSkge1xyXG4gICAgICBpZiAodGhpcy5jYXRlZ29yeSkgeyB0aGlzLmNhdGVnb3J5LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2NhdGVnb3J5ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuY2F0ZWdvcnkgPSBuZXcgZmhpci5GaGlyQ29kZTxBZHZlcnNlRXZlbnRDYXRlZ29yeUNvZGVUeXBlPihzb3VyY2UuX2NhdGVnb3J5IGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd0eXBlJ10pIHsgdGhpcy50eXBlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS50eXBlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3ViamVjdCddKSB7IHRoaXMuc3ViamVjdCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2Uuc3ViamVjdCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2RhdGUnXSkgeyB0aGlzLmRhdGUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2UuZGF0ZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfZGF0ZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLmRhdGUpIHsgdGhpcy5kYXRlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2RhdGUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5kYXRlID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHNvdXJjZS5fZGF0ZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckRhdGVUaW1lQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydyZWFjdGlvbiddKSB7IHRoaXMucmVhY3Rpb24gPSBzb3VyY2UucmVhY3Rpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZWFjdGlvbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydsb2NhdGlvbiddKSB7IHRoaXMubG9jYXRpb24gPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmxvY2F0aW9uKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2VyaW91c25lc3MnXSkgeyB0aGlzLnNlcmlvdXNuZXNzID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5zZXJpb3VzbmVzcyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ291dGNvbWUnXSkgeyB0aGlzLm91dGNvbWUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLm91dGNvbWUpOyB9XHJcbiAgICBpZiAoc291cmNlWydyZWNvcmRlciddKSB7IHRoaXMucmVjb3JkZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnJlY29yZGVyKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZXZlbnRQYXJ0aWNpcGFudCddKSB7IHRoaXMuZXZlbnRQYXJ0aWNpcGFudCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuZXZlbnRQYXJ0aWNpcGFudCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2Rlc2NyaXB0aW9uJ10pIHsgdGhpcy5kZXNjcmlwdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuZGVzY3JpcHRpb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2Rlc2NyaXB0aW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZGVzY3JpcHRpb24pIHsgdGhpcy5kZXNjcmlwdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9kZXNjcmlwdGlvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRlc2NyaXB0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2Rlc2NyaXB0aW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydzdXNwZWN0RW50aXR5J10pIHsgdGhpcy5zdXNwZWN0RW50aXR5ID0gc291cmNlLnN1c3BlY3RFbnRpdHkubWFwKCh4KSA9PiBuZXcgZmhpci5BZHZlcnNlRXZlbnRTdXNwZWN0RW50aXR5KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3VzcGVjdEVudGl0eSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydzdWJqZWN0TWVkaWNhbEhpc3RvcnknXSkgeyB0aGlzLnN1YmplY3RNZWRpY2FsSGlzdG9yeSA9IHNvdXJjZS5zdWJqZWN0TWVkaWNhbEhpc3RvcnkubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdWJqZWN0TWVkaWNhbEhpc3RvcnkgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVmZXJlbmNlRG9jdW1lbnQnXSkgeyB0aGlzLnJlZmVyZW5jZURvY3VtZW50ID0gc291cmNlLnJlZmVyZW5jZURvY3VtZW50Lm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVmZXJlbmNlRG9jdW1lbnQgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3R1ZHknXSkgeyB0aGlzLnN0dWR5ID0gc291cmNlLnN0dWR5Lm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3R1ZHkgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0FkdmVyc2VFdmVudCcgfVxyXG4gICAgdGhpcy52UlMoJ3Jlc291cmNlVHlwZScsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2lkZW50aWZpZXInLGV4cClcclxuICAgIHRoaXMudk9TVignY2F0ZWdvcnknLGV4cCwnQWR2ZXJzZUV2ZW50Q2F0ZWdvcnknLEFkdmVyc2VFdmVudENhdGVnb3J5VnNWYWxpZGF0aW9uLCdyJylcclxuICAgIHRoaXMudk9TKCd0eXBlJyxleHApXHJcbiAgICB0aGlzLnZPUygnc3ViamVjdCcsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2RhdGUnLGV4cClcclxuICAgIHRoaXMudk9BKCdyZWFjdGlvbicsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2xvY2F0aW9uJyxleHApXHJcbiAgICB0aGlzLnZPUygnc2VyaW91c25lc3MnLGV4cClcclxuICAgIHRoaXMudk9TVignb3V0Y29tZScsZXhwLCdBZHZlcnNlRXZlbnRPdXRjb21lJyxBZHZlcnNlRXZlbnRPdXRjb21lVnNWYWxpZGF0aW9uLCdyJylcclxuICAgIHRoaXMudk9TKCdyZWNvcmRlcicsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2V2ZW50UGFydGljaXBhbnQnLGV4cClcclxuICAgIHRoaXMudk9TKCdkZXNjcmlwdGlvbicsZXhwKVxyXG4gICAgdGhpcy52T0EoJ3N1c3BlY3RFbnRpdHknLGV4cClcclxuICAgIHRoaXMudk9BKCdzdWJqZWN0TWVkaWNhbEhpc3RvcnknLGV4cClcclxuICAgIHRoaXMudk9BKCdyZWZlcmVuY2VEb2N1bWVudCcsZXhwKVxyXG4gICAgdGhpcy52T0EoJ3N0dWR5JyxleHApXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=