// <auto-generated/>
// Contents of: hl7.fhir.r3.core version: 3.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: AdverseEvent
import * as fhir from '../fhir.js';
// @ts-ignore
import { AdverseEventCausalityVsValidation } from '../fhirValueSets/AdverseEventCausalityVsValidation.js';
// @ts-ignore
import { AdverseEventCategoryVsValidation } from '../fhirValueSets/AdverseEventCategoryVsValidation.js';
// @ts-ignore
import { AdverseEventOutcomeVsValidation } from '../fhirValueSets/AdverseEventOutcomeVsValidation.js';
/**
 * Describes the entity that is suspected to have caused the adverse event.
 */
export class AdverseEventSuspectEntity extends fhir.BackboneElement {
    /**
     * Default constructor for AdverseEventSuspectEntity - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['instance']) {
            this.instance = new fhir.Reference(source.instance);
        }
        else {
            this.instance = null;
        }
        if (source['causality']) {
            this.causality = new fhir.FhirCode({ value: source.causality });
        }
        if (source['_causality']) {
            if (this.causality) {
                this.causality.addExtendedProperties(source._causality);
            }
            else {
                this.causality = new fhir.FhirCode(source._causality);
            }
        }
        if (source['causalityAssessment']) {
            this.causalityAssessment = new fhir.CodeableConcept(source.causalityAssessment);
        }
        if (source['causalityProductRelatedness']) {
            this.causalityProductRelatedness = new fhir.FhirString({ value: source.causalityProductRelatedness });
        }
        if (source['_causalityProductRelatedness']) {
            if (this.causalityProductRelatedness) {
                this.causalityProductRelatedness.addExtendedProperties(source._causalityProductRelatedness);
            }
            else {
                this.causalityProductRelatedness = new fhir.FhirString(source._causalityProductRelatedness);
            }
        }
        if (source['causalityMethod']) {
            this.causalityMethod = new fhir.CodeableConcept(source.causalityMethod);
        }
        if (source['causalityAuthor']) {
            this.causalityAuthor = new fhir.Reference(source.causalityAuthor);
        }
        if (source['causalityResult']) {
            this.causalityResult = new fhir.CodeableConcept(source.causalityResult);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'AdverseEvent.suspectEntity';
        }
        iss.push(...this.vRS('instance', exp));
        iss.push(...this.vOSV('causality', exp, 'AdverseEventCausality', AdverseEventCausalityVsValidation, 'r'));
        iss.push(...this.vOS('causalityAssessment', exp));
        iss.push(...this.vOS('causalityProductRelatedness', exp));
        iss.push(...this.vOS('causalityMethod', exp));
        iss.push(...this.vOS('causalityAuthor', exp));
        iss.push(...this.vOS('causalityResult', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
AdverseEventSuspectEntity._fts_dataType = 'AdverseEventSuspectEntity';
/**
 * Actual or  potential/avoided event causing unintended physical injury resulting from or contributed to by medical care, a research study or other healthcare setting factors that requires additional monitoring, treatment, or hospitalization, or that results in death.
 */
export class AdverseEvent extends fhir.DomainResource {
    /**
     * Default constructor for AdverseEvent - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'AdverseEvent';
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier);
        }
        if (source['category']) {
            this.category = new fhir.FhirCode({ value: source.category });
        }
        if (source['_category']) {
            if (this.category) {
                this.category.addExtendedProperties(source._category);
            }
            else {
                this.category = new fhir.FhirCode(source._category);
            }
        }
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type);
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject);
        }
        if (source['date']) {
            this.date = new fhir.FhirDateTime({ value: source.date });
        }
        if (source['_date']) {
            if (this.date) {
                this.date.addExtendedProperties(source._date);
            }
            else {
                this.date = new fhir.FhirDateTime(source._date);
            }
        }
        if (source['reaction']) {
            this.reaction = source.reaction.map((x) => new fhir.Reference(x));
        }
        else {
            this.reaction = [];
        }
        if (source['location']) {
            this.location = new fhir.Reference(source.location);
        }
        if (source['seriousness']) {
            this.seriousness = new fhir.CodeableConcept(source.seriousness);
        }
        if (source['outcome']) {
            this.outcome = new fhir.CodeableConcept(source.outcome);
        }
        if (source['recorder']) {
            this.recorder = new fhir.Reference(source.recorder);
        }
        if (source['eventParticipant']) {
            this.eventParticipant = new fhir.Reference(source.eventParticipant);
        }
        if (source['description']) {
            this.description = new fhir.FhirString({ value: source.description });
        }
        if (source['_description']) {
            if (this.description) {
                this.description.addExtendedProperties(source._description);
            }
            else {
                this.description = new fhir.FhirString(source._description);
            }
        }
        if (source['suspectEntity']) {
            this.suspectEntity = source.suspectEntity.map((x) => new fhir.AdverseEventSuspectEntity(x));
        }
        else {
            this.suspectEntity = [];
        }
        if (source['subjectMedicalHistory']) {
            this.subjectMedicalHistory = source.subjectMedicalHistory.map((x) => new fhir.Reference(x));
        }
        else {
            this.subjectMedicalHistory = [];
        }
        if (source['referenceDocument']) {
            this.referenceDocument = source.referenceDocument.map((x) => new fhir.Reference(x));
        }
        else {
            this.referenceDocument = [];
        }
        if (source['study']) {
            this.study = source.study.map((x) => new fhir.Reference(x));
        }
        else {
            this.study = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'AdverseEvent';
        }
        iss.push(...this.vOS('identifier', exp));
        iss.push(...this.vOSV('category', exp, 'AdverseEventCategory', AdverseEventCategoryVsValidation, 'r'));
        iss.push(...this.vOS('type', exp));
        iss.push(...this.vOS('subject', exp));
        iss.push(...this.vOS('date', exp));
        iss.push(...this.vOA('reaction', exp));
        iss.push(...this.vOS('location', exp));
        iss.push(...this.vOS('seriousness', exp));
        iss.push(...this.vOSV('outcome', exp, 'AdverseEventOutcome', AdverseEventOutcomeVsValidation, 'r'));
        iss.push(...this.vOS('recorder', exp));
        iss.push(...this.vOS('eventParticipant', exp));
        iss.push(...this.vOS('description', exp));
        iss.push(...this.vOA('suspectEntity', exp));
        iss.push(...this.vOA('subjectMedicalHistory', exp));
        iss.push(...this.vOA('referenceDocument', exp));
        iss.push(...this.vOA('study', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
AdverseEvent._fts_dataType = 'AdverseEvent';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQWR2ZXJzZUV2ZW50LmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9BZHZlcnNlRXZlbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsOEJBQThCO0FBRTlCLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBSW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsaUNBQWlDLEVBQUUsTUFBTSx1REFBdUQsQ0FBQztBQWUxRyxhQUFhO0FBQ2IsT0FBTyxFQUFFLGdDQUFnQyxFQUFFLE1BQU0sc0RBQXNELENBQUM7QUFXeEcsYUFBYTtBQUNiLE9BQU8sRUFBRSwrQkFBK0IsRUFBRSxNQUFNLHFEQUFxRCxDQUFDO0FBMkN0Rzs7R0FFRztBQUNILE1BQU0sT0FBTyx5QkFBMEIsU0FBUSxJQUFJLENBQUMsZUFBZTtJQWlDakU7O09BRUc7SUFDSCxZQUFZLFNBQWdELEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQ3RHLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7U0FBRTthQUMzRTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDOUIsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBZ0MsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLFNBQVMsRUFBQyxDQUFDLENBQUM7U0FBRTtRQUMxSCxJQUFJLE1BQU0sQ0FBQyxZQUFZLENBQUMsRUFBRTtZQUN4QixJQUFJLElBQUksQ0FBQyxTQUFTLEVBQUU7Z0JBQUUsSUFBSSxDQUFDLFNB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QUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3pDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzNDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLHVCQUF1QixFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbkQsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsbUJBQW1CLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUMvQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNuQyxPQUFPLEdBQUcsQ0FBQztJQUNiLENBQUM7O0FBdklEOztHQUVHO0FBQzZCLDBCQUFhLEdBQVUsY0FBYyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnIzLmNvcmUgdmVyc2lvbjogMy4wLjJcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBBZHZlcnNlRXZlbnRcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFkdmVyc2VFdmVudENhdXNhbGl0eUNvZGVzLCAgQWR2ZXJzZUV2ZW50Q2F1c2FsaXR5Q29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0FkdmVyc2VFdmVudENhdXNhbGl0eUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBBZHZlcnNlRXZlbnRDYXVzYWxpdHlWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0FkdmVyc2VFdmVudENhdXNhbGl0eVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQWR2ZXJzZUV2ZW50Q2F1c2FsaXR5QXNzZXNzQ29kZXMsICBBZHZlcnNlRXZlbnRDYXVzYWxpdHlBc3Nlc3NDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQWR2ZXJzZUV2ZW50Q2F1c2FsaXR5QXNzZXNzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFkdmVyc2VFdmVudENhdXNhbGl0eUFzc2Vzc1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQWR2ZXJzZUV2ZW50Q2F1c2FsaXR5QXNzZXNzVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBBZHZlcnNlRXZlbnRDYXVzYWxpdHlNZXRob2RDb2RlcywgIEFkdmVyc2VFdmVudENhdXNhbGl0eU1ldGhvZENvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BZHZlcnNlRXZlbnRDYXVzYWxpdHlNZXRob2RDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQWR2ZXJzZUV2ZW50Q2F1c2FsaXR5TWV0aG9kVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BZHZlcnNlRXZlbnRDYXVzYWxpdHlNZXRob2RWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFkdmVyc2VFdmVudENhdXNhbGl0eVJlc3VsdENvZGVzLCAgQWR2ZXJzZUV2ZW50Q2F1c2FsaXR5UmVzdWx0Q29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0FkdmVyc2VFdmVudENhdXNhbGl0eVJlc3VsdENvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBBZHZlcnNlRXZlbnRDYXVzYWxpdHlSZXN1bHRWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0FkdmVyc2VFdmVudENhdXNhbGl0eVJlc3VsdFZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQWR2ZXJzZUV2ZW50Q2F0ZWdvcnlDb2RlcywgIEFkdmVyc2VFdmVudENhdGVnb3J5Q29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0FkdmVyc2VFdmVudENhdGVnb3J5Q29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFkdmVyc2VFdmVudENhdGVnb3J5VnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BZHZlcnNlRXZlbnRDYXRlZ29yeVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQWR2ZXJzZUV2ZW50VHlwZUNvZGVzLCAgQWR2ZXJzZUV2ZW50VHlwZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BZHZlcnNlRXZlbnRUeXBlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFkdmVyc2VFdmVudFR5cGVWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0FkdmVyc2VFdmVudFR5cGVWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFkdmVyc2VFdmVudFNlcmlvdXNuZXNzQ29kZXMsICBBZHZlcnNlRXZlbnRTZXJpb3VzbmVzc0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BZHZlcnNlRXZlbnRTZXJpb3VzbmVzc0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBBZHZlcnNlRXZlbnRTZXJpb3VzbmVzc1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQWR2ZXJzZUV2ZW50U2VyaW91c25lc3NWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFkdmVyc2VFdmVudE91dGNvbWVDb2RlcywgIEFkdmVyc2VFdmVudE91dGNvbWVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQWR2ZXJzZUV2ZW50T3V0Y29tZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBBZHZlcnNlRXZlbnRPdXRjb21lVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BZHZlcnNlRXZlbnRPdXRjb21lVnNWYWxpZGF0aW9uLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEFkdmVyc2VFdmVudFN1c3BlY3RFbnRpdHkgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQWR2ZXJzZUV2ZW50U3VzcGVjdEVudGl0eUFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgdGhlIGFjdHVhbCBpbnN0YW5jZSBvZiB3aGF0IGNhdXNlZCB0aGUgYWR2ZXJzZSBldmVudC4gIE1heSBiZSBhIHN1YnN0YW5jZSwgbWVkaWNhdGlvbiwgbWVkaWNhdGlvbiBhZG1pbmlzdHJhdGlvbiwgbWVkaWNhdGlvbiBzdGF0ZW1lbnQgb3IgYSBkZXZpY2UuXHJcbiAgICovXHJcbiAgaW5zdGFuY2U6IGZoaXIuUmVmZXJlbmNlQXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIGNhdXNhbGl0eTEgfCBjYXVzYWxpdHkyLlxyXG4gICAqL1xyXG4gIGNhdXNhbGl0eT86IGZoaXIuRmhpckNvZGU8QWR2ZXJzZUV2ZW50Q2F1c2FsaXR5Q29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEFkdmVyc2VFdmVudC5zdXNwZWN0RW50aXR5LmNhdXNhbGl0eVxyXG4gICAqL1xyXG4gIF9jYXVzYWxpdHk/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIGFzc2VzczEgfCBhc3Nlc3MyLlxyXG4gICAqL1xyXG4gIGNhdXNhbGl0eUFzc2Vzc21lbnQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFkdmVyc2VFdmVudC5zdXNwZWN0RW50aXR5LmNhdXNhbGl0eVByb2R1Y3RSZWxhdGVkbmVzcy5cclxuICAgKi9cclxuICBjYXVzYWxpdHlQcm9kdWN0UmVsYXRlZG5lc3M/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQWR2ZXJzZUV2ZW50LnN1c3BlY3RFbnRpdHkuY2F1c2FsaXR5UHJvZHVjdFJlbGF0ZWRuZXNzXHJcbiAgICovXHJcbiAgX2NhdXNhbGl0eVByb2R1Y3RSZWxhdGVkbmVzcz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogbWV0aG9kMSB8IG1ldGhvZDIuXHJcbiAgICovXHJcbiAgY2F1c2FsaXR5TWV0aG9kPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBZHZlcnNlRXZlbnQuc3VzcGVjdEVudGl0eS5jYXVzYWxpdHlBdXRob3IuXHJcbiAgICovXHJcbiAgY2F1c2FsaXR5QXV0aG9yPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiByZXN1bHQxIHwgcmVzdWx0Mi5cclxuICAgKi9cclxuICBjYXVzYWxpdHlSZXN1bHQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogRGVzY3JpYmVzIHRoZSBlbnRpdHkgdGhhdCBpcyBzdXNwZWN0ZWQgdG8gaGF2ZSBjYXVzZWQgdGhlIGFkdmVyc2UgZXZlbnQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQWR2ZXJzZUV2ZW50U3VzcGVjdEVudGl0eSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0FkdmVyc2VFdmVudFN1c3BlY3RFbnRpdHknO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgdGhlIGFjdHVhbCBpbnN0YW5jZSBvZiB3aGF0IGNhdXNlZCB0aGUgYWR2ZXJzZSBldmVudC4gIE1heSBiZSBhIHN1YnN0YW5jZSwgbWVkaWNhdGlvbiwgbWVkaWNhdGlvbiBhZG1pbmlzdHJhdGlvbiwgbWVkaWNhdGlvbiBzdGF0ZW1lbnQgb3IgYSBkZXZpY2UuXHJcbiAgICovXHJcbiAgcHVibGljIGluc3RhbmNlOiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIGNhdXNhbGl0eTEgfCBjYXVzYWxpdHkyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjYXVzYWxpdHk/OiBmaGlyLkZoaXJDb2RlPEFkdmVyc2VFdmVudENhdXNhbGl0eUNvZGVUeXBlPnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogYXNzZXNzMSB8IGFzc2VzczIuXHJcbiAgICovXHJcbiAgcHVibGljIGNhdXNhbGl0eUFzc2Vzc21lbnQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWR2ZXJzZUV2ZW50LnN1c3BlY3RFbnRpdHkuY2F1c2FsaXR5UHJvZHVjdFJlbGF0ZWRuZXNzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjYXVzYWxpdHlQcm9kdWN0UmVsYXRlZG5lc3M/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIG1ldGhvZDEgfCBtZXRob2QyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjYXVzYWxpdHlNZXRob2Q/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWR2ZXJzZUV2ZW50LnN1c3BlY3RFbnRpdHkuY2F1c2FsaXR5QXV0aG9yLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjYXVzYWxpdHlBdXRob3I/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogcmVzdWx0MSB8IHJlc3VsdDIuXHJcbiAgICovXHJcbiAgcHVibGljIGNhdXNhbGl0eVJlc3VsdD86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBBZHZlcnNlRXZlbnRTdXNwZWN0RW50aXR5IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8QWR2ZXJzZUV2ZW50U3VzcGVjdEVudGl0eUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydpbnN0YW5jZSddKSB7IHRoaXMuaW5zdGFuY2UgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmluc3RhbmNlKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaW5zdGFuY2UgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydjYXVzYWxpdHknXSkgeyB0aGlzLmNhdXNhbGl0eSA9IG5ldyBmaGlyLkZoaXJDb2RlPEFkdmVyc2VFdmVudENhdXNhbGl0eUNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5jYXVzYWxpdHl9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2NhdXNhbGl0eSddKSB7XHJcbiAgICAgIGlmICh0aGlzLmNhdXNhbGl0eSkgeyB0aGlzLmNhdXNhbGl0eS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9jYXVzYWxpdHkhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5jYXVzYWxpdHkgPSBuZXcgZmhpci5GaGlyQ29kZTxBZHZlcnNlRXZlbnRDYXVzYWxpdHlDb2RlVHlwZT4oc291cmNlLl9jYXVzYWxpdHkgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2NhdXNhbGl0eUFzc2Vzc21lbnQnXSkgeyB0aGlzLmNhdXNhbGl0eUFzc2Vzc21lbnQgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmNhdXNhbGl0eUFzc2Vzc21lbnQpOyB9XHJcbiAgICBpZiAoc291cmNlWydjYXVzYWxpdHlQcm9kdWN0UmVsYXRlZG5lc3MnXSkgeyB0aGlzLmNhdXNhbGl0eVByb2R1Y3RSZWxhdGVkbmVzcyA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuY2F1c2FsaXR5UHJvZHVjdFJlbGF0ZWRuZXNzfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19jYXVzYWxpdHlQcm9kdWN0UmVsYXRlZG5lc3MnXSkge1xyXG4gICAgICBpZiAodGhpcy5jYXVzYWxpdHlQcm9kdWN0UmVsYXRlZG5lc3MpIHsgdGhpcy5jYXVzYWxpdHlQcm9kdWN0UmVsYXRlZG5lc3MuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fY2F1c2FsaXR5UHJvZHVjdFJlbGF0ZWRuZXNzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuY2F1c2FsaXR5UHJvZHVjdFJlbGF0ZWRuZXNzID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2NhdXNhbGl0eVByb2R1Y3RSZWxhdGVkbmVzcyBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnY2F1c2FsaXR5TWV0aG9kJ10pIHsgdGhpcy5jYXVzYWxpdHlNZXRob2QgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmNhdXNhbGl0eU1ldGhvZCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NhdXNhbGl0eUF1dGhvciddKSB7IHRoaXMuY2F1c2FsaXR5QXV0aG9yID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5jYXVzYWxpdHlBdXRob3IpOyB9XHJcbiAgICBpZiAoc291cmNlWydjYXVzYWxpdHlSZXN1bHQnXSkgeyB0aGlzLmNhdXNhbGl0eVJlc3VsdCA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY2F1c2FsaXR5UmVzdWx0KTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0FkdmVyc2VFdmVudC5zdXNwZWN0RW50aXR5JyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygnaW5zdGFuY2UnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1NWKCdjYXVzYWxpdHknLGV4cCwnQWR2ZXJzZUV2ZW50Q2F1c2FsaXR5JyxBZHZlcnNlRXZlbnRDYXVzYWxpdHlWc1ZhbGlkYXRpb24sJ3InKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnY2F1c2FsaXR5QXNzZXNzbWVudCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnY2F1c2FsaXR5UHJvZHVjdFJlbGF0ZWRuZXNzJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdjYXVzYWxpdHlNZXRob2QnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2NhdXNhbGl0eUF1dGhvcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnY2F1c2FsaXR5UmVzdWx0JyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBBZHZlcnNlRXZlbnQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQWR2ZXJzZUV2ZW50QXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiQWR2ZXJzZUV2ZW50XCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpZGVudGlmaWVyKHMpIG9mIHRoaXMgYWR2ZXJzZSBldmVudCB0aGF0IGFyZSBhc3NpZ25lZCBieSBidXNpbmVzcyBwcm9jZXNzZXMgYW5kL29yIHVzZWQgdG8gcmVmZXIgdG8gaXQgd2hlbiBhIGRpcmVjdCBVUkwgcmVmZXJlbmNlIHRvIHRoZSByZXNvdXJjZSBpdHNlZmwgaXMgbm90IGFwcHJvcHJpYXRlLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdHlwZSBvZiBldmVudCB3aGljaCBpcyBpbXBvcnRhbnQgdG8gY2hhcmFjdGVyaXplIHdoYXQgb2NjdXJyZWQgYW5kIGNhdXNlZCBoYXJtIHRvIHRoZSBzdWJqZWN0LCBvciBoYWQgdGhlIHBvdGVudGlhbCB0byBjYXVzZSBoYXJtIHRvIHRoZSBzdWJqZWN0LlxyXG4gICAqL1xyXG4gIGNhdGVnb3J5PzogZmhpci5GaGlyQ29kZTxBZHZlcnNlRXZlbnRDYXRlZ29yeUNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBBZHZlcnNlRXZlbnQuY2F0ZWdvcnlcclxuICAgKi9cclxuICBfY2F0ZWdvcnk/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBkZWZpbmVzIHRoZSBzcGVjaWZpYyB0eXBlIG9mIGV2ZW50IHRoYXQgb2NjdXJyZWQgb3IgdGhhdCB3YXMgcHJldmVudGVkIGZyb20gb2NjdXJyaW5nLlxyXG4gICAqL1xyXG4gIHR5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgc3ViamVjdCBvciBncm91cCBpbXBhY3RlZCBieSB0aGUgZXZlbnQuICBXaXRoIGEgcHJvc3BlY3RpdmUgYWR2ZXJzZSBldmVudCwgdGhlcmUgd2lsbCBiZSBubyBzdWJqZWN0IGFzIHRoZSBhZHZlcnNlIGV2ZW50IHdhcyBwcmV2ZW50ZWQuXHJcbiAgICovXHJcbiAgc3ViamVjdD86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgKGFuZCBwZXJoYXBzIHRpbWUpIHdoZW4gdGhlIGFkdmVyc2UgZXZlbnQgb2NjdXJyZWQuXHJcbiAgICovXHJcbiAgZGF0ZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEFkdmVyc2VFdmVudC5kYXRlXHJcbiAgICovXHJcbiAgX2RhdGU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEluY2x1ZGVzIGluZm9ybWF0aW9uIGFib3V0IHRoZSByZWFjdGlvbiB0aGF0IG9jY3VycmVkIGFzIGEgcmVzdWx0IG9mIGV4cG9zdXJlIHRvIGEgc3Vic3RhbmNlIChmb3IgZXhhbXBsZSwgYSBkcnVnIG9yIGEgY2hlbWljYWwpLlxyXG4gICAqL1xyXG4gIHJlYWN0aW9uPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpbmZvcm1hdGlvbiBhYm91dCB3aGVyZSB0aGUgYWR2ZXJzZSBldmVudCBvY2N1cnJlZC5cclxuICAgKi9cclxuICBsb2NhdGlvbj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHRoZSBzZXJpb3VzbmVzcyBvciBzZXZlcml0eSBvZiB0aGUgYWR2ZXJzZSBldmVudC5cclxuICAgKi9cclxuICBzZXJpb3VzbmVzcz86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHRoZSB0eXBlIG9mIG91dGNvbWUgZnJvbSB0aGUgYWR2ZXJzZSBldmVudC5cclxuICAgKi9cclxuICBvdXRjb21lPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmZvcm1hdGlvbiBvbiB3aG8gcmVjb3JkZWQgdGhlIGFkdmVyc2UgZXZlbnQuICBNYXkgYmUgdGhlIHBhdGllbnQgb3IgYSBwcmFjdGl0aW9uZXIuXHJcbiAgICovXHJcbiAgcmVjb3JkZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFBhcnRpZXMgdGhhdCBtYXkgb3Igc2hvdWxkIGNvbnRyaWJ1dGUgb3IgaGF2ZSBjb250cmlidXRlZCBpbmZvcm1hdGlvbiB0byB0aGUgQWN0LiBTdWNoIGluZm9ybWF0aW9uIGluY2x1ZGVzIGluZm9ybWF0aW9uIGxlYWRpbmcgdG8gdGhlIGRlY2lzaW9uIHRvIHBlcmZvcm0gdGhlIEFjdCBhbmQgaG93IHRvIHBlcmZvcm0gdGhlIEFjdCAoZS5nLiBjb25zdWx0YW50KSwgaW5mb3JtYXRpb24gdGhhdCB0aGUgQWN0IGl0c2VsZiBzZWVrcyB0byByZXZlYWwgKGUuZy4gaW5mb3JtYW50IG9mIGNsaW5pY2FsIGhpc3RvcnkpLCBvciBpbmZvcm1hdGlvbiBhYm91dCB3aGF0IEFjdCB3YXMgcGVyZm9ybWVkIChlLmcuIGluZm9ybWFudCB3aXRuZXNzKS5cclxuICAgKi9cclxuICBldmVudFBhcnRpY2lwYW50PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgdGhlIGFkdmVyc2UgZXZlbnQgaW4gdGV4dC5cclxuICAgKi9cclxuICBkZXNjcmlwdGlvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBBZHZlcnNlRXZlbnQuZGVzY3JpcHRpb25cclxuICAgKi9cclxuICBfZGVzY3JpcHRpb24/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB0aGUgZW50aXR5IHRoYXQgaXMgc3VzcGVjdGVkIHRvIGhhdmUgY2F1c2VkIHRoZSBhZHZlcnNlIGV2ZW50LlxyXG4gICAqL1xyXG4gIHN1c3BlY3RFbnRpdHk/OiBmaGlyLkFkdmVyc2VFdmVudFN1c3BlY3RFbnRpdHlBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFkdmVyc2VFdmVudC5zdWJqZWN0TWVkaWNhbEhpc3RvcnkuXHJcbiAgICovXHJcbiAgc3ViamVjdE1lZGljYWxIaXN0b3J5PzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFkdmVyc2VFdmVudC5yZWZlcmVuY2VEb2N1bWVudC5cclxuICAgKi9cclxuICByZWZlcmVuY2VEb2N1bWVudD86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBZHZlcnNlRXZlbnQuc3R1ZHkuXHJcbiAgICovXHJcbiAgc3R1ZHk/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBY3R1YWwgb3IgIHBvdGVudGlhbC9hdm9pZGVkIGV2ZW50IGNhdXNpbmcgdW5pbnRlbmRlZCBwaHlzaWNhbCBpbmp1cnkgcmVzdWx0aW5nIGZyb20gb3IgY29udHJpYnV0ZWQgdG8gYnkgbWVkaWNhbCBjYXJlLCBhIHJlc2VhcmNoIHN0dWR5IG9yIG90aGVyIGhlYWx0aGNhcmUgc2V0dGluZyBmYWN0b3JzIHRoYXQgcmVxdWlyZXMgYWRkaXRpb25hbCBtb25pdG9yaW5nLCB0cmVhdG1lbnQsIG9yIGhvc3BpdGFsaXphdGlvbiwgb3IgdGhhdCByZXN1bHRzIGluIGRlYXRoLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEFkdmVyc2VFdmVudCBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQWR2ZXJzZUV2ZW50JztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIkFkdmVyc2VFdmVudFwiO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpZGVudGlmaWVyKHMpIG9mIHRoaXMgYWR2ZXJzZSBldmVudCB0aGF0IGFyZSBhc3NpZ25lZCBieSBidXNpbmVzcyBwcm9jZXNzZXMgYW5kL29yIHVzZWQgdG8gcmVmZXIgdG8gaXQgd2hlbiBhIGRpcmVjdCBVUkwgcmVmZXJlbmNlIHRvIHRoZSByZXNvdXJjZSBpdHNlZmwgaXMgbm90IGFwcHJvcHJpYXRlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdHlwZSBvZiBldmVudCB3aGljaCBpcyBpbXBvcnRhbnQgdG8gY2hhcmFjdGVyaXplIHdoYXQgb2NjdXJyZWQgYW5kIGNhdXNlZCBoYXJtIHRvIHRoZSBzdWJqZWN0LCBvciBoYWQgdGhlIHBvdGVudGlhbCB0byBjYXVzZSBoYXJtIHRvIHRoZSBzdWJqZWN0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjYXRlZ29yeT86IGZoaXIuRmhpckNvZGU8QWR2ZXJzZUV2ZW50Q2F0ZWdvcnlDb2RlVHlwZT58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBkZWZpbmVzIHRoZSBzcGVjaWZpYyB0eXBlIG9mIGV2ZW50IHRoYXQgb2NjdXJyZWQgb3IgdGhhdCB3YXMgcHJldmVudGVkIGZyb20gb2NjdXJyaW5nLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0eXBlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgc3ViamVjdCBvciBncm91cCBpbXBhY3RlZCBieSB0aGUgZXZlbnQuICBXaXRoIGEgcHJvc3BlY3RpdmUgYWR2ZXJzZSBldmVudCwgdGhlcmUgd2lsbCBiZSBubyBzdWJqZWN0IGFzIHRoZSBhZHZlcnNlIGV2ZW50IHdhcyBwcmV2ZW50ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHN1YmplY3Q/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgKGFuZCBwZXJoYXBzIHRpbWUpIHdoZW4gdGhlIGFkdmVyc2UgZXZlbnQgb2NjdXJyZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGRhdGU/OiBmaGlyLkZoaXJEYXRlVGltZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5jbHVkZXMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHJlYWN0aW9uIHRoYXQgb2NjdXJyZWQgYXMgYSByZXN1bHQgb2YgZXhwb3N1cmUgdG8gYSBzdWJzdGFuY2UgKGZvciBleGFtcGxlLCBhIGRydWcgb3IgYSBjaGVtaWNhbCkuXHJcbiAgICovXHJcbiAgcHVibGljIHJlYWN0aW9uOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpbmZvcm1hdGlvbiBhYm91dCB3aGVyZSB0aGUgYWR2ZXJzZSBldmVudCBvY2N1cnJlZC5cclxuICAgKi9cclxuICBwdWJsaWMgbG9jYXRpb24/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHRoZSBzZXJpb3VzbmVzcyBvciBzZXZlcml0eSBvZiB0aGUgYWR2ZXJzZSBldmVudC5cclxuICAgKi9cclxuICBwdWJsaWMgc2VyaW91c25lc3M/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHRoZSB0eXBlIG9mIG91dGNvbWUgZnJvbSB0aGUgYWR2ZXJzZSBldmVudC5cclxuICAgKi9cclxuICBwdWJsaWMgb3V0Y29tZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmZvcm1hdGlvbiBvbiB3aG8gcmVjb3JkZWQgdGhlIGFkdmVyc2UgZXZlbnQuICBNYXkgYmUgdGhlIHBhdGllbnQgb3IgYSBwcmFjdGl0aW9uZXIuXHJcbiAgICovXHJcbiAgcHVibGljIHJlY29yZGVyPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFBhcnRpZXMgdGhhdCBtYXkgb3Igc2hvdWxkIGNvbnRyaWJ1dGUgb3IgaGF2ZSBjb250cmlidXRlZCBpbmZvcm1hdGlvbiB0byB0aGUgQWN0LiBTdWNoIGluZm9ybWF0aW9uIGluY2x1ZGVzIGluZm9ybWF0aW9uIGxlYWRpbmcgdG8gdGhlIGRlY2lzaW9uIHRvIHBlcmZvcm0gdGhlIEFjdCBhbmQgaG93IHRvIHBlcmZvcm0gdGhlIEFjdCAoZS5nLiBjb25zdWx0YW50KSwgaW5mb3JtYXRpb24gdGhhdCB0aGUgQWN0IGl0c2VsZiBzZWVrcyB0byByZXZlYWwgKGUuZy4gaW5mb3JtYW50IG9mIGNsaW5pY2FsIGhpc3RvcnkpLCBvciBpbmZvcm1hdGlvbiBhYm91dCB3aGF0IEFjdCB3YXMgcGVyZm9ybWVkIChlLmcuIGluZm9ybWFudCB3aXRuZXNzKS5cclxuICAgKi9cclxuICBwdWJsaWMgZXZlbnRQYXJ0aWNpcGFudD86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgdGhlIGFkdmVyc2UgZXZlbnQgaW4gdGV4dC5cclxuICAgKi9cclxuICBwdWJsaWMgZGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB0aGUgZW50aXR5IHRoYXQgaXMgc3VzcGVjdGVkIHRvIGhhdmUgY2F1c2VkIHRoZSBhZHZlcnNlIGV2ZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdXNwZWN0RW50aXR5OiBmaGlyLkFkdmVyc2VFdmVudFN1c3BlY3RFbnRpdHlbXTtcclxuICAvKipcclxuICAgKiBBZHZlcnNlRXZlbnQuc3ViamVjdE1lZGljYWxIaXN0b3J5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdWJqZWN0TWVkaWNhbEhpc3Rvcnk6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogQWR2ZXJzZUV2ZW50LnJlZmVyZW5jZURvY3VtZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWZlcmVuY2VEb2N1bWVudDogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBBZHZlcnNlRXZlbnQuc3R1ZHkuXHJcbiAgICovXHJcbiAgcHVibGljIHN0dWR5OiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEFkdmVyc2VFdmVudCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEFkdmVyc2VFdmVudEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdBZHZlcnNlRXZlbnQnO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IG5ldyBmaGlyLklkZW50aWZpZXIoc291cmNlLmlkZW50aWZpZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWydjYXRlZ29yeSddKSB7IHRoaXMuY2F0ZWdvcnkgPSBuZXcgZmhpci5GaGlyQ29kZTxBZHZlcnNlRXZlbnRDYXRlZ29yeUNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5jYXRlZ29yeX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfY2F0ZWdvcnknXSkge1xyXG4gICAgICBpZiAodGhpcy5jYXRlZ29yeSkgeyB0aGlzLmNhdGVnb3J5LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2NhdGVnb3J5ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuY2F0ZWdvcnkgPSBuZXcgZmhpci5GaGlyQ29kZTxBZHZlcnNlRXZlbnRDYXRlZ29yeUNvZGVUeXBlPihzb3VyY2UuX2NhdGVnb3J5IGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd0eXBlJ10pIHsgdGhpcy50eXBlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS50eXBlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3ViamVjdCddKSB7IHRoaXMuc3ViamVjdCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2Uuc3ViamVjdCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2RhdGUnXSkgeyB0aGlzLmRhdGUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2UuZGF0ZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfZGF0ZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLmRhdGUpIHsgdGhpcy5kYXRlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2RhdGUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5kYXRlID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHNvdXJjZS5fZGF0ZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckRhdGVUaW1lQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydyZWFjdGlvbiddKSB7IHRoaXMucmVhY3Rpb24gPSBzb3VyY2UucmVhY3Rpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZWFjdGlvbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydsb2NhdGlvbiddKSB7IHRoaXMubG9jYXRpb24gPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmxvY2F0aW9uKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2VyaW91c25lc3MnXSkgeyB0aGlzLnNlcmlvdXNuZXNzID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5zZXJpb3VzbmVzcyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ291dGNvbWUnXSkgeyB0aGlzLm91dGNvbWUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLm91dGNvbWUpOyB9XHJcbiAgICBpZiAoc291cmNlWydyZWNvcmRlciddKSB7IHRoaXMucmVjb3JkZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnJlY29yZGVyKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZXZlbnRQYXJ0aWNpcGFudCddKSB7IHRoaXMuZXZlbnRQYXJ0aWNpcGFudCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuZXZlbnRQYXJ0aWNpcGFudCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2Rlc2NyaXB0aW9uJ10pIHsgdGhpcy5kZXNjcmlwdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuZGVzY3JpcHRpb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2Rlc2NyaXB0aW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZGVzY3JpcHRpb24pIHsgdGhpcy5kZXNjcmlwdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9kZXNjcmlwdGlvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRlc2NyaXB0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2Rlc2NyaXB0aW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydzdXNwZWN0RW50aXR5J10pIHsgdGhpcy5zdXNwZWN0RW50aXR5ID0gc291cmNlLnN1c3BlY3RFbnRpdHkubWFwKCh4KSA9PiBuZXcgZmhpci5BZHZlcnNlRXZlbnRTdXNwZWN0RW50aXR5KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3VzcGVjdEVudGl0eSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydzdWJqZWN0TWVkaWNhbEhpc3RvcnknXSkgeyB0aGlzLnN1YmplY3RNZWRpY2FsSGlzdG9yeSA9IHNvdXJjZS5zdWJqZWN0TWVkaWNhbEhpc3RvcnkubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdWJqZWN0TWVkaWNhbEhpc3RvcnkgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVmZXJlbmNlRG9jdW1lbnQnXSkgeyB0aGlzLnJlZmVyZW5jZURvY3VtZW50ID0gc291cmNlLnJlZmVyZW5jZURvY3VtZW50Lm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVmZXJlbmNlRG9jdW1lbnQgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3R1ZHknXSkgeyB0aGlzLnN0dWR5ID0gc291cmNlLnN0dWR5Lm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3R1ZHkgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0FkdmVyc2VFdmVudCcgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2lkZW50aWZpZXInLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1NWKCdjYXRlZ29yeScsZXhwLCdBZHZlcnNlRXZlbnRDYXRlZ29yeScsQWR2ZXJzZUV2ZW50Q2F0ZWdvcnlWc1ZhbGlkYXRpb24sJ3InKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygndHlwZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnc3ViamVjdCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnZGF0ZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgncmVhY3Rpb24nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2xvY2F0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdzZXJpb3VzbmVzcycsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPU1YoJ291dGNvbWUnLGV4cCwnQWR2ZXJzZUV2ZW50T3V0Y29tZScsQWR2ZXJzZUV2ZW50T3V0Y29tZVZzVmFsaWRhdGlvbiwncicpKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdyZWNvcmRlcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnZXZlbnRQYXJ0aWNpcGFudCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnZGVzY3JpcHRpb24nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3N1c3BlY3RFbnRpdHknLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3N1YmplY3RNZWRpY2FsSGlzdG9yeScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgncmVmZXJlbmNlRG9jdW1lbnQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3N0dWR5JyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbiJdfQ==