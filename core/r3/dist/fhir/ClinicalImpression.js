// <auto-generated/>
// Contents of: hl7.fhir.r3.core version: 3.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: ClinicalImpression
import * as fhir from '../fhir.js';
// @ts-ignore
import { ClinicalImpressionStatusVsValidation } from '../fhirValueSets/ClinicalImpressionStatusVsValidation.js';
/**
 * One or more sets of investigations (signs, symptions, etc.). The actual grouping of investigations vary greatly depending on the type and context of the assessment. These investigations may include data generated during the assessment process, or data previously generated and recorded that is pertinent to the outcomes.
 */
export class ClinicalImpressionInvestigation extends fhir.BackboneElement {
    /**
     * Default constructor for ClinicalImpressionInvestigation - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code, options);
        }
        else {
            this.code = null;
        }
        if (source['item']) {
            this.item = source.item.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.item = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ClinicalImpression.investigation';
        }
        iss.push(...this.vRS('code', exp));
        iss.push(...this.vOA('item', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ClinicalImpressionInvestigation._fts_dataType = 'ClinicalImpressionInvestigation';
/**
 * Specific findings or diagnoses that was considered likely or relevant to ongoing treatment.
 */
export class ClinicalImpressionFinding extends fhir.BackboneElement {
    /**
     * Default constructor for ClinicalImpressionFinding - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['item']) {
            this.item = source.item;
        }
        else if (source['itemCodeableConcept']) {
            this.item = new fhir.CodeableConcept(source.itemCodeableConcept, options);
        }
        else if (source['itemReference']) {
            this.item = new fhir.Reference(source.itemReference, options);
        }
        else {
            this.item = null;
        }
        if (source['basis'] !== undefined) {
            this.basis = new fhir.FhirString({ value: source.basis }, options);
        }
        if (source['_basis']) {
            if (this.basis) {
                this.basis.addExtendedProperties(source._basis);
            }
            else {
                this.basis = new fhir.FhirString(source._basis, options);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ClinicalImpression.finding';
        }
        iss.push(...this.vRS('item', exp));
        iss.push(...this.vOS('basis', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ClinicalImpressionFinding._fts_dataType = 'ClinicalImpressionFinding';
/**
 * Internal flag to properly serialize choice-type element ClinicalImpression.finding.item[x]
 */
ClinicalImpressionFinding._fts_itemIsChoice = true;
/**
 * A record of a clinical assessment performed to determine what problem(s) may affect the patient and before planning the treatments or management strategies that are best to manage a patient's condition. Assessments are often 1:1 with a clinical consultation / encounter,  but this varies greatly depending on the clinical workflow. This resource is called "ClinicalImpression" rather than "ClinicalAssessment" to avoid confusion with the recording of assessment tools such as Apgar score.
 */
export class ClinicalImpression extends fhir.DomainResource {
    /**
     * Default constructor for ClinicalImpression - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'ClinicalImpression';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x, options));
        }
        else {
            this.identifier = [];
        }
        if (source['status'] !== undefined) {
            this.status = new fhir.FhirCode({ value: source.status }, options);
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status, options);
            }
        }
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code, options);
        }
        if (source['description'] !== undefined) {
            this.description = new fhir.FhirString({ value: source.description }, options);
        }
        if (source['_description']) {
            if (this.description) {
                this.description.addExtendedProperties(source._description);
            }
            else {
                this.description = new fhir.FhirString(source._description, options);
            }
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject, options);
        }
        else {
            this.subject = null;
        }
        if (source['context']) {
            this.context = new fhir.Reference(source.context, options);
        }
        if (source['effective']) {
            this.effective = source.effective;
        }
        else if (source['effectiveDateTime'] !== undefined) {
            this.effective = new fhir.FhirDateTime({ value: source.effectiveDateTime }, options);
        }
        else if (source['effectivePeriod']) {
            this.effective = new fhir.Period(source.effectivePeriod, options);
        }
        if (source['date'] !== undefined) {
            this.date = new fhir.FhirDateTime({ value: source.date }, options);
        }
        if (source['_date']) {
            if (this.date) {
                this.date.addExtendedProperties(source._date);
            }
            else {
                this.date = new fhir.FhirDateTime(source._date, options);
            }
        }
        if (source['assessor']) {
            this.assessor = new fhir.Reference(source.assessor, options);
        }
        if (source['previous']) {
            this.previous = new fhir.Reference(source.previous, options);
        }
        if (source['problem']) {
            this.problem = source.problem.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.problem = [];
        }
        if (source['investigation']) {
            this.investigation = source.investigation.map((x) => new fhir.ClinicalImpressionInvestigation(x, options));
        }
        else {
            this.investigation = [];
        }
        if (source['protocol'] !== undefined) {
            this.protocol = source.protocol.map((x) => new fhir.FhirUri({ value: x }, options));
        }
        else {
            this.protocol = [];
        }
        if (source['_protocol']) {
            source._protocol.forEach((x, i) => {
                if (this.protocol.length >= i) {
                    if (x) {
                        this.protocol[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.protocol.push(new fhir.FhirUri(x));
                    }
                }
            });
        }
        if (source['summary'] !== undefined) {
            this.summary = new fhir.FhirString({ value: source.summary }, options);
        }
        if (source['_summary']) {
            if (this.summary) {
                this.summary.addExtendedProperties(source._summary);
            }
            else {
                this.summary = new fhir.FhirString(source._summary, options);
            }
        }
        if (source['finding']) {
            this.finding = source.finding.map((x) => new fhir.ClinicalImpressionFinding(x, options));
        }
        else {
            this.finding = [];
        }
        if (source['prognosisCodeableConcept']) {
            this.prognosisCodeableConcept = source.prognosisCodeableConcept.map((x) => new fhir.CodeableConcept(x, options));
        }
        else {
            this.prognosisCodeableConcept = [];
        }
        if (source['prognosisReference']) {
            this.prognosisReference = source.prognosisReference.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.prognosisReference = [];
        }
        if (source['action']) {
            this.action = source.action.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.action = [];
        }
        if (source['note']) {
            this.note = source.note.map((x) => new fhir.Annotation(x, options));
        }
        else {
            this.note = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ClinicalImpression';
        }
        iss.push(...this.vOA('identifier', exp));
        iss.push(...this.vRSV('status', exp, 'ClinicalImpressionStatus', ClinicalImpressionStatusVsValidation, 'r'));
        iss.push(...this.vOS('code', exp));
        iss.push(...this.vOS('description', exp));
        iss.push(...this.vRS('subject', exp));
        iss.push(...this.vOS('context', exp));
        iss.push(...this.vOS('effective', exp));
        iss.push(...this.vOS('date', exp));
        iss.push(...this.vOS('assessor', exp));
        iss.push(...this.vOS('previous', exp));
        iss.push(...this.vOA('problem', exp));
        iss.push(...this.vOA('investigation', exp));
        iss.push(...this.vOA('protocol', exp));
        iss.push(...this.vOS('summary', exp));
        iss.push(...this.vOA('finding', exp));
        iss.push(...this.vOA('prognosisCodeableConcept', exp));
        iss.push(...this.vOA('prognosisReference', exp));
        iss.push(...this.vOA('action', exp));
        iss.push(...this.vOA('note', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ClinicalImpression._fts_dataType = 'ClinicalImpression';
/**
 * Internal flag to properly serialize choice-type element ClinicalImpression.effective[x]
 */
ClinicalImpression._fts_effectiveIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ2xpbmljYWxJbXByZXNzaW9uLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9DbGluaWNhbEltcHJlc3Npb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsb0NBQW9DO0FBRXBDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBUW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsb0NBQW9DLEVBQUUsTUFBTSwwREFBMEQsQ0FBQztBQW1CaEg7O0dBRUc7QUFDSCxNQUFNLE9BQU8sK0JBQWdDLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFhdkU7O09BRUc7SUFDSCxZQUFZLFNBQXNELEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQzVHLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1NBQUU7YUFDOUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztTQUFFO1FBQzFCLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDdEY7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQztTQUFFO0lBQzFCLENBQUM7SUFDRDs7T0FFRztJQUNhLGlCQUFpQixDQUFDLE1BQWEsRUFBRTtRQUMvQyxJQUFJLEdBQUcsR0FBbUIsS0FBSyxDQUFDLGlCQUFpQixD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LEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN4QyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUMsR0FBRyxFQUFDLDBCQUEwQixFQUFDLG9DQUFvQyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDekcsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDekMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDckMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDckMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDckMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsZUFBZSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDM0MsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDckMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDckMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsMEJBQTBCLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN0RCxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ2hELEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3BDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ2xDLE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQzs7QUEvS0Q7O0dBRUc7QUFDNkIsZ0NBQWEsR0FBVSxvQkFBb0IsQ0FBQztBQWlDNUU7O0dBRUc7QUFDdUIseUNBQXNCLEdBQVEsSUFBSSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnIzLmNvcmUgdmVyc2lvbjogMy4wLjJcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBDbGluaWNhbEltcHJlc3Npb25cclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEludmVzdGlnYXRpb25TZXRzQ29kZXMsICBJbnZlc3RpZ2F0aW9uU2V0c0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9JbnZlc3RpZ2F0aW9uU2V0c0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBJbnZlc3RpZ2F0aW9uU2V0c1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvSW52ZXN0aWdhdGlvblNldHNWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENsaW5pY2FsSW1wcmVzc2lvblN0YXR1c0NvZGVzLCAgQ2xpbmljYWxJbXByZXNzaW9uU3RhdHVzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NsaW5pY2FsSW1wcmVzc2lvblN0YXR1c0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDbGluaWNhbEltcHJlc3Npb25TdGF0dXNWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NsaW5pY2FsSW1wcmVzc2lvblN0YXR1c1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ2xpbmljYWxpbXByZXNzaW9uUHJvZ25vc2lzQ29kZXMsICBDbGluaWNhbGltcHJlc3Npb25Qcm9nbm9zaXNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ2xpbmljYWxpbXByZXNzaW9uUHJvZ25vc2lzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENsaW5pY2FsaW1wcmVzc2lvblByb2dub3Npc1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ2xpbmljYWxpbXByZXNzaW9uUHJvZ25vc2lzVnNWYWxpZGF0aW9uLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIENsaW5pY2FsSW1wcmVzc2lvbkludmVzdGlnYXRpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2xpbmljYWxJbXByZXNzaW9uSW52ZXN0aWdhdGlvbkFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEEgbmFtZS9jb2RlIGZvciB0aGUgZ3JvdXAgKFwic2V0XCIpIG9mIGludmVzdGlnYXRpb25zLiBUeXBpY2FsbHksIHRoaXMgd2lsbCBiZSBzb21ldGhpbmcgbGlrZSBcInNpZ25zXCIsIFwic3ltcHRvbXNcIiwgXCJjbGluaWNhbFwiLCBcImRpYWdub3N0aWNcIiwgYnV0IHRoZSBsaXN0IGlzIG5vdCBjb25zdHJhaW5lZCwgYW5kIG90aGVycyBzdWNoIGdyb3VwcyBzdWNoIGFzIChleHBvc3VyZXxmYW1pbHl8dHJhdmVsfG51dGl0aXJpb25hbCkgaGlzdG9yeSBtYXkgYmUgdXNlZC5cclxuICAgKi9cclxuICBjb2RlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBNb3N0IGludmVzdGlnYXRpb25zIGFyZSBvYnNlcnZhdGlvbnMgb2Ygb25lIGtpbmQgb2Ygb3IgYW5vdGhlciBidXQgc29tZSBvdGhlciBzcGVjaWZpYyB0eXBlcyBvZiBkYXRhIGNvbGxlY3Rpb24gcmVzb3VyY2VzIGNhbiBhbHNvIGJlIHVzZWQuXHJcbiAgICovXHJcbiAgaXRlbT86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIE9uZSBvciBtb3JlIHNldHMgb2YgaW52ZXN0aWdhdGlvbnMgKHNpZ25zLCBzeW1wdGlvbnMsIGV0Yy4pLiBUaGUgYWN0dWFsIGdyb3VwaW5nIG9mIGludmVzdGlnYXRpb25zIHZhcnkgZ3JlYXRseSBkZXBlbmRpbmcgb24gdGhlIHR5cGUgYW5kIGNvbnRleHQgb2YgdGhlIGFzc2Vzc21lbnQuIFRoZXNlIGludmVzdGlnYXRpb25zIG1heSBpbmNsdWRlIGRhdGEgZ2VuZXJhdGVkIGR1cmluZyB0aGUgYXNzZXNzbWVudCBwcm9jZXNzLCBvciBkYXRhIHByZXZpb3VzbHkgZ2VuZXJhdGVkIGFuZCByZWNvcmRlZCB0aGF0IGlzIHBlcnRpbmVudCB0byB0aGUgb3V0Y29tZXMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ2xpbmljYWxJbXByZXNzaW9uSW52ZXN0aWdhdGlvbiBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0NsaW5pY2FsSW1wcmVzc2lvbkludmVzdGlnYXRpb24nO1xyXG4gIC8qKlxyXG4gICAqIEEgbmFtZS9jb2RlIGZvciB0aGUgZ3JvdXAgKFwic2V0XCIpIG9mIGludmVzdGlnYXRpb25zLiBUeXBpY2FsbHksIHRoaXMgd2lsbCBiZSBzb21ldGhpbmcgbGlrZSBcInNpZ25zXCIsIFwic3ltcHRvbXNcIiwgXCJjbGluaWNhbFwiLCBcImRpYWdub3N0aWNcIiwgYnV0IHRoZSBsaXN0IGlzIG5vdCBjb25zdHJhaW5lZCwgYW5kIG90aGVycyBzdWNoIGdyb3VwcyBzdWNoIGFzIChleHBvc3VyZXxmYW1pbHl8dHJhdmVsfG51dGl0aXJpb25hbCkgaGlzdG9yeSBtYXkgYmUgdXNlZC5cclxuICAgKi9cclxuICBwdWJsaWMgY29kZTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBNb3N0IGludmVzdGlnYXRpb25zIGFyZSBvYnNlcnZhdGlvbnMgb2Ygb25lIGtpbmQgb2Ygb3IgYW5vdGhlciBidXQgc29tZSBvdGhlciBzcGVjaWZpYyB0eXBlcyBvZiBkYXRhIGNvbGxlY3Rpb24gcmVzb3VyY2VzIGNhbiBhbHNvIGJlIHVzZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGl0ZW06IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQ2xpbmljYWxJbXByZXNzaW9uSW52ZXN0aWdhdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENsaW5pY2FsSW1wcmVzc2lvbkludmVzdGlnYXRpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY29kZSwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvZGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydpdGVtJ10pIHsgdGhpcy5pdGVtID0gc291cmNlLml0ZW0ubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pdGVtID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdDbGluaWNhbEltcHJlc3Npb24uaW52ZXN0aWdhdGlvbicgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ2NvZGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2l0ZW0nLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIENsaW5pY2FsSW1wcmVzc2lvbkZpbmRpbmcgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2xpbmljYWxJbXByZXNzaW9uRmluZGluZ0FyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFNwZWNpZmljIHRleHQsIGNvZGUgb3IgcmVmZXJlbmNlIGZvciBmaW5kaW5nIG9yIGRpYWdub3Npcywgd2hpY2ggbWF5IGluY2x1ZGUgcnVsZWQtb3V0IG9yIHJlc29sdmVkIGNvbmRpdGlvbnMuXHJcbiAgICovXHJcbiAgaXRlbT86IGZoaXIuQ29kZWFibGVDb25jZXB0fGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTcGVjaWZpYyB0ZXh0LCBjb2RlIG9yIHJlZmVyZW5jZSBmb3IgZmluZGluZyBvciBkaWFnbm9zaXMsIHdoaWNoIG1heSBpbmNsdWRlIHJ1bGVkLW91dCBvciByZXNvbHZlZCBjb25kaXRpb25zLlxyXG4gICAqL1xyXG4gIGl0ZW1Db2RlYWJsZUNvbmNlcHQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFNwZWNpZmljIHRleHQsIGNvZGUgb3IgcmVmZXJlbmNlIGZvciBmaW5kaW5nIG9yIGRpYWdub3Npcywgd2hpY2ggbWF5IGluY2x1ZGUgcnVsZWQtb3V0IG9yIHJlc29sdmVkIGNvbmRpdGlvbnMuXHJcbiAgICovXHJcbiAgaXRlbVJlZmVyZW5jZT86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogV2hpY2ggaW52ZXN0aWdhdGlvbnMgc3VwcG9ydCBmaW5kaW5nIG9yIGRpYWdub3Npcy5cclxuICAgKi9cclxuICBiYXNpcz86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDbGluaWNhbEltcHJlc3Npb24uZmluZGluZy5iYXNpc1xyXG4gICAqL1xyXG4gIF9iYXNpcz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTcGVjaWZpYyBmaW5kaW5ncyBvciBkaWFnbm9zZXMgdGhhdCB3YXMgY29uc2lkZXJlZCBsaWtlbHkgb3IgcmVsZXZhbnQgdG8gb25nb2luZyB0cmVhdG1lbnQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ2xpbmljYWxJbXByZXNzaW9uRmluZGluZyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0NsaW5pY2FsSW1wcmVzc2lvbkZpbmRpbmcnO1xyXG4gIC8qKlxyXG4gICAqIFNwZWNpZmljIHRleHQsIGNvZGUgb3IgcmVmZXJlbmNlIGZvciBmaW5kaW5nIG9yIGRpYWdub3Npcywgd2hpY2ggbWF5IGluY2x1ZGUgcnVsZWQtb3V0IG9yIHJlc29sdmVkIGNvbmRpdGlvbnMuXHJcbiAgICovXHJcbiAgcHVibGljIGl0ZW06IChmaGlyLkNvZGVhYmxlQ29uY2VwdHxmaGlyLlJlZmVyZW5jZSl8bnVsbDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IENsaW5pY2FsSW1wcmVzc2lvbi5maW5kaW5nLml0ZW1beF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfaXRlbUlzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIFdoaWNoIGludmVzdGlnYXRpb25zIHN1cHBvcnQgZmluZGluZyBvciBkaWFnbm9zaXMuXHJcbiAgICovXHJcbiAgcHVibGljIGJhc2lzPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBDbGluaWNhbEltcHJlc3Npb25GaW5kaW5nIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8Q2xpbmljYWxJbXByZXNzaW9uRmluZGluZ0FyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydpdGVtJ10pIHsgdGhpcy5pdGVtID0gc291cmNlLml0ZW07IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnaXRlbUNvZGVhYmxlQ29uY2VwdCddKSB7IHRoaXMuaXRlbSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuaXRlbUNvZGVhYmxlQ29uY2VwdCwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnaXRlbVJlZmVyZW5jZSddKSB7IHRoaXMuaXRlbSA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuaXRlbVJlZmVyZW5jZSwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgeyB0aGlzLml0ZW0gPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydiYXNpcyddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5iYXNpcyA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuYmFzaXN9LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2Jhc2lzJ10pIHtcclxuICAgICAgaWYgKHRoaXMuYmFzaXMpIHsgdGhpcy5iYXNpcy5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9iYXNpcyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmJhc2lzID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2Jhc2lzIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnQ2xpbmljYWxJbXByZXNzaW9uLmZpbmRpbmcnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdpdGVtJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdiYXNpcycsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQ2xpbmljYWxJbXByZXNzaW9uIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENsaW5pY2FsSW1wcmVzc2lvbkFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIkNsaW5pY2FsSW1wcmVzc2lvblwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHVuaXF1ZSBpZGVudGlmaWVyIGFzc2lnbmVkIHRvIHRoZSBjbGluaWNhbCBpbXByZXNzaW9uIHRoYXQgcmVtYWlucyBjb25zaXN0ZW50IHJlZ2FyZGxlc3Mgb2Ygd2hhdCBzZXJ2ZXIgdGhlIGltcHJlc3Npb24gaXMgc3RvcmVkIG9uLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgYmVjYXVzZSB0aGUgc3RhdHVzIGNvbnRhaW5zIHRoZSBjb2RlIGVudGVyZWQtaW4tZXJyb3IgdGhhdCBtYXJrcyB0aGUgY2xpbmljYWwgaW1wcmVzc2lvbiBhcyBub3QgY3VycmVudGx5IHZhbGlkLlxyXG4gICAqL1xyXG4gIHN0YXR1czogZmhpci5GaGlyQ29kZTxDbGluaWNhbEltcHJlc3Npb25TdGF0dXNDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ2xpbmljYWxJbXByZXNzaW9uLnN0YXR1c1xyXG4gICAqL1xyXG4gIF9zdGF0dXM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaXMgcHJlc2VudCBhcyBhIHBsYWNlLWhvbGRlciBvbmx5IGFuZCBtYXkgYmUgcmVtb3ZlZCBiYXNlZCBvbiBmZWVkYmFjay93b3JrIGdyb3VwIG9waW5pb24uXHJcbiAgICovXHJcbiAgY29kZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBzdW1tYXJ5IG9mIHRoZSBjb250ZXh0IGFuZC9vciBjYXVzZSBvZiB0aGUgYXNzZXNzbWVudCAtIHdoeSAvIHdoZXJlIHdhcyBpdCBwZXJmb3JtZWQsIGFuZCB3aGF0IHBhdGllbnQgZXZlbnRzL3N0YXR1cyBwcm9tcHRlZCBpdC5cclxuICAgKi9cclxuICBkZXNjcmlwdGlvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDbGluaWNhbEltcHJlc3Npb24uZGVzY3JpcHRpb25cclxuICAgKi9cclxuICBfZGVzY3JpcHRpb24/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXRpZW50IG9yIGdyb3VwIG9mIGluZGl2aWR1YWxzIGFzc2Vzc2VkIGFzIHBhcnQgb2YgdGhpcyByZWNvcmQuXHJcbiAgICovXHJcbiAgc3ViamVjdDogZmhpci5SZWZlcmVuY2VBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGVuY291bnRlciBvciBlcGlzb2RlIG9mIGNhcmUgdGhpcyBpbXByZXNzaW9uIHdhcyBjcmVhdGVkIGFzIHBhcnQgb2YuXHJcbiAgICovXHJcbiAgY29udGV4dD86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBTSE9VTEQgYmUgYWNjdXJhdGUgdG8gYXQgbGVhc3QgdGhlIG1pbnV0ZSwgdGhvdWdoIHNvbWUgYXNzZXNzbWVudHMgb25seSBoYXZlIGEga25vd24gZGF0ZS5cclxuICAgKi9cclxuICBlZmZlY3RpdmU/OiBmaGlyLkZoaXJEYXRlVGltZXxmaGlyLlBlcmlvZHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBTSE9VTEQgYmUgYWNjdXJhdGUgdG8gYXQgbGVhc3QgdGhlIG1pbnV0ZSwgdGhvdWdoIHNvbWUgYXNzZXNzbWVudHMgb25seSBoYXZlIGEga25vd24gZGF0ZS5cclxuICAgKi9cclxuICBlZmZlY3RpdmVEYXRlVGltZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBTSE9VTEQgYmUgYWNjdXJhdGUgdG8gYXQgbGVhc3QgdGhlIG1pbnV0ZSwgdGhvdWdoIHNvbWUgYXNzZXNzbWVudHMgb25seSBoYXZlIGEga25vd24gZGF0ZS5cclxuICAgKi9cclxuICBlZmZlY3RpdmVQZXJpb2Q/OiBmaGlyLlBlcmlvZEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB3aGVuIHRoZSBkb2N1bWVudGF0aW9uIG9mIHRoZSBhc3Nlc3NtZW50IHdhcyBjb21wbGV0ZS5cclxuICAgKi9cclxuICBkYXRlPzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ2xpbmljYWxJbXByZXNzaW9uLmRhdGVcclxuICAgKi9cclxuICBfZGF0ZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNsaW5pY2lhbiBwZXJmb3JtaW5nIHRoZSBhc3Nlc3NtZW50LlxyXG4gICAqL1xyXG4gIGFzc2Vzc29yPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJdCBpcyBhbHdheXMgbGlrZWx5IHRoYXQgbXVsdGlwbGUgcHJldmlvdXMgYXNzZXNzbWVudHMgZXhpc3QgZm9yIGEgcGF0aWVudC4gVGhlIHBvaW50IG9mIHF1b3RpbmcgYSBwcmV2aW91cyBhc3Nlc3NtZW50IGlzIHRoYXQgdGhpcyBhc3Nlc3NtZW50IGlzIHJlbGF0aXZlIHRvIGl0IChzZWUgcmVzb2x2ZWQpLlxyXG4gICAqL1xyXG4gIHByZXZpb3VzPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBlLmcuIFRoZSBwYXRpZW50IGlzIGEgcHJlZ25hbnQsIGFuZCBjYXJkaWFjIGNvbmdlc3RpdmUgZmFpbHVyZSwg4oCOQWRlbm9jYXJjaW5vbWEsIGFuZCBpcyBhbGxlcmdpYyB0byBwZW5pY2lsbGluLlxyXG4gICAqL1xyXG4gIHByb2JsZW0/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogT25lIG9yIG1vcmUgc2V0cyBvZiBpbnZlc3RpZ2F0aW9ucyAoc2lnbnMsIHN5bXB0aW9ucywgZXRjLikuIFRoZSBhY3R1YWwgZ3JvdXBpbmcgb2YgaW52ZXN0aWdhdGlvbnMgdmFyeSBncmVhdGx5IGRlcGVuZGluZyBvbiB0aGUgdHlwZSBhbmQgY29udGV4dCBvZiB0aGUgYXNzZXNzbWVudC4gVGhlc2UgaW52ZXN0aWdhdGlvbnMgbWF5IGluY2x1ZGUgZGF0YSBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBhc3Nlc3NtZW50IHByb2Nlc3MsIG9yIGRhdGEgcHJldmlvdXNseSBnZW5lcmF0ZWQgYW5kIHJlY29yZGVkIHRoYXQgaXMgcGVydGluZW50IHRvIHRoZSBvdXRjb21lcy5cclxuICAgKi9cclxuICBpbnZlc3RpZ2F0aW9uPzogZmhpci5DbGluaWNhbEltcHJlc3Npb25JbnZlc3RpZ2F0aW9uQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBSZWZlcmVuY2UgdG8gYSBzcGVjaWZpYyBwdWJsaXNoZWQgY2xpbmljYWwgcHJvdG9jb2wgdGhhdCB3YXMgZm9sbG93ZWQgZHVyaW5nIHRoaXMgYXNzZXNzbWVudCwgYW5kL29yIHRoYXQgcHJvdmlkZXMgZXZpZGVuY2UgaW4gc3VwcG9ydCBvZiB0aGUgZGlhZ25vc2lzLlxyXG4gICAqL1xyXG4gIHByb3RvY29sPzogZmhpci5GaGlyVXJpW118KHN0cmluZ3xudWxsKVtdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ2xpbmljYWxJbXByZXNzaW9uLnByb3RvY29sXHJcbiAgICovXHJcbiAgX3Byb3RvY29sPzooZmhpci5GaGlyRWxlbWVudEFyZ3N8bnVsbClbXTtcclxuICAvKipcclxuICAgKiBBIHRleHQgc3VtbWFyeSBvZiB0aGUgaW52ZXN0aWdhdGlvbnMgYW5kIHRoZSBkaWFnbm9zaXMuXHJcbiAgICovXHJcbiAgc3VtbWFyeT86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDbGluaWNhbEltcHJlc3Npb24uc3VtbWFyeVxyXG4gICAqL1xyXG4gIF9zdW1tYXJ5PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBTcGVjaWZpYyBmaW5kaW5ncyBvciBkaWFnbm9zZXMgdGhhdCB3YXMgY29uc2lkZXJlZCBsaWtlbHkgb3IgcmVsZXZhbnQgdG8gb25nb2luZyB0cmVhdG1lbnQuXHJcbiAgICovXHJcbiAgZmluZGluZz86IGZoaXIuQ2xpbmljYWxJbXByZXNzaW9uRmluZGluZ0FyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXN0aW1hdGUgb2YgbGlrZWx5IG91dGNvbWUuXHJcbiAgICovXHJcbiAgcHJvZ25vc2lzQ29kZWFibGVDb25jZXB0PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFJpc2tBc3Nlc3NtZW50IGV4cHJlc3NpbmcgbGlrZWx5IG91dGNvbWUuXHJcbiAgICovXHJcbiAgcHJvZ25vc2lzUmVmZXJlbmNlPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFjdGlvbnMgcmVjb21tZW5kZWQgYXMgYSByZXN1bHQgb2YgdGhlIGltcHJlc3Npb24gc2hvdWxkIG5vdCBiZSBjYXB0dXJlZCB1c2luZyB0aGUgJ2FjdGlvbicgZWxlbWVudC5cclxuICAgKi9cclxuICBhY3Rpb24/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRG9uJ3QgdXNlIHRoaXMgZWxlbWVudCBmb3IgY29udGVudCB0aGF0IHNob3VsZCBtb3JlIHByb3Blcmx5IGFwcGVhciBhcyBvbmUgb2YgdGhlIHNwZWNpZmljIGVsZW1lbnRzIG9mIHRoZSBpbXByZXNzaW9uLlxyXG4gICAqL1xyXG4gIG5vdGU/OiBmaGlyLkFubm90YXRpb25BcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQSByZWNvcmQgb2YgYSBjbGluaWNhbCBhc3Nlc3NtZW50IHBlcmZvcm1lZCB0byBkZXRlcm1pbmUgd2hhdCBwcm9ibGVtKHMpIG1heSBhZmZlY3QgdGhlIHBhdGllbnQgYW5kIGJlZm9yZSBwbGFubmluZyB0aGUgdHJlYXRtZW50cyBvciBtYW5hZ2VtZW50IHN0cmF0ZWdpZXMgdGhhdCBhcmUgYmVzdCB0byBtYW5hZ2UgYSBwYXRpZW50J3MgY29uZGl0aW9uLiBBc3Nlc3NtZW50cyBhcmUgb2Z0ZW4gMToxIHdpdGggYSBjbGluaWNhbCBjb25zdWx0YXRpb24gLyBlbmNvdW50ZXIsICBidXQgdGhpcyB2YXJpZXMgZ3JlYXRseSBkZXBlbmRpbmcgb24gdGhlIGNsaW5pY2FsIHdvcmtmbG93LiBUaGlzIHJlc291cmNlIGlzIGNhbGxlZCBcIkNsaW5pY2FsSW1wcmVzc2lvblwiIHJhdGhlciB0aGFuIFwiQ2xpbmljYWxBc3Nlc3NtZW50XCIgdG8gYXZvaWQgY29uZnVzaW9uIHdpdGggdGhlIHJlY29yZGluZyBvZiBhc3Nlc3NtZW50IHRvb2xzIHN1Y2ggYXMgQXBnYXIgc2NvcmUuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ2xpbmljYWxJbXByZXNzaW9uIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdDbGluaWNhbEltcHJlc3Npb24nO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNvdXJjZVR5cGU6IFwiQ2xpbmljYWxJbXByZXNzaW9uXCI7XHJcbiAgLyoqXHJcbiAgICogQSB1bmlxdWUgaWRlbnRpZmllciBhc3NpZ25lZCB0byB0aGUgY2xpbmljYWwgaW1wcmVzc2lvbiB0aGF0IHJlbWFpbnMgY29uc2lzdGVudCByZWdhcmRsZXNzIG9mIHdoYXQgc2VydmVyIHRoZSBpbXByZXNzaW9uIGlzIHN0b3JlZCBvbi5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcjogZmhpci5JZGVudGlmaWVyW107XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IGlzIGxhYmVsZWQgYXMgYSBtb2RpZmllciBiZWNhdXNlIHRoZSBzdGF0dXMgY29udGFpbnMgdGhlIGNvZGUgZW50ZXJlZC1pbi1lcnJvciB0aGF0IG1hcmtzIHRoZSBjbGluaWNhbCBpbXByZXNzaW9uIGFzIG5vdCBjdXJyZW50bHkgdmFsaWQuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1czogZmhpci5GaGlyQ29kZTxDbGluaWNhbEltcHJlc3Npb25TdGF0dXNDb2RlVHlwZT58bnVsbDtcclxuICAvKipcclxuICAgKiBUaGlzIGlzIHByZXNlbnQgYXMgYSBwbGFjZS1ob2xkZXIgb25seSBhbmQgbWF5IGJlIHJlbW92ZWQgYmFzZWQgb24gZmVlZGJhY2svd29yayBncm91cCBvcGluaW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb2RlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgc3VtbWFyeSBvZiB0aGUgY29udGV4dCBhbmQvb3IgY2F1c2Ugb2YgdGhlIGFzc2Vzc21lbnQgLSB3aHkgLyB3aGVyZSB3YXMgaXQgcGVyZm9ybWVkLCBhbmQgd2hhdCBwYXRpZW50IGV2ZW50cy9zdGF0dXMgcHJvbXB0ZWQgaXQuXHJcbiAgICovXHJcbiAgcHVibGljIGRlc2NyaXB0aW9uPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcGF0aWVudCBvciBncm91cCBvZiBpbmRpdmlkdWFscyBhc3Nlc3NlZCBhcyBwYXJ0IG9mIHRoaXMgcmVjb3JkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdWJqZWN0OiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBlbmNvdW50ZXIgb3IgZXBpc29kZSBvZiBjYXJlIHRoaXMgaW1wcmVzc2lvbiB3YXMgY3JlYXRlZCBhcyBwYXJ0IG9mLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb250ZXh0PzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgU0hPVUxEIGJlIGFjY3VyYXRlIHRvIGF0IGxlYXN0IHRoZSBtaW51dGUsIHRob3VnaCBzb21lIGFzc2Vzc21lbnRzIG9ubHkgaGF2ZSBhIGtub3duIGRhdGUuXHJcbiAgICovXHJcbiAgcHVibGljIGVmZmVjdGl2ZT86IChmaGlyLkZoaXJEYXRlVGltZXxmaGlyLlBlcmlvZCl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgQ2xpbmljYWxJbXByZXNzaW9uLmVmZmVjdGl2ZVt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c19lZmZlY3RpdmVJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgd2hlbiB0aGUgZG9jdW1lbnRhdGlvbiBvZiB0aGUgYXNzZXNzbWVudCB3YXMgY29tcGxldGUuXHJcbiAgICovXHJcbiAgcHVibGljIGRhdGU/OiBmaGlyLkZoaXJEYXRlVGltZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNsaW5pY2lhbiBwZXJmb3JtaW5nIHRoZSBhc3Nlc3NtZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhc3Nlc3Nvcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJdCBpcyBhbHdheXMgbGlrZWx5IHRoYXQgbXVsdGlwbGUgcHJldmlvdXMgYXNzZXNzbWVudHMgZXhpc3QgZm9yIGEgcGF0aWVudC4gVGhlIHBvaW50IG9mIHF1b3RpbmcgYSBwcmV2aW91cyBhc3Nlc3NtZW50IGlzIHRoYXQgdGhpcyBhc3Nlc3NtZW50IGlzIHJlbGF0aXZlIHRvIGl0IChzZWUgcmVzb2x2ZWQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcmV2aW91cz86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBlLmcuIFRoZSBwYXRpZW50IGlzIGEgcHJlZ25hbnQsIGFuZCBjYXJkaWFjIGNvbmdlc3RpdmUgZmFpbHVyZSwg4oCOQWRlbm9jYXJjaW5vbWEsIGFuZCBpcyBhbGxlcmdpYyB0byBwZW5pY2lsbGluLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcm9ibGVtOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIE9uZSBvciBtb3JlIHNldHMgb2YgaW52ZXN0aWdhdGlvbnMgKHNpZ25zLCBzeW1wdGlvbnMsIGV0Yy4pLiBUaGUgYWN0dWFsIGdyb3VwaW5nIG9mIGludmVzdGlnYXRpb25zIHZhcnkgZ3JlYXRseSBkZXBlbmRpbmcgb24gdGhlIHR5cGUgYW5kIGNvbnRleHQgb2YgdGhlIGFzc2Vzc21lbnQuIFRoZXNlIGludmVzdGlnYXRpb25zIG1heSBpbmNsdWRlIGRhdGEgZ2VuZXJhdGVkIGR1cmluZyB0aGUgYXNzZXNzbWVudCBwcm9jZXNzLCBvciBkYXRhIHByZXZpb3VzbHkgZ2VuZXJhdGVkIGFuZCByZWNvcmRlZCB0aGF0IGlzIHBlcnRpbmVudCB0byB0aGUgb3V0Y29tZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGludmVzdGlnYXRpb246IGZoaXIuQ2xpbmljYWxJbXByZXNzaW9uSW52ZXN0aWdhdGlvbltdO1xyXG4gIC8qKlxyXG4gICAqIFJlZmVyZW5jZSB0byBhIHNwZWNpZmljIHB1Ymxpc2hlZCBjbGluaWNhbCBwcm90b2NvbCB0aGF0IHdhcyBmb2xsb3dlZCBkdXJpbmcgdGhpcyBhc3Nlc3NtZW50LCBhbmQvb3IgdGhhdCBwcm92aWRlcyBldmlkZW5jZSBpbiBzdXBwb3J0IG9mIHRoZSBkaWFnbm9zaXMuXHJcbiAgICovXHJcbiAgcHVibGljIHByb3RvY29sOiBmaGlyLkZoaXJVcmlbXTtcclxuICAvKipcclxuICAgKiBBIHRleHQgc3VtbWFyeSBvZiB0aGUgaW52ZXN0aWdhdGlvbnMgYW5kIHRoZSBkaWFnbm9zaXMuXHJcbiAgICovXHJcbiAgcHVibGljIHN1bW1hcnk/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFNwZWNpZmljIGZpbmRpbmdzIG9yIGRpYWdub3NlcyB0aGF0IHdhcyBjb25zaWRlcmVkIGxpa2VseSBvciByZWxldmFudCB0byBvbmdvaW5nIHRyZWF0bWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgZmluZGluZzogZmhpci5DbGluaWNhbEltcHJlc3Npb25GaW5kaW5nW107XHJcbiAgLyoqXHJcbiAgICogRXN0aW1hdGUgb2YgbGlrZWx5IG91dGNvbWUuXHJcbiAgICovXHJcbiAgcHVibGljIHByb2dub3Npc0NvZGVhYmxlQ29uY2VwdDogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBSaXNrQXNzZXNzbWVudCBleHByZXNzaW5nIGxpa2VseSBvdXRjb21lLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcm9nbm9zaXNSZWZlcmVuY2U6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogQWN0aW9ucyByZWNvbW1lbmRlZCBhcyBhIHJlc3VsdCBvZiB0aGUgaW1wcmVzc2lvbiBzaG91bGQgbm90IGJlIGNhcHR1cmVkIHVzaW5nIHRoZSAnYWN0aW9uJyBlbGVtZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhY3Rpb246IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogRG9uJ3QgdXNlIHRoaXMgZWxlbWVudCBmb3IgY29udGVudCB0aGF0IHNob3VsZCBtb3JlIHByb3Blcmx5IGFwcGVhciBhcyBvbmUgb2YgdGhlIHNwZWNpZmljIGVsZW1lbnRzIG9mIHRoZSBpbXByZXNzaW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBub3RlOiBmaGlyLkFubm90YXRpb25bXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBDbGluaWNhbEltcHJlc3Npb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxDbGluaWNhbEltcHJlc3Npb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnQ2xpbmljYWxJbXByZXNzaW9uJztcclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBzb3VyY2UuaWRlbnRpZmllci5tYXAoKHgpID0+IG5ldyBmaGlyLklkZW50aWZpZXIoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pZGVudGlmaWVyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0YXR1cyddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxDbGluaWNhbEltcHJlc3Npb25TdGF0dXNDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2Uuc3RhdHVzfSwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zdGF0dXMnXSkge1xyXG4gICAgICBpZiAodGhpcy5zdGF0dXMpIHsgdGhpcy5zdGF0dXMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc3RhdHVzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8Q2xpbmljYWxJbXByZXNzaW9uU3RhdHVzQ29kZVR5cGU+KHNvdXJjZS5fc3RhdHVzIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jb2RlLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGVzY3JpcHRpb24nXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuZGVzY3JpcHRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmRlc2NyaXB0aW9ufSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19kZXNjcmlwdGlvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLmRlc2NyaXB0aW9uKSB7IHRoaXMuZGVzY3JpcHRpb24uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZGVzY3JpcHRpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5kZXNjcmlwdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9kZXNjcmlwdGlvbiBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3ViamVjdCddKSB7IHRoaXMuc3ViamVjdCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2Uuc3ViamVjdCwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN1YmplY3QgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydjb250ZXh0J10pIHsgdGhpcy5jb250ZXh0ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5jb250ZXh0LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZWZmZWN0aXZlJ10pIHsgdGhpcy5lZmZlY3RpdmUgPSBzb3VyY2UuZWZmZWN0aXZlOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2VmZmVjdGl2ZURhdGVUaW1lJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLmVmZmVjdGl2ZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5lZmZlY3RpdmVEYXRlVGltZX0sIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2VmZmVjdGl2ZVBlcmlvZCddKSB7IHRoaXMuZWZmZWN0aXZlID0gbmV3IGZoaXIuUGVyaW9kKHNvdXJjZS5lZmZlY3RpdmVQZXJpb2QsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydkYXRlJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLmRhdGUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2UuZGF0ZX0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfZGF0ZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLmRhdGUpIHsgdGhpcy5kYXRlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2RhdGUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5kYXRlID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHNvdXJjZS5fZGF0ZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckRhdGVUaW1lQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydhc3Nlc3NvciddKSB7IHRoaXMuYXNzZXNzb3IgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmFzc2Vzc29yLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJldmlvdXMnXSkgeyB0aGlzLnByZXZpb3VzID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5wcmV2aW91cywgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3Byb2JsZW0nXSkgeyB0aGlzLnByb2JsZW0gPSBzb3VyY2UucHJvYmxlbS5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnByb2JsZW0gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaW52ZXN0aWdhdGlvbiddKSB7IHRoaXMuaW52ZXN0aWdhdGlvbiA9IHNvdXJjZS5pbnZlc3RpZ2F0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ2xpbmljYWxJbXByZXNzaW9uSW52ZXN0aWdhdGlvbih4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmludmVzdGlnYXRpb24gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJvdG9jb2wnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMucHJvdG9jb2wgPSBzb3VyY2UucHJvdG9jb2wubWFwKCh4KSA9PiBuZXcgZmhpci5GaGlyVXJpKHt2YWx1ZTogeH0sIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucHJvdG9jb2wgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3Byb3RvY29sJ10pIHtcclxuICAgICAgc291cmNlLl9wcm90b2NvbC5mb3JFYWNoKCh4LGkpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5wcm90b2NvbC5sZW5ndGggPj0gaSkgeyBpZiAoeCkgeyB0aGlzLnByb3RvY29sW2ldLmFkZEV4dGVuZGVkUHJvcGVydGllcyh4KTsgfSB9XHJcbiAgICAgICAgZWxzZSB7IGlmICh4KSB7IHRoaXMucHJvdG9jb2wucHVzaChuZXcgZmhpci5GaGlyVXJpKHggYXMgUGFydGlhbDxmaGlyLkZoaXJVcmlBcmdzPikpOyB9IH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydzdW1tYXJ5J10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnN1bW1hcnkgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnN1bW1hcnl9LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3N1bW1hcnknXSkge1xyXG4gICAgICBpZiAodGhpcy5zdW1tYXJ5KSB7IHRoaXMuc3VtbWFyeS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zdW1tYXJ5ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3VtbWFyeSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9zdW1tYXJ5IGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydmaW5kaW5nJ10pIHsgdGhpcy5maW5kaW5nID0gc291cmNlLmZpbmRpbmcubWFwKCh4KSA9PiBuZXcgZmhpci5DbGluaWNhbEltcHJlc3Npb25GaW5kaW5nKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZmluZGluZyA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwcm9nbm9zaXNDb2RlYWJsZUNvbmNlcHQnXSkgeyB0aGlzLnByb2dub3Npc0NvZGVhYmxlQ29uY2VwdCA9IHNvdXJjZS5wcm9nbm9zaXNDb2RlYWJsZUNvbmNlcHQubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wcm9nbm9zaXNDb2RlYWJsZUNvbmNlcHQgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJvZ25vc2lzUmVmZXJlbmNlJ10pIHsgdGhpcy5wcm9nbm9zaXNSZWZlcmVuY2UgPSBzb3VyY2UucHJvZ25vc2lzUmVmZXJlbmNlLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucHJvZ25vc2lzUmVmZXJlbmNlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2FjdGlvbiddKSB7IHRoaXMuYWN0aW9uID0gc291cmNlLmFjdGlvbi5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmFjdGlvbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydub3RlJ10pIHsgdGhpcy5ub3RlID0gc291cmNlLm5vdGUubWFwKCh4KSA9PiBuZXcgZmhpci5Bbm5vdGF0aW9uKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubm90ZSA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnQ2xpbmljYWxJbXByZXNzaW9uJyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnaWRlbnRpZmllcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSU1YoJ3N0YXR1cycsZXhwLCdDbGluaWNhbEltcHJlc3Npb25TdGF0dXMnLENsaW5pY2FsSW1wcmVzc2lvblN0YXR1c1ZzVmFsaWRhdGlvbiwncicpKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdjb2RlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdkZXNjcmlwdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygnc3ViamVjdCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnY29udGV4dCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnZWZmZWN0aXZlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdkYXRlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdhc3Nlc3NvcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygncHJldmlvdXMnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3Byb2JsZW0nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2ludmVzdGlnYXRpb24nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3Byb3RvY29sJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdzdW1tYXJ5JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdmaW5kaW5nJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdwcm9nbm9zaXNDb2RlYWJsZUNvbmNlcHQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3Byb2dub3Npc1JlZmVyZW5jZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnYWN0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdub3RlJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbiJdfQ==