// <auto-generated/>
// Contents of: hl7.fhir.r3.core version: 3.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: ImmunizationRecommendation
import * as fhir from '../fhir.js';
/**
 * Vaccine date recommendations.  For example, earliest date to administer, latest date to administer, etc.
 */
export class ImmunizationRecommendationRecommendationDateCriterion extends fhir.BackboneElement {
    /**
     * Default constructor for ImmunizationRecommendationRecommendationDateCriterion - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        else {
            this.code = null;
        }
        if (source['value']) {
            this.value = new fhir.FhirDateTime({ value: source.value });
        }
        else {
            this.value = null;
        }
        if (source['_value']) {
            if (this.value) {
                this.value.addExtendedProperties(source._value);
            }
            else {
                this.value = new fhir.FhirDateTime(source._value);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ImmunizationRecommendation.recommendation.dateCriterion';
        }
        this.vRS('code', exp);
        this.vRS('value', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ImmunizationRecommendationRecommendationDateCriterion._fts_dataType = 'ImmunizationRecommendationRecommendationDateCriterion';
/**
 * Contains information about the protocol under which the vaccine was administered.
 */
export class ImmunizationRecommendationRecommendationProtocol extends fhir.BackboneElement {
    /**
     * Default constructor for ImmunizationRecommendationRecommendationProtocol - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['doseSequence']) {
            this.doseSequence = new fhir.FhirPositiveInt({ value: source.doseSequence });
        }
        if (source['_doseSequence']) {
            if (this.doseSequence) {
                this.doseSequence.addExtendedProperties(source._doseSequence);
            }
            else {
                this.doseSequence = new fhir.FhirPositiveInt(source._doseSequence);
            }
        }
        if (source['description']) {
            this.description = new fhir.FhirString({ value: source.description });
        }
        if (source['_description']) {
            if (this.description) {
                this.description.addExtendedProperties(source._description);
            }
            else {
                this.description = new fhir.FhirString(source._description);
            }
        }
        if (source['authority']) {
            this.authority = new fhir.Reference(source.authority);
        }
        if (source['series']) {
            this.series = new fhir.FhirString({ value: source.series });
        }
        if (source['_series']) {
            if (this.series) {
                this.series.addExtendedProperties(source._series);
            }
            else {
                this.series = new fhir.FhirString(source._series);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ImmunizationRecommendation.recommendation.protocol';
        }
        this.vOS('doseSequence', exp);
        this.vOS('description', exp);
        this.vOS('authority', exp);
        this.vOS('series', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ImmunizationRecommendationRecommendationProtocol._fts_dataType = 'ImmunizationRecommendationRecommendationProtocol';
/**
 * Vaccine administration recommendations.
 */
export class ImmunizationRecommendationRecommendation extends fhir.BackboneElement {
    /**
     * Default constructor for ImmunizationRecommendationRecommendation - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['date']) {
            this.date = new fhir.FhirDateTime({ value: source.date });
        }
        else {
            this.date = null;
        }
        if (source['_date']) {
            if (this.date) {
                this.date.addExtendedProperties(source._date);
            }
            else {
                this.date = new fhir.FhirDateTime(source._date);
            }
        }
        if (source['vaccineCode']) {
            this.vaccineCode = new fhir.CodeableConcept(source.vaccineCode);
        }
        if (source['targetDisease']) {
            this.targetDisease = new fhir.CodeableConcept(source.targetDisease);
        }
        if (source['doseNumber']) {
            this.doseNumber = new fhir.FhirPositiveInt({ value: source.doseNumber });
        }
        if (source['_doseNumber']) {
            if (this.doseNumber) {
                this.doseNumber.addExtendedProperties(source._doseNumber);
            }
            else {
                this.doseNumber = new fhir.FhirPositiveInt(source._doseNumber);
            }
        }
        if (source['forecastStatus']) {
            this.forecastStatus = new fhir.CodeableConcept(source.forecastStatus);
        }
        else {
            this.forecastStatus = null;
        }
        if (source['dateCriterion']) {
            this.dateCriterion = source.dateCriterion.map((x) => new fhir.ImmunizationRecommendationRecommendationDateCriterion(x));
        }
        else {
            this.dateCriterion = [];
        }
        if (source['protocol']) {
            this.protocol = new fhir.ImmunizationRecommendationRecommendationProtocol(source.protocol);
        }
        if (source['supportingImmunization']) {
            this.supportingImmunization = source.supportingImmunization.map((x) => new fhir.Reference(x));
        }
        else {
            this.supportingImmunization = [];
        }
        if (source['supportingPatientInformation']) {
            this.supportingPatientInformation = source.supportingPatientInformation.map((x) => new fhir.Reference(x));
        }
        else {
            this.supportingPatientInformation = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ImmunizationRecommendation.recommendation';
        }
        this.vRS('date', exp);
        this.vOS('vaccineCode', exp);
        this.vOS('targetDisease', exp);
        this.vOS('doseNumber', exp);
        this.vRS('forecastStatus', exp);
        this.vOA('dateCriterion', exp);
        this.vOS('protocol', exp);
        this.vOA('supportingImmunization', exp);
        this.vOA('supportingPatientInformation', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ImmunizationRecommendationRecommendation._fts_dataType = 'ImmunizationRecommendationRecommendation';
/**
 * A patient's point-in-time immunization and recommendation (i.e. forecasting a patient's immunization eligibility according to a published schedule) with optional supporting justification.
 */
export class ImmunizationRecommendation extends fhir.DomainResource {
    /**
     * Default constructor for ImmunizationRecommendation - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'ImmunizationRecommendation';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['patient']) {
            this.patient = new fhir.Reference(source.patient);
        }
        else {
            this.patient = null;
        }
        if (source['recommendation']) {
            this.recommendation = source.recommendation.map((x) => new fhir.ImmunizationRecommendationRecommendation(x));
        }
        else {
            this.recommendation = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ImmunizationRecommendation';
        }
        this.vRS('resourceType', exp);
        this.vOA('identifier', exp);
        this.vRS('patient', exp);
        this.vRA('recommendation', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ImmunizationRecommendation._fts_dataType = 'ImmunizationRecommendation';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW1tdW5pemF0aW9uUmVjb21tZW5kYXRpb24uanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL0ltbXVuaXphdGlvblJlY29tbWVuZGF0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQiwrQ0FBK0M7QUFDL0Msa0NBQWtDO0FBQ2xDLDRDQUE0QztBQUU1QyxPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQW9DbkM7O0dBRUc7QUFDSCxNQUFNLE9BQU8scURBQXNELFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFhN0Y7O09BRUc7SUFDSCxZQUFZLFNBQTRFLEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQ2xJLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7U0FBRTthQUNyRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDMUIsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsS0FBSyxFQUFDLENBQUMsQ0FBQztTQUFFO2FBQzlFO1lBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7U0FBRTtRQUMzQixJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUNwQixJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUU7Z0JBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsTUFBTyxDQUFDLENBQUM7YUFBRTtpQkFDaEU7Z0JBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLElBQUks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UUFDOUIsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7U0FBRTthQUN4RTtZQUFFLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDN0IsSUFBSSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxjQUFjLEdBQUcsTUFBTSxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLHdDQUF3QyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUMxSTtZQUFFLElBQUksQ0FBQyxjQUFjLEdBQUcsRUFBRSxDQUFDO1NBQUU7SUFDcEMsQ0FBQztJQUNEOztPQUVHO0lBQ2EsaUJBQWlCLENBQUMsTUFBYSxFQUFFO1FBQy9DLElBQUksTUFBTSxHQUFtQixLQUFLLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDMUQsSUFBSSxHQUFHLEtBQUssRUFBRSxFQUFFO1lBQUUsR0FBRyxHQUFHLDRCQUE0QixDQUFBO1NBQUU7UUFDdEQsSUFBSSxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDNUIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDMUIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDdkIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUM5QixPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQTVDRDs7R0FFRztBQUM2Qix3Q0FBYSxHQUFVLDRCQUE0QixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnIzLmNvcmUgdmVyc2lvbjogMy4wLjJcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBJbW11bml6YXRpb25SZWNvbW1lbmRhdGlvblxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgSW1tdW5pemF0aW9uUmVjb21tZW5kYXRpb25EYXRlQ3JpdGVyaW9uQ29kZXMsICBJbW11bml6YXRpb25SZWNvbW1lbmRhdGlvbkRhdGVDcml0ZXJpb25Db2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvSW1tdW5pemF0aW9uUmVjb21tZW5kYXRpb25EYXRlQ3JpdGVyaW9uQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEltbXVuaXphdGlvblJlY29tbWVuZGF0aW9uRGF0ZUNyaXRlcmlvblZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvSW1tdW5pemF0aW9uUmVjb21tZW5kYXRpb25EYXRlQ3JpdGVyaW9uVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBWYWNjaW5lQ29kZXMsICBWYWNjaW5lQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1ZhY2NpbmVDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgVmFjY2luZVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVmFjY2luZVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgSW1tdW5pemF0aW9uUmVjb21tZW5kYXRpb25UYXJnZXREaXNlYXNlQ29kZXMsICBJbW11bml6YXRpb25SZWNvbW1lbmRhdGlvblRhcmdldERpc2Vhc2VDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvSW1tdW5pemF0aW9uUmVjb21tZW5kYXRpb25UYXJnZXREaXNlYXNlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEltbXVuaXphdGlvblJlY29tbWVuZGF0aW9uVGFyZ2V0RGlzZWFzZVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvSW1tdW5pemF0aW9uUmVjb21tZW5kYXRpb25UYXJnZXREaXNlYXNlVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBJbW11bml6YXRpb25SZWNvbW1lbmRhdGlvblN0YXR1c0NvZGVzLCAgSW1tdW5pemF0aW9uUmVjb21tZW5kYXRpb25TdGF0dXNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvSW1tdW5pemF0aW9uUmVjb21tZW5kYXRpb25TdGF0dXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgSW1tdW5pemF0aW9uUmVjb21tZW5kYXRpb25TdGF0dXNWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0ltbXVuaXphdGlvblJlY29tbWVuZGF0aW9uU3RhdHVzVnNWYWxpZGF0aW9uLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEltbXVuaXphdGlvblJlY29tbWVuZGF0aW9uUmVjb21tZW5kYXRpb25EYXRlQ3JpdGVyaW9uIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEltbXVuaXphdGlvblJlY29tbWVuZGF0aW9uUmVjb21tZW5kYXRpb25EYXRlQ3JpdGVyaW9uQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogRGF0ZSBjbGFzc2lmaWNhdGlvbiBvZiByZWNvbW1lbmRhdGlvbi4gIEZvciBleGFtcGxlLCBlYXJsaWVzdCBkYXRlIHRvIGdpdmUsIGxhdGVzdCBkYXRlIHRvIGdpdmUsIGV0Yy5cclxuICAgKi9cclxuICBjb2RlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSB3aG9zZSBtZWFuaW5nIGlzIHNwZWNpZmllZCBieSBkYXRlQ3JpdGVyaW9uLmNvZGUuXHJcbiAgICovXHJcbiAgdmFsdWU6IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEltbXVuaXphdGlvblJlY29tbWVuZGF0aW9uLnJlY29tbWVuZGF0aW9uLmRhdGVDcml0ZXJpb24udmFsdWVcclxuICAgKi9cclxuICBfdmFsdWU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG59XHJcblxyXG4vKipcclxuICogVmFjY2luZSBkYXRlIHJlY29tbWVuZGF0aW9ucy4gIEZvciBleGFtcGxlLCBlYXJsaWVzdCBkYXRlIHRvIGFkbWluaXN0ZXIsIGxhdGVzdCBkYXRlIHRvIGFkbWluaXN0ZXIsIGV0Yy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBJbW11bml6YXRpb25SZWNvbW1lbmRhdGlvblJlY29tbWVuZGF0aW9uRGF0ZUNyaXRlcmlvbiBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0ltbXVuaXphdGlvblJlY29tbWVuZGF0aW9uUmVjb21tZW5kYXRpb25EYXRlQ3JpdGVyaW9uJztcclxuICAvKipcclxuICAgKiBEYXRlIGNsYXNzaWZpY2F0aW9uIG9mIHJlY29tbWVuZGF0aW9uLiAgRm9yIGV4YW1wbGUsIGVhcmxpZXN0IGRhdGUgdG8gZ2l2ZSwgbGF0ZXN0IGRhdGUgdG8gZ2l2ZSwgZXRjLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb2RlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRlIHdob3NlIG1lYW5pbmcgaXMgc3BlY2lmaWVkIGJ5IGRhdGVDcml0ZXJpb24uY29kZS5cclxuICAgKi9cclxuICBwdWJsaWMgdmFsdWU6IGZoaXIuRmhpckRhdGVUaW1lfG51bGw7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgSW1tdW5pemF0aW9uUmVjb21tZW5kYXRpb25SZWNvbW1lbmRhdGlvbkRhdGVDcml0ZXJpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxJbW11bml6YXRpb25SZWNvbW1lbmRhdGlvblJlY29tbWVuZGF0aW9uRGF0ZUNyaXRlcmlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jb2RlKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY29kZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3ZhbHVlJ10pIHsgdGhpcy52YWx1ZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS52YWx1ZX0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy52YWx1ZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ192YWx1ZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnZhbHVlKSB7IHRoaXMudmFsdWUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdmFsdWUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy52YWx1ZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZShzb3VyY2UuX3ZhbHVlIGFzIFBhcnRpYWw8Zmhpci5GaGlyRGF0ZVRpbWVBcmdzPik7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdJbW11bml6YXRpb25SZWNvbW1lbmRhdGlvbi5yZWNvbW1lbmRhdGlvbi5kYXRlQ3JpdGVyaW9uJyB9XHJcbiAgICB0aGlzLnZSUygnY29kZScsZXhwKVxyXG4gICAgdGhpcy52UlMoJ3ZhbHVlJyxleHApXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgSW1tdW5pemF0aW9uUmVjb21tZW5kYXRpb25SZWNvbW1lbmRhdGlvblByb3RvY29sIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEltbXVuaXphdGlvblJlY29tbWVuZGF0aW9uUmVjb21tZW5kYXRpb25Qcm90b2NvbEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB0aGUgbm9taW5hbCBwb3NpdGlvbiBpbiBhIHNlcmllcyBvZiB0aGUgbmV4dCBkb3NlLiAgVGhpcyBpcyB0aGUgcmVjb21tZW5kZWQgZG9zZSBudW1iZXIgYXMgcGVyIGEgc3BlY2lmaWVkIHByb3RvY29sLlxyXG4gICAqL1xyXG4gIGRvc2VTZXF1ZW5jZT86IGZoaXIuRmhpclBvc2l0aXZlSW50fG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEltbXVuaXphdGlvblJlY29tbWVuZGF0aW9uLnJlY29tbWVuZGF0aW9uLnByb3RvY29sLmRvc2VTZXF1ZW5jZVxyXG4gICAqL1xyXG4gIF9kb3NlU2VxdWVuY2U/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIENvbnRhaW5zIHRoZSBkZXNjcmlwdGlvbiBhYm91dCB0aGUgcHJvdG9jb2wgdW5kZXIgd2hpY2ggdGhlIHZhY2NpbmUgd2FzIGFkbWluaXN0ZXJlZC5cclxuICAgKi9cclxuICBkZXNjcmlwdGlvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBJbW11bml6YXRpb25SZWNvbW1lbmRhdGlvbi5yZWNvbW1lbmRhdGlvbi5wcm90b2NvbC5kZXNjcmlwdGlvblxyXG4gICAqL1xyXG4gIF9kZXNjcmlwdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHRoZSBhdXRob3JpdHkgd2hvIHB1Ymxpc2hlZCB0aGUgcHJvdG9jb2wuICBGb3IgZXhhbXBsZSwgQUNJUC5cclxuICAgKi9cclxuICBhdXRob3JpdHk/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE9uZSBwb3NzaWJsZSBwYXRoIHRvIGFjaGlldmUgcHJlc3VtZWQgaW1tdW5pdHkgYWdhaW5zdCBhIGRpc2Vhc2UgLSB3aXRoaW4gdGhlIGNvbnRleHQgb2YgYW4gYXV0aG9yaXR5LlxyXG4gICAqL1xyXG4gIHNlcmllcz86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBJbW11bml6YXRpb25SZWNvbW1lbmRhdGlvbi5yZWNvbW1lbmRhdGlvbi5wcm90b2NvbC5zZXJpZXNcclxuICAgKi9cclxuICBfc2VyaWVzPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIENvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IHRoZSBwcm90b2NvbCB1bmRlciB3aGljaCB0aGUgdmFjY2luZSB3YXMgYWRtaW5pc3RlcmVkLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEltbXVuaXphdGlvblJlY29tbWVuZGF0aW9uUmVjb21tZW5kYXRpb25Qcm90b2NvbCBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0ltbXVuaXphdGlvblJlY29tbWVuZGF0aW9uUmVjb21tZW5kYXRpb25Qcm90b2NvbCc7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHRoZSBub21pbmFsIHBvc2l0aW9uIGluIGEgc2VyaWVzIG9mIHRoZSBuZXh0IGRvc2UuICBUaGlzIGlzIHRoZSByZWNvbW1lbmRlZCBkb3NlIG51bWJlciBhcyBwZXIgYSBzcGVjaWZpZWQgcHJvdG9jb2wuXHJcbiAgICovXHJcbiAgcHVibGljIGRvc2VTZXF1ZW5jZT86IGZoaXIuRmhpclBvc2l0aXZlSW50fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDb250YWlucyB0aGUgZGVzY3JpcHRpb24gYWJvdXQgdGhlIHByb3RvY29sIHVuZGVyIHdoaWNoIHRoZSB2YWNjaW5lIHdhcyBhZG1pbmlzdGVyZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGRlc2NyaXB0aW9uPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgdGhlIGF1dGhvcml0eSB3aG8gcHVibGlzaGVkIHRoZSBwcm90b2NvbC4gIEZvciBleGFtcGxlLCBBQ0lQLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhdXRob3JpdHk/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogT25lIHBvc3NpYmxlIHBhdGggdG8gYWNoaWV2ZSBwcmVzdW1lZCBpbW11bml0eSBhZ2FpbnN0IGEgZGlzZWFzZSAtIHdpdGhpbiB0aGUgY29udGV4dCBvZiBhbiBhdXRob3JpdHkuXHJcbiAgICovXHJcbiAgcHVibGljIHNlcmllcz86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgSW1tdW5pemF0aW9uUmVjb21tZW5kYXRpb25SZWNvbW1lbmRhdGlvblByb3RvY29sIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8SW1tdW5pemF0aW9uUmVjb21tZW5kYXRpb25SZWNvbW1lbmRhdGlvblByb3RvY29sQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2Rvc2VTZXF1ZW5jZSddKSB7IHRoaXMuZG9zZVNlcXVlbmNlID0gbmV3IGZoaXIuRmhpclBvc2l0aXZlSW50KHt2YWx1ZTogc291cmNlLmRvc2VTZXF1ZW5jZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfZG9zZVNlcXVlbmNlJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZG9zZVNlcXVlbmNlKSB7IHRoaXMuZG9zZVNlcXVlbmNlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2Rvc2VTZXF1ZW5jZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRvc2VTZXF1ZW5jZSA9IG5ldyBmaGlyLkZoaXJQb3NpdGl2ZUludChzb3VyY2UuX2Rvc2VTZXF1ZW5jZSBhcyBQYXJ0aWFsPGZoaXIuRmhpclBvc2l0aXZlSW50QXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydkZXNjcmlwdGlvbiddKSB7IHRoaXMuZGVzY3JpcHRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmRlc2NyaXB0aW9ufSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19kZXNjcmlwdGlvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLmRlc2NyaXB0aW9uKSB7IHRoaXMuZGVzY3JpcHRpb24uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZGVzY3JpcHRpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5kZXNjcmlwdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9kZXNjcmlwdGlvbiBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnYXV0aG9yaXR5J10pIHsgdGhpcy5hdXRob3JpdHkgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmF1dGhvcml0eSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3NlcmllcyddKSB7IHRoaXMuc2VyaWVzID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5zZXJpZXN9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3NlcmllcyddKSB7XHJcbiAgICAgIGlmICh0aGlzLnNlcmllcykgeyB0aGlzLnNlcmllcy5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zZXJpZXMhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zZXJpZXMgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fc2VyaWVzIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnSW1tdW5pemF0aW9uUmVjb21tZW5kYXRpb24ucmVjb21tZW5kYXRpb24ucHJvdG9jb2wnIH1cclxuICAgIHRoaXMudk9TKCdkb3NlU2VxdWVuY2UnLGV4cClcclxuICAgIHRoaXMudk9TKCdkZXNjcmlwdGlvbicsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2F1dGhvcml0eScsZXhwKVxyXG4gICAgdGhpcy52T1MoJ3NlcmllcycsZXhwKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEltbXVuaXphdGlvblJlY29tbWVuZGF0aW9uUmVjb21tZW5kYXRpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgSW1tdW5pemF0aW9uUmVjb21tZW5kYXRpb25SZWNvbW1lbmRhdGlvbkFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRlIHRoZSBpbW11bml6YXRpb24gcmVjb21tZW5kYXRpb24gd2FzIGNyZWF0ZWQuXHJcbiAgICovXHJcbiAgZGF0ZTogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogSW1tdW5pemF0aW9uUmVjb21tZW5kYXRpb24ucmVjb21tZW5kYXRpb24uZGF0ZVxyXG4gICAqL1xyXG4gIF9kYXRlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBWYWNjaW5lIHRoYXQgcGVydGFpbnMgdG8gdGhlIHJlY29tbWVuZGF0aW9uLlxyXG4gICAqL1xyXG4gIHZhY2NpbmVDb2RlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdGFyZ2V0ZWQgZGlzZWFzZSBmb3IgdGhlIHJlY29tbWVuZGF0aW9uLlxyXG4gICAqL1xyXG4gIHRhcmdldERpc2Vhc2U/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE1heSBuZWVkIG90aGVyIGRvc2UgY29uY2VwdHMgc3VjaCBhcyBhZG1pbmlzdGVyZWQgdnMuIHZhbGlkLlxyXG4gICAqL1xyXG4gIGRvc2VOdW1iZXI/OiBmaGlyLkZoaXJQb3NpdGl2ZUludHxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBJbW11bml6YXRpb25SZWNvbW1lbmRhdGlvbi5yZWNvbW1lbmRhdGlvbi5kb3NlTnVtYmVyXHJcbiAgICovXHJcbiAgX2Rvc2VOdW1iZXI/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFZhY2NpbmUgYWRtaW5pc3RyYXRpb24gc3RhdHVzLlxyXG4gICAqL1xyXG4gIGZvcmVjYXN0U3RhdHVzOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBWYWNjaW5lIGRhdGUgcmVjb21tZW5kYXRpb25zLiAgRm9yIGV4YW1wbGUsIGVhcmxpZXN0IGRhdGUgdG8gYWRtaW5pc3RlciwgbGF0ZXN0IGRhdGUgdG8gYWRtaW5pc3RlciwgZXRjLlxyXG4gICAqL1xyXG4gIGRhdGVDcml0ZXJpb24/OiBmaGlyLkltbXVuaXphdGlvblJlY29tbWVuZGF0aW9uUmVjb21tZW5kYXRpb25EYXRlQ3JpdGVyaW9uQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDb250YWlucyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgcHJvdG9jb2wgdW5kZXIgd2hpY2ggdGhlIHZhY2NpbmUgd2FzIGFkbWluaXN0ZXJlZC5cclxuICAgKi9cclxuICBwcm90b2NvbD86IGZoaXIuSW1tdW5pemF0aW9uUmVjb21tZW5kYXRpb25SZWNvbW1lbmRhdGlvblByb3RvY29sQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW1tdW5pemF0aW9uIGV2ZW50IGhpc3RvcnkgdGhhdCBzdXBwb3J0cyB0aGUgc3RhdHVzIGFuZCByZWNvbW1lbmRhdGlvbi5cclxuICAgKi9cclxuICBzdXBwb3J0aW5nSW1tdW5pemF0aW9uPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFBhdGllbnQgSW5mb3JtYXRpb24gdGhhdCBzdXBwb3J0cyB0aGUgc3RhdHVzIGFuZCByZWNvbW1lbmRhdGlvbi4gIFRoaXMgaW5jbHVkZXMgcGF0aWVudCBvYnNlcnZhdGlvbnMsIGFkdmVyc2UgcmVhY3Rpb25zIGFuZCBhbGxlcmd5L2ludG9sZXJhbmNlIGluZm9ybWF0aW9uLlxyXG4gICAqL1xyXG4gIHN1cHBvcnRpbmdQYXRpZW50SW5mb3JtYXRpb24/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBWYWNjaW5lIGFkbWluaXN0cmF0aW9uIHJlY29tbWVuZGF0aW9ucy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBJbW11bml6YXRpb25SZWNvbW1lbmRhdGlvblJlY29tbWVuZGF0aW9uIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnSW1tdW5pemF0aW9uUmVjb21tZW5kYXRpb25SZWNvbW1lbmRhdGlvbic7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgdGhlIGltbXVuaXphdGlvbiByZWNvbW1lbmRhdGlvbiB3YXMgY3JlYXRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgZGF0ZTogZmhpci5GaGlyRGF0ZVRpbWV8bnVsbDtcclxuICAvKipcclxuICAgKiBWYWNjaW5lIHRoYXQgcGVydGFpbnMgdG8gdGhlIHJlY29tbWVuZGF0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB2YWNjaW5lQ29kZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdGFyZ2V0ZWQgZGlzZWFzZSBmb3IgdGhlIHJlY29tbWVuZGF0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0YXJnZXREaXNlYXNlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE1heSBuZWVkIG90aGVyIGRvc2UgY29uY2VwdHMgc3VjaCBhcyBhZG1pbmlzdGVyZWQgdnMuIHZhbGlkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkb3NlTnVtYmVyPzogZmhpci5GaGlyUG9zaXRpdmVJbnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFZhY2NpbmUgYWRtaW5pc3RyYXRpb24gc3RhdHVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBmb3JlY2FzdFN0YXR1czogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBWYWNjaW5lIGRhdGUgcmVjb21tZW5kYXRpb25zLiAgRm9yIGV4YW1wbGUsIGVhcmxpZXN0IGRhdGUgdG8gYWRtaW5pc3RlciwgbGF0ZXN0IGRhdGUgdG8gYWRtaW5pc3RlciwgZXRjLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkYXRlQ3JpdGVyaW9uOiBmaGlyLkltbXVuaXphdGlvblJlY29tbWVuZGF0aW9uUmVjb21tZW5kYXRpb25EYXRlQ3JpdGVyaW9uW107XHJcbiAgLyoqXHJcbiAgICogQ29udGFpbnMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHByb3RvY29sIHVuZGVyIHdoaWNoIHRoZSB2YWNjaW5lIHdhcyBhZG1pbmlzdGVyZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHByb3RvY29sPzogZmhpci5JbW11bml6YXRpb25SZWNvbW1lbmRhdGlvblJlY29tbWVuZGF0aW9uUHJvdG9jb2x8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEltbXVuaXphdGlvbiBldmVudCBoaXN0b3J5IHRoYXQgc3VwcG9ydHMgdGhlIHN0YXR1cyBhbmQgcmVjb21tZW5kYXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHN1cHBvcnRpbmdJbW11bml6YXRpb246IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogUGF0aWVudCBJbmZvcm1hdGlvbiB0aGF0IHN1cHBvcnRzIHRoZSBzdGF0dXMgYW5kIHJlY29tbWVuZGF0aW9uLiAgVGhpcyBpbmNsdWRlcyBwYXRpZW50IG9ic2VydmF0aW9ucywgYWR2ZXJzZSByZWFjdGlvbnMgYW5kIGFsbGVyZ3kvaW50b2xlcmFuY2UgaW5mb3JtYXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHN1cHBvcnRpbmdQYXRpZW50SW5mb3JtYXRpb246IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgSW1tdW5pemF0aW9uUmVjb21tZW5kYXRpb25SZWNvbW1lbmRhdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEltbXVuaXphdGlvblJlY29tbWVuZGF0aW9uUmVjb21tZW5kYXRpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnZGF0ZSddKSB7IHRoaXMuZGF0ZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5kYXRlfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmRhdGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfZGF0ZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLmRhdGUpIHsgdGhpcy5kYXRlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2RhdGUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5kYXRlID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHNvdXJjZS5fZGF0ZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckRhdGVUaW1lQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd2YWNjaW5lQ29kZSddKSB7IHRoaXMudmFjY2luZUNvZGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnZhY2NpbmVDb2RlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndGFyZ2V0RGlzZWFzZSddKSB7IHRoaXMudGFyZ2V0RGlzZWFzZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UudGFyZ2V0RGlzZWFzZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2Rvc2VOdW1iZXInXSkgeyB0aGlzLmRvc2VOdW1iZXIgPSBuZXcgZmhpci5GaGlyUG9zaXRpdmVJbnQoe3ZhbHVlOiBzb3VyY2UuZG9zZU51bWJlcn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfZG9zZU51bWJlciddKSB7XHJcbiAgICAgIGlmICh0aGlzLmRvc2VOdW1iZXIpIHsgdGhpcy5kb3NlTnVtYmVyLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2Rvc2VOdW1iZXIhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5kb3NlTnVtYmVyID0gbmV3IGZoaXIuRmhpclBvc2l0aXZlSW50KHNvdXJjZS5fZG9zZU51bWJlciBhcyBQYXJ0aWFsPGZoaXIuRmhpclBvc2l0aXZlSW50QXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydmb3JlY2FzdFN0YXR1cyddKSB7IHRoaXMuZm9yZWNhc3RTdGF0dXMgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmZvcmVjYXN0U3RhdHVzKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZm9yZWNhc3RTdGF0dXMgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydkYXRlQ3JpdGVyaW9uJ10pIHsgdGhpcy5kYXRlQ3JpdGVyaW9uID0gc291cmNlLmRhdGVDcml0ZXJpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5JbW11bml6YXRpb25SZWNvbW1lbmRhdGlvblJlY29tbWVuZGF0aW9uRGF0ZUNyaXRlcmlvbih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmRhdGVDcml0ZXJpb24gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJvdG9jb2wnXSkgeyB0aGlzLnByb3RvY29sID0gbmV3IGZoaXIuSW1tdW5pemF0aW9uUmVjb21tZW5kYXRpb25SZWNvbW1lbmRhdGlvblByb3RvY29sKHNvdXJjZS5wcm90b2NvbCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N1cHBvcnRpbmdJbW11bml6YXRpb24nXSkgeyB0aGlzLnN1cHBvcnRpbmdJbW11bml6YXRpb24gPSBzb3VyY2Uuc3VwcG9ydGluZ0ltbXVuaXphdGlvbi5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN1cHBvcnRpbmdJbW11bml6YXRpb24gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3VwcG9ydGluZ1BhdGllbnRJbmZvcm1hdGlvbiddKSB7IHRoaXMuc3VwcG9ydGluZ1BhdGllbnRJbmZvcm1hdGlvbiA9IHNvdXJjZS5zdXBwb3J0aW5nUGF0aWVudEluZm9ybWF0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3VwcG9ydGluZ1BhdGllbnRJbmZvcm1hdGlvbiA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnSW1tdW5pemF0aW9uUmVjb21tZW5kYXRpb24ucmVjb21tZW5kYXRpb24nIH1cclxuICAgIHRoaXMudlJTKCdkYXRlJyxleHApXHJcbiAgICB0aGlzLnZPUygndmFjY2luZUNvZGUnLGV4cClcclxuICAgIHRoaXMudk9TKCd0YXJnZXREaXNlYXNlJyxleHApXHJcbiAgICB0aGlzLnZPUygnZG9zZU51bWJlcicsZXhwKVxyXG4gICAgdGhpcy52UlMoJ2ZvcmVjYXN0U3RhdHVzJyxleHApXHJcbiAgICB0aGlzLnZPQSgnZGF0ZUNyaXRlcmlvbicsZXhwKVxyXG4gICAgdGhpcy52T1MoJ3Byb3RvY29sJyxleHApXHJcbiAgICB0aGlzLnZPQSgnc3VwcG9ydGluZ0ltbXVuaXphdGlvbicsZXhwKVxyXG4gICAgdGhpcy52T0EoJ3N1cHBvcnRpbmdQYXRpZW50SW5mb3JtYXRpb24nLGV4cClcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBJbW11bml6YXRpb25SZWNvbW1lbmRhdGlvbiB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBJbW11bml6YXRpb25SZWNvbW1lbmRhdGlvbkFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIkltbXVuaXphdGlvblJlY29tbWVuZGF0aW9uXCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgdW5pcXVlIGlkZW50aWZpZXIgYXNzaWduZWQgdG8gdGhpcyBwYXJ0aWN1bGFyIHJlY29tbWVuZGF0aW9uIHJlY29yZC5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcGF0aWVudCB0aGUgcmVjb21tZW5kYXRpb25zIGFyZSBmb3IuXHJcbiAgICovXHJcbiAgcGF0aWVudDogZmhpci5SZWZlcmVuY2VBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVmFjY2luZSBhZG1pbmlzdHJhdGlvbiByZWNvbW1lbmRhdGlvbnMuXHJcbiAgICovXHJcbiAgcmVjb21tZW5kYXRpb246IGZoaXIuSW1tdW5pemF0aW9uUmVjb21tZW5kYXRpb25SZWNvbW1lbmRhdGlvbkFyZ3NbXXxudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogQSBwYXRpZW50J3MgcG9pbnQtaW4tdGltZSBpbW11bml6YXRpb24gYW5kIHJlY29tbWVuZGF0aW9uIChpLmUuIGZvcmVjYXN0aW5nIGEgcGF0aWVudCdzIGltbXVuaXphdGlvbiBlbGlnaWJpbGl0eSBhY2NvcmRpbmcgdG8gYSBwdWJsaXNoZWQgc2NoZWR1bGUpIHdpdGggb3B0aW9uYWwgc3VwcG9ydGluZyBqdXN0aWZpY2F0aW9uLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEltbXVuaXphdGlvblJlY29tbWVuZGF0aW9uIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdJbW11bml6YXRpb25SZWNvbW1lbmRhdGlvbic7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJJbW11bml6YXRpb25SZWNvbW1lbmRhdGlvblwiO1xyXG4gIC8qKlxyXG4gICAqIEEgdW5pcXVlIGlkZW50aWZpZXIgYXNzaWduZWQgdG8gdGhpcyBwYXJ0aWN1bGFyIHJlY29tbWVuZGF0aW9uIHJlY29yZC5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcjogZmhpci5JZGVudGlmaWVyW107XHJcbiAgLyoqXHJcbiAgICogVGhlIHBhdGllbnQgdGhlIHJlY29tbWVuZGF0aW9ucyBhcmUgZm9yLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXRpZW50OiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFZhY2NpbmUgYWRtaW5pc3RyYXRpb24gcmVjb21tZW5kYXRpb25zLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWNvbW1lbmRhdGlvbjogZmhpci5JbW11bml6YXRpb25SZWNvbW1lbmRhdGlvblJlY29tbWVuZGF0aW9uW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgSW1tdW5pemF0aW9uUmVjb21tZW5kYXRpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxJbW11bml6YXRpb25SZWNvbW1lbmRhdGlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdJbW11bml6YXRpb25SZWNvbW1lbmRhdGlvbic7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gc291cmNlLmlkZW50aWZpZXIubWFwKCh4KSA9PiBuZXcgZmhpci5JZGVudGlmaWVyKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaWRlbnRpZmllciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwYXRpZW50J10pIHsgdGhpcy5wYXRpZW50ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5wYXRpZW50KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucGF0aWVudCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3JlY29tbWVuZGF0aW9uJ10pIHsgdGhpcy5yZWNvbW1lbmRhdGlvbiA9IHNvdXJjZS5yZWNvbW1lbmRhdGlvbi5tYXAoKHgpID0+IG5ldyBmaGlyLkltbXVuaXphdGlvblJlY29tbWVuZGF0aW9uUmVjb21tZW5kYXRpb24oeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZWNvbW1lbmRhdGlvbiA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnSW1tdW5pemF0aW9uUmVjb21tZW5kYXRpb24nIH1cclxuICAgIHRoaXMudlJTKCdyZXNvdXJjZVR5cGUnLGV4cClcclxuICAgIHRoaXMudk9BKCdpZGVudGlmaWVyJyxleHApXHJcbiAgICB0aGlzLnZSUygncGF0aWVudCcsZXhwKVxyXG4gICAgdGhpcy52UkEoJ3JlY29tbWVuZGF0aW9uJyxleHApXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=