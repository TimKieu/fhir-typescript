// <auto-generated/>
// Contents of: hl7.fhir.r3.core version: 3.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: ImagingStudy
import * as fhir from '../fhir.js';
// @ts-ignore
import { InstanceAvailabilityVsValidation } from '../fhirValueSets/InstanceAvailabilityVsValidation.js';
/**
 * A single SOP instance within the series, e.g. an image, or presentation state.
 */
export class ImagingStudySeriesInstance extends fhir.BackboneElement {
    /**
     * Default constructor for ImagingStudySeriesInstance - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['uid'] !== undefined) {
            this.uid = new fhir.FhirOid({ value: source.uid }, options);
        }
        else {
            this.uid = null;
        }
        if (source['_uid']) {
            if (this.uid) {
                this.uid.addExtendedProperties(source._uid);
            }
            else {
                this.uid = new fhir.FhirOid(source._uid, options);
            }
        }
        if (source['number'] !== undefined) {
            this.number = new fhir.FhirUnsignedInt({ value: source.number }, options);
        }
        if (source['_number']) {
            if (this.number) {
                this.number.addExtendedProperties(source._number);
            }
            else {
                this.number = new fhir.FhirUnsignedInt(source._number, options);
            }
        }
        if (source['sopClass'] !== undefined) {
            this.sopClass = new fhir.FhirOid({ value: source.sopClass }, options);
        }
        else {
            this.sopClass = null;
        }
        if (source['_sopClass']) {
            if (this.sopClass) {
                this.sopClass.addExtendedProperties(source._sopClass);
            }
            else {
                this.sopClass = new fhir.FhirOid(source._sopClass, options);
            }
        }
        if (source['title'] !== undefined) {
            this.title = new fhir.FhirString({ value: source.title }, options);
        }
        if (source['_title']) {
            if (this.title) {
                this.title.addExtendedProperties(source._title);
            }
            else {
                this.title = new fhir.FhirString(source._title, options);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ImagingStudy.series.instance';
        }
        iss.push(...this.vRS('uid', exp));
        iss.push(...this.vOS('number', exp));
        iss.push(...this.vRS('sopClass', exp));
        iss.push(...this.vOS('title', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ImagingStudySeriesInstance._fts_dataType = 'ImagingStudySeriesInstance';
/**
 * Each study has one or more series of images or other content.
 */
export class ImagingStudySeries extends fhir.BackboneElement {
    /**
     * Default constructor for ImagingStudySeries - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['uid'] !== undefined) {
            this.uid = new fhir.FhirOid({ value: source.uid }, options);
        }
        else {
            this.uid = null;
        }
        if (source['_uid']) {
            if (this.uid) {
                this.uid.addExtendedProperties(source._uid);
            }
            else {
                this.uid = new fhir.FhirOid(source._uid, options);
            }
        }
        if (source['number'] !== undefined) {
            this.number = new fhir.FhirUnsignedInt({ value: source.number }, options);
        }
        if (source['_number']) {
            if (this.number) {
                this.number.addExtendedProperties(source._number);
            }
            else {
                this.number = new fhir.FhirUnsignedInt(source._number, options);
            }
        }
        if (source['modality']) {
            this.modality = new fhir.Coding(source.modality, options);
        }
        else {
            this.modality = null;
        }
        if (source['description'] !== undefined) {
            this.description = new fhir.FhirString({ value: source.description }, options);
        }
        if (source['_description']) {
            if (this.description) {
                this.description.addExtendedProperties(source._description);
            }
            else {
                this.description = new fhir.FhirString(source._description, options);
            }
        }
        if (source['numberOfInstances'] !== undefined) {
            this.numberOfInstances = new fhir.FhirUnsignedInt({ value: source.numberOfInstances }, options);
        }
        if (source['_numberOfInstances']) {
            if (this.numberOfInstances) {
                this.numberOfInstances.addExtendedProperties(source._numberOfInstances);
            }
            else {
                this.numberOfInstances = new fhir.FhirUnsignedInt(source._numberOfInstances, options);
            }
        }
        if (source['availability'] !== undefined) {
            this.availability = new fhir.FhirCode({ value: source.availability }, options);
        }
        if (source['_availability']) {
            if (this.availability) {
                this.availability.addExtendedProperties(source._availability);
            }
            else {
                this.availability = new fhir.FhirCode(source._availability, options);
            }
        }
        if (source['endpoint']) {
            this.endpoint = source.endpoint.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.endpoint = [];
        }
        if (source['bodySite']) {
            this.bodySite = new fhir.Coding(source.bodySite, options);
        }
        if (source['laterality']) {
            this.laterality = new fhir.Coding(source.laterality, options);
        }
        if (source['started'] !== undefined) {
            this.started = new fhir.FhirDateTime({ value: source.started }, options);
        }
        if (source['_started']) {
            if (this.started) {
                this.started.addExtendedProperties(source._started);
            }
            else {
                this.started = new fhir.FhirDateTime(source._started, options);
            }
        }
        if (source['performer']) {
            this.performer = source.performer.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.performer = [];
        }
        if (source['instance']) {
            this.instance = source.instance.map((x) => new fhir.ImagingStudySeriesInstance(x, options));
        }
        else {
            this.instance = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ImagingStudy.series';
        }
        iss.push(...this.vRS('uid', exp));
        iss.push(...this.vOS('number', exp));
        iss.push(...this.vRS('modality', exp));
        iss.push(...this.vOS('description', exp));
        iss.push(...this.vOS('numberOfInstances', exp));
        iss.push(...this.vOSV('availability', exp, 'InstanceAvailability', InstanceAvailabilityVsValidation, 'r'));
        iss.push(...this.vOA('endpoint', exp));
        iss.push(...this.vOS('bodySite', exp));
        iss.push(...this.vOS('laterality', exp));
        iss.push(...this.vOS('started', exp));
        iss.push(...this.vOA('performer', exp));
        iss.push(...this.vOA('instance', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ImagingStudySeries._fts_dataType = 'ImagingStudySeries';
/**
 * Representation of the content produced in a DICOM imaging study. A study comprises a set of series, each of which includes a set of Service-Object Pair Instances (SOP Instances - images or other data) acquired or produced in a common context.  A series is of only one modality (e.g. X-ray, CT, MR, ultrasound), but a study may have multiple series of different modalities.
 */
export class ImagingStudy extends fhir.DomainResource {
    /**
     * Default constructor for ImagingStudy - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'ImagingStudy';
        if (source['uid'] !== undefined) {
            this.uid = new fhir.FhirOid({ value: source.uid }, options);
        }
        else {
            this.uid = null;
        }
        if (source['_uid']) {
            if (this.uid) {
                this.uid.addExtendedProperties(source._uid);
            }
            else {
                this.uid = new fhir.FhirOid(source._uid, options);
            }
        }
        if (source['accession']) {
            this.accession = new fhir.Identifier(source.accession, options);
        }
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x, options));
        }
        else {
            this.identifier = [];
        }
        if (source['availability'] !== undefined) {
            this.availability = new fhir.FhirCode({ value: source.availability }, options);
        }
        if (source['_availability']) {
            if (this.availability) {
                this.availability.addExtendedProperties(source._availability);
            }
            else {
                this.availability = new fhir.FhirCode(source._availability, options);
            }
        }
        if (source['modalityList']) {
            this.modalityList = source.modalityList.map((x) => new fhir.Coding(x, options));
        }
        else {
            this.modalityList = [];
        }
        if (source['patient']) {
            this.patient = new fhir.Reference(source.patient, options);
        }
        else {
            this.patient = null;
        }
        if (source['context']) {
            this.context = new fhir.Reference(source.context, options);
        }
        if (source['started'] !== undefined) {
            this.started = new fhir.FhirDateTime({ value: source.started }, options);
        }
        if (source['_started']) {
            if (this.started) {
                this.started.addExtendedProperties(source._started);
            }
            else {
                this.started = new fhir.FhirDateTime(source._started, options);
            }
        }
        if (source['basedOn']) {
            this.basedOn = source.basedOn.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.basedOn = [];
        }
        if (source['referrer']) {
            this.referrer = new fhir.Reference(source.referrer, options);
        }
        if (source['interpreter']) {
            this.interpreter = source.interpreter.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.interpreter = [];
        }
        if (source['endpoint']) {
            this.endpoint = source.endpoint.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.endpoint = [];
        }
        if (source['numberOfSeries'] !== undefined) {
            this.numberOfSeries = new fhir.FhirUnsignedInt({ value: source.numberOfSeries }, options);
        }
        if (source['_numberOfSeries']) {
            if (this.numberOfSeries) {
                this.numberOfSeries.addExtendedProperties(source._numberOfSeries);
            }
            else {
                this.numberOfSeries = new fhir.FhirUnsignedInt(source._numberOfSeries, options);
            }
        }
        if (source['numberOfInstances'] !== undefined) {
            this.numberOfInstances = new fhir.FhirUnsignedInt({ value: source.numberOfInstances }, options);
        }
        if (source['_numberOfInstances']) {
            if (this.numberOfInstances) {
                this.numberOfInstances.addExtendedProperties(source._numberOfInstances);
            }
            else {
                this.numberOfInstances = new fhir.FhirUnsignedInt(source._numberOfInstances, options);
            }
        }
        if (source['procedureReference']) {
            this.procedureReference = source.procedureReference.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.procedureReference = [];
        }
        if (source['procedureCode']) {
            this.procedureCode = source.procedureCode.map((x) => new fhir.CodeableConcept(x, options));
        }
        else {
            this.procedureCode = [];
        }
        if (source['reason']) {
            this.reason = new fhir.CodeableConcept(source.reason, options);
        }
        if (source['description'] !== undefined) {
            this.description = new fhir.FhirString({ value: source.description }, options);
        }
        if (source['_description']) {
            if (this.description) {
                this.description.addExtendedProperties(source._description);
            }
            else {
                this.description = new fhir.FhirString(source._description, options);
            }
        }
        if (source['series']) {
            this.series = source.series.map((x) => new fhir.ImagingStudySeries(x, options));
        }
        else {
            this.series = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ImagingStudy';
        }
        iss.push(...this.vRS('uid', exp));
        iss.push(...this.vOS('accession', exp));
        iss.push(...this.vOA('identifier', exp));
        iss.push(...this.vOSV('availability', exp, 'InstanceAvailability', InstanceAvailabilityVsValidation, 'r'));
        iss.push(...this.vOA('modalityList', exp));
        iss.push(...this.vRS('patient', exp));
        iss.push(...this.vOS('context', exp));
        iss.push(...this.vOS('started', exp));
        iss.push(...this.vOA('basedOn', exp));
        iss.push(...this.vOS('referrer', exp));
        iss.push(...this.vOA('interpreter', exp));
        iss.push(...this.vOA('endpoint', exp));
        iss.push(...this.vOS('numberOfSeries', exp));
        iss.push(...this.vOS('numberOfInstances', exp));
        iss.push(...this.vOA('procedureReference', exp));
        iss.push(...this.vOA('procedureCode', exp));
        iss.push(...this.vOS('reason', exp));
        iss.push(...this.vOS('description', exp));
        iss.push(...this.vOA('series', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ImagingStudy._fts_dataType = 'ImagingStudy';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW1hZ2luZ1N0dWR5LmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9JbWFnaW5nU3R1ZHkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsOEJBQThCO0FBRTlCLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBUW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsZ0NBQWdDLEVBQUUsTUFBTSxzREFBc0QsQ0FBQztBQXVEeEc7O0dBRUc7QUFDSCxNQUFNLE9BQU8sMEJBQTJCLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFxQmxFOztPQUVHO0lBQ0gsWUFBWSxTQUFpRCxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUN2RyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLEtBQUssQ0FBQyxLQUFLLFNBQVMsRUFBRTtZQUFFLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxHQUFHLEVBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztTQUFFO2FBQzFGO1lBQUUsSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUM7U0FBRTtRQUN6QixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUNsQixJQUFJLElBQUksQ0FBQyxHQUFHLEVBQUU7Z0JBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsSUFBSyxDQUFDLENBQUM7YUFBRTtpQkFDMUQ7Z0JBQUUsSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQWlDLEVBQUUsT0FBTyxDQUFDLENBQUM7YUFBRTtTQUN6RjtRQUNELElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLFNBQVMsRUFBRTtZQUFFLElB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QUFDO1FBQ3JDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3JDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3RDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3pDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3RDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDNUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsbUJBQW1CLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUMvQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ2hELEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzNDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3BDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3pDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3BDLE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQzs7QUExS0Q7O0dBRUc7QUFDNkIsMEJBQWEsR0FBVSxjQUFjLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjMuY29yZSB2ZXJzaW9uOiAzLjAuMlxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IEltYWdpbmdTdHVkeVxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRGljb21DaWQyOUNvZGVzLCAgRGljb21DaWQyOUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9EaWNvbUNpZDI5Q29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IERpY29tQ2lkMjlWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0RpY29tQ2lkMjlWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEluc3RhbmNlQXZhaWxhYmlsaXR5Q29kZXMsICBJbnN0YW5jZUF2YWlsYWJpbGl0eUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9JbnN0YW5jZUF2YWlsYWJpbGl0eUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBJbnN0YW5jZUF2YWlsYWJpbGl0eVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvSW5zdGFuY2VBdmFpbGFiaWxpdHlWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEJvZHlTaXRlQ29kZXMsICBCb2R5U2l0ZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Cb2R5U2l0ZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBCb2R5U2l0ZVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQm9keVNpdGVWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEJvZHlzaXRlTGF0ZXJhbGl0eUNvZGVzLCAgQm9keXNpdGVMYXRlcmFsaXR5Q29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0JvZHlzaXRlTGF0ZXJhbGl0eUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBCb2R5c2l0ZUxhdGVyYWxpdHlWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0JvZHlzaXRlTGF0ZXJhbGl0eVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUHJvY2VkdXJlQ29kZXMsICBQcm9jZWR1cmVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUHJvY2VkdXJlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFByb2NlZHVyZVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUHJvY2VkdXJlVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBQcm9jZWR1cmVSZWFzb25Db2RlcywgIFByb2NlZHVyZVJlYXNvbkNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Qcm9jZWR1cmVSZWFzb25Db2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUHJvY2VkdXJlUmVhc29uVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Qcm9jZWR1cmVSZWFzb25Wc1ZhbGlkYXRpb24uanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgSW1hZ2luZ1N0dWR5U2VyaWVzSW5zdGFuY2UgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgSW1hZ2luZ1N0dWR5U2VyaWVzSW5zdGFuY2VBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBGb3JtYWwgaWRlbnRpZmllciBmb3IgdGhpcyBpbWFnZSBvciBvdGhlciBjb250ZW50LlxyXG4gICAqL1xyXG4gIHVpZDogZmhpci5GaGlyT2lkfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEltYWdpbmdTdHVkeS5zZXJpZXMuaW5zdGFuY2UudWlkXHJcbiAgICovXHJcbiAgX3VpZD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIG51bWJlciBvZiBpbnN0YW5jZSBpbiB0aGUgc2VyaWVzLlxyXG4gICAqL1xyXG4gIG51bWJlcj86IGZoaXIuRmhpclVuc2lnbmVkSW50fG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEltYWdpbmdTdHVkeS5zZXJpZXMuaW5zdGFuY2UubnVtYmVyXHJcbiAgICovXHJcbiAgX251bWJlcj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogRElDT00gaW5zdGFuY2UgIHR5cGUuXHJcbiAgICovXHJcbiAgc29wQ2xhc3M6IGZoaXIuRmhpck9pZHxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBJbWFnaW5nU3R1ZHkuc2VyaWVzLmluc3RhbmNlLnNvcENsYXNzXHJcbiAgICovXHJcbiAgX3NvcENsYXNzPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBQYXJ0aWN1bGFybHkgZm9yIHBvc3QtYWNxdWlzaXRpb24gYW5hbHl0aWMgb2JqZWN0cywgc3VjaCBhcyBTUiwgcHJlc2VudGF0aW9uIHN0YXRlcywgdmFsdWUgbWFwcGluZywgZXRjLlxyXG4gICAqL1xyXG4gIHRpdGxlPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEltYWdpbmdTdHVkeS5zZXJpZXMuaW5zdGFuY2UudGl0bGVcclxuICAgKi9cclxuICBfdGl0bGU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG59XHJcblxyXG4vKipcclxuICogQSBzaW5nbGUgU09QIGluc3RhbmNlIHdpdGhpbiB0aGUgc2VyaWVzLCBlLmcuIGFuIGltYWdlLCBvciBwcmVzZW50YXRpb24gc3RhdGUuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgSW1hZ2luZ1N0dWR5U2VyaWVzSW5zdGFuY2UgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdJbWFnaW5nU3R1ZHlTZXJpZXNJbnN0YW5jZSc7XHJcbiAgLyoqXHJcbiAgICogRm9ybWFsIGlkZW50aWZpZXIgZm9yIHRoaXMgaW1hZ2Ugb3Igb3RoZXIgY29udGVudC5cclxuICAgKi9cclxuICBwdWJsaWMgdWlkOiBmaGlyLkZoaXJPaWR8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgbnVtYmVyIG9mIGluc3RhbmNlIGluIHRoZSBzZXJpZXMuXHJcbiAgICovXHJcbiAgcHVibGljIG51bWJlcj86IGZoaXIuRmhpclVuc2lnbmVkSW50fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBESUNPTSBpbnN0YW5jZSAgdHlwZS5cclxuICAgKi9cclxuICBwdWJsaWMgc29wQ2xhc3M6IGZoaXIuRmhpck9pZHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFBhcnRpY3VsYXJseSBmb3IgcG9zdC1hY3F1aXNpdGlvbiBhbmFseXRpYyBvYmplY3RzLCBzdWNoIGFzIFNSLCBwcmVzZW50YXRpb24gc3RhdGVzLCB2YWx1ZSBtYXBwaW5nLCBldGMuXHJcbiAgICovXHJcbiAgcHVibGljIHRpdGxlPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBJbWFnaW5nU3R1ZHlTZXJpZXNJbnN0YW5jZSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEltYWdpbmdTdHVkeVNlcmllc0luc3RhbmNlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3VpZCddICE9PSB1bmRlZmluZWQpIHsgdGhpcy51aWQgPSBuZXcgZmhpci5GaGlyT2lkKHt2YWx1ZTogc291cmNlLnVpZH0sIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy51aWQgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfdWlkJ10pIHtcclxuICAgICAgaWYgKHRoaXMudWlkKSB7IHRoaXMudWlkLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3VpZCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnVpZCA9IG5ldyBmaGlyLkZoaXJPaWQoc291cmNlLl91aWQgYXMgUGFydGlhbDxmaGlyLkZoaXJPaWRBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ251bWJlciddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5udW1iZXIgPSBuZXcgZmhpci5GaGlyVW5zaWduZWRJbnQoe3ZhbHVlOiBzb3VyY2UubnVtYmVyfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19udW1iZXInXSkge1xyXG4gICAgICBpZiAodGhpcy5udW1iZXIpIHsgdGhpcy5udW1iZXIuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbnVtYmVyISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubnVtYmVyID0gbmV3IGZoaXIuRmhpclVuc2lnbmVkSW50KHNvdXJjZS5fbnVtYmVyIGFzIFBhcnRpYWw8Zmhpci5GaGlyVW5zaWduZWRJbnRBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3NvcENsYXNzJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnNvcENsYXNzID0gbmV3IGZoaXIuRmhpck9pZCh7dmFsdWU6IHNvdXJjZS5zb3BDbGFzc30sIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zb3BDbGFzcyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zb3BDbGFzcyddKSB7XHJcbiAgICAgIGlmICh0aGlzLnNvcENsYXNzKSB7IHRoaXMuc29wQ2xhc3MuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc29wQ2xhc3MhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zb3BDbGFzcyA9IG5ldyBmaGlyLkZoaXJPaWQoc291cmNlLl9zb3BDbGFzcyBhcyBQYXJ0aWFsPGZoaXIuRmhpck9pZEFyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsndGl0bGUnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMudGl0bGUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnRpdGxlfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ190aXRsZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnRpdGxlKSB7IHRoaXMudGl0bGUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdGl0bGUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy50aXRsZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl90aXRsZSBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0ltYWdpbmdTdHVkeS5zZXJpZXMuaW5zdGFuY2UnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCd1aWQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ251bWJlcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygnc29wQ2xhc3MnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3RpdGxlJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBJbWFnaW5nU3R1ZHlTZXJpZXMgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgSW1hZ2luZ1N0dWR5U2VyaWVzQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogRm9ybWFsIGlkZW50aWZpZXIgZm9yIHRoaXMgc2VyaWVzLlxyXG4gICAqL1xyXG4gIHVpZDogZmhpci5GaGlyT2lkfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEltYWdpbmdTdHVkeS5zZXJpZXMudWlkXHJcbiAgICovXHJcbiAgX3VpZD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIG51bWVyaWMgaWRlbnRpZmllciBvZiB0aGlzIHNlcmllcyBpbiB0aGUgc3R1ZHkuXHJcbiAgICovXHJcbiAgbnVtYmVyPzogZmhpci5GaGlyVW5zaWduZWRJbnR8bnVtYmVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogSW1hZ2luZ1N0dWR5LnNlcmllcy5udW1iZXJcclxuICAgKi9cclxuICBfbnVtYmVyPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgbW9kYWxpdHkgb2YgdGhpcyBzZXJpZXMgc2VxdWVuY2UuXHJcbiAgICovXHJcbiAgbW9kYWxpdHk6IGZoaXIuQ29kaW5nQXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIEEgZGVzY3JpcHRpb24gb2YgdGhlIHNlcmllcy5cclxuICAgKi9cclxuICBkZXNjcmlwdGlvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBJbWFnaW5nU3R1ZHkuc2VyaWVzLmRlc2NyaXB0aW9uXHJcbiAgICovXHJcbiAgX2Rlc2NyaXB0aW9uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBOdW1iZXIgb2YgU09QIEluc3RhbmNlcyBpbiB0aGUgU3R1ZHkuIFRoZSB2YWx1ZSBnaXZlbiBtYXkgYmUgbGFyZ2VyIHRoYW4gdGhlIG51bWJlciBvZiBpbnN0YW5jZSBlbGVtZW50cyB0aGlzIHJlc291cmNlIGNvbnRhaW5zIGR1ZSB0byByZXNvdXJjZSBhdmFpbGFiaWxpdHksIHNlY3VyaXR5LCBvciBvdGhlciBmYWN0b3JzLiBUaGlzIGVsZW1lbnQgc2hvdWxkIGJlIHByZXNlbnQgaWYgYW55IGluc3RhbmNlIGVsZW1lbnRzIGFyZSBwcmVzZW50LlxyXG4gICAqL1xyXG4gIG51bWJlck9mSW5zdGFuY2VzPzogZmhpci5GaGlyVW5zaWduZWRJbnR8bnVtYmVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogSW1hZ2luZ1N0dWR5LnNlcmllcy5udW1iZXJPZkluc3RhbmNlc1xyXG4gICAqL1xyXG4gIF9udW1iZXJPZkluc3RhbmNlcz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQXZhaWxhYmlsaXR5IG9mIHNlcmllcyAob25saW5lLCBvZmZsaW5lIG9yIG5lYXJsaW5lKS5cclxuICAgKi9cclxuICBhdmFpbGFiaWxpdHk/OiBmaGlyLkZoaXJDb2RlPEluc3RhbmNlQXZhaWxhYmlsaXR5Q29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEltYWdpbmdTdHVkeS5zZXJpZXMuYXZhaWxhYmlsaXR5XHJcbiAgICovXHJcbiAgX2F2YWlsYWJpbGl0eT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVHlwaWNhbCBlbmRwb2ludCB0eXBlcyBpbmNsdWRlIERJQ09NIFdBRE8tUlMsIHdoaWNoIGlzIHVzZWQgdG8gcmV0cmlldmUgRElDT00gaW5zdGFuY2VzIGluIG5hdGl2ZSBvciByZW5kZXJlZCAoZS5nLiwgSlBHLCBQTkcpIGZvcm1hdHMgdXNpbmcgYSBSRVNUZnVsIEFQSTsgRElDT00gV0FETy1VUkksIHdoaWNoIGNhbiBzaW1pbGFybHkgcmV0cmlldmUgbmF0aXZlIG9yIHJlbmRlcmVkIGluc3RhbmNlcywgZXhjZXB0IHVzaW5nIGFuIEhUVFAgcXVlcnktYmFzZWQgYXBwcm9hY2g7IGFuZCBESUNPTSBRSURPLVJTLCB3aGljaCBhbGxvd3MgUkVTVGZ1bCBxdWVyeSBmb3IgRElDT00gaW5mb3JtYXRpb24gd2l0aG91dCByZXRyaWV2aW5nIHRoZSBhY3R1YWwgaW5zdGFuY2VzLlxyXG4gICAqL1xyXG4gIGVuZHBvaW50PzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBhbmF0b21pYyBzdHJ1Y3R1cmVzIGV4YW1pbmVkLiBTZWUgRElDT00gUGFydCAxNiBBbm5leCBMIChodHRwOi8vZGljb20ubmVtYS5vcmcvbWVkaWNhbC9kaWNvbS9jdXJyZW50L291dHB1dC9jaHRtbC9wYXJ0MTYvY2hhcHRlcl9MLmh0bWwpIGZvciBESUNPTSB0byBTTk9NRUQtQ1QgbWFwcGluZ3MuIFRoZSBib2R5U2l0ZSBtYXkgaW5kaWNhdGUgdGhlIGxhdGVyYWxpdHkgb2YgYm9keSBwYXJ0IGltYWdlZDsgaWYgc28sIGl0IHNoYWxsIGJlIGNvbnNpc3RlbnQgd2l0aCBhbnkgY29udGVudCBvZiBJbWFnaW5nU3R1ZHkuc2VyaWVzLmxhdGVyYWxpdHkuXHJcbiAgICovXHJcbiAgYm9keVNpdGU/OiBmaGlyLkNvZGluZ0FyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsYXRlcmFsaXR5IG9mIHRoZSAocG9zc2libHkgcGFpcmVkKSBhbmF0b21pYyBzdHJ1Y3R1cmVzIGV4YW1pbmVkLiBFLmcuLCB0aGUgbGVmdCBrbmVlLCBib3RoIGx1bmdzLCBvciB1bnBhaXJlZCBhYmRvbWVuLiBJZiBwcmVzZW50LCBzaGFsbCBiZSBjb25zaXN0ZW50IHdpdGggYW55IGxhdGVyYWxpdHkgaW5mb3JtYXRpb24gaW5kaWNhdGVkIGluIEltYWdpbmdTdHVkeS5zZXJpZXMuYm9keVNpdGUuXHJcbiAgICovXHJcbiAgbGF0ZXJhbGl0eT86IGZoaXIuQ29kaW5nQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgYW5kIHRpbWUgdGhlIHNlcmllcyB3YXMgc3RhcnRlZC5cclxuICAgKi9cclxuICBzdGFydGVkPzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogSW1hZ2luZ1N0dWR5LnNlcmllcy5zdGFydGVkXHJcbiAgICovXHJcbiAgX3N0YXJ0ZWQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwaHlzaWNpYW4gb3Igb3BlcmF0b3IgKG9mdGVuIHRoZSByYWRpb2xvZ3kgdGVjaG5pY2lhbikgIHdobyBwZXJmb3JtZWQgdGhlIHNlcmllcy4gVGhlIHBlcmZvcm1lciBpcyByZWNvcmRlZCBhdCB0aGUgc2VyaWVzIGxldmVsLCBzaW5jZSBlYWNoIHNlcmllcyBpbiBhIHN0dWR5IG1heSBiZSBwZXJmb3JtZWQgYnkgYSBkaWZmZXJlbnQgcHJhY3RpdGlvbmVyLCBhdCBkaWZmZXJlbnQgdGltZXMsIGFuZCB1c2luZyBkaWZmZXJlbnQgZGV2aWNlcy4gQSBzZXJpZXMgbWF5IGJlIHBlcmZvcm1lZCBieSBtdWx0aXBsZSBwcmFjdGl0aW9uZXJzLlxyXG4gICAqL1xyXG4gIHBlcmZvcm1lcj86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHNpbmdsZSBTT1AgaW5zdGFuY2Ugd2l0aGluIHRoZSBzZXJpZXMsIGUuZy4gYW4gaW1hZ2UsIG9yIHByZXNlbnRhdGlvbiBzdGF0ZS5cclxuICAgKi9cclxuICBpbnN0YW5jZT86IGZoaXIuSW1hZ2luZ1N0dWR5U2VyaWVzSW5zdGFuY2VBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogRWFjaCBzdHVkeSBoYXMgb25lIG9yIG1vcmUgc2VyaWVzIG9mIGltYWdlcyBvciBvdGhlciBjb250ZW50LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEltYWdpbmdTdHVkeVNlcmllcyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0ltYWdpbmdTdHVkeVNlcmllcyc7XHJcbiAgLyoqXHJcbiAgICogRm9ybWFsIGlkZW50aWZpZXIgZm9yIHRoaXMgc2VyaWVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB1aWQ6IGZoaXIuRmhpck9pZHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBudW1lcmljIGlkZW50aWZpZXIgb2YgdGhpcyBzZXJpZXMgaW4gdGhlIHN0dWR5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBudW1iZXI/OiBmaGlyLkZoaXJVbnNpZ25lZEludHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG1vZGFsaXR5IG9mIHRoaXMgc2VyaWVzIHNlcXVlbmNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtb2RhbGl0eTogZmhpci5Db2Rpbmd8bnVsbDtcclxuICAvKipcclxuICAgKiBBIGRlc2NyaXB0aW9uIG9mIHRoZSBzZXJpZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGRlc2NyaXB0aW9uPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBOdW1iZXIgb2YgU09QIEluc3RhbmNlcyBpbiB0aGUgU3R1ZHkuIFRoZSB2YWx1ZSBnaXZlbiBtYXkgYmUgbGFyZ2VyIHRoYW4gdGhlIG51bWJlciBvZiBpbnN0YW5jZSBlbGVtZW50cyB0aGlzIHJlc291cmNlIGNvbnRhaW5zIGR1ZSB0byByZXNvdXJjZSBhdmFpbGFiaWxpdHksIHNlY3VyaXR5LCBvciBvdGhlciBmYWN0b3JzLiBUaGlzIGVsZW1lbnQgc2hvdWxkIGJlIHByZXNlbnQgaWYgYW55IGluc3RhbmNlIGVsZW1lbnRzIGFyZSBwcmVzZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBudW1iZXJPZkluc3RhbmNlcz86IGZoaXIuRmhpclVuc2lnbmVkSW50fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBdmFpbGFiaWxpdHkgb2Ygc2VyaWVzIChvbmxpbmUsIG9mZmxpbmUgb3IgbmVhcmxpbmUpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhdmFpbGFiaWxpdHk/OiBmaGlyLkZoaXJDb2RlPEluc3RhbmNlQXZhaWxhYmlsaXR5Q29kZVR5cGU+fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUeXBpY2FsIGVuZHBvaW50IHR5cGVzIGluY2x1ZGUgRElDT00gV0FETy1SUywgd2hpY2ggaXMgdXNlZCB0byByZXRyaWV2ZSBESUNPTSBpbnN0YW5jZXMgaW4gbmF0aXZlIG9yIHJlbmRlcmVkIChlLmcuLCBKUEcsIFBORykgZm9ybWF0cyB1c2luZyBhIFJFU1RmdWwgQVBJOyBESUNPTSBXQURPLVVSSSwgd2hpY2ggY2FuIHNpbWlsYXJseSByZXRyaWV2ZSBuYXRpdmUgb3IgcmVuZGVyZWQgaW5zdGFuY2VzLCBleGNlcHQgdXNpbmcgYW4gSFRUUCBxdWVyeS1iYXNlZCBhcHByb2FjaDsgYW5kIERJQ09NIFFJRE8tUlMsIHdoaWNoIGFsbG93cyBSRVNUZnVsIHF1ZXJ5IGZvciBESUNPTSBpbmZvcm1hdGlvbiB3aXRob3V0IHJldHJpZXZpbmcgdGhlIGFjdHVhbCBpbnN0YW5jZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGVuZHBvaW50OiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBhbmF0b21pYyBzdHJ1Y3R1cmVzIGV4YW1pbmVkLiBTZWUgRElDT00gUGFydCAxNiBBbm5leCBMIChodHRwOi8vZGljb20ubmVtYS5vcmcvbWVkaWNhbC9kaWNvbS9jdXJyZW50L291dHB1dC9jaHRtbC9wYXJ0MTYvY2hhcHRlcl9MLmh0bWwpIGZvciBESUNPTSB0byBTTk9NRUQtQ1QgbWFwcGluZ3MuIFRoZSBib2R5U2l0ZSBtYXkgaW5kaWNhdGUgdGhlIGxhdGVyYWxpdHkgb2YgYm9keSBwYXJ0IGltYWdlZDsgaWYgc28sIGl0IHNoYWxsIGJlIGNvbnNpc3RlbnQgd2l0aCBhbnkgY29udGVudCBvZiBJbWFnaW5nU3R1ZHkuc2VyaWVzLmxhdGVyYWxpdHkuXHJcbiAgICovXHJcbiAgcHVibGljIGJvZHlTaXRlPzogZmhpci5Db2Rpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsYXRlcmFsaXR5IG9mIHRoZSAocG9zc2libHkgcGFpcmVkKSBhbmF0b21pYyBzdHJ1Y3R1cmVzIGV4YW1pbmVkLiBFLmcuLCB0aGUgbGVmdCBrbmVlLCBib3RoIGx1bmdzLCBvciB1bnBhaXJlZCBhYmRvbWVuLiBJZiBwcmVzZW50LCBzaGFsbCBiZSBjb25zaXN0ZW50IHdpdGggYW55IGxhdGVyYWxpdHkgaW5mb3JtYXRpb24gaW5kaWNhdGVkIGluIEltYWdpbmdTdHVkeS5zZXJpZXMuYm9keVNpdGUuXHJcbiAgICovXHJcbiAgcHVibGljIGxhdGVyYWxpdHk/OiBmaGlyLkNvZGluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgYW5kIHRpbWUgdGhlIHNlcmllcyB3YXMgc3RhcnRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhcnRlZD86IGZoaXIuRmhpckRhdGVUaW1lfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcGh5c2ljaWFuIG9yIG9wZXJhdG9yIChvZnRlbiB0aGUgcmFkaW9sb2d5IHRlY2huaWNpYW4pICB3aG8gcGVyZm9ybWVkIHRoZSBzZXJpZXMuIFRoZSBwZXJmb3JtZXIgaXMgcmVjb3JkZWQgYXQgdGhlIHNlcmllcyBsZXZlbCwgc2luY2UgZWFjaCBzZXJpZXMgaW4gYSBzdHVkeSBtYXkgYmUgcGVyZm9ybWVkIGJ5IGEgZGlmZmVyZW50IHByYWN0aXRpb25lciwgYXQgZGlmZmVyZW50IHRpbWVzLCBhbmQgdXNpbmcgZGlmZmVyZW50IGRldmljZXMuIEEgc2VyaWVzIG1heSBiZSBwZXJmb3JtZWQgYnkgbXVsdGlwbGUgcHJhY3RpdGlvbmVycy5cclxuICAgKi9cclxuICBwdWJsaWMgcGVyZm9ybWVyOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIEEgc2luZ2xlIFNPUCBpbnN0YW5jZSB3aXRoaW4gdGhlIHNlcmllcywgZS5nLiBhbiBpbWFnZSwgb3IgcHJlc2VudGF0aW9uIHN0YXRlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpbnN0YW5jZTogZmhpci5JbWFnaW5nU3R1ZHlTZXJpZXNJbnN0YW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEltYWdpbmdTdHVkeVNlcmllcyAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEltYWdpbmdTdHVkeVNlcmllc0FyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWyd1aWQnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMudWlkID0gbmV3IGZoaXIuRmhpck9pZCh7dmFsdWU6IHNvdXJjZS51aWR9LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudWlkID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3VpZCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnVpZCkgeyB0aGlzLnVpZC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl91aWQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy51aWQgPSBuZXcgZmhpci5GaGlyT2lkKHNvdXJjZS5fdWlkIGFzIFBhcnRpYWw8Zmhpci5GaGlyT2lkQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydudW1iZXInXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMubnVtYmVyID0gbmV3IGZoaXIuRmhpclVuc2lnbmVkSW50KHt2YWx1ZTogc291cmNlLm51bWJlcn0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfbnVtYmVyJ10pIHtcclxuICAgICAgaWYgKHRoaXMubnVtYmVyKSB7IHRoaXMubnVtYmVyLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX251bWJlciEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLm51bWJlciA9IG5ldyBmaGlyLkZoaXJVbnNpZ25lZEludChzb3VyY2UuX251bWJlciBhcyBQYXJ0aWFsPGZoaXIuRmhpclVuc2lnbmVkSW50QXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydtb2RhbGl0eSddKSB7IHRoaXMubW9kYWxpdHkgPSBuZXcgZmhpci5Db2Rpbmcoc291cmNlLm1vZGFsaXR5LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubW9kYWxpdHkgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydkZXNjcmlwdGlvbiddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5kZXNjcmlwdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuZGVzY3JpcHRpb259LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2Rlc2NyaXB0aW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZGVzY3JpcHRpb24pIHsgdGhpcy5kZXNjcmlwdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9kZXNjcmlwdGlvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRlc2NyaXB0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2Rlc2NyaXB0aW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydudW1iZXJPZkluc3RhbmNlcyddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5udW1iZXJPZkluc3RhbmNlcyA9IG5ldyBmaGlyLkZoaXJVbnNpZ25lZEludCh7dmFsdWU6IHNvdXJjZS5udW1iZXJPZkluc3RhbmNlc30sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfbnVtYmVyT2ZJbnN0YW5jZXMnXSkge1xyXG4gICAgICBpZiAodGhpcy5udW1iZXJPZkluc3RhbmNlcykgeyB0aGlzLm51bWJlck9mSW5zdGFuY2VzLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX251bWJlck9mSW5zdGFuY2VzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubnVtYmVyT2ZJbnN0YW5jZXMgPSBuZXcgZmhpci5GaGlyVW5zaWduZWRJbnQoc291cmNlLl9udW1iZXJPZkluc3RhbmNlcyBhcyBQYXJ0aWFsPGZoaXIuRmhpclVuc2lnbmVkSW50QXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydhdmFpbGFiaWxpdHknXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuYXZhaWxhYmlsaXR5ID0gbmV3IGZoaXIuRmhpckNvZGU8SW5zdGFuY2VBdmFpbGFiaWxpdHlDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2UuYXZhaWxhYmlsaXR5fSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19hdmFpbGFiaWxpdHknXSkge1xyXG4gICAgICBpZiAodGhpcy5hdmFpbGFiaWxpdHkpIHsgdGhpcy5hdmFpbGFiaWxpdHkuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fYXZhaWxhYmlsaXR5ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuYXZhaWxhYmlsaXR5ID0gbmV3IGZoaXIuRmhpckNvZGU8SW5zdGFuY2VBdmFpbGFiaWxpdHlDb2RlVHlwZT4oc291cmNlLl9hdmFpbGFiaWxpdHkgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2VuZHBvaW50J10pIHsgdGhpcy5lbmRwb2ludCA9IHNvdXJjZS5lbmRwb2ludC5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmVuZHBvaW50ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2JvZHlTaXRlJ10pIHsgdGhpcy5ib2R5U2l0ZSA9IG5ldyBmaGlyLkNvZGluZyhzb3VyY2UuYm9keVNpdGUsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydsYXRlcmFsaXR5J10pIHsgdGhpcy5sYXRlcmFsaXR5ID0gbmV3IGZoaXIuQ29kaW5nKHNvdXJjZS5sYXRlcmFsaXR5LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RhcnRlZCddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5zdGFydGVkID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLnN0YXJ0ZWR9LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3N0YXJ0ZWQnXSkge1xyXG4gICAgICBpZiAodGhpcy5zdGFydGVkKSB7IHRoaXMuc3RhcnRlZC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zdGFydGVkISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3RhcnRlZCA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZShzb3VyY2UuX3N0YXJ0ZWQgYXMgUGFydGlhbDxmaGlyLkZoaXJEYXRlVGltZUFyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsncGVyZm9ybWVyJ10pIHsgdGhpcy5wZXJmb3JtZXIgPSBzb3VyY2UucGVyZm9ybWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucGVyZm9ybWVyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2luc3RhbmNlJ10pIHsgdGhpcy5pbnN0YW5jZSA9IHNvdXJjZS5pbnN0YW5jZS5tYXAoKHgpID0+IG5ldyBmaGlyLkltYWdpbmdTdHVkeVNlcmllc0luc3RhbmNlKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaW5zdGFuY2UgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0ltYWdpbmdTdHVkeS5zZXJpZXMnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCd1aWQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ251bWJlcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygnbW9kYWxpdHknLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2Rlc2NyaXB0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdudW1iZXJPZkluc3RhbmNlcycsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPU1YoJ2F2YWlsYWJpbGl0eScsZXhwLCdJbnN0YW5jZUF2YWlsYWJpbGl0eScsSW5zdGFuY2VBdmFpbGFiaWxpdHlWc1ZhbGlkYXRpb24sJ3InKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnZW5kcG9pbnQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2JvZHlTaXRlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdsYXRlcmFsaXR5JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdzdGFydGVkJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdwZXJmb3JtZXInLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2luc3RhbmNlJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBJbWFnaW5nU3R1ZHkgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgSW1hZ2luZ1N0dWR5QXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiSW1hZ2luZ1N0dWR5XCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEZvcm1hbCBpZGVudGlmaWVyIGZvciB0aGUgc3R1ZHkuXHJcbiAgICovXHJcbiAgdWlkOiBmaGlyLkZoaXJPaWR8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogSW1hZ2luZ1N0dWR5LnVpZFxyXG4gICAqL1xyXG4gIF91aWQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEFjY2Vzc2lvbiBOdW1iZXIgaXMgYW4gaWRlbnRpZmllciByZWxhdGVkIHRvIHNvbWUgYXNwZWN0IG9mIGltYWdpbmcgd29ya2Zsb3cgYW5kIGRhdGEgbWFuYWdlbWVudC4gVXNhZ2UgbWF5IHZhcnkgYWNyb3NzIGRpZmZlcmVudCBpbnN0aXR1dGlvbnMuICBTZWUgZm9yIGluc3RhbmNlIFtJSEUgUmFkaW9sb2d5IFRlY2huaWNhbCBGcmFtZXdvcmsgVm9sdW1lIDEgQXBwZW5kaXggQV0oaHR0cDovL3d3dy5paGUubmV0L3VwbG9hZGVkRmlsZXMvRG9jdW1lbnRzL1JhZGlvbG9neS9JSEVfUkFEX1RGX1JldjEzLjBfVm9sMV9GVF8yMDE0LTA3LTMwLnBkZikuXHJcbiAgICovXHJcbiAgYWNjZXNzaW9uPzogZmhpci5JZGVudGlmaWVyQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogT3RoZXIgaWRlbnRpZmllcnMgZm9yIHRoZSBzdHVkeS5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBdmFpbGFiaWxpdHkgb2Ygc3R1ZHkgKG9ubGluZSwgb2ZmbGluZSwgb3IgbmVhcmxpbmUpLlxyXG4gICAqL1xyXG4gIGF2YWlsYWJpbGl0eT86IGZoaXIuRmhpckNvZGU8SW5zdGFuY2VBdmFpbGFiaWxpdHlDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogSW1hZ2luZ1N0dWR5LmF2YWlsYWJpbGl0eVxyXG4gICAqL1xyXG4gIF9hdmFpbGFiaWxpdHk/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEEgbGlzdCBvZiBhbGwgdGhlIFNlcmllcy5JbWFnZU1vZGFsaXR5IHZhbHVlcyB0aGF0IGFyZSBhY3R1YWwgYWNxdWlzaXRpb24gbW9kYWxpdGllcywgaS5lLiB0aG9zZSBpbiB0aGUgRElDT00gQ29udGV4dCBHcm91cCAyOSAodmFsdWUgc2V0IE9JRCAxLjIuODQwLjEwMDA4LjYuMS4xOSkuXHJcbiAgICovXHJcbiAgbW9kYWxpdHlMaXN0PzogZmhpci5Db2RpbmdBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXRpZW50IGltYWdlZCBpbiB0aGUgc3R1ZHkuXHJcbiAgICovXHJcbiAgcGF0aWVudDogZmhpci5SZWZlcmVuY2VBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGVuY291bnRlciBvciBlcGlzb2RlIGF0IHdoaWNoIHRoZSByZXF1ZXN0IGlzIGluaXRpYXRlZC5cclxuICAgKi9cclxuICBjb250ZXh0PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEYXRlIGFuZCB0aW1lIHRoZSBzdHVkeSBzdGFydGVkLlxyXG4gICAqL1xyXG4gIHN0YXJ0ZWQ/OiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBJbWFnaW5nU3R1ZHkuc3RhcnRlZFxyXG4gICAqL1xyXG4gIF9zdGFydGVkPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBBIGxpc3Qgb2YgdGhlIGRpYWdub3N0aWMgcmVxdWVzdHMgdGhhdCByZXN1bHRlZCBpbiB0aGlzIGltYWdpbmcgc3R1ZHkgYmVpbmcgcGVyZm9ybWVkLlxyXG4gICAqL1xyXG4gIGJhc2VkT24/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlcXVlc3RpbmcvcmVmZXJyaW5nIHBoeXNpY2lhbi5cclxuICAgKi9cclxuICByZWZlcnJlcj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogV2hvIHJlYWQgdGhlIHN0dWR5IGFuZCBpbnRlcnByZXRlZCB0aGUgaW1hZ2VzIG9yIG90aGVyIGNvbnRlbnQuXHJcbiAgICovXHJcbiAgaW50ZXJwcmV0ZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVHlwaWNhbCBlbmRwb2ludCB0eXBlcyBpbmNsdWRlIERJQ09NIFdBRE8tUlMsIHdoaWNoIGlzIHVzZWQgdG8gcmV0cmlldmUgRElDT00gaW5zdGFuY2VzIGluIG5hdGl2ZSBvciByZW5kZXJlZCAoZS5nLiwgSlBHLCBQTkcpLCBmb3JtYXRzIHVzaW5nIGEgUkVTVGZ1bCBBUEk7IERJQ09NIFdBRE8tVVJJLCB3aGljaCBjYW4gc2ltaWxhcmx5IHJldHJpZXZlIG5hdGl2ZSBvciByZW5kZXJlZCBpbnN0YW5jZXMsIGV4Y2VwdCB1c2luZyBhbiBIVFRQIHF1ZXJ5LWJhc2VkIGFwcHJvYWNoOyBESUNPTSBRSURPLVJTLCB3aGljaCBhbGxvd3MgUkVTVGZ1bCBxdWVyeSBmb3IgRElDT00gaW5mb3JtYXRpb24gd2l0aG91dCByZXRyaWV2aW5nIHRoZSBhY3R1YWwgaW5zdGFuY2VzOyBvciBJSEUgSW52b2tlIEltYWdlIERpc3BsYXkgKElJRCksIHdoaWNoIHByb3ZpZGVzIHN0YW5kYXJkIGludm9jYXRpb24gb2YgYW4gaW1hZ2luZyB3ZWIgdmlld2VyLlxyXG4gICAqL1xyXG4gIGVuZHBvaW50PzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE51bWJlciBvZiBTZXJpZXMgaW4gdGhlIFN0dWR5LiBUaGlzIHZhbHVlIGdpdmVuIG1heSBiZSBsYXJnZXIgdGhhbiB0aGUgbnVtYmVyIG9mIHNlcmllcyBlbGVtZW50cyB0aGlzIFJlc291cmNlIGNvbnRhaW5zIGR1ZSB0byByZXNvdXJjZSBhdmFpbGFiaWxpdHksIHNlY3VyaXR5LCBvciBvdGhlciBmYWN0b3JzLiBUaGlzIGVsZW1lbnQgc2hvdWxkIGJlIHByZXNlbnQgaWYgYW55IHNlcmllcyBlbGVtZW50cyBhcmUgcHJlc2VudC5cclxuICAgKi9cclxuICBudW1iZXJPZlNlcmllcz86IGZoaXIuRmhpclVuc2lnbmVkSW50fG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEltYWdpbmdTdHVkeS5udW1iZXJPZlNlcmllc1xyXG4gICAqL1xyXG4gIF9udW1iZXJPZlNlcmllcz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogTnVtYmVyIG9mIFNPUCBJbnN0YW5jZXMgaW4gU3R1ZHkuIFRoaXMgdmFsdWUgZ2l2ZW4gbWF5IGJlIGxhcmdlciB0aGFuIHRoZSBudW1iZXIgb2YgaW5zdGFuY2UgZWxlbWVudHMgdGhpcyByZXNvdXJjZSBjb250YWlucyBkdWUgdG8gcmVzb3VyY2UgYXZhaWxhYmlsaXR5LCBzZWN1cml0eSwgb3Igb3RoZXIgZmFjdG9ycy4gVGhpcyBlbGVtZW50IHNob3VsZCBiZSBwcmVzZW50IGlmIGFueSBpbnN0YW5jZSBlbGVtZW50cyBhcmUgcHJlc2VudC5cclxuICAgKi9cclxuICBudW1iZXJPZkluc3RhbmNlcz86IGZoaXIuRmhpclVuc2lnbmVkSW50fG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEltYWdpbmdTdHVkeS5udW1iZXJPZkluc3RhbmNlc1xyXG4gICAqL1xyXG4gIF9udW1iZXJPZkluc3RhbmNlcz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQSByZWZlcmVuY2UgdG8gdGhlIHBlcmZvcm1lZCBQcm9jZWR1cmUuXHJcbiAgICovXHJcbiAgcHJvY2VkdXJlUmVmZXJlbmNlPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjb2RlIGZvciB0aGUgcGVyZm9ybWVkIHByb2NlZHVyZSB0eXBlLlxyXG4gICAqL1xyXG4gIHByb2NlZHVyZUNvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpcHRpb24gb2YgY2xpbmljYWwgY29uZGl0aW9uIGluZGljYXRpbmcgd2h5IHRoZSBJbWFnaW5nU3R1ZHkgd2FzIHJlcXVlc3RlZC5cclxuICAgKi9cclxuICByZWFzb24/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluc3RpdHV0aW9uLWdlbmVyYXRlZCBkZXNjcmlwdGlvbiBvciBjbGFzc2lmaWNhdGlvbiBvZiB0aGUgU3R1ZHkgcGVyZm9ybWVkLlxyXG4gICAqL1xyXG4gIGRlc2NyaXB0aW9uPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEltYWdpbmdTdHVkeS5kZXNjcmlwdGlvblxyXG4gICAqL1xyXG4gIF9kZXNjcmlwdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogRWFjaCBzdHVkeSBoYXMgb25lIG9yIG1vcmUgc2VyaWVzIG9mIGltYWdlcyBvciBvdGhlciBjb250ZW50LlxyXG4gICAqL1xyXG4gIHNlcmllcz86IGZoaXIuSW1hZ2luZ1N0dWR5U2VyaWVzQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlcHJlc2VudGF0aW9uIG9mIHRoZSBjb250ZW50IHByb2R1Y2VkIGluIGEgRElDT00gaW1hZ2luZyBzdHVkeS4gQSBzdHVkeSBjb21wcmlzZXMgYSBzZXQgb2Ygc2VyaWVzLCBlYWNoIG9mIHdoaWNoIGluY2x1ZGVzIGEgc2V0IG9mIFNlcnZpY2UtT2JqZWN0IFBhaXIgSW5zdGFuY2VzIChTT1AgSW5zdGFuY2VzIC0gaW1hZ2VzIG9yIG90aGVyIGRhdGEpIGFjcXVpcmVkIG9yIHByb2R1Y2VkIGluIGEgY29tbW9uIGNvbnRleHQuICBBIHNlcmllcyBpcyBvZiBvbmx5IG9uZSBtb2RhbGl0eSAoZS5nLiBYLXJheSwgQ1QsIE1SLCB1bHRyYXNvdW5kKSwgYnV0IGEgc3R1ZHkgbWF5IGhhdmUgbXVsdGlwbGUgc2VyaWVzIG9mIGRpZmZlcmVudCBtb2RhbGl0aWVzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEltYWdpbmdTdHVkeSBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnSW1hZ2luZ1N0dWR5JztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIkltYWdpbmdTdHVkeVwiO1xyXG4gIC8qKlxyXG4gICAqIEZvcm1hbCBpZGVudGlmaWVyIGZvciB0aGUgc3R1ZHkuXHJcbiAgICovXHJcbiAgcHVibGljIHVpZDogZmhpci5GaGlyT2lkfG51bGw7XHJcbiAgLyoqXHJcbiAgICogQWNjZXNzaW9uIE51bWJlciBpcyBhbiBpZGVudGlmaWVyIHJlbGF0ZWQgdG8gc29tZSBhc3BlY3Qgb2YgaW1hZ2luZyB3b3JrZmxvdyBhbmQgZGF0YSBtYW5hZ2VtZW50LiBVc2FnZSBtYXkgdmFyeSBhY3Jvc3MgZGlmZmVyZW50IGluc3RpdHV0aW9ucy4gIFNlZSBmb3IgaW5zdGFuY2UgW0lIRSBSYWRpb2xvZ3kgVGVjaG5pY2FsIEZyYW1ld29yayBWb2x1bWUgMSBBcHBlbmRpeCBBXShodHRwOi8vd3d3LmloZS5uZXQvdXBsb2FkZWRGaWxlcy9Eb2N1bWVudHMvUmFkaW9sb2d5L0lIRV9SQURfVEZfUmV2MTMuMF9Wb2wxX0ZUXzIwMTQtMDctMzAucGRmKS5cclxuICAgKi9cclxuICBwdWJsaWMgYWNjZXNzaW9uPzogZmhpci5JZGVudGlmaWVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBPdGhlciBpZGVudGlmaWVycyBmb3IgdGhlIHN0dWR5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyOiBmaGlyLklkZW50aWZpZXJbXTtcclxuICAvKipcclxuICAgKiBBdmFpbGFiaWxpdHkgb2Ygc3R1ZHkgKG9ubGluZSwgb2ZmbGluZSwgb3IgbmVhcmxpbmUpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhdmFpbGFiaWxpdHk/OiBmaGlyLkZoaXJDb2RlPEluc3RhbmNlQXZhaWxhYmlsaXR5Q29kZVR5cGU+fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGxpc3Qgb2YgYWxsIHRoZSBTZXJpZXMuSW1hZ2VNb2RhbGl0eSB2YWx1ZXMgdGhhdCBhcmUgYWN0dWFsIGFjcXVpc2l0aW9uIG1vZGFsaXRpZXMsIGkuZS4gdGhvc2UgaW4gdGhlIERJQ09NIENvbnRleHQgR3JvdXAgMjkgKHZhbHVlIHNldCBPSUQgMS4yLjg0MC4xMDAwOC42LjEuMTkpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtb2RhbGl0eUxpc3Q6IGZoaXIuQ29kaW5nW107XHJcbiAgLyoqXHJcbiAgICogVGhlIHBhdGllbnQgaW1hZ2VkIGluIHRoZSBzdHVkeS5cclxuICAgKi9cclxuICBwdWJsaWMgcGF0aWVudDogZmhpci5SZWZlcmVuY2V8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgZW5jb3VudGVyIG9yIGVwaXNvZGUgYXQgd2hpY2ggdGhlIHJlcXVlc3QgaXMgaW5pdGlhdGVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb250ZXh0PzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERhdGUgYW5kIHRpbWUgdGhlIHN0dWR5IHN0YXJ0ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXJ0ZWQ/OiBmaGlyLkZoaXJEYXRlVGltZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBsaXN0IG9mIHRoZSBkaWFnbm9zdGljIHJlcXVlc3RzIHRoYXQgcmVzdWx0ZWQgaW4gdGhpcyBpbWFnaW5nIHN0dWR5IGJlaW5nIHBlcmZvcm1lZC5cclxuICAgKi9cclxuICBwdWJsaWMgYmFzZWRPbjogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBUaGUgcmVxdWVzdGluZy9yZWZlcnJpbmcgcGh5c2ljaWFuLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWZlcnJlcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBXaG8gcmVhZCB0aGUgc3R1ZHkgYW5kIGludGVycHJldGVkIHRoZSBpbWFnZXMgb3Igb3RoZXIgY29udGVudC5cclxuICAgKi9cclxuICBwdWJsaWMgaW50ZXJwcmV0ZXI6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogVHlwaWNhbCBlbmRwb2ludCB0eXBlcyBpbmNsdWRlIERJQ09NIFdBRE8tUlMsIHdoaWNoIGlzIHVzZWQgdG8gcmV0cmlldmUgRElDT00gaW5zdGFuY2VzIGluIG5hdGl2ZSBvciByZW5kZXJlZCAoZS5nLiwgSlBHLCBQTkcpLCBmb3JtYXRzIHVzaW5nIGEgUkVTVGZ1bCBBUEk7IERJQ09NIFdBRE8tVVJJLCB3aGljaCBjYW4gc2ltaWxhcmx5IHJldHJpZXZlIG5hdGl2ZSBvciByZW5kZXJlZCBpbnN0YW5jZXMsIGV4Y2VwdCB1c2luZyBhbiBIVFRQIHF1ZXJ5LWJhc2VkIGFwcHJvYWNoOyBESUNPTSBRSURPLVJTLCB3aGljaCBhbGxvd3MgUkVTVGZ1bCBxdWVyeSBmb3IgRElDT00gaW5mb3JtYXRpb24gd2l0aG91dCByZXRyaWV2aW5nIHRoZSBhY3R1YWwgaW5zdGFuY2VzOyBvciBJSEUgSW52b2tlIEltYWdlIERpc3BsYXkgKElJRCksIHdoaWNoIHByb3ZpZGVzIHN0YW5kYXJkIGludm9jYXRpb24gb2YgYW4gaW1hZ2luZyB3ZWIgdmlld2VyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBlbmRwb2ludDogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBOdW1iZXIgb2YgU2VyaWVzIGluIHRoZSBTdHVkeS4gVGhpcyB2YWx1ZSBnaXZlbiBtYXkgYmUgbGFyZ2VyIHRoYW4gdGhlIG51bWJlciBvZiBzZXJpZXMgZWxlbWVudHMgdGhpcyBSZXNvdXJjZSBjb250YWlucyBkdWUgdG8gcmVzb3VyY2UgYXZhaWxhYmlsaXR5LCBzZWN1cml0eSwgb3Igb3RoZXIgZmFjdG9ycy4gVGhpcyBlbGVtZW50IHNob3VsZCBiZSBwcmVzZW50IGlmIGFueSBzZXJpZXMgZWxlbWVudHMgYXJlIHByZXNlbnQuXHJcbiAgICovXHJcbiAgcHVibGljIG51bWJlck9mU2VyaWVzPzogZmhpci5GaGlyVW5zaWduZWRJbnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE51bWJlciBvZiBTT1AgSW5zdGFuY2VzIGluIFN0dWR5LiBUaGlzIHZhbHVlIGdpdmVuIG1heSBiZSBsYXJnZXIgdGhhbiB0aGUgbnVtYmVyIG9mIGluc3RhbmNlIGVsZW1lbnRzIHRoaXMgcmVzb3VyY2UgY29udGFpbnMgZHVlIHRvIHJlc291cmNlIGF2YWlsYWJpbGl0eSwgc2VjdXJpdHksIG9yIG90aGVyIGZhY3RvcnMuIFRoaXMgZWxlbWVudCBzaG91bGQgYmUgcHJlc2VudCBpZiBhbnkgaW5zdGFuY2UgZWxlbWVudHMgYXJlIHByZXNlbnQuXHJcbiAgICovXHJcbiAgcHVibGljIG51bWJlck9mSW5zdGFuY2VzPzogZmhpci5GaGlyVW5zaWduZWRJbnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgcmVmZXJlbmNlIHRvIHRoZSBwZXJmb3JtZWQgUHJvY2VkdXJlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcm9jZWR1cmVSZWZlcmVuY2U6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogVGhlIGNvZGUgZm9yIHRoZSBwZXJmb3JtZWQgcHJvY2VkdXJlIHR5cGUuXHJcbiAgICovXHJcbiAgcHVibGljIHByb2NlZHVyZUNvZGU6IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpcHRpb24gb2YgY2xpbmljYWwgY29uZGl0aW9uIGluZGljYXRpbmcgd2h5IHRoZSBJbWFnaW5nU3R1ZHkgd2FzIHJlcXVlc3RlZC5cclxuICAgKi9cclxuICBwdWJsaWMgcmVhc29uPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluc3RpdHV0aW9uLWdlbmVyYXRlZCBkZXNjcmlwdGlvbiBvciBjbGFzc2lmaWNhdGlvbiBvZiB0aGUgU3R1ZHkgcGVyZm9ybWVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZXNjcmlwdGlvbj86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRWFjaCBzdHVkeSBoYXMgb25lIG9yIG1vcmUgc2VyaWVzIG9mIGltYWdlcyBvciBvdGhlciBjb250ZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXJpZXM6IGZoaXIuSW1hZ2luZ1N0dWR5U2VyaWVzW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgSW1hZ2luZ1N0dWR5IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8SW1hZ2luZ1N0dWR5QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ0ltYWdpbmdTdHVkeSc7XHJcbiAgICBpZiAoc291cmNlWyd1aWQnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMudWlkID0gbmV3IGZoaXIuRmhpck9pZCh7dmFsdWU6IHNvdXJjZS51aWR9LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudWlkID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3VpZCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnVpZCkgeyB0aGlzLnVpZC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl91aWQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy51aWQgPSBuZXcgZmhpci5GaGlyT2lkKHNvdXJjZS5fdWlkIGFzIFBhcnRpYWw8Zmhpci5GaGlyT2lkQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydhY2Nlc3Npb24nXSkgeyB0aGlzLmFjY2Vzc2lvbiA9IG5ldyBmaGlyLklkZW50aWZpZXIoc291cmNlLmFjY2Vzc2lvbiwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBzb3VyY2UuaWRlbnRpZmllci5tYXAoKHgpID0+IG5ldyBmaGlyLklkZW50aWZpZXIoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pZGVudGlmaWVyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2F2YWlsYWJpbGl0eSddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5hdmFpbGFiaWxpdHkgPSBuZXcgZmhpci5GaGlyQ29kZTxJbnN0YW5jZUF2YWlsYWJpbGl0eUNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5hdmFpbGFiaWxpdHl9LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2F2YWlsYWJpbGl0eSddKSB7XHJcbiAgICAgIGlmICh0aGlzLmF2YWlsYWJpbGl0eSkgeyB0aGlzLmF2YWlsYWJpbGl0eS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9hdmFpbGFiaWxpdHkhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5hdmFpbGFiaWxpdHkgPSBuZXcgZmhpci5GaGlyQ29kZTxJbnN0YW5jZUF2YWlsYWJpbGl0eUNvZGVUeXBlPihzb3VyY2UuX2F2YWlsYWJpbGl0eSBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnbW9kYWxpdHlMaXN0J10pIHsgdGhpcy5tb2RhbGl0eUxpc3QgPSBzb3VyY2UubW9kYWxpdHlMaXN0Lm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kaW5nKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubW9kYWxpdHlMaXN0ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3BhdGllbnQnXSkgeyB0aGlzLnBhdGllbnQgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnBhdGllbnQsIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wYXRpZW50ID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29udGV4dCddKSB7IHRoaXMuY29udGV4dCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuY29udGV4dCwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0YXJ0ZWQnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuc3RhcnRlZCA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5zdGFydGVkfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zdGFydGVkJ10pIHtcclxuICAgICAgaWYgKHRoaXMuc3RhcnRlZCkgeyB0aGlzLnN0YXJ0ZWQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc3RhcnRlZCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnN0YXJ0ZWQgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoc291cmNlLl9zdGFydGVkIGFzIFBhcnRpYWw8Zmhpci5GaGlyRGF0ZVRpbWVBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2Jhc2VkT24nXSkgeyB0aGlzLmJhc2VkT24gPSBzb3VyY2UuYmFzZWRPbi5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmJhc2VkT24gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVmZXJyZXInXSkgeyB0aGlzLnJlZmVycmVyID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5yZWZlcnJlciwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2ludGVycHJldGVyJ10pIHsgdGhpcy5pbnRlcnByZXRlciA9IHNvdXJjZS5pbnRlcnByZXRlci5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmludGVycHJldGVyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2VuZHBvaW50J10pIHsgdGhpcy5lbmRwb2ludCA9IHNvdXJjZS5lbmRwb2ludC5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmVuZHBvaW50ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ251bWJlck9mU2VyaWVzJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLm51bWJlck9mU2VyaWVzID0gbmV3IGZoaXIuRmhpclVuc2lnbmVkSW50KHt2YWx1ZTogc291cmNlLm51bWJlck9mU2VyaWVzfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19udW1iZXJPZlNlcmllcyddKSB7XHJcbiAgICAgIGlmICh0aGlzLm51bWJlck9mU2VyaWVzKSB7IHRoaXMubnVtYmVyT2ZTZXJpZXMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbnVtYmVyT2ZTZXJpZXMhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5udW1iZXJPZlNlcmllcyA9IG5ldyBmaGlyLkZoaXJVbnNpZ25lZEludChzb3VyY2UuX251bWJlck9mU2VyaWVzIGFzIFBhcnRpYWw8Zmhpci5GaGlyVW5zaWduZWRJbnRBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ251bWJlck9mSW5zdGFuY2VzJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLm51bWJlck9mSW5zdGFuY2VzID0gbmV3IGZoaXIuRmhpclVuc2lnbmVkSW50KHt2YWx1ZTogc291cmNlLm51bWJlck9mSW5zdGFuY2VzfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19udW1iZXJPZkluc3RhbmNlcyddKSB7XHJcbiAgICAgIGlmICh0aGlzLm51bWJlck9mSW5zdGFuY2VzKSB7IHRoaXMubnVtYmVyT2ZJbnN0YW5jZXMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbnVtYmVyT2ZJbnN0YW5jZXMhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5udW1iZXJPZkluc3RhbmNlcyA9IG5ldyBmaGlyLkZoaXJVbnNpZ25lZEludChzb3VyY2UuX251bWJlck9mSW5zdGFuY2VzIGFzIFBhcnRpYWw8Zmhpci5GaGlyVW5zaWduZWRJbnRBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3Byb2NlZHVyZVJlZmVyZW5jZSddKSB7IHRoaXMucHJvY2VkdXJlUmVmZXJlbmNlID0gc291cmNlLnByb2NlZHVyZVJlZmVyZW5jZS5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnByb2NlZHVyZVJlZmVyZW5jZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwcm9jZWR1cmVDb2RlJ10pIHsgdGhpcy5wcm9jZWR1cmVDb2RlID0gc291cmNlLnByb2NlZHVyZUNvZGUubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wcm9jZWR1cmVDb2RlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3JlYXNvbiddKSB7IHRoaXMucmVhc29uID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5yZWFzb24sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydkZXNjcmlwdGlvbiddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5kZXNjcmlwdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuZGVzY3JpcHRpb259LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2Rlc2NyaXB0aW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZGVzY3JpcHRpb24pIHsgdGhpcy5kZXNjcmlwdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9kZXNjcmlwdGlvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRlc2NyaXB0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2Rlc2NyaXB0aW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydzZXJpZXMnXSkgeyB0aGlzLnNlcmllcyA9IHNvdXJjZS5zZXJpZXMubWFwKCh4KSA9PiBuZXcgZmhpci5JbWFnaW5nU3R1ZHlTZXJpZXMoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zZXJpZXMgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0ltYWdpbmdTdHVkeScgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ3VpZCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnYWNjZXNzaW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdpZGVudGlmaWVyJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TVignYXZhaWxhYmlsaXR5JyxleHAsJ0luc3RhbmNlQXZhaWxhYmlsaXR5JyxJbnN0YW5jZUF2YWlsYWJpbGl0eVZzVmFsaWRhdGlvbiwncicpKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdtb2RhbGl0eUxpc3QnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ3BhdGllbnQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2NvbnRleHQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3N0YXJ0ZWQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2Jhc2VkT24nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3JlZmVycmVyJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdpbnRlcnByZXRlcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnZW5kcG9pbnQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ251bWJlck9mU2VyaWVzJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdudW1iZXJPZkluc3RhbmNlcycsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgncHJvY2VkdXJlUmVmZXJlbmNlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdwcm9jZWR1cmVDb2RlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdyZWFzb24nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2Rlc2NyaXB0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdzZXJpZXMnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuIl19