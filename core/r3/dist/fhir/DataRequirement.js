// <auto-generated/>
// Contents of: hl7.fhir.r3.core version: 3.0.2
// Minimum TypeScript Version: 3.7
// FHIR ComplexType: DataRequirement
import * as fhir from '../fhir.js';
// @ts-ignore
import { AllTypesVsValidation } from '../fhirValueSets/AllTypesVsValidation.js';
/**
 * Code filters specify additional constraints on the data, specifying the value set of interest for a particular element of the data.
 */
export class DataRequirementCodeFilter extends fhir.FhirElement {
    /**
     * Default constructor for DataRequirementCodeFilter - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['path']) {
            this.path = new fhir.FhirString({ value: source.path });
        }
        else {
            this.path = null;
        }
        if (source['_path']) {
            if (this.path) {
                this.path.addExtendedProperties(source._path);
            }
            else {
                this.path = new fhir.FhirString(source._path);
            }
        }
        if (source['valueSet']) {
            this.valueSet = source.valueSet;
        }
        else if (source['valueSetString']) {
            this.valueSet = new fhir.FhirString({ value: source.valueSetString });
        }
        else if (source['valueSetReference']) {
            this.valueSet = new fhir.Reference(source.valueSetReference);
        }
        if (source['valueCode']) {
            this.valueCode = source.valueCode.map((x) => new fhir.FhirCode({ value: x }));
        }
        else {
            this.valueCode = [];
        }
        if (source['_valueCode']) {
            source._valueCode.forEach((x, i) => {
                if (this.valueCode.length >= i) {
                    if (x) {
                        this.valueCode[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.valueCode.push(new fhir.FhirCode(x));
                    }
                }
            });
        }
        if (source['valueCoding']) {
            this.valueCoding = source.valueCoding.map((x) => new fhir.Coding(x));
        }
        else {
            this.valueCoding = [];
        }
        if (source['valueCodeableConcept']) {
            this.valueCodeableConcept = source.valueCodeableConcept.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.valueCodeableConcept = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'DataRequirement.codeFilter';
        }
        iss.push(...this.vRS('path', exp));
        iss.push(...this.vOS('valueSet', exp));
        iss.push(...this.vOA('valueCode', exp));
        iss.push(...this.vOA('valueCoding', exp));
        iss.push(...this.vOA('valueCodeableConcept', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DataRequirementCodeFilter._fts_dataType = 'DataRequirementCodeFilter';
/**
 * Internal flag to properly serialize choice-type element DataRequirement.codeFilter.valueSet[x]
 */
DataRequirementCodeFilter._fts_valueSetIsChoice = true;
/**
 * Date filters specify additional constraints on the data in terms of the applicable date range for specific elements.
 */
export class DataRequirementDateFilter extends fhir.FhirElement {
    /**
     * Default constructor for DataRequirementDateFilter - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['path']) {
            this.path = new fhir.FhirString({ value: source.path });
        }
        else {
            this.path = null;
        }
        if (source['_path']) {
            if (this.path) {
                this.path.addExtendedProperties(source._path);
            }
            else {
                this.path = new fhir.FhirString(source._path);
            }
        }
        if (source['value']) {
            this.value = source.value;
        }
        else if (source['valueDateTime']) {
            this.value = new fhir.FhirDateTime({ value: source.valueDateTime });
        }
        else if (source['valuePeriod']) {
            this.value = new fhir.Period(source.valuePeriod);
        }
        else if (source['valueDuration']) {
            this.value = new fhir.Duration(source.valueDuration);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'DataRequirement.dateFilter';
        }
        iss.push(...this.vRS('path', exp));
        iss.push(...this.vOS('value', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DataRequirementDateFilter._fts_dataType = 'DataRequirementDateFilter';
/**
 * Internal flag to properly serialize choice-type element DataRequirement.dateFilter.value[x]
 */
DataRequirementDateFilter._fts_valueIsChoice = true;
/**
 * Describes a required data item for evaluation in terms of the type of data, and optional code or date-based filters of the data.
 */
export class DataRequirement extends fhir.FhirElement {
    /**
     * Default constructor for DataRequirement - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['type']) {
            this.type = new fhir.FhirCode({ value: source.type });
        }
        else {
            this.type = null;
        }
        if (source['_type']) {
            if (this.type) {
                this.type.addExtendedProperties(source._type);
            }
            else {
                this.type = new fhir.FhirCode(source._type);
            }
        }
        if (source['profile']) {
            this.profile = source.profile.map((x) => new fhir.FhirUri({ value: x }));
        }
        else {
            this.profile = [];
        }
        if (source['_profile']) {
            source._profile.forEach((x, i) => {
                if (this.profile.length >= i) {
                    if (x) {
                        this.profile[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.profile.push(new fhir.FhirUri(x));
                    }
                }
            });
        }
        if (source['mustSupport']) {
            this.mustSupport = source.mustSupport.map((x) => new fhir.FhirString({ value: x }));
        }
        else {
            this.mustSupport = [];
        }
        if (source['_mustSupport']) {
            source._mustSupport.forEach((x, i) => {
                if (this.mustSupport.length >= i) {
                    if (x) {
                        this.mustSupport[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.mustSupport.push(new fhir.FhirString(x));
                    }
                }
            });
        }
        if (source['codeFilter']) {
            this.codeFilter = source.codeFilter.map((x) => new fhir.DataRequirementCodeFilter(x));
        }
        else {
            this.codeFilter = [];
        }
        if (source['dateFilter']) {
            this.dateFilter = source.dateFilter.map((x) => new fhir.DataRequirementDateFilter(x));
        }
        else {
            this.dateFilter = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'DataRequirement';
        }
        iss.push(...this.vRSV('type', exp, 'AllTypes', AllTypesVsValidation, 'r'));
        iss.push(...this.vOA('profile', exp));
        iss.push(...this.vOA('mustSupport', exp));
        iss.push(...this.vOA('codeFilter', exp));
        iss.push(...this.vOA('dateFilter', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DataRequirement._fts_dataType = 'DataRequirement';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGF0YVJlcXVpcmVtZW50LmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9EYXRhUmVxdWlyZW1lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsb0NBQW9DO0FBRXBDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBSW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSwwQ0FBMEMsQ0FBQztBQTJDaEY7O0dBRUc7QUFDSCxNQUFNLE9BQU8seUJBQTBCLFNBQVEsSUFBSSxDQUFDLFdBQVc7SUE2QjdEOztPQUVHO0lBQ0gsWUFBWSxTQUFnRCxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUN0RyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLElBQUksRUFBQyxDQUFDLENBQUM7U0FBRTthQUN6RTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDMUIsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFDbkIsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFO2dCQUFFLElBQUksQ0FBQyxJQUFJLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLEtBQU0sQ0FBQyxDQUFDO2FBQUU7aUJBQzdEO2dCQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxLQUFxQyxDQUFDLENBQUM7YUFBRTtTQUN4RjtRQUNELElBQUksTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDO1NBQUU7YUFDdkQsSUFBSSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxjQUFjLEVBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDdEcsSUFBSSxNQUFNLENBQUMsbUJBQW1CLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1NBQUU7UUFDdkcsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsU0FBUyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBQyxLQUFLLEVBQUUsQ0FBQyxFQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDcEc7WUFBRSxJQUFJLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQztTQUFFO1FBQzdCLElBQUksTUFBTSxDQUFDLFlBQVksQ0FBQyxFQUFFO1lBQ3hCLE1BQU0sQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFO2dCQUNoQyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBRTtvQkFBRSxJQUFJLENBQUMsRUFBRTt3QkFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxDQUFDO3FCQUFFO2lCQUFFO3FCQUNyRjtvQkFBRSxJQUFJLENBQUMsRUFBRTt3QkFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBK0IsQ0FBQyxDQUFDLENBQUM7cUJBQUU7aUJBQUU7WUFDOUYsQ0FBQyxDQUFDLENBQUM7U0FDSjtRQUNELElBQUksTUFBTSxDQUFDLGFBQWEsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFdBQVcsR0FBRyxNQUFNLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUMvRjtZQUFFLElBQUksQ0FBQyxXQUFXLEdBQUcsRUFBRSxDQUFDO1NBQUU7UUFDL0IsSUFBSSxNQUFNLENBQUMsc0JBQXNCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxNQUFNLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQ25JO1lBQUUsSUFBSSxDQUFDLG9CQUFvQixHQUFHLEVBQUUsQ0FBQztTQUFFO0lBQzFDLENBQUM7SUFDRDs7T0FFRztJQUNhLGlCQUFpQixDQUFDLE1BQWEsRUFBRTtRQUMvQyxJQUFJLEdBQUcsR0FBbUIsS0FBSyxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3ZELElBQUksR0FBRyxLQUFLLEVBQUUsRUFBRTtZQUFFLEdBQUcsR0FBRyw0QkFBNEIsQ0FBQTtTQUFFO1FBQ3RELEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ2xDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3RDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3pDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLHNCQUFzQixFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbEQsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDOztBQW5FRDs7R0FFRztBQUM2Qix1Q0FBYSxHQUFVLDJCQUEyQixDQUFDO0FBU25GOztHQUVHO0FBQ3VCLCtDQUFxQixHQUFRLElBQUksQ0FBQztBQW9GOUQ7O0dBRUc7QUFDSCxNQUFNLE9BQU8seUJBQTBCLFNBQVEsSUFBSSxDQUFDLFdBQVc7SUFpQjdEOztPQUVHO0lBQ0gsWUFBWSxTQUFnRCxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUN0RyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLElBQUksRUFBQyxDQUFDLENBQUM7U0FBRTthQUN6RTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDMUIsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFDbkIsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFO2dCQUFFLElBQUksQ0FBQyxJQUFJLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLEtBQU0sQ0FBQyxDQUFDO2FBQUU7aUJBQzdEO2dCQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxLQUFxQyxDQUFDLENBQUM7YUFBRTtTQUN4RjtRQUNELElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDO1NBQUU7YUFDOUMsSUFBSSxNQUFNLENBQUMsZUFBZSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsYUFBYSxFQUFDLENBQUMsQ0FBQztTQUFFO2FBQ25HLElBQUksTUFBTSxDQUFDLGFBQWEsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1NBQUU7YUFDaEYsSUFBSSxNQUFNLENBQUMsZUFBZSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUM7U0FBRTtJQUM3RixDQUFDO0lBQ0Q7O09BRUc7SUFDYSxpQkFBaUIsQ0FBQyxNQUFhLEVBQUU7UUFDL0MsSUFBSSxHQUFHLEdBQW1CLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN2RCxJQUFJLEdBQUcsS0FBSyxFQUFFLEVBQUU7WUFBRSxHQUFHLEdBQUcsNEJBQTRCLENBQUE7U0FBRTtRQUN0RCxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNsQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNuQyxPQUFPLEdBQUcsQ0FBQztJQUNiLENBQUM7O0FBekNEOztHQUVHO0FBQzZCLHVDQUFhLEdBQVUsMkJBQTJCLENBQUM7QUFTbkY7O0dBRUc7QUFDdUIsNENBQWtCLEdBQVEsSUFBSSxDQUFDO0FBa0UzRDs7R0FFRztBQUNILE1BQU0sT0FBTyxlQUFnQixTQUFRLElBQUksQ0FBQyxXQUFXO0lBeUJuRDs7T0FFRztJQUNILFlBQVksU0FBc0MsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDNUYsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxJQUFJLEVBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDdkU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztTQUFFO1FBQzFCLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQ25CLElBQUksSUFBSSxDQUFDLElBQUksRUFBRTtnQkFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxLQUFNLENBQUMsQ0FBQzthQUFFO2lCQUM3RDtnQkFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsS0FBbUMsQ0FBQyxDQUFDO2FBQUU7U0FDcEY7UUFDRCxJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFDLEtBQUssRUFBRSxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUM3RjtZQUFFLElBQUksQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDO1NBQUU7UUFDM0IsSUFBSSxNQUFNLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFDdEIsTUFBTSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUU7Z0JBQzlCLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUFFO29CQUFFLElBQUksQ0FBQyxFQUFFO3dCQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFDLENBQUM7cUJBQUU7aUJBQUU7cUJBQ2pGO29CQUFFLElBQUksQ0FBQyxFQUFFO3dCQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUE4QixDQUFDLENBQUMsQ0FBQztxQkFBRTtpQkFBRTtZQUMxRixDQUFDLENBQUMsQ0FBQztTQUNKO1FBQ0QsSUFBSSxNQUFNLENBQUMsYUFBYSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsV0FBVyxHQUFHLE1BQU0sQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBQyxLQUFLLEVBQUUsQ0FBQyxFQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDNUc7WUFBRSxJQUFJLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQztTQUFFO1FBQy9CLElBQUksTUFBTSxDQUFDLGNBQWMsQ0FBQyxFQUFFO1lBQzFCLE1BQU0sQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFO2dCQUNsQyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBRTtvQkFBRSxJQUFJLENBQUMsRUFBRTt3QkFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxDQUFDO3FCQUFFO2lCQUFFO3FCQUN6RjtvQkFBRSxJQUFJLENBQUMsRUFBRTt3QkFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBaUMsQ0FBQyxDQUFDLENBQUM7cUJBQUU7aUJBQUU7WUFDcEcsQ0FBQyxDQUFDLENBQUM7U0FDSjtRQUNELElBQUksTUFBTSxDQUFDLFlBQVksQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMseUJBQXlCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQy9HO1lBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxFQUFFLENBQUM7U0FBRTtRQUM5QixJQUFJLE1BQU0sQ0FBQyxZQUFZLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLHlCQUF5QixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUMvRztZQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsRUFBRSxDQUFDO1NBQUU7SUFDaEMsQ0FBQztJQUNEOztPQUVHO0lBQ2EsaUJBQWlCLENBQUMsTUFBYSxFQUFFO1FBQy9DLElBQUksR0FBRyxHQUFtQixLQUFLLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDdkQsSUFBSSxHQUFHLEtBQUssRUFBRSxFQUFFO1lBQUUsR0FBRyxHQUFHLGlCQUFpQixDQUFBO1NBQUU7UUFDM0MsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFDLEdBQUcsRUFBQyxVQUFVLEVBQUMsb0JBQW9CLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN2RSxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNyQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxhQUFhLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN6QyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN4QyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN4QyxPQUFPLEdBQUcsQ0FBQztJQUNiLENBQUM7O0FBcEVEOztHQUVHO0FBQzZCLDZCQUFhLEdBQVUsaUJBQWlCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjMuY29yZSB2ZXJzaW9uOiAzLjAuMlxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgQ29tcGxleFR5cGU6IERhdGFSZXF1aXJlbWVudFxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQWxsVHlwZXNDb2RlcywgIEFsbFR5cGVzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0FsbFR5cGVzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFsbFR5cGVzVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BbGxUeXBlc1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBEYXRhUmVxdWlyZW1lbnRDb2RlRmlsdGVyIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIERhdGFSZXF1aXJlbWVudENvZGVGaWx0ZXJBcmdzIGV4dGVuZHMgZmhpci5GaGlyRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjb2RlLXZhbHVlZCBhdHRyaWJ1dGUgb2YgdGhlIGZpbHRlci4gVGhlIHNwZWNpZmllZCBwYXRoIG11c3QgYmUgcmVzb2x2YWJsZSBmcm9tIHRoZSB0eXBlIG9mIHRoZSByZXF1aXJlZCBkYXRhLiBUaGUgcGF0aCBpcyBhbGxvd2VkIHRvIGNvbnRhaW4gcXVhbGlmaWVycyAoLikgdG8gdHJhdmVyc2Ugc3ViLWVsZW1lbnRzLCBhcyB3ZWxsIGFzIGluZGV4ZXJzIChbeF0pIHRvIHRyYXZlcnNlIG11bHRpcGxlLWNhcmRpbmFsaXR5IHN1Yi1lbGVtZW50cy4gTm90ZSB0aGF0IHRoZSBpbmRleCBtdXN0IGJlIGFuIGludGVnZXIgY29uc3RhbnQuIFRoZSBwYXRoIG11c3QgcmVzb2x2ZSB0byBhbiBlbGVtZW50IG9mIHR5cGUgY29kZSwgQ29kaW5nLCBvciBDb2RlYWJsZUNvbmNlcHQuXHJcbiAgICovXHJcbiAgcGF0aDogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IERhdGFSZXF1aXJlbWVudC5jb2RlRmlsdGVyLnBhdGhcclxuICAgKi9cclxuICBfcGF0aD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHZhbHVlc2V0IGZvciB0aGUgY29kZSBmaWx0ZXIuIFRoZSB2YWx1ZVNldCBhbmQgdmFsdWUgZWxlbWVudHMgYXJlIGV4Y2x1c2l2ZS4gSWYgdmFsdWVTZXQgaXMgc3BlY2lmaWVkLCB0aGUgZmlsdGVyIHdpbGwgcmV0dXJuIG9ubHkgdGhvc2UgZGF0YSBpdGVtcyBmb3Igd2hpY2ggdGhlIHZhbHVlIG9mIHRoZSBjb2RlLXZhbHVlZCBlbGVtZW50IHNwZWNpZmllZCBpbiB0aGUgcGF0aCBpcyBhIG1lbWJlciBvZiB0aGUgc3BlY2lmaWVkIHZhbHVlc2V0LlxyXG4gICAqL1xyXG4gIHZhbHVlU2V0PzogZmhpci5GaGlyU3RyaW5nfGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdmFsdWVzZXQgZm9yIHRoZSBjb2RlIGZpbHRlci4gVGhlIHZhbHVlU2V0IGFuZCB2YWx1ZSBlbGVtZW50cyBhcmUgZXhjbHVzaXZlLiBJZiB2YWx1ZVNldCBpcyBzcGVjaWZpZWQsIHRoZSBmaWx0ZXIgd2lsbCByZXR1cm4gb25seSB0aG9zZSBkYXRhIGl0ZW1zIGZvciB3aGljaCB0aGUgdmFsdWUgb2YgdGhlIGNvZGUtdmFsdWVkIGVsZW1lbnQgc3BlY2lmaWVkIGluIHRoZSBwYXRoIGlzIGEgbWVtYmVyIG9mIHRoZSBzcGVjaWZpZWQgdmFsdWVzZXQuXHJcbiAgICovXHJcbiAgdmFsdWVTZXRTdHJpbmc/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdmFsdWVzZXQgZm9yIHRoZSBjb2RlIGZpbHRlci4gVGhlIHZhbHVlU2V0IGFuZCB2YWx1ZSBlbGVtZW50cyBhcmUgZXhjbHVzaXZlLiBJZiB2YWx1ZVNldCBpcyBzcGVjaWZpZWQsIHRoZSBmaWx0ZXIgd2lsbCByZXR1cm4gb25seSB0aG9zZSBkYXRhIGl0ZW1zIGZvciB3aGljaCB0aGUgdmFsdWUgb2YgdGhlIGNvZGUtdmFsdWVkIGVsZW1lbnQgc3BlY2lmaWVkIGluIHRoZSBwYXRoIGlzIGEgbWVtYmVyIG9mIHRoZSBzcGVjaWZpZWQgdmFsdWVzZXQuXHJcbiAgICovXHJcbiAgdmFsdWVTZXRSZWZlcmVuY2U/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjb2RlcyBmb3IgdGhlIGNvZGUgZmlsdGVyLiBPbmx5IG9uZSBvZiB2YWx1ZVNldCwgdmFsdWVDb2RlLCB2YWx1ZUNvZGluZywgb3IgdmFsdWVDb2RlYWJsZUNvbmNlcHQgbWF5IGJlIHNwZWNpZmllZC4gSWYgdmFsdWVzIGFyZSBnaXZlbiwgdGhlIGZpbHRlciB3aWxsIHJldHVybiBvbmx5IHRob3NlIGRhdGEgaXRlbXMgZm9yIHdoaWNoIHRoZSBjb2RlLXZhbHVlZCBhdHRyaWJ1dGUgc3BlY2lmaWVkIGJ5IHRoZSBwYXRoIGhhcyBhIHZhbHVlIHRoYXQgaXMgb25lIG9mIHRoZSBzcGVjaWZpZWQgY29kZXMuXHJcbiAgICovXHJcbiAgdmFsdWVDb2RlPzogZmhpci5GaGlyQ29kZVtdfChzdHJpbmd8bnVsbClbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IERhdGFSZXF1aXJlbWVudC5jb2RlRmlsdGVyLnZhbHVlQ29kZVxyXG4gICAqL1xyXG4gIF92YWx1ZUNvZGU/OihmaGlyLkZoaXJFbGVtZW50QXJnc3xudWxsKVtdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBDb2RpbmdzIGZvciB0aGUgY29kZSBmaWx0ZXIuIE9ubHkgb25lIG9mIHZhbHVlU2V0LCB2YWx1ZUNvZGUsIHZhbHVlQ29uZGluZywgb3IgdmFsdWVDb2RlYWJsZUNvbmNlcHQgbWF5IGJlIHNwZWNpZmllZC4gSWYgdmFsdWVzIGFyZSBnaXZlbiwgdGhlIGZpbHRlciB3aWxsIHJldHVybiBvbmx5IHRob3NlIGRhdGEgaXRlbXMgZm9yIHdoaWNoIHRoZSBjb2RlLXZhbHVlZCBhdHRyaWJ1dGUgc3BlY2lmaWVkIGJ5IHRoZSBwYXRoIGhhcyBhIHZhbHVlIHRoYXQgaXMgb25lIG9mIHRoZSBzcGVjaWZpZWQgQ29kaW5ncy5cclxuICAgKi9cclxuICB2YWx1ZUNvZGluZz86IGZoaXIuQ29kaW5nQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgQ29kZWFibGVDb25jZXB0cyBmb3IgdGhlIGNvZGUgZmlsdGVyLiBPbmx5IG9uZSBvZiB2YWx1ZVNldCwgdmFsdWVDb2RlLCB2YWx1ZUNvbmRpbmcsIG9yIHZhbHVlQ29kZWFibGVDb25jZXB0IG1heSBiZSBzcGVjaWZpZWQuIElmIHZhbHVlcyBhcmUgZ2l2ZW4sIHRoZSBmaWx0ZXIgd2lsbCByZXR1cm4gb25seSB0aG9zZSBkYXRhIGl0ZW1zIGZvciB3aGljaCB0aGUgY29kZS12YWx1ZWQgYXR0cmlidXRlIHNwZWNpZmllZCBieSB0aGUgcGF0aCBoYXMgYSB2YWx1ZSB0aGF0IGlzIG9uZSBvZiB0aGUgc3BlY2lmaWVkIENvZGVhYmxlQ29uY2VwdHMuXHJcbiAgICovXHJcbiAgdmFsdWVDb2RlYWJsZUNvbmNlcHQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb2RlIGZpbHRlcnMgc3BlY2lmeSBhZGRpdGlvbmFsIGNvbnN0cmFpbnRzIG9uIHRoZSBkYXRhLCBzcGVjaWZ5aW5nIHRoZSB2YWx1ZSBzZXQgb2YgaW50ZXJlc3QgZm9yIGEgcGFydGljdWxhciBlbGVtZW50IG9mIHRoZSBkYXRhLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIERhdGFSZXF1aXJlbWVudENvZGVGaWx0ZXIgZXh0ZW5kcyBmaGlyLkZoaXJFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0RhdGFSZXF1aXJlbWVudENvZGVGaWx0ZXInO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjb2RlLXZhbHVlZCBhdHRyaWJ1dGUgb2YgdGhlIGZpbHRlci4gVGhlIHNwZWNpZmllZCBwYXRoIG11c3QgYmUgcmVzb2x2YWJsZSBmcm9tIHRoZSB0eXBlIG9mIHRoZSByZXF1aXJlZCBkYXRhLiBUaGUgcGF0aCBpcyBhbGxvd2VkIHRvIGNvbnRhaW4gcXVhbGlmaWVycyAoLikgdG8gdHJhdmVyc2Ugc3ViLWVsZW1lbnRzLCBhcyB3ZWxsIGFzIGluZGV4ZXJzIChbeF0pIHRvIHRyYXZlcnNlIG11bHRpcGxlLWNhcmRpbmFsaXR5IHN1Yi1lbGVtZW50cy4gTm90ZSB0aGF0IHRoZSBpbmRleCBtdXN0IGJlIGFuIGludGVnZXIgY29uc3RhbnQuIFRoZSBwYXRoIG11c3QgcmVzb2x2ZSB0byBhbiBlbGVtZW50IG9mIHR5cGUgY29kZSwgQ29kaW5nLCBvciBDb2RlYWJsZUNvbmNlcHQuXHJcbiAgICovXHJcbiAgcHVibGljIHBhdGg6IGZoaXIuRmhpclN0cmluZ3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB2YWx1ZXNldCBmb3IgdGhlIGNvZGUgZmlsdGVyLiBUaGUgdmFsdWVTZXQgYW5kIHZhbHVlIGVsZW1lbnRzIGFyZSBleGNsdXNpdmUuIElmIHZhbHVlU2V0IGlzIHNwZWNpZmllZCwgdGhlIGZpbHRlciB3aWxsIHJldHVybiBvbmx5IHRob3NlIGRhdGEgaXRlbXMgZm9yIHdoaWNoIHRoZSB2YWx1ZSBvZiB0aGUgY29kZS12YWx1ZWQgZWxlbWVudCBzcGVjaWZpZWQgaW4gdGhlIHBhdGggaXMgYSBtZW1iZXIgb2YgdGhlIHNwZWNpZmllZCB2YWx1ZXNldC5cclxuICAgKi9cclxuICBwdWJsaWMgdmFsdWVTZXQ/OiAoZmhpci5GaGlyU3RyaW5nfGZoaXIuUmVmZXJlbmNlKXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBEYXRhUmVxdWlyZW1lbnQuY29kZUZpbHRlci52YWx1ZVNldFt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c192YWx1ZVNldElzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjb2RlcyBmb3IgdGhlIGNvZGUgZmlsdGVyLiBPbmx5IG9uZSBvZiB2YWx1ZVNldCwgdmFsdWVDb2RlLCB2YWx1ZUNvZGluZywgb3IgdmFsdWVDb2RlYWJsZUNvbmNlcHQgbWF5IGJlIHNwZWNpZmllZC4gSWYgdmFsdWVzIGFyZSBnaXZlbiwgdGhlIGZpbHRlciB3aWxsIHJldHVybiBvbmx5IHRob3NlIGRhdGEgaXRlbXMgZm9yIHdoaWNoIHRoZSBjb2RlLXZhbHVlZCBhdHRyaWJ1dGUgc3BlY2lmaWVkIGJ5IHRoZSBwYXRoIGhhcyBhIHZhbHVlIHRoYXQgaXMgb25lIG9mIHRoZSBzcGVjaWZpZWQgY29kZXMuXHJcbiAgICovXHJcbiAgcHVibGljIHZhbHVlQ29kZTogZmhpci5GaGlyQ29kZVtdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBDb2RpbmdzIGZvciB0aGUgY29kZSBmaWx0ZXIuIE9ubHkgb25lIG9mIHZhbHVlU2V0LCB2YWx1ZUNvZGUsIHZhbHVlQ29uZGluZywgb3IgdmFsdWVDb2RlYWJsZUNvbmNlcHQgbWF5IGJlIHNwZWNpZmllZC4gSWYgdmFsdWVzIGFyZSBnaXZlbiwgdGhlIGZpbHRlciB3aWxsIHJldHVybiBvbmx5IHRob3NlIGRhdGEgaXRlbXMgZm9yIHdoaWNoIHRoZSBjb2RlLXZhbHVlZCBhdHRyaWJ1dGUgc3BlY2lmaWVkIGJ5IHRoZSBwYXRoIGhhcyBhIHZhbHVlIHRoYXQgaXMgb25lIG9mIHRoZSBzcGVjaWZpZWQgQ29kaW5ncy5cclxuICAgKi9cclxuICBwdWJsaWMgdmFsdWVDb2Rpbmc6IGZoaXIuQ29kaW5nW107XHJcbiAgLyoqXHJcbiAgICogVGhlIENvZGVhYmxlQ29uY2VwdHMgZm9yIHRoZSBjb2RlIGZpbHRlci4gT25seSBvbmUgb2YgdmFsdWVTZXQsIHZhbHVlQ29kZSwgdmFsdWVDb25kaW5nLCBvciB2YWx1ZUNvZGVhYmxlQ29uY2VwdCBtYXkgYmUgc3BlY2lmaWVkLiBJZiB2YWx1ZXMgYXJlIGdpdmVuLCB0aGUgZmlsdGVyIHdpbGwgcmV0dXJuIG9ubHkgdGhvc2UgZGF0YSBpdGVtcyBmb3Igd2hpY2ggdGhlIGNvZGUtdmFsdWVkIGF0dHJpYnV0ZSBzcGVjaWZpZWQgYnkgdGhlIHBhdGggaGFzIGEgdmFsdWUgdGhhdCBpcyBvbmUgb2YgdGhlIHNwZWNpZmllZCBDb2RlYWJsZUNvbmNlcHRzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB2YWx1ZUNvZGVhYmxlQ29uY2VwdDogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBEYXRhUmVxdWlyZW1lbnRDb2RlRmlsdGVyIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8RGF0YVJlcXVpcmVtZW50Q29kZUZpbHRlckFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydwYXRoJ10pIHsgdGhpcy5wYXRoID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5wYXRofSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnBhdGggPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfcGF0aCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnBhdGgpIHsgdGhpcy5wYXRoLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3BhdGghKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5wYXRoID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3BhdGggYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3ZhbHVlU2V0J10pIHsgdGhpcy52YWx1ZVNldCA9IHNvdXJjZS52YWx1ZVNldDsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd2YWx1ZVNldFN0cmluZyddKSB7IHRoaXMudmFsdWVTZXQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnZhbHVlU2V0U3RyaW5nfSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsndmFsdWVTZXRSZWZlcmVuY2UnXSkgeyB0aGlzLnZhbHVlU2V0ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS52YWx1ZVNldFJlZmVyZW5jZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3ZhbHVlQ29kZSddKSB7IHRoaXMudmFsdWVDb2RlID0gc291cmNlLnZhbHVlQ29kZS5tYXAoKHgpID0+IG5ldyBmaGlyLkZoaXJDb2RlKHt2YWx1ZTogeH0pKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudmFsdWVDb2RlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ192YWx1ZUNvZGUnXSkge1xyXG4gICAgICBzb3VyY2UuX3ZhbHVlQ29kZS5mb3JFYWNoKCh4LGkpID0+IHtcclxuICAgICAgICBpZiAodGhpcy52YWx1ZUNvZGUubGVuZ3RoID49IGkpIHsgaWYgKHgpIHsgdGhpcy52YWx1ZUNvZGVbaV0uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHgpOyB9IH1cclxuICAgICAgICBlbHNlIHsgaWYgKHgpIHsgdGhpcy52YWx1ZUNvZGUucHVzaChuZXcgZmhpci5GaGlyQ29kZSh4IGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZUFyZ3M+KSk7IH0gfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3ZhbHVlQ29kaW5nJ10pIHsgdGhpcy52YWx1ZUNvZGluZyA9IHNvdXJjZS52YWx1ZUNvZGluZy5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGluZyh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnZhbHVlQ29kaW5nID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3ZhbHVlQ29kZWFibGVDb25jZXB0J10pIHsgdGhpcy52YWx1ZUNvZGVhYmxlQ29uY2VwdCA9IHNvdXJjZS52YWx1ZUNvZGVhYmxlQ29uY2VwdC5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnZhbHVlQ29kZWFibGVDb25jZXB0ID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdEYXRhUmVxdWlyZW1lbnQuY29kZUZpbHRlcicgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ3BhdGgnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3ZhbHVlU2V0JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCd2YWx1ZUNvZGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3ZhbHVlQ29kaW5nJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCd2YWx1ZUNvZGVhYmxlQ29uY2VwdCcsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgRGF0YVJlcXVpcmVtZW50RGF0ZUZpbHRlciB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBEYXRhUmVxdWlyZW1lbnREYXRlRmlsdGVyQXJncyBleHRlbmRzIGZoaXIuRmhpckVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZS12YWx1ZWQgYXR0cmlidXRlIG9mIHRoZSBmaWx0ZXIuIFRoZSBzcGVjaWZpZWQgcGF0aCBtdXN0IGJlIHJlc29sdmFibGUgZnJvbSB0aGUgdHlwZSBvZiB0aGUgcmVxdWlyZWQgZGF0YS4gVGhlIHBhdGggaXMgYWxsb3dlZCB0byBjb250YWluIHF1YWxpZmllcnMgKC4pIHRvIHRyYXZlcnNlIHN1Yi1lbGVtZW50cywgYXMgd2VsbCBhcyBpbmRleGVycyAoW3hdKSB0byB0cmF2ZXJzZSBtdWx0aXBsZS1jYXJkaW5hbGl0eSBzdWItZWxlbWVudHMuIE5vdGUgdGhhdCB0aGUgaW5kZXggbXVzdCBiZSBhbiBpbnRlZ2VyIGNvbnN0YW50LiBUaGUgcGF0aCBtdXN0IHJlc29sdmUgdG8gYW4gZWxlbWVudCBvZiB0eXBlIGRhdGVUaW1lLCBQZXJpb2QsIFNjaGVkdWxlLCBvciBUaW1pbmcuXHJcbiAgICovXHJcbiAgcGF0aDogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IERhdGFSZXF1aXJlbWVudC5kYXRlRmlsdGVyLnBhdGhcclxuICAgKi9cclxuICBfcGF0aD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHZhbHVlIG9mIHRoZSBmaWx0ZXIuIElmIHBlcmlvZCBpcyBzcGVjaWZpZWQsIHRoZSBmaWx0ZXIgd2lsbCByZXR1cm4gb25seSB0aG9zZSBkYXRhIGl0ZW1zIHRoYXQgZmFsbCB3aXRoaW4gdGhlIGJvdW5kcyBkZXRlcm1pbmVkIGJ5IHRoZSBQZXJpb2QsIGluY2x1c2l2ZSBvZiB0aGUgcGVyaW9kIGJvdW5kYXJpZXMuIElmIGRhdGVUaW1lIGlzIHNwZWNpZmllZCwgdGhlIGZpbHRlciB3aWxsIHJldHVybiBvbmx5IHRob3NlIGRhdGEgaXRlbXMgdGhhdCBhcmUgZXF1YWwgdG8gdGhlIHNwZWNpZmllZCBkYXRlVGltZS4gSWYgYSBEdXJhdGlvbiBpcyBzcGVjaWZpZWQsIHRoZSBmaWx0ZXIgd2lsbCByZXR1cm4gb25seSB0aG9zZSBkYXRhIGl0ZW1zIHRoYXQgZmFsbCB3aXRoaW4gRHVyYXRpb24gZnJvbSBub3cuXHJcbiAgICovXHJcbiAgdmFsdWU/OiBmaGlyLkZoaXJEYXRlVGltZXxmaGlyLlBlcmlvZHxmaGlyLkR1cmF0aW9ufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdmFsdWUgb2YgdGhlIGZpbHRlci4gSWYgcGVyaW9kIGlzIHNwZWNpZmllZCwgdGhlIGZpbHRlciB3aWxsIHJldHVybiBvbmx5IHRob3NlIGRhdGEgaXRlbXMgdGhhdCBmYWxsIHdpdGhpbiB0aGUgYm91bmRzIGRldGVybWluZWQgYnkgdGhlIFBlcmlvZCwgaW5jbHVzaXZlIG9mIHRoZSBwZXJpb2QgYm91bmRhcmllcy4gSWYgZGF0ZVRpbWUgaXMgc3BlY2lmaWVkLCB0aGUgZmlsdGVyIHdpbGwgcmV0dXJuIG9ubHkgdGhvc2UgZGF0YSBpdGVtcyB0aGF0IGFyZSBlcXVhbCB0byB0aGUgc3BlY2lmaWVkIGRhdGVUaW1lLiBJZiBhIER1cmF0aW9uIGlzIHNwZWNpZmllZCwgdGhlIGZpbHRlciB3aWxsIHJldHVybiBvbmx5IHRob3NlIGRhdGEgaXRlbXMgdGhhdCBmYWxsIHdpdGhpbiBEdXJhdGlvbiBmcm9tIG5vdy5cclxuICAgKi9cclxuICB2YWx1ZURhdGVUaW1lPzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdmFsdWUgb2YgdGhlIGZpbHRlci4gSWYgcGVyaW9kIGlzIHNwZWNpZmllZCwgdGhlIGZpbHRlciB3aWxsIHJldHVybiBvbmx5IHRob3NlIGRhdGEgaXRlbXMgdGhhdCBmYWxsIHdpdGhpbiB0aGUgYm91bmRzIGRldGVybWluZWQgYnkgdGhlIFBlcmlvZCwgaW5jbHVzaXZlIG9mIHRoZSBwZXJpb2QgYm91bmRhcmllcy4gSWYgZGF0ZVRpbWUgaXMgc3BlY2lmaWVkLCB0aGUgZmlsdGVyIHdpbGwgcmV0dXJuIG9ubHkgdGhvc2UgZGF0YSBpdGVtcyB0aGF0IGFyZSBlcXVhbCB0byB0aGUgc3BlY2lmaWVkIGRhdGVUaW1lLiBJZiBhIER1cmF0aW9uIGlzIHNwZWNpZmllZCwgdGhlIGZpbHRlciB3aWxsIHJldHVybiBvbmx5IHRob3NlIGRhdGEgaXRlbXMgdGhhdCBmYWxsIHdpdGhpbiBEdXJhdGlvbiBmcm9tIG5vdy5cclxuICAgKi9cclxuICB2YWx1ZVBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHZhbHVlIG9mIHRoZSBmaWx0ZXIuIElmIHBlcmlvZCBpcyBzcGVjaWZpZWQsIHRoZSBmaWx0ZXIgd2lsbCByZXR1cm4gb25seSB0aG9zZSBkYXRhIGl0ZW1zIHRoYXQgZmFsbCB3aXRoaW4gdGhlIGJvdW5kcyBkZXRlcm1pbmVkIGJ5IHRoZSBQZXJpb2QsIGluY2x1c2l2ZSBvZiB0aGUgcGVyaW9kIGJvdW5kYXJpZXMuIElmIGRhdGVUaW1lIGlzIHNwZWNpZmllZCwgdGhlIGZpbHRlciB3aWxsIHJldHVybiBvbmx5IHRob3NlIGRhdGEgaXRlbXMgdGhhdCBhcmUgZXF1YWwgdG8gdGhlIHNwZWNpZmllZCBkYXRlVGltZS4gSWYgYSBEdXJhdGlvbiBpcyBzcGVjaWZpZWQsIHRoZSBmaWx0ZXIgd2lsbCByZXR1cm4gb25seSB0aG9zZSBkYXRhIGl0ZW1zIHRoYXQgZmFsbCB3aXRoaW4gRHVyYXRpb24gZnJvbSBub3cuXHJcbiAgICovXHJcbiAgdmFsdWVEdXJhdGlvbj86IGZoaXIuRHVyYXRpb25BcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIERhdGUgZmlsdGVycyBzcGVjaWZ5IGFkZGl0aW9uYWwgY29uc3RyYWludHMgb24gdGhlIGRhdGEgaW4gdGVybXMgb2YgdGhlIGFwcGxpY2FibGUgZGF0ZSByYW5nZSBmb3Igc3BlY2lmaWMgZWxlbWVudHMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRGF0YVJlcXVpcmVtZW50RGF0ZUZpbHRlciBleHRlbmRzIGZoaXIuRmhpckVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnRGF0YVJlcXVpcmVtZW50RGF0ZUZpbHRlcic7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUtdmFsdWVkIGF0dHJpYnV0ZSBvZiB0aGUgZmlsdGVyLiBUaGUgc3BlY2lmaWVkIHBhdGggbXVzdCBiZSByZXNvbHZhYmxlIGZyb20gdGhlIHR5cGUgb2YgdGhlIHJlcXVpcmVkIGRhdGEuIFRoZSBwYXRoIGlzIGFsbG93ZWQgdG8gY29udGFpbiBxdWFsaWZpZXJzICguKSB0byB0cmF2ZXJzZSBzdWItZWxlbWVudHMsIGFzIHdlbGwgYXMgaW5kZXhlcnMgKFt4XSkgdG8gdHJhdmVyc2UgbXVsdGlwbGUtY2FyZGluYWxpdHkgc3ViLWVsZW1lbnRzLiBOb3RlIHRoYXQgdGhlIGluZGV4IG11c3QgYmUgYW4gaW50ZWdlciBjb25zdGFudC4gVGhlIHBhdGggbXVzdCByZXNvbHZlIHRvIGFuIGVsZW1lbnQgb2YgdHlwZSBkYXRlVGltZSwgUGVyaW9kLCBTY2hlZHVsZSwgb3IgVGltaW5nLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXRoOiBmaGlyLkZoaXJTdHJpbmd8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgdmFsdWUgb2YgdGhlIGZpbHRlci4gSWYgcGVyaW9kIGlzIHNwZWNpZmllZCwgdGhlIGZpbHRlciB3aWxsIHJldHVybiBvbmx5IHRob3NlIGRhdGEgaXRlbXMgdGhhdCBmYWxsIHdpdGhpbiB0aGUgYm91bmRzIGRldGVybWluZWQgYnkgdGhlIFBlcmlvZCwgaW5jbHVzaXZlIG9mIHRoZSBwZXJpb2QgYm91bmRhcmllcy4gSWYgZGF0ZVRpbWUgaXMgc3BlY2lmaWVkLCB0aGUgZmlsdGVyIHdpbGwgcmV0dXJuIG9ubHkgdGhvc2UgZGF0YSBpdGVtcyB0aGF0IGFyZSBlcXVhbCB0byB0aGUgc3BlY2lmaWVkIGRhdGVUaW1lLiBJZiBhIER1cmF0aW9uIGlzIHNwZWNpZmllZCwgdGhlIGZpbHRlciB3aWxsIHJldHVybiBvbmx5IHRob3NlIGRhdGEgaXRlbXMgdGhhdCBmYWxsIHdpdGhpbiBEdXJhdGlvbiBmcm9tIG5vdy5cclxuICAgKi9cclxuICBwdWJsaWMgdmFsdWU/OiAoZmhpci5GaGlyRGF0ZVRpbWV8Zmhpci5QZXJpb2R8Zmhpci5EdXJhdGlvbil8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgRGF0YVJlcXVpcmVtZW50LmRhdGVGaWx0ZXIudmFsdWVbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfdmFsdWVJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBEYXRhUmVxdWlyZW1lbnREYXRlRmlsdGVyIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8RGF0YVJlcXVpcmVtZW50RGF0ZUZpbHRlckFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydwYXRoJ10pIHsgdGhpcy5wYXRoID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5wYXRofSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnBhdGggPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfcGF0aCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnBhdGgpIHsgdGhpcy5wYXRoLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3BhdGghKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5wYXRoID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3BhdGggYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3ZhbHVlJ10pIHsgdGhpcy52YWx1ZSA9IHNvdXJjZS52YWx1ZTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd2YWx1ZURhdGVUaW1lJ10pIHsgdGhpcy52YWx1ZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS52YWx1ZURhdGVUaW1lfSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsndmFsdWVQZXJpb2QnXSkgeyB0aGlzLnZhbHVlID0gbmV3IGZoaXIuUGVyaW9kKHNvdXJjZS52YWx1ZVBlcmlvZCk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsndmFsdWVEdXJhdGlvbiddKSB7IHRoaXMudmFsdWUgPSBuZXcgZmhpci5EdXJhdGlvbihzb3VyY2UudmFsdWVEdXJhdGlvbik7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdEYXRhUmVxdWlyZW1lbnQuZGF0ZUZpbHRlcicgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ3BhdGgnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3ZhbHVlJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBEYXRhUmVxdWlyZW1lbnQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgRGF0YVJlcXVpcmVtZW50QXJncyBleHRlbmRzIGZoaXIuRmhpckVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgdHlwZSBvZiB0aGUgcmVxdWlyZWQgZGF0YSwgc3BlY2lmaWVkIGFzIHRoZSB0eXBlIG5hbWUgb2YgYSByZXNvdXJjZS4gRm9yIHByb2ZpbGVzLCB0aGlzIHZhbHVlIGlzIHNldCB0byB0aGUgdHlwZSBvZiB0aGUgYmFzZSByZXNvdXJjZSBvZiB0aGUgcHJvZmlsZS5cclxuICAgKi9cclxuICB0eXBlOiBmaGlyLkZoaXJDb2RlfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IERhdGFSZXF1aXJlbWVudC50eXBlXHJcbiAgICovXHJcbiAgX3R5cGU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwcm9maWxlIG9mIHRoZSByZXF1aXJlZCBkYXRhLCBzcGVjaWZpZWQgYXMgdGhlIHVyaSBvZiB0aGUgcHJvZmlsZSBkZWZpbml0aW9uLlxyXG4gICAqL1xyXG4gIHByb2ZpbGU/OiBmaGlyLkZoaXJVcmlbXXwoc3RyaW5nfG51bGwpW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBEYXRhUmVxdWlyZW1lbnQucHJvZmlsZVxyXG4gICAqL1xyXG4gIF9wcm9maWxlPzooZmhpci5GaGlyRWxlbWVudEFyZ3N8bnVsbClbXTtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgdGhhdCBzcGVjaWZpYyBlbGVtZW50cyBvZiB0aGUgdHlwZSBhcmUgcmVmZXJlbmNlZCBieSB0aGUga25vd2xlZGdlIG1vZHVsZSBhbmQgbXVzdCBiZSBzdXBwb3J0ZWQgYnkgdGhlIGNvbnN1bWVyIGluIG9yZGVyIHRvIG9idGFpbiBhbiBlZmZlY3RpdmUgZXZhbHVhdGlvbi4gVGhpcyBkb2VzIG5vdCBtZWFuIHRoYXQgYSB2YWx1ZSBpcyByZXF1aXJlZCBmb3IgdGhpcyBlbGVtZW50LCBvbmx5IHRoYXQgdGhlIGNvbnN1bWluZyBzeXN0ZW0gbXVzdCB1bmRlcnN0YW5kIHRoZSBlbGVtZW50IGFuZCBiZSBhYmxlIHRvIHByb3ZpZGUgdmFsdWVzIGZvciBpdCBpZiB0aGV5IGFyZSBhdmFpbGFibGUuIE5vdGUgdGhhdCB0aGUgdmFsdWUgZm9yIHRoaXMgZWxlbWVudCBjYW4gYmUgYSBwYXRoIHRvIGFsbG93IHJlZmVyZW5jZXMgdG8gbmVzdGVkIGVsZW1lbnRzLiBJbiB0aGF0IGNhc2UsIGFsbCB0aGUgZWxlbWVudHMgYWxvbmcgdGhlIHBhdGggbXVzdCBiZSBzdXBwb3J0ZWQuXHJcbiAgICovXHJcbiAgbXVzdFN1cHBvcnQ/OiBmaGlyLkZoaXJTdHJpbmdbXXwoc3RyaW5nfG51bGwpW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBEYXRhUmVxdWlyZW1lbnQubXVzdFN1cHBvcnRcclxuICAgKi9cclxuICBfbXVzdFN1cHBvcnQ/OihmaGlyLkZoaXJFbGVtZW50QXJnc3xudWxsKVtdO1xyXG4gIC8qKlxyXG4gICAqIENvZGUgZmlsdGVycyBzcGVjaWZ5IGFkZGl0aW9uYWwgY29uc3RyYWludHMgb24gdGhlIGRhdGEsIHNwZWNpZnlpbmcgdGhlIHZhbHVlIHNldCBvZiBpbnRlcmVzdCBmb3IgYSBwYXJ0aWN1bGFyIGVsZW1lbnQgb2YgdGhlIGRhdGEuXHJcbiAgICovXHJcbiAgY29kZUZpbHRlcj86IGZoaXIuRGF0YVJlcXVpcmVtZW50Q29kZUZpbHRlckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGF0ZSBmaWx0ZXJzIHNwZWNpZnkgYWRkaXRpb25hbCBjb25zdHJhaW50cyBvbiB0aGUgZGF0YSBpbiB0ZXJtcyBvZiB0aGUgYXBwbGljYWJsZSBkYXRlIHJhbmdlIGZvciBzcGVjaWZpYyBlbGVtZW50cy5cclxuICAgKi9cclxuICBkYXRlRmlsdGVyPzogZmhpci5EYXRhUmVxdWlyZW1lbnREYXRlRmlsdGVyQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIERlc2NyaWJlcyBhIHJlcXVpcmVkIGRhdGEgaXRlbSBmb3IgZXZhbHVhdGlvbiBpbiB0ZXJtcyBvZiB0aGUgdHlwZSBvZiBkYXRhLCBhbmQgb3B0aW9uYWwgY29kZSBvciBkYXRlLWJhc2VkIGZpbHRlcnMgb2YgdGhlIGRhdGEuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRGF0YVJlcXVpcmVtZW50IGV4dGVuZHMgZmhpci5GaGlyRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdEYXRhUmVxdWlyZW1lbnQnO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0eXBlIG9mIHRoZSByZXF1aXJlZCBkYXRhLCBzcGVjaWZpZWQgYXMgdGhlIHR5cGUgbmFtZSBvZiBhIHJlc291cmNlLiBGb3IgcHJvZmlsZXMsIHRoaXMgdmFsdWUgaXMgc2V0IHRvIHRoZSB0eXBlIG9mIHRoZSBiYXNlIHJlc291cmNlIG9mIHRoZSBwcm9maWxlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0eXBlOiBmaGlyLkZoaXJDb2RlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIHByb2ZpbGUgb2YgdGhlIHJlcXVpcmVkIGRhdGEsIHNwZWNpZmllZCBhcyB0aGUgdXJpIG9mIHRoZSBwcm9maWxlIGRlZmluaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHByb2ZpbGU6IGZoaXIuRmhpclVyaVtdO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB0aGF0IHNwZWNpZmljIGVsZW1lbnRzIG9mIHRoZSB0eXBlIGFyZSByZWZlcmVuY2VkIGJ5IHRoZSBrbm93bGVkZ2UgbW9kdWxlIGFuZCBtdXN0IGJlIHN1cHBvcnRlZCBieSB0aGUgY29uc3VtZXIgaW4gb3JkZXIgdG8gb2J0YWluIGFuIGVmZmVjdGl2ZSBldmFsdWF0aW9uLiBUaGlzIGRvZXMgbm90IG1lYW4gdGhhdCBhIHZhbHVlIGlzIHJlcXVpcmVkIGZvciB0aGlzIGVsZW1lbnQsIG9ubHkgdGhhdCB0aGUgY29uc3VtaW5nIHN5c3RlbSBtdXN0IHVuZGVyc3RhbmQgdGhlIGVsZW1lbnQgYW5kIGJlIGFibGUgdG8gcHJvdmlkZSB2YWx1ZXMgZm9yIGl0IGlmIHRoZXkgYXJlIGF2YWlsYWJsZS4gTm90ZSB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhpcyBlbGVtZW50IGNhbiBiZSBhIHBhdGggdG8gYWxsb3cgcmVmZXJlbmNlcyB0byBuZXN0ZWQgZWxlbWVudHMuIEluIHRoYXQgY2FzZSwgYWxsIHRoZSBlbGVtZW50cyBhbG9uZyB0aGUgcGF0aCBtdXN0IGJlIHN1cHBvcnRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgbXVzdFN1cHBvcnQ6IGZoaXIuRmhpclN0cmluZ1tdO1xyXG4gIC8qKlxyXG4gICAqIENvZGUgZmlsdGVycyBzcGVjaWZ5IGFkZGl0aW9uYWwgY29uc3RyYWludHMgb24gdGhlIGRhdGEsIHNwZWNpZnlpbmcgdGhlIHZhbHVlIHNldCBvZiBpbnRlcmVzdCBmb3IgYSBwYXJ0aWN1bGFyIGVsZW1lbnQgb2YgdGhlIGRhdGEuXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGVGaWx0ZXI6IGZoaXIuRGF0YVJlcXVpcmVtZW50Q29kZUZpbHRlcltdO1xyXG4gIC8qKlxyXG4gICAqIERhdGUgZmlsdGVycyBzcGVjaWZ5IGFkZGl0aW9uYWwgY29uc3RyYWludHMgb24gdGhlIGRhdGEgaW4gdGVybXMgb2YgdGhlIGFwcGxpY2FibGUgZGF0ZSByYW5nZSBmb3Igc3BlY2lmaWMgZWxlbWVudHMuXHJcbiAgICovXHJcbiAgcHVibGljIGRhdGVGaWx0ZXI6IGZoaXIuRGF0YVJlcXVpcmVtZW50RGF0ZUZpbHRlcltdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIERhdGFSZXF1aXJlbWVudCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPERhdGFSZXF1aXJlbWVudEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWyd0eXBlJ10pIHsgdGhpcy50eXBlID0gbmV3IGZoaXIuRmhpckNvZGUoe3ZhbHVlOiBzb3VyY2UudHlwZX0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy50eXBlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3R5cGUnXSkge1xyXG4gICAgICBpZiAodGhpcy50eXBlKSB7IHRoaXMudHlwZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl90eXBlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudHlwZSA9IG5ldyBmaGlyLkZoaXJDb2RlKHNvdXJjZS5fdHlwZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGVBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3Byb2ZpbGUnXSkgeyB0aGlzLnByb2ZpbGUgPSBzb3VyY2UucHJvZmlsZS5tYXAoKHgpID0+IG5ldyBmaGlyLkZoaXJVcmkoe3ZhbHVlOiB4fSkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wcm9maWxlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ19wcm9maWxlJ10pIHtcclxuICAgICAgc291cmNlLl9wcm9maWxlLmZvckVhY2goKHgsaSkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLnByb2ZpbGUubGVuZ3RoID49IGkpIHsgaWYgKHgpIHsgdGhpcy5wcm9maWxlW2ldLmFkZEV4dGVuZGVkUHJvcGVydGllcyh4KTsgfSB9XHJcbiAgICAgICAgZWxzZSB7IGlmICh4KSB7IHRoaXMucHJvZmlsZS5wdXNoKG5ldyBmaGlyLkZoaXJVcmkoeCBhcyBQYXJ0aWFsPGZoaXIuRmhpclVyaUFyZ3M+KSk7IH0gfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ211c3RTdXBwb3J0J10pIHsgdGhpcy5tdXN0U3VwcG9ydCA9IHNvdXJjZS5tdXN0U3VwcG9ydC5tYXAoKHgpID0+IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiB4fSkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5tdXN0U3VwcG9ydCA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydfbXVzdFN1cHBvcnQnXSkge1xyXG4gICAgICBzb3VyY2UuX211c3RTdXBwb3J0LmZvckVhY2goKHgsaSkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLm11c3RTdXBwb3J0Lmxlbmd0aCA+PSBpKSB7IGlmICh4KSB7IHRoaXMubXVzdFN1cHBvcnRbaV0uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHgpOyB9IH1cclxuICAgICAgICBlbHNlIHsgaWYgKHgpIHsgdGhpcy5tdXN0U3VwcG9ydC5wdXNoKG5ldyBmaGlyLkZoaXJTdHJpbmcoeCBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KSk7IH0gfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2NvZGVGaWx0ZXInXSkgeyB0aGlzLmNvZGVGaWx0ZXIgPSBzb3VyY2UuY29kZUZpbHRlci5tYXAoKHgpID0+IG5ldyBmaGlyLkRhdGFSZXF1aXJlbWVudENvZGVGaWx0ZXIoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb2RlRmlsdGVyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2RhdGVGaWx0ZXInXSkgeyB0aGlzLmRhdGVGaWx0ZXIgPSBzb3VyY2UuZGF0ZUZpbHRlci5tYXAoKHgpID0+IG5ldyBmaGlyLkRhdGFSZXF1aXJlbWVudERhdGVGaWx0ZXIoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5kYXRlRmlsdGVyID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdEYXRhUmVxdWlyZW1lbnQnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTVigndHlwZScsZXhwLCdBbGxUeXBlcycsQWxsVHlwZXNWc1ZhbGlkYXRpb24sJ3InKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgncHJvZmlsZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnbXVzdFN1cHBvcnQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2NvZGVGaWx0ZXInLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2RhdGVGaWx0ZXInLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuIl19