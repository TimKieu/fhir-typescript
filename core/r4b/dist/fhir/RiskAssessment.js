// <auto-generated/>
// Contents of: hl7.fhir.r4b.core version: 4.3.0
// Minimum TypeScript Version: 3.7
// FHIR Resource: RiskAssessment
import * as fhir from '../fhir.js';
// @ts-ignore
import { ObservationStatusVsValidation } from '../fhirValueSets/ObservationStatusVsValidation.js';
/**
 * Multiple repetitions can be used to identify the same type of outcome in different timeframes as well as different types of outcomes.
 */
export class RiskAssessmentPrediction extends fhir.BackboneElement {
    /**
     * Default constructor for RiskAssessmentPrediction - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['outcome']) {
            this.outcome = new fhir.CodeableConcept(source.outcome, options);
        }
        if (source['probability']) {
            this.probability = source.probability;
        }
        else if (source['probabilityDecimal'] !== undefined) {
            this.probability = new fhir.FhirDecimal({ value: source.probabilityDecimal }, options);
        }
        else if (source['probabilityRange']) {
            this.probability = new fhir.Range(source.probabilityRange, options);
        }
        if (source['qualitativeRisk']) {
            this.qualitativeRisk = new fhir.CodeableConcept(source.qualitativeRisk, options);
        }
        if (source['relativeRisk'] !== undefined) {
            this.relativeRisk = new fhir.FhirDecimal({ value: source.relativeRisk }, options);
        }
        if (source['_relativeRisk']) {
            if (this.relativeRisk) {
                this.relativeRisk.addExtendedProperties(source._relativeRisk);
            }
            else {
                this.relativeRisk = new fhir.FhirDecimal(source._relativeRisk, options);
            }
        }
        if (source['when']) {
            this.when = source.when;
        }
        else if (source['whenPeriod']) {
            this.when = new fhir.Period(source.whenPeriod, options);
        }
        else if (source['whenRange']) {
            this.when = new fhir.Range(source.whenRange, options);
        }
        if (source['rationale'] !== undefined) {
            this.rationale = new fhir.FhirString({ value: source.rationale }, options);
        }
        if (source['_rationale']) {
            if (this.rationale) {
                this.rationale.addExtendedProperties(source._rationale);
            }
            else {
                this.rationale = new fhir.FhirString(source._rationale, options);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'RiskAssessment.prediction';
        }
        iss.push(...this.vOS('outcome', exp));
        iss.push(...this.vOS('probability', exp));
        iss.push(...this.vOS('qualitativeRisk', exp));
        iss.push(...this.vOS('relativeRisk', exp));
        iss.push(...this.vOS('when', exp));
        iss.push(...this.vOS('rationale', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
RiskAssessmentPrediction._fts_dataType = 'RiskAssessmentPrediction';
/**
 * Internal flag to properly serialize choice-type element RiskAssessment.prediction.probability[x]
 */
RiskAssessmentPrediction._fts_probabilityIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element RiskAssessment.prediction.when[x]
 */
RiskAssessmentPrediction._fts_whenIsChoice = true;
/**
 * An assessment of the likely outcome(s) for a patient or other subject as well as the likelihood of each outcome.
 */
export class RiskAssessment extends fhir.DomainResource {
    /**
     * Default constructor for RiskAssessment - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'RiskAssessment';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x, options));
        }
        else {
            this.identifier = [];
        }
        if (source['basedOn']) {
            this.basedOn = new fhir.Reference(source.basedOn, options);
        }
        if (source['parent']) {
            this.parent = new fhir.Reference(source.parent, options);
        }
        if (source['status'] !== undefined) {
            this.status = new fhir.FhirCode({ value: source.status }, options);
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status, options);
            }
        }
        if (source['method']) {
            this.method = new fhir.CodeableConcept(source.method, options);
        }
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code, options);
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject, options);
        }
        else {
            this.subject = null;
        }
        if (source['encounter']) {
            this.encounter = new fhir.Reference(source.encounter, options);
        }
        if (source['occurrence']) {
            this.occurrence = source.occurrence;
        }
        else if (source['occurrenceDateTime'] !== undefined) {
            this.occurrence = new fhir.FhirDateTime({ value: source.occurrenceDateTime }, options);
        }
        else if (source['occurrencePeriod']) {
            this.occurrence = new fhir.Period(source.occurrencePeriod, options);
        }
        if (source['condition']) {
            this.condition = new fhir.Reference(source.condition, options);
        }
        if (source['performer']) {
            this.performer = new fhir.Reference(source.performer, options);
        }
        if (source['reasonCode']) {
            this.reasonCode = source.reasonCode.map((x) => new fhir.CodeableConcept(x, options));
        }
        else {
            this.reasonCode = [];
        }
        if (source['reasonReference']) {
            this.reasonReference = source.reasonReference.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.reasonReference = [];
        }
        if (source['basis']) {
            this.basis = source.basis.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.basis = [];
        }
        if (source['prediction']) {
            this.prediction = source.prediction.map((x) => new fhir.RiskAssessmentPrediction(x, options));
        }
        else {
            this.prediction = [];
        }
        if (source['mitigation'] !== undefined) {
            this.mitigation = new fhir.FhirString({ value: source.mitigation }, options);
        }
        if (source['_mitigation']) {
            if (this.mitigation) {
                this.mitigation.addExtendedProperties(source._mitigation);
            }
            else {
                this.mitigation = new fhir.FhirString(source._mitigation, options);
            }
        }
        if (source['note']) {
            this.note = source.note.map((x) => new fhir.Annotation(x, options));
        }
        else {
            this.note = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'RiskAssessment';
        }
        iss.push(...this.vOA('identifier', exp));
        iss.push(...this.vOS('basedOn', exp));
        iss.push(...this.vOS('parent', exp));
        iss.push(...this.vRSV('status', exp, 'ObservationStatus', ObservationStatusVsValidation, 'r'));
        iss.push(...this.vOS('method', exp));
        iss.push(...this.vOS('code', exp));
        iss.push(...this.vRS('subject', exp));
        iss.push(...this.vOS('encounter', exp));
        iss.push(...this.vOS('occurrence', exp));
        iss.push(...this.vOS('condition', exp));
        iss.push(...this.vOS('performer', exp));
        iss.push(...this.vOA('reasonCode', exp));
        iss.push(...this.vOA('reasonReference', exp));
        iss.push(...this.vOA('basis', exp));
        iss.push(...this.vOA('prediction', exp));
        iss.push(...this.vOS('mitigation', exp));
        iss.push(...this.vOA('note', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
RiskAssessment._fts_dataType = 'RiskAssessment';
/**
 * Internal flag to properly serialize choice-type element RiskAssessment.occurrence[x]
 */
RiskAssessment._fts_occurrenceIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmlza0Fzc2Vzc21lbnQuanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL1Jpc2tBc3Nlc3NtZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQixnREFBZ0Q7QUFDaEQsa0NBQWtDO0FBQ2xDLGdDQUFnQztBQUVoQyxPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQVFuQyxhQUFhO0FBQ2IsT0FBTyxFQUFFLDZCQUE2QixFQUFFLE1BQU0sbURBQW1ELENBQUM7QUF1RGxHOztHQUVHO0FBQ0gsTUFBTSxPQUFPLHdCQUF5QixTQUFRLElBQUksQ0FBQyxlQUFlO0lBcUNoRTs7T0FFRztJQUNILFlBQVksU0FBK0MsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDckcsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FBRTtRQUM1RixJQUFJLE1BQU0sQ0FBQyxhQUFhLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQztTQUFFO2FBQ2hFLElBQUksTUFBTSxDQUFDLG9CQUFvQixDQUFDLEtBQUssU0FBUyxFQUFFO1lBQUUsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLGtCQUFrQixFQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FBRTthQUN6SSxJQUFJLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLGdCQUFnQixFQUFFLE9BQU8sQ0FB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QyxDQUFDO1FBQ25DLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3hDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3hDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ2xDLE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQzs7QUFsSkQ7O0dBRUc7QUFDNkIsNEJBQWEsR0FBVSxnQkFBZ0IsQ0FBQztBQXlDeEU7O0dBRUc7QUFDdUIsc0NBQXVCLEdBQVEsSUFBSSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0Yi5jb3JlIHZlcnNpb246IDQuMy4wXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogUmlza0Fzc2Vzc21lbnRcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFJpc2tQcm9iYWJpbGl0eUNvZGVzLCAgUmlza1Byb2JhYmlsaXR5Q29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1Jpc2tQcm9iYWJpbGl0eUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBSaXNrUHJvYmFiaWxpdHlWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1Jpc2tQcm9iYWJpbGl0eVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgT2JzZXJ2YXRpb25TdGF0dXNDb2RlcywgIE9ic2VydmF0aW9uU3RhdHVzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL09ic2VydmF0aW9uU3RhdHVzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE9ic2VydmF0aW9uU3RhdHVzVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9PYnNlcnZhdGlvblN0YXR1c1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBSaXNrQXNzZXNzbWVudFByZWRpY3Rpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmlza0Fzc2Vzc21lbnRQcmVkaWN0aW9uQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogT25lIG9mIHRoZSBwb3RlbnRpYWwgb3V0Y29tZXMgZm9yIHRoZSBwYXRpZW50IChlLmcuIHJlbWlzc2lvbiwgZGVhdGgsICBhIHBhcnRpY3VsYXIgY29uZGl0aW9uKS5cclxuICAgKi9cclxuICBvdXRjb21lPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiByYW5nZSBpcyB1c2VkLCBpdCByZXByZXNlbnRzIHRoZSBsb3dlciBhbmQgdXBwZXIgYm91bmRzIG9mIGNlcnRhaW50eTsgZS5nLiA0MC02MCUgIERlY2ltYWwgdmFsdWVzIGFyZSBleHByZXNzZWQgYXMgcGVyY2VudGFnZXMgYXMgd2VsbCAobWF4ID0gMTAwKS5cclxuICAgKi9cclxuICBwcm9iYWJpbGl0eT86IGZoaXIuRmhpckRlY2ltYWx8Zmhpci5SYW5nZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgcmFuZ2UgaXMgdXNlZCwgaXQgcmVwcmVzZW50cyB0aGUgbG93ZXIgYW5kIHVwcGVyIGJvdW5kcyBvZiBjZXJ0YWludHk7IGUuZy4gNDAtNjAlICBEZWNpbWFsIHZhbHVlcyBhcmUgZXhwcmVzc2VkIGFzIHBlcmNlbnRhZ2VzIGFzIHdlbGwgKG1heCA9IDEwMCkuXHJcbiAgICovXHJcbiAgcHJvYmFiaWxpdHlEZWNpbWFsPzogZmhpci5GaGlyRGVjaW1hbHxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIHJhbmdlIGlzIHVzZWQsIGl0IHJlcHJlc2VudHMgdGhlIGxvd2VyIGFuZCB1cHBlciBib3VuZHMgb2YgY2VydGFpbnR5OyBlLmcuIDQwLTYwJSAgRGVjaW1hbCB2YWx1ZXMgYXJlIGV4cHJlc3NlZCBhcyBwZXJjZW50YWdlcyBhcyB3ZWxsIChtYXggPSAxMDApLlxyXG4gICAqL1xyXG4gIHByb2JhYmlsaXR5UmFuZ2U/OiBmaGlyLlJhbmdlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIGhvdyBsaWtlbHkgdGhlIG91dGNvbWUgaXMgKGluIHRoZSBzcGVjaWZpZWQgdGltZWZyYW1lKSwgZXhwcmVzc2VkIGFzIGEgcXVhbGl0YXRpdmUgdmFsdWUgKGUuZy4gbG93LCBtZWRpdW0sIG9yIGhpZ2gpLlxyXG4gICAqL1xyXG4gIHF1YWxpdGF0aXZlUmlzaz86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHRoZSByaXNrIGZvciB0aGlzIHBhcnRpY3VsYXIgc3ViamVjdCAod2l0aCB0aGVpciBzcGVjaWZpYyBjaGFyYWN0ZXJpc3RpY3MpIGRpdmlkZWQgYnkgdGhlIHJpc2sgb2YgdGhlIHBvcHVsYXRpb24gaW4gZ2VuZXJhbC4gIChOdW1iZXJzIGdyZWF0ZXIgdGhhbiAxID0gaGlnaGVyIHJpc2sgdGhhbiB0aGUgcG9wdWxhdGlvbiwgbnVtYmVycyBsZXNzIHRoYW4gMSA9IGxvd2VyIHJpc2suKS5cclxuICAgKi9cclxuICByZWxhdGl2ZVJpc2s/OiBmaGlyLkZoaXJEZWNpbWFsfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFJpc2tBc3Nlc3NtZW50LnByZWRpY3Rpb24ucmVsYXRpdmVSaXNrXHJcbiAgICovXHJcbiAgX3JlbGF0aXZlUmlzaz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogSWYgbm90IHNwZWNpZmllZCwgdGhlIHJpc2sgYXBwbGllcyBcIm92ZXIgdGhlIHN1YmplY3QncyBsaWZlc3BhblwiLlxyXG4gICAqL1xyXG4gIHdoZW4/OiBmaGlyLlBlcmlvZHxmaGlyLlJhbmdlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgcmlzayBhcHBsaWVzIFwib3ZlciB0aGUgc3ViamVjdCdzIGxpZmVzcGFuXCIuXHJcbiAgICovXHJcbiAgd2hlblBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgbm90IHNwZWNpZmllZCwgdGhlIHJpc2sgYXBwbGllcyBcIm92ZXIgdGhlIHN1YmplY3QncyBsaWZlc3BhblwiLlxyXG4gICAqL1xyXG4gIHdoZW5SYW5nZT86IGZoaXIuUmFuZ2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBZGRpdGlvbmFsIGluZm9ybWF0aW9uIGV4cGxhaW5pbmcgdGhlIGJhc2lzIGZvciB0aGUgcHJlZGljdGlvbi5cclxuICAgKi9cclxuICByYXRpb25hbGU/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogUmlza0Fzc2Vzc21lbnQucHJlZGljdGlvbi5yYXRpb25hbGVcclxuICAgKi9cclxuICBfcmF0aW9uYWxlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIE11bHRpcGxlIHJlcGV0aXRpb25zIGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHRoZSBzYW1lIHR5cGUgb2Ygb3V0Y29tZSBpbiBkaWZmZXJlbnQgdGltZWZyYW1lcyBhcyB3ZWxsIGFzIGRpZmZlcmVudCB0eXBlcyBvZiBvdXRjb21lcy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBSaXNrQXNzZXNzbWVudFByZWRpY3Rpb24gZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdSaXNrQXNzZXNzbWVudFByZWRpY3Rpb24nO1xyXG4gIC8qKlxyXG4gICAqIE9uZSBvZiB0aGUgcG90ZW50aWFsIG91dGNvbWVzIGZvciB0aGUgcGF0aWVudCAoZS5nLiByZW1pc3Npb24sIGRlYXRoLCAgYSBwYXJ0aWN1bGFyIGNvbmRpdGlvbikuXHJcbiAgICovXHJcbiAgcHVibGljIG91dGNvbWU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgcmFuZ2UgaXMgdXNlZCwgaXQgcmVwcmVzZW50cyB0aGUgbG93ZXIgYW5kIHVwcGVyIGJvdW5kcyBvZiBjZXJ0YWludHk7IGUuZy4gNDAtNjAlICBEZWNpbWFsIHZhbHVlcyBhcmUgZXhwcmVzc2VkIGFzIHBlcmNlbnRhZ2VzIGFzIHdlbGwgKG1heCA9IDEwMCkuXHJcbiAgICovXHJcbiAgcHVibGljIHByb2JhYmlsaXR5PzogKGZoaXIuRmhpckRlY2ltYWx8Zmhpci5SYW5nZSl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgUmlza0Fzc2Vzc21lbnQucHJlZGljdGlvbi5wcm9iYWJpbGl0eVt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c19wcm9iYWJpbGl0eUlzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyBob3cgbGlrZWx5IHRoZSBvdXRjb21lIGlzIChpbiB0aGUgc3BlY2lmaWVkIHRpbWVmcmFtZSksIGV4cHJlc3NlZCBhcyBhIHF1YWxpdGF0aXZlIHZhbHVlIChlLmcuIGxvdywgbWVkaXVtLCBvciBoaWdoKS5cclxuICAgKi9cclxuICBwdWJsaWMgcXVhbGl0YXRpdmVSaXNrPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB0aGUgcmlzayBmb3IgdGhpcyBwYXJ0aWN1bGFyIHN1YmplY3QgKHdpdGggdGhlaXIgc3BlY2lmaWMgY2hhcmFjdGVyaXN0aWNzKSBkaXZpZGVkIGJ5IHRoZSByaXNrIG9mIHRoZSBwb3B1bGF0aW9uIGluIGdlbmVyYWwuICAoTnVtYmVycyBncmVhdGVyIHRoYW4gMSA9IGhpZ2hlciByaXNrIHRoYW4gdGhlIHBvcHVsYXRpb24sIG51bWJlcnMgbGVzcyB0aGFuIDEgPSBsb3dlciByaXNrLikuXHJcbiAgICovXHJcbiAgcHVibGljIHJlbGF0aXZlUmlzaz86IGZoaXIuRmhpckRlY2ltYWx8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIG5vdCBzcGVjaWZpZWQsIHRoZSByaXNrIGFwcGxpZXMgXCJvdmVyIHRoZSBzdWJqZWN0J3MgbGlmZXNwYW5cIi5cclxuICAgKi9cclxuICBwdWJsaWMgd2hlbj86IChmaGlyLlBlcmlvZHxmaGlyLlJhbmdlKXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBSaXNrQXNzZXNzbWVudC5wcmVkaWN0aW9uLndoZW5beF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfd2hlbklzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIEFkZGl0aW9uYWwgaW5mb3JtYXRpb24gZXhwbGFpbmluZyB0aGUgYmFzaXMgZm9yIHRoZSBwcmVkaWN0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByYXRpb25hbGU/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFJpc2tBc3Nlc3NtZW50UHJlZGljdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFJpc2tBc3Nlc3NtZW50UHJlZGljdGlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydvdXRjb21lJ10pIHsgdGhpcy5vdXRjb21lID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5vdXRjb21lLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJvYmFiaWxpdHknXSkgeyB0aGlzLnByb2JhYmlsaXR5ID0gc291cmNlLnByb2JhYmlsaXR5OyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3Byb2JhYmlsaXR5RGVjaW1hbCddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5wcm9iYWJpbGl0eSA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHt2YWx1ZTogc291cmNlLnByb2JhYmlsaXR5RGVjaW1hbH0sIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3Byb2JhYmlsaXR5UmFuZ2UnXSkgeyB0aGlzLnByb2JhYmlsaXR5ID0gbmV3IGZoaXIuUmFuZ2Uoc291cmNlLnByb2JhYmlsaXR5UmFuZ2UsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydxdWFsaXRhdGl2ZVJpc2snXSkgeyB0aGlzLnF1YWxpdGF0aXZlUmlzayA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UucXVhbGl0YXRpdmVSaXNrLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVsYXRpdmVSaXNrJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnJlbGF0aXZlUmlzayA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHt2YWx1ZTogc291cmNlLnJlbGF0aXZlUmlza30sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfcmVsYXRpdmVSaXNrJ10pIHtcclxuICAgICAgaWYgKHRoaXMucmVsYXRpdmVSaXNrKSB7IHRoaXMucmVsYXRpdmVSaXNrLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3JlbGF0aXZlUmlzayEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnJlbGF0aXZlUmlzayA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHNvdXJjZS5fcmVsYXRpdmVSaXNrIGFzIFBhcnRpYWw8Zmhpci5GaGlyRGVjaW1hbEFyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnd2hlbiddKSB7IHRoaXMud2hlbiA9IHNvdXJjZS53aGVuOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3doZW5QZXJpb2QnXSkgeyB0aGlzLndoZW4gPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLndoZW5QZXJpb2QsIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3doZW5SYW5nZSddKSB7IHRoaXMud2hlbiA9IG5ldyBmaGlyLlJhbmdlKHNvdXJjZS53aGVuUmFuZ2UsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydyYXRpb25hbGUnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMucmF0aW9uYWxlID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5yYXRpb25hbGV9LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3JhdGlvbmFsZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnJhdGlvbmFsZSkgeyB0aGlzLnJhdGlvbmFsZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9yYXRpb25hbGUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5yYXRpb25hbGUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fcmF0aW9uYWxlIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnUmlza0Fzc2Vzc21lbnQucHJlZGljdGlvbicgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ291dGNvbWUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3Byb2JhYmlsaXR5JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdxdWFsaXRhdGl2ZVJpc2snLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3JlbGF0aXZlUmlzaycsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnd2hlbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygncmF0aW9uYWxlJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBSaXNrQXNzZXNzbWVudCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBSaXNrQXNzZXNzbWVudEFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIlJpc2tBc3Nlc3NtZW50XCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEJ1c2luZXNzIGlkZW50aWZpZXIgYXNzaWduZWQgdG8gdGhlIHJpc2sgYXNzZXNzbWVudC5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHJlZmVyZW5jZSB0byB0aGUgcmVxdWVzdCB0aGF0IGlzIGZ1bGZpbGxlZCBieSB0aGlzIHJpc2sgYXNzZXNzbWVudC5cclxuICAgKi9cclxuICBiYXNlZE9uPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHJlZmVyZW5jZSB0byBhIHJlc291cmNlIHRoYXQgdGhpcyByaXNrIGFzc2Vzc21lbnQgaXMgcGFydCBvZiwgc3VjaCBhcyBhIFByb2NlZHVyZS5cclxuICAgKi9cclxuICBwYXJlbnQ/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzdGF0dXMgb2YgdGhlIFJpc2tBc3Nlc3NtZW50LCB1c2luZyB0aGUgc2FtZSBzdGF0dXNlcyBhcyBhbiBPYnNlcnZhdGlvbi5cclxuICAgKi9cclxuICBzdGF0dXM6IGZoaXIuRmhpckNvZGU8T2JzZXJ2YXRpb25TdGF0dXNDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogUmlza0Fzc2Vzc21lbnQuc3RhdHVzXHJcbiAgICovXHJcbiAgX3N0YXR1cz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGFsZ29yaXRobSwgcHJvY2VzcyBvciBtZWNoYW5pc20gdXNlZCB0byBldmFsdWF0ZSB0aGUgcmlzay5cclxuICAgKi9cclxuICBtZXRob2Q/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0eXBlIG9mIHRoZSByaXNrIGFzc2Vzc21lbnQgcGVyZm9ybWVkLlxyXG4gICAqL1xyXG4gIGNvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXRpZW50IG9yIGdyb3VwIHRoZSByaXNrIGFzc2Vzc21lbnQgYXBwbGllcyB0by5cclxuICAgKi9cclxuICBzdWJqZWN0OiBmaGlyLlJlZmVyZW5jZUFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgZW5jb3VudGVyIHdoZXJlIHRoZSBhc3Nlc3NtZW50IHdhcyBwZXJmb3JtZWQuXHJcbiAgICovXHJcbiAgZW5jb3VudGVyPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSAoYW5kIHBvc3NpYmx5IHRpbWUpIHRoZSByaXNrIGFzc2Vzc21lbnQgd2FzIHBlcmZvcm1lZC5cclxuICAgKi9cclxuICBvY2N1cnJlbmNlPzogZmhpci5GaGlyRGF0ZVRpbWV8Zmhpci5QZXJpb2R8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRlIChhbmQgcG9zc2libHkgdGltZSkgdGhlIHJpc2sgYXNzZXNzbWVudCB3YXMgcGVyZm9ybWVkLlxyXG4gICAqL1xyXG4gIG9jY3VycmVuY2VEYXRlVGltZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgKGFuZCBwb3NzaWJseSB0aW1lKSB0aGUgcmlzayBhc3Nlc3NtZW50IHdhcyBwZXJmb3JtZWQuXHJcbiAgICovXHJcbiAgb2NjdXJyZW5jZVBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRm9yIGFzc2Vzc21lbnRzIG9yIHByb2dub3NpcyBzcGVjaWZpYyB0byBhIHBhcnRpY3VsYXIgY29uZGl0aW9uLCBpbmRpY2F0ZXMgdGhlIGNvbmRpdGlvbiBiZWluZyBhc3Nlc3NlZC5cclxuICAgKi9cclxuICBjb25kaXRpb24/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwcm92aWRlciBvciBzb2Z0d2FyZSBhcHBsaWNhdGlvbiB0aGF0IHBlcmZvcm1lZCB0aGUgYXNzZXNzbWVudC5cclxuICAgKi9cclxuICBwZXJmb3JtZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZWFzb24gdGhlIHJpc2sgYXNzZXNzbWVudCB3YXMgcGVyZm9ybWVkLlxyXG4gICAqL1xyXG4gIHJlYXNvbkNvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2VzIHN1cHBvcnRpbmcgdGhlIHJlYXNvbiB0aGUgcmlzayBhc3Nlc3NtZW50IHdhcyBwZXJmb3JtZWQuXHJcbiAgICovXHJcbiAgcmVhc29uUmVmZXJlbmNlPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB0aGUgc291cmNlIGRhdGEgY29uc2lkZXJlZCBhcyBwYXJ0IG9mIHRoZSBhc3Nlc3NtZW50IChmb3IgZXhhbXBsZSwgRmFtaWx5SGlzdG9yeSwgT2JzZXJ2YXRpb25zLCBQcm9jZWR1cmVzLCBDb25kaXRpb25zLCBldGMuKS5cclxuICAgKi9cclxuICBiYXNpcz86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBNdWx0aXBsZSByZXBldGl0aW9ucyBjYW4gYmUgdXNlZCB0byBpZGVudGlmeSB0aGUgc2FtZSB0eXBlIG9mIG91dGNvbWUgaW4gZGlmZmVyZW50IHRpbWVmcmFtZXMgYXMgd2VsbCBhcyBkaWZmZXJlbnQgdHlwZXMgb2Ygb3V0Y29tZXMuXHJcbiAgICovXHJcbiAgcHJlZGljdGlvbj86IGZoaXIuUmlza0Fzc2Vzc21lbnRQcmVkaWN0aW9uQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGRlc2NyaXB0aW9uIG9mIHRoZSBzdGVwcyB0aGF0IG1pZ2h0IGJlIHRha2VuIHRvIHJlZHVjZSB0aGUgaWRlbnRpZmllZCByaXNrKHMpLlxyXG4gICAqL1xyXG4gIG1pdGlnYXRpb24/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogUmlza0Fzc2Vzc21lbnQubWl0aWdhdGlvblxyXG4gICAqL1xyXG4gIF9taXRpZ2F0aW9uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBBZGRpdGlvbmFsIGNvbW1lbnRzIGFib3V0IHRoZSByaXNrIGFzc2Vzc21lbnQuXHJcbiAgICovXHJcbiAgbm90ZT86IGZoaXIuQW5ub3RhdGlvbkFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBbiBhc3Nlc3NtZW50IG9mIHRoZSBsaWtlbHkgb3V0Y29tZShzKSBmb3IgYSBwYXRpZW50IG9yIG90aGVyIHN1YmplY3QgYXMgd2VsbCBhcyB0aGUgbGlrZWxpaG9vZCBvZiBlYWNoIG91dGNvbWUuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUmlza0Fzc2Vzc21lbnQgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1Jpc2tBc3Nlc3NtZW50JztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIlJpc2tBc3Nlc3NtZW50XCI7XHJcbiAgLyoqXHJcbiAgICogQnVzaW5lc3MgaWRlbnRpZmllciBhc3NpZ25lZCB0byB0aGUgcmlzayBhc3Nlc3NtZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyOiBmaGlyLklkZW50aWZpZXJbXTtcclxuICAvKipcclxuICAgKiBBIHJlZmVyZW5jZSB0byB0aGUgcmVxdWVzdCB0aGF0IGlzIGZ1bGZpbGxlZCBieSB0aGlzIHJpc2sgYXNzZXNzbWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgYmFzZWRPbj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHJlZmVyZW5jZSB0byBhIHJlc291cmNlIHRoYXQgdGhpcyByaXNrIGFzc2Vzc21lbnQgaXMgcGFydCBvZiwgc3VjaCBhcyBhIFByb2NlZHVyZS5cclxuICAgKi9cclxuICBwdWJsaWMgcGFyZW50PzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzdGF0dXMgb2YgdGhlIFJpc2tBc3Nlc3NtZW50LCB1c2luZyB0aGUgc2FtZSBzdGF0dXNlcyBhcyBhbiBPYnNlcnZhdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPE9ic2VydmF0aW9uU3RhdHVzQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGFsZ29yaXRobSwgcHJvY2VzcyBvciBtZWNoYW5pc20gdXNlZCB0byBldmFsdWF0ZSB0aGUgcmlzay5cclxuICAgKi9cclxuICBwdWJsaWMgbWV0aG9kPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0eXBlIG9mIHRoZSByaXNrIGFzc2Vzc21lbnQgcGVyZm9ybWVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb2RlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXRpZW50IG9yIGdyb3VwIHRoZSByaXNrIGFzc2Vzc21lbnQgYXBwbGllcyB0by5cclxuICAgKi9cclxuICBwdWJsaWMgc3ViamVjdDogZmhpci5SZWZlcmVuY2V8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgZW5jb3VudGVyIHdoZXJlIHRoZSBhc3Nlc3NtZW50IHdhcyBwZXJmb3JtZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGVuY291bnRlcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSAoYW5kIHBvc3NpYmx5IHRpbWUpIHRoZSByaXNrIGFzc2Vzc21lbnQgd2FzIHBlcmZvcm1lZC5cclxuICAgKi9cclxuICBwdWJsaWMgb2NjdXJyZW5jZT86IChmaGlyLkZoaXJEYXRlVGltZXxmaGlyLlBlcmlvZCl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgUmlza0Fzc2Vzc21lbnQub2NjdXJyZW5jZVt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c19vY2N1cnJlbmNlSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogRm9yIGFzc2Vzc21lbnRzIG9yIHByb2dub3NpcyBzcGVjaWZpYyB0byBhIHBhcnRpY3VsYXIgY29uZGl0aW9uLCBpbmRpY2F0ZXMgdGhlIGNvbmRpdGlvbiBiZWluZyBhc3Nlc3NlZC5cclxuICAgKi9cclxuICBwdWJsaWMgY29uZGl0aW9uPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwcm92aWRlciBvciBzb2Z0d2FyZSBhcHBsaWNhdGlvbiB0aGF0IHBlcmZvcm1lZCB0aGUgYXNzZXNzbWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgcGVyZm9ybWVyPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZWFzb24gdGhlIHJpc2sgYXNzZXNzbWVudCB3YXMgcGVyZm9ybWVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWFzb25Db2RlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlcyBzdXBwb3J0aW5nIHRoZSByZWFzb24gdGhlIHJpc2sgYXNzZXNzbWVudCB3YXMgcGVyZm9ybWVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWFzb25SZWZlcmVuY2U6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHRoZSBzb3VyY2UgZGF0YSBjb25zaWRlcmVkIGFzIHBhcnQgb2YgdGhlIGFzc2Vzc21lbnQgKGZvciBleGFtcGxlLCBGYW1pbHlIaXN0b3J5LCBPYnNlcnZhdGlvbnMsIFByb2NlZHVyZXMsIENvbmRpdGlvbnMsIGV0Yy4pLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBiYXNpczogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBNdWx0aXBsZSByZXBldGl0aW9ucyBjYW4gYmUgdXNlZCB0byBpZGVudGlmeSB0aGUgc2FtZSB0eXBlIG9mIG91dGNvbWUgaW4gZGlmZmVyZW50IHRpbWVmcmFtZXMgYXMgd2VsbCBhcyBkaWZmZXJlbnQgdHlwZXMgb2Ygb3V0Y29tZXMuXHJcbiAgICovXHJcbiAgcHVibGljIHByZWRpY3Rpb246IGZoaXIuUmlza0Fzc2Vzc21lbnRQcmVkaWN0aW9uW107XHJcbiAgLyoqXHJcbiAgICogQSBkZXNjcmlwdGlvbiBvZiB0aGUgc3RlcHMgdGhhdCBtaWdodCBiZSB0YWtlbiB0byByZWR1Y2UgdGhlIGlkZW50aWZpZWQgcmlzayhzKS5cclxuICAgKi9cclxuICBwdWJsaWMgbWl0aWdhdGlvbj86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWRkaXRpb25hbCBjb21tZW50cyBhYm91dCB0aGUgcmlzayBhc3Nlc3NtZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBub3RlOiBmaGlyLkFubm90YXRpb25bXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBSaXNrQXNzZXNzbWVudCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFJpc2tBc3Nlc3NtZW50QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ1Jpc2tBc3Nlc3NtZW50JztcclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBzb3VyY2UuaWRlbnRpZmllci5tYXAoKHgpID0+IG5ldyBmaGlyLklkZW50aWZpZXIoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pZGVudGlmaWVyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2Jhc2VkT24nXSkgeyB0aGlzLmJhc2VkT24gPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmJhc2VkT24sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydwYXJlbnQnXSkgeyB0aGlzLnBhcmVudCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UucGFyZW50LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RhdHVzJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPE9ic2VydmF0aW9uU3RhdHVzQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnN0YXR1c30sIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfc3RhdHVzJ10pIHtcclxuICAgICAgaWYgKHRoaXMuc3RhdHVzKSB7IHRoaXMuc3RhdHVzLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3N0YXR1cyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPE9ic2VydmF0aW9uU3RhdHVzQ29kZVR5cGU+KHNvdXJjZS5fc3RhdHVzIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydtZXRob2QnXSkgeyB0aGlzLm1ldGhvZCA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UubWV0aG9kLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY29kZSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N1YmplY3QnXSkgeyB0aGlzLnN1YmplY3QgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnN1YmplY3QsIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdWJqZWN0ID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZW5jb3VudGVyJ10pIHsgdGhpcy5lbmNvdW50ZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmVuY291bnRlciwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ29jY3VycmVuY2UnXSkgeyB0aGlzLm9jY3VycmVuY2UgPSBzb3VyY2Uub2NjdXJyZW5jZTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydvY2N1cnJlbmNlRGF0ZVRpbWUnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMub2NjdXJyZW5jZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5vY2N1cnJlbmNlRGF0ZVRpbWV9LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydvY2N1cnJlbmNlUGVyaW9kJ10pIHsgdGhpcy5vY2N1cnJlbmNlID0gbmV3IGZoaXIuUGVyaW9kKHNvdXJjZS5vY2N1cnJlbmNlUGVyaW9kLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29uZGl0aW9uJ10pIHsgdGhpcy5jb25kaXRpb24gPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmNvbmRpdGlvbiwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3BlcmZvcm1lciddKSB7IHRoaXMucGVyZm9ybWVyID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5wZXJmb3JtZXIsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydyZWFzb25Db2RlJ10pIHsgdGhpcy5yZWFzb25Db2RlID0gc291cmNlLnJlYXNvbkNvZGUubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZWFzb25Db2RlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3JlYXNvblJlZmVyZW5jZSddKSB7IHRoaXMucmVhc29uUmVmZXJlbmNlID0gc291cmNlLnJlYXNvblJlZmVyZW5jZS5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnJlYXNvblJlZmVyZW5jZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydiYXNpcyddKSB7IHRoaXMuYmFzaXMgPSBzb3VyY2UuYmFzaXMubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5iYXNpcyA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwcmVkaWN0aW9uJ10pIHsgdGhpcy5wcmVkaWN0aW9uID0gc291cmNlLnByZWRpY3Rpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5SaXNrQXNzZXNzbWVudFByZWRpY3Rpb24oeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wcmVkaWN0aW9uID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ21pdGlnYXRpb24nXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMubWl0aWdhdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UubWl0aWdhdGlvbn0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfbWl0aWdhdGlvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLm1pdGlnYXRpb24pIHsgdGhpcy5taXRpZ2F0aW9uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX21pdGlnYXRpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5taXRpZ2F0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX21pdGlnYXRpb24gYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ25vdGUnXSkgeyB0aGlzLm5vdGUgPSBzb3VyY2Uubm90ZS5tYXAoKHgpID0+IG5ldyBmaGlyLkFubm90YXRpb24oeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5ub3RlID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdSaXNrQXNzZXNzbWVudCcgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2lkZW50aWZpZXInLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2Jhc2VkT24nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3BhcmVudCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSU1YoJ3N0YXR1cycsZXhwLCdPYnNlcnZhdGlvblN0YXR1cycsT2JzZXJ2YXRpb25TdGF0dXNWc1ZhbGlkYXRpb24sJ3InKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnbWV0aG9kJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdjb2RlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdzdWJqZWN0JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdlbmNvdW50ZXInLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ29jY3VycmVuY2UnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2NvbmRpdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygncGVyZm9ybWVyJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdyZWFzb25Db2RlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdyZWFzb25SZWZlcmVuY2UnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2Jhc2lzJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdwcmVkaWN0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdtaXRpZ2F0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdub3RlJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbiJdfQ==