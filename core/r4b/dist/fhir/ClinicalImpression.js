// <auto-generated/>
// Contents of: hl7.fhir.r4b.core version: 4.3.0
// Minimum TypeScript Version: 3.7
// FHIR Resource: ClinicalImpression
import * as fhir from '../fhir.js';
// @ts-ignore
import { ClinicalimpressionStatusVsValidation } from '../fhirValueSets/ClinicalimpressionStatusVsValidation.js';
/**
 * One or more sets of investigations (signs, symptoms, etc.). The actual grouping of investigations varies greatly depending on the type and context of the assessment. These investigations may include data generated during the assessment process, or data previously generated and recorded that is pertinent to the outcomes.
 */
export class ClinicalImpressionInvestigation extends fhir.BackboneElement {
    /**
     * Default constructor for ClinicalImpressionInvestigation - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        else {
            this.code = null;
        }
        if (source['item']) {
            this.item = source.item.map((x) => new fhir.Reference(x));
        }
        else {
            this.item = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ClinicalImpression.investigation';
        }
        iss.push(...this.vRS('code', exp));
        iss.push(...this.vOA('item', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ClinicalImpressionInvestigation._fts_dataType = 'ClinicalImpressionInvestigation';
/**
 * Specific findings or diagnoses that were considered likely or relevant to ongoing treatment.
 */
export class ClinicalImpressionFinding extends fhir.BackboneElement {
    /**
     * Default constructor for ClinicalImpressionFinding - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['itemCodeableConcept']) {
            this.itemCodeableConcept = new fhir.CodeableConcept(source.itemCodeableConcept);
        }
        if (source['itemReference']) {
            this.itemReference = new fhir.Reference(source.itemReference);
        }
        if (source['basis']) {
            this.basis = new fhir.FhirString({ value: source.basis });
        }
        if (source['_basis']) {
            if (this.basis) {
                this.basis.addExtendedProperties(source._basis);
            }
            else {
                this.basis = new fhir.FhirString(source._basis);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ClinicalImpression.finding';
        }
        iss.push(...this.vOS('itemCodeableConcept', exp));
        iss.push(...this.vOS('itemReference', exp));
        iss.push(...this.vOS('basis', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ClinicalImpressionFinding._fts_dataType = 'ClinicalImpressionFinding';
/**
 * A record of a clinical assessment performed to determine what problem(s) may affect the patient and before planning the treatments or management strategies that are best to manage a patient's condition. Assessments are often 1:1 with a clinical consultation / encounter,  but this varies greatly depending on the clinical workflow. This resource is called "ClinicalImpression" rather than "ClinicalAssessment" to avoid confusion with the recording of assessment tools such as Apgar score.
 */
export class ClinicalImpression extends fhir.DomainResource {
    /**
     * Default constructor for ClinicalImpression - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'ClinicalImpression';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['statusReason']) {
            this.statusReason = new fhir.CodeableConcept(source.statusReason);
        }
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        if (source['description']) {
            this.description = new fhir.FhirString({ value: source.description });
        }
        if (source['_description']) {
            if (this.description) {
                this.description.addExtendedProperties(source._description);
            }
            else {
                this.description = new fhir.FhirString(source._description);
            }
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject);
        }
        else {
            this.subject = null;
        }
        if (source['encounter']) {
            this.encounter = new fhir.Reference(source.encounter);
        }
        if (source['effective']) {
            this.effective = source.effective;
        }
        else if (source['effectiveDateTime']) {
            this.effective = new fhir.FhirDateTime({ value: source.effectiveDateTime });
        }
        else if (source['effectivePeriod']) {
            this.effective = new fhir.Period(source.effectivePeriod);
        }
        if (source['date']) {
            this.date = new fhir.FhirDateTime({ value: source.date });
        }
        if (source['_date']) {
            if (this.date) {
                this.date.addExtendedProperties(source._date);
            }
            else {
                this.date = new fhir.FhirDateTime(source._date);
            }
        }
        if (source['assessor']) {
            this.assessor = new fhir.Reference(source.assessor);
        }
        if (source['previous']) {
            this.previous = new fhir.Reference(source.previous);
        }
        if (source['problem']) {
            this.problem = source.problem.map((x) => new fhir.Reference(x));
        }
        else {
            this.problem = [];
        }
        if (source['investigation']) {
            this.investigation = source.investigation.map((x) => new fhir.ClinicalImpressionInvestigation(x));
        }
        else {
            this.investigation = [];
        }
        if (source['protocol']) {
            this.protocol = source.protocol.map((x) => new fhir.FhirUri({ value: x }));
        }
        else {
            this.protocol = [];
        }
        if (source['_protocol']) {
            source._protocol.forEach((x, i) => {
                if (this.protocol.length >= i) {
                    if (x) {
                        this.protocol[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.protocol.push(new fhir.FhirUri(x));
                    }
                }
            });
        }
        if (source['summary']) {
            this.summary = new fhir.FhirString({ value: source.summary });
        }
        if (source['_summary']) {
            if (this.summary) {
                this.summary.addExtendedProperties(source._summary);
            }
            else {
                this.summary = new fhir.FhirString(source._summary);
            }
        }
        if (source['finding']) {
            this.finding = source.finding.map((x) => new fhir.ClinicalImpressionFinding(x));
        }
        else {
            this.finding = [];
        }
        if (source['prognosisCodeableConcept']) {
            this.prognosisCodeableConcept = source.prognosisCodeableConcept.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.prognosisCodeableConcept = [];
        }
        if (source['prognosisReference']) {
            this.prognosisReference = source.prognosisReference.map((x) => new fhir.Reference(x));
        }
        else {
            this.prognosisReference = [];
        }
        if (source['supportingInfo']) {
            this.supportingInfo = source.supportingInfo.map((x) => new fhir.Reference(x));
        }
        else {
            this.supportingInfo = [];
        }
        if (source['note']) {
            this.note = source.note.map((x) => new fhir.Annotation(x));
        }
        else {
            this.note = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ClinicalImpression';
        }
        iss.push(...this.vRPS('resourceType', exp));
        iss.push(...this.vOA('identifier', exp));
        iss.push(...this.vRSV('status', exp, 'ClinicalimpressionStatus', ClinicalimpressionStatusVsValidation, 'r'));
        iss.push(...this.vOS('statusReason', exp));
        iss.push(...this.vOS('code', exp));
        iss.push(...this.vOS('description', exp));
        iss.push(...this.vRS('subject', exp));
        iss.push(...this.vOS('encounter', exp));
        iss.push(...this.vOS('effective', exp));
        iss.push(...this.vOS('date', exp));
        iss.push(...this.vOS('assessor', exp));
        iss.push(...this.vOS('previous', exp));
        iss.push(...this.vOA('problem', exp));
        iss.push(...this.vOA('investigation', exp));
        iss.push(...this.vOA('protocol', exp));
        iss.push(...this.vOS('summary', exp));
        iss.push(...this.vOA('finding', exp));
        iss.push(...this.vOA('prognosisCodeableConcept', exp));
        iss.push(...this.vOA('prognosisReference', exp));
        iss.push(...this.vOA('supportingInfo', exp));
        iss.push(...this.vOA('note', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ClinicalImpression._fts_dataType = 'ClinicalImpression';
/**
 * Internal flag to properly serialize choice-type element ClinicalImpression.effective[x]
 */
ClinicalImpression._fts_effectiveIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ2xpbmljYWxJbXByZXNzaW9uLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9DbGluaWNhbEltcHJlc3Npb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLGdEQUFnRDtBQUNoRCxrQ0FBa0M7QUFDbEMsb0NBQW9DO0FBRXBDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBWW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsb0NBQW9DLEVBQUUsTUFBTSwwREFBMEQsQ0FBQztBQW1CaEg7O0dBRUc7QUFDSCxNQUFNLE9BQU8sK0JBQWdDLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFhdkU7O09BRUc7SUFDSCxZQUFZLFNBQXNELEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQzVHLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7U0FBRTthQUNyRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDMUIsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQzdFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUM7U0FBRTtJQUMxQixDQUFDO0lBQ0Q7O09BRUc7SUFDYSxpQkFBaUIsQ0FBQyxNQUFhLEVBQUU7UUFDL0MsSUFBSSxHQUFHLEdBQW1CLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLENBQUMsQ0FBQztR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R0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDekMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDckMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDckMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsZUFBZSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDM0MsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDckMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDckMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsMEJBQTBCLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN0RCxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ2hELEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDNUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbEMsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDOztBQXZMRDs7R0FFRztBQUM2QixnQ0FBYSxHQUFVLG9CQUFvQixDQUFDO0FBc0M1RTs7R0FFRztBQUN1Qix5Q0FBc0IsR0FBUSxJQUFJLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjRiLmNvcmUgdmVyc2lvbjogNC4zLjBcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBDbGluaWNhbEltcHJlc3Npb25cclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEludmVzdGlnYXRpb25TZXRzQ29kZXMsICBJbnZlc3RpZ2F0aW9uU2V0c0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9JbnZlc3RpZ2F0aW9uU2V0c0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBJbnZlc3RpZ2F0aW9uU2V0c1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvSW52ZXN0aWdhdGlvblNldHNWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbmRpdGlvbkNvZGVzLCAgQ29uZGl0aW9uQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbmRpdGlvbkNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDb25kaXRpb25Wc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbmRpdGlvblZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ2xpbmljYWxpbXByZXNzaW9uU3RhdHVzQ29kZXMsICBDbGluaWNhbGltcHJlc3Npb25TdGF0dXNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ2xpbmljYWxpbXByZXNzaW9uU3RhdHVzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENsaW5pY2FsaW1wcmVzc2lvblN0YXR1c1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ2xpbmljYWxpbXByZXNzaW9uU3RhdHVzVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDbGluaWNhbGltcHJlc3Npb25Qcm9nbm9zaXNDb2RlcywgIENsaW5pY2FsaW1wcmVzc2lvblByb2dub3Npc0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9DbGluaWNhbGltcHJlc3Npb25Qcm9nbm9zaXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ2xpbmljYWxpbXByZXNzaW9uUHJvZ25vc2lzVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9DbGluaWNhbGltcHJlc3Npb25Qcm9nbm9zaXNWc1ZhbGlkYXRpb24uanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQ2xpbmljYWxJbXByZXNzaW9uSW52ZXN0aWdhdGlvbiB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBDbGluaWNhbEltcHJlc3Npb25JbnZlc3RpZ2F0aW9uQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogQSBuYW1lL2NvZGUgZm9yIHRoZSBncm91cCAoXCJzZXRcIikgb2YgaW52ZXN0aWdhdGlvbnMuIFR5cGljYWxseSwgdGhpcyB3aWxsIGJlIHNvbWV0aGluZyBsaWtlIFwic2lnbnNcIiwgXCJzeW1wdG9tc1wiLCBcImNsaW5pY2FsXCIsIFwiZGlhZ25vc3RpY1wiLCBidXQgdGhlIGxpc3QgaXMgbm90IGNvbnN0cmFpbmVkLCBhbmQgb3RoZXJzIHN1Y2ggZ3JvdXBzIHN1Y2ggYXMgKGV4cG9zdXJlfGZhbWlseXx0cmF2ZWx8bnV0cml0aW9uYWwpIGhpc3RvcnkgbWF5IGJlIHVzZWQuXHJcbiAgICovXHJcbiAgY29kZTogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogTW9zdCBpbnZlc3RpZ2F0aW9ucyBhcmUgb2JzZXJ2YXRpb25zIG9mIG9uZSBraW5kIG9yIGFub3RoZXIgYnV0IHNvbWUgb3RoZXIgc3BlY2lmaWMgdHlwZXMgb2YgZGF0YSBjb2xsZWN0aW9uIHJlc291cmNlcyBjYW4gYWxzbyBiZSB1c2VkLlxyXG4gICAqL1xyXG4gIGl0ZW0/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBPbmUgb3IgbW9yZSBzZXRzIG9mIGludmVzdGlnYXRpb25zIChzaWducywgc3ltcHRvbXMsIGV0Yy4pLiBUaGUgYWN0dWFsIGdyb3VwaW5nIG9mIGludmVzdGlnYXRpb25zIHZhcmllcyBncmVhdGx5IGRlcGVuZGluZyBvbiB0aGUgdHlwZSBhbmQgY29udGV4dCBvZiB0aGUgYXNzZXNzbWVudC4gVGhlc2UgaW52ZXN0aWdhdGlvbnMgbWF5IGluY2x1ZGUgZGF0YSBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBhc3Nlc3NtZW50IHByb2Nlc3MsIG9yIGRhdGEgcHJldmlvdXNseSBnZW5lcmF0ZWQgYW5kIHJlY29yZGVkIHRoYXQgaXMgcGVydGluZW50IHRvIHRoZSBvdXRjb21lcy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDbGluaWNhbEltcHJlc3Npb25JbnZlc3RpZ2F0aW9uIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQ2xpbmljYWxJbXByZXNzaW9uSW52ZXN0aWdhdGlvbic7XHJcbiAgLyoqXHJcbiAgICogQSBuYW1lL2NvZGUgZm9yIHRoZSBncm91cCAoXCJzZXRcIikgb2YgaW52ZXN0aWdhdGlvbnMuIFR5cGljYWxseSwgdGhpcyB3aWxsIGJlIHNvbWV0aGluZyBsaWtlIFwic2lnbnNcIiwgXCJzeW1wdG9tc1wiLCBcImNsaW5pY2FsXCIsIFwiZGlhZ25vc3RpY1wiLCBidXQgdGhlIGxpc3QgaXMgbm90IGNvbnN0cmFpbmVkLCBhbmQgb3RoZXJzIHN1Y2ggZ3JvdXBzIHN1Y2ggYXMgKGV4cG9zdXJlfGZhbWlseXx0cmF2ZWx8bnV0cml0aW9uYWwpIGhpc3RvcnkgbWF5IGJlIHVzZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGU6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogTW9zdCBpbnZlc3RpZ2F0aW9ucyBhcmUgb2JzZXJ2YXRpb25zIG9mIG9uZSBraW5kIG9yIGFub3RoZXIgYnV0IHNvbWUgb3RoZXIgc3BlY2lmaWMgdHlwZXMgb2YgZGF0YSBjb2xsZWN0aW9uIHJlc291cmNlcyBjYW4gYWxzbyBiZSB1c2VkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpdGVtOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIENsaW5pY2FsSW1wcmVzc2lvbkludmVzdGlnYXRpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxDbGluaWNhbEltcHJlc3Npb25JbnZlc3RpZ2F0aW9uQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2NvZGUnXSkgeyB0aGlzLmNvZGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmNvZGUpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb2RlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaXRlbSddKSB7IHRoaXMuaXRlbSA9IHNvdXJjZS5pdGVtLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaXRlbSA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnQ2xpbmljYWxJbXByZXNzaW9uLmludmVzdGlnYXRpb24nIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdjb2RlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdpdGVtJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBDbGluaWNhbEltcHJlc3Npb25GaW5kaW5nIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENsaW5pY2FsSW1wcmVzc2lvbkZpbmRpbmdBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBTcGVjaWZpYyB0ZXh0IG9yIGNvZGUgZm9yIGZpbmRpbmcgb3IgZGlhZ25vc2lzLCB3aGljaCBtYXkgaW5jbHVkZSBydWxlZC1vdXQgb3IgcmVzb2x2ZWQgY29uZGl0aW9ucy5cclxuICAgKi9cclxuICBpdGVtQ29kZWFibGVDb25jZXB0PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTcGVjaWZpYyByZWZlcmVuY2UgZm9yIGZpbmRpbmcgb3IgZGlhZ25vc2lzLCB3aGljaCBtYXkgaW5jbHVkZSBydWxlZC1vdXQgb3IgcmVzb2x2ZWQgY29uZGl0aW9ucy5cclxuICAgKi9cclxuICBpdGVtUmVmZXJlbmNlPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBXaGljaCBpbnZlc3RpZ2F0aW9ucyBzdXBwb3J0IGZpbmRpbmcgb3IgZGlhZ25vc2lzLlxyXG4gICAqL1xyXG4gIGJhc2lzPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENsaW5pY2FsSW1wcmVzc2lvbi5maW5kaW5nLmJhc2lzXHJcbiAgICovXHJcbiAgX2Jhc2lzPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIFNwZWNpZmljIGZpbmRpbmdzIG9yIGRpYWdub3NlcyB0aGF0IHdlcmUgY29uc2lkZXJlZCBsaWtlbHkgb3IgcmVsZXZhbnQgdG8gb25nb2luZyB0cmVhdG1lbnQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ2xpbmljYWxJbXByZXNzaW9uRmluZGluZyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0NsaW5pY2FsSW1wcmVzc2lvbkZpbmRpbmcnO1xyXG4gIC8qKlxyXG4gICAqIFNwZWNpZmljIHRleHQgb3IgY29kZSBmb3IgZmluZGluZyBvciBkaWFnbm9zaXMsIHdoaWNoIG1heSBpbmNsdWRlIHJ1bGVkLW91dCBvciByZXNvbHZlZCBjb25kaXRpb25zLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpdGVtQ29kZWFibGVDb25jZXB0PzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFNwZWNpZmljIHJlZmVyZW5jZSBmb3IgZmluZGluZyBvciBkaWFnbm9zaXMsIHdoaWNoIG1heSBpbmNsdWRlIHJ1bGVkLW91dCBvciByZXNvbHZlZCBjb25kaXRpb25zLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpdGVtUmVmZXJlbmNlPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFdoaWNoIGludmVzdGlnYXRpb25zIHN1cHBvcnQgZmluZGluZyBvciBkaWFnbm9zaXMuXHJcbiAgICovXHJcbiAgcHVibGljIGJhc2lzPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBDbGluaWNhbEltcHJlc3Npb25GaW5kaW5nIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8Q2xpbmljYWxJbXByZXNzaW9uRmluZGluZ0FyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydpdGVtQ29kZWFibGVDb25jZXB0J10pIHsgdGhpcy5pdGVtQ29kZWFibGVDb25jZXB0ID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5pdGVtQ29kZWFibGVDb25jZXB0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaXRlbVJlZmVyZW5jZSddKSB7IHRoaXMuaXRlbVJlZmVyZW5jZSA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuaXRlbVJlZmVyZW5jZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2Jhc2lzJ10pIHsgdGhpcy5iYXNpcyA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuYmFzaXN9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2Jhc2lzJ10pIHtcclxuICAgICAgaWYgKHRoaXMuYmFzaXMpIHsgdGhpcy5iYXNpcy5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9iYXNpcyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmJhc2lzID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2Jhc2lzIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnQ2xpbmljYWxJbXByZXNzaW9uLmZpbmRpbmcnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdpdGVtQ29kZWFibGVDb25jZXB0JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdpdGVtUmVmZXJlbmNlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdiYXNpcycsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQ2xpbmljYWxJbXByZXNzaW9uIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENsaW5pY2FsSW1wcmVzc2lvbkFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIkNsaW5pY2FsSW1wcmVzc2lvblwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGlzIGEgYnVzaW5lc3MgaWRlbnRpZmllciwgbm90IGEgcmVzb3VyY2UgaWRlbnRpZmllciAoc2VlIFtkaXNjdXNzaW9uXShyZXNvdXJjZS5odG1sI2lkZW50aWZpZXJzKSkuICBJdCBpcyBiZXN0IHByYWN0aWNlIGZvciB0aGUgaWRlbnRpZmllciB0byBvbmx5IGFwcGVhciBvbiBhIHNpbmdsZSByZXNvdXJjZSBpbnN0YW5jZSwgaG93ZXZlciBidXNpbmVzcyBwcmFjdGljZXMgbWF5IG9jY2FzaW9uYWxseSBkaWN0YXRlIHRoYXQgbXVsdGlwbGUgcmVzb3VyY2UgaW5zdGFuY2VzIHdpdGggdGhlIHNhbWUgaWRlbnRpZmllciBjYW4gZXhpc3QgLSBwb3NzaWJseSBldmVuIHdpdGggZGlmZmVyZW50IHJlc291cmNlIHR5cGVzLiAgRm9yIGV4YW1wbGUsIG11bHRpcGxlIFBhdGllbnQgYW5kIGEgUGVyc29uIHJlc291cmNlIGluc3RhbmNlIG1pZ2h0IHNoYXJlIHRoZSBzYW1lIHNvY2lhbCBpbnN1cmFuY2UgbnVtYmVyLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgYmVjYXVzZSB0aGUgc3RhdHVzIGNvbnRhaW5zIHRoZSBjb2RlIGVudGVyZWQtaW4tZXJyb3IgdGhhdCBtYXJrcyB0aGUgY2xpbmljYWwgaW1wcmVzc2lvbiBhcyBub3QgY3VycmVudGx5IHZhbGlkLlxyXG4gICAqL1xyXG4gIHN0YXR1czogZmhpci5GaGlyQ29kZTxDbGluaWNhbGltcHJlc3Npb25TdGF0dXNDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ2xpbmljYWxJbXByZXNzaW9uLnN0YXR1c1xyXG4gICAqL1xyXG4gIF9zdGF0dXM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaXMgZ2VuZXJhbGx5IG9ubHkgdXNlZCBmb3IgXCJleGNlcHRpb25cIiBzdGF0dXNlcyBzdWNoIGFzIFwibm90LWRvbmVcIiwgXCJzdXNwZW5kZWRcIiBvciBcImNhbmNlbGxlZFwiLlxyXG4gICAqIFtkaXN0aW5jdCByZWFzb24gY29kZXMgZm9yIGRpZmZlcmVudCBzdGF0dXNlcyBjYW4gYmUgZW5mb3JjZWQgdXNpbmcgaW52YXJpYW50cyBpZiB0aGV5IGFyZSB1bml2ZXJzYWwgYmluZGluZ3NdLlxyXG4gICAqL1xyXG4gIHN0YXR1c1JlYXNvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBwcmVzZW50IGFzIGEgcGxhY2UtaG9sZGVyIG9ubHkgYW5kIG1heSBiZSByZW1vdmVkIGJhc2VkIG9uIGZlZWRiYWNrL3dvcmsgZ3JvdXAgb3Bpbmlvbi5cclxuICAgKi9cclxuICBjb2RlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHN1bW1hcnkgb2YgdGhlIGNvbnRleHQgYW5kL29yIGNhdXNlIG9mIHRoZSBhc3Nlc3NtZW50IC0gd2h5IC8gd2hlcmUgaXQgd2FzIHBlcmZvcm1lZCwgYW5kIHdoYXQgcGF0aWVudCBldmVudHMvc3RhdHVzIHByb21wdGVkIGl0LlxyXG4gICAqL1xyXG4gIGRlc2NyaXB0aW9uPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENsaW5pY2FsSW1wcmVzc2lvbi5kZXNjcmlwdGlvblxyXG4gICAqL1xyXG4gIF9kZXNjcmlwdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBhdGllbnQgb3IgZ3JvdXAgb2YgaW5kaXZpZHVhbHMgYXNzZXNzZWQgYXMgcGFydCBvZiB0aGlzIHJlY29yZC5cclxuICAgKi9cclxuICBzdWJqZWN0OiBmaGlyLlJlZmVyZW5jZUFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGlzIHdpbGwgdHlwaWNhbGx5IGJlIHRoZSBlbmNvdW50ZXIgdGhlIGV2ZW50IG9jY3VycmVkIHdpdGhpbiwgYnV0IHNvbWUgYWN0aXZpdGllcyBtYXkgYmUgaW5pdGlhdGVkIHByaW9yIHRvIG9yIGFmdGVyIHRoZSBvZmZpY2lhbCBjb21wbGV0aW9uIG9mIGFuIGVuY291bnRlciBidXQgc3RpbGwgYmUgdGllZCB0byB0aGUgY29udGV4dCBvZiB0aGUgZW5jb3VudGVyLlxyXG4gICAqL1xyXG4gIGVuY291bnRlcj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBTSE9VTEQgYmUgYWNjdXJhdGUgdG8gYXQgbGVhc3QgdGhlIG1pbnV0ZSwgdGhvdWdoIHNvbWUgYXNzZXNzbWVudHMgb25seSBoYXZlIGEga25vd24gZGF0ZS5cclxuICAgKi9cclxuICBlZmZlY3RpdmU/OiBmaGlyLkZoaXJEYXRlVGltZXxmaGlyLlBlcmlvZHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBTSE9VTEQgYmUgYWNjdXJhdGUgdG8gYXQgbGVhc3QgdGhlIG1pbnV0ZSwgdGhvdWdoIHNvbWUgYXNzZXNzbWVudHMgb25seSBoYXZlIGEga25vd24gZGF0ZS5cclxuICAgKi9cclxuICBlZmZlY3RpdmVEYXRlVGltZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBTSE9VTEQgYmUgYWNjdXJhdGUgdG8gYXQgbGVhc3QgdGhlIG1pbnV0ZSwgdGhvdWdoIHNvbWUgYXNzZXNzbWVudHMgb25seSBoYXZlIGEga25vd24gZGF0ZS5cclxuICAgKi9cclxuICBlZmZlY3RpdmVQZXJpb2Q/OiBmaGlyLlBlcmlvZEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB3aGVuIHRoZSBkb2N1bWVudGF0aW9uIG9mIHRoZSBhc3Nlc3NtZW50IHdhcyBjb21wbGV0ZS5cclxuICAgKi9cclxuICBkYXRlPzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ2xpbmljYWxJbXByZXNzaW9uLmRhdGVcclxuICAgKi9cclxuICBfZGF0ZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNsaW5pY2lhbiBwZXJmb3JtaW5nIHRoZSBhc3Nlc3NtZW50LlxyXG4gICAqL1xyXG4gIGFzc2Vzc29yPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJdCBpcyBhbHdheXMgbGlrZWx5IHRoYXQgbXVsdGlwbGUgcHJldmlvdXMgYXNzZXNzbWVudHMgZXhpc3QgZm9yIGEgcGF0aWVudC4gVGhlIHBvaW50IG9mIHF1b3RpbmcgYSBwcmV2aW91cyBhc3Nlc3NtZW50IGlzIHRoYXQgdGhpcyBhc3Nlc3NtZW50IGlzIHJlbGF0aXZlIHRvIGl0IChzZWUgcmVzb2x2ZWQpLlxyXG4gICAqL1xyXG4gIHByZXZpb3VzPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBlLmcuIFRoZSBwYXRpZW50IGlzIGEgcHJlZ25hbnQsIGhhcyBjb25nZXN0aXZlIGhlYXJ0IGZhaWx1cmUsIGhhcyBhbiDigI5BZGVub2NhcmNpbm9tYSwgYW5kIGlzIGFsbGVyZ2ljIHRvIHBlbmljaWxsaW4uXHJcbiAgICovXHJcbiAgcHJvYmxlbT86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBPbmUgb3IgbW9yZSBzZXRzIG9mIGludmVzdGlnYXRpb25zIChzaWducywgc3ltcHRvbXMsIGV0Yy4pLiBUaGUgYWN0dWFsIGdyb3VwaW5nIG9mIGludmVzdGlnYXRpb25zIHZhcmllcyBncmVhdGx5IGRlcGVuZGluZyBvbiB0aGUgdHlwZSBhbmQgY29udGV4dCBvZiB0aGUgYXNzZXNzbWVudC4gVGhlc2UgaW52ZXN0aWdhdGlvbnMgbWF5IGluY2x1ZGUgZGF0YSBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBhc3Nlc3NtZW50IHByb2Nlc3MsIG9yIGRhdGEgcHJldmlvdXNseSBnZW5lcmF0ZWQgYW5kIHJlY29yZGVkIHRoYXQgaXMgcGVydGluZW50IHRvIHRoZSBvdXRjb21lcy5cclxuICAgKi9cclxuICBpbnZlc3RpZ2F0aW9uPzogZmhpci5DbGluaWNhbEltcHJlc3Npb25JbnZlc3RpZ2F0aW9uQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBSZWZlcmVuY2UgdG8gYSBzcGVjaWZpYyBwdWJsaXNoZWQgY2xpbmljYWwgcHJvdG9jb2wgdGhhdCB3YXMgZm9sbG93ZWQgZHVyaW5nIHRoaXMgYXNzZXNzbWVudCwgYW5kL29yIHRoYXQgcHJvdmlkZXMgZXZpZGVuY2UgaW4gc3VwcG9ydCBvZiB0aGUgZGlhZ25vc2lzLlxyXG4gICAqL1xyXG4gIHByb3RvY29sPzogZmhpci5GaGlyVXJpW118KHN0cmluZ3xudWxsKVtdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ2xpbmljYWxJbXByZXNzaW9uLnByb3RvY29sXHJcbiAgICovXHJcbiAgX3Byb3RvY29sPzooZmhpci5GaGlyRWxlbWVudEFyZ3N8bnVsbClbXTtcclxuICAvKipcclxuICAgKiBBIHRleHQgc3VtbWFyeSBvZiB0aGUgaW52ZXN0aWdhdGlvbnMgYW5kIHRoZSBkaWFnbm9zaXMuXHJcbiAgICovXHJcbiAgc3VtbWFyeT86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDbGluaWNhbEltcHJlc3Npb24uc3VtbWFyeVxyXG4gICAqL1xyXG4gIF9zdW1tYXJ5PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBTcGVjaWZpYyBmaW5kaW5ncyBvciBkaWFnbm9zZXMgdGhhdCB3ZXJlIGNvbnNpZGVyZWQgbGlrZWx5IG9yIHJlbGV2YW50IHRvIG9uZ29pbmcgdHJlYXRtZW50LlxyXG4gICAqL1xyXG4gIGZpbmRpbmc/OiBmaGlyLkNsaW5pY2FsSW1wcmVzc2lvbkZpbmRpbmdBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEVzdGltYXRlIG9mIGxpa2VseSBvdXRjb21lLlxyXG4gICAqL1xyXG4gIHByb2dub3Npc0NvZGVhYmxlQ29uY2VwdD86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBSaXNrQXNzZXNzbWVudCBleHByZXNzaW5nIGxpa2VseSBvdXRjb21lLlxyXG4gICAqL1xyXG4gIHByb2dub3Npc1JlZmVyZW5jZT86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmZvcm1hdGlvbiBzdXBwb3J0aW5nIHRoZSBjbGluaWNhbCBpbXByZXNzaW9uLlxyXG4gICAqL1xyXG4gIHN1cHBvcnRpbmdJbmZvPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERvbid0IHVzZSB0aGlzIGVsZW1lbnQgZm9yIGNvbnRlbnQgdGhhdCBzaG91bGQgbW9yZSBwcm9wZXJseSBhcHBlYXIgYXMgb25lIG9mIHRoZSBzcGVjaWZpYyBlbGVtZW50cyBvZiB0aGUgaW1wcmVzc2lvbi5cclxuICAgKi9cclxuICBub3RlPzogZmhpci5Bbm5vdGF0aW9uQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgcmVjb3JkIG9mIGEgY2xpbmljYWwgYXNzZXNzbWVudCBwZXJmb3JtZWQgdG8gZGV0ZXJtaW5lIHdoYXQgcHJvYmxlbShzKSBtYXkgYWZmZWN0IHRoZSBwYXRpZW50IGFuZCBiZWZvcmUgcGxhbm5pbmcgdGhlIHRyZWF0bWVudHMgb3IgbWFuYWdlbWVudCBzdHJhdGVnaWVzIHRoYXQgYXJlIGJlc3QgdG8gbWFuYWdlIGEgcGF0aWVudCdzIGNvbmRpdGlvbi4gQXNzZXNzbWVudHMgYXJlIG9mdGVuIDE6MSB3aXRoIGEgY2xpbmljYWwgY29uc3VsdGF0aW9uIC8gZW5jb3VudGVyLCAgYnV0IHRoaXMgdmFyaWVzIGdyZWF0bHkgZGVwZW5kaW5nIG9uIHRoZSBjbGluaWNhbCB3b3JrZmxvdy4gVGhpcyByZXNvdXJjZSBpcyBjYWxsZWQgXCJDbGluaWNhbEltcHJlc3Npb25cIiByYXRoZXIgdGhhbiBcIkNsaW5pY2FsQXNzZXNzbWVudFwiIHRvIGF2b2lkIGNvbmZ1c2lvbiB3aXRoIHRoZSByZWNvcmRpbmcgb2YgYXNzZXNzbWVudCB0b29scyBzdWNoIGFzIEFwZ2FyIHNjb3JlLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENsaW5pY2FsSW1wcmVzc2lvbiBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQ2xpbmljYWxJbXByZXNzaW9uJztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIkNsaW5pY2FsSW1wcmVzc2lvblwiO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaXMgYSBidXNpbmVzcyBpZGVudGlmaWVyLCBub3QgYSByZXNvdXJjZSBpZGVudGlmaWVyIChzZWUgW2Rpc2N1c3Npb25dKHJlc291cmNlLmh0bWwjaWRlbnRpZmllcnMpKS4gIEl0IGlzIGJlc3QgcHJhY3RpY2UgZm9yIHRoZSBpZGVudGlmaWVyIHRvIG9ubHkgYXBwZWFyIG9uIGEgc2luZ2xlIHJlc291cmNlIGluc3RhbmNlLCBob3dldmVyIGJ1c2luZXNzIHByYWN0aWNlcyBtYXkgb2NjYXNpb25hbGx5IGRpY3RhdGUgdGhhdCBtdWx0aXBsZSByZXNvdXJjZSBpbnN0YW5jZXMgd2l0aCB0aGUgc2FtZSBpZGVudGlmaWVyIGNhbiBleGlzdCAtIHBvc3NpYmx5IGV2ZW4gd2l0aCBkaWZmZXJlbnQgcmVzb3VyY2UgdHlwZXMuICBGb3IgZXhhbXBsZSwgbXVsdGlwbGUgUGF0aWVudCBhbmQgYSBQZXJzb24gcmVzb3VyY2UgaW5zdGFuY2UgbWlnaHQgc2hhcmUgdGhlIHNhbWUgc29jaWFsIGluc3VyYW5jZSBudW1iZXIuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI6IGZoaXIuSWRlbnRpZmllcltdO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBsYWJlbGVkIGFzIGEgbW9kaWZpZXIgYmVjYXVzZSB0aGUgc3RhdHVzIGNvbnRhaW5zIHRoZSBjb2RlIGVudGVyZWQtaW4tZXJyb3IgdGhhdCBtYXJrcyB0aGUgY2xpbmljYWwgaW1wcmVzc2lvbiBhcyBub3QgY3VycmVudGx5IHZhbGlkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0dXM6IGZoaXIuRmhpckNvZGU8Q2xpbmljYWxpbXByZXNzaW9uU3RhdHVzQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBnZW5lcmFsbHkgb25seSB1c2VkIGZvciBcImV4Y2VwdGlvblwiIHN0YXR1c2VzIHN1Y2ggYXMgXCJub3QtZG9uZVwiLCBcInN1c3BlbmRlZFwiIG9yIFwiY2FuY2VsbGVkXCIuXHJcbiAgICogW2Rpc3RpbmN0IHJlYXNvbiBjb2RlcyBmb3IgZGlmZmVyZW50IHN0YXR1c2VzIGNhbiBiZSBlbmZvcmNlZCB1c2luZyBpbnZhcmlhbnRzIGlmIHRoZXkgYXJlIHVuaXZlcnNhbCBiaW5kaW5nc10uXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1c1JlYXNvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGlzIHByZXNlbnQgYXMgYSBwbGFjZS1ob2xkZXIgb25seSBhbmQgbWF5IGJlIHJlbW92ZWQgYmFzZWQgb24gZmVlZGJhY2svd29yayBncm91cCBvcGluaW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb2RlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgc3VtbWFyeSBvZiB0aGUgY29udGV4dCBhbmQvb3IgY2F1c2Ugb2YgdGhlIGFzc2Vzc21lbnQgLSB3aHkgLyB3aGVyZSBpdCB3YXMgcGVyZm9ybWVkLCBhbmQgd2hhdCBwYXRpZW50IGV2ZW50cy9zdGF0dXMgcHJvbXB0ZWQgaXQuXHJcbiAgICovXHJcbiAgcHVibGljIGRlc2NyaXB0aW9uPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcGF0aWVudCBvciBncm91cCBvZiBpbmRpdmlkdWFscyBhc3Nlc3NlZCBhcyBwYXJ0IG9mIHRoaXMgcmVjb3JkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdWJqZWN0OiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgd2lsbCB0eXBpY2FsbHkgYmUgdGhlIGVuY291bnRlciB0aGUgZXZlbnQgb2NjdXJyZWQgd2l0aGluLCBidXQgc29tZSBhY3Rpdml0aWVzIG1heSBiZSBpbml0aWF0ZWQgcHJpb3IgdG8gb3IgYWZ0ZXIgdGhlIG9mZmljaWFsIGNvbXBsZXRpb24gb2YgYW4gZW5jb3VudGVyIGJ1dCBzdGlsbCBiZSB0aWVkIHRvIHRoZSBjb250ZXh0IG9mIHRoZSBlbmNvdW50ZXIuXHJcbiAgICovXHJcbiAgcHVibGljIGVuY291bnRlcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIFNIT1VMRCBiZSBhY2N1cmF0ZSB0byBhdCBsZWFzdCB0aGUgbWludXRlLCB0aG91Z2ggc29tZSBhc3Nlc3NtZW50cyBvbmx5IGhhdmUgYSBrbm93biBkYXRlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBlZmZlY3RpdmU/OiAoZmhpci5GaGlyRGF0ZVRpbWV8Zmhpci5QZXJpb2QpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IENsaW5pY2FsSW1wcmVzc2lvbi5lZmZlY3RpdmVbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfZWZmZWN0aXZlSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHdoZW4gdGhlIGRvY3VtZW50YXRpb24gb2YgdGhlIGFzc2Vzc21lbnQgd2FzIGNvbXBsZXRlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkYXRlPzogZmhpci5GaGlyRGF0ZVRpbWV8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjbGluaWNpYW4gcGVyZm9ybWluZyB0aGUgYXNzZXNzbWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgYXNzZXNzb3I/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSXQgaXMgYWx3YXlzIGxpa2VseSB0aGF0IG11bHRpcGxlIHByZXZpb3VzIGFzc2Vzc21lbnRzIGV4aXN0IGZvciBhIHBhdGllbnQuIFRoZSBwb2ludCBvZiBxdW90aW5nIGEgcHJldmlvdXMgYXNzZXNzbWVudCBpcyB0aGF0IHRoaXMgYXNzZXNzbWVudCBpcyByZWxhdGl2ZSB0byBpdCAoc2VlIHJlc29sdmVkKS5cclxuICAgKi9cclxuICBwdWJsaWMgcHJldmlvdXM/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogZS5nLiBUaGUgcGF0aWVudCBpcyBhIHByZWduYW50LCBoYXMgY29uZ2VzdGl2ZSBoZWFydCBmYWlsdXJlLCBoYXMgYW4g4oCOQWRlbm9jYXJjaW5vbWEsIGFuZCBpcyBhbGxlcmdpYyB0byBwZW5pY2lsbGluLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcm9ibGVtOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIE9uZSBvciBtb3JlIHNldHMgb2YgaW52ZXN0aWdhdGlvbnMgKHNpZ25zLCBzeW1wdG9tcywgZXRjLikuIFRoZSBhY3R1YWwgZ3JvdXBpbmcgb2YgaW52ZXN0aWdhdGlvbnMgdmFyaWVzIGdyZWF0bHkgZGVwZW5kaW5nIG9uIHRoZSB0eXBlIGFuZCBjb250ZXh0IG9mIHRoZSBhc3Nlc3NtZW50LiBUaGVzZSBpbnZlc3RpZ2F0aW9ucyBtYXkgaW5jbHVkZSBkYXRhIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGFzc2Vzc21lbnQgcHJvY2Vzcywgb3IgZGF0YSBwcmV2aW91c2x5IGdlbmVyYXRlZCBhbmQgcmVjb3JkZWQgdGhhdCBpcyBwZXJ0aW5lbnQgdG8gdGhlIG91dGNvbWVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpbnZlc3RpZ2F0aW9uOiBmaGlyLkNsaW5pY2FsSW1wcmVzc2lvbkludmVzdGlnYXRpb25bXTtcclxuICAvKipcclxuICAgKiBSZWZlcmVuY2UgdG8gYSBzcGVjaWZpYyBwdWJsaXNoZWQgY2xpbmljYWwgcHJvdG9jb2wgdGhhdCB3YXMgZm9sbG93ZWQgZHVyaW5nIHRoaXMgYXNzZXNzbWVudCwgYW5kL29yIHRoYXQgcHJvdmlkZXMgZXZpZGVuY2UgaW4gc3VwcG9ydCBvZiB0aGUgZGlhZ25vc2lzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcm90b2NvbDogZmhpci5GaGlyVXJpW107XHJcbiAgLyoqXHJcbiAgICogQSB0ZXh0IHN1bW1hcnkgb2YgdGhlIGludmVzdGlnYXRpb25zIGFuZCB0aGUgZGlhZ25vc2lzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdW1tYXJ5PzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTcGVjaWZpYyBmaW5kaW5ncyBvciBkaWFnbm9zZXMgdGhhdCB3ZXJlIGNvbnNpZGVyZWQgbGlrZWx5IG9yIHJlbGV2YW50IHRvIG9uZ29pbmcgdHJlYXRtZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBmaW5kaW5nOiBmaGlyLkNsaW5pY2FsSW1wcmVzc2lvbkZpbmRpbmdbXTtcclxuICAvKipcclxuICAgKiBFc3RpbWF0ZSBvZiBsaWtlbHkgb3V0Y29tZS5cclxuICAgKi9cclxuICBwdWJsaWMgcHJvZ25vc2lzQ29kZWFibGVDb25jZXB0OiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIFJpc2tBc3Nlc3NtZW50IGV4cHJlc3NpbmcgbGlrZWx5IG91dGNvbWUuXHJcbiAgICovXHJcbiAgcHVibGljIHByb2dub3Npc1JlZmVyZW5jZTogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBJbmZvcm1hdGlvbiBzdXBwb3J0aW5nIHRoZSBjbGluaWNhbCBpbXByZXNzaW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdXBwb3J0aW5nSW5mbzogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBEb24ndCB1c2UgdGhpcyBlbGVtZW50IGZvciBjb250ZW50IHRoYXQgc2hvdWxkIG1vcmUgcHJvcGVybHkgYXBwZWFyIGFzIG9uZSBvZiB0aGUgc3BlY2lmaWMgZWxlbWVudHMgb2YgdGhlIGltcHJlc3Npb24uXHJcbiAgICovXHJcbiAgcHVibGljIG5vdGU6IGZoaXIuQW5ub3RhdGlvbltdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIENsaW5pY2FsSW1wcmVzc2lvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENsaW5pY2FsSW1wcmVzc2lvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdDbGluaWNhbEltcHJlc3Npb24nO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IHNvdXJjZS5pZGVudGlmaWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuSWRlbnRpZmllcih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmlkZW50aWZpZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RhdHVzJ10pIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxDbGluaWNhbGltcHJlc3Npb25TdGF0dXNDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2Uuc3RhdHVzfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zdGF0dXMnXSkge1xyXG4gICAgICBpZiAodGhpcy5zdGF0dXMpIHsgdGhpcy5zdGF0dXMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc3RhdHVzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8Q2xpbmljYWxpbXByZXNzaW9uU3RhdHVzQ29kZVR5cGU+KHNvdXJjZS5fc3RhdHVzIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydzdGF0dXNSZWFzb24nXSkgeyB0aGlzLnN0YXR1c1JlYXNvbiA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2Uuc3RhdHVzUmVhc29uKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY29kZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2Rlc2NyaXB0aW9uJ10pIHsgdGhpcy5kZXNjcmlwdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuZGVzY3JpcHRpb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2Rlc2NyaXB0aW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZGVzY3JpcHRpb24pIHsgdGhpcy5kZXNjcmlwdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9kZXNjcmlwdGlvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRlc2NyaXB0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2Rlc2NyaXB0aW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydzdWJqZWN0J10pIHsgdGhpcy5zdWJqZWN0ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5zdWJqZWN0KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3ViamVjdCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ2VuY291bnRlciddKSB7IHRoaXMuZW5jb3VudGVyID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5lbmNvdW50ZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWydlZmZlY3RpdmUnXSkgeyB0aGlzLmVmZmVjdGl2ZSA9IHNvdXJjZS5lZmZlY3RpdmU7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnZWZmZWN0aXZlRGF0ZVRpbWUnXSkgeyB0aGlzLmVmZmVjdGl2ZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5lZmZlY3RpdmVEYXRlVGltZX0pOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2VmZmVjdGl2ZVBlcmlvZCddKSB7IHRoaXMuZWZmZWN0aXZlID0gbmV3IGZoaXIuUGVyaW9kKHNvdXJjZS5lZmZlY3RpdmVQZXJpb2QpOyB9XHJcbiAgICBpZiAoc291cmNlWydkYXRlJ10pIHsgdGhpcy5kYXRlID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLmRhdGV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2RhdGUnXSkge1xyXG4gICAgICBpZiAodGhpcy5kYXRlKSB7IHRoaXMuZGF0ZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9kYXRlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZGF0ZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZShzb3VyY2UuX2RhdGUgYXMgUGFydGlhbDxmaGlyLkZoaXJEYXRlVGltZUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnYXNzZXNzb3InXSkgeyB0aGlzLmFzc2Vzc29yID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5hc3Nlc3Nvcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ3ByZXZpb3VzJ10pIHsgdGhpcy5wcmV2aW91cyA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UucHJldmlvdXMpOyB9XHJcbiAgICBpZiAoc291cmNlWydwcm9ibGVtJ10pIHsgdGhpcy5wcm9ibGVtID0gc291cmNlLnByb2JsZW0ubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wcm9ibGVtID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2ludmVzdGlnYXRpb24nXSkgeyB0aGlzLmludmVzdGlnYXRpb24gPSBzb3VyY2UuaW52ZXN0aWdhdGlvbi5tYXAoKHgpID0+IG5ldyBmaGlyLkNsaW5pY2FsSW1wcmVzc2lvbkludmVzdGlnYXRpb24oeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pbnZlc3RpZ2F0aW9uID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3Byb3RvY29sJ10pIHsgdGhpcy5wcm90b2NvbCA9IHNvdXJjZS5wcm90b2NvbC5tYXAoKHgpID0+IG5ldyBmaGlyLkZoaXJVcmkoe3ZhbHVlOiB4fSkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wcm90b2NvbCA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydfcHJvdG9jb2wnXSkge1xyXG4gICAgICBzb3VyY2UuX3Byb3RvY29sLmZvckVhY2goKHgsaSkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3RvY29sLmxlbmd0aCA+PSBpKSB7IGlmICh4KSB7IHRoaXMucHJvdG9jb2xbaV0uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHgpOyB9IH1cclxuICAgICAgICBlbHNlIHsgaWYgKHgpIHsgdGhpcy5wcm90b2NvbC5wdXNoKG5ldyBmaGlyLkZoaXJVcmkoeCBhcyBQYXJ0aWFsPGZoaXIuRmhpclVyaUFyZ3M+KSk7IH0gfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3N1bW1hcnknXSkgeyB0aGlzLnN1bW1hcnkgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnN1bW1hcnl9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3N1bW1hcnknXSkge1xyXG4gICAgICBpZiAodGhpcy5zdW1tYXJ5KSB7IHRoaXMuc3VtbWFyeS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zdW1tYXJ5ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3VtbWFyeSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9zdW1tYXJ5IGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydmaW5kaW5nJ10pIHsgdGhpcy5maW5kaW5nID0gc291cmNlLmZpbmRpbmcubWFwKCh4KSA9PiBuZXcgZmhpci5DbGluaWNhbEltcHJlc3Npb25GaW5kaW5nKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZmluZGluZyA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwcm9nbm9zaXNDb2RlYWJsZUNvbmNlcHQnXSkgeyB0aGlzLnByb2dub3Npc0NvZGVhYmxlQ29uY2VwdCA9IHNvdXJjZS5wcm9nbm9zaXNDb2RlYWJsZUNvbmNlcHQubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wcm9nbm9zaXNDb2RlYWJsZUNvbmNlcHQgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJvZ25vc2lzUmVmZXJlbmNlJ10pIHsgdGhpcy5wcm9nbm9zaXNSZWZlcmVuY2UgPSBzb3VyY2UucHJvZ25vc2lzUmVmZXJlbmNlLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucHJvZ25vc2lzUmVmZXJlbmNlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3N1cHBvcnRpbmdJbmZvJ10pIHsgdGhpcy5zdXBwb3J0aW5nSW5mbyA9IHNvdXJjZS5zdXBwb3J0aW5nSW5mby5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN1cHBvcnRpbmdJbmZvID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ25vdGUnXSkgeyB0aGlzLm5vdGUgPSBzb3VyY2Uubm90ZS5tYXAoKHgpID0+IG5ldyBmaGlyLkFubm90YXRpb24oeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5ub3RlID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdDbGluaWNhbEltcHJlc3Npb24nIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJQUygncmVzb3VyY2VUeXBlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdpZGVudGlmaWVyJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTVignc3RhdHVzJyxleHAsJ0NsaW5pY2FsaW1wcmVzc2lvblN0YXR1cycsQ2xpbmljYWxpbXByZXNzaW9uU3RhdHVzVnNWYWxpZGF0aW9uLCdyJykpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3N0YXR1c1JlYXNvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnY29kZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnZGVzY3JpcHRpb24nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ3N1YmplY3QnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2VuY291bnRlcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnZWZmZWN0aXZlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdkYXRlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdhc3Nlc3NvcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygncHJldmlvdXMnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3Byb2JsZW0nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2ludmVzdGlnYXRpb24nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3Byb3RvY29sJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdzdW1tYXJ5JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdmaW5kaW5nJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdwcm9nbm9zaXNDb2RlYWJsZUNvbmNlcHQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3Byb2dub3Npc1JlZmVyZW5jZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnc3VwcG9ydGluZ0luZm8nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ25vdGUnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuIl19