// <auto-generated/>
// Contents of: hl7.fhir.r4b.core version: 4.3.0
// Minimum TypeScript Version: 3.7
// FHIR Resource: Medication
import * as fhir from '../fhir.js';
// @ts-ignore
import { MedicationStatusVsValidation } from '../fhirValueSets/MedicationStatusVsValidation.js';
/**
 * The ingredients need not be a complete list.  If an ingredient is not specified, this does not indicate whether an ingredient is present or absent.  If an ingredient is specified it does not mean that all ingredients are specified.  It is possible to specify both inactive and active ingredients.
 */
export class MedicationIngredient extends fhir.BackboneElement {
    /**
     * Default constructor for MedicationIngredient - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['item']) {
            this.item = source.item;
        }
        else if (source['itemCodeableConcept']) {
            this.item = new fhir.CodeableConcept(source.itemCodeableConcept);
        }
        else if (source['itemReference']) {
            this.item = new fhir.Reference(source.itemReference);
        }
        else {
            this.item = null;
        }
        if (source['isActive']) {
            this.isActive = new fhir.FhirBoolean({ value: source.isActive });
        }
        if (source['_isActive']) {
            if (this.isActive) {
                this.isActive.addExtendedProperties(source._isActive);
            }
            else {
                this.isActive = new fhir.FhirBoolean(source._isActive);
            }
        }
        if (source['strength']) {
            this.strength = new fhir.Ratio(source.strength);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Medication.ingredient';
        }
        iss.push(...this.vRS('item', exp));
        iss.push(...this.vOS('isActive', exp));
        iss.push(...this.vOS('strength', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicationIngredient._fts_dataType = 'MedicationIngredient';
/**
 * Internal flag to properly serialize choice-type element Medication.ingredient.item[x]
 */
MedicationIngredient._fts_itemIsChoice = true;
/**
 * Information that only applies to packages (not products).
 */
export class MedicationBatch extends fhir.BackboneElement {
    /**
     * Default constructor for MedicationBatch - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['lotNumber']) {
            this.lotNumber = new fhir.FhirString({ value: source.lotNumber });
        }
        if (source['_lotNumber']) {
            if (this.lotNumber) {
                this.lotNumber.addExtendedProperties(source._lotNumber);
            }
            else {
                this.lotNumber = new fhir.FhirString(source._lotNumber);
            }
        }
        if (source['expirationDate']) {
            this.expirationDate = new fhir.FhirDateTime({ value: source.expirationDate });
        }
        if (source['_expirationDate']) {
            if (this.expirationDate) {
                this.expirationDate.addExtendedProperties(source._expirationDate);
            }
            else {
                this.expirationDate = new fhir.FhirDateTime(source._expirationDate);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Medication.batch';
        }
        iss.push(...this.vOS('lotNumber', exp));
        iss.push(...this.vOS('expirationDate', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicationBatch._fts_dataType = 'MedicationBatch';
/**
 * This resource is primarily used for the identification and definition of a medication for the purposes of prescribing, dispensing, and administering a medication as well as for making statements about medication use.
 */
export class Medication extends fhir.DomainResource {
    /**
     * Default constructor for Medication - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'Medication';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['manufacturer']) {
            this.manufacturer = new fhir.Reference(source.manufacturer);
        }
        if (source['form']) {
            this.form = new fhir.CodeableConcept(source.form);
        }
        if (source['amount']) {
            this.amount = new fhir.Ratio(source.amount);
        }
        if (source['ingredient']) {
            this.ingredient = source.ingredient.map((x) => new fhir.MedicationIngredient(x));
        }
        else {
            this.ingredient = [];
        }
        if (source['batch']) {
            this.batch = new fhir.MedicationBatch(source.batch);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Medication';
        }
        iss.push(...this.vRPS('resourceType', exp));
        iss.push(...this.vOA('identifier', exp));
        iss.push(...this.vOS('code', exp));
        iss.push(...this.vOSV('status', exp, 'MedicationStatus', MedicationStatusVsValidation, 'r'));
        iss.push(...this.vOS('manufacturer', exp));
        iss.push(...this.vOS('form', exp));
        iss.push(...this.vOS('amount', exp));
        iss.push(...this.vOA('ingredient', exp));
        iss.push(...this.vOS('batch', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
Medication._fts_dataType = 'Medication';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVkaWNhdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvTWVkaWNhdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsZ0RBQWdEO0FBQ2hELGtDQUFrQztBQUNsQyw0QkFBNEI7QUFFNUIsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFRbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSw0QkFBNEIsRUFBRSxNQUFNLGtEQUFrRCxDQUFDO0FBbUNoRzs7R0FFRztBQUNILE1BQU0sT0FBTyxvQkFBcUIsU0FBUSxJQUFJLENBQUMsZUFBZTtJQXFCNUQ7O09BRUc7SUFDSCxZQUFZLFNBQTJDLEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQ2pHLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUM7U0FBRTthQUMzQyxJQUFJLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLG1CQUFtQixDQUFDLENBQUM7U0FBRTthQUN4RyxJQUFJLE1BQU0sQ0FBQyxlQUFlLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQztTQUFFO2FBQ3RGO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7U0FBRTtRQUMxQixJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxRQUFRLEVBQUMsQ0FBQyxDQUFD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QUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDeEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbkMsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDOztBQTdFRDs7R0FFRztBQUM2Qix3QkFBYSxHQUFVLFlBQVksQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNGIuY29yZSB2ZXJzaW9uOiA0LjMuMFxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IE1lZGljYXRpb25cclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE1lZGljYXRpb25Db2RlcywgIE1lZGljYXRpb25Db2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTWVkaWNhdGlvbkNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBNZWRpY2F0aW9uVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9NZWRpY2F0aW9uVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBNZWRpY2F0aW9uU3RhdHVzQ29kZXMsICBNZWRpY2F0aW9uU3RhdHVzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL01lZGljYXRpb25TdGF0dXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTWVkaWNhdGlvblN0YXR1c1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTWVkaWNhdGlvblN0YXR1c1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTWVkaWNhdGlvbkZvcm1Db2RlcywgIE1lZGljYXRpb25Gb3JtQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL01lZGljYXRpb25Gb3JtQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE1lZGljYXRpb25Gb3JtVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9NZWRpY2F0aW9uRm9ybVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBNZWRpY2F0aW9uSW5ncmVkaWVudCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNZWRpY2F0aW9uSW5ncmVkaWVudEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBhY3R1YWwgaW5ncmVkaWVudCAtIGVpdGhlciBhIHN1YnN0YW5jZSAoc2ltcGxlIGluZ3JlZGllbnQpIG9yIGFub3RoZXIgbWVkaWNhdGlvbiBvZiBhIG1lZGljYXRpb24uXHJcbiAgICovXHJcbiAgaXRlbT86IGZoaXIuQ29kZWFibGVDb25jZXB0fGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgYWN0dWFsIGluZ3JlZGllbnQgLSBlaXRoZXIgYSBzdWJzdGFuY2UgKHNpbXBsZSBpbmdyZWRpZW50KSBvciBhbm90aGVyIG1lZGljYXRpb24gb2YgYSBtZWRpY2F0aW9uLlxyXG4gICAqL1xyXG4gIGl0ZW1Db2RlYWJsZUNvbmNlcHQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBhY3R1YWwgaW5ncmVkaWVudCAtIGVpdGhlciBhIHN1YnN0YW5jZSAoc2ltcGxlIGluZ3JlZGllbnQpIG9yIGFub3RoZXIgbWVkaWNhdGlvbiBvZiBhIG1lZGljYXRpb24uXHJcbiAgICovXHJcbiAgaXRlbVJlZmVyZW5jZT86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGlvbiBvZiB3aGV0aGVyIHRoaXMgaW5ncmVkaWVudCBhZmZlY3RzIHRoZSB0aGVyYXBldXRpYyBhY3Rpb24gb2YgdGhlIGRydWcuXHJcbiAgICovXHJcbiAgaXNBY3RpdmU/OiBmaGlyLkZoaXJCb29sZWFufGJvb2xlYW58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBNZWRpY2F0aW9uLmluZ3JlZGllbnQuaXNBY3RpdmVcclxuICAgKi9cclxuICBfaXNBY3RpdmU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFNwZWNpZmllcyBob3cgbWFueSAob3IgaG93IG11Y2gpIG9mIHRoZSBpdGVtcyB0aGVyZSBhcmUgaW4gdGhpcyBNZWRpY2F0aW9uLiAgRm9yIGV4YW1wbGUsIDI1MCBtZyBwZXIgdGFibGV0LiAgVGhpcyBpcyBleHByZXNzZWQgYXMgYSByYXRpbyB3aGVyZSB0aGUgbnVtZXJhdG9yIGlzIDI1MG1nIGFuZCB0aGUgZGVub21pbmF0b3IgaXMgMSB0YWJsZXQuXHJcbiAgICovXHJcbiAgc3RyZW5ndGg/OiBmaGlyLlJhdGlvQXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgaW5ncmVkaWVudHMgbmVlZCBub3QgYmUgYSBjb21wbGV0ZSBsaXN0LiAgSWYgYW4gaW5ncmVkaWVudCBpcyBub3Qgc3BlY2lmaWVkLCB0aGlzIGRvZXMgbm90IGluZGljYXRlIHdoZXRoZXIgYW4gaW5ncmVkaWVudCBpcyBwcmVzZW50IG9yIGFic2VudC4gIElmIGFuIGluZ3JlZGllbnQgaXMgc3BlY2lmaWVkIGl0IGRvZXMgbm90IG1lYW4gdGhhdCBhbGwgaW5ncmVkaWVudHMgYXJlIHNwZWNpZmllZC4gIEl0IGlzIHBvc3NpYmxlIHRvIHNwZWNpZnkgYm90aCBpbmFjdGl2ZSBhbmQgYWN0aXZlIGluZ3JlZGllbnRzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1lZGljYXRpb25JbmdyZWRpZW50IGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVkaWNhdGlvbkluZ3JlZGllbnQnO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBhY3R1YWwgaW5ncmVkaWVudCAtIGVpdGhlciBhIHN1YnN0YW5jZSAoc2ltcGxlIGluZ3JlZGllbnQpIG9yIGFub3RoZXIgbWVkaWNhdGlvbiBvZiBhIG1lZGljYXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIGl0ZW06IChmaGlyLkNvZGVhYmxlQ29uY2VwdHxmaGlyLlJlZmVyZW5jZSl8bnVsbDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IE1lZGljYXRpb24uaW5ncmVkaWVudC5pdGVtW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX2l0ZW1Jc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBJbmRpY2F0aW9uIG9mIHdoZXRoZXIgdGhpcyBpbmdyZWRpZW50IGFmZmVjdHMgdGhlIHRoZXJhcGV1dGljIGFjdGlvbiBvZiB0aGUgZHJ1Zy5cclxuICAgKi9cclxuICBwdWJsaWMgaXNBY3RpdmU/OiBmaGlyLkZoaXJCb29sZWFufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTcGVjaWZpZXMgaG93IG1hbnkgKG9yIGhvdyBtdWNoKSBvZiB0aGUgaXRlbXMgdGhlcmUgYXJlIGluIHRoaXMgTWVkaWNhdGlvbi4gIEZvciBleGFtcGxlLCAyNTAgbWcgcGVyIHRhYmxldC4gIFRoaXMgaXMgZXhwcmVzc2VkIGFzIGEgcmF0aW8gd2hlcmUgdGhlIG51bWVyYXRvciBpcyAyNTBtZyBhbmQgdGhlIGRlbm9taW5hdG9yIGlzIDEgdGFibGV0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdHJlbmd0aD86IGZoaXIuUmF0aW98dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE1lZGljYXRpb25JbmdyZWRpZW50IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVkaWNhdGlvbkluZ3JlZGllbnRBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnaXRlbSddKSB7IHRoaXMuaXRlbSA9IHNvdXJjZS5pdGVtOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2l0ZW1Db2RlYWJsZUNvbmNlcHQnXSkgeyB0aGlzLml0ZW0gPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLml0ZW1Db2RlYWJsZUNvbmNlcHQpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2l0ZW1SZWZlcmVuY2UnXSkgeyB0aGlzLml0ZW0gPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLml0ZW1SZWZlcmVuY2UpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pdGVtID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaXNBY3RpdmUnXSkgeyB0aGlzLmlzQWN0aXZlID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oe3ZhbHVlOiBzb3VyY2UuaXNBY3RpdmV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2lzQWN0aXZlJ10pIHtcclxuICAgICAgaWYgKHRoaXMuaXNBY3RpdmUpIHsgdGhpcy5pc0FjdGl2ZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9pc0FjdGl2ZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmlzQWN0aXZlID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oc291cmNlLl9pc0FjdGl2ZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckJvb2xlYW5BcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3N0cmVuZ3RoJ10pIHsgdGhpcy5zdHJlbmd0aCA9IG5ldyBmaGlyLlJhdGlvKHNvdXJjZS5zdHJlbmd0aCk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdNZWRpY2F0aW9uLmluZ3JlZGllbnQnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdpdGVtJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdpc0FjdGl2ZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnc3RyZW5ndGgnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lZGljYXRpb25CYXRjaCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNZWRpY2F0aW9uQmF0Y2hBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgYXNzaWduZWQgbG90IG51bWJlciBvZiBhIGJhdGNoIG9mIHRoZSBzcGVjaWZpZWQgcHJvZHVjdC5cclxuICAgKi9cclxuICBsb3ROdW1iZXI/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogTWVkaWNhdGlvbi5iYXRjaC5sb3ROdW1iZXJcclxuICAgKi9cclxuICBfbG90TnVtYmVyPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBXaGVuIHRoaXMgc3BlY2lmaWMgYmF0Y2ggb2YgcHJvZHVjdCB3aWxsIGV4cGlyZS5cclxuICAgKi9cclxuICBleHBpcmF0aW9uRGF0ZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE1lZGljYXRpb24uYmF0Y2guZXhwaXJhdGlvbkRhdGVcclxuICAgKi9cclxuICBfZXhwaXJhdGlvbkRhdGU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG59XHJcblxyXG4vKipcclxuICogSW5mb3JtYXRpb24gdGhhdCBvbmx5IGFwcGxpZXMgdG8gcGFja2FnZXMgKG5vdCBwcm9kdWN0cykuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNhdGlvbkJhdGNoIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVkaWNhdGlvbkJhdGNoJztcclxuICAvKipcclxuICAgKiBUaGUgYXNzaWduZWQgbG90IG51bWJlciBvZiBhIGJhdGNoIG9mIHRoZSBzcGVjaWZpZWQgcHJvZHVjdC5cclxuICAgKi9cclxuICBwdWJsaWMgbG90TnVtYmVyPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBXaGVuIHRoaXMgc3BlY2lmaWMgYmF0Y2ggb2YgcHJvZHVjdCB3aWxsIGV4cGlyZS5cclxuICAgKi9cclxuICBwdWJsaWMgZXhwaXJhdGlvbkRhdGU/OiBmaGlyLkZoaXJEYXRlVGltZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgTWVkaWNhdGlvbkJhdGNoIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVkaWNhdGlvbkJhdGNoQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2xvdE51bWJlciddKSB7IHRoaXMubG90TnVtYmVyID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5sb3ROdW1iZXJ9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2xvdE51bWJlciddKSB7XHJcbiAgICAgIGlmICh0aGlzLmxvdE51bWJlcikgeyB0aGlzLmxvdE51bWJlci5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9sb3ROdW1iZXIhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5sb3ROdW1iZXIgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fbG90TnVtYmVyIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydleHBpcmF0aW9uRGF0ZSddKSB7IHRoaXMuZXhwaXJhdGlvbkRhdGUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2UuZXhwaXJhdGlvbkRhdGV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2V4cGlyYXRpb25EYXRlJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZXhwaXJhdGlvbkRhdGUpIHsgdGhpcy5leHBpcmF0aW9uRGF0ZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9leHBpcmF0aW9uRGF0ZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmV4cGlyYXRpb25EYXRlID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHNvdXJjZS5fZXhwaXJhdGlvbkRhdGUgYXMgUGFydGlhbDxmaGlyLkZoaXJEYXRlVGltZUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ01lZGljYXRpb24uYmF0Y2gnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdsb3ROdW1iZXInLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2V4cGlyYXRpb25EYXRlJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBNZWRpY2F0aW9uIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lZGljYXRpb25BcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJNZWRpY2F0aW9uXCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzZXJpYWwgbnVtYmVyIGNvdWxkIGJlIGluY2x1ZGVkIGFzIGFuIGlkZW50aWZpZXIuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVwZW5kaW5nIG9uIHRoZSBjb250ZXh0IG9mIHVzZSwgdGhlIGNvZGUgdGhhdCB3YXMgYWN0dWFsbHkgc2VsZWN0ZWQgYnkgdGhlIHVzZXIgKHByZXNjcmliZXIsIGRpc3BlbnNlciwgZXRjLikgd2lsbCBoYXZlIHRoZSBjb2RpbmcudXNlclNlbGVjdGVkIHNldCB0byB0cnVlLiAgQXMgZGVzY3JpYmVkIGluIHRoZSBjb2RpbmcgZGF0YXR5cGU6IFwiQSBjb2RpbmcgbWF5IGJlIG1hcmtlZCBhcyBhIFwidXNlclNlbGVjdGVkXCIgaWYgYSB1c2VyIHNlbGVjdGVkIHRoZSBwYXJ0aWN1bGFyIGNvZGVkIHZhbHVlIGluIGEgdXNlciBpbnRlcmZhY2UgKGUuZy4gdGhlIHVzZXIgc2VsZWN0cyBhbiBpdGVtIGluIGEgcGljay1saXN0KS4gSWYgYSB1c2VyIHNlbGVjdGVkIGNvZGluZyBleGlzdHMsIGl0IGlzIHRoZSBwcmVmZXJyZWQgY2hvaWNlIGZvciBwZXJmb3JtaW5nIHRyYW5zbGF0aW9ucyBldGMuIE90aGVyIGNvZGVzIGNhbiBvbmx5IGJlIGxpdGVyYWwgdHJhbnNsYXRpb25zIHRvIGFsdGVybmF0aXZlIGNvZGUgc3lzdGVtcywgb3IgY29kZXMgYXQgYSBsb3dlciBsZXZlbCBvZiBncmFudWxhcml0eSAoZS5nLiBhIGdlbmVyaWMgY29kZSBmb3IgYSB2ZW5kb3Itc3BlY2lmaWMgcHJpbWFyeSBvbmUpLlxyXG4gICAqL1xyXG4gIGNvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgc3RhdHVzIGlzIGludGVuZGVkIHRvIGlkZW50aWZ5IGlmIHRoZSBtZWRpY2F0aW9uIGluIGEgbG9jYWwgc3lzdGVtIGlzIGluIGFjdGl2ZSB1c2Ugd2l0aGluIGEgZHJ1ZyBkYXRhYmFzZSBvciBpbnZlbnRvcnkuICBGb3IgZXhhbXBsZSwgYSBwaGFybWFjeSBzeXN0ZW0gbWF5IGNyZWF0ZSBhIG5ldyBkcnVnIGZpbGUgcmVjb3JkIGZvciBhIGNvbXBvdW5kZWQgcHJvZHVjdCBcIkFCQyBIb3NwaXRhbCBTcGVjaWFsIENyZWFtXCIgd2l0aCBhbiBhY3RpdmUgc3RhdHVzLiAgQXQgc29tZSBwb2ludCBpbiB0aGUgZnV0dXJlLCBpdCBtYXkgYmUgZGV0ZXJtaW5lZCB0aGF0IHRoZSBkcnVnIHJlY29yZCB3YXMgY3JlYXRlZCB3aXRoIGFuIGVycm9yIGFuZCB0aGUgc3RhdHVzIGlzIGNoYW5nZWQgdG8gXCJlbnRlcmVkIGluIGVycm9yXCIuICAgVGhpcyBzdGF0dXMgaXMgbm90IGludGVuZGVkIHRvIHNwZWNpZnkgaWYgYSBtZWRpY2F0aW9uIGlzIHBhcnQgb2YgYSBwYXJ0aWN1bGFyIGZvcm11bGFyeS4gIEl0IGlzIHBvc3NpYmxlIHRoYXQgdGhlIGRydWcgcmVjb3JkIG1heSBiZSByZWZlcmVuY2VkIGJ5IG11bHRpcGxlIGZvcm11bGFyaWVzIG9yIGNhdGFsb2d1ZXMgYW5kIGVhY2ggb2YgdGhvc2UgZW50cmllcyB3b3VsZCBoYXZlIGEgc2VwYXJhdGUgc3RhdHVzLlxyXG4gICAqL1xyXG4gIHN0YXR1cz86IGZoaXIuRmhpckNvZGU8TWVkaWNhdGlvblN0YXR1c0NvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBNZWRpY2F0aW9uLnN0YXR1c1xyXG4gICAqL1xyXG4gIF9zdGF0dXM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB0aGUgZGV0YWlscyBvZiB0aGUgbWFudWZhY3R1cmVyIG9mIHRoZSBtZWRpY2F0aW9uIHByb2R1Y3QuICBUaGlzIGlzIG5vdCBpbnRlbmRlZCB0byByZXByZXNlbnQgdGhlIGRpc3RyaWJ1dG9yIG9mIGEgbWVkaWNhdGlvbiBwcm9kdWN0LlxyXG4gICAqL1xyXG4gIG1hbnVmYWN0dXJlcj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogV2hlbiBNZWRpY2F0aW9uIGlzIHJlZmVyZW5jZWQgZnJvbSBNZWRpY2F0aW9uUmVxdWVzdCwgdGhpcyBpcyB0aGUgb3JkZXJlZCBmb3JtLiAgV2hlbiBNZWRpY2F0aW9uIGlzIHJlZmVyZW5jZWQgd2l0aGluIE1lZGljYXRpb25EaXNwZW5zZSwgdGhpcyBpcyB0aGUgZGlzcGVuc2VkIGZvcm0uICBXaGVuIE1lZGljYXRpb24gaXMgcmVmZXJlbmNlZCB3aXRoaW4gTWVkaWNhdGlvbkFkbWluaXN0cmF0aW9uLCB0aGlzIGlzIGFkbWluaXN0ZXJlZCBmb3JtLlxyXG4gICAqL1xyXG4gIGZvcm0/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFNwZWNpZmljIGFtb3VudCBvZiB0aGUgZHJ1ZyBpbiB0aGUgcGFja2FnZWQgcHJvZHVjdC4gIEZvciBleGFtcGxlLCB3aGVuIHNwZWNpZnlpbmcgYSBwcm9kdWN0IHRoYXQgaGFzIHRoZSBzYW1lIHN0cmVuZ3RoIChGb3IgZXhhbXBsZSwgSW5zdWxpbiBnbGFyZ2luZSAxMDAgdW5pdCBwZXIgbUwgc29sdXRpb24gZm9yIGluamVjdGlvbiksIHRoaXMgYXR0cmlidXRlIHByb3ZpZGVzIGFkZGl0aW9uYWwgY2xhcmlmaWNhdGlvbiBvZiB0aGUgcGFja2FnZSBhbW91bnQgKEZvciBleGFtcGxlLCAzIG1MLCAxMG1MLCBldGMuKS5cclxuICAgKi9cclxuICBhbW91bnQ/OiBmaGlyLlJhdGlvQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGluZ3JlZGllbnRzIG5lZWQgbm90IGJlIGEgY29tcGxldGUgbGlzdC4gIElmIGFuIGluZ3JlZGllbnQgaXMgbm90IHNwZWNpZmllZCwgdGhpcyBkb2VzIG5vdCBpbmRpY2F0ZSB3aGV0aGVyIGFuIGluZ3JlZGllbnQgaXMgcHJlc2VudCBvciBhYnNlbnQuICBJZiBhbiBpbmdyZWRpZW50IGlzIHNwZWNpZmllZCBpdCBkb2VzIG5vdCBtZWFuIHRoYXQgYWxsIGluZ3JlZGllbnRzIGFyZSBzcGVjaWZpZWQuICBJdCBpcyBwb3NzaWJsZSB0byBzcGVjaWZ5IGJvdGggaW5hY3RpdmUgYW5kIGFjdGl2ZSBpbmdyZWRpZW50cy5cclxuICAgKi9cclxuICBpbmdyZWRpZW50PzogZmhpci5NZWRpY2F0aW9uSW5ncmVkaWVudEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5mb3JtYXRpb24gdGhhdCBvbmx5IGFwcGxpZXMgdG8gcGFja2FnZXMgKG5vdCBwcm9kdWN0cykuXHJcbiAgICovXHJcbiAgYmF0Y2g/OiBmaGlyLk1lZGljYXRpb25CYXRjaEFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogVGhpcyByZXNvdXJjZSBpcyBwcmltYXJpbHkgdXNlZCBmb3IgdGhlIGlkZW50aWZpY2F0aW9uIGFuZCBkZWZpbml0aW9uIG9mIGEgbWVkaWNhdGlvbiBmb3IgdGhlIHB1cnBvc2VzIG9mIHByZXNjcmliaW5nLCBkaXNwZW5zaW5nLCBhbmQgYWRtaW5pc3RlcmluZyBhIG1lZGljYXRpb24gYXMgd2VsbCBhcyBmb3IgbWFraW5nIHN0YXRlbWVudHMgYWJvdXQgbWVkaWNhdGlvbiB1c2UuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNhdGlvbiBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVkaWNhdGlvbic7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJNZWRpY2F0aW9uXCI7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNlcmlhbCBudW1iZXIgY291bGQgYmUgaW5jbHVkZWQgYXMgYW4gaWRlbnRpZmllci5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcjogZmhpci5JZGVudGlmaWVyW107XHJcbiAgLyoqXHJcbiAgICogRGVwZW5kaW5nIG9uIHRoZSBjb250ZXh0IG9mIHVzZSwgdGhlIGNvZGUgdGhhdCB3YXMgYWN0dWFsbHkgc2VsZWN0ZWQgYnkgdGhlIHVzZXIgKHByZXNjcmliZXIsIGRpc3BlbnNlciwgZXRjLikgd2lsbCBoYXZlIHRoZSBjb2RpbmcudXNlclNlbGVjdGVkIHNldCB0byB0cnVlLiAgQXMgZGVzY3JpYmVkIGluIHRoZSBjb2RpbmcgZGF0YXR5cGU6IFwiQSBjb2RpbmcgbWF5IGJlIG1hcmtlZCBhcyBhIFwidXNlclNlbGVjdGVkXCIgaWYgYSB1c2VyIHNlbGVjdGVkIHRoZSBwYXJ0aWN1bGFyIGNvZGVkIHZhbHVlIGluIGEgdXNlciBpbnRlcmZhY2UgKGUuZy4gdGhlIHVzZXIgc2VsZWN0cyBhbiBpdGVtIGluIGEgcGljay1saXN0KS4gSWYgYSB1c2VyIHNlbGVjdGVkIGNvZGluZyBleGlzdHMsIGl0IGlzIHRoZSBwcmVmZXJyZWQgY2hvaWNlIGZvciBwZXJmb3JtaW5nIHRyYW5zbGF0aW9ucyBldGMuIE90aGVyIGNvZGVzIGNhbiBvbmx5IGJlIGxpdGVyYWwgdHJhbnNsYXRpb25zIHRvIGFsdGVybmF0aXZlIGNvZGUgc3lzdGVtcywgb3IgY29kZXMgYXQgYSBsb3dlciBsZXZlbCBvZiBncmFudWxhcml0eSAoZS5nLiBhIGdlbmVyaWMgY29kZSBmb3IgYSB2ZW5kb3Itc3BlY2lmaWMgcHJpbWFyeSBvbmUpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb2RlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgc3RhdHVzIGlzIGludGVuZGVkIHRvIGlkZW50aWZ5IGlmIHRoZSBtZWRpY2F0aW9uIGluIGEgbG9jYWwgc3lzdGVtIGlzIGluIGFjdGl2ZSB1c2Ugd2l0aGluIGEgZHJ1ZyBkYXRhYmFzZSBvciBpbnZlbnRvcnkuICBGb3IgZXhhbXBsZSwgYSBwaGFybWFjeSBzeXN0ZW0gbWF5IGNyZWF0ZSBhIG5ldyBkcnVnIGZpbGUgcmVjb3JkIGZvciBhIGNvbXBvdW5kZWQgcHJvZHVjdCBcIkFCQyBIb3NwaXRhbCBTcGVjaWFsIENyZWFtXCIgd2l0aCBhbiBhY3RpdmUgc3RhdHVzLiAgQXQgc29tZSBwb2ludCBpbiB0aGUgZnV0dXJlLCBpdCBtYXkgYmUgZGV0ZXJtaW5lZCB0aGF0IHRoZSBkcnVnIHJlY29yZCB3YXMgY3JlYXRlZCB3aXRoIGFuIGVycm9yIGFuZCB0aGUgc3RhdHVzIGlzIGNoYW5nZWQgdG8gXCJlbnRlcmVkIGluIGVycm9yXCIuICAgVGhpcyBzdGF0dXMgaXMgbm90IGludGVuZGVkIHRvIHNwZWNpZnkgaWYgYSBtZWRpY2F0aW9uIGlzIHBhcnQgb2YgYSBwYXJ0aWN1bGFyIGZvcm11bGFyeS4gIEl0IGlzIHBvc3NpYmxlIHRoYXQgdGhlIGRydWcgcmVjb3JkIG1heSBiZSByZWZlcmVuY2VkIGJ5IG11bHRpcGxlIGZvcm11bGFyaWVzIG9yIGNhdGFsb2d1ZXMgYW5kIGVhY2ggb2YgdGhvc2UgZW50cmllcyB3b3VsZCBoYXZlIGEgc2VwYXJhdGUgc3RhdHVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0dXM/OiBmaGlyLkZoaXJDb2RlPE1lZGljYXRpb25TdGF0dXNDb2RlVHlwZT58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB0aGUgZGV0YWlscyBvZiB0aGUgbWFudWZhY3R1cmVyIG9mIHRoZSBtZWRpY2F0aW9uIHByb2R1Y3QuICBUaGlzIGlzIG5vdCBpbnRlbmRlZCB0byByZXByZXNlbnQgdGhlIGRpc3RyaWJ1dG9yIG9mIGEgbWVkaWNhdGlvbiBwcm9kdWN0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtYW51ZmFjdHVyZXI/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogV2hlbiBNZWRpY2F0aW9uIGlzIHJlZmVyZW5jZWQgZnJvbSBNZWRpY2F0aW9uUmVxdWVzdCwgdGhpcyBpcyB0aGUgb3JkZXJlZCBmb3JtLiAgV2hlbiBNZWRpY2F0aW9uIGlzIHJlZmVyZW5jZWQgd2l0aGluIE1lZGljYXRpb25EaXNwZW5zZSwgdGhpcyBpcyB0aGUgZGlzcGVuc2VkIGZvcm0uICBXaGVuIE1lZGljYXRpb24gaXMgcmVmZXJlbmNlZCB3aXRoaW4gTWVkaWNhdGlvbkFkbWluaXN0cmF0aW9uLCB0aGlzIGlzIGFkbWluaXN0ZXJlZCBmb3JtLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBmb3JtPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFNwZWNpZmljIGFtb3VudCBvZiB0aGUgZHJ1ZyBpbiB0aGUgcGFja2FnZWQgcHJvZHVjdC4gIEZvciBleGFtcGxlLCB3aGVuIHNwZWNpZnlpbmcgYSBwcm9kdWN0IHRoYXQgaGFzIHRoZSBzYW1lIHN0cmVuZ3RoIChGb3IgZXhhbXBsZSwgSW5zdWxpbiBnbGFyZ2luZSAxMDAgdW5pdCBwZXIgbUwgc29sdXRpb24gZm9yIGluamVjdGlvbiksIHRoaXMgYXR0cmlidXRlIHByb3ZpZGVzIGFkZGl0aW9uYWwgY2xhcmlmaWNhdGlvbiBvZiB0aGUgcGFja2FnZSBhbW91bnQgKEZvciBleGFtcGxlLCAzIG1MLCAxMG1MLCBldGMuKS5cclxuICAgKi9cclxuICBwdWJsaWMgYW1vdW50PzogZmhpci5SYXRpb3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGluZ3JlZGllbnRzIG5lZWQgbm90IGJlIGEgY29tcGxldGUgbGlzdC4gIElmIGFuIGluZ3JlZGllbnQgaXMgbm90IHNwZWNpZmllZCwgdGhpcyBkb2VzIG5vdCBpbmRpY2F0ZSB3aGV0aGVyIGFuIGluZ3JlZGllbnQgaXMgcHJlc2VudCBvciBhYnNlbnQuICBJZiBhbiBpbmdyZWRpZW50IGlzIHNwZWNpZmllZCBpdCBkb2VzIG5vdCBtZWFuIHRoYXQgYWxsIGluZ3JlZGllbnRzIGFyZSBzcGVjaWZpZWQuICBJdCBpcyBwb3NzaWJsZSB0byBzcGVjaWZ5IGJvdGggaW5hY3RpdmUgYW5kIGFjdGl2ZSBpbmdyZWRpZW50cy5cclxuICAgKi9cclxuICBwdWJsaWMgaW5ncmVkaWVudDogZmhpci5NZWRpY2F0aW9uSW5ncmVkaWVudFtdO1xyXG4gIC8qKlxyXG4gICAqIEluZm9ybWF0aW9uIHRoYXQgb25seSBhcHBsaWVzIHRvIHBhY2thZ2VzIChub3QgcHJvZHVjdHMpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBiYXRjaD86IGZoaXIuTWVkaWNhdGlvbkJhdGNofHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBNZWRpY2F0aW9uIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TWVkaWNhdGlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdNZWRpY2F0aW9uJztcclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBzb3VyY2UuaWRlbnRpZmllci5tYXAoKHgpID0+IG5ldyBmaGlyLklkZW50aWZpZXIoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pZGVudGlmaWVyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvZGUnXSkgeyB0aGlzLmNvZGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmNvZGUpOyB9XHJcbiAgICBpZiAoc291cmNlWydzdGF0dXMnXSkgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPE1lZGljYXRpb25TdGF0dXNDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2Uuc3RhdHVzfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zdGF0dXMnXSkge1xyXG4gICAgICBpZiAodGhpcy5zdGF0dXMpIHsgdGhpcy5zdGF0dXMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc3RhdHVzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8TWVkaWNhdGlvblN0YXR1c0NvZGVUeXBlPihzb3VyY2UuX3N0YXR1cyBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnbWFudWZhY3R1cmVyJ10pIHsgdGhpcy5tYW51ZmFjdHVyZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLm1hbnVmYWN0dXJlcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ2Zvcm0nXSkgeyB0aGlzLmZvcm0gPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmZvcm0pOyB9XHJcbiAgICBpZiAoc291cmNlWydhbW91bnQnXSkgeyB0aGlzLmFtb3VudCA9IG5ldyBmaGlyLlJhdGlvKHNvdXJjZS5hbW91bnQpOyB9XHJcbiAgICBpZiAoc291cmNlWydpbmdyZWRpZW50J10pIHsgdGhpcy5pbmdyZWRpZW50ID0gc291cmNlLmluZ3JlZGllbnQubWFwKCh4KSA9PiBuZXcgZmhpci5NZWRpY2F0aW9uSW5ncmVkaWVudCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmluZ3JlZGllbnQgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYmF0Y2gnXSkgeyB0aGlzLmJhdGNoID0gbmV3IGZoaXIuTWVkaWNhdGlvbkJhdGNoKHNvdXJjZS5iYXRjaCk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdNZWRpY2F0aW9uJyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUFMoJ3Jlc291cmNlVHlwZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnaWRlbnRpZmllcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnY29kZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPU1YoJ3N0YXR1cycsZXhwLCdNZWRpY2F0aW9uU3RhdHVzJyxNZWRpY2F0aW9uU3RhdHVzVnNWYWxpZGF0aW9uLCdyJykpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ21hbnVmYWN0dXJlcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnZm9ybScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnYW1vdW50JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdpbmdyZWRpZW50JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdiYXRjaCcsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4iXX0=