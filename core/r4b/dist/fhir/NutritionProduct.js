// <auto-generated/>
// Contents of: hl7.fhir.r4b.core version: 4.3.0
// Minimum TypeScript Version: 3.7
// FHIR Resource: NutritionProduct
import * as fhir from '../fhir.js';
// @ts-ignore
import { NutritionproductStatusVsValidation } from '../fhirValueSets/NutritionproductStatusVsValidation.js';
/**
 * Note: This is a business identifier, not a resource identifier (see [discussion](resource.html#identifiers)).  It is best practice for the identifier to only appear on a single resource instance, however business practices may occasionally dictate that multiple resource instances with the same identifier can exist - possibly even with different resource types.  For example, multiple Patient and a Person resource instance might share the same social insurance number.
 */
export class NutritionProductNutrient extends fhir.BackboneElement {
    /**
     * Default constructor for NutritionProductNutrient - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['item']) {
            this.item = new fhir.CodeableReference(source.item);
        }
        if (source['amount']) {
            this.amount = source.amount.map((x) => new fhir.Ratio(x));
        }
        else {
            this.amount = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'NutritionProduct.nutrient';
        }
        this.vOS('item', exp);
        this.vOA('amount', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
NutritionProductNutrient._fts_dataType = 'NutritionProductNutrient';
/**
 * Ingredients contained in this product.
 */
export class NutritionProductIngredient extends fhir.BackboneElement {
    /**
     * Default constructor for NutritionProductIngredient - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['item']) {
            this.item = new fhir.CodeableReference(source.item);
        }
        else {
            this.item = null;
        }
        if (source['amount']) {
            this.amount = source.amount.map((x) => new fhir.Ratio(x));
        }
        else {
            this.amount = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'NutritionProduct.ingredient';
        }
        this.vRS('item', exp);
        this.vOA('amount', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
NutritionProductIngredient._fts_dataType = 'NutritionProductIngredient';
/**
 * Specifies descriptive properties of the nutrition product.
 */
export class NutritionProductProductCharacteristic extends fhir.BackboneElement {
    /**
     * Default constructor for NutritionProductProductCharacteristic - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type);
        }
        else {
            this.type = null;
        }
        if (source['value']) {
            this.value = source.value;
        }
        else if (source['valueCodeableConcept']) {
            this.value = new fhir.CodeableConcept(source.valueCodeableConcept);
        }
        else if (source['valueString']) {
            this.value = new fhir.FhirString({ value: source.valueString });
        }
        else if (source['valueQuantity']) {
            this.value = new fhir.Quantity(source.valueQuantity);
        }
        else if (source['valueBase64Binary']) {
            this.value = new fhir.FhirBase64Binary({ value: source.valueBase64Binary });
        }
        else if (source['valueAttachment']) {
            this.value = new fhir.Attachment(source.valueAttachment);
        }
        else if (source['valueBoolean']) {
            this.value = new fhir.FhirBoolean({ value: source.valueBoolean });
        }
        else {
            this.value = null;
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'NutritionProduct.productCharacteristic';
        }
        this.vRS('type', exp);
        this.vRS('value', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
NutritionProductProductCharacteristic._fts_dataType = 'NutritionProductProductCharacteristic';
/**
 * Internal flag to properly serialize choice-type element NutritionProduct.productCharacteristic.value[x]
 */
NutritionProductProductCharacteristic._fts_valueIsChoice = true;
/**
 * Conveys instance-level information about this product item. One or several physical, countable instances or occurrences of the product.
 */
export class NutritionProductInstance extends fhir.BackboneElement {
    /**
     * Default constructor for NutritionProductInstance - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['quantity']) {
            this.quantity = new fhir.Quantity(source.quantity);
        }
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['lotNumber']) {
            this.lotNumber = new fhir.FhirString({ value: source.lotNumber });
        }
        if (source['_lotNumber']) {
            if (this.lotNumber) {
                this.lotNumber.addExtendedProperties(source._lotNumber);
            }
            else {
                this.lotNumber = new fhir.FhirString(source._lotNumber);
            }
        }
        if (source['expiry']) {
            this.expiry = new fhir.FhirDateTime({ value: source.expiry });
        }
        if (source['_expiry']) {
            if (this.expiry) {
                this.expiry.addExtendedProperties(source._expiry);
            }
            else {
                this.expiry = new fhir.FhirDateTime(source._expiry);
            }
        }
        if (source['useBy']) {
            this.useBy = new fhir.FhirDateTime({ value: source.useBy });
        }
        if (source['_useBy']) {
            if (this.useBy) {
                this.useBy.addExtendedProperties(source._useBy);
            }
            else {
                this.useBy = new fhir.FhirDateTime(source._useBy);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'NutritionProduct.instance';
        }
        this.vOS('quantity', exp);
        this.vOA('identifier', exp);
        this.vOS('lotNumber', exp);
        this.vOS('expiry', exp);
        this.vOS('useBy', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
NutritionProductInstance._fts_dataType = 'NutritionProductInstance';
/**
 * A food or fluid product that is consumed by patients.
 */
export class NutritionProduct extends fhir.DomainResource {
    /**
     * Default constructor for NutritionProduct - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'NutritionProduct';
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['category']) {
            this.category = source.category.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.category = [];
        }
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        if (source['manufacturer']) {
            this.manufacturer = source.manufacturer.map((x) => new fhir.Reference(x));
        }
        else {
            this.manufacturer = [];
        }
        if (source['nutrient']) {
            this.nutrient = source.nutrient.map((x) => new fhir.NutritionProductNutrient(x));
        }
        else {
            this.nutrient = [];
        }
        if (source['ingredient']) {
            this.ingredient = source.ingredient.map((x) => new fhir.NutritionProductIngredient(x));
        }
        else {
            this.ingredient = [];
        }
        if (source['knownAllergen']) {
            this.knownAllergen = source.knownAllergen.map((x) => new fhir.CodeableReference(x));
        }
        else {
            this.knownAllergen = [];
        }
        if (source['productCharacteristic']) {
            this.productCharacteristic = source.productCharacteristic.map((x) => new fhir.NutritionProductProductCharacteristic(x));
        }
        else {
            this.productCharacteristic = [];
        }
        if (source['instance']) {
            this.instance = new fhir.NutritionProductInstance(source.instance);
        }
        if (source['note']) {
            this.note = source.note.map((x) => new fhir.Annotation(x));
        }
        else {
            this.note = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'NutritionProduct';
        }
        this.vRS('resourceType', exp);
        this.vRSV('status', exp, 'NutritionproductStatus', NutritionproductStatusVsValidation, 'r');
        this.vOA('category', exp);
        this.vOS('code', exp);
        this.vOA('manufacturer', exp);
        this.vOA('nutrient', exp);
        this.vOA('ingredient', exp);
        this.vOA('knownAllergen', exp);
        this.vOA('productCharacteristic', exp);
        this.vOS('instance', exp);
        this.vOA('note', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
NutritionProduct._fts_dataType = 'NutritionProduct';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTnV0cml0aW9uUHJvZHVjdC5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvTnV0cml0aW9uUHJvZHVjdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsZ0RBQWdEO0FBQ2hELGtDQUFrQztBQUNsQyxrQ0FBa0M7QUFFbEMsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFJbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSxrQ0FBa0MsRUFBRSxNQUFNLHdEQUF3RCxDQUFDO0FBZTVHOztHQUVHO0FBQ0gsTUFBTSxPQUFPLHdCQUF5QixTQUFRLElBQUksQ0FBQyxlQUFlO0lBYWhFOztPQUVHO0lBQ0gsWUFBWSxTQUErQyxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUNyRyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7U0FBRTtRQUM1RSxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDL0U7WUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQztTQUFFO0lBQzVCLENBQUM7SUFDRDs7T0FFRztJQUNhLGlCQUFpQixDQUFDLE1BQWEsRUFBRTtRQUMvQyxJQUFJLE1BQU0sR0FBbUIsS0FBSyxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzFELElBQUksR0FBRyxLQUFLLEVBQUUsRUFBRTtZQUFFLEdBQUcsR0FBRywyQkFBMkIsQ0FBQTtTQUFFO1FBQ3JELElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ3BCLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ3RCLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBOUJEOztHQUVHO0FBQzZCLHNDQUFhLEdBQVUsMEJBQTBCLENBQUM7QUEyQ3BGOztHQUVHO0FBQ0gsTUFBTSxPQUFPLDBCQUEyQixTQUFRLElBQUksQ0FBQyxlQUFlO0lBYWxFOztPQUVHO0lBQ0gsWUFBWSxTQUFpRCxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUN2RyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7U0FBRTthQUN2RTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDMUIsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQy9FO1lBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUM7U0FBRTtJQUM1QixDQUFDO0lBQ0Q7O09BRUc7SUFDYSxpQkFBaUIsQ0FBQyxNQUFhLEVBQUU7UUFDL0MsSUFBSSxNQUFNLEdBQW1CLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUMxRCxJQUFJLEdBQUcsS0FBSyxFQUFFLEVBQUU7WUFBRSxHQUFHLEdBQUcsNkJBQTZCLENBQUE7U0FBRTtRQUN2RCxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUNwQixJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUN0QixPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQS9CRDs7R0FFRztBQUM2Qix3Q0FBYSxHQUFVLDRCQUE0QixDQUFDO0FBb0V0Rjs7R0FFRztBQUNILE1BQU0sT0FBTyxxQ0FBc0MsU0FBUSxJQUFJLENBQUMsZUFBZTtJQWlCN0U7O09BRUc7SUFDSCxZQUFZLFNBQTRELEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQ2xILEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7U0FBRTthQUNyRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDMUIsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUM7U0FBRTthQUM5QyxJQUFJLE1BQU0sQ0FBQyxzQkFBc0IsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLG9CQUFvQixDQUFDLENBQUM7U0FBRTthQUMzRyxJQUFJLE1BQU0sQ0FBQyxhQUFhLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxXQUFXLEVBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDN0YsSUFBSSxNQUFNLENBQUMsZUFBZSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUM7U0FBRTthQUN0RixJQUFJLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsaUJBQWlCLEVBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDL0csSUFBSSxNQUFNLENBQUMsaUJBQWlCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxlQUFlLENBQUMsQ0FBQztTQUFFO2FBQzVGLElBQUksTUFBTSxDQUFDLGNBQWMsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLFlBQVksRUFBQyxDQUFDLENBQUM7U0FBRTthQUNoRztZQUFFLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO1NBQUU7SUFDN0IsQ0FBQztJQUNEOztPQUVHO0lBQ2EsaUJBQWlCLENBQUMsTUFBYSxFQUFFO1FBQy9DLElBQUksTUFBTSxHQUFtQixLQUFLLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDMUQsSUFBSSxHQUFHLEtBQUssRUFBRSxFQUFFO1lBQUUsR0FBRyxHQUFHLHdDQUF3QyxDQUFBO1NBQUU7UUFDbEUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDcEIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDckIsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQzs7QUF6Q0Q7O0dBRUc7QUFDNkIsbURBQWEsR0FBVSx1Q0FBdUMsQ0FBQztBQVMvRjs7R0FFRztBQUN1Qix3REFBa0IsR0FBUSxJQUFJLENBQUM7QUFrRTNEOztHQUVHO0FBQ0gsTUFBTSxPQUFPLHdCQUF5QixTQUFRLElBQUksQ0FBQyxlQUFlO0lBeUJoRTs7T0FFRztJQUNILFlBQVksU0FBK0MsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDckcsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztTQUFFO1FBQy9FLElBQUksTUFBTSxDQUFDLFlBQVksQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUNoRztZQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsRUFBRSxDQUFDO1NBQUU7UUFDOUIsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsU0FBUyxFQUFDLENBQUMsQ0FBQztTQUFFO1FBQzdGLElBQUksTUFBTSxDQUFDLFlBQVksQ0FBQyxFQUFFO1lBQ3hCLElBQUksSUFBSSxDQUFDLFNBQVMsRUFBRTtnQkFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxVQUFXLENBQUMsQ0FBQzthQUFFO2lCQUM1RTtnQkFBRSxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsVUFBMEMsQ0FBQyxDQUFDO2FBQUU7U0FDbEc7UUFDRCxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxNQUFNLEVBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDdEYsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFDckIsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO2dCQUFFLElBQUksQ0FBQyxNQUFNLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLE9BQVEsQ0FBQyxDQUFDO2FBQUU7aUJBQ25FO2dCQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxPQUF5QyxDQUFDLENBQUM7YUFBRTtTQUNoRztRQUNELElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLEtBQUssRUFBQyxDQUFDLENBQUM7U0FBRTtRQUNuRixJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUNwQixJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUU7Z0JBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsTUFBTyxDQUFDLENBQUM7YUFBRTtpQkFDaEU7Z0JBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLE1BQXdDLENBQUMsQ0FBQzthQUFFO1NBQzlGO0lBQ0gsQ0FBQztJQUNEOztPQUVHO0lBQ2EsaUJBQWlCLENBQUMsTUFBYSxFQUFFO1FBQy9DLElBQUksTUFBTSxHQUFtQixLQUFLLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDMUQsSUFBSSxHQUFHLEtBQUssRUFBRSxFQUFFO1lBQUUsR0FBRyxHQUFHLDJCQUEyQixDQUFBO1NBQUU7UUFDckQsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDeEIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDMUIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDekIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDdEIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDckIsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQzs7QUE1REQ7O0dBRUc7QUFDNkIsc0NBQWEsR0FBVSwwQkFBMEIsQ0FBQztBQWlIcEY7O0dBRUc7QUFDSCxNQUFNLE9BQU8sZ0JBQWlCLFNBQVEsSUFBSSxDQUFDLGNBQWM7SUFpRHZEOztPQUVHO0lBQ0gsWUFBWSxTQUF1QyxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUM3RixLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxZQUFZLEdBQUcsa0JBQWtCLENBQUM7UUFDdkMsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBaUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLE1BQU0sRUFBQyxDQUFDLENBQUM7U0FBRTthQUM3RztZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDNUIsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFDckIsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO2dCQUFFLElBQUksQ0FBQyxNQUFNLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLE9BQVEsQ0FBQyxDQUFDO2FBQUU7aUJBQ25FO2dCQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFpQyxNQUFNLENBQUMsT0FBaUMsQ0FBQyxDQUFDO2FBQUU7U0FDcEg7UUFDRCxJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDL0Y7WUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztTQUFFO1FBQzVCLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQUU7UUFDMUUsSUFBSSxNQUFNLENBQUMsY0FBYyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsWUFBWSxHQUFHLE1BQU0sQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQ3JHO1lBQUUsSUFBSSxDQUFDLFlBQVksR0FBRyxFQUFFLENBQUM7U0FBRTtRQUNoQyxJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLHdCQUF3QixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUN4RztZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO1NBQUU7UUFDNUIsSUFBSSxNQUFNLENBQUMsWUFBWSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDaEg7WUFBRSxJQUFJLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQztTQUFFO1FBQzlCLElBQUksTUFBTSxDQUFDLGVBQWUsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLGFBQWEsR0FBRyxNQUFNLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQ2hIO1lBQUUsSUFBSSxDQUFDLGFBQWEsR0FBRyxFQUFFLENBQUM7U0FBRTtRQUNqQyxJQUFJLE1BQU0sQ0FBQyx1QkFBdUIsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLHFCQUFxQixHQUFHLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLHFDQUFxQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTthQUM1SjtZQUFFLElBQUksQ0FBQyxxQkFBcUIsR0FBRyxFQUFFLENBQUM7U0FBRTtRQUN6QyxJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsd0JBQXdCLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQUU7UUFDL0YsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQzlFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUM7U0FBRTtJQUMxQixDQUFDO0lBQ0Q7O09BRUc7SUFDYSxpQkFBaUIsQ0FBQyxNQUFhLEVBQUU7UUFDL0MsSUFBSSxNQUFNLEdBQW1CLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUMxRCxJQUFJLEdBQUcsS0FBSyxFQUFFLEVBQUU7WUFBRSxHQUFHLEdBQUcsa0JBQWtCLENBQUE7U0FBRTtRQUM1QyxJQUFJLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUM1QixJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBQyxHQUFHLEVBQUMsd0JBQXdCLEVBQUMsa0NBQWtDLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDdkYsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDeEIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDcEIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDNUIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDeEIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDMUIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxlQUFlLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDN0IsSUFBSSxDQUFDLEdBQUcsQ0FBQyx1QkFBdUIsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUNyQyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUN4QixJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUNwQixPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQS9GRDs7R0FFRztBQUM2Qiw4QkFBYSxHQUFVLGtCQUFrQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0Yi5jb3JlIHZlcnNpb246IDQuMy4wXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogTnV0cml0aW9uUHJvZHVjdFxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTnV0cml0aW9ucHJvZHVjdFN0YXR1c0NvZGVzLCAgTnV0cml0aW9ucHJvZHVjdFN0YXR1c0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9OdXRyaXRpb25wcm9kdWN0U3RhdHVzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE51dHJpdGlvbnByb2R1Y3RTdGF0dXNWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL051dHJpdGlvbnByb2R1Y3RTdGF0dXNWc1ZhbGlkYXRpb24uanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgTnV0cml0aW9uUHJvZHVjdE51dHJpZW50IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE51dHJpdGlvblByb2R1Y3ROdXRyaWVudEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSAocmVsZXZhbnQpIG51dHJpZW50cyBpbiB0aGUgcHJvZHVjdC5cclxuICAgKi9cclxuICBpdGVtPzogZmhpci5Db2RlYWJsZVJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBhbW91bnQgb2YgbnV0cmllbnQgZXhwcmVzc2VkIGluIG9uZSBvciBtb3JlIHVuaXRzOiBYIHBlciBwYWNrIC8gcGVyIHNlcnZpbmcgLyBwZXIgZG9zZS5cclxuICAgKi9cclxuICBhbW91bnQ/OiBmaGlyLlJhdGlvQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIE5vdGU6IFRoaXMgaXMgYSBidXNpbmVzcyBpZGVudGlmaWVyLCBub3QgYSByZXNvdXJjZSBpZGVudGlmaWVyIChzZWUgW2Rpc2N1c3Npb25dKHJlc291cmNlLmh0bWwjaWRlbnRpZmllcnMpKS4gIEl0IGlzIGJlc3QgcHJhY3RpY2UgZm9yIHRoZSBpZGVudGlmaWVyIHRvIG9ubHkgYXBwZWFyIG9uIGEgc2luZ2xlIHJlc291cmNlIGluc3RhbmNlLCBob3dldmVyIGJ1c2luZXNzIHByYWN0aWNlcyBtYXkgb2NjYXNpb25hbGx5IGRpY3RhdGUgdGhhdCBtdWx0aXBsZSByZXNvdXJjZSBpbnN0YW5jZXMgd2l0aCB0aGUgc2FtZSBpZGVudGlmaWVyIGNhbiBleGlzdCAtIHBvc3NpYmx5IGV2ZW4gd2l0aCBkaWZmZXJlbnQgcmVzb3VyY2UgdHlwZXMuICBGb3IgZXhhbXBsZSwgbXVsdGlwbGUgUGF0aWVudCBhbmQgYSBQZXJzb24gcmVzb3VyY2UgaW5zdGFuY2UgbWlnaHQgc2hhcmUgdGhlIHNhbWUgc29jaWFsIGluc3VyYW5jZSBudW1iZXIuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTnV0cml0aW9uUHJvZHVjdE51dHJpZW50IGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTnV0cml0aW9uUHJvZHVjdE51dHJpZW50JztcclxuICAvKipcclxuICAgKiBUaGUgKHJlbGV2YW50KSBudXRyaWVudHMgaW4gdGhlIHByb2R1Y3QuXHJcbiAgICovXHJcbiAgcHVibGljIGl0ZW0/OiBmaGlyLkNvZGVhYmxlUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgYW1vdW50IG9mIG51dHJpZW50IGV4cHJlc3NlZCBpbiBvbmUgb3IgbW9yZSB1bml0czogWCBwZXIgcGFjayAvIHBlciBzZXJ2aW5nIC8gcGVyIGRvc2UuXHJcbiAgICovXHJcbiAgcHVibGljIGFtb3VudDogZmhpci5SYXRpb1tdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE51dHJpdGlvblByb2R1Y3ROdXRyaWVudCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE51dHJpdGlvblByb2R1Y3ROdXRyaWVudEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydpdGVtJ10pIHsgdGhpcy5pdGVtID0gbmV3IGZoaXIuQ29kZWFibGVSZWZlcmVuY2Uoc291cmNlLml0ZW0pOyB9XHJcbiAgICBpZiAoc291cmNlWydhbW91bnQnXSkgeyB0aGlzLmFtb3VudCA9IHNvdXJjZS5hbW91bnQubWFwKCh4KSA9PiBuZXcgZmhpci5SYXRpbyh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmFtb3VudCA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnTnV0cml0aW9uUHJvZHVjdC5udXRyaWVudCcgfVxyXG4gICAgdGhpcy52T1MoJ2l0ZW0nLGV4cClcclxuICAgIHRoaXMudk9BKCdhbW91bnQnLGV4cClcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBOdXRyaXRpb25Qcm9kdWN0SW5ncmVkaWVudCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBOdXRyaXRpb25Qcm9kdWN0SW5ncmVkaWVudEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpbmdyZWRpZW50IGNvbnRhaW5lZCBpbiB0aGUgcHJvZHVjdC5cclxuICAgKi9cclxuICBpdGVtOiBmaGlyLkNvZGVhYmxlUmVmZXJlbmNlQXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBhbW91bnQgb2YgaW5ncmVkaWVudCB0aGF0IGlzIGluIHRoZSBwcm9kdWN0LlxyXG4gICAqL1xyXG4gIGFtb3VudD86IGZoaXIuUmF0aW9BcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogSW5ncmVkaWVudHMgY29udGFpbmVkIGluIHRoaXMgcHJvZHVjdC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBOdXRyaXRpb25Qcm9kdWN0SW5ncmVkaWVudCBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ051dHJpdGlvblByb2R1Y3RJbmdyZWRpZW50JztcclxuICAvKipcclxuICAgKiBUaGUgaW5ncmVkaWVudCBjb250YWluZWQgaW4gdGhlIHByb2R1Y3QuXHJcbiAgICovXHJcbiAgcHVibGljIGl0ZW06IGZoaXIuQ29kZWFibGVSZWZlcmVuY2V8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgYW1vdW50IG9mIGluZ3JlZGllbnQgdGhhdCBpcyBpbiB0aGUgcHJvZHVjdC5cclxuICAgKi9cclxuICBwdWJsaWMgYW1vdW50OiBmaGlyLlJhdGlvW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgTnV0cml0aW9uUHJvZHVjdEluZ3JlZGllbnQgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxOdXRyaXRpb25Qcm9kdWN0SW5ncmVkaWVudEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydpdGVtJ10pIHsgdGhpcy5pdGVtID0gbmV3IGZoaXIuQ29kZWFibGVSZWZlcmVuY2Uoc291cmNlLml0ZW0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pdGVtID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYW1vdW50J10pIHsgdGhpcy5hbW91bnQgPSBzb3VyY2UuYW1vdW50Lm1hcCgoeCkgPT4gbmV3IGZoaXIuUmF0aW8oeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5hbW91bnQgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ051dHJpdGlvblByb2R1Y3QuaW5ncmVkaWVudCcgfVxyXG4gICAgdGhpcy52UlMoJ2l0ZW0nLGV4cClcclxuICAgIHRoaXMudk9BKCdhbW91bnQnLGV4cClcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBOdXRyaXRpb25Qcm9kdWN0UHJvZHVjdENoYXJhY3RlcmlzdGljIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE51dHJpdGlvblByb2R1Y3RQcm9kdWN0Q2hhcmFjdGVyaXN0aWNBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBBIGNvZGUgc3BlY2lmeWluZyB3aGljaCBjaGFyYWN0ZXJpc3RpYyBvZiB0aGUgcHJvZHVjdCBpcyBiZWluZyBkZXNjcmliZWQgKGZvciBleGFtcGxlLCBjb2xvdXIsIHNoYXBlKS5cclxuICAgKi9cclxuICB0eXBlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgZGVzY3JpcHRpb24gc2hvdWxkIGJlIHByb3ZpZGVkIGFzIGEgQ29kZWFibGVDb25jZXB0LCBTaW1wbGVRdWFudGl0eSBvciBhbiBpbWFnZS4gIFRoZSBkZXNjcmlwdGlvbiBjYW4gYmUgYSBzdHJpbmcgb25seSB3aGVuIHRoZXNlIG90aGVycyBhcmUgbm90IGF2YWlsYWJsZS5cclxuICAgKi9cclxuICB2YWx1ZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fGZoaXIuRmhpclN0cmluZ3xmaGlyLlF1YW50aXR5fGZoaXIuRmhpckJhc2U2NEJpbmFyeXxmaGlyLkF0dGFjaG1lbnR8Zmhpci5GaGlyQm9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRlc2NyaXB0aW9uIHNob3VsZCBiZSBwcm92aWRlZCBhcyBhIENvZGVhYmxlQ29uY2VwdCwgU2ltcGxlUXVhbnRpdHkgb3IgYW4gaW1hZ2UuICBUaGUgZGVzY3JpcHRpb24gY2FuIGJlIGEgc3RyaW5nIG9ubHkgd2hlbiB0aGVzZSBvdGhlcnMgYXJlIG5vdCBhdmFpbGFibGUuXHJcbiAgICovXHJcbiAgdmFsdWVDb2RlYWJsZUNvbmNlcHQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkZXNjcmlwdGlvbiBzaG91bGQgYmUgcHJvdmlkZWQgYXMgYSBDb2RlYWJsZUNvbmNlcHQsIFNpbXBsZVF1YW50aXR5IG9yIGFuIGltYWdlLiAgVGhlIGRlc2NyaXB0aW9uIGNhbiBiZSBhIHN0cmluZyBvbmx5IHdoZW4gdGhlc2Ugb3RoZXJzIGFyZSBub3QgYXZhaWxhYmxlLlxyXG4gICAqL1xyXG4gIHZhbHVlU3RyaW5nPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRlc2NyaXB0aW9uIHNob3VsZCBiZSBwcm92aWRlZCBhcyBhIENvZGVhYmxlQ29uY2VwdCwgU2ltcGxlUXVhbnRpdHkgb3IgYW4gaW1hZ2UuICBUaGUgZGVzY3JpcHRpb24gY2FuIGJlIGEgc3RyaW5nIG9ubHkgd2hlbiB0aGVzZSBvdGhlcnMgYXJlIG5vdCBhdmFpbGFibGUuXHJcbiAgICovXHJcbiAgdmFsdWVRdWFudGl0eT86IGZoaXIuUXVhbnRpdHlBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGVzY3JpcHRpb24gc2hvdWxkIGJlIHByb3ZpZGVkIGFzIGEgQ29kZWFibGVDb25jZXB0LCBTaW1wbGVRdWFudGl0eSBvciBhbiBpbWFnZS4gIFRoZSBkZXNjcmlwdGlvbiBjYW4gYmUgYSBzdHJpbmcgb25seSB3aGVuIHRoZXNlIG90aGVycyBhcmUgbm90IGF2YWlsYWJsZS5cclxuICAgKi9cclxuICB2YWx1ZUJhc2U2NEJpbmFyeT86IGZoaXIuRmhpckJhc2U2NEJpbmFyeXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkZXNjcmlwdGlvbiBzaG91bGQgYmUgcHJvdmlkZWQgYXMgYSBDb2RlYWJsZUNvbmNlcHQsIFNpbXBsZVF1YW50aXR5IG9yIGFuIGltYWdlLiAgVGhlIGRlc2NyaXB0aW9uIGNhbiBiZSBhIHN0cmluZyBvbmx5IHdoZW4gdGhlc2Ugb3RoZXJzIGFyZSBub3QgYXZhaWxhYmxlLlxyXG4gICAqL1xyXG4gIHZhbHVlQXR0YWNobWVudD86IGZoaXIuQXR0YWNobWVudEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkZXNjcmlwdGlvbiBzaG91bGQgYmUgcHJvdmlkZWQgYXMgYSBDb2RlYWJsZUNvbmNlcHQsIFNpbXBsZVF1YW50aXR5IG9yIGFuIGltYWdlLiAgVGhlIGRlc2NyaXB0aW9uIGNhbiBiZSBhIHN0cmluZyBvbmx5IHdoZW4gdGhlc2Ugb3RoZXJzIGFyZSBub3QgYXZhaWxhYmxlLlxyXG4gICAqL1xyXG4gIHZhbHVlQm9vbGVhbj86IGZoaXIuRmhpckJvb2xlYW58Ym9vbGVhbnx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTcGVjaWZpZXMgZGVzY3JpcHRpdmUgcHJvcGVydGllcyBvZiB0aGUgbnV0cml0aW9uIHByb2R1Y3QuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTnV0cml0aW9uUHJvZHVjdFByb2R1Y3RDaGFyYWN0ZXJpc3RpYyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ051dHJpdGlvblByb2R1Y3RQcm9kdWN0Q2hhcmFjdGVyaXN0aWMnO1xyXG4gIC8qKlxyXG4gICAqIEEgY29kZSBzcGVjaWZ5aW5nIHdoaWNoIGNoYXJhY3RlcmlzdGljIG9mIHRoZSBwcm9kdWN0IGlzIGJlaW5nIGRlc2NyaWJlZCAoZm9yIGV4YW1wbGUsIGNvbG91ciwgc2hhcGUpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0eXBlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkZXNjcmlwdGlvbiBzaG91bGQgYmUgcHJvdmlkZWQgYXMgYSBDb2RlYWJsZUNvbmNlcHQsIFNpbXBsZVF1YW50aXR5IG9yIGFuIGltYWdlLiAgVGhlIGRlc2NyaXB0aW9uIGNhbiBiZSBhIHN0cmluZyBvbmx5IHdoZW4gdGhlc2Ugb3RoZXJzIGFyZSBub3QgYXZhaWxhYmxlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB2YWx1ZTogKGZoaXIuQ29kZWFibGVDb25jZXB0fGZoaXIuRmhpclN0cmluZ3xmaGlyLlF1YW50aXR5fGZoaXIuRmhpckJhc2U2NEJpbmFyeXxmaGlyLkF0dGFjaG1lbnR8Zmhpci5GaGlyQm9vbGVhbil8bnVsbDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IE51dHJpdGlvblByb2R1Y3QucHJvZHVjdENoYXJhY3RlcmlzdGljLnZhbHVlW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX3ZhbHVlSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgTnV0cml0aW9uUHJvZHVjdFByb2R1Y3RDaGFyYWN0ZXJpc3RpYyAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE51dHJpdGlvblByb2R1Y3RQcm9kdWN0Q2hhcmFjdGVyaXN0aWNBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsndHlwZSddKSB7IHRoaXMudHlwZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UudHlwZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnR5cGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWyd2YWx1ZSddKSB7IHRoaXMudmFsdWUgPSBzb3VyY2UudmFsdWU7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsndmFsdWVDb2RlYWJsZUNvbmNlcHQnXSkgeyB0aGlzLnZhbHVlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS52YWx1ZUNvZGVhYmxlQ29uY2VwdCk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsndmFsdWVTdHJpbmcnXSkgeyB0aGlzLnZhbHVlID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS52YWx1ZVN0cmluZ30pOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3ZhbHVlUXVhbnRpdHknXSkgeyB0aGlzLnZhbHVlID0gbmV3IGZoaXIuUXVhbnRpdHkoc291cmNlLnZhbHVlUXVhbnRpdHkpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3ZhbHVlQmFzZTY0QmluYXJ5J10pIHsgdGhpcy52YWx1ZSA9IG5ldyBmaGlyLkZoaXJCYXNlNjRCaW5hcnkoe3ZhbHVlOiBzb3VyY2UudmFsdWVCYXNlNjRCaW5hcnl9KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd2YWx1ZUF0dGFjaG1lbnQnXSkgeyB0aGlzLnZhbHVlID0gbmV3IGZoaXIuQXR0YWNobWVudChzb3VyY2UudmFsdWVBdHRhY2htZW50KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd2YWx1ZUJvb2xlYW4nXSkgeyB0aGlzLnZhbHVlID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oe3ZhbHVlOiBzb3VyY2UudmFsdWVCb29sZWFufSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnZhbHVlID0gbnVsbDsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ051dHJpdGlvblByb2R1Y3QucHJvZHVjdENoYXJhY3RlcmlzdGljJyB9XHJcbiAgICB0aGlzLnZSUygndHlwZScsZXhwKVxyXG4gICAgdGhpcy52UlMoJ3ZhbHVlJyxleHApXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgTnV0cml0aW9uUHJvZHVjdEluc3RhbmNlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE51dHJpdGlvblByb2R1Y3RJbnN0YW5jZUFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBhbW91bnQgb2YgaXRlbXMgb3IgaW5zdGFuY2VzIHRoYXQgdGhlIHJlc291cmNlIGNvbnNpZGVycywgZm9yIGluc3RhbmNlIHdoZW4gcmVmZXJyaW5nIHRvIDIgaWRlbnRpY2FsIHVuaXRzIHRvZ2V0aGVyLlxyXG4gICAqL1xyXG4gIHF1YW50aXR5PzogZmhpci5RdWFudGl0eUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpZGVudGlmaWVyIGZvciB0aGUgcGh5c2ljYWwgaW5zdGFuY2UsIHR5cGljYWxseSBhIHNlcmlhbCBudW1iZXIuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGlkZW50aWZpY2F0aW9uIG9mIHRoZSBiYXRjaCBvciBsb3Qgb2YgdGhlIHByb2R1Y3QuXHJcbiAgICovXHJcbiAgbG90TnVtYmVyPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE51dHJpdGlvblByb2R1Y3QuaW5zdGFuY2UubG90TnVtYmVyXHJcbiAgICovXHJcbiAgX2xvdE51bWJlcj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRpbWUgYWZ0ZXIgd2hpY2ggdGhlIHByb2R1Y3QgaXMgbm8gbG9uZ2VyIGV4cGVjdGVkIHRvIGJlIGluIHByb3BlciBjb25kaXRpb24sIG9yIGl0cyB1c2UgaXMgbm90IGFkdmlzZWQgb3Igbm90IGFsbG93ZWQuXHJcbiAgICovXHJcbiAgZXhwaXJ5PzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogTnV0cml0aW9uUHJvZHVjdC5pbnN0YW5jZS5leHBpcnlcclxuICAgKi9cclxuICBfZXhwaXJ5PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgdGltZSBhZnRlciB3aGljaCB0aGUgcHJvZHVjdCBpcyBubyBsb25nZXIgZXhwZWN0ZWQgdG8gYmUgaW4gcHJvcGVyIGNvbmRpdGlvbiwgb3IgaXRzIHVzZSBpcyBub3QgYWR2aXNlZCBvciBub3QgYWxsb3dlZC5cclxuICAgKi9cclxuICB1c2VCeT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE51dHJpdGlvblByb2R1Y3QuaW5zdGFuY2UudXNlQnlcclxuICAgKi9cclxuICBfdXNlQnk/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG59XHJcblxyXG4vKipcclxuICogQ29udmV5cyBpbnN0YW5jZS1sZXZlbCBpbmZvcm1hdGlvbiBhYm91dCB0aGlzIHByb2R1Y3QgaXRlbS4gT25lIG9yIHNldmVyYWwgcGh5c2ljYWwsIGNvdW50YWJsZSBpbnN0YW5jZXMgb3Igb2NjdXJyZW5jZXMgb2YgdGhlIHByb2R1Y3QuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTnV0cml0aW9uUHJvZHVjdEluc3RhbmNlIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTnV0cml0aW9uUHJvZHVjdEluc3RhbmNlJztcclxuICAvKipcclxuICAgKiBUaGUgYW1vdW50IG9mIGl0ZW1zIG9yIGluc3RhbmNlcyB0aGF0IHRoZSByZXNvdXJjZSBjb25zaWRlcnMsIGZvciBpbnN0YW5jZSB3aGVuIHJlZmVycmluZyB0byAyIGlkZW50aWNhbCB1bml0cyB0b2dldGhlci5cclxuICAgKi9cclxuICBwdWJsaWMgcXVhbnRpdHk/OiBmaGlyLlF1YW50aXR5fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgaWRlbnRpZmllciBmb3IgdGhlIHBoeXNpY2FsIGluc3RhbmNlLCB0eXBpY2FsbHkgYSBzZXJpYWwgbnVtYmVyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyOiBmaGlyLklkZW50aWZpZXJbXTtcclxuICAvKipcclxuICAgKiBUaGUgaWRlbnRpZmljYXRpb24gb2YgdGhlIGJhdGNoIG9yIGxvdCBvZiB0aGUgcHJvZHVjdC5cclxuICAgKi9cclxuICBwdWJsaWMgbG90TnVtYmVyPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdGltZSBhZnRlciB3aGljaCB0aGUgcHJvZHVjdCBpcyBubyBsb25nZXIgZXhwZWN0ZWQgdG8gYmUgaW4gcHJvcGVyIGNvbmRpdGlvbiwgb3IgaXRzIHVzZSBpcyBub3QgYWR2aXNlZCBvciBub3QgYWxsb3dlZC5cclxuICAgKi9cclxuICBwdWJsaWMgZXhwaXJ5PzogZmhpci5GaGlyRGF0ZVRpbWV8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0aW1lIGFmdGVyIHdoaWNoIHRoZSBwcm9kdWN0IGlzIG5vIGxvbmdlciBleHBlY3RlZCB0byBiZSBpbiBwcm9wZXIgY29uZGl0aW9uLCBvciBpdHMgdXNlIGlzIG5vdCBhZHZpc2VkIG9yIG5vdCBhbGxvd2VkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB1c2VCeT86IGZoaXIuRmhpckRhdGVUaW1lfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBOdXRyaXRpb25Qcm9kdWN0SW5zdGFuY2UgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxOdXRyaXRpb25Qcm9kdWN0SW5zdGFuY2VBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsncXVhbnRpdHknXSkgeyB0aGlzLnF1YW50aXR5ID0gbmV3IGZoaXIuUXVhbnRpdHkoc291cmNlLnF1YW50aXR5KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IHNvdXJjZS5pZGVudGlmaWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuSWRlbnRpZmllcih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmlkZW50aWZpZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbG90TnVtYmVyJ10pIHsgdGhpcy5sb3ROdW1iZXIgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmxvdE51bWJlcn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfbG90TnVtYmVyJ10pIHtcclxuICAgICAgaWYgKHRoaXMubG90TnVtYmVyKSB7IHRoaXMubG90TnVtYmVyLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2xvdE51bWJlciEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmxvdE51bWJlciA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9sb3ROdW1iZXIgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2V4cGlyeSddKSB7IHRoaXMuZXhwaXJ5ID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLmV4cGlyeX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfZXhwaXJ5J10pIHtcclxuICAgICAgaWYgKHRoaXMuZXhwaXJ5KSB7IHRoaXMuZXhwaXJ5LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2V4cGlyeSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmV4cGlyeSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZShzb3VyY2UuX2V4cGlyeSBhcyBQYXJ0aWFsPGZoaXIuRmhpckRhdGVUaW1lQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd1c2VCeSddKSB7IHRoaXMudXNlQnkgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2UudXNlQnl9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3VzZUJ5J10pIHtcclxuICAgICAgaWYgKHRoaXMudXNlQnkpIHsgdGhpcy51c2VCeS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl91c2VCeSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnVzZUJ5ID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHNvdXJjZS5fdXNlQnkgYXMgUGFydGlhbDxmaGlyLkZoaXJEYXRlVGltZUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ051dHJpdGlvblByb2R1Y3QuaW5zdGFuY2UnIH1cclxuICAgIHRoaXMudk9TKCdxdWFudGl0eScsZXhwKVxyXG4gICAgdGhpcy52T0EoJ2lkZW50aWZpZXInLGV4cClcclxuICAgIHRoaXMudk9TKCdsb3ROdW1iZXInLGV4cClcclxuICAgIHRoaXMudk9TKCdleHBpcnknLGV4cClcclxuICAgIHRoaXMudk9TKCd1c2VCeScsZXhwKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE51dHJpdGlvblByb2R1Y3QgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTnV0cml0aW9uUHJvZHVjdEFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIk51dHJpdGlvblByb2R1Y3RcInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVW5rbm93biBkb2VzIG5vdCByZXByZXNlbnQgXCJvdGhlclwiIC0gb25lIG9mIHRoZSBkZWZpbmVkIHN0YXR1c2VzIG11c3QgYXBwbHkuICBVbmtub3duIGlzIHVzZWQgd2hlbiB0aGUgYXV0aG9yaW5nIHN5c3RlbSBpcyBub3Qgc3VyZSB3aGF0IHRoZSBjdXJyZW50IHN0YXR1cyBpcy5cclxuICAgKi9cclxuICBzdGF0dXM6IGZoaXIuRmhpckNvZGU8TnV0cml0aW9ucHJvZHVjdFN0YXR1c0NvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBOdXRyaXRpb25Qcm9kdWN0LnN0YXR1c1xyXG4gICAqL1xyXG4gIF9zdGF0dXM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIE51dHJpdGlvbiBwcm9kdWN0cyBjYW4gaGF2ZSBkaWZmZXJlbnQgY2xhc3NpZmljYXRpb25zIC0gYWNjb3JkaW5nIHRvIGl0cyBudXRyaXRpb25hbCBwcm9wZXJ0aWVzLCBwcmVwYXJhdGlvbiBtZXRob2RzLCBldGMuXHJcbiAgICovXHJcbiAgY2F0ZWdvcnk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNvZGUgYXNzaWduZWQgdG8gdGhlIHByb2R1Y3QsIGZvciBleGFtcGxlIGEgbWFudWZhY3R1cmVyIG51bWJlciBvciBvdGhlciB0ZXJtaW5vbG9neS5cclxuICAgKi9cclxuICBjb2RlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgb3JnYW5pc2F0aW9uIChtYW51ZmFjdHVyZXIsIHJlcHJlc2VudGF0aXZlIG9yIGxlZ2FsIGF1dGhvcmlzYXRpb24gaG9sZGVyKSB0aGF0IGlzIHJlc3BvbnNpYmxlIGZvciB0aGUgZGV2aWNlLlxyXG4gICAqL1xyXG4gIG1hbnVmYWN0dXJlcj86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBOb3RlOiBUaGlzIGlzIGEgYnVzaW5lc3MgaWRlbnRpZmllciwgbm90IGEgcmVzb3VyY2UgaWRlbnRpZmllciAoc2VlIFtkaXNjdXNzaW9uXShyZXNvdXJjZS5odG1sI2lkZW50aWZpZXJzKSkuICBJdCBpcyBiZXN0IHByYWN0aWNlIGZvciB0aGUgaWRlbnRpZmllciB0byBvbmx5IGFwcGVhciBvbiBhIHNpbmdsZSByZXNvdXJjZSBpbnN0YW5jZSwgaG93ZXZlciBidXNpbmVzcyBwcmFjdGljZXMgbWF5IG9jY2FzaW9uYWxseSBkaWN0YXRlIHRoYXQgbXVsdGlwbGUgcmVzb3VyY2UgaW5zdGFuY2VzIHdpdGggdGhlIHNhbWUgaWRlbnRpZmllciBjYW4gZXhpc3QgLSBwb3NzaWJseSBldmVuIHdpdGggZGlmZmVyZW50IHJlc291cmNlIHR5cGVzLiAgRm9yIGV4YW1wbGUsIG11bHRpcGxlIFBhdGllbnQgYW5kIGEgUGVyc29uIHJlc291cmNlIGluc3RhbmNlIG1pZ2h0IHNoYXJlIHRoZSBzYW1lIHNvY2lhbCBpbnN1cmFuY2UgbnVtYmVyLlxyXG4gICAqL1xyXG4gIG51dHJpZW50PzogZmhpci5OdXRyaXRpb25Qcm9kdWN0TnV0cmllbnRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZ3JlZGllbnRzIGNvbnRhaW5lZCBpbiB0aGlzIHByb2R1Y3QuXHJcbiAgICovXHJcbiAgaW5ncmVkaWVudD86IGZoaXIuTnV0cml0aW9uUHJvZHVjdEluZ3JlZGllbnRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFsbGVyZ2VucyB0aGF0IGFyZSBrbm93biBvciBzdXNwZWN0ZWQgdG8gYmUgYSBwYXJ0IG9mIHRoaXMgbnV0cml0aW9uIHByb2R1Y3QuXHJcbiAgICovXHJcbiAga25vd25BbGxlcmdlbj86IGZoaXIuQ29kZWFibGVSZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFNwZWNpZmllcyBkZXNjcmlwdGl2ZSBwcm9wZXJ0aWVzIG9mIHRoZSBudXRyaXRpb24gcHJvZHVjdC5cclxuICAgKi9cclxuICBwcm9kdWN0Q2hhcmFjdGVyaXN0aWM/OiBmaGlyLk51dHJpdGlvblByb2R1Y3RQcm9kdWN0Q2hhcmFjdGVyaXN0aWNBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENvbnZleXMgaW5zdGFuY2UtbGV2ZWwgaW5mb3JtYXRpb24gYWJvdXQgdGhpcyBwcm9kdWN0IGl0ZW0uIE9uZSBvciBzZXZlcmFsIHBoeXNpY2FsLCBjb3VudGFibGUgaW5zdGFuY2VzIG9yIG9jY3VycmVuY2VzIG9mIHRoZSBwcm9kdWN0LlxyXG4gICAqL1xyXG4gIGluc3RhbmNlPzogZmhpci5OdXRyaXRpb25Qcm9kdWN0SW5zdGFuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDb21tZW50cyBtYWRlIGFib3V0IHRoZSBwcm9kdWN0LlxyXG4gICAqL1xyXG4gIG5vdGU/OiBmaGlyLkFubm90YXRpb25BcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQSBmb29kIG9yIGZsdWlkIHByb2R1Y3QgdGhhdCBpcyBjb25zdW1lZCBieSBwYXRpZW50cy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBOdXRyaXRpb25Qcm9kdWN0IGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdOdXRyaXRpb25Qcm9kdWN0JztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIk51dHJpdGlvblByb2R1Y3RcIjtcclxuICAvKipcclxuICAgKiBVbmtub3duIGRvZXMgbm90IHJlcHJlc2VudCBcIm90aGVyXCIgLSBvbmUgb2YgdGhlIGRlZmluZWQgc3RhdHVzZXMgbXVzdCBhcHBseS4gIFVua25vd24gaXMgdXNlZCB3aGVuIHRoZSBhdXRob3Jpbmcgc3lzdGVtIGlzIG5vdCBzdXJlIHdoYXQgdGhlIGN1cnJlbnQgc3RhdHVzIGlzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0dXM6IGZoaXIuRmhpckNvZGU8TnV0cml0aW9ucHJvZHVjdFN0YXR1c0NvZGVUeXBlPnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIE51dHJpdGlvbiBwcm9kdWN0cyBjYW4gaGF2ZSBkaWZmZXJlbnQgY2xhc3NpZmljYXRpb25zIC0gYWNjb3JkaW5nIHRvIGl0cyBudXRyaXRpb25hbCBwcm9wZXJ0aWVzLCBwcmVwYXJhdGlvbiBtZXRob2RzLCBldGMuXHJcbiAgICovXHJcbiAgcHVibGljIGNhdGVnb3J5OiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjb2RlIGFzc2lnbmVkIHRvIHRoZSBwcm9kdWN0LCBmb3IgZXhhbXBsZSBhIG1hbnVmYWN0dXJlciBudW1iZXIgb3Igb3RoZXIgdGVybWlub2xvZ3kuXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG9yZ2FuaXNhdGlvbiAobWFudWZhY3R1cmVyLCByZXByZXNlbnRhdGl2ZSBvciBsZWdhbCBhdXRob3Jpc2F0aW9uIGhvbGRlcikgdGhhdCBpcyByZXNwb25zaWJsZSBmb3IgdGhlIGRldmljZS5cclxuICAgKi9cclxuICBwdWJsaWMgbWFudWZhY3R1cmVyOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIE5vdGU6IFRoaXMgaXMgYSBidXNpbmVzcyBpZGVudGlmaWVyLCBub3QgYSByZXNvdXJjZSBpZGVudGlmaWVyIChzZWUgW2Rpc2N1c3Npb25dKHJlc291cmNlLmh0bWwjaWRlbnRpZmllcnMpKS4gIEl0IGlzIGJlc3QgcHJhY3RpY2UgZm9yIHRoZSBpZGVudGlmaWVyIHRvIG9ubHkgYXBwZWFyIG9uIGEgc2luZ2xlIHJlc291cmNlIGluc3RhbmNlLCBob3dldmVyIGJ1c2luZXNzIHByYWN0aWNlcyBtYXkgb2NjYXNpb25hbGx5IGRpY3RhdGUgdGhhdCBtdWx0aXBsZSByZXNvdXJjZSBpbnN0YW5jZXMgd2l0aCB0aGUgc2FtZSBpZGVudGlmaWVyIGNhbiBleGlzdCAtIHBvc3NpYmx5IGV2ZW4gd2l0aCBkaWZmZXJlbnQgcmVzb3VyY2UgdHlwZXMuICBGb3IgZXhhbXBsZSwgbXVsdGlwbGUgUGF0aWVudCBhbmQgYSBQZXJzb24gcmVzb3VyY2UgaW5zdGFuY2UgbWlnaHQgc2hhcmUgdGhlIHNhbWUgc29jaWFsIGluc3VyYW5jZSBudW1iZXIuXHJcbiAgICovXHJcbiAgcHVibGljIG51dHJpZW50OiBmaGlyLk51dHJpdGlvblByb2R1Y3ROdXRyaWVudFtdO1xyXG4gIC8qKlxyXG4gICAqIEluZ3JlZGllbnRzIGNvbnRhaW5lZCBpbiB0aGlzIHByb2R1Y3QuXHJcbiAgICovXHJcbiAgcHVibGljIGluZ3JlZGllbnQ6IGZoaXIuTnV0cml0aW9uUHJvZHVjdEluZ3JlZGllbnRbXTtcclxuICAvKipcclxuICAgKiBBbGxlcmdlbnMgdGhhdCBhcmUga25vd24gb3Igc3VzcGVjdGVkIHRvIGJlIGEgcGFydCBvZiB0aGlzIG51dHJpdGlvbiBwcm9kdWN0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBrbm93bkFsbGVyZ2VuOiBmaGlyLkNvZGVhYmxlUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogU3BlY2lmaWVzIGRlc2NyaXB0aXZlIHByb3BlcnRpZXMgb2YgdGhlIG51dHJpdGlvbiBwcm9kdWN0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcm9kdWN0Q2hhcmFjdGVyaXN0aWM6IGZoaXIuTnV0cml0aW9uUHJvZHVjdFByb2R1Y3RDaGFyYWN0ZXJpc3RpY1tdO1xyXG4gIC8qKlxyXG4gICAqIENvbnZleXMgaW5zdGFuY2UtbGV2ZWwgaW5mb3JtYXRpb24gYWJvdXQgdGhpcyBwcm9kdWN0IGl0ZW0uIE9uZSBvciBzZXZlcmFsIHBoeXNpY2FsLCBjb3VudGFibGUgaW5zdGFuY2VzIG9yIG9jY3VycmVuY2VzIG9mIHRoZSBwcm9kdWN0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpbnN0YW5jZT86IGZoaXIuTnV0cml0aW9uUHJvZHVjdEluc3RhbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDb21tZW50cyBtYWRlIGFib3V0IHRoZSBwcm9kdWN0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBub3RlOiBmaGlyLkFubm90YXRpb25bXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBOdXRyaXRpb25Qcm9kdWN0IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8TnV0cml0aW9uUHJvZHVjdEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdOdXRyaXRpb25Qcm9kdWN0JztcclxuICAgIGlmIChzb3VyY2VbJ3N0YXR1cyddKSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8TnV0cml0aW9ucHJvZHVjdFN0YXR1c0NvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5zdGF0dXN9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3N0YXR1cyddKSB7XHJcbiAgICAgIGlmICh0aGlzLnN0YXR1cykgeyB0aGlzLnN0YXR1cy5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zdGF0dXMhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxOdXRyaXRpb25wcm9kdWN0U3RhdHVzQ29kZVR5cGU+KHNvdXJjZS5fc3RhdHVzIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydjYXRlZ29yeSddKSB7IHRoaXMuY2F0ZWdvcnkgPSBzb3VyY2UuY2F0ZWdvcnkubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jYXRlZ29yeSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jb2RlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbWFudWZhY3R1cmVyJ10pIHsgdGhpcy5tYW51ZmFjdHVyZXIgPSBzb3VyY2UubWFudWZhY3R1cmVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubWFudWZhY3R1cmVyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ251dHJpZW50J10pIHsgdGhpcy5udXRyaWVudCA9IHNvdXJjZS5udXRyaWVudC5tYXAoKHgpID0+IG5ldyBmaGlyLk51dHJpdGlvblByb2R1Y3ROdXRyaWVudCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm51dHJpZW50ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2luZ3JlZGllbnQnXSkgeyB0aGlzLmluZ3JlZGllbnQgPSBzb3VyY2UuaW5ncmVkaWVudC5tYXAoKHgpID0+IG5ldyBmaGlyLk51dHJpdGlvblByb2R1Y3RJbmdyZWRpZW50KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaW5ncmVkaWVudCA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydrbm93bkFsbGVyZ2VuJ10pIHsgdGhpcy5rbm93bkFsbGVyZ2VuID0gc291cmNlLmtub3duQWxsZXJnZW4ubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZVJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmtub3duQWxsZXJnZW4gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJvZHVjdENoYXJhY3RlcmlzdGljJ10pIHsgdGhpcy5wcm9kdWN0Q2hhcmFjdGVyaXN0aWMgPSBzb3VyY2UucHJvZHVjdENoYXJhY3RlcmlzdGljLm1hcCgoeCkgPT4gbmV3IGZoaXIuTnV0cml0aW9uUHJvZHVjdFByb2R1Y3RDaGFyYWN0ZXJpc3RpYyh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnByb2R1Y3RDaGFyYWN0ZXJpc3RpYyA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydpbnN0YW5jZSddKSB7IHRoaXMuaW5zdGFuY2UgPSBuZXcgZmhpci5OdXRyaXRpb25Qcm9kdWN0SW5zdGFuY2Uoc291cmNlLmluc3RhbmNlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbm90ZSddKSB7IHRoaXMubm90ZSA9IHNvdXJjZS5ub3RlLm1hcCgoeCkgPT4gbmV3IGZoaXIuQW5ub3RhdGlvbih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm5vdGUgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ051dHJpdGlvblByb2R1Y3QnIH1cclxuICAgIHRoaXMudlJTKCdyZXNvdXJjZVR5cGUnLGV4cClcclxuICAgIHRoaXMudlJTVignc3RhdHVzJyxleHAsJ051dHJpdGlvbnByb2R1Y3RTdGF0dXMnLE51dHJpdGlvbnByb2R1Y3RTdGF0dXNWc1ZhbGlkYXRpb24sJ3InKVxyXG4gICAgdGhpcy52T0EoJ2NhdGVnb3J5JyxleHApXHJcbiAgICB0aGlzLnZPUygnY29kZScsZXhwKVxyXG4gICAgdGhpcy52T0EoJ21hbnVmYWN0dXJlcicsZXhwKVxyXG4gICAgdGhpcy52T0EoJ251dHJpZW50JyxleHApXHJcbiAgICB0aGlzLnZPQSgnaW5ncmVkaWVudCcsZXhwKVxyXG4gICAgdGhpcy52T0EoJ2tub3duQWxsZXJnZW4nLGV4cClcclxuICAgIHRoaXMudk9BKCdwcm9kdWN0Q2hhcmFjdGVyaXN0aWMnLGV4cClcclxuICAgIHRoaXMudk9TKCdpbnN0YW5jZScsZXhwKVxyXG4gICAgdGhpcy52T0EoJ25vdGUnLGV4cClcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbiJdfQ==