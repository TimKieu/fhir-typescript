// <auto-generated/>
// Contents of: hl7.fhir.r4b.core version: 4.3.0
// Minimum TypeScript Version: 3.7
// FHIR Resource: Bundle
import * as fhir from '../fhir.js';
// @ts-ignore
import { SearchEntryModeVsValidation } from '../fhirValueSets/SearchEntryModeVsValidation.js';
// @ts-ignore
import { HttpVerbVsValidation } from '../fhirValueSets/HttpVerbVsValidation.js';
// @ts-ignore
import { BundleTypeVsValidation } from '../fhirValueSets/BundleTypeVsValidation.js';
/**
 * Both Bundle.link and Bundle.entry.link are defined to support providing additional context when Bundles are used (e.g. [HATEOAS](http://en.wikipedia.org/wiki/HATEOAS)).
 * Bundle.entry.link corresponds to links found in the HTTP header if the resource in the entry was [read](http.html#read) directly.
 * This specification defines some specific uses of Bundle.link for [searching](search.html#conformance) and [paging](http.html#paging), but no specific uses for Bundle.entry.link, and no defined function in a transaction - the meaning is implementation specific.
 */
export class BundleLink extends fhir.BackboneElement {
    /**
     * Default constructor for BundleLink - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['relation'] !== undefined) {
            this.relation = new fhir.FhirString({ value: source.relation }, options);
        }
        else {
            this.relation = null;
        }
        if (source['_relation']) {
            if (this.relation) {
                this.relation.addExtendedProperties(source._relation);
            }
            else {
                this.relation = new fhir.FhirString(source._relation, options);
            }
        }
        if (source['url'] !== undefined) {
            this.url = new fhir.FhirUri({ value: source.url }, options);
        }
        else {
            this.url = null;
        }
        if (source['_url']) {
            if (this.url) {
                this.url.addExtendedProperties(source._url);
            }
            else {
                this.url = new fhir.FhirUri(source._url, options);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Bundle.link';
        }
        iss.push(...this.vRS('relation', exp));
        iss.push(...this.vRS('url', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BundleLink._fts_dataType = 'BundleLink';
/**
 * Information about the search process that lead to the creation of this entry.
 */
export class BundleEntrySearch extends fhir.BackboneElement {
    /**
     * Default constructor for BundleEntrySearch - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['mode'] !== undefined) {
            this.mode = new fhir.FhirCode({ value: source.mode }, options);
        }
        if (source['_mode']) {
            if (this.mode) {
                this.mode.addExtendedProperties(source._mode);
            }
            else {
                this.mode = new fhir.FhirCode(source._mode, options);
            }
        }
        if (source['score'] !== undefined) {
            this.score = new fhir.FhirDecimal({ value: source.score }, options);
        }
        if (source['_score']) {
            if (this.score) {
                this.score.addExtendedProperties(source._score);
            }
            else {
                this.score = new fhir.FhirDecimal(source._score, options);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Bundle.entry.search';
        }
        iss.push(...this.vOSV('mode', exp, 'SearchEntryMode', SearchEntryModeVsValidation, 'r'));
        iss.push(...this.vOS('score', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BundleEntrySearch._fts_dataType = 'BundleEntrySearch';
/**
 * Additional information about how this entry should be processed as part of a transaction or batch.  For history, it shows how the entry was processed to create the version contained in the entry.
 */
export class BundleEntryRequest extends fhir.BackboneElement {
    /**
     * Default constructor for BundleEntryRequest - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['method'] !== undefined) {
            this.method = new fhir.FhirCode({ value: source.method }, options);
        }
        else {
            this.method = null;
        }
        if (source['_method']) {
            if (this.method) {
                this.method.addExtendedProperties(source._method);
            }
            else {
                this.method = new fhir.FhirCode(source._method, options);
            }
        }
        if (source['url'] !== undefined) {
            this.url = new fhir.FhirUri({ value: source.url }, options);
        }
        else {
            this.url = null;
        }
        if (source['_url']) {
            if (this.url) {
                this.url.addExtendedProperties(source._url);
            }
            else {
                this.url = new fhir.FhirUri(source._url, options);
            }
        }
        if (source['ifNoneMatch'] !== undefined) {
            this.ifNoneMatch = new fhir.FhirString({ value: source.ifNoneMatch }, options);
        }
        if (source['_ifNoneMatch']) {
            if (this.ifNoneMatch) {
                this.ifNoneMatch.addExtendedProperties(source._ifNoneMatch);
            }
            else {
                this.ifNoneMatch = new fhir.FhirString(source._ifNoneMatch, options);
            }
        }
        if (source['ifModifiedSince'] !== undefined) {
            this.ifModifiedSince = new fhir.FhirInstant({ value: source.ifModifiedSince }, options);
        }
        if (source['_ifModifiedSince']) {
            if (this.ifModifiedSince) {
                this.ifModifiedSince.addExtendedProperties(source._ifModifiedSince);
            }
            else {
                this.ifModifiedSince = new fhir.FhirInstant(source._ifModifiedSince, options);
            }
        }
        if (source['ifMatch'] !== undefined) {
            this.ifMatch = new fhir.FhirString({ value: source.ifMatch }, options);
        }
        if (source['_ifMatch']) {
            if (this.ifMatch) {
                this.ifMatch.addExtendedProperties(source._ifMatch);
            }
            else {
                this.ifMatch = new fhir.FhirString(source._ifMatch, options);
            }
        }
        if (source['ifNoneExist'] !== undefined) {
            this.ifNoneExist = new fhir.FhirString({ value: source.ifNoneExist }, options);
        }
        if (source['_ifNoneExist']) {
            if (this.ifNoneExist) {
                this.ifNoneExist.addExtendedProperties(source._ifNoneExist);
            }
            else {
                this.ifNoneExist = new fhir.FhirString(source._ifNoneExist, options);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Bundle.entry.request';
        }
        iss.push(...this.vRSV('method', exp, 'HttpVerb', HttpVerbVsValidation, 'r'));
        iss.push(...this.vRS('url', exp));
        iss.push(...this.vOS('ifNoneMatch', exp));
        iss.push(...this.vOS('ifModifiedSince', exp));
        iss.push(...this.vOS('ifMatch', exp));
        iss.push(...this.vOS('ifNoneExist', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BundleEntryRequest._fts_dataType = 'BundleEntryRequest';
/**
 * Indicates the results of processing the corresponding 'request' entry in the batch or transaction being responded to or what the results of an operation where when returning history.
 */
export class BundleEntryResponse extends fhir.BackboneElement {
    /**
     * Default constructor for BundleEntryResponse - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['status'] !== undefined) {
            this.status = new fhir.FhirString({ value: source.status }, options);
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirString(source._status, options);
            }
        }
        if (source['location'] !== undefined) {
            this.location = new fhir.FhirUri({ value: source.location }, options);
        }
        if (source['_location']) {
            if (this.location) {
                this.location.addExtendedProperties(source._location);
            }
            else {
                this.location = new fhir.FhirUri(source._location, options);
            }
        }
        if (source['etag'] !== undefined) {
            this.etag = new fhir.FhirString({ value: source.etag }, options);
        }
        if (source['_etag']) {
            if (this.etag) {
                this.etag.addExtendedProperties(source._etag);
            }
            else {
                this.etag = new fhir.FhirString(source._etag, options);
            }
        }
        if (source['lastModified'] !== undefined) {
            this.lastModified = new fhir.FhirInstant({ value: source.lastModified }, options);
        }
        if (source['_lastModified']) {
            if (this.lastModified) {
                this.lastModified.addExtendedProperties(source._lastModified);
            }
            else {
                this.lastModified = new fhir.FhirInstant(source._lastModified, options);
            }
        }
        if (source['outcome']) {
            this.outcome = (fhir.resourceFactory(source.outcome, options) ?? undefined);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Bundle.entry.response';
        }
        iss.push(...this.vRS('status', exp));
        iss.push(...this.vOS('location', exp));
        iss.push(...this.vOS('etag', exp));
        iss.push(...this.vOS('lastModified', exp));
        iss.push(...this.vOS('outcome', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BundleEntryResponse._fts_dataType = 'BundleEntryResponse';
/**
 * An entry in a bundle resource - will either contain a resource or information about a resource (transactions and history only).
 */
export class BundleEntry extends fhir.BackboneElement {
    /**
     * Default constructor for BundleEntry - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['link']) {
            this.link = source.link.map((x) => new fhir.BundleLink(x, options));
        }
        else {
            this.link = [];
        }
        if (source['fullUrl'] !== undefined) {
            this.fullUrl = new fhir.FhirUri({ value: source.fullUrl }, options);
        }
        if (source['_fullUrl']) {
            if (this.fullUrl) {
                this.fullUrl.addExtendedProperties(source._fullUrl);
            }
            else {
                this.fullUrl = new fhir.FhirUri(source._fullUrl, options);
            }
        }
        if (source['resource']) {
            this.resource = (fhir.resourceFactory(source.resource, options) ?? undefined);
        }
        if (source['search']) {
            this.search = new fhir.BundleEntrySearch(source.search, options);
        }
        if (source['request']) {
            this.request = new fhir.BundleEntryRequest(source.request, options);
        }
        if (source['response']) {
            this.response = new fhir.BundleEntryResponse(source.response, options);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Bundle.entry';
        }
        iss.push(...this.vOA('link', exp));
        iss.push(...this.vOS('fullUrl', exp));
        iss.push(...this.vOS('resource', exp));
        iss.push(...this.vOS('search', exp));
        iss.push(...this.vOS('request', exp));
        iss.push(...this.vOS('response', exp));
        return iss;
    }
    /**
     * Access a bundle.entry[].resource as a typed resource
     */
    resourceAs() {
        return this.resource;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
BundleEntry._fts_dataType = 'BundleEntry';
/**
 * A container for a collection of resources.
 */
export class Bundle extends fhir.Resource {
    /**
     * Default constructor for Bundle - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'Bundle';
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier, options);
        }
        if (source['type'] !== undefined) {
            this.type = new fhir.FhirCode({ value: source.type }, options);
        }
        else {
            this.type = null;
        }
        if (source['_type']) {
            if (this.type) {
                this.type.addExtendedProperties(source._type);
            }
            else {
                this.type = new fhir.FhirCode(source._type, options);
            }
        }
        if (source['timestamp'] !== undefined) {
            this.timestamp = new fhir.FhirInstant({ value: source.timestamp }, options);
        }
        if (source['_timestamp']) {
            if (this.timestamp) {
                this.timestamp.addExtendedProperties(source._timestamp);
            }
            else {
                this.timestamp = new fhir.FhirInstant(source._timestamp, options);
            }
        }
        if (source['total'] !== undefined) {
            this.total = new fhir.FhirUnsignedInt({ value: source.total }, options);
        }
        if (source['_total']) {
            if (this.total) {
                this.total.addExtendedProperties(source._total);
            }
            else {
                this.total = new fhir.FhirUnsignedInt(source._total, options);
            }
        }
        if (source['link']) {
            this.link = source.link.map((x) => new fhir.BundleLink(x, options));
        }
        else {
            this.link = [];
        }
        if (source['entry']) {
            this.entry = source.entry.map((x) => new fhir.BundleEntry(x, options));
        }
        else {
            this.entry = [];
        }
        if (source['signature']) {
            this.signature = new fhir.Signature(source.signature, options);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Bundle';
        }
        iss.push(...this.vOS('identifier', exp));
        iss.push(...this.vRSV('type', exp, 'BundleType', BundleTypeVsValidation, 'r'));
        iss.push(...this.vOS('timestamp', exp));
        iss.push(...this.vOS('total', exp));
        iss.push(...this.vOA('link', exp));
        iss.push(...this.vOA('entry', exp));
        iss.push(...this.vOS('signature', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
Bundle._fts_dataType = 'Bundle';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQnVuZGxlLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9CdW5kbGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLGdEQUFnRDtBQUNoRCxrQ0FBa0M7QUFDbEMsd0JBQXdCO0FBRXhCLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBSW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsMkJBQTJCLEVBQUUsTUFBTSxpREFBaUQsQ0FBQztBQUc5RixhQUFhO0FBQ2IsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sMENBQTBDLENBQUM7QUFHaEYsYUFBYTtBQUNiLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLDRDQUE0QyxDQUFDO0FBdUJwRjs7OztHQUlHO0FBQ0gsTUFBTSxPQUFPLFVBQVcsU0FBUSxJQUFJLENBQUMsZUFBZTtJQWFsRDs7T0FFRztJQUNILFlBQVksU0FBaUMsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDdkYsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsS0FBSyxTQUFTLEVBQUU7WUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsUUFBUSxFQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FBRTthQUM1RztZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDOUIsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLEVBQUU7WUFDdkIsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO2dCQUFFLElBQUksQ0FBQyxRQUFRLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLFNBQVUsQ0FBQyxDQUFDO2FBQUU7aUJBQ3pFO2dCQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1B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LEdBQUcsQ0FBQyxZQUFZLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN4QyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUMsR0FBRyxFQUFDLFlBQVksRUFBQyxzQkFBc0IsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzNFLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ25DLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ2xDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ25DLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZDLE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQzs7QUF4RkQ7O0dBRUc7QUFDNkIsb0JBQWEsR0FBVSxRQUFRLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjRiLmNvcmUgdmVyc2lvbjogNC4zLjBcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBCdW5kbGVcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFNlYXJjaEVudHJ5TW9kZUNvZGVzLCAgU2VhcmNoRW50cnlNb2RlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1NlYXJjaEVudHJ5TW9kZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBTZWFyY2hFbnRyeU1vZGVWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1NlYXJjaEVudHJ5TW9kZVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgSHR0cFZlcmJDb2RlcywgIEh0dHBWZXJiQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0h0dHBWZXJiQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEh0dHBWZXJiVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9IdHRwVmVyYlZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQnVuZGxlVHlwZUNvZGVzLCAgQnVuZGxlVHlwZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9CdW5kbGVUeXBlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEJ1bmRsZVR5cGVWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0J1bmRsZVR5cGVWc1ZhbGlkYXRpb24uanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQnVuZGxlTGluayB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBCdW5kbGVMaW5rQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogQSBuYW1lIHdoaWNoIGRldGFpbHMgdGhlIGZ1bmN0aW9uYWwgdXNlIGZvciB0aGlzIGxpbmsgLSBzZWUgW2h0dHA6Ly93d3cuaWFuYS5vcmcvYXNzaWdubWVudHMvbGluay1yZWxhdGlvbnMvbGluay1yZWxhdGlvbnMueGh0bWwjbGluay1yZWxhdGlvbnMtMV0oaHR0cDovL3d3dy5pYW5hLm9yZy9hc3NpZ25tZW50cy9saW5rLXJlbGF0aW9ucy9saW5rLXJlbGF0aW9ucy54aHRtbCNsaW5rLXJlbGF0aW9ucy0xKS5cclxuICAgKi9cclxuICByZWxhdGlvbjogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEJ1bmRsZS5saW5rLnJlbGF0aW9uXHJcbiAgICovXHJcbiAgX3JlbGF0aW9uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgcmVmZXJlbmNlIGRldGFpbHMgZm9yIHRoZSBsaW5rLlxyXG4gICAqL1xyXG4gIHVybDogZmhpci5GaGlyVXJpfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEJ1bmRsZS5saW5rLnVybFxyXG4gICAqL1xyXG4gIF91cmw/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG59XHJcblxyXG4vKipcclxuICogQm90aCBCdW5kbGUubGluayBhbmQgQnVuZGxlLmVudHJ5LmxpbmsgYXJlIGRlZmluZWQgdG8gc3VwcG9ydCBwcm92aWRpbmcgYWRkaXRpb25hbCBjb250ZXh0IHdoZW4gQnVuZGxlcyBhcmUgdXNlZCAoZS5nLiBbSEFURU9BU10oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9IQVRFT0FTKSkuIFxyXG4gKiBCdW5kbGUuZW50cnkubGluayBjb3JyZXNwb25kcyB0byBsaW5rcyBmb3VuZCBpbiB0aGUgSFRUUCBoZWFkZXIgaWYgdGhlIHJlc291cmNlIGluIHRoZSBlbnRyeSB3YXMgW3JlYWRdKGh0dHAuaHRtbCNyZWFkKSBkaXJlY3RseS5cclxuICogVGhpcyBzcGVjaWZpY2F0aW9uIGRlZmluZXMgc29tZSBzcGVjaWZpYyB1c2VzIG9mIEJ1bmRsZS5saW5rIGZvciBbc2VhcmNoaW5nXShzZWFyY2guaHRtbCNjb25mb3JtYW5jZSkgYW5kIFtwYWdpbmddKGh0dHAuaHRtbCNwYWdpbmcpLCBidXQgbm8gc3BlY2lmaWMgdXNlcyBmb3IgQnVuZGxlLmVudHJ5LmxpbmssIGFuZCBubyBkZWZpbmVkIGZ1bmN0aW9uIGluIGEgdHJhbnNhY3Rpb24gLSB0aGUgbWVhbmluZyBpcyBpbXBsZW1lbnRhdGlvbiBzcGVjaWZpYy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBCdW5kbGVMaW5rIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQnVuZGxlTGluayc7XHJcbiAgLyoqXHJcbiAgICogQSBuYW1lIHdoaWNoIGRldGFpbHMgdGhlIGZ1bmN0aW9uYWwgdXNlIGZvciB0aGlzIGxpbmsgLSBzZWUgW2h0dHA6Ly93d3cuaWFuYS5vcmcvYXNzaWdubWVudHMvbGluay1yZWxhdGlvbnMvbGluay1yZWxhdGlvbnMueGh0bWwjbGluay1yZWxhdGlvbnMtMV0oaHR0cDovL3d3dy5pYW5hLm9yZy9hc3NpZ25tZW50cy9saW5rLXJlbGF0aW9ucy9saW5rLXJlbGF0aW9ucy54aHRtbCNsaW5rLXJlbGF0aW9ucy0xKS5cclxuICAgKi9cclxuICBwdWJsaWMgcmVsYXRpb246IGZoaXIuRmhpclN0cmluZ3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZWZlcmVuY2UgZGV0YWlscyBmb3IgdGhlIGxpbmsuXHJcbiAgICovXHJcbiAgcHVibGljIHVybDogZmhpci5GaGlyVXJpfG51bGw7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQnVuZGxlTGluayAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEJ1bmRsZUxpbmtBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsncmVsYXRpb24nXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMucmVsYXRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnJlbGF0aW9ufSwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnJlbGF0aW9uID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3JlbGF0aW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMucmVsYXRpb24pIHsgdGhpcy5yZWxhdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9yZWxhdGlvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnJlbGF0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3JlbGF0aW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd1cmwnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMudXJsID0gbmV3IGZoaXIuRmhpclVyaSh7dmFsdWU6IHNvdXJjZS51cmx9LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudXJsID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3VybCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnVybCkgeyB0aGlzLnVybC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl91cmwhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy51cmwgPSBuZXcgZmhpci5GaGlyVXJpKHNvdXJjZS5fdXJsIGFzIFBhcnRpYWw8Zmhpci5GaGlyVXJpQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnQnVuZGxlLmxpbmsnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdyZWxhdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygndXJsJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBCdW5kbGVFbnRyeVNlYXJjaCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBCdW5kbGVFbnRyeVNlYXJjaEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZXJlIGlzIG9ubHkgb25lIG1vZGUuIEluIHNvbWUgY29ybmVyIGNhc2VzLCBhIHJlc291cmNlIG1heSBiZSBpbmNsdWRlZCBiZWNhdXNlIGl0IGlzIGJvdGggYSBtYXRjaCBhbmQgYW4gaW5jbHVkZS4gSW4gdGhlc2UgY2lyY3Vtc3RhbmNlcywgJ21hdGNoJyB0YWtlcyBwcmVjZWRlbmNlLlxyXG4gICAqL1xyXG4gIG1vZGU/OiBmaGlyLkZoaXJDb2RlPFNlYXJjaEVudHJ5TW9kZUNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUuZW50cnkuc2VhcmNoLm1vZGVcclxuICAgKi9cclxuICBfbW9kZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogU2VydmVycyBhcmUgbm90IHJlcXVpcmVkIHRvIHJldHVybiBhIHJhbmtpbmcgc2NvcmUuIDEgaXMgbW9zdCByZWxldmFudCwgYW5kIDAgaXMgbGVhc3QgcmVsZXZhbnQuIE9mdGVuLCBzZWFyY2ggcmVzdWx0cyBhcmUgc29ydGVkIGJ5IHNjb3JlLCBidXQgdGhlIGNsaWVudCBtYXkgc3BlY2lmeSBhIGRpZmZlcmVudCBzb3J0IG9yZGVyLlxyXG4gICAqIFNlZSBbUGF0aWVudCBNYXRjaF0ocGF0aWVudC1vcGVyYXRpb24tbWF0Y2guaHRtbCkgZm9yIHRoZSBFTVBJIHNlYXJjaCB3aGljaCByZWxhdGVzIHRvIHRoaXMgZWxlbWVudC5cclxuICAgKi9cclxuICBzY29yZT86IGZoaXIuRmhpckRlY2ltYWx8bnVtYmVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLmVudHJ5LnNlYXJjaC5zY29yZVxyXG4gICAqL1xyXG4gIF9zY29yZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbmZvcm1hdGlvbiBhYm91dCB0aGUgc2VhcmNoIHByb2Nlc3MgdGhhdCBsZWFkIHRvIHRoZSBjcmVhdGlvbiBvZiB0aGlzIGVudHJ5LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJ1bmRsZUVudHJ5U2VhcmNoIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQnVuZGxlRW50cnlTZWFyY2gnO1xyXG4gIC8qKlxyXG4gICAqIFRoZXJlIGlzIG9ubHkgb25lIG1vZGUuIEluIHNvbWUgY29ybmVyIGNhc2VzLCBhIHJlc291cmNlIG1heSBiZSBpbmNsdWRlZCBiZWNhdXNlIGl0IGlzIGJvdGggYSBtYXRjaCBhbmQgYW4gaW5jbHVkZS4gSW4gdGhlc2UgY2lyY3Vtc3RhbmNlcywgJ21hdGNoJyB0YWtlcyBwcmVjZWRlbmNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtb2RlPzogZmhpci5GaGlyQ29kZTxTZWFyY2hFbnRyeU1vZGVDb2RlVHlwZT58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFNlcnZlcnMgYXJlIG5vdCByZXF1aXJlZCB0byByZXR1cm4gYSByYW5raW5nIHNjb3JlLiAxIGlzIG1vc3QgcmVsZXZhbnQsIGFuZCAwIGlzIGxlYXN0IHJlbGV2YW50LiBPZnRlbiwgc2VhcmNoIHJlc3VsdHMgYXJlIHNvcnRlZCBieSBzY29yZSwgYnV0IHRoZSBjbGllbnQgbWF5IHNwZWNpZnkgYSBkaWZmZXJlbnQgc29ydCBvcmRlci5cclxuICAgKiBTZWUgW1BhdGllbnQgTWF0Y2hdKHBhdGllbnQtb3BlcmF0aW9uLW1hdGNoLmh0bWwpIGZvciB0aGUgRU1QSSBzZWFyY2ggd2hpY2ggcmVsYXRlcyB0byB0aGlzIGVsZW1lbnQuXHJcbiAgICovXHJcbiAgcHVibGljIHNjb3JlPzogZmhpci5GaGlyRGVjaW1hbHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQnVuZGxlRW50cnlTZWFyY2ggLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxCdW5kbGVFbnRyeVNlYXJjaEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydtb2RlJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLm1vZGUgPSBuZXcgZmhpci5GaGlyQ29kZTxTZWFyY2hFbnRyeU1vZGVDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2UubW9kZX0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfbW9kZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLm1vZGUpIHsgdGhpcy5tb2RlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX21vZGUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5tb2RlID0gbmV3IGZoaXIuRmhpckNvZGU8U2VhcmNoRW50cnlNb2RlQ29kZVR5cGU+KHNvdXJjZS5fbW9kZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2NvcmUnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuc2NvcmUgPSBuZXcgZmhpci5GaGlyRGVjaW1hbCh7dmFsdWU6IHNvdXJjZS5zY29yZX0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfc2NvcmUnXSkge1xyXG4gICAgICBpZiAodGhpcy5zY29yZSkgeyB0aGlzLnNjb3JlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3Njb3JlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc2NvcmUgPSBuZXcgZmhpci5GaGlyRGVjaW1hbChzb3VyY2UuX3Njb3JlIGFzIFBhcnRpYWw8Zmhpci5GaGlyRGVjaW1hbEFyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0J1bmRsZS5lbnRyeS5zZWFyY2gnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TVignbW9kZScsZXhwLCdTZWFyY2hFbnRyeU1vZGUnLFNlYXJjaEVudHJ5TW9kZVZzVmFsaWRhdGlvbiwncicpKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdzY29yZScsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQnVuZGxlRW50cnlSZXF1ZXN0IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEJ1bmRsZUVudHJ5UmVxdWVzdEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEluIGEgdHJhbnNhY3Rpb24gb3IgYmF0Y2gsIHRoaXMgaXMgdGhlIEhUVFAgYWN0aW9uIHRvIGJlIGV4ZWN1dGVkIGZvciB0aGlzIGVudHJ5LiBJbiBhIGhpc3RvcnkgYnVuZGxlLCB0aGlzIGluZGljYXRlcyB0aGUgSFRUUCBhY3Rpb24gdGhhdCBvY2N1cnJlZC5cclxuICAgKi9cclxuICBtZXRob2Q6IGZoaXIuRmhpckNvZGU8SHR0cFZlcmJDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLmVudHJ5LnJlcXVlc3QubWV0aG9kXHJcbiAgICovXHJcbiAgX21ldGhvZD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogRS5nLiBmb3IgYSBQYXRpZW50IENyZWF0ZSwgdGhlIG1ldGhvZCB3b3VsZCBiZSBcIlBPU1RcIiBhbmQgdGhlIFVSTCB3b3VsZCBiZSBcIlBhdGllbnRcIi4gRm9yIGEgUGF0aWVudCBVcGRhdGUsIHRoZSBtZXRob2Qgd291bGQgYmUgUFVUIGFuZCB0aGUgVVJMIHdvdWxkIGJlIFwiUGF0aWVudC9baWRdXCIuXHJcbiAgICovXHJcbiAgdXJsOiBmaGlyLkZoaXJVcml8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLmVudHJ5LnJlcXVlc3QudXJsXHJcbiAgICovXHJcbiAgX3VybD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhlIEVUYWcgdmFsdWVzIG1hdGNoLCByZXR1cm4gYSAzMDQgTm90IE1vZGlmaWVkIHN0YXR1cy4gU2VlIHRoZSBBUEkgZG9jdW1lbnRhdGlvbiBmb3IgW1wiQ29uZGl0aW9uYWwgUmVhZFwiXShodHRwLmh0bWwjY3JlYWQpLlxyXG4gICAqL1xyXG4gIGlmTm9uZU1hdGNoPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEJ1bmRsZS5lbnRyeS5yZXF1ZXN0LmlmTm9uZU1hdGNoXHJcbiAgICovXHJcbiAgX2lmTm9uZU1hdGNoPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBPbmx5IHBlcmZvcm0gdGhlIG9wZXJhdGlvbiBpZiB0aGUgbGFzdCB1cGRhdGVkIGRhdGUgbWF0Y2hlcy4gU2VlIHRoZSBBUEkgZG9jdW1lbnRhdGlvbiBmb3IgW1wiQ29uZGl0aW9uYWwgUmVhZFwiXShodHRwLmh0bWwjY3JlYWQpLlxyXG4gICAqL1xyXG4gIGlmTW9kaWZpZWRTaW5jZT86IGZoaXIuRmhpckluc3RhbnR8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLmVudHJ5LnJlcXVlc3QuaWZNb2RpZmllZFNpbmNlXHJcbiAgICovXHJcbiAgX2lmTW9kaWZpZWRTaW5jZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogT25seSBwZXJmb3JtIHRoZSBvcGVyYXRpb24gaWYgdGhlIEV0YWcgdmFsdWUgbWF0Y2hlcy4gRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZSB0aGUgQVBJIHNlY3Rpb24gW1wiTWFuYWdpbmcgUmVzb3VyY2UgQ29udGVudGlvblwiXShodHRwLmh0bWwjY29uY3VycmVuY3kpLlxyXG4gICAqL1xyXG4gIGlmTWF0Y2g/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLmVudHJ5LnJlcXVlc3QuaWZNYXRjaFxyXG4gICAqL1xyXG4gIF9pZk1hdGNoPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBJbnN0cnVjdCB0aGUgc2VydmVyIG5vdCB0byBwZXJmb3JtIHRoZSBjcmVhdGUgaWYgYSBzcGVjaWZpZWQgcmVzb3VyY2UgYWxyZWFkeSBleGlzdHMuIEZvciBmdXJ0aGVyIGluZm9ybWF0aW9uLCBzZWUgdGhlIEFQSSBkb2N1bWVudGF0aW9uIGZvciBbXCJDb25kaXRpb25hbCBDcmVhdGVcIl0oaHR0cC5odG1sI2NjcmVhdGUpLiBUaGlzIGlzIGp1c3QgdGhlIHF1ZXJ5IHBvcnRpb24gb2YgdGhlIFVSTCAtIHdoYXQgZm9sbG93cyB0aGUgXCI/XCIgKG5vdCBpbmNsdWRpbmcgdGhlIFwiP1wiKS5cclxuICAgKi9cclxuICBpZk5vbmVFeGlzdD86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUuZW50cnkucmVxdWVzdC5pZk5vbmVFeGlzdFxyXG4gICAqL1xyXG4gIF9pZk5vbmVFeGlzdD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBZGRpdGlvbmFsIGluZm9ybWF0aW9uIGFib3V0IGhvdyB0aGlzIGVudHJ5IHNob3VsZCBiZSBwcm9jZXNzZWQgYXMgcGFydCBvZiBhIHRyYW5zYWN0aW9uIG9yIGJhdGNoLiAgRm9yIGhpc3RvcnksIGl0IHNob3dzIGhvdyB0aGUgZW50cnkgd2FzIHByb2Nlc3NlZCB0byBjcmVhdGUgdGhlIHZlcnNpb24gY29udGFpbmVkIGluIHRoZSBlbnRyeS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBCdW5kbGVFbnRyeVJlcXVlc3QgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdCdW5kbGVFbnRyeVJlcXVlc3QnO1xyXG4gIC8qKlxyXG4gICAqIEluIGEgdHJhbnNhY3Rpb24gb3IgYmF0Y2gsIHRoaXMgaXMgdGhlIEhUVFAgYWN0aW9uIHRvIGJlIGV4ZWN1dGVkIGZvciB0aGlzIGVudHJ5LiBJbiBhIGhpc3RvcnkgYnVuZGxlLCB0aGlzIGluZGljYXRlcyB0aGUgSFRUUCBhY3Rpb24gdGhhdCBvY2N1cnJlZC5cclxuICAgKi9cclxuICBwdWJsaWMgbWV0aG9kOiBmaGlyLkZoaXJDb2RlPEh0dHBWZXJiQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogRS5nLiBmb3IgYSBQYXRpZW50IENyZWF0ZSwgdGhlIG1ldGhvZCB3b3VsZCBiZSBcIlBPU1RcIiBhbmQgdGhlIFVSTCB3b3VsZCBiZSBcIlBhdGllbnRcIi4gRm9yIGEgUGF0aWVudCBVcGRhdGUsIHRoZSBtZXRob2Qgd291bGQgYmUgUFVUIGFuZCB0aGUgVVJMIHdvdWxkIGJlIFwiUGF0aWVudC9baWRdXCIuXHJcbiAgICovXHJcbiAgcHVibGljIHVybDogZmhpci5GaGlyVXJpfG51bGw7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhlIEVUYWcgdmFsdWVzIG1hdGNoLCByZXR1cm4gYSAzMDQgTm90IE1vZGlmaWVkIHN0YXR1cy4gU2VlIHRoZSBBUEkgZG9jdW1lbnRhdGlvbiBmb3IgW1wiQ29uZGl0aW9uYWwgUmVhZFwiXShodHRwLmh0bWwjY3JlYWQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZk5vbmVNYXRjaD86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogT25seSBwZXJmb3JtIHRoZSBvcGVyYXRpb24gaWYgdGhlIGxhc3QgdXBkYXRlZCBkYXRlIG1hdGNoZXMuIFNlZSB0aGUgQVBJIGRvY3VtZW50YXRpb24gZm9yIFtcIkNvbmRpdGlvbmFsIFJlYWRcIl0oaHR0cC5odG1sI2NyZWFkKS5cclxuICAgKi9cclxuICBwdWJsaWMgaWZNb2RpZmllZFNpbmNlPzogZmhpci5GaGlySW5zdGFudHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogT25seSBwZXJmb3JtIHRoZSBvcGVyYXRpb24gaWYgdGhlIEV0YWcgdmFsdWUgbWF0Y2hlcy4gRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZSB0aGUgQVBJIHNlY3Rpb24gW1wiTWFuYWdpbmcgUmVzb3VyY2UgQ29udGVudGlvblwiXShodHRwLmh0bWwjY29uY3VycmVuY3kpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZk1hdGNoPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnN0cnVjdCB0aGUgc2VydmVyIG5vdCB0byBwZXJmb3JtIHRoZSBjcmVhdGUgaWYgYSBzcGVjaWZpZWQgcmVzb3VyY2UgYWxyZWFkeSBleGlzdHMuIEZvciBmdXJ0aGVyIGluZm9ybWF0aW9uLCBzZWUgdGhlIEFQSSBkb2N1bWVudGF0aW9uIGZvciBbXCJDb25kaXRpb25hbCBDcmVhdGVcIl0oaHR0cC5odG1sI2NjcmVhdGUpLiBUaGlzIGlzIGp1c3QgdGhlIHF1ZXJ5IHBvcnRpb24gb2YgdGhlIFVSTCAtIHdoYXQgZm9sbG93cyB0aGUgXCI/XCIgKG5vdCBpbmNsdWRpbmcgdGhlIFwiP1wiKS5cclxuICAgKi9cclxuICBwdWJsaWMgaWZOb25lRXhpc3Q/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEJ1bmRsZUVudHJ5UmVxdWVzdCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEJ1bmRsZUVudHJ5UmVxdWVzdEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydtZXRob2QnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMubWV0aG9kID0gbmV3IGZoaXIuRmhpckNvZGU8SHR0cFZlcmJDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2UubWV0aG9kfSwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm1ldGhvZCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19tZXRob2QnXSkge1xyXG4gICAgICBpZiAodGhpcy5tZXRob2QpIHsgdGhpcy5tZXRob2QuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbWV0aG9kISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubWV0aG9kID0gbmV3IGZoaXIuRmhpckNvZGU8SHR0cFZlcmJDb2RlVHlwZT4oc291cmNlLl9tZXRob2QgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3VybCddICE9PSB1bmRlZmluZWQpIHsgdGhpcy51cmwgPSBuZXcgZmhpci5GaGlyVXJpKHt2YWx1ZTogc291cmNlLnVybH0sIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy51cmwgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfdXJsJ10pIHtcclxuICAgICAgaWYgKHRoaXMudXJsKSB7IHRoaXMudXJsLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3VybCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnVybCA9IG5ldyBmaGlyLkZoaXJVcmkoc291cmNlLl91cmwgYXMgUGFydGlhbDxmaGlyLkZoaXJVcmlBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2lmTm9uZU1hdGNoJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLmlmTm9uZU1hdGNoID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5pZk5vbmVNYXRjaH0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfaWZOb25lTWF0Y2gnXSkge1xyXG4gICAgICBpZiAodGhpcy5pZk5vbmVNYXRjaCkgeyB0aGlzLmlmTm9uZU1hdGNoLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2lmTm9uZU1hdGNoISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuaWZOb25lTWF0Y2ggPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5faWZOb25lTWF0Y2ggYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2lmTW9kaWZpZWRTaW5jZSddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5pZk1vZGlmaWVkU2luY2UgPSBuZXcgZmhpci5GaGlySW5zdGFudCh7dmFsdWU6IHNvdXJjZS5pZk1vZGlmaWVkU2luY2V9LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2lmTW9kaWZpZWRTaW5jZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLmlmTW9kaWZpZWRTaW5jZSkgeyB0aGlzLmlmTW9kaWZpZWRTaW5jZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9pZk1vZGlmaWVkU2luY2UhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5pZk1vZGlmaWVkU2luY2UgPSBuZXcgZmhpci5GaGlySW5zdGFudChzb3VyY2UuX2lmTW9kaWZpZWRTaW5jZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckluc3RhbnRBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2lmTWF0Y2gnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuaWZNYXRjaCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuaWZNYXRjaH0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfaWZNYXRjaCddKSB7XHJcbiAgICAgIGlmICh0aGlzLmlmTWF0Y2gpIHsgdGhpcy5pZk1hdGNoLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2lmTWF0Y2ghKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5pZk1hdGNoID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2lmTWF0Y2ggYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2lmTm9uZUV4aXN0J10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLmlmTm9uZUV4aXN0ID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5pZk5vbmVFeGlzdH0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfaWZOb25lRXhpc3QnXSkge1xyXG4gICAgICBpZiAodGhpcy5pZk5vbmVFeGlzdCkgeyB0aGlzLmlmTm9uZUV4aXN0LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2lmTm9uZUV4aXN0ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuaWZOb25lRXhpc3QgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5faWZOb25lRXhpc3QgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdCdW5kbGUuZW50cnkucmVxdWVzdCcgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlNWKCdtZXRob2QnLGV4cCwnSHR0cFZlcmInLEh0dHBWZXJiVnNWYWxpZGF0aW9uLCdyJykpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ3VybCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnaWZOb25lTWF0Y2gnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2lmTW9kaWZpZWRTaW5jZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnaWZNYXRjaCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnaWZOb25lRXhpc3QnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEJ1bmRsZUVudHJ5UmVzcG9uc2UgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQnVuZGxlRW50cnlSZXNwb25zZUFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzdGF0dXMgY29kZSByZXR1cm5lZCBieSBwcm9jZXNzaW5nIHRoaXMgZW50cnkuIFRoZSBzdGF0dXMgU0hBTEwgc3RhcnQgd2l0aCBhIDMgZGlnaXQgSFRUUCBjb2RlIChlLmcuIDQwNCkgYW5kIG1heSBjb250YWluIHRoZSBzdGFuZGFyZCBIVFRQIGRlc2NyaXB0aW9uIGFzc29jaWF0ZWQgd2l0aCB0aGUgc3RhdHVzIGNvZGUuXHJcbiAgICovXHJcbiAgc3RhdHVzOiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLmVudHJ5LnJlc3BvbnNlLnN0YXR1c1xyXG4gICAqL1xyXG4gIF9zdGF0dXM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBsb2NhdGlvbiBoZWFkZXIgY3JlYXRlZCBieSBwcm9jZXNzaW5nIHRoaXMgb3BlcmF0aW9uLCBwb3B1bGF0ZWQgaWYgdGhlIG9wZXJhdGlvbiByZXR1cm5zIGEgbG9jYXRpb24uXHJcbiAgICovXHJcbiAgbG9jYXRpb24/OiBmaGlyLkZoaXJVcml8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLmVudHJ5LnJlc3BvbnNlLmxvY2F0aW9uXHJcbiAgICovXHJcbiAgX2xvY2F0aW9uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBFdGFncyBtYXRjaCB0aGUgUmVzb3VyY2UubWV0YS52ZXJzaW9uSWQuIFRoZSBFVGFnIGhhcyB0byBtYXRjaCB0aGUgdmVyc2lvbiBpZCBpbiB0aGUgaGVhZGVyIGlmIGEgcmVzb3VyY2UgaXMgaW5jbHVkZWQuXHJcbiAgICovXHJcbiAgZXRhZz86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBCdW5kbGUuZW50cnkucmVzcG9uc2UuZXRhZ1xyXG4gICAqL1xyXG4gIF9ldGFnPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGlzIGhhcyB0byBtYXRjaCB0aGUgc2FtZSB0aW1lIGluIHRoZSBtZXRhIGhlYWRlciAobWV0YS5sYXN0VXBkYXRlZCkgaWYgYSByZXNvdXJjZSBpcyBpbmNsdWRlZC5cclxuICAgKi9cclxuICBsYXN0TW9kaWZpZWQ/OiBmaGlyLkZoaXJJbnN0YW50fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEJ1bmRsZS5lbnRyeS5yZXNwb25zZS5sYXN0TW9kaWZpZWRcclxuICAgKi9cclxuICBfbGFzdE1vZGlmaWVkPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBGb3IgYSBQT1NUL1BVVCBvcGVyYXRpb24sIHRoaXMgaXMgdGhlIGVxdWl2YWxlbnQgb3V0Y29tZSB0aGF0IHdvdWxkIGJlIHJldHVybmVkIGZvciBwcmVmZXIgPSBvcGVyYXRpb25vdXRjb21lIC0gZXhjZXB0IHRoYXQgdGhlIHJlc291cmNlIGlzIGFsd2F5cyByZXR1cm5lZCB3aGV0aGVyIG9yIG5vdCB0aGUgb3V0Y29tZSBpcyByZXR1cm5lZC5cclxuICAgKiBUaGlzIG91dGNvbWUgaXMgbm90IHVzZWQgZm9yIGVycm9yIHJlc3BvbnNlcyBpbiBiYXRjaC90cmFuc2FjdGlvbiwgb25seSBmb3IgaGludHMgYW5kIHdhcm5pbmdzLiBJbiBhIGJhdGNoIG9wZXJhdGlvbiwgdGhlIGVycm9yIHdpbGwgYmUgaW4gQnVuZGxlLmVudHJ5LnJlc3BvbnNlLCBhbmQgZm9yIHRyYW5zYWN0aW9uLCB0aGVyZSB3aWxsIGJlIGEgc2luZ2xlIE9wZXJhdGlvbk91dGNvbWUgaW5zdGVhZCBvZiBhIGJ1bmRsZSBpbiB0aGUgY2FzZSBvZiBhbiBlcnJvci5cclxuICAgKi9cclxuICBvdXRjb21lPzogZmhpci5SZXNvdXJjZUFyZ3N8YW55fHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEluZGljYXRlcyB0aGUgcmVzdWx0cyBvZiBwcm9jZXNzaW5nIHRoZSBjb3JyZXNwb25kaW5nICdyZXF1ZXN0JyBlbnRyeSBpbiB0aGUgYmF0Y2ggb3IgdHJhbnNhY3Rpb24gYmVpbmcgcmVzcG9uZGVkIHRvIG9yIHdoYXQgdGhlIHJlc3VsdHMgb2YgYW4gb3BlcmF0aW9uIHdoZXJlIHdoZW4gcmV0dXJuaW5nIGhpc3RvcnkuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQnVuZGxlRW50cnlSZXNwb25zZSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0J1bmRsZUVudHJ5UmVzcG9uc2UnO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzdGF0dXMgY29kZSByZXR1cm5lZCBieSBwcm9jZXNzaW5nIHRoaXMgZW50cnkuIFRoZSBzdGF0dXMgU0hBTEwgc3RhcnQgd2l0aCBhIDMgZGlnaXQgSFRUUCBjb2RlIChlLmcuIDQwNCkgYW5kIG1heSBjb250YWluIHRoZSBzdGFuZGFyZCBIVFRQIGRlc2NyaXB0aW9uIGFzc29jaWF0ZWQgd2l0aCB0aGUgc3RhdHVzIGNvZGUuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1czogZmhpci5GaGlyU3RyaW5nfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGxvY2F0aW9uIGhlYWRlciBjcmVhdGVkIGJ5IHByb2Nlc3NpbmcgdGhpcyBvcGVyYXRpb24sIHBvcHVsYXRlZCBpZiB0aGUgb3BlcmF0aW9uIHJldHVybnMgYSBsb2NhdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgbG9jYXRpb24/OiBmaGlyLkZoaXJVcml8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV0YWdzIG1hdGNoIHRoZSBSZXNvdXJjZS5tZXRhLnZlcnNpb25JZC4gVGhlIEVUYWcgaGFzIHRvIG1hdGNoIHRoZSB2ZXJzaW9uIGlkIGluIHRoZSBoZWFkZXIgaWYgYSByZXNvdXJjZSBpcyBpbmNsdWRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgZXRhZz86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBoYXMgdG8gbWF0Y2ggdGhlIHNhbWUgdGltZSBpbiB0aGUgbWV0YSBoZWFkZXIgKG1ldGEubGFzdFVwZGF0ZWQpIGlmIGEgcmVzb3VyY2UgaXMgaW5jbHVkZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGxhc3RNb2RpZmllZD86IGZoaXIuRmhpckluc3RhbnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEZvciBhIFBPU1QvUFVUIG9wZXJhdGlvbiwgdGhpcyBpcyB0aGUgZXF1aXZhbGVudCBvdXRjb21lIHRoYXQgd291bGQgYmUgcmV0dXJuZWQgZm9yIHByZWZlciA9IG9wZXJhdGlvbm91dGNvbWUgLSBleGNlcHQgdGhhdCB0aGUgcmVzb3VyY2UgaXMgYWx3YXlzIHJldHVybmVkIHdoZXRoZXIgb3Igbm90IHRoZSBvdXRjb21lIGlzIHJldHVybmVkLlxyXG4gICAqIFRoaXMgb3V0Y29tZSBpcyBub3QgdXNlZCBmb3IgZXJyb3IgcmVzcG9uc2VzIGluIGJhdGNoL3RyYW5zYWN0aW9uLCBvbmx5IGZvciBoaW50cyBhbmQgd2FybmluZ3MuIEluIGEgYmF0Y2ggb3BlcmF0aW9uLCB0aGUgZXJyb3Igd2lsbCBiZSBpbiBCdW5kbGUuZW50cnkucmVzcG9uc2UsIGFuZCBmb3IgdHJhbnNhY3Rpb24sIHRoZXJlIHdpbGwgYmUgYSBzaW5nbGUgT3BlcmF0aW9uT3V0Y29tZSBpbnN0ZWFkIG9mIGEgYnVuZGxlIGluIHRoZSBjYXNlIG9mIGFuIGVycm9yLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdXRjb21lPzogZmhpci5GaGlyUmVzb3VyY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEJ1bmRsZUVudHJ5UmVzcG9uc2UgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxCdW5kbGVFbnRyeVJlc3BvbnNlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3N0YXR1cyddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnN0YXR1c30sIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfc3RhdHVzJ10pIHtcclxuICAgICAgaWYgKHRoaXMuc3RhdHVzKSB7IHRoaXMuc3RhdHVzLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3N0YXR1cyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9zdGF0dXMgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2xvY2F0aW9uJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLmxvY2F0aW9uID0gbmV3IGZoaXIuRmhpclVyaSh7dmFsdWU6IHNvdXJjZS5sb2NhdGlvbn0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfbG9jYXRpb24nXSkge1xyXG4gICAgICBpZiAodGhpcy5sb2NhdGlvbikgeyB0aGlzLmxvY2F0aW9uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2xvY2F0aW9uISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubG9jYXRpb24gPSBuZXcgZmhpci5GaGlyVXJpKHNvdXJjZS5fbG9jYXRpb24gYXMgUGFydGlhbDxmaGlyLkZoaXJVcmlBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2V0YWcnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuZXRhZyA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuZXRhZ30sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfZXRhZyddKSB7XHJcbiAgICAgIGlmICh0aGlzLmV0YWcpIHsgdGhpcy5ldGFnLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2V0YWchKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5ldGFnID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2V0YWcgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2xhc3RNb2RpZmllZCddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5sYXN0TW9kaWZpZWQgPSBuZXcgZmhpci5GaGlySW5zdGFudCh7dmFsdWU6IHNvdXJjZS5sYXN0TW9kaWZpZWR9LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2xhc3RNb2RpZmllZCddKSB7XHJcbiAgICAgIGlmICh0aGlzLmxhc3RNb2RpZmllZCkgeyB0aGlzLmxhc3RNb2RpZmllZC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9sYXN0TW9kaWZpZWQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5sYXN0TW9kaWZpZWQgPSBuZXcgZmhpci5GaGlySW5zdGFudChzb3VyY2UuX2xhc3RNb2RpZmllZCBhcyBQYXJ0aWFsPGZoaXIuRmhpckluc3RhbnRBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ291dGNvbWUnXSkgeyB0aGlzLm91dGNvbWUgPSAoZmhpci5yZXNvdXJjZUZhY3Rvcnkoc291cmNlLm91dGNvbWUsIG9wdGlvbnMpID8/IHVuZGVmaW5lZCk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdCdW5kbGUuZW50cnkucmVzcG9uc2UnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdzdGF0dXMnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2xvY2F0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdldGFnJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdsYXN0TW9kaWZpZWQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ291dGNvbWUnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEJ1bmRsZUVudHJ5IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEJ1bmRsZUVudHJ5QXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogQSBzZXJpZXMgb2YgbGlua3MgdGhhdCBwcm92aWRlIGNvbnRleHQgdG8gdGhpcyBlbnRyeS5cclxuICAgKi9cclxuICBsaW5rPzogZmhpci5CdW5kbGVMaW5rQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBmdWxsVXJsIG1pZ2h0IG5vdCBiZSBbdW5pcXVlIGluIHRoZSBjb250ZXh0IG9mIGEgcmVzb3VyY2VdKGJ1bmRsZS5odG1sI2J1bmRsZS11bmlxdWUpLiBOb3RlIHRoYXQgc2luY2UgW0ZISVIgcmVzb3VyY2VzIGRvIG5vdCBuZWVkIHRvIGJlIHNlcnZlZCB0aHJvdWdoIHRoZSBGSElSIEFQSV0ocmVmZXJlbmNlcy5odG1sKSwgdGhlIGZ1bGxVUkwgbWlnaHQgYmUgYSBVUk4gb3IgYW4gYWJzb2x1dGUgVVJMIHRoYXQgZG9lcyBub3QgZW5kIHdpdGggdGhlIGxvZ2ljYWwgaWQgb2YgdGhlIHJlc291cmNlIChSZXNvdXJjZS5pZCkuIEhvd2V2ZXIsIGJ1dCBpZiB0aGUgZnVsbFVybCBkb2VzIGxvb2sgbGlrZSBhIFJFU1RmdWwgc2VydmVyIFVSTCAoZS5nLiBtZWV0cyB0aGUgW3JlZ2V4XShyZWZlcmVuY2VzLmh0bWwjcmVnZXgpLCB0aGVuIHRoZSAnaWQnIHBvcnRpb24gb2YgdGhlIGZ1bGxVcmwgU0hBTEwgZW5kIHdpdGggdGhlIFJlc291cmNlLmlkLlxyXG4gICAqIE5vdGUgdGhhdCB0aGUgZnVsbFVybCBpcyBub3QgdGhlIHNhbWUgYXMgdGhlIGNhbm9uaWNhbCBVUkwgLSBpdCdzIGFuIGFic29sdXRlIHVybCBmb3IgYW4gZW5kcG9pbnQgc2VydmluZyB0aGUgcmVzb3VyY2UgKHRoZXNlIHdpbGwgaGFwcGVuIHRvIGhhdmUgdGhlIHNhbWUgdmFsdWUgb24gdGhlIGNhbm9uaWNhbCBzZXJ2ZXIgZm9yIHRoZSByZXNvdXJjZSB3aXRoIHRoZSBjYW5vbmljYWwgVVJMKS5cclxuICAgKi9cclxuICBmdWxsVXJsPzogZmhpci5GaGlyVXJpfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEJ1bmRsZS5lbnRyeS5mdWxsVXJsXHJcbiAgICovXHJcbiAgX2Z1bGxVcmw/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBSZXNvdXJjZSBmb3IgdGhlIGVudHJ5LiBUaGUgcHVycG9zZS9tZWFuaW5nIG9mIHRoZSByZXNvdXJjZSBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBCdW5kbGUudHlwZS5cclxuICAgKi9cclxuICByZXNvdXJjZT86IGZoaXIuUmVzb3VyY2VBcmdzfGFueXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5mb3JtYXRpb24gYWJvdXQgdGhlIHNlYXJjaCBwcm9jZXNzIHRoYXQgbGVhZCB0byB0aGUgY3JlYXRpb24gb2YgdGhpcyBlbnRyeS5cclxuICAgKi9cclxuICBzZWFyY2g/OiBmaGlyLkJ1bmRsZUVudHJ5U2VhcmNoQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWRkaXRpb25hbCBpbmZvcm1hdGlvbiBhYm91dCBob3cgdGhpcyBlbnRyeSBzaG91bGQgYmUgcHJvY2Vzc2VkIGFzIHBhcnQgb2YgYSB0cmFuc2FjdGlvbiBvciBiYXRjaC4gIEZvciBoaXN0b3J5LCBpdCBzaG93cyBob3cgdGhlIGVudHJ5IHdhcyBwcm9jZXNzZWQgdG8gY3JlYXRlIHRoZSB2ZXJzaW9uIGNvbnRhaW5lZCBpbiB0aGUgZW50cnkuXHJcbiAgICovXHJcbiAgcmVxdWVzdD86IGZoaXIuQnVuZGxlRW50cnlSZXF1ZXN0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHRoZSByZXN1bHRzIG9mIHByb2Nlc3NpbmcgdGhlIGNvcnJlc3BvbmRpbmcgJ3JlcXVlc3QnIGVudHJ5IGluIHRoZSBiYXRjaCBvciB0cmFuc2FjdGlvbiBiZWluZyByZXNwb25kZWQgdG8gb3Igd2hhdCB0aGUgcmVzdWx0cyBvZiBhbiBvcGVyYXRpb24gd2hlcmUgd2hlbiByZXR1cm5pbmcgaGlzdG9yeS5cclxuICAgKi9cclxuICByZXNwb25zZT86IGZoaXIuQnVuZGxlRW50cnlSZXNwb25zZUFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQW4gZW50cnkgaW4gYSBidW5kbGUgcmVzb3VyY2UgLSB3aWxsIGVpdGhlciBjb250YWluIGEgcmVzb3VyY2Ugb3IgaW5mb3JtYXRpb24gYWJvdXQgYSByZXNvdXJjZSAodHJhbnNhY3Rpb25zIGFuZCBoaXN0b3J5IG9ubHkpLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJ1bmRsZUVudHJ5IGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQnVuZGxlRW50cnknO1xyXG4gIC8qKlxyXG4gICAqIEEgc2VyaWVzIG9mIGxpbmtzIHRoYXQgcHJvdmlkZSBjb250ZXh0IHRvIHRoaXMgZW50cnkuXHJcbiAgICovXHJcbiAgcHVibGljIGxpbms6IGZoaXIuQnVuZGxlTGlua1tdO1xyXG4gIC8qKlxyXG4gICAqIGZ1bGxVcmwgbWlnaHQgbm90IGJlIFt1bmlxdWUgaW4gdGhlIGNvbnRleHQgb2YgYSByZXNvdXJjZV0oYnVuZGxlLmh0bWwjYnVuZGxlLXVuaXF1ZSkuIE5vdGUgdGhhdCBzaW5jZSBbRkhJUiByZXNvdXJjZXMgZG8gbm90IG5lZWQgdG8gYmUgc2VydmVkIHRocm91Z2ggdGhlIEZISVIgQVBJXShyZWZlcmVuY2VzLmh0bWwpLCB0aGUgZnVsbFVSTCBtaWdodCBiZSBhIFVSTiBvciBhbiBhYnNvbHV0ZSBVUkwgdGhhdCBkb2VzIG5vdCBlbmQgd2l0aCB0aGUgbG9naWNhbCBpZCBvZiB0aGUgcmVzb3VyY2UgKFJlc291cmNlLmlkKS4gSG93ZXZlciwgYnV0IGlmIHRoZSBmdWxsVXJsIGRvZXMgbG9vayBsaWtlIGEgUkVTVGZ1bCBzZXJ2ZXIgVVJMIChlLmcuIG1lZXRzIHRoZSBbcmVnZXhdKHJlZmVyZW5jZXMuaHRtbCNyZWdleCksIHRoZW4gdGhlICdpZCcgcG9ydGlvbiBvZiB0aGUgZnVsbFVybCBTSEFMTCBlbmQgd2l0aCB0aGUgUmVzb3VyY2UuaWQuXHJcbiAgICogTm90ZSB0aGF0IHRoZSBmdWxsVXJsIGlzIG5vdCB0aGUgc2FtZSBhcyB0aGUgY2Fub25pY2FsIFVSTCAtIGl0J3MgYW4gYWJzb2x1dGUgdXJsIGZvciBhbiBlbmRwb2ludCBzZXJ2aW5nIHRoZSByZXNvdXJjZSAodGhlc2Ugd2lsbCBoYXBwZW4gdG8gaGF2ZSB0aGUgc2FtZSB2YWx1ZSBvbiB0aGUgY2Fub25pY2FsIHNlcnZlciBmb3IgdGhlIHJlc291cmNlIHdpdGggdGhlIGNhbm9uaWNhbCBVUkwpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBmdWxsVXJsPzogZmhpci5GaGlyVXJpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgUmVzb3VyY2UgZm9yIHRoZSBlbnRyeS4gVGhlIHB1cnBvc2UvbWVhbmluZyBvZiB0aGUgcmVzb3VyY2UgaXMgZGV0ZXJtaW5lZCBieSB0aGUgQnVuZGxlLnR5cGUuXHJcbiAgICovXHJcbiAgcHVibGljIHJlc291cmNlPzogZmhpci5GaGlyUmVzb3VyY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZm9ybWF0aW9uIGFib3V0IHRoZSBzZWFyY2ggcHJvY2VzcyB0aGF0IGxlYWQgdG8gdGhlIGNyZWF0aW9uIG9mIHRoaXMgZW50cnkuXHJcbiAgICovXHJcbiAgcHVibGljIHNlYXJjaD86IGZoaXIuQnVuZGxlRW50cnlTZWFyY2h8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFkZGl0aW9uYWwgaW5mb3JtYXRpb24gYWJvdXQgaG93IHRoaXMgZW50cnkgc2hvdWxkIGJlIHByb2Nlc3NlZCBhcyBwYXJ0IG9mIGEgdHJhbnNhY3Rpb24gb3IgYmF0Y2guICBGb3IgaGlzdG9yeSwgaXQgc2hvd3MgaG93IHRoZSBlbnRyeSB3YXMgcHJvY2Vzc2VkIHRvIGNyZWF0ZSB0aGUgdmVyc2lvbiBjb250YWluZWQgaW4gdGhlIGVudHJ5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZXF1ZXN0PzogZmhpci5CdW5kbGVFbnRyeVJlcXVlc3R8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB0aGUgcmVzdWx0cyBvZiBwcm9jZXNzaW5nIHRoZSBjb3JyZXNwb25kaW5nICdyZXF1ZXN0JyBlbnRyeSBpbiB0aGUgYmF0Y2ggb3IgdHJhbnNhY3Rpb24gYmVpbmcgcmVzcG9uZGVkIHRvIG9yIHdoYXQgdGhlIHJlc3VsdHMgb2YgYW4gb3BlcmF0aW9uIHdoZXJlIHdoZW4gcmV0dXJuaW5nIGhpc3RvcnkuXHJcbiAgICovXHJcbiAgcHVibGljIHJlc3BvbnNlPzogZmhpci5CdW5kbGVFbnRyeVJlc3BvbnNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBCdW5kbGVFbnRyeSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEJ1bmRsZUVudHJ5QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2xpbmsnXSkgeyB0aGlzLmxpbmsgPSBzb3VyY2UubGluay5tYXAoKHgpID0+IG5ldyBmaGlyLkJ1bmRsZUxpbmsoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5saW5rID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2Z1bGxVcmwnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuZnVsbFVybCA9IG5ldyBmaGlyLkZoaXJVcmkoe3ZhbHVlOiBzb3VyY2UuZnVsbFVybH0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfZnVsbFVybCddKSB7XHJcbiAgICAgIGlmICh0aGlzLmZ1bGxVcmwpIHsgdGhpcy5mdWxsVXJsLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2Z1bGxVcmwhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5mdWxsVXJsID0gbmV3IGZoaXIuRmhpclVyaShzb3VyY2UuX2Z1bGxVcmwgYXMgUGFydGlhbDxmaGlyLkZoaXJVcmlBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3Jlc291cmNlJ10pIHsgdGhpcy5yZXNvdXJjZSA9IChmaGlyLnJlc291cmNlRmFjdG9yeShzb3VyY2UucmVzb3VyY2UsIG9wdGlvbnMpID8/IHVuZGVmaW5lZCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3NlYXJjaCddKSB7IHRoaXMuc2VhcmNoID0gbmV3IGZoaXIuQnVuZGxlRW50cnlTZWFyY2goc291cmNlLnNlYXJjaCwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3JlcXVlc3QnXSkgeyB0aGlzLnJlcXVlc3QgPSBuZXcgZmhpci5CdW5kbGVFbnRyeVJlcXVlc3Qoc291cmNlLnJlcXVlc3QsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydyZXNwb25zZSddKSB7IHRoaXMucmVzcG9uc2UgPSBuZXcgZmhpci5CdW5kbGVFbnRyeVJlc3BvbnNlKHNvdXJjZS5yZXNwb25zZSwgb3B0aW9ucyk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdCdW5kbGUuZW50cnknIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdsaW5rJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdmdWxsVXJsJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdyZXNvdXJjZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnc2VhcmNoJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdyZXF1ZXN0JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdyZXNwb25zZScsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxuXHJcbi8qKlxyXG4gKiBBY2Nlc3MgYSBidW5kbGUuZW50cnlbXS5yZXNvdXJjZSBhcyBhIHR5cGVkIHJlc291cmNlXHJcbiAqL1xyXG4gIHJlc291cmNlQXM8QnVuZGVDb250ZW50VHlwZSA9IGZoaXIuRmhpclJlc291cmNlPigpOiBCdW5kZUNvbnRlbnRUeXBlfHVua25vd24ge1xyXG4gICAgcmV0dXJuIHRoaXMucmVzb3VyY2UgYXMgdW5rbm93biBhcyBCdW5kZUNvbnRlbnRUeXBlO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQnVuZGxlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEJ1bmRsZUFyZ3MgZXh0ZW5kcyBmaGlyLlJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIkJ1bmRsZVwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBQZXJzaXN0ZW50IGlkZW50aXR5IGdlbmVyYWxseSBvbmx5IG1hdHRlcnMgZm9yIGJhdGNoZXMgb2YgdHlwZSBEb2N1bWVudCwgTWVzc2FnZSwgYW5kIENvbGxlY3Rpb24uIEl0IHdvdWxkIG5vdCBub3JtYWxseSBiZSBwb3B1bGF0ZWQgZm9yIHNlYXJjaCBhbmQgaGlzdG9yeSByZXN1bHRzIGFuZCBzZXJ2ZXJzIGlnbm9yZSBCdW5kbGUuaWRlbnRpZmllciB3aGVuIHByb2Nlc3NpbmcgYmF0Y2hlcyBhbmQgdHJhbnNhY3Rpb25zLiBGb3IgRG9jdW1lbnRzICB0aGUgLmlkZW50aWZpZXIgU0hBTEwgYmUgcG9wdWxhdGVkIHN1Y2ggdGhhdCB0aGUgLmlkZW50aWZpZXIgaXMgZ2xvYmFsbHkgdW5pcXVlLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJdCdzIHBvc3NpYmxlIHRvIHVzZSBhIGJ1bmRsZSBmb3Igb3RoZXIgcHVycG9zZXMgKGUuZy4gYSBkb2N1bWVudCBjYW4gYmUgYWNjZXB0ZWQgYXMgYSB0cmFuc2FjdGlvbikuIFRoaXMgaXMgcHJpbWFyaWx5IGRlZmluZWQgc28gdGhhdCB0aGVyZSBjYW4gYmUgc3BlY2lmaWMgcnVsZXMgZm9yIHNvbWUgb2YgdGhlIGJ1bmRsZSB0eXBlcy5cclxuICAgKi9cclxuICB0eXBlOiBmaGlyLkZoaXJDb2RlPEJ1bmRsZVR5cGVDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLnR5cGVcclxuICAgKi9cclxuICBfdHlwZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogRm9yIG1hbnkgYnVuZGxlcywgdGhlIHRpbWVzdGFtcCBpcyBlcXVhbCB0byAubWV0YS5sYXN0VXBkYXRlZCwgYmVjYXVzZSB0aGV5IGFyZSBub3Qgc3RvcmVkIChlLmcuIHNlYXJjaCByZXN1bHRzKS4gV2hlbiBhIGJ1bmRsZSBpcyBwbGFjZWQgaW4gYSBwZXJzaXN0ZW50IHN0b3JlLCAubWV0YS5sYXN0VXBkYXRlZCB3aWxsIGJlIHVzdWFsbHkgYmUgY2hhbmdlZCBieSB0aGUgc2VydmVyLiBXaGVuIHRoZSBidW5kbGUgaXMgYSBtZXNzYWdlLCBhIG1pZGRsZXdhcmUgYWdlbnQgYWx0ZXJpbmcgdGhlIG1lc3NhZ2UgKGV2ZW4gaWYgbm90IHN0b3JlZCkgU0hPVUxEIHVwZGF0ZSAubWV0YS5sYXN0VXBkYXRlZC4gLnRpbWVzdGFtcCBpcyB1c2VkIHRvIHRyYWNrIHRoZSBvcmlnaW5hbCB0aW1lIG9mIHRoZSBCdW5kbGUsIGFuZCBTSE9VTEQgYmUgcG9wdWxhdGVkLiAgXHJcbiAgICogVXNhZ2U6XHJcbiAgICogKiBkb2N1bWVudCA6IHRoZSBkYXRlIHRoZSBkb2N1bWVudCB3YXMgY3JlYXRlZC4gTm90ZTogdGhlIGNvbXBvc2l0aW9uIG1heSBwcmVkYXRlIHRoZSBkb2N1bWVudCwgb3IgYmUgYXNzb2NpYXRlZCB3aXRoIG11bHRpcGxlIGRvY3VtZW50cy4gVGhlIGRhdGUgb2YgdGhlIGNvbXBvc2l0aW9uIC0gdGhlIGF1dGhvcmluZyB0aW1lIC0gbWF5IGJlIGVhcmxpZXIgdGhhbiB0aGUgZG9jdW1lbnQgYXNzZW1ibHkgdGltZVxyXG4gICAqICogbWVzc2FnZSA6IHRoZSBkYXRlIHRoYXQgdGhlIGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2Ugd2FzIGFzc2VtYmxlZC4gVGhpcyBkYXRlIGlzIG5vdCBjaGFuZ2VkIGJ5IG1pZGRsZXdhcmUgZW5naW5lcyB1bmxlc3MgdGhleSBhZGQgYWRkaXRpb25hbCBkYXRhIHRoYXQgY2hhbmdlcyB0aGUgbWVhbmluZyBvZiB0aGUgdGltZSBvZiB0aGUgbWVzc2FnZVxyXG4gICAqICogaGlzdG9yeSA6IHRoZSBkYXRlIHRoYXQgdGhlIGhpc3Rvcnkgd2FzIGFzc2VtYmxlZC4gVGhpcyB0aW1lIHdvdWxkIGJlIHVzZWQgYXMgdGhlIF9zaW5jZSB0aW1lIHRvIGFzayBmb3Igc3Vic2VxdWVudCB1cGRhdGVzXHJcbiAgICogKiBzZWFyY2hzZXQgOiB0aGUgdGltZSB0aGF0IHRoZSBzZWFyY2ggc2V0IHdhcyBhc3NlbWJsZWQuIE5vdGUgdGhhdCBkaWZmZXJlbnQgcGFnZXMgTUFZIGhhdmUgZGlmZmVyZW50IHRpbWVzdGFtcHMgYnV0IG5lZWQgbm90LiBIYXZpbmcgZGlmZmVyZW50IHRpbWVzdGFtcHMgZG9lcyBub3QgaW1wbHkgdGhhdCBzdWJzZXF1ZW50IHBhZ2VzIHdpbGwgcmVwcmVzZW50IG9yIGluY2x1ZGUgY2hhbmdlcyBtYWRlIHNpbmNlIHRoZSBpbml0aWFsIHF1ZXJ5XHJcbiAgICogKiB0cmFuc2FjdGlvbiB8IHRyYW5zYWN0aW9uLXJlc3BvbnNlIHwgYmF0Y2ggfCBiYXRjaC1yZXNwb25zZSB8IGNvbGxlY3Rpb24gOiBubyBwYXJ0aWN1bGFyIGFzc2lnbmVkIG1lYW5pbmdcclxuICAgKiBUaGUgdGltZXN0YW1wIHZhbHVlIHNob3VsZCBiZSBncmVhdGVyIHRoYW4gdGhlIGxhc3RVcGRhdGVkIGFuZCBvdGhlciB0aW1lc3RhbXBzIGluIHRoZSByZXNvdXJjZXMgaW4gdGhlIGJ1bmRsZSwgYW5kIGl0IHNob3VsZCBiZSBlcXVhbCBvciBlYXJsaWVyIHRoYW4gdGhlIC5tZXRhLmxhc3RVcGRhdGVkIG9uIHRoZSBCdW5kbGUgaXRzZWxmLlxyXG4gICAqL1xyXG4gIHRpbWVzdGFtcD86IGZoaXIuRmhpckluc3RhbnR8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQnVuZGxlLnRpbWVzdGFtcFxyXG4gICAqL1xyXG4gIF90aW1lc3RhbXA/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIE9ubHkgdXNlZCBpZiB0aGUgYnVuZGxlIGlzIGEgc2VhcmNoIHJlc3VsdCBzZXQuIFRoZSB0b3RhbCBkb2VzIG5vdCBpbmNsdWRlIHJlc291cmNlcyBzdWNoIGFzIE9wZXJhdGlvbk91dGNvbWUgYW5kIGluY2x1ZGVkIHJlc291cmNlcywgb25seSB0aGUgdG90YWwgbnVtYmVyIG9mIG1hdGNoaW5nIHJlc291cmNlcy5cclxuICAgKi9cclxuICB0b3RhbD86IGZoaXIuRmhpclVuc2lnbmVkSW50fG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEJ1bmRsZS50b3RhbFxyXG4gICAqL1xyXG4gIF90b3RhbD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQm90aCBCdW5kbGUubGluayBhbmQgQnVuZGxlLmVudHJ5LmxpbmsgYXJlIGRlZmluZWQgdG8gc3VwcG9ydCBwcm92aWRpbmcgYWRkaXRpb25hbCBjb250ZXh0IHdoZW4gQnVuZGxlcyBhcmUgdXNlZCAoZS5nLiBbSEFURU9BU10oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9IQVRFT0FTKSkuIFxyXG4gICAqIEJ1bmRsZS5lbnRyeS5saW5rIGNvcnJlc3BvbmRzIHRvIGxpbmtzIGZvdW5kIGluIHRoZSBIVFRQIGhlYWRlciBpZiB0aGUgcmVzb3VyY2UgaW4gdGhlIGVudHJ5IHdhcyBbcmVhZF0oaHR0cC5odG1sI3JlYWQpIGRpcmVjdGx5LlxyXG4gICAqIFRoaXMgc3BlY2lmaWNhdGlvbiBkZWZpbmVzIHNvbWUgc3BlY2lmaWMgdXNlcyBvZiBCdW5kbGUubGluayBmb3IgW3NlYXJjaGluZ10oc2VhcmNoLmh0bWwjY29uZm9ybWFuY2UpIGFuZCBbcGFnaW5nXShodHRwLmh0bWwjcGFnaW5nKSwgYnV0IG5vIHNwZWNpZmljIHVzZXMgZm9yIEJ1bmRsZS5lbnRyeS5saW5rLCBhbmQgbm8gZGVmaW5lZCBmdW5jdGlvbiBpbiBhIHRyYW5zYWN0aW9uIC0gdGhlIG1lYW5pbmcgaXMgaW1wbGVtZW50YXRpb24gc3BlY2lmaWMuXHJcbiAgICovXHJcbiAgbGluaz86IGZoaXIuQnVuZGxlTGlua0FyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQW4gZW50cnkgaW4gYSBidW5kbGUgcmVzb3VyY2UgLSB3aWxsIGVpdGhlciBjb250YWluIGEgcmVzb3VyY2Ugb3IgaW5mb3JtYXRpb24gYWJvdXQgYSByZXNvdXJjZSAodHJhbnNhY3Rpb25zIGFuZCBoaXN0b3J5IG9ubHkpLlxyXG4gICAqL1xyXG4gIGVudHJ5PzogZmhpci5CdW5kbGVFbnRyeUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNpZ25hdHVyZSBjb3VsZCBiZSBjcmVhdGVkIGJ5IHRoZSBcImF1dGhvclwiIG9mIHRoZSBidW5kbGUgb3IgYnkgdGhlIG9yaWdpbmF0aW5nIGRldmljZS4gICBSZXF1aXJlbWVudHMgYXJvdW5kIGluY2x1c2lvbiBvZiBhIHNpZ25hdHVyZSwgdmVyaWZpY2F0aW9uIG9mIHNpZ25hdHVyZXMgYW5kIHRyZWF0bWVudCBvZiBzaWduZWQvbm9uLXNpZ25lZCBidW5kbGVzIGlzIGltcGxlbWVudGF0aW9uLWVudmlyb25tZW50IHNwZWNpZmljLlxyXG4gICAqL1xyXG4gIHNpZ25hdHVyZT86IGZoaXIuU2lnbmF0dXJlQXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBIGNvbnRhaW5lciBmb3IgYSBjb2xsZWN0aW9uIG9mIHJlc291cmNlcy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBCdW5kbGUgZXh0ZW5kcyBmaGlyLlJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0J1bmRsZSc7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJCdW5kbGVcIjtcclxuICAvKipcclxuICAgKiBQZXJzaXN0ZW50IGlkZW50aXR5IGdlbmVyYWxseSBvbmx5IG1hdHRlcnMgZm9yIGJhdGNoZXMgb2YgdHlwZSBEb2N1bWVudCwgTWVzc2FnZSwgYW5kIENvbGxlY3Rpb24uIEl0IHdvdWxkIG5vdCBub3JtYWxseSBiZSBwb3B1bGF0ZWQgZm9yIHNlYXJjaCBhbmQgaGlzdG9yeSByZXN1bHRzIGFuZCBzZXJ2ZXJzIGlnbm9yZSBCdW5kbGUuaWRlbnRpZmllciB3aGVuIHByb2Nlc3NpbmcgYmF0Y2hlcyBhbmQgdHJhbnNhY3Rpb25zLiBGb3IgRG9jdW1lbnRzICB0aGUgLmlkZW50aWZpZXIgU0hBTEwgYmUgcG9wdWxhdGVkIHN1Y2ggdGhhdCB0aGUgLmlkZW50aWZpZXIgaXMgZ2xvYmFsbHkgdW5pcXVlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJdCdzIHBvc3NpYmxlIHRvIHVzZSBhIGJ1bmRsZSBmb3Igb3RoZXIgcHVycG9zZXMgKGUuZy4gYSBkb2N1bWVudCBjYW4gYmUgYWNjZXB0ZWQgYXMgYSB0cmFuc2FjdGlvbikuIFRoaXMgaXMgcHJpbWFyaWx5IGRlZmluZWQgc28gdGhhdCB0aGVyZSBjYW4gYmUgc3BlY2lmaWMgcnVsZXMgZm9yIHNvbWUgb2YgdGhlIGJ1bmRsZSB0eXBlcy5cclxuICAgKi9cclxuICBwdWJsaWMgdHlwZTogZmhpci5GaGlyQ29kZTxCdW5kbGVUeXBlQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogRm9yIG1hbnkgYnVuZGxlcywgdGhlIHRpbWVzdGFtcCBpcyBlcXVhbCB0byAubWV0YS5sYXN0VXBkYXRlZCwgYmVjYXVzZSB0aGV5IGFyZSBub3Qgc3RvcmVkIChlLmcuIHNlYXJjaCByZXN1bHRzKS4gV2hlbiBhIGJ1bmRsZSBpcyBwbGFjZWQgaW4gYSBwZXJzaXN0ZW50IHN0b3JlLCAubWV0YS5sYXN0VXBkYXRlZCB3aWxsIGJlIHVzdWFsbHkgYmUgY2hhbmdlZCBieSB0aGUgc2VydmVyLiBXaGVuIHRoZSBidW5kbGUgaXMgYSBtZXNzYWdlLCBhIG1pZGRsZXdhcmUgYWdlbnQgYWx0ZXJpbmcgdGhlIG1lc3NhZ2UgKGV2ZW4gaWYgbm90IHN0b3JlZCkgU0hPVUxEIHVwZGF0ZSAubWV0YS5sYXN0VXBkYXRlZC4gLnRpbWVzdGFtcCBpcyB1c2VkIHRvIHRyYWNrIHRoZSBvcmlnaW5hbCB0aW1lIG9mIHRoZSBCdW5kbGUsIGFuZCBTSE9VTEQgYmUgcG9wdWxhdGVkLiAgXHJcbiAgICogVXNhZ2U6XHJcbiAgICogKiBkb2N1bWVudCA6IHRoZSBkYXRlIHRoZSBkb2N1bWVudCB3YXMgY3JlYXRlZC4gTm90ZTogdGhlIGNvbXBvc2l0aW9uIG1heSBwcmVkYXRlIHRoZSBkb2N1bWVudCwgb3IgYmUgYXNzb2NpYXRlZCB3aXRoIG11bHRpcGxlIGRvY3VtZW50cy4gVGhlIGRhdGUgb2YgdGhlIGNvbXBvc2l0aW9uIC0gdGhlIGF1dGhvcmluZyB0aW1lIC0gbWF5IGJlIGVhcmxpZXIgdGhhbiB0aGUgZG9jdW1lbnQgYXNzZW1ibHkgdGltZVxyXG4gICAqICogbWVzc2FnZSA6IHRoZSBkYXRlIHRoYXQgdGhlIGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2Ugd2FzIGFzc2VtYmxlZC4gVGhpcyBkYXRlIGlzIG5vdCBjaGFuZ2VkIGJ5IG1pZGRsZXdhcmUgZW5naW5lcyB1bmxlc3MgdGhleSBhZGQgYWRkaXRpb25hbCBkYXRhIHRoYXQgY2hhbmdlcyB0aGUgbWVhbmluZyBvZiB0aGUgdGltZSBvZiB0aGUgbWVzc2FnZVxyXG4gICAqICogaGlzdG9yeSA6IHRoZSBkYXRlIHRoYXQgdGhlIGhpc3Rvcnkgd2FzIGFzc2VtYmxlZC4gVGhpcyB0aW1lIHdvdWxkIGJlIHVzZWQgYXMgdGhlIF9zaW5jZSB0aW1lIHRvIGFzayBmb3Igc3Vic2VxdWVudCB1cGRhdGVzXHJcbiAgICogKiBzZWFyY2hzZXQgOiB0aGUgdGltZSB0aGF0IHRoZSBzZWFyY2ggc2V0IHdhcyBhc3NlbWJsZWQuIE5vdGUgdGhhdCBkaWZmZXJlbnQgcGFnZXMgTUFZIGhhdmUgZGlmZmVyZW50IHRpbWVzdGFtcHMgYnV0IG5lZWQgbm90LiBIYXZpbmcgZGlmZmVyZW50IHRpbWVzdGFtcHMgZG9lcyBub3QgaW1wbHkgdGhhdCBzdWJzZXF1ZW50IHBhZ2VzIHdpbGwgcmVwcmVzZW50IG9yIGluY2x1ZGUgY2hhbmdlcyBtYWRlIHNpbmNlIHRoZSBpbml0aWFsIHF1ZXJ5XHJcbiAgICogKiB0cmFuc2FjdGlvbiB8IHRyYW5zYWN0aW9uLXJlc3BvbnNlIHwgYmF0Y2ggfCBiYXRjaC1yZXNwb25zZSB8IGNvbGxlY3Rpb24gOiBubyBwYXJ0aWN1bGFyIGFzc2lnbmVkIG1lYW5pbmdcclxuICAgKiBUaGUgdGltZXN0YW1wIHZhbHVlIHNob3VsZCBiZSBncmVhdGVyIHRoYW4gdGhlIGxhc3RVcGRhdGVkIGFuZCBvdGhlciB0aW1lc3RhbXBzIGluIHRoZSByZXNvdXJjZXMgaW4gdGhlIGJ1bmRsZSwgYW5kIGl0IHNob3VsZCBiZSBlcXVhbCBvciBlYXJsaWVyIHRoYW4gdGhlIC5tZXRhLmxhc3RVcGRhdGVkIG9uIHRoZSBCdW5kbGUgaXRzZWxmLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0aW1lc3RhbXA/OiBmaGlyLkZoaXJJbnN0YW50fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBPbmx5IHVzZWQgaWYgdGhlIGJ1bmRsZSBpcyBhIHNlYXJjaCByZXN1bHQgc2V0LiBUaGUgdG90YWwgZG9lcyBub3QgaW5jbHVkZSByZXNvdXJjZXMgc3VjaCBhcyBPcGVyYXRpb25PdXRjb21lIGFuZCBpbmNsdWRlZCByZXNvdXJjZXMsIG9ubHkgdGhlIHRvdGFsIG51bWJlciBvZiBtYXRjaGluZyByZXNvdXJjZXMuXHJcbiAgICovXHJcbiAgcHVibGljIHRvdGFsPzogZmhpci5GaGlyVW5zaWduZWRJbnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEJvdGggQnVuZGxlLmxpbmsgYW5kIEJ1bmRsZS5lbnRyeS5saW5rIGFyZSBkZWZpbmVkIHRvIHN1cHBvcnQgcHJvdmlkaW5nIGFkZGl0aW9uYWwgY29udGV4dCB3aGVuIEJ1bmRsZXMgYXJlIHVzZWQgKGUuZy4gW0hBVEVPQVNdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSEFURU9BUykpLiBcclxuICAgKiBCdW5kbGUuZW50cnkubGluayBjb3JyZXNwb25kcyB0byBsaW5rcyBmb3VuZCBpbiB0aGUgSFRUUCBoZWFkZXIgaWYgdGhlIHJlc291cmNlIGluIHRoZSBlbnRyeSB3YXMgW3JlYWRdKGh0dHAuaHRtbCNyZWFkKSBkaXJlY3RseS5cclxuICAgKiBUaGlzIHNwZWNpZmljYXRpb24gZGVmaW5lcyBzb21lIHNwZWNpZmljIHVzZXMgb2YgQnVuZGxlLmxpbmsgZm9yIFtzZWFyY2hpbmddKHNlYXJjaC5odG1sI2NvbmZvcm1hbmNlKSBhbmQgW3BhZ2luZ10oaHR0cC5odG1sI3BhZ2luZyksIGJ1dCBubyBzcGVjaWZpYyB1c2VzIGZvciBCdW5kbGUuZW50cnkubGluaywgYW5kIG5vIGRlZmluZWQgZnVuY3Rpb24gaW4gYSB0cmFuc2FjdGlvbiAtIHRoZSBtZWFuaW5nIGlzIGltcGxlbWVudGF0aW9uIHNwZWNpZmljLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBsaW5rOiBmaGlyLkJ1bmRsZUxpbmtbXTtcclxuICAvKipcclxuICAgKiBBbiBlbnRyeSBpbiBhIGJ1bmRsZSByZXNvdXJjZSAtIHdpbGwgZWl0aGVyIGNvbnRhaW4gYSByZXNvdXJjZSBvciBpbmZvcm1hdGlvbiBhYm91dCBhIHJlc291cmNlICh0cmFuc2FjdGlvbnMgYW5kIGhpc3Rvcnkgb25seSkuXHJcbiAgICovXHJcbiAgcHVibGljIGVudHJ5OiBmaGlyLkJ1bmRsZUVudHJ5W107XHJcbiAgLyoqXHJcbiAgICogVGhlIHNpZ25hdHVyZSBjb3VsZCBiZSBjcmVhdGVkIGJ5IHRoZSBcImF1dGhvclwiIG9mIHRoZSBidW5kbGUgb3IgYnkgdGhlIG9yaWdpbmF0aW5nIGRldmljZS4gICBSZXF1aXJlbWVudHMgYXJvdW5kIGluY2x1c2lvbiBvZiBhIHNpZ25hdHVyZSwgdmVyaWZpY2F0aW9uIG9mIHNpZ25hdHVyZXMgYW5kIHRyZWF0bWVudCBvZiBzaWduZWQvbm9uLXNpZ25lZCBidW5kbGVzIGlzIGltcGxlbWVudGF0aW9uLWVudmlyb25tZW50IHNwZWNpZmljLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzaWduYXR1cmU/OiBmaGlyLlNpZ25hdHVyZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQnVuZGxlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8QnVuZGxlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ0J1bmRsZSc7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gbmV3IGZoaXIuSWRlbnRpZmllcihzb3VyY2UuaWRlbnRpZmllciwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3R5cGUnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMudHlwZSA9IG5ldyBmaGlyLkZoaXJDb2RlPEJ1bmRsZVR5cGVDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2UudHlwZX0sIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy50eXBlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3R5cGUnXSkge1xyXG4gICAgICBpZiAodGhpcy50eXBlKSB7IHRoaXMudHlwZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl90eXBlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudHlwZSA9IG5ldyBmaGlyLkZoaXJDb2RlPEJ1bmRsZVR5cGVDb2RlVHlwZT4oc291cmNlLl90eXBlIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd0aW1lc3RhbXAnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMudGltZXN0YW1wID0gbmV3IGZoaXIuRmhpckluc3RhbnQoe3ZhbHVlOiBzb3VyY2UudGltZXN0YW1wfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ190aW1lc3RhbXAnXSkge1xyXG4gICAgICBpZiAodGhpcy50aW1lc3RhbXApIHsgdGhpcy50aW1lc3RhbXAuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdGltZXN0YW1wISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudGltZXN0YW1wID0gbmV3IGZoaXIuRmhpckluc3RhbnQoc291cmNlLl90aW1lc3RhbXAgYXMgUGFydGlhbDxmaGlyLkZoaXJJbnN0YW50QXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd0b3RhbCddICE9PSB1bmRlZmluZWQpIHsgdGhpcy50b3RhbCA9IG5ldyBmaGlyLkZoaXJVbnNpZ25lZEludCh7dmFsdWU6IHNvdXJjZS50b3RhbH0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfdG90YWwnXSkge1xyXG4gICAgICBpZiAodGhpcy50b3RhbCkgeyB0aGlzLnRvdGFsLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3RvdGFsISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudG90YWwgPSBuZXcgZmhpci5GaGlyVW5zaWduZWRJbnQoc291cmNlLl90b3RhbCBhcyBQYXJ0aWFsPGZoaXIuRmhpclVuc2lnbmVkSW50QXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydsaW5rJ10pIHsgdGhpcy5saW5rID0gc291cmNlLmxpbmsubWFwKCh4KSA9PiBuZXcgZmhpci5CdW5kbGVMaW5rKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubGluayA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydlbnRyeSddKSB7IHRoaXMuZW50cnkgPSBzb3VyY2UuZW50cnkubWFwKCh4KSA9PiBuZXcgZmhpci5CdW5kbGVFbnRyeSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmVudHJ5ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3NpZ25hdHVyZSddKSB7IHRoaXMuc2lnbmF0dXJlID0gbmV3IGZoaXIuU2lnbmF0dXJlKHNvdXJjZS5zaWduYXR1cmUsIG9wdGlvbnMpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnQnVuZGxlJyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnaWRlbnRpZmllcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSU1YoJ3R5cGUnLGV4cCwnQnVuZGxlVHlwZScsQnVuZGxlVHlwZVZzVmFsaWRhdGlvbiwncicpKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCd0aW1lc3RhbXAnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3RvdGFsJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdsaW5rJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdlbnRyeScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnc2lnbmF0dXJlJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbiJdfQ==