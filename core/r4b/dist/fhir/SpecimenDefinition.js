// <auto-generated/>
// Contents of: hl7.fhir.r4b.core version: 4.3.0
// Minimum TypeScript Version: 3.7
// FHIR Resource: SpecimenDefinition
import * as fhir from '../fhir.js';
// @ts-ignore
import { SpecimenContainedPreferenceVsValidation } from '../fhirValueSets/SpecimenContainedPreferenceVsValidation.js';
/**
 * Substance introduced in the kind of container to preserve, maintain or enhance the specimen. Examples: Formalin, Citrate, EDTA.
 */
export class SpecimenDefinitionTypeTestedContainerAdditive extends fhir.BackboneElement {
    /**
     * Default constructor for SpecimenDefinitionTypeTestedContainerAdditive - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['additive']) {
            this.additive = source.additive;
        }
        else if (source['additiveCodeableConcept']) {
            this.additive = new fhir.CodeableConcept(source.additiveCodeableConcept);
        }
        else if (source['additiveReference']) {
            this.additive = new fhir.Reference(source.additiveReference);
        }
        else {
            this.additive = null;
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SpecimenDefinition.typeTested.container.additive';
        }
        iss.push(...this.vRS('additive', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SpecimenDefinitionTypeTestedContainerAdditive._fts_dataType = 'SpecimenDefinitionTypeTestedContainerAdditive';
/**
 * Internal flag to properly serialize choice-type element SpecimenDefinition.typeTested.container.additive.additive[x]
 */
SpecimenDefinitionTypeTestedContainerAdditive._fts_additiveIsChoice = true;
/**
 * The specimen's container.
 */
export class SpecimenDefinitionTypeTestedContainer extends fhir.BackboneElement {
    /**
     * Default constructor for SpecimenDefinitionTypeTestedContainer - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['material']) {
            this.material = new fhir.CodeableConcept(source.material);
        }
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type);
        }
        if (source['cap']) {
            this.cap = new fhir.CodeableConcept(source.cap);
        }
        if (source['description']) {
            this.description = new fhir.FhirString({ value: source.description });
        }
        if (source['_description']) {
            if (this.description) {
                this.description.addExtendedProperties(source._description);
            }
            else {
                this.description = new fhir.FhirString(source._description);
            }
        }
        if (source['capacity']) {
            this.capacity = new fhir.Quantity(source.capacity);
        }
        if (source['minimumVolume']) {
            this.minimumVolume = source.minimumVolume;
        }
        else if (source['minimumVolumeQuantity']) {
            this.minimumVolume = new fhir.Quantity(source.minimumVolumeQuantity);
        }
        else if (source['minimumVolumeString']) {
            this.minimumVolume = new fhir.FhirString({ value: source.minimumVolumeString });
        }
        if (source['additive']) {
            this.additive = source.additive.map((x) => new fhir.SpecimenDefinitionTypeTestedContainerAdditive(x));
        }
        else {
            this.additive = [];
        }
        if (source['preparation']) {
            this.preparation = new fhir.FhirString({ value: source.preparation });
        }
        if (source['_preparation']) {
            if (this.preparation) {
                this.preparation.addExtendedProperties(source._preparation);
            }
            else {
                this.preparation = new fhir.FhirString(source._preparation);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SpecimenDefinition.typeTested.container';
        }
        iss.push(...this.vOS('material', exp));
        iss.push(...this.vOS('type', exp));
        iss.push(...this.vOS('cap', exp));
        iss.push(...this.vOS('description', exp));
        iss.push(...this.vOS('capacity', exp));
        iss.push(...this.vOS('minimumVolume', exp));
        iss.push(...this.vOA('additive', exp));
        iss.push(...this.vOS('preparation', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SpecimenDefinitionTypeTestedContainer._fts_dataType = 'SpecimenDefinitionTypeTestedContainer';
/**
 * Internal flag to properly serialize choice-type element SpecimenDefinition.typeTested.container.minimumVolume[x]
 */
SpecimenDefinitionTypeTestedContainer._fts_minimumVolumeIsChoice = true;
/**
 * Set of instructions for preservation/transport of the specimen at a defined temperature interval, prior the testing process.
 */
export class SpecimenDefinitionTypeTestedHandling extends fhir.BackboneElement {
    /**
     * Default constructor for SpecimenDefinitionTypeTestedHandling - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['temperatureQualifier']) {
            this.temperatureQualifier = new fhir.CodeableConcept(source.temperatureQualifier);
        }
        if (source['temperatureRange']) {
            this.temperatureRange = new fhir.Range(source.temperatureRange);
        }
        if (source['maxDuration']) {
            this.maxDuration = new fhir.Duration(source.maxDuration);
        }
        if (source['instruction']) {
            this.instruction = new fhir.FhirString({ value: source.instruction });
        }
        if (source['_instruction']) {
            if (this.instruction) {
                this.instruction.addExtendedProperties(source._instruction);
            }
            else {
                this.instruction = new fhir.FhirString(source._instruction);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SpecimenDefinition.typeTested.handling';
        }
        iss.push(...this.vOS('temperatureQualifier', exp));
        iss.push(...this.vOS('temperatureRange', exp));
        iss.push(...this.vOS('maxDuration', exp));
        iss.push(...this.vOS('instruction', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SpecimenDefinitionTypeTestedHandling._fts_dataType = 'SpecimenDefinitionTypeTestedHandling';
/**
 * Specimen conditioned in a container as expected by the testing laboratory.
 */
export class SpecimenDefinitionTypeTested extends fhir.BackboneElement {
    /**
     * Default constructor for SpecimenDefinitionTypeTested - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['isDerived']) {
            this.isDerived = new fhir.FhirBoolean({ value: source.isDerived });
        }
        if (source['_isDerived']) {
            if (this.isDerived) {
                this.isDerived.addExtendedProperties(source._isDerived);
            }
            else {
                this.isDerived = new fhir.FhirBoolean(source._isDerived);
            }
        }
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type);
        }
        if (source['preference']) {
            this.preference = new fhir.FhirCode({ value: source.preference });
        }
        else {
            this.preference = null;
        }
        if (source['_preference']) {
            if (this.preference) {
                this.preference.addExtendedProperties(source._preference);
            }
            else {
                this.preference = new fhir.FhirCode(source._preference);
            }
        }
        if (source['container']) {
            this.container = new fhir.SpecimenDefinitionTypeTestedContainer(source.container);
        }
        if (source['requirement']) {
            this.requirement = new fhir.FhirString({ value: source.requirement });
        }
        if (source['_requirement']) {
            if (this.requirement) {
                this.requirement.addExtendedProperties(source._requirement);
            }
            else {
                this.requirement = new fhir.FhirString(source._requirement);
            }
        }
        if (source['retentionTime']) {
            this.retentionTime = new fhir.Duration(source.retentionTime);
        }
        if (source['rejectionCriterion']) {
            this.rejectionCriterion = source.rejectionCriterion.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.rejectionCriterion = [];
        }
        if (source['handling']) {
            this.handling = source.handling.map((x) => new fhir.SpecimenDefinitionTypeTestedHandling(x));
        }
        else {
            this.handling = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SpecimenDefinition.typeTested';
        }
        iss.push(...this.vOS('isDerived', exp));
        iss.push(...this.vOS('type', exp));
        iss.push(...this.vRSV('preference', exp, 'SpecimenContainedPreference', SpecimenContainedPreferenceVsValidation, 'r'));
        iss.push(...this.vOS('container', exp));
        iss.push(...this.vOS('requirement', exp));
        iss.push(...this.vOS('retentionTime', exp));
        iss.push(...this.vOA('rejectionCriterion', exp));
        iss.push(...this.vOA('handling', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SpecimenDefinitionTypeTested._fts_dataType = 'SpecimenDefinitionTypeTested';
/**
 * A kind of specimen with associated set of requirements.
 */
export class SpecimenDefinition extends fhir.DomainResource {
    /**
     * Default constructor for SpecimenDefinition - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'SpecimenDefinition';
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier);
        }
        if (source['typeCollected']) {
            this.typeCollected = new fhir.CodeableConcept(source.typeCollected);
        }
        if (source['patientPreparation']) {
            this.patientPreparation = source.patientPreparation.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.patientPreparation = [];
        }
        if (source['timeAspect']) {
            this.timeAspect = new fhir.FhirString({ value: source.timeAspect });
        }
        if (source['_timeAspect']) {
            if (this.timeAspect) {
                this.timeAspect.addExtendedProperties(source._timeAspect);
            }
            else {
                this.timeAspect = new fhir.FhirString(source._timeAspect);
            }
        }
        if (source['collection']) {
            this.collection = source.collection.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.collection = [];
        }
        if (source['typeTested']) {
            this.typeTested = source.typeTested.map((x) => new fhir.SpecimenDefinitionTypeTested(x));
        }
        else {
            this.typeTested = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SpecimenDefinition';
        }
        iss.push(...this.vRPS('resourceType', exp));
        iss.push(...this.vOS('identifier', exp));
        iss.push(...this.vOS('typeCollected', exp));
        iss.push(...this.vOA('patientPreparation', exp));
        iss.push(...this.vOS('timeAspect', exp));
        iss.push(...this.vOA('collection', exp));
        iss.push(...this.vOA('typeTested', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SpecimenDefinition._fts_dataType = 'SpecimenDefinition';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3BlY2ltZW5EZWZpbml0aW9uLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9TcGVjaW1lbkRlZmluaXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLGdEQUFnRDtBQUNoRCxrQ0FBa0M7QUFDbEMsb0NBQW9DO0FBRXBDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBd0JuQyxhQUFhO0FBQ2IsT0FBTyxFQUFFLHVDQUF1QyxFQUFFLE1BQU0sNkRBQTZELENBQUM7QUErQnRIOztHQUVHO0FBQ0gsTUFBTSxPQUFPLDZDQUE4QyxTQUFRLElBQUksQ0FBQyxlQUFlO0lBYXJGOztPQUVHO0lBQ0gsWUFBWSxTQUFvRSxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUMxSCxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDO1NBQUU7YUFDdkQsSUFBSSxNQUFNLENBQUMseUJBQXlCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO1NBQUU7YUFDcEgsSUFBSSxNQUFNLENBQUMsbUJBQW1CLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1NBQUU7YUFDbEc7WUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztTQUFFO0lBQ2hDLENBQUM7SUFDRDs7T0FFRztJQUNhLGlCQUFpQixDQUFDLE1BQWEsRUFBRTtRQUMvQyxJQUFJLEdBQUcsR0FBbUIsS0FBSyxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxDQUFDO1FB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QWEsRUFBRTtRQUMvQyxJQUFJLEdBQUcsR0FBbUIsS0FBSyxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3ZELElBQUksR0FBRyxLQUFLLEVBQUUsRUFBRTtZQUFFLEdBQUcsR0FBRyxvQkFBb0IsQ0FBQTtTQUFFO1FBQzlDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzNDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3hDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzNDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLG9CQUFvQixFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDaEQsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDeEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDeEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDeEMsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDOztBQWxFRDs7R0FFRztBQUM2QixnQ0FBYSxHQUFVLG9CQUFvQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0Yi5jb3JlIHZlcnNpb246IDQuMy4wXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogU3BlY2ltZW5EZWZpbml0aW9uXHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDb250YWluZXJNYXRlcmlhbENvZGVzLCAgQ29udGFpbmVyTWF0ZXJpYWxDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29udGFpbmVyTWF0ZXJpYWxDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29udGFpbmVyTWF0ZXJpYWxWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbnRhaW5lck1hdGVyaWFsVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBTcGVjaW1lbkNvbnRhaW5lclR5cGVDb2RlcywgIFNwZWNpbWVuQ29udGFpbmVyVHlwZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9TcGVjaW1lbkNvbnRhaW5lclR5cGVDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgU3BlY2ltZW5Db250YWluZXJUeXBlVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9TcGVjaW1lbkNvbnRhaW5lclR5cGVWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbnRhaW5lckNhcENvZGVzLCAgQ29udGFpbmVyQ2FwQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbnRhaW5lckNhcENvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDb250YWluZXJDYXBWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbnRhaW5lckNhcFZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgSGFuZGxpbmdDb25kaXRpb25Db2RlcywgIEhhbmRsaW5nQ29uZGl0aW9uQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0hhbmRsaW5nQ29uZGl0aW9uQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEhhbmRsaW5nQ29uZGl0aW9uVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9IYW5kbGluZ0NvbmRpdGlvblZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgVjIwNDg3Q29kZXMsICBWMjA0ODdDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVjIwNDg3Q29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFYyMDQ4N1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvVjIwNDg3VnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBTcGVjaW1lbkNvbnRhaW5lZFByZWZlcmVuY2VDb2RlcywgIFNwZWNpbWVuQ29udGFpbmVkUHJlZmVyZW5jZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9TcGVjaW1lbkNvbnRhaW5lZFByZWZlcmVuY2VDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgU3BlY2ltZW5Db250YWluZWRQcmVmZXJlbmNlVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9TcGVjaW1lbkNvbnRhaW5lZFByZWZlcmVuY2VWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFJlamVjdGlvbkNyaXRlcmlhQ29kZXMsICBSZWplY3Rpb25Dcml0ZXJpYUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9SZWplY3Rpb25Dcml0ZXJpYUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBSZWplY3Rpb25Dcml0ZXJpYVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUmVqZWN0aW9uQ3JpdGVyaWFWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFByZXBhcmVQYXRpZW50UHJpb3JTcGVjaW1lbkNvbGxlY3Rpb25Db2RlcywgIFByZXBhcmVQYXRpZW50UHJpb3JTcGVjaW1lbkNvbGxlY3Rpb25Db2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUHJlcGFyZVBhdGllbnRQcmlvclNwZWNpbWVuQ29sbGVjdGlvbkNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBQcmVwYXJlUGF0aWVudFByaW9yU3BlY2ltZW5Db2xsZWN0aW9uVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9QcmVwYXJlUGF0aWVudFByaW9yU3BlY2ltZW5Db2xsZWN0aW9uVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBTcGVjaW1lbkNvbGxlY3Rpb25Db2RlcywgIFNwZWNpbWVuQ29sbGVjdGlvbkNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9TcGVjaW1lbkNvbGxlY3Rpb25Db2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgU3BlY2ltZW5Db2xsZWN0aW9uVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9TcGVjaW1lbkNvbGxlY3Rpb25Wc1ZhbGlkYXRpb24uanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgU3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZENvbnRhaW5lckFkZGl0aXZlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWRDb250YWluZXJBZGRpdGl2ZUFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFN1YnN0YW5jZSBpbnRyb2R1Y2VkIGluIHRoZSBraW5kIG9mIGNvbnRhaW5lciB0byBwcmVzZXJ2ZSwgbWFpbnRhaW4gb3IgZW5oYW5jZSB0aGUgc3BlY2ltZW4uIEV4YW1wbGVzOiBGb3JtYWxpbiwgQ2l0cmF0ZSwgRURUQS5cclxuICAgKi9cclxuICBhZGRpdGl2ZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTdWJzdGFuY2UgaW50cm9kdWNlZCBpbiB0aGUga2luZCBvZiBjb250YWluZXIgdG8gcHJlc2VydmUsIG1haW50YWluIG9yIGVuaGFuY2UgdGhlIHNwZWNpbWVuLiBFeGFtcGxlczogRm9ybWFsaW4sIENpdHJhdGUsIEVEVEEuXHJcbiAgICovXHJcbiAgYWRkaXRpdmVDb2RlYWJsZUNvbmNlcHQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFN1YnN0YW5jZSBpbnRyb2R1Y2VkIGluIHRoZSBraW5kIG9mIGNvbnRhaW5lciB0byBwcmVzZXJ2ZSwgbWFpbnRhaW4gb3IgZW5oYW5jZSB0aGUgc3BlY2ltZW4uIEV4YW1wbGVzOiBGb3JtYWxpbiwgQ2l0cmF0ZSwgRURUQS5cclxuICAgKi9cclxuICBhZGRpdGl2ZVJlZmVyZW5jZT86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTdWJzdGFuY2UgaW50cm9kdWNlZCBpbiB0aGUga2luZCBvZiBjb250YWluZXIgdG8gcHJlc2VydmUsIG1haW50YWluIG9yIGVuaGFuY2UgdGhlIHNwZWNpbWVuLiBFeGFtcGxlczogRm9ybWFsaW4sIENpdHJhdGUsIEVEVEEuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZENvbnRhaW5lckFkZGl0aXZlIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnU3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZENvbnRhaW5lckFkZGl0aXZlJztcclxuICAvKipcclxuICAgKiBTdWJzdGFuY2UgaW50cm9kdWNlZCBpbiB0aGUga2luZCBvZiBjb250YWluZXIgdG8gcHJlc2VydmUsIG1haW50YWluIG9yIGVuaGFuY2UgdGhlIHNwZWNpbWVuLiBFeGFtcGxlczogRm9ybWFsaW4sIENpdHJhdGUsIEVEVEEuXHJcbiAgICovXHJcbiAgcHVibGljIGFkZGl0aXZlOiAoZmhpci5Db2RlYWJsZUNvbmNlcHR8Zmhpci5SZWZlcmVuY2UpfG51bGw7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBTcGVjaW1lbkRlZmluaXRpb24udHlwZVRlc3RlZC5jb250YWluZXIuYWRkaXRpdmUuYWRkaXRpdmVbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfYWRkaXRpdmVJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBTcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkQ29udGFpbmVyQWRkaXRpdmUgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxTcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkQ29udGFpbmVyQWRkaXRpdmVBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnYWRkaXRpdmUnXSkgeyB0aGlzLmFkZGl0aXZlID0gc291cmNlLmFkZGl0aXZlOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2FkZGl0aXZlQ29kZWFibGVDb25jZXB0J10pIHsgdGhpcy5hZGRpdGl2ZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuYWRkaXRpdmVDb2RlYWJsZUNvbmNlcHQpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2FkZGl0aXZlUmVmZXJlbmNlJ10pIHsgdGhpcy5hZGRpdGl2ZSA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuYWRkaXRpdmVSZWZlcmVuY2UpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5hZGRpdGl2ZSA9IG51bGw7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdTcGVjaW1lbkRlZmluaXRpb24udHlwZVRlc3RlZC5jb250YWluZXIuYWRkaXRpdmUnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdhZGRpdGl2ZScsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgU3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZENvbnRhaW5lciB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkQ29udGFpbmVyQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIHR5cGUgb2YgbWF0ZXJpYWwgb2YgdGhlIGNvbnRhaW5lci5cclxuICAgKi9cclxuICBtYXRlcmlhbD86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHR5cGUgb2YgY29udGFpbmVyIHVzZWQgdG8gY29udGFpbiB0aGlzIGtpbmQgb2Ygc3BlY2ltZW4uXHJcbiAgICovXHJcbiAgdHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ29sb3Igb2YgY29udGFpbmVyIGNhcC5cclxuICAgKi9cclxuICBjYXA/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0ZXh0dWFsIGRlc2NyaXB0aW9uIG9mIHRoZSBraW5kIG9mIGNvbnRhaW5lci5cclxuICAgKi9cclxuICBkZXNjcmlwdGlvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBTcGVjaW1lbkRlZmluaXRpb24udHlwZVRlc3RlZC5jb250YWluZXIuZGVzY3JpcHRpb25cclxuICAgKi9cclxuICBfZGVzY3JpcHRpb24/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjYXBhY2l0eSAodm9sdW1lIG9yIG90aGVyIG1lYXN1cmUpIG9mIHRoaXMga2luZCBvZiBjb250YWluZXIuXHJcbiAgICovXHJcbiAgY2FwYWNpdHk/OiBmaGlyLlF1YW50aXR5QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG1pbmltdW0gdm9sdW1lIHRvIGJlIGNvbmRpdGlvbmVkIGluIHRoZSBjb250YWluZXIuXHJcbiAgICovXHJcbiAgbWluaW11bVZvbHVtZT86IGZoaXIuUXVhbnRpdHl8Zmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbWluaW11bSB2b2x1bWUgdG8gYmUgY29uZGl0aW9uZWQgaW4gdGhlIGNvbnRhaW5lci5cclxuICAgKi9cclxuICBtaW5pbXVtVm9sdW1lUXVhbnRpdHk/OiBmaGlyLlF1YW50aXR5QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG1pbmltdW0gdm9sdW1lIHRvIGJlIGNvbmRpdGlvbmVkIGluIHRoZSBjb250YWluZXIuXHJcbiAgICovXHJcbiAgbWluaW11bVZvbHVtZVN0cmluZz86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFN1YnN0YW5jZSBpbnRyb2R1Y2VkIGluIHRoZSBraW5kIG9mIGNvbnRhaW5lciB0byBwcmVzZXJ2ZSwgbWFpbnRhaW4gb3IgZW5oYW5jZSB0aGUgc3BlY2ltZW4uIEV4YW1wbGVzOiBGb3JtYWxpbiwgQ2l0cmF0ZSwgRURUQS5cclxuICAgKi9cclxuICBhZGRpdGl2ZT86IGZoaXIuU3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZENvbnRhaW5lckFkZGl0aXZlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTcGVjaWFsIHByb2Nlc3NpbmcgdGhhdCBzaG91bGQgYmUgYXBwbGllZCB0byB0aGUgY29udGFpbmVyIGZvciB0aGlzIGtpbmQgb2Ygc3BlY2ltZW4uXHJcbiAgICovXHJcbiAgcHJlcGFyYXRpb24/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3BlY2ltZW5EZWZpbml0aW9uLnR5cGVUZXN0ZWQuY29udGFpbmVyLnByZXBhcmF0aW9uXHJcbiAgICovXHJcbiAgX3ByZXBhcmF0aW9uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBzcGVjaW1lbidzIGNvbnRhaW5lci5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkQ29udGFpbmVyIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnU3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZENvbnRhaW5lcic7XHJcbiAgLyoqXHJcbiAgICogVGhlIHR5cGUgb2YgbWF0ZXJpYWwgb2YgdGhlIGNvbnRhaW5lci5cclxuICAgKi9cclxuICBwdWJsaWMgbWF0ZXJpYWw/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHR5cGUgb2YgY29udGFpbmVyIHVzZWQgdG8gY29udGFpbiB0aGlzIGtpbmQgb2Ygc3BlY2ltZW4uXHJcbiAgICovXHJcbiAgcHVibGljIHR5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ29sb3Igb2YgY29udGFpbmVyIGNhcC5cclxuICAgKi9cclxuICBwdWJsaWMgY2FwPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0ZXh0dWFsIGRlc2NyaXB0aW9uIG9mIHRoZSBraW5kIG9mIGNvbnRhaW5lci5cclxuICAgKi9cclxuICBwdWJsaWMgZGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjYXBhY2l0eSAodm9sdW1lIG9yIG90aGVyIG1lYXN1cmUpIG9mIHRoaXMga2luZCBvZiBjb250YWluZXIuXHJcbiAgICovXHJcbiAgcHVibGljIGNhcGFjaXR5PzogZmhpci5RdWFudGl0eXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG1pbmltdW0gdm9sdW1lIHRvIGJlIGNvbmRpdGlvbmVkIGluIHRoZSBjb250YWluZXIuXHJcbiAgICovXHJcbiAgcHVibGljIG1pbmltdW1Wb2x1bWU/OiAoZmhpci5RdWFudGl0eXxmaGlyLkZoaXJTdHJpbmcpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IFNwZWNpbWVuRGVmaW5pdGlvbi50eXBlVGVzdGVkLmNvbnRhaW5lci5taW5pbXVtVm9sdW1lW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX21pbmltdW1Wb2x1bWVJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBTdWJzdGFuY2UgaW50cm9kdWNlZCBpbiB0aGUga2luZCBvZiBjb250YWluZXIgdG8gcHJlc2VydmUsIG1haW50YWluIG9yIGVuaGFuY2UgdGhlIHNwZWNpbWVuLiBFeGFtcGxlczogRm9ybWFsaW4sIENpdHJhdGUsIEVEVEEuXHJcbiAgICovXHJcbiAgcHVibGljIGFkZGl0aXZlOiBmaGlyLlNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWRDb250YWluZXJBZGRpdGl2ZVtdO1xyXG4gIC8qKlxyXG4gICAqIFNwZWNpYWwgcHJvY2Vzc2luZyB0aGF0IHNob3VsZCBiZSBhcHBsaWVkIHRvIHRoZSBjb250YWluZXIgZm9yIHRoaXMga2luZCBvZiBzcGVjaW1lbi5cclxuICAgKi9cclxuICBwdWJsaWMgcHJlcGFyYXRpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWRDb250YWluZXIgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxTcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkQ29udGFpbmVyQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ21hdGVyaWFsJ10pIHsgdGhpcy5tYXRlcmlhbCA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UubWF0ZXJpYWwpOyB9XHJcbiAgICBpZiAoc291cmNlWyd0eXBlJ10pIHsgdGhpcy50eXBlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS50eXBlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY2FwJ10pIHsgdGhpcy5jYXAgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmNhcCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2Rlc2NyaXB0aW9uJ10pIHsgdGhpcy5kZXNjcmlwdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuZGVzY3JpcHRpb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2Rlc2NyaXB0aW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZGVzY3JpcHRpb24pIHsgdGhpcy5kZXNjcmlwdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9kZXNjcmlwdGlvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRlc2NyaXB0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2Rlc2NyaXB0aW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydjYXBhY2l0eSddKSB7IHRoaXMuY2FwYWNpdHkgPSBuZXcgZmhpci5RdWFudGl0eShzb3VyY2UuY2FwYWNpdHkpOyB9XHJcbiAgICBpZiAoc291cmNlWydtaW5pbXVtVm9sdW1lJ10pIHsgdGhpcy5taW5pbXVtVm9sdW1lID0gc291cmNlLm1pbmltdW1Wb2x1bWU7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnbWluaW11bVZvbHVtZVF1YW50aXR5J10pIHsgdGhpcy5taW5pbXVtVm9sdW1lID0gbmV3IGZoaXIuUXVhbnRpdHkoc291cmNlLm1pbmltdW1Wb2x1bWVRdWFudGl0eSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnbWluaW11bVZvbHVtZVN0cmluZyddKSB7IHRoaXMubWluaW11bVZvbHVtZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UubWluaW11bVZvbHVtZVN0cmluZ30pOyB9XHJcbiAgICBpZiAoc291cmNlWydhZGRpdGl2ZSddKSB7IHRoaXMuYWRkaXRpdmUgPSBzb3VyY2UuYWRkaXRpdmUubWFwKCh4KSA9PiBuZXcgZmhpci5TcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkQ29udGFpbmVyQWRkaXRpdmUoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5hZGRpdGl2ZSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwcmVwYXJhdGlvbiddKSB7IHRoaXMucHJlcGFyYXRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnByZXBhcmF0aW9ufSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19wcmVwYXJhdGlvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLnByZXBhcmF0aW9uKSB7IHRoaXMucHJlcGFyYXRpb24uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fcHJlcGFyYXRpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5wcmVwYXJhdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9wcmVwYXJhdGlvbiBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ1NwZWNpbWVuRGVmaW5pdGlvbi50eXBlVGVzdGVkLmNvbnRhaW5lcicgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ21hdGVyaWFsJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCd0eXBlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdjYXAnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2Rlc2NyaXB0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdjYXBhY2l0eScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnbWluaW11bVZvbHVtZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnYWRkaXRpdmUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3ByZXBhcmF0aW9uJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBTcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkSGFuZGxpbmcgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZEhhbmRsaW5nQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogSXQgcXVhbGlmaWVzIHRoZSBpbnRlcnZhbCBvZiB0ZW1wZXJhdHVyZSwgd2hpY2ggY2hhcmFjdGVyaXplcyBhbiBvY2N1cnJlbmNlIG9mIGhhbmRsaW5nLiBDb25kaXRpb25zIHRoYXQgYXJlIG5vdCByZWxhdGVkIHRvIHRlbXBlcmF0dXJlIG1heSBiZSBoYW5kbGVkIGluIHRoZSBpbnN0cnVjdGlvbiBlbGVtZW50LlxyXG4gICAqL1xyXG4gIHRlbXBlcmF0dXJlUXVhbGlmaWVyPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdGVtcGVyYXR1cmUgaW50ZXJ2YWwgZm9yIHRoaXMgc2V0IG9mIGhhbmRsaW5nIGluc3RydWN0aW9ucy5cclxuICAgKi9cclxuICB0ZW1wZXJhdHVyZVJhbmdlPzogZmhpci5SYW5nZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBtYXhpbXVtIHRpbWUgaW50ZXJ2YWwgb2YgcHJlc2VydmF0aW9uIG9mIHRoZSBzcGVjaW1lbiB3aXRoIHRoZXNlIGNvbmRpdGlvbnMuXHJcbiAgICovXHJcbiAgbWF4RHVyYXRpb24/OiBmaGlyLkR1cmF0aW9uQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWRkaXRpb25hbCB0ZXh0dWFsIGluc3RydWN0aW9ucyBmb3IgdGhlIHByZXNlcnZhdGlvbiBvciB0cmFuc3BvcnQgb2YgdGhlIHNwZWNpbWVuLiBGb3IgaW5zdGFuY2UsICdQcm90ZWN0IGZyb20gbGlnaHQgZXhwb3N1cmUnLlxyXG4gICAqL1xyXG4gIGluc3RydWN0aW9uPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFNwZWNpbWVuRGVmaW5pdGlvbi50eXBlVGVzdGVkLmhhbmRsaW5nLmluc3RydWN0aW9uXHJcbiAgICovXHJcbiAgX2luc3RydWN0aW9uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCBvZiBpbnN0cnVjdGlvbnMgZm9yIHByZXNlcnZhdGlvbi90cmFuc3BvcnQgb2YgdGhlIHNwZWNpbWVuIGF0IGEgZGVmaW5lZCB0ZW1wZXJhdHVyZSBpbnRlcnZhbCwgcHJpb3IgdGhlIHRlc3RpbmcgcHJvY2Vzcy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkSGFuZGxpbmcgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdTcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkSGFuZGxpbmcnO1xyXG4gIC8qKlxyXG4gICAqIEl0IHF1YWxpZmllcyB0aGUgaW50ZXJ2YWwgb2YgdGVtcGVyYXR1cmUsIHdoaWNoIGNoYXJhY3Rlcml6ZXMgYW4gb2NjdXJyZW5jZSBvZiBoYW5kbGluZy4gQ29uZGl0aW9ucyB0aGF0IGFyZSBub3QgcmVsYXRlZCB0byB0ZW1wZXJhdHVyZSBtYXkgYmUgaGFuZGxlZCBpbiB0aGUgaW5zdHJ1Y3Rpb24gZWxlbWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgdGVtcGVyYXR1cmVRdWFsaWZpZXI/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRlbXBlcmF0dXJlIGludGVydmFsIGZvciB0aGlzIHNldCBvZiBoYW5kbGluZyBpbnN0cnVjdGlvbnMuXHJcbiAgICovXHJcbiAgcHVibGljIHRlbXBlcmF0dXJlUmFuZ2U/OiBmaGlyLlJhbmdlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbWF4aW11bSB0aW1lIGludGVydmFsIG9mIHByZXNlcnZhdGlvbiBvZiB0aGUgc3BlY2ltZW4gd2l0aCB0aGVzZSBjb25kaXRpb25zLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtYXhEdXJhdGlvbj86IGZoaXIuRHVyYXRpb258dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFkZGl0aW9uYWwgdGV4dHVhbCBpbnN0cnVjdGlvbnMgZm9yIHRoZSBwcmVzZXJ2YXRpb24gb3IgdHJhbnNwb3J0IG9mIHRoZSBzcGVjaW1lbi4gRm9yIGluc3RhbmNlLCAnUHJvdGVjdCBmcm9tIGxpZ2h0IGV4cG9zdXJlJy5cclxuICAgKi9cclxuICBwdWJsaWMgaW5zdHJ1Y3Rpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWRIYW5kbGluZyAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWRIYW5kbGluZ0FyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWyd0ZW1wZXJhdHVyZVF1YWxpZmllciddKSB7IHRoaXMudGVtcGVyYXR1cmVRdWFsaWZpZXIgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnRlbXBlcmF0dXJlUXVhbGlmaWVyKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndGVtcGVyYXR1cmVSYW5nZSddKSB7IHRoaXMudGVtcGVyYXR1cmVSYW5nZSA9IG5ldyBmaGlyLlJhbmdlKHNvdXJjZS50ZW1wZXJhdHVyZVJhbmdlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbWF4RHVyYXRpb24nXSkgeyB0aGlzLm1heER1cmF0aW9uID0gbmV3IGZoaXIuRHVyYXRpb24oc291cmNlLm1heER1cmF0aW9uKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaW5zdHJ1Y3Rpb24nXSkgeyB0aGlzLmluc3RydWN0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5pbnN0cnVjdGlvbn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfaW5zdHJ1Y3Rpb24nXSkge1xyXG4gICAgICBpZiAodGhpcy5pbnN0cnVjdGlvbikgeyB0aGlzLmluc3RydWN0aW9uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2luc3RydWN0aW9uISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuaW5zdHJ1Y3Rpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5faW5zdHJ1Y3Rpb24gYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdTcGVjaW1lbkRlZmluaXRpb24udHlwZVRlc3RlZC5oYW5kbGluZycgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3RlbXBlcmF0dXJlUXVhbGlmaWVyJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCd0ZW1wZXJhdHVyZVJhbmdlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdtYXhEdXJhdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnaW5zdHJ1Y3Rpb24nLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFNwZWNpbWVuRGVmaW5pdGlvblR5cGVUZXN0ZWQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFByaW1hcnkgb2Ygc2Vjb25kYXJ5IHNwZWNpbWVuLlxyXG4gICAqL1xyXG4gIGlzRGVyaXZlZD86IGZoaXIuRmhpckJvb2xlYW58Ym9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFNwZWNpbWVuRGVmaW5pdGlvbi50eXBlVGVzdGVkLmlzRGVyaXZlZFxyXG4gICAqL1xyXG4gIF9pc0Rlcml2ZWQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBraW5kIG9mIHNwZWNpbWVuIGNvbmRpdGlvbmVkIGZvciB0ZXN0aW5nIGV4cGVjdGVkIGJ5IGxhYi5cclxuICAgKi9cclxuICB0eXBlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcHJlZmVyZW5jZSBmb3IgdGhpcyB0eXBlIG9mIGNvbmRpdGlvbmVkIHNwZWNpbWVuLlxyXG4gICAqL1xyXG4gIHByZWZlcmVuY2U6IGZoaXIuRmhpckNvZGU8U3BlY2ltZW5Db250YWluZWRQcmVmZXJlbmNlQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFNwZWNpbWVuRGVmaW5pdGlvbi50eXBlVGVzdGVkLnByZWZlcmVuY2VcclxuICAgKi9cclxuICBfcHJlZmVyZW5jZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNwZWNpbWVuJ3MgY29udGFpbmVyLlxyXG4gICAqL1xyXG4gIGNvbnRhaW5lcj86IGZoaXIuU3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZENvbnRhaW5lckFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFJlcXVpcmVtZW50cyBmb3IgZGVsaXZlcnkgYW5kIHNwZWNpYWwgaGFuZGxpbmcgb2YgdGhpcyBraW5kIG9mIGNvbmRpdGlvbmVkIHNwZWNpbWVuLlxyXG4gICAqL1xyXG4gIHJlcXVpcmVtZW50PzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFNwZWNpbWVuRGVmaW5pdGlvbi50eXBlVGVzdGVkLnJlcXVpcmVtZW50XHJcbiAgICovXHJcbiAgX3JlcXVpcmVtZW50PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgdXN1YWwgdGltZSB0aGF0IGEgc3BlY2ltZW4gb2YgdGhpcyBraW5kIGlzIHJldGFpbmVkIGFmdGVyIHRoZSBvcmRlcmVkIHRlc3RzIGFyZSBjb21wbGV0ZWQsIGZvciB0aGUgcHVycG9zZSBvZiBhZGRpdGlvbmFsIHRlc3RpbmcuXHJcbiAgICovXHJcbiAgcmV0ZW50aW9uVGltZT86IGZoaXIuRHVyYXRpb25BcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDcml0ZXJpb24gZm9yIHJlamVjdGlvbiBvZiB0aGUgc3BlY2ltZW4gaW4gaXRzIGNvbnRhaW5lciBieSB0aGUgbGFib3JhdG9yeS5cclxuICAgKi9cclxuICByZWplY3Rpb25Dcml0ZXJpb24/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU2V0IG9mIGluc3RydWN0aW9ucyBmb3IgcHJlc2VydmF0aW9uL3RyYW5zcG9ydCBvZiB0aGUgc3BlY2ltZW4gYXQgYSBkZWZpbmVkIHRlbXBlcmF0dXJlIGludGVydmFsLCBwcmlvciB0aGUgdGVzdGluZyBwcm9jZXNzLlxyXG4gICAqL1xyXG4gIGhhbmRsaW5nPzogZmhpci5TcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkSGFuZGxpbmdBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogU3BlY2ltZW4gY29uZGl0aW9uZWQgaW4gYSBjb250YWluZXIgYXMgZXhwZWN0ZWQgYnkgdGhlIHRlc3RpbmcgbGFib3JhdG9yeS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnU3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZCc7XHJcbiAgLyoqXHJcbiAgICogUHJpbWFyeSBvZiBzZWNvbmRhcnkgc3BlY2ltZW4uXHJcbiAgICovXHJcbiAgcHVibGljIGlzRGVyaXZlZD86IGZoaXIuRmhpckJvb2xlYW58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBraW5kIG9mIHNwZWNpbWVuIGNvbmRpdGlvbmVkIGZvciB0ZXN0aW5nIGV4cGVjdGVkIGJ5IGxhYi5cclxuICAgKi9cclxuICBwdWJsaWMgdHlwZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcHJlZmVyZW5jZSBmb3IgdGhpcyB0eXBlIG9mIGNvbmRpdGlvbmVkIHNwZWNpbWVuLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcmVmZXJlbmNlOiBmaGlyLkZoaXJDb2RlPFNwZWNpbWVuQ29udGFpbmVkUHJlZmVyZW5jZUNvZGVUeXBlPnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzcGVjaW1lbidzIGNvbnRhaW5lci5cclxuICAgKi9cclxuICBwdWJsaWMgY29udGFpbmVyPzogZmhpci5TcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkQ29udGFpbmVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBSZXF1aXJlbWVudHMgZm9yIGRlbGl2ZXJ5IGFuZCBzcGVjaWFsIGhhbmRsaW5nIG9mIHRoaXMga2luZCBvZiBjb25kaXRpb25lZCBzcGVjaW1lbi5cclxuICAgKi9cclxuICBwdWJsaWMgcmVxdWlyZW1lbnQ/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB1c3VhbCB0aW1lIHRoYXQgYSBzcGVjaW1lbiBvZiB0aGlzIGtpbmQgaXMgcmV0YWluZWQgYWZ0ZXIgdGhlIG9yZGVyZWQgdGVzdHMgYXJlIGNvbXBsZXRlZCwgZm9yIHRoZSBwdXJwb3NlIG9mIGFkZGl0aW9uYWwgdGVzdGluZy5cclxuICAgKi9cclxuICBwdWJsaWMgcmV0ZW50aW9uVGltZT86IGZoaXIuRHVyYXRpb258dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENyaXRlcmlvbiBmb3IgcmVqZWN0aW9uIG9mIHRoZSBzcGVjaW1lbiBpbiBpdHMgY29udGFpbmVyIGJ5IHRoZSBsYWJvcmF0b3J5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWplY3Rpb25Dcml0ZXJpb246IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogU2V0IG9mIGluc3RydWN0aW9ucyBmb3IgcHJlc2VydmF0aW9uL3RyYW5zcG9ydCBvZiB0aGUgc3BlY2ltZW4gYXQgYSBkZWZpbmVkIHRlbXBlcmF0dXJlIGludGVydmFsLCBwcmlvciB0aGUgdGVzdGluZyBwcm9jZXNzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBoYW5kbGluZzogZmhpci5TcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkSGFuZGxpbmdbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBTcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8U3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydpc0Rlcml2ZWQnXSkgeyB0aGlzLmlzRGVyaXZlZCA9IG5ldyBmaGlyLkZoaXJCb29sZWFuKHt2YWx1ZTogc291cmNlLmlzRGVyaXZlZH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfaXNEZXJpdmVkJ10pIHtcclxuICAgICAgaWYgKHRoaXMuaXNEZXJpdmVkKSB7IHRoaXMuaXNEZXJpdmVkLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2lzRGVyaXZlZCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmlzRGVyaXZlZCA9IG5ldyBmaGlyLkZoaXJCb29sZWFuKHNvdXJjZS5faXNEZXJpdmVkIGFzIFBhcnRpYWw8Zmhpci5GaGlyQm9vbGVhbkFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsndHlwZSddKSB7IHRoaXMudHlwZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UudHlwZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3ByZWZlcmVuY2UnXSkgeyB0aGlzLnByZWZlcmVuY2UgPSBuZXcgZmhpci5GaGlyQ29kZTxTcGVjaW1lbkNvbnRhaW5lZFByZWZlcmVuY2VDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2UucHJlZmVyZW5jZX0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wcmVmZXJlbmNlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3ByZWZlcmVuY2UnXSkge1xyXG4gICAgICBpZiAodGhpcy5wcmVmZXJlbmNlKSB7IHRoaXMucHJlZmVyZW5jZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9wcmVmZXJlbmNlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMucHJlZmVyZW5jZSA9IG5ldyBmaGlyLkZoaXJDb2RlPFNwZWNpbWVuQ29udGFpbmVkUHJlZmVyZW5jZUNvZGVUeXBlPihzb3VyY2UuX3ByZWZlcmVuY2UgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2NvbnRhaW5lciddKSB7IHRoaXMuY29udGFpbmVyID0gbmV3IGZoaXIuU3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZENvbnRhaW5lcihzb3VyY2UuY29udGFpbmVyKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVxdWlyZW1lbnQnXSkgeyB0aGlzLnJlcXVpcmVtZW50ID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5yZXF1aXJlbWVudH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfcmVxdWlyZW1lbnQnXSkge1xyXG4gICAgICBpZiAodGhpcy5yZXF1aXJlbWVudCkgeyB0aGlzLnJlcXVpcmVtZW50LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3JlcXVpcmVtZW50ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMucmVxdWlyZW1lbnQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fcmVxdWlyZW1lbnQgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3JldGVudGlvblRpbWUnXSkgeyB0aGlzLnJldGVudGlvblRpbWUgPSBuZXcgZmhpci5EdXJhdGlvbihzb3VyY2UucmV0ZW50aW9uVGltZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3JlamVjdGlvbkNyaXRlcmlvbiddKSB7IHRoaXMucmVqZWN0aW9uQ3JpdGVyaW9uID0gc291cmNlLnJlamVjdGlvbkNyaXRlcmlvbi5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnJlamVjdGlvbkNyaXRlcmlvbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydoYW5kbGluZyddKSB7IHRoaXMuaGFuZGxpbmcgPSBzb3VyY2UuaGFuZGxpbmcubWFwKCh4KSA9PiBuZXcgZmhpci5TcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkSGFuZGxpbmcoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5oYW5kbGluZyA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnU3BlY2ltZW5EZWZpbml0aW9uLnR5cGVUZXN0ZWQnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdpc0Rlcml2ZWQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3R5cGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlNWKCdwcmVmZXJlbmNlJyxleHAsJ1NwZWNpbWVuQ29udGFpbmVkUHJlZmVyZW5jZScsU3BlY2ltZW5Db250YWluZWRQcmVmZXJlbmNlVnNWYWxpZGF0aW9uLCdyJykpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2NvbnRhaW5lcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygncmVxdWlyZW1lbnQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3JldGVudGlvblRpbWUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3JlamVjdGlvbkNyaXRlcmlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnaGFuZGxpbmcnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFNwZWNpbWVuRGVmaW5pdGlvbiB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTcGVjaW1lbkRlZmluaXRpb25BcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJTcGVjaW1lbkRlZmluaXRpb25cInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBidXNpbmVzcyBpZGVudGlmaWVyIGFzc29jaWF0ZWQgd2l0aCB0aGUga2luZCBvZiBzcGVjaW1lbi5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGtpbmQgb2YgbWF0ZXJpYWwgdG8gYmUgY29sbGVjdGVkLlxyXG4gICAqL1xyXG4gIHR5cGVDb2xsZWN0ZWQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFByZXBhcmF0aW9uIG9mIHRoZSBwYXRpZW50IGZvciBzcGVjaW1lbiBjb2xsZWN0aW9uLlxyXG4gICAqL1xyXG4gIHBhdGllbnRQcmVwYXJhdGlvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaW1lIGFzcGVjdCBvZiBzcGVjaW1lbiBjb2xsZWN0aW9uIChkdXJhdGlvbiBvciBvZmZzZXQpLlxyXG4gICAqL1xyXG4gIHRpbWVBc3BlY3Q/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3BlY2ltZW5EZWZpbml0aW9uLnRpbWVBc3BlY3RcclxuICAgKi9cclxuICBfdGltZUFzcGVjdD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGFjdGlvbiB0byBiZSBwZXJmb3JtZWQgZm9yIGNvbGxlY3RpbmcgdGhlIHNwZWNpbWVuLlxyXG4gICAqL1xyXG4gIGNvbGxlY3Rpb24/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU3BlY2ltZW4gY29uZGl0aW9uZWQgaW4gYSBjb250YWluZXIgYXMgZXhwZWN0ZWQgYnkgdGhlIHRlc3RpbmcgbGFib3JhdG9yeS5cclxuICAgKi9cclxuICB0eXBlVGVzdGVkPzogZmhpci5TcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEga2luZCBvZiBzcGVjaW1lbiB3aXRoIGFzc29jaWF0ZWQgc2V0IG9mIHJlcXVpcmVtZW50cy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTcGVjaW1lbkRlZmluaXRpb24gZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1NwZWNpbWVuRGVmaW5pdGlvbic7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJTcGVjaW1lbkRlZmluaXRpb25cIjtcclxuICAvKipcclxuICAgKiBBIGJ1c2luZXNzIGlkZW50aWZpZXIgYXNzb2NpYXRlZCB3aXRoIHRoZSBraW5kIG9mIHNwZWNpbWVuLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUga2luZCBvZiBtYXRlcmlhbCB0byBiZSBjb2xsZWN0ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHR5cGVDb2xsZWN0ZWQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUHJlcGFyYXRpb24gb2YgdGhlIHBhdGllbnQgZm9yIHNwZWNpbWVuIGNvbGxlY3Rpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHBhdGllbnRQcmVwYXJhdGlvbjogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBUaW1lIGFzcGVjdCBvZiBzcGVjaW1lbiBjb2xsZWN0aW9uIChkdXJhdGlvbiBvciBvZmZzZXQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0aW1lQXNwZWN0PzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgYWN0aW9uIHRvIGJlIHBlcmZvcm1lZCBmb3IgY29sbGVjdGluZyB0aGUgc3BlY2ltZW4uXHJcbiAgICovXHJcbiAgcHVibGljIGNvbGxlY3Rpb246IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogU3BlY2ltZW4gY29uZGl0aW9uZWQgaW4gYSBjb250YWluZXIgYXMgZXhwZWN0ZWQgYnkgdGhlIHRlc3RpbmcgbGFib3JhdG9yeS5cclxuICAgKi9cclxuICBwdWJsaWMgdHlwZVRlc3RlZDogZmhpci5TcGVjaW1lbkRlZmluaXRpb25UeXBlVGVzdGVkW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgU3BlY2ltZW5EZWZpbml0aW9uIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8U3BlY2ltZW5EZWZpbml0aW9uQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ1NwZWNpbWVuRGVmaW5pdGlvbic7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gbmV3IGZoaXIuSWRlbnRpZmllcihzb3VyY2UuaWRlbnRpZmllcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ3R5cGVDb2xsZWN0ZWQnXSkgeyB0aGlzLnR5cGVDb2xsZWN0ZWQgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnR5cGVDb2xsZWN0ZWQpOyB9XHJcbiAgICBpZiAoc291cmNlWydwYXRpZW50UHJlcGFyYXRpb24nXSkgeyB0aGlzLnBhdGllbnRQcmVwYXJhdGlvbiA9IHNvdXJjZS5wYXRpZW50UHJlcGFyYXRpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wYXRpZW50UHJlcGFyYXRpb24gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndGltZUFzcGVjdCddKSB7IHRoaXMudGltZUFzcGVjdCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UudGltZUFzcGVjdH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfdGltZUFzcGVjdCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnRpbWVBc3BlY3QpIHsgdGhpcy50aW1lQXNwZWN0LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3RpbWVBc3BlY3QhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy50aW1lQXNwZWN0ID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3RpbWVBc3BlY3QgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2NvbGxlY3Rpb24nXSkgeyB0aGlzLmNvbGxlY3Rpb24gPSBzb3VyY2UuY29sbGVjdGlvbi5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvbGxlY3Rpb24gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndHlwZVRlc3RlZCddKSB7IHRoaXMudHlwZVRlc3RlZCA9IHNvdXJjZS50eXBlVGVzdGVkLm1hcCgoeCkgPT4gbmV3IGZoaXIuU3BlY2ltZW5EZWZpbml0aW9uVHlwZVRlc3RlZCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnR5cGVUZXN0ZWQgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ1NwZWNpbWVuRGVmaW5pdGlvbicgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlBTKCdyZXNvdXJjZVR5cGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2lkZW50aWZpZXInLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3R5cGVDb2xsZWN0ZWQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3BhdGllbnRQcmVwYXJhdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygndGltZUFzcGVjdCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnY29sbGVjdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgndHlwZVRlc3RlZCcsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4iXX0=