// <auto-generated/>
// Contents of: hl7.fhir.r4b.core version: 4.3.0
// Minimum TypeScript Version: 3.7
// FHIR Resource: QuestionnaireResponse
import * as fhir from '../fhir.js';
// @ts-ignore
import { QuestionnaireAnswersStatusVsValidation } from '../fhirValueSets/QuestionnaireAnswersStatusVsValidation.js';
/**
 * The value is nested because we cannot have a repeating structure that has variable type.
 */
export class QuestionnaireResponseItemAnswer extends fhir.BackboneElement {
    /**
     * Default constructor for QuestionnaireResponseItemAnswer - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['value']) {
            this.value = source.value;
        }
        else if (source['valueBoolean'] !== undefined) {
            this.value = new fhir.FhirBoolean({ value: source.valueBoolean }, options);
        }
        else if (source['valueDecimal'] !== undefined) {
            this.value = new fhir.FhirDecimal({ value: source.valueDecimal }, options);
        }
        else if (source['valueInteger'] !== undefined) {
            this.value = new fhir.FhirInteger({ value: source.valueInteger }, options);
        }
        else if (source['valueDate'] !== undefined) {
            this.value = new fhir.FhirDate({ value: source.valueDate }, options);
        }
        else if (source['valueDateTime'] !== undefined) {
            this.value = new fhir.FhirDateTime({ value: source.valueDateTime }, options);
        }
        else if (source['valueTime'] !== undefined) {
            this.value = new fhir.FhirTime({ value: source.valueTime }, options);
        }
        else if (source['valueString'] !== undefined) {
            this.value = new fhir.FhirString({ value: source.valueString }, options);
        }
        else if (source['valueUri'] !== undefined) {
            this.value = new fhir.FhirUri({ value: source.valueUri }, options);
        }
        else if (source['valueAttachment']) {
            this.value = new fhir.Attachment(source.valueAttachment, options);
        }
        else if (source['valueCoding']) {
            this.value = new fhir.Coding(source.valueCoding, options);
        }
        else if (source['valueQuantity']) {
            this.value = new fhir.Quantity(source.valueQuantity, options);
        }
        else if (source['valueReference']) {
            this.value = new fhir.Reference(source.valueReference, options);
        }
        if (source['item']) {
            this.item = source.item.map((x) => new fhir.QuestionnaireResponseItem(x, options));
        }
        else {
            this.item = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'QuestionnaireResponse.item.answer';
        }
        iss.push(...this.vOS('value', exp));
        iss.push(...this.vOA('item', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
QuestionnaireResponseItemAnswer._fts_dataType = 'QuestionnaireResponseItemAnswer';
/**
 * Internal flag to properly serialize choice-type element QuestionnaireResponse.item.answer.value[x]
 */
QuestionnaireResponseItemAnswer._fts_valueIsChoice = true;
/**
 * Groups cannot have answers and therefore must nest directly within item. When dealing with questions, nesting must occur within each answer because some questions may have multiple answers (and the nesting occurs for each answer).
 */
export class QuestionnaireResponseItem extends fhir.BackboneElement {
    /**
     * Default constructor for QuestionnaireResponseItem - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['linkId'] !== undefined) {
            this.linkId = new fhir.FhirString({ value: source.linkId }, options);
        }
        else {
            this.linkId = null;
        }
        if (source['_linkId']) {
            if (this.linkId) {
                this.linkId.addExtendedProperties(source._linkId);
            }
            else {
                this.linkId = new fhir.FhirString(source._linkId, options);
            }
        }
        if (source['definition'] !== undefined) {
            this.definition = new fhir.FhirUri({ value: source.definition }, options);
        }
        if (source['_definition']) {
            if (this.definition) {
                this.definition.addExtendedProperties(source._definition);
            }
            else {
                this.definition = new fhir.FhirUri(source._definition, options);
            }
        }
        if (source['text'] !== undefined) {
            this.text = new fhir.FhirString({ value: source.text }, options);
        }
        if (source['_text']) {
            if (this.text) {
                this.text.addExtendedProperties(source._text);
            }
            else {
                this.text = new fhir.FhirString(source._text, options);
            }
        }
        if (source['answer']) {
            this.answer = source.answer.map((x) => new fhir.QuestionnaireResponseItemAnswer(x, options));
        }
        else {
            this.answer = [];
        }
        if (source['item']) {
            this.item = source.item.map((x) => new fhir.QuestionnaireResponseItem(x, options));
        }
        else {
            this.item = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'QuestionnaireResponse.item';
        }
        iss.push(...this.vRS('linkId', exp));
        iss.push(...this.vOS('definition', exp));
        iss.push(...this.vOS('text', exp));
        iss.push(...this.vOA('answer', exp));
        iss.push(...this.vOA('item', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
QuestionnaireResponseItem._fts_dataType = 'QuestionnaireResponseItem';
/**
 * A structured set of questions and their answers. The questions are ordered and grouped into coherent subsets, corresponding to the structure of the grouping of the questionnaire being responded to.
 */
export class QuestionnaireResponse extends fhir.DomainResource {
    /**
     * Default constructor for QuestionnaireResponse - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'QuestionnaireResponse';
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier, options);
        }
        if (source['basedOn']) {
            this.basedOn = source.basedOn.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.basedOn = [];
        }
        if (source['partOf']) {
            this.partOf = source.partOf.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.partOf = [];
        }
        if (source['questionnaire'] !== undefined) {
            this.questionnaire = new fhir.FhirCanonical({ value: source.questionnaire }, options);
        }
        if (source['_questionnaire']) {
            if (this.questionnaire) {
                this.questionnaire.addExtendedProperties(source._questionnaire);
            }
            else {
                this.questionnaire = new fhir.FhirCanonical(source._questionnaire, options);
            }
        }
        if (source['status'] !== undefined) {
            this.status = new fhir.FhirCode({ value: source.status }, options);
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status, options);
            }
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject, options);
        }
        if (source['encounter']) {
            this.encounter = new fhir.Reference(source.encounter, options);
        }
        if (source['authored'] !== undefined) {
            this.authored = new fhir.FhirDateTime({ value: source.authored }, options);
        }
        if (source['_authored']) {
            if (this.authored) {
                this.authored.addExtendedProperties(source._authored);
            }
            else {
                this.authored = new fhir.FhirDateTime(source._authored, options);
            }
        }
        if (source['author']) {
            this.author = new fhir.Reference(source.author, options);
        }
        if (source['source']) {
            this.source = new fhir.Reference(source.source, options);
        }
        if (source['item']) {
            this.item = source.item.map((x) => new fhir.QuestionnaireResponseItem(x, options));
        }
        else {
            this.item = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'QuestionnaireResponse';
        }
        iss.push(...this.vOS('identifier', exp));
        iss.push(...this.vOA('basedOn', exp));
        iss.push(...this.vOA('partOf', exp));
        iss.push(...this.vOS('questionnaire', exp));
        iss.push(...this.vRSV('status', exp, 'QuestionnaireAnswersStatus', QuestionnaireAnswersStatusVsValidation, 'r'));
        iss.push(...this.vOS('subject', exp));
        iss.push(...this.vOS('encounter', exp));
        iss.push(...this.vOS('authored', exp));
        iss.push(...this.vOS('author', exp));
        iss.push(...this.vOS('source', exp));
        iss.push(...this.vOA('item', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
QuestionnaireResponse._fts_dataType = 'QuestionnaireResponse';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUXVlc3Rpb25uYWlyZVJlc3BvbnNlLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9RdWVzdGlvbm5haXJlUmVzcG9uc2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLGdEQUFnRDtBQUNoRCxrQ0FBa0M7QUFDbEMsdUNBQXVDO0FBRXZDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBSW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsc0NBQXNDLEVBQUUsTUFBTSw0REFBNEQsQ0FBQztBQStEcEg7O0dBRUc7QUFDSCxNQUFNLE9BQU8sK0JBQWdDLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFpQnZFOztPQUVHO0lBQ0gsWUFBWSxTQUFzRCxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUM1RyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDO1NBQUU7YUFDOUMsSUFBSSxNQUFNLENBQUMsY0FBYyxDQUFDLEtBQUssU0FBUyxFQUFFO1lBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLFlBQVksRUFBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1NBQUU7YUFDdkgsSUFBSSxNQUFNLENBQUMsY0FBYyxDQUFDLEtBQUssU0FBUyxFQUFFO1lBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLFlBQVksRUFBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1NBQUU7YUFDdkgsSUFBSSxNQUFNLENBQUMsY0FBYyxDQUFDLEtBQUssU0FBUyxFQUFFO1lBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLFlBQVksRUFBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1NBQUU7YUFDdkgsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLEtBQUssU0FBUyxFQUFFO1lBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLFNBQVMsRUFBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1NBQUU7YUFDOUcsSUFBSSxNQUFNLENBQUMsZUFBZSxDQUFDLEtBQUssU0FBUyxFQUFFO1lBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLGFBQWEsRUFBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1NBQUU7YUFDMUgsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLEtBQUssU0FBUyxFQUFFO1lBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLFNBQVMsRUFBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1NBQUU7YUFDOUcsSUFBSSxNQUFNLENBQUMsYUFBYSxDQUFDLEtBQUssU0FBUyxFQUFFO1lBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLFdBQVcsRUFBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1NBQUU7YUFDcEgsSUFBSSxNQUFNLENBQUMsVUFBVSxDQUFDLEtBQUssU0FBUyxFQUFFO1lBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLFFBQVEsRUFBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1NBQUU7YUFDM0csSUFBSSxNQUFNLENBQUMsaUJBQWlCLENBQUMsRUFBRTtZQUFF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LENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3BDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3BDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ2xDLE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQzs7QUF6R0Q7O0dBRUc7QUFDNkIsbUNBQWEsR0FBVSx1QkFBdUIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNGIuY29yZSB2ZXJzaW9uOiA0LjMuMFxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IFF1ZXN0aW9ubmFpcmVSZXNwb25zZVxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUXVlc3Rpb25uYWlyZUFuc3dlcnNTdGF0dXNDb2RlcywgIFF1ZXN0aW9ubmFpcmVBbnN3ZXJzU3RhdHVzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1F1ZXN0aW9ubmFpcmVBbnN3ZXJzU3RhdHVzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFF1ZXN0aW9ubmFpcmVBbnN3ZXJzU3RhdHVzVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9RdWVzdGlvbm5haXJlQW5zd2Vyc1N0YXR1c1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBRdWVzdGlvbm5haXJlUmVzcG9uc2VJdGVtQW5zd2VyIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXN0aW9ubmFpcmVSZXNwb25zZUl0ZW1BbnN3ZXJBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBNb3JlIGNvbXBsZXggc3RydWN0dXJlcyAoQXR0YWNobWVudCwgUmVzb3VyY2UgYW5kIFF1YW50aXR5KSB3aWxsIHR5cGljYWxseSBiZSBsaW1pdGVkIHRvIGVsZWN0cm9uaWMgZm9ybXMgdGhhdCBjYW4gZXhwb3NlIGFuIGFwcHJvcHJpYXRlIHVzZXIgaW50ZXJmYWNlIHRvIGNhcHR1cmUgdGhlIGNvbXBvbmVudHMgYW5kIGVuZm9yY2UgdGhlIGNvbnN0cmFpbnRzIG9mIGEgY29tcGxleCBkYXRhIHR5cGUuICBBZGRpdGlvbmFsIGNvbXBsZXggdHlwZXMgY2FuIGJlIGludHJvZHVjZWQgdGhyb3VnaCBleHRlbnNpb25zLiBNdXN0IG1hdGNoIHRoZSBkYXRhdHlwZSBzcGVjaWZpZWQgYnkgUXVlc3Rpb25uYWlyZS5pdGVtLnR5cGUgaW4gdGhlIGNvcnJlc3BvbmRpbmcgUXVlc3Rpb25uYWlyZS5cclxuICAgKi9cclxuICB2YWx1ZT86IGZoaXIuRmhpckJvb2xlYW58Zmhpci5GaGlyRGVjaW1hbHxmaGlyLkZoaXJJbnRlZ2VyfGZoaXIuRmhpckRhdGV8Zmhpci5GaGlyRGF0ZVRpbWV8Zmhpci5GaGlyVGltZXxmaGlyLkZoaXJTdHJpbmd8Zmhpci5GaGlyVXJpfGZoaXIuQXR0YWNobWVudHxmaGlyLkNvZGluZ3xmaGlyLlF1YW50aXR5fGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBNb3JlIGNvbXBsZXggc3RydWN0dXJlcyAoQXR0YWNobWVudCwgUmVzb3VyY2UgYW5kIFF1YW50aXR5KSB3aWxsIHR5cGljYWxseSBiZSBsaW1pdGVkIHRvIGVsZWN0cm9uaWMgZm9ybXMgdGhhdCBjYW4gZXhwb3NlIGFuIGFwcHJvcHJpYXRlIHVzZXIgaW50ZXJmYWNlIHRvIGNhcHR1cmUgdGhlIGNvbXBvbmVudHMgYW5kIGVuZm9yY2UgdGhlIGNvbnN0cmFpbnRzIG9mIGEgY29tcGxleCBkYXRhIHR5cGUuICBBZGRpdGlvbmFsIGNvbXBsZXggdHlwZXMgY2FuIGJlIGludHJvZHVjZWQgdGhyb3VnaCBleHRlbnNpb25zLiBNdXN0IG1hdGNoIHRoZSBkYXRhdHlwZSBzcGVjaWZpZWQgYnkgUXVlc3Rpb25uYWlyZS5pdGVtLnR5cGUgaW4gdGhlIGNvcnJlc3BvbmRpbmcgUXVlc3Rpb25uYWlyZS5cclxuICAgKi9cclxuICB2YWx1ZUJvb2xlYW4/OiBmaGlyLkZoaXJCb29sZWFufGJvb2xlYW58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE1vcmUgY29tcGxleCBzdHJ1Y3R1cmVzIChBdHRhY2htZW50LCBSZXNvdXJjZSBhbmQgUXVhbnRpdHkpIHdpbGwgdHlwaWNhbGx5IGJlIGxpbWl0ZWQgdG8gZWxlY3Ryb25pYyBmb3JtcyB0aGF0IGNhbiBleHBvc2UgYW4gYXBwcm9wcmlhdGUgdXNlciBpbnRlcmZhY2UgdG8gY2FwdHVyZSB0aGUgY29tcG9uZW50cyBhbmQgZW5mb3JjZSB0aGUgY29uc3RyYWludHMgb2YgYSBjb21wbGV4IGRhdGEgdHlwZS4gIEFkZGl0aW9uYWwgY29tcGxleCB0eXBlcyBjYW4gYmUgaW50cm9kdWNlZCB0aHJvdWdoIGV4dGVuc2lvbnMuIE11c3QgbWF0Y2ggdGhlIGRhdGF0eXBlIHNwZWNpZmllZCBieSBRdWVzdGlvbm5haXJlLml0ZW0udHlwZSBpbiB0aGUgY29ycmVzcG9uZGluZyBRdWVzdGlvbm5haXJlLlxyXG4gICAqL1xyXG4gIHZhbHVlRGVjaW1hbD86IGZoaXIuRmhpckRlY2ltYWx8bnVtYmVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBNb3JlIGNvbXBsZXggc3RydWN0dXJlcyAoQXR0YWNobWVudCwgUmVzb3VyY2UgYW5kIFF1YW50aXR5KSB3aWxsIHR5cGljYWxseSBiZSBsaW1pdGVkIHRvIGVsZWN0cm9uaWMgZm9ybXMgdGhhdCBjYW4gZXhwb3NlIGFuIGFwcHJvcHJpYXRlIHVzZXIgaW50ZXJmYWNlIHRvIGNhcHR1cmUgdGhlIGNvbXBvbmVudHMgYW5kIGVuZm9yY2UgdGhlIGNvbnN0cmFpbnRzIG9mIGEgY29tcGxleCBkYXRhIHR5cGUuICBBZGRpdGlvbmFsIGNvbXBsZXggdHlwZXMgY2FuIGJlIGludHJvZHVjZWQgdGhyb3VnaCBleHRlbnNpb25zLiBNdXN0IG1hdGNoIHRoZSBkYXRhdHlwZSBzcGVjaWZpZWQgYnkgUXVlc3Rpb25uYWlyZS5pdGVtLnR5cGUgaW4gdGhlIGNvcnJlc3BvbmRpbmcgUXVlc3Rpb25uYWlyZS5cclxuICAgKi9cclxuICB2YWx1ZUludGVnZXI/OiBmaGlyLkZoaXJJbnRlZ2VyfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTW9yZSBjb21wbGV4IHN0cnVjdHVyZXMgKEF0dGFjaG1lbnQsIFJlc291cmNlIGFuZCBRdWFudGl0eSkgd2lsbCB0eXBpY2FsbHkgYmUgbGltaXRlZCB0byBlbGVjdHJvbmljIGZvcm1zIHRoYXQgY2FuIGV4cG9zZSBhbiBhcHByb3ByaWF0ZSB1c2VyIGludGVyZmFjZSB0byBjYXB0dXJlIHRoZSBjb21wb25lbnRzIGFuZCBlbmZvcmNlIHRoZSBjb25zdHJhaW50cyBvZiBhIGNvbXBsZXggZGF0YSB0eXBlLiAgQWRkaXRpb25hbCBjb21wbGV4IHR5cGVzIGNhbiBiZSBpbnRyb2R1Y2VkIHRocm91Z2ggZXh0ZW5zaW9ucy4gTXVzdCBtYXRjaCB0aGUgZGF0YXR5cGUgc3BlY2lmaWVkIGJ5IFF1ZXN0aW9ubmFpcmUuaXRlbS50eXBlIGluIHRoZSBjb3JyZXNwb25kaW5nIFF1ZXN0aW9ubmFpcmUuXHJcbiAgICovXHJcbiAgdmFsdWVEYXRlPzogZmhpci5GaGlyRGF0ZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE1vcmUgY29tcGxleCBzdHJ1Y3R1cmVzIChBdHRhY2htZW50LCBSZXNvdXJjZSBhbmQgUXVhbnRpdHkpIHdpbGwgdHlwaWNhbGx5IGJlIGxpbWl0ZWQgdG8gZWxlY3Ryb25pYyBmb3JtcyB0aGF0IGNhbiBleHBvc2UgYW4gYXBwcm9wcmlhdGUgdXNlciBpbnRlcmZhY2UgdG8gY2FwdHVyZSB0aGUgY29tcG9uZW50cyBhbmQgZW5mb3JjZSB0aGUgY29uc3RyYWludHMgb2YgYSBjb21wbGV4IGRhdGEgdHlwZS4gIEFkZGl0aW9uYWwgY29tcGxleCB0eXBlcyBjYW4gYmUgaW50cm9kdWNlZCB0aHJvdWdoIGV4dGVuc2lvbnMuIE11c3QgbWF0Y2ggdGhlIGRhdGF0eXBlIHNwZWNpZmllZCBieSBRdWVzdGlvbm5haXJlLml0ZW0udHlwZSBpbiB0aGUgY29ycmVzcG9uZGluZyBRdWVzdGlvbm5haXJlLlxyXG4gICAqL1xyXG4gIHZhbHVlRGF0ZVRpbWU/OiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE1vcmUgY29tcGxleCBzdHJ1Y3R1cmVzIChBdHRhY2htZW50LCBSZXNvdXJjZSBhbmQgUXVhbnRpdHkpIHdpbGwgdHlwaWNhbGx5IGJlIGxpbWl0ZWQgdG8gZWxlY3Ryb25pYyBmb3JtcyB0aGF0IGNhbiBleHBvc2UgYW4gYXBwcm9wcmlhdGUgdXNlciBpbnRlcmZhY2UgdG8gY2FwdHVyZSB0aGUgY29tcG9uZW50cyBhbmQgZW5mb3JjZSB0aGUgY29uc3RyYWludHMgb2YgYSBjb21wbGV4IGRhdGEgdHlwZS4gIEFkZGl0aW9uYWwgY29tcGxleCB0eXBlcyBjYW4gYmUgaW50cm9kdWNlZCB0aHJvdWdoIGV4dGVuc2lvbnMuIE11c3QgbWF0Y2ggdGhlIGRhdGF0eXBlIHNwZWNpZmllZCBieSBRdWVzdGlvbm5haXJlLml0ZW0udHlwZSBpbiB0aGUgY29ycmVzcG9uZGluZyBRdWVzdGlvbm5haXJlLlxyXG4gICAqL1xyXG4gIHZhbHVlVGltZT86IGZoaXIuRmhpclRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBNb3JlIGNvbXBsZXggc3RydWN0dXJlcyAoQXR0YWNobWVudCwgUmVzb3VyY2UgYW5kIFF1YW50aXR5KSB3aWxsIHR5cGljYWxseSBiZSBsaW1pdGVkIHRvIGVsZWN0cm9uaWMgZm9ybXMgdGhhdCBjYW4gZXhwb3NlIGFuIGFwcHJvcHJpYXRlIHVzZXIgaW50ZXJmYWNlIHRvIGNhcHR1cmUgdGhlIGNvbXBvbmVudHMgYW5kIGVuZm9yY2UgdGhlIGNvbnN0cmFpbnRzIG9mIGEgY29tcGxleCBkYXRhIHR5cGUuICBBZGRpdGlvbmFsIGNvbXBsZXggdHlwZXMgY2FuIGJlIGludHJvZHVjZWQgdGhyb3VnaCBleHRlbnNpb25zLiBNdXN0IG1hdGNoIHRoZSBkYXRhdHlwZSBzcGVjaWZpZWQgYnkgUXVlc3Rpb25uYWlyZS5pdGVtLnR5cGUgaW4gdGhlIGNvcnJlc3BvbmRpbmcgUXVlc3Rpb25uYWlyZS5cclxuICAgKi9cclxuICB2YWx1ZVN0cmluZz86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE1vcmUgY29tcGxleCBzdHJ1Y3R1cmVzIChBdHRhY2htZW50LCBSZXNvdXJjZSBhbmQgUXVhbnRpdHkpIHdpbGwgdHlwaWNhbGx5IGJlIGxpbWl0ZWQgdG8gZWxlY3Ryb25pYyBmb3JtcyB0aGF0IGNhbiBleHBvc2UgYW4gYXBwcm9wcmlhdGUgdXNlciBpbnRlcmZhY2UgdG8gY2FwdHVyZSB0aGUgY29tcG9uZW50cyBhbmQgZW5mb3JjZSB0aGUgY29uc3RyYWludHMgb2YgYSBjb21wbGV4IGRhdGEgdHlwZS4gIEFkZGl0aW9uYWwgY29tcGxleCB0eXBlcyBjYW4gYmUgaW50cm9kdWNlZCB0aHJvdWdoIGV4dGVuc2lvbnMuIE11c3QgbWF0Y2ggdGhlIGRhdGF0eXBlIHNwZWNpZmllZCBieSBRdWVzdGlvbm5haXJlLml0ZW0udHlwZSBpbiB0aGUgY29ycmVzcG9uZGluZyBRdWVzdGlvbm5haXJlLlxyXG4gICAqL1xyXG4gIHZhbHVlVXJpPzogZmhpci5GaGlyVXJpfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTW9yZSBjb21wbGV4IHN0cnVjdHVyZXMgKEF0dGFjaG1lbnQsIFJlc291cmNlIGFuZCBRdWFudGl0eSkgd2lsbCB0eXBpY2FsbHkgYmUgbGltaXRlZCB0byBlbGVjdHJvbmljIGZvcm1zIHRoYXQgY2FuIGV4cG9zZSBhbiBhcHByb3ByaWF0ZSB1c2VyIGludGVyZmFjZSB0byBjYXB0dXJlIHRoZSBjb21wb25lbnRzIGFuZCBlbmZvcmNlIHRoZSBjb25zdHJhaW50cyBvZiBhIGNvbXBsZXggZGF0YSB0eXBlLiAgQWRkaXRpb25hbCBjb21wbGV4IHR5cGVzIGNhbiBiZSBpbnRyb2R1Y2VkIHRocm91Z2ggZXh0ZW5zaW9ucy4gTXVzdCBtYXRjaCB0aGUgZGF0YXR5cGUgc3BlY2lmaWVkIGJ5IFF1ZXN0aW9ubmFpcmUuaXRlbS50eXBlIGluIHRoZSBjb3JyZXNwb25kaW5nIFF1ZXN0aW9ubmFpcmUuXHJcbiAgICovXHJcbiAgdmFsdWVBdHRhY2htZW50PzogZmhpci5BdHRhY2htZW50QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTW9yZSBjb21wbGV4IHN0cnVjdHVyZXMgKEF0dGFjaG1lbnQsIFJlc291cmNlIGFuZCBRdWFudGl0eSkgd2lsbCB0eXBpY2FsbHkgYmUgbGltaXRlZCB0byBlbGVjdHJvbmljIGZvcm1zIHRoYXQgY2FuIGV4cG9zZSBhbiBhcHByb3ByaWF0ZSB1c2VyIGludGVyZmFjZSB0byBjYXB0dXJlIHRoZSBjb21wb25lbnRzIGFuZCBlbmZvcmNlIHRoZSBjb25zdHJhaW50cyBvZiBhIGNvbXBsZXggZGF0YSB0eXBlLiAgQWRkaXRpb25hbCBjb21wbGV4IHR5cGVzIGNhbiBiZSBpbnRyb2R1Y2VkIHRocm91Z2ggZXh0ZW5zaW9ucy4gTXVzdCBtYXRjaCB0aGUgZGF0YXR5cGUgc3BlY2lmaWVkIGJ5IFF1ZXN0aW9ubmFpcmUuaXRlbS50eXBlIGluIHRoZSBjb3JyZXNwb25kaW5nIFF1ZXN0aW9ubmFpcmUuXHJcbiAgICovXHJcbiAgdmFsdWVDb2Rpbmc/OiBmaGlyLkNvZGluZ0FyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE1vcmUgY29tcGxleCBzdHJ1Y3R1cmVzIChBdHRhY2htZW50LCBSZXNvdXJjZSBhbmQgUXVhbnRpdHkpIHdpbGwgdHlwaWNhbGx5IGJlIGxpbWl0ZWQgdG8gZWxlY3Ryb25pYyBmb3JtcyB0aGF0IGNhbiBleHBvc2UgYW4gYXBwcm9wcmlhdGUgdXNlciBpbnRlcmZhY2UgdG8gY2FwdHVyZSB0aGUgY29tcG9uZW50cyBhbmQgZW5mb3JjZSB0aGUgY29uc3RyYWludHMgb2YgYSBjb21wbGV4IGRhdGEgdHlwZS4gIEFkZGl0aW9uYWwgY29tcGxleCB0eXBlcyBjYW4gYmUgaW50cm9kdWNlZCB0aHJvdWdoIGV4dGVuc2lvbnMuIE11c3QgbWF0Y2ggdGhlIGRhdGF0eXBlIHNwZWNpZmllZCBieSBRdWVzdGlvbm5haXJlLml0ZW0udHlwZSBpbiB0aGUgY29ycmVzcG9uZGluZyBRdWVzdGlvbm5haXJlLlxyXG4gICAqL1xyXG4gIHZhbHVlUXVhbnRpdHk/OiBmaGlyLlF1YW50aXR5QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTW9yZSBjb21wbGV4IHN0cnVjdHVyZXMgKEF0dGFjaG1lbnQsIFJlc291cmNlIGFuZCBRdWFudGl0eSkgd2lsbCB0eXBpY2FsbHkgYmUgbGltaXRlZCB0byBlbGVjdHJvbmljIGZvcm1zIHRoYXQgY2FuIGV4cG9zZSBhbiBhcHByb3ByaWF0ZSB1c2VyIGludGVyZmFjZSB0byBjYXB0dXJlIHRoZSBjb21wb25lbnRzIGFuZCBlbmZvcmNlIHRoZSBjb25zdHJhaW50cyBvZiBhIGNvbXBsZXggZGF0YSB0eXBlLiAgQWRkaXRpb25hbCBjb21wbGV4IHR5cGVzIGNhbiBiZSBpbnRyb2R1Y2VkIHRocm91Z2ggZXh0ZW5zaW9ucy4gTXVzdCBtYXRjaCB0aGUgZGF0YXR5cGUgc3BlY2lmaWVkIGJ5IFF1ZXN0aW9ubmFpcmUuaXRlbS50eXBlIGluIHRoZSBjb3JyZXNwb25kaW5nIFF1ZXN0aW9ubmFpcmUuXHJcbiAgICovXHJcbiAgdmFsdWVSZWZlcmVuY2U/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE5lc3RlZCBncm91cHMgYW5kL29yIHF1ZXN0aW9ucyBmb3VuZCB3aXRoaW4gdGhpcyBwYXJ0aWN1bGFyIGFuc3dlci5cclxuICAgKi9cclxuICBpdGVtPzogZmhpci5RdWVzdGlvbm5haXJlUmVzcG9uc2VJdGVtQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSB2YWx1ZSBpcyBuZXN0ZWQgYmVjYXVzZSB3ZSBjYW5ub3QgaGF2ZSBhIHJlcGVhdGluZyBzdHJ1Y3R1cmUgdGhhdCBoYXMgdmFyaWFibGUgdHlwZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBRdWVzdGlvbm5haXJlUmVzcG9uc2VJdGVtQW5zd2VyIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnUXVlc3Rpb25uYWlyZVJlc3BvbnNlSXRlbUFuc3dlcic7XHJcbiAgLyoqXHJcbiAgICogTW9yZSBjb21wbGV4IHN0cnVjdHVyZXMgKEF0dGFjaG1lbnQsIFJlc291cmNlIGFuZCBRdWFudGl0eSkgd2lsbCB0eXBpY2FsbHkgYmUgbGltaXRlZCB0byBlbGVjdHJvbmljIGZvcm1zIHRoYXQgY2FuIGV4cG9zZSBhbiBhcHByb3ByaWF0ZSB1c2VyIGludGVyZmFjZSB0byBjYXB0dXJlIHRoZSBjb21wb25lbnRzIGFuZCBlbmZvcmNlIHRoZSBjb25zdHJhaW50cyBvZiBhIGNvbXBsZXggZGF0YSB0eXBlLiAgQWRkaXRpb25hbCBjb21wbGV4IHR5cGVzIGNhbiBiZSBpbnRyb2R1Y2VkIHRocm91Z2ggZXh0ZW5zaW9ucy4gTXVzdCBtYXRjaCB0aGUgZGF0YXR5cGUgc3BlY2lmaWVkIGJ5IFF1ZXN0aW9ubmFpcmUuaXRlbS50eXBlIGluIHRoZSBjb3JyZXNwb25kaW5nIFF1ZXN0aW9ubmFpcmUuXHJcbiAgICovXHJcbiAgcHVibGljIHZhbHVlPzogKGZoaXIuRmhpckJvb2xlYW58Zmhpci5GaGlyRGVjaW1hbHxmaGlyLkZoaXJJbnRlZ2VyfGZoaXIuRmhpckRhdGV8Zmhpci5GaGlyRGF0ZVRpbWV8Zmhpci5GaGlyVGltZXxmaGlyLkZoaXJTdHJpbmd8Zmhpci5GaGlyVXJpfGZoaXIuQXR0YWNobWVudHxmaGlyLkNvZGluZ3xmaGlyLlF1YW50aXR5fGZoaXIuUmVmZXJlbmNlKXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBRdWVzdGlvbm5haXJlUmVzcG9uc2UuaXRlbS5hbnN3ZXIudmFsdWVbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfdmFsdWVJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBOZXN0ZWQgZ3JvdXBzIGFuZC9vciBxdWVzdGlvbnMgZm91bmQgd2l0aGluIHRoaXMgcGFydGljdWxhciBhbnN3ZXIuXHJcbiAgICovXHJcbiAgcHVibGljIGl0ZW06IGZoaXIuUXVlc3Rpb25uYWlyZVJlc3BvbnNlSXRlbVtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFF1ZXN0aW9ubmFpcmVSZXNwb25zZUl0ZW1BbnN3ZXIgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxRdWVzdGlvbm5haXJlUmVzcG9uc2VJdGVtQW5zd2VyQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3ZhbHVlJ10pIHsgdGhpcy52YWx1ZSA9IHNvdXJjZS52YWx1ZTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd2YWx1ZUJvb2xlYW4nXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMudmFsdWUgPSBuZXcgZmhpci5GaGlyQm9vbGVhbih7dmFsdWU6IHNvdXJjZS52YWx1ZUJvb2xlYW59LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd2YWx1ZURlY2ltYWwnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMudmFsdWUgPSBuZXcgZmhpci5GaGlyRGVjaW1hbCh7dmFsdWU6IHNvdXJjZS52YWx1ZURlY2ltYWx9LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd2YWx1ZUludGVnZXInXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMudmFsdWUgPSBuZXcgZmhpci5GaGlySW50ZWdlcih7dmFsdWU6IHNvdXJjZS52YWx1ZUludGVnZXJ9LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd2YWx1ZURhdGUnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMudmFsdWUgPSBuZXcgZmhpci5GaGlyRGF0ZSh7dmFsdWU6IHNvdXJjZS52YWx1ZURhdGV9LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd2YWx1ZURhdGVUaW1lJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnZhbHVlID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLnZhbHVlRGF0ZVRpbWV9LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd2YWx1ZVRpbWUnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMudmFsdWUgPSBuZXcgZmhpci5GaGlyVGltZSh7dmFsdWU6IHNvdXJjZS52YWx1ZVRpbWV9LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd2YWx1ZVN0cmluZyddICE9PSB1bmRlZmluZWQpIHsgdGhpcy52YWx1ZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UudmFsdWVTdHJpbmd9LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd2YWx1ZVVyaSddICE9PSB1bmRlZmluZWQpIHsgdGhpcy52YWx1ZSA9IG5ldyBmaGlyLkZoaXJVcmkoe3ZhbHVlOiBzb3VyY2UudmFsdWVVcml9LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd2YWx1ZUF0dGFjaG1lbnQnXSkgeyB0aGlzLnZhbHVlID0gbmV3IGZoaXIuQXR0YWNobWVudChzb3VyY2UudmFsdWVBdHRhY2htZW50LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd2YWx1ZUNvZGluZyddKSB7IHRoaXMudmFsdWUgPSBuZXcgZmhpci5Db2Rpbmcoc291cmNlLnZhbHVlQ29kaW5nLCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd2YWx1ZVF1YW50aXR5J10pIHsgdGhpcy52YWx1ZSA9IG5ldyBmaGlyLlF1YW50aXR5KHNvdXJjZS52YWx1ZVF1YW50aXR5LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd2YWx1ZVJlZmVyZW5jZSddKSB7IHRoaXMudmFsdWUgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnZhbHVlUmVmZXJlbmNlLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaXRlbSddKSB7IHRoaXMuaXRlbSA9IHNvdXJjZS5pdGVtLm1hcCgoeCkgPT4gbmV3IGZoaXIuUXVlc3Rpb25uYWlyZVJlc3BvbnNlSXRlbSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLml0ZW0gPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ1F1ZXN0aW9ubmFpcmVSZXNwb25zZS5pdGVtLmFuc3dlcicgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3ZhbHVlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdpdGVtJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBRdWVzdGlvbm5haXJlUmVzcG9uc2VJdGVtIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXN0aW9ubmFpcmVSZXNwb25zZUl0ZW1BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgaXRlbSBmcm9tIHRoZSBRdWVzdGlvbm5haXJlIHRoYXQgY29ycmVzcG9uZHMgdG8gdGhpcyBpdGVtIGluIHRoZSBRdWVzdGlvbm5haXJlUmVzcG9uc2UgcmVzb3VyY2UuXHJcbiAgICovXHJcbiAgbGlua0lkOiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogUXVlc3Rpb25uYWlyZVJlc3BvbnNlLml0ZW0ubGlua0lkXHJcbiAgICovXHJcbiAgX2xpbmtJZD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIEVsZW1lbnREZWZpbml0aW9uIG11c3QgYmUgaW4gYSBbU3RydWN0dXJlRGVmaW5pdGlvbl0oc3RydWN0dXJlZGVmaW5pdGlvbi5odG1sIyksIGFuZCBtdXN0IGhhdmUgYSBmcmFnbWVudCBpZGVudGlmaWVyIHRoYXQgaWRlbnRpZmllcyB0aGUgc3BlY2lmaWMgZGF0YSBlbGVtZW50IGJ5IGl0cyBpZCAoRWxlbWVudC5pZCkuIEUuZy4gaHR0cDovL2hsNy5vcmcvZmhpci9TdHJ1Y3R1cmVEZWZpbml0aW9uL09ic2VydmF0aW9uI09ic2VydmF0aW9uLnZhbHVlW3hdLlxyXG4gICAqIFRoZXJlIGlzIG5vIG5lZWQgZm9yIHRoaXMgZWxlbWVudCBpZiB0aGUgaXRlbSBwb2ludGVkIHRvIGJ5IHRoZSBsaW5rSWQgaGFzIGEgZGVmaW5pdGlvbiBsaXN0ZWQuXHJcbiAgICovXHJcbiAgZGVmaW5pdGlvbj86IGZoaXIuRmhpclVyaXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBRdWVzdGlvbm5haXJlUmVzcG9uc2UuaXRlbS5kZWZpbml0aW9uXHJcbiAgICovXHJcbiAgX2RlZmluaXRpb24/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRleHQgdGhhdCBpcyBkaXNwbGF5ZWQgYWJvdmUgdGhlIGNvbnRlbnRzIG9mIHRoZSBncm91cCBvciBhcyB0aGUgdGV4dCBvZiB0aGUgcXVlc3Rpb24gYmVpbmcgYW5zd2VyZWQuXHJcbiAgICovXHJcbiAgdGV4dD86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBRdWVzdGlvbm5haXJlUmVzcG9uc2UuaXRlbS50ZXh0XHJcbiAgICovXHJcbiAgX3RleHQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB2YWx1ZSBpcyBuZXN0ZWQgYmVjYXVzZSB3ZSBjYW5ub3QgaGF2ZSBhIHJlcGVhdGluZyBzdHJ1Y3R1cmUgdGhhdCBoYXMgdmFyaWFibGUgdHlwZS5cclxuICAgKi9cclxuICBhbnN3ZXI/OiBmaGlyLlF1ZXN0aW9ubmFpcmVSZXNwb25zZUl0ZW1BbnN3ZXJBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFF1ZXN0aW9ucyBvciBzdWItZ3JvdXBzIG5lc3RlZCBiZW5lYXRoIGEgcXVlc3Rpb24gb3IgZ3JvdXAuXHJcbiAgICovXHJcbiAgaXRlbT86IGZoaXIuUXVlc3Rpb25uYWlyZVJlc3BvbnNlSXRlbUFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHcm91cHMgY2Fubm90IGhhdmUgYW5zd2VycyBhbmQgdGhlcmVmb3JlIG11c3QgbmVzdCBkaXJlY3RseSB3aXRoaW4gaXRlbS4gV2hlbiBkZWFsaW5nIHdpdGggcXVlc3Rpb25zLCBuZXN0aW5nIG11c3Qgb2NjdXIgd2l0aGluIGVhY2ggYW5zd2VyIGJlY2F1c2Ugc29tZSBxdWVzdGlvbnMgbWF5IGhhdmUgbXVsdGlwbGUgYW5zd2VycyAoYW5kIHRoZSBuZXN0aW5nIG9jY3VycyBmb3IgZWFjaCBhbnN3ZXIpLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFF1ZXN0aW9ubmFpcmVSZXNwb25zZUl0ZW0gZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdRdWVzdGlvbm5haXJlUmVzcG9uc2VJdGVtJztcclxuICAvKipcclxuICAgKiBUaGUgaXRlbSBmcm9tIHRoZSBRdWVzdGlvbm5haXJlIHRoYXQgY29ycmVzcG9uZHMgdG8gdGhpcyBpdGVtIGluIHRoZSBRdWVzdGlvbm5haXJlUmVzcG9uc2UgcmVzb3VyY2UuXHJcbiAgICovXHJcbiAgcHVibGljIGxpbmtJZDogZmhpci5GaGlyU3RyaW5nfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIEVsZW1lbnREZWZpbml0aW9uIG11c3QgYmUgaW4gYSBbU3RydWN0dXJlRGVmaW5pdGlvbl0oc3RydWN0dXJlZGVmaW5pdGlvbi5odG1sIyksIGFuZCBtdXN0IGhhdmUgYSBmcmFnbWVudCBpZGVudGlmaWVyIHRoYXQgaWRlbnRpZmllcyB0aGUgc3BlY2lmaWMgZGF0YSBlbGVtZW50IGJ5IGl0cyBpZCAoRWxlbWVudC5pZCkuIEUuZy4gaHR0cDovL2hsNy5vcmcvZmhpci9TdHJ1Y3R1cmVEZWZpbml0aW9uL09ic2VydmF0aW9uI09ic2VydmF0aW9uLnZhbHVlW3hdLlxyXG4gICAqIFRoZXJlIGlzIG5vIG5lZWQgZm9yIHRoaXMgZWxlbWVudCBpZiB0aGUgaXRlbSBwb2ludGVkIHRvIGJ5IHRoZSBsaW5rSWQgaGFzIGEgZGVmaW5pdGlvbiBsaXN0ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGRlZmluaXRpb24/OiBmaGlyLkZoaXJVcml8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRleHQgdGhhdCBpcyBkaXNwbGF5ZWQgYWJvdmUgdGhlIGNvbnRlbnRzIG9mIHRoZSBncm91cCBvciBhcyB0aGUgdGV4dCBvZiB0aGUgcXVlc3Rpb24gYmVpbmcgYW5zd2VyZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHRleHQ/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB2YWx1ZSBpcyBuZXN0ZWQgYmVjYXVzZSB3ZSBjYW5ub3QgaGF2ZSBhIHJlcGVhdGluZyBzdHJ1Y3R1cmUgdGhhdCBoYXMgdmFyaWFibGUgdHlwZS5cclxuICAgKi9cclxuICBwdWJsaWMgYW5zd2VyOiBmaGlyLlF1ZXN0aW9ubmFpcmVSZXNwb25zZUl0ZW1BbnN3ZXJbXTtcclxuICAvKipcclxuICAgKiBRdWVzdGlvbnMgb3Igc3ViLWdyb3VwcyBuZXN0ZWQgYmVuZWF0aCBhIHF1ZXN0aW9uIG9yIGdyb3VwLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpdGVtOiBmaGlyLlF1ZXN0aW9ubmFpcmVSZXNwb25zZUl0ZW1bXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBRdWVzdGlvbm5haXJlUmVzcG9uc2VJdGVtIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8UXVlc3Rpb25uYWlyZVJlc3BvbnNlSXRlbUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydsaW5rSWQnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMubGlua0lkID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5saW5rSWR9LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubGlua0lkID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2xpbmtJZCddKSB7XHJcbiAgICAgIGlmICh0aGlzLmxpbmtJZCkgeyB0aGlzLmxpbmtJZC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9saW5rSWQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5saW5rSWQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fbGlua0lkIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydkZWZpbml0aW9uJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLmRlZmluaXRpb24gPSBuZXcgZmhpci5GaGlyVXJpKHt2YWx1ZTogc291cmNlLmRlZmluaXRpb259LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2RlZmluaXRpb24nXSkge1xyXG4gICAgICBpZiAodGhpcy5kZWZpbml0aW9uKSB7IHRoaXMuZGVmaW5pdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9kZWZpbml0aW9uISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZGVmaW5pdGlvbiA9IG5ldyBmaGlyLkZoaXJVcmkoc291cmNlLl9kZWZpbml0aW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyVXJpQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd0ZXh0J10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnRleHQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnRleHR9LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3RleHQnXSkge1xyXG4gICAgICBpZiAodGhpcy50ZXh0KSB7IHRoaXMudGV4dC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl90ZXh0ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudGV4dCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl90ZXh0IGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydhbnN3ZXInXSkgeyB0aGlzLmFuc3dlciA9IHNvdXJjZS5hbnN3ZXIubWFwKCh4KSA9PiBuZXcgZmhpci5RdWVzdGlvbm5haXJlUmVzcG9uc2VJdGVtQW5zd2VyKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYW5zd2VyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2l0ZW0nXSkgeyB0aGlzLml0ZW0gPSBzb3VyY2UuaXRlbS5tYXAoKHgpID0+IG5ldyBmaGlyLlF1ZXN0aW9ubmFpcmVSZXNwb25zZUl0ZW0oeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pdGVtID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdRdWVzdGlvbm5haXJlUmVzcG9uc2UuaXRlbScgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ2xpbmtJZCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnZGVmaW5pdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygndGV4dCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnYW5zd2VyJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdpdGVtJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBRdWVzdGlvbm5haXJlUmVzcG9uc2UgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgUXVlc3Rpb25uYWlyZVJlc3BvbnNlQXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiUXVlc3Rpb25uYWlyZVJlc3BvbnNlXCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgYnVzaW5lc3MgaWRlbnRpZmllciBhc3NpZ25lZCB0byBhIHBhcnRpY3VsYXIgY29tcGxldGVkIChvciBwYXJ0aWFsbHkgY29tcGxldGVkKSBxdWVzdGlvbm5haXJlLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgb3JkZXIsIHByb3Bvc2FsIG9yIHBsYW4gdGhhdCBpcyBmdWxmaWxsZWQgaW4gd2hvbGUgb3IgaW4gcGFydCBieSB0aGlzIFF1ZXN0aW9ubmFpcmVSZXNwb25zZS4gIEZvciBleGFtcGxlLCBhIFNlcnZpY2VSZXF1ZXN0IHNlZWtpbmcgYW4gaW50YWtlIGFzc2Vzc21lbnQgb3IgYSBkZWNpc2lvbiBzdXBwb3J0IHJlY29tbWVuZGF0aW9uIHRvIGFzc2VzcyBmb3IgcG9zdC1wYXJ0dW0gZGVwcmVzc2lvbi5cclxuICAgKi9cclxuICBiYXNlZE9uPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENvbXBvc2l0aW9uIG9mIHF1ZXN0aW9ubmFpcmUgcmVzcG9uc2VzIHdpbGwgYmUgaGFuZGxlZCBieSB0aGUgcGFyZW50IHF1ZXN0aW9ubmFpcmUgaGF2aW5nIGFuc3dlcnMgdGhhdCByZWZlcmVuY2UgdGhlIGNoaWxkIHF1ZXN0aW9ubmFpcmUuICBGb3IgcmVsYXRpb25zaGlwcyB0byByZWZlcnJhbHMsIGFuZCBvdGhlciB0eXBlcyBvZiByZXF1ZXN0cywgdXNlIGJhc2VkT24uXHJcbiAgICovXHJcbiAgcGFydE9mPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIGEgUXVlc3Rpb25uYWlyZVJlc3BvbnNlIHJlZmVyZW5jZXMgYSBRdWVzdGlvbm5haXJlLCB0aGVuIHRoZSBRdWVzdGlvbm5haXJlUmVzcG9uc2Ugc3RydWN0dXJlIG11c3QgYmUgY29uc2lzdGVudCB3aXRoIHRoZSBRdWVzdGlvbm5haXJlIChpLmUuIHF1ZXN0aW9ucyBtdXN0IGJlIG9yZ2FuaXplZCBpbnRvIHRoZSBzYW1lIGdyb3VwcywgbmVzdGVkIHF1ZXN0aW9ucyBtdXN0IHN0aWxsIGJlIG5lc3RlZCwgZXRjLikuXHJcbiAgICovXHJcbiAgcXVlc3Rpb25uYWlyZT86IGZoaXIuRmhpckNhbm9uaWNhbHxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBRdWVzdGlvbm5haXJlUmVzcG9uc2UucXVlc3Rpb25uYWlyZVxyXG4gICAqL1xyXG4gIF9xdWVzdGlvbm5haXJlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIGJlY2F1c2UgdGhlIHN0YXR1cyBjb250YWlucyBjb2RlcyB0aGF0IG1hcmsgdGhlIHJlc291cmNlIGFzIG5vdCBjdXJyZW50bHkgdmFsaWQuXHJcbiAgICovXHJcbiAgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPFF1ZXN0aW9ubmFpcmVBbnN3ZXJzU3RhdHVzQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFF1ZXN0aW9ubmFpcmVSZXNwb25zZS5zdGF0dXNcclxuICAgKi9cclxuICBfc3RhdHVzPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBJZiB0aGUgUXVlc3Rpb25uYWlyZSBkZWNsYXJlZCBhIHN1YmplY3RUeXBlLCB0aGUgcmVzb3VyY2UgcG9pbnRlZCB0byBieSB0aGlzIGVsZW1lbnQgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBvbmUgb2YgdGhlIGxpc3RlZCB0eXBlcy5cclxuICAgKi9cclxuICBzdWJqZWN0PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIHdpbGwgdHlwaWNhbGx5IGJlIHRoZSBlbmNvdW50ZXIgdGhlIGV2ZW50IG9jY3VycmVkIHdpdGhpbiwgYnV0IHNvbWUgYWN0aXZpdGllcyBtYXkgYmUgaW5pdGlhdGVkIHByaW9yIHRvIG9yIGFmdGVyIHRoZSBvZmZpY2lhbCBjb21wbGV0aW9uIG9mIGFuIGVuY291bnRlciBidXQgc3RpbGwgYmUgdGllZCB0byB0aGUgY29udGV4dCBvZiB0aGUgZW5jb3VudGVyLiBBIHF1ZXN0aW9ubmFpcmUgdGhhdCB3YXMgaW5pdGlhdGVkIGR1cmluZyBhbiBlbmNvdW50ZXIgYnV0IG5vdCBmdWxseSBjb21wbGV0ZWQgZHVyaW5nIHRoZSBlbmNvdW50ZXIgd291bGQgc3RpbGwgZ2VuZXJhbGx5IGJlIGFzc29jaWF0ZWQgd2l0aCB0aGUgZW5jb3VudGVyLlxyXG4gICAqL1xyXG4gIGVuY291bnRlcj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTWF5IGJlIGRpZmZlcmVudCBmcm9tIHRoZSBsYXN0VXBkYXRlVGltZSBvZiB0aGUgcmVzb3VyY2UgaXRzZWxmLCBiZWNhdXNlIHRoYXQgcmVmbGVjdHMgd2hlbiB0aGUgZGF0YSB3YXMga25vd24gdG8gdGhlIHNlcnZlciwgbm90IHdoZW4gdGhlIGRhdGEgd2FzIGNhcHR1cmVkLlxyXG4gICAqIFRoaXMgZWxlbWVudCBpcyBvcHRpb25hbCB0byBhbGxvdyBmb3Igc3lzdGVtcyB0aGF0IG1pZ2h0IG5vdCBrbm93IHRoZSB2YWx1ZSwgaG93ZXZlciBpdCBTSE9VTEQgYmUgcG9wdWxhdGVkIGlmIHBvc3NpYmxlLlxyXG4gICAqL1xyXG4gIGF1dGhvcmVkPzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogUXVlc3Rpb25uYWlyZVJlc3BvbnNlLmF1dGhvcmVkXHJcbiAgICovXHJcbiAgX2F1dGhvcmVkPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBNYXBwaW5nIGEgc3ViamVjdCdzIGFuc3dlcnMgdG8gbXVsdGlwbGUgY2hvaWNlIG9wdGlvbnMgYW5kIGRldGVybWluaW5nIHdoYXQgdG8gcHV0IGluIHRoZSB0ZXh0dWFsIGFuc3dlciBpcyBhIG1hdHRlciBvZiBpbnRlcnByZXRhdGlvbi4gIEF1dGhvcmluZyBieSBkZXZpY2Ugd291bGQgaW5kaWNhdGUgdGhhdCBzb21lIHBvcnRpb24gb2YgdGhlIHF1ZXN0aW9ubmFpcmUgaGFkIGJlZW4gYXV0by1wb3B1bGF0ZWQuXHJcbiAgICovXHJcbiAgYXV0aG9yPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiBub3Qgc3BlY2lmaWVkLCBubyBpbmZlcmVuY2UgY2FuIGJlIG1hZGUgYWJvdXQgd2hvIHByb3ZpZGVkIHRoZSBkYXRhLlxyXG4gICAqL1xyXG4gIHNvdXJjZT86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogR3JvdXBzIGNhbm5vdCBoYXZlIGFuc3dlcnMgYW5kIHRoZXJlZm9yZSBtdXN0IG5lc3QgZGlyZWN0bHkgd2l0aGluIGl0ZW0uIFdoZW4gZGVhbGluZyB3aXRoIHF1ZXN0aW9ucywgbmVzdGluZyBtdXN0IG9jY3VyIHdpdGhpbiBlYWNoIGFuc3dlciBiZWNhdXNlIHNvbWUgcXVlc3Rpb25zIG1heSBoYXZlIG11bHRpcGxlIGFuc3dlcnMgKGFuZCB0aGUgbmVzdGluZyBvY2N1cnMgZm9yIGVhY2ggYW5zd2VyKS5cclxuICAgKi9cclxuICBpdGVtPzogZmhpci5RdWVzdGlvbm5haXJlUmVzcG9uc2VJdGVtQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgc3RydWN0dXJlZCBzZXQgb2YgcXVlc3Rpb25zIGFuZCB0aGVpciBhbnN3ZXJzLiBUaGUgcXVlc3Rpb25zIGFyZSBvcmRlcmVkIGFuZCBncm91cGVkIGludG8gY29oZXJlbnQgc3Vic2V0cywgY29ycmVzcG9uZGluZyB0byB0aGUgc3RydWN0dXJlIG9mIHRoZSBncm91cGluZyBvZiB0aGUgcXVlc3Rpb25uYWlyZSBiZWluZyByZXNwb25kZWQgdG8uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUXVlc3Rpb25uYWlyZVJlc3BvbnNlIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdRdWVzdGlvbm5haXJlUmVzcG9uc2UnO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNvdXJjZVR5cGU6IFwiUXVlc3Rpb25uYWlyZVJlc3BvbnNlXCI7XHJcbiAgLyoqXHJcbiAgICogQSBidXNpbmVzcyBpZGVudGlmaWVyIGFzc2lnbmVkIHRvIGEgcGFydGljdWxhciBjb21wbGV0ZWQgKG9yIHBhcnRpYWxseSBjb21wbGV0ZWQpIHF1ZXN0aW9ubmFpcmUuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBvcmRlciwgcHJvcG9zYWwgb3IgcGxhbiB0aGF0IGlzIGZ1bGZpbGxlZCBpbiB3aG9sZSBvciBpbiBwYXJ0IGJ5IHRoaXMgUXVlc3Rpb25uYWlyZVJlc3BvbnNlLiAgRm9yIGV4YW1wbGUsIGEgU2VydmljZVJlcXVlc3Qgc2Vla2luZyBhbiBpbnRha2UgYXNzZXNzbWVudCBvciBhIGRlY2lzaW9uIHN1cHBvcnQgcmVjb21tZW5kYXRpb24gdG8gYXNzZXNzIGZvciBwb3N0LXBhcnR1bSBkZXByZXNzaW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBiYXNlZE9uOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIENvbXBvc2l0aW9uIG9mIHF1ZXN0aW9ubmFpcmUgcmVzcG9uc2VzIHdpbGwgYmUgaGFuZGxlZCBieSB0aGUgcGFyZW50IHF1ZXN0aW9ubmFpcmUgaGF2aW5nIGFuc3dlcnMgdGhhdCByZWZlcmVuY2UgdGhlIGNoaWxkIHF1ZXN0aW9ubmFpcmUuICBGb3IgcmVsYXRpb25zaGlwcyB0byByZWZlcnJhbHMsIGFuZCBvdGhlciB0eXBlcyBvZiByZXF1ZXN0cywgdXNlIGJhc2VkT24uXHJcbiAgICovXHJcbiAgcHVibGljIHBhcnRPZjogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBJZiBhIFF1ZXN0aW9ubmFpcmVSZXNwb25zZSByZWZlcmVuY2VzIGEgUXVlc3Rpb25uYWlyZSwgdGhlbiB0aGUgUXVlc3Rpb25uYWlyZVJlc3BvbnNlIHN0cnVjdHVyZSBtdXN0IGJlIGNvbnNpc3RlbnQgd2l0aCB0aGUgUXVlc3Rpb25uYWlyZSAoaS5lLiBxdWVzdGlvbnMgbXVzdCBiZSBvcmdhbml6ZWQgaW50byB0aGUgc2FtZSBncm91cHMsIG5lc3RlZCBxdWVzdGlvbnMgbXVzdCBzdGlsbCBiZSBuZXN0ZWQsIGV0Yy4pLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBxdWVzdGlvbm5haXJlPzogZmhpci5GaGlyQ2Fub25pY2FsfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgaXMgbGFiZWxlZCBhcyBhIG1vZGlmaWVyIGJlY2F1c2UgdGhlIHN0YXR1cyBjb250YWlucyBjb2RlcyB0aGF0IG1hcmsgdGhlIHJlc291cmNlIGFzIG5vdCBjdXJyZW50bHkgdmFsaWQuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1czogZmhpci5GaGlyQ29kZTxRdWVzdGlvbm5haXJlQW5zd2Vyc1N0YXR1c0NvZGVUeXBlPnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIElmIHRoZSBRdWVzdGlvbm5haXJlIGRlY2xhcmVkIGEgc3ViamVjdFR5cGUsIHRoZSByZXNvdXJjZSBwb2ludGVkIHRvIGJ5IHRoaXMgZWxlbWVudCBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIG9uZSBvZiB0aGUgbGlzdGVkIHR5cGVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdWJqZWN0PzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgd2lsbCB0eXBpY2FsbHkgYmUgdGhlIGVuY291bnRlciB0aGUgZXZlbnQgb2NjdXJyZWQgd2l0aGluLCBidXQgc29tZSBhY3Rpdml0aWVzIG1heSBiZSBpbml0aWF0ZWQgcHJpb3IgdG8gb3IgYWZ0ZXIgdGhlIG9mZmljaWFsIGNvbXBsZXRpb24gb2YgYW4gZW5jb3VudGVyIGJ1dCBzdGlsbCBiZSB0aWVkIHRvIHRoZSBjb250ZXh0IG9mIHRoZSBlbmNvdW50ZXIuIEEgcXVlc3Rpb25uYWlyZSB0aGF0IHdhcyBpbml0aWF0ZWQgZHVyaW5nIGFuIGVuY291bnRlciBidXQgbm90IGZ1bGx5IGNvbXBsZXRlZCBkdXJpbmcgdGhlIGVuY291bnRlciB3b3VsZCBzdGlsbCBnZW5lcmFsbHkgYmUgYXNzb2NpYXRlZCB3aXRoIHRoZSBlbmNvdW50ZXIuXHJcbiAgICovXHJcbiAgcHVibGljIGVuY291bnRlcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBNYXkgYmUgZGlmZmVyZW50IGZyb20gdGhlIGxhc3RVcGRhdGVUaW1lIG9mIHRoZSByZXNvdXJjZSBpdHNlbGYsIGJlY2F1c2UgdGhhdCByZWZsZWN0cyB3aGVuIHRoZSBkYXRhIHdhcyBrbm93biB0byB0aGUgc2VydmVyLCBub3Qgd2hlbiB0aGUgZGF0YSB3YXMgY2FwdHVyZWQuXHJcbiAgICogVGhpcyBlbGVtZW50IGlzIG9wdGlvbmFsIHRvIGFsbG93IGZvciBzeXN0ZW1zIHRoYXQgbWlnaHQgbm90IGtub3cgdGhlIHZhbHVlLCBob3dldmVyIGl0IFNIT1VMRCBiZSBwb3B1bGF0ZWQgaWYgcG9zc2libGUuXHJcbiAgICovXHJcbiAgcHVibGljIGF1dGhvcmVkPzogZmhpci5GaGlyRGF0ZVRpbWV8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgYSBzdWJqZWN0J3MgYW5zd2VycyB0byBtdWx0aXBsZSBjaG9pY2Ugb3B0aW9ucyBhbmQgZGV0ZXJtaW5pbmcgd2hhdCB0byBwdXQgaW4gdGhlIHRleHR1YWwgYW5zd2VyIGlzIGEgbWF0dGVyIG9mIGludGVycHJldGF0aW9uLiAgQXV0aG9yaW5nIGJ5IGRldmljZSB3b3VsZCBpbmRpY2F0ZSB0aGF0IHNvbWUgcG9ydGlvbiBvZiB0aGUgcXVlc3Rpb25uYWlyZSBoYWQgYmVlbiBhdXRvLXBvcHVsYXRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgYXV0aG9yPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIG5vdCBzcGVjaWZpZWQsIG5vIGluZmVyZW5jZSBjYW4gYmUgbWFkZSBhYm91dCB3aG8gcHJvdmlkZWQgdGhlIGRhdGEuXHJcbiAgICovXHJcbiAgcHVibGljIHNvdXJjZT86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBHcm91cHMgY2Fubm90IGhhdmUgYW5zd2VycyBhbmQgdGhlcmVmb3JlIG11c3QgbmVzdCBkaXJlY3RseSB3aXRoaW4gaXRlbS4gV2hlbiBkZWFsaW5nIHdpdGggcXVlc3Rpb25zLCBuZXN0aW5nIG11c3Qgb2NjdXIgd2l0aGluIGVhY2ggYW5zd2VyIGJlY2F1c2Ugc29tZSBxdWVzdGlvbnMgbWF5IGhhdmUgbXVsdGlwbGUgYW5zd2VycyAoYW5kIHRoZSBuZXN0aW5nIG9jY3VycyBmb3IgZWFjaCBhbnN3ZXIpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpdGVtOiBmaGlyLlF1ZXN0aW9ubmFpcmVSZXNwb25zZUl0ZW1bXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBRdWVzdGlvbm5haXJlUmVzcG9uc2UgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxRdWVzdGlvbm5haXJlUmVzcG9uc2VBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnUXVlc3Rpb25uYWlyZVJlc3BvbnNlJztcclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBuZXcgZmhpci5JZGVudGlmaWVyKHNvdXJjZS5pZGVudGlmaWVyLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYmFzZWRPbiddKSB7IHRoaXMuYmFzZWRPbiA9IHNvdXJjZS5iYXNlZE9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYmFzZWRPbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwYXJ0T2YnXSkgeyB0aGlzLnBhcnRPZiA9IHNvdXJjZS5wYXJ0T2YubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wYXJ0T2YgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncXVlc3Rpb25uYWlyZSddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5xdWVzdGlvbm5haXJlID0gbmV3IGZoaXIuRmhpckNhbm9uaWNhbCh7dmFsdWU6IHNvdXJjZS5xdWVzdGlvbm5haXJlfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19xdWVzdGlvbm5haXJlJ10pIHtcclxuICAgICAgaWYgKHRoaXMucXVlc3Rpb25uYWlyZSkgeyB0aGlzLnF1ZXN0aW9ubmFpcmUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fcXVlc3Rpb25uYWlyZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnF1ZXN0aW9ubmFpcmUgPSBuZXcgZmhpci5GaGlyQ2Fub25pY2FsKHNvdXJjZS5fcXVlc3Rpb25uYWlyZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckNhbm9uaWNhbEFyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RhdHVzJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPFF1ZXN0aW9ubmFpcmVBbnN3ZXJzU3RhdHVzQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnN0YXR1c30sIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfc3RhdHVzJ10pIHtcclxuICAgICAgaWYgKHRoaXMuc3RhdHVzKSB7IHRoaXMuc3RhdHVzLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3N0YXR1cyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPFF1ZXN0aW9ubmFpcmVBbnN3ZXJzU3RhdHVzQ29kZVR5cGU+KHNvdXJjZS5fc3RhdHVzIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydzdWJqZWN0J10pIHsgdGhpcy5zdWJqZWN0ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5zdWJqZWN0LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZW5jb3VudGVyJ10pIHsgdGhpcy5lbmNvdW50ZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmVuY291bnRlciwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2F1dGhvcmVkJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLmF1dGhvcmVkID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLmF1dGhvcmVkfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19hdXRob3JlZCddKSB7XHJcbiAgICAgIGlmICh0aGlzLmF1dGhvcmVkKSB7IHRoaXMuYXV0aG9yZWQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fYXV0aG9yZWQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5hdXRob3JlZCA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZShzb3VyY2UuX2F1dGhvcmVkIGFzIFBhcnRpYWw8Zmhpci5GaGlyRGF0ZVRpbWVBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2F1dGhvciddKSB7IHRoaXMuYXV0aG9yID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5hdXRob3IsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydzb3VyY2UnXSkgeyB0aGlzLnNvdXJjZSA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2Uuc291cmNlLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaXRlbSddKSB7IHRoaXMuaXRlbSA9IHNvdXJjZS5pdGVtLm1hcCgoeCkgPT4gbmV3IGZoaXIuUXVlc3Rpb25uYWlyZVJlc3BvbnNlSXRlbSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLml0ZW0gPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ1F1ZXN0aW9ubmFpcmVSZXNwb25zZScgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2lkZW50aWZpZXInLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2Jhc2VkT24nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3BhcnRPZicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygncXVlc3Rpb25uYWlyZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSU1YoJ3N0YXR1cycsZXhwLCdRdWVzdGlvbm5haXJlQW5zd2Vyc1N0YXR1cycsUXVlc3Rpb25uYWlyZUFuc3dlcnNTdGF0dXNWc1ZhbGlkYXRpb24sJ3InKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnc3ViamVjdCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnZW5jb3VudGVyJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdhdXRob3JlZCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnYXV0aG9yJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdzb3VyY2UnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2l0ZW0nLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuIl19