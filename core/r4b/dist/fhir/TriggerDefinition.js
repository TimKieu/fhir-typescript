// <auto-generated/>
// Contents of: hl7.fhir.r4b.core version: 4.3.0
// Minimum TypeScript Version: 3.7
// FHIR ComplexType: TriggerDefinition
import * as fhir from '../fhir.js';
// @ts-ignore
import { TriggerTypeVsValidation } from '../fhirValueSets/TriggerTypeVsValidation.js';
/**
 * A description of a triggering event. Triggering events can be named events, data events, or periodic, as determined by the type element.
 */
export class TriggerDefinition extends fhir.FhirElement {
    /**
     * Default constructor for TriggerDefinition - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['type']) {
            this.type = new fhir.FhirCode({ value: source.type });
        }
        else {
            this.type = null;
        }
        if (source['_type']) {
            if (this.type) {
                this.type.addExtendedProperties(source._type);
            }
            else {
                this.type = new fhir.FhirCode(source._type);
            }
        }
        if (source['name']) {
            this.name = new fhir.FhirString({ value: source.name });
        }
        if (source['_name']) {
            if (this.name) {
                this.name.addExtendedProperties(source._name);
            }
            else {
                this.name = new fhir.FhirString(source._name);
            }
        }
        if (source['timing']) {
            this.timing = source.timing;
        }
        else if (source['timingTiming']) {
            this.timing = new fhir.Timing(source.timingTiming);
        }
        else if (source['timingReference']) {
            this.timing = new fhir.Reference(source.timingReference);
        }
        else if (source['timingDate']) {
            this.timing = new fhir.FhirDate({ value: source.timingDate });
        }
        else if (source['timingDateTime']) {
            this.timing = new fhir.FhirDateTime({ value: source.timingDateTime });
        }
        if (source['data']) {
            this.data = source.data.map((x) => new fhir.DataRequirement(x));
        }
        else {
            this.data = [];
        }
        if (source['condition']) {
            this.condition = new fhir.Expression(source.condition);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'TriggerDefinition';
        }
        this.vRSV('type', exp, 'TriggerType', TriggerTypeVsValidation, 'r');
        this.vOS('name', exp);
        this.vOS('timing', exp);
        this.vOA('data', exp);
        this.vOS('condition', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
TriggerDefinition._fts_dataType = 'TriggerDefinition';
/**
 * Internal flag to properly serialize choice-type element TriggerDefinition.timing[x]
 */
TriggerDefinition._fts_timingIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHJpZ2dlckRlZmluaXRpb24uanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL1RyaWdnZXJEZWZpbml0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQixnREFBZ0Q7QUFDaEQsa0NBQWtDO0FBQ2xDLHNDQUFzQztBQUV0QyxPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQUluQyxhQUFhO0FBQ2IsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sNkNBQTZDLENBQUM7QUFtRHRGOztHQUVHO0FBQ0gsTUFBTSxPQUFPLGlCQUFrQixTQUFRLElBQUksQ0FBQyxXQUFXO0lBNkJyRDs7T0FFRztJQUNILFlBQVksU0FBd0MsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDOUYsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFzQixFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsSUFBSSxFQUFDLENBQUMsQ0FBQztTQUFFO2FBQzVGO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7U0FBRTtRQUMxQixJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUNuQixJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUU7Z0JBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsS0FBTSxDQUFDLENBQUM7YUFBRTtpQkFDN0Q7Z0JBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQXNCLE1BQU0sQ0FBQyxLQUErQixDQUFDLENBQUM7YUFBRTtTQUNyRztRQUNELElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUks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dGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjRiLmNvcmUgdmVyc2lvbjogNC4zLjBcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIENvbXBsZXhUeXBlOiBUcmlnZ2VyRGVmaW5pdGlvblxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgVHJpZ2dlclR5cGVDb2RlcywgIFRyaWdnZXJUeXBlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1RyaWdnZXJUeXBlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFRyaWdnZXJUeXBlVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9UcmlnZ2VyVHlwZVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBUcmlnZ2VyRGVmaW5pdGlvbiB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBUcmlnZ2VyRGVmaW5pdGlvbkFyZ3MgZXh0ZW5kcyBmaGlyLkZoaXJFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIHR5cGUgb2YgdHJpZ2dlcmluZyBldmVudC5cclxuICAgKi9cclxuICB0eXBlOiBmaGlyLkZoaXJDb2RlPFRyaWdnZXJUeXBlQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFRyaWdnZXJEZWZpbml0aW9uLnR5cGVcclxuICAgKi9cclxuICBfdHlwZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQW4gZXZlbnQgbmFtZSBjYW4gYmUgcHJvdmlkZWQgZm9yIGFsbCBldmVudCB0eXBlcywgYnV0IGlzIHJlcXVpcmVkIGZvciBuYW1lZCBldmVudHMuIElmIGEgbmFtZSBpcyBwcm92aWRlZCBmb3IgYSB0eXBlIG90aGVyIHRoYW4gbmFtZWQgZXZlbnRzLCBpdCBpcyBjb25zaWRlcmVkIHRvIGJlIGEgc2hvcnRoYW5kIGZvciB0aGUgc2VtYW50aWNzIGRlc2NyaWJlZCBieSB0aGUgZm9ybWFsIGRlc2NyaXB0aW9uIG9mIHRoZSBldmVudC5cclxuICAgKi9cclxuICBuYW1lPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFRyaWdnZXJEZWZpbml0aW9uLm5hbWVcclxuICAgKi9cclxuICBfbmFtZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRpbWluZyBvZiB0aGUgZXZlbnQgKGlmIHRoaXMgaXMgYSBwZXJpb2RpYyB0cmlnZ2VyKS5cclxuICAgKi9cclxuICB0aW1pbmc/OiBmaGlyLlRpbWluZ3xmaGlyLlJlZmVyZW5jZXxmaGlyLkZoaXJEYXRlfGZoaXIuRmhpckRhdGVUaW1lfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdGltaW5nIG9mIHRoZSBldmVudCAoaWYgdGhpcyBpcyBhIHBlcmlvZGljIHRyaWdnZXIpLlxyXG4gICAqL1xyXG4gIHRpbWluZ1RpbWluZz86IGZoaXIuVGltaW5nQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRpbWluZyBvZiB0aGUgZXZlbnQgKGlmIHRoaXMgaXMgYSBwZXJpb2RpYyB0cmlnZ2VyKS5cclxuICAgKi9cclxuICB0aW1pbmdSZWZlcmVuY2U/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0aW1pbmcgb2YgdGhlIGV2ZW50IChpZiB0aGlzIGlzIGEgcGVyaW9kaWMgdHJpZ2dlcikuXHJcbiAgICovXHJcbiAgdGltaW5nRGF0ZT86IGZoaXIuRmhpckRhdGV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgdGltaW5nIG9mIHRoZSBldmVudCAoaWYgdGhpcyBpcyBhIHBlcmlvZGljIHRyaWdnZXIpLlxyXG4gICAqL1xyXG4gIHRpbWluZ0RhdGVUaW1lPzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgc2hhbGwgYmUgcHJlc2VudCBmb3IgYW55IGRhdGEgdHlwZSB0cmlnZ2VyLlxyXG4gICAqL1xyXG4gIGRhdGE/OiBmaGlyLkRhdGFSZXF1aXJlbWVudEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IGNhbiBiZSBvbmx5IGJlIHNwZWNpZmllZCBmb3IgZGF0YSB0eXBlIHRyaWdnZXJzIGFuZCBwcm92aWRlcyBhZGRpdGlvbmFsIHNlbWFudGljcyBmb3IgdGhlIHRyaWdnZXIuIFRoZSBjb250ZXh0IGF2YWlsYWJsZSB3aXRoaW4gdGhlIGNvbmRpdGlvbiBpcyBiYXNlZCBvbiB0aGUgdHlwZSBvZiBkYXRhIGV2ZW50LiBGb3IgYWxsIGV2ZW50cywgdGhlIGN1cnJlbnQgcmVzb3VyY2Ugd2lsbCBiZSBhdmFpbGFibGUgYXMgY29udGV4dC4gSW4gYWRkaXRpb24sIGZvciBtb2RpZmljYXRpb24gZXZlbnRzLCB0aGUgcHJldmlvdXMgcmVzb3VyY2Ugd2lsbCBhbHNvIGJlIGF2YWlsYWJsZS4gVGhlIGV4cHJlc3Npb24gbWF5IGJlIGlubGluZWQsIG9yIG1heSBiZSBhIHNpbXBsZSBhYnNvbHV0ZSBVUkksIHdoaWNoIGlzIGEgcmVmZXJlbmNlIHRvIGEgbmFtZWQgZXhwcmVzc2lvbiB3aXRoaW4gYSBsb2dpYyBsaWJyYXJ5IHJlZmVyZW5jZWQgYnkgYSBsaWJyYXJ5IGVsZW1lbnQgb3IgZXh0ZW5zaW9uIHdpdGhpbiB0aGUgY29udGFpbmluZyByZXNvdXJjZS4gSWYgdGhlIGV4cHJlc3Npb24gaXMgYSBGSElSIFBhdGggZXhwcmVzc2lvbiwgaXQgZXZhbHVhdGVzIGluIHRoZSBjb250ZXh0IG9mIGEgcmVzb3VyY2Ugb2Ygb25lIG9mIHRoZSB0eXBlIGlkZW50aWZpZWQgaW4gdGhlIGRhdGEgcmVxdWlyZW1lbnQsIGFuZCBtYXkgYWxzbyByZWZlciB0byB0aGUgdmFyaWFibGUgJXByZXZpb3VzIGZvciBkZWx0YSBjb21wYXJpc29ucyBvbiBldmVudHMgb2YgdHlwZSBkYXRhLWNoYW5nZWQsIGRhdGEtbW9kaWZpZWQsIGFuZCBkYXRhLWRlbGV0ZWQgd2hpY2ggd2lsbCBhbHdheXMgaGF2ZSB0aGUgc2FtZSB0eXBlLlxyXG4gICAqL1xyXG4gIGNvbmRpdGlvbj86IGZoaXIuRXhwcmVzc2lvbkFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQSBkZXNjcmlwdGlvbiBvZiBhIHRyaWdnZXJpbmcgZXZlbnQuIFRyaWdnZXJpbmcgZXZlbnRzIGNhbiBiZSBuYW1lZCBldmVudHMsIGRhdGEgZXZlbnRzLCBvciBwZXJpb2RpYywgYXMgZGV0ZXJtaW5lZCBieSB0aGUgdHlwZSBlbGVtZW50LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRyaWdnZXJEZWZpbml0aW9uIGV4dGVuZHMgZmhpci5GaGlyRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdUcmlnZ2VyRGVmaW5pdGlvbic7XHJcbiAgLyoqXHJcbiAgICogVGhlIHR5cGUgb2YgdHJpZ2dlcmluZyBldmVudC5cclxuICAgKi9cclxuICBwdWJsaWMgdHlwZTogZmhpci5GaGlyQ29kZTxUcmlnZ2VyVHlwZUNvZGVUeXBlPnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEFuIGV2ZW50IG5hbWUgY2FuIGJlIHByb3ZpZGVkIGZvciBhbGwgZXZlbnQgdHlwZXMsIGJ1dCBpcyByZXF1aXJlZCBmb3IgbmFtZWQgZXZlbnRzLiBJZiBhIG5hbWUgaXMgcHJvdmlkZWQgZm9yIGEgdHlwZSBvdGhlciB0aGFuIG5hbWVkIGV2ZW50cywgaXQgaXMgY29uc2lkZXJlZCB0byBiZSBhIHNob3J0aGFuZCBmb3IgdGhlIHNlbWFudGljcyBkZXNjcmliZWQgYnkgdGhlIGZvcm1hbCBkZXNjcmlwdGlvbiBvZiB0aGUgZXZlbnQuXHJcbiAgICovXHJcbiAgcHVibGljIG5hbWU/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0aW1pbmcgb2YgdGhlIGV2ZW50IChpZiB0aGlzIGlzIGEgcGVyaW9kaWMgdHJpZ2dlcikuXHJcbiAgICovXHJcbiAgcHVibGljIHRpbWluZz86IChmaGlyLlRpbWluZ3xmaGlyLlJlZmVyZW5jZXxmaGlyLkZoaXJEYXRlfGZoaXIuRmhpckRhdGVUaW1lKXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBUcmlnZ2VyRGVmaW5pdGlvbi50aW1pbmdbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfdGltaW5nSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBlbGVtZW50IHNoYWxsIGJlIHByZXNlbnQgZm9yIGFueSBkYXRhIHR5cGUgdHJpZ2dlci5cclxuICAgKi9cclxuICBwdWJsaWMgZGF0YTogZmhpci5EYXRhUmVxdWlyZW1lbnRbXTtcclxuICAvKipcclxuICAgKiBUaGlzIGVsZW1lbnQgY2FuIGJlIG9ubHkgYmUgc3BlY2lmaWVkIGZvciBkYXRhIHR5cGUgdHJpZ2dlcnMgYW5kIHByb3ZpZGVzIGFkZGl0aW9uYWwgc2VtYW50aWNzIGZvciB0aGUgdHJpZ2dlci4gVGhlIGNvbnRleHQgYXZhaWxhYmxlIHdpdGhpbiB0aGUgY29uZGl0aW9uIGlzIGJhc2VkIG9uIHRoZSB0eXBlIG9mIGRhdGEgZXZlbnQuIEZvciBhbGwgZXZlbnRzLCB0aGUgY3VycmVudCByZXNvdXJjZSB3aWxsIGJlIGF2YWlsYWJsZSBhcyBjb250ZXh0LiBJbiBhZGRpdGlvbiwgZm9yIG1vZGlmaWNhdGlvbiBldmVudHMsIHRoZSBwcmV2aW91cyByZXNvdXJjZSB3aWxsIGFsc28gYmUgYXZhaWxhYmxlLiBUaGUgZXhwcmVzc2lvbiBtYXkgYmUgaW5saW5lZCwgb3IgbWF5IGJlIGEgc2ltcGxlIGFic29sdXRlIFVSSSwgd2hpY2ggaXMgYSByZWZlcmVuY2UgdG8gYSBuYW1lZCBleHByZXNzaW9uIHdpdGhpbiBhIGxvZ2ljIGxpYnJhcnkgcmVmZXJlbmNlZCBieSBhIGxpYnJhcnkgZWxlbWVudCBvciBleHRlbnNpb24gd2l0aGluIHRoZSBjb250YWluaW5nIHJlc291cmNlLiBJZiB0aGUgZXhwcmVzc2lvbiBpcyBhIEZISVIgUGF0aCBleHByZXNzaW9uLCBpdCBldmFsdWF0ZXMgaW4gdGhlIGNvbnRleHQgb2YgYSByZXNvdXJjZSBvZiBvbmUgb2YgdGhlIHR5cGUgaWRlbnRpZmllZCBpbiB0aGUgZGF0YSByZXF1aXJlbWVudCwgYW5kIG1heSBhbHNvIHJlZmVyIHRvIHRoZSB2YXJpYWJsZSAlcHJldmlvdXMgZm9yIGRlbHRhIGNvbXBhcmlzb25zIG9uIGV2ZW50cyBvZiB0eXBlIGRhdGEtY2hhbmdlZCwgZGF0YS1tb2RpZmllZCwgYW5kIGRhdGEtZGVsZXRlZCB3aGljaCB3aWxsIGFsd2F5cyBoYXZlIHRoZSBzYW1lIHR5cGUuXHJcbiAgICovXHJcbiAgcHVibGljIGNvbmRpdGlvbj86IGZoaXIuRXhwcmVzc2lvbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgVHJpZ2dlckRlZmluaXRpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxUcmlnZ2VyRGVmaW5pdGlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWyd0eXBlJ10pIHsgdGhpcy50eXBlID0gbmV3IGZoaXIuRmhpckNvZGU8VHJpZ2dlclR5cGVDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2UudHlwZX0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy50eXBlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3R5cGUnXSkge1xyXG4gICAgICBpZiAodGhpcy50eXBlKSB7IHRoaXMudHlwZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl90eXBlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudHlwZSA9IG5ldyBmaGlyLkZoaXJDb2RlPFRyaWdnZXJUeXBlQ29kZVR5cGU+KHNvdXJjZS5fdHlwZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnbmFtZSddKSB7IHRoaXMubmFtZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UubmFtZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfbmFtZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLm5hbWUpIHsgdGhpcy5uYW1lLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX25hbWUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5uYW1lID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX25hbWUgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3RpbWluZyddKSB7IHRoaXMudGltaW5nID0gc291cmNlLnRpbWluZzsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd0aW1pbmdUaW1pbmcnXSkgeyB0aGlzLnRpbWluZyA9IG5ldyBmaGlyLlRpbWluZyhzb3VyY2UudGltaW5nVGltaW5nKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd0aW1pbmdSZWZlcmVuY2UnXSkgeyB0aGlzLnRpbWluZyA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UudGltaW5nUmVmZXJlbmNlKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd0aW1pbmdEYXRlJ10pIHsgdGhpcy50aW1pbmcgPSBuZXcgZmhpci5GaGlyRGF0ZSh7dmFsdWU6IHNvdXJjZS50aW1pbmdEYXRlfSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsndGltaW5nRGF0ZVRpbWUnXSkgeyB0aGlzLnRpbWluZyA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS50aW1pbmdEYXRlVGltZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydkYXRhJ10pIHsgdGhpcy5kYXRhID0gc291cmNlLmRhdGEubWFwKCh4KSA9PiBuZXcgZmhpci5EYXRhUmVxdWlyZW1lbnQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5kYXRhID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvbmRpdGlvbiddKSB7IHRoaXMuY29uZGl0aW9uID0gbmV3IGZoaXIuRXhwcmVzc2lvbihzb3VyY2UuY29uZGl0aW9uKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ1RyaWdnZXJEZWZpbml0aW9uJyB9XHJcbiAgICB0aGlzLnZSU1YoJ3R5cGUnLGV4cCwnVHJpZ2dlclR5cGUnLFRyaWdnZXJUeXBlVnNWYWxpZGF0aW9uLCdyJylcclxuICAgIHRoaXMudk9TKCduYW1lJyxleHApXHJcbiAgICB0aGlzLnZPUygndGltaW5nJyxleHApXHJcbiAgICB0aGlzLnZPQSgnZGF0YScsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2NvbmRpdGlvbicsZXhwKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuIl19