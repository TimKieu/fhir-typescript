// <auto-generated/>
// Contents of: hl7.fhir.r4b.core version: 4.3.0
// Minimum TypeScript Version: 3.7
// FHIR Resource: Ingredient
import * as fhir from '../fhir.js';
// @ts-ignore
import { IngredientManufacturerRoleVsValidation } from '../fhirValueSets/IngredientManufacturerRoleVsValidation.js';
// @ts-ignore
import { PublicationStatusVsValidation } from '../fhirValueSets/PublicationStatusVsValidation.js';
/**
 * The organization(s) that manufacture this ingredient. Can be used to indicate:         1) Organizations we are aware of that manufacture this ingredient         2) Specific Manufacturer(s) currently being used         3) Set of organisations allowed to manufacture this ingredient for this product         Users must be clear on the application of context relevant to their use case.
 */
export class IngredientManufacturer extends fhir.BackboneElement {
    /**
     * Default constructor for IngredientManufacturer - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['role'] !== undefined) {
            this.role = new fhir.FhirCode({ value: source.role }, options);
        }
        if (source['_role']) {
            if (this.role) {
                this.role.addExtendedProperties(source._role);
            }
            else {
                this.role = new fhir.FhirCode(source._role, options);
            }
        }
        if (source['manufacturer']) {
            this.manufacturer = new fhir.Reference(source.manufacturer, options);
        }
        else {
            this.manufacturer = null;
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Ingredient.manufacturer';
        }
        iss.push(...this.vOSV('role', exp, 'IngredientManufacturerRole', IngredientManufacturerRoleVsValidation, 'r'));
        iss.push(...this.vRS('manufacturer', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
IngredientManufacturer._fts_dataType = 'IngredientManufacturer';
/**
 * Strength expressed in terms of a reference substance. For when the ingredient strength is additionally expressed as equivalent to the strength of some other closely related substance (e.g. salt vs. base). Reference strength represents the strength (quantitative composition) of the active moiety of the active substance. There are situations when the active substance and active moiety are different, therefore both a strength and a reference strength are needed.
 */
export class IngredientSubstanceStrengthReferenceStrength extends fhir.BackboneElement {
    /**
     * Default constructor for IngredientSubstanceStrengthReferenceStrength - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['substance']) {
            this.substance = new fhir.CodeableReference(source.substance, options);
        }
        if (source['strength']) {
            this.strength = source.strength;
        }
        else if (source['strengthRatio']) {
            this.strength = new fhir.Ratio(source.strengthRatio, options);
        }
        else if (source['strengthRatioRange']) {
            this.strength = new fhir.RatioRange(source.strengthRatioRange, options);
        }
        else {
            this.strength = null;
        }
        if (source['measurementPoint'] !== undefined) {
            this.measurementPoint = new fhir.FhirString({ value: source.measurementPoint }, options);
        }
        if (source['_measurementPoint']) {
            if (this.measurementPoint) {
                this.measurementPoint.addExtendedProperties(source._measurementPoint);
            }
            else {
                this.measurementPoint = new fhir.FhirString(source._measurementPoint, options);
            }
        }
        if (source['country']) {
            this.country = source.country.map((x) => new fhir.CodeableConcept(x, options));
        }
        else {
            this.country = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Ingredient.substance.strength.referenceStrength';
        }
        iss.push(...this.vOS('substance', exp));
        iss.push(...this.vRS('strength', exp));
        iss.push(...this.vOS('measurementPoint', exp));
        iss.push(...this.vOA('country', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
IngredientSubstanceStrengthReferenceStrength._fts_dataType = 'IngredientSubstanceStrengthReferenceStrength';
/**
 * Internal flag to properly serialize choice-type element Ingredient.substance.strength.referenceStrength.strength[x]
 */
IngredientSubstanceStrengthReferenceStrength._fts_strengthIsChoice = true;
/**
 * The quantity of substance in the unit of presentation, or in the volume (or mass) of the single pharmaceutical product or manufactured item. The allowed repetitions do not represent different strengths, but are different representations - mathematically equivalent - of a single strength.
 */
export class IngredientSubstanceStrength extends fhir.BackboneElement {
    /**
     * Default constructor for IngredientSubstanceStrength - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['presentation']) {
            this.presentation = source.presentation;
        }
        else if (source['presentationRatio']) {
            this.presentation = new fhir.Ratio(source.presentationRatio, options);
        }
        else if (source['presentationRatioRange']) {
            this.presentation = new fhir.RatioRange(source.presentationRatioRange, options);
        }
        if (source['textPresentation'] !== undefined) {
            this.textPresentation = new fhir.FhirString({ value: source.textPresentation }, options);
        }
        if (source['_textPresentation']) {
            if (this.textPresentation) {
                this.textPresentation.addExtendedProperties(source._textPresentation);
            }
            else {
                this.textPresentation = new fhir.FhirString(source._textPresentation, options);
            }
        }
        if (source['concentration']) {
            this.concentration = source.concentration;
        }
        else if (source['concentrationRatio']) {
            this.concentration = new fhir.Ratio(source.concentrationRatio, options);
        }
        else if (source['concentrationRatioRange']) {
            this.concentration = new fhir.RatioRange(source.concentrationRatioRange, options);
        }
        if (source['textConcentration'] !== undefined) {
            this.textConcentration = new fhir.FhirString({ value: source.textConcentration }, options);
        }
        if (source['_textConcentration']) {
            if (this.textConcentration) {
                this.textConcentration.addExtendedProperties(source._textConcentration);
            }
            else {
                this.textConcentration = new fhir.FhirString(source._textConcentration, options);
            }
        }
        if (source['measurementPoint'] !== undefined) {
            this.measurementPoint = new fhir.FhirString({ value: source.measurementPoint }, options);
        }
        if (source['_measurementPoint']) {
            if (this.measurementPoint) {
                this.measurementPoint.addExtendedProperties(source._measurementPoint);
            }
            else {
                this.measurementPoint = new fhir.FhirString(source._measurementPoint, options);
            }
        }
        if (source['country']) {
            this.country = source.country.map((x) => new fhir.CodeableConcept(x, options));
        }
        else {
            this.country = [];
        }
        if (source['referenceStrength']) {
            this.referenceStrength = source.referenceStrength.map((x) => new fhir.IngredientSubstanceStrengthReferenceStrength(x, options));
        }
        else {
            this.referenceStrength = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Ingredient.substance.strength';
        }
        iss.push(...this.vOS('presentation', exp));
        iss.push(...this.vOS('textPresentation', exp));
        iss.push(...this.vOS('concentration', exp));
        iss.push(...this.vOS('textConcentration', exp));
        iss.push(...this.vOS('measurementPoint', exp));
        iss.push(...this.vOA('country', exp));
        iss.push(...this.vOA('referenceStrength', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
IngredientSubstanceStrength._fts_dataType = 'IngredientSubstanceStrength';
/**
 * Internal flag to properly serialize choice-type element Ingredient.substance.strength.presentation[x]
 */
IngredientSubstanceStrength._fts_presentationIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element Ingredient.substance.strength.concentration[x]
 */
IngredientSubstanceStrength._fts_concentrationIsChoice = true;
/**
 * The substance that comprises this ingredient.
 */
export class IngredientSubstance extends fhir.BackboneElement {
    /**
     * Default constructor for IngredientSubstance - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableReference(source.code, options);
        }
        else {
            this.code = null;
        }
        if (source['strength']) {
            this.strength = source.strength.map((x) => new fhir.IngredientSubstanceStrength(x, options));
        }
        else {
            this.strength = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Ingredient.substance';
        }
        iss.push(...this.vRS('code', exp));
        iss.push(...this.vOA('strength', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
IngredientSubstance._fts_dataType = 'IngredientSubstance';
/**
 * An ingredient of a manufactured item or pharmaceutical product.
 */
export class Ingredient extends fhir.DomainResource {
    /**
     * Default constructor for Ingredient - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'Ingredient';
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier, options);
        }
        if (source['status'] !== undefined) {
            this.status = new fhir.FhirCode({ value: source.status }, options);
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status, options);
            }
        }
        if (source['for']) {
            this.for = source.for.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.for = [];
        }
        if (source['role']) {
            this.role = new fhir.CodeableConcept(source.role, options);
        }
        else {
            this.role = null;
        }
        if (source['function']) {
            this.function = source.function.map((x) => new fhir.CodeableConcept(x, options));
        }
        else {
            this.function = [];
        }
        if (source['allergenicIndicator'] !== undefined) {
            this.allergenicIndicator = new fhir.FhirBoolean({ value: source.allergenicIndicator }, options);
        }
        if (source['_allergenicIndicator']) {
            if (this.allergenicIndicator) {
                this.allergenicIndicator.addExtendedProperties(source._allergenicIndicator);
            }
            else {
                this.allergenicIndicator = new fhir.FhirBoolean(source._allergenicIndicator, options);
            }
        }
        if (source['manufacturer']) {
            this.manufacturer = source.manufacturer.map((x) => new fhir.IngredientManufacturer(x, options));
        }
        else {
            this.manufacturer = [];
        }
        if (source['substance']) {
            this.substance = new fhir.IngredientSubstance(source.substance, options);
        }
        else {
            this.substance = null;
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Ingredient';
        }
        iss.push(...this.vOS('identifier', exp));
        iss.push(...this.vRSV('status', exp, 'PublicationStatus', PublicationStatusVsValidation, 'r'));
        iss.push(...this.vOA('for', exp));
        iss.push(...this.vRS('role', exp));
        iss.push(...this.vOA('function', exp));
        iss.push(...this.vOS('allergenicIndicator', exp));
        iss.push(...this.vOA('manufacturer', exp));
        iss.push(...this.vRS('substance', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
Ingredient._fts_dataType = 'Ingredient';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW5ncmVkaWVudC5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvSW5ncmVkaWVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsZ0RBQWdEO0FBQ2hELGtDQUFrQztBQUNsQyw0QkFBNEI7QUFFNUIsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFJbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSxzQ0FBc0MsRUFBRSxNQUFNLDREQUE0RCxDQUFDO0FBT3BILGFBQWE7QUFDYixPQUFPLEVBQUUsNkJBQTZCLEVBQUUsTUFBTSxtREFBbUQsQ0FBQztBQTJCbEc7O0dBRUc7QUFDSCxNQUFNLE9BQU8sc0JBQXVCLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFhOUQ7O09BRUc7SUFDSCxZQUFZLFNBQTZDLEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQ25HLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssU0FBUyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQXFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxJQUFJLEVBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztTQUFFO1FBQ3ZJLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQ25CLElBQUksSUFBSSxDQUFDLElBQUksRUFBRTtnQkFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxLQUFNLENBQUMsQ0FBQzthQUFFO2lCQUM3RDtnQkFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBcUMsTUFBTSxDQUFDLEtBQStCLEVBQUUsT0FBTyxDQUFDLENBQUM7YUFBRTtTQUM3SDtRQUNELElBQUksTUFBTSxDQUFDLGNBQWMsQ0FBQyxFQUFFO1lBQUUsSUFBSSxD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LENBQUM7O0FBcEZEOztHQUVHO0FBQzZCLHdCQUFhLEdBQVUsWUFBWSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0Yi5jb3JlIHZlcnNpb246IDQuMy4wXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogSW5ncmVkaWVudFxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgSW5ncmVkaWVudE1hbnVmYWN0dXJlclJvbGVDb2RlcywgIEluZ3JlZGllbnRNYW51ZmFjdHVyZXJSb2xlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0luZ3JlZGllbnRNYW51ZmFjdHVyZXJSb2xlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEluZ3JlZGllbnRNYW51ZmFjdHVyZXJSb2xlVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9JbmdyZWRpZW50TWFudWZhY3R1cmVyUm9sZVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ291bnRyeUNvZGVzLCAgQ291bnRyeUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db3VudHJ5Q29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvdW50cnlWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvdW50cnlWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFB1YmxpY2F0aW9uU3RhdHVzQ29kZXMsICBQdWJsaWNhdGlvblN0YXR1c0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9QdWJsaWNhdGlvblN0YXR1c0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBQdWJsaWNhdGlvblN0YXR1c1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUHVibGljYXRpb25TdGF0dXNWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEluZ3JlZGllbnRSb2xlQ29kZXMsICBJbmdyZWRpZW50Um9sZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9JbmdyZWRpZW50Um9sZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBJbmdyZWRpZW50Um9sZVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvSW5ncmVkaWVudFJvbGVWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEluZ3JlZGllbnRGdW5jdGlvbkNvZGVzLCAgSW5ncmVkaWVudEZ1bmN0aW9uQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0luZ3JlZGllbnRGdW5jdGlvbkNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBJbmdyZWRpZW50RnVuY3Rpb25Wc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0luZ3JlZGllbnRGdW5jdGlvblZzVmFsaWRhdGlvbi5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBJbmdyZWRpZW50TWFudWZhY3R1cmVyIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEluZ3JlZGllbnRNYW51ZmFjdHVyZXJBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgd2F5IGluIHdoaWNoIHRoaXMgbWFudWZhY3R1cmVyIGlzIGFzc29jaWF0ZWQgd2l0aCB0aGUgaW5ncmVkaWVudC4gRm9yIGV4YW1wbGUgd2hldGhlciBpdCBpcyBhIHBvc3NpYmxlIG9uZSAob3RoZXJzIGFsbG93ZWQpLCBvciBhbiBleGNsdXNpdmUgYXV0aG9yaXplZCBvbmUgZm9yIHRoaXMgaW5ncmVkaWVudC4gTm90ZSB0aGF0IHRoaXMgaXMgbm90IHRoZSBtYW51ZmFjdHVyaW5nIHByb2Nlc3Mgcm9sZS5cclxuICAgKi9cclxuICByb2xlPzogZmhpci5GaGlyQ29kZTxJbmdyZWRpZW50TWFudWZhY3R1cmVyUm9sZUNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBJbmdyZWRpZW50Lm1hbnVmYWN0dXJlci5yb2xlXHJcbiAgICovXHJcbiAgX3JvbGU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEFuIG9yZ2FuaXphdGlvbiB0aGF0IG1hbnVmYWN0dXJlcyB0aGlzIGluZ3JlZGllbnQuXHJcbiAgICovXHJcbiAgbWFudWZhY3R1cmVyOiBmaGlyLlJlZmVyZW5jZUFyZ3N8bnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBvcmdhbml6YXRpb24ocykgdGhhdCBtYW51ZmFjdHVyZSB0aGlzIGluZ3JlZGllbnQuIENhbiBiZSB1c2VkIHRvIGluZGljYXRlOiAgICAgICAgIDEpIE9yZ2FuaXphdGlvbnMgd2UgYXJlIGF3YXJlIG9mIHRoYXQgbWFudWZhY3R1cmUgdGhpcyBpbmdyZWRpZW50ICAgICAgICAgMikgU3BlY2lmaWMgTWFudWZhY3R1cmVyKHMpIGN1cnJlbnRseSBiZWluZyB1c2VkICAgICAgICAgMykgU2V0IG9mIG9yZ2FuaXNhdGlvbnMgYWxsb3dlZCB0byBtYW51ZmFjdHVyZSB0aGlzIGluZ3JlZGllbnQgZm9yIHRoaXMgcHJvZHVjdCAgICAgICAgIFVzZXJzIG11c3QgYmUgY2xlYXIgb24gdGhlIGFwcGxpY2F0aW9uIG9mIGNvbnRleHQgcmVsZXZhbnQgdG8gdGhlaXIgdXNlIGNhc2UuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgSW5ncmVkaWVudE1hbnVmYWN0dXJlciBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0luZ3JlZGllbnRNYW51ZmFjdHVyZXInO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB3YXkgaW4gd2hpY2ggdGhpcyBtYW51ZmFjdHVyZXIgaXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBpbmdyZWRpZW50LiBGb3IgZXhhbXBsZSB3aGV0aGVyIGl0IGlzIGEgcG9zc2libGUgb25lIChvdGhlcnMgYWxsb3dlZCksIG9yIGFuIGV4Y2x1c2l2ZSBhdXRob3JpemVkIG9uZSBmb3IgdGhpcyBpbmdyZWRpZW50LiBOb3RlIHRoYXQgdGhpcyBpcyBub3QgdGhlIG1hbnVmYWN0dXJpbmcgcHJvY2VzcyByb2xlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByb2xlPzogZmhpci5GaGlyQ29kZTxJbmdyZWRpZW50TWFudWZhY3R1cmVyUm9sZUNvZGVUeXBlPnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQW4gb3JnYW5pemF0aW9uIHRoYXQgbWFudWZhY3R1cmVzIHRoaXMgaW5ncmVkaWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgbWFudWZhY3R1cmVyOiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEluZ3JlZGllbnRNYW51ZmFjdHVyZXIgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxJbmdyZWRpZW50TWFudWZhY3R1cmVyQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3JvbGUnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMucm9sZSA9IG5ldyBmaGlyLkZoaXJDb2RlPEluZ3JlZGllbnRNYW51ZmFjdHVyZXJSb2xlQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnJvbGV9LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3JvbGUnXSkge1xyXG4gICAgICBpZiAodGhpcy5yb2xlKSB7IHRoaXMucm9sZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9yb2xlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMucm9sZSA9IG5ldyBmaGlyLkZoaXJDb2RlPEluZ3JlZGllbnRNYW51ZmFjdHVyZXJSb2xlQ29kZVR5cGU+KHNvdXJjZS5fcm9sZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnbWFudWZhY3R1cmVyJ10pIHsgdGhpcy5tYW51ZmFjdHVyZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLm1hbnVmYWN0dXJlciwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm1hbnVmYWN0dXJlciA9IG51bGw7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdJbmdyZWRpZW50Lm1hbnVmYWN0dXJlcicgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1NWKCdyb2xlJyxleHAsJ0luZ3JlZGllbnRNYW51ZmFjdHVyZXJSb2xlJyxJbmdyZWRpZW50TWFudWZhY3R1cmVyUm9sZVZzVmFsaWRhdGlvbiwncicpKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdtYW51ZmFjdHVyZXInLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEluZ3JlZGllbnRTdWJzdGFuY2VTdHJlbmd0aFJlZmVyZW5jZVN0cmVuZ3RoIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEluZ3JlZGllbnRTdWJzdGFuY2VTdHJlbmd0aFJlZmVyZW5jZVN0cmVuZ3RoQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVsZXZhbnQgcmVmZXJlbmNlIHN1YnN0YW5jZS5cclxuICAgKi9cclxuICBzdWJzdGFuY2U/OiBmaGlyLkNvZGVhYmxlUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU3RyZW5ndGggZXhwcmVzc2VkIGluIHRlcm1zIG9mIGEgcmVmZXJlbmNlIHN1YnN0YW5jZS5cclxuICAgKi9cclxuICBzdHJlbmd0aD86IGZoaXIuUmF0aW98Zmhpci5SYXRpb1JhbmdlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTdHJlbmd0aCBleHByZXNzZWQgaW4gdGVybXMgb2YgYSByZWZlcmVuY2Ugc3Vic3RhbmNlLlxyXG4gICAqL1xyXG4gIHN0cmVuZ3RoUmF0aW8/OiBmaGlyLlJhdGlvQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU3RyZW5ndGggZXhwcmVzc2VkIGluIHRlcm1zIG9mIGEgcmVmZXJlbmNlIHN1YnN0YW5jZS5cclxuICAgKi9cclxuICBzdHJlbmd0aFJhdGlvUmFuZ2U/OiBmaGlyLlJhdGlvUmFuZ2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBGb3Igd2hlbiBzdHJlbmd0aCBpcyBtZWFzdXJlZCBhdCBhIHBhcnRpY3VsYXIgcG9pbnQgb3IgZGlzdGFuY2UuXHJcbiAgICovXHJcbiAgbWVhc3VyZW1lbnRQb2ludD86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBJbmdyZWRpZW50LnN1YnN0YW5jZS5zdHJlbmd0aC5yZWZlcmVuY2VTdHJlbmd0aC5tZWFzdXJlbWVudFBvaW50XHJcbiAgICovXHJcbiAgX21lYXN1cmVtZW50UG9pbnQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjb3VudHJ5IG9yIGNvdW50cmllcyBmb3Igd2hpY2ggdGhlIHN0cmVuZ3RoIHJhbmdlIGFwcGxpZXMuXHJcbiAgICovXHJcbiAgY291bnRyeT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFN0cmVuZ3RoIGV4cHJlc3NlZCBpbiB0ZXJtcyBvZiBhIHJlZmVyZW5jZSBzdWJzdGFuY2UuIEZvciB3aGVuIHRoZSBpbmdyZWRpZW50IHN0cmVuZ3RoIGlzIGFkZGl0aW9uYWxseSBleHByZXNzZWQgYXMgZXF1aXZhbGVudCB0byB0aGUgc3RyZW5ndGggb2Ygc29tZSBvdGhlciBjbG9zZWx5IHJlbGF0ZWQgc3Vic3RhbmNlIChlLmcuIHNhbHQgdnMuIGJhc2UpLiBSZWZlcmVuY2Ugc3RyZW5ndGggcmVwcmVzZW50cyB0aGUgc3RyZW5ndGggKHF1YW50aXRhdGl2ZSBjb21wb3NpdGlvbikgb2YgdGhlIGFjdGl2ZSBtb2lldHkgb2YgdGhlIGFjdGl2ZSBzdWJzdGFuY2UuIFRoZXJlIGFyZSBzaXR1YXRpb25zIHdoZW4gdGhlIGFjdGl2ZSBzdWJzdGFuY2UgYW5kIGFjdGl2ZSBtb2lldHkgYXJlIGRpZmZlcmVudCwgdGhlcmVmb3JlIGJvdGggYSBzdHJlbmd0aCBhbmQgYSByZWZlcmVuY2Ugc3RyZW5ndGggYXJlIG5lZWRlZC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBJbmdyZWRpZW50U3Vic3RhbmNlU3RyZW5ndGhSZWZlcmVuY2VTdHJlbmd0aCBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0luZ3JlZGllbnRTdWJzdGFuY2VTdHJlbmd0aFJlZmVyZW5jZVN0cmVuZ3RoJztcclxuICAvKipcclxuICAgKiBSZWxldmFudCByZWZlcmVuY2Ugc3Vic3RhbmNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdWJzdGFuY2U/OiBmaGlyLkNvZGVhYmxlUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTdHJlbmd0aCBleHByZXNzZWQgaW4gdGVybXMgb2YgYSByZWZlcmVuY2Ugc3Vic3RhbmNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdHJlbmd0aDogKGZoaXIuUmF0aW98Zmhpci5SYXRpb1JhbmdlKXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgSW5ncmVkaWVudC5zdWJzdGFuY2Uuc3RyZW5ndGgucmVmZXJlbmNlU3RyZW5ndGguc3RyZW5ndGhbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfc3RyZW5ndGhJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBGb3Igd2hlbiBzdHJlbmd0aCBpcyBtZWFzdXJlZCBhdCBhIHBhcnRpY3VsYXIgcG9pbnQgb3IgZGlzdGFuY2UuXHJcbiAgICovXHJcbiAgcHVibGljIG1lYXN1cmVtZW50UG9pbnQ/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjb3VudHJ5IG9yIGNvdW50cmllcyBmb3Igd2hpY2ggdGhlIHN0cmVuZ3RoIHJhbmdlIGFwcGxpZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGNvdW50cnk6IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgSW5ncmVkaWVudFN1YnN0YW5jZVN0cmVuZ3RoUmVmZXJlbmNlU3RyZW5ndGggLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxJbmdyZWRpZW50U3Vic3RhbmNlU3RyZW5ndGhSZWZlcmVuY2VTdHJlbmd0aEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydzdWJzdGFuY2UnXSkgeyB0aGlzLnN1YnN0YW5jZSA9IG5ldyBmaGlyLkNvZGVhYmxlUmVmZXJlbmNlKHNvdXJjZS5zdWJzdGFuY2UsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydzdHJlbmd0aCddKSB7IHRoaXMuc3RyZW5ndGggPSBzb3VyY2Uuc3RyZW5ndGg7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnc3RyZW5ndGhSYXRpbyddKSB7IHRoaXMuc3RyZW5ndGggPSBuZXcgZmhpci5SYXRpbyhzb3VyY2Uuc3RyZW5ndGhSYXRpbywgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnc3RyZW5ndGhSYXRpb1JhbmdlJ10pIHsgdGhpcy5zdHJlbmd0aCA9IG5ldyBmaGlyLlJhdGlvUmFuZ2Uoc291cmNlLnN0cmVuZ3RoUmF0aW9SYW5nZSwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0cmVuZ3RoID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbWVhc3VyZW1lbnRQb2ludCddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5tZWFzdXJlbWVudFBvaW50ID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5tZWFzdXJlbWVudFBvaW50fSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19tZWFzdXJlbWVudFBvaW50J10pIHtcclxuICAgICAgaWYgKHRoaXMubWVhc3VyZW1lbnRQb2ludCkgeyB0aGlzLm1lYXN1cmVtZW50UG9pbnQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbWVhc3VyZW1lbnRQb2ludCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLm1lYXN1cmVtZW50UG9pbnQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fbWVhc3VyZW1lbnRQb2ludCBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnY291bnRyeSddKSB7IHRoaXMuY291bnRyeSA9IHNvdXJjZS5jb3VudHJ5Lm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY291bnRyeSA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnSW5ncmVkaWVudC5zdWJzdGFuY2Uuc3RyZW5ndGgucmVmZXJlbmNlU3RyZW5ndGgnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdzdWJzdGFuY2UnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ3N0cmVuZ3RoJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdtZWFzdXJlbWVudFBvaW50JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdjb3VudHJ5JyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBJbmdyZWRpZW50U3Vic3RhbmNlU3RyZW5ndGggdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgSW5ncmVkaWVudFN1YnN0YW5jZVN0cmVuZ3RoQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIHF1YW50aXR5IG9mIHN1YnN0YW5jZSBpbiB0aGUgdW5pdCBvZiBwcmVzZW50YXRpb24sIG9yIGluIHRoZSB2b2x1bWUgKG9yIG1hc3MpIG9mIHRoZSBzaW5nbGUgcGhhcm1hY2V1dGljYWwgcHJvZHVjdCBvciBtYW51ZmFjdHVyZWQgaXRlbS4gVW5pdCBvZiBwcmVzZW50YXRpb24gcmVmZXJzIHRvIHRoZSBxdWFudGl0eSB0aGF0IHRoZSBpdGVtIG9jY3VycyBpbiBlLmcuIGEgc3RyZW5ndGggcGVyIHRhYmxldCBzaXplLCBwZXJoYXBzICdwZXIgMjBtZycgKHRoZSBzaXplIG9mIHRoZSB0YWJsZXQpLiBJdCBpcyBub3QgZ2VuZXJhbGx5IG5vcm1hbGl6ZWQgYXMgYSB1bml0YXJ5IHVuaXQsIHdoaWNoIHdvdWxkIGJlICdwZXIgbWcnKS5cclxuICAgKi9cclxuICBwcmVzZW50YXRpb24/OiBmaGlyLlJhdGlvfGZoaXIuUmF0aW9SYW5nZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHF1YW50aXR5IG9mIHN1YnN0YW5jZSBpbiB0aGUgdW5pdCBvZiBwcmVzZW50YXRpb24sIG9yIGluIHRoZSB2b2x1bWUgKG9yIG1hc3MpIG9mIHRoZSBzaW5nbGUgcGhhcm1hY2V1dGljYWwgcHJvZHVjdCBvciBtYW51ZmFjdHVyZWQgaXRlbS4gVW5pdCBvZiBwcmVzZW50YXRpb24gcmVmZXJzIHRvIHRoZSBxdWFudGl0eSB0aGF0IHRoZSBpdGVtIG9jY3VycyBpbiBlLmcuIGEgc3RyZW5ndGggcGVyIHRhYmxldCBzaXplLCBwZXJoYXBzICdwZXIgMjBtZycgKHRoZSBzaXplIG9mIHRoZSB0YWJsZXQpLiBJdCBpcyBub3QgZ2VuZXJhbGx5IG5vcm1hbGl6ZWQgYXMgYSB1bml0YXJ5IHVuaXQsIHdoaWNoIHdvdWxkIGJlICdwZXIgbWcnKS5cclxuICAgKi9cclxuICBwcmVzZW50YXRpb25SYXRpbz86IGZoaXIuUmF0aW9BcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcXVhbnRpdHkgb2Ygc3Vic3RhbmNlIGluIHRoZSB1bml0IG9mIHByZXNlbnRhdGlvbiwgb3IgaW4gdGhlIHZvbHVtZSAob3IgbWFzcykgb2YgdGhlIHNpbmdsZSBwaGFybWFjZXV0aWNhbCBwcm9kdWN0IG9yIG1hbnVmYWN0dXJlZCBpdGVtLiBVbml0IG9mIHByZXNlbnRhdGlvbiByZWZlcnMgdG8gdGhlIHF1YW50aXR5IHRoYXQgdGhlIGl0ZW0gb2NjdXJzIGluIGUuZy4gYSBzdHJlbmd0aCBwZXIgdGFibGV0IHNpemUsIHBlcmhhcHMgJ3BlciAyMG1nJyAodGhlIHNpemUgb2YgdGhlIHRhYmxldCkuIEl0IGlzIG5vdCBnZW5lcmFsbHkgbm9ybWFsaXplZCBhcyBhIHVuaXRhcnkgdW5pdCwgd2hpY2ggd291bGQgYmUgJ3BlciBtZycpLlxyXG4gICAqL1xyXG4gIHByZXNlbnRhdGlvblJhdGlvUmFuZ2U/OiBmaGlyLlJhdGlvUmFuZ2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHRleHR1YWwgcmVwcmVzZW50aW9uIG9mIGVpdGhlciB0aGUgd2hvbGUgb2YgdGhlIHByZXNlbnRhdGlvbiBzdHJlbmd0aCBvciBhIHBhcnQgb2YgaXQgLSB3aXRoIHRoZSByZXN0IGJlaW5nIGluIFN0cmVuZ3RoLnByZXNlbnRhdGlvbiBhcyBhIHJhdGlvLlxyXG4gICAqL1xyXG4gIHRleHRQcmVzZW50YXRpb24/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogSW5ncmVkaWVudC5zdWJzdGFuY2Uuc3RyZW5ndGgudGV4dFByZXNlbnRhdGlvblxyXG4gICAqL1xyXG4gIF90ZXh0UHJlc2VudGF0aW9uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgc3RyZW5ndGggcGVyIHVuaXRhcnkgdm9sdW1lIChvciBtYXNzKS5cclxuICAgKi9cclxuICBjb25jZW50cmF0aW9uPzogZmhpci5SYXRpb3xmaGlyLlJhdGlvUmFuZ2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzdHJlbmd0aCBwZXIgdW5pdGFyeSB2b2x1bWUgKG9yIG1hc3MpLlxyXG4gICAqL1xyXG4gIGNvbmNlbnRyYXRpb25SYXRpbz86IGZoaXIuUmF0aW9BcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc3RyZW5ndGggcGVyIHVuaXRhcnkgdm9sdW1lIChvciBtYXNzKS5cclxuICAgKi9cclxuICBjb25jZW50cmF0aW9uUmF0aW9SYW5nZT86IGZoaXIuUmF0aW9SYW5nZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgdGV4dHVhbCByZXByZXNlbnRpb24gb2YgZWl0aGVyIHRoZSB3aG9sZSBvZiB0aGUgY29uY2VudHJhdGlvbiBzdHJlbmd0aCBvciBhIHBhcnQgb2YgaXQgLSB3aXRoIHRoZSByZXN0IGJlaW5nIGluIFN0cmVuZ3RoLmNvbmNlbnRyYXRpb24gYXMgYSByYXRpby5cclxuICAgKi9cclxuICB0ZXh0Q29uY2VudHJhdGlvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBJbmdyZWRpZW50LnN1YnN0YW5jZS5zdHJlbmd0aC50ZXh0Q29uY2VudHJhdGlvblxyXG4gICAqL1xyXG4gIF90ZXh0Q29uY2VudHJhdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogRm9yIHdoZW4gc3RyZW5ndGggaXMgbWVhc3VyZWQgYXQgYSBwYXJ0aWN1bGFyIHBvaW50IG9yIGRpc3RhbmNlLiBUaGVyZSBhcmUgcHJvZHVjdHMgd2hlcmUgc3RyZW5ndGggaXMgbWVhc3VyZWQgYXQgYSBwYXJ0aWN1bGFyIHBvaW50LiBGb3IgZXhhbXBsZSwgdGhlIHN0cmVuZ3RoIG9mIHRoZSBpbmdyZWRpZW50IGluIHNvbWUgaW5oYWxlcnMgaXMgbWVhc3VyZWQgYXQgYSBwYXJ0aWN1bGFyIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSBwb2ludCBvZiBhZXJvc29saXphdGlvbi5cclxuICAgKi9cclxuICBtZWFzdXJlbWVudFBvaW50PzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEluZ3JlZGllbnQuc3Vic3RhbmNlLnN0cmVuZ3RoLm1lYXN1cmVtZW50UG9pbnRcclxuICAgKi9cclxuICBfbWVhc3VyZW1lbnRQb2ludD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNvdW50cnkgb3IgY291bnRyaWVzIGZvciB3aGljaCB0aGUgc3RyZW5ndGggcmFuZ2UgYXBwbGllcy5cclxuICAgKi9cclxuICBjb3VudHJ5PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFN0cmVuZ3RoIGV4cHJlc3NlZCBpbiB0ZXJtcyBvZiBhIHJlZmVyZW5jZSBzdWJzdGFuY2UuIEZvciB3aGVuIHRoZSBpbmdyZWRpZW50IHN0cmVuZ3RoIGlzIGFkZGl0aW9uYWxseSBleHByZXNzZWQgYXMgZXF1aXZhbGVudCB0byB0aGUgc3RyZW5ndGggb2Ygc29tZSBvdGhlciBjbG9zZWx5IHJlbGF0ZWQgc3Vic3RhbmNlIChlLmcuIHNhbHQgdnMuIGJhc2UpLiBSZWZlcmVuY2Ugc3RyZW5ndGggcmVwcmVzZW50cyB0aGUgc3RyZW5ndGggKHF1YW50aXRhdGl2ZSBjb21wb3NpdGlvbikgb2YgdGhlIGFjdGl2ZSBtb2lldHkgb2YgdGhlIGFjdGl2ZSBzdWJzdGFuY2UuIFRoZXJlIGFyZSBzaXR1YXRpb25zIHdoZW4gdGhlIGFjdGl2ZSBzdWJzdGFuY2UgYW5kIGFjdGl2ZSBtb2lldHkgYXJlIGRpZmZlcmVudCwgdGhlcmVmb3JlIGJvdGggYSBzdHJlbmd0aCBhbmQgYSByZWZlcmVuY2Ugc3RyZW5ndGggYXJlIG5lZWRlZC5cclxuICAgKi9cclxuICByZWZlcmVuY2VTdHJlbmd0aD86IGZoaXIuSW5ncmVkaWVudFN1YnN0YW5jZVN0cmVuZ3RoUmVmZXJlbmNlU3RyZW5ndGhBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlIHF1YW50aXR5IG9mIHN1YnN0YW5jZSBpbiB0aGUgdW5pdCBvZiBwcmVzZW50YXRpb24sIG9yIGluIHRoZSB2b2x1bWUgKG9yIG1hc3MpIG9mIHRoZSBzaW5nbGUgcGhhcm1hY2V1dGljYWwgcHJvZHVjdCBvciBtYW51ZmFjdHVyZWQgaXRlbS4gVGhlIGFsbG93ZWQgcmVwZXRpdGlvbnMgZG8gbm90IHJlcHJlc2VudCBkaWZmZXJlbnQgc3RyZW5ndGhzLCBidXQgYXJlIGRpZmZlcmVudCByZXByZXNlbnRhdGlvbnMgLSBtYXRoZW1hdGljYWxseSBlcXVpdmFsZW50IC0gb2YgYSBzaW5nbGUgc3RyZW5ndGguXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgSW5ncmVkaWVudFN1YnN0YW5jZVN0cmVuZ3RoIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnSW5ncmVkaWVudFN1YnN0YW5jZVN0cmVuZ3RoJztcclxuICAvKipcclxuICAgKiBUaGUgcXVhbnRpdHkgb2Ygc3Vic3RhbmNlIGluIHRoZSB1bml0IG9mIHByZXNlbnRhdGlvbiwgb3IgaW4gdGhlIHZvbHVtZSAob3IgbWFzcykgb2YgdGhlIHNpbmdsZSBwaGFybWFjZXV0aWNhbCBwcm9kdWN0IG9yIG1hbnVmYWN0dXJlZCBpdGVtLiBVbml0IG9mIHByZXNlbnRhdGlvbiByZWZlcnMgdG8gdGhlIHF1YW50aXR5IHRoYXQgdGhlIGl0ZW0gb2NjdXJzIGluIGUuZy4gYSBzdHJlbmd0aCBwZXIgdGFibGV0IHNpemUsIHBlcmhhcHMgJ3BlciAyMG1nJyAodGhlIHNpemUgb2YgdGhlIHRhYmxldCkuIEl0IGlzIG5vdCBnZW5lcmFsbHkgbm9ybWFsaXplZCBhcyBhIHVuaXRhcnkgdW5pdCwgd2hpY2ggd291bGQgYmUgJ3BlciBtZycpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcmVzZW50YXRpb24/OiAoZmhpci5SYXRpb3xmaGlyLlJhdGlvUmFuZ2UpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IEluZ3JlZGllbnQuc3Vic3RhbmNlLnN0cmVuZ3RoLnByZXNlbnRhdGlvblt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c19wcmVzZW50YXRpb25Jc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBBIHRleHR1YWwgcmVwcmVzZW50aW9uIG9mIGVpdGhlciB0aGUgd2hvbGUgb2YgdGhlIHByZXNlbnRhdGlvbiBzdHJlbmd0aCBvciBhIHBhcnQgb2YgaXQgLSB3aXRoIHRoZSByZXN0IGJlaW5nIGluIFN0cmVuZ3RoLnByZXNlbnRhdGlvbiBhcyBhIHJhdGlvLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0ZXh0UHJlc2VudGF0aW9uPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc3RyZW5ndGggcGVyIHVuaXRhcnkgdm9sdW1lIChvciBtYXNzKS5cclxuICAgKi9cclxuICBwdWJsaWMgY29uY2VudHJhdGlvbj86IChmaGlyLlJhdGlvfGZoaXIuUmF0aW9SYW5nZSl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgSW5ncmVkaWVudC5zdWJzdGFuY2Uuc3RyZW5ndGguY29uY2VudHJhdGlvblt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c19jb25jZW50cmF0aW9uSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogQSB0ZXh0dWFsIHJlcHJlc2VudGlvbiBvZiBlaXRoZXIgdGhlIHdob2xlIG9mIHRoZSBjb25jZW50cmF0aW9uIHN0cmVuZ3RoIG9yIGEgcGFydCBvZiBpdCAtIHdpdGggdGhlIHJlc3QgYmVpbmcgaW4gU3RyZW5ndGguY29uY2VudHJhdGlvbiBhcyBhIHJhdGlvLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0ZXh0Q29uY2VudHJhdGlvbj86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRm9yIHdoZW4gc3RyZW5ndGggaXMgbWVhc3VyZWQgYXQgYSBwYXJ0aWN1bGFyIHBvaW50IG9yIGRpc3RhbmNlLiBUaGVyZSBhcmUgcHJvZHVjdHMgd2hlcmUgc3RyZW5ndGggaXMgbWVhc3VyZWQgYXQgYSBwYXJ0aWN1bGFyIHBvaW50LiBGb3IgZXhhbXBsZSwgdGhlIHN0cmVuZ3RoIG9mIHRoZSBpbmdyZWRpZW50IGluIHNvbWUgaW5oYWxlcnMgaXMgbWVhc3VyZWQgYXQgYSBwYXJ0aWN1bGFyIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSBwb2ludCBvZiBhZXJvc29saXphdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgbWVhc3VyZW1lbnRQb2ludD86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNvdW50cnkgb3IgY291bnRyaWVzIGZvciB3aGljaCB0aGUgc3RyZW5ndGggcmFuZ2UgYXBwbGllcy5cclxuICAgKi9cclxuICBwdWJsaWMgY291bnRyeTogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBTdHJlbmd0aCBleHByZXNzZWQgaW4gdGVybXMgb2YgYSByZWZlcmVuY2Ugc3Vic3RhbmNlLiBGb3Igd2hlbiB0aGUgaW5ncmVkaWVudCBzdHJlbmd0aCBpcyBhZGRpdGlvbmFsbHkgZXhwcmVzc2VkIGFzIGVxdWl2YWxlbnQgdG8gdGhlIHN0cmVuZ3RoIG9mIHNvbWUgb3RoZXIgY2xvc2VseSByZWxhdGVkIHN1YnN0YW5jZSAoZS5nLiBzYWx0IHZzLiBiYXNlKS4gUmVmZXJlbmNlIHN0cmVuZ3RoIHJlcHJlc2VudHMgdGhlIHN0cmVuZ3RoIChxdWFudGl0YXRpdmUgY29tcG9zaXRpb24pIG9mIHRoZSBhY3RpdmUgbW9pZXR5IG9mIHRoZSBhY3RpdmUgc3Vic3RhbmNlLiBUaGVyZSBhcmUgc2l0dWF0aW9ucyB3aGVuIHRoZSBhY3RpdmUgc3Vic3RhbmNlIGFuZCBhY3RpdmUgbW9pZXR5IGFyZSBkaWZmZXJlbnQsIHRoZXJlZm9yZSBib3RoIGEgc3RyZW5ndGggYW5kIGEgcmVmZXJlbmNlIHN0cmVuZ3RoIGFyZSBuZWVkZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHJlZmVyZW5jZVN0cmVuZ3RoOiBmaGlyLkluZ3JlZGllbnRTdWJzdGFuY2VTdHJlbmd0aFJlZmVyZW5jZVN0cmVuZ3RoW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgSW5ncmVkaWVudFN1YnN0YW5jZVN0cmVuZ3RoIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8SW5ncmVkaWVudFN1YnN0YW5jZVN0cmVuZ3RoQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3ByZXNlbnRhdGlvbiddKSB7IHRoaXMucHJlc2VudGF0aW9uID0gc291cmNlLnByZXNlbnRhdGlvbjsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydwcmVzZW50YXRpb25SYXRpbyddKSB7IHRoaXMucHJlc2VudGF0aW9uID0gbmV3IGZoaXIuUmF0aW8oc291cmNlLnByZXNlbnRhdGlvblJhdGlvLCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydwcmVzZW50YXRpb25SYXRpb1JhbmdlJ10pIHsgdGhpcy5wcmVzZW50YXRpb24gPSBuZXcgZmhpci5SYXRpb1JhbmdlKHNvdXJjZS5wcmVzZW50YXRpb25SYXRpb1JhbmdlLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndGV4dFByZXNlbnRhdGlvbiddICE9PSB1bmRlZmluZWQpIHsgdGhpcy50ZXh0UHJlc2VudGF0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS50ZXh0UHJlc2VudGF0aW9ufSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ190ZXh0UHJlc2VudGF0aW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMudGV4dFByZXNlbnRhdGlvbikgeyB0aGlzLnRleHRQcmVzZW50YXRpb24uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdGV4dFByZXNlbnRhdGlvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnRleHRQcmVzZW50YXRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fdGV4dFByZXNlbnRhdGlvbiBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29uY2VudHJhdGlvbiddKSB7IHRoaXMuY29uY2VudHJhdGlvbiA9IHNvdXJjZS5jb25jZW50cmF0aW9uOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2NvbmNlbnRyYXRpb25SYXRpbyddKSB7IHRoaXMuY29uY2VudHJhdGlvbiA9IG5ldyBmaGlyLlJhdGlvKHNvdXJjZS5jb25jZW50cmF0aW9uUmF0aW8sIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2NvbmNlbnRyYXRpb25SYXRpb1JhbmdlJ10pIHsgdGhpcy5jb25jZW50cmF0aW9uID0gbmV3IGZoaXIuUmF0aW9SYW5nZShzb3VyY2UuY29uY2VudHJhdGlvblJhdGlvUmFuZ2UsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWyd0ZXh0Q29uY2VudHJhdGlvbiddICE9PSB1bmRlZmluZWQpIHsgdGhpcy50ZXh0Q29uY2VudHJhdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UudGV4dENvbmNlbnRyYXRpb259LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3RleHRDb25jZW50cmF0aW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMudGV4dENvbmNlbnRyYXRpb24pIHsgdGhpcy50ZXh0Q29uY2VudHJhdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl90ZXh0Q29uY2VudHJhdGlvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnRleHRDb25jZW50cmF0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3RleHRDb25jZW50cmF0aW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydtZWFzdXJlbWVudFBvaW50J10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLm1lYXN1cmVtZW50UG9pbnQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLm1lYXN1cmVtZW50UG9pbnR9LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX21lYXN1cmVtZW50UG9pbnQnXSkge1xyXG4gICAgICBpZiAodGhpcy5tZWFzdXJlbWVudFBvaW50KSB7IHRoaXMubWVhc3VyZW1lbnRQb2ludC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9tZWFzdXJlbWVudFBvaW50ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubWVhc3VyZW1lbnRQb2ludCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9tZWFzdXJlbWVudFBvaW50IGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydjb3VudHJ5J10pIHsgdGhpcy5jb3VudHJ5ID0gc291cmNlLmNvdW50cnkubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb3VudHJ5ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3JlZmVyZW5jZVN0cmVuZ3RoJ10pIHsgdGhpcy5yZWZlcmVuY2VTdHJlbmd0aCA9IHNvdXJjZS5yZWZlcmVuY2VTdHJlbmd0aC5tYXAoKHgpID0+IG5ldyBmaGlyLkluZ3JlZGllbnRTdWJzdGFuY2VTdHJlbmd0aFJlZmVyZW5jZVN0cmVuZ3RoKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVmZXJlbmNlU3RyZW5ndGggPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0luZ3JlZGllbnQuc3Vic3RhbmNlLnN0cmVuZ3RoJyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygncHJlc2VudGF0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCd0ZXh0UHJlc2VudGF0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdjb25jZW50cmF0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCd0ZXh0Q29uY2VudHJhdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnbWVhc3VyZW1lbnRQb2ludCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnY291bnRyeScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgncmVmZXJlbmNlU3RyZW5ndGgnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEluZ3JlZGllbnRTdWJzdGFuY2UgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgSW5ncmVkaWVudFN1YnN0YW5jZUFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEEgY29kZSBvciBmdWxsIHJlc291cmNlIHRoYXQgcmVwcmVzZW50cyB0aGUgaW5ncmVkaWVudCdzIHN1YnN0YW5jZS5cclxuICAgKi9cclxuICBjb2RlOiBmaGlyLkNvZGVhYmxlUmVmZXJlbmNlQXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBxdWFudGl0eSBvZiBzdWJzdGFuY2UgaW4gdGhlIHVuaXQgb2YgcHJlc2VudGF0aW9uLCBvciBpbiB0aGUgdm9sdW1lIChvciBtYXNzKSBvZiB0aGUgc2luZ2xlIHBoYXJtYWNldXRpY2FsIHByb2R1Y3Qgb3IgbWFudWZhY3R1cmVkIGl0ZW0uIFRoZSBhbGxvd2VkIHJlcGV0aXRpb25zIGRvIG5vdCByZXByZXNlbnQgZGlmZmVyZW50IHN0cmVuZ3RocywgYnV0IGFyZSBkaWZmZXJlbnQgcmVwcmVzZW50YXRpb25zIC0gbWF0aGVtYXRpY2FsbHkgZXF1aXZhbGVudCAtIG9mIGEgc2luZ2xlIHN0cmVuZ3RoLlxyXG4gICAqL1xyXG4gIHN0cmVuZ3RoPzogZmhpci5JbmdyZWRpZW50U3Vic3RhbmNlU3RyZW5ndGhBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlIHN1YnN0YW5jZSB0aGF0IGNvbXByaXNlcyB0aGlzIGluZ3JlZGllbnQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgSW5ncmVkaWVudFN1YnN0YW5jZSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0luZ3JlZGllbnRTdWJzdGFuY2UnO1xyXG4gIC8qKlxyXG4gICAqIEEgY29kZSBvciBmdWxsIHJlc291cmNlIHRoYXQgcmVwcmVzZW50cyB0aGUgaW5ncmVkaWVudCdzIHN1YnN0YW5jZS5cclxuICAgKi9cclxuICBwdWJsaWMgY29kZTogZmhpci5Db2RlYWJsZVJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBxdWFudGl0eSBvZiBzdWJzdGFuY2UgaW4gdGhlIHVuaXQgb2YgcHJlc2VudGF0aW9uLCBvciBpbiB0aGUgdm9sdW1lIChvciBtYXNzKSBvZiB0aGUgc2luZ2xlIHBoYXJtYWNldXRpY2FsIHByb2R1Y3Qgb3IgbWFudWZhY3R1cmVkIGl0ZW0uIFRoZSBhbGxvd2VkIHJlcGV0aXRpb25zIGRvIG5vdCByZXByZXNlbnQgZGlmZmVyZW50IHN0cmVuZ3RocywgYnV0IGFyZSBkaWZmZXJlbnQgcmVwcmVzZW50YXRpb25zIC0gbWF0aGVtYXRpY2FsbHkgZXF1aXZhbGVudCAtIG9mIGEgc2luZ2xlIHN0cmVuZ3RoLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdHJlbmd0aDogZmhpci5JbmdyZWRpZW50U3Vic3RhbmNlU3RyZW5ndGhbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBJbmdyZWRpZW50U3Vic3RhbmNlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8SW5ncmVkaWVudFN1YnN0YW5jZUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gbmV3IGZoaXIuQ29kZWFibGVSZWZlcmVuY2Uoc291cmNlLmNvZGUsIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb2RlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RyZW5ndGgnXSkgeyB0aGlzLnN0cmVuZ3RoID0gc291cmNlLnN0cmVuZ3RoLm1hcCgoeCkgPT4gbmV3IGZoaXIuSW5ncmVkaWVudFN1YnN0YW5jZVN0cmVuZ3RoKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3RyZW5ndGggPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0luZ3JlZGllbnQuc3Vic3RhbmNlJyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygnY29kZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnc3RyZW5ndGgnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEluZ3JlZGllbnQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgSW5ncmVkaWVudEFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIkluZ3JlZGllbnRcInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGlkZW50aWZpZXIocykgb2YgdGhpcyBJbmdyZWRpZW50IHRoYXQgYXJlIGFzc2lnbmVkIGJ5IGJ1c2luZXNzIHByb2Nlc3NlcyBhbmQvb3IgdXNlZCB0byByZWZlciB0byBpdCB3aGVuIGEgZGlyZWN0IFVSTCByZWZlcmVuY2UgdG8gdGhlIHJlc291cmNlIGl0c2VsZiBpcyBub3QgYXBwcm9wcmlhdGUuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFsbG93cyBmaWx0ZXJpbmcgb2YgaW5ncmVkaWVudCB0aGF0IGFyZSBhcHByb3ByaWF0ZSBmb3IgdXNlIHZlcnN1cyBub3QuXHJcbiAgICovXHJcbiAgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPFB1YmxpY2F0aW9uU3RhdHVzQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEluZ3JlZGllbnQuc3RhdHVzXHJcbiAgICovXHJcbiAgX3N0YXR1cz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHByb2R1Y3Qgd2hpY2ggdGhpcyBpbmdyZWRpZW50IGlzIGEgY29uc3RpdHVlbnQgcGFydCBvZi5cclxuICAgKi9cclxuICBmb3I/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBjbGFzc2lmaWNhdGlvbiBvZiB0aGUgaW5ncmVkaWVudCBpZGVudGlmeWluZyBpdHMgcHVycG9zZSB3aXRoaW4gdGhlIHByb2R1Y3QsIGUuZy4gYWN0aXZlLCBpbmFjdGl2ZS5cclxuICAgKi9cclxuICByb2xlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBBIGNsYXNzaWZpY2F0aW9uIG9mIHRoZSBpbmdyZWRpZW50IGlkZW50aWZ5aW5nIGl0cyBwcmVjaXNlIHB1cnBvc2UocykgaW4gdGhlIGRydWcgcHJvZHVjdC4gVGhpcyBleHRlbmRzIHRoZSBJbmdyZWRpZW50LnJvbGUgdG8gYWRkIG1vcmUgZGV0YWlsLiBFeGFtcGxlOiBhbnRpb3hpZGFudCwgYWxrYWxpemluZyBhZ2VudC5cclxuICAgKi9cclxuICBmdW5jdGlvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiB0aGUgaW5ncmVkaWVudCBpcyBhIGtub3duIG9yIHN1c3BlY3RlZCBhbGxlcmdlbi4gTm90ZSB0aGF0IHRoaXMgaXMgYSBwcm9wZXJ0eSBvZiB0aGUgc3Vic3RhbmNlLCBzbyBpZiBhIHJlZmVyZW5jZSB0byBhIFN1YnN0YW5jZURlZmluaXRpb24gaXMgdXNlZCB0byBkZWNyaWJlIHRoYXQgKHJhdGhlciB0aGFuIGp1c3QgYSBjb2RlKSwgdGhlIGFsbGVyZ2VuIGluZm9ybWF0aW9uIHNob3VsZCBnbyB0aGVyZSwgbm90IGhlcmUuXHJcbiAgICovXHJcbiAgYWxsZXJnZW5pY0luZGljYXRvcj86IGZoaXIuRmhpckJvb2xlYW58Ym9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEluZ3JlZGllbnQuYWxsZXJnZW5pY0luZGljYXRvclxyXG4gICAqL1xyXG4gIF9hbGxlcmdlbmljSW5kaWNhdG9yPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgb3JnYW5pemF0aW9uKHMpIHRoYXQgbWFudWZhY3R1cmUgdGhpcyBpbmdyZWRpZW50LiBDYW4gYmUgdXNlZCB0byBpbmRpY2F0ZTogICAgICAgICAxKSBPcmdhbml6YXRpb25zIHdlIGFyZSBhd2FyZSBvZiB0aGF0IG1hbnVmYWN0dXJlIHRoaXMgaW5ncmVkaWVudCAgICAgICAgIDIpIFNwZWNpZmljIE1hbnVmYWN0dXJlcihzKSBjdXJyZW50bHkgYmVpbmcgdXNlZCAgICAgICAgIDMpIFNldCBvZiBvcmdhbmlzYXRpb25zIGFsbG93ZWQgdG8gbWFudWZhY3R1cmUgdGhpcyBpbmdyZWRpZW50IGZvciB0aGlzIHByb2R1Y3QgICAgICAgICBVc2VycyBtdXN0IGJlIGNsZWFyIG9uIHRoZSBhcHBsaWNhdGlvbiBvZiBjb250ZXh0IHJlbGV2YW50IHRvIHRoZWlyIHVzZSBjYXNlLlxyXG4gICAqL1xyXG4gIG1hbnVmYWN0dXJlcj86IGZoaXIuSW5ncmVkaWVudE1hbnVmYWN0dXJlckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHN1YnN0YW5jZSB0aGF0IGNvbXByaXNlcyB0aGlzIGluZ3JlZGllbnQuXHJcbiAgICovXHJcbiAgc3Vic3RhbmNlOiBmaGlyLkluZ3JlZGllbnRTdWJzdGFuY2VBcmdzfG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBbiBpbmdyZWRpZW50IG9mIGEgbWFudWZhY3R1cmVkIGl0ZW0gb3IgcGhhcm1hY2V1dGljYWwgcHJvZHVjdC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBJbmdyZWRpZW50IGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdJbmdyZWRpZW50JztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIkluZ3JlZGllbnRcIjtcclxuICAvKipcclxuICAgKiBUaGUgaWRlbnRpZmllcihzKSBvZiB0aGlzIEluZ3JlZGllbnQgdGhhdCBhcmUgYXNzaWduZWQgYnkgYnVzaW5lc3MgcHJvY2Vzc2VzIGFuZC9vciB1c2VkIHRvIHJlZmVyIHRvIGl0IHdoZW4gYSBkaXJlY3QgVVJMIHJlZmVyZW5jZSB0byB0aGUgcmVzb3VyY2UgaXRzZWxmIGlzIG5vdCBhcHByb3ByaWF0ZS5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWxsb3dzIGZpbHRlcmluZyBvZiBpbmdyZWRpZW50IHRoYXQgYXJlIGFwcHJvcHJpYXRlIGZvciB1c2UgdmVyc3VzIG5vdC5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPFB1YmxpY2F0aW9uU3RhdHVzQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIHByb2R1Y3Qgd2hpY2ggdGhpcyBpbmdyZWRpZW50IGlzIGEgY29uc3RpdHVlbnQgcGFydCBvZi5cclxuICAgKi9cclxuICBwdWJsaWMgZm9yOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIEEgY2xhc3NpZmljYXRpb24gb2YgdGhlIGluZ3JlZGllbnQgaWRlbnRpZnlpbmcgaXRzIHB1cnBvc2Ugd2l0aGluIHRoZSBwcm9kdWN0LCBlLmcuIGFjdGl2ZSwgaW5hY3RpdmUuXHJcbiAgICovXHJcbiAgcHVibGljIHJvbGU6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogQSBjbGFzc2lmaWNhdGlvbiBvZiB0aGUgaW5ncmVkaWVudCBpZGVudGlmeWluZyBpdHMgcHJlY2lzZSBwdXJwb3NlKHMpIGluIHRoZSBkcnVnIHByb2R1Y3QuIFRoaXMgZXh0ZW5kcyB0aGUgSW5ncmVkaWVudC5yb2xlIHRvIGFkZCBtb3JlIGRldGFpbC4gRXhhbXBsZTogYW50aW94aWRhbnQsIGFsa2FsaXppbmcgYWdlbnQuXHJcbiAgICovXHJcbiAgcHVibGljIGZ1bmN0aW9uOiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIElmIHRoZSBpbmdyZWRpZW50IGlzIGEga25vd24gb3Igc3VzcGVjdGVkIGFsbGVyZ2VuLiBOb3RlIHRoYXQgdGhpcyBpcyBhIHByb3BlcnR5IG9mIHRoZSBzdWJzdGFuY2UsIHNvIGlmIGEgcmVmZXJlbmNlIHRvIGEgU3Vic3RhbmNlRGVmaW5pdGlvbiBpcyB1c2VkIHRvIGRlY3JpYmUgdGhhdCAocmF0aGVyIHRoYW4ganVzdCBhIGNvZGUpLCB0aGUgYWxsZXJnZW4gaW5mb3JtYXRpb24gc2hvdWxkIGdvIHRoZXJlLCBub3QgaGVyZS5cclxuICAgKi9cclxuICBwdWJsaWMgYWxsZXJnZW5pY0luZGljYXRvcj86IGZoaXIuRmhpckJvb2xlYW58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBvcmdhbml6YXRpb24ocykgdGhhdCBtYW51ZmFjdHVyZSB0aGlzIGluZ3JlZGllbnQuIENhbiBiZSB1c2VkIHRvIGluZGljYXRlOiAgICAgICAgIDEpIE9yZ2FuaXphdGlvbnMgd2UgYXJlIGF3YXJlIG9mIHRoYXQgbWFudWZhY3R1cmUgdGhpcyBpbmdyZWRpZW50ICAgICAgICAgMikgU3BlY2lmaWMgTWFudWZhY3R1cmVyKHMpIGN1cnJlbnRseSBiZWluZyB1c2VkICAgICAgICAgMykgU2V0IG9mIG9yZ2FuaXNhdGlvbnMgYWxsb3dlZCB0byBtYW51ZmFjdHVyZSB0aGlzIGluZ3JlZGllbnQgZm9yIHRoaXMgcHJvZHVjdCAgICAgICAgIFVzZXJzIG11c3QgYmUgY2xlYXIgb24gdGhlIGFwcGxpY2F0aW9uIG9mIGNvbnRleHQgcmVsZXZhbnQgdG8gdGhlaXIgdXNlIGNhc2UuXHJcbiAgICovXHJcbiAgcHVibGljIG1hbnVmYWN0dXJlcjogZmhpci5JbmdyZWRpZW50TWFudWZhY3R1cmVyW107XHJcbiAgLyoqXHJcbiAgICogVGhlIHN1YnN0YW5jZSB0aGF0IGNvbXByaXNlcyB0aGlzIGluZ3JlZGllbnQuXHJcbiAgICovXHJcbiAgcHVibGljIHN1YnN0YW5jZTogZmhpci5JbmdyZWRpZW50U3Vic3RhbmNlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgSW5ncmVkaWVudCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEluZ3JlZGllbnRBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnSW5ncmVkaWVudCc7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gbmV3IGZoaXIuSWRlbnRpZmllcihzb3VyY2UuaWRlbnRpZmllciwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0YXR1cyddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxQdWJsaWNhdGlvblN0YXR1c0NvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5zdGF0dXN9LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3N0YXR1cyddKSB7XHJcbiAgICAgIGlmICh0aGlzLnN0YXR1cykgeyB0aGlzLnN0YXR1cy5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zdGF0dXMhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxQdWJsaWNhdGlvblN0YXR1c0NvZGVUeXBlPihzb3VyY2UuX3N0YXR1cyBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnZm9yJ10pIHsgdGhpcy5mb3IgPSBzb3VyY2UuZm9yLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZm9yID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3JvbGUnXSkgeyB0aGlzLnJvbGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnJvbGUsIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yb2xlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZnVuY3Rpb24nXSkgeyB0aGlzLmZ1bmN0aW9uID0gc291cmNlLmZ1bmN0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZnVuY3Rpb24gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYWxsZXJnZW5pY0luZGljYXRvciddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5hbGxlcmdlbmljSW5kaWNhdG9yID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oe3ZhbHVlOiBzb3VyY2UuYWxsZXJnZW5pY0luZGljYXRvcn0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfYWxsZXJnZW5pY0luZGljYXRvciddKSB7XHJcbiAgICAgIGlmICh0aGlzLmFsbGVyZ2VuaWNJbmRpY2F0b3IpIHsgdGhpcy5hbGxlcmdlbmljSW5kaWNhdG9yLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2FsbGVyZ2VuaWNJbmRpY2F0b3IhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5hbGxlcmdlbmljSW5kaWNhdG9yID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oc291cmNlLl9hbGxlcmdlbmljSW5kaWNhdG9yIGFzIFBhcnRpYWw8Zmhpci5GaGlyQm9vbGVhbkFyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnbWFudWZhY3R1cmVyJ10pIHsgdGhpcy5tYW51ZmFjdHVyZXIgPSBzb3VyY2UubWFudWZhY3R1cmVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuSW5ncmVkaWVudE1hbnVmYWN0dXJlcih4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm1hbnVmYWN0dXJlciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydzdWJzdGFuY2UnXSkgeyB0aGlzLnN1YnN0YW5jZSA9IG5ldyBmaGlyLkluZ3JlZGllbnRTdWJzdGFuY2Uoc291cmNlLnN1YnN0YW5jZSwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN1YnN0YW5jZSA9IG51bGw7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdJbmdyZWRpZW50JyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnaWRlbnRpZmllcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSU1YoJ3N0YXR1cycsZXhwLCdQdWJsaWNhdGlvblN0YXR1cycsUHVibGljYXRpb25TdGF0dXNWc1ZhbGlkYXRpb24sJ3InKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnZm9yJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdyb2xlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdmdW5jdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnYWxsZXJnZW5pY0luZGljYXRvcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnbWFudWZhY3R1cmVyJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdzdWJzdGFuY2UnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuIl19