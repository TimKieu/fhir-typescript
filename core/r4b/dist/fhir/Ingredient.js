// <auto-generated/>
// Contents of: hl7.fhir.r4b.core version: 4.3.0
// Minimum TypeScript Version: 3.7
// FHIR Resource: Ingredient
import * as fhir from '../fhir.js';
// @ts-ignore
import { IngredientManufacturerRoleVsValidation } from '../fhirValueSets/IngredientManufacturerRoleVsValidation.js';
// @ts-ignore
import { PublicationStatusVsValidation } from '../fhirValueSets/PublicationStatusVsValidation.js';
/**
 * The organization(s) that manufacture this ingredient. Can be used to indicate:         1) Organizations we are aware of that manufacture this ingredient         2) Specific Manufacturer(s) currently being used         3) Set of organisations allowed to manufacture this ingredient for this product         Users must be clear on the application of context relevant to their use case.
 */
export class IngredientManufacturer extends fhir.BackboneElement {
    /**
     * Default constructor for IngredientManufacturer - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['role']) {
            this.role = new fhir.FhirCode({ value: source.role });
        }
        if (source['_role']) {
            if (this.role) {
                this.role.addExtendedProperties(source._role);
            }
            else {
                this.role = new fhir.FhirCode(source._role);
            }
        }
        if (source['manufacturer']) {
            this.manufacturer = new fhir.Reference(source.manufacturer);
        }
        else {
            this.manufacturer = null;
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Ingredient.manufacturer';
        }
        iss.push(...this.vOSV('role', exp, 'IngredientManufacturerRole', IngredientManufacturerRoleVsValidation, 'r'));
        iss.push(...this.vRS('manufacturer', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
IngredientManufacturer._fts_dataType = 'IngredientManufacturer';
/**
 * Strength expressed in terms of a reference substance. For when the ingredient strength is additionally expressed as equivalent to the strength of some other closely related substance (e.g. salt vs. base). Reference strength represents the strength (quantitative composition) of the active moiety of the active substance. There are situations when the active substance and active moiety are different, therefore both a strength and a reference strength are needed.
 */
export class IngredientSubstanceStrengthReferenceStrength extends fhir.BackboneElement {
    /**
     * Default constructor for IngredientSubstanceStrengthReferenceStrength - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['substance']) {
            this.substance = new fhir.CodeableReference(source.substance);
        }
        if (source['strength']) {
            this.strength = source.strength;
        }
        else if (source['strengthRatio']) {
            this.strength = new fhir.Ratio(source.strengthRatio);
        }
        else if (source['strengthRatioRange']) {
            this.strength = new fhir.RatioRange(source.strengthRatioRange);
        }
        else {
            this.strength = null;
        }
        if (source['measurementPoint']) {
            this.measurementPoint = new fhir.FhirString({ value: source.measurementPoint });
        }
        if (source['_measurementPoint']) {
            if (this.measurementPoint) {
                this.measurementPoint.addExtendedProperties(source._measurementPoint);
            }
            else {
                this.measurementPoint = new fhir.FhirString(source._measurementPoint);
            }
        }
        if (source['country']) {
            this.country = source.country.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.country = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Ingredient.substance.strength.referenceStrength';
        }
        iss.push(...this.vOS('substance', exp));
        iss.push(...this.vRS('strength', exp));
        iss.push(...this.vOS('measurementPoint', exp));
        iss.push(...this.vOA('country', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
IngredientSubstanceStrengthReferenceStrength._fts_dataType = 'IngredientSubstanceStrengthReferenceStrength';
/**
 * Internal flag to properly serialize choice-type element Ingredient.substance.strength.referenceStrength.strength[x]
 */
IngredientSubstanceStrengthReferenceStrength._fts_strengthIsChoice = true;
/**
 * The quantity of substance in the unit of presentation, or in the volume (or mass) of the single pharmaceutical product or manufactured item. The allowed repetitions do not represent different strengths, but are different representations - mathematically equivalent - of a single strength.
 */
export class IngredientSubstanceStrength extends fhir.BackboneElement {
    /**
     * Default constructor for IngredientSubstanceStrength - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['presentation']) {
            this.presentation = source.presentation;
        }
        else if (source['presentationRatio']) {
            this.presentation = new fhir.Ratio(source.presentationRatio);
        }
        else if (source['presentationRatioRange']) {
            this.presentation = new fhir.RatioRange(source.presentationRatioRange);
        }
        if (source['textPresentation']) {
            this.textPresentation = new fhir.FhirString({ value: source.textPresentation });
        }
        if (source['_textPresentation']) {
            if (this.textPresentation) {
                this.textPresentation.addExtendedProperties(source._textPresentation);
            }
            else {
                this.textPresentation = new fhir.FhirString(source._textPresentation);
            }
        }
        if (source['concentration']) {
            this.concentration = source.concentration;
        }
        else if (source['concentrationRatio']) {
            this.concentration = new fhir.Ratio(source.concentrationRatio);
        }
        else if (source['concentrationRatioRange']) {
            this.concentration = new fhir.RatioRange(source.concentrationRatioRange);
        }
        if (source['textConcentration']) {
            this.textConcentration = new fhir.FhirString({ value: source.textConcentration });
        }
        if (source['_textConcentration']) {
            if (this.textConcentration) {
                this.textConcentration.addExtendedProperties(source._textConcentration);
            }
            else {
                this.textConcentration = new fhir.FhirString(source._textConcentration);
            }
        }
        if (source['measurementPoint']) {
            this.measurementPoint = new fhir.FhirString({ value: source.measurementPoint });
        }
        if (source['_measurementPoint']) {
            if (this.measurementPoint) {
                this.measurementPoint.addExtendedProperties(source._measurementPoint);
            }
            else {
                this.measurementPoint = new fhir.FhirString(source._measurementPoint);
            }
        }
        if (source['country']) {
            this.country = source.country.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.country = [];
        }
        if (source['referenceStrength']) {
            this.referenceStrength = source.referenceStrength.map((x) => new fhir.IngredientSubstanceStrengthReferenceStrength(x));
        }
        else {
            this.referenceStrength = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Ingredient.substance.strength';
        }
        iss.push(...this.vOS('presentation', exp));
        iss.push(...this.vOS('textPresentation', exp));
        iss.push(...this.vOS('concentration', exp));
        iss.push(...this.vOS('textConcentration', exp));
        iss.push(...this.vOS('measurementPoint', exp));
        iss.push(...this.vOA('country', exp));
        iss.push(...this.vOA('referenceStrength', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
IngredientSubstanceStrength._fts_dataType = 'IngredientSubstanceStrength';
/**
 * Internal flag to properly serialize choice-type element Ingredient.substance.strength.presentation[x]
 */
IngredientSubstanceStrength._fts_presentationIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element Ingredient.substance.strength.concentration[x]
 */
IngredientSubstanceStrength._fts_concentrationIsChoice = true;
/**
 * The substance that comprises this ingredient.
 */
export class IngredientSubstance extends fhir.BackboneElement {
    /**
     * Default constructor for IngredientSubstance - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableReference(source.code);
        }
        else {
            this.code = null;
        }
        if (source['strength']) {
            this.strength = source.strength.map((x) => new fhir.IngredientSubstanceStrength(x));
        }
        else {
            this.strength = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Ingredient.substance';
        }
        iss.push(...this.vRS('code', exp));
        iss.push(...this.vOA('strength', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
IngredientSubstance._fts_dataType = 'IngredientSubstance';
/**
 * An ingredient of a manufactured item or pharmaceutical product.
 */
export class Ingredient extends fhir.DomainResource {
    /**
     * Default constructor for Ingredient - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'Ingredient';
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier);
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['for']) {
            this.for = source.for.map((x) => new fhir.Reference(x));
        }
        else {
            this.for = [];
        }
        if (source['role']) {
            this.role = new fhir.CodeableConcept(source.role);
        }
        else {
            this.role = null;
        }
        if (source['function']) {
            this.function = source.function.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.function = [];
        }
        if (source['allergenicIndicator']) {
            this.allergenicIndicator = new fhir.FhirBoolean({ value: source.allergenicIndicator });
        }
        if (source['_allergenicIndicator']) {
            if (this.allergenicIndicator) {
                this.allergenicIndicator.addExtendedProperties(source._allergenicIndicator);
            }
            else {
                this.allergenicIndicator = new fhir.FhirBoolean(source._allergenicIndicator);
            }
        }
        if (source['manufacturer']) {
            this.manufacturer = source.manufacturer.map((x) => new fhir.IngredientManufacturer(x));
        }
        else {
            this.manufacturer = [];
        }
        if (source['substance']) {
            this.substance = new fhir.IngredientSubstance(source.substance);
        }
        else {
            this.substance = null;
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Ingredient';
        }
        iss.push(...this.vRPS('resourceType', exp));
        iss.push(...this.vOS('identifier', exp));
        iss.push(...this.vRSV('status', exp, 'PublicationStatus', PublicationStatusVsValidation, 'r'));
        iss.push(...this.vOA('for', exp));
        iss.push(...this.vRS('role', exp));
        iss.push(...this.vOA('function', exp));
        iss.push(...this.vOS('allergenicIndicator', exp));
        iss.push(...this.vOA('manufacturer', exp));
        iss.push(...this.vRS('substance', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
Ingredient._fts_dataType = 'Ingredient';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW5ncmVkaWVudC5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvSW5ncmVkaWVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsZ0RBQWdEO0FBQ2hELGtDQUFrQztBQUNsQyw0QkFBNEI7QUFFNUIsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFJbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSxzQ0FBc0MsRUFBRSxNQUFNLDREQUE0RCxDQUFDO0FBT3BILGFBQWE7QUFDYixPQUFPLEVBQUUsNkJBQTZCLEVBQUUsTUFBTSxtREFBbUQsQ0FBQztBQTJCbEc7O0dBRUc7QUFDSCxNQUFNLE9BQU8sc0JBQXVCLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFhOUQ7O09BRUc7SUFDSCxZQUFZLFNBQTZDLEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQ25HLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBcUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLElBQUksRUFBQyxDQUFDLENBQUM7U0FBRTtRQUNoSCxJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUNuQixJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUU7Z0JBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsS0FBTSxDQUFDLENBQUM7YUFBRTtpQkFDN0Q7Z0JBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQXFDLE1BQU0sQ0FBQyxLQUErQixDQUFDLENBQUM7YUFBRTtTQUNwSDtRQUNELElBQUksTUFBTSxDQUFDLGNBQWMsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLElBQUksQ0FBQyxT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QUFDLFFBQVEsRUFBQyxHQUFHLEVBQUMsbUJBQW1CLEVBQUMsNkJBQTZCLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUMzRixHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNqQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNsQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN0QyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ2pELEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZDLE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQzs7QUFyRkQ7O0dBRUc7QUFDNkIsd0JBQWEsR0FBVSxZQUFZLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjRiLmNvcmUgdmVyc2lvbjogNC4zLjBcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBJbmdyZWRpZW50XHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBJbmdyZWRpZW50TWFudWZhY3R1cmVyUm9sZUNvZGVzLCAgSW5ncmVkaWVudE1hbnVmYWN0dXJlclJvbGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvSW5ncmVkaWVudE1hbnVmYWN0dXJlclJvbGVDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgSW5ncmVkaWVudE1hbnVmYWN0dXJlclJvbGVWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0luZ3JlZGllbnRNYW51ZmFjdHVyZXJSb2xlVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDb3VudHJ5Q29kZXMsICBDb3VudHJ5Q29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvdW50cnlDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ291bnRyeVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ291bnRyeVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUHVibGljYXRpb25TdGF0dXNDb2RlcywgIFB1YmxpY2F0aW9uU3RhdHVzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1B1YmxpY2F0aW9uU3RhdHVzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFB1YmxpY2F0aW9uU3RhdHVzVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9QdWJsaWNhdGlvblN0YXR1c1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgSW5ncmVkaWVudFJvbGVDb2RlcywgIEluZ3JlZGllbnRSb2xlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0luZ3JlZGllbnRSb2xlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEluZ3JlZGllbnRSb2xlVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9JbmdyZWRpZW50Um9sZVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgSW5ncmVkaWVudEZ1bmN0aW9uQ29kZXMsICBJbmdyZWRpZW50RnVuY3Rpb25Db2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvSW5ncmVkaWVudEZ1bmN0aW9uQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEluZ3JlZGllbnRGdW5jdGlvblZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvSW5ncmVkaWVudEZ1bmN0aW9uVnNWYWxpZGF0aW9uLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEluZ3JlZGllbnRNYW51ZmFjdHVyZXIgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgSW5ncmVkaWVudE1hbnVmYWN0dXJlckFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSB3YXkgaW4gd2hpY2ggdGhpcyBtYW51ZmFjdHVyZXIgaXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBpbmdyZWRpZW50LiBGb3IgZXhhbXBsZSB3aGV0aGVyIGl0IGlzIGEgcG9zc2libGUgb25lIChvdGhlcnMgYWxsb3dlZCksIG9yIGFuIGV4Y2x1c2l2ZSBhdXRob3JpemVkIG9uZSBmb3IgdGhpcyBpbmdyZWRpZW50LiBOb3RlIHRoYXQgdGhpcyBpcyBub3QgdGhlIG1hbnVmYWN0dXJpbmcgcHJvY2VzcyByb2xlLlxyXG4gICAqL1xyXG4gIHJvbGU/OiBmaGlyLkZoaXJDb2RlPEluZ3JlZGllbnRNYW51ZmFjdHVyZXJSb2xlQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEluZ3JlZGllbnQubWFudWZhY3R1cmVyLnJvbGVcclxuICAgKi9cclxuICBfcm9sZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQW4gb3JnYW5pemF0aW9uIHRoYXQgbWFudWZhY3R1cmVzIHRoaXMgaW5ncmVkaWVudC5cclxuICAgKi9cclxuICBtYW51ZmFjdHVyZXI6IGZoaXIuUmVmZXJlbmNlQXJnc3xudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlIG9yZ2FuaXphdGlvbihzKSB0aGF0IG1hbnVmYWN0dXJlIHRoaXMgaW5ncmVkaWVudC4gQ2FuIGJlIHVzZWQgdG8gaW5kaWNhdGU6ICAgICAgICAgMSkgT3JnYW5pemF0aW9ucyB3ZSBhcmUgYXdhcmUgb2YgdGhhdCBtYW51ZmFjdHVyZSB0aGlzIGluZ3JlZGllbnQgICAgICAgICAyKSBTcGVjaWZpYyBNYW51ZmFjdHVyZXIocykgY3VycmVudGx5IGJlaW5nIHVzZWQgICAgICAgICAzKSBTZXQgb2Ygb3JnYW5pc2F0aW9ucyBhbGxvd2VkIHRvIG1hbnVmYWN0dXJlIHRoaXMgaW5ncmVkaWVudCBmb3IgdGhpcyBwcm9kdWN0ICAgICAgICAgVXNlcnMgbXVzdCBiZSBjbGVhciBvbiB0aGUgYXBwbGljYXRpb24gb2YgY29udGV4dCByZWxldmFudCB0byB0aGVpciB1c2UgY2FzZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBJbmdyZWRpZW50TWFudWZhY3R1cmVyIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnSW5ncmVkaWVudE1hbnVmYWN0dXJlcic7XHJcbiAgLyoqXHJcbiAgICogVGhlIHdheSBpbiB3aGljaCB0aGlzIG1hbnVmYWN0dXJlciBpcyBhc3NvY2lhdGVkIHdpdGggdGhlIGluZ3JlZGllbnQuIEZvciBleGFtcGxlIHdoZXRoZXIgaXQgaXMgYSBwb3NzaWJsZSBvbmUgKG90aGVycyBhbGxvd2VkKSwgb3IgYW4gZXhjbHVzaXZlIGF1dGhvcml6ZWQgb25lIGZvciB0aGlzIGluZ3JlZGllbnQuIE5vdGUgdGhhdCB0aGlzIGlzIG5vdCB0aGUgbWFudWZhY3R1cmluZyBwcm9jZXNzIHJvbGUuXHJcbiAgICovXHJcbiAgcHVibGljIHJvbGU/OiBmaGlyLkZoaXJDb2RlPEluZ3JlZGllbnRNYW51ZmFjdHVyZXJSb2xlQ29kZVR5cGU+fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBbiBvcmdhbml6YXRpb24gdGhhdCBtYW51ZmFjdHVyZXMgdGhpcyBpbmdyZWRpZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtYW51ZmFjdHVyZXI6IGZoaXIuUmVmZXJlbmNlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgSW5ncmVkaWVudE1hbnVmYWN0dXJlciAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEluZ3JlZGllbnRNYW51ZmFjdHVyZXJBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsncm9sZSddKSB7IHRoaXMucm9sZSA9IG5ldyBmaGlyLkZoaXJDb2RlPEluZ3JlZGllbnRNYW51ZmFjdHVyZXJSb2xlQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnJvbGV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3JvbGUnXSkge1xyXG4gICAgICBpZiAodGhpcy5yb2xlKSB7IHRoaXMucm9sZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9yb2xlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMucm9sZSA9IG5ldyBmaGlyLkZoaXJDb2RlPEluZ3JlZGllbnRNYW51ZmFjdHVyZXJSb2xlQ29kZVR5cGU+KHNvdXJjZS5fcm9sZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnbWFudWZhY3R1cmVyJ10pIHsgdGhpcy5tYW51ZmFjdHVyZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLm1hbnVmYWN0dXJlcik7IH1cclxuICAgIGVsc2UgeyB0aGlzLm1hbnVmYWN0dXJlciA9IG51bGw7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdJbmdyZWRpZW50Lm1hbnVmYWN0dXJlcicgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1NWKCdyb2xlJyxleHAsJ0luZ3JlZGllbnRNYW51ZmFjdHVyZXJSb2xlJyxJbmdyZWRpZW50TWFudWZhY3R1cmVyUm9sZVZzVmFsaWRhdGlvbiwncicpKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdtYW51ZmFjdHVyZXInLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEluZ3JlZGllbnRTdWJzdGFuY2VTdHJlbmd0aFJlZmVyZW5jZVN0cmVuZ3RoIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEluZ3JlZGllbnRTdWJzdGFuY2VTdHJlbmd0aFJlZmVyZW5jZVN0cmVuZ3RoQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVsZXZhbnQgcmVmZXJlbmNlIHN1YnN0YW5jZS5cclxuICAgKi9cclxuICBzdWJzdGFuY2U/OiBmaGlyLkNvZGVhYmxlUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU3RyZW5ndGggZXhwcmVzc2VkIGluIHRlcm1zIG9mIGEgcmVmZXJlbmNlIHN1YnN0YW5jZS5cclxuICAgKi9cclxuICBzdHJlbmd0aD86IGZoaXIuUmF0aW98Zmhpci5SYXRpb1JhbmdlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTdHJlbmd0aCBleHByZXNzZWQgaW4gdGVybXMgb2YgYSByZWZlcmVuY2Ugc3Vic3RhbmNlLlxyXG4gICAqL1xyXG4gIHN0cmVuZ3RoUmF0aW8/OiBmaGlyLlJhdGlvQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU3RyZW5ndGggZXhwcmVzc2VkIGluIHRlcm1zIG9mIGEgcmVmZXJlbmNlIHN1YnN0YW5jZS5cclxuICAgKi9cclxuICBzdHJlbmd0aFJhdGlvUmFuZ2U/OiBmaGlyLlJhdGlvUmFuZ2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBGb3Igd2hlbiBzdHJlbmd0aCBpcyBtZWFzdXJlZCBhdCBhIHBhcnRpY3VsYXIgcG9pbnQgb3IgZGlzdGFuY2UuXHJcbiAgICovXHJcbiAgbWVhc3VyZW1lbnRQb2ludD86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBJbmdyZWRpZW50LnN1YnN0YW5jZS5zdHJlbmd0aC5yZWZlcmVuY2VTdHJlbmd0aC5tZWFzdXJlbWVudFBvaW50XHJcbiAgICovXHJcbiAgX21lYXN1cmVtZW50UG9pbnQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjb3VudHJ5IG9yIGNvdW50cmllcyBmb3Igd2hpY2ggdGhlIHN0cmVuZ3RoIHJhbmdlIGFwcGxpZXMuXHJcbiAgICovXHJcbiAgY291bnRyeT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFN0cmVuZ3RoIGV4cHJlc3NlZCBpbiB0ZXJtcyBvZiBhIHJlZmVyZW5jZSBzdWJzdGFuY2UuIEZvciB3aGVuIHRoZSBpbmdyZWRpZW50IHN0cmVuZ3RoIGlzIGFkZGl0aW9uYWxseSBleHByZXNzZWQgYXMgZXF1aXZhbGVudCB0byB0aGUgc3RyZW5ndGggb2Ygc29tZSBvdGhlciBjbG9zZWx5IHJlbGF0ZWQgc3Vic3RhbmNlIChlLmcuIHNhbHQgdnMuIGJhc2UpLiBSZWZlcmVuY2Ugc3RyZW5ndGggcmVwcmVzZW50cyB0aGUgc3RyZW5ndGggKHF1YW50aXRhdGl2ZSBjb21wb3NpdGlvbikgb2YgdGhlIGFjdGl2ZSBtb2lldHkgb2YgdGhlIGFjdGl2ZSBzdWJzdGFuY2UuIFRoZXJlIGFyZSBzaXR1YXRpb25zIHdoZW4gdGhlIGFjdGl2ZSBzdWJzdGFuY2UgYW5kIGFjdGl2ZSBtb2lldHkgYXJlIGRpZmZlcmVudCwgdGhlcmVmb3JlIGJvdGggYSBzdHJlbmd0aCBhbmQgYSByZWZlcmVuY2Ugc3RyZW5ndGggYXJlIG5lZWRlZC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBJbmdyZWRpZW50U3Vic3RhbmNlU3RyZW5ndGhSZWZlcmVuY2VTdHJlbmd0aCBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0luZ3JlZGllbnRTdWJzdGFuY2VTdHJlbmd0aFJlZmVyZW5jZVN0cmVuZ3RoJztcclxuICAvKipcclxuICAgKiBSZWxldmFudCByZWZlcmVuY2Ugc3Vic3RhbmNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdWJzdGFuY2U/OiBmaGlyLkNvZGVhYmxlUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTdHJlbmd0aCBleHByZXNzZWQgaW4gdGVybXMgb2YgYSByZWZlcmVuY2Ugc3Vic3RhbmNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdHJlbmd0aDogKGZoaXIuUmF0aW98Zmhpci5SYXRpb1JhbmdlKXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgSW5ncmVkaWVudC5zdWJzdGFuY2Uuc3RyZW5ndGgucmVmZXJlbmNlU3RyZW5ndGguc3RyZW5ndGhbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfc3RyZW5ndGhJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBGb3Igd2hlbiBzdHJlbmd0aCBpcyBtZWFzdXJlZCBhdCBhIHBhcnRpY3VsYXIgcG9pbnQgb3IgZGlzdGFuY2UuXHJcbiAgICovXHJcbiAgcHVibGljIG1lYXN1cmVtZW50UG9pbnQ/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjb3VudHJ5IG9yIGNvdW50cmllcyBmb3Igd2hpY2ggdGhlIHN0cmVuZ3RoIHJhbmdlIGFwcGxpZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGNvdW50cnk6IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgSW5ncmVkaWVudFN1YnN0YW5jZVN0cmVuZ3RoUmVmZXJlbmNlU3RyZW5ndGggLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxJbmdyZWRpZW50U3Vic3RhbmNlU3RyZW5ndGhSZWZlcmVuY2VTdHJlbmd0aEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydzdWJzdGFuY2UnXSkgeyB0aGlzLnN1YnN0YW5jZSA9IG5ldyBmaGlyLkNvZGVhYmxlUmVmZXJlbmNlKHNvdXJjZS5zdWJzdGFuY2UpOyB9XHJcbiAgICBpZiAoc291cmNlWydzdHJlbmd0aCddKSB7IHRoaXMuc3RyZW5ndGggPSBzb3VyY2Uuc3RyZW5ndGg7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnc3RyZW5ndGhSYXRpbyddKSB7IHRoaXMuc3RyZW5ndGggPSBuZXcgZmhpci5SYXRpbyhzb3VyY2Uuc3RyZW5ndGhSYXRpbyk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnc3RyZW5ndGhSYXRpb1JhbmdlJ10pIHsgdGhpcy5zdHJlbmd0aCA9IG5ldyBmaGlyLlJhdGlvUmFuZ2Uoc291cmNlLnN0cmVuZ3RoUmF0aW9SYW5nZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0cmVuZ3RoID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbWVhc3VyZW1lbnRQb2ludCddKSB7IHRoaXMubWVhc3VyZW1lbnRQb2ludCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UubWVhc3VyZW1lbnRQb2ludH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfbWVhc3VyZW1lbnRQb2ludCddKSB7XHJcbiAgICAgIGlmICh0aGlzLm1lYXN1cmVtZW50UG9pbnQpIHsgdGhpcy5tZWFzdXJlbWVudFBvaW50LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX21lYXN1cmVtZW50UG9pbnQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5tZWFzdXJlbWVudFBvaW50ID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX21lYXN1cmVtZW50UG9pbnQgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2NvdW50cnknXSkgeyB0aGlzLmNvdW50cnkgPSBzb3VyY2UuY291bnRyeS5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvdW50cnkgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0luZ3JlZGllbnQuc3Vic3RhbmNlLnN0cmVuZ3RoLnJlZmVyZW5jZVN0cmVuZ3RoJyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnc3Vic3RhbmNlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdzdHJlbmd0aCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnbWVhc3VyZW1lbnRQb2ludCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnY291bnRyeScsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgSW5ncmVkaWVudFN1YnN0YW5jZVN0cmVuZ3RoIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEluZ3JlZGllbnRTdWJzdGFuY2VTdHJlbmd0aEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBxdWFudGl0eSBvZiBzdWJzdGFuY2UgaW4gdGhlIHVuaXQgb2YgcHJlc2VudGF0aW9uLCBvciBpbiB0aGUgdm9sdW1lIChvciBtYXNzKSBvZiB0aGUgc2luZ2xlIHBoYXJtYWNldXRpY2FsIHByb2R1Y3Qgb3IgbWFudWZhY3R1cmVkIGl0ZW0uIFVuaXQgb2YgcHJlc2VudGF0aW9uIHJlZmVycyB0byB0aGUgcXVhbnRpdHkgdGhhdCB0aGUgaXRlbSBvY2N1cnMgaW4gZS5nLiBhIHN0cmVuZ3RoIHBlciB0YWJsZXQgc2l6ZSwgcGVyaGFwcyAncGVyIDIwbWcnICh0aGUgc2l6ZSBvZiB0aGUgdGFibGV0KS4gSXQgaXMgbm90IGdlbmVyYWxseSBub3JtYWxpemVkIGFzIGEgdW5pdGFyeSB1bml0LCB3aGljaCB3b3VsZCBiZSAncGVyIG1nJykuXHJcbiAgICovXHJcbiAgcHJlc2VudGF0aW9uPzogZmhpci5SYXRpb3xmaGlyLlJhdGlvUmFuZ2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBxdWFudGl0eSBvZiBzdWJzdGFuY2UgaW4gdGhlIHVuaXQgb2YgcHJlc2VudGF0aW9uLCBvciBpbiB0aGUgdm9sdW1lIChvciBtYXNzKSBvZiB0aGUgc2luZ2xlIHBoYXJtYWNldXRpY2FsIHByb2R1Y3Qgb3IgbWFudWZhY3R1cmVkIGl0ZW0uIFVuaXQgb2YgcHJlc2VudGF0aW9uIHJlZmVycyB0byB0aGUgcXVhbnRpdHkgdGhhdCB0aGUgaXRlbSBvY2N1cnMgaW4gZS5nLiBhIHN0cmVuZ3RoIHBlciB0YWJsZXQgc2l6ZSwgcGVyaGFwcyAncGVyIDIwbWcnICh0aGUgc2l6ZSBvZiB0aGUgdGFibGV0KS4gSXQgaXMgbm90IGdlbmVyYWxseSBub3JtYWxpemVkIGFzIGEgdW5pdGFyeSB1bml0LCB3aGljaCB3b3VsZCBiZSAncGVyIG1nJykuXHJcbiAgICovXHJcbiAgcHJlc2VudGF0aW9uUmF0aW8/OiBmaGlyLlJhdGlvQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHF1YW50aXR5IG9mIHN1YnN0YW5jZSBpbiB0aGUgdW5pdCBvZiBwcmVzZW50YXRpb24sIG9yIGluIHRoZSB2b2x1bWUgKG9yIG1hc3MpIG9mIHRoZSBzaW5nbGUgcGhhcm1hY2V1dGljYWwgcHJvZHVjdCBvciBtYW51ZmFjdHVyZWQgaXRlbS4gVW5pdCBvZiBwcmVzZW50YXRpb24gcmVmZXJzIHRvIHRoZSBxdWFudGl0eSB0aGF0IHRoZSBpdGVtIG9jY3VycyBpbiBlLmcuIGEgc3RyZW5ndGggcGVyIHRhYmxldCBzaXplLCBwZXJoYXBzICdwZXIgMjBtZycgKHRoZSBzaXplIG9mIHRoZSB0YWJsZXQpLiBJdCBpcyBub3QgZ2VuZXJhbGx5IG5vcm1hbGl6ZWQgYXMgYSB1bml0YXJ5IHVuaXQsIHdoaWNoIHdvdWxkIGJlICdwZXIgbWcnKS5cclxuICAgKi9cclxuICBwcmVzZW50YXRpb25SYXRpb1JhbmdlPzogZmhpci5SYXRpb1JhbmdlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSB0ZXh0dWFsIHJlcHJlc2VudGlvbiBvZiBlaXRoZXIgdGhlIHdob2xlIG9mIHRoZSBwcmVzZW50YXRpb24gc3RyZW5ndGggb3IgYSBwYXJ0IG9mIGl0IC0gd2l0aCB0aGUgcmVzdCBiZWluZyBpbiBTdHJlbmd0aC5wcmVzZW50YXRpb24gYXMgYSByYXRpby5cclxuICAgKi9cclxuICB0ZXh0UHJlc2VudGF0aW9uPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEluZ3JlZGllbnQuc3Vic3RhbmNlLnN0cmVuZ3RoLnRleHRQcmVzZW50YXRpb25cclxuICAgKi9cclxuICBfdGV4dFByZXNlbnRhdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHN0cmVuZ3RoIHBlciB1bml0YXJ5IHZvbHVtZSAob3IgbWFzcykuXHJcbiAgICovXHJcbiAgY29uY2VudHJhdGlvbj86IGZoaXIuUmF0aW98Zmhpci5SYXRpb1JhbmdlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc3RyZW5ndGggcGVyIHVuaXRhcnkgdm9sdW1lIChvciBtYXNzKS5cclxuICAgKi9cclxuICBjb25jZW50cmF0aW9uUmF0aW8/OiBmaGlyLlJhdGlvQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHN0cmVuZ3RoIHBlciB1bml0YXJ5IHZvbHVtZSAob3IgbWFzcykuXHJcbiAgICovXHJcbiAgY29uY2VudHJhdGlvblJhdGlvUmFuZ2U/OiBmaGlyLlJhdGlvUmFuZ2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHRleHR1YWwgcmVwcmVzZW50aW9uIG9mIGVpdGhlciB0aGUgd2hvbGUgb2YgdGhlIGNvbmNlbnRyYXRpb24gc3RyZW5ndGggb3IgYSBwYXJ0IG9mIGl0IC0gd2l0aCB0aGUgcmVzdCBiZWluZyBpbiBTdHJlbmd0aC5jb25jZW50cmF0aW9uIGFzIGEgcmF0aW8uXHJcbiAgICovXHJcbiAgdGV4dENvbmNlbnRyYXRpb24/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogSW5ncmVkaWVudC5zdWJzdGFuY2Uuc3RyZW5ndGgudGV4dENvbmNlbnRyYXRpb25cclxuICAgKi9cclxuICBfdGV4dENvbmNlbnRyYXRpb24/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEZvciB3aGVuIHN0cmVuZ3RoIGlzIG1lYXN1cmVkIGF0IGEgcGFydGljdWxhciBwb2ludCBvciBkaXN0YW5jZS4gVGhlcmUgYXJlIHByb2R1Y3RzIHdoZXJlIHN0cmVuZ3RoIGlzIG1lYXN1cmVkIGF0IGEgcGFydGljdWxhciBwb2ludC4gRm9yIGV4YW1wbGUsIHRoZSBzdHJlbmd0aCBvZiB0aGUgaW5ncmVkaWVudCBpbiBzb21lIGluaGFsZXJzIGlzIG1lYXN1cmVkIGF0IGEgcGFydGljdWxhciBwb3NpdGlvbiByZWxhdGl2ZSB0byB0aGUgcG9pbnQgb2YgYWVyb3NvbGl6YXRpb24uXHJcbiAgICovXHJcbiAgbWVhc3VyZW1lbnRQb2ludD86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBJbmdyZWRpZW50LnN1YnN0YW5jZS5zdHJlbmd0aC5tZWFzdXJlbWVudFBvaW50XHJcbiAgICovXHJcbiAgX21lYXN1cmVtZW50UG9pbnQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjb3VudHJ5IG9yIGNvdW50cmllcyBmb3Igd2hpY2ggdGhlIHN0cmVuZ3RoIHJhbmdlIGFwcGxpZXMuXHJcbiAgICovXHJcbiAgY291bnRyeT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTdHJlbmd0aCBleHByZXNzZWQgaW4gdGVybXMgb2YgYSByZWZlcmVuY2Ugc3Vic3RhbmNlLiBGb3Igd2hlbiB0aGUgaW5ncmVkaWVudCBzdHJlbmd0aCBpcyBhZGRpdGlvbmFsbHkgZXhwcmVzc2VkIGFzIGVxdWl2YWxlbnQgdG8gdGhlIHN0cmVuZ3RoIG9mIHNvbWUgb3RoZXIgY2xvc2VseSByZWxhdGVkIHN1YnN0YW5jZSAoZS5nLiBzYWx0IHZzLiBiYXNlKS4gUmVmZXJlbmNlIHN0cmVuZ3RoIHJlcHJlc2VudHMgdGhlIHN0cmVuZ3RoIChxdWFudGl0YXRpdmUgY29tcG9zaXRpb24pIG9mIHRoZSBhY3RpdmUgbW9pZXR5IG9mIHRoZSBhY3RpdmUgc3Vic3RhbmNlLiBUaGVyZSBhcmUgc2l0dWF0aW9ucyB3aGVuIHRoZSBhY3RpdmUgc3Vic3RhbmNlIGFuZCBhY3RpdmUgbW9pZXR5IGFyZSBkaWZmZXJlbnQsIHRoZXJlZm9yZSBib3RoIGEgc3RyZW5ndGggYW5kIGEgcmVmZXJlbmNlIHN0cmVuZ3RoIGFyZSBuZWVkZWQuXHJcbiAgICovXHJcbiAgcmVmZXJlbmNlU3RyZW5ndGg/OiBmaGlyLkluZ3JlZGllbnRTdWJzdGFuY2VTdHJlbmd0aFJlZmVyZW5jZVN0cmVuZ3RoQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBxdWFudGl0eSBvZiBzdWJzdGFuY2UgaW4gdGhlIHVuaXQgb2YgcHJlc2VudGF0aW9uLCBvciBpbiB0aGUgdm9sdW1lIChvciBtYXNzKSBvZiB0aGUgc2luZ2xlIHBoYXJtYWNldXRpY2FsIHByb2R1Y3Qgb3IgbWFudWZhY3R1cmVkIGl0ZW0uIFRoZSBhbGxvd2VkIHJlcGV0aXRpb25zIGRvIG5vdCByZXByZXNlbnQgZGlmZmVyZW50IHN0cmVuZ3RocywgYnV0IGFyZSBkaWZmZXJlbnQgcmVwcmVzZW50YXRpb25zIC0gbWF0aGVtYXRpY2FsbHkgZXF1aXZhbGVudCAtIG9mIGEgc2luZ2xlIHN0cmVuZ3RoLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEluZ3JlZGllbnRTdWJzdGFuY2VTdHJlbmd0aCBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0luZ3JlZGllbnRTdWJzdGFuY2VTdHJlbmd0aCc7XHJcbiAgLyoqXHJcbiAgICogVGhlIHF1YW50aXR5IG9mIHN1YnN0YW5jZSBpbiB0aGUgdW5pdCBvZiBwcmVzZW50YXRpb24sIG9yIGluIHRoZSB2b2x1bWUgKG9yIG1hc3MpIG9mIHRoZSBzaW5nbGUgcGhhcm1hY2V1dGljYWwgcHJvZHVjdCBvciBtYW51ZmFjdHVyZWQgaXRlbS4gVW5pdCBvZiBwcmVzZW50YXRpb24gcmVmZXJzIHRvIHRoZSBxdWFudGl0eSB0aGF0IHRoZSBpdGVtIG9jY3VycyBpbiBlLmcuIGEgc3RyZW5ndGggcGVyIHRhYmxldCBzaXplLCBwZXJoYXBzICdwZXIgMjBtZycgKHRoZSBzaXplIG9mIHRoZSB0YWJsZXQpLiBJdCBpcyBub3QgZ2VuZXJhbGx5IG5vcm1hbGl6ZWQgYXMgYSB1bml0YXJ5IHVuaXQsIHdoaWNoIHdvdWxkIGJlICdwZXIgbWcnKS5cclxuICAgKi9cclxuICBwdWJsaWMgcHJlc2VudGF0aW9uPzogKGZoaXIuUmF0aW98Zmhpci5SYXRpb1JhbmdlKXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBJbmdyZWRpZW50LnN1YnN0YW5jZS5zdHJlbmd0aC5wcmVzZW50YXRpb25beF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfcHJlc2VudGF0aW9uSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogQSB0ZXh0dWFsIHJlcHJlc2VudGlvbiBvZiBlaXRoZXIgdGhlIHdob2xlIG9mIHRoZSBwcmVzZW50YXRpb24gc3RyZW5ndGggb3IgYSBwYXJ0IG9mIGl0IC0gd2l0aCB0aGUgcmVzdCBiZWluZyBpbiBTdHJlbmd0aC5wcmVzZW50YXRpb24gYXMgYSByYXRpby5cclxuICAgKi9cclxuICBwdWJsaWMgdGV4dFByZXNlbnRhdGlvbj86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHN0cmVuZ3RoIHBlciB1bml0YXJ5IHZvbHVtZSAob3IgbWFzcykuXHJcbiAgICovXHJcbiAgcHVibGljIGNvbmNlbnRyYXRpb24/OiAoZmhpci5SYXRpb3xmaGlyLlJhdGlvUmFuZ2UpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IEluZ3JlZGllbnQuc3Vic3RhbmNlLnN0cmVuZ3RoLmNvbmNlbnRyYXRpb25beF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfY29uY2VudHJhdGlvbklzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIEEgdGV4dHVhbCByZXByZXNlbnRpb24gb2YgZWl0aGVyIHRoZSB3aG9sZSBvZiB0aGUgY29uY2VudHJhdGlvbiBzdHJlbmd0aCBvciBhIHBhcnQgb2YgaXQgLSB3aXRoIHRoZSByZXN0IGJlaW5nIGluIFN0cmVuZ3RoLmNvbmNlbnRyYXRpb24gYXMgYSByYXRpby5cclxuICAgKi9cclxuICBwdWJsaWMgdGV4dENvbmNlbnRyYXRpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEZvciB3aGVuIHN0cmVuZ3RoIGlzIG1lYXN1cmVkIGF0IGEgcGFydGljdWxhciBwb2ludCBvciBkaXN0YW5jZS4gVGhlcmUgYXJlIHByb2R1Y3RzIHdoZXJlIHN0cmVuZ3RoIGlzIG1lYXN1cmVkIGF0IGEgcGFydGljdWxhciBwb2ludC4gRm9yIGV4YW1wbGUsIHRoZSBzdHJlbmd0aCBvZiB0aGUgaW5ncmVkaWVudCBpbiBzb21lIGluaGFsZXJzIGlzIG1lYXN1cmVkIGF0IGEgcGFydGljdWxhciBwb3NpdGlvbiByZWxhdGl2ZSB0byB0aGUgcG9pbnQgb2YgYWVyb3NvbGl6YXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIG1lYXN1cmVtZW50UG9pbnQ/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjb3VudHJ5IG9yIGNvdW50cmllcyBmb3Igd2hpY2ggdGhlIHN0cmVuZ3RoIHJhbmdlIGFwcGxpZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGNvdW50cnk6IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogU3RyZW5ndGggZXhwcmVzc2VkIGluIHRlcm1zIG9mIGEgcmVmZXJlbmNlIHN1YnN0YW5jZS4gRm9yIHdoZW4gdGhlIGluZ3JlZGllbnQgc3RyZW5ndGggaXMgYWRkaXRpb25hbGx5IGV4cHJlc3NlZCBhcyBlcXVpdmFsZW50IHRvIHRoZSBzdHJlbmd0aCBvZiBzb21lIG90aGVyIGNsb3NlbHkgcmVsYXRlZCBzdWJzdGFuY2UgKGUuZy4gc2FsdCB2cy4gYmFzZSkuIFJlZmVyZW5jZSBzdHJlbmd0aCByZXByZXNlbnRzIHRoZSBzdHJlbmd0aCAocXVhbnRpdGF0aXZlIGNvbXBvc2l0aW9uKSBvZiB0aGUgYWN0aXZlIG1vaWV0eSBvZiB0aGUgYWN0aXZlIHN1YnN0YW5jZS4gVGhlcmUgYXJlIHNpdHVhdGlvbnMgd2hlbiB0aGUgYWN0aXZlIHN1YnN0YW5jZSBhbmQgYWN0aXZlIG1vaWV0eSBhcmUgZGlmZmVyZW50LCB0aGVyZWZvcmUgYm90aCBhIHN0cmVuZ3RoIGFuZCBhIHJlZmVyZW5jZSBzdHJlbmd0aCBhcmUgbmVlZGVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWZlcmVuY2VTdHJlbmd0aDogZmhpci5JbmdyZWRpZW50U3Vic3RhbmNlU3RyZW5ndGhSZWZlcmVuY2VTdHJlbmd0aFtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEluZ3JlZGllbnRTdWJzdGFuY2VTdHJlbmd0aCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEluZ3JlZGllbnRTdWJzdGFuY2VTdHJlbmd0aEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydwcmVzZW50YXRpb24nXSkgeyB0aGlzLnByZXNlbnRhdGlvbiA9IHNvdXJjZS5wcmVzZW50YXRpb247IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsncHJlc2VudGF0aW9uUmF0aW8nXSkgeyB0aGlzLnByZXNlbnRhdGlvbiA9IG5ldyBmaGlyLlJhdGlvKHNvdXJjZS5wcmVzZW50YXRpb25SYXRpbyk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsncHJlc2VudGF0aW9uUmF0aW9SYW5nZSddKSB7IHRoaXMucHJlc2VudGF0aW9uID0gbmV3IGZoaXIuUmF0aW9SYW5nZShzb3VyY2UucHJlc2VudGF0aW9uUmF0aW9SYW5nZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3RleHRQcmVzZW50YXRpb24nXSkgeyB0aGlzLnRleHRQcmVzZW50YXRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnRleHRQcmVzZW50YXRpb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3RleHRQcmVzZW50YXRpb24nXSkge1xyXG4gICAgICBpZiAodGhpcy50ZXh0UHJlc2VudGF0aW9uKSB7IHRoaXMudGV4dFByZXNlbnRhdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl90ZXh0UHJlc2VudGF0aW9uISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudGV4dFByZXNlbnRhdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl90ZXh0UHJlc2VudGF0aW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydjb25jZW50cmF0aW9uJ10pIHsgdGhpcy5jb25jZW50cmF0aW9uID0gc291cmNlLmNvbmNlbnRyYXRpb247IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnY29uY2VudHJhdGlvblJhdGlvJ10pIHsgdGhpcy5jb25jZW50cmF0aW9uID0gbmV3IGZoaXIuUmF0aW8oc291cmNlLmNvbmNlbnRyYXRpb25SYXRpbyk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnY29uY2VudHJhdGlvblJhdGlvUmFuZ2UnXSkgeyB0aGlzLmNvbmNlbnRyYXRpb24gPSBuZXcgZmhpci5SYXRpb1JhbmdlKHNvdXJjZS5jb25jZW50cmF0aW9uUmF0aW9SYW5nZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3RleHRDb25jZW50cmF0aW9uJ10pIHsgdGhpcy50ZXh0Q29uY2VudHJhdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UudGV4dENvbmNlbnRyYXRpb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3RleHRDb25jZW50cmF0aW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMudGV4dENvbmNlbnRyYXRpb24pIHsgdGhpcy50ZXh0Q29uY2VudHJhdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl90ZXh0Q29uY2VudHJhdGlvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnRleHRDb25jZW50cmF0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3RleHRDb25jZW50cmF0aW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydtZWFzdXJlbWVudFBvaW50J10pIHsgdGhpcy5tZWFzdXJlbWVudFBvaW50ID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5tZWFzdXJlbWVudFBvaW50fSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19tZWFzdXJlbWVudFBvaW50J10pIHtcclxuICAgICAgaWYgKHRoaXMubWVhc3VyZW1lbnRQb2ludCkgeyB0aGlzLm1lYXN1cmVtZW50UG9pbnQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbWVhc3VyZW1lbnRQb2ludCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLm1lYXN1cmVtZW50UG9pbnQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fbWVhc3VyZW1lbnRQb2ludCBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnY291bnRyeSddKSB7IHRoaXMuY291bnRyeSA9IHNvdXJjZS5jb3VudHJ5Lm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY291bnRyeSA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydyZWZlcmVuY2VTdHJlbmd0aCddKSB7IHRoaXMucmVmZXJlbmNlU3RyZW5ndGggPSBzb3VyY2UucmVmZXJlbmNlU3RyZW5ndGgubWFwKCh4KSA9PiBuZXcgZmhpci5JbmdyZWRpZW50U3Vic3RhbmNlU3RyZW5ndGhSZWZlcmVuY2VTdHJlbmd0aCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnJlZmVyZW5jZVN0cmVuZ3RoID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdJbmdyZWRpZW50LnN1YnN0YW5jZS5zdHJlbmd0aCcgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3ByZXNlbnRhdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygndGV4dFByZXNlbnRhdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnY29uY2VudHJhdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygndGV4dENvbmNlbnRyYXRpb24nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ21lYXN1cmVtZW50UG9pbnQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2NvdW50cnknLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3JlZmVyZW5jZVN0cmVuZ3RoJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBJbmdyZWRpZW50U3Vic3RhbmNlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEluZ3JlZGllbnRTdWJzdGFuY2VBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBBIGNvZGUgb3IgZnVsbCByZXNvdXJjZSB0aGF0IHJlcHJlc2VudHMgdGhlIGluZ3JlZGllbnQncyBzdWJzdGFuY2UuXHJcbiAgICovXHJcbiAgY29kZTogZmhpci5Db2RlYWJsZVJlZmVyZW5jZUFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgcXVhbnRpdHkgb2Ygc3Vic3RhbmNlIGluIHRoZSB1bml0IG9mIHByZXNlbnRhdGlvbiwgb3IgaW4gdGhlIHZvbHVtZSAob3IgbWFzcykgb2YgdGhlIHNpbmdsZSBwaGFybWFjZXV0aWNhbCBwcm9kdWN0IG9yIG1hbnVmYWN0dXJlZCBpdGVtLiBUaGUgYWxsb3dlZCByZXBldGl0aW9ucyBkbyBub3QgcmVwcmVzZW50IGRpZmZlcmVudCBzdHJlbmd0aHMsIGJ1dCBhcmUgZGlmZmVyZW50IHJlcHJlc2VudGF0aW9ucyAtIG1hdGhlbWF0aWNhbGx5IGVxdWl2YWxlbnQgLSBvZiBhIHNpbmdsZSBzdHJlbmd0aC5cclxuICAgKi9cclxuICBzdHJlbmd0aD86IGZoaXIuSW5ncmVkaWVudFN1YnN0YW5jZVN0cmVuZ3RoQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBzdWJzdGFuY2UgdGhhdCBjb21wcmlzZXMgdGhpcyBpbmdyZWRpZW50LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEluZ3JlZGllbnRTdWJzdGFuY2UgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdJbmdyZWRpZW50U3Vic3RhbmNlJztcclxuICAvKipcclxuICAgKiBBIGNvZGUgb3IgZnVsbCByZXNvdXJjZSB0aGF0IHJlcHJlc2VudHMgdGhlIGluZ3JlZGllbnQncyBzdWJzdGFuY2UuXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGU6IGZoaXIuQ29kZWFibGVSZWZlcmVuY2V8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgcXVhbnRpdHkgb2Ygc3Vic3RhbmNlIGluIHRoZSB1bml0IG9mIHByZXNlbnRhdGlvbiwgb3IgaW4gdGhlIHZvbHVtZSAob3IgbWFzcykgb2YgdGhlIHNpbmdsZSBwaGFybWFjZXV0aWNhbCBwcm9kdWN0IG9yIG1hbnVmYWN0dXJlZCBpdGVtLiBUaGUgYWxsb3dlZCByZXBldGl0aW9ucyBkbyBub3QgcmVwcmVzZW50IGRpZmZlcmVudCBzdHJlbmd0aHMsIGJ1dCBhcmUgZGlmZmVyZW50IHJlcHJlc2VudGF0aW9ucyAtIG1hdGhlbWF0aWNhbGx5IGVxdWl2YWxlbnQgLSBvZiBhIHNpbmdsZSBzdHJlbmd0aC5cclxuICAgKi9cclxuICBwdWJsaWMgc3RyZW5ndGg6IGZoaXIuSW5ncmVkaWVudFN1YnN0YW5jZVN0cmVuZ3RoW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgSW5ncmVkaWVudFN1YnN0YW5jZSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEluZ3JlZGllbnRTdWJzdGFuY2VBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkNvZGVhYmxlUmVmZXJlbmNlKHNvdXJjZS5jb2RlKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY29kZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0cmVuZ3RoJ10pIHsgdGhpcy5zdHJlbmd0aCA9IHNvdXJjZS5zdHJlbmd0aC5tYXAoKHgpID0+IG5ldyBmaGlyLkluZ3JlZGllbnRTdWJzdGFuY2VTdHJlbmd0aCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0cmVuZ3RoID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdJbmdyZWRpZW50LnN1YnN0YW5jZScgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ2NvZGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3N0cmVuZ3RoJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBJbmdyZWRpZW50IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEluZ3JlZGllbnRBcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJJbmdyZWRpZW50XCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpZGVudGlmaWVyKHMpIG9mIHRoaXMgSW5ncmVkaWVudCB0aGF0IGFyZSBhc3NpZ25lZCBieSBidXNpbmVzcyBwcm9jZXNzZXMgYW5kL29yIHVzZWQgdG8gcmVmZXIgdG8gaXQgd2hlbiBhIGRpcmVjdCBVUkwgcmVmZXJlbmNlIHRvIHRoZSByZXNvdXJjZSBpdHNlbGYgaXMgbm90IGFwcHJvcHJpYXRlLlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBbGxvd3MgZmlsdGVyaW5nIG9mIGluZ3JlZGllbnQgdGhhdCBhcmUgYXBwcm9wcmlhdGUgZm9yIHVzZSB2ZXJzdXMgbm90LlxyXG4gICAqL1xyXG4gIHN0YXR1czogZmhpci5GaGlyQ29kZTxQdWJsaWNhdGlvblN0YXR1c0NvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBJbmdyZWRpZW50LnN0YXR1c1xyXG4gICAqL1xyXG4gIF9zdGF0dXM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwcm9kdWN0IHdoaWNoIHRoaXMgaW5ncmVkaWVudCBpcyBhIGNvbnN0aXR1ZW50IHBhcnQgb2YuXHJcbiAgICovXHJcbiAgZm9yPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgY2xhc3NpZmljYXRpb24gb2YgdGhlIGluZ3JlZGllbnQgaWRlbnRpZnlpbmcgaXRzIHB1cnBvc2Ugd2l0aGluIHRoZSBwcm9kdWN0LCBlLmcuIGFjdGl2ZSwgaW5hY3RpdmUuXHJcbiAgICovXHJcbiAgcm9sZTogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogQSBjbGFzc2lmaWNhdGlvbiBvZiB0aGUgaW5ncmVkaWVudCBpZGVudGlmeWluZyBpdHMgcHJlY2lzZSBwdXJwb3NlKHMpIGluIHRoZSBkcnVnIHByb2R1Y3QuIFRoaXMgZXh0ZW5kcyB0aGUgSW5ncmVkaWVudC5yb2xlIHRvIGFkZCBtb3JlIGRldGFpbC4gRXhhbXBsZTogYW50aW94aWRhbnQsIGFsa2FsaXppbmcgYWdlbnQuXHJcbiAgICovXHJcbiAgZnVuY3Rpb24/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhlIGluZ3JlZGllbnQgaXMgYSBrbm93biBvciBzdXNwZWN0ZWQgYWxsZXJnZW4uIE5vdGUgdGhhdCB0aGlzIGlzIGEgcHJvcGVydHkgb2YgdGhlIHN1YnN0YW5jZSwgc28gaWYgYSByZWZlcmVuY2UgdG8gYSBTdWJzdGFuY2VEZWZpbml0aW9uIGlzIHVzZWQgdG8gZGVjcmliZSB0aGF0IChyYXRoZXIgdGhhbiBqdXN0IGEgY29kZSksIHRoZSBhbGxlcmdlbiBpbmZvcm1hdGlvbiBzaG91bGQgZ28gdGhlcmUsIG5vdCBoZXJlLlxyXG4gICAqL1xyXG4gIGFsbGVyZ2VuaWNJbmRpY2F0b3I/OiBmaGlyLkZoaXJCb29sZWFufGJvb2xlYW58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBJbmdyZWRpZW50LmFsbGVyZ2VuaWNJbmRpY2F0b3JcclxuICAgKi9cclxuICBfYWxsZXJnZW5pY0luZGljYXRvcj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIG9yZ2FuaXphdGlvbihzKSB0aGF0IG1hbnVmYWN0dXJlIHRoaXMgaW5ncmVkaWVudC4gQ2FuIGJlIHVzZWQgdG8gaW5kaWNhdGU6ICAgICAgICAgMSkgT3JnYW5pemF0aW9ucyB3ZSBhcmUgYXdhcmUgb2YgdGhhdCBtYW51ZmFjdHVyZSB0aGlzIGluZ3JlZGllbnQgICAgICAgICAyKSBTcGVjaWZpYyBNYW51ZmFjdHVyZXIocykgY3VycmVudGx5IGJlaW5nIHVzZWQgICAgICAgICAzKSBTZXQgb2Ygb3JnYW5pc2F0aW9ucyBhbGxvd2VkIHRvIG1hbnVmYWN0dXJlIHRoaXMgaW5ncmVkaWVudCBmb3IgdGhpcyBwcm9kdWN0ICAgICAgICAgVXNlcnMgbXVzdCBiZSBjbGVhciBvbiB0aGUgYXBwbGljYXRpb24gb2YgY29udGV4dCByZWxldmFudCB0byB0aGVpciB1c2UgY2FzZS5cclxuICAgKi9cclxuICBtYW51ZmFjdHVyZXI/OiBmaGlyLkluZ3JlZGllbnRNYW51ZmFjdHVyZXJBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzdWJzdGFuY2UgdGhhdCBjb21wcmlzZXMgdGhpcyBpbmdyZWRpZW50LlxyXG4gICAqL1xyXG4gIHN1YnN0YW5jZTogZmhpci5JbmdyZWRpZW50U3Vic3RhbmNlQXJnc3xudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogQW4gaW5ncmVkaWVudCBvZiBhIG1hbnVmYWN0dXJlZCBpdGVtIG9yIHBoYXJtYWNldXRpY2FsIHByb2R1Y3QuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgSW5ncmVkaWVudCBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnSW5ncmVkaWVudCc7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJJbmdyZWRpZW50XCI7XHJcbiAgLyoqXHJcbiAgICogVGhlIGlkZW50aWZpZXIocykgb2YgdGhpcyBJbmdyZWRpZW50IHRoYXQgYXJlIGFzc2lnbmVkIGJ5IGJ1c2luZXNzIHByb2Nlc3NlcyBhbmQvb3IgdXNlZCB0byByZWZlciB0byBpdCB3aGVuIGEgZGlyZWN0IFVSTCByZWZlcmVuY2UgdG8gdGhlIHJlc291cmNlIGl0c2VsZiBpcyBub3QgYXBwcm9wcmlhdGUuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFsbG93cyBmaWx0ZXJpbmcgb2YgaW5ncmVkaWVudCB0aGF0IGFyZSBhcHByb3ByaWF0ZSBmb3IgdXNlIHZlcnN1cyBub3QuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1czogZmhpci5GaGlyQ29kZTxQdWJsaWNhdGlvblN0YXR1c0NvZGVUeXBlPnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwcm9kdWN0IHdoaWNoIHRoaXMgaW5ncmVkaWVudCBpcyBhIGNvbnN0aXR1ZW50IHBhcnQgb2YuXHJcbiAgICovXHJcbiAgcHVibGljIGZvcjogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBBIGNsYXNzaWZpY2F0aW9uIG9mIHRoZSBpbmdyZWRpZW50IGlkZW50aWZ5aW5nIGl0cyBwdXJwb3NlIHdpdGhpbiB0aGUgcHJvZHVjdCwgZS5nLiBhY3RpdmUsIGluYWN0aXZlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByb2xlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEEgY2xhc3NpZmljYXRpb24gb2YgdGhlIGluZ3JlZGllbnQgaWRlbnRpZnlpbmcgaXRzIHByZWNpc2UgcHVycG9zZShzKSBpbiB0aGUgZHJ1ZyBwcm9kdWN0LiBUaGlzIGV4dGVuZHMgdGhlIEluZ3JlZGllbnQucm9sZSB0byBhZGQgbW9yZSBkZXRhaWwuIEV4YW1wbGU6IGFudGlveGlkYW50LCBhbGthbGl6aW5nIGFnZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBmdW5jdGlvbjogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBJZiB0aGUgaW5ncmVkaWVudCBpcyBhIGtub3duIG9yIHN1c3BlY3RlZCBhbGxlcmdlbi4gTm90ZSB0aGF0IHRoaXMgaXMgYSBwcm9wZXJ0eSBvZiB0aGUgc3Vic3RhbmNlLCBzbyBpZiBhIHJlZmVyZW5jZSB0byBhIFN1YnN0YW5jZURlZmluaXRpb24gaXMgdXNlZCB0byBkZWNyaWJlIHRoYXQgKHJhdGhlciB0aGFuIGp1c3QgYSBjb2RlKSwgdGhlIGFsbGVyZ2VuIGluZm9ybWF0aW9uIHNob3VsZCBnbyB0aGVyZSwgbm90IGhlcmUuXHJcbiAgICovXHJcbiAgcHVibGljIGFsbGVyZ2VuaWNJbmRpY2F0b3I/OiBmaGlyLkZoaXJCb29sZWFufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgb3JnYW5pemF0aW9uKHMpIHRoYXQgbWFudWZhY3R1cmUgdGhpcyBpbmdyZWRpZW50LiBDYW4gYmUgdXNlZCB0byBpbmRpY2F0ZTogICAgICAgICAxKSBPcmdhbml6YXRpb25zIHdlIGFyZSBhd2FyZSBvZiB0aGF0IG1hbnVmYWN0dXJlIHRoaXMgaW5ncmVkaWVudCAgICAgICAgIDIpIFNwZWNpZmljIE1hbnVmYWN0dXJlcihzKSBjdXJyZW50bHkgYmVpbmcgdXNlZCAgICAgICAgIDMpIFNldCBvZiBvcmdhbmlzYXRpb25zIGFsbG93ZWQgdG8gbWFudWZhY3R1cmUgdGhpcyBpbmdyZWRpZW50IGZvciB0aGlzIHByb2R1Y3QgICAgICAgICBVc2VycyBtdXN0IGJlIGNsZWFyIG9uIHRoZSBhcHBsaWNhdGlvbiBvZiBjb250ZXh0IHJlbGV2YW50IHRvIHRoZWlyIHVzZSBjYXNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtYW51ZmFjdHVyZXI6IGZoaXIuSW5ncmVkaWVudE1hbnVmYWN0dXJlcltdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzdWJzdGFuY2UgdGhhdCBjb21wcmlzZXMgdGhpcyBpbmdyZWRpZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdWJzdGFuY2U6IGZoaXIuSW5ncmVkaWVudFN1YnN0YW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEluZ3JlZGllbnQgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxJbmdyZWRpZW50QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ0luZ3JlZGllbnQnO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IG5ldyBmaGlyLklkZW50aWZpZXIoc291cmNlLmlkZW50aWZpZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWydzdGF0dXMnXSkgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPFB1YmxpY2F0aW9uU3RhdHVzQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnN0YXR1c30pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfc3RhdHVzJ10pIHtcclxuICAgICAgaWYgKHRoaXMuc3RhdHVzKSB7IHRoaXMuc3RhdHVzLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3N0YXR1cyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPFB1YmxpY2F0aW9uU3RhdHVzQ29kZVR5cGU+KHNvdXJjZS5fc3RhdHVzIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydmb3InXSkgeyB0aGlzLmZvciA9IHNvdXJjZS5mb3IubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5mb3IgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncm9sZSddKSB7IHRoaXMucm9sZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2Uucm9sZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnJvbGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydmdW5jdGlvbiddKSB7IHRoaXMuZnVuY3Rpb24gPSBzb3VyY2UuZnVuY3Rpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5mdW5jdGlvbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydhbGxlcmdlbmljSW5kaWNhdG9yJ10pIHsgdGhpcy5hbGxlcmdlbmljSW5kaWNhdG9yID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oe3ZhbHVlOiBzb3VyY2UuYWxsZXJnZW5pY0luZGljYXRvcn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfYWxsZXJnZW5pY0luZGljYXRvciddKSB7XHJcbiAgICAgIGlmICh0aGlzLmFsbGVyZ2VuaWNJbmRpY2F0b3IpIHsgdGhpcy5hbGxlcmdlbmljSW5kaWNhdG9yLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2FsbGVyZ2VuaWNJbmRpY2F0b3IhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5hbGxlcmdlbmljSW5kaWNhdG9yID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oc291cmNlLl9hbGxlcmdlbmljSW5kaWNhdG9yIGFzIFBhcnRpYWw8Zmhpci5GaGlyQm9vbGVhbkFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnbWFudWZhY3R1cmVyJ10pIHsgdGhpcy5tYW51ZmFjdHVyZXIgPSBzb3VyY2UubWFudWZhY3R1cmVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuSW5ncmVkaWVudE1hbnVmYWN0dXJlcih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm1hbnVmYWN0dXJlciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydzdWJzdGFuY2UnXSkgeyB0aGlzLnN1YnN0YW5jZSA9IG5ldyBmaGlyLkluZ3JlZGllbnRTdWJzdGFuY2Uoc291cmNlLnN1YnN0YW5jZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN1YnN0YW5jZSA9IG51bGw7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdJbmdyZWRpZW50JyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUFMoJ3Jlc291cmNlVHlwZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnaWRlbnRpZmllcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSU1YoJ3N0YXR1cycsZXhwLCdQdWJsaWNhdGlvblN0YXR1cycsUHVibGljYXRpb25TdGF0dXNWc1ZhbGlkYXRpb24sJ3InKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnZm9yJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdyb2xlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdmdW5jdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnYWxsZXJnZW5pY0luZGljYXRvcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnbWFudWZhY3R1cmVyJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdzdWJzdGFuY2UnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuIl19