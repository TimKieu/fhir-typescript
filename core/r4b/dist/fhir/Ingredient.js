// <auto-generated/>
// Contents of: hl7.fhir.r4b.core version: 4.3.0
// Minimum TypeScript Version: 3.7
// FHIR Resource: Ingredient
import * as fhir from '../fhir.js';
// @ts-ignore
import { IngredientManufacturerRoleVsValidation } from '../fhirValueSets/IngredientManufacturerRoleVsValidation.js';
// @ts-ignore
import { PublicationStatusVsValidation } from '../fhirValueSets/PublicationStatusVsValidation.js';
/**
 * The organization(s) that manufacture this ingredient. Can be used to indicate:         1) Organizations we are aware of that manufacture this ingredient         2) Specific Manufacturer(s) currently being used         3) Set of organisations allowed to manufacture this ingredient for this product         Users must be clear on the application of context relevant to their use case.
 */
export class IngredientManufacturer extends fhir.BackboneElement {
    /**
     * Default constructor for IngredientManufacturer - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['role']) {
            this.role = new fhir.FhirCode({ value: source.role });
        }
        if (source['_role']) {
            if (this.role) {
                this.role.addExtendedProperties(source._role);
            }
            else {
                this.role = new fhir.FhirCode(source._role);
            }
        }
        if (source['manufacturer']) {
            this.manufacturer = new fhir.Reference(source.manufacturer);
        }
        else {
            this.manufacturer = null;
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Ingredient.manufacturer';
        }
        this.vOSV('role', exp, 'IngredientManufacturerRole', IngredientManufacturerRoleVsValidation, 'r');
        this.vRS('manufacturer', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
IngredientManufacturer._fts_dataType = 'IngredientManufacturer';
/**
 * Strength expressed in terms of a reference substance. For when the ingredient strength is additionally expressed as equivalent to the strength of some other closely related substance (e.g. salt vs. base). Reference strength represents the strength (quantitative composition) of the active moiety of the active substance. There are situations when the active substance and active moiety are different, therefore both a strength and a reference strength are needed.
 */
export class IngredientSubstanceStrengthReferenceStrength extends fhir.BackboneElement {
    /**
     * Default constructor for IngredientSubstanceStrengthReferenceStrength - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['substance']) {
            this.substance = new fhir.CodeableReference(source.substance);
        }
        if (source['strength']) {
            this.strength = source.strength;
        }
        else if (source['strengthRatio']) {
            this.strength = new fhir.Ratio(source.strengthRatio);
        }
        else if (source['strengthRatioRange']) {
            this.strength = new fhir.RatioRange(source.strengthRatioRange);
        }
        else {
            this.strength = null;
        }
        if (source['measurementPoint']) {
            this.measurementPoint = new fhir.FhirString({ value: source.measurementPoint });
        }
        if (source['_measurementPoint']) {
            if (this.measurementPoint) {
                this.measurementPoint.addExtendedProperties(source._measurementPoint);
            }
            else {
                this.measurementPoint = new fhir.FhirString(source._measurementPoint);
            }
        }
        if (source['country']) {
            this.country = source.country.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.country = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Ingredient.substance.strength.referenceStrength';
        }
        this.vOS('substance', exp);
        this.vRS('strength', exp);
        this.vOS('measurementPoint', exp);
        this.vOA('country', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
IngredientSubstanceStrengthReferenceStrength._fts_dataType = 'IngredientSubstanceStrengthReferenceStrength';
/**
 * Internal flag to properly serialize choice-type element Ingredient.substance.strength.referenceStrength.strength[x]
 */
IngredientSubstanceStrengthReferenceStrength._fts_strengthIsChoice = true;
/**
 * The quantity of substance in the unit of presentation, or in the volume (or mass) of the single pharmaceutical product or manufactured item. The allowed repetitions do not represent different strengths, but are different representations - mathematically equivalent - of a single strength.
 */
export class IngredientSubstanceStrength extends fhir.BackboneElement {
    /**
     * Default constructor for IngredientSubstanceStrength - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['presentation']) {
            this.presentation = source.presentation;
        }
        else if (source['presentationRatio']) {
            this.presentation = new fhir.Ratio(source.presentationRatio);
        }
        else if (source['presentationRatioRange']) {
            this.presentation = new fhir.RatioRange(source.presentationRatioRange);
        }
        if (source['textPresentation']) {
            this.textPresentation = new fhir.FhirString({ value: source.textPresentation });
        }
        if (source['_textPresentation']) {
            if (this.textPresentation) {
                this.textPresentation.addExtendedProperties(source._textPresentation);
            }
            else {
                this.textPresentation = new fhir.FhirString(source._textPresentation);
            }
        }
        if (source['concentration']) {
            this.concentration = source.concentration;
        }
        else if (source['concentrationRatio']) {
            this.concentration = new fhir.Ratio(source.concentrationRatio);
        }
        else if (source['concentrationRatioRange']) {
            this.concentration = new fhir.RatioRange(source.concentrationRatioRange);
        }
        if (source['textConcentration']) {
            this.textConcentration = new fhir.FhirString({ value: source.textConcentration });
        }
        if (source['_textConcentration']) {
            if (this.textConcentration) {
                this.textConcentration.addExtendedProperties(source._textConcentration);
            }
            else {
                this.textConcentration = new fhir.FhirString(source._textConcentration);
            }
        }
        if (source['measurementPoint']) {
            this.measurementPoint = new fhir.FhirString({ value: source.measurementPoint });
        }
        if (source['_measurementPoint']) {
            if (this.measurementPoint) {
                this.measurementPoint.addExtendedProperties(source._measurementPoint);
            }
            else {
                this.measurementPoint = new fhir.FhirString(source._measurementPoint);
            }
        }
        if (source['country']) {
            this.country = source.country.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.country = [];
        }
        if (source['referenceStrength']) {
            this.referenceStrength = source.referenceStrength.map((x) => new fhir.IngredientSubstanceStrengthReferenceStrength(x));
        }
        else {
            this.referenceStrength = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Ingredient.substance.strength';
        }
        this.vOS('presentation', exp);
        this.vOS('textPresentation', exp);
        this.vOS('concentration', exp);
        this.vOS('textConcentration', exp);
        this.vOS('measurementPoint', exp);
        this.vOA('country', exp);
        this.vOA('referenceStrength', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
IngredientSubstanceStrength._fts_dataType = 'IngredientSubstanceStrength';
/**
 * Internal flag to properly serialize choice-type element Ingredient.substance.strength.presentation[x]
 */
IngredientSubstanceStrength._fts_presentationIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element Ingredient.substance.strength.concentration[x]
 */
IngredientSubstanceStrength._fts_concentrationIsChoice = true;
/**
 * The substance that comprises this ingredient.
 */
export class IngredientSubstance extends fhir.BackboneElement {
    /**
     * Default constructor for IngredientSubstance - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableReference(source.code);
        }
        else {
            this.code = null;
        }
        if (source['strength']) {
            this.strength = source.strength.map((x) => new fhir.IngredientSubstanceStrength(x));
        }
        else {
            this.strength = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Ingredient.substance';
        }
        this.vRS('code', exp);
        this.vOA('strength', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
IngredientSubstance._fts_dataType = 'IngredientSubstance';
/**
 * An ingredient of a manufactured item or pharmaceutical product.
 */
export class Ingredient extends fhir.DomainResource {
    /**
     * Default constructor for Ingredient - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'Ingredient';
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier);
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['for']) {
            this.for = source.for.map((x) => new fhir.Reference(x));
        }
        else {
            this.for = [];
        }
        if (source['role']) {
            this.role = new fhir.CodeableConcept(source.role);
        }
        else {
            this.role = null;
        }
        if (source['function']) {
            this.function = source.function.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.function = [];
        }
        if (source['allergenicIndicator']) {
            this.allergenicIndicator = new fhir.FhirBoolean({ value: source.allergenicIndicator });
        }
        if (source['_allergenicIndicator']) {
            if (this.allergenicIndicator) {
                this.allergenicIndicator.addExtendedProperties(source._allergenicIndicator);
            }
            else {
                this.allergenicIndicator = new fhir.FhirBoolean(source._allergenicIndicator);
            }
        }
        if (source['manufacturer']) {
            this.manufacturer = source.manufacturer.map((x) => new fhir.IngredientManufacturer(x));
        }
        else {
            this.manufacturer = [];
        }
        if (source['substance']) {
            this.substance = new fhir.IngredientSubstance(source.substance);
        }
        else {
            this.substance = null;
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Ingredient';
        }
        this.vRS('resourceType', exp);
        this.vOS('identifier', exp);
        this.vRSV('status', exp, 'PublicationStatus', PublicationStatusVsValidation, 'r');
        this.vOA('for', exp);
        this.vRS('role', exp);
        this.vOA('function', exp);
        this.vOS('allergenicIndicator', exp);
        this.vOA('manufacturer', exp);
        this.vRS('substance', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
Ingredient._fts_dataType = 'Ingredient';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW5ncmVkaWVudC5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvSW5ncmVkaWVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsZ0RBQWdEO0FBQ2hELGtDQUFrQztBQUNsQyw0QkFBNEI7QUFFNUIsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFJbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSxzQ0FBc0MsRUFBRSxNQUFNLDREQUE0RCxDQUFDO0FBT3BILGFBQWE7QUFDYixPQUFPLEVBQUUsNkJBQTZCLEVBQUUsTUFBTSxtREFBbUQsQ0FBQztBQTJCbEc7O0dBRUc7QUFDSCxNQUFNLE9BQU8sc0JBQXVCLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFhOUQ7O09BRUc7SUFDSCxZQUFZLFNBQTZDLEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQ25HLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBcUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLElBQUksRUFBQyxDQUFDLENBQUM7U0FBRTtRQUNoSCxJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUNuQixJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUU7Z0JBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsS0FBTSxDQUFDLENBQUM7YUFBRTtpQkFDN0Q7Z0JBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQXFDLE1BQU0sQ0FBQyxLQUErQixDQUFDLENBQUM7YUFBRTtTQUNwSDtRQUNELElBQUksTUFBTSxDQUFDLGNBQWMsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLElBQUksQ0FBQyxT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TUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1NBQUU7YUFDeEY7WUFBRSxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztTQUFFO0lBQ2pDLENBQUM7SUFDRDs7T0FFRztJQUNhLGlCQUFpQixDQUFDLE1BQWEsRUFBRTtRQUMvQyxJQUFJLE1BQU0sR0FBbUIsS0FBSyxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzFELElBQUksR0FBRyxLQUFLLEVBQUUsRUFBRTtZQUFFLEdBQUcsR0FBRyxZQUFZLENBQUE7U0FBRTtRQUN0QyxJQUFJLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUM1QixJQUFJLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUMxQixJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBQyxHQUFHLEVBQUMsbUJBQW1CLEVBQUMsNkJBQTZCLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDN0UsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDbkIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDcEIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDeEIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUNuQyxJQUFJLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUM1QixJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUN6QixPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQXJGRDs7R0FFRztBQUM2Qix3QkFBYSxHQUFVLFlBQVksQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yNGIuY29yZSB2ZXJzaW9uOiA0LjMuMFxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IEluZ3JlZGllbnRcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEluZ3JlZGllbnRNYW51ZmFjdHVyZXJSb2xlQ29kZXMsICBJbmdyZWRpZW50TWFudWZhY3R1cmVyUm9sZUNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9JbmdyZWRpZW50TWFudWZhY3R1cmVyUm9sZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBJbmdyZWRpZW50TWFudWZhY3R1cmVyUm9sZVZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvSW5ncmVkaWVudE1hbnVmYWN0dXJlclJvbGVWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvdW50cnlDb2RlcywgIENvdW50cnlDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ291bnRyeUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDb3VudHJ5VnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db3VudHJ5VnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBQdWJsaWNhdGlvblN0YXR1c0NvZGVzLCAgUHVibGljYXRpb25TdGF0dXNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUHVibGljYXRpb25TdGF0dXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUHVibGljYXRpb25TdGF0dXNWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1B1YmxpY2F0aW9uU3RhdHVzVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBJbmdyZWRpZW50Um9sZUNvZGVzLCAgSW5ncmVkaWVudFJvbGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvSW5ncmVkaWVudFJvbGVDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgSW5ncmVkaWVudFJvbGVWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0luZ3JlZGllbnRSb2xlVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBJbmdyZWRpZW50RnVuY3Rpb25Db2RlcywgIEluZ3JlZGllbnRGdW5jdGlvbkNvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9JbmdyZWRpZW50RnVuY3Rpb25Db2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgSW5ncmVkaWVudEZ1bmN0aW9uVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9JbmdyZWRpZW50RnVuY3Rpb25Wc1ZhbGlkYXRpb24uanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgSW5ncmVkaWVudE1hbnVmYWN0dXJlciB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBJbmdyZWRpZW50TWFudWZhY3R1cmVyQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIHdheSBpbiB3aGljaCB0aGlzIG1hbnVmYWN0dXJlciBpcyBhc3NvY2lhdGVkIHdpdGggdGhlIGluZ3JlZGllbnQuIEZvciBleGFtcGxlIHdoZXRoZXIgaXQgaXMgYSBwb3NzaWJsZSBvbmUgKG90aGVycyBhbGxvd2VkKSwgb3IgYW4gZXhjbHVzaXZlIGF1dGhvcml6ZWQgb25lIGZvciB0aGlzIGluZ3JlZGllbnQuIE5vdGUgdGhhdCB0aGlzIGlzIG5vdCB0aGUgbWFudWZhY3R1cmluZyBwcm9jZXNzIHJvbGUuXHJcbiAgICovXHJcbiAgcm9sZT86IGZoaXIuRmhpckNvZGU8SW5ncmVkaWVudE1hbnVmYWN0dXJlclJvbGVDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogSW5ncmVkaWVudC5tYW51ZmFjdHVyZXIucm9sZVxyXG4gICAqL1xyXG4gIF9yb2xlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBBbiBvcmdhbml6YXRpb24gdGhhdCBtYW51ZmFjdHVyZXMgdGhpcyBpbmdyZWRpZW50LlxyXG4gICAqL1xyXG4gIG1hbnVmYWN0dXJlcjogZmhpci5SZWZlcmVuY2VBcmdzfG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgb3JnYW5pemF0aW9uKHMpIHRoYXQgbWFudWZhY3R1cmUgdGhpcyBpbmdyZWRpZW50LiBDYW4gYmUgdXNlZCB0byBpbmRpY2F0ZTogICAgICAgICAxKSBPcmdhbml6YXRpb25zIHdlIGFyZSBhd2FyZSBvZiB0aGF0IG1hbnVmYWN0dXJlIHRoaXMgaW5ncmVkaWVudCAgICAgICAgIDIpIFNwZWNpZmljIE1hbnVmYWN0dXJlcihzKSBjdXJyZW50bHkgYmVpbmcgdXNlZCAgICAgICAgIDMpIFNldCBvZiBvcmdhbmlzYXRpb25zIGFsbG93ZWQgdG8gbWFudWZhY3R1cmUgdGhpcyBpbmdyZWRpZW50IGZvciB0aGlzIHByb2R1Y3QgICAgICAgICBVc2VycyBtdXN0IGJlIGNsZWFyIG9uIHRoZSBhcHBsaWNhdGlvbiBvZiBjb250ZXh0IHJlbGV2YW50IHRvIHRoZWlyIHVzZSBjYXNlLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEluZ3JlZGllbnRNYW51ZmFjdHVyZXIgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdJbmdyZWRpZW50TWFudWZhY3R1cmVyJztcclxuICAvKipcclxuICAgKiBUaGUgd2F5IGluIHdoaWNoIHRoaXMgbWFudWZhY3R1cmVyIGlzIGFzc29jaWF0ZWQgd2l0aCB0aGUgaW5ncmVkaWVudC4gRm9yIGV4YW1wbGUgd2hldGhlciBpdCBpcyBhIHBvc3NpYmxlIG9uZSAob3RoZXJzIGFsbG93ZWQpLCBvciBhbiBleGNsdXNpdmUgYXV0aG9yaXplZCBvbmUgZm9yIHRoaXMgaW5ncmVkaWVudC4gTm90ZSB0aGF0IHRoaXMgaXMgbm90IHRoZSBtYW51ZmFjdHVyaW5nIHByb2Nlc3Mgcm9sZS5cclxuICAgKi9cclxuICBwdWJsaWMgcm9sZT86IGZoaXIuRmhpckNvZGU8SW5ncmVkaWVudE1hbnVmYWN0dXJlclJvbGVDb2RlVHlwZT58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFuIG9yZ2FuaXphdGlvbiB0aGF0IG1hbnVmYWN0dXJlcyB0aGlzIGluZ3JlZGllbnQuXHJcbiAgICovXHJcbiAgcHVibGljIG1hbnVmYWN0dXJlcjogZmhpci5SZWZlcmVuY2V8bnVsbDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBJbmdyZWRpZW50TWFudWZhY3R1cmVyIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8SW5ncmVkaWVudE1hbnVmYWN0dXJlckFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydyb2xlJ10pIHsgdGhpcy5yb2xlID0gbmV3IGZoaXIuRmhpckNvZGU8SW5ncmVkaWVudE1hbnVmYWN0dXJlclJvbGVDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2Uucm9sZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfcm9sZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnJvbGUpIHsgdGhpcy5yb2xlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3JvbGUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5yb2xlID0gbmV3IGZoaXIuRmhpckNvZGU8SW5ncmVkaWVudE1hbnVmYWN0dXJlclJvbGVDb2RlVHlwZT4oc291cmNlLl9yb2xlIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydtYW51ZmFjdHVyZXInXSkgeyB0aGlzLm1hbnVmYWN0dXJlciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UubWFudWZhY3R1cmVyKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubWFudWZhY3R1cmVyID0gbnVsbDsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0luZ3JlZGllbnQubWFudWZhY3R1cmVyJyB9XHJcbiAgICB0aGlzLnZPU1YoJ3JvbGUnLGV4cCwnSW5ncmVkaWVudE1hbnVmYWN0dXJlclJvbGUnLEluZ3JlZGllbnRNYW51ZmFjdHVyZXJSb2xlVnNWYWxpZGF0aW9uLCdyJylcclxuICAgIHRoaXMudlJTKCdtYW51ZmFjdHVyZXInLGV4cClcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBJbmdyZWRpZW50U3Vic3RhbmNlU3RyZW5ndGhSZWZlcmVuY2VTdHJlbmd0aCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBJbmdyZWRpZW50U3Vic3RhbmNlU3RyZW5ndGhSZWZlcmVuY2VTdHJlbmd0aEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlbGV2YW50IHJlZmVyZW5jZSBzdWJzdGFuY2UuXHJcbiAgICovXHJcbiAgc3Vic3RhbmNlPzogZmhpci5Db2RlYWJsZVJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFN0cmVuZ3RoIGV4cHJlc3NlZCBpbiB0ZXJtcyBvZiBhIHJlZmVyZW5jZSBzdWJzdGFuY2UuXHJcbiAgICovXHJcbiAgc3RyZW5ndGg/OiBmaGlyLlJhdGlvfGZoaXIuUmF0aW9SYW5nZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU3RyZW5ndGggZXhwcmVzc2VkIGluIHRlcm1zIG9mIGEgcmVmZXJlbmNlIHN1YnN0YW5jZS5cclxuICAgKi9cclxuICBzdHJlbmd0aFJhdGlvPzogZmhpci5SYXRpb0FyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFN0cmVuZ3RoIGV4cHJlc3NlZCBpbiB0ZXJtcyBvZiBhIHJlZmVyZW5jZSBzdWJzdGFuY2UuXHJcbiAgICovXHJcbiAgc3RyZW5ndGhSYXRpb1JhbmdlPzogZmhpci5SYXRpb1JhbmdlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRm9yIHdoZW4gc3RyZW5ndGggaXMgbWVhc3VyZWQgYXQgYSBwYXJ0aWN1bGFyIHBvaW50IG9yIGRpc3RhbmNlLlxyXG4gICAqL1xyXG4gIG1lYXN1cmVtZW50UG9pbnQ/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogSW5ncmVkaWVudC5zdWJzdGFuY2Uuc3RyZW5ndGgucmVmZXJlbmNlU3RyZW5ndGgubWVhc3VyZW1lbnRQb2ludFxyXG4gICAqL1xyXG4gIF9tZWFzdXJlbWVudFBvaW50PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgY291bnRyeSBvciBjb3VudHJpZXMgZm9yIHdoaWNoIHRoZSBzdHJlbmd0aCByYW5nZSBhcHBsaWVzLlxyXG4gICAqL1xyXG4gIGNvdW50cnk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTdHJlbmd0aCBleHByZXNzZWQgaW4gdGVybXMgb2YgYSByZWZlcmVuY2Ugc3Vic3RhbmNlLiBGb3Igd2hlbiB0aGUgaW5ncmVkaWVudCBzdHJlbmd0aCBpcyBhZGRpdGlvbmFsbHkgZXhwcmVzc2VkIGFzIGVxdWl2YWxlbnQgdG8gdGhlIHN0cmVuZ3RoIG9mIHNvbWUgb3RoZXIgY2xvc2VseSByZWxhdGVkIHN1YnN0YW5jZSAoZS5nLiBzYWx0IHZzLiBiYXNlKS4gUmVmZXJlbmNlIHN0cmVuZ3RoIHJlcHJlc2VudHMgdGhlIHN0cmVuZ3RoIChxdWFudGl0YXRpdmUgY29tcG9zaXRpb24pIG9mIHRoZSBhY3RpdmUgbW9pZXR5IG9mIHRoZSBhY3RpdmUgc3Vic3RhbmNlLiBUaGVyZSBhcmUgc2l0dWF0aW9ucyB3aGVuIHRoZSBhY3RpdmUgc3Vic3RhbmNlIGFuZCBhY3RpdmUgbW9pZXR5IGFyZSBkaWZmZXJlbnQsIHRoZXJlZm9yZSBib3RoIGEgc3RyZW5ndGggYW5kIGEgcmVmZXJlbmNlIHN0cmVuZ3RoIGFyZSBuZWVkZWQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgSW5ncmVkaWVudFN1YnN0YW5jZVN0cmVuZ3RoUmVmZXJlbmNlU3RyZW5ndGggZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdJbmdyZWRpZW50U3Vic3RhbmNlU3RyZW5ndGhSZWZlcmVuY2VTdHJlbmd0aCc7XHJcbiAgLyoqXHJcbiAgICogUmVsZXZhbnQgcmVmZXJlbmNlIHN1YnN0YW5jZS5cclxuICAgKi9cclxuICBwdWJsaWMgc3Vic3RhbmNlPzogZmhpci5Db2RlYWJsZVJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU3RyZW5ndGggZXhwcmVzc2VkIGluIHRlcm1zIG9mIGEgcmVmZXJlbmNlIHN1YnN0YW5jZS5cclxuICAgKi9cclxuICBwdWJsaWMgc3RyZW5ndGg6IChmaGlyLlJhdGlvfGZoaXIuUmF0aW9SYW5nZSl8bnVsbDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IEluZ3JlZGllbnQuc3Vic3RhbmNlLnN0cmVuZ3RoLnJlZmVyZW5jZVN0cmVuZ3RoLnN0cmVuZ3RoW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX3N0cmVuZ3RoSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogRm9yIHdoZW4gc3RyZW5ndGggaXMgbWVhc3VyZWQgYXQgYSBwYXJ0aWN1bGFyIHBvaW50IG9yIGRpc3RhbmNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtZWFzdXJlbWVudFBvaW50PzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgY291bnRyeSBvciBjb3VudHJpZXMgZm9yIHdoaWNoIHRoZSBzdHJlbmd0aCByYW5nZSBhcHBsaWVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb3VudHJ5OiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEluZ3JlZGllbnRTdWJzdGFuY2VTdHJlbmd0aFJlZmVyZW5jZVN0cmVuZ3RoIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8SW5ncmVkaWVudFN1YnN0YW5jZVN0cmVuZ3RoUmVmZXJlbmNlU3RyZW5ndGhBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnc3Vic3RhbmNlJ10pIHsgdGhpcy5zdWJzdGFuY2UgPSBuZXcgZmhpci5Db2RlYWJsZVJlZmVyZW5jZShzb3VyY2Uuc3Vic3RhbmNlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RyZW5ndGgnXSkgeyB0aGlzLnN0cmVuZ3RoID0gc291cmNlLnN0cmVuZ3RoOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3N0cmVuZ3RoUmF0aW8nXSkgeyB0aGlzLnN0cmVuZ3RoID0gbmV3IGZoaXIuUmF0aW8oc291cmNlLnN0cmVuZ3RoUmF0aW8pOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3N0cmVuZ3RoUmF0aW9SYW5nZSddKSB7IHRoaXMuc3RyZW5ndGggPSBuZXcgZmhpci5SYXRpb1JhbmdlKHNvdXJjZS5zdHJlbmd0aFJhdGlvUmFuZ2UpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdHJlbmd0aCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ21lYXN1cmVtZW50UG9pbnQnXSkgeyB0aGlzLm1lYXN1cmVtZW50UG9pbnQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLm1lYXN1cmVtZW50UG9pbnR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX21lYXN1cmVtZW50UG9pbnQnXSkge1xyXG4gICAgICBpZiAodGhpcy5tZWFzdXJlbWVudFBvaW50KSB7IHRoaXMubWVhc3VyZW1lbnRQb2ludC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9tZWFzdXJlbWVudFBvaW50ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubWVhc3VyZW1lbnRQb2ludCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9tZWFzdXJlbWVudFBvaW50IGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydjb3VudHJ5J10pIHsgdGhpcy5jb3VudHJ5ID0gc291cmNlLmNvdW50cnkubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb3VudHJ5ID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdJbmdyZWRpZW50LnN1YnN0YW5jZS5zdHJlbmd0aC5yZWZlcmVuY2VTdHJlbmd0aCcgfVxyXG4gICAgdGhpcy52T1MoJ3N1YnN0YW5jZScsZXhwKVxyXG4gICAgdGhpcy52UlMoJ3N0cmVuZ3RoJyxleHApXHJcbiAgICB0aGlzLnZPUygnbWVhc3VyZW1lbnRQb2ludCcsZXhwKVxyXG4gICAgdGhpcy52T0EoJ2NvdW50cnknLGV4cClcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBJbmdyZWRpZW50U3Vic3RhbmNlU3RyZW5ndGggdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgSW5ncmVkaWVudFN1YnN0YW5jZVN0cmVuZ3RoQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIHF1YW50aXR5IG9mIHN1YnN0YW5jZSBpbiB0aGUgdW5pdCBvZiBwcmVzZW50YXRpb24sIG9yIGluIHRoZSB2b2x1bWUgKG9yIG1hc3MpIG9mIHRoZSBzaW5nbGUgcGhhcm1hY2V1dGljYWwgcHJvZHVjdCBvciBtYW51ZmFjdHVyZWQgaXRlbS4gVW5pdCBvZiBwcmVzZW50YXRpb24gcmVmZXJzIHRvIHRoZSBxdWFudGl0eSB0aGF0IHRoZSBpdGVtIG9jY3VycyBpbiBlLmcuIGEgc3RyZW5ndGggcGVyIHRhYmxldCBzaXplLCBwZXJoYXBzICdwZXIgMjBtZycgKHRoZSBzaXplIG9mIHRoZSB0YWJsZXQpLiBJdCBpcyBub3QgZ2VuZXJhbGx5IG5vcm1hbGl6ZWQgYXMgYSB1bml0YXJ5IHVuaXQsIHdoaWNoIHdvdWxkIGJlICdwZXIgbWcnKS5cclxuICAgKi9cclxuICBwcmVzZW50YXRpb24/OiBmaGlyLlJhdGlvfGZoaXIuUmF0aW9SYW5nZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHF1YW50aXR5IG9mIHN1YnN0YW5jZSBpbiB0aGUgdW5pdCBvZiBwcmVzZW50YXRpb24sIG9yIGluIHRoZSB2b2x1bWUgKG9yIG1hc3MpIG9mIHRoZSBzaW5nbGUgcGhhcm1hY2V1dGljYWwgcHJvZHVjdCBvciBtYW51ZmFjdHVyZWQgaXRlbS4gVW5pdCBvZiBwcmVzZW50YXRpb24gcmVmZXJzIHRvIHRoZSBxdWFudGl0eSB0aGF0IHRoZSBpdGVtIG9jY3VycyBpbiBlLmcuIGEgc3RyZW5ndGggcGVyIHRhYmxldCBzaXplLCBwZXJoYXBzICdwZXIgMjBtZycgKHRoZSBzaXplIG9mIHRoZSB0YWJsZXQpLiBJdCBpcyBub3QgZ2VuZXJhbGx5IG5vcm1hbGl6ZWQgYXMgYSB1bml0YXJ5IHVuaXQsIHdoaWNoIHdvdWxkIGJlICdwZXIgbWcnKS5cclxuICAgKi9cclxuICBwcmVzZW50YXRpb25SYXRpbz86IGZoaXIuUmF0aW9BcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcXVhbnRpdHkgb2Ygc3Vic3RhbmNlIGluIHRoZSB1bml0IG9mIHByZXNlbnRhdGlvbiwgb3IgaW4gdGhlIHZvbHVtZSAob3IgbWFzcykgb2YgdGhlIHNpbmdsZSBwaGFybWFjZXV0aWNhbCBwcm9kdWN0IG9yIG1hbnVmYWN0dXJlZCBpdGVtLiBVbml0IG9mIHByZXNlbnRhdGlvbiByZWZlcnMgdG8gdGhlIHF1YW50aXR5IHRoYXQgdGhlIGl0ZW0gb2NjdXJzIGluIGUuZy4gYSBzdHJlbmd0aCBwZXIgdGFibGV0IHNpemUsIHBlcmhhcHMgJ3BlciAyMG1nJyAodGhlIHNpemUgb2YgdGhlIHRhYmxldCkuIEl0IGlzIG5vdCBnZW5lcmFsbHkgbm9ybWFsaXplZCBhcyBhIHVuaXRhcnkgdW5pdCwgd2hpY2ggd291bGQgYmUgJ3BlciBtZycpLlxyXG4gICAqL1xyXG4gIHByZXNlbnRhdGlvblJhdGlvUmFuZ2U/OiBmaGlyLlJhdGlvUmFuZ2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHRleHR1YWwgcmVwcmVzZW50aW9uIG9mIGVpdGhlciB0aGUgd2hvbGUgb2YgdGhlIHByZXNlbnRhdGlvbiBzdHJlbmd0aCBvciBhIHBhcnQgb2YgaXQgLSB3aXRoIHRoZSByZXN0IGJlaW5nIGluIFN0cmVuZ3RoLnByZXNlbnRhdGlvbiBhcyBhIHJhdGlvLlxyXG4gICAqL1xyXG4gIHRleHRQcmVzZW50YXRpb24/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogSW5ncmVkaWVudC5zdWJzdGFuY2Uuc3RyZW5ndGgudGV4dFByZXNlbnRhdGlvblxyXG4gICAqL1xyXG4gIF90ZXh0UHJlc2VudGF0aW9uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgc3RyZW5ndGggcGVyIHVuaXRhcnkgdm9sdW1lIChvciBtYXNzKS5cclxuICAgKi9cclxuICBjb25jZW50cmF0aW9uPzogZmhpci5SYXRpb3xmaGlyLlJhdGlvUmFuZ2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzdHJlbmd0aCBwZXIgdW5pdGFyeSB2b2x1bWUgKG9yIG1hc3MpLlxyXG4gICAqL1xyXG4gIGNvbmNlbnRyYXRpb25SYXRpbz86IGZoaXIuUmF0aW9BcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc3RyZW5ndGggcGVyIHVuaXRhcnkgdm9sdW1lIChvciBtYXNzKS5cclxuICAgKi9cclxuICBjb25jZW50cmF0aW9uUmF0aW9SYW5nZT86IGZoaXIuUmF0aW9SYW5nZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgdGV4dHVhbCByZXByZXNlbnRpb24gb2YgZWl0aGVyIHRoZSB3aG9sZSBvZiB0aGUgY29uY2VudHJhdGlvbiBzdHJlbmd0aCBvciBhIHBhcnQgb2YgaXQgLSB3aXRoIHRoZSByZXN0IGJlaW5nIGluIFN0cmVuZ3RoLmNvbmNlbnRyYXRpb24gYXMgYSByYXRpby5cclxuICAgKi9cclxuICB0ZXh0Q29uY2VudHJhdGlvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBJbmdyZWRpZW50LnN1YnN0YW5jZS5zdHJlbmd0aC50ZXh0Q29uY2VudHJhdGlvblxyXG4gICAqL1xyXG4gIF90ZXh0Q29uY2VudHJhdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogRm9yIHdoZW4gc3RyZW5ndGggaXMgbWVhc3VyZWQgYXQgYSBwYXJ0aWN1bGFyIHBvaW50IG9yIGRpc3RhbmNlLiBUaGVyZSBhcmUgcHJvZHVjdHMgd2hlcmUgc3RyZW5ndGggaXMgbWVhc3VyZWQgYXQgYSBwYXJ0aWN1bGFyIHBvaW50LiBGb3IgZXhhbXBsZSwgdGhlIHN0cmVuZ3RoIG9mIHRoZSBpbmdyZWRpZW50IGluIHNvbWUgaW5oYWxlcnMgaXMgbWVhc3VyZWQgYXQgYSBwYXJ0aWN1bGFyIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSBwb2ludCBvZiBhZXJvc29saXphdGlvbi5cclxuICAgKi9cclxuICBtZWFzdXJlbWVudFBvaW50PzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEluZ3JlZGllbnQuc3Vic3RhbmNlLnN0cmVuZ3RoLm1lYXN1cmVtZW50UG9pbnRcclxuICAgKi9cclxuICBfbWVhc3VyZW1lbnRQb2ludD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNvdW50cnkgb3IgY291bnRyaWVzIGZvciB3aGljaCB0aGUgc3RyZW5ndGggcmFuZ2UgYXBwbGllcy5cclxuICAgKi9cclxuICBjb3VudHJ5PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFN0cmVuZ3RoIGV4cHJlc3NlZCBpbiB0ZXJtcyBvZiBhIHJlZmVyZW5jZSBzdWJzdGFuY2UuIEZvciB3aGVuIHRoZSBpbmdyZWRpZW50IHN0cmVuZ3RoIGlzIGFkZGl0aW9uYWxseSBleHByZXNzZWQgYXMgZXF1aXZhbGVudCB0byB0aGUgc3RyZW5ndGggb2Ygc29tZSBvdGhlciBjbG9zZWx5IHJlbGF0ZWQgc3Vic3RhbmNlIChlLmcuIHNhbHQgdnMuIGJhc2UpLiBSZWZlcmVuY2Ugc3RyZW5ndGggcmVwcmVzZW50cyB0aGUgc3RyZW5ndGggKHF1YW50aXRhdGl2ZSBjb21wb3NpdGlvbikgb2YgdGhlIGFjdGl2ZSBtb2lldHkgb2YgdGhlIGFjdGl2ZSBzdWJzdGFuY2UuIFRoZXJlIGFyZSBzaXR1YXRpb25zIHdoZW4gdGhlIGFjdGl2ZSBzdWJzdGFuY2UgYW5kIGFjdGl2ZSBtb2lldHkgYXJlIGRpZmZlcmVudCwgdGhlcmVmb3JlIGJvdGggYSBzdHJlbmd0aCBhbmQgYSByZWZlcmVuY2Ugc3RyZW5ndGggYXJlIG5lZWRlZC5cclxuICAgKi9cclxuICByZWZlcmVuY2VTdHJlbmd0aD86IGZoaXIuSW5ncmVkaWVudFN1YnN0YW5jZVN0cmVuZ3RoUmVmZXJlbmNlU3RyZW5ndGhBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlIHF1YW50aXR5IG9mIHN1YnN0YW5jZSBpbiB0aGUgdW5pdCBvZiBwcmVzZW50YXRpb24sIG9yIGluIHRoZSB2b2x1bWUgKG9yIG1hc3MpIG9mIHRoZSBzaW5nbGUgcGhhcm1hY2V1dGljYWwgcHJvZHVjdCBvciBtYW51ZmFjdHVyZWQgaXRlbS4gVGhlIGFsbG93ZWQgcmVwZXRpdGlvbnMgZG8gbm90IHJlcHJlc2VudCBkaWZmZXJlbnQgc3RyZW5ndGhzLCBidXQgYXJlIGRpZmZlcmVudCByZXByZXNlbnRhdGlvbnMgLSBtYXRoZW1hdGljYWxseSBlcXVpdmFsZW50IC0gb2YgYSBzaW5nbGUgc3RyZW5ndGguXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgSW5ncmVkaWVudFN1YnN0YW5jZVN0cmVuZ3RoIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnSW5ncmVkaWVudFN1YnN0YW5jZVN0cmVuZ3RoJztcclxuICAvKipcclxuICAgKiBUaGUgcXVhbnRpdHkgb2Ygc3Vic3RhbmNlIGluIHRoZSB1bml0IG9mIHByZXNlbnRhdGlvbiwgb3IgaW4gdGhlIHZvbHVtZSAob3IgbWFzcykgb2YgdGhlIHNpbmdsZSBwaGFybWFjZXV0aWNhbCBwcm9kdWN0IG9yIG1hbnVmYWN0dXJlZCBpdGVtLiBVbml0IG9mIHByZXNlbnRhdGlvbiByZWZlcnMgdG8gdGhlIHF1YW50aXR5IHRoYXQgdGhlIGl0ZW0gb2NjdXJzIGluIGUuZy4gYSBzdHJlbmd0aCBwZXIgdGFibGV0IHNpemUsIHBlcmhhcHMgJ3BlciAyMG1nJyAodGhlIHNpemUgb2YgdGhlIHRhYmxldCkuIEl0IGlzIG5vdCBnZW5lcmFsbHkgbm9ybWFsaXplZCBhcyBhIHVuaXRhcnkgdW5pdCwgd2hpY2ggd291bGQgYmUgJ3BlciBtZycpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcmVzZW50YXRpb24/OiAoZmhpci5SYXRpb3xmaGlyLlJhdGlvUmFuZ2UpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IEluZ3JlZGllbnQuc3Vic3RhbmNlLnN0cmVuZ3RoLnByZXNlbnRhdGlvblt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c19wcmVzZW50YXRpb25Jc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBBIHRleHR1YWwgcmVwcmVzZW50aW9uIG9mIGVpdGhlciB0aGUgd2hvbGUgb2YgdGhlIHByZXNlbnRhdGlvbiBzdHJlbmd0aCBvciBhIHBhcnQgb2YgaXQgLSB3aXRoIHRoZSByZXN0IGJlaW5nIGluIFN0cmVuZ3RoLnByZXNlbnRhdGlvbiBhcyBhIHJhdGlvLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0ZXh0UHJlc2VudGF0aW9uPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc3RyZW5ndGggcGVyIHVuaXRhcnkgdm9sdW1lIChvciBtYXNzKS5cclxuICAgKi9cclxuICBwdWJsaWMgY29uY2VudHJhdGlvbj86IChmaGlyLlJhdGlvfGZoaXIuUmF0aW9SYW5nZSl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgSW5ncmVkaWVudC5zdWJzdGFuY2Uuc3RyZW5ndGguY29uY2VudHJhdGlvblt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c19jb25jZW50cmF0aW9uSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogQSB0ZXh0dWFsIHJlcHJlc2VudGlvbiBvZiBlaXRoZXIgdGhlIHdob2xlIG9mIHRoZSBjb25jZW50cmF0aW9uIHN0cmVuZ3RoIG9yIGEgcGFydCBvZiBpdCAtIHdpdGggdGhlIHJlc3QgYmVpbmcgaW4gU3RyZW5ndGguY29uY2VudHJhdGlvbiBhcyBhIHJhdGlvLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0ZXh0Q29uY2VudHJhdGlvbj86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRm9yIHdoZW4gc3RyZW5ndGggaXMgbWVhc3VyZWQgYXQgYSBwYXJ0aWN1bGFyIHBvaW50IG9yIGRpc3RhbmNlLiBUaGVyZSBhcmUgcHJvZHVjdHMgd2hlcmUgc3RyZW5ndGggaXMgbWVhc3VyZWQgYXQgYSBwYXJ0aWN1bGFyIHBvaW50LiBGb3IgZXhhbXBsZSwgdGhlIHN0cmVuZ3RoIG9mIHRoZSBpbmdyZWRpZW50IGluIHNvbWUgaW5oYWxlcnMgaXMgbWVhc3VyZWQgYXQgYSBwYXJ0aWN1bGFyIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSBwb2ludCBvZiBhZXJvc29saXphdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgbWVhc3VyZW1lbnRQb2ludD86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNvdW50cnkgb3IgY291bnRyaWVzIGZvciB3aGljaCB0aGUgc3RyZW5ndGggcmFuZ2UgYXBwbGllcy5cclxuICAgKi9cclxuICBwdWJsaWMgY291bnRyeTogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBTdHJlbmd0aCBleHByZXNzZWQgaW4gdGVybXMgb2YgYSByZWZlcmVuY2Ugc3Vic3RhbmNlLiBGb3Igd2hlbiB0aGUgaW5ncmVkaWVudCBzdHJlbmd0aCBpcyBhZGRpdGlvbmFsbHkgZXhwcmVzc2VkIGFzIGVxdWl2YWxlbnQgdG8gdGhlIHN0cmVuZ3RoIG9mIHNvbWUgb3RoZXIgY2xvc2VseSByZWxhdGVkIHN1YnN0YW5jZSAoZS5nLiBzYWx0IHZzLiBiYXNlKS4gUmVmZXJlbmNlIHN0cmVuZ3RoIHJlcHJlc2VudHMgdGhlIHN0cmVuZ3RoIChxdWFudGl0YXRpdmUgY29tcG9zaXRpb24pIG9mIHRoZSBhY3RpdmUgbW9pZXR5IG9mIHRoZSBhY3RpdmUgc3Vic3RhbmNlLiBUaGVyZSBhcmUgc2l0dWF0aW9ucyB3aGVuIHRoZSBhY3RpdmUgc3Vic3RhbmNlIGFuZCBhY3RpdmUgbW9pZXR5IGFyZSBkaWZmZXJlbnQsIHRoZXJlZm9yZSBib3RoIGEgc3RyZW5ndGggYW5kIGEgcmVmZXJlbmNlIHN0cmVuZ3RoIGFyZSBuZWVkZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHJlZmVyZW5jZVN0cmVuZ3RoOiBmaGlyLkluZ3JlZGllbnRTdWJzdGFuY2VTdHJlbmd0aFJlZmVyZW5jZVN0cmVuZ3RoW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgSW5ncmVkaWVudFN1YnN0YW5jZVN0cmVuZ3RoIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8SW5ncmVkaWVudFN1YnN0YW5jZVN0cmVuZ3RoQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3ByZXNlbnRhdGlvbiddKSB7IHRoaXMucHJlc2VudGF0aW9uID0gc291cmNlLnByZXNlbnRhdGlvbjsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydwcmVzZW50YXRpb25SYXRpbyddKSB7IHRoaXMucHJlc2VudGF0aW9uID0gbmV3IGZoaXIuUmF0aW8oc291cmNlLnByZXNlbnRhdGlvblJhdGlvKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydwcmVzZW50YXRpb25SYXRpb1JhbmdlJ10pIHsgdGhpcy5wcmVzZW50YXRpb24gPSBuZXcgZmhpci5SYXRpb1JhbmdlKHNvdXJjZS5wcmVzZW50YXRpb25SYXRpb1JhbmdlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndGV4dFByZXNlbnRhdGlvbiddKSB7IHRoaXMudGV4dFByZXNlbnRhdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UudGV4dFByZXNlbnRhdGlvbn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfdGV4dFByZXNlbnRhdGlvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLnRleHRQcmVzZW50YXRpb24pIHsgdGhpcy50ZXh0UHJlc2VudGF0aW9uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3RleHRQcmVzZW50YXRpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy50ZXh0UHJlc2VudGF0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3RleHRQcmVzZW50YXRpb24gYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2NvbmNlbnRyYXRpb24nXSkgeyB0aGlzLmNvbmNlbnRyYXRpb24gPSBzb3VyY2UuY29uY2VudHJhdGlvbjsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydjb25jZW50cmF0aW9uUmF0aW8nXSkgeyB0aGlzLmNvbmNlbnRyYXRpb24gPSBuZXcgZmhpci5SYXRpbyhzb3VyY2UuY29uY2VudHJhdGlvblJhdGlvKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydjb25jZW50cmF0aW9uUmF0aW9SYW5nZSddKSB7IHRoaXMuY29uY2VudHJhdGlvbiA9IG5ldyBmaGlyLlJhdGlvUmFuZ2Uoc291cmNlLmNvbmNlbnRyYXRpb25SYXRpb1JhbmdlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndGV4dENvbmNlbnRyYXRpb24nXSkgeyB0aGlzLnRleHRDb25jZW50cmF0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS50ZXh0Q29uY2VudHJhdGlvbn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfdGV4dENvbmNlbnRyYXRpb24nXSkge1xyXG4gICAgICBpZiAodGhpcy50ZXh0Q29uY2VudHJhdGlvbikgeyB0aGlzLnRleHRDb25jZW50cmF0aW9uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3RleHRDb25jZW50cmF0aW9uISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudGV4dENvbmNlbnRyYXRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fdGV4dENvbmNlbnRyYXRpb24gYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ21lYXN1cmVtZW50UG9pbnQnXSkgeyB0aGlzLm1lYXN1cmVtZW50UG9pbnQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLm1lYXN1cmVtZW50UG9pbnR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX21lYXN1cmVtZW50UG9pbnQnXSkge1xyXG4gICAgICBpZiAodGhpcy5tZWFzdXJlbWVudFBvaW50KSB7IHRoaXMubWVhc3VyZW1lbnRQb2ludC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9tZWFzdXJlbWVudFBvaW50ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubWVhc3VyZW1lbnRQb2ludCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9tZWFzdXJlbWVudFBvaW50IGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydjb3VudHJ5J10pIHsgdGhpcy5jb3VudHJ5ID0gc291cmNlLmNvdW50cnkubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb3VudHJ5ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3JlZmVyZW5jZVN0cmVuZ3RoJ10pIHsgdGhpcy5yZWZlcmVuY2VTdHJlbmd0aCA9IHNvdXJjZS5yZWZlcmVuY2VTdHJlbmd0aC5tYXAoKHgpID0+IG5ldyBmaGlyLkluZ3JlZGllbnRTdWJzdGFuY2VTdHJlbmd0aFJlZmVyZW5jZVN0cmVuZ3RoKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVmZXJlbmNlU3RyZW5ndGggPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0luZ3JlZGllbnQuc3Vic3RhbmNlLnN0cmVuZ3RoJyB9XHJcbiAgICB0aGlzLnZPUygncHJlc2VudGF0aW9uJyxleHApXHJcbiAgICB0aGlzLnZPUygndGV4dFByZXNlbnRhdGlvbicsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2NvbmNlbnRyYXRpb24nLGV4cClcclxuICAgIHRoaXMudk9TKCd0ZXh0Q29uY2VudHJhdGlvbicsZXhwKVxyXG4gICAgdGhpcy52T1MoJ21lYXN1cmVtZW50UG9pbnQnLGV4cClcclxuICAgIHRoaXMudk9BKCdjb3VudHJ5JyxleHApXHJcbiAgICB0aGlzLnZPQSgncmVmZXJlbmNlU3RyZW5ndGgnLGV4cClcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBJbmdyZWRpZW50U3Vic3RhbmNlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEluZ3JlZGllbnRTdWJzdGFuY2VBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBBIGNvZGUgb3IgZnVsbCByZXNvdXJjZSB0aGF0IHJlcHJlc2VudHMgdGhlIGluZ3JlZGllbnQncyBzdWJzdGFuY2UuXHJcbiAgICovXHJcbiAgY29kZTogZmhpci5Db2RlYWJsZVJlZmVyZW5jZUFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgcXVhbnRpdHkgb2Ygc3Vic3RhbmNlIGluIHRoZSB1bml0IG9mIHByZXNlbnRhdGlvbiwgb3IgaW4gdGhlIHZvbHVtZSAob3IgbWFzcykgb2YgdGhlIHNpbmdsZSBwaGFybWFjZXV0aWNhbCBwcm9kdWN0IG9yIG1hbnVmYWN0dXJlZCBpdGVtLiBUaGUgYWxsb3dlZCByZXBldGl0aW9ucyBkbyBub3QgcmVwcmVzZW50IGRpZmZlcmVudCBzdHJlbmd0aHMsIGJ1dCBhcmUgZGlmZmVyZW50IHJlcHJlc2VudGF0aW9ucyAtIG1hdGhlbWF0aWNhbGx5IGVxdWl2YWxlbnQgLSBvZiBhIHNpbmdsZSBzdHJlbmd0aC5cclxuICAgKi9cclxuICBzdHJlbmd0aD86IGZoaXIuSW5ncmVkaWVudFN1YnN0YW5jZVN0cmVuZ3RoQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBzdWJzdGFuY2UgdGhhdCBjb21wcmlzZXMgdGhpcyBpbmdyZWRpZW50LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEluZ3JlZGllbnRTdWJzdGFuY2UgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdJbmdyZWRpZW50U3Vic3RhbmNlJztcclxuICAvKipcclxuICAgKiBBIGNvZGUgb3IgZnVsbCByZXNvdXJjZSB0aGF0IHJlcHJlc2VudHMgdGhlIGluZ3JlZGllbnQncyBzdWJzdGFuY2UuXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGU6IGZoaXIuQ29kZWFibGVSZWZlcmVuY2V8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgcXVhbnRpdHkgb2Ygc3Vic3RhbmNlIGluIHRoZSB1bml0IG9mIHByZXNlbnRhdGlvbiwgb3IgaW4gdGhlIHZvbHVtZSAob3IgbWFzcykgb2YgdGhlIHNpbmdsZSBwaGFybWFjZXV0aWNhbCBwcm9kdWN0IG9yIG1hbnVmYWN0dXJlZCBpdGVtLiBUaGUgYWxsb3dlZCByZXBldGl0aW9ucyBkbyBub3QgcmVwcmVzZW50IGRpZmZlcmVudCBzdHJlbmd0aHMsIGJ1dCBhcmUgZGlmZmVyZW50IHJlcHJlc2VudGF0aW9ucyAtIG1hdGhlbWF0aWNhbGx5IGVxdWl2YWxlbnQgLSBvZiBhIHNpbmdsZSBzdHJlbmd0aC5cclxuICAgKi9cclxuICBwdWJsaWMgc3RyZW5ndGg6IGZoaXIuSW5ncmVkaWVudFN1YnN0YW5jZVN0cmVuZ3RoW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgSW5ncmVkaWVudFN1YnN0YW5jZSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEluZ3JlZGllbnRTdWJzdGFuY2VBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkNvZGVhYmxlUmVmZXJlbmNlKHNvdXJjZS5jb2RlKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY29kZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0cmVuZ3RoJ10pIHsgdGhpcy5zdHJlbmd0aCA9IHNvdXJjZS5zdHJlbmd0aC5tYXAoKHgpID0+IG5ldyBmaGlyLkluZ3JlZGllbnRTdWJzdGFuY2VTdHJlbmd0aCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0cmVuZ3RoID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdJbmdyZWRpZW50LnN1YnN0YW5jZScgfVxyXG4gICAgdGhpcy52UlMoJ2NvZGUnLGV4cClcclxuICAgIHRoaXMudk9BKCdzdHJlbmd0aCcsZXhwKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEluZ3JlZGllbnQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgSW5ncmVkaWVudEFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIkluZ3JlZGllbnRcInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGlkZW50aWZpZXIocykgb2YgdGhpcyBJbmdyZWRpZW50IHRoYXQgYXJlIGFzc2lnbmVkIGJ5IGJ1c2luZXNzIHByb2Nlc3NlcyBhbmQvb3IgdXNlZCB0byByZWZlciB0byBpdCB3aGVuIGEgZGlyZWN0IFVSTCByZWZlcmVuY2UgdG8gdGhlIHJlc291cmNlIGl0c2VsZiBpcyBub3QgYXBwcm9wcmlhdGUuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFsbG93cyBmaWx0ZXJpbmcgb2YgaW5ncmVkaWVudCB0aGF0IGFyZSBhcHByb3ByaWF0ZSBmb3IgdXNlIHZlcnN1cyBub3QuXHJcbiAgICovXHJcbiAgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPFB1YmxpY2F0aW9uU3RhdHVzQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEluZ3JlZGllbnQuc3RhdHVzXHJcbiAgICovXHJcbiAgX3N0YXR1cz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHByb2R1Y3Qgd2hpY2ggdGhpcyBpbmdyZWRpZW50IGlzIGEgY29uc3RpdHVlbnQgcGFydCBvZi5cclxuICAgKi9cclxuICBmb3I/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBjbGFzc2lmaWNhdGlvbiBvZiB0aGUgaW5ncmVkaWVudCBpZGVudGlmeWluZyBpdHMgcHVycG9zZSB3aXRoaW4gdGhlIHByb2R1Y3QsIGUuZy4gYWN0aXZlLCBpbmFjdGl2ZS5cclxuICAgKi9cclxuICByb2xlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBBIGNsYXNzaWZpY2F0aW9uIG9mIHRoZSBpbmdyZWRpZW50IGlkZW50aWZ5aW5nIGl0cyBwcmVjaXNlIHB1cnBvc2UocykgaW4gdGhlIGRydWcgcHJvZHVjdC4gVGhpcyBleHRlbmRzIHRoZSBJbmdyZWRpZW50LnJvbGUgdG8gYWRkIG1vcmUgZGV0YWlsLiBFeGFtcGxlOiBhbnRpb3hpZGFudCwgYWxrYWxpemluZyBhZ2VudC5cclxuICAgKi9cclxuICBmdW5jdGlvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZiB0aGUgaW5ncmVkaWVudCBpcyBhIGtub3duIG9yIHN1c3BlY3RlZCBhbGxlcmdlbi4gTm90ZSB0aGF0IHRoaXMgaXMgYSBwcm9wZXJ0eSBvZiB0aGUgc3Vic3RhbmNlLCBzbyBpZiBhIHJlZmVyZW5jZSB0byBhIFN1YnN0YW5jZURlZmluaXRpb24gaXMgdXNlZCB0byBkZWNyaWJlIHRoYXQgKHJhdGhlciB0aGFuIGp1c3QgYSBjb2RlKSwgdGhlIGFsbGVyZ2VuIGluZm9ybWF0aW9uIHNob3VsZCBnbyB0aGVyZSwgbm90IGhlcmUuXHJcbiAgICovXHJcbiAgYWxsZXJnZW5pY0luZGljYXRvcj86IGZoaXIuRmhpckJvb2xlYW58Ym9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEluZ3JlZGllbnQuYWxsZXJnZW5pY0luZGljYXRvclxyXG4gICAqL1xyXG4gIF9hbGxlcmdlbmljSW5kaWNhdG9yPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgb3JnYW5pemF0aW9uKHMpIHRoYXQgbWFudWZhY3R1cmUgdGhpcyBpbmdyZWRpZW50LiBDYW4gYmUgdXNlZCB0byBpbmRpY2F0ZTogICAgICAgICAxKSBPcmdhbml6YXRpb25zIHdlIGFyZSBhd2FyZSBvZiB0aGF0IG1hbnVmYWN0dXJlIHRoaXMgaW5ncmVkaWVudCAgICAgICAgIDIpIFNwZWNpZmljIE1hbnVmYWN0dXJlcihzKSBjdXJyZW50bHkgYmVpbmcgdXNlZCAgICAgICAgIDMpIFNldCBvZiBvcmdhbmlzYXRpb25zIGFsbG93ZWQgdG8gbWFudWZhY3R1cmUgdGhpcyBpbmdyZWRpZW50IGZvciB0aGlzIHByb2R1Y3QgICAgICAgICBVc2VycyBtdXN0IGJlIGNsZWFyIG9uIHRoZSBhcHBsaWNhdGlvbiBvZiBjb250ZXh0IHJlbGV2YW50IHRvIHRoZWlyIHVzZSBjYXNlLlxyXG4gICAqL1xyXG4gIG1hbnVmYWN0dXJlcj86IGZoaXIuSW5ncmVkaWVudE1hbnVmYWN0dXJlckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHN1YnN0YW5jZSB0aGF0IGNvbXByaXNlcyB0aGlzIGluZ3JlZGllbnQuXHJcbiAgICovXHJcbiAgc3Vic3RhbmNlOiBmaGlyLkluZ3JlZGllbnRTdWJzdGFuY2VBcmdzfG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBbiBpbmdyZWRpZW50IG9mIGEgbWFudWZhY3R1cmVkIGl0ZW0gb3IgcGhhcm1hY2V1dGljYWwgcHJvZHVjdC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBJbmdyZWRpZW50IGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdJbmdyZWRpZW50JztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIkluZ3JlZGllbnRcIjtcclxuICAvKipcclxuICAgKiBUaGUgaWRlbnRpZmllcihzKSBvZiB0aGlzIEluZ3JlZGllbnQgdGhhdCBhcmUgYXNzaWduZWQgYnkgYnVzaW5lc3MgcHJvY2Vzc2VzIGFuZC9vciB1c2VkIHRvIHJlZmVyIHRvIGl0IHdoZW4gYSBkaXJlY3QgVVJMIHJlZmVyZW5jZSB0byB0aGUgcmVzb3VyY2UgaXRzZWxmIGlzIG5vdCBhcHByb3ByaWF0ZS5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWxsb3dzIGZpbHRlcmluZyBvZiBpbmdyZWRpZW50IHRoYXQgYXJlIGFwcHJvcHJpYXRlIGZvciB1c2UgdmVyc3VzIG5vdC5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPFB1YmxpY2F0aW9uU3RhdHVzQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIHByb2R1Y3Qgd2hpY2ggdGhpcyBpbmdyZWRpZW50IGlzIGEgY29uc3RpdHVlbnQgcGFydCBvZi5cclxuICAgKi9cclxuICBwdWJsaWMgZm9yOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIEEgY2xhc3NpZmljYXRpb24gb2YgdGhlIGluZ3JlZGllbnQgaWRlbnRpZnlpbmcgaXRzIHB1cnBvc2Ugd2l0aGluIHRoZSBwcm9kdWN0LCBlLmcuIGFjdGl2ZSwgaW5hY3RpdmUuXHJcbiAgICovXHJcbiAgcHVibGljIHJvbGU6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogQSBjbGFzc2lmaWNhdGlvbiBvZiB0aGUgaW5ncmVkaWVudCBpZGVudGlmeWluZyBpdHMgcHJlY2lzZSBwdXJwb3NlKHMpIGluIHRoZSBkcnVnIHByb2R1Y3QuIFRoaXMgZXh0ZW5kcyB0aGUgSW5ncmVkaWVudC5yb2xlIHRvIGFkZCBtb3JlIGRldGFpbC4gRXhhbXBsZTogYW50aW94aWRhbnQsIGFsa2FsaXppbmcgYWdlbnQuXHJcbiAgICovXHJcbiAgcHVibGljIGZ1bmN0aW9uOiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIElmIHRoZSBpbmdyZWRpZW50IGlzIGEga25vd24gb3Igc3VzcGVjdGVkIGFsbGVyZ2VuLiBOb3RlIHRoYXQgdGhpcyBpcyBhIHByb3BlcnR5IG9mIHRoZSBzdWJzdGFuY2UsIHNvIGlmIGEgcmVmZXJlbmNlIHRvIGEgU3Vic3RhbmNlRGVmaW5pdGlvbiBpcyB1c2VkIHRvIGRlY3JpYmUgdGhhdCAocmF0aGVyIHRoYW4ganVzdCBhIGNvZGUpLCB0aGUgYWxsZXJnZW4gaW5mb3JtYXRpb24gc2hvdWxkIGdvIHRoZXJlLCBub3QgaGVyZS5cclxuICAgKi9cclxuICBwdWJsaWMgYWxsZXJnZW5pY0luZGljYXRvcj86IGZoaXIuRmhpckJvb2xlYW58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBvcmdhbml6YXRpb24ocykgdGhhdCBtYW51ZmFjdHVyZSB0aGlzIGluZ3JlZGllbnQuIENhbiBiZSB1c2VkIHRvIGluZGljYXRlOiAgICAgICAgIDEpIE9yZ2FuaXphdGlvbnMgd2UgYXJlIGF3YXJlIG9mIHRoYXQgbWFudWZhY3R1cmUgdGhpcyBpbmdyZWRpZW50ICAgICAgICAgMikgU3BlY2lmaWMgTWFudWZhY3R1cmVyKHMpIGN1cnJlbnRseSBiZWluZyB1c2VkICAgICAgICAgMykgU2V0IG9mIG9yZ2FuaXNhdGlvbnMgYWxsb3dlZCB0byBtYW51ZmFjdHVyZSB0aGlzIGluZ3JlZGllbnQgZm9yIHRoaXMgcHJvZHVjdCAgICAgICAgIFVzZXJzIG11c3QgYmUgY2xlYXIgb24gdGhlIGFwcGxpY2F0aW9uIG9mIGNvbnRleHQgcmVsZXZhbnQgdG8gdGhlaXIgdXNlIGNhc2UuXHJcbiAgICovXHJcbiAgcHVibGljIG1hbnVmYWN0dXJlcjogZmhpci5JbmdyZWRpZW50TWFudWZhY3R1cmVyW107XHJcbiAgLyoqXHJcbiAgICogVGhlIHN1YnN0YW5jZSB0aGF0IGNvbXByaXNlcyB0aGlzIGluZ3JlZGllbnQuXHJcbiAgICovXHJcbiAgcHVibGljIHN1YnN0YW5jZTogZmhpci5JbmdyZWRpZW50U3Vic3RhbmNlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgSW5ncmVkaWVudCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEluZ3JlZGllbnRBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnSW5ncmVkaWVudCc7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gbmV3IGZoaXIuSWRlbnRpZmllcihzb3VyY2UuaWRlbnRpZmllcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0YXR1cyddKSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8UHVibGljYXRpb25TdGF0dXNDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2Uuc3RhdHVzfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zdGF0dXMnXSkge1xyXG4gICAgICBpZiAodGhpcy5zdGF0dXMpIHsgdGhpcy5zdGF0dXMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc3RhdHVzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8UHVibGljYXRpb25TdGF0dXNDb2RlVHlwZT4oc291cmNlLl9zdGF0dXMgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2ZvciddKSB7IHRoaXMuZm9yID0gc291cmNlLmZvci5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmZvciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydyb2xlJ10pIHsgdGhpcy5yb2xlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5yb2xlKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucm9sZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ2Z1bmN0aW9uJ10pIHsgdGhpcy5mdW5jdGlvbiA9IHNvdXJjZS5mdW5jdGlvbi5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmZ1bmN0aW9uID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2FsbGVyZ2VuaWNJbmRpY2F0b3InXSkgeyB0aGlzLmFsbGVyZ2VuaWNJbmRpY2F0b3IgPSBuZXcgZmhpci5GaGlyQm9vbGVhbih7dmFsdWU6IHNvdXJjZS5hbGxlcmdlbmljSW5kaWNhdG9yfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19hbGxlcmdlbmljSW5kaWNhdG9yJ10pIHtcclxuICAgICAgaWYgKHRoaXMuYWxsZXJnZW5pY0luZGljYXRvcikgeyB0aGlzLmFsbGVyZ2VuaWNJbmRpY2F0b3IuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fYWxsZXJnZW5pY0luZGljYXRvciEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmFsbGVyZ2VuaWNJbmRpY2F0b3IgPSBuZXcgZmhpci5GaGlyQm9vbGVhbihzb3VyY2UuX2FsbGVyZ2VuaWNJbmRpY2F0b3IgYXMgUGFydGlhbDxmaGlyLkZoaXJCb29sZWFuQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydtYW51ZmFjdHVyZXInXSkgeyB0aGlzLm1hbnVmYWN0dXJlciA9IHNvdXJjZS5tYW51ZmFjdHVyZXIubWFwKCh4KSA9PiBuZXcgZmhpci5JbmdyZWRpZW50TWFudWZhY3R1cmVyKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubWFudWZhY3R1cmVyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3N1YnN0YW5jZSddKSB7IHRoaXMuc3Vic3RhbmNlID0gbmV3IGZoaXIuSW5ncmVkaWVudFN1YnN0YW5jZShzb3VyY2Uuc3Vic3RhbmNlKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3Vic3RhbmNlID0gbnVsbDsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0luZ3JlZGllbnQnIH1cclxuICAgIHRoaXMudlJTKCdyZXNvdXJjZVR5cGUnLGV4cClcclxuICAgIHRoaXMudk9TKCdpZGVudGlmaWVyJyxleHApXHJcbiAgICB0aGlzLnZSU1YoJ3N0YXR1cycsZXhwLCdQdWJsaWNhdGlvblN0YXR1cycsUHVibGljYXRpb25TdGF0dXNWc1ZhbGlkYXRpb24sJ3InKVxyXG4gICAgdGhpcy52T0EoJ2ZvcicsZXhwKVxyXG4gICAgdGhpcy52UlMoJ3JvbGUnLGV4cClcclxuICAgIHRoaXMudk9BKCdmdW5jdGlvbicsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2FsbGVyZ2VuaWNJbmRpY2F0b3InLGV4cClcclxuICAgIHRoaXMudk9BKCdtYW51ZmFjdHVyZXInLGV4cClcclxuICAgIHRoaXMudlJTKCdzdWJzdGFuY2UnLGV4cClcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbiJdfQ==