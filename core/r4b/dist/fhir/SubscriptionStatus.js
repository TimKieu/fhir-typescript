// <auto-generated/>
// Contents of: hl7.fhir.r4b.core version: 4.3.0
// Minimum TypeScript Version: 3.7
// FHIR Resource: SubscriptionStatus
import * as fhir from '../fhir.js';
// @ts-ignore
import { SubscriptionStatusVsValidation } from '../fhirValueSets/SubscriptionStatusVsValidation.js';
// @ts-ignore
import { SubscriptionNotificationTypeVsValidation } from '../fhirValueSets/SubscriptionNotificationTypeVsValidation.js';
/**
 * Detailed information about events relevant to this subscription notification.
 */
export class SubscriptionStatusNotificationEvent extends fhir.BackboneElement {
    /**
     * Default constructor for SubscriptionStatusNotificationEvent - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['eventNumber']) {
            this.eventNumber = new fhir.FhirString({ value: source.eventNumber });
        }
        else {
            this.eventNumber = null;
        }
        if (source['_eventNumber']) {
            if (this.eventNumber) {
                this.eventNumber.addExtendedProperties(source._eventNumber);
            }
            else {
                this.eventNumber = new fhir.FhirString(source._eventNumber);
            }
        }
        if (source['timestamp']) {
            this.timestamp = new fhir.FhirInstant({ value: source.timestamp });
        }
        if (source['_timestamp']) {
            if (this.timestamp) {
                this.timestamp.addExtendedProperties(source._timestamp);
            }
            else {
                this.timestamp = new fhir.FhirInstant(source._timestamp);
            }
        }
        if (source['focus']) {
            this.focus = new fhir.Reference(source.focus);
        }
        if (source['additionalContext']) {
            this.additionalContext = source.additionalContext.map((x) => new fhir.Reference(x));
        }
        else {
            this.additionalContext = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SubscriptionStatus.notificationEvent';
        }
        this.vRS('eventNumber', exp);
        this.vOS('timestamp', exp);
        this.vOS('focus', exp);
        this.vOA('additionalContext', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubscriptionStatusNotificationEvent._fts_dataType = 'SubscriptionStatusNotificationEvent';
/**
 * The SubscriptionStatus resource describes the state of a Subscription during notifications.
 */
export class SubscriptionStatus extends fhir.DomainResource {
    /**
     * Default constructor for SubscriptionStatus - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'SubscriptionStatus';
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['type']) {
            this.type = new fhir.FhirCode({ value: source.type });
        }
        else {
            this.type = null;
        }
        if (source['_type']) {
            if (this.type) {
                this.type.addExtendedProperties(source._type);
            }
            else {
                this.type = new fhir.FhirCode(source._type);
            }
        }
        if (source['eventsSinceSubscriptionStart']) {
            this.eventsSinceSubscriptionStart = new fhir.FhirString({ value: source.eventsSinceSubscriptionStart });
        }
        if (source['_eventsSinceSubscriptionStart']) {
            if (this.eventsSinceSubscriptionStart) {
                this.eventsSinceSubscriptionStart.addExtendedProperties(source._eventsSinceSubscriptionStart);
            }
            else {
                this.eventsSinceSubscriptionStart = new fhir.FhirString(source._eventsSinceSubscriptionStart);
            }
        }
        if (source['notificationEvent']) {
            this.notificationEvent = source.notificationEvent.map((x) => new fhir.SubscriptionStatusNotificationEvent(x));
        }
        else {
            this.notificationEvent = [];
        }
        if (source['subscription']) {
            this.subscription = new fhir.Reference(source.subscription);
        }
        else {
            this.subscription = null;
        }
        if (source['topic']) {
            this.topic = new fhir.FhirCanonical({ value: source.topic });
        }
        if (source['_topic']) {
            if (this.topic) {
                this.topic.addExtendedProperties(source._topic);
            }
            else {
                this.topic = new fhir.FhirCanonical(source._topic);
            }
        }
        if (source['error']) {
            this.error = source.error.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.error = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'SubscriptionStatus';
        }
        this.vRS('resourceType', exp);
        this.vOSV('status', exp, 'SubscriptionStatus', SubscriptionStatusVsValidation, 'r');
        this.vRSV('type', exp, 'SubscriptionNotificationType', SubscriptionNotificationTypeVsValidation, 'r');
        this.vOS('eventsSinceSubscriptionStart', exp);
        this.vOA('notificationEvent', exp);
        this.vRS('subscription', exp);
        this.vOS('topic', exp);
        this.vOA('error', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
SubscriptionStatus._fts_dataType = 'SubscriptionStatus';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3Vic2NyaXB0aW9uU3RhdHVzLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9TdWJzY3JpcHRpb25TdGF0dXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLGdEQUFnRDtBQUNoRCxrQ0FBa0M7QUFDbEMsb0NBQW9DO0FBRXBDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBSW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsOEJBQThCLEVBQUUsTUFBTSxvREFBb0QsQ0FBQztBQUdwRyxhQUFhO0FBQ2IsT0FBTyxFQUFFLHdDQUF3QyxFQUFFLE1BQU0sOERBQThELENBQUM7QUFtQ3hIOztHQUVHO0FBQ0gsTUFBTSxPQUFPLG1DQUFvQyxTQUFRLElBQUksQ0FBQyxlQUFlO0lBcUIzRTs7T0FFRztJQUNILFlBQVksU0FBMEQsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDaEgsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxhQUFhLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxXQUFXLEVBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDOUY7WUFBRSxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztTQUFFO1FBQ2pDLElBQUksTUFBTSxDQUFDLGNBQWMsQ0FBQyxFQUFFO1lBQzFCLElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRTtnQkFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxZQUFhLENBQUMsQ0FBQzthQUFFO2lCQUNsRjtnQkFBRSxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsWUFBNEMsQ0FBQyxDQUFDO2FBQUU7U0FDdEc7UUFDRCxJQUFJLE1BQU0s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QW9CLENBQUE7U0FBRTtRQUM5QyxJQUFJLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUM1QixJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBQyxHQUFHLEVBQUMsb0JBQW9CLEVBQUMsOEJBQThCLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDL0UsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUMsR0FBRyxFQUFDLDhCQUE4QixFQUFDLHdDQUF3QyxFQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ2pHLElBQUksQ0FBQyxHQUFHLENBQUMsOEJBQThCLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDNUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUNqQyxJQUFJLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUM1QixJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUNyQixJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUNyQixPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQXJGRDs7R0FFRztBQUM2QixnQ0FBYSxHQUFVLG9CQUFvQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnI0Yi5jb3JlIHZlcnNpb246IDQuMy4wXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogU3Vic2NyaXB0aW9uU3RhdHVzXHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBTdWJzY3JpcHRpb25TdGF0dXNDb2RlcywgIFN1YnNjcmlwdGlvblN0YXR1c0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9TdWJzY3JpcHRpb25TdGF0dXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgU3Vic2NyaXB0aW9uU3RhdHVzVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9TdWJzY3JpcHRpb25TdGF0dXNWc1ZhbGlkYXRpb24uanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFN1YnNjcmlwdGlvbk5vdGlmaWNhdGlvblR5cGVDb2RlcywgIFN1YnNjcmlwdGlvbk5vdGlmaWNhdGlvblR5cGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvU3Vic2NyaXB0aW9uTm90aWZpY2F0aW9uVHlwZUNvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBTdWJzY3JpcHRpb25Ob3RpZmljYXRpb25UeXBlVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9TdWJzY3JpcHRpb25Ob3RpZmljYXRpb25UeXBlVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBTdWJzY3JpcHRpb25FcnJvckNvZGVzLCAgU3Vic2NyaXB0aW9uRXJyb3JDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvU3Vic2NyaXB0aW9uRXJyb3JDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgU3Vic2NyaXB0aW9uRXJyb3JWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1N1YnNjcmlwdGlvbkVycm9yVnNWYWxpZGF0aW9uLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFN1YnNjcmlwdGlvblN0YXR1c05vdGlmaWNhdGlvbkV2ZW50IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFN1YnNjcmlwdGlvblN0YXR1c05vdGlmaWNhdGlvbkV2ZW50QXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNlcXVlbnRpYWwgbnVtYmVyIG9mIHRoaXMgZXZlbnQgaW4gdGhpcyBzdWJzY3JpcHRpb24gY29udGV4dC4gTm90ZSB0aGF0IHRoaXMgdmFsdWUgaXMgYSA2NC1iaXQgaW50ZWdlciB2YWx1ZSwgZW5jb2RlZCBhcyBhIHN0cmluZy5cclxuICAgKi9cclxuICBldmVudE51bWJlcjogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFN1YnNjcmlwdGlvblN0YXR1cy5ub3RpZmljYXRpb25FdmVudC5ldmVudE51bWJlclxyXG4gICAqL1xyXG4gIF9ldmVudE51bWJlcj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGFjdHVhbCB0aW1lIHRoaXMgZXZlbnQgb2NjdXJlZCBvbiB0aGUgc2VydmVyLlxyXG4gICAqL1xyXG4gIHRpbWVzdGFtcD86IGZoaXIuRmhpckluc3RhbnR8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3Vic2NyaXB0aW9uU3RhdHVzLm5vdGlmaWNhdGlvbkV2ZW50LnRpbWVzdGFtcFxyXG4gICAqL1xyXG4gIF90aW1lc3RhbXA/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBmb2N1cyBvZiB0aGlzIGV2ZW50LiBXaGlsZSB0aGlzIHdpbGwgdXN1YWxseSBiZSBhIHJlZmVyZW5jZSB0byB0aGUgZm9jdXMgcmVzb3VyY2Ugb2YgdGhlIGV2ZW50LCBpdCBNQVkgY29udGFpbiBhIHJlZmVyZW5jZSB0byBhIG5vbi1GSElSIG9iamVjdC5cclxuICAgKi9cclxuICBmb2N1cz86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWRkaXRpb25hbCBjb250ZXh0IGluZm9ybWF0aW9uIGZvciB0aGlzIGV2ZW50LiBHZW5lcmFsbHksIHRoaXMgd2lsbCBjb250YWluIHJlZmVyZW5jZXMgdG8gYWRkaXRpb25hbCByZXNvdXJjZXMgaW5jbHVkZWQgd2l0aCB0aGUgZXZlbnQgKGUuZy4sIHRoZSBQYXRpZW50IHJlbGV2YW50IHRvIGFuIEVuY291bnRlciksIGhvd2V2ZXIgaXQgTUFZIHJlZmVyIHRvIG5vbi1GSElSIG9iamVjdHMuXHJcbiAgICovXHJcbiAgYWRkaXRpb25hbENvbnRleHQ/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEZXRhaWxlZCBpbmZvcm1hdGlvbiBhYm91dCBldmVudHMgcmVsZXZhbnQgdG8gdGhpcyBzdWJzY3JpcHRpb24gbm90aWZpY2F0aW9uLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFN1YnNjcmlwdGlvblN0YXR1c05vdGlmaWNhdGlvbkV2ZW50IGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnU3Vic2NyaXB0aW9uU3RhdHVzTm90aWZpY2F0aW9uRXZlbnQnO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzZXF1ZW50aWFsIG51bWJlciBvZiB0aGlzIGV2ZW50IGluIHRoaXMgc3Vic2NyaXB0aW9uIGNvbnRleHQuIE5vdGUgdGhhdCB0aGlzIHZhbHVlIGlzIGEgNjQtYml0IGludGVnZXIgdmFsdWUsIGVuY29kZWQgYXMgYSBzdHJpbmcuXHJcbiAgICovXHJcbiAgcHVibGljIGV2ZW50TnVtYmVyOiBmaGlyLkZoaXJTdHJpbmd8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgYWN0dWFsIHRpbWUgdGhpcyBldmVudCBvY2N1cmVkIG9uIHRoZSBzZXJ2ZXIuXHJcbiAgICovXHJcbiAgcHVibGljIHRpbWVzdGFtcD86IGZoaXIuRmhpckluc3RhbnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBmb2N1cyBvZiB0aGlzIGV2ZW50LiBXaGlsZSB0aGlzIHdpbGwgdXN1YWxseSBiZSBhIHJlZmVyZW5jZSB0byB0aGUgZm9jdXMgcmVzb3VyY2Ugb2YgdGhlIGV2ZW50LCBpdCBNQVkgY29udGFpbiBhIHJlZmVyZW5jZSB0byBhIG5vbi1GSElSIG9iamVjdC5cclxuICAgKi9cclxuICBwdWJsaWMgZm9jdXM/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWRkaXRpb25hbCBjb250ZXh0IGluZm9ybWF0aW9uIGZvciB0aGlzIGV2ZW50LiBHZW5lcmFsbHksIHRoaXMgd2lsbCBjb250YWluIHJlZmVyZW5jZXMgdG8gYWRkaXRpb25hbCByZXNvdXJjZXMgaW5jbHVkZWQgd2l0aCB0aGUgZXZlbnQgKGUuZy4sIHRoZSBQYXRpZW50IHJlbGV2YW50IHRvIGFuIEVuY291bnRlciksIGhvd2V2ZXIgaXQgTUFZIHJlZmVyIHRvIG5vbi1GSElSIG9iamVjdHMuXHJcbiAgICovXHJcbiAgcHVibGljIGFkZGl0aW9uYWxDb250ZXh0OiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFN1YnNjcmlwdGlvblN0YXR1c05vdGlmaWNhdGlvbkV2ZW50IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8U3Vic2NyaXB0aW9uU3RhdHVzTm90aWZpY2F0aW9uRXZlbnRBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnZXZlbnROdW1iZXInXSkgeyB0aGlzLmV2ZW50TnVtYmVyID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5ldmVudE51bWJlcn0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5ldmVudE51bWJlciA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19ldmVudE51bWJlciddKSB7XHJcbiAgICAgIGlmICh0aGlzLmV2ZW50TnVtYmVyKSB7IHRoaXMuZXZlbnROdW1iZXIuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZXZlbnROdW1iZXIhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5ldmVudE51bWJlciA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9ldmVudE51bWJlciBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsndGltZXN0YW1wJ10pIHsgdGhpcy50aW1lc3RhbXAgPSBuZXcgZmhpci5GaGlySW5zdGFudCh7dmFsdWU6IHNvdXJjZS50aW1lc3RhbXB9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3RpbWVzdGFtcCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnRpbWVzdGFtcCkgeyB0aGlzLnRpbWVzdGFtcC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl90aW1lc3RhbXAhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy50aW1lc3RhbXAgPSBuZXcgZmhpci5GaGlySW5zdGFudChzb3VyY2UuX3RpbWVzdGFtcCBhcyBQYXJ0aWFsPGZoaXIuRmhpckluc3RhbnRBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2ZvY3VzJ10pIHsgdGhpcy5mb2N1cyA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuZm9jdXMpOyB9XHJcbiAgICBpZiAoc291cmNlWydhZGRpdGlvbmFsQ29udGV4dCddKSB7IHRoaXMuYWRkaXRpb25hbENvbnRleHQgPSBzb3VyY2UuYWRkaXRpb25hbENvbnRleHQubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5hZGRpdGlvbmFsQ29udGV4dCA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnU3Vic2NyaXB0aW9uU3RhdHVzLm5vdGlmaWNhdGlvbkV2ZW50JyB9XHJcbiAgICB0aGlzLnZSUygnZXZlbnROdW1iZXInLGV4cClcclxuICAgIHRoaXMudk9TKCd0aW1lc3RhbXAnLGV4cClcclxuICAgIHRoaXMudk9TKCdmb2N1cycsZXhwKVxyXG4gICAgdGhpcy52T0EoJ2FkZGl0aW9uYWxDb250ZXh0JyxleHApXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgU3Vic2NyaXB0aW9uU3RhdHVzIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFN1YnNjcmlwdGlvblN0YXR1c0FyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIlN1YnNjcmlwdGlvblN0YXR1c1wifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc3RhdHVzIG9mIHRoZSBzdWJzY3JpcHRpb24sIHdoaWNoIG1hcmtzIHRoZSBzZXJ2ZXIgc3RhdGUgZm9yIG1hbmFnaW5nIHRoZSBzdWJzY3JpcHRpb24uXHJcbiAgICovXHJcbiAgc3RhdHVzPzogZmhpci5GaGlyQ29kZTxTdWJzY3JpcHRpb25TdGF0dXNDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3Vic2NyaXB0aW9uU3RhdHVzLnN0YXR1c1xyXG4gICAqL1xyXG4gIF9zdGF0dXM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0eXBlIG9mIGV2ZW50IGJlaW5nIGNvbnZleWVkIHdpdGggdGhpcyBub3RpZmljYWl0b24uXHJcbiAgICovXHJcbiAgdHlwZTogZmhpci5GaGlyQ29kZTxTdWJzY3JpcHRpb25Ob3RpZmljYXRpb25UeXBlQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFN1YnNjcmlwdGlvblN0YXR1cy50eXBlXHJcbiAgICovXHJcbiAgX3R5cGU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0b3RhbCBudW1iZXIgb2YgYWN0dWFsIGV2ZW50cyB3aGljaCBoYXZlIGJlZW4gZ2VuZXJhdGVkIHNpbmNlIHRoZSBTdWJzY3JpcHRpb24gd2FzIGNyZWF0ZWQgKGluY2x1c2l2ZSBvZiB0aGlzIG5vdGlmaWNhdGlvbikgLSByZWdhcmRsZXNzIG9mIGhvdyBtYW55IGhhdmUgYmVlbiBzdWNjZXNzZnVsbHkgY29tbXVuaWNhdGVkLiAgVGhpcyBudW1iZXIgaXMgTk9UIGluY3JlbWVudGVkIGZvciBoYW5kc2hha2UgYW5kIGhlYXJ0YmVhdCBub3RpZmljYXRpb25zLlxyXG4gICAqL1xyXG4gIGV2ZW50c1NpbmNlU3Vic2NyaXB0aW9uU3RhcnQ/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3Vic2NyaXB0aW9uU3RhdHVzLmV2ZW50c1NpbmNlU3Vic2NyaXB0aW9uU3RhcnRcclxuICAgKi9cclxuICBfZXZlbnRzU2luY2VTdWJzY3JpcHRpb25TdGFydD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogRGV0YWlsZWQgaW5mb3JtYXRpb24gYWJvdXQgZXZlbnRzIHJlbGV2YW50IHRvIHRoaXMgc3Vic2NyaXB0aW9uIG5vdGlmaWNhdGlvbi5cclxuICAgKi9cclxuICBub3RpZmljYXRpb25FdmVudD86IGZoaXIuU3Vic2NyaXB0aW9uU3RhdHVzTm90aWZpY2F0aW9uRXZlbnRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZWZlcmVuY2UgdG8gdGhlIFN1YnNjcmlwdGlvbiB3aGljaCBnZW5lcmF0ZWQgdGhpcyBub3RpZmljYXRpb24uXHJcbiAgICovXHJcbiAgc3Vic2NyaXB0aW9uOiBmaGlyLlJlZmVyZW5jZUFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGlzIHZhbHVlIFNIT1VMRCBOT1QgYmUgcHJlc2VudCB3aGVuIHVzaW5nIGBlbXB0eWAgcGF5bG9hZHMsIE1BWSBiZSBwcmVzZW50IHdoZW4gdXNpbmcgYGlkLW9ubHlgIHBheWxvYWRzLCBhbmQgU0hPVUxEIGJlIHByZXNlbnQgd2hlbiB1c2luZyBgZnVsbC1yZXNvdXJjZWAgcGF5bG9hZHMuXHJcbiAgICovXHJcbiAgdG9waWM/OiBmaGlyLkZoaXJDYW5vbmljYWx8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogU3Vic2NyaXB0aW9uU3RhdHVzLnRvcGljXHJcbiAgICovXHJcbiAgX3RvcGljPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBSZWNvbW1lbmRlZCBwcmFjdGljZTogY2xlYXIgZXJyb3JzIHdoZW4gc3RhdHVzIGlzIHVwZGF0ZWQuXHJcbiAgICovXHJcbiAgZXJyb3I/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgU3Vic2NyaXB0aW9uU3RhdHVzIHJlc291cmNlIGRlc2NyaWJlcyB0aGUgc3RhdGUgb2YgYSBTdWJzY3JpcHRpb24gZHVyaW5nIG5vdGlmaWNhdGlvbnMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3Vic2NyaXB0aW9uU3RhdHVzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdTdWJzY3JpcHRpb25TdGF0dXMnO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNvdXJjZVR5cGU6IFwiU3Vic2NyaXB0aW9uU3RhdHVzXCI7XHJcbiAgLyoqXHJcbiAgICogVGhlIHN0YXR1cyBvZiB0aGUgc3Vic2NyaXB0aW9uLCB3aGljaCBtYXJrcyB0aGUgc2VydmVyIHN0YXRlIGZvciBtYW5hZ2luZyB0aGUgc3Vic2NyaXB0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0dXM/OiBmaGlyLkZoaXJDb2RlPFN1YnNjcmlwdGlvblN0YXR1c0NvZGVUeXBlPnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHR5cGUgb2YgZXZlbnQgYmVpbmcgY29udmV5ZWQgd2l0aCB0aGlzIG5vdGlmaWNhaXRvbi5cclxuICAgKi9cclxuICBwdWJsaWMgdHlwZTogZmhpci5GaGlyQ29kZTxTdWJzY3JpcHRpb25Ob3RpZmljYXRpb25UeXBlQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRvdGFsIG51bWJlciBvZiBhY3R1YWwgZXZlbnRzIHdoaWNoIGhhdmUgYmVlbiBnZW5lcmF0ZWQgc2luY2UgdGhlIFN1YnNjcmlwdGlvbiB3YXMgY3JlYXRlZCAoaW5jbHVzaXZlIG9mIHRoaXMgbm90aWZpY2F0aW9uKSAtIHJlZ2FyZGxlc3Mgb2YgaG93IG1hbnkgaGF2ZSBiZWVuIHN1Y2Nlc3NmdWxseSBjb21tdW5pY2F0ZWQuICBUaGlzIG51bWJlciBpcyBOT1QgaW5jcmVtZW50ZWQgZm9yIGhhbmRzaGFrZSBhbmQgaGVhcnRiZWF0IG5vdGlmaWNhdGlvbnMuXHJcbiAgICovXHJcbiAgcHVibGljIGV2ZW50c1NpbmNlU3Vic2NyaXB0aW9uU3RhcnQ/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERldGFpbGVkIGluZm9ybWF0aW9uIGFib3V0IGV2ZW50cyByZWxldmFudCB0byB0aGlzIHN1YnNjcmlwdGlvbiBub3RpZmljYXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIG5vdGlmaWNhdGlvbkV2ZW50OiBmaGlyLlN1YnNjcmlwdGlvblN0YXR1c05vdGlmaWNhdGlvbkV2ZW50W107XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlZmVyZW5jZSB0byB0aGUgU3Vic2NyaXB0aW9uIHdoaWNoIGdlbmVyYXRlZCB0aGlzIG5vdGlmaWNhdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgc3Vic2NyaXB0aW9uOiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgdmFsdWUgU0hPVUxEIE5PVCBiZSBwcmVzZW50IHdoZW4gdXNpbmcgYGVtcHR5YCBwYXlsb2FkcywgTUFZIGJlIHByZXNlbnQgd2hlbiB1c2luZyBgaWQtb25seWAgcGF5bG9hZHMsIGFuZCBTSE9VTEQgYmUgcHJlc2VudCB3aGVuIHVzaW5nIGBmdWxsLXJlc291cmNlYCBwYXlsb2Fkcy5cclxuICAgKi9cclxuICBwdWJsaWMgdG9waWM/OiBmaGlyLkZoaXJDYW5vbmljYWx8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFJlY29tbWVuZGVkIHByYWN0aWNlOiBjbGVhciBlcnJvcnMgd2hlbiBzdGF0dXMgaXMgdXBkYXRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgZXJyb3I6IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgU3Vic2NyaXB0aW9uU3RhdHVzIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8U3Vic2NyaXB0aW9uU3RhdHVzQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ1N1YnNjcmlwdGlvblN0YXR1cyc7XHJcbiAgICBpZiAoc291cmNlWydzdGF0dXMnXSkgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPFN1YnNjcmlwdGlvblN0YXR1c0NvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5zdGF0dXN9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3N0YXR1cyddKSB7XHJcbiAgICAgIGlmICh0aGlzLnN0YXR1cykgeyB0aGlzLnN0YXR1cy5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zdGF0dXMhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxTdWJzY3JpcHRpb25TdGF0dXNDb2RlVHlwZT4oc291cmNlLl9zdGF0dXMgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3R5cGUnXSkgeyB0aGlzLnR5cGUgPSBuZXcgZmhpci5GaGlyQ29kZTxTdWJzY3JpcHRpb25Ob3RpZmljYXRpb25UeXBlQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnR5cGV9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudHlwZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ190eXBlJ10pIHtcclxuICAgICAgaWYgKHRoaXMudHlwZSkgeyB0aGlzLnR5cGUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdHlwZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnR5cGUgPSBuZXcgZmhpci5GaGlyQ29kZTxTdWJzY3JpcHRpb25Ob3RpZmljYXRpb25UeXBlQ29kZVR5cGU+KHNvdXJjZS5fdHlwZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnZXZlbnRzU2luY2VTdWJzY3JpcHRpb25TdGFydCddKSB7IHRoaXMuZXZlbnRzU2luY2VTdWJzY3JpcHRpb25TdGFydCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuZXZlbnRzU2luY2VTdWJzY3JpcHRpb25TdGFydH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfZXZlbnRzU2luY2VTdWJzY3JpcHRpb25TdGFydCddKSB7XHJcbiAgICAgIGlmICh0aGlzLmV2ZW50c1NpbmNlU3Vic2NyaXB0aW9uU3RhcnQpIHsgdGhpcy5ldmVudHNTaW5jZVN1YnNjcmlwdGlvblN0YXJ0LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2V2ZW50c1NpbmNlU3Vic2NyaXB0aW9uU3RhcnQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5ldmVudHNTaW5jZVN1YnNjcmlwdGlvblN0YXJ0ID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2V2ZW50c1NpbmNlU3Vic2NyaXB0aW9uU3RhcnQgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ25vdGlmaWNhdGlvbkV2ZW50J10pIHsgdGhpcy5ub3RpZmljYXRpb25FdmVudCA9IHNvdXJjZS5ub3RpZmljYXRpb25FdmVudC5tYXAoKHgpID0+IG5ldyBmaGlyLlN1YnNjcmlwdGlvblN0YXR1c05vdGlmaWNhdGlvbkV2ZW50KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubm90aWZpY2F0aW9uRXZlbnQgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3Vic2NyaXB0aW9uJ10pIHsgdGhpcy5zdWJzY3JpcHRpb24gPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnN1YnNjcmlwdGlvbik7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN1YnNjcmlwdGlvbiA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3RvcGljJ10pIHsgdGhpcy50b3BpYyA9IG5ldyBmaGlyLkZoaXJDYW5vbmljYWwoe3ZhbHVlOiBzb3VyY2UudG9waWN9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3RvcGljJ10pIHtcclxuICAgICAgaWYgKHRoaXMudG9waWMpIHsgdGhpcy50b3BpYy5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl90b3BpYyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnRvcGljID0gbmV3IGZoaXIuRmhpckNhbm9uaWNhbChzb3VyY2UuX3RvcGljIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ2Fub25pY2FsQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydlcnJvciddKSB7IHRoaXMuZXJyb3IgPSBzb3VyY2UuZXJyb3IubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5lcnJvciA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnU3Vic2NyaXB0aW9uU3RhdHVzJyB9XHJcbiAgICB0aGlzLnZSUygncmVzb3VyY2VUeXBlJyxleHApXHJcbiAgICB0aGlzLnZPU1YoJ3N0YXR1cycsZXhwLCdTdWJzY3JpcHRpb25TdGF0dXMnLFN1YnNjcmlwdGlvblN0YXR1c1ZzVmFsaWRhdGlvbiwncicpXHJcbiAgICB0aGlzLnZSU1YoJ3R5cGUnLGV4cCwnU3Vic2NyaXB0aW9uTm90aWZpY2F0aW9uVHlwZScsU3Vic2NyaXB0aW9uTm90aWZpY2F0aW9uVHlwZVZzVmFsaWRhdGlvbiwncicpXHJcbiAgICB0aGlzLnZPUygnZXZlbnRzU2luY2VTdWJzY3JpcHRpb25TdGFydCcsZXhwKVxyXG4gICAgdGhpcy52T0EoJ25vdGlmaWNhdGlvbkV2ZW50JyxleHApXHJcbiAgICB0aGlzLnZSUygnc3Vic2NyaXB0aW9uJyxleHApXHJcbiAgICB0aGlzLnZPUygndG9waWMnLGV4cClcclxuICAgIHRoaXMudk9BKCdlcnJvcicsZXhwKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuIl19