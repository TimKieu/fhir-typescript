// <auto-generated/>
// Contents of: hl7.fhir.r2.core version: 1.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: ImagingObjectSelection
import * as fhir from '../fhir.js';
/**
 * The specific set of frames referenced in this imaging object selection. The URL retrieves the pixel data, and is encapsulated in a multipart MIME response.
 */
export class ImagingObjectSelectionStudySeriesInstanceFrames extends fhir.BackboneElement {
    /**
     * Default constructor for ImagingObjectSelectionStudySeriesInstanceFrames - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['frameNumbers']) {
            this.frameNumbers = source.frameNumbers.map((x) => new fhir.FhirUnsignedInt({ value: x }));
        }
        else {
            this.frameNumbers = [];
        }
        if (source['_frameNumbers']) {
            source._frameNumbers.forEach((x, i) => {
                if (this.frameNumbers.length >= i) {
                    if (x) {
                        this.frameNumbers[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.frameNumbers.push(new fhir.FhirUnsignedInt(x));
                    }
                }
            });
        }
        if (source['url']) {
            this.url = new fhir.FhirUri({ value: source.url });
        }
        else {
            this.url = null;
        }
        if (source['_url']) {
            if (this.url) {
                this.url.addExtendedProperties(source._url);
            }
            else {
                this.url = new fhir.FhirUri(source._url);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ImagingObjectSelection.study.series.instance.frames';
        }
        iss.push(...this.vRA('frameNumbers', exp));
        iss.push(...this.vRS('url', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ImagingObjectSelectionStudySeriesInstanceFrames._fts_dataType = 'ImagingObjectSelectionStudySeriesInstanceFrames';
/**
 * DICOM SOP instances are identified through the UIDs of the study - series - instance hierarchy. This is the instance level identity of the instance in the selection.
 */
export class ImagingObjectSelectionStudySeriesInstance extends fhir.BackboneElement {
    /**
     * Default constructor for ImagingObjectSelectionStudySeriesInstance - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['sopClass']) {
            this.sopClass = new fhir.FhirOid({ value: source.sopClass });
        }
        else {
            this.sopClass = null;
        }
        if (source['_sopClass']) {
            if (this.sopClass) {
                this.sopClass.addExtendedProperties(source._sopClass);
            }
            else {
                this.sopClass = new fhir.FhirOid(source._sopClass);
            }
        }
        if (source['uid']) {
            this.uid = new fhir.FhirOid({ value: source.uid });
        }
        else {
            this.uid = null;
        }
        if (source['_uid']) {
            if (this.uid) {
                this.uid.addExtendedProperties(source._uid);
            }
            else {
                this.uid = new fhir.FhirOid(source._uid);
            }
        }
        if (source['url']) {
            this.url = new fhir.FhirUri({ value: source.url });
        }
        else {
            this.url = null;
        }
        if (source['_url']) {
            if (this.url) {
                this.url.addExtendedProperties(source._url);
            }
            else {
                this.url = new fhir.FhirUri(source._url);
            }
        }
        if (source['frames']) {
            this.frames = source.frames.map((x) => new fhir.ImagingObjectSelectionStudySeriesInstanceFrames(x));
        }
        else {
            this.frames = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ImagingObjectSelection.study.series.instance';
        }
        iss.push(...this.vRS('sopClass', exp));
        iss.push(...this.vRS('uid', exp));
        iss.push(...this.vRS('url', exp));
        iss.push(...this.vOA('frames', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ImagingObjectSelectionStudySeriesInstance._fts_dataType = 'ImagingObjectSelectionStudySeriesInstance';
/**
 * DICOM SOP instances are identified through the UIDs of the study - series - instance hierarchy. In addition, the locator at the series level provide a means of retrieving the entire series.
 */
export class ImagingObjectSelectionStudySeries extends fhir.BackboneElement {
    /**
     * Default constructor for ImagingObjectSelectionStudySeries - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['uid']) {
            this.uid = new fhir.FhirOid({ value: source.uid });
        }
        if (source['_uid']) {
            if (this.uid) {
                this.uid.addExtendedProperties(source._uid);
            }
            else {
                this.uid = new fhir.FhirOid(source._uid);
            }
        }
        if (source['url']) {
            this.url = new fhir.FhirUri({ value: source.url });
        }
        if (source['_url']) {
            if (this.url) {
                this.url.addExtendedProperties(source._url);
            }
            else {
                this.url = new fhir.FhirUri(source._url);
            }
        }
        if (source['instance']) {
            this.instance = source.instance.map((x) => new fhir.ImagingObjectSelectionStudySeriesInstance(x));
        }
        else {
            this.instance = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ImagingObjectSelection.study.series';
        }
        iss.push(...this.vOS('uid', exp));
        iss.push(...this.vOS('url', exp));
        iss.push(...this.vRA('instance', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ImagingObjectSelectionStudySeries._fts_dataType = 'ImagingObjectSelectionStudySeries';
/**
 * DICOM SOP instances are identified through the UIDs of the study - series - instance hierarchy. In addition, the locator at the study level provide a means of retrieving the entire study.
 */
export class ImagingObjectSelectionStudy extends fhir.BackboneElement {
    /**
     * Default constructor for ImagingObjectSelectionStudy - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['uid']) {
            this.uid = new fhir.FhirOid({ value: source.uid });
        }
        else {
            this.uid = null;
        }
        if (source['_uid']) {
            if (this.uid) {
                this.uid.addExtendedProperties(source._uid);
            }
            else {
                this.uid = new fhir.FhirOid(source._uid);
            }
        }
        if (source['url']) {
            this.url = new fhir.FhirUri({ value: source.url });
        }
        if (source['_url']) {
            if (this.url) {
                this.url.addExtendedProperties(source._url);
            }
            else {
                this.url = new fhir.FhirUri(source._url);
            }
        }
        if (source['imagingStudy']) {
            this.imagingStudy = new fhir.Reference(source.imagingStudy);
        }
        if (source['series']) {
            this.series = source.series.map((x) => new fhir.ImagingObjectSelectionStudySeries(x));
        }
        else {
            this.series = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ImagingObjectSelection.study';
        }
        iss.push(...this.vRS('uid', exp));
        iss.push(...this.vOS('url', exp));
        iss.push(...this.vOS('imagingStudy', exp));
        iss.push(...this.vRA('series', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ImagingObjectSelectionStudy._fts_dataType = 'ImagingObjectSelectionStudy';
/**
 * A manifest of a set of DICOM Service-Object Pair Instances (SOP Instances).  The referenced SOP Instances (images or other content) are for a single patient, and may be from one or more studies. The referenced SOP Instances have been selected for a purpose, such as quality assurance, conference, or consult. Reflecting that range of purposes, typical ImagingObjectSelection resources may include all SOP Instances in a study (perhaps for sharing through a Health Information Exchange); key images from multiple studies (for reference by a referring or treating physician); a multi-frame ultrasound instance ("cine" video clip) and a set of measurements taken from that instance (for inclusion in a teaching file); and so on.
 */
export class ImagingObjectSelection extends fhir.DomainResource {
    /**
     * Default constructor for ImagingObjectSelection - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'ImagingObjectSelection';
        if (source['uid']) {
            this.uid = new fhir.FhirOid({ value: source.uid });
        }
        else {
            this.uid = null;
        }
        if (source['_uid']) {
            if (this.uid) {
                this.uid.addExtendedProperties(source._uid);
            }
            else {
                this.uid = new fhir.FhirOid(source._uid);
            }
        }
        if (source['patient']) {
            this.patient = new fhir.Reference(source.patient);
        }
        else {
            this.patient = null;
        }
        if (source['title']) {
            this.title = new fhir.CodeableConcept(source.title);
        }
        else {
            this.title = null;
        }
        if (source['description']) {
            this.description = new fhir.FhirString({ value: source.description });
        }
        if (source['_description']) {
            if (this.description) {
                this.description.addExtendedProperties(source._description);
            }
            else {
                this.description = new fhir.FhirString(source._description);
            }
        }
        if (source['author']) {
            this.author = new fhir.Reference(source.author);
        }
        if (source['authoringTime']) {
            this.authoringTime = new fhir.FhirDateTime({ value: source.authoringTime });
        }
        if (source['_authoringTime']) {
            if (this.authoringTime) {
                this.authoringTime.addExtendedProperties(source._authoringTime);
            }
            else {
                this.authoringTime = new fhir.FhirDateTime(source._authoringTime);
            }
        }
        if (source['study']) {
            this.study = source.study.map((x) => new fhir.ImagingObjectSelectionStudy(x));
        }
        else {
            this.study = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ImagingObjectSelection';
        }
        iss.push(...this.vRPS('resourceType', exp));
        iss.push(...this.vRS('uid', exp));
        iss.push(...this.vRS('patient', exp));
        iss.push(...this.vRS('title', exp));
        iss.push(...this.vOS('description', exp));
        iss.push(...this.vOS('author', exp));
        iss.push(...this.vOS('authoringTime', exp));
        iss.push(...this.vRA('study', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ImagingObjectSelection._fts_dataType = 'ImagingObjectSelection';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW1hZ2luZ09iamVjdFNlbGVjdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvSW1hZ2luZ09iamVjdFNlbGVjdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQyx3Q0FBd0M7QUFFeEMsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUF3Qm5DOztHQUVHO0FBQ0gsTUFBTSxPQUFPLCtDQUFnRCxTQUFRLElBQUksQ0FBQyxlQUFlO0lBYXZGOztPQUVHO0lBQ0gsWUFBWSxTQUFzRSxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUM1SCxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLGNBQWMsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFlBQVksR0FBRyxNQUFNLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLEVBQUMsS0FBSyxFQUFFLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQ3BIO1lBQUUsSUFBSSxDQUFDLFlBQVksR0FBRyxFQUFFLENBQUM7U0FBRTtRQUNoQyxJQUFJLE1BQU0sQ0FBQyxlQUFlLENBQUMsRUFBRTtZQUMzQixNQUFNLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRTtnQkFDbkMsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7b0JBQUUsSUFBSSxDQUFDLEVBQUU7d0JBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUMsQ0FBQztxQkFBRTtpQkFBRTtxQkFDM0Y7b0JBQUUsSUFBSSxDQUFDLEVBQUU7d0JBQUUsSUFBSSxDQUFD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LENBQUMsYUFBYSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDekMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDcEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsZUFBZSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDM0MsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbkMsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDOztBQWpGRDs7R0FFRztBQUM2QixvQ0FBYSxHQUFVLHdCQUF3QixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnIyLmNvcmUgdmVyc2lvbjogMS4wLjJcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBJbWFnaW5nT2JqZWN0U2VsZWN0aW9uXHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEltYWdpbmdPYmplY3RTZWxlY3Rpb25TdHVkeVNlcmllc0luc3RhbmNlRnJhbWVzIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEltYWdpbmdPYmplY3RTZWxlY3Rpb25TdHVkeVNlcmllc0luc3RhbmNlRnJhbWVzQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogT25lIG9yIG1vcmUgbm9uLWR1cGxpY2F0ZSBmcmFtZSBudW1iZXJzIGluIHRoZSBzZWxlY3RlZCBpbnN0YW5jZS5cclxuICAgKi9cclxuICBmcmFtZU51bWJlcnM6IGZoaXIuRmhpclVuc2lnbmVkSW50W118KG51bWJlcnxudWxsKVtdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogSW1hZ2luZ09iamVjdFNlbGVjdGlvbi5zdHVkeS5zZXJpZXMuaW5zdGFuY2UuZnJhbWVzLmZyYW1lTnVtYmVyc1xyXG4gICAqL1xyXG4gIF9mcmFtZU51bWJlcnM/OihmaGlyLkZoaXJFbGVtZW50QXJnc3xudWxsKVtdO1xyXG4gIC8qKlxyXG4gICAqIFdBRE8tUlMgVVJMIGVuYWJsZXMgcmV0cmlldmFsIG9mIHRoZSBmcmFtZXMgdXNpbmcgRElDT00gV0FETy1SUyBBUEkuXHJcbiAgICovXHJcbiAgdXJsOiBmaGlyLkZoaXJVcml8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogSW1hZ2luZ09iamVjdFNlbGVjdGlvbi5zdHVkeS5zZXJpZXMuaW5zdGFuY2UuZnJhbWVzLnVybFxyXG4gICAqL1xyXG4gIF91cmw/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlIHNwZWNpZmljIHNldCBvZiBmcmFtZXMgcmVmZXJlbmNlZCBpbiB0aGlzIGltYWdpbmcgb2JqZWN0IHNlbGVjdGlvbi4gVGhlIFVSTCByZXRyaWV2ZXMgdGhlIHBpeGVsIGRhdGEsIGFuZCBpcyBlbmNhcHN1bGF0ZWQgaW4gYSBtdWx0aXBhcnQgTUlNRSByZXNwb25zZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBJbWFnaW5nT2JqZWN0U2VsZWN0aW9uU3R1ZHlTZXJpZXNJbnN0YW5jZUZyYW1lcyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0ltYWdpbmdPYmplY3RTZWxlY3Rpb25TdHVkeVNlcmllc0luc3RhbmNlRnJhbWVzJztcclxuICAvKipcclxuICAgKiBPbmUgb3IgbW9yZSBub24tZHVwbGljYXRlIGZyYW1lIG51bWJlcnMgaW4gdGhlIHNlbGVjdGVkIGluc3RhbmNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBmcmFtZU51bWJlcnM6IGZoaXIuRmhpclVuc2lnbmVkSW50W107XHJcbiAgLyoqXHJcbiAgICogV0FETy1SUyBVUkwgZW5hYmxlcyByZXRyaWV2YWwgb2YgdGhlIGZyYW1lcyB1c2luZyBESUNPTSBXQURPLVJTIEFQSS5cclxuICAgKi9cclxuICBwdWJsaWMgdXJsOiBmaGlyLkZoaXJVcml8bnVsbDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBJbWFnaW5nT2JqZWN0U2VsZWN0aW9uU3R1ZHlTZXJpZXNJbnN0YW5jZUZyYW1lcyAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEltYWdpbmdPYmplY3RTZWxlY3Rpb25TdHVkeVNlcmllc0luc3RhbmNlRnJhbWVzQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2ZyYW1lTnVtYmVycyddKSB7IHRoaXMuZnJhbWVOdW1iZXJzID0gc291cmNlLmZyYW1lTnVtYmVycy5tYXAoKHgpID0+IG5ldyBmaGlyLkZoaXJVbnNpZ25lZEludCh7dmFsdWU6IHh9KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmZyYW1lTnVtYmVycyA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydfZnJhbWVOdW1iZXJzJ10pIHtcclxuICAgICAgc291cmNlLl9mcmFtZU51bWJlcnMuZm9yRWFjaCgoeCxpKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuZnJhbWVOdW1iZXJzLmxlbmd0aCA+PSBpKSB7IGlmICh4KSB7IHRoaXMuZnJhbWVOdW1iZXJzW2ldLmFkZEV4dGVuZGVkUHJvcGVydGllcyh4KTsgfSB9XHJcbiAgICAgICAgZWxzZSB7IGlmICh4KSB7IHRoaXMuZnJhbWVOdW1iZXJzLnB1c2gobmV3IGZoaXIuRmhpclVuc2lnbmVkSW50KHggYXMgUGFydGlhbDxmaGlyLkZoaXJVbnNpZ25lZEludEFyZ3M+KSk7IH0gfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3VybCddKSB7IHRoaXMudXJsID0gbmV3IGZoaXIuRmhpclVyaSh7dmFsdWU6IHNvdXJjZS51cmx9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudXJsID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3VybCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnVybCkgeyB0aGlzLnVybC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl91cmwhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy51cmwgPSBuZXcgZmhpci5GaGlyVXJpKHNvdXJjZS5fdXJsIGFzIFBhcnRpYWw8Zmhpci5GaGlyVXJpQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnSW1hZ2luZ09iamVjdFNlbGVjdGlvbi5zdHVkeS5zZXJpZXMuaW5zdGFuY2UuZnJhbWVzJyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSQSgnZnJhbWVOdW1iZXJzJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCd1cmwnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEltYWdpbmdPYmplY3RTZWxlY3Rpb25TdHVkeVNlcmllc0luc3RhbmNlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEltYWdpbmdPYmplY3RTZWxlY3Rpb25TdHVkeVNlcmllc0luc3RhbmNlQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogRElDT00gU09QIGluc3RhbmNlcyBjYW4gYmUgYW4gaW1hZ2Ugb3Igb3RoZXIgZGF0YSBvYmplY3QuIFRoZSBTT1AgY2xhc3MgVUlEIHByb3ZpZGUgdGhlIGFjY3VyYXRlIGluZm9ybWF0aW9uIGFib3V0IHdoYXQgdHlwZSB0aGUgaW5zdGFuY2UgaXMuXHJcbiAgICovXHJcbiAgc29wQ2xhc3M6IGZoaXIuRmhpck9pZHxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBJbWFnaW5nT2JqZWN0U2VsZWN0aW9uLnN0dWR5LnNlcmllcy5pbnN0YW5jZS5zb3BDbGFzc1xyXG4gICAqL1xyXG4gIF9zb3BDbGFzcz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogU09QIGluc3RhbmNlIFVJRCBpcyByZXF1aXJlZCB0byBmdWxseSBpZGVudGlmeSB0aGUgRElDT00gU09QIGluc3RhbmNlIGluIHRoZSBzZWxlY3Rpb24uXHJcbiAgICovXHJcbiAgdWlkOiBmaGlyLkZoaXJPaWR8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogSW1hZ2luZ09iamVjdFNlbGVjdGlvbi5zdHVkeS5zZXJpZXMuaW5zdGFuY2UudWlkXHJcbiAgICovXHJcbiAgX3VpZD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogV0FETy1SUyBVUkwgZW5hYmxlcyByZXRyaWV2YWwgb2YgdGhlIFNPUCBpbnN0YW5jZSB1c2luZyBESUNPTSBXQURPLVJTIEFQSS5cclxuICAgKi9cclxuICB1cmw6IGZoaXIuRmhpclVyaXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBJbWFnaW5nT2JqZWN0U2VsZWN0aW9uLnN0dWR5LnNlcmllcy5pbnN0YW5jZS51cmxcclxuICAgKi9cclxuICBfdXJsPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgc3BlY2lmaWMgc2V0IG9mIGZyYW1lcyByZWZlcmVuY2VkIGluIHRoaXMgaW1hZ2luZyBvYmplY3Qgc2VsZWN0aW9uLiBUaGUgVVJMIHJldHJpZXZlcyB0aGUgcGl4ZWwgZGF0YSwgYW5kIGlzIGVuY2Fwc3VsYXRlZCBpbiBhIG11bHRpcGFydCBNSU1FIHJlc3BvbnNlLlxyXG4gICAqL1xyXG4gIGZyYW1lcz86IGZoaXIuSW1hZ2luZ09iamVjdFNlbGVjdGlvblN0dWR5U2VyaWVzSW5zdGFuY2VGcmFtZXNBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogRElDT00gU09QIGluc3RhbmNlcyBhcmUgaWRlbnRpZmllZCB0aHJvdWdoIHRoZSBVSURzIG9mIHRoZSBzdHVkeSAtIHNlcmllcyAtIGluc3RhbmNlIGhpZXJhcmNoeS4gVGhpcyBpcyB0aGUgaW5zdGFuY2UgbGV2ZWwgaWRlbnRpdHkgb2YgdGhlIGluc3RhbmNlIGluIHRoZSBzZWxlY3Rpb24uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgSW1hZ2luZ09iamVjdFNlbGVjdGlvblN0dWR5U2VyaWVzSW5zdGFuY2UgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdJbWFnaW5nT2JqZWN0U2VsZWN0aW9uU3R1ZHlTZXJpZXNJbnN0YW5jZSc7XHJcbiAgLyoqXHJcbiAgICogRElDT00gU09QIGluc3RhbmNlcyBjYW4gYmUgYW4gaW1hZ2Ugb3Igb3RoZXIgZGF0YSBvYmplY3QuIFRoZSBTT1AgY2xhc3MgVUlEIHByb3ZpZGUgdGhlIGFjY3VyYXRlIGluZm9ybWF0aW9uIGFib3V0IHdoYXQgdHlwZSB0aGUgaW5zdGFuY2UgaXMuXHJcbiAgICovXHJcbiAgcHVibGljIHNvcENsYXNzOiBmaGlyLkZoaXJPaWR8bnVsbDtcclxuICAvKipcclxuICAgKiBTT1AgaW5zdGFuY2UgVUlEIGlzIHJlcXVpcmVkIHRvIGZ1bGx5IGlkZW50aWZ5IHRoZSBESUNPTSBTT1AgaW5zdGFuY2UgaW4gdGhlIHNlbGVjdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgdWlkOiBmaGlyLkZoaXJPaWR8bnVsbDtcclxuICAvKipcclxuICAgKiBXQURPLVJTIFVSTCBlbmFibGVzIHJldHJpZXZhbCBvZiB0aGUgU09QIGluc3RhbmNlIHVzaW5nIERJQ09NIFdBRE8tUlMgQVBJLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB1cmw6IGZoaXIuRmhpclVyaXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzcGVjaWZpYyBzZXQgb2YgZnJhbWVzIHJlZmVyZW5jZWQgaW4gdGhpcyBpbWFnaW5nIG9iamVjdCBzZWxlY3Rpb24uIFRoZSBVUkwgcmV0cmlldmVzIHRoZSBwaXhlbCBkYXRhLCBhbmQgaXMgZW5jYXBzdWxhdGVkIGluIGEgbXVsdGlwYXJ0IE1JTUUgcmVzcG9uc2UuXHJcbiAgICovXHJcbiAgcHVibGljIGZyYW1lczogZmhpci5JbWFnaW5nT2JqZWN0U2VsZWN0aW9uU3R1ZHlTZXJpZXNJbnN0YW5jZUZyYW1lc1tdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEltYWdpbmdPYmplY3RTZWxlY3Rpb25TdHVkeVNlcmllc0luc3RhbmNlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8SW1hZ2luZ09iamVjdFNlbGVjdGlvblN0dWR5U2VyaWVzSW5zdGFuY2VBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnc29wQ2xhc3MnXSkgeyB0aGlzLnNvcENsYXNzID0gbmV3IGZoaXIuRmhpck9pZCh7dmFsdWU6IHNvdXJjZS5zb3BDbGFzc30pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zb3BDbGFzcyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zb3BDbGFzcyddKSB7XHJcbiAgICAgIGlmICh0aGlzLnNvcENsYXNzKSB7IHRoaXMuc29wQ2xhc3MuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc29wQ2xhc3MhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zb3BDbGFzcyA9IG5ldyBmaGlyLkZoaXJPaWQoc291cmNlLl9zb3BDbGFzcyBhcyBQYXJ0aWFsPGZoaXIuRmhpck9pZEFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsndWlkJ10pIHsgdGhpcy51aWQgPSBuZXcgZmhpci5GaGlyT2lkKHt2YWx1ZTogc291cmNlLnVpZH0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy51aWQgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfdWlkJ10pIHtcclxuICAgICAgaWYgKHRoaXMudWlkKSB7IHRoaXMudWlkLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3VpZCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnVpZCA9IG5ldyBmaGlyLkZoaXJPaWQoc291cmNlLl91aWQgYXMgUGFydGlhbDxmaGlyLkZoaXJPaWRBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3VybCddKSB7IHRoaXMudXJsID0gbmV3IGZoaXIuRmhpclVyaSh7dmFsdWU6IHNvdXJjZS51cmx9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudXJsID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3VybCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnVybCkgeyB0aGlzLnVybC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl91cmwhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy51cmwgPSBuZXcgZmhpci5GaGlyVXJpKHNvdXJjZS5fdXJsIGFzIFBhcnRpYWw8Zmhpci5GaGlyVXJpQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydmcmFtZXMnXSkgeyB0aGlzLmZyYW1lcyA9IHNvdXJjZS5mcmFtZXMubWFwKCh4KSA9PiBuZXcgZmhpci5JbWFnaW5nT2JqZWN0U2VsZWN0aW9uU3R1ZHlTZXJpZXNJbnN0YW5jZUZyYW1lcyh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmZyYW1lcyA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnSW1hZ2luZ09iamVjdFNlbGVjdGlvbi5zdHVkeS5zZXJpZXMuaW5zdGFuY2UnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdzb3BDbGFzcycsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygndWlkJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCd1cmwnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2ZyYW1lcycsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgSW1hZ2luZ09iamVjdFNlbGVjdGlvblN0dWR5U2VyaWVzIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEltYWdpbmdPYmplY3RTZWxlY3Rpb25TdHVkeVNlcmllc0FyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFNlcmllcyBpbnN0YW5jZSBVSUQgaXMgcmVxdWlyZWQgdG8gZnVsbHkgaWRlbnRpZnkgdGhlIERJQ09NIFNPUCBpbnN0YW5jZXMgaW4gdGhlIHNlbGVjdGlvbi5cclxuICAgKi9cclxuICB1aWQ/OiBmaGlyLkZoaXJPaWR8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogSW1hZ2luZ09iamVjdFNlbGVjdGlvbi5zdHVkeS5zZXJpZXMudWlkXHJcbiAgICovXHJcbiAgX3VpZD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogV0FETy1SUyBVUkwgZW5hYmxlcyByZXRyaWV2YWwgb2YgdGhlIGVudGlyZSBzZXJpZXMgdXNpbmcgRElDT00gV0FETy1SUyBBUEkuXHJcbiAgICovXHJcbiAgdXJsPzogZmhpci5GaGlyVXJpfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEltYWdpbmdPYmplY3RTZWxlY3Rpb24uc3R1ZHkuc2VyaWVzLnVybFxyXG4gICAqL1xyXG4gIF91cmw/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIERJQ09NIFNPUCBpbnN0YW5jZXMgYXJlIGlkZW50aWZpZWQgdGhyb3VnaCB0aGUgVUlEcyBvZiB0aGUgc3R1ZHkgLSBzZXJpZXMgLSBpbnN0YW5jZSBoaWVyYXJjaHkuIFRoaXMgaXMgdGhlIGluc3RhbmNlIGxldmVsIGlkZW50aXR5IG9mIHRoZSBpbnN0YW5jZSBpbiB0aGUgc2VsZWN0aW9uLlxyXG4gICAqL1xyXG4gIGluc3RhbmNlOiBmaGlyLkltYWdpbmdPYmplY3RTZWxlY3Rpb25TdHVkeVNlcmllc0luc3RhbmNlQXJnc1tdfG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBESUNPTSBTT1AgaW5zdGFuY2VzIGFyZSBpZGVudGlmaWVkIHRocm91Z2ggdGhlIFVJRHMgb2YgdGhlIHN0dWR5IC0gc2VyaWVzIC0gaW5zdGFuY2UgaGllcmFyY2h5LiBJbiBhZGRpdGlvbiwgdGhlIGxvY2F0b3IgYXQgdGhlIHNlcmllcyBsZXZlbCBwcm92aWRlIGEgbWVhbnMgb2YgcmV0cmlldmluZyB0aGUgZW50aXJlIHNlcmllcy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBJbWFnaW5nT2JqZWN0U2VsZWN0aW9uU3R1ZHlTZXJpZXMgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdJbWFnaW5nT2JqZWN0U2VsZWN0aW9uU3R1ZHlTZXJpZXMnO1xyXG4gIC8qKlxyXG4gICAqIFNlcmllcyBpbnN0YW5jZSBVSUQgaXMgcmVxdWlyZWQgdG8gZnVsbHkgaWRlbnRpZnkgdGhlIERJQ09NIFNPUCBpbnN0YW5jZXMgaW4gdGhlIHNlbGVjdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgdWlkPzogZmhpci5GaGlyT2lkfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBXQURPLVJTIFVSTCBlbmFibGVzIHJldHJpZXZhbCBvZiB0aGUgZW50aXJlIHNlcmllcyB1c2luZyBESUNPTSBXQURPLVJTIEFQSS5cclxuICAgKi9cclxuICBwdWJsaWMgdXJsPzogZmhpci5GaGlyVXJpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBESUNPTSBTT1AgaW5zdGFuY2VzIGFyZSBpZGVudGlmaWVkIHRocm91Z2ggdGhlIFVJRHMgb2YgdGhlIHN0dWR5IC0gc2VyaWVzIC0gaW5zdGFuY2UgaGllcmFyY2h5LiBUaGlzIGlzIHRoZSBpbnN0YW5jZSBsZXZlbCBpZGVudGl0eSBvZiB0aGUgaW5zdGFuY2UgaW4gdGhlIHNlbGVjdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgaW5zdGFuY2U6IGZoaXIuSW1hZ2luZ09iamVjdFNlbGVjdGlvblN0dWR5U2VyaWVzSW5zdGFuY2VbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBJbWFnaW5nT2JqZWN0U2VsZWN0aW9uU3R1ZHlTZXJpZXMgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxJbWFnaW5nT2JqZWN0U2VsZWN0aW9uU3R1ZHlTZXJpZXNBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsndWlkJ10pIHsgdGhpcy51aWQgPSBuZXcgZmhpci5GaGlyT2lkKHt2YWx1ZTogc291cmNlLnVpZH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfdWlkJ10pIHtcclxuICAgICAgaWYgKHRoaXMudWlkKSB7IHRoaXMudWlkLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3VpZCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnVpZCA9IG5ldyBmaGlyLkZoaXJPaWQoc291cmNlLl91aWQgYXMgUGFydGlhbDxmaGlyLkZoaXJPaWRBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3VybCddKSB7IHRoaXMudXJsID0gbmV3IGZoaXIuRmhpclVyaSh7dmFsdWU6IHNvdXJjZS51cmx9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3VybCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnVybCkgeyB0aGlzLnVybC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl91cmwhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy51cmwgPSBuZXcgZmhpci5GaGlyVXJpKHNvdXJjZS5fdXJsIGFzIFBhcnRpYWw8Zmhpci5GaGlyVXJpQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydpbnN0YW5jZSddKSB7IHRoaXMuaW5zdGFuY2UgPSBzb3VyY2UuaW5zdGFuY2UubWFwKCh4KSA9PiBuZXcgZmhpci5JbWFnaW5nT2JqZWN0U2VsZWN0aW9uU3R1ZHlTZXJpZXNJbnN0YW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmluc3RhbmNlID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdJbWFnaW5nT2JqZWN0U2VsZWN0aW9uLnN0dWR5LnNlcmllcycgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3VpZCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygndXJsJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJBKCdpbnN0YW5jZScsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgSW1hZ2luZ09iamVjdFNlbGVjdGlvblN0dWR5IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEltYWdpbmdPYmplY3RTZWxlY3Rpb25TdHVkeUFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFN0dWR5IGluc3RhbmNlIFVJRCBpcyByZXF1aXJlZCB0byBmdWxseSBpZGVudGlmeSB0aGUgRElDT00gU09QIGluc3RhbmNlcyBpbiB0aGUgc2VsZWN0aW9uLlxyXG4gICAqL1xyXG4gIHVpZDogZmhpci5GaGlyT2lkfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEltYWdpbmdPYmplY3RTZWxlY3Rpb24uc3R1ZHkudWlkXHJcbiAgICovXHJcbiAgX3VpZD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogV0FETy1SUyBVUkwgZW5hYmxlcyByZXRyaWV2YWwgb2YgdGhlIGVudGlyZSBzdHVkeSB1c2luZyBESUNPTSBXQURPLVJTIEFQSS5cclxuICAgKi9cclxuICB1cmw/OiBmaGlyLkZoaXJVcml8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogSW1hZ2luZ09iamVjdFNlbGVjdGlvbi5zdHVkeS51cmxcclxuICAgKi9cclxuICBfdXJsPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBVc2VkIHRvIHJldHJpZXZlIHRoZSBJbWFnaW5nU3R1ZHkgdGhhdCBjb250YWluIHRoZSBpbWFnZXMgcmVmZXJlbmNlZCBpbiB0aGUgSW1hZ2luZyBPYmplY3RTZWxlY3Rpb24uc3R1ZHkuXHJcbiAgICovXHJcbiAgaW1hZ2luZ1N0dWR5PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBESUNPTSBTT1AgaW5zdGFuY2VzIGFyZSBpZGVudGlmaWVkIHRocm91Z2ggdGhlIFVJRHMgb2YgdGhlIHN0dWR5IC0gc2VyaWVzIC0gaW5zdGFuY2UgaGllcmFyY2h5LiBJbiBhZGRpdGlvbiwgdGhlIGxvY2F0b3IgYXQgdGhlIHNlcmllcyBsZXZlbCBwcm92aWRlIGEgbWVhbnMgb2YgcmV0cmlldmluZyB0aGUgZW50aXJlIHNlcmllcy5cclxuICAgKi9cclxuICBzZXJpZXM6IGZoaXIuSW1hZ2luZ09iamVjdFNlbGVjdGlvblN0dWR5U2VyaWVzQXJnc1tdfG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBESUNPTSBTT1AgaW5zdGFuY2VzIGFyZSBpZGVudGlmaWVkIHRocm91Z2ggdGhlIFVJRHMgb2YgdGhlIHN0dWR5IC0gc2VyaWVzIC0gaW5zdGFuY2UgaGllcmFyY2h5LiBJbiBhZGRpdGlvbiwgdGhlIGxvY2F0b3IgYXQgdGhlIHN0dWR5IGxldmVsIHByb3ZpZGUgYSBtZWFucyBvZiByZXRyaWV2aW5nIHRoZSBlbnRpcmUgc3R1ZHkuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgSW1hZ2luZ09iamVjdFNlbGVjdGlvblN0dWR5IGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnSW1hZ2luZ09iamVjdFNlbGVjdGlvblN0dWR5JztcclxuICAvKipcclxuICAgKiBTdHVkeSBpbnN0YW5jZSBVSUQgaXMgcmVxdWlyZWQgdG8gZnVsbHkgaWRlbnRpZnkgdGhlIERJQ09NIFNPUCBpbnN0YW5jZXMgaW4gdGhlIHNlbGVjdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgdWlkOiBmaGlyLkZoaXJPaWR8bnVsbDtcclxuICAvKipcclxuICAgKiBXQURPLVJTIFVSTCBlbmFibGVzIHJldHJpZXZhbCBvZiB0aGUgZW50aXJlIHN0dWR5IHVzaW5nIERJQ09NIFdBRE8tUlMgQVBJLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB1cmw/OiBmaGlyLkZoaXJVcml8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFVzZWQgdG8gcmV0cmlldmUgdGhlIEltYWdpbmdTdHVkeSB0aGF0IGNvbnRhaW4gdGhlIGltYWdlcyByZWZlcmVuY2VkIGluIHRoZSBJbWFnaW5nIE9iamVjdFNlbGVjdGlvbi5zdHVkeS5cclxuICAgKi9cclxuICBwdWJsaWMgaW1hZ2luZ1N0dWR5PzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERJQ09NIFNPUCBpbnN0YW5jZXMgYXJlIGlkZW50aWZpZWQgdGhyb3VnaCB0aGUgVUlEcyBvZiB0aGUgc3R1ZHkgLSBzZXJpZXMgLSBpbnN0YW5jZSBoaWVyYXJjaHkuIEluIGFkZGl0aW9uLCB0aGUgbG9jYXRvciBhdCB0aGUgc2VyaWVzIGxldmVsIHByb3ZpZGUgYSBtZWFucyBvZiByZXRyaWV2aW5nIHRoZSBlbnRpcmUgc2VyaWVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXJpZXM6IGZoaXIuSW1hZ2luZ09iamVjdFNlbGVjdGlvblN0dWR5U2VyaWVzW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgSW1hZ2luZ09iamVjdFNlbGVjdGlvblN0dWR5IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8SW1hZ2luZ09iamVjdFNlbGVjdGlvblN0dWR5QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3VpZCddKSB7IHRoaXMudWlkID0gbmV3IGZoaXIuRmhpck9pZCh7dmFsdWU6IHNvdXJjZS51aWR9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudWlkID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3VpZCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnVpZCkgeyB0aGlzLnVpZC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl91aWQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy51aWQgPSBuZXcgZmhpci5GaGlyT2lkKHNvdXJjZS5fdWlkIGFzIFBhcnRpYWw8Zmhpci5GaGlyT2lkQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd1cmwnXSkgeyB0aGlzLnVybCA9IG5ldyBmaGlyLkZoaXJVcmkoe3ZhbHVlOiBzb3VyY2UudXJsfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ191cmwnXSkge1xyXG4gICAgICBpZiAodGhpcy51cmwpIHsgdGhpcy51cmwuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdXJsISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudXJsID0gbmV3IGZoaXIuRmhpclVyaShzb3VyY2UuX3VybCBhcyBQYXJ0aWFsPGZoaXIuRmhpclVyaUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnaW1hZ2luZ1N0dWR5J10pIHsgdGhpcy5pbWFnaW5nU3R1ZHkgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmltYWdpbmdTdHVkeSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3NlcmllcyddKSB7IHRoaXMuc2VyaWVzID0gc291cmNlLnNlcmllcy5tYXAoKHgpID0+IG5ldyBmaGlyLkltYWdpbmdPYmplY3RTZWxlY3Rpb25TdHVkeVNlcmllcyh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnNlcmllcyA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnSW1hZ2luZ09iamVjdFNlbGVjdGlvbi5zdHVkeScgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ3VpZCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygndXJsJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdpbWFnaW5nU3R1ZHknLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UkEoJ3NlcmllcycsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgSW1hZ2luZ09iamVjdFNlbGVjdGlvbiB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBJbWFnaW5nT2JqZWN0U2VsZWN0aW9uQXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiSW1hZ2luZ09iamVjdFNlbGVjdGlvblwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBESUNPTSBTT1AgSW5zdGFuY2UgaXMgYWx3YXlzIGFzc2lnbmVkIHdpdGggYSB1bmlxdWUgaWRlbnRpZmllciAoVUlEKS5cclxuICAgKi9cclxuICB1aWQ6IGZoaXIuRmhpck9pZHxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBJbWFnaW5nT2JqZWN0U2VsZWN0aW9uLnVpZFxyXG4gICAqL1xyXG4gIF91aWQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFNPUCBJbnN0YW5jZXMgaW4gSW1hZ2luZ09iamVjdFNlbGVjdGlvbiBtdXN0IGJlIGZyb20gdGhlIHNhbWUgcGF0aWVudC5cclxuICAgKi9cclxuICBwYXRpZW50OiBmaGlyLlJlZmVyZW5jZUFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBOZWVkIHRvIHJlcHJlc2VudCB0aGUgYXBwbGljYXRpb24gcHVycG9zZSB0aGF0IHRoZSBTT1AgaW5zdGFuY2VzIGluIEltYWdpbmdPYmplY3RTZWxlY3Rpb24gYXJlIHNlbGVjdGVkIGZvci5cclxuICAgKi9cclxuICB0aXRsZTogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogTmVlZCB0byBwcm92aWRlIGEgbmFycmF0aXZlIGRlc2NyaXB0aW9uIG9mIHRoZSBTT1AgaW5zdGFuY2VzIGluIHRoZSBzZWxlY3Rpb24uXHJcbiAgICovXHJcbiAgZGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogSW1hZ2luZ09iamVjdFNlbGVjdGlvbi5kZXNjcmlwdGlvblxyXG4gICAqL1xyXG4gIF9kZXNjcmlwdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVHJhY2sgdGhlIHNlbGVjdGlvbiBkZWNpc2lvbiBtYWtlci5cclxuICAgKi9cclxuICBhdXRob3I/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERhdGUgYW5kIHRpbWUgd2hlbiB0aGUgc2VsZWN0aW9uIHdhcyBtYWRlIGNhbiBiZSBpbXBvcnRhbnQgdG8gdW5kZXJzdGFuZCB0aGUgY29udGVudCBvZiBzZWxlY3Rpb24uXHJcbiAgICovXHJcbiAgYXV0aG9yaW5nVGltZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEltYWdpbmdPYmplY3RTZWxlY3Rpb24uYXV0aG9yaW5nVGltZVxyXG4gICAqL1xyXG4gIF9hdXRob3JpbmdUaW1lPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBESUNPTSBTT1AgaW5zdGFuY2VzIGFyZSBpZGVudGlmaWVkIHRocm91Z2ggdGhlIFVJRHMgb2YgdGhlIHN0dWR5IC0gc2VyaWVzIC0gaW5zdGFuY2UgaGllcmFyY2h5LiBJbiBhZGRpdGlvbiwgdGhlIGxvY2F0b3IgYXQgdGhlIHN0dWR5IGxldmVsIHByb3ZpZGUgYSBtZWFucyBvZiByZXRyaWV2aW5nIHRoZSBlbnRpcmUgc3R1ZHkuXHJcbiAgICovXHJcbiAgc3R1ZHk6IGZoaXIuSW1hZ2luZ09iamVjdFNlbGVjdGlvblN0dWR5QXJnc1tdfG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBIG1hbmlmZXN0IG9mIGEgc2V0IG9mIERJQ09NIFNlcnZpY2UtT2JqZWN0IFBhaXIgSW5zdGFuY2VzIChTT1AgSW5zdGFuY2VzKS4gIFRoZSByZWZlcmVuY2VkIFNPUCBJbnN0YW5jZXMgKGltYWdlcyBvciBvdGhlciBjb250ZW50KSBhcmUgZm9yIGEgc2luZ2xlIHBhdGllbnQsIGFuZCBtYXkgYmUgZnJvbSBvbmUgb3IgbW9yZSBzdHVkaWVzLiBUaGUgcmVmZXJlbmNlZCBTT1AgSW5zdGFuY2VzIGhhdmUgYmVlbiBzZWxlY3RlZCBmb3IgYSBwdXJwb3NlLCBzdWNoIGFzIHF1YWxpdHkgYXNzdXJhbmNlLCBjb25mZXJlbmNlLCBvciBjb25zdWx0LiBSZWZsZWN0aW5nIHRoYXQgcmFuZ2Ugb2YgcHVycG9zZXMsIHR5cGljYWwgSW1hZ2luZ09iamVjdFNlbGVjdGlvbiByZXNvdXJjZXMgbWF5IGluY2x1ZGUgYWxsIFNPUCBJbnN0YW5jZXMgaW4gYSBzdHVkeSAocGVyaGFwcyBmb3Igc2hhcmluZyB0aHJvdWdoIGEgSGVhbHRoIEluZm9ybWF0aW9uIEV4Y2hhbmdlKTsga2V5IGltYWdlcyBmcm9tIG11bHRpcGxlIHN0dWRpZXMgKGZvciByZWZlcmVuY2UgYnkgYSByZWZlcnJpbmcgb3IgdHJlYXRpbmcgcGh5c2ljaWFuKTsgYSBtdWx0aS1mcmFtZSB1bHRyYXNvdW5kIGluc3RhbmNlIChcImNpbmVcIiB2aWRlbyBjbGlwKSBhbmQgYSBzZXQgb2YgbWVhc3VyZW1lbnRzIHRha2VuIGZyb20gdGhhdCBpbnN0YW5jZSAoZm9yIGluY2x1c2lvbiBpbiBhIHRlYWNoaW5nIGZpbGUpOyBhbmQgc28gb24uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgSW1hZ2luZ09iamVjdFNlbGVjdGlvbiBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnSW1hZ2luZ09iamVjdFNlbGVjdGlvbic7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJJbWFnaW5nT2JqZWN0U2VsZWN0aW9uXCI7XHJcbiAgLyoqXHJcbiAgICogRElDT00gU09QIEluc3RhbmNlIGlzIGFsd2F5cyBhc3NpZ25lZCB3aXRoIGEgdW5pcXVlIGlkZW50aWZpZXIgKFVJRCkuXHJcbiAgICovXHJcbiAgcHVibGljIHVpZDogZmhpci5GaGlyT2lkfG51bGw7XHJcbiAgLyoqXHJcbiAgICogU09QIEluc3RhbmNlcyBpbiBJbWFnaW5nT2JqZWN0U2VsZWN0aW9uIG11c3QgYmUgZnJvbSB0aGUgc2FtZSBwYXRpZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXRpZW50OiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIE5lZWQgdG8gcmVwcmVzZW50IHRoZSBhcHBsaWNhdGlvbiBwdXJwb3NlIHRoYXQgdGhlIFNPUCBpbnN0YW5jZXMgaW4gSW1hZ2luZ09iamVjdFNlbGVjdGlvbiBhcmUgc2VsZWN0ZWQgZm9yLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0aXRsZTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBOZWVkIHRvIHByb3ZpZGUgYSBuYXJyYXRpdmUgZGVzY3JpcHRpb24gb2YgdGhlIFNPUCBpbnN0YW5jZXMgaW4gdGhlIHNlbGVjdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgZGVzY3JpcHRpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRyYWNrIHRoZSBzZWxlY3Rpb24gZGVjaXNpb24gbWFrZXIuXHJcbiAgICovXHJcbiAgcHVibGljIGF1dGhvcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEYXRlIGFuZCB0aW1lIHdoZW4gdGhlIHNlbGVjdGlvbiB3YXMgbWFkZSBjYW4gYmUgaW1wb3J0YW50IHRvIHVuZGVyc3RhbmQgdGhlIGNvbnRlbnQgb2Ygc2VsZWN0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhdXRob3JpbmdUaW1lPzogZmhpci5GaGlyRGF0ZVRpbWV8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERJQ09NIFNPUCBpbnN0YW5jZXMgYXJlIGlkZW50aWZpZWQgdGhyb3VnaCB0aGUgVUlEcyBvZiB0aGUgc3R1ZHkgLSBzZXJpZXMgLSBpbnN0YW5jZSBoaWVyYXJjaHkuIEluIGFkZGl0aW9uLCB0aGUgbG9jYXRvciBhdCB0aGUgc3R1ZHkgbGV2ZWwgcHJvdmlkZSBhIG1lYW5zIG9mIHJldHJpZXZpbmcgdGhlIGVudGlyZSBzdHVkeS5cclxuICAgKi9cclxuICBwdWJsaWMgc3R1ZHk6IGZoaXIuSW1hZ2luZ09iamVjdFNlbGVjdGlvblN0dWR5W107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgSW1hZ2luZ09iamVjdFNlbGVjdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEltYWdpbmdPYmplY3RTZWxlY3Rpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnSW1hZ2luZ09iamVjdFNlbGVjdGlvbic7XHJcbiAgICBpZiAoc291cmNlWyd1aWQnXSkgeyB0aGlzLnVpZCA9IG5ldyBmaGlyLkZoaXJPaWQoe3ZhbHVlOiBzb3VyY2UudWlkfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnVpZCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ191aWQnXSkge1xyXG4gICAgICBpZiAodGhpcy51aWQpIHsgdGhpcy51aWQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdWlkISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudWlkID0gbmV3IGZoaXIuRmhpck9pZChzb3VyY2UuX3VpZCBhcyBQYXJ0aWFsPGZoaXIuRmhpck9pZEFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsncGF0aWVudCddKSB7IHRoaXMucGF0aWVudCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UucGF0aWVudCk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnBhdGllbnQgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWyd0aXRsZSddKSB7IHRoaXMudGl0bGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnRpdGxlKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudGl0bGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydkZXNjcmlwdGlvbiddKSB7IHRoaXMuZGVzY3JpcHRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmRlc2NyaXB0aW9ufSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19kZXNjcmlwdGlvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLmRlc2NyaXB0aW9uKSB7IHRoaXMuZGVzY3JpcHRpb24uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZGVzY3JpcHRpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5kZXNjcmlwdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9kZXNjcmlwdGlvbiBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnYXV0aG9yJ10pIHsgdGhpcy5hdXRob3IgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmF1dGhvcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ2F1dGhvcmluZ1RpbWUnXSkgeyB0aGlzLmF1dGhvcmluZ1RpbWUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2UuYXV0aG9yaW5nVGltZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfYXV0aG9yaW5nVGltZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLmF1dGhvcmluZ1RpbWUpIHsgdGhpcy5hdXRob3JpbmdUaW1lLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2F1dGhvcmluZ1RpbWUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5hdXRob3JpbmdUaW1lID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHNvdXJjZS5fYXV0aG9yaW5nVGltZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckRhdGVUaW1lQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydzdHVkeSddKSB7IHRoaXMuc3R1ZHkgPSBzb3VyY2Uuc3R1ZHkubWFwKCh4KSA9PiBuZXcgZmhpci5JbWFnaW5nT2JqZWN0U2VsZWN0aW9uU3R1ZHkoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdHVkeSA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnSW1hZ2luZ09iamVjdFNlbGVjdGlvbicgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlBTKCdyZXNvdXJjZVR5cGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ3VpZCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygncGF0aWVudCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygndGl0bGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2Rlc2NyaXB0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdhdXRob3InLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2F1dGhvcmluZ1RpbWUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UkEoJ3N0dWR5JyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbiJdfQ==