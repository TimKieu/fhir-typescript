// <auto-generated/>
// Contents of: hl7.fhir.r2.core version: 1.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: ImagingObjectSelection
import * as fhir from '../fhir.js';
/**
 * The specific set of frames referenced in this imaging object selection. The URL retrieves the pixel data, and is encapsulated in a multipart MIME response.
 */
export class ImagingObjectSelectionStudySeriesInstanceFrames extends fhir.BackboneElement {
    /**
     * Default constructor for ImagingObjectSelectionStudySeriesInstanceFrames - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['frameNumbers'] !== undefined) {
            this.frameNumbers = source.frameNumbers.map((x) => new fhir.FhirUnsignedInt({ value: x }, options));
        }
        else {
            this.frameNumbers = [];
        }
        if (source['_frameNumbers']) {
            source._frameNumbers.forEach((x, i) => {
                if (this.frameNumbers.length >= i) {
                    if (x) {
                        this.frameNumbers[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.frameNumbers.push(new fhir.FhirUnsignedInt(x));
                    }
                }
            });
        }
        if (source['url'] !== undefined) {
            this.url = new fhir.FhirUri({ value: source.url }, options);
        }
        else {
            this.url = null;
        }
        if (source['_url']) {
            if (this.url) {
                this.url.addExtendedProperties(source._url);
            }
            else {
                this.url = new fhir.FhirUri(source._url, options);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ImagingObjectSelection.study.series.instance.frames';
        }
        iss.push(...this.vRA('frameNumbers', exp));
        iss.push(...this.vRS('url', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ImagingObjectSelectionStudySeriesInstanceFrames._fts_dataType = 'ImagingObjectSelectionStudySeriesInstanceFrames';
/**
 * DICOM SOP instances are identified through the UIDs of the study - series - instance hierarchy. This is the instance level identity of the instance in the selection.
 */
export class ImagingObjectSelectionStudySeriesInstance extends fhir.BackboneElement {
    /**
     * Default constructor for ImagingObjectSelectionStudySeriesInstance - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['sopClass'] !== undefined) {
            this.sopClass = new fhir.FhirOid({ value: source.sopClass }, options);
        }
        else {
            this.sopClass = null;
        }
        if (source['_sopClass']) {
            if (this.sopClass) {
                this.sopClass.addExtendedProperties(source._sopClass);
            }
            else {
                this.sopClass = new fhir.FhirOid(source._sopClass, options);
            }
        }
        if (source['uid'] !== undefined) {
            this.uid = new fhir.FhirOid({ value: source.uid }, options);
        }
        else {
            this.uid = null;
        }
        if (source['_uid']) {
            if (this.uid) {
                this.uid.addExtendedProperties(source._uid);
            }
            else {
                this.uid = new fhir.FhirOid(source._uid, options);
            }
        }
        if (source['url'] !== undefined) {
            this.url = new fhir.FhirUri({ value: source.url }, options);
        }
        else {
            this.url = null;
        }
        if (source['_url']) {
            if (this.url) {
                this.url.addExtendedProperties(source._url);
            }
            else {
                this.url = new fhir.FhirUri(source._url, options);
            }
        }
        if (source['frames']) {
            this.frames = source.frames.map((x) => new fhir.ImagingObjectSelectionStudySeriesInstanceFrames(x, options));
        }
        else {
            this.frames = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ImagingObjectSelection.study.series.instance';
        }
        iss.push(...this.vRS('sopClass', exp));
        iss.push(...this.vRS('uid', exp));
        iss.push(...this.vRS('url', exp));
        iss.push(...this.vOA('frames', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ImagingObjectSelectionStudySeriesInstance._fts_dataType = 'ImagingObjectSelectionStudySeriesInstance';
/**
 * DICOM SOP instances are identified through the UIDs of the study - series - instance hierarchy. In addition, the locator at the series level provide a means of retrieving the entire series.
 */
export class ImagingObjectSelectionStudySeries extends fhir.BackboneElement {
    /**
     * Default constructor for ImagingObjectSelectionStudySeries - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['uid'] !== undefined) {
            this.uid = new fhir.FhirOid({ value: source.uid }, options);
        }
        if (source['_uid']) {
            if (this.uid) {
                this.uid.addExtendedProperties(source._uid);
            }
            else {
                this.uid = new fhir.FhirOid(source._uid, options);
            }
        }
        if (source['url'] !== undefined) {
            this.url = new fhir.FhirUri({ value: source.url }, options);
        }
        if (source['_url']) {
            if (this.url) {
                this.url.addExtendedProperties(source._url);
            }
            else {
                this.url = new fhir.FhirUri(source._url, options);
            }
        }
        if (source['instance']) {
            this.instance = source.instance.map((x) => new fhir.ImagingObjectSelectionStudySeriesInstance(x, options));
        }
        else {
            this.instance = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ImagingObjectSelection.study.series';
        }
        iss.push(...this.vOS('uid', exp));
        iss.push(...this.vOS('url', exp));
        iss.push(...this.vRA('instance', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ImagingObjectSelectionStudySeries._fts_dataType = 'ImagingObjectSelectionStudySeries';
/**
 * DICOM SOP instances are identified through the UIDs of the study - series - instance hierarchy. In addition, the locator at the study level provide a means of retrieving the entire study.
 */
export class ImagingObjectSelectionStudy extends fhir.BackboneElement {
    /**
     * Default constructor for ImagingObjectSelectionStudy - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['uid'] !== undefined) {
            this.uid = new fhir.FhirOid({ value: source.uid }, options);
        }
        else {
            this.uid = null;
        }
        if (source['_uid']) {
            if (this.uid) {
                this.uid.addExtendedProperties(source._uid);
            }
            else {
                this.uid = new fhir.FhirOid(source._uid, options);
            }
        }
        if (source['url'] !== undefined) {
            this.url = new fhir.FhirUri({ value: source.url }, options);
        }
        if (source['_url']) {
            if (this.url) {
                this.url.addExtendedProperties(source._url);
            }
            else {
                this.url = new fhir.FhirUri(source._url, options);
            }
        }
        if (source['imagingStudy']) {
            this.imagingStudy = new fhir.Reference(source.imagingStudy, options);
        }
        if (source['series']) {
            this.series = source.series.map((x) => new fhir.ImagingObjectSelectionStudySeries(x, options));
        }
        else {
            this.series = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ImagingObjectSelection.study';
        }
        iss.push(...this.vRS('uid', exp));
        iss.push(...this.vOS('url', exp));
        iss.push(...this.vOS('imagingStudy', exp));
        iss.push(...this.vRA('series', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ImagingObjectSelectionStudy._fts_dataType = 'ImagingObjectSelectionStudy';
/**
 * A manifest of a set of DICOM Service-Object Pair Instances (SOP Instances).  The referenced SOP Instances (images or other content) are for a single patient, and may be from one or more studies. The referenced SOP Instances have been selected for a purpose, such as quality assurance, conference, or consult. Reflecting that range of purposes, typical ImagingObjectSelection resources may include all SOP Instances in a study (perhaps for sharing through a Health Information Exchange); key images from multiple studies (for reference by a referring or treating physician); a multi-frame ultrasound instance ("cine" video clip) and a set of measurements taken from that instance (for inclusion in a teaching file); and so on.
 */
export class ImagingObjectSelection extends fhir.DomainResource {
    /**
     * Default constructor for ImagingObjectSelection - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'ImagingObjectSelection';
        if (source['uid'] !== undefined) {
            this.uid = new fhir.FhirOid({ value: source.uid }, options);
        }
        else {
            this.uid = null;
        }
        if (source['_uid']) {
            if (this.uid) {
                this.uid.addExtendedProperties(source._uid);
            }
            else {
                this.uid = new fhir.FhirOid(source._uid, options);
            }
        }
        if (source['patient']) {
            this.patient = new fhir.Reference(source.patient, options);
        }
        else {
            this.patient = null;
        }
        if (source['title']) {
            this.title = new fhir.CodeableConcept(source.title, options);
        }
        else {
            this.title = null;
        }
        if (source['description'] !== undefined) {
            this.description = new fhir.FhirString({ value: source.description }, options);
        }
        if (source['_description']) {
            if (this.description) {
                this.description.addExtendedProperties(source._description);
            }
            else {
                this.description = new fhir.FhirString(source._description, options);
            }
        }
        if (source['author']) {
            this.author = new fhir.Reference(source.author, options);
        }
        if (source['authoringTime'] !== undefined) {
            this.authoringTime = new fhir.FhirDateTime({ value: source.authoringTime }, options);
        }
        if (source['_authoringTime']) {
            if (this.authoringTime) {
                this.authoringTime.addExtendedProperties(source._authoringTime);
            }
            else {
                this.authoringTime = new fhir.FhirDateTime(source._authoringTime, options);
            }
        }
        if (source['study']) {
            this.study = source.study.map((x) => new fhir.ImagingObjectSelectionStudy(x, options));
        }
        else {
            this.study = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ImagingObjectSelection';
        }
        iss.push(...this.vRS('uid', exp));
        iss.push(...this.vRS('patient', exp));
        iss.push(...this.vRS('title', exp));
        iss.push(...this.vOS('description', exp));
        iss.push(...this.vOS('author', exp));
        iss.push(...this.vOS('authoringTime', exp));
        iss.push(...this.vRA('study', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ImagingObjectSelection._fts_dataType = 'ImagingObjectSelection';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW1hZ2luZ09iamVjdFNlbGVjdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvSW1hZ2luZ09iamVjdFNlbGVjdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQyx3Q0FBd0M7QUFFeEMsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUF3Qm5DOztHQUVHO0FBQ0gsTUFBTSxPQUFPLCtDQUFnRCxTQUFRLElBQUksQ0FBQyxlQUFlO0lBYXZGOztPQUVHO0lBQ0gsWUFBWSxTQUFzRSxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUM1SCxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLGNBQWMsQ0FBQyxLQUFLLFNBQVMsRUFBRTtZQUFFLElBQUksQ0FBQyxZQUFZLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxFQUFDLEtBQUssRUFBRSxDQUFDLEVBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDM0k7WUFBRSxJQUFJLENBQUMsWUFBWSxHQUFHLEVBQUUsQ0FBQztTQUFFO1FBQ2hDLElBQUksTUFBTSxDQUFDLGVBQWUsQ0FBQyxFQUFFO1lBQzNCLE1BQU0sQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFO2dCQUNuQyxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBRTtvQkFBRSxJQUFJLENBQUMsRUFBRTt3QkFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxDQUFDO3FCQUFFO2lCQUFFO3FCQUMzRjtvQkFBRSxJQUFJLENBQUMs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Q3ZELElBQUksR0FBRyxLQUFLLEVBQUUsRUFBRTtZQUFFLEdBQUcsR0FBRyx3QkFBd0IsQ0FBQTtTQUFFO1FBQ2xELEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ2pDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3JDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ25DLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3pDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3BDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzNDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ25DLE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQzs7QUFoRkQ7O0dBRUc7QUFDNkIsb0NBQWEsR0FBVSx3QkFBd0IsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yMi5jb3JlIHZlcnNpb246IDEuMC4yXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogSW1hZ2luZ09iamVjdFNlbGVjdGlvblxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBJbWFnaW5nT2JqZWN0U2VsZWN0aW9uU3R1ZHlTZXJpZXNJbnN0YW5jZUZyYW1lcyB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBJbWFnaW5nT2JqZWN0U2VsZWN0aW9uU3R1ZHlTZXJpZXNJbnN0YW5jZUZyYW1lc0FyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIE9uZSBvciBtb3JlIG5vbi1kdXBsaWNhdGUgZnJhbWUgbnVtYmVycyBpbiB0aGUgc2VsZWN0ZWQgaW5zdGFuY2UuXHJcbiAgICovXHJcbiAgZnJhbWVOdW1iZXJzOiBmaGlyLkZoaXJVbnNpZ25lZEludFtdfChudW1iZXJ8bnVsbClbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEltYWdpbmdPYmplY3RTZWxlY3Rpb24uc3R1ZHkuc2VyaWVzLmluc3RhbmNlLmZyYW1lcy5mcmFtZU51bWJlcnNcclxuICAgKi9cclxuICBfZnJhbWVOdW1iZXJzPzooZmhpci5GaGlyRWxlbWVudEFyZ3N8bnVsbClbXTtcclxuICAvKipcclxuICAgKiBXQURPLVJTIFVSTCBlbmFibGVzIHJldHJpZXZhbCBvZiB0aGUgZnJhbWVzIHVzaW5nIERJQ09NIFdBRE8tUlMgQVBJLlxyXG4gICAqL1xyXG4gIHVybDogZmhpci5GaGlyVXJpfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEltYWdpbmdPYmplY3RTZWxlY3Rpb24uc3R1ZHkuc2VyaWVzLmluc3RhbmNlLmZyYW1lcy51cmxcclxuICAgKi9cclxuICBfdXJsPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBzcGVjaWZpYyBzZXQgb2YgZnJhbWVzIHJlZmVyZW5jZWQgaW4gdGhpcyBpbWFnaW5nIG9iamVjdCBzZWxlY3Rpb24uIFRoZSBVUkwgcmV0cmlldmVzIHRoZSBwaXhlbCBkYXRhLCBhbmQgaXMgZW5jYXBzdWxhdGVkIGluIGEgbXVsdGlwYXJ0IE1JTUUgcmVzcG9uc2UuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgSW1hZ2luZ09iamVjdFNlbGVjdGlvblN0dWR5U2VyaWVzSW5zdGFuY2VGcmFtZXMgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdJbWFnaW5nT2JqZWN0U2VsZWN0aW9uU3R1ZHlTZXJpZXNJbnN0YW5jZUZyYW1lcyc7XHJcbiAgLyoqXHJcbiAgICogT25lIG9yIG1vcmUgbm9uLWR1cGxpY2F0ZSBmcmFtZSBudW1iZXJzIGluIHRoZSBzZWxlY3RlZCBpbnN0YW5jZS5cclxuICAgKi9cclxuICBwdWJsaWMgZnJhbWVOdW1iZXJzOiBmaGlyLkZoaXJVbnNpZ25lZEludFtdO1xyXG4gIC8qKlxyXG4gICAqIFdBRE8tUlMgVVJMIGVuYWJsZXMgcmV0cmlldmFsIG9mIHRoZSBmcmFtZXMgdXNpbmcgRElDT00gV0FETy1SUyBBUEkuXHJcbiAgICovXHJcbiAgcHVibGljIHVybDogZmhpci5GaGlyVXJpfG51bGw7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgSW1hZ2luZ09iamVjdFNlbGVjdGlvblN0dWR5U2VyaWVzSW5zdGFuY2VGcmFtZXMgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxJbWFnaW5nT2JqZWN0U2VsZWN0aW9uU3R1ZHlTZXJpZXNJbnN0YW5jZUZyYW1lc0FyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydmcmFtZU51bWJlcnMnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuZnJhbWVOdW1iZXJzID0gc291cmNlLmZyYW1lTnVtYmVycy5tYXAoKHgpID0+IG5ldyBmaGlyLkZoaXJVbnNpZ25lZEludCh7dmFsdWU6IHh9LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmZyYW1lTnVtYmVycyA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydfZnJhbWVOdW1iZXJzJ10pIHtcclxuICAgICAgc291cmNlLl9mcmFtZU51bWJlcnMuZm9yRWFjaCgoeCxpKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuZnJhbWVOdW1iZXJzLmxlbmd0aCA+PSBpKSB7IGlmICh4KSB7IHRoaXMuZnJhbWVOdW1iZXJzW2ldLmFkZEV4dGVuZGVkUHJvcGVydGllcyh4KTsgfSB9XHJcbiAgICAgICAgZWxzZSB7IGlmICh4KSB7IHRoaXMuZnJhbWVOdW1iZXJzLnB1c2gobmV3IGZoaXIuRmhpclVuc2lnbmVkSW50KHggYXMgUGFydGlhbDxmaGlyLkZoaXJVbnNpZ25lZEludEFyZ3M+KSk7IH0gfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3VybCddICE9PSB1bmRlZmluZWQpIHsgdGhpcy51cmwgPSBuZXcgZmhpci5GaGlyVXJpKHt2YWx1ZTogc291cmNlLnVybH0sIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy51cmwgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfdXJsJ10pIHtcclxuICAgICAgaWYgKHRoaXMudXJsKSB7IHRoaXMudXJsLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3VybCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnVybCA9IG5ldyBmaGlyLkZoaXJVcmkoc291cmNlLl91cmwgYXMgUGFydGlhbDxmaGlyLkZoaXJVcmlBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdJbWFnaW5nT2JqZWN0U2VsZWN0aW9uLnN0dWR5LnNlcmllcy5pbnN0YW5jZS5mcmFtZXMnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJBKCdmcmFtZU51bWJlcnMnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ3VybCcsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgSW1hZ2luZ09iamVjdFNlbGVjdGlvblN0dWR5U2VyaWVzSW5zdGFuY2UgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgSW1hZ2luZ09iamVjdFNlbGVjdGlvblN0dWR5U2VyaWVzSW5zdGFuY2VBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBESUNPTSBTT1AgaW5zdGFuY2VzIGNhbiBiZSBhbiBpbWFnZSBvciBvdGhlciBkYXRhIG9iamVjdC4gVGhlIFNPUCBjbGFzcyBVSUQgcHJvdmlkZSB0aGUgYWNjdXJhdGUgaW5mb3JtYXRpb24gYWJvdXQgd2hhdCB0eXBlIHRoZSBpbnN0YW5jZSBpcy5cclxuICAgKi9cclxuICBzb3BDbGFzczogZmhpci5GaGlyT2lkfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEltYWdpbmdPYmplY3RTZWxlY3Rpb24uc3R1ZHkuc2VyaWVzLmluc3RhbmNlLnNvcENsYXNzXHJcbiAgICovXHJcbiAgX3NvcENsYXNzPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBTT1AgaW5zdGFuY2UgVUlEIGlzIHJlcXVpcmVkIHRvIGZ1bGx5IGlkZW50aWZ5IHRoZSBESUNPTSBTT1AgaW5zdGFuY2UgaW4gdGhlIHNlbGVjdGlvbi5cclxuICAgKi9cclxuICB1aWQ6IGZoaXIuRmhpck9pZHxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBJbWFnaW5nT2JqZWN0U2VsZWN0aW9uLnN0dWR5LnNlcmllcy5pbnN0YW5jZS51aWRcclxuICAgKi9cclxuICBfdWlkPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBXQURPLVJTIFVSTCBlbmFibGVzIHJldHJpZXZhbCBvZiB0aGUgU09QIGluc3RhbmNlIHVzaW5nIERJQ09NIFdBRE8tUlMgQVBJLlxyXG4gICAqL1xyXG4gIHVybDogZmhpci5GaGlyVXJpfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEltYWdpbmdPYmplY3RTZWxlY3Rpb24uc3R1ZHkuc2VyaWVzLmluc3RhbmNlLnVybFxyXG4gICAqL1xyXG4gIF91cmw/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzcGVjaWZpYyBzZXQgb2YgZnJhbWVzIHJlZmVyZW5jZWQgaW4gdGhpcyBpbWFnaW5nIG9iamVjdCBzZWxlY3Rpb24uIFRoZSBVUkwgcmV0cmlldmVzIHRoZSBwaXhlbCBkYXRhLCBhbmQgaXMgZW5jYXBzdWxhdGVkIGluIGEgbXVsdGlwYXJ0IE1JTUUgcmVzcG9uc2UuXHJcbiAgICovXHJcbiAgZnJhbWVzPzogZmhpci5JbWFnaW5nT2JqZWN0U2VsZWN0aW9uU3R1ZHlTZXJpZXNJbnN0YW5jZUZyYW1lc0FyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBESUNPTSBTT1AgaW5zdGFuY2VzIGFyZSBpZGVudGlmaWVkIHRocm91Z2ggdGhlIFVJRHMgb2YgdGhlIHN0dWR5IC0gc2VyaWVzIC0gaW5zdGFuY2UgaGllcmFyY2h5LiBUaGlzIGlzIHRoZSBpbnN0YW5jZSBsZXZlbCBpZGVudGl0eSBvZiB0aGUgaW5zdGFuY2UgaW4gdGhlIHNlbGVjdGlvbi5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBJbWFnaW5nT2JqZWN0U2VsZWN0aW9uU3R1ZHlTZXJpZXNJbnN0YW5jZSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0ltYWdpbmdPYmplY3RTZWxlY3Rpb25TdHVkeVNlcmllc0luc3RhbmNlJztcclxuICAvKipcclxuICAgKiBESUNPTSBTT1AgaW5zdGFuY2VzIGNhbiBiZSBhbiBpbWFnZSBvciBvdGhlciBkYXRhIG9iamVjdC4gVGhlIFNPUCBjbGFzcyBVSUQgcHJvdmlkZSB0aGUgYWNjdXJhdGUgaW5mb3JtYXRpb24gYWJvdXQgd2hhdCB0eXBlIHRoZSBpbnN0YW5jZSBpcy5cclxuICAgKi9cclxuICBwdWJsaWMgc29wQ2xhc3M6IGZoaXIuRmhpck9pZHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFNPUCBpbnN0YW5jZSBVSUQgaXMgcmVxdWlyZWQgdG8gZnVsbHkgaWRlbnRpZnkgdGhlIERJQ09NIFNPUCBpbnN0YW5jZSBpbiB0aGUgc2VsZWN0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB1aWQ6IGZoaXIuRmhpck9pZHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFdBRE8tUlMgVVJMIGVuYWJsZXMgcmV0cmlldmFsIG9mIHRoZSBTT1AgaW5zdGFuY2UgdXNpbmcgRElDT00gV0FETy1SUyBBUEkuXHJcbiAgICovXHJcbiAgcHVibGljIHVybDogZmhpci5GaGlyVXJpfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNwZWNpZmljIHNldCBvZiBmcmFtZXMgcmVmZXJlbmNlZCBpbiB0aGlzIGltYWdpbmcgb2JqZWN0IHNlbGVjdGlvbi4gVGhlIFVSTCByZXRyaWV2ZXMgdGhlIHBpeGVsIGRhdGEsIGFuZCBpcyBlbmNhcHN1bGF0ZWQgaW4gYSBtdWx0aXBhcnQgTUlNRSByZXNwb25zZS5cclxuICAgKi9cclxuICBwdWJsaWMgZnJhbWVzOiBmaGlyLkltYWdpbmdPYmplY3RTZWxlY3Rpb25TdHVkeVNlcmllc0luc3RhbmNlRnJhbWVzW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgSW1hZ2luZ09iamVjdFNlbGVjdGlvblN0dWR5U2VyaWVzSW5zdGFuY2UgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxJbWFnaW5nT2JqZWN0U2VsZWN0aW9uU3R1ZHlTZXJpZXNJbnN0YW5jZUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydzb3BDbGFzcyddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5zb3BDbGFzcyA9IG5ldyBmaGlyLkZoaXJPaWQoe3ZhbHVlOiBzb3VyY2Uuc29wQ2xhc3N9LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc29wQ2xhc3MgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfc29wQ2xhc3MnXSkge1xyXG4gICAgICBpZiAodGhpcy5zb3BDbGFzcykgeyB0aGlzLnNvcENsYXNzLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3NvcENsYXNzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc29wQ2xhc3MgPSBuZXcgZmhpci5GaGlyT2lkKHNvdXJjZS5fc29wQ2xhc3MgYXMgUGFydGlhbDxmaGlyLkZoaXJPaWRBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3VpZCddICE9PSB1bmRlZmluZWQpIHsgdGhpcy51aWQgPSBuZXcgZmhpci5GaGlyT2lkKHt2YWx1ZTogc291cmNlLnVpZH0sIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy51aWQgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfdWlkJ10pIHtcclxuICAgICAgaWYgKHRoaXMudWlkKSB7IHRoaXMudWlkLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3VpZCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnVpZCA9IG5ldyBmaGlyLkZoaXJPaWQoc291cmNlLl91aWQgYXMgUGFydGlhbDxmaGlyLkZoaXJPaWRBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3VybCddICE9PSB1bmRlZmluZWQpIHsgdGhpcy51cmwgPSBuZXcgZmhpci5GaGlyVXJpKHt2YWx1ZTogc291cmNlLnVybH0sIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy51cmwgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfdXJsJ10pIHtcclxuICAgICAgaWYgKHRoaXMudXJsKSB7IHRoaXMudXJsLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3VybCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnVybCA9IG5ldyBmaGlyLkZoaXJVcmkoc291cmNlLl91cmwgYXMgUGFydGlhbDxmaGlyLkZoaXJVcmlBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2ZyYW1lcyddKSB7IHRoaXMuZnJhbWVzID0gc291cmNlLmZyYW1lcy5tYXAoKHgpID0+IG5ldyBmaGlyLkltYWdpbmdPYmplY3RTZWxlY3Rpb25TdHVkeVNlcmllc0luc3RhbmNlRnJhbWVzKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZnJhbWVzID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdJbWFnaW5nT2JqZWN0U2VsZWN0aW9uLnN0dWR5LnNlcmllcy5pbnN0YW5jZScgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ3NvcENsYXNzJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCd1aWQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ3VybCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnZnJhbWVzJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBJbWFnaW5nT2JqZWN0U2VsZWN0aW9uU3R1ZHlTZXJpZXMgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgSW1hZ2luZ09iamVjdFNlbGVjdGlvblN0dWR5U2VyaWVzQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogU2VyaWVzIGluc3RhbmNlIFVJRCBpcyByZXF1aXJlZCB0byBmdWxseSBpZGVudGlmeSB0aGUgRElDT00gU09QIGluc3RhbmNlcyBpbiB0aGUgc2VsZWN0aW9uLlxyXG4gICAqL1xyXG4gIHVpZD86IGZoaXIuRmhpck9pZHxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBJbWFnaW5nT2JqZWN0U2VsZWN0aW9uLnN0dWR5LnNlcmllcy51aWRcclxuICAgKi9cclxuICBfdWlkPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBXQURPLVJTIFVSTCBlbmFibGVzIHJldHJpZXZhbCBvZiB0aGUgZW50aXJlIHNlcmllcyB1c2luZyBESUNPTSBXQURPLVJTIEFQSS5cclxuICAgKi9cclxuICB1cmw/OiBmaGlyLkZoaXJVcml8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogSW1hZ2luZ09iamVjdFNlbGVjdGlvbi5zdHVkeS5zZXJpZXMudXJsXHJcbiAgICovXHJcbiAgX3VybD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogRElDT00gU09QIGluc3RhbmNlcyBhcmUgaWRlbnRpZmllZCB0aHJvdWdoIHRoZSBVSURzIG9mIHRoZSBzdHVkeSAtIHNlcmllcyAtIGluc3RhbmNlIGhpZXJhcmNoeS4gVGhpcyBpcyB0aGUgaW5zdGFuY2UgbGV2ZWwgaWRlbnRpdHkgb2YgdGhlIGluc3RhbmNlIGluIHRoZSBzZWxlY3Rpb24uXHJcbiAgICovXHJcbiAgaW5zdGFuY2U6IGZoaXIuSW1hZ2luZ09iamVjdFNlbGVjdGlvblN0dWR5U2VyaWVzSW5zdGFuY2VBcmdzW118bnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIERJQ09NIFNPUCBpbnN0YW5jZXMgYXJlIGlkZW50aWZpZWQgdGhyb3VnaCB0aGUgVUlEcyBvZiB0aGUgc3R1ZHkgLSBzZXJpZXMgLSBpbnN0YW5jZSBoaWVyYXJjaHkuIEluIGFkZGl0aW9uLCB0aGUgbG9jYXRvciBhdCB0aGUgc2VyaWVzIGxldmVsIHByb3ZpZGUgYSBtZWFucyBvZiByZXRyaWV2aW5nIHRoZSBlbnRpcmUgc2VyaWVzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEltYWdpbmdPYmplY3RTZWxlY3Rpb25TdHVkeVNlcmllcyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0ltYWdpbmdPYmplY3RTZWxlY3Rpb25TdHVkeVNlcmllcyc7XHJcbiAgLyoqXHJcbiAgICogU2VyaWVzIGluc3RhbmNlIFVJRCBpcyByZXF1aXJlZCB0byBmdWxseSBpZGVudGlmeSB0aGUgRElDT00gU09QIGluc3RhbmNlcyBpbiB0aGUgc2VsZWN0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB1aWQ/OiBmaGlyLkZoaXJPaWR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFdBRE8tUlMgVVJMIGVuYWJsZXMgcmV0cmlldmFsIG9mIHRoZSBlbnRpcmUgc2VyaWVzIHVzaW5nIERJQ09NIFdBRE8tUlMgQVBJLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB1cmw/OiBmaGlyLkZoaXJVcml8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERJQ09NIFNPUCBpbnN0YW5jZXMgYXJlIGlkZW50aWZpZWQgdGhyb3VnaCB0aGUgVUlEcyBvZiB0aGUgc3R1ZHkgLSBzZXJpZXMgLSBpbnN0YW5jZSBoaWVyYXJjaHkuIFRoaXMgaXMgdGhlIGluc3RhbmNlIGxldmVsIGlkZW50aXR5IG9mIHRoZSBpbnN0YW5jZSBpbiB0aGUgc2VsZWN0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpbnN0YW5jZTogZmhpci5JbWFnaW5nT2JqZWN0U2VsZWN0aW9uU3R1ZHlTZXJpZXNJbnN0YW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEltYWdpbmdPYmplY3RTZWxlY3Rpb25TdHVkeVNlcmllcyAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEltYWdpbmdPYmplY3RTZWxlY3Rpb25TdHVkeVNlcmllc0FyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWyd1aWQnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMudWlkID0gbmV3IGZoaXIuRmhpck9pZCh7dmFsdWU6IHNvdXJjZS51aWR9LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3VpZCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnVpZCkgeyB0aGlzLnVpZC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl91aWQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy51aWQgPSBuZXcgZmhpci5GaGlyT2lkKHNvdXJjZS5fdWlkIGFzIFBhcnRpYWw8Zmhpci5GaGlyT2lkQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd1cmwnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMudXJsID0gbmV3IGZoaXIuRmhpclVyaSh7dmFsdWU6IHNvdXJjZS51cmx9LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3VybCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnVybCkgeyB0aGlzLnVybC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl91cmwhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy51cmwgPSBuZXcgZmhpci5GaGlyVXJpKHNvdXJjZS5fdXJsIGFzIFBhcnRpYWw8Zmhpci5GaGlyVXJpQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydpbnN0YW5jZSddKSB7IHRoaXMuaW5zdGFuY2UgPSBzb3VyY2UuaW5zdGFuY2UubWFwKCh4KSA9PiBuZXcgZmhpci5JbWFnaW5nT2JqZWN0U2VsZWN0aW9uU3R1ZHlTZXJpZXNJbnN0YW5jZSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmluc3RhbmNlID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdJbWFnaW5nT2JqZWN0U2VsZWN0aW9uLnN0dWR5LnNlcmllcycgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3VpZCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygndXJsJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJBKCdpbnN0YW5jZScsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgSW1hZ2luZ09iamVjdFNlbGVjdGlvblN0dWR5IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEltYWdpbmdPYmplY3RTZWxlY3Rpb25TdHVkeUFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFN0dWR5IGluc3RhbmNlIFVJRCBpcyByZXF1aXJlZCB0byBmdWxseSBpZGVudGlmeSB0aGUgRElDT00gU09QIGluc3RhbmNlcyBpbiB0aGUgc2VsZWN0aW9uLlxyXG4gICAqL1xyXG4gIHVpZDogZmhpci5GaGlyT2lkfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEltYWdpbmdPYmplY3RTZWxlY3Rpb24uc3R1ZHkudWlkXHJcbiAgICovXHJcbiAgX3VpZD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogV0FETy1SUyBVUkwgZW5hYmxlcyByZXRyaWV2YWwgb2YgdGhlIGVudGlyZSBzdHVkeSB1c2luZyBESUNPTSBXQURPLVJTIEFQSS5cclxuICAgKi9cclxuICB1cmw/OiBmaGlyLkZoaXJVcml8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogSW1hZ2luZ09iamVjdFNlbGVjdGlvbi5zdHVkeS51cmxcclxuICAgKi9cclxuICBfdXJsPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBVc2VkIHRvIHJldHJpZXZlIHRoZSBJbWFnaW5nU3R1ZHkgdGhhdCBjb250YWluIHRoZSBpbWFnZXMgcmVmZXJlbmNlZCBpbiB0aGUgSW1hZ2luZyBPYmplY3RTZWxlY3Rpb24uc3R1ZHkuXHJcbiAgICovXHJcbiAgaW1hZ2luZ1N0dWR5PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBESUNPTSBTT1AgaW5zdGFuY2VzIGFyZSBpZGVudGlmaWVkIHRocm91Z2ggdGhlIFVJRHMgb2YgdGhlIHN0dWR5IC0gc2VyaWVzIC0gaW5zdGFuY2UgaGllcmFyY2h5LiBJbiBhZGRpdGlvbiwgdGhlIGxvY2F0b3IgYXQgdGhlIHNlcmllcyBsZXZlbCBwcm92aWRlIGEgbWVhbnMgb2YgcmV0cmlldmluZyB0aGUgZW50aXJlIHNlcmllcy5cclxuICAgKi9cclxuICBzZXJpZXM6IGZoaXIuSW1hZ2luZ09iamVjdFNlbGVjdGlvblN0dWR5U2VyaWVzQXJnc1tdfG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBESUNPTSBTT1AgaW5zdGFuY2VzIGFyZSBpZGVudGlmaWVkIHRocm91Z2ggdGhlIFVJRHMgb2YgdGhlIHN0dWR5IC0gc2VyaWVzIC0gaW5zdGFuY2UgaGllcmFyY2h5LiBJbiBhZGRpdGlvbiwgdGhlIGxvY2F0b3IgYXQgdGhlIHN0dWR5IGxldmVsIHByb3ZpZGUgYSBtZWFucyBvZiByZXRyaWV2aW5nIHRoZSBlbnRpcmUgc3R1ZHkuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgSW1hZ2luZ09iamVjdFNlbGVjdGlvblN0dWR5IGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnSW1hZ2luZ09iamVjdFNlbGVjdGlvblN0dWR5JztcclxuICAvKipcclxuICAgKiBTdHVkeSBpbnN0YW5jZSBVSUQgaXMgcmVxdWlyZWQgdG8gZnVsbHkgaWRlbnRpZnkgdGhlIERJQ09NIFNPUCBpbnN0YW5jZXMgaW4gdGhlIHNlbGVjdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgdWlkOiBmaGlyLkZoaXJPaWR8bnVsbDtcclxuICAvKipcclxuICAgKiBXQURPLVJTIFVSTCBlbmFibGVzIHJldHJpZXZhbCBvZiB0aGUgZW50aXJlIHN0dWR5IHVzaW5nIERJQ09NIFdBRE8tUlMgQVBJLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB1cmw/OiBmaGlyLkZoaXJVcml8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFVzZWQgdG8gcmV0cmlldmUgdGhlIEltYWdpbmdTdHVkeSB0aGF0IGNvbnRhaW4gdGhlIGltYWdlcyByZWZlcmVuY2VkIGluIHRoZSBJbWFnaW5nIE9iamVjdFNlbGVjdGlvbi5zdHVkeS5cclxuICAgKi9cclxuICBwdWJsaWMgaW1hZ2luZ1N0dWR5PzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERJQ09NIFNPUCBpbnN0YW5jZXMgYXJlIGlkZW50aWZpZWQgdGhyb3VnaCB0aGUgVUlEcyBvZiB0aGUgc3R1ZHkgLSBzZXJpZXMgLSBpbnN0YW5jZSBoaWVyYXJjaHkuIEluIGFkZGl0aW9uLCB0aGUgbG9jYXRvciBhdCB0aGUgc2VyaWVzIGxldmVsIHByb3ZpZGUgYSBtZWFucyBvZiByZXRyaWV2aW5nIHRoZSBlbnRpcmUgc2VyaWVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXJpZXM6IGZoaXIuSW1hZ2luZ09iamVjdFNlbGVjdGlvblN0dWR5U2VyaWVzW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgSW1hZ2luZ09iamVjdFNlbGVjdGlvblN0dWR5IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8SW1hZ2luZ09iamVjdFNlbGVjdGlvblN0dWR5QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3VpZCddICE9PSB1bmRlZmluZWQpIHsgdGhpcy51aWQgPSBuZXcgZmhpci5GaGlyT2lkKHt2YWx1ZTogc291cmNlLnVpZH0sIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy51aWQgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfdWlkJ10pIHtcclxuICAgICAgaWYgKHRoaXMudWlkKSB7IHRoaXMudWlkLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3VpZCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnVpZCA9IG5ldyBmaGlyLkZoaXJPaWQoc291cmNlLl91aWQgYXMgUGFydGlhbDxmaGlyLkZoaXJPaWRBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3VybCddICE9PSB1bmRlZmluZWQpIHsgdGhpcy51cmwgPSBuZXcgZmhpci5GaGlyVXJpKHt2YWx1ZTogc291cmNlLnVybH0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfdXJsJ10pIHtcclxuICAgICAgaWYgKHRoaXMudXJsKSB7IHRoaXMudXJsLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3VybCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnVybCA9IG5ldyBmaGlyLkZoaXJVcmkoc291cmNlLl91cmwgYXMgUGFydGlhbDxmaGlyLkZoaXJVcmlBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2ltYWdpbmdTdHVkeSddKSB7IHRoaXMuaW1hZ2luZ1N0dWR5ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5pbWFnaW5nU3R1ZHksIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydzZXJpZXMnXSkgeyB0aGlzLnNlcmllcyA9IHNvdXJjZS5zZXJpZXMubWFwKCh4KSA9PiBuZXcgZmhpci5JbWFnaW5nT2JqZWN0U2VsZWN0aW9uU3R1ZHlTZXJpZXMoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zZXJpZXMgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0ltYWdpbmdPYmplY3RTZWxlY3Rpb24uc3R1ZHknIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCd1aWQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3VybCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnaW1hZ2luZ1N0dWR5JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJBKCdzZXJpZXMnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEltYWdpbmdPYmplY3RTZWxlY3Rpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgSW1hZ2luZ09iamVjdFNlbGVjdGlvbkFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIkltYWdpbmdPYmplY3RTZWxlY3Rpb25cInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRElDT00gU09QIEluc3RhbmNlIGlzIGFsd2F5cyBhc3NpZ25lZCB3aXRoIGEgdW5pcXVlIGlkZW50aWZpZXIgKFVJRCkuXHJcbiAgICovXHJcbiAgdWlkOiBmaGlyLkZoaXJPaWR8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogSW1hZ2luZ09iamVjdFNlbGVjdGlvbi51aWRcclxuICAgKi9cclxuICBfdWlkPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBTT1AgSW5zdGFuY2VzIGluIEltYWdpbmdPYmplY3RTZWxlY3Rpb24gbXVzdCBiZSBmcm9tIHRoZSBzYW1lIHBhdGllbnQuXHJcbiAgICovXHJcbiAgcGF0aWVudDogZmhpci5SZWZlcmVuY2VBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogTmVlZCB0byByZXByZXNlbnQgdGhlIGFwcGxpY2F0aW9uIHB1cnBvc2UgdGhhdCB0aGUgU09QIGluc3RhbmNlcyBpbiBJbWFnaW5nT2JqZWN0U2VsZWN0aW9uIGFyZSBzZWxlY3RlZCBmb3IuXHJcbiAgICovXHJcbiAgdGl0bGU6IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIE5lZWQgdG8gcHJvdmlkZSBhIG5hcnJhdGl2ZSBkZXNjcmlwdGlvbiBvZiB0aGUgU09QIGluc3RhbmNlcyBpbiB0aGUgc2VsZWN0aW9uLlxyXG4gICAqL1xyXG4gIGRlc2NyaXB0aW9uPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEltYWdpbmdPYmplY3RTZWxlY3Rpb24uZGVzY3JpcHRpb25cclxuICAgKi9cclxuICBfZGVzY3JpcHRpb24/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRyYWNrIHRoZSBzZWxlY3Rpb24gZGVjaXNpb24gbWFrZXIuXHJcbiAgICovXHJcbiAgYXV0aG9yPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEYXRlIGFuZCB0aW1lIHdoZW4gdGhlIHNlbGVjdGlvbiB3YXMgbWFkZSBjYW4gYmUgaW1wb3J0YW50IHRvIHVuZGVyc3RhbmQgdGhlIGNvbnRlbnQgb2Ygc2VsZWN0aW9uLlxyXG4gICAqL1xyXG4gIGF1dGhvcmluZ1RpbWU/OiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBJbWFnaW5nT2JqZWN0U2VsZWN0aW9uLmF1dGhvcmluZ1RpbWVcclxuICAgKi9cclxuICBfYXV0aG9yaW5nVGltZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogRElDT00gU09QIGluc3RhbmNlcyBhcmUgaWRlbnRpZmllZCB0aHJvdWdoIHRoZSBVSURzIG9mIHRoZSBzdHVkeSAtIHNlcmllcyAtIGluc3RhbmNlIGhpZXJhcmNoeS4gSW4gYWRkaXRpb24sIHRoZSBsb2NhdG9yIGF0IHRoZSBzdHVkeSBsZXZlbCBwcm92aWRlIGEgbWVhbnMgb2YgcmV0cmlldmluZyB0aGUgZW50aXJlIHN0dWR5LlxyXG4gICAqL1xyXG4gIHN0dWR5OiBmaGlyLkltYWdpbmdPYmplY3RTZWxlY3Rpb25TdHVkeUFyZ3NbXXxudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogQSBtYW5pZmVzdCBvZiBhIHNldCBvZiBESUNPTSBTZXJ2aWNlLU9iamVjdCBQYWlyIEluc3RhbmNlcyAoU09QIEluc3RhbmNlcykuICBUaGUgcmVmZXJlbmNlZCBTT1AgSW5zdGFuY2VzIChpbWFnZXMgb3Igb3RoZXIgY29udGVudCkgYXJlIGZvciBhIHNpbmdsZSBwYXRpZW50LCBhbmQgbWF5IGJlIGZyb20gb25lIG9yIG1vcmUgc3R1ZGllcy4gVGhlIHJlZmVyZW5jZWQgU09QIEluc3RhbmNlcyBoYXZlIGJlZW4gc2VsZWN0ZWQgZm9yIGEgcHVycG9zZSwgc3VjaCBhcyBxdWFsaXR5IGFzc3VyYW5jZSwgY29uZmVyZW5jZSwgb3IgY29uc3VsdC4gUmVmbGVjdGluZyB0aGF0IHJhbmdlIG9mIHB1cnBvc2VzLCB0eXBpY2FsIEltYWdpbmdPYmplY3RTZWxlY3Rpb24gcmVzb3VyY2VzIG1heSBpbmNsdWRlIGFsbCBTT1AgSW5zdGFuY2VzIGluIGEgc3R1ZHkgKHBlcmhhcHMgZm9yIHNoYXJpbmcgdGhyb3VnaCBhIEhlYWx0aCBJbmZvcm1hdGlvbiBFeGNoYW5nZSk7IGtleSBpbWFnZXMgZnJvbSBtdWx0aXBsZSBzdHVkaWVzIChmb3IgcmVmZXJlbmNlIGJ5IGEgcmVmZXJyaW5nIG9yIHRyZWF0aW5nIHBoeXNpY2lhbik7IGEgbXVsdGktZnJhbWUgdWx0cmFzb3VuZCBpbnN0YW5jZSAoXCJjaW5lXCIgdmlkZW8gY2xpcCkgYW5kIGEgc2V0IG9mIG1lYXN1cmVtZW50cyB0YWtlbiBmcm9tIHRoYXQgaW5zdGFuY2UgKGZvciBpbmNsdXNpb24gaW4gYSB0ZWFjaGluZyBmaWxlKTsgYW5kIHNvIG9uLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEltYWdpbmdPYmplY3RTZWxlY3Rpb24gZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0ltYWdpbmdPYmplY3RTZWxlY3Rpb24nO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNvdXJjZVR5cGU6IFwiSW1hZ2luZ09iamVjdFNlbGVjdGlvblwiO1xyXG4gIC8qKlxyXG4gICAqIERJQ09NIFNPUCBJbnN0YW5jZSBpcyBhbHdheXMgYXNzaWduZWQgd2l0aCBhIHVuaXF1ZSBpZGVudGlmaWVyIChVSUQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB1aWQ6IGZoaXIuRmhpck9pZHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFNPUCBJbnN0YW5jZXMgaW4gSW1hZ2luZ09iamVjdFNlbGVjdGlvbiBtdXN0IGJlIGZyb20gdGhlIHNhbWUgcGF0aWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgcGF0aWVudDogZmhpci5SZWZlcmVuY2V8bnVsbDtcclxuICAvKipcclxuICAgKiBOZWVkIHRvIHJlcHJlc2VudCB0aGUgYXBwbGljYXRpb24gcHVycG9zZSB0aGF0IHRoZSBTT1AgaW5zdGFuY2VzIGluIEltYWdpbmdPYmplY3RTZWxlY3Rpb24gYXJlIHNlbGVjdGVkIGZvci5cclxuICAgKi9cclxuICBwdWJsaWMgdGl0bGU6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogTmVlZCB0byBwcm92aWRlIGEgbmFycmF0aXZlIGRlc2NyaXB0aW9uIG9mIHRoZSBTT1AgaW5zdGFuY2VzIGluIHRoZSBzZWxlY3Rpb24uXHJcbiAgICovXHJcbiAgcHVibGljIGRlc2NyaXB0aW9uPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUcmFjayB0aGUgc2VsZWN0aW9uIGRlY2lzaW9uIG1ha2VyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhdXRob3I/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGF0ZSBhbmQgdGltZSB3aGVuIHRoZSBzZWxlY3Rpb24gd2FzIG1hZGUgY2FuIGJlIGltcG9ydGFudCB0byB1bmRlcnN0YW5kIHRoZSBjb250ZW50IG9mIHNlbGVjdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgYXV0aG9yaW5nVGltZT86IGZoaXIuRmhpckRhdGVUaW1lfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBESUNPTSBTT1AgaW5zdGFuY2VzIGFyZSBpZGVudGlmaWVkIHRocm91Z2ggdGhlIFVJRHMgb2YgdGhlIHN0dWR5IC0gc2VyaWVzIC0gaW5zdGFuY2UgaGllcmFyY2h5LiBJbiBhZGRpdGlvbiwgdGhlIGxvY2F0b3IgYXQgdGhlIHN0dWR5IGxldmVsIHByb3ZpZGUgYSBtZWFucyBvZiByZXRyaWV2aW5nIHRoZSBlbnRpcmUgc3R1ZHkuXHJcbiAgICovXHJcbiAgcHVibGljIHN0dWR5OiBmaGlyLkltYWdpbmdPYmplY3RTZWxlY3Rpb25TdHVkeVtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEltYWdpbmdPYmplY3RTZWxlY3Rpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxJbWFnaW5nT2JqZWN0U2VsZWN0aW9uQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ0ltYWdpbmdPYmplY3RTZWxlY3Rpb24nO1xyXG4gICAgaWYgKHNvdXJjZVsndWlkJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnVpZCA9IG5ldyBmaGlyLkZoaXJPaWQoe3ZhbHVlOiBzb3VyY2UudWlkfSwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnVpZCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ191aWQnXSkge1xyXG4gICAgICBpZiAodGhpcy51aWQpIHsgdGhpcy51aWQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdWlkISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudWlkID0gbmV3IGZoaXIuRmhpck9pZChzb3VyY2UuX3VpZCBhcyBQYXJ0aWFsPGZoaXIuRmhpck9pZEFyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsncGF0aWVudCddKSB7IHRoaXMucGF0aWVudCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UucGF0aWVudCwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnBhdGllbnQgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWyd0aXRsZSddKSB7IHRoaXMudGl0bGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnRpdGxlLCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudGl0bGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydkZXNjcmlwdGlvbiddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5kZXNjcmlwdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuZGVzY3JpcHRpb259LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2Rlc2NyaXB0aW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZGVzY3JpcHRpb24pIHsgdGhpcy5kZXNjcmlwdGlvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9kZXNjcmlwdGlvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRlc2NyaXB0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2Rlc2NyaXB0aW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydhdXRob3InXSkgeyB0aGlzLmF1dGhvciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuYXV0aG9yLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYXV0aG9yaW5nVGltZSddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5hdXRob3JpbmdUaW1lID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLmF1dGhvcmluZ1RpbWV9LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2F1dGhvcmluZ1RpbWUnXSkge1xyXG4gICAgICBpZiAodGhpcy5hdXRob3JpbmdUaW1lKSB7IHRoaXMuYXV0aG9yaW5nVGltZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9hdXRob3JpbmdUaW1lISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuYXV0aG9yaW5nVGltZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZShzb3VyY2UuX2F1dGhvcmluZ1RpbWUgYXMgUGFydGlhbDxmaGlyLkZoaXJEYXRlVGltZUFyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3R1ZHknXSkgeyB0aGlzLnN0dWR5ID0gc291cmNlLnN0dWR5Lm1hcCgoeCkgPT4gbmV3IGZoaXIuSW1hZ2luZ09iamVjdFNlbGVjdGlvblN0dWR5KHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3R1ZHkgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0ltYWdpbmdPYmplY3RTZWxlY3Rpb24nIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCd1aWQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ3BhdGllbnQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ3RpdGxlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdkZXNjcmlwdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnYXV0aG9yJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdhdXRob3JpbmdUaW1lJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJBKCdzdHVkeScsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4iXX0=