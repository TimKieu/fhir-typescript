// <auto-generated/>
// Contents of: hl7.fhir.r2.core version: 1.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: DeviceComponent
import * as fhir from '../fhir.js';
// @ts-ignore
import { MeasurementPrincipleVsValidation } from '../fhirValueSets/MeasurementPrincipleVsValidation.js';
/**
 * Describes the production specification such as component revision, serial number, etc.
 */
export class DeviceComponentProductionSpecification extends fhir.BackboneElement {
    /**
     * Default constructor for DeviceComponentProductionSpecification - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['specType']) {
            this.specType = new fhir.CodeableConcept(source.specType);
        }
        if (source['componentId']) {
            this.componentId = new fhir.Identifier(source.componentId);
        }
        if (source['productionSpec']) {
            this.productionSpec = new fhir.FhirString({ value: source.productionSpec });
        }
        if (source['_productionSpec']) {
            if (this.productionSpec) {
                this.productionSpec.addExtendedProperties(source._productionSpec);
            }
            else {
                this.productionSpec = new fhir.FhirString(source._productionSpec);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'DeviceComponent.productionSpecification';
        }
        iss.push(...this.vOS('specType', exp));
        iss.push(...this.vOS('componentId', exp));
        iss.push(...this.vOS('productionSpec', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DeviceComponentProductionSpecification._fts_dataType = 'DeviceComponentProductionSpecification';
/**
 * Describes the characteristics, operational status and capabilities of a medical-related component of a medical device.
 */
export class DeviceComponent extends fhir.DomainResource {
    /**
     * Default constructor for DeviceComponent - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'DeviceComponent';
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type);
        }
        else {
            this.type = null;
        }
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier);
        }
        else {
            this.identifier = null;
        }
        if (source['lastSystemChange']) {
            this.lastSystemChange = new fhir.FhirInstant({ value: source.lastSystemChange });
        }
        else {
            this.lastSystemChange = null;
        }
        if (source['_lastSystemChange']) {
            if (this.lastSystemChange) {
                this.lastSystemChange.addExtendedProperties(source._lastSystemChange);
            }
            else {
                this.lastSystemChange = new fhir.FhirInstant(source._lastSystemChange);
            }
        }
        if (source['source']) {
            this.source = new fhir.Reference(source.source);
        }
        if (source['parent']) {
            this.parent = new fhir.Reference(source.parent);
        }
        if (source['operationalStatus']) {
            this.operationalStatus = source.operationalStatus.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.operationalStatus = [];
        }
        if (source['parameterGroup']) {
            this.parameterGroup = new fhir.CodeableConcept(source.parameterGroup);
        }
        if (source['measurementPrinciple']) {
            this.measurementPrinciple = new fhir.FhirCode({ value: source.measurementPrinciple });
        }
        if (source['_measurementPrinciple']) {
            if (this.measurementPrinciple) {
                this.measurementPrinciple.addExtendedProperties(source._measurementPrinciple);
            }
            else {
                this.measurementPrinciple = new fhir.FhirCode(source._measurementPrinciple);
            }
        }
        if (source['productionSpecification']) {
            this.productionSpecification = source.productionSpecification.map((x) => new fhir.DeviceComponentProductionSpecification(x));
        }
        else {
            this.productionSpecification = [];
        }
        if (source['languageCode']) {
            this.languageCode = new fhir.CodeableConcept(source.languageCode);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'DeviceComponent';
        }
        iss.push(...this.vRPS('resourceType', exp));
        iss.push(...this.vRS('type', exp));
        iss.push(...this.vRS('identifier', exp));
        iss.push(...this.vRS('lastSystemChange', exp));
        iss.push(...this.vOS('source', exp));
        iss.push(...this.vOS('parent', exp));
        iss.push(...this.vOA('operationalStatus', exp));
        iss.push(...this.vOS('parameterGroup', exp));
        iss.push(...this.vOSV('measurementPrinciple', exp, 'MeasurementPrinciple', MeasurementPrincipleVsValidation, 'r'));
        iss.push(...this.vOA('productionSpecification', exp));
        iss.push(...this.vOS('languageCode', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DeviceComponent._fts_dataType = 'DeviceComponent';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGV2aWNlQ29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9EZXZpY2VDb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsaUNBQWlDO0FBRWpDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBSW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsZ0NBQWdDLEVBQUUsTUFBTSxzREFBc0QsQ0FBQztBQXVCeEc7O0dBRUc7QUFDSCxNQUFNLE9BQU8sc0NBQXVDLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFpQjlFOztPQUVHO0lBQ0gsWUFBWSxTQUE2RCxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUNuSCxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQUU7UUFDdEYsSUFBSSxNQUFNLENBQUMsYUFBYSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUM7U0FBRTtRQUMxRixJQUFJLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLGNBQWMsRUFBQyxDQUFDLENBQUM7U0FBRTtRQUM1RyxJQUFJLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFO1lBQzdCLElBQUksSUFBSSxDQUFDLGNBQWMsRUFBRTtnQkFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxl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R0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDNUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsc0JBQXNCLEVBQUMsR0FBRyxFQUFDLHNCQUFzQixFQUFDLGdDQUFnQyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDL0csR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMseUJBQXlCLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNyRCxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUMxQyxPQUFPLEdBQUcsQ0FBQztJQUNiLENBQUM7O0FBaEdEOztHQUVHO0FBQzZCLDZCQUFhLEdBQVUsaUJBQWlCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjIuY29yZSB2ZXJzaW9uOiAxLjAuMlxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IERldmljZUNvbXBvbmVudFxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTWVhc3VyZW1lbnRQcmluY2lwbGVDb2RlcywgIE1lYXN1cmVtZW50UHJpbmNpcGxlQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL01lYXN1cmVtZW50UHJpbmNpcGxlQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE1lYXN1cmVtZW50UHJpbmNpcGxlVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9NZWFzdXJlbWVudFByaW5jaXBsZVZzVmFsaWRhdGlvbi5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBEZXZpY2VDb21wb25lbnRQcm9kdWN0aW9uU3BlY2lmaWNhdGlvbiB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBEZXZpY2VDb21wb25lbnRQcm9kdWN0aW9uU3BlY2lmaWNhdGlvbkFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB0aGUgc3BlY2lmaWNhdGlvbiB0eXBlLCBzdWNoIGFzLCBzZXJpYWwgbnVtYmVyLCBwYXJ0IG51bWJlciwgaGFyZHdhcmUgcmV2aXNpb24sIHNvZnR3YXJlIHJldmlzaW9uLCBldGMuXHJcbiAgICovXHJcbiAgc3BlY1R5cGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB0aGUgaW50ZXJuYWwgY29tcG9uZW50IHVuaXF1ZSBpZGVudGlmaWNhdGlvbi4gVGhpcyBpcyBhIHByb3Zpc2lvbiBmb3IgbWFudWZhY3R1cmUgc3BlY2lmaWMgc3RhbmRhcmQgY29tcG9uZW50cyB1c2luZyBhIHByaXZhdGUgT0lELiAxMTA3My0xMDEwMSBoYXMgYSBwYXJ0aXRpb24gZm9yIHByaXZhdGUgT0lEIHNlbWFudGljIHRoYXQgdGhlIG1hbnVmYWN0dXJlIGNhbiBtYWtlIHVzZSBvZi5cclxuICAgKi9cclxuICBjb21wb25lbnRJZD86IGZoaXIuSWRlbnRpZmllckFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB0aGUgcHJpbnRhYmxlIHN0cmluZyBkZWZpbmluZyB0aGUgY29tcG9uZW50LlxyXG4gICAqL1xyXG4gIHByb2R1Y3Rpb25TcGVjPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IERldmljZUNvbXBvbmVudC5wcm9kdWN0aW9uU3BlY2lmaWNhdGlvbi5wcm9kdWN0aW9uU3BlY1xyXG4gICAqL1xyXG4gIF9wcm9kdWN0aW9uU3BlYz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEZXNjcmliZXMgdGhlIHByb2R1Y3Rpb24gc3BlY2lmaWNhdGlvbiBzdWNoIGFzIGNvbXBvbmVudCByZXZpc2lvbiwgc2VyaWFsIG51bWJlciwgZXRjLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIERldmljZUNvbXBvbmVudFByb2R1Y3Rpb25TcGVjaWZpY2F0aW9uIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnRGV2aWNlQ29tcG9uZW50UHJvZHVjdGlvblNwZWNpZmljYXRpb24nO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB0aGUgc3BlY2lmaWNhdGlvbiB0eXBlLCBzdWNoIGFzLCBzZXJpYWwgbnVtYmVyLCBwYXJ0IG51bWJlciwgaGFyZHdhcmUgcmV2aXNpb24sIHNvZnR3YXJlIHJldmlzaW9uLCBldGMuXHJcbiAgICovXHJcbiAgcHVibGljIHNwZWNUeXBlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB0aGUgaW50ZXJuYWwgY29tcG9uZW50IHVuaXF1ZSBpZGVudGlmaWNhdGlvbi4gVGhpcyBpcyBhIHByb3Zpc2lvbiBmb3IgbWFudWZhY3R1cmUgc3BlY2lmaWMgc3RhbmRhcmQgY29tcG9uZW50cyB1c2luZyBhIHByaXZhdGUgT0lELiAxMTA3My0xMDEwMSBoYXMgYSBwYXJ0aXRpb24gZm9yIHByaXZhdGUgT0lEIHNlbWFudGljIHRoYXQgdGhlIG1hbnVmYWN0dXJlIGNhbiBtYWtlIHVzZSBvZi5cclxuICAgKi9cclxuICBwdWJsaWMgY29tcG9uZW50SWQ/OiBmaGlyLklkZW50aWZpZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB0aGUgcHJpbnRhYmxlIHN0cmluZyBkZWZpbmluZyB0aGUgY29tcG9uZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcm9kdWN0aW9uU3BlYz86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgRGV2aWNlQ29tcG9uZW50UHJvZHVjdGlvblNwZWNpZmljYXRpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxEZXZpY2VDb21wb25lbnRQcm9kdWN0aW9uU3BlY2lmaWNhdGlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydzcGVjVHlwZSddKSB7IHRoaXMuc3BlY1R5cGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnNwZWNUeXBlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29tcG9uZW50SWQnXSkgeyB0aGlzLmNvbXBvbmVudElkID0gbmV3IGZoaXIuSWRlbnRpZmllcihzb3VyY2UuY29tcG9uZW50SWQpOyB9XHJcbiAgICBpZiAoc291cmNlWydwcm9kdWN0aW9uU3BlYyddKSB7IHRoaXMucHJvZHVjdGlvblNwZWMgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnByb2R1Y3Rpb25TcGVjfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19wcm9kdWN0aW9uU3BlYyddKSB7XHJcbiAgICAgIGlmICh0aGlzLnByb2R1Y3Rpb25TcGVjKSB7IHRoaXMucHJvZHVjdGlvblNwZWMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fcHJvZHVjdGlvblNwZWMhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5wcm9kdWN0aW9uU3BlYyA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9wcm9kdWN0aW9uU3BlYyBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0RldmljZUNvbXBvbmVudC5wcm9kdWN0aW9uU3BlY2lmaWNhdGlvbicgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3NwZWNUeXBlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdjb21wb25lbnRJZCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygncHJvZHVjdGlvblNwZWMnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIERldmljZUNvbXBvbmVudCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBEZXZpY2VDb21wb25lbnRBcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJEZXZpY2VDb21wb25lbnRcInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHRoZSBzcGVjaWZpYyBjb21wb25lbnQgdHlwZSBhcyBkZWZpbmVkIGluIHRoZSBvYmplY3Qtb3JpZW50ZWQgb3IgbWV0cmljIG5vbWVuY2xhdHVyZSBwYXJ0aXRpb24uXHJcbiAgICovXHJcbiAgdHlwZTogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHRoZSBsb2NhbCBhc3NpZ25lZCB1bmlxdWUgaWRlbnRpZmljYXRpb24gYnkgdGhlIHNvZnR3YXJlLiBGb3IgZXhhbXBsZTogaGFuZGxlIElELlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI6IGZoaXIuSWRlbnRpZmllckFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgdGhlIHRpbWVzdGFtcCBmb3IgdGhlIG1vc3QgcmVjZW50IHN5c3RlbSBjaGFuZ2Ugd2hpY2ggaW5jbHVkZXMgZGV2aWNlIGNvbmZpZ3VyYXRpb24gb3Igc2V0dGluZyBjaGFuZ2UuXHJcbiAgICovXHJcbiAgbGFzdFN5c3RlbUNoYW5nZTogZmhpci5GaGlySW5zdGFudHxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBEZXZpY2VDb21wb25lbnQubGFzdFN5c3RlbUNoYW5nZVxyXG4gICAqL1xyXG4gIF9sYXN0U3lzdGVtQ2hhbmdlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgdGhlIGxpbmsgdG8gdGhlIHNvdXJjZSBEZXZpY2UgdGhhdCBjb250YWlucyBhZG1pbmlzdHJhdGl2ZSBkZXZpY2UgaW5mb3JtYXRpb24gc3VjaCBhcyBtYW51ZmFjdHVyZSwgc2VyaWFsIG51bWJlciwgZXRjLlxyXG4gICAqL1xyXG4gIHNvdXJjZT86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHRoZSBsaW5rIHRvIHRoZSBwYXJlbnQgcmVzb3VyY2UuIEZvciBleGFtcGxlOiBDaGFubmVsIGlzIGxpbmtlZCB0byBpdHMgVk1EIHBhcmVudC5cclxuICAgKi9cclxuICBwYXJlbnQ/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyBjdXJyZW50IG9wZXJhdGlvbmFsIHN0YXR1cyBvZiB0aGUgZGV2aWNlLiBGb3IgZXhhbXBsZTogT24sIE9mZiwgU3RhbmRieSwgZXRjLlxyXG4gICAqL1xyXG4gIG9wZXJhdGlvbmFsU3RhdHVzPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB0aGUgcGFyYW1ldGVyIGdyb3VwIHN1cHBvcnRlZCBieSB0aGUgY3VycmVudCBkZXZpY2UgY29tcG9uZW50IHRoYXQgaXMgYmFzZWQgb24gc29tZSBub21lbmNsYXR1cmUsIGUuZy4gY2FyZGlvdmFzY3VsYXIuXHJcbiAgICovXHJcbiAgcGFyYW1ldGVyR3JvdXA/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB0aGUgcGh5c2ljYWwgcHJpbmNpcGxlIG9mIHRoZSBtZWFzdXJlbWVudC4gRm9yIGV4YW1wbGU6IHRoZXJtYWwsIGNoZW1pY2FsLCBhY291c3RpY2FsLCBldGMuXHJcbiAgICovXHJcbiAgbWVhc3VyZW1lbnRQcmluY2lwbGU/OiBmaGlyLkZoaXJDb2RlPE1lYXN1cmVtZW50UHJpbmNpcGxlQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IERldmljZUNvbXBvbmVudC5tZWFzdXJlbWVudFByaW5jaXBsZVxyXG4gICAqL1xyXG4gIF9tZWFzdXJlbWVudFByaW5jaXBsZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHRoZSBwcm9kdWN0aW9uIHNwZWNpZmljYXRpb24gc3VjaCBhcyBjb21wb25lbnQgcmV2aXNpb24sIHNlcmlhbCBudW1iZXIsIGV0Yy5cclxuICAgKi9cclxuICBwcm9kdWN0aW9uU3BlY2lmaWNhdGlvbj86IGZoaXIuRGV2aWNlQ29tcG9uZW50UHJvZHVjdGlvblNwZWNpZmljYXRpb25BcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB0aGUgbGFuZ3VhZ2UgY29kZSBmb3IgdGhlIGh1bWFuLXJlYWRhYmxlIHRleHQgc3RyaW5nIHByb2R1Y2VkIGJ5IHRoZSBkZXZpY2UuIFRoaXMgbGFuZ3VhZ2UgY29kZSB3aWxsIGZvbGxvdyB0aGUgSUVURiBsYW5ndWFnZSB0YWcuIEV4YW1wbGU6IGVuLVVTLlxyXG4gICAqL1xyXG4gIGxhbmd1YWdlQ29kZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEZXNjcmliZXMgdGhlIGNoYXJhY3RlcmlzdGljcywgb3BlcmF0aW9uYWwgc3RhdHVzIGFuZCBjYXBhYmlsaXRpZXMgb2YgYSBtZWRpY2FsLXJlbGF0ZWQgY29tcG9uZW50IG9mIGEgbWVkaWNhbCBkZXZpY2UuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRGV2aWNlQ29tcG9uZW50IGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdEZXZpY2VDb21wb25lbnQnO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNvdXJjZVR5cGU6IFwiRGV2aWNlQ29tcG9uZW50XCI7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHRoZSBzcGVjaWZpYyBjb21wb25lbnQgdHlwZSBhcyBkZWZpbmVkIGluIHRoZSBvYmplY3Qtb3JpZW50ZWQgb3IgbWV0cmljIG5vbWVuY2xhdHVyZSBwYXJ0aXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHR5cGU6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHRoZSBsb2NhbCBhc3NpZ25lZCB1bmlxdWUgaWRlbnRpZmljYXRpb24gYnkgdGhlIHNvZnR3YXJlLiBGb3IgZXhhbXBsZTogaGFuZGxlIElELlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyOiBmaGlyLklkZW50aWZpZXJ8bnVsbDtcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgdGhlIHRpbWVzdGFtcCBmb3IgdGhlIG1vc3QgcmVjZW50IHN5c3RlbSBjaGFuZ2Ugd2hpY2ggaW5jbHVkZXMgZGV2aWNlIGNvbmZpZ3VyYXRpb24gb3Igc2V0dGluZyBjaGFuZ2UuXHJcbiAgICovXHJcbiAgcHVibGljIGxhc3RTeXN0ZW1DaGFuZ2U6IGZoaXIuRmhpckluc3RhbnR8bnVsbDtcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgdGhlIGxpbmsgdG8gdGhlIHNvdXJjZSBEZXZpY2UgdGhhdCBjb250YWlucyBhZG1pbmlzdHJhdGl2ZSBkZXZpY2UgaW5mb3JtYXRpb24gc3VjaCBhcyBtYW51ZmFjdHVyZSwgc2VyaWFsIG51bWJlciwgZXRjLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzb3VyY2U/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHRoZSBsaW5rIHRvIHRoZSBwYXJlbnQgcmVzb3VyY2UuIEZvciBleGFtcGxlOiBDaGFubmVsIGlzIGxpbmtlZCB0byBpdHMgVk1EIHBhcmVudC5cclxuICAgKi9cclxuICBwdWJsaWMgcGFyZW50PzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyBjdXJyZW50IG9wZXJhdGlvbmFsIHN0YXR1cyBvZiB0aGUgZGV2aWNlLiBGb3IgZXhhbXBsZTogT24sIE9mZiwgU3RhbmRieSwgZXRjLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvcGVyYXRpb25hbFN0YXR1czogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgdGhlIHBhcmFtZXRlciBncm91cCBzdXBwb3J0ZWQgYnkgdGhlIGN1cnJlbnQgZGV2aWNlIGNvbXBvbmVudCB0aGF0IGlzIGJhc2VkIG9uIHNvbWUgbm9tZW5jbGF0dXJlLCBlLmcuIGNhcmRpb3Zhc2N1bGFyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXJhbWV0ZXJHcm91cD86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgdGhlIHBoeXNpY2FsIHByaW5jaXBsZSBvZiB0aGUgbWVhc3VyZW1lbnQuIEZvciBleGFtcGxlOiB0aGVybWFsLCBjaGVtaWNhbCwgYWNvdXN0aWNhbCwgZXRjLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtZWFzdXJlbWVudFByaW5jaXBsZT86IGZoaXIuRmhpckNvZGU8TWVhc3VyZW1lbnRQcmluY2lwbGVDb2RlVHlwZT58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB0aGUgcHJvZHVjdGlvbiBzcGVjaWZpY2F0aW9uIHN1Y2ggYXMgY29tcG9uZW50IHJldmlzaW9uLCBzZXJpYWwgbnVtYmVyLCBldGMuXHJcbiAgICovXHJcbiAgcHVibGljIHByb2R1Y3Rpb25TcGVjaWZpY2F0aW9uOiBmaGlyLkRldmljZUNvbXBvbmVudFByb2R1Y3Rpb25TcGVjaWZpY2F0aW9uW107XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHRoZSBsYW5ndWFnZSBjb2RlIGZvciB0aGUgaHVtYW4tcmVhZGFibGUgdGV4dCBzdHJpbmcgcHJvZHVjZWQgYnkgdGhlIGRldmljZS4gVGhpcyBsYW5ndWFnZSBjb2RlIHdpbGwgZm9sbG93IHRoZSBJRVRGIGxhbmd1YWdlIHRhZy4gRXhhbXBsZTogZW4tVVMuXHJcbiAgICovXHJcbiAgcHVibGljIGxhbmd1YWdlQ29kZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBEZXZpY2VDb21wb25lbnQgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxEZXZpY2VDb21wb25lbnRBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnRGV2aWNlQ29tcG9uZW50JztcclxuICAgIGlmIChzb3VyY2VbJ3R5cGUnXSkgeyB0aGlzLnR5cGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnR5cGUpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy50eXBlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IG5ldyBmaGlyLklkZW50aWZpZXIoc291cmNlLmlkZW50aWZpZXIpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pZGVudGlmaWVyID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbGFzdFN5c3RlbUNoYW5nZSddKSB7IHRoaXMubGFzdFN5c3RlbUNoYW5nZSA9IG5ldyBmaGlyLkZoaXJJbnN0YW50KHt2YWx1ZTogc291cmNlLmxhc3RTeXN0ZW1DaGFuZ2V9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubGFzdFN5c3RlbUNoYW5nZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19sYXN0U3lzdGVtQ2hhbmdlJ10pIHtcclxuICAgICAgaWYgKHRoaXMubGFzdFN5c3RlbUNoYW5nZSkgeyB0aGlzLmxhc3RTeXN0ZW1DaGFuZ2UuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbGFzdFN5c3RlbUNoYW5nZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmxhc3RTeXN0ZW1DaGFuZ2UgPSBuZXcgZmhpci5GaGlySW5zdGFudChzb3VyY2UuX2xhc3RTeXN0ZW1DaGFuZ2UgYXMgUGFydGlhbDxmaGlyLkZoaXJJbnN0YW50QXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydzb3VyY2UnXSkgeyB0aGlzLnNvdXJjZSA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2Uuc291cmNlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncGFyZW50J10pIHsgdGhpcy5wYXJlbnQgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnBhcmVudCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ29wZXJhdGlvbmFsU3RhdHVzJ10pIHsgdGhpcy5vcGVyYXRpb25hbFN0YXR1cyA9IHNvdXJjZS5vcGVyYXRpb25hbFN0YXR1cy5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm9wZXJhdGlvbmFsU3RhdHVzID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3BhcmFtZXRlckdyb3VwJ10pIHsgdGhpcy5wYXJhbWV0ZXJHcm91cCA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UucGFyYW1ldGVyR3JvdXApOyB9XHJcbiAgICBpZiAoc291cmNlWydtZWFzdXJlbWVudFByaW5jaXBsZSddKSB7IHRoaXMubWVhc3VyZW1lbnRQcmluY2lwbGUgPSBuZXcgZmhpci5GaGlyQ29kZTxNZWFzdXJlbWVudFByaW5jaXBsZUNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5tZWFzdXJlbWVudFByaW5jaXBsZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfbWVhc3VyZW1lbnRQcmluY2lwbGUnXSkge1xyXG4gICAgICBpZiAodGhpcy5tZWFzdXJlbWVudFByaW5jaXBsZSkgeyB0aGlzLm1lYXN1cmVtZW50UHJpbmNpcGxlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX21lYXN1cmVtZW50UHJpbmNpcGxlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubWVhc3VyZW1lbnRQcmluY2lwbGUgPSBuZXcgZmhpci5GaGlyQ29kZTxNZWFzdXJlbWVudFByaW5jaXBsZUNvZGVUeXBlPihzb3VyY2UuX21lYXN1cmVtZW50UHJpbmNpcGxlIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydwcm9kdWN0aW9uU3BlY2lmaWNhdGlvbiddKSB7IHRoaXMucHJvZHVjdGlvblNwZWNpZmljYXRpb24gPSBzb3VyY2UucHJvZHVjdGlvblNwZWNpZmljYXRpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5EZXZpY2VDb21wb25lbnRQcm9kdWN0aW9uU3BlY2lmaWNhdGlvbih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnByb2R1Y3Rpb25TcGVjaWZpY2F0aW9uID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2xhbmd1YWdlQ29kZSddKSB7IHRoaXMubGFuZ3VhZ2VDb2RlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5sYW5ndWFnZUNvZGUpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnRGV2aWNlQ29tcG9uZW50JyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUFMoJ3Jlc291cmNlVHlwZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygndHlwZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygnaWRlbnRpZmllcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygnbGFzdFN5c3RlbUNoYW5nZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnc291cmNlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdwYXJlbnQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ29wZXJhdGlvbmFsU3RhdHVzJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdwYXJhbWV0ZXJHcm91cCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPU1YoJ21lYXN1cmVtZW50UHJpbmNpcGxlJyxleHAsJ01lYXN1cmVtZW50UHJpbmNpcGxlJyxNZWFzdXJlbWVudFByaW5jaXBsZVZzVmFsaWRhdGlvbiwncicpKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdwcm9kdWN0aW9uU3BlY2lmaWNhdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnbGFuZ3VhZ2VDb2RlJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbiJdfQ==