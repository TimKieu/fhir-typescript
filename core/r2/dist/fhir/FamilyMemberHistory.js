// <auto-generated/>
// Contents of: hl7.fhir.r2.core version: 1.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: FamilyMemberHistory
import * as fhir from '../fhir.js';
// @ts-ignore
import { HistoryStatusVsValidation } from '../fhirValueSets/HistoryStatusVsValidation.js';
// @ts-ignore
import { AdministrativeGenderVsValidation } from '../fhirValueSets/AdministrativeGenderVsValidation.js';
/**
 * The significant Conditions (or condition) that the family member had. This is a repeating section to allow a system to represent more than one condition per resource, though there is nothing stopping multiple resources - one per condition.
 */
export class FamilyMemberHistoryCondition extends fhir.BackboneElement {
    /**
     * Default constructor for FamilyMemberHistoryCondition - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code, options);
        }
        else {
            this.code = null;
        }
        if (source['outcome']) {
            this.outcome = new fhir.CodeableConcept(source.outcome, options);
        }
        if (source['onset']) {
            this.onset = source.onset;
        }
        else if (source['onsetQuantity']) {
            this.onset = new fhir.Quantity(source.onsetQuantity, options);
        }
        else if (source['onsetRange']) {
            this.onset = new fhir.Range(source.onsetRange, options);
        }
        else if (source['onsetPeriod']) {
            this.onset = new fhir.Period(source.onsetPeriod, options);
        }
        else if (source['onsetString'] !== undefined) {
            this.onset = new fhir.FhirString({ value: source.onsetString }, options);
        }
        if (source['note']) {
            this.note = new fhir.Annotation(source.note, options);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'FamilyMemberHistory.condition';
        }
        iss.push(...this.vRS('code', exp));
        iss.push(...this.vOS('outcome', exp));
        iss.push(...this.vOS('onset', exp));
        iss.push(...this.vOS('note', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
FamilyMemberHistoryCondition._fts_dataType = 'FamilyMemberHistoryCondition';
/**
 * Internal flag to properly serialize choice-type element FamilyMemberHistory.condition.onset[x]
 */
FamilyMemberHistoryCondition._fts_onsetIsChoice = true;
/**
 * Significant health events and conditions for a person related to the patient relevant in the context of care for the patient.
 */
export class FamilyMemberHistory extends fhir.DomainResource {
    /**
     * Default constructor for FamilyMemberHistory - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'FamilyMemberHistory';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x, options));
        }
        else {
            this.identifier = [];
        }
        if (source['patient']) {
            this.patient = new fhir.Reference(source.patient, options);
        }
        else {
            this.patient = null;
        }
        if (source['date'] !== undefined) {
            this.date = new fhir.FhirDateTime({ value: source.date }, options);
        }
        if (source['_date']) {
            if (this.date) {
                this.date.addExtendedProperties(source._date);
            }
            else {
                this.date = new fhir.FhirDateTime(source._date, options);
            }
        }
        if (source['status'] !== undefined) {
            this.status = new fhir.FhirCode({ value: source.status }, options);
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status, options);
            }
        }
        if (source['name'] !== undefined) {
            this.name = new fhir.FhirString({ value: source.name }, options);
        }
        if (source['_name']) {
            if (this.name) {
                this.name.addExtendedProperties(source._name);
            }
            else {
                this.name = new fhir.FhirString(source._name, options);
            }
        }
        if (source['relationship']) {
            this.relationship = new fhir.CodeableConcept(source.relationship, options);
        }
        else {
            this.relationship = null;
        }
        if (source['gender'] !== undefined) {
            this.gender = new fhir.FhirCode({ value: source.gender }, options);
        }
        if (source['_gender']) {
            if (this.gender) {
                this.gender.addExtendedProperties(source._gender);
            }
            else {
                this.gender = new fhir.FhirCode(source._gender, options);
            }
        }
        if (source['born']) {
            this.born = source.born;
        }
        else if (source['bornPeriod']) {
            this.born = new fhir.Period(source.bornPeriod, options);
        }
        else if (source['bornDate'] !== undefined) {
            this.born = new fhir.FhirDate({ value: source.bornDate }, options);
        }
        else if (source['bornString'] !== undefined) {
            this.born = new fhir.FhirString({ value: source.bornString }, options);
        }
        if (source['age']) {
            this.age = source.age;
        }
        else if (source['ageQuantity']) {
            this.age = new fhir.Quantity(source.ageQuantity, options);
        }
        else if (source['ageRange']) {
            this.age = new fhir.Range(source.ageRange, options);
        }
        else if (source['ageString'] !== undefined) {
            this.age = new fhir.FhirString({ value: source.ageString }, options);
        }
        if (source['deceased']) {
            this.deceased = source.deceased;
        }
        else if (source['deceasedBoolean'] !== undefined) {
            this.deceased = new fhir.FhirBoolean({ value: source.deceasedBoolean }, options);
        }
        else if (source['deceasedQuantity']) {
            this.deceased = new fhir.Quantity(source.deceasedQuantity, options);
        }
        else if (source['deceasedRange']) {
            this.deceased = new fhir.Range(source.deceasedRange, options);
        }
        else if (source['deceasedDate'] !== undefined) {
            this.deceased = new fhir.FhirDate({ value: source.deceasedDate }, options);
        }
        else if (source['deceasedString'] !== undefined) {
            this.deceased = new fhir.FhirString({ value: source.deceasedString }, options);
        }
        if (source['note']) {
            this.note = new fhir.Annotation(source.note, options);
        }
        if (source['condition']) {
            this.condition = source.condition.map((x) => new fhir.FamilyMemberHistoryCondition(x, options));
        }
        else {
            this.condition = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'FamilyMemberHistory';
        }
        iss.push(...this.vOA('identifier', exp));
        iss.push(...this.vRS('patient', exp));
        iss.push(...this.vOS('date', exp));
        iss.push(...this.vRSV('status', exp, 'HistoryStatus', HistoryStatusVsValidation, 'r'));
        iss.push(...this.vOS('name', exp));
        iss.push(...this.vRS('relationship', exp));
        iss.push(...this.vOSV('gender', exp, 'AdministrativeGender', AdministrativeGenderVsValidation, 'r'));
        iss.push(...this.vOS('born', exp));
        iss.push(...this.vOS('age', exp));
        iss.push(...this.vOS('deceased', exp));
        iss.push(...this.vOS('note', exp));
        iss.push(...this.vOA('condition', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
FamilyMemberHistory._fts_dataType = 'FamilyMemberHistory';
/**
 * Internal flag to properly serialize choice-type element FamilyMemberHistory.born[x]
 */
FamilyMemberHistory._fts_bornIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element FamilyMemberHistory.age[x]
 */
FamilyMemberHistory._fts_ageIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element FamilyMemberHistory.deceased[x]
 */
FamilyMemberHistory._fts_deceasedIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRmFtaWx5TWVtYmVySGlzdG9yeS5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvRmFtaWx5TWVtYmVySGlzdG9yeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQyxxQ0FBcUM7QUFFckMsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFJbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSx5QkFBeUIsRUFBRSxNQUFNLCtDQUErQyxDQUFDO0FBRzFGLGFBQWE7QUFDYixPQUFPLEVBQUUsZ0NBQWdDLEVBQUUsTUFBTSxzREFBc0QsQ0FBQztBQXVDeEc7O0dBRUc7QUFDSCxNQUFNLE9BQU8sNEJBQTZCLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUF5QnBFOztPQUVHO0lBQ0gsWUFBWSxTQUFtRCxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUN6RyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztTQUFFO2FBQzlFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7U0FBRTtRQUMxQixJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FBRTtRQUM1RixJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQztTQUFFO2FBQzlDLElBQUksTUFBTSxDQUFDLGVBQWUsQ0FBQyxFQUFFO1lBQUUs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c0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnIyLmNvcmUgdmVyc2lvbjogMS4wLjJcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBGYW1pbHlNZW1iZXJIaXN0b3J5XHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBIaXN0b3J5U3RhdHVzQ29kZXMsICBIaXN0b3J5U3RhdHVzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0hpc3RvcnlTdGF0dXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgSGlzdG9yeVN0YXR1c1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvSGlzdG9yeVN0YXR1c1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQWRtaW5pc3RyYXRpdmVHZW5kZXJDb2RlcywgIEFkbWluaXN0cmF0aXZlR2VuZGVyQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0FkbWluaXN0cmF0aXZlR2VuZGVyQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFkbWluaXN0cmF0aXZlR2VuZGVyVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9BZG1pbmlzdHJhdGl2ZUdlbmRlclZzVmFsaWRhdGlvbi5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBGYW1pbHlNZW1iZXJIaXN0b3J5Q29uZGl0aW9uIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEZhbWlseU1lbWJlckhpc3RvcnlDb25kaXRpb25BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgYWN0dWFsIGNvbmRpdGlvbiBzcGVjaWZpZWQuIENvdWxkIGJlIGEgY29kZWQgY29uZGl0aW9uIChsaWtlIE1JIG9yIERpYWJldGVzKSBvciBhIGxlc3Mgc3BlY2lmaWMgc3RyaW5nIGxpa2UgJ2NhbmNlcicgZGVwZW5kaW5nIG9uIGhvdyBtdWNoIGlzIGtub3duIGFib3V0IHRoZSBjb25kaXRpb24gYW5kIHRoZSBjYXBhYmlsaXRpZXMgb2YgdGhlIGNyZWF0aW5nIHN5c3RlbS5cclxuICAgKi9cclxuICBjb2RlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgd2hhdCBoYXBwZW5lZCBhcyBhIHJlc3VsdCBvZiB0aGlzIGNvbmRpdGlvbi4gIElmIHRoZSBjb25kaXRpb24gcmVzdWx0ZWQgaW4gZGVhdGgsIGRlY2Vhc2VkIGRhdGUgaXMgY2FwdHVyZWQgb24gdGhlIHJlbGF0aW9uLlxyXG4gICAqL1xyXG4gIG91dGNvbWU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFnZSBvZiBvbnNldCBvZiBhIGNvbmRpdGlvbiBpbiByZWxhdGl2ZXMgaXMgcHJlZGljdGl2ZSBvZiByaXNrIGZvciB0aGUgcGF0aWVudC5cclxuICAgKi9cclxuICBvbnNldD86IGZoaXIuUXVhbnRpdHl8Zmhpci5SYW5nZXxmaGlyLlBlcmlvZHxmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFnZSBvZiBvbnNldCBvZiBhIGNvbmRpdGlvbiBpbiByZWxhdGl2ZXMgaXMgcHJlZGljdGl2ZSBvZiByaXNrIGZvciB0aGUgcGF0aWVudC5cclxuICAgKi9cclxuICBvbnNldFF1YW50aXR5PzogZmhpci5RdWFudGl0eUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFnZSBvZiBvbnNldCBvZiBhIGNvbmRpdGlvbiBpbiByZWxhdGl2ZXMgaXMgcHJlZGljdGl2ZSBvZiByaXNrIGZvciB0aGUgcGF0aWVudC5cclxuICAgKi9cclxuICBvbnNldFJhbmdlPzogZmhpci5SYW5nZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFnZSBvZiBvbnNldCBvZiBhIGNvbmRpdGlvbiBpbiByZWxhdGl2ZXMgaXMgcHJlZGljdGl2ZSBvZiByaXNrIGZvciB0aGUgcGF0aWVudC5cclxuICAgKi9cclxuICBvbnNldFBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWdlIG9mIG9uc2V0IG9mIGEgY29uZGl0aW9uIGluIHJlbGF0aXZlcyBpcyBwcmVkaWN0aXZlIG9mIHJpc2sgZm9yIHRoZSBwYXRpZW50LlxyXG4gICAqL1xyXG4gIG9uc2V0U3RyaW5nPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQW4gYXJlYSB3aGVyZSBnZW5lcmFsIG5vdGVzIGNhbiBiZSBwbGFjZWQgYWJvdXQgdGhpcyBzcGVjaWZpYyBjb25kaXRpb24uXHJcbiAgICovXHJcbiAgbm90ZT86IGZoaXIuQW5ub3RhdGlvbkFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlIHNpZ25pZmljYW50IENvbmRpdGlvbnMgKG9yIGNvbmRpdGlvbikgdGhhdCB0aGUgZmFtaWx5IG1lbWJlciBoYWQuIFRoaXMgaXMgYSByZXBlYXRpbmcgc2VjdGlvbiB0byBhbGxvdyBhIHN5c3RlbSB0byByZXByZXNlbnQgbW9yZSB0aGFuIG9uZSBjb25kaXRpb24gcGVyIHJlc291cmNlLCB0aG91Z2ggdGhlcmUgaXMgbm90aGluZyBzdG9wcGluZyBtdWx0aXBsZSByZXNvdXJjZXMgLSBvbmUgcGVyIGNvbmRpdGlvbi5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBGYW1pbHlNZW1iZXJIaXN0b3J5Q29uZGl0aW9uIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnRmFtaWx5TWVtYmVySGlzdG9yeUNvbmRpdGlvbic7XHJcbiAgLyoqXHJcbiAgICogVGhlIGFjdHVhbCBjb25kaXRpb24gc3BlY2lmaWVkLiBDb3VsZCBiZSBhIGNvZGVkIGNvbmRpdGlvbiAobGlrZSBNSSBvciBEaWFiZXRlcykgb3IgYSBsZXNzIHNwZWNpZmljIHN0cmluZyBsaWtlICdjYW5jZXInIGRlcGVuZGluZyBvbiBob3cgbXVjaCBpcyBrbm93biBhYm91dCB0aGUgY29uZGl0aW9uIGFuZCB0aGUgY2FwYWJpbGl0aWVzIG9mIHRoZSBjcmVhdGluZyBzeXN0ZW0uXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGU6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHdoYXQgaGFwcGVuZWQgYXMgYSByZXN1bHQgb2YgdGhpcyBjb25kaXRpb24uICBJZiB0aGUgY29uZGl0aW9uIHJlc3VsdGVkIGluIGRlYXRoLCBkZWNlYXNlZCBkYXRlIGlzIGNhcHR1cmVkIG9uIHRoZSByZWxhdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgb3V0Y29tZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBZ2Ugb2Ygb25zZXQgb2YgYSBjb25kaXRpb24gaW4gcmVsYXRpdmVzIGlzIHByZWRpY3RpdmUgb2YgcmlzayBmb3IgdGhlIHBhdGllbnQuXHJcbiAgICovXHJcbiAgcHVibGljIG9uc2V0PzogKGZoaXIuUXVhbnRpdHl8Zmhpci5SYW5nZXxmaGlyLlBlcmlvZHxmaGlyLkZoaXJTdHJpbmcpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IEZhbWlseU1lbWJlckhpc3RvcnkuY29uZGl0aW9uLm9uc2V0W3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX29uc2V0SXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogQW4gYXJlYSB3aGVyZSBnZW5lcmFsIG5vdGVzIGNhbiBiZSBwbGFjZWQgYWJvdXQgdGhpcyBzcGVjaWZpYyBjb25kaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIG5vdGU/OiBmaGlyLkFubm90YXRpb258dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEZhbWlseU1lbWJlckhpc3RvcnlDb25kaXRpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxGYW1pbHlNZW1iZXJIaXN0b3J5Q29uZGl0aW9uQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2NvZGUnXSkgeyB0aGlzLmNvZGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmNvZGUsIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb2RlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnb3V0Y29tZSddKSB7IHRoaXMub3V0Y29tZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2Uub3V0Y29tZSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ29uc2V0J10pIHsgdGhpcy5vbnNldCA9IHNvdXJjZS5vbnNldDsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydvbnNldFF1YW50aXR5J10pIHsgdGhpcy5vbnNldCA9IG5ldyBmaGlyLlF1YW50aXR5KHNvdXJjZS5vbnNldFF1YW50aXR5LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydvbnNldFJhbmdlJ10pIHsgdGhpcy5vbnNldCA9IG5ldyBmaGlyLlJhbmdlKHNvdXJjZS5vbnNldFJhbmdlLCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydvbnNldFBlcmlvZCddKSB7IHRoaXMub25zZXQgPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLm9uc2V0UGVyaW9kLCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydvbnNldFN0cmluZyddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5vbnNldCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2Uub25zZXRTdHJpbmd9LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbm90ZSddKSB7IHRoaXMubm90ZSA9IG5ldyBmaGlyLkFubm90YXRpb24oc291cmNlLm5vdGUsIG9wdGlvbnMpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnRmFtaWx5TWVtYmVySGlzdG9yeS5jb25kaXRpb24nIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdjb2RlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdvdXRjb21lJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdvbnNldCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnbm90ZScsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgRmFtaWx5TWVtYmVySGlzdG9yeSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBGYW1pbHlNZW1iZXJIaXN0b3J5QXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiRmFtaWx5TWVtYmVySGlzdG9yeVwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBOZWVkIHRvIGFsbG93IGNvbm5lY3Rpb24gdG8gYSB3aWRlciB3b3JrZmxvdy5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcGVyc29uIHdobyB0aGlzIGhpc3RvcnkgY29uY2VybnMuXHJcbiAgICovXHJcbiAgcGF0aWVudDogZmhpci5SZWZlcmVuY2VBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogQWxsb3dzIGRldGVybWluYXRpb24gb2YgaG93IGN1cnJlbnQgdGhlIHN1bW1hcnkgaXMuXHJcbiAgICovXHJcbiAgZGF0ZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEZhbWlseU1lbWJlckhpc3RvcnkuZGF0ZVxyXG4gICAqL1xyXG4gIF9kYXRlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBBIGNvZGUgc3BlY2lmeWluZyBhIHN0YXRlIG9mIGEgRmFtaWx5IE1lbWJlciBIaXN0b3J5IHJlY29yZC5cclxuICAgKi9cclxuICBzdGF0dXM6IGZoaXIuRmhpckNvZGU8SGlzdG9yeVN0YXR1c0NvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBGYW1pbHlNZW1iZXJIaXN0b3J5LnN0YXR1c1xyXG4gICAqL1xyXG4gIF9zdGF0dXM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEFsbG93cyBncmVhdGVyIGVhc2UgaW4gZW5zdXJpbmcgdGhlIHNhbWUgcGVyc29uIGlzIGJlaW5nIHRhbGtlZCBhYm91dC5cclxuICAgKi9cclxuICBuYW1lPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEZhbWlseU1lbWJlckhpc3RvcnkubmFtZVxyXG4gICAqL1xyXG4gIF9uYW1lPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgdHlwZSBvZiByZWxhdGlvbnNoaXAgdGhpcyBwZXJzb24gaGFzIHRvIHRoZSBwYXRpZW50IChmYXRoZXIsIG1vdGhlciwgYnJvdGhlciBldGMuKS5cclxuICAgKi9cclxuICByZWxhdGlvbnNoaXA6IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIE5vdCBhbGwgcmVsYXRpb25zaGlwIGNvZGVzIGltcGx5IGdlbmRlciBhbmQgdGhlIHJlbGF0aXZlJ3MgZ2VuZGVyIGNhbiBiZSByZWxldmFudCBmb3IgcmlzayBhc3Nlc3NtZW50cy5cclxuICAgKi9cclxuICBnZW5kZXI/OiBmaGlyLkZoaXJDb2RlPEFkbWluaXN0cmF0aXZlR2VuZGVyQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEZhbWlseU1lbWJlckhpc3RvcnkuZ2VuZGVyXHJcbiAgICovXHJcbiAgX2dlbmRlcj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQWxsb3dzIGNhbGN1bGF0aW9uIG9mIHRoZSByZWxhdGl2ZSdzIGFnZS5cclxuICAgKi9cclxuICBib3JuPzogZmhpci5QZXJpb2R8Zmhpci5GaGlyRGF0ZXxmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFsbG93cyBjYWxjdWxhdGlvbiBvZiB0aGUgcmVsYXRpdmUncyBhZ2UuXHJcbiAgICovXHJcbiAgYm9yblBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWxsb3dzIGNhbGN1bGF0aW9uIG9mIHRoZSByZWxhdGl2ZSdzIGFnZS5cclxuICAgKi9cclxuICBib3JuRGF0ZT86IGZoaXIuRmhpckRhdGV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBbGxvd3MgY2FsY3VsYXRpb24gb2YgdGhlIHJlbGF0aXZlJ3MgYWdlLlxyXG4gICAqL1xyXG4gIGJvcm5TdHJpbmc/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBXaGlsZSBhZ2UgY2FuIGJlIGNhbGN1bGF0ZWQgZnJvbSBkYXRlIG9mIGJpcnRoLCBzb21ldGltZXMgcmVjb3JkaW5nIGFnZSBkaXJlY3RseSBpcyBtb3JlIG5hdHVyZWFsIGZvciBjbGluaWNpYW5zLlxyXG4gICAqL1xyXG4gIGFnZT86IGZoaXIuUXVhbnRpdHl8Zmhpci5SYW5nZXxmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFdoaWxlIGFnZSBjYW4gYmUgY2FsY3VsYXRlZCBmcm9tIGRhdGUgb2YgYmlydGgsIHNvbWV0aW1lcyByZWNvcmRpbmcgYWdlIGRpcmVjdGx5IGlzIG1vcmUgbmF0dXJlYWwgZm9yIGNsaW5pY2lhbnMuXHJcbiAgICovXHJcbiAgYWdlUXVhbnRpdHk/OiBmaGlyLlF1YW50aXR5QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogV2hpbGUgYWdlIGNhbiBiZSBjYWxjdWxhdGVkIGZyb20gZGF0ZSBvZiBiaXJ0aCwgc29tZXRpbWVzIHJlY29yZGluZyBhZ2UgZGlyZWN0bHkgaXMgbW9yZSBuYXR1cmVhbCBmb3IgY2xpbmljaWFucy5cclxuICAgKi9cclxuICBhZ2VSYW5nZT86IGZoaXIuUmFuZ2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBXaGlsZSBhZ2UgY2FuIGJlIGNhbGN1bGF0ZWQgZnJvbSBkYXRlIG9mIGJpcnRoLCBzb21ldGltZXMgcmVjb3JkaW5nIGFnZSBkaXJlY3RseSBpcyBtb3JlIG5hdHVyZWFsIGZvciBjbGluaWNpYW5zLlxyXG4gICAqL1xyXG4gIGFnZVN0cmluZz86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlY2Vhc2VkIGZsYWcgb3IgdGhlIGFjdHVhbCBvciBhcHByb3hpbWF0ZSBhZ2Ugb2YgdGhlIHJlbGF0aXZlIGF0IHRoZSB0aW1lIG9mIGRlYXRoIGZvciB0aGUgZmFtaWx5IG1lbWJlciBoaXN0b3J5IHJlY29yZC5cclxuICAgKi9cclxuICBkZWNlYXNlZD86IGZoaXIuRmhpckJvb2xlYW58Zmhpci5RdWFudGl0eXxmaGlyLlJhbmdlfGZoaXIuRmhpckRhdGV8Zmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWNlYXNlZCBmbGFnIG9yIHRoZSBhY3R1YWwgb3IgYXBwcm94aW1hdGUgYWdlIG9mIHRoZSByZWxhdGl2ZSBhdCB0aGUgdGltZSBvZiBkZWF0aCBmb3IgdGhlIGZhbWlseSBtZW1iZXIgaGlzdG9yeSByZWNvcmQuXHJcbiAgICovXHJcbiAgZGVjZWFzZWRCb29sZWFuPzogZmhpci5GaGlyQm9vbGVhbnxib29sZWFufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWNlYXNlZCBmbGFnIG9yIHRoZSBhY3R1YWwgb3IgYXBwcm94aW1hdGUgYWdlIG9mIHRoZSByZWxhdGl2ZSBhdCB0aGUgdGltZSBvZiBkZWF0aCBmb3IgdGhlIGZhbWlseSBtZW1iZXIgaGlzdG9yeSByZWNvcmQuXHJcbiAgICovXHJcbiAgZGVjZWFzZWRRdWFudGl0eT86IGZoaXIuUXVhbnRpdHlBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWNlYXNlZCBmbGFnIG9yIHRoZSBhY3R1YWwgb3IgYXBwcm94aW1hdGUgYWdlIG9mIHRoZSByZWxhdGl2ZSBhdCB0aGUgdGltZSBvZiBkZWF0aCBmb3IgdGhlIGZhbWlseSBtZW1iZXIgaGlzdG9yeSByZWNvcmQuXHJcbiAgICovXHJcbiAgZGVjZWFzZWRSYW5nZT86IGZoaXIuUmFuZ2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWNlYXNlZCBmbGFnIG9yIHRoZSBhY3R1YWwgb3IgYXBwcm94aW1hdGUgYWdlIG9mIHRoZSByZWxhdGl2ZSBhdCB0aGUgdGltZSBvZiBkZWF0aCBmb3IgdGhlIGZhbWlseSBtZW1iZXIgaGlzdG9yeSByZWNvcmQuXHJcbiAgICovXHJcbiAgZGVjZWFzZWREYXRlPzogZmhpci5GaGlyRGF0ZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlY2Vhc2VkIGZsYWcgb3IgdGhlIGFjdHVhbCBvciBhcHByb3hpbWF0ZSBhZ2Ugb2YgdGhlIHJlbGF0aXZlIGF0IHRoZSB0aW1lIG9mIGRlYXRoIGZvciB0aGUgZmFtaWx5IG1lbWJlciBoaXN0b3J5IHJlY29yZC5cclxuICAgKi9cclxuICBkZWNlYXNlZFN0cmluZz86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgcHJvcGVydHkgYWxsb3dzIGEgbm9uIGNvbmRpdGlvbi1zcGVjaWZpYyBub3RlIHRvIHRoZSBtYWRlIGFib3V0IHRoZSByZWxhdGVkIHBlcnNvbi4gSWRlYWxseSwgdGhlIG5vdGUgd291bGQgYmUgaW4gdGhlIGNvbmRpdGlvbiBwcm9wZXJ0eSwgYnV0IHRoaXMgaXMgbm90IGFsd2F5cyBwb3NzaWJsZS5cclxuICAgKi9cclxuICBub3RlPzogZmhpci5Bbm5vdGF0aW9uQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNpZ25pZmljYW50IENvbmRpdGlvbnMgKG9yIGNvbmRpdGlvbikgdGhhdCB0aGUgZmFtaWx5IG1lbWJlciBoYWQuIFRoaXMgaXMgYSByZXBlYXRpbmcgc2VjdGlvbiB0byBhbGxvdyBhIHN5c3RlbSB0byByZXByZXNlbnQgbW9yZSB0aGFuIG9uZSBjb25kaXRpb24gcGVyIHJlc291cmNlLCB0aG91Z2ggdGhlcmUgaXMgbm90aGluZyBzdG9wcGluZyBtdWx0aXBsZSByZXNvdXJjZXMgLSBvbmUgcGVyIGNvbmRpdGlvbi5cclxuICAgKi9cclxuICBjb25kaXRpb24/OiBmaGlyLkZhbWlseU1lbWJlckhpc3RvcnlDb25kaXRpb25BcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogU2lnbmlmaWNhbnQgaGVhbHRoIGV2ZW50cyBhbmQgY29uZGl0aW9ucyBmb3IgYSBwZXJzb24gcmVsYXRlZCB0byB0aGUgcGF0aWVudCByZWxldmFudCBpbiB0aGUgY29udGV4dCBvZiBjYXJlIGZvciB0aGUgcGF0aWVudC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBGYW1pbHlNZW1iZXJIaXN0b3J5IGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdGYW1pbHlNZW1iZXJIaXN0b3J5JztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIkZhbWlseU1lbWJlckhpc3RvcnlcIjtcclxuICAvKipcclxuICAgKiBOZWVkIHRvIGFsbG93IGNvbm5lY3Rpb24gdG8gYSB3aWRlciB3b3JrZmxvdy5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcjogZmhpci5JZGVudGlmaWVyW107XHJcbiAgLyoqXHJcbiAgICogVGhlIHBlcnNvbiB3aG8gdGhpcyBoaXN0b3J5IGNvbmNlcm5zLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXRpZW50OiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEFsbG93cyBkZXRlcm1pbmF0aW9uIG9mIGhvdyBjdXJyZW50IHRoZSBzdW1tYXJ5IGlzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkYXRlPzogZmhpci5GaGlyRGF0ZVRpbWV8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgY29kZSBzcGVjaWZ5aW5nIGEgc3RhdGUgb2YgYSBGYW1pbHkgTWVtYmVyIEhpc3RvcnkgcmVjb3JkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0dXM6IGZoaXIuRmhpckNvZGU8SGlzdG9yeVN0YXR1c0NvZGVUeXBlPnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEFsbG93cyBncmVhdGVyIGVhc2UgaW4gZW5zdXJpbmcgdGhlIHNhbWUgcGVyc29uIGlzIGJlaW5nIHRhbGtlZCBhYm91dC5cclxuICAgKi9cclxuICBwdWJsaWMgbmFtZT86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHR5cGUgb2YgcmVsYXRpb25zaGlwIHRoaXMgcGVyc29uIGhhcyB0byB0aGUgcGF0aWVudCAoZmF0aGVyLCBtb3RoZXIsIGJyb3RoZXIgZXRjLikuXHJcbiAgICovXHJcbiAgcHVibGljIHJlbGF0aW9uc2hpcDogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBOb3QgYWxsIHJlbGF0aW9uc2hpcCBjb2RlcyBpbXBseSBnZW5kZXIgYW5kIHRoZSByZWxhdGl2ZSdzIGdlbmRlciBjYW4gYmUgcmVsZXZhbnQgZm9yIHJpc2sgYXNzZXNzbWVudHMuXHJcbiAgICovXHJcbiAgcHVibGljIGdlbmRlcj86IGZoaXIuRmhpckNvZGU8QWRtaW5pc3RyYXRpdmVHZW5kZXJDb2RlVHlwZT58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFsbG93cyBjYWxjdWxhdGlvbiBvZiB0aGUgcmVsYXRpdmUncyBhZ2UuXHJcbiAgICovXHJcbiAgcHVibGljIGJvcm4/OiAoZmhpci5QZXJpb2R8Zmhpci5GaGlyRGF0ZXxmaGlyLkZoaXJTdHJpbmcpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IEZhbWlseU1lbWJlckhpc3RvcnkuYm9yblt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c19ib3JuSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogV2hpbGUgYWdlIGNhbiBiZSBjYWxjdWxhdGVkIGZyb20gZGF0ZSBvZiBiaXJ0aCwgc29tZXRpbWVzIHJlY29yZGluZyBhZ2UgZGlyZWN0bHkgaXMgbW9yZSBuYXR1cmVhbCBmb3IgY2xpbmljaWFucy5cclxuICAgKi9cclxuICBwdWJsaWMgYWdlPzogKGZoaXIuUXVhbnRpdHl8Zmhpci5SYW5nZXxmaGlyLkZoaXJTdHJpbmcpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IEZhbWlseU1lbWJlckhpc3RvcnkuYWdlW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX2FnZUlzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIERlY2Vhc2VkIGZsYWcgb3IgdGhlIGFjdHVhbCBvciBhcHByb3hpbWF0ZSBhZ2Ugb2YgdGhlIHJlbGF0aXZlIGF0IHRoZSB0aW1lIG9mIGRlYXRoIGZvciB0aGUgZmFtaWx5IG1lbWJlciBoaXN0b3J5IHJlY29yZC5cclxuICAgKi9cclxuICBwdWJsaWMgZGVjZWFzZWQ/OiAoZmhpci5GaGlyQm9vbGVhbnxmaGlyLlF1YW50aXR5fGZoaXIuUmFuZ2V8Zmhpci5GaGlyRGF0ZXxmaGlyLkZoaXJTdHJpbmcpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IEZhbWlseU1lbWJlckhpc3RvcnkuZGVjZWFzZWRbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfZGVjZWFzZWRJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBUaGlzIHByb3BlcnR5IGFsbG93cyBhIG5vbiBjb25kaXRpb24tc3BlY2lmaWMgbm90ZSB0byB0aGUgbWFkZSBhYm91dCB0aGUgcmVsYXRlZCBwZXJzb24uIElkZWFsbHksIHRoZSBub3RlIHdvdWxkIGJlIGluIHRoZSBjb25kaXRpb24gcHJvcGVydHksIGJ1dCB0aGlzIGlzIG5vdCBhbHdheXMgcG9zc2libGUuXHJcbiAgICovXHJcbiAgcHVibGljIG5vdGU/OiBmaGlyLkFubm90YXRpb258dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzaWduaWZpY2FudCBDb25kaXRpb25zIChvciBjb25kaXRpb24pIHRoYXQgdGhlIGZhbWlseSBtZW1iZXIgaGFkLiBUaGlzIGlzIGEgcmVwZWF0aW5nIHNlY3Rpb24gdG8gYWxsb3cgYSBzeXN0ZW0gdG8gcmVwcmVzZW50IG1vcmUgdGhhbiBvbmUgY29uZGl0aW9uIHBlciByZXNvdXJjZSwgdGhvdWdoIHRoZXJlIGlzIG5vdGhpbmcgc3RvcHBpbmcgbXVsdGlwbGUgcmVzb3VyY2VzIC0gb25lIHBlciBjb25kaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIGNvbmRpdGlvbjogZmhpci5GYW1pbHlNZW1iZXJIaXN0b3J5Q29uZGl0aW9uW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgRmFtaWx5TWVtYmVySGlzdG9yeSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEZhbWlseU1lbWJlckhpc3RvcnlBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnRmFtaWx5TWVtYmVySGlzdG9yeSc7XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gc291cmNlLmlkZW50aWZpZXIubWFwKCh4KSA9PiBuZXcgZmhpci5JZGVudGlmaWVyKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaWRlbnRpZmllciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwYXRpZW50J10pIHsgdGhpcy5wYXRpZW50ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5wYXRpZW50LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucGF0aWVudCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ2RhdGUnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuZGF0ZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5kYXRlfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19kYXRlJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZGF0ZSkgeyB0aGlzLmRhdGUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZGF0ZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRhdGUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoc291cmNlLl9kYXRlIGFzIFBhcnRpYWw8Zmhpci5GaGlyRGF0ZVRpbWVBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3N0YXR1cyddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxIaXN0b3J5U3RhdHVzQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnN0YXR1c30sIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfc3RhdHVzJ10pIHtcclxuICAgICAgaWYgKHRoaXMuc3RhdHVzKSB7IHRoaXMuc3RhdHVzLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3N0YXR1cyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPEhpc3RvcnlTdGF0dXNDb2RlVHlwZT4oc291cmNlLl9zdGF0dXMgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ25hbWUnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMubmFtZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UubmFtZX0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfbmFtZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLm5hbWUpIHsgdGhpcy5uYW1lLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX25hbWUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5uYW1lID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX25hbWUgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3JlbGF0aW9uc2hpcCddKSB7IHRoaXMucmVsYXRpb25zaGlwID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5yZWxhdGlvbnNoaXAsIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZWxhdGlvbnNoaXAgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydnZW5kZXInXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuZ2VuZGVyID0gbmV3IGZoaXIuRmhpckNvZGU8QWRtaW5pc3RyYXRpdmVHZW5kZXJDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2UuZ2VuZGVyfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19nZW5kZXInXSkge1xyXG4gICAgICBpZiAodGhpcy5nZW5kZXIpIHsgdGhpcy5nZW5kZXIuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZ2VuZGVyISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZ2VuZGVyID0gbmV3IGZoaXIuRmhpckNvZGU8QWRtaW5pc3RyYXRpdmVHZW5kZXJDb2RlVHlwZT4oc291cmNlLl9nZW5kZXIgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2Jvcm4nXSkgeyB0aGlzLmJvcm4gPSBzb3VyY2UuYm9ybjsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydib3JuUGVyaW9kJ10pIHsgdGhpcy5ib3JuID0gbmV3IGZoaXIuUGVyaW9kKHNvdXJjZS5ib3JuUGVyaW9kLCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydib3JuRGF0ZSddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5ib3JuID0gbmV3IGZoaXIuRmhpckRhdGUoe3ZhbHVlOiBzb3VyY2UuYm9ybkRhdGV9LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydib3JuU3RyaW5nJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLmJvcm4gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmJvcm5TdHJpbmd9LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYWdlJ10pIHsgdGhpcy5hZ2UgPSBzb3VyY2UuYWdlOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2FnZVF1YW50aXR5J10pIHsgdGhpcy5hZ2UgPSBuZXcgZmhpci5RdWFudGl0eShzb3VyY2UuYWdlUXVhbnRpdHksIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2FnZVJhbmdlJ10pIHsgdGhpcy5hZ2UgPSBuZXcgZmhpci5SYW5nZShzb3VyY2UuYWdlUmFuZ2UsIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2FnZVN0cmluZyddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5hZ2UgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmFnZVN0cmluZ30sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydkZWNlYXNlZCddKSB7IHRoaXMuZGVjZWFzZWQgPSBzb3VyY2UuZGVjZWFzZWQ7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnZGVjZWFzZWRCb29sZWFuJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLmRlY2Vhc2VkID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oe3ZhbHVlOiBzb3VyY2UuZGVjZWFzZWRCb29sZWFufSwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnZGVjZWFzZWRRdWFudGl0eSddKSB7IHRoaXMuZGVjZWFzZWQgPSBuZXcgZmhpci5RdWFudGl0eShzb3VyY2UuZGVjZWFzZWRRdWFudGl0eSwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnZGVjZWFzZWRSYW5nZSddKSB7IHRoaXMuZGVjZWFzZWQgPSBuZXcgZmhpci5SYW5nZShzb3VyY2UuZGVjZWFzZWRSYW5nZSwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnZGVjZWFzZWREYXRlJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLmRlY2Vhc2VkID0gbmV3IGZoaXIuRmhpckRhdGUoe3ZhbHVlOiBzb3VyY2UuZGVjZWFzZWREYXRlfSwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnZGVjZWFzZWRTdHJpbmcnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuZGVjZWFzZWQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmRlY2Vhc2VkU3RyaW5nfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ25vdGUnXSkgeyB0aGlzLm5vdGUgPSBuZXcgZmhpci5Bbm5vdGF0aW9uKHNvdXJjZS5ub3RlLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29uZGl0aW9uJ10pIHsgdGhpcy5jb25kaXRpb24gPSBzb3VyY2UuY29uZGl0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuRmFtaWx5TWVtYmVySGlzdG9yeUNvbmRpdGlvbih4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvbmRpdGlvbiA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnRmFtaWx5TWVtYmVySGlzdG9yeScgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2lkZW50aWZpZXInLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ3BhdGllbnQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2RhdGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlNWKCdzdGF0dXMnLGV4cCwnSGlzdG9yeVN0YXR1cycsSGlzdG9yeVN0YXR1c1ZzVmFsaWRhdGlvbiwncicpKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCduYW1lJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdyZWxhdGlvbnNoaXAnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1NWKCdnZW5kZXInLGV4cCwnQWRtaW5pc3RyYXRpdmVHZW5kZXInLEFkbWluaXN0cmF0aXZlR2VuZGVyVnNWYWxpZGF0aW9uLCdyJykpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2Jvcm4nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2FnZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnZGVjZWFzZWQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ25vdGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2NvbmRpdGlvbicsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4iXX0=