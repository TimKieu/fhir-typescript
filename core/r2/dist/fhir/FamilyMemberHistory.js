// <auto-generated/>
// Contents of: hl7.fhir.r2.core version: 1.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: FamilyMemberHistory
import * as fhir from '../fhir.js';
// @ts-ignore
import { HistoryStatusVsValidation } from '../fhirValueSets/HistoryStatusVsValidation.js';
// @ts-ignore
import { AdministrativeGenderVsValidation } from '../fhirValueSets/AdministrativeGenderVsValidation.js';
/**
 * The significant Conditions (or condition) that the family member had. This is a repeating section to allow a system to represent more than one condition per resource, though there is nothing stopping multiple resources - one per condition.
 */
export class FamilyMemberHistoryCondition extends fhir.BackboneElement {
    /**
     * Default constructor for FamilyMemberHistoryCondition - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        else {
            this.code = null;
        }
        if (source['outcome']) {
            this.outcome = new fhir.CodeableConcept(source.outcome);
        }
        if (source['onset']) {
            this.onset = source.onset;
        }
        else if (source['onsetQuantity']) {
            this.onset = new fhir.Quantity(source.onsetQuantity);
        }
        else if (source['onsetRange']) {
            this.onset = new fhir.Range(source.onsetRange);
        }
        else if (source['onsetPeriod']) {
            this.onset = new fhir.Period(source.onsetPeriod);
        }
        else if (source['onsetString']) {
            this.onset = new fhir.FhirString({ value: source.onsetString });
        }
        if (source['note']) {
            this.note = new fhir.Annotation(source.note);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'FamilyMemberHistory.condition';
        }
        this.vRS('code', exp);
        this.vOS('outcome', exp);
        this.vOS('onset', exp);
        this.vOS('note', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
FamilyMemberHistoryCondition._fts_dataType = 'FamilyMemberHistoryCondition';
/**
 * Internal flag to properly serialize choice-type element FamilyMemberHistory.condition.onset[x]
 */
FamilyMemberHistoryCondition._fts_onsetIsChoice = true;
/**
 * Significant health events and conditions for a person related to the patient relevant in the context of care for the patient.
 */
export class FamilyMemberHistory extends fhir.DomainResource {
    /**
     * Default constructor for FamilyMemberHistory - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'FamilyMemberHistory';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['patient']) {
            this.patient = new fhir.Reference(source.patient);
        }
        else {
            this.patient = null;
        }
        if (source['date']) {
            this.date = new fhir.FhirDateTime({ value: source.date });
        }
        if (source['_date']) {
            if (this.date) {
                this.date.addExtendedProperties(source._date);
            }
            else {
                this.date = new fhir.FhirDateTime(source._date);
            }
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['name']) {
            this.name = new fhir.FhirString({ value: source.name });
        }
        if (source['_name']) {
            if (this.name) {
                this.name.addExtendedProperties(source._name);
            }
            else {
                this.name = new fhir.FhirString(source._name);
            }
        }
        if (source['relationship']) {
            this.relationship = new fhir.CodeableConcept(source.relationship);
        }
        else {
            this.relationship = null;
        }
        if (source['gender']) {
            this.gender = new fhir.FhirCode({ value: source.gender });
        }
        if (source['_gender']) {
            if (this.gender) {
                this.gender.addExtendedProperties(source._gender);
            }
            else {
                this.gender = new fhir.FhirCode(source._gender);
            }
        }
        if (source['born']) {
            this.born = source.born;
        }
        else if (source['bornPeriod']) {
            this.born = new fhir.Period(source.bornPeriod);
        }
        else if (source['bornDate']) {
            this.born = new fhir.FhirDate({ value: source.bornDate });
        }
        else if (source['bornString']) {
            this.born = new fhir.FhirString({ value: source.bornString });
        }
        if (source['age']) {
            this.age = source.age;
        }
        else if (source['ageQuantity']) {
            this.age = new fhir.Quantity(source.ageQuantity);
        }
        else if (source['ageRange']) {
            this.age = new fhir.Range(source.ageRange);
        }
        else if (source['ageString']) {
            this.age = new fhir.FhirString({ value: source.ageString });
        }
        if (source['deceased']) {
            this.deceased = source.deceased;
        }
        else if (source['deceasedBoolean']) {
            this.deceased = new fhir.FhirBoolean({ value: source.deceasedBoolean });
        }
        else if (source['deceasedQuantity']) {
            this.deceased = new fhir.Quantity(source.deceasedQuantity);
        }
        else if (source['deceasedRange']) {
            this.deceased = new fhir.Range(source.deceasedRange);
        }
        else if (source['deceasedDate']) {
            this.deceased = new fhir.FhirDate({ value: source.deceasedDate });
        }
        else if (source['deceasedString']) {
            this.deceased = new fhir.FhirString({ value: source.deceasedString });
        }
        if (source['note']) {
            this.note = new fhir.Annotation(source.note);
        }
        if (source['condition']) {
            this.condition = source.condition.map((x) => new fhir.FamilyMemberHistoryCondition(x));
        }
        else {
            this.condition = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'FamilyMemberHistory';
        }
        this.vRS('resourceType', exp);
        this.vOA('identifier', exp);
        this.vRS('patient', exp);
        this.vOS('date', exp);
        this.vRSV('status', exp, 'HistoryStatus', HistoryStatusVsValidation, 'r');
        this.vOS('name', exp);
        this.vRS('relationship', exp);
        this.vOSV('gender', exp, 'AdministrativeGender', AdministrativeGenderVsValidation, 'r');
        this.vOS('born', exp);
        this.vOS('age', exp);
        this.vOS('deceased', exp);
        this.vOS('note', exp);
        this.vOA('condition', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
FamilyMemberHistory._fts_dataType = 'FamilyMemberHistory';
/**
 * Internal flag to properly serialize choice-type element FamilyMemberHistory.born[x]
 */
FamilyMemberHistory._fts_bornIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element FamilyMemberHistory.age[x]
 */
FamilyMemberHistory._fts_ageIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element FamilyMemberHistory.deceased[x]
 */
FamilyMemberHistory._fts_deceasedIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRmFtaWx5TWVtYmVySGlzdG9yeS5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvRmFtaWx5TWVtYmVySGlzdG9yeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQyxxQ0FBcUM7QUFFckMsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFJbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSx5QkFBeUIsRUFBRSxNQUFNLCtDQUErQyxDQUFDO0FBRzFGLGFBQWE7QUFDYixPQUFPLEVBQUUsZ0NBQWdDLEVBQUUsTUFBTSxzREFBc0QsQ0FBQztBQXVDeEc7O0dBRUc7QUFDSCxNQUFNLE9BQU8sNEJBQTZCLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUF5QnBFOztPQUVHO0lBQ0gsWUFBWSxTQUFtRCxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUN6RyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQUU7YUFDckU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztTQUFFO1FBQzFCLElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1NBQUU7UUFDbkYsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUM7U0FBRTthQUM5QyxJQUFJLE1BQU0sQ0FBQyxlQUFlLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxLQUFLLEdBQUcs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Q0FBQztBQUt2RDs7R0FFRztBQUN1Qix5Q0FBcUIsR0FBUSxJQUFJLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjIuY29yZSB2ZXJzaW9uOiAxLjAuMlxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IEZhbWlseU1lbWJlckhpc3RvcnlcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEhpc3RvcnlTdGF0dXNDb2RlcywgIEhpc3RvcnlTdGF0dXNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvSGlzdG9yeVN0YXR1c0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBIaXN0b3J5U3RhdHVzVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9IaXN0b3J5U3RhdHVzVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBBZG1pbmlzdHJhdGl2ZUdlbmRlckNvZGVzLCAgQWRtaW5pc3RyYXRpdmVHZW5kZXJDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQWRtaW5pc3RyYXRpdmVHZW5kZXJDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQWRtaW5pc3RyYXRpdmVHZW5kZXJWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0FkbWluaXN0cmF0aXZlR2VuZGVyVnNWYWxpZGF0aW9uLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEZhbWlseU1lbWJlckhpc3RvcnlDb25kaXRpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgRmFtaWx5TWVtYmVySGlzdG9yeUNvbmRpdGlvbkFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBhY3R1YWwgY29uZGl0aW9uIHNwZWNpZmllZC4gQ291bGQgYmUgYSBjb2RlZCBjb25kaXRpb24gKGxpa2UgTUkgb3IgRGlhYmV0ZXMpIG9yIGEgbGVzcyBzcGVjaWZpYyBzdHJpbmcgbGlrZSAnY2FuY2VyJyBkZXBlbmRpbmcgb24gaG93IG11Y2ggaXMga25vd24gYWJvdXQgdGhlIGNvbmRpdGlvbiBhbmQgdGhlIGNhcGFiaWxpdGllcyBvZiB0aGUgY3JlYXRpbmcgc3lzdGVtLlxyXG4gICAqL1xyXG4gIGNvZGU6IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB3aGF0IGhhcHBlbmVkIGFzIGEgcmVzdWx0IG9mIHRoaXMgY29uZGl0aW9uLiAgSWYgdGhlIGNvbmRpdGlvbiByZXN1bHRlZCBpbiBkZWF0aCwgZGVjZWFzZWQgZGF0ZSBpcyBjYXB0dXJlZCBvbiB0aGUgcmVsYXRpb24uXHJcbiAgICovXHJcbiAgb3V0Y29tZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWdlIG9mIG9uc2V0IG9mIGEgY29uZGl0aW9uIGluIHJlbGF0aXZlcyBpcyBwcmVkaWN0aXZlIG9mIHJpc2sgZm9yIHRoZSBwYXRpZW50LlxyXG4gICAqL1xyXG4gIG9uc2V0PzogZmhpci5RdWFudGl0eXxmaGlyLlJhbmdlfGZoaXIuUGVyaW9kfGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWdlIG9mIG9uc2V0IG9mIGEgY29uZGl0aW9uIGluIHJlbGF0aXZlcyBpcyBwcmVkaWN0aXZlIG9mIHJpc2sgZm9yIHRoZSBwYXRpZW50LlxyXG4gICAqL1xyXG4gIG9uc2V0UXVhbnRpdHk/OiBmaGlyLlF1YW50aXR5QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWdlIG9mIG9uc2V0IG9mIGEgY29uZGl0aW9uIGluIHJlbGF0aXZlcyBpcyBwcmVkaWN0aXZlIG9mIHJpc2sgZm9yIHRoZSBwYXRpZW50LlxyXG4gICAqL1xyXG4gIG9uc2V0UmFuZ2U/OiBmaGlyLlJhbmdlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWdlIG9mIG9uc2V0IG9mIGEgY29uZGl0aW9uIGluIHJlbGF0aXZlcyBpcyBwcmVkaWN0aXZlIG9mIHJpc2sgZm9yIHRoZSBwYXRpZW50LlxyXG4gICAqL1xyXG4gIG9uc2V0UGVyaW9kPzogZmhpci5QZXJpb2RBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBZ2Ugb2Ygb25zZXQgb2YgYSBjb25kaXRpb24gaW4gcmVsYXRpdmVzIGlzIHByZWRpY3RpdmUgb2YgcmlzayBmb3IgdGhlIHBhdGllbnQuXHJcbiAgICovXHJcbiAgb25zZXRTdHJpbmc/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBbiBhcmVhIHdoZXJlIGdlbmVyYWwgbm90ZXMgY2FuIGJlIHBsYWNlZCBhYm91dCB0aGlzIHNwZWNpZmljIGNvbmRpdGlvbi5cclxuICAgKi9cclxuICBub3RlPzogZmhpci5Bbm5vdGF0aW9uQXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgc2lnbmlmaWNhbnQgQ29uZGl0aW9ucyAob3IgY29uZGl0aW9uKSB0aGF0IHRoZSBmYW1pbHkgbWVtYmVyIGhhZC4gVGhpcyBpcyBhIHJlcGVhdGluZyBzZWN0aW9uIHRvIGFsbG93IGEgc3lzdGVtIHRvIHJlcHJlc2VudCBtb3JlIHRoYW4gb25lIGNvbmRpdGlvbiBwZXIgcmVzb3VyY2UsIHRob3VnaCB0aGVyZSBpcyBub3RoaW5nIHN0b3BwaW5nIG11bHRpcGxlIHJlc291cmNlcyAtIG9uZSBwZXIgY29uZGl0aW9uLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEZhbWlseU1lbWJlckhpc3RvcnlDb25kaXRpb24gZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdGYW1pbHlNZW1iZXJIaXN0b3J5Q29uZGl0aW9uJztcclxuICAvKipcclxuICAgKiBUaGUgYWN0dWFsIGNvbmRpdGlvbiBzcGVjaWZpZWQuIENvdWxkIGJlIGEgY29kZWQgY29uZGl0aW9uIChsaWtlIE1JIG9yIERpYWJldGVzKSBvciBhIGxlc3Mgc3BlY2lmaWMgc3RyaW5nIGxpa2UgJ2NhbmNlcicgZGVwZW5kaW5nIG9uIGhvdyBtdWNoIGlzIGtub3duIGFib3V0IHRoZSBjb25kaXRpb24gYW5kIHRoZSBjYXBhYmlsaXRpZXMgb2YgdGhlIGNyZWF0aW5nIHN5c3RlbS5cclxuICAgKi9cclxuICBwdWJsaWMgY29kZTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgd2hhdCBoYXBwZW5lZCBhcyBhIHJlc3VsdCBvZiB0aGlzIGNvbmRpdGlvbi4gIElmIHRoZSBjb25kaXRpb24gcmVzdWx0ZWQgaW4gZGVhdGgsIGRlY2Vhc2VkIGRhdGUgaXMgY2FwdHVyZWQgb24gdGhlIHJlbGF0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdXRjb21lPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFnZSBvZiBvbnNldCBvZiBhIGNvbmRpdGlvbiBpbiByZWxhdGl2ZXMgaXMgcHJlZGljdGl2ZSBvZiByaXNrIGZvciB0aGUgcGF0aWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgb25zZXQ/OiAoZmhpci5RdWFudGl0eXxmaGlyLlJhbmdlfGZoaXIuUGVyaW9kfGZoaXIuRmhpclN0cmluZyl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgRmFtaWx5TWVtYmVySGlzdG9yeS5jb25kaXRpb24ub25zZXRbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfb25zZXRJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBBbiBhcmVhIHdoZXJlIGdlbmVyYWwgbm90ZXMgY2FuIGJlIHBsYWNlZCBhYm91dCB0aGlzIHNwZWNpZmljIGNvbmRpdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgbm90ZT86IGZoaXIuQW5ub3RhdGlvbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgRmFtaWx5TWVtYmVySGlzdG9yeUNvbmRpdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPEZhbWlseU1lbWJlckhpc3RvcnlDb25kaXRpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY29kZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvZGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydvdXRjb21lJ10pIHsgdGhpcy5vdXRjb21lID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5vdXRjb21lKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnb25zZXQnXSkgeyB0aGlzLm9uc2V0ID0gc291cmNlLm9uc2V0OyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ29uc2V0UXVhbnRpdHknXSkgeyB0aGlzLm9uc2V0ID0gbmV3IGZoaXIuUXVhbnRpdHkoc291cmNlLm9uc2V0UXVhbnRpdHkpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ29uc2V0UmFuZ2UnXSkgeyB0aGlzLm9uc2V0ID0gbmV3IGZoaXIuUmFuZ2Uoc291cmNlLm9uc2V0UmFuZ2UpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ29uc2V0UGVyaW9kJ10pIHsgdGhpcy5vbnNldCA9IG5ldyBmaGlyLlBlcmlvZChzb3VyY2Uub25zZXRQZXJpb2QpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ29uc2V0U3RyaW5nJ10pIHsgdGhpcy5vbnNldCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2Uub25zZXRTdHJpbmd9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbm90ZSddKSB7IHRoaXMubm90ZSA9IG5ldyBmaGlyLkFubm90YXRpb24oc291cmNlLm5vdGUpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnRmFtaWx5TWVtYmVySGlzdG9yeS5jb25kaXRpb24nIH1cclxuICAgIHRoaXMudlJTKCdjb2RlJyxleHApXHJcbiAgICB0aGlzLnZPUygnb3V0Y29tZScsZXhwKVxyXG4gICAgdGhpcy52T1MoJ29uc2V0JyxleHApXHJcbiAgICB0aGlzLnZPUygnbm90ZScsZXhwKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIEZhbWlseU1lbWJlckhpc3RvcnkgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgRmFtaWx5TWVtYmVySGlzdG9yeUFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIkZhbWlseU1lbWJlckhpc3RvcnlcInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTmVlZCB0byBhbGxvdyBjb25uZWN0aW9uIHRvIGEgd2lkZXIgd29ya2Zsb3cuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBlcnNvbiB3aG8gdGhpcyBoaXN0b3J5IGNvbmNlcm5zLlxyXG4gICAqL1xyXG4gIHBhdGllbnQ6IGZoaXIuUmVmZXJlbmNlQXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIEFsbG93cyBkZXRlcm1pbmF0aW9uIG9mIGhvdyBjdXJyZW50IHRoZSBzdW1tYXJ5IGlzLlxyXG4gICAqL1xyXG4gIGRhdGU/OiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBGYW1pbHlNZW1iZXJIaXN0b3J5LmRhdGVcclxuICAgKi9cclxuICBfZGF0ZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQSBjb2RlIHNwZWNpZnlpbmcgYSBzdGF0ZSBvZiBhIEZhbWlseSBNZW1iZXIgSGlzdG9yeSByZWNvcmQuXHJcbiAgICovXHJcbiAgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPEhpc3RvcnlTdGF0dXNDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogRmFtaWx5TWVtYmVySGlzdG9yeS5zdGF0dXNcclxuICAgKi9cclxuICBfc3RhdHVzPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBBbGxvd3MgZ3JlYXRlciBlYXNlIGluIGVuc3VyaW5nIHRoZSBzYW1lIHBlcnNvbiBpcyBiZWluZyB0YWxrZWQgYWJvdXQuXHJcbiAgICovXHJcbiAgbmFtZT86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBGYW1pbHlNZW1iZXJIaXN0b3J5Lm5hbWVcclxuICAgKi9cclxuICBfbmFtZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHR5cGUgb2YgcmVsYXRpb25zaGlwIHRoaXMgcGVyc29uIGhhcyB0byB0aGUgcGF0aWVudCAoZmF0aGVyLCBtb3RoZXIsIGJyb3RoZXIgZXRjLikuXHJcbiAgICovXHJcbiAgcmVsYXRpb25zaGlwOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBOb3QgYWxsIHJlbGF0aW9uc2hpcCBjb2RlcyBpbXBseSBnZW5kZXIgYW5kIHRoZSByZWxhdGl2ZSdzIGdlbmRlciBjYW4gYmUgcmVsZXZhbnQgZm9yIHJpc2sgYXNzZXNzbWVudHMuXHJcbiAgICovXHJcbiAgZ2VuZGVyPzogZmhpci5GaGlyQ29kZTxBZG1pbmlzdHJhdGl2ZUdlbmRlckNvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBGYW1pbHlNZW1iZXJIaXN0b3J5LmdlbmRlclxyXG4gICAqL1xyXG4gIF9nZW5kZXI/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEFsbG93cyBjYWxjdWxhdGlvbiBvZiB0aGUgcmVsYXRpdmUncyBhZ2UuXHJcbiAgICovXHJcbiAgYm9ybj86IGZoaXIuUGVyaW9kfGZoaXIuRmhpckRhdGV8Zmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBbGxvd3MgY2FsY3VsYXRpb24gb2YgdGhlIHJlbGF0aXZlJ3MgYWdlLlxyXG4gICAqL1xyXG4gIGJvcm5QZXJpb2Q/OiBmaGlyLlBlcmlvZEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFsbG93cyBjYWxjdWxhdGlvbiBvZiB0aGUgcmVsYXRpdmUncyBhZ2UuXHJcbiAgICovXHJcbiAgYm9ybkRhdGU/OiBmaGlyLkZoaXJEYXRlfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWxsb3dzIGNhbGN1bGF0aW9uIG9mIHRoZSByZWxhdGl2ZSdzIGFnZS5cclxuICAgKi9cclxuICBib3JuU3RyaW5nPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogV2hpbGUgYWdlIGNhbiBiZSBjYWxjdWxhdGVkIGZyb20gZGF0ZSBvZiBiaXJ0aCwgc29tZXRpbWVzIHJlY29yZGluZyBhZ2UgZGlyZWN0bHkgaXMgbW9yZSBuYXR1cmVhbCBmb3IgY2xpbmljaWFucy5cclxuICAgKi9cclxuICBhZ2U/OiBmaGlyLlF1YW50aXR5fGZoaXIuUmFuZ2V8Zmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBXaGlsZSBhZ2UgY2FuIGJlIGNhbGN1bGF0ZWQgZnJvbSBkYXRlIG9mIGJpcnRoLCBzb21ldGltZXMgcmVjb3JkaW5nIGFnZSBkaXJlY3RseSBpcyBtb3JlIG5hdHVyZWFsIGZvciBjbGluaWNpYW5zLlxyXG4gICAqL1xyXG4gIGFnZVF1YW50aXR5PzogZmhpci5RdWFudGl0eUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFdoaWxlIGFnZSBjYW4gYmUgY2FsY3VsYXRlZCBmcm9tIGRhdGUgb2YgYmlydGgsIHNvbWV0aW1lcyByZWNvcmRpbmcgYWdlIGRpcmVjdGx5IGlzIG1vcmUgbmF0dXJlYWwgZm9yIGNsaW5pY2lhbnMuXHJcbiAgICovXHJcbiAgYWdlUmFuZ2U/OiBmaGlyLlJhbmdlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogV2hpbGUgYWdlIGNhbiBiZSBjYWxjdWxhdGVkIGZyb20gZGF0ZSBvZiBiaXJ0aCwgc29tZXRpbWVzIHJlY29yZGluZyBhZ2UgZGlyZWN0bHkgaXMgbW9yZSBuYXR1cmVhbCBmb3IgY2xpbmljaWFucy5cclxuICAgKi9cclxuICBhZ2VTdHJpbmc/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWNlYXNlZCBmbGFnIG9yIHRoZSBhY3R1YWwgb3IgYXBwcm94aW1hdGUgYWdlIG9mIHRoZSByZWxhdGl2ZSBhdCB0aGUgdGltZSBvZiBkZWF0aCBmb3IgdGhlIGZhbWlseSBtZW1iZXIgaGlzdG9yeSByZWNvcmQuXHJcbiAgICovXHJcbiAgZGVjZWFzZWQ/OiBmaGlyLkZoaXJCb29sZWFufGZoaXIuUXVhbnRpdHl8Zmhpci5SYW5nZXxmaGlyLkZoaXJEYXRlfGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVjZWFzZWQgZmxhZyBvciB0aGUgYWN0dWFsIG9yIGFwcHJveGltYXRlIGFnZSBvZiB0aGUgcmVsYXRpdmUgYXQgdGhlIHRpbWUgb2YgZGVhdGggZm9yIHRoZSBmYW1pbHkgbWVtYmVyIGhpc3RvcnkgcmVjb3JkLlxyXG4gICAqL1xyXG4gIGRlY2Vhc2VkQm9vbGVhbj86IGZoaXIuRmhpckJvb2xlYW58Ym9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVjZWFzZWQgZmxhZyBvciB0aGUgYWN0dWFsIG9yIGFwcHJveGltYXRlIGFnZSBvZiB0aGUgcmVsYXRpdmUgYXQgdGhlIHRpbWUgb2YgZGVhdGggZm9yIHRoZSBmYW1pbHkgbWVtYmVyIGhpc3RvcnkgcmVjb3JkLlxyXG4gICAqL1xyXG4gIGRlY2Vhc2VkUXVhbnRpdHk/OiBmaGlyLlF1YW50aXR5QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVjZWFzZWQgZmxhZyBvciB0aGUgYWN0dWFsIG9yIGFwcHJveGltYXRlIGFnZSBvZiB0aGUgcmVsYXRpdmUgYXQgdGhlIHRpbWUgb2YgZGVhdGggZm9yIHRoZSBmYW1pbHkgbWVtYmVyIGhpc3RvcnkgcmVjb3JkLlxyXG4gICAqL1xyXG4gIGRlY2Vhc2VkUmFuZ2U/OiBmaGlyLlJhbmdlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVjZWFzZWQgZmxhZyBvciB0aGUgYWN0dWFsIG9yIGFwcHJveGltYXRlIGFnZSBvZiB0aGUgcmVsYXRpdmUgYXQgdGhlIHRpbWUgb2YgZGVhdGggZm9yIHRoZSBmYW1pbHkgbWVtYmVyIGhpc3RvcnkgcmVjb3JkLlxyXG4gICAqL1xyXG4gIGRlY2Vhc2VkRGF0ZT86IGZoaXIuRmhpckRhdGV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWNlYXNlZCBmbGFnIG9yIHRoZSBhY3R1YWwgb3IgYXBwcm94aW1hdGUgYWdlIG9mIHRoZSByZWxhdGl2ZSBhdCB0aGUgdGltZSBvZiBkZWF0aCBmb3IgdGhlIGZhbWlseSBtZW1iZXIgaGlzdG9yeSByZWNvcmQuXHJcbiAgICovXHJcbiAgZGVjZWFzZWRTdHJpbmc/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIHByb3BlcnR5IGFsbG93cyBhIG5vbiBjb25kaXRpb24tc3BlY2lmaWMgbm90ZSB0byB0aGUgbWFkZSBhYm91dCB0aGUgcmVsYXRlZCBwZXJzb24uIElkZWFsbHksIHRoZSBub3RlIHdvdWxkIGJlIGluIHRoZSBjb25kaXRpb24gcHJvcGVydHksIGJ1dCB0aGlzIGlzIG5vdCBhbHdheXMgcG9zc2libGUuXHJcbiAgICovXHJcbiAgbm90ZT86IGZoaXIuQW5ub3RhdGlvbkFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzaWduaWZpY2FudCBDb25kaXRpb25zIChvciBjb25kaXRpb24pIHRoYXQgdGhlIGZhbWlseSBtZW1iZXIgaGFkLiBUaGlzIGlzIGEgcmVwZWF0aW5nIHNlY3Rpb24gdG8gYWxsb3cgYSBzeXN0ZW0gdG8gcmVwcmVzZW50IG1vcmUgdGhhbiBvbmUgY29uZGl0aW9uIHBlciByZXNvdXJjZSwgdGhvdWdoIHRoZXJlIGlzIG5vdGhpbmcgc3RvcHBpbmcgbXVsdGlwbGUgcmVzb3VyY2VzIC0gb25lIHBlciBjb25kaXRpb24uXHJcbiAgICovXHJcbiAgY29uZGl0aW9uPzogZmhpci5GYW1pbHlNZW1iZXJIaXN0b3J5Q29uZGl0aW9uQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNpZ25pZmljYW50IGhlYWx0aCBldmVudHMgYW5kIGNvbmRpdGlvbnMgZm9yIGEgcGVyc29uIHJlbGF0ZWQgdG8gdGhlIHBhdGllbnQgcmVsZXZhbnQgaW4gdGhlIGNvbnRleHQgb2YgY2FyZSBmb3IgdGhlIHBhdGllbnQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRmFtaWx5TWVtYmVySGlzdG9yeSBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnRmFtaWx5TWVtYmVySGlzdG9yeSc7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJGYW1pbHlNZW1iZXJIaXN0b3J5XCI7XHJcbiAgLyoqXHJcbiAgICogTmVlZCB0byBhbGxvdyBjb25uZWN0aW9uIHRvIGEgd2lkZXIgd29ya2Zsb3cuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI6IGZoaXIuSWRlbnRpZmllcltdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwZXJzb24gd2hvIHRoaXMgaGlzdG9yeSBjb25jZXJucy5cclxuICAgKi9cclxuICBwdWJsaWMgcGF0aWVudDogZmhpci5SZWZlcmVuY2V8bnVsbDtcclxuICAvKipcclxuICAgKiBBbGxvd3MgZGV0ZXJtaW5hdGlvbiBvZiBob3cgY3VycmVudCB0aGUgc3VtbWFyeSBpcy5cclxuICAgKi9cclxuICBwdWJsaWMgZGF0ZT86IGZoaXIuRmhpckRhdGVUaW1lfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGNvZGUgc3BlY2lmeWluZyBhIHN0YXRlIG9mIGEgRmFtaWx5IE1lbWJlciBIaXN0b3J5IHJlY29yZC5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPEhpc3RvcnlTdGF0dXNDb2RlVHlwZT58bnVsbDtcclxuICAvKipcclxuICAgKiBBbGxvd3MgZ3JlYXRlciBlYXNlIGluIGVuc3VyaW5nIHRoZSBzYW1lIHBlcnNvbiBpcyBiZWluZyB0YWxrZWQgYWJvdXQuXHJcbiAgICovXHJcbiAgcHVibGljIG5hbWU/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0eXBlIG9mIHJlbGF0aW9uc2hpcCB0aGlzIHBlcnNvbiBoYXMgdG8gdGhlIHBhdGllbnQgKGZhdGhlciwgbW90aGVyLCBicm90aGVyIGV0Yy4pLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWxhdGlvbnNoaXA6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogTm90IGFsbCByZWxhdGlvbnNoaXAgY29kZXMgaW1wbHkgZ2VuZGVyIGFuZCB0aGUgcmVsYXRpdmUncyBnZW5kZXIgY2FuIGJlIHJlbGV2YW50IGZvciByaXNrIGFzc2Vzc21lbnRzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZW5kZXI/OiBmaGlyLkZoaXJDb2RlPEFkbWluaXN0cmF0aXZlR2VuZGVyQ29kZVR5cGU+fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBbGxvd3MgY2FsY3VsYXRpb24gb2YgdGhlIHJlbGF0aXZlJ3MgYWdlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBib3JuPzogKGZoaXIuUGVyaW9kfGZoaXIuRmhpckRhdGV8Zmhpci5GaGlyU3RyaW5nKXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBGYW1pbHlNZW1iZXJIaXN0b3J5LmJvcm5beF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfYm9ybklzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIFdoaWxlIGFnZSBjYW4gYmUgY2FsY3VsYXRlZCBmcm9tIGRhdGUgb2YgYmlydGgsIHNvbWV0aW1lcyByZWNvcmRpbmcgYWdlIGRpcmVjdGx5IGlzIG1vcmUgbmF0dXJlYWwgZm9yIGNsaW5pY2lhbnMuXHJcbiAgICovXHJcbiAgcHVibGljIGFnZT86IChmaGlyLlF1YW50aXR5fGZoaXIuUmFuZ2V8Zmhpci5GaGlyU3RyaW5nKXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBGYW1pbHlNZW1iZXJIaXN0b3J5LmFnZVt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c19hZ2VJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBEZWNlYXNlZCBmbGFnIG9yIHRoZSBhY3R1YWwgb3IgYXBwcm94aW1hdGUgYWdlIG9mIHRoZSByZWxhdGl2ZSBhdCB0aGUgdGltZSBvZiBkZWF0aCBmb3IgdGhlIGZhbWlseSBtZW1iZXIgaGlzdG9yeSByZWNvcmQuXHJcbiAgICovXHJcbiAgcHVibGljIGRlY2Vhc2VkPzogKGZoaXIuRmhpckJvb2xlYW58Zmhpci5RdWFudGl0eXxmaGlyLlJhbmdlfGZoaXIuRmhpckRhdGV8Zmhpci5GaGlyU3RyaW5nKXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBGYW1pbHlNZW1iZXJIaXN0b3J5LmRlY2Vhc2VkW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX2RlY2Vhc2VkSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBwcm9wZXJ0eSBhbGxvd3MgYSBub24gY29uZGl0aW9uLXNwZWNpZmljIG5vdGUgdG8gdGhlIG1hZGUgYWJvdXQgdGhlIHJlbGF0ZWQgcGVyc29uLiBJZGVhbGx5LCB0aGUgbm90ZSB3b3VsZCBiZSBpbiB0aGUgY29uZGl0aW9uIHByb3BlcnR5LCBidXQgdGhpcyBpcyBub3QgYWx3YXlzIHBvc3NpYmxlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBub3RlPzogZmhpci5Bbm5vdGF0aW9ufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgc2lnbmlmaWNhbnQgQ29uZGl0aW9ucyAob3IgY29uZGl0aW9uKSB0aGF0IHRoZSBmYW1pbHkgbWVtYmVyIGhhZC4gVGhpcyBpcyBhIHJlcGVhdGluZyBzZWN0aW9uIHRvIGFsbG93IGEgc3lzdGVtIHRvIHJlcHJlc2VudCBtb3JlIHRoYW4gb25lIGNvbmRpdGlvbiBwZXIgcmVzb3VyY2UsIHRob3VnaCB0aGVyZSBpcyBub3RoaW5nIHN0b3BwaW5nIG11bHRpcGxlIHJlc291cmNlcyAtIG9uZSBwZXIgY29uZGl0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25kaXRpb246IGZoaXIuRmFtaWx5TWVtYmVySGlzdG9yeUNvbmRpdGlvbltdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEZhbWlseU1lbWJlckhpc3RvcnkgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxGYW1pbHlNZW1iZXJIaXN0b3J5QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ0ZhbWlseU1lbWJlckhpc3RvcnknO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IHNvdXJjZS5pZGVudGlmaWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuSWRlbnRpZmllcih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmlkZW50aWZpZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncGF0aWVudCddKSB7IHRoaXMucGF0aWVudCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UucGF0aWVudCk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnBhdGllbnQgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydkYXRlJ10pIHsgdGhpcy5kYXRlID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLmRhdGV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2RhdGUnXSkge1xyXG4gICAgICBpZiAodGhpcy5kYXRlKSB7IHRoaXMuZGF0ZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9kYXRlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZGF0ZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZShzb3VyY2UuX2RhdGUgYXMgUGFydGlhbDxmaGlyLkZoaXJEYXRlVGltZUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RhdHVzJ10pIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxIaXN0b3J5U3RhdHVzQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnN0YXR1c30pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfc3RhdHVzJ10pIHtcclxuICAgICAgaWYgKHRoaXMuc3RhdHVzKSB7IHRoaXMuc3RhdHVzLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3N0YXR1cyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPEhpc3RvcnlTdGF0dXNDb2RlVHlwZT4oc291cmNlLl9zdGF0dXMgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ25hbWUnXSkgeyB0aGlzLm5hbWUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLm5hbWV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX25hbWUnXSkge1xyXG4gICAgICBpZiAodGhpcy5uYW1lKSB7IHRoaXMubmFtZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9uYW1lISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubmFtZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9uYW1lIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydyZWxhdGlvbnNoaXAnXSkgeyB0aGlzLnJlbGF0aW9uc2hpcCA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UucmVsYXRpb25zaGlwKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVsYXRpb25zaGlwID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZ2VuZGVyJ10pIHsgdGhpcy5nZW5kZXIgPSBuZXcgZmhpci5GaGlyQ29kZTxBZG1pbmlzdHJhdGl2ZUdlbmRlckNvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5nZW5kZXJ9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2dlbmRlciddKSB7XHJcbiAgICAgIGlmICh0aGlzLmdlbmRlcikgeyB0aGlzLmdlbmRlci5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9nZW5kZXIhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5nZW5kZXIgPSBuZXcgZmhpci5GaGlyQ29kZTxBZG1pbmlzdHJhdGl2ZUdlbmRlckNvZGVUeXBlPihzb3VyY2UuX2dlbmRlciBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnYm9ybiddKSB7IHRoaXMuYm9ybiA9IHNvdXJjZS5ib3JuOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2Jvcm5QZXJpb2QnXSkgeyB0aGlzLmJvcm4gPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLmJvcm5QZXJpb2QpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2Jvcm5EYXRlJ10pIHsgdGhpcy5ib3JuID0gbmV3IGZoaXIuRmhpckRhdGUoe3ZhbHVlOiBzb3VyY2UuYm9ybkRhdGV9KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydib3JuU3RyaW5nJ10pIHsgdGhpcy5ib3JuID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5ib3JuU3RyaW5nfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2FnZSddKSB7IHRoaXMuYWdlID0gc291cmNlLmFnZTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydhZ2VRdWFudGl0eSddKSB7IHRoaXMuYWdlID0gbmV3IGZoaXIuUXVhbnRpdHkoc291cmNlLmFnZVF1YW50aXR5KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydhZ2VSYW5nZSddKSB7IHRoaXMuYWdlID0gbmV3IGZoaXIuUmFuZ2Uoc291cmNlLmFnZVJhbmdlKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydhZ2VTdHJpbmcnXSkgeyB0aGlzLmFnZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuYWdlU3RyaW5nfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2RlY2Vhc2VkJ10pIHsgdGhpcy5kZWNlYXNlZCA9IHNvdXJjZS5kZWNlYXNlZDsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydkZWNlYXNlZEJvb2xlYW4nXSkgeyB0aGlzLmRlY2Vhc2VkID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oe3ZhbHVlOiBzb3VyY2UuZGVjZWFzZWRCb29sZWFufSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnZGVjZWFzZWRRdWFudGl0eSddKSB7IHRoaXMuZGVjZWFzZWQgPSBuZXcgZmhpci5RdWFudGl0eShzb3VyY2UuZGVjZWFzZWRRdWFudGl0eSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnZGVjZWFzZWRSYW5nZSddKSB7IHRoaXMuZGVjZWFzZWQgPSBuZXcgZmhpci5SYW5nZShzb3VyY2UuZGVjZWFzZWRSYW5nZSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnZGVjZWFzZWREYXRlJ10pIHsgdGhpcy5kZWNlYXNlZCA9IG5ldyBmaGlyLkZoaXJEYXRlKHt2YWx1ZTogc291cmNlLmRlY2Vhc2VkRGF0ZX0pOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2RlY2Vhc2VkU3RyaW5nJ10pIHsgdGhpcy5kZWNlYXNlZCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuZGVjZWFzZWRTdHJpbmd9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbm90ZSddKSB7IHRoaXMubm90ZSA9IG5ldyBmaGlyLkFubm90YXRpb24oc291cmNlLm5vdGUpOyB9XHJcbiAgICBpZiAoc291cmNlWydjb25kaXRpb24nXSkgeyB0aGlzLmNvbmRpdGlvbiA9IHNvdXJjZS5jb25kaXRpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5GYW1pbHlNZW1iZXJIaXN0b3J5Q29uZGl0aW9uKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY29uZGl0aW9uID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdGYW1pbHlNZW1iZXJIaXN0b3J5JyB9XHJcbiAgICB0aGlzLnZSUygncmVzb3VyY2VUeXBlJyxleHApXHJcbiAgICB0aGlzLnZPQSgnaWRlbnRpZmllcicsZXhwKVxyXG4gICAgdGhpcy52UlMoJ3BhdGllbnQnLGV4cClcclxuICAgIHRoaXMudk9TKCdkYXRlJyxleHApXHJcbiAgICB0aGlzLnZSU1YoJ3N0YXR1cycsZXhwLCdIaXN0b3J5U3RhdHVzJyxIaXN0b3J5U3RhdHVzVnNWYWxpZGF0aW9uLCdyJylcclxuICAgIHRoaXMudk9TKCduYW1lJyxleHApXHJcbiAgICB0aGlzLnZSUygncmVsYXRpb25zaGlwJyxleHApXHJcbiAgICB0aGlzLnZPU1YoJ2dlbmRlcicsZXhwLCdBZG1pbmlzdHJhdGl2ZUdlbmRlcicsQWRtaW5pc3RyYXRpdmVHZW5kZXJWc1ZhbGlkYXRpb24sJ3InKVxyXG4gICAgdGhpcy52T1MoJ2Jvcm4nLGV4cClcclxuICAgIHRoaXMudk9TKCdhZ2UnLGV4cClcclxuICAgIHRoaXMudk9TKCdkZWNlYXNlZCcsZXhwKVxyXG4gICAgdGhpcy52T1MoJ25vdGUnLGV4cClcclxuICAgIHRoaXMudk9BKCdjb25kaXRpb24nLGV4cClcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbiJdfQ==