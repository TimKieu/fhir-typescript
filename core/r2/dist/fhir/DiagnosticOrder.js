// <auto-generated/>
// Contents of: hl7.fhir.r2.core version: 1.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: DiagnosticOrder
import * as fhir from '../fhir.js';
// @ts-ignore
import { DiagnosticOrderStatusVsValidation } from '../fhirValueSets/DiagnosticOrderStatusVsValidation.js';
// @ts-ignore
import { DiagnosticOrderPriorityVsValidation } from '../fhirValueSets/DiagnosticOrderPriorityVsValidation.js';
/**
 * A summary of the events of interest that have occurred as the request is processed; e.g. when the order was made, various processing steps (specimens received), when it was completed.
 */
export class DiagnosticOrderEvent extends fhir.BackboneElement {
    /**
     * Default constructor for DiagnosticOrderEvent - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['description']) {
            this.description = new fhir.CodeableConcept(source.description);
        }
        if (source['dateTime']) {
            this.dateTime = new fhir.FhirDateTime({ value: source.dateTime });
        }
        else {
            this.dateTime = null;
        }
        if (source['_dateTime']) {
            if (this.dateTime) {
                this.dateTime.addExtendedProperties(source._dateTime);
            }
            else {
                this.dateTime = new fhir.FhirDateTime(source._dateTime);
            }
        }
        if (source['actor']) {
            this.actor = new fhir.Reference(source.actor);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'DiagnosticOrder.event';
        }
        this.vRSV('status', exp, 'DiagnosticOrderStatus', DiagnosticOrderStatusVsValidation, 'r');
        this.vOS('description', exp);
        this.vRS('dateTime', exp);
        this.vOS('actor', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DiagnosticOrderEvent._fts_dataType = 'DiagnosticOrderEvent';
/**
 * The specific diagnostic investigations that are requested as part of this request. Sometimes, there can only be one item per request, but in most contexts, more than one investigation can be requested.
 */
export class DiagnosticOrderItem extends fhir.BackboneElement {
    /**
     * Default constructor for DiagnosticOrderItem - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        else {
            this.code = null;
        }
        if (source['specimen']) {
            this.specimen = source.specimen.map((x) => new fhir.Reference(x));
        }
        else {
            this.specimen = [];
        }
        if (source['bodySite']) {
            this.bodySite = new fhir.CodeableConcept(source.bodySite);
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['event']) {
            this.event = source.event.map((x) => new fhir.DiagnosticOrderEvent(x));
        }
        else {
            this.event = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'DiagnosticOrder.item';
        }
        this.vRS('code', exp);
        this.vOA('specimen', exp);
        this.vOS('bodySite', exp);
        this.vOSV('status', exp, 'DiagnosticOrderStatus', DiagnosticOrderStatusVsValidation, 'r');
        this.vOA('event', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DiagnosticOrderItem._fts_dataType = 'DiagnosticOrderItem';
/**
 * A record of a request for a diagnostic investigation service to be performed.
 */
export class DiagnosticOrder extends fhir.DomainResource {
    /**
     * Default constructor for DiagnosticOrder - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'DiagnosticOrder';
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject);
        }
        else {
            this.subject = null;
        }
        if (source['orderer']) {
            this.orderer = new fhir.Reference(source.orderer);
        }
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['encounter']) {
            this.encounter = new fhir.Reference(source.encounter);
        }
        if (source['reason']) {
            this.reason = source.reason.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.reason = [];
        }
        if (source['supportingInformation']) {
            this.supportingInformation = source.supportingInformation.map((x) => new fhir.Reference(x));
        }
        else {
            this.supportingInformation = [];
        }
        if (source['specimen']) {
            this.specimen = source.specimen.map((x) => new fhir.Reference(x));
        }
        else {
            this.specimen = [];
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['priority']) {
            this.priority = new fhir.FhirCode({ value: source.priority });
        }
        if (source['_priority']) {
            if (this.priority) {
                this.priority.addExtendedProperties(source._priority);
            }
            else {
                this.priority = new fhir.FhirCode(source._priority);
            }
        }
        if (source['event']) {
            this.event = source.event.map((x) => new fhir.DiagnosticOrderEvent(x));
        }
        else {
            this.event = [];
        }
        if (source['item']) {
            this.item = source.item.map((x) => new fhir.DiagnosticOrderItem(x));
        }
        else {
            this.item = [];
        }
        if (source['note']) {
            this.note = source.note.map((x) => new fhir.Annotation(x));
        }
        else {
            this.note = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'DiagnosticOrder';
        }
        this.vRS('resourceType', exp);
        this.vRS('subject', exp);
        this.vOS('orderer', exp);
        this.vOA('identifier', exp);
        this.vOS('encounter', exp);
        this.vOA('reason', exp);
        this.vOA('supportingInformation', exp);
        this.vOA('specimen', exp);
        this.vOSV('status', exp, 'DiagnosticOrderStatus', DiagnosticOrderStatusVsValidation, 'r');
        this.vOSV('priority', exp, 'DiagnosticOrderPriority', DiagnosticOrderPriorityVsValidation, 'r');
        this.vOA('event', exp);
        this.vOA('item', exp);
        this.vOA('note', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DiagnosticOrder._fts_dataType = 'DiagnosticOrder';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGlhZ25vc3RpY09yZGVyLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9EaWFnbm9zdGljT3JkZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsaUNBQWlDO0FBRWpDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBSW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsaUNBQWlDLEVBQUUsTUFBTSx1REFBdUQsQ0FBQztBQUcxRyxhQUFhO0FBQ2IsT0FBTyxFQUFFLG1DQUFtQyxFQUFFLE1BQU0seURBQXlELENBQUM7QUErQjlHOztHQUVHO0FBQ0gsTUFBTSxPQUFPLG9CQUFxQixTQUFRLElBQUksQ0FBQyxlQUFlO0lBcUI1RDs7T0FFRztJQUNILFlBQVksU0FBMkMsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDakcsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFnQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsTUFBTSxFQUFDLENBQUMsQ0FBQztTQUFFO2FBQzVHO1lBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7U0FBRTtRQUM1QixJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUNyQixJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7Z0JBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsT0FBUSxDQUFDLENBQUM7YUFBRTtpQkFDbkU7Z0JBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQWdDLE1BQU0sQ0FBQyxPQUFpQyxDQUFDLENBQUM7YUFBRTtTQUNuSDtRQUNELElBQUksTUFBTSxDQUFD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QUMsaUNBQWlDLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDckYsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUMsR0FBRyxFQUFDLHlCQUF5QixFQUFDLG1DQUFtQyxFQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQzNGLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ3JCLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ3BCLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ3BCLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBL0dEOztHQUVHO0FBQzZCLDZCQUFhLEdBQVUsaUJBQWlCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjIuY29yZSB2ZXJzaW9uOiAxLjAuMlxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IERpYWdub3N0aWNPcmRlclxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRGlhZ25vc3RpY09yZGVyU3RhdHVzQ29kZXMsICBEaWFnbm9zdGljT3JkZXJTdGF0dXNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRGlhZ25vc3RpY09yZGVyU3RhdHVzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IERpYWdub3N0aWNPcmRlclN0YXR1c1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRGlhZ25vc3RpY09yZGVyU3RhdHVzVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEaWFnbm9zdGljT3JkZXJQcmlvcml0eUNvZGVzLCAgRGlhZ25vc3RpY09yZGVyUHJpb3JpdHlDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRGlhZ25vc3RpY09yZGVyUHJpb3JpdHlDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgRGlhZ25vc3RpY09yZGVyUHJpb3JpdHlWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0RpYWdub3N0aWNPcmRlclByaW9yaXR5VnNWYWxpZGF0aW9uLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIERpYWdub3N0aWNPcmRlckV2ZW50IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIERpYWdub3N0aWNPcmRlckV2ZW50QXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIHN0YXR1cyBmb3IgdGhlIGV2ZW50LlxyXG4gICAqL1xyXG4gIHN0YXR1czogZmhpci5GaGlyQ29kZTxEaWFnbm9zdGljT3JkZXJTdGF0dXNDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogRGlhZ25vc3RpY09yZGVyLmV2ZW50LnN0YXR1c1xyXG4gICAqL1xyXG4gIF9zdGF0dXM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEFkZGl0aW9uYWwgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGV2ZW50IHRoYXQgb2NjdXJyZWQgLSBlLmcuIGlmIHRoZSBzdGF0dXMgcmVtYWluZWQgdW5jaGFuZ2VkLlxyXG4gICAqL1xyXG4gIGRlc2NyaXB0aW9uPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZS90aW1lIGF0IHdoaWNoIHRoZSBldmVudCBvY2N1cnJlZC5cclxuICAgKi9cclxuICBkYXRlVGltZTogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogRGlhZ25vc3RpY09yZGVyLmV2ZW50LmRhdGVUaW1lXHJcbiAgICovXHJcbiAgX2RhdGVUaW1lPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgcGVyc29uIHJlc3BvbnNpYmxlIGZvciBwZXJmb3JtaW5nIG9yIHJlY29yZGluZyB0aGUgYWN0aW9uLlxyXG4gICAqL1xyXG4gIGFjdG9yPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgc3VtbWFyeSBvZiB0aGUgZXZlbnRzIG9mIGludGVyZXN0IHRoYXQgaGF2ZSBvY2N1cnJlZCBhcyB0aGUgcmVxdWVzdCBpcyBwcm9jZXNzZWQ7IGUuZy4gd2hlbiB0aGUgb3JkZXIgd2FzIG1hZGUsIHZhcmlvdXMgcHJvY2Vzc2luZyBzdGVwcyAoc3BlY2ltZW5zIHJlY2VpdmVkKSwgd2hlbiBpdCB3YXMgY29tcGxldGVkLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIERpYWdub3N0aWNPcmRlckV2ZW50IGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnRGlhZ25vc3RpY09yZGVyRXZlbnQnO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzdGF0dXMgZm9yIHRoZSBldmVudC5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPERpYWdub3N0aWNPcmRlclN0YXR1c0NvZGVUeXBlPnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEFkZGl0aW9uYWwgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGV2ZW50IHRoYXQgb2NjdXJyZWQgLSBlLmcuIGlmIHRoZSBzdGF0dXMgcmVtYWluZWQgdW5jaGFuZ2VkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZXNjcmlwdGlvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZS90aW1lIGF0IHdoaWNoIHRoZSBldmVudCBvY2N1cnJlZC5cclxuICAgKi9cclxuICBwdWJsaWMgZGF0ZVRpbWU6IGZoaXIuRmhpckRhdGVUaW1lfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBlcnNvbiByZXNwb25zaWJsZSBmb3IgcGVyZm9ybWluZyBvciByZWNvcmRpbmcgdGhlIGFjdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgYWN0b3I/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgRGlhZ25vc3RpY09yZGVyRXZlbnQgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxEaWFnbm9zdGljT3JkZXJFdmVudEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydzdGF0dXMnXSkgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPERpYWdub3N0aWNPcmRlclN0YXR1c0NvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5zdGF0dXN9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3N0YXR1cyddKSB7XHJcbiAgICAgIGlmICh0aGlzLnN0YXR1cykgeyB0aGlzLnN0YXR1cy5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zdGF0dXMhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxEaWFnbm9zdGljT3JkZXJTdGF0dXNDb2RlVHlwZT4oc291cmNlLl9zdGF0dXMgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2Rlc2NyaXB0aW9uJ10pIHsgdGhpcy5kZXNjcmlwdGlvbiA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuZGVzY3JpcHRpb24pOyB9XHJcbiAgICBpZiAoc291cmNlWydkYXRlVGltZSddKSB7IHRoaXMuZGF0ZVRpbWUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2UuZGF0ZVRpbWV9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZGF0ZVRpbWUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfZGF0ZVRpbWUnXSkge1xyXG4gICAgICBpZiAodGhpcy5kYXRlVGltZSkgeyB0aGlzLmRhdGVUaW1lLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2RhdGVUaW1lISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZGF0ZVRpbWUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoc291cmNlLl9kYXRlVGltZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckRhdGVUaW1lQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydhY3RvciddKSB7IHRoaXMuYWN0b3IgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmFjdG9yKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0RpYWdub3N0aWNPcmRlci5ldmVudCcgfVxyXG4gICAgdGhpcy52UlNWKCdzdGF0dXMnLGV4cCwnRGlhZ25vc3RpY09yZGVyU3RhdHVzJyxEaWFnbm9zdGljT3JkZXJTdGF0dXNWc1ZhbGlkYXRpb24sJ3InKVxyXG4gICAgdGhpcy52T1MoJ2Rlc2NyaXB0aW9uJyxleHApXHJcbiAgICB0aGlzLnZSUygnZGF0ZVRpbWUnLGV4cClcclxuICAgIHRoaXMudk9TKCdhY3RvcicsZXhwKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIERpYWdub3N0aWNPcmRlckl0ZW0gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgRGlhZ25vc3RpY09yZGVySXRlbUFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEEgY29kZSB0aGF0IGlkZW50aWZpZXMgYSBwYXJ0aWN1bGFyIGRpYWdub3N0aWMgaW52ZXN0aWdhdGlvbiwgb3IgcGFuZWwgb2YgaW52ZXN0aWdhdGlvbnMsIHRoYXQgaGF2ZSBiZWVuIHJlcXVlc3RlZC5cclxuICAgKi9cclxuICBjb2RlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBJZiB0aGUgaXRlbSBpcyByZWxhdGVkIHRvIGEgc3BlY2lmaWMgc3BlY2ltZW4uXHJcbiAgICovXHJcbiAgc3BlY2ltZW4/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQW5hdG9taWNhbCBsb2NhdGlvbiB3aGVyZSB0aGUgcmVxdWVzdCB0ZXN0IHNob3VsZCBiZSBwZXJmb3JtZWQuICBUaGlzIGlzIHRoZSB0YXJnZXQgc2l0ZS5cclxuICAgKi9cclxuICBib2R5U2l0ZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHN0YXR1cyBvZiB0aGlzIGluZGl2aWR1YWwgaXRlbSB3aXRoaW4gdGhlIG9yZGVyLlxyXG4gICAqL1xyXG4gIHN0YXR1cz86IGZoaXIuRmhpckNvZGU8RGlhZ25vc3RpY09yZGVyU3RhdHVzQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IERpYWdub3N0aWNPcmRlci5pdGVtLnN0YXR1c1xyXG4gICAqL1xyXG4gIF9zdGF0dXM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEEgc3VtbWFyeSBvZiB0aGUgZXZlbnRzIG9mIGludGVyZXN0IHRoYXQgaGF2ZSBvY2N1cnJlZCBhcyB0aGlzIGl0ZW0gb2YgdGhlIHJlcXVlc3QgaXMgcHJvY2Vzc2VkLlxyXG4gICAqL1xyXG4gIGV2ZW50PzogZmhpci5EaWFnbm9zdGljT3JkZXJFdmVudEFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgc3BlY2lmaWMgZGlhZ25vc3RpYyBpbnZlc3RpZ2F0aW9ucyB0aGF0IGFyZSByZXF1ZXN0ZWQgYXMgcGFydCBvZiB0aGlzIHJlcXVlc3QuIFNvbWV0aW1lcywgdGhlcmUgY2FuIG9ubHkgYmUgb25lIGl0ZW0gcGVyIHJlcXVlc3QsIGJ1dCBpbiBtb3N0IGNvbnRleHRzLCBtb3JlIHRoYW4gb25lIGludmVzdGlnYXRpb24gY2FuIGJlIHJlcXVlc3RlZC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBEaWFnbm9zdGljT3JkZXJJdGVtIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnRGlhZ25vc3RpY09yZGVySXRlbSc7XHJcbiAgLyoqXHJcbiAgICogQSBjb2RlIHRoYXQgaWRlbnRpZmllcyBhIHBhcnRpY3VsYXIgZGlhZ25vc3RpYyBpbnZlc3RpZ2F0aW9uLCBvciBwYW5lbCBvZiBpbnZlc3RpZ2F0aW9ucywgdGhhdCBoYXZlIGJlZW4gcmVxdWVzdGVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb2RlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIElmIHRoZSBpdGVtIGlzIHJlbGF0ZWQgdG8gYSBzcGVjaWZpYyBzcGVjaW1lbi5cclxuICAgKi9cclxuICBwdWJsaWMgc3BlY2ltZW46IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogQW5hdG9taWNhbCBsb2NhdGlvbiB3aGVyZSB0aGUgcmVxdWVzdCB0ZXN0IHNob3VsZCBiZSBwZXJmb3JtZWQuICBUaGlzIGlzIHRoZSB0YXJnZXQgc2l0ZS5cclxuICAgKi9cclxuICBwdWJsaWMgYm9keVNpdGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHN0YXR1cyBvZiB0aGlzIGluZGl2aWR1YWwgaXRlbSB3aXRoaW4gdGhlIG9yZGVyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0dXM/OiBmaGlyLkZoaXJDb2RlPERpYWdub3N0aWNPcmRlclN0YXR1c0NvZGVUeXBlPnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBzdW1tYXJ5IG9mIHRoZSBldmVudHMgb2YgaW50ZXJlc3QgdGhhdCBoYXZlIG9jY3VycmVkIGFzIHRoaXMgaXRlbSBvZiB0aGUgcmVxdWVzdCBpcyBwcm9jZXNzZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGV2ZW50OiBmaGlyLkRpYWdub3N0aWNPcmRlckV2ZW50W107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgRGlhZ25vc3RpY09yZGVySXRlbSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPERpYWdub3N0aWNPcmRlckl0ZW1BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY29kZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvZGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydzcGVjaW1lbiddKSB7IHRoaXMuc3BlY2ltZW4gPSBzb3VyY2Uuc3BlY2ltZW4ubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zcGVjaW1lbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydib2R5U2l0ZSddKSB7IHRoaXMuYm9keVNpdGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmJvZHlTaXRlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RhdHVzJ10pIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxEaWFnbm9zdGljT3JkZXJTdGF0dXNDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2Uuc3RhdHVzfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zdGF0dXMnXSkge1xyXG4gICAgICBpZiAodGhpcy5zdGF0dXMpIHsgdGhpcy5zdGF0dXMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc3RhdHVzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8RGlhZ25vc3RpY09yZGVyU3RhdHVzQ29kZVR5cGU+KHNvdXJjZS5fc3RhdHVzIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydldmVudCddKSB7IHRoaXMuZXZlbnQgPSBzb3VyY2UuZXZlbnQubWFwKCh4KSA9PiBuZXcgZmhpci5EaWFnbm9zdGljT3JkZXJFdmVudCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmV2ZW50ID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdEaWFnbm9zdGljT3JkZXIuaXRlbScgfVxyXG4gICAgdGhpcy52UlMoJ2NvZGUnLGV4cClcclxuICAgIHRoaXMudk9BKCdzcGVjaW1lbicsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2JvZHlTaXRlJyxleHApXHJcbiAgICB0aGlzLnZPU1YoJ3N0YXR1cycsZXhwLCdEaWFnbm9zdGljT3JkZXJTdGF0dXMnLERpYWdub3N0aWNPcmRlclN0YXR1c1ZzVmFsaWRhdGlvbiwncicpXHJcbiAgICB0aGlzLnZPQSgnZXZlbnQnLGV4cClcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBEaWFnbm9zdGljT3JkZXIgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgRGlhZ25vc3RpY09yZGVyQXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiRGlhZ25vc3RpY09yZGVyXCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFdobyBvciB3aGF0IHRoZSBpbnZlc3RpZ2F0aW9uIGlzIHRvIGJlIHBlcmZvcm1lZCBvbi4gVGhpcyBpcyB1c3VhbGx5IGEgaHVtYW4gcGF0aWVudCwgYnV0IGRpYWdub3N0aWMgdGVzdHMgY2FuIGFsc28gYmUgcmVxdWVzdGVkIG9uIGFuaW1hbHMsIGdyb3VwcyBvZiBodW1hbnMgb3IgYW5pbWFscywgZGV2aWNlcyBzdWNoIGFzIGRpYWx5c2lzIG1hY2hpbmVzLCBvciBldmVuIGxvY2F0aW9ucyAodHlwaWNhbGx5IGZvciBlbnZpcm9ubWVudGFsIHNjYW5zKS5cclxuICAgKi9cclxuICBzdWJqZWN0OiBmaGlyLlJlZmVyZW5jZUFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgcHJhY3RpdGlvbmVyIHRoYXQgaG9sZHMgbGVnYWwgcmVzcG9uc2liaWxpdHkgZm9yIG9yZGVyaW5nIHRoZSBpbnZlc3RpZ2F0aW9uLlxyXG4gICAqL1xyXG4gIG9yZGVyZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXJzIGFzc2lnbmVkIHRvIHRoaXMgb3JkZXIgaW5zdGFuY2UgYnkgdGhlIG9yZGVyZXIgYW5kL29yICB0aGUgcmVjZWl2ZXIgYW5kL29yIG9yZGVyIGZ1bGZpbGxlci5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBbiBlbmNvdW50ZXIgdGhhdCBwcm92aWRlcyBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIGFib3V0IHRoZSBoZWFsdGhjYXJlIGNvbnRleHQgaW4gd2hpY2ggdGhpcyByZXF1ZXN0IGlzIG1hZGUuXHJcbiAgICovXHJcbiAgZW5jb3VudGVyPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBbiBleHBsYW5hdGlvbiBvciBqdXN0aWZpY2F0aW9uIGZvciB3aHkgdGhpcyBkaWFnbm9zdGljIGludmVzdGlnYXRpb24gaXMgYmVpbmcgcmVxdWVzdGVkLiAgIFRoaXMgaXMgb2Z0ZW4gZm9yIGJpbGxpbmcgcHVycG9zZXMuICBNYXkgcmVsYXRlIHRvIHRoZSByZXNvdXJjZXMgcmVmZXJyZWQgdG8gaW4gc3VwcG9ydGluZ0luZm9ybWF0aW9uLlxyXG4gICAqL1xyXG4gIHJlYXNvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBZGRpdGlvbmFsIGNsaW5pY2FsIGluZm9ybWF0aW9uIGFib3V0IHRoZSBwYXRpZW50IG9yIHNwZWNpbWVuIHRoYXQgbWF5IGluZmx1ZW5jZSB0ZXN0IGludGVycHJldGF0aW9ucy4gIFRoaXMgaW5jbHVkZXMgb2JzZXJ2YXRpb25zIGV4cGxpY2l0bHkgcmVxdWVzdGVkIGJ5IHRoZSBwcm9kdWNlcihmaWxsZXIpIHRvIHByb3ZpZGUgY29udGV4dCBvciBzdXBwb3J0aW5nIGluZm9ybWF0aW9uIG5lZWRlZCB0byBjb21wbGV0ZSB0aGUgb3JkZXIuXHJcbiAgICovXHJcbiAgc3VwcG9ydGluZ0luZm9ybWF0aW9uPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE9uZSBvciBtb3JlIHNwZWNpbWVucyB0aGF0IHRoZSBkaWFnbm9zdGljIGludmVzdGlnYXRpb24gaXMgYWJvdXQuXHJcbiAgICovXHJcbiAgc3BlY2ltZW4/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHN0YXR1cyBvZiB0aGUgb3JkZXIuXHJcbiAgICovXHJcbiAgc3RhdHVzPzogZmhpci5GaGlyQ29kZTxEaWFnbm9zdGljT3JkZXJTdGF0dXNDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogRGlhZ25vc3RpY09yZGVyLnN0YXR1c1xyXG4gICAqL1xyXG4gIF9zdGF0dXM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjbGluaWNhbCBwcmlvcml0eSBhc3NvY2lhdGVkIHdpdGggdGhpcyBvcmRlci5cclxuICAgKi9cclxuICBwcmlvcml0eT86IGZoaXIuRmhpckNvZGU8RGlhZ25vc3RpY09yZGVyUHJpb3JpdHlDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogRGlhZ25vc3RpY09yZGVyLnByaW9yaXR5XHJcbiAgICovXHJcbiAgX3ByaW9yaXR5PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBBIHN1bW1hcnkgb2YgdGhlIGV2ZW50cyBvZiBpbnRlcmVzdCB0aGF0IGhhdmUgb2NjdXJyZWQgYXMgdGhlIHJlcXVlc3QgaXMgcHJvY2Vzc2VkOyBlLmcuIHdoZW4gdGhlIG9yZGVyIHdhcyBtYWRlLCB2YXJpb3VzIHByb2Nlc3Npbmcgc3RlcHMgKHNwZWNpbWVucyByZWNlaXZlZCksIHdoZW4gaXQgd2FzIGNvbXBsZXRlZC5cclxuICAgKi9cclxuICBldmVudD86IGZoaXIuRGlhZ25vc3RpY09yZGVyRXZlbnRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzcGVjaWZpYyBkaWFnbm9zdGljIGludmVzdGlnYXRpb25zIHRoYXQgYXJlIHJlcXVlc3RlZCBhcyBwYXJ0IG9mIHRoaXMgcmVxdWVzdC4gU29tZXRpbWVzLCB0aGVyZSBjYW4gb25seSBiZSBvbmUgaXRlbSBwZXIgcmVxdWVzdCwgYnV0IGluIG1vc3QgY29udGV4dHMsIG1vcmUgdGhhbiBvbmUgaW52ZXN0aWdhdGlvbiBjYW4gYmUgcmVxdWVzdGVkLlxyXG4gICAqL1xyXG4gIGl0ZW0/OiBmaGlyLkRpYWdub3N0aWNPcmRlckl0ZW1BcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFueSBvdGhlciBub3RlcyBhc3NvY2lhdGVkIHdpdGggdGhpcyBwYXRpZW50LCBzcGVjaW1lbiBvciBvcmRlciAoZS5nLiBcInBhdGllbnQgaGF0ZXMgbmVlZGxlc1wiKS5cclxuICAgKi9cclxuICBub3RlPzogZmhpci5Bbm5vdGF0aW9uQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgcmVjb3JkIG9mIGEgcmVxdWVzdCBmb3IgYSBkaWFnbm9zdGljIGludmVzdGlnYXRpb24gc2VydmljZSB0byBiZSBwZXJmb3JtZWQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRGlhZ25vc3RpY09yZGVyIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdEaWFnbm9zdGljT3JkZXInO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNvdXJjZVR5cGU6IFwiRGlhZ25vc3RpY09yZGVyXCI7XHJcbiAgLyoqXHJcbiAgICogV2hvIG9yIHdoYXQgdGhlIGludmVzdGlnYXRpb24gaXMgdG8gYmUgcGVyZm9ybWVkIG9uLiBUaGlzIGlzIHVzdWFsbHkgYSBodW1hbiBwYXRpZW50LCBidXQgZGlhZ25vc3RpYyB0ZXN0cyBjYW4gYWxzbyBiZSByZXF1ZXN0ZWQgb24gYW5pbWFscywgZ3JvdXBzIG9mIGh1bWFucyBvciBhbmltYWxzLCBkZXZpY2VzIHN1Y2ggYXMgZGlhbHlzaXMgbWFjaGluZXMsIG9yIGV2ZW4gbG9jYXRpb25zICh0eXBpY2FsbHkgZm9yIGVudmlyb25tZW50YWwgc2NhbnMpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdWJqZWN0OiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwcmFjdGl0aW9uZXIgdGhhdCBob2xkcyBsZWdhbCByZXNwb25zaWJpbGl0eSBmb3Igb3JkZXJpbmcgdGhlIGludmVzdGlnYXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIG9yZGVyZXI/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcnMgYXNzaWduZWQgdG8gdGhpcyBvcmRlciBpbnN0YW5jZSBieSB0aGUgb3JkZXJlciBhbmQvb3IgIHRoZSByZWNlaXZlciBhbmQvb3Igb3JkZXIgZnVsZmlsbGVyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyOiBmaGlyLklkZW50aWZpZXJbXTtcclxuICAvKipcclxuICAgKiBBbiBlbmNvdW50ZXIgdGhhdCBwcm92aWRlcyBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIGFib3V0IHRoZSBoZWFsdGhjYXJlIGNvbnRleHQgaW4gd2hpY2ggdGhpcyByZXF1ZXN0IGlzIG1hZGUuXHJcbiAgICovXHJcbiAgcHVibGljIGVuY291bnRlcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBbiBleHBsYW5hdGlvbiBvciBqdXN0aWZpY2F0aW9uIGZvciB3aHkgdGhpcyBkaWFnbm9zdGljIGludmVzdGlnYXRpb24gaXMgYmVpbmcgcmVxdWVzdGVkLiAgIFRoaXMgaXMgb2Z0ZW4gZm9yIGJpbGxpbmcgcHVycG9zZXMuICBNYXkgcmVsYXRlIHRvIHRoZSByZXNvdXJjZXMgcmVmZXJyZWQgdG8gaW4gc3VwcG9ydGluZ0luZm9ybWF0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWFzb246IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogQWRkaXRpb25hbCBjbGluaWNhbCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgcGF0aWVudCBvciBzcGVjaW1lbiB0aGF0IG1heSBpbmZsdWVuY2UgdGVzdCBpbnRlcnByZXRhdGlvbnMuICBUaGlzIGluY2x1ZGVzIG9ic2VydmF0aW9ucyBleHBsaWNpdGx5IHJlcXVlc3RlZCBieSB0aGUgcHJvZHVjZXIoZmlsbGVyKSB0byBwcm92aWRlIGNvbnRleHQgb3Igc3VwcG9ydGluZyBpbmZvcm1hdGlvbiBuZWVkZWQgdG8gY29tcGxldGUgdGhlIG9yZGVyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdXBwb3J0aW5nSW5mb3JtYXRpb246IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogT25lIG9yIG1vcmUgc3BlY2ltZW5zIHRoYXQgdGhlIGRpYWdub3N0aWMgaW52ZXN0aWdhdGlvbiBpcyBhYm91dC5cclxuICAgKi9cclxuICBwdWJsaWMgc3BlY2ltZW46IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogVGhlIHN0YXR1cyBvZiB0aGUgb3JkZXIuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1cz86IGZoaXIuRmhpckNvZGU8RGlhZ25vc3RpY09yZGVyU3RhdHVzQ29kZVR5cGU+fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgY2xpbmljYWwgcHJpb3JpdHkgYXNzb2NpYXRlZCB3aXRoIHRoaXMgb3JkZXIuXHJcbiAgICovXHJcbiAgcHVibGljIHByaW9yaXR5PzogZmhpci5GaGlyQ29kZTxEaWFnbm9zdGljT3JkZXJQcmlvcml0eUNvZGVUeXBlPnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBzdW1tYXJ5IG9mIHRoZSBldmVudHMgb2YgaW50ZXJlc3QgdGhhdCBoYXZlIG9jY3VycmVkIGFzIHRoZSByZXF1ZXN0IGlzIHByb2Nlc3NlZDsgZS5nLiB3aGVuIHRoZSBvcmRlciB3YXMgbWFkZSwgdmFyaW91cyBwcm9jZXNzaW5nIHN0ZXBzIChzcGVjaW1lbnMgcmVjZWl2ZWQpLCB3aGVuIGl0IHdhcyBjb21wbGV0ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGV2ZW50OiBmaGlyLkRpYWdub3N0aWNPcmRlckV2ZW50W107XHJcbiAgLyoqXHJcbiAgICogVGhlIHNwZWNpZmljIGRpYWdub3N0aWMgaW52ZXN0aWdhdGlvbnMgdGhhdCBhcmUgcmVxdWVzdGVkIGFzIHBhcnQgb2YgdGhpcyByZXF1ZXN0LiBTb21ldGltZXMsIHRoZXJlIGNhbiBvbmx5IGJlIG9uZSBpdGVtIHBlciByZXF1ZXN0LCBidXQgaW4gbW9zdCBjb250ZXh0cywgbW9yZSB0aGFuIG9uZSBpbnZlc3RpZ2F0aW9uIGNhbiBiZSByZXF1ZXN0ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGl0ZW06IGZoaXIuRGlhZ25vc3RpY09yZGVySXRlbVtdO1xyXG4gIC8qKlxyXG4gICAqIEFueSBvdGhlciBub3RlcyBhc3NvY2lhdGVkIHdpdGggdGhpcyBwYXRpZW50LCBzcGVjaW1lbiBvciBvcmRlciAoZS5nLiBcInBhdGllbnQgaGF0ZXMgbmVlZGxlc1wiKS5cclxuICAgKi9cclxuICBwdWJsaWMgbm90ZTogZmhpci5Bbm5vdGF0aW9uW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgRGlhZ25vc3RpY09yZGVyIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8RGlhZ25vc3RpY09yZGVyQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ0RpYWdub3N0aWNPcmRlcic7XHJcbiAgICBpZiAoc291cmNlWydzdWJqZWN0J10pIHsgdGhpcy5zdWJqZWN0ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5zdWJqZWN0KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3ViamVjdCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ29yZGVyZXInXSkgeyB0aGlzLm9yZGVyZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLm9yZGVyZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWydpZGVudGlmaWVyJ10pIHsgdGhpcy5pZGVudGlmaWVyID0gc291cmNlLmlkZW50aWZpZXIubWFwKCh4KSA9PiBuZXcgZmhpci5JZGVudGlmaWVyKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaWRlbnRpZmllciA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydlbmNvdW50ZXInXSkgeyB0aGlzLmVuY291bnRlciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuZW5jb3VudGVyKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVhc29uJ10pIHsgdGhpcy5yZWFzb24gPSBzb3VyY2UucmVhc29uLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVhc29uID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3N1cHBvcnRpbmdJbmZvcm1hdGlvbiddKSB7IHRoaXMuc3VwcG9ydGluZ0luZm9ybWF0aW9uID0gc291cmNlLnN1cHBvcnRpbmdJbmZvcm1hdGlvbi5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN1cHBvcnRpbmdJbmZvcm1hdGlvbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydzcGVjaW1lbiddKSB7IHRoaXMuc3BlY2ltZW4gPSBzb3VyY2Uuc3BlY2ltZW4ubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zcGVjaW1lbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydzdGF0dXMnXSkgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPERpYWdub3N0aWNPcmRlclN0YXR1c0NvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5zdGF0dXN9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3N0YXR1cyddKSB7XHJcbiAgICAgIGlmICh0aGlzLnN0YXR1cykgeyB0aGlzLnN0YXR1cy5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zdGF0dXMhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxEaWFnbm9zdGljT3JkZXJTdGF0dXNDb2RlVHlwZT4oc291cmNlLl9zdGF0dXMgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3ByaW9yaXR5J10pIHsgdGhpcy5wcmlvcml0eSA9IG5ldyBmaGlyLkZoaXJDb2RlPERpYWdub3N0aWNPcmRlclByaW9yaXR5Q29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnByaW9yaXR5fSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19wcmlvcml0eSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnByaW9yaXR5KSB7IHRoaXMucHJpb3JpdHkuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fcHJpb3JpdHkhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5wcmlvcml0eSA9IG5ldyBmaGlyLkZoaXJDb2RlPERpYWdub3N0aWNPcmRlclByaW9yaXR5Q29kZVR5cGU+KHNvdXJjZS5fcHJpb3JpdHkgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2V2ZW50J10pIHsgdGhpcy5ldmVudCA9IHNvdXJjZS5ldmVudC5tYXAoKHgpID0+IG5ldyBmaGlyLkRpYWdub3N0aWNPcmRlckV2ZW50KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZXZlbnQgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaXRlbSddKSB7IHRoaXMuaXRlbSA9IHNvdXJjZS5pdGVtLm1hcCgoeCkgPT4gbmV3IGZoaXIuRGlhZ25vc3RpY09yZGVySXRlbSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLml0ZW0gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbm90ZSddKSB7IHRoaXMubm90ZSA9IHNvdXJjZS5ub3RlLm1hcCgoeCkgPT4gbmV3IGZoaXIuQW5ub3RhdGlvbih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm5vdGUgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0RpYWdub3N0aWNPcmRlcicgfVxyXG4gICAgdGhpcy52UlMoJ3Jlc291cmNlVHlwZScsZXhwKVxyXG4gICAgdGhpcy52UlMoJ3N1YmplY3QnLGV4cClcclxuICAgIHRoaXMudk9TKCdvcmRlcmVyJyxleHApXHJcbiAgICB0aGlzLnZPQSgnaWRlbnRpZmllcicsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2VuY291bnRlcicsZXhwKVxyXG4gICAgdGhpcy52T0EoJ3JlYXNvbicsZXhwKVxyXG4gICAgdGhpcy52T0EoJ3N1cHBvcnRpbmdJbmZvcm1hdGlvbicsZXhwKVxyXG4gICAgdGhpcy52T0EoJ3NwZWNpbWVuJyxleHApXHJcbiAgICB0aGlzLnZPU1YoJ3N0YXR1cycsZXhwLCdEaWFnbm9zdGljT3JkZXJTdGF0dXMnLERpYWdub3N0aWNPcmRlclN0YXR1c1ZzVmFsaWRhdGlvbiwncicpXHJcbiAgICB0aGlzLnZPU1YoJ3ByaW9yaXR5JyxleHAsJ0RpYWdub3N0aWNPcmRlclByaW9yaXR5JyxEaWFnbm9zdGljT3JkZXJQcmlvcml0eVZzVmFsaWRhdGlvbiwncicpXHJcbiAgICB0aGlzLnZPQSgnZXZlbnQnLGV4cClcclxuICAgIHRoaXMudk9BKCdpdGVtJyxleHApXHJcbiAgICB0aGlzLnZPQSgnbm90ZScsZXhwKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuIl19