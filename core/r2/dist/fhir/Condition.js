// <auto-generated/>
// Contents of: hl7.fhir.r2.core version: 1.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: Condition
import * as fhir from '../fhir.js';
// @ts-ignore
import { ConditionVerStatusVsValidation } from '../fhirValueSets/ConditionVerStatusVsValidation.js';
/**
 * Clinical stage or grade of a condition. May include formal severity assessments.
 */
export class ConditionStage extends fhir.BackboneElement {
    /**
     * Default constructor for ConditionStage - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['summary']) {
            this.summary = new fhir.CodeableConcept(source.summary);
        }
        if (source['assessment']) {
            this.assessment = source.assessment.map((x) => new fhir.Reference(x));
        }
        else {
            this.assessment = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Condition.stage';
        }
        iss.push(...this.vOS('summary', exp));
        iss.push(...this.vOA('assessment', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ConditionStage._fts_dataType = 'ConditionStage';
/**
 * Supporting Evidence / manifestations that are the basis on which this condition is suspected or confirmed.
 */
export class ConditionEvidence extends fhir.BackboneElement {
    /**
     * Default constructor for ConditionEvidence - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        if (source['detail']) {
            this.detail = source.detail.map((x) => new fhir.Reference(x));
        }
        else {
            this.detail = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Condition.evidence';
        }
        iss.push(...this.vOS('code', exp));
        iss.push(...this.vOA('detail', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ConditionEvidence._fts_dataType = 'ConditionEvidence';
/**
 * Use to record detailed information about conditions, problems or diagnoses recognized by a clinician. There are many uses including: recording a diagnosis during an encounter; populating a problem list or a summary statement, such as a discharge summary.
 */
export class Condition extends fhir.DomainResource {
    /**
     * Default constructor for Condition - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'Condition';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['patient']) {
            this.patient = new fhir.Reference(source.patient);
        }
        else {
            this.patient = null;
        }
        if (source['encounter']) {
            this.encounter = new fhir.Reference(source.encounter);
        }
        if (source['asserter']) {
            this.asserter = new fhir.Reference(source.asserter);
        }
        if (source['dateRecorded']) {
            this.dateRecorded = new fhir.FhirDate({ value: source.dateRecorded });
        }
        if (source['_dateRecorded']) {
            if (this.dateRecorded) {
                this.dateRecorded.addExtendedProperties(source._dateRecorded);
            }
            else {
                this.dateRecorded = new fhir.FhirDate(source._dateRecorded);
            }
        }
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        else {
            this.code = null;
        }
        if (source['category']) {
            this.category = new fhir.CodeableConcept(source.category);
        }
        if (source['clinicalStatus']) {
            this.clinicalStatus = new fhir.FhirCode({ value: source.clinicalStatus });
        }
        if (source['_clinicalStatus']) {
            if (this.clinicalStatus) {
                this.clinicalStatus.addExtendedProperties(source._clinicalStatus);
            }
            else {
                this.clinicalStatus = new fhir.FhirCode(source._clinicalStatus);
            }
        }
        if (source['verificationStatus']) {
            this.verificationStatus = new fhir.FhirCode({ value: source.verificationStatus });
        }
        else {
            this.verificationStatus = null;
        }
        if (source['_verificationStatus']) {
            if (this.verificationStatus) {
                this.verificationStatus.addExtendedProperties(source._verificationStatus);
            }
            else {
                this.verificationStatus = new fhir.FhirCode(source._verificationStatus);
            }
        }
        if (source['severity']) {
            this.severity = new fhir.CodeableConcept(source.severity);
        }
        if (source['onset']) {
            this.onset = source.onset;
        }
        else if (source['onsetDateTime']) {
            this.onset = new fhir.FhirDateTime({ value: source.onsetDateTime });
        }
        else if (source['onsetQuantity']) {
            this.onset = new fhir.Quantity(source.onsetQuantity);
        }
        else if (source['onsetPeriod']) {
            this.onset = new fhir.Period(source.onsetPeriod);
        }
        else if (source['onsetRange']) {
            this.onset = new fhir.Range(source.onsetRange);
        }
        else if (source['onsetString']) {
            this.onset = new fhir.FhirString({ value: source.onsetString });
        }
        if (source['abatement']) {
            this.abatement = source.abatement;
        }
        else if (source['abatementDateTime']) {
            this.abatement = new fhir.FhirDateTime({ value: source.abatementDateTime });
        }
        else if (source['abatementQuantity']) {
            this.abatement = new fhir.Quantity(source.abatementQuantity);
        }
        else if (source['abatementBoolean']) {
            this.abatement = new fhir.FhirBoolean({ value: source.abatementBoolean });
        }
        else if (source['abatementPeriod']) {
            this.abatement = new fhir.Period(source.abatementPeriod);
        }
        else if (source['abatementRange']) {
            this.abatement = new fhir.Range(source.abatementRange);
        }
        else if (source['abatementString']) {
            this.abatement = new fhir.FhirString({ value: source.abatementString });
        }
        if (source['stage']) {
            this.stage = new fhir.ConditionStage(source.stage);
        }
        if (source['evidence']) {
            this.evidence = source.evidence.map((x) => new fhir.ConditionEvidence(x));
        }
        else {
            this.evidence = [];
        }
        if (source['bodySite']) {
            this.bodySite = source.bodySite.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.bodySite = [];
        }
        if (source['notes']) {
            this.notes = new fhir.FhirString({ value: source.notes });
        }
        if (source['_notes']) {
            if (this.notes) {
                this.notes.addExtendedProperties(source._notes);
            }
            else {
                this.notes = new fhir.FhirString(source._notes);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Condition';
        }
        iss.push(...this.vRPS('resourceType', exp));
        iss.push(...this.vOA('identifier', exp));
        iss.push(...this.vRS('patient', exp));
        iss.push(...this.vOS('encounter', exp));
        iss.push(...this.vOS('asserter', exp));
        iss.push(...this.vOS('dateRecorded', exp));
        iss.push(...this.vRS('code', exp));
        iss.push(...this.vOS('category', exp));
        iss.push(...this.vOS('clinicalStatus', exp));
        iss.push(...this.vRSV('verificationStatus', exp, 'ConditionVerStatus', ConditionVerStatusVsValidation, 'r'));
        iss.push(...this.vOS('severity', exp));
        iss.push(...this.vOS('onset', exp));
        iss.push(...this.vOS('abatement', exp));
        iss.push(...this.vOS('stage', exp));
        iss.push(...this.vOA('evidence', exp));
        iss.push(...this.vOA('bodySite', exp));
        iss.push(...this.vOS('notes', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
Condition._fts_dataType = 'Condition';
/**
 * Internal flag to properly serialize choice-type element Condition.onset[x]
 */
Condition._fts_onsetIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element Condition.abatement[x]
 */
Condition._fts_abatementIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29uZGl0aW9uLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9Db25kaXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsMkJBQTJCO0FBRTNCLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBUW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsOEJBQThCLEVBQUUsTUFBTSxvREFBb0QsQ0FBQztBQWVwRzs7R0FFRztBQUNILE1BQU0sT0FBTyxjQUFlLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFhdEQ7O09BRUc7SUFDSCxZQUFZLFNBQXFDLEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQzNGLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7U0FBRTtRQUNuRixJQUFJLE1BQU0sQ0FBQyxZQUFZLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDL0Y7WUFBRSxJQUFJLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQztTQUFFO0lBQ2hDLENBQUM7SUFDRDs7T0FFRztJQUNhLGlCQUFpQixDQUFDLE1BQWEsRUFBRTtRQUMvQyxJQUFJLEdBQUcsR0FBbUIsS0FBSyxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3ZELElBQUksR0FBRyxLQUFLLEVBQUUsRUFBRTtZQUFFLEdBQUcsR0FBRyxpQkFBaUIsQ0FBQTtTQUFFO1FBQzND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Q0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ25DLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3RDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3RDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ25DLE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQzs7QUFoS0Q7O0dBRUc7QUFDNkIsdUJBQWEsR0FBVSxXQUFXLENBQUM7QUFpRG5FOztHQUVHO0FBQ3VCLDRCQUFrQixHQUFRLElBQUksQ0FBQztBQUt6RDs7R0FFRztBQUN1QixnQ0FBc0IsR0FBUSxJQUFJLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjIuY29yZSB2ZXJzaW9uOiAxLjAuMlxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IENvbmRpdGlvblxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29uZGl0aW9uQ2xpbmljYWxDb2RlcywgIENvbmRpdGlvbkNsaW5pY2FsQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NvbmRpdGlvbkNsaW5pY2FsQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbmRpdGlvbkNsaW5pY2FsVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9Db25kaXRpb25DbGluaWNhbFZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ29uZGl0aW9uVmVyU3RhdHVzQ29kZXMsICBDb25kaXRpb25WZXJTdGF0dXNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uZGl0aW9uVmVyU3RhdHVzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENvbmRpdGlvblZlclN0YXR1c1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ29uZGl0aW9uVmVyU3RhdHVzVnNWYWxpZGF0aW9uLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIENvbmRpdGlvblN0YWdlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENvbmRpdGlvblN0YWdlQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogQSBzaW1wbGUgc3VtbWFyeSBvZiB0aGUgc3RhZ2Ugc3VjaCBhcyBcIlN0YWdlIDNcIi4gVGhlIGRldGVybWluYXRpb24gb2YgdGhlIHN0YWdlIGlzIGRpc2Vhc2Utc3BlY2lmaWMuXHJcbiAgICovXHJcbiAgc3VtbWFyeT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUmVmZXJlbmNlIHRvIGEgZm9ybWFsIHJlY29yZCBvZiB0aGUgZXZpZGVuY2Ugb24gd2hpY2ggdGhlIHN0YWdpbmcgYXNzZXNzbWVudCBpcyBiYXNlZC5cclxuICAgKi9cclxuICBhc3Nlc3NtZW50PzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQ2xpbmljYWwgc3RhZ2Ugb3IgZ3JhZGUgb2YgYSBjb25kaXRpb24uIE1heSBpbmNsdWRlIGZvcm1hbCBzZXZlcml0eSBhc3Nlc3NtZW50cy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb25kaXRpb25TdGFnZSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0NvbmRpdGlvblN0YWdlJztcclxuICAvKipcclxuICAgKiBBIHNpbXBsZSBzdW1tYXJ5IG9mIHRoZSBzdGFnZSBzdWNoIGFzIFwiU3RhZ2UgM1wiLiBUaGUgZGV0ZXJtaW5hdGlvbiBvZiB0aGUgc3RhZ2UgaXMgZGlzZWFzZS1zcGVjaWZpYy5cclxuICAgKi9cclxuICBwdWJsaWMgc3VtbWFyeT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBSZWZlcmVuY2UgdG8gYSBmb3JtYWwgcmVjb3JkIG9mIHRoZSBldmlkZW5jZSBvbiB3aGljaCB0aGUgc3RhZ2luZyBhc3Nlc3NtZW50IGlzIGJhc2VkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhc3Nlc3NtZW50OiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIENvbmRpdGlvblN0YWdlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8Q29uZGl0aW9uU3RhZ2VBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnc3VtbWFyeSddKSB7IHRoaXMuc3VtbWFyeSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2Uuc3VtbWFyeSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2Fzc2Vzc21lbnQnXSkgeyB0aGlzLmFzc2Vzc21lbnQgPSBzb3VyY2UuYXNzZXNzbWVudC5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmFzc2Vzc21lbnQgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0NvbmRpdGlvbi5zdGFnZScgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3N1bW1hcnknLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2Fzc2Vzc21lbnQnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIENvbmRpdGlvbkV2aWRlbmNlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENvbmRpdGlvbkV2aWRlbmNlQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogQSBtYW5pZmVzdGF0aW9uIG9yIHN5bXB0b20gdGhhdCBsZWQgdG8gdGhlIHJlY29yZGluZyBvZiB0aGlzIGNvbmRpdGlvbi5cclxuICAgKi9cclxuICBjb2RlPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBMaW5rcyB0byBvdGhlciByZWxldmFudCBpbmZvcm1hdGlvbiwgaW5jbHVkaW5nIHBhdGhvbG9neSByZXBvcnRzLlxyXG4gICAqL1xyXG4gIGRldGFpbD86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFN1cHBvcnRpbmcgRXZpZGVuY2UgLyBtYW5pZmVzdGF0aW9ucyB0aGF0IGFyZSB0aGUgYmFzaXMgb24gd2hpY2ggdGhpcyBjb25kaXRpb24gaXMgc3VzcGVjdGVkIG9yIGNvbmZpcm1lZC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb25kaXRpb25FdmlkZW5jZSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0NvbmRpdGlvbkV2aWRlbmNlJztcclxuICAvKipcclxuICAgKiBBIG1hbmlmZXN0YXRpb24gb3Igc3ltcHRvbSB0aGF0IGxlZCB0byB0aGUgcmVjb3JkaW5nIG9mIHRoaXMgY29uZGl0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb2RlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIExpbmtzIHRvIG90aGVyIHJlbGV2YW50IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgcGF0aG9sb2d5IHJlcG9ydHMuXHJcbiAgICovXHJcbiAgcHVibGljIGRldGFpbDogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBDb25kaXRpb25FdmlkZW5jZSAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENvbmRpdGlvbkV2aWRlbmNlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2NvZGUnXSkgeyB0aGlzLmNvZGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmNvZGUpOyB9XHJcbiAgICBpZiAoc291cmNlWydkZXRhaWwnXSkgeyB0aGlzLmRldGFpbCA9IHNvdXJjZS5kZXRhaWwubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5kZXRhaWwgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0NvbmRpdGlvbi5ldmlkZW5jZScgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2NvZGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2RldGFpbCcsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQ29uZGl0aW9uIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENvbmRpdGlvbkFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIkNvbmRpdGlvblwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBOZWVkIHRvIGFsbG93IGNvbm5lY3Rpb24gdG8gYSB3aWRlciB3b3JrZmxvdy5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgdGhlIHBhdGllbnQgd2hvIHRoZSBjb25kaXRpb24gcmVjb3JkIGlzIGFzc29jaWF0ZWQgd2l0aC5cclxuICAgKi9cclxuICBwYXRpZW50OiBmaGlyLlJlZmVyZW5jZUFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBFbmNvdW50ZXIgZHVyaW5nIHdoaWNoIHRoZSBjb25kaXRpb24gd2FzIGZpcnN0IGFzc2VydGVkLlxyXG4gICAqL1xyXG4gIGVuY291bnRlcj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaXZpZHVhbCB3aG8gaXMgbWFraW5nIHRoZSBjb25kaXRpb24gc3RhdGVtZW50LlxyXG4gICAqL1xyXG4gIGFzc2VydGVyPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGRhdGUsIHdoZW4gIHRoZSBDb25kaXRpb24gc3RhdGVtZW50IHdhcyBkb2N1bWVudGVkLlxyXG4gICAqL1xyXG4gIGRhdGVSZWNvcmRlZD86IGZoaXIuRmhpckRhdGV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ29uZGl0aW9uLmRhdGVSZWNvcmRlZFxyXG4gICAqL1xyXG4gIF9kYXRlUmVjb3JkZWQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpY2F0aW9uIG9mIHRoZSBjb25kaXRpb24sIHByb2JsZW0gb3IgZGlhZ25vc2lzLlxyXG4gICAqL1xyXG4gIGNvZGU6IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIEEgY2F0ZWdvcnkgYXNzaWduZWQgdG8gdGhlIGNvbmRpdGlvbi5cclxuICAgKi9cclxuICBjYXRlZ29yeT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNsaW5pY2FsIHN0YXR1cyBvZiB0aGUgY29uZGl0aW9uLlxyXG4gICAqL1xyXG4gIGNsaW5pY2FsU3RhdHVzPzogZmhpci5GaGlyQ29kZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDb25kaXRpb24uY2xpbmljYWxTdGF0dXNcclxuICAgKi9cclxuICBfY2xpbmljYWxTdGF0dXM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB2ZXJpZmljYXRpb24gc3RhdHVzIHRvIHN1cHBvcnQgdGhlIGNsaW5pY2FsIHN0YXR1cyBvZiB0aGUgY29uZGl0aW9uLlxyXG4gICAqL1xyXG4gIHZlcmlmaWNhdGlvblN0YXR1czogZmhpci5GaGlyQ29kZTxDb25kaXRpb25WZXJTdGF0dXNDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ29uZGl0aW9uLnZlcmlmaWNhdGlvblN0YXR1c1xyXG4gICAqL1xyXG4gIF92ZXJpZmljYXRpb25TdGF0dXM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEEgc3ViamVjdGl2ZSBhc3Nlc3NtZW50IG9mIHRoZSBzZXZlcml0eSBvZiB0aGUgY29uZGl0aW9uIGFzIGV2YWx1YXRlZCBieSB0aGUgY2xpbmljaWFuLlxyXG4gICAqL1xyXG4gIHNldmVyaXR5PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFc3RpbWF0ZWQgb3IgYWN0dWFsIGRhdGUgb3IgZGF0ZS10aW1lICB0aGUgY29uZGl0aW9uIGJlZ2FuLCBpbiB0aGUgb3BpbmlvbiBvZiB0aGUgY2xpbmljaWFuLlxyXG4gICAqL1xyXG4gIG9uc2V0PzogZmhpci5GaGlyRGF0ZVRpbWV8Zmhpci5RdWFudGl0eXxmaGlyLlBlcmlvZHxmaGlyLlJhbmdlfGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXN0aW1hdGVkIG9yIGFjdHVhbCBkYXRlIG9yIGRhdGUtdGltZSAgdGhlIGNvbmRpdGlvbiBiZWdhbiwgaW4gdGhlIG9waW5pb24gb2YgdGhlIGNsaW5pY2lhbi5cclxuICAgKi9cclxuICBvbnNldERhdGVUaW1lPzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFc3RpbWF0ZWQgb3IgYWN0dWFsIGRhdGUgb3IgZGF0ZS10aW1lICB0aGUgY29uZGl0aW9uIGJlZ2FuLCBpbiB0aGUgb3BpbmlvbiBvZiB0aGUgY2xpbmljaWFuLlxyXG4gICAqL1xyXG4gIG9uc2V0UXVhbnRpdHk/OiBmaGlyLlF1YW50aXR5QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXN0aW1hdGVkIG9yIGFjdHVhbCBkYXRlIG9yIGRhdGUtdGltZSAgdGhlIGNvbmRpdGlvbiBiZWdhbiwgaW4gdGhlIG9waW5pb24gb2YgdGhlIGNsaW5pY2lhbi5cclxuICAgKi9cclxuICBvbnNldFBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXN0aW1hdGVkIG9yIGFjdHVhbCBkYXRlIG9yIGRhdGUtdGltZSAgdGhlIGNvbmRpdGlvbiBiZWdhbiwgaW4gdGhlIG9waW5pb24gb2YgdGhlIGNsaW5pY2lhbi5cclxuICAgKi9cclxuICBvbnNldFJhbmdlPzogZmhpci5SYW5nZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEVzdGltYXRlZCBvciBhY3R1YWwgZGF0ZSBvciBkYXRlLXRpbWUgIHRoZSBjb25kaXRpb24gYmVnYW4sIGluIHRoZSBvcGluaW9uIG9mIHRoZSBjbGluaWNpYW4uXHJcbiAgICovXHJcbiAgb25zZXRTdHJpbmc/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSBvciBlc3RpbWF0ZWQgZGF0ZSB0aGF0IHRoZSBjb25kaXRpb24gcmVzb2x2ZWQgb3Igd2VudCBpbnRvIHJlbWlzc2lvbi4gVGhpcyBpcyBjYWxsZWQgXCJhYmF0ZW1lbnRcIiBiZWNhdXNlIG9mIHRoZSBtYW55IG92ZXJsb2FkZWQgY29ubm90YXRpb25zIGFzc29jaWF0ZWQgd2l0aCBcInJlbWlzc2lvblwiIG9yIFwicmVzb2x1dGlvblwiIC0gQ29uZGl0aW9ucyBhcmUgbmV2ZXIgcmVhbGx5IHJlc29sdmVkLCBidXQgdGhleSBjYW4gYWJhdGUuXHJcbiAgICovXHJcbiAgYWJhdGVtZW50PzogZmhpci5GaGlyRGF0ZVRpbWV8Zmhpci5RdWFudGl0eXxmaGlyLkZoaXJCb29sZWFufGZoaXIuUGVyaW9kfGZoaXIuUmFuZ2V8Zmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSBvciBlc3RpbWF0ZWQgZGF0ZSB0aGF0IHRoZSBjb25kaXRpb24gcmVzb2x2ZWQgb3Igd2VudCBpbnRvIHJlbWlzc2lvbi4gVGhpcyBpcyBjYWxsZWQgXCJhYmF0ZW1lbnRcIiBiZWNhdXNlIG9mIHRoZSBtYW55IG92ZXJsb2FkZWQgY29ubm90YXRpb25zIGFzc29jaWF0ZWQgd2l0aCBcInJlbWlzc2lvblwiIG9yIFwicmVzb2x1dGlvblwiIC0gQ29uZGl0aW9ucyBhcmUgbmV2ZXIgcmVhbGx5IHJlc29sdmVkLCBidXQgdGhleSBjYW4gYWJhdGUuXHJcbiAgICovXHJcbiAgYWJhdGVtZW50RGF0ZVRpbWU/OiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRlIG9yIGVzdGltYXRlZCBkYXRlIHRoYXQgdGhlIGNvbmRpdGlvbiByZXNvbHZlZCBvciB3ZW50IGludG8gcmVtaXNzaW9uLiBUaGlzIGlzIGNhbGxlZCBcImFiYXRlbWVudFwiIGJlY2F1c2Ugb2YgdGhlIG1hbnkgb3ZlcmxvYWRlZCBjb25ub3RhdGlvbnMgYXNzb2NpYXRlZCB3aXRoIFwicmVtaXNzaW9uXCIgb3IgXCJyZXNvbHV0aW9uXCIgLSBDb25kaXRpb25zIGFyZSBuZXZlciByZWFsbHkgcmVzb2x2ZWQsIGJ1dCB0aGV5IGNhbiBhYmF0ZS5cclxuICAgKi9cclxuICBhYmF0ZW1lbnRRdWFudGl0eT86IGZoaXIuUXVhbnRpdHlBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSBvciBlc3RpbWF0ZWQgZGF0ZSB0aGF0IHRoZSBjb25kaXRpb24gcmVzb2x2ZWQgb3Igd2VudCBpbnRvIHJlbWlzc2lvbi4gVGhpcyBpcyBjYWxsZWQgXCJhYmF0ZW1lbnRcIiBiZWNhdXNlIG9mIHRoZSBtYW55IG92ZXJsb2FkZWQgY29ubm90YXRpb25zIGFzc29jaWF0ZWQgd2l0aCBcInJlbWlzc2lvblwiIG9yIFwicmVzb2x1dGlvblwiIC0gQ29uZGl0aW9ucyBhcmUgbmV2ZXIgcmVhbGx5IHJlc29sdmVkLCBidXQgdGhleSBjYW4gYWJhdGUuXHJcbiAgICovXHJcbiAgYWJhdGVtZW50Qm9vbGVhbj86IGZoaXIuRmhpckJvb2xlYW58Ym9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgb3IgZXN0aW1hdGVkIGRhdGUgdGhhdCB0aGUgY29uZGl0aW9uIHJlc29sdmVkIG9yIHdlbnQgaW50byByZW1pc3Npb24uIFRoaXMgaXMgY2FsbGVkIFwiYWJhdGVtZW50XCIgYmVjYXVzZSBvZiB0aGUgbWFueSBvdmVybG9hZGVkIGNvbm5vdGF0aW9ucyBhc3NvY2lhdGVkIHdpdGggXCJyZW1pc3Npb25cIiBvciBcInJlc29sdXRpb25cIiAtIENvbmRpdGlvbnMgYXJlIG5ldmVyIHJlYWxseSByZXNvbHZlZCwgYnV0IHRoZXkgY2FuIGFiYXRlLlxyXG4gICAqL1xyXG4gIGFiYXRlbWVudFBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgb3IgZXN0aW1hdGVkIGRhdGUgdGhhdCB0aGUgY29uZGl0aW9uIHJlc29sdmVkIG9yIHdlbnQgaW50byByZW1pc3Npb24uIFRoaXMgaXMgY2FsbGVkIFwiYWJhdGVtZW50XCIgYmVjYXVzZSBvZiB0aGUgbWFueSBvdmVybG9hZGVkIGNvbm5vdGF0aW9ucyBhc3NvY2lhdGVkIHdpdGggXCJyZW1pc3Npb25cIiBvciBcInJlc29sdXRpb25cIiAtIENvbmRpdGlvbnMgYXJlIG5ldmVyIHJlYWxseSByZXNvbHZlZCwgYnV0IHRoZXkgY2FuIGFiYXRlLlxyXG4gICAqL1xyXG4gIGFiYXRlbWVudFJhbmdlPzogZmhpci5SYW5nZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRlIG9yIGVzdGltYXRlZCBkYXRlIHRoYXQgdGhlIGNvbmRpdGlvbiByZXNvbHZlZCBvciB3ZW50IGludG8gcmVtaXNzaW9uLiBUaGlzIGlzIGNhbGxlZCBcImFiYXRlbWVudFwiIGJlY2F1c2Ugb2YgdGhlIG1hbnkgb3ZlcmxvYWRlZCBjb25ub3RhdGlvbnMgYXNzb2NpYXRlZCB3aXRoIFwicmVtaXNzaW9uXCIgb3IgXCJyZXNvbHV0aW9uXCIgLSBDb25kaXRpb25zIGFyZSBuZXZlciByZWFsbHkgcmVzb2x2ZWQsIGJ1dCB0aGV5IGNhbiBhYmF0ZS5cclxuICAgKi9cclxuICBhYmF0ZW1lbnRTdHJpbmc/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDbGluaWNhbCBzdGFnZSBvciBncmFkZSBvZiBhIGNvbmRpdGlvbi4gTWF5IGluY2x1ZGUgZm9ybWFsIHNldmVyaXR5IGFzc2Vzc21lbnRzLlxyXG4gICAqL1xyXG4gIHN0YWdlPzogZmhpci5Db25kaXRpb25TdGFnZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFN1cHBvcnRpbmcgRXZpZGVuY2UgLyBtYW5pZmVzdGF0aW9ucyB0aGF0IGFyZSB0aGUgYmFzaXMgb24gd2hpY2ggdGhpcyBjb25kaXRpb24gaXMgc3VzcGVjdGVkIG9yIGNvbmZpcm1lZC5cclxuICAgKi9cclxuICBldmlkZW5jZT86IGZoaXIuQ29uZGl0aW9uRXZpZGVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBhbmF0b21pY2FsIGxvY2F0aW9uIHdoZXJlIHRoaXMgY29uZGl0aW9uIG1hbmlmZXN0cyBpdHNlbGYuXHJcbiAgICovXHJcbiAgYm9keVNpdGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWRkaXRpb25hbCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgQ29uZGl0aW9uLiBUaGlzIGlzIGEgZ2VuZXJhbCBub3Rlcy9jb21tZW50cyBlbnRyeSAgZm9yIGRlc2NyaXB0aW9uIG9mIHRoZSBDb25kaXRpb24sIGl0cyBkaWFnbm9zaXMgYW5kIHByb2dub3Npcy5cclxuICAgKi9cclxuICBub3Rlcz86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDb25kaXRpb24ubm90ZXNcclxuICAgKi9cclxuICBfbm90ZXM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG59XHJcblxyXG4vKipcclxuICogVXNlIHRvIHJlY29yZCBkZXRhaWxlZCBpbmZvcm1hdGlvbiBhYm91dCBjb25kaXRpb25zLCBwcm9ibGVtcyBvciBkaWFnbm9zZXMgcmVjb2duaXplZCBieSBhIGNsaW5pY2lhbi4gVGhlcmUgYXJlIG1hbnkgdXNlcyBpbmNsdWRpbmc6IHJlY29yZGluZyBhIGRpYWdub3NpcyBkdXJpbmcgYW4gZW5jb3VudGVyOyBwb3B1bGF0aW5nIGEgcHJvYmxlbSBsaXN0IG9yIGEgc3VtbWFyeSBzdGF0ZW1lbnQsIHN1Y2ggYXMgYSBkaXNjaGFyZ2Ugc3VtbWFyeS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb25kaXRpb24gZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0NvbmRpdGlvbic7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJDb25kaXRpb25cIjtcclxuICAvKipcclxuICAgKiBOZWVkIHRvIGFsbG93IGNvbm5lY3Rpb24gdG8gYSB3aWRlciB3b3JrZmxvdy5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcjogZmhpci5JZGVudGlmaWVyW107XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHRoZSBwYXRpZW50IHdobyB0aGUgY29uZGl0aW9uIHJlY29yZCBpcyBhc3NvY2lhdGVkIHdpdGguXHJcbiAgICovXHJcbiAgcHVibGljIHBhdGllbnQ6IGZoaXIuUmVmZXJlbmNlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogRW5jb3VudGVyIGR1cmluZyB3aGljaCB0aGUgY29uZGl0aW9uIHdhcyBmaXJzdCBhc3NlcnRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgZW5jb3VudGVyPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGl2aWR1YWwgd2hvIGlzIG1ha2luZyB0aGUgY29uZGl0aW9uIHN0YXRlbWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgYXNzZXJ0ZXI/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBkYXRlLCB3aGVuICB0aGUgQ29uZGl0aW9uIHN0YXRlbWVudCB3YXMgZG9jdW1lbnRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgZGF0ZVJlY29yZGVkPzogZmhpci5GaGlyRGF0ZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmljYXRpb24gb2YgdGhlIGNvbmRpdGlvbiwgcHJvYmxlbSBvciBkaWFnbm9zaXMuXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGU6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogQSBjYXRlZ29yeSBhc3NpZ25lZCB0byB0aGUgY29uZGl0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjYXRlZ29yeT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgY2xpbmljYWwgc3RhdHVzIG9mIHRoZSBjb25kaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIGNsaW5pY2FsU3RhdHVzPzogZmhpci5GaGlyQ29kZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHZlcmlmaWNhdGlvbiBzdGF0dXMgdG8gc3VwcG9ydCB0aGUgY2xpbmljYWwgc3RhdHVzIG9mIHRoZSBjb25kaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHZlcmlmaWNhdGlvblN0YXR1czogZmhpci5GaGlyQ29kZTxDb25kaXRpb25WZXJTdGF0dXNDb2RlVHlwZT58bnVsbDtcclxuICAvKipcclxuICAgKiBBIHN1YmplY3RpdmUgYXNzZXNzbWVudCBvZiB0aGUgc2V2ZXJpdHkgb2YgdGhlIGNvbmRpdGlvbiBhcyBldmFsdWF0ZWQgYnkgdGhlIGNsaW5pY2lhbi5cclxuICAgKi9cclxuICBwdWJsaWMgc2V2ZXJpdHk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXN0aW1hdGVkIG9yIGFjdHVhbCBkYXRlIG9yIGRhdGUtdGltZSAgdGhlIGNvbmRpdGlvbiBiZWdhbiwgaW4gdGhlIG9waW5pb24gb2YgdGhlIGNsaW5pY2lhbi5cclxuICAgKi9cclxuICBwdWJsaWMgb25zZXQ/OiAoZmhpci5GaGlyRGF0ZVRpbWV8Zmhpci5RdWFudGl0eXxmaGlyLlBlcmlvZHxmaGlyLlJhbmdlfGZoaXIuRmhpclN0cmluZyl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgQ29uZGl0aW9uLm9uc2V0W3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX29uc2V0SXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgb3IgZXN0aW1hdGVkIGRhdGUgdGhhdCB0aGUgY29uZGl0aW9uIHJlc29sdmVkIG9yIHdlbnQgaW50byByZW1pc3Npb24uIFRoaXMgaXMgY2FsbGVkIFwiYWJhdGVtZW50XCIgYmVjYXVzZSBvZiB0aGUgbWFueSBvdmVybG9hZGVkIGNvbm5vdGF0aW9ucyBhc3NvY2lhdGVkIHdpdGggXCJyZW1pc3Npb25cIiBvciBcInJlc29sdXRpb25cIiAtIENvbmRpdGlvbnMgYXJlIG5ldmVyIHJlYWxseSByZXNvbHZlZCwgYnV0IHRoZXkgY2FuIGFiYXRlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhYmF0ZW1lbnQ/OiAoZmhpci5GaGlyRGF0ZVRpbWV8Zmhpci5RdWFudGl0eXxmaGlyLkZoaXJCb29sZWFufGZoaXIuUGVyaW9kfGZoaXIuUmFuZ2V8Zmhpci5GaGlyU3RyaW5nKXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBDb25kaXRpb24uYWJhdGVtZW50W3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX2FiYXRlbWVudElzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIENsaW5pY2FsIHN0YWdlIG9yIGdyYWRlIG9mIGEgY29uZGl0aW9uLiBNYXkgaW5jbHVkZSBmb3JtYWwgc2V2ZXJpdHkgYXNzZXNzbWVudHMuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YWdlPzogZmhpci5Db25kaXRpb25TdGFnZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU3VwcG9ydGluZyBFdmlkZW5jZSAvIG1hbmlmZXN0YXRpb25zIHRoYXQgYXJlIHRoZSBiYXNpcyBvbiB3aGljaCB0aGlzIGNvbmRpdGlvbiBpcyBzdXNwZWN0ZWQgb3IgY29uZmlybWVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBldmlkZW5jZTogZmhpci5Db25kaXRpb25FdmlkZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBhbmF0b21pY2FsIGxvY2F0aW9uIHdoZXJlIHRoaXMgY29uZGl0aW9uIG1hbmlmZXN0cyBpdHNlbGYuXHJcbiAgICovXHJcbiAgcHVibGljIGJvZHlTaXRlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIEFkZGl0aW9uYWwgaW5mb3JtYXRpb24gYWJvdXQgdGhlIENvbmRpdGlvbi4gVGhpcyBpcyBhIGdlbmVyYWwgbm90ZXMvY29tbWVudHMgZW50cnkgIGZvciBkZXNjcmlwdGlvbiBvZiB0aGUgQ29uZGl0aW9uLCBpdHMgZGlhZ25vc2lzIGFuZCBwcm9nbm9zaXMuXHJcbiAgICovXHJcbiAgcHVibGljIG5vdGVzPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBDb25kaXRpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxDb25kaXRpb25BcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnQ29uZGl0aW9uJztcclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBzb3VyY2UuaWRlbnRpZmllci5tYXAoKHgpID0+IG5ldyBmaGlyLklkZW50aWZpZXIoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pZGVudGlmaWVyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3BhdGllbnQnXSkgeyB0aGlzLnBhdGllbnQgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnBhdGllbnQpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wYXRpZW50ID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZW5jb3VudGVyJ10pIHsgdGhpcy5lbmNvdW50ZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmVuY291bnRlcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ2Fzc2VydGVyJ10pIHsgdGhpcy5hc3NlcnRlciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuYXNzZXJ0ZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWydkYXRlUmVjb3JkZWQnXSkgeyB0aGlzLmRhdGVSZWNvcmRlZCA9IG5ldyBmaGlyLkZoaXJEYXRlKHt2YWx1ZTogc291cmNlLmRhdGVSZWNvcmRlZH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfZGF0ZVJlY29yZGVkJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZGF0ZVJlY29yZGVkKSB7IHRoaXMuZGF0ZVJlY29yZGVkLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2RhdGVSZWNvcmRlZCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRhdGVSZWNvcmRlZCA9IG5ldyBmaGlyLkZoaXJEYXRlKHNvdXJjZS5fZGF0ZVJlY29yZGVkIGFzIFBhcnRpYWw8Zmhpci5GaGlyRGF0ZUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29kZSddKSB7IHRoaXMuY29kZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuY29kZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvZGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydjYXRlZ29yeSddKSB7IHRoaXMuY2F0ZWdvcnkgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmNhdGVnb3J5KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY2xpbmljYWxTdGF0dXMnXSkgeyB0aGlzLmNsaW5pY2FsU3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGUoe3ZhbHVlOiBzb3VyY2UuY2xpbmljYWxTdGF0dXN9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2NsaW5pY2FsU3RhdHVzJ10pIHtcclxuICAgICAgaWYgKHRoaXMuY2xpbmljYWxTdGF0dXMpIHsgdGhpcy5jbGluaWNhbFN0YXR1cy5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9jbGluaWNhbFN0YXR1cyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmNsaW5pY2FsU3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGUoc291cmNlLl9jbGluaWNhbFN0YXR1cyBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGVBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3ZlcmlmaWNhdGlvblN0YXR1cyddKSB7IHRoaXMudmVyaWZpY2F0aW9uU3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8Q29uZGl0aW9uVmVyU3RhdHVzQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnZlcmlmaWNhdGlvblN0YXR1c30pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy52ZXJpZmljYXRpb25TdGF0dXMgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfdmVyaWZpY2F0aW9uU3RhdHVzJ10pIHtcclxuICAgICAgaWYgKHRoaXMudmVyaWZpY2F0aW9uU3RhdHVzKSB7IHRoaXMudmVyaWZpY2F0aW9uU3RhdHVzLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3ZlcmlmaWNhdGlvblN0YXR1cyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnZlcmlmaWNhdGlvblN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPENvbmRpdGlvblZlclN0YXR1c0NvZGVUeXBlPihzb3VyY2UuX3ZlcmlmaWNhdGlvblN0YXR1cyBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2V2ZXJpdHknXSkgeyB0aGlzLnNldmVyaXR5ID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5zZXZlcml0eSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ29uc2V0J10pIHsgdGhpcy5vbnNldCA9IHNvdXJjZS5vbnNldDsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydvbnNldERhdGVUaW1lJ10pIHsgdGhpcy5vbnNldCA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5vbnNldERhdGVUaW1lfSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnb25zZXRRdWFudGl0eSddKSB7IHRoaXMub25zZXQgPSBuZXcgZmhpci5RdWFudGl0eShzb3VyY2Uub25zZXRRdWFudGl0eSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnb25zZXRQZXJpb2QnXSkgeyB0aGlzLm9uc2V0ID0gbmV3IGZoaXIuUGVyaW9kKHNvdXJjZS5vbnNldFBlcmlvZCk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnb25zZXRSYW5nZSddKSB7IHRoaXMub25zZXQgPSBuZXcgZmhpci5SYW5nZShzb3VyY2Uub25zZXRSYW5nZSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnb25zZXRTdHJpbmcnXSkgeyB0aGlzLm9uc2V0ID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5vbnNldFN0cmluZ30pOyB9XHJcbiAgICBpZiAoc291cmNlWydhYmF0ZW1lbnQnXSkgeyB0aGlzLmFiYXRlbWVudCA9IHNvdXJjZS5hYmF0ZW1lbnQ7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnYWJhdGVtZW50RGF0ZVRpbWUnXSkgeyB0aGlzLmFiYXRlbWVudCA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5hYmF0ZW1lbnREYXRlVGltZX0pOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2FiYXRlbWVudFF1YW50aXR5J10pIHsgdGhpcy5hYmF0ZW1lbnQgPSBuZXcgZmhpci5RdWFudGl0eShzb3VyY2UuYWJhdGVtZW50UXVhbnRpdHkpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2FiYXRlbWVudEJvb2xlYW4nXSkgeyB0aGlzLmFiYXRlbWVudCA9IG5ldyBmaGlyLkZoaXJCb29sZWFuKHt2YWx1ZTogc291cmNlLmFiYXRlbWVudEJvb2xlYW59KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydhYmF0ZW1lbnRQZXJpb2QnXSkgeyB0aGlzLmFiYXRlbWVudCA9IG5ldyBmaGlyLlBlcmlvZChzb3VyY2UuYWJhdGVtZW50UGVyaW9kKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydhYmF0ZW1lbnRSYW5nZSddKSB7IHRoaXMuYWJhdGVtZW50ID0gbmV3IGZoaXIuUmFuZ2Uoc291cmNlLmFiYXRlbWVudFJhbmdlKTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydhYmF0ZW1lbnRTdHJpbmcnXSkgeyB0aGlzLmFiYXRlbWVudCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuYWJhdGVtZW50U3RyaW5nfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0YWdlJ10pIHsgdGhpcy5zdGFnZSA9IG5ldyBmaGlyLkNvbmRpdGlvblN0YWdlKHNvdXJjZS5zdGFnZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2V2aWRlbmNlJ10pIHsgdGhpcy5ldmlkZW5jZSA9IHNvdXJjZS5ldmlkZW5jZS5tYXAoKHgpID0+IG5ldyBmaGlyLkNvbmRpdGlvbkV2aWRlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZXZpZGVuY2UgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYm9keVNpdGUnXSkgeyB0aGlzLmJvZHlTaXRlID0gc291cmNlLmJvZHlTaXRlLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYm9keVNpdGUgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbm90ZXMnXSkgeyB0aGlzLm5vdGVzID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5ub3Rlc30pOyB9XHJcbiAgICBpZiAoc291cmNlWydfbm90ZXMnXSkge1xyXG4gICAgICBpZiAodGhpcy5ub3RlcykgeyB0aGlzLm5vdGVzLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX25vdGVzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubm90ZXMgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fbm90ZXMgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdDb25kaXRpb24nIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJQUygncmVzb3VyY2VUeXBlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdpZGVudGlmaWVyJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdwYXRpZW50JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdlbmNvdW50ZXInLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2Fzc2VydGVyJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdkYXRlUmVjb3JkZWQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ2NvZGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2NhdGVnb3J5JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdjbGluaWNhbFN0YXR1cycsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSU1YoJ3ZlcmlmaWNhdGlvblN0YXR1cycsZXhwLCdDb25kaXRpb25WZXJTdGF0dXMnLENvbmRpdGlvblZlclN0YXR1c1ZzVmFsaWRhdGlvbiwncicpKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdzZXZlcml0eScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnb25zZXQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2FiYXRlbWVudCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnc3RhZ2UnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2V2aWRlbmNlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdib2R5U2l0ZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnbm90ZXMnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuIl19