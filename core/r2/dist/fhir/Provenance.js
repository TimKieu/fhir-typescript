// <auto-generated/>
// Contents of: hl7.fhir.r2.core version: 1.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: Provenance
import * as fhir from '../fhir.js';
// @ts-ignore
import { ProvenanceEntityRoleVsValidation } from '../fhirValueSets/ProvenanceEntityRoleVsValidation.js';
/**
 * A relationship between two the agents referenced in this resource. This is defined to allow for explicit description of the delegation between agents.  For example, this human author used this device, or one person acted on another's behest.
 */
export class ProvenanceAgentRelatedAgent extends fhir.BackboneElement {
    /**
     * Default constructor for ProvenanceAgentRelatedAgent - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type);
        }
        else {
            this.type = null;
        }
        if (source['target']) {
            this.target = new fhir.FhirUri({ value: source.target });
        }
        else {
            this.target = null;
        }
        if (source['_target']) {
            if (this.target) {
                this.target.addExtendedProperties(source._target);
            }
            else {
                this.target = new fhir.FhirUri(source._target);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Provenance.agent.relatedAgent';
        }
        this.vRS('type', exp);
        this.vRS('target', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ProvenanceAgentRelatedAgent._fts_dataType = 'ProvenanceAgentRelatedAgent';
/**
 * An agent takes a role in an activity such that the agent can be assigned some degree of responsibility for the activity taking place. An agent can be a person, an organization, software, or other entities that may be ascribed responsibility.
 */
export class ProvenanceAgent extends fhir.BackboneElement {
    /**
     * Default constructor for ProvenanceAgent - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['role']) {
            this.role = new fhir.Coding(source.role);
        }
        else {
            this.role = null;
        }
        if (source['actor']) {
            this.actor = new fhir.Reference(source.actor);
        }
        if (source['userId']) {
            this.userId = new fhir.Identifier(source.userId);
        }
        if (source['relatedAgent']) {
            this.relatedAgent = source.relatedAgent.map((x) => new fhir.ProvenanceAgentRelatedAgent(x));
        }
        else {
            this.relatedAgent = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Provenance.agent';
        }
        this.vRS('role', exp);
        this.vOS('actor', exp);
        this.vOS('userId', exp);
        this.vOA('relatedAgent', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ProvenanceAgent._fts_dataType = 'ProvenanceAgent';
/**
 * An entity used in this activity.
 */
export class ProvenanceEntity extends fhir.BackboneElement {
    /**
     * Default constructor for ProvenanceEntity - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['role']) {
            this.role = new fhir.FhirCode({ value: source.role });
        }
        else {
            this.role = null;
        }
        if (source['_role']) {
            if (this.role) {
                this.role.addExtendedProperties(source._role);
            }
            else {
                this.role = new fhir.FhirCode(source._role);
            }
        }
        if (source['type']) {
            this.type = new fhir.Coding(source.type);
        }
        else {
            this.type = null;
        }
        if (source['reference']) {
            this.reference = new fhir.FhirUri({ value: source.reference });
        }
        else {
            this.reference = null;
        }
        if (source['_reference']) {
            if (this.reference) {
                this.reference.addExtendedProperties(source._reference);
            }
            else {
                this.reference = new fhir.FhirUri(source._reference);
            }
        }
        if (source['display']) {
            this.display = new fhir.FhirString({ value: source.display });
        }
        if (source['_display']) {
            if (this.display) {
                this.display.addExtendedProperties(source._display);
            }
            else {
                this.display = new fhir.FhirString(source._display);
            }
        }
        if (source['agent']) {
            this.agent = new fhir.ProvenanceAgent(source.agent);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Provenance.entity';
        }
        this.vRSV('role', exp, 'ProvenanceEntityRole', ProvenanceEntityRoleVsValidation, 'r');
        this.vRS('type', exp);
        this.vRS('reference', exp);
        this.vOS('display', exp);
        this.vOS('agent', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ProvenanceEntity._fts_dataType = 'ProvenanceEntity';
/**
 * Provenance of a resource is a record that describes entities and processes involved in producing and delivering or otherwise influencing that resource. Provenance provides a critical foundation for assessing authenticity, enabling trust, and allowing reproducibility. Provenance assertions are a form of contextual metadata and can themselves become important records with their own provenance. Provenance statement indicates clinical significance in terms of confidence in authenticity, reliability, and trustworthiness, integrity, and stage in lifecycle (e.g. Document Completion - has the artifact been legally authenticated), all of which may impact security, privacy, and trust policies.
 */
export class Provenance extends fhir.DomainResource {
    /**
     * Default constructor for Provenance - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'Provenance';
        if (source['target']) {
            this.target = source.target.map((x) => new fhir.Reference(x));
        }
        else {
            this.target = [];
        }
        if (source['period']) {
            this.period = new fhir.Period(source.period);
        }
        if (source['recorded']) {
            this.recorded = new fhir.FhirInstant({ value: source.recorded });
        }
        else {
            this.recorded = null;
        }
        if (source['_recorded']) {
            if (this.recorded) {
                this.recorded.addExtendedProperties(source._recorded);
            }
            else {
                this.recorded = new fhir.FhirInstant(source._recorded);
            }
        }
        if (source['reason']) {
            this.reason = source.reason.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.reason = [];
        }
        if (source['activity']) {
            this.activity = new fhir.CodeableConcept(source.activity);
        }
        if (source['location']) {
            this.location = new fhir.Reference(source.location);
        }
        if (source['policy']) {
            this.policy = source.policy.map((x) => new fhir.FhirUri({ value: x }));
        }
        else {
            this.policy = [];
        }
        if (source['_policy']) {
            source._policy.forEach((x, i) => {
                if (this.policy.length >= i) {
                    if (x) {
                        this.policy[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.policy.push(new fhir.FhirUri(x));
                    }
                }
            });
        }
        if (source['agent']) {
            this.agent = source.agent.map((x) => new fhir.ProvenanceAgent(x));
        }
        else {
            this.agent = [];
        }
        if (source['entity']) {
            this.entity = source.entity.map((x) => new fhir.ProvenanceEntity(x));
        }
        else {
            this.entity = [];
        }
        if (source['signature']) {
            this.signature = source.signature.map((x) => new fhir.Signature(x));
        }
        else {
            this.signature = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Provenance';
        }
        this.vRS('resourceType', exp);
        this.vRA('target', exp);
        this.vOS('period', exp);
        this.vRS('recorded', exp);
        this.vOA('reason', exp);
        this.vOS('activity', exp);
        this.vOS('location', exp);
        this.vOA('policy', exp);
        this.vOA('agent', exp);
        this.vOA('entity', exp);
        this.vOA('signature', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
Provenance._fts_dataType = 'Provenance';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUHJvdmVuYW5jZS5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvUHJvdmVuYW5jZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQyw0QkFBNEI7QUFFNUIsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFJbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSxnQ0FBZ0MsRUFBRSxNQUFNLHNEQUFzRCxDQUFDO0FBdUJ4Rzs7R0FFRztBQUNILE1BQU0sT0FBTywyQkFBNEIsU0FBUSxJQUFJLENBQUMsZUFBZTtJQWFuRTs7T0FFRztJQUNILFlBQVksU0FBa0QsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDeEcsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUFFO2FBQ3JFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7U0FBRTtRQUMxQixJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxNQUFNLEVBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDNUU7WUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztTQUFFO1FBQzVCLElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQ3JCLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtnQkFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxPQUFRLENBQUMsQ0FBQzthQUFFO2lCQUNuRTtnQkFBRSxJQUFJLENB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WSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnIyLmNvcmUgdmVyc2lvbjogMS4wLjJcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBQcm92ZW5hbmNlXHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBQcm92ZW5hbmNlRW50aXR5Um9sZUNvZGVzLCAgUHJvdmVuYW5jZUVudGl0eVJvbGVDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUHJvdmVuYW5jZUVudGl0eVJvbGVDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUHJvdmVuYW5jZUVudGl0eVJvbGVWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1Byb3ZlbmFuY2VFbnRpdHlSb2xlVnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBSZXNvdXJjZVR5cGVzQ29kZXMsICBSZXNvdXJjZVR5cGVzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1Jlc291cmNlVHlwZXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUmVzb3VyY2VUeXBlc1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUmVzb3VyY2VUeXBlc1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBQcm92ZW5hbmNlQWdlbnRSZWxhdGVkQWdlbnQgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgUHJvdmVuYW5jZUFnZW50UmVsYXRlZEFnZW50QXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIHR5cGUgb2YgcmVsYXRpb25zaGlwIGJldHdlZW4gYWdlbnRzLlxyXG4gICAqL1xyXG4gIHR5cGU6IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIEFuIGludGVybmFsIHJlZmVyZW5jZSB0byBhbm90aGVyIGFnZW50IGxpc3RlZCBpbiB0aGlzIHByb3ZlbmFuY2UgYnkgaXRzIGlkZW50aWZpZXIuXHJcbiAgICovXHJcbiAgdGFyZ2V0OiBmaGlyLkZoaXJVcml8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogUHJvdmVuYW5jZS5hZ2VudC5yZWxhdGVkQWdlbnQudGFyZ2V0XHJcbiAgICovXHJcbiAgX3RhcmdldD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHR3byB0aGUgYWdlbnRzIHJlZmVyZW5jZWQgaW4gdGhpcyByZXNvdXJjZS4gVGhpcyBpcyBkZWZpbmVkIHRvIGFsbG93IGZvciBleHBsaWNpdCBkZXNjcmlwdGlvbiBvZiB0aGUgZGVsZWdhdGlvbiBiZXR3ZWVuIGFnZW50cy4gIEZvciBleGFtcGxlLCB0aGlzIGh1bWFuIGF1dGhvciB1c2VkIHRoaXMgZGV2aWNlLCBvciBvbmUgcGVyc29uIGFjdGVkIG9uIGFub3RoZXIncyBiZWhlc3QuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUHJvdmVuYW5jZUFnZW50UmVsYXRlZEFnZW50IGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnUHJvdmVuYW5jZUFnZW50UmVsYXRlZEFnZW50JztcclxuICAvKipcclxuICAgKiBUaGUgdHlwZSBvZiByZWxhdGlvbnNoaXAgYmV0d2VlbiBhZ2VudHMuXHJcbiAgICovXHJcbiAgcHVibGljIHR5cGU6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogQW4gaW50ZXJuYWwgcmVmZXJlbmNlIHRvIGFub3RoZXIgYWdlbnQgbGlzdGVkIGluIHRoaXMgcHJvdmVuYW5jZSBieSBpdHMgaWRlbnRpZmllci5cclxuICAgKi9cclxuICBwdWJsaWMgdGFyZ2V0OiBmaGlyLkZoaXJVcml8bnVsbDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBQcm92ZW5hbmNlQWdlbnRSZWxhdGVkQWdlbnQgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxQcm92ZW5hbmNlQWdlbnRSZWxhdGVkQWdlbnRBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsndHlwZSddKSB7IHRoaXMudHlwZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UudHlwZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnR5cGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWyd0YXJnZXQnXSkgeyB0aGlzLnRhcmdldCA9IG5ldyBmaGlyLkZoaXJVcmkoe3ZhbHVlOiBzb3VyY2UudGFyZ2V0fSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnRhcmdldCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ190YXJnZXQnXSkge1xyXG4gICAgICBpZiAodGhpcy50YXJnZXQpIHsgdGhpcy50YXJnZXQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdGFyZ2V0ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudGFyZ2V0ID0gbmV3IGZoaXIuRmhpclVyaShzb3VyY2UuX3RhcmdldCBhcyBQYXJ0aWFsPGZoaXIuRmhpclVyaUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ1Byb3ZlbmFuY2UuYWdlbnQucmVsYXRlZEFnZW50JyB9XHJcbiAgICB0aGlzLnZSUygndHlwZScsZXhwKVxyXG4gICAgdGhpcy52UlMoJ3RhcmdldCcsZXhwKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFByb3ZlbmFuY2VBZ2VudCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBQcm92ZW5hbmNlQWdlbnRBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgZnVuY3Rpb24gb2YgdGhlIGFnZW50IHdpdGggcmVzcGVjdCB0byB0aGUgYWN0aXZpdHkuXHJcbiAgICovXHJcbiAgcm9sZTogZmhpci5Db2RpbmdBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGluZGl2aWR1YWwsIGRldmljZSBvciBvcmdhbml6YXRpb24gdGhhdCBwYXJ0aWNpcGF0ZWQgaW4gdGhlIGV2ZW50LlxyXG4gICAqL1xyXG4gIGFjdG9yPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgaWRlbnRpdHkgb2YgdGhlIGFnZW50IGFzIGtub3duIGJ5IHRoZSBhdXRob3JpemF0aW9uIHN5c3RlbS5cclxuICAgKi9cclxuICB1c2VySWQ/OiBmaGlyLklkZW50aWZpZXJBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHR3byB0aGUgYWdlbnRzIHJlZmVyZW5jZWQgaW4gdGhpcyByZXNvdXJjZS4gVGhpcyBpcyBkZWZpbmVkIHRvIGFsbG93IGZvciBleHBsaWNpdCBkZXNjcmlwdGlvbiBvZiB0aGUgZGVsZWdhdGlvbiBiZXR3ZWVuIGFnZW50cy4gIEZvciBleGFtcGxlLCB0aGlzIGh1bWFuIGF1dGhvciB1c2VkIHRoaXMgZGV2aWNlLCBvciBvbmUgcGVyc29uIGFjdGVkIG9uIGFub3RoZXIncyBiZWhlc3QuXHJcbiAgICovXHJcbiAgcmVsYXRlZEFnZW50PzogZmhpci5Qcm92ZW5hbmNlQWdlbnRSZWxhdGVkQWdlbnRBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQW4gYWdlbnQgdGFrZXMgYSByb2xlIGluIGFuIGFjdGl2aXR5IHN1Y2ggdGhhdCB0aGUgYWdlbnQgY2FuIGJlIGFzc2lnbmVkIHNvbWUgZGVncmVlIG9mIHJlc3BvbnNpYmlsaXR5IGZvciB0aGUgYWN0aXZpdHkgdGFraW5nIHBsYWNlLiBBbiBhZ2VudCBjYW4gYmUgYSBwZXJzb24sIGFuIG9yZ2FuaXphdGlvbiwgc29mdHdhcmUsIG9yIG90aGVyIGVudGl0aWVzIHRoYXQgbWF5IGJlIGFzY3JpYmVkIHJlc3BvbnNpYmlsaXR5LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFByb3ZlbmFuY2VBZ2VudCBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1Byb3ZlbmFuY2VBZ2VudCc7XHJcbiAgLyoqXHJcbiAgICogVGhlIGZ1bmN0aW9uIG9mIHRoZSBhZ2VudCB3aXRoIHJlc3BlY3QgdG8gdGhlIGFjdGl2aXR5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyByb2xlOiBmaGlyLkNvZGluZ3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpbmRpdmlkdWFsLCBkZXZpY2Ugb3Igb3JnYW5pemF0aW9uIHRoYXQgcGFydGljaXBhdGVkIGluIHRoZSBldmVudC5cclxuICAgKi9cclxuICBwdWJsaWMgYWN0b3I/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGlkZW50aXR5IG9mIHRoZSBhZ2VudCBhcyBrbm93biBieSB0aGUgYXV0aG9yaXphdGlvbiBzeXN0ZW0uXHJcbiAgICovXHJcbiAgcHVibGljIHVzZXJJZD86IGZoaXIuSWRlbnRpZmllcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSByZWxhdGlvbnNoaXAgYmV0d2VlbiB0d28gdGhlIGFnZW50cyByZWZlcmVuY2VkIGluIHRoaXMgcmVzb3VyY2UuIFRoaXMgaXMgZGVmaW5lZCB0byBhbGxvdyBmb3IgZXhwbGljaXQgZGVzY3JpcHRpb24gb2YgdGhlIGRlbGVnYXRpb24gYmV0d2VlbiBhZ2VudHMuICBGb3IgZXhhbXBsZSwgdGhpcyBodW1hbiBhdXRob3IgdXNlZCB0aGlzIGRldmljZSwgb3Igb25lIHBlcnNvbiBhY3RlZCBvbiBhbm90aGVyJ3MgYmVoZXN0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWxhdGVkQWdlbnQ6IGZoaXIuUHJvdmVuYW5jZUFnZW50UmVsYXRlZEFnZW50W107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgUHJvdmVuYW5jZUFnZW50IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8UHJvdmVuYW5jZUFnZW50QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3JvbGUnXSkgeyB0aGlzLnJvbGUgPSBuZXcgZmhpci5Db2Rpbmcoc291cmNlLnJvbGUpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yb2xlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYWN0b3InXSkgeyB0aGlzLmFjdG9yID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5hY3Rvcik7IH1cclxuICAgIGlmIChzb3VyY2VbJ3VzZXJJZCddKSB7IHRoaXMudXNlcklkID0gbmV3IGZoaXIuSWRlbnRpZmllcihzb3VyY2UudXNlcklkKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVsYXRlZEFnZW50J10pIHsgdGhpcy5yZWxhdGVkQWdlbnQgPSBzb3VyY2UucmVsYXRlZEFnZW50Lm1hcCgoeCkgPT4gbmV3IGZoaXIuUHJvdmVuYW5jZUFnZW50UmVsYXRlZEFnZW50KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVsYXRlZEFnZW50ID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdQcm92ZW5hbmNlLmFnZW50JyB9XHJcbiAgICB0aGlzLnZSUygncm9sZScsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2FjdG9yJyxleHApXHJcbiAgICB0aGlzLnZPUygndXNlcklkJyxleHApXHJcbiAgICB0aGlzLnZPQSgncmVsYXRlZEFnZW50JyxleHApXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgUHJvdmVuYW5jZUVudGl0eSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBQcm92ZW5hbmNlRW50aXR5QXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogSG93IHRoZSBlbnRpdHkgd2FzIHVzZWQgZHVyaW5nIHRoZSBhY3Rpdml0eS5cclxuICAgKi9cclxuICByb2xlOiBmaGlyLkZoaXJDb2RlPFByb3ZlbmFuY2VFbnRpdHlSb2xlQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFByb3ZlbmFuY2UuZW50aXR5LnJvbGVcclxuICAgKi9cclxuICBfcm9sZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogSWYgdGhlIHR5cGUgaXMgXCJyZXNvdXJjZVwiIHRoZW4gdGhlIHJlc291cmNlIGl0c2VsZiB3YXMgdGhlIHBhcnRpY2lwYW50LiBJZiB0aGUgdHlwZSBpcyBhIHR5cGUgb2YgcmVzb3VyY2UsIHRoZW4gdGhlIGVudGl0eSBpZGVudGlmaWVkIGJ5IHRoZSByZXNvdXJjZSBpcyB0aGUgcGFydGljaXBhbnQuXHJcbiAgICovXHJcbiAgdHlwZTogZmhpci5Db2RpbmdBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpdHkgb2YgdGhlICBFbnRpdHkgdXNlZC4gTWF5IGJlIGEgbG9naWNhbCBvciBwaHlzaWNhbCB1cmkgYW5kIG1heWJlIGFic29sdXRlIG9yIHJlbGF0aXZlLlxyXG4gICAqL1xyXG4gIHJlZmVyZW5jZTogZmhpci5GaGlyVXJpfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFByb3ZlbmFuY2UuZW50aXR5LnJlZmVyZW5jZVxyXG4gICAqL1xyXG4gIF9yZWZlcmVuY2U/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEh1bWFuLXJlYWRhYmxlIGRlc2NyaXB0aW9uIG9mIHRoZSBlbnRpdHkuXHJcbiAgICovXHJcbiAgZGlzcGxheT86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBQcm92ZW5hbmNlLmVudGl0eS5kaXNwbGF5XHJcbiAgICovXHJcbiAgX2Rpc3BsYXk/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBlbnRpdHkgaXMgYXR0cmlidXRlZCB0byBhbiBhZ2VudCB0byBleHByZXNzIHRoZSBhZ2VudCdzIHJlc3BvbnNpYmlsaXR5IGZvciB0aGF0IGVudGl0eSwgcG9zc2libHkgYWxvbmcgd2l0aCBvdGhlciBhZ2VudHMuIFRoaXMgZGVzY3JpcHRpb24gY2FuIGJlIHVuZGVyc3Rvb2QgYXMgc2hvcnRoYW5kIGZvciBzYXlpbmcgdGhhdCB0aGUgYWdlbnQgd2FzIHJlc3BvbnNpYmxlIGZvciB0aGUgYWN0aXZpdHkgd2hpY2ggZ2VuZXJhdGVkIHRoZSBlbnRpdHkuXHJcbiAgICovXHJcbiAgYWdlbnQ/OiBmaGlyLlByb3ZlbmFuY2VBZ2VudEFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQW4gZW50aXR5IHVzZWQgaW4gdGhpcyBhY3Rpdml0eS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBQcm92ZW5hbmNlRW50aXR5IGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnUHJvdmVuYW5jZUVudGl0eSc7XHJcbiAgLyoqXHJcbiAgICogSG93IHRoZSBlbnRpdHkgd2FzIHVzZWQgZHVyaW5nIHRoZSBhY3Rpdml0eS5cclxuICAgKi9cclxuICBwdWJsaWMgcm9sZTogZmhpci5GaGlyQ29kZTxQcm92ZW5hbmNlRW50aXR5Um9sZUNvZGVUeXBlPnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIElmIHRoZSB0eXBlIGlzIFwicmVzb3VyY2VcIiB0aGVuIHRoZSByZXNvdXJjZSBpdHNlbGYgd2FzIHRoZSBwYXJ0aWNpcGFudC4gSWYgdGhlIHR5cGUgaXMgYSB0eXBlIG9mIHJlc291cmNlLCB0aGVuIHRoZSBlbnRpdHkgaWRlbnRpZmllZCBieSB0aGUgcmVzb3VyY2UgaXMgdGhlIHBhcnRpY2lwYW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0eXBlOiBmaGlyLkNvZGluZ3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aXR5IG9mIHRoZSAgRW50aXR5IHVzZWQuIE1heSBiZSBhIGxvZ2ljYWwgb3IgcGh5c2ljYWwgdXJpIGFuZCBtYXliZSBhYnNvbHV0ZSBvciByZWxhdGl2ZS5cclxuICAgKi9cclxuICBwdWJsaWMgcmVmZXJlbmNlOiBmaGlyLkZoaXJVcml8bnVsbDtcclxuICAvKipcclxuICAgKiBIdW1hbi1yZWFkYWJsZSBkZXNjcmlwdGlvbiBvZiB0aGUgZW50aXR5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkaXNwbGF5PzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZW50aXR5IGlzIGF0dHJpYnV0ZWQgdG8gYW4gYWdlbnQgdG8gZXhwcmVzcyB0aGUgYWdlbnQncyByZXNwb25zaWJpbGl0eSBmb3IgdGhhdCBlbnRpdHksIHBvc3NpYmx5IGFsb25nIHdpdGggb3RoZXIgYWdlbnRzLiBUaGlzIGRlc2NyaXB0aW9uIGNhbiBiZSB1bmRlcnN0b29kIGFzIHNob3J0aGFuZCBmb3Igc2F5aW5nIHRoYXQgdGhlIGFnZW50IHdhcyByZXNwb25zaWJsZSBmb3IgdGhlIGFjdGl2aXR5IHdoaWNoIGdlbmVyYXRlZCB0aGUgZW50aXR5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhZ2VudD86IGZoaXIuUHJvdmVuYW5jZUFnZW50fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBQcm92ZW5hbmNlRW50aXR5IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8UHJvdmVuYW5jZUVudGl0eUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydyb2xlJ10pIHsgdGhpcy5yb2xlID0gbmV3IGZoaXIuRmhpckNvZGU8UHJvdmVuYW5jZUVudGl0eVJvbGVDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2Uucm9sZX0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yb2xlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3JvbGUnXSkge1xyXG4gICAgICBpZiAodGhpcy5yb2xlKSB7IHRoaXMucm9sZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9yb2xlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMucm9sZSA9IG5ldyBmaGlyLkZoaXJDb2RlPFByb3ZlbmFuY2VFbnRpdHlSb2xlQ29kZVR5cGU+KHNvdXJjZS5fcm9sZSBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsndHlwZSddKSB7IHRoaXMudHlwZSA9IG5ldyBmaGlyLkNvZGluZyhzb3VyY2UudHlwZSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnR5cGUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydyZWZlcmVuY2UnXSkgeyB0aGlzLnJlZmVyZW5jZSA9IG5ldyBmaGlyLkZoaXJVcmkoe3ZhbHVlOiBzb3VyY2UucmVmZXJlbmNlfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnJlZmVyZW5jZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19yZWZlcmVuY2UnXSkge1xyXG4gICAgICBpZiAodGhpcy5yZWZlcmVuY2UpIHsgdGhpcy5yZWZlcmVuY2UuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fcmVmZXJlbmNlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMucmVmZXJlbmNlID0gbmV3IGZoaXIuRmhpclVyaShzb3VyY2UuX3JlZmVyZW5jZSBhcyBQYXJ0aWFsPGZoaXIuRmhpclVyaUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGlzcGxheSddKSB7IHRoaXMuZGlzcGxheSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuZGlzcGxheX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfZGlzcGxheSddKSB7XHJcbiAgICAgIGlmICh0aGlzLmRpc3BsYXkpIHsgdGhpcy5kaXNwbGF5LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2Rpc3BsYXkhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5kaXNwbGF5ID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2Rpc3BsYXkgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2FnZW50J10pIHsgdGhpcy5hZ2VudCA9IG5ldyBmaGlyLlByb3ZlbmFuY2VBZ2VudChzb3VyY2UuYWdlbnQpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnUHJvdmVuYW5jZS5lbnRpdHknIH1cclxuICAgIHRoaXMudlJTVigncm9sZScsZXhwLCdQcm92ZW5hbmNlRW50aXR5Um9sZScsUHJvdmVuYW5jZUVudGl0eVJvbGVWc1ZhbGlkYXRpb24sJ3InKVxyXG4gICAgdGhpcy52UlMoJ3R5cGUnLGV4cClcclxuICAgIHRoaXMudlJTKCdyZWZlcmVuY2UnLGV4cClcclxuICAgIHRoaXMudk9TKCdkaXNwbGF5JyxleHApXHJcbiAgICB0aGlzLnZPUygnYWdlbnQnLGV4cClcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBQcm92ZW5hbmNlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFByb3ZlbmFuY2VBcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJQcm92ZW5hbmNlXCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBSZWZlcmVuY2UocykgdGhhdCB3ZXJlIGdlbmVyYXRlZCBvciB1cGRhdGVkIGJ5ICB0aGUgYWN0aXZpdHkgZGVzY3JpYmVkIGluIHRoaXMgcmVzb3VyY2UuIEEgcHJvdmVuYW5jZSBjYW4gcG9pbnQgdG8gbW9yZSB0aGFuIG9uZSB0YXJnZXQgaWYgbXVsdGlwbGUgcmVzb3VyY2VzIHdlcmUgY3JlYXRlZC91cGRhdGVkIGJ5IHRoZSBzYW1lIGFjdGl2aXR5LlxyXG4gICAqL1xyXG4gIHRhcmdldDogZmhpci5SZWZlcmVuY2VBcmdzW118bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgcGVyaW9kIGR1cmluZyB3aGljaCB0aGUgYWN0aXZpdHkgb2NjdXJyZWQuXHJcbiAgICovXHJcbiAgcGVyaW9kPzogZmhpci5QZXJpb2RBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgaW5zdGFudCBvZiB0aW1lIGF0IHdoaWNoIHRoZSBhY3Rpdml0eSB3YXMgcmVjb3JkZWQuXHJcbiAgICovXHJcbiAgcmVjb3JkZWQ6IGZoaXIuRmhpckluc3RhbnR8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogUHJvdmVuYW5jZS5yZWNvcmRlZFxyXG4gICAqL1xyXG4gIF9yZWNvcmRlZD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlYXNvbiB0aGF0IHRoZSBhY3Rpdml0eSB3YXMgdGFraW5nIHBsYWNlLlxyXG4gICAqL1xyXG4gIHJlYXNvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBbiBhY3Rpdml0eSBpcyBzb21ldGhpbmcgdGhhdCBvY2N1cnMgb3ZlciBhIHBlcmlvZCBvZiB0aW1lIGFuZCBhY3RzIHVwb24gb3Igd2l0aCBlbnRpdGllczsgaXQgbWF5IGluY2x1ZGUgY29uc3VtaW5nLCBwcm9jZXNzaW5nLCB0cmFuc2Zvcm1pbmcsIG1vZGlmeWluZywgcmVsb2NhdGluZywgdXNpbmcsIG9yIGdlbmVyYXRpbmcgZW50aXRpZXMuXHJcbiAgICovXHJcbiAgYWN0aXZpdHk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFdoZXJlIHRoZSBhY3Rpdml0eSBvY2N1cnJlZCwgaWYgcmVsZXZhbnQuXHJcbiAgICovXHJcbiAgbG9jYXRpb24/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFBvbGljeSBvciBwbGFuIHRoZSBhY3Rpdml0eSB3YXMgZGVmaW5lZCBieS4gVHlwaWNhbGx5LCBhIHNpbmdsZSBhY3Rpdml0eSBtYXkgaGF2ZSBtdWx0aXBsZSBhcHBsaWNhYmxlIHBvbGljeSBkb2N1bWVudHMsIHN1Y2ggYXMgcGF0aWVudCBjb25zZW50LCBndWFyYW50b3IgZnVuZGluZywgZXRjLlxyXG4gICAqL1xyXG4gIHBvbGljeT86IGZoaXIuRmhpclVyaVtdfChzdHJpbmd8bnVsbClbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFByb3ZlbmFuY2UucG9saWN5XHJcbiAgICovXHJcbiAgX3BvbGljeT86KGZoaXIuRmhpckVsZW1lbnRBcmdzfG51bGwpW107XHJcbiAgLyoqXHJcbiAgICogQW4gYWdlbnQgdGFrZXMgYSByb2xlIGluIGFuIGFjdGl2aXR5IHN1Y2ggdGhhdCB0aGUgYWdlbnQgY2FuIGJlIGFzc2lnbmVkIHNvbWUgZGVncmVlIG9mIHJlc3BvbnNpYmlsaXR5IGZvciB0aGUgYWN0aXZpdHkgdGFraW5nIHBsYWNlLiBBbiBhZ2VudCBjYW4gYmUgYSBwZXJzb24sIGFuIG9yZ2FuaXphdGlvbiwgc29mdHdhcmUsIG9yIG90aGVyIGVudGl0aWVzIHRoYXQgbWF5IGJlIGFzY3JpYmVkIHJlc3BvbnNpYmlsaXR5LlxyXG4gICAqL1xyXG4gIGFnZW50PzogZmhpci5Qcm92ZW5hbmNlQWdlbnRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFuIGVudGl0eSB1c2VkIGluIHRoaXMgYWN0aXZpdHkuXHJcbiAgICovXHJcbiAgZW50aXR5PzogZmhpci5Qcm92ZW5hbmNlRW50aXR5QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGRpZ2l0YWwgc2lnbmF0dXJlIG9uIHRoZSB0YXJnZXQgUmVmZXJlbmNlKHMpLiBUaGUgc2lnbmVyIHNob3VsZCBtYXRjaCBhIFByb3ZlbmFuY2UuYWdlbnQuIFRoZSBwdXJwb3NlIG9mIHRoZSBzaWduYXR1cmUgaXMgaW5kaWNhdGVkLlxyXG4gICAqL1xyXG4gIHNpZ25hdHVyZT86IGZoaXIuU2lnbmF0dXJlQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFByb3ZlbmFuY2Ugb2YgYSByZXNvdXJjZSBpcyBhIHJlY29yZCB0aGF0IGRlc2NyaWJlcyBlbnRpdGllcyBhbmQgcHJvY2Vzc2VzIGludm9sdmVkIGluIHByb2R1Y2luZyBhbmQgZGVsaXZlcmluZyBvciBvdGhlcndpc2UgaW5mbHVlbmNpbmcgdGhhdCByZXNvdXJjZS4gUHJvdmVuYW5jZSBwcm92aWRlcyBhIGNyaXRpY2FsIGZvdW5kYXRpb24gZm9yIGFzc2Vzc2luZyBhdXRoZW50aWNpdHksIGVuYWJsaW5nIHRydXN0LCBhbmQgYWxsb3dpbmcgcmVwcm9kdWNpYmlsaXR5LiBQcm92ZW5hbmNlIGFzc2VydGlvbnMgYXJlIGEgZm9ybSBvZiBjb250ZXh0dWFsIG1ldGFkYXRhIGFuZCBjYW4gdGhlbXNlbHZlcyBiZWNvbWUgaW1wb3J0YW50IHJlY29yZHMgd2l0aCB0aGVpciBvd24gcHJvdmVuYW5jZS4gUHJvdmVuYW5jZSBzdGF0ZW1lbnQgaW5kaWNhdGVzIGNsaW5pY2FsIHNpZ25pZmljYW5jZSBpbiB0ZXJtcyBvZiBjb25maWRlbmNlIGluIGF1dGhlbnRpY2l0eSwgcmVsaWFiaWxpdHksIGFuZCB0cnVzdHdvcnRoaW5lc3MsIGludGVncml0eSwgYW5kIHN0YWdlIGluIGxpZmVjeWNsZSAoZS5nLiBEb2N1bWVudCBDb21wbGV0aW9uIC0gaGFzIHRoZSBhcnRpZmFjdCBiZWVuIGxlZ2FsbHkgYXV0aGVudGljYXRlZCksIGFsbCBvZiB3aGljaCBtYXkgaW1wYWN0IHNlY3VyaXR5LCBwcml2YWN5LCBhbmQgdHJ1c3QgcG9saWNpZXMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUHJvdmVuYW5jZSBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnUHJvdmVuYW5jZSc7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJQcm92ZW5hbmNlXCI7XHJcbiAgLyoqXHJcbiAgICogVGhlIFJlZmVyZW5jZShzKSB0aGF0IHdlcmUgZ2VuZXJhdGVkIG9yIHVwZGF0ZWQgYnkgIHRoZSBhY3Rpdml0eSBkZXNjcmliZWQgaW4gdGhpcyByZXNvdXJjZS4gQSBwcm92ZW5hbmNlIGNhbiBwb2ludCB0byBtb3JlIHRoYW4gb25lIHRhcmdldCBpZiBtdWx0aXBsZSByZXNvdXJjZXMgd2VyZSBjcmVhdGVkL3VwZGF0ZWQgYnkgdGhlIHNhbWUgYWN0aXZpdHkuXHJcbiAgICovXHJcbiAgcHVibGljIHRhcmdldDogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBUaGUgcGVyaW9kIGR1cmluZyB3aGljaCB0aGUgYWN0aXZpdHkgb2NjdXJyZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHBlcmlvZD86IGZoaXIuUGVyaW9kfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgaW5zdGFudCBvZiB0aW1lIGF0IHdoaWNoIHRoZSBhY3Rpdml0eSB3YXMgcmVjb3JkZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHJlY29yZGVkOiBmaGlyLkZoaXJJbnN0YW50fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlYXNvbiB0aGF0IHRoZSBhY3Rpdml0eSB3YXMgdGFraW5nIHBsYWNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWFzb246IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogQW4gYWN0aXZpdHkgaXMgc29tZXRoaW5nIHRoYXQgb2NjdXJzIG92ZXIgYSBwZXJpb2Qgb2YgdGltZSBhbmQgYWN0cyB1cG9uIG9yIHdpdGggZW50aXRpZXM7IGl0IG1heSBpbmNsdWRlIGNvbnN1bWluZywgcHJvY2Vzc2luZywgdHJhbnNmb3JtaW5nLCBtb2RpZnlpbmcsIHJlbG9jYXRpbmcsIHVzaW5nLCBvciBnZW5lcmF0aW5nIGVudGl0aWVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhY3Rpdml0eT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBXaGVyZSB0aGUgYWN0aXZpdHkgb2NjdXJyZWQsIGlmIHJlbGV2YW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBsb2NhdGlvbj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBQb2xpY3kgb3IgcGxhbiB0aGUgYWN0aXZpdHkgd2FzIGRlZmluZWQgYnkuIFR5cGljYWxseSwgYSBzaW5nbGUgYWN0aXZpdHkgbWF5IGhhdmUgbXVsdGlwbGUgYXBwbGljYWJsZSBwb2xpY3kgZG9jdW1lbnRzLCBzdWNoIGFzIHBhdGllbnQgY29uc2VudCwgZ3VhcmFudG9yIGZ1bmRpbmcsIGV0Yy5cclxuICAgKi9cclxuICBwdWJsaWMgcG9saWN5OiBmaGlyLkZoaXJVcmlbXTtcclxuICAvKipcclxuICAgKiBBbiBhZ2VudCB0YWtlcyBhIHJvbGUgaW4gYW4gYWN0aXZpdHkgc3VjaCB0aGF0IHRoZSBhZ2VudCBjYW4gYmUgYXNzaWduZWQgc29tZSBkZWdyZWUgb2YgcmVzcG9uc2liaWxpdHkgZm9yIHRoZSBhY3Rpdml0eSB0YWtpbmcgcGxhY2UuIEFuIGFnZW50IGNhbiBiZSBhIHBlcnNvbiwgYW4gb3JnYW5pemF0aW9uLCBzb2Z0d2FyZSwgb3Igb3RoZXIgZW50aXRpZXMgdGhhdCBtYXkgYmUgYXNjcmliZWQgcmVzcG9uc2liaWxpdHkuXHJcbiAgICovXHJcbiAgcHVibGljIGFnZW50OiBmaGlyLlByb3ZlbmFuY2VBZ2VudFtdO1xyXG4gIC8qKlxyXG4gICAqIEFuIGVudGl0eSB1c2VkIGluIHRoaXMgYWN0aXZpdHkuXHJcbiAgICovXHJcbiAgcHVibGljIGVudGl0eTogZmhpci5Qcm92ZW5hbmNlRW50aXR5W107XHJcbiAgLyoqXHJcbiAgICogQSBkaWdpdGFsIHNpZ25hdHVyZSBvbiB0aGUgdGFyZ2V0IFJlZmVyZW5jZShzKS4gVGhlIHNpZ25lciBzaG91bGQgbWF0Y2ggYSBQcm92ZW5hbmNlLmFnZW50LiBUaGUgcHVycG9zZSBvZiB0aGUgc2lnbmF0dXJlIGlzIGluZGljYXRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgc2lnbmF0dXJlOiBmaGlyLlNpZ25hdHVyZVtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFByb3ZlbmFuY2UgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxQcm92ZW5hbmNlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ1Byb3ZlbmFuY2UnO1xyXG4gICAgaWYgKHNvdXJjZVsndGFyZ2V0J10pIHsgdGhpcy50YXJnZXQgPSBzb3VyY2UudGFyZ2V0Lm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudGFyZ2V0ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3BlcmlvZCddKSB7IHRoaXMucGVyaW9kID0gbmV3IGZoaXIuUGVyaW9kKHNvdXJjZS5wZXJpb2QpOyB9XHJcbiAgICBpZiAoc291cmNlWydyZWNvcmRlZCddKSB7IHRoaXMucmVjb3JkZWQgPSBuZXcgZmhpci5GaGlySW5zdGFudCh7dmFsdWU6IHNvdXJjZS5yZWNvcmRlZH0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZWNvcmRlZCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19yZWNvcmRlZCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnJlY29yZGVkKSB7IHRoaXMucmVjb3JkZWQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fcmVjb3JkZWQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5yZWNvcmRlZCA9IG5ldyBmaGlyLkZoaXJJbnN0YW50KHNvdXJjZS5fcmVjb3JkZWQgYXMgUGFydGlhbDxmaGlyLkZoaXJJbnN0YW50QXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydyZWFzb24nXSkgeyB0aGlzLnJlYXNvbiA9IHNvdXJjZS5yZWFzb24ubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZWFzb24gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYWN0aXZpdHknXSkgeyB0aGlzLmFjdGl2aXR5ID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5hY3Rpdml0eSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2xvY2F0aW9uJ10pIHsgdGhpcy5sb2NhdGlvbiA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UubG9jYXRpb24pOyB9XHJcbiAgICBpZiAoc291cmNlWydwb2xpY3knXSkgeyB0aGlzLnBvbGljeSA9IHNvdXJjZS5wb2xpY3kubWFwKCh4KSA9PiBuZXcgZmhpci5GaGlyVXJpKHt2YWx1ZTogeH0pKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucG9saWN5ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ19wb2xpY3knXSkge1xyXG4gICAgICBzb3VyY2UuX3BvbGljeS5mb3JFYWNoKCh4LGkpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5wb2xpY3kubGVuZ3RoID49IGkpIHsgaWYgKHgpIHsgdGhpcy5wb2xpY3lbaV0uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHgpOyB9IH1cclxuICAgICAgICBlbHNlIHsgaWYgKHgpIHsgdGhpcy5wb2xpY3kucHVzaChuZXcgZmhpci5GaGlyVXJpKHggYXMgUGFydGlhbDxmaGlyLkZoaXJVcmlBcmdzPikpOyB9IH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydhZ2VudCddKSB7IHRoaXMuYWdlbnQgPSBzb3VyY2UuYWdlbnQubWFwKCh4KSA9PiBuZXcgZmhpci5Qcm92ZW5hbmNlQWdlbnQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5hZ2VudCA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydlbnRpdHknXSkgeyB0aGlzLmVudGl0eSA9IHNvdXJjZS5lbnRpdHkubWFwKCh4KSA9PiBuZXcgZmhpci5Qcm92ZW5hbmNlRW50aXR5KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZW50aXR5ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3NpZ25hdHVyZSddKSB7IHRoaXMuc2lnbmF0dXJlID0gc291cmNlLnNpZ25hdHVyZS5tYXAoKHgpID0+IG5ldyBmaGlyLlNpZ25hdHVyZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnNpZ25hdHVyZSA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnUHJvdmVuYW5jZScgfVxyXG4gICAgdGhpcy52UlMoJ3Jlc291cmNlVHlwZScsZXhwKVxyXG4gICAgdGhpcy52UkEoJ3RhcmdldCcsZXhwKVxyXG4gICAgdGhpcy52T1MoJ3BlcmlvZCcsZXhwKVxyXG4gICAgdGhpcy52UlMoJ3JlY29yZGVkJyxleHApXHJcbiAgICB0aGlzLnZPQSgncmVhc29uJyxleHApXHJcbiAgICB0aGlzLnZPUygnYWN0aXZpdHknLGV4cClcclxuICAgIHRoaXMudk9TKCdsb2NhdGlvbicsZXhwKVxyXG4gICAgdGhpcy52T0EoJ3BvbGljeScsZXhwKVxyXG4gICAgdGhpcy52T0EoJ2FnZW50JyxleHApXHJcbiAgICB0aGlzLnZPQSgnZW50aXR5JyxleHApXHJcbiAgICB0aGlzLnZPQSgnc2lnbmF0dXJlJyxleHApXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=