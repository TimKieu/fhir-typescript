// <auto-generated/>
// Contents of: hl7.fhir.r2.core version: 1.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: DiagnosticReport
import * as fhir from '../fhir.js';
// @ts-ignore
import { DiagnosticReportStatusVsValidation } from '../fhirValueSets/DiagnosticReportStatusVsValidation.js';
/**
 * Many diagnostic services include images in the report as part of their service.
 */
export class DiagnosticReportImage extends fhir.BackboneElement {
    /**
     * Default constructor for DiagnosticReportImage - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['comment'] !== undefined) {
            this.comment = new fhir.FhirString({ value: source.comment }, options);
        }
        if (source['_comment']) {
            if (this.comment) {
                this.comment.addExtendedProperties(source._comment);
            }
            else {
                this.comment = new fhir.FhirString(source._comment, options);
            }
        }
        if (source['link']) {
            this.link = new fhir.Reference(source.link, options);
        }
        else {
            this.link = null;
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'DiagnosticReport.image';
        }
        iss.push(...this.vOS('comment', exp));
        iss.push(...this.vRS('link', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DiagnosticReportImage._fts_dataType = 'DiagnosticReportImage';
/**
 * The findings and interpretation of diagnostic  tests performed on patients, groups of patients, devices, and locations, and/or specimens derived from these. The report includes clinical context such as requesting and provider information, and some mix of atomic results, images, textual and coded interpretations, and formatted representation of diagnostic reports.
 */
export class DiagnosticReport extends fhir.DomainResource {
    /**
     * Default constructor for DiagnosticReport - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'DiagnosticReport';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x, options));
        }
        else {
            this.identifier = [];
        }
        if (source['status'] !== undefined) {
            this.status = new fhir.FhirCode({ value: source.status }, options);
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status, options);
            }
        }
        if (source['category']) {
            this.category = new fhir.CodeableConcept(source.category, options);
        }
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code, options);
        }
        else {
            this.code = null;
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject, options);
        }
        else {
            this.subject = null;
        }
        if (source['encounter']) {
            this.encounter = new fhir.Reference(source.encounter, options);
        }
        if (source['effective']) {
            this.effective = source.effective;
        }
        else if (source['effectiveDateTime'] !== undefined) {
            this.effective = new fhir.FhirDateTime({ value: source.effectiveDateTime }, options);
        }
        else if (source['effectivePeriod']) {
            this.effective = new fhir.Period(source.effectivePeriod, options);
        }
        else {
            this.effective = null;
        }
        if (source['issued'] !== undefined) {
            this.issued = new fhir.FhirInstant({ value: source.issued }, options);
        }
        else {
            this.issued = null;
        }
        if (source['_issued']) {
            if (this.issued) {
                this.issued.addExtendedProperties(source._issued);
            }
            else {
                this.issued = new fhir.FhirInstant(source._issued, options);
            }
        }
        if (source['performer']) {
            this.performer = new fhir.Reference(source.performer, options);
        }
        else {
            this.performer = null;
        }
        if (source['request']) {
            this.request = source.request.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.request = [];
        }
        if (source['specimen']) {
            this.specimen = source.specimen.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.specimen = [];
        }
        if (source['result']) {
            this.result = source.result.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.result = [];
        }
        if (source['imagingStudy']) {
            this.imagingStudy = source.imagingStudy.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.imagingStudy = [];
        }
        if (source['image']) {
            this.image = source.image.map((x) => new fhir.DiagnosticReportImage(x, options));
        }
        else {
            this.image = [];
        }
        if (source['conclusion'] !== undefined) {
            this.conclusion = new fhir.FhirString({ value: source.conclusion }, options);
        }
        if (source['_conclusion']) {
            if (this.conclusion) {
                this.conclusion.addExtendedProperties(source._conclusion);
            }
            else {
                this.conclusion = new fhir.FhirString(source._conclusion, options);
            }
        }
        if (source['codedDiagnosis']) {
            this.codedDiagnosis = source.codedDiagnosis.map((x) => new fhir.CodeableConcept(x, options));
        }
        else {
            this.codedDiagnosis = [];
        }
        if (source['presentedForm']) {
            this.presentedForm = source.presentedForm.map((x) => new fhir.Attachment(x, options));
        }
        else {
            this.presentedForm = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'DiagnosticReport';
        }
        iss.push(...this.vOA('identifier', exp));
        iss.push(...this.vRSV('status', exp, 'DiagnosticReportStatus', DiagnosticReportStatusVsValidation, 'r'));
        iss.push(...this.vOS('category', exp));
        iss.push(...this.vRS('code', exp));
        iss.push(...this.vRS('subject', exp));
        iss.push(...this.vOS('encounter', exp));
        iss.push(...this.vRS('effective', exp));
        iss.push(...this.vRS('issued', exp));
        iss.push(...this.vRS('performer', exp));
        iss.push(...this.vOA('request', exp));
        iss.push(...this.vOA('specimen', exp));
        iss.push(...this.vOA('result', exp));
        iss.push(...this.vOA('imagingStudy', exp));
        iss.push(...this.vOA('image', exp));
        iss.push(...this.vOS('conclusion', exp));
        iss.push(...this.vOA('codedDiagnosis', exp));
        iss.push(...this.vOA('presentedForm', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
DiagnosticReport._fts_dataType = 'DiagnosticReport';
/**
 * Internal flag to properly serialize choice-type element DiagnosticReport.effective[x]
 */
DiagnosticReport._fts_effectiveIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGlhZ25vc3RpY1JlcG9ydC5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvRGlhZ25vc3RpY1JlcG9ydC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQyxrQ0FBa0M7QUFFbEMsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFJbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSxrQ0FBa0MsRUFBRSxNQUFNLHdEQUF3RCxDQUFDO0FBbUI1Rzs7R0FFRztBQUNILE1BQU0sT0FBTyxxQkFBc0IsU0FBUSxJQUFJLENBQUMsZUFBZTtJQWE3RDs7T0FFRztJQUNILFlBQVksU0FBNEMsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDbEcsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsS0FBSyxTQUFTLEVBQUU7WUFBRSxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsT0FBTyxFQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FBRTtRQUM5RyxJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUN0QixJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUU7Z0JBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsUUFBUyxDQUFDLENBQUM7YUFBRTtpQkFDdEU7Z0JBQUUsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLFFBQXdDLEVBQUUsT0FBTyxDQUFDLENBQUM7YUFBRTtTQUN2RztRQUNELElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxD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LENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ2xDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3JDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3BDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3JDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3RDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3BDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ25DLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3hDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDNUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsZUFBZSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDM0MsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDOztBQTVKRDs7R0FFRztBQUM2Qiw4QkFBYSxHQUFVLGtCQUFrQixDQUFDO0FBaUMxRTs7R0FFRztBQUN1Qix1Q0FBc0IsR0FBUSxJQUFJLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjIuY29yZSB2ZXJzaW9uOiAxLjAuMlxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IERpYWdub3N0aWNSZXBvcnRcclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IERpYWdub3N0aWNSZXBvcnRTdGF0dXNDb2RlcywgIERpYWdub3N0aWNSZXBvcnRTdGF0dXNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvRGlhZ25vc3RpY1JlcG9ydFN0YXR1c0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBEaWFnbm9zdGljUmVwb3J0U3RhdHVzVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9EaWFnbm9zdGljUmVwb3J0U3RhdHVzVnNWYWxpZGF0aW9uLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIERpYWdub3N0aWNSZXBvcnRJbWFnZSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBEaWFnbm9zdGljUmVwb3J0SW1hZ2VBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgcHJvdmlkZXIgb2YgdGhlIHJlcG9ydCBzaG91bGQgbWFrZSBhIGNvbW1lbnQgYWJvdXQgZWFjaCBpbWFnZSBpbmNsdWRlZCBpbiB0aGUgcmVwb3J0LlxyXG4gICAqL1xyXG4gIGNvbW1lbnQ/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogRGlhZ25vc3RpY1JlcG9ydC5pbWFnZS5jb21tZW50XHJcbiAgICovXHJcbiAgX2NvbW1lbnQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFJlZmVyZW5jZSB0byB0aGUgaW1hZ2Ugc291cmNlLlxyXG4gICAqL1xyXG4gIGxpbms6IGZoaXIuUmVmZXJlbmNlQXJnc3xudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogTWFueSBkaWFnbm9zdGljIHNlcnZpY2VzIGluY2x1ZGUgaW1hZ2VzIGluIHRoZSByZXBvcnQgYXMgcGFydCBvZiB0aGVpciBzZXJ2aWNlLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIERpYWdub3N0aWNSZXBvcnRJbWFnZSBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0RpYWdub3N0aWNSZXBvcnRJbWFnZSc7XHJcbiAgLyoqXHJcbiAgICogVGhlIHByb3ZpZGVyIG9mIHRoZSByZXBvcnQgc2hvdWxkIG1ha2UgYSBjb21tZW50IGFib3V0IGVhY2ggaW1hZ2UgaW5jbHVkZWQgaW4gdGhlIHJlcG9ydC5cclxuICAgKi9cclxuICBwdWJsaWMgY29tbWVudD86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUmVmZXJlbmNlIHRvIHRoZSBpbWFnZSBzb3VyY2UuXHJcbiAgICovXHJcbiAgcHVibGljIGxpbms6IGZoaXIuUmVmZXJlbmNlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgRGlhZ25vc3RpY1JlcG9ydEltYWdlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8RGlhZ25vc3RpY1JlcG9ydEltYWdlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2NvbW1lbnQnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuY29tbWVudCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuY29tbWVudH0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfY29tbWVudCddKSB7XHJcbiAgICAgIGlmICh0aGlzLmNvbW1lbnQpIHsgdGhpcy5jb21tZW50LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2NvbW1lbnQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5jb21tZW50ID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2NvbW1lbnQgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2xpbmsnXSkgeyB0aGlzLmxpbmsgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmxpbmssIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5saW5rID0gbnVsbDsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0RpYWdub3N0aWNSZXBvcnQuaW1hZ2UnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdjb21tZW50JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdsaW5rJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBEaWFnbm9zdGljUmVwb3J0IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIERpYWdub3N0aWNSZXBvcnRBcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJEaWFnbm9zdGljUmVwb3J0XCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE5lZWQgdG8ga25vdyB3aGF0IGlkZW50aWZpZXIgdG8gdXNlIHdoZW4gbWFraW5nIHF1ZXJpZXMgYWJvdXQgdGhpcyByZXBvcnQgZnJvbSB0aGUgc291cmNlIGxhYm9yYXRvcnksIGFuZCBmb3IgbGlua2luZyB0byB0aGUgcmVwb3J0IG91dHNpZGUgRkhJUiBjb250ZXh0LlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERpYWdub3N0aWMgc2VydmljZXMgcm91dGluZWx5IGlzc3VlIHByb3Zpc2lvbmFsL2luY29tcGxldGUgcmVwb3J0cywgYW5kIHNvbWV0aW1lcyB3aXRoZHJhdyBwcmV2aW91c2x5IHJlbGVhc2VkIHJlcG9ydHMuXHJcbiAgICovXHJcbiAgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPERpYWdub3N0aWNSZXBvcnRTdGF0dXNDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogRGlhZ25vc3RpY1JlcG9ydC5zdGF0dXNcclxuICAgKi9cclxuICBfc3RhdHVzPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBBIGNvZGUgdGhhdCBjbGFzc2lmaWVzIHRoZSBjbGluaWNhbCBkaXNjaXBsaW5lLCBkZXBhcnRtZW50IG9yIGRpYWdub3N0aWMgc2VydmljZSB0aGF0IGNyZWF0ZWQgdGhlIHJlcG9ydCAoZS5nLiBjYXJkaW9sb2d5LCBiaW9jaGVtaXN0cnksIGhlbWF0b2xvZ3ksIE1SSSkuIFRoaXMgaXMgdXNlZCBmb3Igc2VhcmNoaW5nLCBzb3J0aW5nIGFuZCBkaXNwbGF5IHB1cnBvc2VzLlxyXG4gICAqL1xyXG4gIGNhdGVnb3J5PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGNvZGUgb3IgbmFtZSB0aGF0IGRlc2NyaWJlcyB0aGlzIGRpYWdub3N0aWMgcmVwb3J0LlxyXG4gICAqL1xyXG4gIGNvZGU6IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFNIQUxMIGtub3cgdGhlIHN1YmplY3QgY29udGV4dC5cclxuICAgKi9cclxuICBzdWJqZWN0OiBmaGlyLlJlZmVyZW5jZUFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgbGluayB0byB0aGUgaGVhbHRoIGNhcmUgZXZlbnQgKGVuY291bnRlcikgd2hlbiB0aGUgb3JkZXIgd2FzIG1hZGUuXHJcbiAgICovXHJcbiAgZW5jb3VudGVyPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBOZWVkIHRvIGtub3cgd2hlcmUgaW4gdGhlIHBhdGllbnQgaGlzdG9yeSB0byBmaWxlL3ByZXNlbnQgdGhpcyByZXBvcnQuXHJcbiAgICovXHJcbiAgZWZmZWN0aXZlPzogZmhpci5GaGlyRGF0ZVRpbWV8Zmhpci5QZXJpb2R8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE5lZWQgdG8ga25vdyB3aGVyZSBpbiB0aGUgcGF0aWVudCBoaXN0b3J5IHRvIGZpbGUvcHJlc2VudCB0aGlzIHJlcG9ydC5cclxuICAgKi9cclxuICBlZmZlY3RpdmVEYXRlVGltZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTmVlZCB0byBrbm93IHdoZXJlIGluIHRoZSBwYXRpZW50IGhpc3RvcnkgdG8gZmlsZS9wcmVzZW50IHRoaXMgcmVwb3J0LlxyXG4gICAqL1xyXG4gIGVmZmVjdGl2ZVBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ2xpbmljaWFucyBuZWVkIHRvIGJlIGFibGUgdG8gY2hlY2sgdGhlIGRhdGUgdGhhdCB0aGUgcmVwb3J0IHdhcyByZWxlYXNlZC5cclxuICAgKi9cclxuICBpc3N1ZWQ6IGZoaXIuRmhpckluc3RhbnR8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogRGlhZ25vc3RpY1JlcG9ydC5pc3N1ZWRcclxuICAgKi9cclxuICBfaXNzdWVkPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBOZWVkIHRvIGtub3cgd2hvbSB0byBjb250YWN0IGlmIHRoZXJlIGFyZSBxdWVyaWVzIGFib3V0IHRoZSByZXN1bHRzLiBBbHNvIG1heSBuZWVkIHRvIHRyYWNrIHRoZSBzb3VyY2Ugb2YgcmVwb3J0cyBmb3Igc2Vjb25kYXJ5IGRhdGEgYW5hbHlzaXMuXHJcbiAgICovXHJcbiAgcGVyZm9ybWVyOiBmaGlyLlJlZmVyZW5jZUFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBOZWVkIHRvIGJlIGFibGUgdG8gdHJhY2sgY29tcGxldGlvbiBvZiByZXF1ZXN0cyBiYXNlZCBvbiByZXBvcnRzIGlzc3VlZCBhbmQgYWxzbyB0byByZXBvcnQgd2hhdCBkaWFnbm9zdGljIHRlc3RzIHdlcmUgcmVxdWVzdGVkIChub3QgYWx3YXlzIHRoZSBzYW1lIGFzIHdoYXQgaXMgZGVsaXZlcmVkKS5cclxuICAgKi9cclxuICByZXF1ZXN0PzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE5lZWQgdG8gYmUgYWJsZSB0byByZXBvcnQgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGNvbGxlY3RlZCBzcGVjaW1lbnMgb24gd2hpY2ggdGhlIHJlcG9ydCBpcyBiYXNlZC5cclxuICAgKi9cclxuICBzcGVjaW1lbj86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBOZWVkIHRvIHN1cHBvcnQgaW5kaXZpZHVhbCByZXN1bHRzLCBvciByZXBvcnQgZ3JvdXBzIG9mIHJlc3VsdHMsIHdoZXJlIHRoZSByZXN1bHQgZ3JvdXBpbmcgaXMgYXJiaXRyYXJ5LCBidXQgbWVhbmluZ2Z1bC4gVGhpcyBzdHJ1Y3R1cmUgaXMgcmVjdXJzaXZlIC0gb2JzZXJ2YXRpb25zIGNhbiBjb250YWluIG9ic2VydmF0aW9ucy5cclxuICAgKi9cclxuICByZXN1bHQ/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogT25lIG9yIG1vcmUgbGlua3MgdG8gZnVsbCBkZXRhaWxzIG9mIGFueSBpbWFnaW5nIHBlcmZvcm1lZCBkdXJpbmcgdGhlIGRpYWdub3N0aWMgaW52ZXN0aWdhdGlvbi4gVHlwaWNhbGx5LCB0aGlzIGlzIGltYWdpbmcgcGVyZm9ybWVkIGJ5IERJQ09NIGVuYWJsZWQgbW9kYWxpdGllcywgYnV0IHRoaXMgaXMgbm90IHJlcXVpcmVkLiBBIGZ1bGx5IGVuYWJsZWQgUEFDUyB2aWV3ZXIgY2FuIHVzZSB0aGlzIGluZm9ybWF0aW9uIHRvIHByb3ZpZGUgdmlld3Mgb2YgdGhlIHNvdXJjZSBpbWFnZXMuXHJcbiAgICovXHJcbiAgaW1hZ2luZ1N0dWR5PzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE1hbnkgZGlhZ25vc3RpYyBzZXJ2aWNlcyBpbmNsdWRlIGltYWdlcyBpbiB0aGUgcmVwb3J0IGFzIHBhcnQgb2YgdGhlaXIgc2VydmljZS5cclxuICAgKi9cclxuICBpbWFnZT86IGZoaXIuRGlhZ25vc3RpY1JlcG9ydEltYWdlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBOZWVkIHRvIGJlIGFibGUgdG8gcHJvdmlkZSBhIGNvbmNsdXNpb24gdGhhdCBpcyBub3QgbG9zdCBhbW9uZyB0aGUgYmFzaWMgcmVzdWx0IGRhdGEuXHJcbiAgICovXHJcbiAgY29uY2x1c2lvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBEaWFnbm9zdGljUmVwb3J0LmNvbmNsdXNpb25cclxuICAgKi9cclxuICBfY29uY2x1c2lvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQ29kZXMgZm9yIHRoZSBjb25jbHVzaW9uLlxyXG4gICAqL1xyXG4gIGNvZGVkRGlhZ25vc2lzPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEdpdmVzIExhYm9yYXRvcnkgdGhlIGFiaWxpdHkgdG8gcHJvdmlkZSBpdHMgb3duIGZ1bGx5IGZvcm1hdHRlZCByZXBvcnQgZm9yIGNsaW5pY2FsIGZpZGVsaXR5LlxyXG4gICAqL1xyXG4gIHByZXNlbnRlZEZvcm0/OiBmaGlyLkF0dGFjaG1lbnRBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlIGZpbmRpbmdzIGFuZCBpbnRlcnByZXRhdGlvbiBvZiBkaWFnbm9zdGljICB0ZXN0cyBwZXJmb3JtZWQgb24gcGF0aWVudHMsIGdyb3VwcyBvZiBwYXRpZW50cywgZGV2aWNlcywgYW5kIGxvY2F0aW9ucywgYW5kL29yIHNwZWNpbWVucyBkZXJpdmVkIGZyb20gdGhlc2UuIFRoZSByZXBvcnQgaW5jbHVkZXMgY2xpbmljYWwgY29udGV4dCBzdWNoIGFzIHJlcXVlc3RpbmcgYW5kIHByb3ZpZGVyIGluZm9ybWF0aW9uLCBhbmQgc29tZSBtaXggb2YgYXRvbWljIHJlc3VsdHMsIGltYWdlcywgdGV4dHVhbCBhbmQgY29kZWQgaW50ZXJwcmV0YXRpb25zLCBhbmQgZm9ybWF0dGVkIHJlcHJlc2VudGF0aW9uIG9mIGRpYWdub3N0aWMgcmVwb3J0cy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBEaWFnbm9zdGljUmVwb3J0IGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdEaWFnbm9zdGljUmVwb3J0JztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIkRpYWdub3N0aWNSZXBvcnRcIjtcclxuICAvKipcclxuICAgKiBOZWVkIHRvIGtub3cgd2hhdCBpZGVudGlmaWVyIHRvIHVzZSB3aGVuIG1ha2luZyBxdWVyaWVzIGFib3V0IHRoaXMgcmVwb3J0IGZyb20gdGhlIHNvdXJjZSBsYWJvcmF0b3J5LCBhbmQgZm9yIGxpbmtpbmcgdG8gdGhlIHJlcG9ydCBvdXRzaWRlIEZISVIgY29udGV4dC5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcjogZmhpci5JZGVudGlmaWVyW107XHJcbiAgLyoqXHJcbiAgICogRGlhZ25vc3RpYyBzZXJ2aWNlcyByb3V0aW5lbHkgaXNzdWUgcHJvdmlzaW9uYWwvaW5jb21wbGV0ZSByZXBvcnRzLCBhbmQgc29tZXRpbWVzIHdpdGhkcmF3IHByZXZpb3VzbHkgcmVsZWFzZWQgcmVwb3J0cy5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPERpYWdub3N0aWNSZXBvcnRTdGF0dXNDb2RlVHlwZT58bnVsbDtcclxuICAvKipcclxuICAgKiBBIGNvZGUgdGhhdCBjbGFzc2lmaWVzIHRoZSBjbGluaWNhbCBkaXNjaXBsaW5lLCBkZXBhcnRtZW50IG9yIGRpYWdub3N0aWMgc2VydmljZSB0aGF0IGNyZWF0ZWQgdGhlIHJlcG9ydCAoZS5nLiBjYXJkaW9sb2d5LCBiaW9jaGVtaXN0cnksIGhlbWF0b2xvZ3ksIE1SSSkuIFRoaXMgaXMgdXNlZCBmb3Igc2VhcmNoaW5nLCBzb3J0aW5nIGFuZCBkaXNwbGF5IHB1cnBvc2VzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjYXRlZ29yeT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGNvZGUgb3IgbmFtZSB0aGF0IGRlc2NyaWJlcyB0aGlzIGRpYWdub3N0aWMgcmVwb3J0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb2RlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFNIQUxMIGtub3cgdGhlIHN1YmplY3QgY29udGV4dC5cclxuICAgKi9cclxuICBwdWJsaWMgc3ViamVjdDogZmhpci5SZWZlcmVuY2V8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgbGluayB0byB0aGUgaGVhbHRoIGNhcmUgZXZlbnQgKGVuY291bnRlcikgd2hlbiB0aGUgb3JkZXIgd2FzIG1hZGUuXHJcbiAgICovXHJcbiAgcHVibGljIGVuY291bnRlcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBOZWVkIHRvIGtub3cgd2hlcmUgaW4gdGhlIHBhdGllbnQgaGlzdG9yeSB0byBmaWxlL3ByZXNlbnQgdGhpcyByZXBvcnQuXHJcbiAgICovXHJcbiAgcHVibGljIGVmZmVjdGl2ZTogKGZoaXIuRmhpckRhdGVUaW1lfGZoaXIuUGVyaW9kKXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgRGlhZ25vc3RpY1JlcG9ydC5lZmZlY3RpdmVbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfZWZmZWN0aXZlSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogQ2xpbmljaWFucyBuZWVkIHRvIGJlIGFibGUgdG8gY2hlY2sgdGhlIGRhdGUgdGhhdCB0aGUgcmVwb3J0IHdhcyByZWxlYXNlZC5cclxuICAgKi9cclxuICBwdWJsaWMgaXNzdWVkOiBmaGlyLkZoaXJJbnN0YW50fG51bGw7XHJcbiAgLyoqXHJcbiAgICogTmVlZCB0byBrbm93IHdob20gdG8gY29udGFjdCBpZiB0aGVyZSBhcmUgcXVlcmllcyBhYm91dCB0aGUgcmVzdWx0cy4gQWxzbyBtYXkgbmVlZCB0byB0cmFjayB0aGUgc291cmNlIG9mIHJlcG9ydHMgZm9yIHNlY29uZGFyeSBkYXRhIGFuYWx5c2lzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwZXJmb3JtZXI6IGZoaXIuUmVmZXJlbmNlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogTmVlZCB0byBiZSBhYmxlIHRvIHRyYWNrIGNvbXBsZXRpb24gb2YgcmVxdWVzdHMgYmFzZWQgb24gcmVwb3J0cyBpc3N1ZWQgYW5kIGFsc28gdG8gcmVwb3J0IHdoYXQgZGlhZ25vc3RpYyB0ZXN0cyB3ZXJlIHJlcXVlc3RlZCAobm90IGFsd2F5cyB0aGUgc2FtZSBhcyB3aGF0IGlzIGRlbGl2ZXJlZCkuXHJcbiAgICovXHJcbiAgcHVibGljIHJlcXVlc3Q6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogTmVlZCB0byBiZSBhYmxlIHRvIHJlcG9ydCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgY29sbGVjdGVkIHNwZWNpbWVucyBvbiB3aGljaCB0aGUgcmVwb3J0IGlzIGJhc2VkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzcGVjaW1lbjogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBOZWVkIHRvIHN1cHBvcnQgaW5kaXZpZHVhbCByZXN1bHRzLCBvciByZXBvcnQgZ3JvdXBzIG9mIHJlc3VsdHMsIHdoZXJlIHRoZSByZXN1bHQgZ3JvdXBpbmcgaXMgYXJiaXRyYXJ5LCBidXQgbWVhbmluZ2Z1bC4gVGhpcyBzdHJ1Y3R1cmUgaXMgcmVjdXJzaXZlIC0gb2JzZXJ2YXRpb25zIGNhbiBjb250YWluIG9ic2VydmF0aW9ucy5cclxuICAgKi9cclxuICBwdWJsaWMgcmVzdWx0OiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIE9uZSBvciBtb3JlIGxpbmtzIHRvIGZ1bGwgZGV0YWlscyBvZiBhbnkgaW1hZ2luZyBwZXJmb3JtZWQgZHVyaW5nIHRoZSBkaWFnbm9zdGljIGludmVzdGlnYXRpb24uIFR5cGljYWxseSwgdGhpcyBpcyBpbWFnaW5nIHBlcmZvcm1lZCBieSBESUNPTSBlbmFibGVkIG1vZGFsaXRpZXMsIGJ1dCB0aGlzIGlzIG5vdCByZXF1aXJlZC4gQSBmdWxseSBlbmFibGVkIFBBQ1Mgdmlld2VyIGNhbiB1c2UgdGhpcyBpbmZvcm1hdGlvbiB0byBwcm92aWRlIHZpZXdzIG9mIHRoZSBzb3VyY2UgaW1hZ2VzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpbWFnaW5nU3R1ZHk6IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogTWFueSBkaWFnbm9zdGljIHNlcnZpY2VzIGluY2x1ZGUgaW1hZ2VzIGluIHRoZSByZXBvcnQgYXMgcGFydCBvZiB0aGVpciBzZXJ2aWNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpbWFnZTogZmhpci5EaWFnbm9zdGljUmVwb3J0SW1hZ2VbXTtcclxuICAvKipcclxuICAgKiBOZWVkIHRvIGJlIGFibGUgdG8gcHJvdmlkZSBhIGNvbmNsdXNpb24gdGhhdCBpcyBub3QgbG9zdCBhbW9uZyB0aGUgYmFzaWMgcmVzdWx0IGRhdGEuXHJcbiAgICovXHJcbiAgcHVibGljIGNvbmNsdXNpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENvZGVzIGZvciB0aGUgY29uY2x1c2lvbi5cclxuICAgKi9cclxuICBwdWJsaWMgY29kZWREaWFnbm9zaXM6IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogR2l2ZXMgTGFib3JhdG9yeSB0aGUgYWJpbGl0eSB0byBwcm92aWRlIGl0cyBvd24gZnVsbHkgZm9ybWF0dGVkIHJlcG9ydCBmb3IgY2xpbmljYWwgZmlkZWxpdHkuXHJcbiAgICovXHJcbiAgcHVibGljIHByZXNlbnRlZEZvcm06IGZoaXIuQXR0YWNobWVudFtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIERpYWdub3N0aWNSZXBvcnQgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxEaWFnbm9zdGljUmVwb3J0QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ0RpYWdub3N0aWNSZXBvcnQnO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IHNvdXJjZS5pZGVudGlmaWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuSWRlbnRpZmllcih4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmlkZW50aWZpZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RhdHVzJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPERpYWdub3N0aWNSZXBvcnRTdGF0dXNDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2Uuc3RhdHVzfSwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zdGF0dXMnXSkge1xyXG4gICAgICBpZiAodGhpcy5zdGF0dXMpIHsgdGhpcy5zdGF0dXMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc3RhdHVzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8RGlhZ25vc3RpY1JlcG9ydFN0YXR1c0NvZGVUeXBlPihzb3VyY2UuX3N0YXR1cyBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnY2F0ZWdvcnknXSkgeyB0aGlzLmNhdGVnb3J5ID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jYXRlZ29yeSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvZGUnXSkgeyB0aGlzLmNvZGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmNvZGUsIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb2RlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3ViamVjdCddKSB7IHRoaXMuc3ViamVjdCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2Uuc3ViamVjdCwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN1YmplY3QgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydlbmNvdW50ZXInXSkgeyB0aGlzLmVuY291bnRlciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuZW5jb3VudGVyLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZWZmZWN0aXZlJ10pIHsgdGhpcy5lZmZlY3RpdmUgPSBzb3VyY2UuZWZmZWN0aXZlOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2VmZmVjdGl2ZURhdGVUaW1lJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLmVmZmVjdGl2ZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5lZmZlY3RpdmVEYXRlVGltZX0sIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2VmZmVjdGl2ZVBlcmlvZCddKSB7IHRoaXMuZWZmZWN0aXZlID0gbmV3IGZoaXIuUGVyaW9kKHNvdXJjZS5lZmZlY3RpdmVQZXJpb2QsIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5lZmZlY3RpdmUgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydpc3N1ZWQnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuaXNzdWVkID0gbmV3IGZoaXIuRmhpckluc3RhbnQoe3ZhbHVlOiBzb3VyY2UuaXNzdWVkfSwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmlzc3VlZCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19pc3N1ZWQnXSkge1xyXG4gICAgICBpZiAodGhpcy5pc3N1ZWQpIHsgdGhpcy5pc3N1ZWQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5faXNzdWVkISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuaXNzdWVkID0gbmV3IGZoaXIuRmhpckluc3RhbnQoc291cmNlLl9pc3N1ZWQgYXMgUGFydGlhbDxmaGlyLkZoaXJJbnN0YW50QXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydwZXJmb3JtZXInXSkgeyB0aGlzLnBlcmZvcm1lciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UucGVyZm9ybWVyLCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucGVyZm9ybWVyID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVxdWVzdCddKSB7IHRoaXMucmVxdWVzdCA9IHNvdXJjZS5yZXF1ZXN0Lm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVxdWVzdCA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydzcGVjaW1lbiddKSB7IHRoaXMuc3BlY2ltZW4gPSBzb3VyY2Uuc3BlY2ltZW4ubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zcGVjaW1lbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydyZXN1bHQnXSkgeyB0aGlzLnJlc3VsdCA9IHNvdXJjZS5yZXN1bHQubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZXN1bHQgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaW1hZ2luZ1N0dWR5J10pIHsgdGhpcy5pbWFnaW5nU3R1ZHkgPSBzb3VyY2UuaW1hZ2luZ1N0dWR5Lm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaW1hZ2luZ1N0dWR5ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2ltYWdlJ10pIHsgdGhpcy5pbWFnZSA9IHNvdXJjZS5pbWFnZS5tYXAoKHgpID0+IG5ldyBmaGlyLkRpYWdub3N0aWNSZXBvcnRJbWFnZSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmltYWdlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvbmNsdXNpb24nXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuY29uY2x1c2lvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuY29uY2x1c2lvbn0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfY29uY2x1c2lvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLmNvbmNsdXNpb24pIHsgdGhpcy5jb25jbHVzaW9uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2NvbmNsdXNpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5jb25jbHVzaW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX2NvbmNsdXNpb24gYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2NvZGVkRGlhZ25vc2lzJ10pIHsgdGhpcy5jb2RlZERpYWdub3NpcyA9IHNvdXJjZS5jb2RlZERpYWdub3Npcy5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvZGVkRGlhZ25vc2lzID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3ByZXNlbnRlZEZvcm0nXSkgeyB0aGlzLnByZXNlbnRlZEZvcm0gPSBzb3VyY2UucHJlc2VudGVkRm9ybS5tYXAoKHgpID0+IG5ldyBmaGlyLkF0dGFjaG1lbnQoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wcmVzZW50ZWRGb3JtID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdEaWFnbm9zdGljUmVwb3J0JyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnaWRlbnRpZmllcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSU1YoJ3N0YXR1cycsZXhwLCdEaWFnbm9zdGljUmVwb3J0U3RhdHVzJyxEaWFnbm9zdGljUmVwb3J0U3RhdHVzVnNWYWxpZGF0aW9uLCdyJykpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2NhdGVnb3J5JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdjb2RlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdzdWJqZWN0JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdlbmNvdW50ZXInLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ2VmZmVjdGl2ZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygnaXNzdWVkJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdwZXJmb3JtZXInLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3JlcXVlc3QnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3NwZWNpbWVuJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdyZXN1bHQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2ltYWdpbmdTdHVkeScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnaW1hZ2UnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2NvbmNsdXNpb24nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2NvZGVkRGlhZ25vc2lzJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdwcmVzZW50ZWRGb3JtJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbiJdfQ==