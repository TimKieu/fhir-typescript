// <auto-generated/>
// Contents of: hl7.fhir.r2.core version: 1.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: MedicationAdministration
import * as fhir from '../fhir.js';
// @ts-ignore
import { MedicationAdminStatusVsValidation } from '../fhirValueSets/MedicationAdminStatusVsValidation.js';
/**
 * Describes the medication dosage information details e.g. dose, rate, site, route, etc.
 */
export class MedicationAdministrationDosage extends fhir.BackboneElement {
    /**
     * Default constructor for MedicationAdministrationDosage - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['text']) {
            this.text = new fhir.FhirString({ value: source.text });
        }
        if (source['_text']) {
            if (this.text) {
                this.text.addExtendedProperties(source._text);
            }
            else {
                this.text = new fhir.FhirString(source._text);
            }
        }
        if (source['site']) {
            this.site = source.site;
        }
        else if (source['siteCodeableConcept']) {
            this.site = new fhir.CodeableConcept(source.siteCodeableConcept);
        }
        else if (source['siteReference']) {
            this.site = new fhir.Reference(source.siteReference);
        }
        if (source['route']) {
            this.route = new fhir.CodeableConcept(source.route);
        }
        if (source['method']) {
            this.method = new fhir.CodeableConcept(source.method);
        }
        if (source['quantity']) {
            this.quantity = new fhir.Quantity(source.quantity);
        }
        if (source['rate']) {
            this.rate = source.rate;
        }
        else if (source['rateRatio']) {
            this.rate = new fhir.Ratio(source.rateRatio);
        }
        else if (source['rateRange']) {
            this.rate = new fhir.Range(source.rateRange);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicationAdministration.dosage';
        }
        this.vOS('text', exp);
        this.vOS('site', exp);
        this.vOS('route', exp);
        this.vOS('method', exp);
        this.vOS('quantity', exp);
        this.vOS('rate', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicationAdministrationDosage._fts_dataType = 'MedicationAdministrationDosage';
/**
 * Internal flag to properly serialize choice-type element MedicationAdministration.dosage.site[x]
 */
MedicationAdministrationDosage._fts_siteIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element MedicationAdministration.dosage.rate[x]
 */
MedicationAdministrationDosage._fts_rateIsChoice = true;
/**
 * Describes the event of a patient consuming or otherwise being administered a medication.  This may be as simple as swallowing a tablet or it may be a long running infusion.  Related resources tie this event to the authorizing prescription, and the specific encounter between patient and health care practitioner.
 */
export class MedicationAdministration extends fhir.DomainResource {
    /**
     * Default constructor for MedicationAdministration - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'MedicationAdministration';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['patient']) {
            this.patient = new fhir.Reference(source.patient);
        }
        else {
            this.patient = null;
        }
        if (source['practitioner']) {
            this.practitioner = new fhir.Reference(source.practitioner);
        }
        if (source['encounter']) {
            this.encounter = new fhir.Reference(source.encounter);
        }
        if (source['prescription']) {
            this.prescription = new fhir.Reference(source.prescription);
        }
        if (source['wasNotGiven']) {
            this.wasNotGiven = new fhir.FhirBoolean({ value: source.wasNotGiven });
        }
        if (source['_wasNotGiven']) {
            if (this.wasNotGiven) {
                this.wasNotGiven.addExtendedProperties(source._wasNotGiven);
            }
            else {
                this.wasNotGiven = new fhir.FhirBoolean(source._wasNotGiven);
            }
        }
        if (source['reasonNotGiven']) {
            this.reasonNotGiven = source.reasonNotGiven.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.reasonNotGiven = [];
        }
        if (source['reasonGiven']) {
            this.reasonGiven = source.reasonGiven.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.reasonGiven = [];
        }
        if (source['effectiveTime']) {
            this.effectiveTime = source.effectiveTime;
        }
        else if (source['effectiveTimeDateTime']) {
            this.effectiveTime = new fhir.FhirDateTime({ value: source.effectiveTimeDateTime });
        }
        else if (source['effectiveTimePeriod']) {
            this.effectiveTime = new fhir.Period(source.effectiveTimePeriod);
        }
        else {
            this.effectiveTime = null;
        }
        if (source['medication']) {
            this.medication = source.medication;
        }
        else if (source['medicationCodeableConcept']) {
            this.medication = new fhir.CodeableConcept(source.medicationCodeableConcept);
        }
        else if (source['medicationReference']) {
            this.medication = new fhir.Reference(source.medicationReference);
        }
        else {
            this.medication = null;
        }
        if (source['device']) {
            this.device = source.device.map((x) => new fhir.Reference(x));
        }
        else {
            this.device = [];
        }
        if (source['note']) {
            this.note = new fhir.FhirString({ value: source.note });
        }
        if (source['_note']) {
            if (this.note) {
                this.note.addExtendedProperties(source._note);
            }
            else {
                this.note = new fhir.FhirString(source._note);
            }
        }
        if (source['dosage']) {
            this.dosage = new fhir.MedicationAdministrationDosage(source.dosage);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicationAdministration';
        }
        this.vRS('resourceType', exp);
        this.vOA('identifier', exp);
        this.vRSV('status', exp, 'MedicationAdminStatus', MedicationAdminStatusVsValidation, 'r');
        this.vRS('patient', exp);
        this.vOS('practitioner', exp);
        this.vOS('encounter', exp);
        this.vOS('prescription', exp);
        this.vOS('wasNotGiven', exp);
        this.vOA('reasonNotGiven', exp);
        this.vOA('reasonGiven', exp);
        this.vRS('effectiveTime', exp);
        this.vRS('medication', exp);
        this.vOA('device', exp);
        this.vOS('note', exp);
        this.vOS('dosage', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicationAdministration._fts_dataType = 'MedicationAdministration';
/**
 * Internal flag to properly serialize choice-type element MedicationAdministration.effectiveTime[x]
 */
MedicationAdministration._fts_effectiveTimeIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element MedicationAdministration.medication[x]
 */
MedicationAdministration._fts_medicationIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVkaWNhdGlvbkFkbWluaXN0cmF0aW9uLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9NZWRpY2F0aW9uQWRtaW5pc3RyYXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsMENBQTBDO0FBRTFDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBSW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsaUNBQWlDLEVBQUUsTUFBTSx1REFBdUQsQ0FBQztBQW1EMUc7O0dBRUc7QUFDSCxNQUFNLE9BQU8sOEJBQStCLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFxQ3RFOztPQUVHO0lBQ0gsWUFBWSxTQUFxRCxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUMzRyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLElBQUksRUFBQyxDQUFDLENBQUM7U0FBRTtRQUM5RSxJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUNuQixJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUU7Z0JBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsS0FBTSxDQUFDLENBQUM7YUFBRTtpQkFDN0Q7Z0JBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLEtBQXFDLENBQUMsQ0FBQzthQUFFO1NBQ3hGO1FBQ0QsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUM7U0FBRTthQUMzQyxJQUFJLE1BQU0sQ0FB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QUMsdUJBQXVCLEVBQUMsaUNBQWlDLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDckYsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDdkIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDNUIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDekIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDNUIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxhQUFhLEVBQUMsR0FBRyxDQUFDLENBQUE7UUFDM0IsSUFBSSxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUM5QixJQUFJLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUMzQixJQUFJLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUM3QixJQUFJLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUMxQixJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUN0QixJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUNwQixJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBQyxHQUFHLENBQUMsQ0FBQTtRQUN0QixPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOztBQTNJRDs7R0FFRztBQUM2QixzQ0FBYSxHQUFVLDBCQUEwQixDQUFDO0FBNkNsRjs7R0FFRztBQUN1QixtREFBMEIsR0FBUSxJQUFJLENBQUM7QUFLakU7O0dBRUc7QUFDdUIsZ0RBQXVCLEdBQVEsSUFBSSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnIyLmNvcmUgdmVyc2lvbjogMS4wLjJcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBNZWRpY2F0aW9uQWRtaW5pc3RyYXRpb25cclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IE1lZGljYXRpb25BZG1pblN0YXR1c0NvZGVzLCAgTWVkaWNhdGlvbkFkbWluU3RhdHVzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL01lZGljYXRpb25BZG1pblN0YXR1c0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBNZWRpY2F0aW9uQWRtaW5TdGF0dXNWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL01lZGljYXRpb25BZG1pblN0YXR1c1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBNZWRpY2F0aW9uQWRtaW5pc3RyYXRpb25Eb3NhZ2UgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVkaWNhdGlvbkFkbWluaXN0cmF0aW9uRG9zYWdlQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogRnJlZSB0ZXh0IGRvc2FnZSBpbnN0cnVjdGlvbnMgY2FuIGJlIHVzZWQgZm9yIGNhc2VzIHdoZXJlIHRoZSBpbnN0cnVjdGlvbnMgYXJlIHRvbyBjb21wbGV4IHRvIGNvZGUuIFdoZW4gY29kZWQgaW5zdHJ1Y3Rpb25zIGFyZSBwcmVzZW50LCB0aGUgZnJlZSB0ZXh0IGluc3RydWN0aW9ucyBtYXkgc3RpbGwgYmUgcHJlc2VudCBmb3IgZGlzcGxheSB0byBodW1hbnMgdGFraW5nIG9yIGFkbWluaXN0ZXJpbmcgdGhlIG1lZGljYXRpb24uXHJcbiAgICovXHJcbiAgdGV4dD86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBNZWRpY2F0aW9uQWRtaW5pc3RyYXRpb24uZG9zYWdlLnRleHRcclxuICAgKi9cclxuICBfdGV4dD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQSBjb2RlZCBzcGVjaWZpY2F0aW9uIG9mIHRoZSBhbmF0b21pYyBzaXRlIHdoZXJlIHRoZSBtZWRpY2F0aW9uIGZpcnN0IGVudGVyZWQgdGhlIGJvZHkuICBGb3IgZXhhbXBsZSwgXCJsZWZ0IGFybVwiLlxyXG4gICAqL1xyXG4gIHNpdGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBjb2RlZCBzcGVjaWZpY2F0aW9uIG9mIHRoZSBhbmF0b21pYyBzaXRlIHdoZXJlIHRoZSBtZWRpY2F0aW9uIGZpcnN0IGVudGVyZWQgdGhlIGJvZHkuICBGb3IgZXhhbXBsZSwgXCJsZWZ0IGFybVwiLlxyXG4gICAqL1xyXG4gIHNpdGVDb2RlYWJsZUNvbmNlcHQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgY29kZWQgc3BlY2lmaWNhdGlvbiBvZiB0aGUgYW5hdG9taWMgc2l0ZSB3aGVyZSB0aGUgbWVkaWNhdGlvbiBmaXJzdCBlbnRlcmVkIHRoZSBib2R5LiAgRm9yIGV4YW1wbGUsIFwibGVmdCBhcm1cIi5cclxuICAgKi9cclxuICBzaXRlUmVmZXJlbmNlPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGNvZGUgc3BlY2lmeWluZyB0aGUgcm91dGUgb3IgcGh5c2lvbG9naWNhbCBwYXRoIG9mIGFkbWluaXN0cmF0aW9uIG9mIGEgdGhlcmFwZXV0aWMgYWdlbnQgaW50byBvciBvbnRvIHRoZSBwYXRpZW50LiAgRm9yIGV4YW1wbGUsIHRvcGljYWwsIGludHJhdmVub3VzLCBldGMuXHJcbiAgICovXHJcbiAgcm91dGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgY29kZWQgdmFsdWUgaW5kaWNhdGluZyB0aGUgbWV0aG9kIGJ5IHdoaWNoIHRoZSBtZWRpY2F0aW9uIGlzIGludGVuZGVkIHRvIGJlIG9yIHdhcyBpbnRyb2R1Y2VkIGludG8gb3Igb24gdGhlIGJvZHkuICBUaGlzIGF0dHJpYnV0ZSB3aWxsIG1vc3Qgb2Z0ZW4gTk9UIGJlIHBvcHVsYXRlZC4gIEl0IGlzIG1vc3QgY29tbW9ubHkgdXNlZCBmb3IgaW5qZWN0aW9ucy4gIEZvciBleGFtcGxlLCBTbG93IFB1c2gsIERlZXAgSVYuXHJcbiAgICovXHJcbiAgbWV0aG9kPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgYW1vdW50IG9mIHRoZSBtZWRpY2F0aW9uIGdpdmVuIGF0IG9uZSBhZG1pbmlzdHJhdGlvbiBldmVudC4gICBVc2UgdGhpcyB2YWx1ZSB3aGVuIHRoZSBhZG1pbmlzdHJhdGlvbiBpcyBlc3NlbnRpYWxseSBhbiBpbnN0YW50YW5lb3VzIGV2ZW50IHN1Y2ggYXMgYSBzd2FsbG93aW5nIGEgdGFibGV0IG9yIGdpdmluZyBhbiBpbmplY3Rpb24uXHJcbiAgICovXHJcbiAgcXVhbnRpdHk/OiBmaGlyLlF1YW50aXR5QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgc3BlZWQgd2l0aCB3aGljaCB0aGUgbWVkaWNhdGlvbiB3YXMgb3Igd2lsbCBiZSBpbnRyb2R1Y2VkIGludG8gdGhlIHBhdGllbnQuICBUeXBpY2FsbHkgdGhlIHJhdGUgZm9yIGFuIGluZnVzaW9uIGUuZy4gMTAwIG1sIHBlciAxIGhvdXIgb3IgMTAwIG1sL2hyLiAgTWF5IGFsc28gYmUgZXhwcmVzc2VkIGFzIGEgcmF0ZSBwZXIgdW5pdCBvZiB0aW1lIGUuZy4gNTAwIG1sIHBlciAyIGhvdXJzLiAgQ3VycmVudGx5IHdlIGRvIG5vdCBzcGVjaWZ5IGEgZGVmYXVsdCBvZiAnMScgaW4gdGhlIGRlbm9taW5hdG9yLCBidXQgdGhpcyBpcyBiZWluZyBkaXNjdXNzZWQuICBPdGhlciBleGFtcGxlczogIDIwMCBtY2cvbWluIG9yIDIwMCBtY2cvMSBtaW51dGU7IDEgbGl0ZXIvOCBob3Vycy5cclxuICAgKi9cclxuICByYXRlPzogZmhpci5SYXRpb3xmaGlyLlJhbmdlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHRoZSBzcGVlZCB3aXRoIHdoaWNoIHRoZSBtZWRpY2F0aW9uIHdhcyBvciB3aWxsIGJlIGludHJvZHVjZWQgaW50byB0aGUgcGF0aWVudC4gIFR5cGljYWxseSB0aGUgcmF0ZSBmb3IgYW4gaW5mdXNpb24gZS5nLiAxMDAgbWwgcGVyIDEgaG91ciBvciAxMDAgbWwvaHIuICBNYXkgYWxzbyBiZSBleHByZXNzZWQgYXMgYSByYXRlIHBlciB1bml0IG9mIHRpbWUgZS5nLiA1MDAgbWwgcGVyIDIgaG91cnMuICBDdXJyZW50bHkgd2UgZG8gbm90IHNwZWNpZnkgYSBkZWZhdWx0IG9mICcxJyBpbiB0aGUgZGVub21pbmF0b3IsIGJ1dCB0aGlzIGlzIGJlaW5nIGRpc2N1c3NlZC4gIE90aGVyIGV4YW1wbGVzOiAgMjAwIG1jZy9taW4gb3IgMjAwIG1jZy8xIG1pbnV0ZTsgMSBsaXRlci84IGhvdXJzLlxyXG4gICAqL1xyXG4gIHJhdGVSYXRpbz86IGZoaXIuUmF0aW9BcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHRoZSBzcGVlZCB3aXRoIHdoaWNoIHRoZSBtZWRpY2F0aW9uIHdhcyBvciB3aWxsIGJlIGludHJvZHVjZWQgaW50byB0aGUgcGF0aWVudC4gIFR5cGljYWxseSB0aGUgcmF0ZSBmb3IgYW4gaW5mdXNpb24gZS5nLiAxMDAgbWwgcGVyIDEgaG91ciBvciAxMDAgbWwvaHIuICBNYXkgYWxzbyBiZSBleHByZXNzZWQgYXMgYSByYXRlIHBlciB1bml0IG9mIHRpbWUgZS5nLiA1MDAgbWwgcGVyIDIgaG91cnMuICBDdXJyZW50bHkgd2UgZG8gbm90IHNwZWNpZnkgYSBkZWZhdWx0IG9mICcxJyBpbiB0aGUgZGVub21pbmF0b3IsIGJ1dCB0aGlzIGlzIGJlaW5nIGRpc2N1c3NlZC4gIE90aGVyIGV4YW1wbGVzOiAgMjAwIG1jZy9taW4gb3IgMjAwIG1jZy8xIG1pbnV0ZTsgMSBsaXRlci84IGhvdXJzLlxyXG4gICAqL1xyXG4gIHJhdGVSYW5nZT86IGZoaXIuUmFuZ2VBcmdzfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIERlc2NyaWJlcyB0aGUgbWVkaWNhdGlvbiBkb3NhZ2UgaW5mb3JtYXRpb24gZGV0YWlscyBlLmcuIGRvc2UsIHJhdGUsIHNpdGUsIHJvdXRlLCBldGMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNhdGlvbkFkbWluaXN0cmF0aW9uRG9zYWdlIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVkaWNhdGlvbkFkbWluaXN0cmF0aW9uRG9zYWdlJztcclxuICAvKipcclxuICAgKiBGcmVlIHRleHQgZG9zYWdlIGluc3RydWN0aW9ucyBjYW4gYmUgdXNlZCBmb3IgY2FzZXMgd2hlcmUgdGhlIGluc3RydWN0aW9ucyBhcmUgdG9vIGNvbXBsZXggdG8gY29kZS4gV2hlbiBjb2RlZCBpbnN0cnVjdGlvbnMgYXJlIHByZXNlbnQsIHRoZSBmcmVlIHRleHQgaW5zdHJ1Y3Rpb25zIG1heSBzdGlsbCBiZSBwcmVzZW50IGZvciBkaXNwbGF5IHRvIGh1bWFucyB0YWtpbmcgb3IgYWRtaW5pc3RlcmluZyB0aGUgbWVkaWNhdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgdGV4dD86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBjb2RlZCBzcGVjaWZpY2F0aW9uIG9mIHRoZSBhbmF0b21pYyBzaXRlIHdoZXJlIHRoZSBtZWRpY2F0aW9uIGZpcnN0IGVudGVyZWQgdGhlIGJvZHkuICBGb3IgZXhhbXBsZSwgXCJsZWZ0IGFybVwiLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzaXRlPzogKGZoaXIuQ29kZWFibGVDb25jZXB0fGZoaXIuUmVmZXJlbmNlKXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBNZWRpY2F0aW9uQWRtaW5pc3RyYXRpb24uZG9zYWdlLnNpdGVbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfc2l0ZUlzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIEEgY29kZSBzcGVjaWZ5aW5nIHRoZSByb3V0ZSBvciBwaHlzaW9sb2dpY2FsIHBhdGggb2YgYWRtaW5pc3RyYXRpb24gb2YgYSB0aGVyYXBldXRpYyBhZ2VudCBpbnRvIG9yIG9udG8gdGhlIHBhdGllbnQuICBGb3IgZXhhbXBsZSwgdG9waWNhbCwgaW50cmF2ZW5vdXMsIGV0Yy5cclxuICAgKi9cclxuICBwdWJsaWMgcm91dGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBjb2RlZCB2YWx1ZSBpbmRpY2F0aW5nIHRoZSBtZXRob2QgYnkgd2hpY2ggdGhlIG1lZGljYXRpb24gaXMgaW50ZW5kZWQgdG8gYmUgb3Igd2FzIGludHJvZHVjZWQgaW50byBvciBvbiB0aGUgYm9keS4gIFRoaXMgYXR0cmlidXRlIHdpbGwgbW9zdCBvZnRlbiBOT1QgYmUgcG9wdWxhdGVkLiAgSXQgaXMgbW9zdCBjb21tb25seSB1c2VkIGZvciBpbmplY3Rpb25zLiAgRm9yIGV4YW1wbGUsIFNsb3cgUHVzaCwgRGVlcCBJVi5cclxuICAgKi9cclxuICBwdWJsaWMgbWV0aG9kPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBhbW91bnQgb2YgdGhlIG1lZGljYXRpb24gZ2l2ZW4gYXQgb25lIGFkbWluaXN0cmF0aW9uIGV2ZW50LiAgIFVzZSB0aGlzIHZhbHVlIHdoZW4gdGhlIGFkbWluaXN0cmF0aW9uIGlzIGVzc2VudGlhbGx5IGFuIGluc3RhbnRhbmVvdXMgZXZlbnQgc3VjaCBhcyBhIHN3YWxsb3dpbmcgYSB0YWJsZXQgb3IgZ2l2aW5nIGFuIGluamVjdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgcXVhbnRpdHk/OiBmaGlyLlF1YW50aXR5fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHRoZSBzcGVlZCB3aXRoIHdoaWNoIHRoZSBtZWRpY2F0aW9uIHdhcyBvciB3aWxsIGJlIGludHJvZHVjZWQgaW50byB0aGUgcGF0aWVudC4gIFR5cGljYWxseSB0aGUgcmF0ZSBmb3IgYW4gaW5mdXNpb24gZS5nLiAxMDAgbWwgcGVyIDEgaG91ciBvciAxMDAgbWwvaHIuICBNYXkgYWxzbyBiZSBleHByZXNzZWQgYXMgYSByYXRlIHBlciB1bml0IG9mIHRpbWUgZS5nLiA1MDAgbWwgcGVyIDIgaG91cnMuICBDdXJyZW50bHkgd2UgZG8gbm90IHNwZWNpZnkgYSBkZWZhdWx0IG9mICcxJyBpbiB0aGUgZGVub21pbmF0b3IsIGJ1dCB0aGlzIGlzIGJlaW5nIGRpc2N1c3NlZC4gIE90aGVyIGV4YW1wbGVzOiAgMjAwIG1jZy9taW4gb3IgMjAwIG1jZy8xIG1pbnV0ZTsgMSBsaXRlci84IGhvdXJzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByYXRlPzogKGZoaXIuUmF0aW98Zmhpci5SYW5nZSl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgTWVkaWNhdGlvbkFkbWluaXN0cmF0aW9uLmRvc2FnZS5yYXRlW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX3JhdGVJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBNZWRpY2F0aW9uQWRtaW5pc3RyYXRpb25Eb3NhZ2UgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxNZWRpY2F0aW9uQWRtaW5pc3RyYXRpb25Eb3NhZ2VBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsndGV4dCddKSB7IHRoaXMudGV4dCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UudGV4dH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfdGV4dCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnRleHQpIHsgdGhpcy50ZXh0LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3RleHQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy50ZXh0ID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3RleHQgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3NpdGUnXSkgeyB0aGlzLnNpdGUgPSBzb3VyY2Uuc2l0ZTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydzaXRlQ29kZWFibGVDb25jZXB0J10pIHsgdGhpcy5zaXRlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5zaXRlQ29kZWFibGVDb25jZXB0KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydzaXRlUmVmZXJlbmNlJ10pIHsgdGhpcy5zaXRlID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5zaXRlUmVmZXJlbmNlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncm91dGUnXSkgeyB0aGlzLnJvdXRlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5yb3V0ZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ21ldGhvZCddKSB7IHRoaXMubWV0aG9kID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5tZXRob2QpOyB9XHJcbiAgICBpZiAoc291cmNlWydxdWFudGl0eSddKSB7IHRoaXMucXVhbnRpdHkgPSBuZXcgZmhpci5RdWFudGl0eShzb3VyY2UucXVhbnRpdHkpOyB9XHJcbiAgICBpZiAoc291cmNlWydyYXRlJ10pIHsgdGhpcy5yYXRlID0gc291cmNlLnJhdGU7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsncmF0ZVJhdGlvJ10pIHsgdGhpcy5yYXRlID0gbmV3IGZoaXIuUmF0aW8oc291cmNlLnJhdGVSYXRpbyk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsncmF0ZVJhbmdlJ10pIHsgdGhpcy5yYXRlID0gbmV3IGZoaXIuUmFuZ2Uoc291cmNlLnJhdGVSYW5nZSk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdNZWRpY2F0aW9uQWRtaW5pc3RyYXRpb24uZG9zYWdlJyB9XHJcbiAgICB0aGlzLnZPUygndGV4dCcsZXhwKVxyXG4gICAgdGhpcy52T1MoJ3NpdGUnLGV4cClcclxuICAgIHRoaXMudk9TKCdyb3V0ZScsZXhwKVxyXG4gICAgdGhpcy52T1MoJ21ldGhvZCcsZXhwKVxyXG4gICAgdGhpcy52T1MoJ3F1YW50aXR5JyxleHApXHJcbiAgICB0aGlzLnZPUygncmF0ZScsZXhwKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIE1lZGljYXRpb25BZG1pbmlzdHJhdGlvbiB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNZWRpY2F0aW9uQWRtaW5pc3RyYXRpb25BcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJNZWRpY2F0aW9uQWRtaW5pc3RyYXRpb25cInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZXJuYWwgaWRlbnRpZmllciAtIEZISVIgd2lsbCBnZW5lcmF0ZSBpdHMgb3duIGludGVybmFsIGlkZW50aWZpZXJzIChwcm9iYWJseSBVUkxzKSB3aGljaCBkbyBub3QgbmVlZCB0byBiZSBleHBsaWNpdGx5IG1hbmFnZWQgYnkgdGhlIHJlc291cmNlLiAgVGhlIGlkZW50aWZpZXIgaGVyZSBpcyBvbmUgdGhhdCB3b3VsZCBiZSB1c2VkIGJ5IGFub3RoZXIgbm9uLUZISVIgc3lzdGVtIC0gZm9yIGV4YW1wbGUgYW4gYXV0b21hdGVkIG1lZGljYXRpb24gcHVtcCB3b3VsZCBwcm92aWRlIGEgcmVjb3JkIGVhY2ggdGltZSBpdCBvcGVyYXRlZDsgYW4gYWRtaW5pc3RyYXRpb24gd2hpbGUgdGhlIHBhdGllbnQgd2FzIG9mZiB0aGUgd2FyZCBtaWdodCBiZSBtYWRlIHdpdGggYSBkaWZmZXJlbnQgc3lzdGVtIGFuZCBlbnRlcmVkIGFmdGVyIHRoZSBldmVudC4gIFBhcnRpY3VsYXJseSBpbXBvcnRhbnQgaWYgdGhlc2UgcmVjb3JkcyBoYXZlIHRvIGJlIHVwZGF0ZWQuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogV2lsbCBnZW5lcmFsbHkgYmUgc2V0IHRvIHNob3cgdGhhdCB0aGUgYWRtaW5pc3RyYXRpb24gaGFzIGJlZW4gY29tcGxldGVkLiAgRm9yIHNvbWUgbG9uZyBydW5uaW5nIGFkbWluaXN0cmF0aW9ucyBzdWNoIGFzIGluZnVzaW9ucyBpdCBpcyBwb3NzaWJsZSBmb3IgYW4gYWRtaW5pc3RyYXRpb24gdG8gYmUgc3RhcnRlZCBidXQgbm90IGNvbXBsZXRlZCBvciBpdCBtYXkgYmUgcGF1c2VkIHdoaWxlIHNvbWUgb3RoZXIgcHJvY2VzcyBpcyB1bmRlciB3YXkuXHJcbiAgICovXHJcbiAgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPE1lZGljYXRpb25BZG1pblN0YXR1c0NvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBNZWRpY2F0aW9uQWRtaW5pc3RyYXRpb24uc3RhdHVzXHJcbiAgICovXHJcbiAgX3N0YXR1cz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBlcnNvbiBvciBhbmltYWwgcmVjZWl2aW5nIHRoZSBtZWRpY2F0aW9uLlxyXG4gICAqL1xyXG4gIHBhdGllbnQ6IGZoaXIuUmVmZXJlbmNlQXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpbmRpdmlkdWFsIHdobyB3YXMgcmVzcG9uc2libGUgZm9yIGdpdmluZyB0aGUgbWVkaWNhdGlvbiB0byB0aGUgcGF0aWVudC5cclxuICAgKi9cclxuICBwcmFjdGl0aW9uZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB2aXNpdCwgYWRtaXNzaW9uIG9yIG90aGVyIGNvbnRhY3QgYmV0d2VlbiBwYXRpZW50IGFuZCBoZWFsdGggY2FyZSBwcm92aWRlciB0aGUgbWVkaWNhdGlvbiBhZG1pbmlzdHJhdGlvbiB3YXMgcGVyZm9ybWVkIGFzIHBhcnQgb2YuXHJcbiAgICovXHJcbiAgZW5jb3VudGVyPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgb3JpZ2luYWwgcmVxdWVzdCwgaW5zdHJ1Y3Rpb24gb3IgYXV0aG9yaXR5IHRvIHBlcmZvcm0gdGhlIGFkbWluaXN0cmF0aW9uLlxyXG4gICAqL1xyXG4gIHByZXNjcmlwdGlvbj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU2V0IHRoaXMgdG8gdHJ1ZSBpZiB0aGUgcmVjb3JkIGlzIHNheWluZyB0aGF0IHRoZSBtZWRpY2F0aW9uIHdhcyBOT1QgYWRtaW5pc3RlcmVkLlxyXG4gICAqL1xyXG4gIHdhc05vdEdpdmVuPzogZmhpci5GaGlyQm9vbGVhbnxib29sZWFufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogTWVkaWNhdGlvbkFkbWluaXN0cmF0aW9uLndhc05vdEdpdmVuXHJcbiAgICovXHJcbiAgX3dhc05vdEdpdmVuPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBBIGNvZGUgaW5kaWNhdGluZyB3aHkgdGhlIGFkbWluaXN0cmF0aW9uIHdhcyBub3QgcGVyZm9ybWVkLlxyXG4gICAqL1xyXG4gIHJlYXNvbk5vdEdpdmVuPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgY29kZSBpbmRpY2F0aW5nIHdoeSB0aGUgbWVkaWNhdGlvbiB3YXMgZ2l2ZW4uXHJcbiAgICovXHJcbiAgcmVhc29uR2l2ZW4/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBzcGVjaWZpYyBkYXRlL3RpbWUgb3IgaW50ZXJ2YWwgb2YgdGltZSBkdXJpbmcgd2hpY2ggdGhlIGFkbWluaXN0cmF0aW9uIHRvb2sgcGxhY2UgKG9yIGRpZCBub3QgdGFrZSBwbGFjZSwgd2hlbiB0aGUgJ25vdEdpdmVuJyBhdHRyaWJ1dGUgaXMgdHJ1ZSkuIEZvciBtYW55IGFkbWluaXN0cmF0aW9ucywgc3VjaCBhcyBzd2FsbG93aW5nIGEgdGFibGV0IHRoZSB1c2Ugb2YgZGF0ZVRpbWUgaXMgbW9yZSBhcHByb3ByaWF0ZS5cclxuICAgKi9cclxuICBlZmZlY3RpdmVUaW1lPzogZmhpci5GaGlyRGF0ZVRpbWV8Zmhpci5QZXJpb2R8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgc3BlY2lmaWMgZGF0ZS90aW1lIG9yIGludGVydmFsIG9mIHRpbWUgZHVyaW5nIHdoaWNoIHRoZSBhZG1pbmlzdHJhdGlvbiB0b29rIHBsYWNlIChvciBkaWQgbm90IHRha2UgcGxhY2UsIHdoZW4gdGhlICdub3RHaXZlbicgYXR0cmlidXRlIGlzIHRydWUpLiBGb3IgbWFueSBhZG1pbmlzdHJhdGlvbnMsIHN1Y2ggYXMgc3dhbGxvd2luZyBhIHRhYmxldCB0aGUgdXNlIG9mIGRhdGVUaW1lIGlzIG1vcmUgYXBwcm9wcmlhdGUuXHJcbiAgICovXHJcbiAgZWZmZWN0aXZlVGltZURhdGVUaW1lPzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHNwZWNpZmljIGRhdGUvdGltZSBvciBpbnRlcnZhbCBvZiB0aW1lIGR1cmluZyB3aGljaCB0aGUgYWRtaW5pc3RyYXRpb24gdG9vayBwbGFjZSAob3IgZGlkIG5vdCB0YWtlIHBsYWNlLCB3aGVuIHRoZSAnbm90R2l2ZW4nIGF0dHJpYnV0ZSBpcyB0cnVlKS4gRm9yIG1hbnkgYWRtaW5pc3RyYXRpb25zLCBzdWNoIGFzIHN3YWxsb3dpbmcgYSB0YWJsZXQgdGhlIHVzZSBvZiBkYXRlVGltZSBpcyBtb3JlIGFwcHJvcHJpYXRlLlxyXG4gICAqL1xyXG4gIGVmZmVjdGl2ZVRpbWVQZXJpb2Q/OiBmaGlyLlBlcmlvZEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgdGhlIG1lZGljYXRpb24gdGhhdCB3YXMgYWRtaW5pc3RlcmVkLiBUaGlzIGlzIGVpdGhlciBhIGxpbmsgdG8gYSByZXNvdXJjZSByZXByZXNlbnRpbmcgdGhlIGRldGFpbHMgb2YgdGhlIG1lZGljYXRpb24gb3IgYSBzaW1wbGUgYXR0cmlidXRlIGNhcnJ5aW5nIGEgY29kZSB0aGF0IGlkZW50aWZpZXMgdGhlIG1lZGljYXRpb24gZnJvbSBhIGtub3duIGxpc3Qgb2YgbWVkaWNhdGlvbnMuXHJcbiAgICovXHJcbiAgbWVkaWNhdGlvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0fGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHRoZSBtZWRpY2F0aW9uIHRoYXQgd2FzIGFkbWluaXN0ZXJlZC4gVGhpcyBpcyBlaXRoZXIgYSBsaW5rIHRvIGEgcmVzb3VyY2UgcmVwcmVzZW50aW5nIHRoZSBkZXRhaWxzIG9mIHRoZSBtZWRpY2F0aW9uIG9yIGEgc2ltcGxlIGF0dHJpYnV0ZSBjYXJyeWluZyBhIGNvZGUgdGhhdCBpZGVudGlmaWVzIHRoZSBtZWRpY2F0aW9uIGZyb20gYSBrbm93biBsaXN0IG9mIG1lZGljYXRpb25zLlxyXG4gICAqL1xyXG4gIG1lZGljYXRpb25Db2RlYWJsZUNvbmNlcHQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgdGhlIG1lZGljYXRpb24gdGhhdCB3YXMgYWRtaW5pc3RlcmVkLiBUaGlzIGlzIGVpdGhlciBhIGxpbmsgdG8gYSByZXNvdXJjZSByZXByZXNlbnRpbmcgdGhlIGRldGFpbHMgb2YgdGhlIG1lZGljYXRpb24gb3IgYSBzaW1wbGUgYXR0cmlidXRlIGNhcnJ5aW5nIGEgY29kZSB0aGF0IGlkZW50aWZpZXMgdGhlIG1lZGljYXRpb24gZnJvbSBhIGtub3duIGxpc3Qgb2YgbWVkaWNhdGlvbnMuXHJcbiAgICovXHJcbiAgbWVkaWNhdGlvblJlZmVyZW5jZT86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRldmljZSB1c2VkIGluIGFkbWluaXN0ZXJpbmcgdGhlIG1lZGljYXRpb24gdG8gdGhlIHBhdGllbnQuICBGb3IgZXhhbXBsZSwgYSBwYXJ0aWN1bGFyIGluZnVzaW9uIHB1bXAuXHJcbiAgICovXHJcbiAgZGV2aWNlPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dHJhIGluZm9ybWF0aW9uIGFib3V0IHRoZSBtZWRpY2F0aW9uIGFkbWluaXN0cmF0aW9uIHRoYXQgaXMgbm90IGNvbnZleWVkIGJ5IHRoZSBvdGhlciBhdHRyaWJ1dGVzLlxyXG4gICAqL1xyXG4gIG5vdGU/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogTWVkaWNhdGlvbkFkbWluaXN0cmF0aW9uLm5vdGVcclxuICAgKi9cclxuICBfbm90ZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHRoZSBtZWRpY2F0aW9uIGRvc2FnZSBpbmZvcm1hdGlvbiBkZXRhaWxzIGUuZy4gZG9zZSwgcmF0ZSwgc2l0ZSwgcm91dGUsIGV0Yy5cclxuICAgKi9cclxuICBkb3NhZ2U/OiBmaGlyLk1lZGljYXRpb25BZG1pbmlzdHJhdGlvbkRvc2FnZUFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogRGVzY3JpYmVzIHRoZSBldmVudCBvZiBhIHBhdGllbnQgY29uc3VtaW5nIG9yIG90aGVyd2lzZSBiZWluZyBhZG1pbmlzdGVyZWQgYSBtZWRpY2F0aW9uLiAgVGhpcyBtYXkgYmUgYXMgc2ltcGxlIGFzIHN3YWxsb3dpbmcgYSB0YWJsZXQgb3IgaXQgbWF5IGJlIGEgbG9uZyBydW5uaW5nIGluZnVzaW9uLiAgUmVsYXRlZCByZXNvdXJjZXMgdGllIHRoaXMgZXZlbnQgdG8gdGhlIGF1dGhvcml6aW5nIHByZXNjcmlwdGlvbiwgYW5kIHRoZSBzcGVjaWZpYyBlbmNvdW50ZXIgYmV0d2VlbiBwYXRpZW50IGFuZCBoZWFsdGggY2FyZSBwcmFjdGl0aW9uZXIuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNhdGlvbkFkbWluaXN0cmF0aW9uIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdNZWRpY2F0aW9uQWRtaW5pc3RyYXRpb24nO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNvdXJjZVR5cGU6IFwiTWVkaWNhdGlvbkFkbWluaXN0cmF0aW9uXCI7XHJcbiAgLyoqXHJcbiAgICogRXh0ZXJuYWwgaWRlbnRpZmllciAtIEZISVIgd2lsbCBnZW5lcmF0ZSBpdHMgb3duIGludGVybmFsIGlkZW50aWZpZXJzIChwcm9iYWJseSBVUkxzKSB3aGljaCBkbyBub3QgbmVlZCB0byBiZSBleHBsaWNpdGx5IG1hbmFnZWQgYnkgdGhlIHJlc291cmNlLiAgVGhlIGlkZW50aWZpZXIgaGVyZSBpcyBvbmUgdGhhdCB3b3VsZCBiZSB1c2VkIGJ5IGFub3RoZXIgbm9uLUZISVIgc3lzdGVtIC0gZm9yIGV4YW1wbGUgYW4gYXV0b21hdGVkIG1lZGljYXRpb24gcHVtcCB3b3VsZCBwcm92aWRlIGEgcmVjb3JkIGVhY2ggdGltZSBpdCBvcGVyYXRlZDsgYW4gYWRtaW5pc3RyYXRpb24gd2hpbGUgdGhlIHBhdGllbnQgd2FzIG9mZiB0aGUgd2FyZCBtaWdodCBiZSBtYWRlIHdpdGggYSBkaWZmZXJlbnQgc3lzdGVtIGFuZCBlbnRlcmVkIGFmdGVyIHRoZSBldmVudC4gIFBhcnRpY3VsYXJseSBpbXBvcnRhbnQgaWYgdGhlc2UgcmVjb3JkcyBoYXZlIHRvIGJlIHVwZGF0ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI6IGZoaXIuSWRlbnRpZmllcltdO1xyXG4gIC8qKlxyXG4gICAqIFdpbGwgZ2VuZXJhbGx5IGJlIHNldCB0byBzaG93IHRoYXQgdGhlIGFkbWluaXN0cmF0aW9uIGhhcyBiZWVuIGNvbXBsZXRlZC4gIEZvciBzb21lIGxvbmcgcnVubmluZyBhZG1pbmlzdHJhdGlvbnMgc3VjaCBhcyBpbmZ1c2lvbnMgaXQgaXMgcG9zc2libGUgZm9yIGFuIGFkbWluaXN0cmF0aW9uIHRvIGJlIHN0YXJ0ZWQgYnV0IG5vdCBjb21wbGV0ZWQgb3IgaXQgbWF5IGJlIHBhdXNlZCB3aGlsZSBzb21lIG90aGVyIHByb2Nlc3MgaXMgdW5kZXIgd2F5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0dXM6IGZoaXIuRmhpckNvZGU8TWVkaWNhdGlvbkFkbWluU3RhdHVzQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBlcnNvbiBvciBhbmltYWwgcmVjZWl2aW5nIHRoZSBtZWRpY2F0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXRpZW50OiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpbmRpdmlkdWFsIHdobyB3YXMgcmVzcG9uc2libGUgZm9yIGdpdmluZyB0aGUgbWVkaWNhdGlvbiB0byB0aGUgcGF0aWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgcHJhY3RpdGlvbmVyPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB2aXNpdCwgYWRtaXNzaW9uIG9yIG90aGVyIGNvbnRhY3QgYmV0d2VlbiBwYXRpZW50IGFuZCBoZWFsdGggY2FyZSBwcm92aWRlciB0aGUgbWVkaWNhdGlvbiBhZG1pbmlzdHJhdGlvbiB3YXMgcGVyZm9ybWVkIGFzIHBhcnQgb2YuXHJcbiAgICovXHJcbiAgcHVibGljIGVuY291bnRlcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgb3JpZ2luYWwgcmVxdWVzdCwgaW5zdHJ1Y3Rpb24gb3IgYXV0aG9yaXR5IHRvIHBlcmZvcm0gdGhlIGFkbWluaXN0cmF0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcmVzY3JpcHRpb24/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU2V0IHRoaXMgdG8gdHJ1ZSBpZiB0aGUgcmVjb3JkIGlzIHNheWluZyB0aGF0IHRoZSBtZWRpY2F0aW9uIHdhcyBOT1QgYWRtaW5pc3RlcmVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB3YXNOb3RHaXZlbj86IGZoaXIuRmhpckJvb2xlYW58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgY29kZSBpbmRpY2F0aW5nIHdoeSB0aGUgYWRtaW5pc3RyYXRpb24gd2FzIG5vdCBwZXJmb3JtZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHJlYXNvbk5vdEdpdmVuOiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIEEgY29kZSBpbmRpY2F0aW5nIHdoeSB0aGUgbWVkaWNhdGlvbiB3YXMgZ2l2ZW4uXHJcbiAgICovXHJcbiAgcHVibGljIHJlYXNvbkdpdmVuOiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIEEgc3BlY2lmaWMgZGF0ZS90aW1lIG9yIGludGVydmFsIG9mIHRpbWUgZHVyaW5nIHdoaWNoIHRoZSBhZG1pbmlzdHJhdGlvbiB0b29rIHBsYWNlIChvciBkaWQgbm90IHRha2UgcGxhY2UsIHdoZW4gdGhlICdub3RHaXZlbicgYXR0cmlidXRlIGlzIHRydWUpLiBGb3IgbWFueSBhZG1pbmlzdHJhdGlvbnMsIHN1Y2ggYXMgc3dhbGxvd2luZyBhIHRhYmxldCB0aGUgdXNlIG9mIGRhdGVUaW1lIGlzIG1vcmUgYXBwcm9wcmlhdGUuXHJcbiAgICovXHJcbiAgcHVibGljIGVmZmVjdGl2ZVRpbWU6IChmaGlyLkZoaXJEYXRlVGltZXxmaGlyLlBlcmlvZCl8bnVsbDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IE1lZGljYXRpb25BZG1pbmlzdHJhdGlvbi5lZmZlY3RpdmVUaW1lW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX2VmZmVjdGl2ZVRpbWVJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHRoZSBtZWRpY2F0aW9uIHRoYXQgd2FzIGFkbWluaXN0ZXJlZC4gVGhpcyBpcyBlaXRoZXIgYSBsaW5rIHRvIGEgcmVzb3VyY2UgcmVwcmVzZW50aW5nIHRoZSBkZXRhaWxzIG9mIHRoZSBtZWRpY2F0aW9uIG9yIGEgc2ltcGxlIGF0dHJpYnV0ZSBjYXJyeWluZyBhIGNvZGUgdGhhdCBpZGVudGlmaWVzIHRoZSBtZWRpY2F0aW9uIGZyb20gYSBrbm93biBsaXN0IG9mIG1lZGljYXRpb25zLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtZWRpY2F0aW9uOiAoZmhpci5Db2RlYWJsZUNvbmNlcHR8Zmhpci5SZWZlcmVuY2UpfG51bGw7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBNZWRpY2F0aW9uQWRtaW5pc3RyYXRpb24ubWVkaWNhdGlvblt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c19tZWRpY2F0aW9uSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRldmljZSB1c2VkIGluIGFkbWluaXN0ZXJpbmcgdGhlIG1lZGljYXRpb24gdG8gdGhlIHBhdGllbnQuICBGb3IgZXhhbXBsZSwgYSBwYXJ0aWN1bGFyIGluZnVzaW9uIHB1bXAuXHJcbiAgICovXHJcbiAgcHVibGljIGRldmljZTogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBFeHRyYSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgbWVkaWNhdGlvbiBhZG1pbmlzdHJhdGlvbiB0aGF0IGlzIG5vdCBjb252ZXllZCBieSB0aGUgb3RoZXIgYXR0cmlidXRlcy5cclxuICAgKi9cclxuICBwdWJsaWMgbm90ZT86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIHRoZSBtZWRpY2F0aW9uIGRvc2FnZSBpbmZvcm1hdGlvbiBkZXRhaWxzIGUuZy4gZG9zZSwgcmF0ZSwgc2l0ZSwgcm91dGUsIGV0Yy5cclxuICAgKi9cclxuICBwdWJsaWMgZG9zYWdlPzogZmhpci5NZWRpY2F0aW9uQWRtaW5pc3RyYXRpb25Eb3NhZ2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE1lZGljYXRpb25BZG1pbmlzdHJhdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE1lZGljYXRpb25BZG1pbmlzdHJhdGlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdNZWRpY2F0aW9uQWRtaW5pc3RyYXRpb24nO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IHNvdXJjZS5pZGVudGlmaWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuSWRlbnRpZmllcih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmlkZW50aWZpZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RhdHVzJ10pIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxNZWRpY2F0aW9uQWRtaW5TdGF0dXNDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2Uuc3RhdHVzfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zdGF0dXMnXSkge1xyXG4gICAgICBpZiAodGhpcy5zdGF0dXMpIHsgdGhpcy5zdGF0dXMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc3RhdHVzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8TWVkaWNhdGlvbkFkbWluU3RhdHVzQ29kZVR5cGU+KHNvdXJjZS5fc3RhdHVzIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydwYXRpZW50J10pIHsgdGhpcy5wYXRpZW50ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5wYXRpZW50KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucGF0aWVudCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3ByYWN0aXRpb25lciddKSB7IHRoaXMucHJhY3RpdGlvbmVyID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5wcmFjdGl0aW9uZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWydlbmNvdW50ZXInXSkgeyB0aGlzLmVuY291bnRlciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuZW5jb3VudGVyKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJlc2NyaXB0aW9uJ10pIHsgdGhpcy5wcmVzY3JpcHRpb24gPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnByZXNjcmlwdGlvbik7IH1cclxuICAgIGlmIChzb3VyY2VbJ3dhc05vdEdpdmVuJ10pIHsgdGhpcy53YXNOb3RHaXZlbiA9IG5ldyBmaGlyLkZoaXJCb29sZWFuKHt2YWx1ZTogc291cmNlLndhc05vdEdpdmVufSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ193YXNOb3RHaXZlbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLndhc05vdEdpdmVuKSB7IHRoaXMud2FzTm90R2l2ZW4uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fd2FzTm90R2l2ZW4hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy53YXNOb3RHaXZlbiA9IG5ldyBmaGlyLkZoaXJCb29sZWFuKHNvdXJjZS5fd2FzTm90R2l2ZW4gYXMgUGFydGlhbDxmaGlyLkZoaXJCb29sZWFuQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydyZWFzb25Ob3RHaXZlbiddKSB7IHRoaXMucmVhc29uTm90R2l2ZW4gPSBzb3VyY2UucmVhc29uTm90R2l2ZW4ubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZWFzb25Ob3RHaXZlbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydyZWFzb25HaXZlbiddKSB7IHRoaXMucmVhc29uR2l2ZW4gPSBzb3VyY2UucmVhc29uR2l2ZW4ubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5yZWFzb25HaXZlbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydlZmZlY3RpdmVUaW1lJ10pIHsgdGhpcy5lZmZlY3RpdmVUaW1lID0gc291cmNlLmVmZmVjdGl2ZVRpbWU7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnZWZmZWN0aXZlVGltZURhdGVUaW1lJ10pIHsgdGhpcy5lZmZlY3RpdmVUaW1lID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLmVmZmVjdGl2ZVRpbWVEYXRlVGltZX0pOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2VmZmVjdGl2ZVRpbWVQZXJpb2QnXSkgeyB0aGlzLmVmZmVjdGl2ZVRpbWUgPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLmVmZmVjdGl2ZVRpbWVQZXJpb2QpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5lZmZlY3RpdmVUaW1lID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbWVkaWNhdGlvbiddKSB7IHRoaXMubWVkaWNhdGlvbiA9IHNvdXJjZS5tZWRpY2F0aW9uOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ21lZGljYXRpb25Db2RlYWJsZUNvbmNlcHQnXSkgeyB0aGlzLm1lZGljYXRpb24gPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLm1lZGljYXRpb25Db2RlYWJsZUNvbmNlcHQpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ21lZGljYXRpb25SZWZlcmVuY2UnXSkgeyB0aGlzLm1lZGljYXRpb24gPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLm1lZGljYXRpb25SZWZlcmVuY2UpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5tZWRpY2F0aW9uID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGV2aWNlJ10pIHsgdGhpcy5kZXZpY2UgPSBzb3VyY2UuZGV2aWNlLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZGV2aWNlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ25vdGUnXSkgeyB0aGlzLm5vdGUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLm5vdGV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX25vdGUnXSkge1xyXG4gICAgICBpZiAodGhpcy5ub3RlKSB7IHRoaXMubm90ZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9ub3RlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubm90ZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9ub3RlIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydkb3NhZ2UnXSkgeyB0aGlzLmRvc2FnZSA9IG5ldyBmaGlyLk1lZGljYXRpb25BZG1pbmlzdHJhdGlvbkRvc2FnZShzb3VyY2UuZG9zYWdlKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ01lZGljYXRpb25BZG1pbmlzdHJhdGlvbicgfVxyXG4gICAgdGhpcy52UlMoJ3Jlc291cmNlVHlwZScsZXhwKVxyXG4gICAgdGhpcy52T0EoJ2lkZW50aWZpZXInLGV4cClcclxuICAgIHRoaXMudlJTVignc3RhdHVzJyxleHAsJ01lZGljYXRpb25BZG1pblN0YXR1cycsTWVkaWNhdGlvbkFkbWluU3RhdHVzVnNWYWxpZGF0aW9uLCdyJylcclxuICAgIHRoaXMudlJTKCdwYXRpZW50JyxleHApXHJcbiAgICB0aGlzLnZPUygncHJhY3RpdGlvbmVyJyxleHApXHJcbiAgICB0aGlzLnZPUygnZW5jb3VudGVyJyxleHApXHJcbiAgICB0aGlzLnZPUygncHJlc2NyaXB0aW9uJyxleHApXHJcbiAgICB0aGlzLnZPUygnd2FzTm90R2l2ZW4nLGV4cClcclxuICAgIHRoaXMudk9BKCdyZWFzb25Ob3RHaXZlbicsZXhwKVxyXG4gICAgdGhpcy52T0EoJ3JlYXNvbkdpdmVuJyxleHApXHJcbiAgICB0aGlzLnZSUygnZWZmZWN0aXZlVGltZScsZXhwKVxyXG4gICAgdGhpcy52UlMoJ21lZGljYXRpb24nLGV4cClcclxuICAgIHRoaXMudk9BKCdkZXZpY2UnLGV4cClcclxuICAgIHRoaXMudk9TKCdub3RlJyxleHApXHJcbiAgICB0aGlzLnZPUygnZG9zYWdlJyxleHApXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=