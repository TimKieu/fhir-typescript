// <auto-generated/>
// Contents of: hl7.fhir.r2.core version: 1.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: ClinicalImpression
import * as fhir from '../fhir.js';
// @ts-ignore
import { ClinicalImpressionStatusVsValidation } from '../fhirValueSets/ClinicalImpressionStatusVsValidation.js';
/**
 * One or more sets of investigations (signs, symptions, etc.). The actual grouping of investigations vary greatly depending on the type and context of the assessment. These investigations may include data generated during the assessment process, or data previously generated and recorded that is pertinent to the outcomes.
 */
export class ClinicalImpressionInvestigations extends fhir.BackboneElement {
    /**
     * Default constructor for ClinicalImpressionInvestigations - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code);
        }
        else {
            this.code = null;
        }
        if (source['item']) {
            this.item = source.item.map((x) => new fhir.Reference(x));
        }
        else {
            this.item = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ClinicalImpression.investigations';
        }
        iss.push(...this.vRS('code', exp));
        iss.push(...this.vOA('item', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ClinicalImpressionInvestigations._fts_dataType = 'ClinicalImpressionInvestigations';
/**
 * Specific findings or diagnoses that was considered likely or relevant to ongoing treatment.
 */
export class ClinicalImpressionFinding extends fhir.BackboneElement {
    /**
     * Default constructor for ClinicalImpressionFinding - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['item']) {
            this.item = new fhir.CodeableConcept(source.item);
        }
        else {
            this.item = null;
        }
        if (source['cause']) {
            this.cause = new fhir.FhirString({ value: source.cause });
        }
        if (source['_cause']) {
            if (this.cause) {
                this.cause.addExtendedProperties(source._cause);
            }
            else {
                this.cause = new fhir.FhirString(source._cause);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ClinicalImpression.finding';
        }
        iss.push(...this.vRS('item', exp));
        iss.push(...this.vOS('cause', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ClinicalImpressionFinding._fts_dataType = 'ClinicalImpressionFinding';
/**
 * Diagnosis considered not possible.
 */
export class ClinicalImpressionRuledOut extends fhir.BackboneElement {
    /**
     * Default constructor for ClinicalImpressionRuledOut - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['item']) {
            this.item = new fhir.CodeableConcept(source.item);
        }
        else {
            this.item = null;
        }
        if (source['reason']) {
            this.reason = new fhir.FhirString({ value: source.reason });
        }
        if (source['_reason']) {
            if (this.reason) {
                this.reason.addExtendedProperties(source._reason);
            }
            else {
                this.reason = new fhir.FhirString(source._reason);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ClinicalImpression.ruledOut';
        }
        iss.push(...this.vRS('item', exp));
        iss.push(...this.vOS('reason', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ClinicalImpressionRuledOut._fts_dataType = 'ClinicalImpressionRuledOut';
/**
 * A record of a clinical assessment performed to determine what problem(s) may affect the patient and before planning the treatments or management strategies that are best to manage a patient's condition. Assessments are often 1:1 with a clinical consultation / encounter,  but this varies greatly depending on the clinical workflow. This resource is called "ClinicalImpression" rather than "ClinicalAssessment" to avoid confusion with the recording of assessment tools such as Apgar score.
 */
export class ClinicalImpression extends fhir.DomainResource {
    /**
     * Default constructor for ClinicalImpression - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'ClinicalImpression';
        if (source['patient']) {
            this.patient = new fhir.Reference(source.patient);
        }
        else {
            this.patient = null;
        }
        if (source['assessor']) {
            this.assessor = new fhir.Reference(source.assessor);
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['date']) {
            this.date = new fhir.FhirDateTime({ value: source.date });
        }
        if (source['_date']) {
            if (this.date) {
                this.date.addExtendedProperties(source._date);
            }
            else {
                this.date = new fhir.FhirDateTime(source._date);
            }
        }
        if (source['description']) {
            this.description = new fhir.FhirString({ value: source.description });
        }
        if (source['_description']) {
            if (this.description) {
                this.description.addExtendedProperties(source._description);
            }
            else {
                this.description = new fhir.FhirString(source._description);
            }
        }
        if (source['previous']) {
            this.previous = new fhir.Reference(source.previous);
        }
        if (source['problem']) {
            this.problem = source.problem.map((x) => new fhir.Reference(x));
        }
        else {
            this.problem = [];
        }
        if (source['trigger']) {
            this.trigger = source.trigger;
        }
        else if (source['triggerCodeableConcept']) {
            this.trigger = new fhir.CodeableConcept(source.triggerCodeableConcept);
        }
        else if (source['triggerReference']) {
            this.trigger = new fhir.Reference(source.triggerReference);
        }
        if (source['investigations']) {
            this.investigations = source.investigations.map((x) => new fhir.ClinicalImpressionInvestigations(x));
        }
        else {
            this.investigations = [];
        }
        if (source['protocol']) {
            this.protocol = new fhir.FhirUri({ value: source.protocol });
        }
        if (source['_protocol']) {
            if (this.protocol) {
                this.protocol.addExtendedProperties(source._protocol);
            }
            else {
                this.protocol = new fhir.FhirUri(source._protocol);
            }
        }
        if (source['summary']) {
            this.summary = new fhir.FhirString({ value: source.summary });
        }
        if (source['_summary']) {
            if (this.summary) {
                this.summary.addExtendedProperties(source._summary);
            }
            else {
                this.summary = new fhir.FhirString(source._summary);
            }
        }
        if (source['finding']) {
            this.finding = source.finding.map((x) => new fhir.ClinicalImpressionFinding(x));
        }
        else {
            this.finding = [];
        }
        if (source['resolved']) {
            this.resolved = source.resolved.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.resolved = [];
        }
        if (source['ruledOut']) {
            this.ruledOut = source.ruledOut.map((x) => new fhir.ClinicalImpressionRuledOut(x));
        }
        else {
            this.ruledOut = [];
        }
        if (source['prognosis']) {
            this.prognosis = new fhir.FhirString({ value: source.prognosis });
        }
        if (source['_prognosis']) {
            if (this.prognosis) {
                this.prognosis.addExtendedProperties(source._prognosis);
            }
            else {
                this.prognosis = new fhir.FhirString(source._prognosis);
            }
        }
        if (source['plan']) {
            this.plan = source.plan.map((x) => new fhir.Reference(x));
        }
        else {
            this.plan = [];
        }
        if (source['action']) {
            this.action = source.action.map((x) => new fhir.Reference(x));
        }
        else {
            this.action = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ClinicalImpression';
        }
        iss.push(...this.vRS('patient', exp));
        iss.push(...this.vOS('assessor', exp));
        iss.push(...this.vRSV('status', exp, 'ClinicalImpressionStatus', ClinicalImpressionStatusVsValidation, 'r'));
        iss.push(...this.vOS('date', exp));
        iss.push(...this.vOS('description', exp));
        iss.push(...this.vOS('previous', exp));
        iss.push(...this.vOA('problem', exp));
        iss.push(...this.vOS('trigger', exp));
        iss.push(...this.vOA('investigations', exp));
        iss.push(...this.vOS('protocol', exp));
        iss.push(...this.vOS('summary', exp));
        iss.push(...this.vOA('finding', exp));
        iss.push(...this.vOA('resolved', exp));
        iss.push(...this.vOA('ruledOut', exp));
        iss.push(...this.vOS('prognosis', exp));
        iss.push(...this.vOA('plan', exp));
        iss.push(...this.vOA('action', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ClinicalImpression._fts_dataType = 'ClinicalImpression';
/**
 * Internal flag to properly serialize choice-type element ClinicalImpression.trigger[x]
 */
ClinicalImpression._fts_triggerIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ2xpbmljYWxJbXByZXNzaW9uLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9DbGluaWNhbEltcHJlc3Npb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsb0NBQW9DO0FBRXBDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBSW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsb0NBQW9DLEVBQUUsTUFBTSwwREFBMEQsQ0FBQztBQWVoSDs7R0FFRztBQUNILE1BQU0sT0FBTyxnQ0FBaUMsU0FBUSxJQUFJLENBQUMsZUFBZTtJQWF4RTs7T0FFRztJQUNILFlBQVksU0FBdUQsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDN0csS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUFFO2FBQ3JFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7U0FBRTtRQUMxQixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDN0U7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQztTQUFFO0lBQzFCLENBQUM7SUFDRDs7T0FFRztJQUNhLGlCQUFpQixDQUFDLE1BQWEsRUFBRTtRQUMvQyxJQUFJLEdBQUcsR0FBbUIsS0FBSyxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxDQUFDO1FB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SUFBSSxHQUFHLEtBQUssRUFBRSxFQUFFO1lBQUUsR0FBRyxHQUFHLG9CQUFvQixDQUFBO1NBQUU7UUFDOUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDckMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFDLEdBQUcsRUFBQywwQkFBMEIsRUFBQyxvQ0FBb0MsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3pHLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ2xDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3pDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3RDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3JDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3JDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDNUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDckMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDckMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDcEMsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDOztBQW5LRDs7R0FFRztBQUM2QixnQ0FBYSxHQUFVLG9CQUFvQixDQUFDO0FBcUM1RTs7R0FFRztBQUN1Qix1Q0FBb0IsR0FBUSxJQUFJLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjIuY29yZSB2ZXJzaW9uOiAxLjAuMlxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IENsaW5pY2FsSW1wcmVzc2lvblxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQ2xpbmljYWxJbXByZXNzaW9uU3RhdHVzQ29kZXMsICBDbGluaWNhbEltcHJlc3Npb25TdGF0dXNDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ2xpbmljYWxJbXByZXNzaW9uU3RhdHVzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENsaW5pY2FsSW1wcmVzc2lvblN0YXR1c1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQ2xpbmljYWxJbXByZXNzaW9uU3RhdHVzVnNWYWxpZGF0aW9uLmpzJztcclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIENsaW5pY2FsSW1wcmVzc2lvbkludmVzdGlnYXRpb25zIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENsaW5pY2FsSW1wcmVzc2lvbkludmVzdGlnYXRpb25zQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogQSBuYW1lL2NvZGUgZm9yIHRoZSBncm91cCAoXCJzZXRcIikgb2YgaW52ZXN0aWdhdGlvbnMuIFR5cGljYWxseSwgdGhpcyB3aWxsIGJlIHNvbWV0aGluZyBsaWtlIFwic2lnbnNcIiwgXCJzeW1wdG9tc1wiLCBcImNsaW5pY2FsXCIsIFwiZGlhZ25vc3RpY1wiLCBidXQgdGhlIGxpc3QgaXMgbm90IGNvbnN0cmFpbmVkLCBhbmQgb3RoZXJzIHN1Y2ggZ3JvdXBzIHN1Y2ggYXMgKGV4cG9zdXJlfGZhbWlseXx0cmF2ZWx8bnV0aXRpcmlvbmFsKSBoaXN0b3J5IG1heSBiZSB1c2VkLlxyXG4gICAqL1xyXG4gIGNvZGU6IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3xudWxsO1xyXG4gIC8qKlxyXG4gICAqIEEgcmVjb3JkIG9mIGEgc3BlY2lmaWMgaW52ZXN0aWdhdGlvbiB0aGF0IHdhcyB1bmRlcnRha2VuLlxyXG4gICAqL1xyXG4gIGl0ZW0/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBPbmUgb3IgbW9yZSBzZXRzIG9mIGludmVzdGlnYXRpb25zIChzaWducywgc3ltcHRpb25zLCBldGMuKS4gVGhlIGFjdHVhbCBncm91cGluZyBvZiBpbnZlc3RpZ2F0aW9ucyB2YXJ5IGdyZWF0bHkgZGVwZW5kaW5nIG9uIHRoZSB0eXBlIGFuZCBjb250ZXh0IG9mIHRoZSBhc3Nlc3NtZW50LiBUaGVzZSBpbnZlc3RpZ2F0aW9ucyBtYXkgaW5jbHVkZSBkYXRhIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGFzc2Vzc21lbnQgcHJvY2Vzcywgb3IgZGF0YSBwcmV2aW91c2x5IGdlbmVyYXRlZCBhbmQgcmVjb3JkZWQgdGhhdCBpcyBwZXJ0aW5lbnQgdG8gdGhlIG91dGNvbWVzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENsaW5pY2FsSW1wcmVzc2lvbkludmVzdGlnYXRpb25zIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQ2xpbmljYWxJbXByZXNzaW9uSW52ZXN0aWdhdGlvbnMnO1xyXG4gIC8qKlxyXG4gICAqIEEgbmFtZS9jb2RlIGZvciB0aGUgZ3JvdXAgKFwic2V0XCIpIG9mIGludmVzdGlnYXRpb25zLiBUeXBpY2FsbHksIHRoaXMgd2lsbCBiZSBzb21ldGhpbmcgbGlrZSBcInNpZ25zXCIsIFwic3ltcHRvbXNcIiwgXCJjbGluaWNhbFwiLCBcImRpYWdub3N0aWNcIiwgYnV0IHRoZSBsaXN0IGlzIG5vdCBjb25zdHJhaW5lZCwgYW5kIG90aGVycyBzdWNoIGdyb3VwcyBzdWNoIGFzIChleHBvc3VyZXxmYW1pbHl8dHJhdmVsfG51dGl0aXJpb25hbCkgaGlzdG9yeSBtYXkgYmUgdXNlZC5cclxuICAgKi9cclxuICBwdWJsaWMgY29kZTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBBIHJlY29yZCBvZiBhIHNwZWNpZmljIGludmVzdGlnYXRpb24gdGhhdCB3YXMgdW5kZXJ0YWtlbi5cclxuICAgKi9cclxuICBwdWJsaWMgaXRlbTogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBDbGluaWNhbEltcHJlc3Npb25JbnZlc3RpZ2F0aW9ucyAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENsaW5pY2FsSW1wcmVzc2lvbkludmVzdGlnYXRpb25zQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2NvZGUnXSkgeyB0aGlzLmNvZGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmNvZGUpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb2RlID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaXRlbSddKSB7IHRoaXMuaXRlbSA9IHNvdXJjZS5pdGVtLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuaXRlbSA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnQ2xpbmljYWxJbXByZXNzaW9uLmludmVzdGlnYXRpb25zJyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygnY29kZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnaXRlbScsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQ2xpbmljYWxJbXByZXNzaW9uRmluZGluZyB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBDbGluaWNhbEltcHJlc3Npb25GaW5kaW5nQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogU3BlY2lmaWMgdGV4dCBvZiBjb2RlIGZvciBmaW5kaW5nIG9yIGRpYWdub3Npcy5cclxuICAgKi9cclxuICBpdGVtOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBXaGljaCBpbnZlc3RpZ2F0aW9ucyBzdXBwb3J0IGZpbmRpbmcgb3IgZGlhZ25vc2lzLlxyXG4gICAqL1xyXG4gIGNhdXNlPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENsaW5pY2FsSW1wcmVzc2lvbi5maW5kaW5nLmNhdXNlXHJcbiAgICovXHJcbiAgX2NhdXNlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIFNwZWNpZmljIGZpbmRpbmdzIG9yIGRpYWdub3NlcyB0aGF0IHdhcyBjb25zaWRlcmVkIGxpa2VseSBvciByZWxldmFudCB0byBvbmdvaW5nIHRyZWF0bWVudC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDbGluaWNhbEltcHJlc3Npb25GaW5kaW5nIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQ2xpbmljYWxJbXByZXNzaW9uRmluZGluZyc7XHJcbiAgLyoqXHJcbiAgICogU3BlY2lmaWMgdGV4dCBvZiBjb2RlIGZvciBmaW5kaW5nIG9yIGRpYWdub3Npcy5cclxuICAgKi9cclxuICBwdWJsaWMgaXRlbTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBXaGljaCBpbnZlc3RpZ2F0aW9ucyBzdXBwb3J0IGZpbmRpbmcgb3IgZGlhZ25vc2lzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjYXVzZT86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQ2xpbmljYWxJbXByZXNzaW9uRmluZGluZyAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENsaW5pY2FsSW1wcmVzc2lvbkZpbmRpbmdBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsnaXRlbSddKSB7IHRoaXMuaXRlbSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuaXRlbSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLml0ZW0gPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydjYXVzZSddKSB7IHRoaXMuY2F1c2UgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmNhdXNlfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19jYXVzZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLmNhdXNlKSB7IHRoaXMuY2F1c2UuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fY2F1c2UhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5jYXVzZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9jYXVzZSBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0NsaW5pY2FsSW1wcmVzc2lvbi5maW5kaW5nJyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygnaXRlbScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnY2F1c2UnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIENsaW5pY2FsSW1wcmVzc2lvblJ1bGVkT3V0IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENsaW5pY2FsSW1wcmVzc2lvblJ1bGVkT3V0QXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogU3BlY2lmaWMgdGV4dCBvZiBjb2RlIGZvciBkaWFnbm9zaXMuXHJcbiAgICovXHJcbiAgaXRlbTogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogR3JvdW5kcyBmb3IgZWxpbWluYXRpb24uXHJcbiAgICovXHJcbiAgcmVhc29uPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENsaW5pY2FsSW1wcmVzc2lvbi5ydWxlZE91dC5yZWFzb25cclxuICAgKi9cclxuICBfcmVhc29uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIERpYWdub3NpcyBjb25zaWRlcmVkIG5vdCBwb3NzaWJsZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDbGluaWNhbEltcHJlc3Npb25SdWxlZE91dCBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0NsaW5pY2FsSW1wcmVzc2lvblJ1bGVkT3V0JztcclxuICAvKipcclxuICAgKiBTcGVjaWZpYyB0ZXh0IG9mIGNvZGUgZm9yIGRpYWdub3Npcy5cclxuICAgKi9cclxuICBwdWJsaWMgaXRlbTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBHcm91bmRzIGZvciBlbGltaW5hdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgcmVhc29uPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBDbGluaWNhbEltcHJlc3Npb25SdWxlZE91dCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENsaW5pY2FsSW1wcmVzc2lvblJ1bGVkT3V0QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2l0ZW0nXSkgeyB0aGlzLml0ZW0gPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLml0ZW0pOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pdGVtID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVhc29uJ10pIHsgdGhpcy5yZWFzb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnJlYXNvbn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfcmVhc29uJ10pIHtcclxuICAgICAgaWYgKHRoaXMucmVhc29uKSB7IHRoaXMucmVhc29uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3JlYXNvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnJlYXNvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9yZWFzb24gYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdDbGluaWNhbEltcHJlc3Npb24ucnVsZWRPdXQnIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdpdGVtJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdyZWFzb24nLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIENsaW5pY2FsSW1wcmVzc2lvbiB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBDbGluaWNhbEltcHJlc3Npb25BcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJDbGluaWNhbEltcHJlc3Npb25cInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBhdGllbnQgYmVpbmcgYXNzZXNzZWQuXHJcbiAgICovXHJcbiAgcGF0aWVudDogZmhpci5SZWZlcmVuY2VBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNsaW5pY2lhbiBwZXJmb3JtaW5nIHRoZSBhc3Nlc3NtZW50LlxyXG4gICAqL1xyXG4gIGFzc2Vzc29yPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHRoZSB3b3JrZmxvdyBzdGF0dXMgb2YgdGhlIGFzc2Vzc21lbnQuXHJcbiAgICovXHJcbiAgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPENsaW5pY2FsSW1wcmVzc2lvblN0YXR1c0NvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDbGluaWNhbEltcHJlc3Npb24uc3RhdHVzXHJcbiAgICovXHJcbiAgX3N0YXR1cz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBvaW50IGluIHRpbWUgYXQgd2hpY2ggdGhlIGFzc2Vzc21lbnQgd2FzIGNvbmNsdWRlZCAobm90IHdoZW4gaXQgd2FzIHJlY29yZGVkKS5cclxuICAgKi9cclxuICBkYXRlPzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ2xpbmljYWxJbXByZXNzaW9uLmRhdGVcclxuICAgKi9cclxuICBfZGF0ZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQSBzdW1tYXJ5IG9mIHRoZSBjb250ZXh0IGFuZC9vciBjYXVzZSBvZiB0aGUgYXNzZXNzbWVudCAtIHdoeSAvIHdoZXJlIHdhcyBpdCBwZWZvcm1lZCwgYW5kIHdoYXQgcGF0aWVudCBldmVudHMvc3N0YXR1cyBwcm9tcHRlZCBpdC5cclxuICAgKi9cclxuICBkZXNjcmlwdGlvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDbGluaWNhbEltcHJlc3Npb24uZGVzY3JpcHRpb25cclxuICAgKi9cclxuICBfZGVzY3JpcHRpb24/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEEgcmVmZXJlbmNlIHRvIHRoZSBsYXN0IGFzc2VzbWVudCB0aGF0IHdhcyBjb25kdWN0ZWQgYm9uIHRoaXMgcGF0aWVudC4gQXNzZXNzbWVudHMgYXJlIG9mdGVuL3VzdWFsbHkgb25nb2luZyBpbiBuYXR1cmU7IGEgY2FyZSBwcm92aWRlciAocHJhY3RpdGlvbmVyIG9yIHRlYW0pIHdpbGwgbWFrZSBuZXcgYXNzZXNzbWVudHMgb24gYW4gb25nb2luZyBiYXNpcyBhcyBuZXcgZGF0YSBhcmlzZXMgb3IgdGhlIHBhdGllbnQncyBjb25kaXRpb25zIGNoYW5nZXMuXHJcbiAgICovXHJcbiAgcHJldmlvdXM/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgYSBsaXN0IG9mIHRoZSBnZW5lcmFsIHByb2JsZW1zL2NvbmRpdGlvbnMgZm9yIGEgcGF0aWVudC5cclxuICAgKi9cclxuICBwcm9ibGVtPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZXF1ZXN0IG9yIGV2ZW50IHRoYXQgbmVjZXNzaXRhdGVkIHRoaXMgYXNzZXNzbWVudC4gVGhpcyBtYXkgYmUgYSBkaWFnbm9zaXMsIGEgQ2FyZSBQbGFuLCBhIFJlcXVlc3QgUmVmZXJyYWwsIG9yIHNvbWUgb3RoZXIgcmVzb3VyY2UuXHJcbiAgICovXHJcbiAgdHJpZ2dlcj86IGZoaXIuQ29kZWFibGVDb25jZXB0fGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcmVxdWVzdCBvciBldmVudCB0aGF0IG5lY2Vzc2l0YXRlZCB0aGlzIGFzc2Vzc21lbnQuIFRoaXMgbWF5IGJlIGEgZGlhZ25vc2lzLCBhIENhcmUgUGxhbiwgYSBSZXF1ZXN0IFJlZmVycmFsLCBvciBzb21lIG90aGVyIHJlc291cmNlLlxyXG4gICAqL1xyXG4gIHRyaWdnZXJDb2RlYWJsZUNvbmNlcHQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZXF1ZXN0IG9yIGV2ZW50IHRoYXQgbmVjZXNzaXRhdGVkIHRoaXMgYXNzZXNzbWVudC4gVGhpcyBtYXkgYmUgYSBkaWFnbm9zaXMsIGEgQ2FyZSBQbGFuLCBhIFJlcXVlc3QgUmVmZXJyYWwsIG9yIHNvbWUgb3RoZXIgcmVzb3VyY2UuXHJcbiAgICovXHJcbiAgdHJpZ2dlclJlZmVyZW5jZT86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogT25lIG9yIG1vcmUgc2V0cyBvZiBpbnZlc3RpZ2F0aW9ucyAoc2lnbnMsIHN5bXB0aW9ucywgZXRjLikuIFRoZSBhY3R1YWwgZ3JvdXBpbmcgb2YgaW52ZXN0aWdhdGlvbnMgdmFyeSBncmVhdGx5IGRlcGVuZGluZyBvbiB0aGUgdHlwZSBhbmQgY29udGV4dCBvZiB0aGUgYXNzZXNzbWVudC4gVGhlc2UgaW52ZXN0aWdhdGlvbnMgbWF5IGluY2x1ZGUgZGF0YSBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBhc3Nlc3NtZW50IHByb2Nlc3MsIG9yIGRhdGEgcHJldmlvdXNseSBnZW5lcmF0ZWQgYW5kIHJlY29yZGVkIHRoYXQgaXMgcGVydGluZW50IHRvIHRoZSBvdXRjb21lcy5cclxuICAgKi9cclxuICBpbnZlc3RpZ2F0aW9ucz86IGZoaXIuQ2xpbmljYWxJbXByZXNzaW9uSW52ZXN0aWdhdGlvbnNBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFJlZmVyZW5jZSB0byBhIHNwZWNpZmljIHB1Ymxpc2hlZCBjbGluaWNhbCBwcm90b2NvbCB0aGF0IHdhcyBmb2xsb3dlZCBkdXJpbmcgdGhpcyBhc3Nlc3NtZW50LCBhbmQvb3IgdGhhdCBwcm92aWRlcyBldmlkZW5jZSBpbiBzdXBwb3J0IG9mIHRoZSBkaWFnbm9zaXMuXHJcbiAgICovXHJcbiAgcHJvdG9jb2w/OiBmaGlyLkZoaXJVcml8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ2xpbmljYWxJbXByZXNzaW9uLnByb3RvY29sXHJcbiAgICovXHJcbiAgX3Byb3RvY29sPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBBIHRleHQgc3VtbWFyeSBvZiB0aGUgaW52ZXN0aWdhdGlvbnMgYW5kIHRoZSBkaWFnbm9zaXMuXHJcbiAgICovXHJcbiAgc3VtbWFyeT86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDbGluaWNhbEltcHJlc3Npb24uc3VtbWFyeVxyXG4gICAqL1xyXG4gIF9zdW1tYXJ5PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBTcGVjaWZpYyBmaW5kaW5ncyBvciBkaWFnbm9zZXMgdGhhdCB3YXMgY29uc2lkZXJlZCBsaWtlbHkgb3IgcmVsZXZhbnQgdG8gb25nb2luZyB0cmVhdG1lbnQuXHJcbiAgICovXHJcbiAgZmluZGluZz86IGZoaXIuQ2xpbmljYWxJbXByZXNzaW9uRmluZGluZ0FyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGlhZ25vc2VzL2NvbmRpdGlvbnMgcmVzb2x2ZWQgc2luY2UgdGhlIGxhc3QgYXNzZXNzbWVudC5cclxuICAgKi9cclxuICByZXNvbHZlZD86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEaWFnbm9zaXMgY29uc2lkZXJlZCBub3QgcG9zc2libGUuXHJcbiAgICovXHJcbiAgcnVsZWRPdXQ/OiBmaGlyLkNsaW5pY2FsSW1wcmVzc2lvblJ1bGVkT3V0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFc3RpbWF0ZSBvZiBsaWtlbHkgb3V0Y29tZS5cclxuICAgKi9cclxuICBwcm9nbm9zaXM/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ2xpbmljYWxJbXByZXNzaW9uLnByb2dub3Npc1xyXG4gICAqL1xyXG4gIF9wcm9nbm9zaXM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFBsYW4gb2YgYWN0aW9uIGFmdGVyIGFzc2Vzc21lbnQuXHJcbiAgICovXHJcbiAgcGxhbj86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBY3Rpb25zIHRha2VuIGR1cmluZyBhc3Nlc3NtZW50LlxyXG4gICAqL1xyXG4gIGFjdGlvbj86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgcmVjb3JkIG9mIGEgY2xpbmljYWwgYXNzZXNzbWVudCBwZXJmb3JtZWQgdG8gZGV0ZXJtaW5lIHdoYXQgcHJvYmxlbShzKSBtYXkgYWZmZWN0IHRoZSBwYXRpZW50IGFuZCBiZWZvcmUgcGxhbm5pbmcgdGhlIHRyZWF0bWVudHMgb3IgbWFuYWdlbWVudCBzdHJhdGVnaWVzIHRoYXQgYXJlIGJlc3QgdG8gbWFuYWdlIGEgcGF0aWVudCdzIGNvbmRpdGlvbi4gQXNzZXNzbWVudHMgYXJlIG9mdGVuIDE6MSB3aXRoIGEgY2xpbmljYWwgY29uc3VsdGF0aW9uIC8gZW5jb3VudGVyLCAgYnV0IHRoaXMgdmFyaWVzIGdyZWF0bHkgZGVwZW5kaW5nIG9uIHRoZSBjbGluaWNhbCB3b3JrZmxvdy4gVGhpcyByZXNvdXJjZSBpcyBjYWxsZWQgXCJDbGluaWNhbEltcHJlc3Npb25cIiByYXRoZXIgdGhhbiBcIkNsaW5pY2FsQXNzZXNzbWVudFwiIHRvIGF2b2lkIGNvbmZ1c2lvbiB3aXRoIHRoZSByZWNvcmRpbmcgb2YgYXNzZXNzbWVudCB0b29scyBzdWNoIGFzIEFwZ2FyIHNjb3JlLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENsaW5pY2FsSW1wcmVzc2lvbiBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQ2xpbmljYWxJbXByZXNzaW9uJztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIkNsaW5pY2FsSW1wcmVzc2lvblwiO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXRpZW50IGJlaW5nIGFzc2Vzc2VkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXRpZW50OiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjbGluaWNpYW4gcGVyZm9ybWluZyB0aGUgYXNzZXNzbWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgYXNzZXNzb3I/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgd29ya2Zsb3cgc3RhdHVzIG9mIHRoZSBhc3Nlc3NtZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0dXM6IGZoaXIuRmhpckNvZGU8Q2xpbmljYWxJbXByZXNzaW9uU3RhdHVzQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBvaW50IGluIHRpbWUgYXQgd2hpY2ggdGhlIGFzc2Vzc21lbnQgd2FzIGNvbmNsdWRlZCAobm90IHdoZW4gaXQgd2FzIHJlY29yZGVkKS5cclxuICAgKi9cclxuICBwdWJsaWMgZGF0ZT86IGZoaXIuRmhpckRhdGVUaW1lfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHN1bW1hcnkgb2YgdGhlIGNvbnRleHQgYW5kL29yIGNhdXNlIG9mIHRoZSBhc3Nlc3NtZW50IC0gd2h5IC8gd2hlcmUgd2FzIGl0IHBlZm9ybWVkLCBhbmQgd2hhdCBwYXRpZW50IGV2ZW50cy9zc3RhdHVzIHByb21wdGVkIGl0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZXNjcmlwdGlvbj86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSByZWZlcmVuY2UgdG8gdGhlIGxhc3QgYXNzZXNtZW50IHRoYXQgd2FzIGNvbmR1Y3RlZCBib24gdGhpcyBwYXRpZW50LiBBc3Nlc3NtZW50cyBhcmUgb2Z0ZW4vdXN1YWxseSBvbmdvaW5nIGluIG5hdHVyZTsgYSBjYXJlIHByb3ZpZGVyIChwcmFjdGl0aW9uZXIgb3IgdGVhbSkgd2lsbCBtYWtlIG5ldyBhc3Nlc3NtZW50cyBvbiBhbiBvbmdvaW5nIGJhc2lzIGFzIG5ldyBkYXRhIGFyaXNlcyBvciB0aGUgcGF0aWVudCdzIGNvbmRpdGlvbnMgY2hhbmdlcy5cclxuICAgKi9cclxuICBwdWJsaWMgcHJldmlvdXM/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBhIGxpc3Qgb2YgdGhlIGdlbmVyYWwgcHJvYmxlbXMvY29uZGl0aW9ucyBmb3IgYSBwYXRpZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcm9ibGVtOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZXF1ZXN0IG9yIGV2ZW50IHRoYXQgbmVjZXNzaXRhdGVkIHRoaXMgYXNzZXNzbWVudC4gVGhpcyBtYXkgYmUgYSBkaWFnbm9zaXMsIGEgQ2FyZSBQbGFuLCBhIFJlcXVlc3QgUmVmZXJyYWwsIG9yIHNvbWUgb3RoZXIgcmVzb3VyY2UuXHJcbiAgICovXHJcbiAgcHVibGljIHRyaWdnZXI/OiAoZmhpci5Db2RlYWJsZUNvbmNlcHR8Zmhpci5SZWZlcmVuY2UpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IENsaW5pY2FsSW1wcmVzc2lvbi50cmlnZ2VyW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX3RyaWdnZXJJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBPbmUgb3IgbW9yZSBzZXRzIG9mIGludmVzdGlnYXRpb25zIChzaWducywgc3ltcHRpb25zLCBldGMuKS4gVGhlIGFjdHVhbCBncm91cGluZyBvZiBpbnZlc3RpZ2F0aW9ucyB2YXJ5IGdyZWF0bHkgZGVwZW5kaW5nIG9uIHRoZSB0eXBlIGFuZCBjb250ZXh0IG9mIHRoZSBhc3Nlc3NtZW50LiBUaGVzZSBpbnZlc3RpZ2F0aW9ucyBtYXkgaW5jbHVkZSBkYXRhIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGFzc2Vzc21lbnQgcHJvY2Vzcywgb3IgZGF0YSBwcmV2aW91c2x5IGdlbmVyYXRlZCBhbmQgcmVjb3JkZWQgdGhhdCBpcyBwZXJ0aW5lbnQgdG8gdGhlIG91dGNvbWVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpbnZlc3RpZ2F0aW9uczogZmhpci5DbGluaWNhbEltcHJlc3Npb25JbnZlc3RpZ2F0aW9uc1tdO1xyXG4gIC8qKlxyXG4gICAqIFJlZmVyZW5jZSB0byBhIHNwZWNpZmljIHB1Ymxpc2hlZCBjbGluaWNhbCBwcm90b2NvbCB0aGF0IHdhcyBmb2xsb3dlZCBkdXJpbmcgdGhpcyBhc3Nlc3NtZW50LCBhbmQvb3IgdGhhdCBwcm92aWRlcyBldmlkZW5jZSBpbiBzdXBwb3J0IG9mIHRoZSBkaWFnbm9zaXMuXHJcbiAgICovXHJcbiAgcHVibGljIHByb3RvY29sPzogZmhpci5GaGlyVXJpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHRleHQgc3VtbWFyeSBvZiB0aGUgaW52ZXN0aWdhdGlvbnMgYW5kIHRoZSBkaWFnbm9zaXMuXHJcbiAgICovXHJcbiAgcHVibGljIHN1bW1hcnk/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFNwZWNpZmljIGZpbmRpbmdzIG9yIGRpYWdub3NlcyB0aGF0IHdhcyBjb25zaWRlcmVkIGxpa2VseSBvciByZWxldmFudCB0byBvbmdvaW5nIHRyZWF0bWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgZmluZGluZzogZmhpci5DbGluaWNhbEltcHJlc3Npb25GaW5kaW5nW107XHJcbiAgLyoqXHJcbiAgICogRGlhZ25vc2VzL2NvbmRpdGlvbnMgcmVzb2x2ZWQgc2luY2UgdGhlIGxhc3QgYXNzZXNzbWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgcmVzb2x2ZWQ6IGZoaXIuQ29kZWFibGVDb25jZXB0W107XHJcbiAgLyoqXHJcbiAgICogRGlhZ25vc2lzIGNvbnNpZGVyZWQgbm90IHBvc3NpYmxlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBydWxlZE91dDogZmhpci5DbGluaWNhbEltcHJlc3Npb25SdWxlZE91dFtdO1xyXG4gIC8qKlxyXG4gICAqIEVzdGltYXRlIG9mIGxpa2VseSBvdXRjb21lLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcm9nbm9zaXM/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFBsYW4gb2YgYWN0aW9uIGFmdGVyIGFzc2Vzc21lbnQuXHJcbiAgICovXHJcbiAgcHVibGljIHBsYW46IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogQWN0aW9ucyB0YWtlbiBkdXJpbmcgYXNzZXNzbWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgYWN0aW9uOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIENsaW5pY2FsSW1wcmVzc2lvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENsaW5pY2FsSW1wcmVzc2lvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdDbGluaWNhbEltcHJlc3Npb24nO1xyXG4gICAgaWYgKHNvdXJjZVsncGF0aWVudCddKSB7IHRoaXMucGF0aWVudCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UucGF0aWVudCk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnBhdGllbnQgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydhc3Nlc3NvciddKSB7IHRoaXMuYXNzZXNzb3IgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmFzc2Vzc29yKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RhdHVzJ10pIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxDbGluaWNhbEltcHJlc3Npb25TdGF0dXNDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2Uuc3RhdHVzfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zdGF0dXMnXSkge1xyXG4gICAgICBpZiAodGhpcy5zdGF0dXMpIHsgdGhpcy5zdGF0dXMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc3RhdHVzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8Q2xpbmljYWxJbXByZXNzaW9uU3RhdHVzQ29kZVR5cGU+KHNvdXJjZS5fc3RhdHVzIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydkYXRlJ10pIHsgdGhpcy5kYXRlID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLmRhdGV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2RhdGUnXSkge1xyXG4gICAgICBpZiAodGhpcy5kYXRlKSB7IHRoaXMuZGF0ZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9kYXRlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZGF0ZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZShzb3VyY2UuX2RhdGUgYXMgUGFydGlhbDxmaGlyLkZoaXJEYXRlVGltZUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGVzY3JpcHRpb24nXSkgeyB0aGlzLmRlc2NyaXB0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5kZXNjcmlwdGlvbn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfZGVzY3JpcHRpb24nXSkge1xyXG4gICAgICBpZiAodGhpcy5kZXNjcmlwdGlvbikgeyB0aGlzLmRlc2NyaXB0aW9uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2Rlc2NyaXB0aW9uISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZGVzY3JpcHRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fZGVzY3JpcHRpb24gYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3ByZXZpb3VzJ10pIHsgdGhpcy5wcmV2aW91cyA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UucHJldmlvdXMpOyB9XHJcbiAgICBpZiAoc291cmNlWydwcm9ibGVtJ10pIHsgdGhpcy5wcm9ibGVtID0gc291cmNlLnByb2JsZW0ubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5wcm9ibGVtID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3RyaWdnZXInXSkgeyB0aGlzLnRyaWdnZXIgPSBzb3VyY2UudHJpZ2dlcjsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd0cmlnZ2VyQ29kZWFibGVDb25jZXB0J10pIHsgdGhpcy50cmlnZ2VyID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS50cmlnZ2VyQ29kZWFibGVDb25jZXB0KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd0cmlnZ2VyUmVmZXJlbmNlJ10pIHsgdGhpcy50cmlnZ2VyID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS50cmlnZ2VyUmVmZXJlbmNlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnaW52ZXN0aWdhdGlvbnMnXSkgeyB0aGlzLmludmVzdGlnYXRpb25zID0gc291cmNlLmludmVzdGlnYXRpb25zLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ2xpbmljYWxJbXByZXNzaW9uSW52ZXN0aWdhdGlvbnMoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pbnZlc3RpZ2F0aW9ucyA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydwcm90b2NvbCddKSB7IHRoaXMucHJvdG9jb2wgPSBuZXcgZmhpci5GaGlyVXJpKHt2YWx1ZTogc291cmNlLnByb3RvY29sfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19wcm90b2NvbCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnByb3RvY29sKSB7IHRoaXMucHJvdG9jb2wuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fcHJvdG9jb2whKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5wcm90b2NvbCA9IG5ldyBmaGlyLkZoaXJVcmkoc291cmNlLl9wcm90b2NvbCBhcyBQYXJ0aWFsPGZoaXIuRmhpclVyaUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3VtbWFyeSddKSB7IHRoaXMuc3VtbWFyeSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2Uuc3VtbWFyeX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfc3VtbWFyeSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnN1bW1hcnkpIHsgdGhpcy5zdW1tYXJ5LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3N1bW1hcnkhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zdW1tYXJ5ID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3N1bW1hcnkgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2ZpbmRpbmcnXSkgeyB0aGlzLmZpbmRpbmcgPSBzb3VyY2UuZmluZGluZy5tYXAoKHgpID0+IG5ldyBmaGlyLkNsaW5pY2FsSW1wcmVzc2lvbkZpbmRpbmcoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5maW5kaW5nID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3Jlc29sdmVkJ10pIHsgdGhpcy5yZXNvbHZlZCA9IHNvdXJjZS5yZXNvbHZlZC5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnJlc29sdmVkID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3J1bGVkT3V0J10pIHsgdGhpcy5ydWxlZE91dCA9IHNvdXJjZS5ydWxlZE91dC5tYXAoKHgpID0+IG5ldyBmaGlyLkNsaW5pY2FsSW1wcmVzc2lvblJ1bGVkT3V0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucnVsZWRPdXQgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJvZ25vc2lzJ10pIHsgdGhpcy5wcm9nbm9zaXMgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnByb2dub3Npc30pOyB9XHJcbiAgICBpZiAoc291cmNlWydfcHJvZ25vc2lzJ10pIHtcclxuICAgICAgaWYgKHRoaXMucHJvZ25vc2lzKSB7IHRoaXMucHJvZ25vc2lzLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3Byb2dub3NpcyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnByb2dub3NpcyA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9wcm9nbm9zaXMgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3BsYW4nXSkgeyB0aGlzLnBsYW4gPSBzb3VyY2UucGxhbi5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnBsYW4gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYWN0aW9uJ10pIHsgdGhpcy5hY3Rpb24gPSBzb3VyY2UuYWN0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYWN0aW9uID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdDbGluaWNhbEltcHJlc3Npb24nIH1cclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTKCdwYXRpZW50JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdhc3Nlc3NvcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSU1YoJ3N0YXR1cycsZXhwLCdDbGluaWNhbEltcHJlc3Npb25TdGF0dXMnLENsaW5pY2FsSW1wcmVzc2lvblN0YXR1c1ZzVmFsaWRhdGlvbiwncicpKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdkYXRlJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdkZXNjcmlwdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygncHJldmlvdXMnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3Byb2JsZW0nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3RyaWdnZXInLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2ludmVzdGlnYXRpb25zJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdwcm90b2NvbCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnc3VtbWFyeScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnZmluZGluZycsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgncmVzb2x2ZWQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3J1bGVkT3V0JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdwcm9nbm9zaXMnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ3BsYW4nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2FjdGlvbicsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4iXX0=