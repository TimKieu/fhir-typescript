// <auto-generated/>
// Contents of: hl7.fhir.r2.core version: 1.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: ClinicalImpression
import * as fhir from '../fhir.js';
// @ts-ignore
import { ClinicalImpressionStatusVsValidation } from '../fhirValueSets/ClinicalImpressionStatusVsValidation.js';
/**
 * One or more sets of investigations (signs, symptions, etc.). The actual grouping of investigations vary greatly depending on the type and context of the assessment. These investigations may include data generated during the assessment process, or data previously generated and recorded that is pertinent to the outcomes.
 */
export class ClinicalImpressionInvestigations extends fhir.BackboneElement {
    /**
     * Default constructor for ClinicalImpressionInvestigations - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['code']) {
            this.code = new fhir.CodeableConcept(source.code, options);
        }
        else {
            this.code = null;
        }
        if (source['item']) {
            this.item = source.item.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.item = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ClinicalImpression.investigations';
        }
        iss.push(...this.vRS('code', exp));
        iss.push(...this.vOA('item', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ClinicalImpressionInvestigations._fts_dataType = 'ClinicalImpressionInvestigations';
/**
 * Specific findings or diagnoses that was considered likely or relevant to ongoing treatment.
 */
export class ClinicalImpressionFinding extends fhir.BackboneElement {
    /**
     * Default constructor for ClinicalImpressionFinding - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['item']) {
            this.item = new fhir.CodeableConcept(source.item, options);
        }
        else {
            this.item = null;
        }
        if (source['cause'] !== undefined) {
            this.cause = new fhir.FhirString({ value: source.cause }, options);
        }
        if (source['_cause']) {
            if (this.cause) {
                this.cause.addExtendedProperties(source._cause);
            }
            else {
                this.cause = new fhir.FhirString(source._cause, options);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ClinicalImpression.finding';
        }
        iss.push(...this.vRS('item', exp));
        iss.push(...this.vOS('cause', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ClinicalImpressionFinding._fts_dataType = 'ClinicalImpressionFinding';
/**
 * Diagnosis considered not possible.
 */
export class ClinicalImpressionRuledOut extends fhir.BackboneElement {
    /**
     * Default constructor for ClinicalImpressionRuledOut - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['item']) {
            this.item = new fhir.CodeableConcept(source.item, options);
        }
        else {
            this.item = null;
        }
        if (source['reason'] !== undefined) {
            this.reason = new fhir.FhirString({ value: source.reason }, options);
        }
        if (source['_reason']) {
            if (this.reason) {
                this.reason.addExtendedProperties(source._reason);
            }
            else {
                this.reason = new fhir.FhirString(source._reason, options);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ClinicalImpression.ruledOut';
        }
        iss.push(...this.vRS('item', exp));
        iss.push(...this.vOS('reason', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ClinicalImpressionRuledOut._fts_dataType = 'ClinicalImpressionRuledOut';
/**
 * A record of a clinical assessment performed to determine what problem(s) may affect the patient and before planning the treatments or management strategies that are best to manage a patient's condition. Assessments are often 1:1 with a clinical consultation / encounter,  but this varies greatly depending on the clinical workflow. This resource is called "ClinicalImpression" rather than "ClinicalAssessment" to avoid confusion with the recording of assessment tools such as Apgar score.
 */
export class ClinicalImpression extends fhir.DomainResource {
    /**
     * Default constructor for ClinicalImpression - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'ClinicalImpression';
        if (source['patient']) {
            this.patient = new fhir.Reference(source.patient, options);
        }
        else {
            this.patient = null;
        }
        if (source['assessor']) {
            this.assessor = new fhir.Reference(source.assessor, options);
        }
        if (source['status'] !== undefined) {
            this.status = new fhir.FhirCode({ value: source.status }, options);
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status, options);
            }
        }
        if (source['date'] !== undefined) {
            this.date = new fhir.FhirDateTime({ value: source.date }, options);
        }
        if (source['_date']) {
            if (this.date) {
                this.date.addExtendedProperties(source._date);
            }
            else {
                this.date = new fhir.FhirDateTime(source._date, options);
            }
        }
        if (source['description'] !== undefined) {
            this.description = new fhir.FhirString({ value: source.description }, options);
        }
        if (source['_description']) {
            if (this.description) {
                this.description.addExtendedProperties(source._description);
            }
            else {
                this.description = new fhir.FhirString(source._description, options);
            }
        }
        if (source['previous']) {
            this.previous = new fhir.Reference(source.previous, options);
        }
        if (source['problem']) {
            this.problem = source.problem.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.problem = [];
        }
        if (source['trigger']) {
            this.trigger = source.trigger;
        }
        else if (source['triggerCodeableConcept']) {
            this.trigger = new fhir.CodeableConcept(source.triggerCodeableConcept, options);
        }
        else if (source['triggerReference']) {
            this.trigger = new fhir.Reference(source.triggerReference, options);
        }
        if (source['investigations']) {
            this.investigations = source.investigations.map((x) => new fhir.ClinicalImpressionInvestigations(x, options));
        }
        else {
            this.investigations = [];
        }
        if (source['protocol'] !== undefined) {
            this.protocol = new fhir.FhirUri({ value: source.protocol }, options);
        }
        if (source['_protocol']) {
            if (this.protocol) {
                this.protocol.addExtendedProperties(source._protocol);
            }
            else {
                this.protocol = new fhir.FhirUri(source._protocol, options);
            }
        }
        if (source['summary'] !== undefined) {
            this.summary = new fhir.FhirString({ value: source.summary }, options);
        }
        if (source['_summary']) {
            if (this.summary) {
                this.summary.addExtendedProperties(source._summary);
            }
            else {
                this.summary = new fhir.FhirString(source._summary, options);
            }
        }
        if (source['finding']) {
            this.finding = source.finding.map((x) => new fhir.ClinicalImpressionFinding(x, options));
        }
        else {
            this.finding = [];
        }
        if (source['resolved']) {
            this.resolved = source.resolved.map((x) => new fhir.CodeableConcept(x, options));
        }
        else {
            this.resolved = [];
        }
        if (source['ruledOut']) {
            this.ruledOut = source.ruledOut.map((x) => new fhir.ClinicalImpressionRuledOut(x, options));
        }
        else {
            this.ruledOut = [];
        }
        if (source['prognosis'] !== undefined) {
            this.prognosis = new fhir.FhirString({ value: source.prognosis }, options);
        }
        if (source['_prognosis']) {
            if (this.prognosis) {
                this.prognosis.addExtendedProperties(source._prognosis);
            }
            else {
                this.prognosis = new fhir.FhirString(source._prognosis, options);
            }
        }
        if (source['plan']) {
            this.plan = source.plan.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.plan = [];
        }
        if (source['action']) {
            this.action = source.action.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.action = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'ClinicalImpression';
        }
        iss.push(...this.vRS('patient', exp));
        iss.push(...this.vOS('assessor', exp));
        iss.push(...this.vRSV('status', exp, 'ClinicalImpressionStatus', ClinicalImpressionStatusVsValidation, 'r'));
        iss.push(...this.vOS('date', exp));
        iss.push(...this.vOS('description', exp));
        iss.push(...this.vOS('previous', exp));
        iss.push(...this.vOA('problem', exp));
        iss.push(...this.vOS('trigger', exp));
        iss.push(...this.vOA('investigations', exp));
        iss.push(...this.vOS('protocol', exp));
        iss.push(...this.vOS('summary', exp));
        iss.push(...this.vOA('finding', exp));
        iss.push(...this.vOA('resolved', exp));
        iss.push(...this.vOA('ruledOut', exp));
        iss.push(...this.vOS('prognosis', exp));
        iss.push(...this.vOA('plan', exp));
        iss.push(...this.vOA('action', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
ClinicalImpression._fts_dataType = 'ClinicalImpression';
/**
 * Internal flag to properly serialize choice-type element ClinicalImpression.trigger[x]
 */
ClinicalImpression._fts_triggerIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ2xpbmljYWxJbXByZXNzaW9uLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9DbGluaWNhbEltcHJlc3Npb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsb0NBQW9DO0FBRXBDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBSW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsb0NBQW9DLEVBQUUsTUFBTSwwREFBMEQsQ0FBQztBQWVoSDs7R0FFRztBQUNILE1BQU0sT0FBTyxnQ0FBaUMsU0FBUSxJQUFJLENBQUMsZUFBZTtJQWF4RTs7T0FFRztJQUNILFlBQVksU0FBdUQsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDN0csS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FBRTthQUM5RTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1NBQUU7UUFDMUIsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUM7U0FBRTthQUN0RjtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDO1NBQUU7SUFDMUIsQ0FBQztJQUNEOztPQUVHO0lBQ2EsaUJBQWlCLENBQUMsTUFBYSxFQUFFO1FBQy9DLElBQUksR0FBRyxHQUFtQixLQUFLLENBQUMsaUJBQWlCLENB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QyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN0QyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNyQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNyQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzVDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3RDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3JDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3JDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3RDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3RDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ2xDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3BDLE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQzs7QUFuS0Q7O0dBRUc7QUFDNkIsZ0NBQWEsR0FBVSxvQkFBb0IsQ0FBQztBQXFDNUU7O0dBRUc7QUFDdUIsdUNBQW9CLEdBQVEsSUFBSSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnIyLmNvcmUgdmVyc2lvbjogMS4wLjJcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBDbGluaWNhbEltcHJlc3Npb25cclxuXHJcbmltcG9ydCAqIGFzIGZoaXIgZnJvbSAnLi4vZmhpci5qcyc7XHJcblxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IENsaW5pY2FsSW1wcmVzc2lvblN0YXR1c0NvZGVzLCAgQ2xpbmljYWxJbXByZXNzaW9uU3RhdHVzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NsaW5pY2FsSW1wcmVzc2lvblN0YXR1c0NvZGVzLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBDbGluaWNhbEltcHJlc3Npb25TdGF0dXNWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0NsaW5pY2FsSW1wcmVzc2lvblN0YXR1c1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBDbGluaWNhbEltcHJlc3Npb25JbnZlc3RpZ2F0aW9ucyB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBDbGluaWNhbEltcHJlc3Npb25JbnZlc3RpZ2F0aW9uc0FyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEEgbmFtZS9jb2RlIGZvciB0aGUgZ3JvdXAgKFwic2V0XCIpIG9mIGludmVzdGlnYXRpb25zLiBUeXBpY2FsbHksIHRoaXMgd2lsbCBiZSBzb21ldGhpbmcgbGlrZSBcInNpZ25zXCIsIFwic3ltcHRvbXNcIiwgXCJjbGluaWNhbFwiLCBcImRpYWdub3N0aWNcIiwgYnV0IHRoZSBsaXN0IGlzIG5vdCBjb25zdHJhaW5lZCwgYW5kIG90aGVycyBzdWNoIGdyb3VwcyBzdWNoIGFzIChleHBvc3VyZXxmYW1pbHl8dHJhdmVsfG51dGl0aXJpb25hbCkgaGlzdG9yeSBtYXkgYmUgdXNlZC5cclxuICAgKi9cclxuICBjb2RlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBBIHJlY29yZCBvZiBhIHNwZWNpZmljIGludmVzdGlnYXRpb24gdGhhdCB3YXMgdW5kZXJ0YWtlbi5cclxuICAgKi9cclxuICBpdGVtPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogT25lIG9yIG1vcmUgc2V0cyBvZiBpbnZlc3RpZ2F0aW9ucyAoc2lnbnMsIHN5bXB0aW9ucywgZXRjLikuIFRoZSBhY3R1YWwgZ3JvdXBpbmcgb2YgaW52ZXN0aWdhdGlvbnMgdmFyeSBncmVhdGx5IGRlcGVuZGluZyBvbiB0aGUgdHlwZSBhbmQgY29udGV4dCBvZiB0aGUgYXNzZXNzbWVudC4gVGhlc2UgaW52ZXN0aWdhdGlvbnMgbWF5IGluY2x1ZGUgZGF0YSBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBhc3Nlc3NtZW50IHByb2Nlc3MsIG9yIGRhdGEgcHJldmlvdXNseSBnZW5lcmF0ZWQgYW5kIHJlY29yZGVkIHRoYXQgaXMgcGVydGluZW50IHRvIHRoZSBvdXRjb21lcy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDbGluaWNhbEltcHJlc3Npb25JbnZlc3RpZ2F0aW9ucyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0NsaW5pY2FsSW1wcmVzc2lvbkludmVzdGlnYXRpb25zJztcclxuICAvKipcclxuICAgKiBBIG5hbWUvY29kZSBmb3IgdGhlIGdyb3VwIChcInNldFwiKSBvZiBpbnZlc3RpZ2F0aW9ucy4gVHlwaWNhbGx5LCB0aGlzIHdpbGwgYmUgc29tZXRoaW5nIGxpa2UgXCJzaWduc1wiLCBcInN5bXB0b21zXCIsIFwiY2xpbmljYWxcIiwgXCJkaWFnbm9zdGljXCIsIGJ1dCB0aGUgbGlzdCBpcyBub3QgY29uc3RyYWluZWQsIGFuZCBvdGhlcnMgc3VjaCBncm91cHMgc3VjaCBhcyAoZXhwb3N1cmV8ZmFtaWx5fHRyYXZlbHxudXRpdGlyaW9uYWwpIGhpc3RvcnkgbWF5IGJlIHVzZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGNvZGU6IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogQSByZWNvcmQgb2YgYSBzcGVjaWZpYyBpbnZlc3RpZ2F0aW9uIHRoYXQgd2FzIHVuZGVydGFrZW4uXHJcbiAgICovXHJcbiAgcHVibGljIGl0ZW06IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQ2xpbmljYWxJbXByZXNzaW9uSW52ZXN0aWdhdGlvbnMgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxDbGluaWNhbEltcHJlc3Npb25JbnZlc3RpZ2F0aW9uc0FyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydjb2RlJ10pIHsgdGhpcy5jb2RlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5jb2RlLCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY29kZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ2l0ZW0nXSkgeyB0aGlzLml0ZW0gPSBzb3VyY2UuaXRlbS5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLml0ZW0gPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0NsaW5pY2FsSW1wcmVzc2lvbi5pbnZlc3RpZ2F0aW9ucycgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ2NvZGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2l0ZW0nLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIENsaW5pY2FsSW1wcmVzc2lvbkZpbmRpbmcgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2xpbmljYWxJbXByZXNzaW9uRmluZGluZ0FyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFNwZWNpZmljIHRleHQgb2YgY29kZSBmb3IgZmluZGluZyBvciBkaWFnbm9zaXMuXHJcbiAgICovXHJcbiAgaXRlbTogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogV2hpY2ggaW52ZXN0aWdhdGlvbnMgc3VwcG9ydCBmaW5kaW5nIG9yIGRpYWdub3Npcy5cclxuICAgKi9cclxuICBjYXVzZT86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDbGluaWNhbEltcHJlc3Npb24uZmluZGluZy5jYXVzZVxyXG4gICAqL1xyXG4gIF9jYXVzZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTcGVjaWZpYyBmaW5kaW5ncyBvciBkaWFnbm9zZXMgdGhhdCB3YXMgY29uc2lkZXJlZCBsaWtlbHkgb3IgcmVsZXZhbnQgdG8gb25nb2luZyB0cmVhdG1lbnQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ2xpbmljYWxJbXByZXNzaW9uRmluZGluZyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0NsaW5pY2FsSW1wcmVzc2lvbkZpbmRpbmcnO1xyXG4gIC8qKlxyXG4gICAqIFNwZWNpZmljIHRleHQgb2YgY29kZSBmb3IgZmluZGluZyBvciBkaWFnbm9zaXMuXHJcbiAgICovXHJcbiAgcHVibGljIGl0ZW06IGZoaXIuQ29kZWFibGVDb25jZXB0fG51bGw7XHJcbiAgLyoqXHJcbiAgICogV2hpY2ggaW52ZXN0aWdhdGlvbnMgc3VwcG9ydCBmaW5kaW5nIG9yIGRpYWdub3Npcy5cclxuICAgKi9cclxuICBwdWJsaWMgY2F1c2U/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIENsaW5pY2FsSW1wcmVzc2lvbkZpbmRpbmcgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxDbGluaWNhbEltcHJlc3Npb25GaW5kaW5nQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2l0ZW0nXSkgeyB0aGlzLml0ZW0gPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLml0ZW0sIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pdGVtID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnY2F1c2UnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuY2F1c2UgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmNhdXNlfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19jYXVzZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLmNhdXNlKSB7IHRoaXMuY2F1c2UuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fY2F1c2UhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5jYXVzZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9jYXVzZSBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0NsaW5pY2FsSW1wcmVzc2lvbi5maW5kaW5nJyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygnaXRlbScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnY2F1c2UnLGV4cCkpO1xyXG4gICAgcmV0dXJuIGlzcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIENsaW5pY2FsSW1wcmVzc2lvblJ1bGVkT3V0IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENsaW5pY2FsSW1wcmVzc2lvblJ1bGVkT3V0QXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogU3BlY2lmaWMgdGV4dCBvZiBjb2RlIGZvciBkaWFnbm9zaXMuXHJcbiAgICovXHJcbiAgaXRlbTogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfG51bGw7XHJcbiAgLyoqXHJcbiAgICogR3JvdW5kcyBmb3IgZWxpbWluYXRpb24uXHJcbiAgICovXHJcbiAgcmVhc29uPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENsaW5pY2FsSW1wcmVzc2lvbi5ydWxlZE91dC5yZWFzb25cclxuICAgKi9cclxuICBfcmVhc29uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxufVxyXG5cclxuLyoqXHJcbiAqIERpYWdub3NpcyBjb25zaWRlcmVkIG5vdCBwb3NzaWJsZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDbGluaWNhbEltcHJlc3Npb25SdWxlZE91dCBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ0NsaW5pY2FsSW1wcmVzc2lvblJ1bGVkT3V0JztcclxuICAvKipcclxuICAgKiBTcGVjaWZpYyB0ZXh0IG9mIGNvZGUgZm9yIGRpYWdub3Npcy5cclxuICAgKi9cclxuICBwdWJsaWMgaXRlbTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBHcm91bmRzIGZvciBlbGltaW5hdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgcmVhc29uPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBDbGluaWNhbEltcHJlc3Npb25SdWxlZE91dCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPENsaW5pY2FsSW1wcmVzc2lvblJ1bGVkT3V0QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2l0ZW0nXSkgeyB0aGlzLml0ZW0gPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLml0ZW0sIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pdGVtID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVhc29uJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnJlYXNvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UucmVhc29ufSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19yZWFzb24nXSkge1xyXG4gICAgICBpZiAodGhpcy5yZWFzb24pIHsgdGhpcy5yZWFzb24uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fcmVhc29uISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMucmVhc29uID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3JlYXNvbiBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0NsaW5pY2FsSW1wcmVzc2lvbi5ydWxlZE91dCcgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ2l0ZW0nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3JlYXNvbicsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgQ2xpbmljYWxJbXByZXNzaW9uIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENsaW5pY2FsSW1wcmVzc2lvbkFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIkNsaW5pY2FsSW1wcmVzc2lvblwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcGF0aWVudCBiZWluZyBhc3Nlc3NlZC5cclxuICAgKi9cclxuICBwYXRpZW50OiBmaGlyLlJlZmVyZW5jZUFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgY2xpbmljaWFuIHBlcmZvcm1pbmcgdGhlIGFzc2Vzc21lbnQuXHJcbiAgICovXHJcbiAgYXNzZXNzb3I/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgdGhlIHdvcmtmbG93IHN0YXR1cyBvZiB0aGUgYXNzZXNzbWVudC5cclxuICAgKi9cclxuICBzdGF0dXM6IGZoaXIuRmhpckNvZGU8Q2xpbmljYWxJbXByZXNzaW9uU3RhdHVzQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENsaW5pY2FsSW1wcmVzc2lvbi5zdGF0dXNcclxuICAgKi9cclxuICBfc3RhdHVzPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgcG9pbnQgaW4gdGltZSBhdCB3aGljaCB0aGUgYXNzZXNzbWVudCB3YXMgY29uY2x1ZGVkIChub3Qgd2hlbiBpdCB3YXMgcmVjb3JkZWQpLlxyXG4gICAqL1xyXG4gIGRhdGU/OiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDbGluaWNhbEltcHJlc3Npb24uZGF0ZVxyXG4gICAqL1xyXG4gIF9kYXRlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBBIHN1bW1hcnkgb2YgdGhlIGNvbnRleHQgYW5kL29yIGNhdXNlIG9mIHRoZSBhc3Nlc3NtZW50IC0gd2h5IC8gd2hlcmUgd2FzIGl0IHBlZm9ybWVkLCBhbmQgd2hhdCBwYXRpZW50IGV2ZW50cy9zc3RhdHVzIHByb21wdGVkIGl0LlxyXG4gICAqL1xyXG4gIGRlc2NyaXB0aW9uPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENsaW5pY2FsSW1wcmVzc2lvbi5kZXNjcmlwdGlvblxyXG4gICAqL1xyXG4gIF9kZXNjcmlwdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQSByZWZlcmVuY2UgdG8gdGhlIGxhc3QgYXNzZXNtZW50IHRoYXQgd2FzIGNvbmR1Y3RlZCBib24gdGhpcyBwYXRpZW50LiBBc3Nlc3NtZW50cyBhcmUgb2Z0ZW4vdXN1YWxseSBvbmdvaW5nIGluIG5hdHVyZTsgYSBjYXJlIHByb3ZpZGVyIChwcmFjdGl0aW9uZXIgb3IgdGVhbSkgd2lsbCBtYWtlIG5ldyBhc3Nlc3NtZW50cyBvbiBhbiBvbmdvaW5nIGJhc2lzIGFzIG5ldyBkYXRhIGFyaXNlcyBvciB0aGUgcGF0aWVudCdzIGNvbmRpdGlvbnMgY2hhbmdlcy5cclxuICAgKi9cclxuICBwcmV2aW91cz86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyBhIGxpc3Qgb2YgdGhlIGdlbmVyYWwgcHJvYmxlbXMvY29uZGl0aW9ucyBmb3IgYSBwYXRpZW50LlxyXG4gICAqL1xyXG4gIHByb2JsZW0/OiBmaGlyLlJlZmVyZW5jZUFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlcXVlc3Qgb3IgZXZlbnQgdGhhdCBuZWNlc3NpdGF0ZWQgdGhpcyBhc3Nlc3NtZW50LiBUaGlzIG1heSBiZSBhIGRpYWdub3NpcywgYSBDYXJlIFBsYW4sIGEgUmVxdWVzdCBSZWZlcnJhbCwgb3Igc29tZSBvdGhlciByZXNvdXJjZS5cclxuICAgKi9cclxuICB0cmlnZ2VyPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8Zmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZXF1ZXN0IG9yIGV2ZW50IHRoYXQgbmVjZXNzaXRhdGVkIHRoaXMgYXNzZXNzbWVudC4gVGhpcyBtYXkgYmUgYSBkaWFnbm9zaXMsIGEgQ2FyZSBQbGFuLCBhIFJlcXVlc3QgUmVmZXJyYWwsIG9yIHNvbWUgb3RoZXIgcmVzb3VyY2UuXHJcbiAgICovXHJcbiAgdHJpZ2dlckNvZGVhYmxlQ29uY2VwdD86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlcXVlc3Qgb3IgZXZlbnQgdGhhdCBuZWNlc3NpdGF0ZWQgdGhpcyBhc3Nlc3NtZW50LiBUaGlzIG1heSBiZSBhIGRpYWdub3NpcywgYSBDYXJlIFBsYW4sIGEgUmVxdWVzdCBSZWZlcnJhbCwgb3Igc29tZSBvdGhlciByZXNvdXJjZS5cclxuICAgKi9cclxuICB0cmlnZ2VyUmVmZXJlbmNlPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBPbmUgb3IgbW9yZSBzZXRzIG9mIGludmVzdGlnYXRpb25zIChzaWducywgc3ltcHRpb25zLCBldGMuKS4gVGhlIGFjdHVhbCBncm91cGluZyBvZiBpbnZlc3RpZ2F0aW9ucyB2YXJ5IGdyZWF0bHkgZGVwZW5kaW5nIG9uIHRoZSB0eXBlIGFuZCBjb250ZXh0IG9mIHRoZSBhc3Nlc3NtZW50LiBUaGVzZSBpbnZlc3RpZ2F0aW9ucyBtYXkgaW5jbHVkZSBkYXRhIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGFzc2Vzc21lbnQgcHJvY2Vzcywgb3IgZGF0YSBwcmV2aW91c2x5IGdlbmVyYXRlZCBhbmQgcmVjb3JkZWQgdGhhdCBpcyBwZXJ0aW5lbnQgdG8gdGhlIG91dGNvbWVzLlxyXG4gICAqL1xyXG4gIGludmVzdGlnYXRpb25zPzogZmhpci5DbGluaWNhbEltcHJlc3Npb25JbnZlc3RpZ2F0aW9uc0FyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUmVmZXJlbmNlIHRvIGEgc3BlY2lmaWMgcHVibGlzaGVkIGNsaW5pY2FsIHByb3RvY29sIHRoYXQgd2FzIGZvbGxvd2VkIGR1cmluZyB0aGlzIGFzc2Vzc21lbnQsIGFuZC9vciB0aGF0IHByb3ZpZGVzIGV2aWRlbmNlIGluIHN1cHBvcnQgb2YgdGhlIGRpYWdub3Npcy5cclxuICAgKi9cclxuICBwcm90b2NvbD86IGZoaXIuRmhpclVyaXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDbGluaWNhbEltcHJlc3Npb24ucHJvdG9jb2xcclxuICAgKi9cclxuICBfcHJvdG9jb2w/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEEgdGV4dCBzdW1tYXJ5IG9mIHRoZSBpbnZlc3RpZ2F0aW9ucyBhbmQgdGhlIGRpYWdub3Npcy5cclxuICAgKi9cclxuICBzdW1tYXJ5PzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENsaW5pY2FsSW1wcmVzc2lvbi5zdW1tYXJ5XHJcbiAgICovXHJcbiAgX3N1bW1hcnk/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFNwZWNpZmljIGZpbmRpbmdzIG9yIGRpYWdub3NlcyB0aGF0IHdhcyBjb25zaWRlcmVkIGxpa2VseSBvciByZWxldmFudCB0byBvbmdvaW5nIHRyZWF0bWVudC5cclxuICAgKi9cclxuICBmaW5kaW5nPzogZmhpci5DbGluaWNhbEltcHJlc3Npb25GaW5kaW5nQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEaWFnbm9zZXMvY29uZGl0aW9ucyByZXNvbHZlZCBzaW5jZSB0aGUgbGFzdCBhc3Nlc3NtZW50LlxyXG4gICAqL1xyXG4gIHJlc29sdmVkPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERpYWdub3NpcyBjb25zaWRlcmVkIG5vdCBwb3NzaWJsZS5cclxuICAgKi9cclxuICBydWxlZE91dD86IGZoaXIuQ2xpbmljYWxJbXByZXNzaW9uUnVsZWRPdXRBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEVzdGltYXRlIG9mIGxpa2VseSBvdXRjb21lLlxyXG4gICAqL1xyXG4gIHByb2dub3Npcz86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDbGluaWNhbEltcHJlc3Npb24ucHJvZ25vc2lzXHJcbiAgICovXHJcbiAgX3Byb2dub3Npcz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogUGxhbiBvZiBhY3Rpb24gYWZ0ZXIgYXNzZXNzbWVudC5cclxuICAgKi9cclxuICBwbGFuPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFjdGlvbnMgdGFrZW4gZHVyaW5nIGFzc2Vzc21lbnQuXHJcbiAgICovXHJcbiAgYWN0aW9uPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQSByZWNvcmQgb2YgYSBjbGluaWNhbCBhc3Nlc3NtZW50IHBlcmZvcm1lZCB0byBkZXRlcm1pbmUgd2hhdCBwcm9ibGVtKHMpIG1heSBhZmZlY3QgdGhlIHBhdGllbnQgYW5kIGJlZm9yZSBwbGFubmluZyB0aGUgdHJlYXRtZW50cyBvciBtYW5hZ2VtZW50IHN0cmF0ZWdpZXMgdGhhdCBhcmUgYmVzdCB0byBtYW5hZ2UgYSBwYXRpZW50J3MgY29uZGl0aW9uLiBBc3Nlc3NtZW50cyBhcmUgb2Z0ZW4gMToxIHdpdGggYSBjbGluaWNhbCBjb25zdWx0YXRpb24gLyBlbmNvdW50ZXIsICBidXQgdGhpcyB2YXJpZXMgZ3JlYXRseSBkZXBlbmRpbmcgb24gdGhlIGNsaW5pY2FsIHdvcmtmbG93LiBUaGlzIHJlc291cmNlIGlzIGNhbGxlZCBcIkNsaW5pY2FsSW1wcmVzc2lvblwiIHJhdGhlciB0aGFuIFwiQ2xpbmljYWxBc3Nlc3NtZW50XCIgdG8gYXZvaWQgY29uZnVzaW9uIHdpdGggdGhlIHJlY29yZGluZyBvZiBhc3Nlc3NtZW50IHRvb2xzIHN1Y2ggYXMgQXBnYXIgc2NvcmUuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ2xpbmljYWxJbXByZXNzaW9uIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdDbGluaWNhbEltcHJlc3Npb24nO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNvdXJjZVR5cGU6IFwiQ2xpbmljYWxJbXByZXNzaW9uXCI7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBhdGllbnQgYmVpbmcgYXNzZXNzZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHBhdGllbnQ6IGZoaXIuUmVmZXJlbmNlfG51bGw7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNsaW5pY2lhbiBwZXJmb3JtaW5nIHRoZSBhc3Nlc3NtZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhc3Nlc3Nvcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHRoZSB3b3JrZmxvdyBzdGF0dXMgb2YgdGhlIGFzc2Vzc21lbnQuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1czogZmhpci5GaGlyQ29kZTxDbGluaWNhbEltcHJlc3Npb25TdGF0dXNDb2RlVHlwZT58bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgcG9pbnQgaW4gdGltZSBhdCB3aGljaCB0aGUgYXNzZXNzbWVudCB3YXMgY29uY2x1ZGVkIChub3Qgd2hlbiBpdCB3YXMgcmVjb3JkZWQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkYXRlPzogZmhpci5GaGlyRGF0ZVRpbWV8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgc3VtbWFyeSBvZiB0aGUgY29udGV4dCBhbmQvb3IgY2F1c2Ugb2YgdGhlIGFzc2Vzc21lbnQgLSB3aHkgLyB3aGVyZSB3YXMgaXQgcGVmb3JtZWQsIGFuZCB3aGF0IHBhdGllbnQgZXZlbnRzL3NzdGF0dXMgcHJvbXB0ZWQgaXQuXHJcbiAgICovXHJcbiAgcHVibGljIGRlc2NyaXB0aW9uPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHJlZmVyZW5jZSB0byB0aGUgbGFzdCBhc3Nlc21lbnQgdGhhdCB3YXMgY29uZHVjdGVkIGJvbiB0aGlzIHBhdGllbnQuIEFzc2Vzc21lbnRzIGFyZSBvZnRlbi91c3VhbGx5IG9uZ29pbmcgaW4gbmF0dXJlOyBhIGNhcmUgcHJvdmlkZXIgKHByYWN0aXRpb25lciBvciB0ZWFtKSB3aWxsIG1ha2UgbmV3IGFzc2Vzc21lbnRzIG9uIGFuIG9uZ29pbmcgYmFzaXMgYXMgbmV3IGRhdGEgYXJpc2VzIG9yIHRoZSBwYXRpZW50J3MgY29uZGl0aW9ucyBjaGFuZ2VzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcmV2aW91cz86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIGEgbGlzdCBvZiB0aGUgZ2VuZXJhbCBwcm9ibGVtcy9jb25kaXRpb25zIGZvciBhIHBhdGllbnQuXHJcbiAgICovXHJcbiAgcHVibGljIHByb2JsZW06IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogVGhlIHJlcXVlc3Qgb3IgZXZlbnQgdGhhdCBuZWNlc3NpdGF0ZWQgdGhpcyBhc3Nlc3NtZW50LiBUaGlzIG1heSBiZSBhIGRpYWdub3NpcywgYSBDYXJlIFBsYW4sIGEgUmVxdWVzdCBSZWZlcnJhbCwgb3Igc29tZSBvdGhlciByZXNvdXJjZS5cclxuICAgKi9cclxuICBwdWJsaWMgdHJpZ2dlcj86IChmaGlyLkNvZGVhYmxlQ29uY2VwdHxmaGlyLlJlZmVyZW5jZSl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgQ2xpbmljYWxJbXByZXNzaW9uLnRyaWdnZXJbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfdHJpZ2dlcklzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIE9uZSBvciBtb3JlIHNldHMgb2YgaW52ZXN0aWdhdGlvbnMgKHNpZ25zLCBzeW1wdGlvbnMsIGV0Yy4pLiBUaGUgYWN0dWFsIGdyb3VwaW5nIG9mIGludmVzdGlnYXRpb25zIHZhcnkgZ3JlYXRseSBkZXBlbmRpbmcgb24gdGhlIHR5cGUgYW5kIGNvbnRleHQgb2YgdGhlIGFzc2Vzc21lbnQuIFRoZXNlIGludmVzdGlnYXRpb25zIG1heSBpbmNsdWRlIGRhdGEgZ2VuZXJhdGVkIGR1cmluZyB0aGUgYXNzZXNzbWVudCBwcm9jZXNzLCBvciBkYXRhIHByZXZpb3VzbHkgZ2VuZXJhdGVkIGFuZCByZWNvcmRlZCB0aGF0IGlzIHBlcnRpbmVudCB0byB0aGUgb3V0Y29tZXMuXHJcbiAgICovXHJcbiAgcHVibGljIGludmVzdGlnYXRpb25zOiBmaGlyLkNsaW5pY2FsSW1wcmVzc2lvbkludmVzdGlnYXRpb25zW107XHJcbiAgLyoqXHJcbiAgICogUmVmZXJlbmNlIHRvIGEgc3BlY2lmaWMgcHVibGlzaGVkIGNsaW5pY2FsIHByb3RvY29sIHRoYXQgd2FzIGZvbGxvd2VkIGR1cmluZyB0aGlzIGFzc2Vzc21lbnQsIGFuZC9vciB0aGF0IHByb3ZpZGVzIGV2aWRlbmNlIGluIHN1cHBvcnQgb2YgdGhlIGRpYWdub3Npcy5cclxuICAgKi9cclxuICBwdWJsaWMgcHJvdG9jb2w/OiBmaGlyLkZoaXJVcml8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgdGV4dCBzdW1tYXJ5IG9mIHRoZSBpbnZlc3RpZ2F0aW9ucyBhbmQgdGhlIGRpYWdub3Npcy5cclxuICAgKi9cclxuICBwdWJsaWMgc3VtbWFyeT86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogU3BlY2lmaWMgZmluZGluZ3Mgb3IgZGlhZ25vc2VzIHRoYXQgd2FzIGNvbnNpZGVyZWQgbGlrZWx5IG9yIHJlbGV2YW50IHRvIG9uZ29pbmcgdHJlYXRtZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBmaW5kaW5nOiBmaGlyLkNsaW5pY2FsSW1wcmVzc2lvbkZpbmRpbmdbXTtcclxuICAvKipcclxuICAgKiBEaWFnbm9zZXMvY29uZGl0aW9ucyByZXNvbHZlZCBzaW5jZSB0aGUgbGFzdCBhc3Nlc3NtZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZXNvbHZlZDogZmhpci5Db2RlYWJsZUNvbmNlcHRbXTtcclxuICAvKipcclxuICAgKiBEaWFnbm9zaXMgY29uc2lkZXJlZCBub3QgcG9zc2libGUuXHJcbiAgICovXHJcbiAgcHVibGljIHJ1bGVkT3V0OiBmaGlyLkNsaW5pY2FsSW1wcmVzc2lvblJ1bGVkT3V0W107XHJcbiAgLyoqXHJcbiAgICogRXN0aW1hdGUgb2YgbGlrZWx5IG91dGNvbWUuXHJcbiAgICovXHJcbiAgcHVibGljIHByb2dub3Npcz86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUGxhbiBvZiBhY3Rpb24gYWZ0ZXIgYXNzZXNzbWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgcGxhbjogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBBY3Rpb25zIHRha2VuIGR1cmluZyBhc3Nlc3NtZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhY3Rpb246IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgQ2xpbmljYWxJbXByZXNzaW9uIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8Q2xpbmljYWxJbXByZXNzaW9uQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ0NsaW5pY2FsSW1wcmVzc2lvbic7XHJcbiAgICBpZiAoc291cmNlWydwYXRpZW50J10pIHsgdGhpcy5wYXRpZW50ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5wYXRpZW50LCBvcHRpb25zKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucGF0aWVudCA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ2Fzc2Vzc29yJ10pIHsgdGhpcy5hc3Nlc3NvciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuYXNzZXNzb3IsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydzdGF0dXMnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8Q2xpbmljYWxJbXByZXNzaW9uU3RhdHVzQ29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnN0YXR1c30sIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfc3RhdHVzJ10pIHtcclxuICAgICAgaWYgKHRoaXMuc3RhdHVzKSB7IHRoaXMuc3RhdHVzLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3N0YXR1cyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPENsaW5pY2FsSW1wcmVzc2lvblN0YXR1c0NvZGVUeXBlPihzb3VyY2UuX3N0YXR1cyBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGF0ZSddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5kYXRlID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLmRhdGV9LCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2RhdGUnXSkge1xyXG4gICAgICBpZiAodGhpcy5kYXRlKSB7IHRoaXMuZGF0ZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9kYXRlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZGF0ZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZShzb3VyY2UuX2RhdGUgYXMgUGFydGlhbDxmaGlyLkZoaXJEYXRlVGltZUFyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGVzY3JpcHRpb24nXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuZGVzY3JpcHRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLmRlc2NyaXB0aW9ufSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19kZXNjcmlwdGlvbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLmRlc2NyaXB0aW9uKSB7IHRoaXMuZGVzY3JpcHRpb24uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZGVzY3JpcHRpb24hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5kZXNjcmlwdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9kZXNjcmlwdGlvbiBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJldmlvdXMnXSkgeyB0aGlzLnByZXZpb3VzID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5wcmV2aW91cywgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3Byb2JsZW0nXSkgeyB0aGlzLnByb2JsZW0gPSBzb3VyY2UucHJvYmxlbS5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnByb2JsZW0gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsndHJpZ2dlciddKSB7IHRoaXMudHJpZ2dlciA9IHNvdXJjZS50cmlnZ2VyOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3RyaWdnZXJDb2RlYWJsZUNvbmNlcHQnXSkgeyB0aGlzLnRyaWdnZXIgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnRyaWdnZXJDb2RlYWJsZUNvbmNlcHQsIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3RyaWdnZXJSZWZlcmVuY2UnXSkgeyB0aGlzLnRyaWdnZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnRyaWdnZXJSZWZlcmVuY2UsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydpbnZlc3RpZ2F0aW9ucyddKSB7IHRoaXMuaW52ZXN0aWdhdGlvbnMgPSBzb3VyY2UuaW52ZXN0aWdhdGlvbnMubWFwKCh4KSA9PiBuZXcgZmhpci5DbGluaWNhbEltcHJlc3Npb25JbnZlc3RpZ2F0aW9ucyh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmludmVzdGlnYXRpb25zID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3Byb3RvY29sJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnByb3RvY29sID0gbmV3IGZoaXIuRmhpclVyaSh7dmFsdWU6IHNvdXJjZS5wcm90b2NvbH0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfcHJvdG9jb2wnXSkge1xyXG4gICAgICBpZiAodGhpcy5wcm90b2NvbCkgeyB0aGlzLnByb3RvY29sLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3Byb3RvY29sISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMucHJvdG9jb2wgPSBuZXcgZmhpci5GaGlyVXJpKHNvdXJjZS5fcHJvdG9jb2wgYXMgUGFydGlhbDxmaGlyLkZoaXJVcmlBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3N1bW1hcnknXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuc3VtbWFyeSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2Uuc3VtbWFyeX0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfc3VtbWFyeSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnN1bW1hcnkpIHsgdGhpcy5zdW1tYXJ5LmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3N1bW1hcnkhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zdW1tYXJ5ID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3N1bW1hcnkgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2ZpbmRpbmcnXSkgeyB0aGlzLmZpbmRpbmcgPSBzb3VyY2UuZmluZGluZy5tYXAoKHgpID0+IG5ldyBmaGlyLkNsaW5pY2FsSW1wcmVzc2lvbkZpbmRpbmcoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5maW5kaW5nID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3Jlc29sdmVkJ10pIHsgdGhpcy5yZXNvbHZlZCA9IHNvdXJjZS5yZXNvbHZlZC5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnJlc29sdmVkID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3J1bGVkT3V0J10pIHsgdGhpcy5ydWxlZE91dCA9IHNvdXJjZS5ydWxlZE91dC5tYXAoKHgpID0+IG5ldyBmaGlyLkNsaW5pY2FsSW1wcmVzc2lvblJ1bGVkT3V0KHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucnVsZWRPdXQgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJvZ25vc2lzJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnByb2dub3NpcyA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UucHJvZ25vc2lzfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19wcm9nbm9zaXMnXSkge1xyXG4gICAgICBpZiAodGhpcy5wcm9nbm9zaXMpIHsgdGhpcy5wcm9nbm9zaXMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fcHJvZ25vc2lzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMucHJvZ25vc2lzID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3Byb2dub3NpcyBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsncGxhbiddKSB7IHRoaXMucGxhbiA9IHNvdXJjZS5wbGFuLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgsIG9wdGlvbnMpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucGxhbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydhY3Rpb24nXSkgeyB0aGlzLmFjdGlvbiA9IHNvdXJjZS5hY3Rpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5SZWZlcmVuY2UoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5hY3Rpb24gPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ0NsaW5pY2FsSW1wcmVzc2lvbicgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52UlMoJ3BhdGllbnQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2Fzc2Vzc29yJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudlJTVignc3RhdHVzJyxleHAsJ0NsaW5pY2FsSW1wcmVzc2lvblN0YXR1cycsQ2xpbmljYWxJbXByZXNzaW9uU3RhdHVzVnNWYWxpZGF0aW9uLCdyJykpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2RhdGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2Rlc2NyaXB0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdwcmV2aW91cycsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgncHJvYmxlbScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygndHJpZ2dlcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnaW52ZXN0aWdhdGlvbnMnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3Byb3RvY29sJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdzdW1tYXJ5JyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdmaW5kaW5nJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdyZXNvbHZlZCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgncnVsZWRPdXQnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3Byb2dub3NpcycsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgncGxhbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnYWN0aW9uJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbiJdfQ==