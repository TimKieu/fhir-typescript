// <auto-generated/>
// Contents of: hl7.fhir.r2.core version: 1.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: Goal
import * as fhir from '../fhir.js';
// @ts-ignore
import { GoalStatusVsValidation } from '../fhirValueSets/GoalStatusVsValidation.js';
/**
 * Outcome tracking is a key aspect of care planning.
 */
export class GoalOutcome extends fhir.BackboneElement {
    /**
     * Default constructor for GoalOutcome - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['result']) {
            this.result = source.result;
        }
        else if (source['resultCodeableConcept']) {
            this.result = new fhir.CodeableConcept(source.resultCodeableConcept);
        }
        else if (source['resultReference']) {
            this.result = new fhir.Reference(source.resultReference);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Goal.outcome';
        }
        this.vOS('result', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
GoalOutcome._fts_dataType = 'GoalOutcome';
/**
 * Internal flag to properly serialize choice-type element Goal.outcome.result[x]
 */
GoalOutcome._fts_resultIsChoice = true;
/**
 * Describes the intended objective(s) for a patient, group or organization care, for example, weight loss, restoring an activity of daily living, obtaining herd immunity via immunization, meeting a process improvement objective, etc.
 */
export class Goal extends fhir.DomainResource {
    /**
     * Default constructor for Goal - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'Goal';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject);
        }
        if (source['start']) {
            this.start = source.start;
        }
        else if (source['startDate']) {
            this.start = new fhir.FhirDate({ value: source.startDate });
        }
        else if (source['startCodeableConcept']) {
            this.start = new fhir.CodeableConcept(source.startCodeableConcept);
        }
        if (source['target']) {
            this.target = source.target;
        }
        else if (source['targetDate']) {
            this.target = new fhir.FhirDate({ value: source.targetDate });
        }
        else if (source['targetQuantity']) {
            this.target = new fhir.Quantity(source.targetQuantity);
        }
        if (source['category']) {
            this.category = source.category.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.category = [];
        }
        if (source['description']) {
            this.description = new fhir.FhirString({ value: source.description });
        }
        else {
            this.description = null;
        }
        if (source['_description']) {
            if (this.description) {
                this.description.addExtendedProperties(source._description);
            }
            else {
                this.description = new fhir.FhirString(source._description);
            }
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['statusDate']) {
            this.statusDate = new fhir.FhirDate({ value: source.statusDate });
        }
        if (source['_statusDate']) {
            if (this.statusDate) {
                this.statusDate.addExtendedProperties(source._statusDate);
            }
            else {
                this.statusDate = new fhir.FhirDate(source._statusDate);
            }
        }
        if (source['statusReason']) {
            this.statusReason = new fhir.CodeableConcept(source.statusReason);
        }
        if (source['author']) {
            this.author = new fhir.Reference(source.author);
        }
        if (source['priority']) {
            this.priority = new fhir.CodeableConcept(source.priority);
        }
        if (source['addresses']) {
            this.addresses = source.addresses.map((x) => new fhir.Reference(x));
        }
        else {
            this.addresses = [];
        }
        if (source['note']) {
            this.note = source.note.map((x) => new fhir.Annotation(x));
        }
        else {
            this.note = [];
        }
        if (source['outcome']) {
            this.outcome = source.outcome.map((x) => new fhir.GoalOutcome(x));
        }
        else {
            this.outcome = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Goal';
        }
        this.vRS('resourceType', exp);
        this.vOA('identifier', exp);
        this.vOS('subject', exp);
        this.vOS('start', exp);
        this.vOS('target', exp);
        this.vOA('category', exp);
        this.vRS('description', exp);
        this.vRSV('status', exp, 'GoalStatus', GoalStatusVsValidation, 'r');
        this.vOS('statusDate', exp);
        this.vOS('statusReason', exp);
        this.vOS('author', exp);
        this.vOS('priority', exp);
        this.vOA('addresses', exp);
        this.vOA('note', exp);
        this.vOA('outcome', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
Goal._fts_dataType = 'Goal';
/**
 * Internal flag to properly serialize choice-type element Goal.start[x]
 */
Goal._fts_startIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element Goal.target[x]
 */
Goal._fts_targetIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR29hbC5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvR29hbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQyxzQkFBc0I7QUFFdEIsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFJbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLDRDQUE0QyxDQUFDO0FBbUJwRjs7R0FFRztBQUNILE1BQU0sT0FBTyxXQUFZLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFhbkQ7O09BRUc7SUFDSCxZQUFZLFNBQWtDLEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQ3hGLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7U0FBRTthQUNqRCxJQUFJLE1BQU0sQ0FBQyx1QkFBdUIsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLHFCQUFxQixDQUFDLENBQUM7U0FBRTthQUM5RyxJQUFJLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1NBQUU7SUFDbkcsQ0FBQztJQUNEOztPQUVHO0lBQ2EsaUJBQWlCLENBQUMsTUFBYSxFQUFFO1FBQy9DLElBQUksTUFBTSxHQUFtQixLQUFLLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDMUQsSUFBSSxHQUFHLEtBQUssRUFBRSxFQUFFO1lBQUUsR0FBRyxHQUFHLGNBQWMsQ0FBQTtTQUFFO1FBQ3hDLElBQUksQ0FBQyxHQUFH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LENBQUMsVUFBVSxFQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ3hCLElBQUksQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ3pCLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ3BCLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ3ZCLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBMUlEOztHQUVHO0FBQzZCLGtCQUFhLEdBQVUsTUFBTSxDQUFDO0FBaUI5RDs7R0FFRztBQUN1Qix1QkFBa0IsR0FBUSxJQUFJLENBQUM7QUFLekQ7O0dBRUc7QUFDdUIsd0JBQW1CLEdBQVEsSUFBSSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnIyLmNvcmUgdmVyc2lvbjogMS4wLjJcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBHb2FsXHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBHb2FsU3RhdHVzQ29kZXMsICBHb2FsU3RhdHVzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL0dvYWxTdGF0dXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgR29hbFN0YXR1c1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvR29hbFN0YXR1c1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBHb2FsT3V0Y29tZSB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBHb2FsT3V0Y29tZUFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIERldGFpbHMgb2Ygd2hhdCdzIGNoYW5nZWQgKG9yIG5vdCBjaGFuZ2VkKS5cclxuICAgKi9cclxuICByZXN1bHQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGV0YWlscyBvZiB3aGF0J3MgY2hhbmdlZCAob3Igbm90IGNoYW5nZWQpLlxyXG4gICAqL1xyXG4gIHJlc3VsdENvZGVhYmxlQ29uY2VwdD86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGV0YWlscyBvZiB3aGF0J3MgY2hhbmdlZCAob3Igbm90IGNoYW5nZWQpLlxyXG4gICAqL1xyXG4gIHJlc3VsdFJlZmVyZW5jZT86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBPdXRjb21lIHRyYWNraW5nIGlzIGEga2V5IGFzcGVjdCBvZiBjYXJlIHBsYW5uaW5nLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEdvYWxPdXRjb21lIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnR29hbE91dGNvbWUnO1xyXG4gIC8qKlxyXG4gICAqIERldGFpbHMgb2Ygd2hhdCdzIGNoYW5nZWQgKG9yIG5vdCBjaGFuZ2VkKS5cclxuICAgKi9cclxuICBwdWJsaWMgcmVzdWx0PzogKGZoaXIuQ29kZWFibGVDb25jZXB0fGZoaXIuUmVmZXJlbmNlKXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBHb2FsLm91dGNvbWUucmVzdWx0W3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX3Jlc3VsdElzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEdvYWxPdXRjb21lIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8R29hbE91dGNvbWVBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvdXJjZVsncmVzdWx0J10pIHsgdGhpcy5yZXN1bHQgPSBzb3VyY2UucmVzdWx0OyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3Jlc3VsdENvZGVhYmxlQ29uY2VwdCddKSB7IHRoaXMucmVzdWx0ID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5yZXN1bHRDb2RlYWJsZUNvbmNlcHQpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3Jlc3VsdFJlZmVyZW5jZSddKSB7IHRoaXMucmVzdWx0ID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5yZXN1bHRSZWZlcmVuY2UpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnR29hbC5vdXRjb21lJyB9XHJcbiAgICB0aGlzLnZPUygncmVzdWx0JyxleHApXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgR29hbCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBHb2FsQXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiR29hbFwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBOZWVkIHRvIGFsbG93IGNvbm5lY3Rpb24gdG8gYSB3aWRlciB3b3JrZmxvdy5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBTdWJqZWN0IGlzIG9wdGlvbmFsIHRvIHN1cHBvcnQgYW5ub255bWl6ZWQgcmVwb3J0aW5nLlxyXG4gICAqL1xyXG4gIHN1YmplY3Q/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEdvYWxzIGNhbiBiZSBlc3RhYmxpc2hlZCBwcmlvciB0byB0aGVyZSBiZWluZyBhbiBpbnRlbnRpb24gdG8gc3RhcnQgcHVyc3VpbmcgdGhlbTsgZS5nLiBHb2FscyBmb3IgcG9zdC1zdXJnaWNhbCByZWNvdmVyeSBlc3RhYmxpc2hlZCBwcmlvciB0byBzdXJnZXJ5LlxyXG4gICAqL1xyXG4gIHN0YXJ0PzogZmhpci5GaGlyRGF0ZXxmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogR29hbHMgY2FuIGJlIGVzdGFibGlzaGVkIHByaW9yIHRvIHRoZXJlIGJlaW5nIGFuIGludGVudGlvbiB0byBzdGFydCBwdXJzdWluZyB0aGVtOyBlLmcuIEdvYWxzIGZvciBwb3N0LXN1cmdpY2FsIHJlY292ZXJ5IGVzdGFibGlzaGVkIHByaW9yIHRvIHN1cmdlcnkuXHJcbiAgICovXHJcbiAgc3RhcnREYXRlPzogZmhpci5GaGlyRGF0ZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEdvYWxzIGNhbiBiZSBlc3RhYmxpc2hlZCBwcmlvciB0byB0aGVyZSBiZWluZyBhbiBpbnRlbnRpb24gdG8gc3RhcnQgcHVyc3VpbmcgdGhlbTsgZS5nLiBHb2FscyBmb3IgcG9zdC1zdXJnaWNhbCByZWNvdmVyeSBlc3RhYmxpc2hlZCBwcmlvciB0byBzdXJnZXJ5LlxyXG4gICAqL1xyXG4gIHN0YXJ0Q29kZWFibGVDb25jZXB0PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHdoZW4gdGhlIGdvYWwgc2hvdWxkIGJlIGV2YWx1YXRlZC5cclxuICAgKi9cclxuICB0YXJnZXQ/OiBmaGlyLkZoaXJEYXRlfGZoaXIuUXVhbnRpdHl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgd2hlbiB0aGUgZ29hbCBzaG91bGQgYmUgZXZhbHVhdGVkLlxyXG4gICAqL1xyXG4gIHRhcmdldERhdGU/OiBmaGlyLkZoaXJEYXRlfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB3aGVuIHRoZSBnb2FsIHNob3VsZCBiZSBldmFsdWF0ZWQuXHJcbiAgICovXHJcbiAgdGFyZ2V0UXVhbnRpdHk/OiBmaGlyLlF1YW50aXR5QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWxsb3dzIGdvYWxzIHRvIGJlIGZpbHRlcmVkIGFuZCBzb3J0ZWQuXHJcbiAgICovXHJcbiAgY2F0ZWdvcnk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogV2l0aG91dCBhIGRlc2NyaXB0aW9uIG9mIHdoYXQncyB0cnlpbmcgdG8gYmUgYWNoaWV2ZWQsIGVsZW1lbnQgaGFzIG5vIHB1cnBvc2UuXHJcbiAgICovXHJcbiAgZGVzY3JpcHRpb246IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBHb2FsLmRlc2NyaXB0aW9uXHJcbiAgICovXHJcbiAgX2Rlc2NyaXB0aW9uPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBBbGxvd3MgbWVhc3VyaW5nIG91dGNvbWUgYW5kIHdoZXRoZXIgZ29hbCBuZWVkcyB0byBiZSBmdXJ0aGVyIHRyYWNrZWQuXHJcbiAgICovXHJcbiAgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPEdvYWxTdGF0dXNDb2RlVHlwZT58c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogR29hbC5zdGF0dXNcclxuICAgKi9cclxuICBfc3RhdHVzPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHdoZW4gdGhlIGN1cnJlbnQgc3RhdHVzLiAgSS5lLiBXaGVuIGluaXRpYWxseSBjcmVhdGVkLCB3aGVuIGFjaGlldmVkLCB3aGVuIGNhbmNlbGxlZCwgZXRjLlxyXG4gICAqL1xyXG4gIHN0YXR1c0RhdGU/OiBmaGlyLkZoaXJEYXRlfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IEdvYWwuc3RhdHVzRGF0ZVxyXG4gICAqL1xyXG4gIF9zdGF0dXNEYXRlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBDYXB0dXJlcyB0aGUgcmVhc29uIGZvciB0aGUgY3VycmVudCBzdGF0dXMuXHJcbiAgICovXHJcbiAgc3RhdHVzUmVhc29uPzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgd2hvc2UgZ29hbCB0aGlzIGlzIC0gcGF0aWVudCBnb2FsLCBwcmFjdGl0aW9uZXIgZ29hbCwgZXRjLlxyXG4gICAqL1xyXG4gIGF1dGhvcj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVXNlZCBmb3Igc29ydGluZyBhbmQgcHJlc2VudGluZyBnb2Fscy5cclxuICAgKi9cclxuICBwcmlvcml0eT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWxsb3dzIHNwZWNpZmljIGdvYWxzIHRvIGV4cGxpY2l0bHkgbGlua2VkIHRvIHRoZSBjb25jZXJucyB0aGV5J3JlIGRlYWxpbmcgd2l0aCAtIG1ha2VzIHRoZSBnb2FsIG1vcmUgdW5kZXJzdGFuZGFibGUuXHJcbiAgICovXHJcbiAgYWRkcmVzc2VzPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZXJlJ3MgYSBuZWVkIHRvIGNhcHR1cmUgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGdvYWwgdGhhdCBkb2Vzbid0IGFjdHVhbGx5IGRlc2NyaWJlIHRoZSBnb2FsLlxyXG4gICAqL1xyXG4gIG5vdGU/OiBmaGlyLkFubm90YXRpb25BcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE91dGNvbWUgdHJhY2tpbmcgaXMgYSBrZXkgYXNwZWN0IG9mIGNhcmUgcGxhbm5pbmcuXHJcbiAgICovXHJcbiAgb3V0Y29tZT86IGZoaXIuR29hbE91dGNvbWVBcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogRGVzY3JpYmVzIHRoZSBpbnRlbmRlZCBvYmplY3RpdmUocykgZm9yIGEgcGF0aWVudCwgZ3JvdXAgb3Igb3JnYW5pemF0aW9uIGNhcmUsIGZvciBleGFtcGxlLCB3ZWlnaHQgbG9zcywgcmVzdG9yaW5nIGFuIGFjdGl2aXR5IG9mIGRhaWx5IGxpdmluZywgb2J0YWluaW5nIGhlcmQgaW1tdW5pdHkgdmlhIGltbXVuaXphdGlvbiwgbWVldGluZyBhIHByb2Nlc3MgaW1wcm92ZW1lbnQgb2JqZWN0aXZlLCBldGMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgR29hbCBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnR29hbCc7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJHb2FsXCI7XHJcbiAgLyoqXHJcbiAgICogTmVlZCB0byBhbGxvdyBjb25uZWN0aW9uIHRvIGEgd2lkZXIgd29ya2Zsb3cuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI6IGZoaXIuSWRlbnRpZmllcltdO1xyXG4gIC8qKlxyXG4gICAqIFN1YmplY3QgaXMgb3B0aW9uYWwgdG8gc3VwcG9ydCBhbm5vbnltaXplZCByZXBvcnRpbmcuXHJcbiAgICovXHJcbiAgcHVibGljIHN1YmplY3Q/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogR29hbHMgY2FuIGJlIGVzdGFibGlzaGVkIHByaW9yIHRvIHRoZXJlIGJlaW5nIGFuIGludGVudGlvbiB0byBzdGFydCBwdXJzdWluZyB0aGVtOyBlLmcuIEdvYWxzIGZvciBwb3N0LXN1cmdpY2FsIHJlY292ZXJ5IGVzdGFibGlzaGVkIHByaW9yIHRvIHN1cmdlcnkuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXJ0PzogKGZoaXIuRmhpckRhdGV8Zmhpci5Db2RlYWJsZUNvbmNlcHQpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IEdvYWwuc3RhcnRbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfc3RhcnRJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHdoZW4gdGhlIGdvYWwgc2hvdWxkIGJlIGV2YWx1YXRlZC5cclxuICAgKi9cclxuICBwdWJsaWMgdGFyZ2V0PzogKGZoaXIuRmhpckRhdGV8Zmhpci5RdWFudGl0eSl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgR29hbC50YXJnZXRbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfdGFyZ2V0SXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogQWxsb3dzIGdvYWxzIHRvIGJlIGZpbHRlcmVkIGFuZCBzb3J0ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGNhdGVnb3J5OiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIFdpdGhvdXQgYSBkZXNjcmlwdGlvbiBvZiB3aGF0J3MgdHJ5aW5nIHRvIGJlIGFjaGlldmVkLCBlbGVtZW50IGhhcyBubyBwdXJwb3NlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZXNjcmlwdGlvbjogZmhpci5GaGlyU3RyaW5nfG51bGw7XHJcbiAgLyoqXHJcbiAgICogQWxsb3dzIG1lYXN1cmluZyBvdXRjb21lIGFuZCB3aGV0aGVyIGdvYWwgbmVlZHMgdG8gYmUgZnVydGhlciB0cmFja2VkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0dXM6IGZoaXIuRmhpckNvZGU8R29hbFN0YXR1c0NvZGVUeXBlPnxudWxsO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgd2hlbiB0aGUgY3VycmVudCBzdGF0dXMuICBJLmUuIFdoZW4gaW5pdGlhbGx5IGNyZWF0ZWQsIHdoZW4gYWNoaWV2ZWQsIHdoZW4gY2FuY2VsbGVkLCBldGMuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1c0RhdGU/OiBmaGlyLkZoaXJEYXRlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDYXB0dXJlcyB0aGUgcmVhc29uIGZvciB0aGUgY3VycmVudCBzdGF0dXMuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1c1JlYXNvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgd2hvc2UgZ29hbCB0aGlzIGlzIC0gcGF0aWVudCBnb2FsLCBwcmFjdGl0aW9uZXIgZ29hbCwgZXRjLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhdXRob3I/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVXNlZCBmb3Igc29ydGluZyBhbmQgcHJlc2VudGluZyBnb2Fscy5cclxuICAgKi9cclxuICBwdWJsaWMgcHJpb3JpdHk/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWxsb3dzIHNwZWNpZmljIGdvYWxzIHRvIGV4cGxpY2l0bHkgbGlua2VkIHRvIHRoZSBjb25jZXJucyB0aGV5J3JlIGRlYWxpbmcgd2l0aCAtIG1ha2VzIHRoZSBnb2FsIG1vcmUgdW5kZXJzdGFuZGFibGUuXHJcbiAgICovXHJcbiAgcHVibGljIGFkZHJlc3NlczogZmhpci5SZWZlcmVuY2VbXTtcclxuICAvKipcclxuICAgKiBUaGVyZSdzIGEgbmVlZCB0byBjYXB0dXJlIGluZm9ybWF0aW9uIGFib3V0IHRoZSBnb2FsIHRoYXQgZG9lc24ndCBhY3R1YWxseSBkZXNjcmliZSB0aGUgZ29hbC5cclxuICAgKi9cclxuICBwdWJsaWMgbm90ZTogZmhpci5Bbm5vdGF0aW9uW107XHJcbiAgLyoqXHJcbiAgICogT3V0Y29tZSB0cmFja2luZyBpcyBhIGtleSBhc3BlY3Qgb2YgY2FyZSBwbGFubmluZy5cclxuICAgKi9cclxuICBwdWJsaWMgb3V0Y29tZTogZmhpci5Hb2FsT3V0Y29tZVtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIEdvYWwgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxHb2FsQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ0dvYWwnO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IHNvdXJjZS5pZGVudGlmaWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuSWRlbnRpZmllcih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmlkZW50aWZpZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3ViamVjdCddKSB7IHRoaXMuc3ViamVjdCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2Uuc3ViamVjdCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3N0YXJ0J10pIHsgdGhpcy5zdGFydCA9IHNvdXJjZS5zdGFydDsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydzdGFydERhdGUnXSkgeyB0aGlzLnN0YXJ0ID0gbmV3IGZoaXIuRmhpckRhdGUoe3ZhbHVlOiBzb3VyY2Uuc3RhcnREYXRlfSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnc3RhcnRDb2RlYWJsZUNvbmNlcHQnXSkgeyB0aGlzLnN0YXJ0ID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5zdGFydENvZGVhYmxlQ29uY2VwdCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3RhcmdldCddKSB7IHRoaXMudGFyZ2V0ID0gc291cmNlLnRhcmdldDsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWyd0YXJnZXREYXRlJ10pIHsgdGhpcy50YXJnZXQgPSBuZXcgZmhpci5GaGlyRGF0ZSh7dmFsdWU6IHNvdXJjZS50YXJnZXREYXRlfSk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsndGFyZ2V0UXVhbnRpdHknXSkgeyB0aGlzLnRhcmdldCA9IG5ldyBmaGlyLlF1YW50aXR5KHNvdXJjZS50YXJnZXRRdWFudGl0eSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NhdGVnb3J5J10pIHsgdGhpcy5jYXRlZ29yeSA9IHNvdXJjZS5jYXRlZ29yeS5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdCh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNhdGVnb3J5ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2Rlc2NyaXB0aW9uJ10pIHsgdGhpcy5kZXNjcmlwdGlvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UuZGVzY3JpcHRpb259KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuZGVzY3JpcHRpb24gPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydfZGVzY3JpcHRpb24nXSkge1xyXG4gICAgICBpZiAodGhpcy5kZXNjcmlwdGlvbikgeyB0aGlzLmRlc2NyaXB0aW9uLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2Rlc2NyaXB0aW9uISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZGVzY3JpcHRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fZGVzY3JpcHRpb24gYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3N0YXR1cyddKSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8R29hbFN0YXR1c0NvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5zdGF0dXN9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3N0YXR1cyddKSB7XHJcbiAgICAgIGlmICh0aGlzLnN0YXR1cykgeyB0aGlzLnN0YXR1cy5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zdGF0dXMhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxHb2FsU3RhdHVzQ29kZVR5cGU+KHNvdXJjZS5fc3RhdHVzIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydzdGF0dXNEYXRlJ10pIHsgdGhpcy5zdGF0dXNEYXRlID0gbmV3IGZoaXIuRmhpckRhdGUoe3ZhbHVlOiBzb3VyY2Uuc3RhdHVzRGF0ZX0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfc3RhdHVzRGF0ZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnN0YXR1c0RhdGUpIHsgdGhpcy5zdGF0dXNEYXRlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3N0YXR1c0RhdGUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zdGF0dXNEYXRlID0gbmV3IGZoaXIuRmhpckRhdGUoc291cmNlLl9zdGF0dXNEYXRlIGFzIFBhcnRpYWw8Zmhpci5GaGlyRGF0ZUFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3RhdHVzUmVhc29uJ10pIHsgdGhpcy5zdGF0dXNSZWFzb24gPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnN0YXR1c1JlYXNvbik7IH1cclxuICAgIGlmIChzb3VyY2VbJ2F1dGhvciddKSB7IHRoaXMuYXV0aG9yID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5hdXRob3IpOyB9XHJcbiAgICBpZiAoc291cmNlWydwcmlvcml0eSddKSB7IHRoaXMucHJpb3JpdHkgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnByaW9yaXR5KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYWRkcmVzc2VzJ10pIHsgdGhpcy5hZGRyZXNzZXMgPSBzb3VyY2UuYWRkcmVzc2VzLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuYWRkcmVzc2VzID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ25vdGUnXSkgeyB0aGlzLm5vdGUgPSBzb3VyY2Uubm90ZS5tYXAoKHgpID0+IG5ldyBmaGlyLkFubm90YXRpb24oeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5ub3RlID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ291dGNvbWUnXSkgeyB0aGlzLm91dGNvbWUgPSBzb3VyY2Uub3V0Y29tZS5tYXAoKHgpID0+IG5ldyBmaGlyLkdvYWxPdXRjb21lKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMub3V0Y29tZSA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnR29hbCcgfVxyXG4gICAgdGhpcy52UlMoJ3Jlc291cmNlVHlwZScsZXhwKVxyXG4gICAgdGhpcy52T0EoJ2lkZW50aWZpZXInLGV4cClcclxuICAgIHRoaXMudk9TKCdzdWJqZWN0JyxleHApXHJcbiAgICB0aGlzLnZPUygnc3RhcnQnLGV4cClcclxuICAgIHRoaXMudk9TKCd0YXJnZXQnLGV4cClcclxuICAgIHRoaXMudk9BKCdjYXRlZ29yeScsZXhwKVxyXG4gICAgdGhpcy52UlMoJ2Rlc2NyaXB0aW9uJyxleHApXHJcbiAgICB0aGlzLnZSU1YoJ3N0YXR1cycsZXhwLCdHb2FsU3RhdHVzJyxHb2FsU3RhdHVzVnNWYWxpZGF0aW9uLCdyJylcclxuICAgIHRoaXMudk9TKCdzdGF0dXNEYXRlJyxleHApXHJcbiAgICB0aGlzLnZPUygnc3RhdHVzUmVhc29uJyxleHApXHJcbiAgICB0aGlzLnZPUygnYXV0aG9yJyxleHApXHJcbiAgICB0aGlzLnZPUygncHJpb3JpdHknLGV4cClcclxuICAgIHRoaXMudk9BKCdhZGRyZXNzZXMnLGV4cClcclxuICAgIHRoaXMudk9BKCdub3RlJyxleHApXHJcbiAgICB0aGlzLnZPQSgnb3V0Y29tZScsZXhwKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuIl19