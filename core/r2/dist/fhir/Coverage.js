// <auto-generated/>
// Contents of: hl7.fhir.r2.core version: 1.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: Coverage
import * as fhir from '../fhir.js';
/**
 * Financial instrument which may be used to pay for or reimburse health care products and services.
 */
export class Coverage extends fhir.DomainResource {
    /**
     * Default constructor for Coverage - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'Coverage';
        if (source['issuer']) {
            this.issuer = new fhir.Reference(source.issuer, options);
        }
        if (source['bin']) {
            this.bin = new fhir.Identifier(source.bin, options);
        }
        if (source['period']) {
            this.period = new fhir.Period(source.period, options);
        }
        if (source['type']) {
            this.type = new fhir.Coding(source.type, options);
        }
        if (source['subscriberId']) {
            this.subscriberId = new fhir.Identifier(source.subscriberId, options);
        }
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x, options));
        }
        else {
            this.identifier = [];
        }
        if (source['group'] !== undefined) {
            this.group = new fhir.FhirString({ value: source.group }, options);
        }
        if (source['_group']) {
            if (this.group) {
                this.group.addExtendedProperties(source._group);
            }
            else {
                this.group = new fhir.FhirString(source._group, options);
            }
        }
        if (source['plan'] !== undefined) {
            this.plan = new fhir.FhirString({ value: source.plan }, options);
        }
        if (source['_plan']) {
            if (this.plan) {
                this.plan.addExtendedProperties(source._plan);
            }
            else {
                this.plan = new fhir.FhirString(source._plan, options);
            }
        }
        if (source['subPlan'] !== undefined) {
            this.subPlan = new fhir.FhirString({ value: source.subPlan }, options);
        }
        if (source['_subPlan']) {
            if (this.subPlan) {
                this.subPlan.addExtendedProperties(source._subPlan);
            }
            else {
                this.subPlan = new fhir.FhirString(source._subPlan, options);
            }
        }
        if (source['dependent'] !== undefined) {
            this.dependent = new fhir.FhirPositiveInt({ value: source.dependent }, options);
        }
        if (source['_dependent']) {
            if (this.dependent) {
                this.dependent.addExtendedProperties(source._dependent);
            }
            else {
                this.dependent = new fhir.FhirPositiveInt(source._dependent, options);
            }
        }
        if (source['sequence'] !== undefined) {
            this.sequence = new fhir.FhirPositiveInt({ value: source.sequence }, options);
        }
        if (source['_sequence']) {
            if (this.sequence) {
                this.sequence.addExtendedProperties(source._sequence);
            }
            else {
                this.sequence = new fhir.FhirPositiveInt(source._sequence, options);
            }
        }
        if (source['subscriber']) {
            this.subscriber = new fhir.Reference(source.subscriber, options);
        }
        if (source['network']) {
            this.network = new fhir.Identifier(source.network, options);
        }
        if (source['contract']) {
            this.contract = source.contract.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.contract = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Coverage';
        }
        iss.push(...this.vOS('issuer', exp));
        iss.push(...this.vOS('bin', exp));
        iss.push(...this.vOS('period', exp));
        iss.push(...this.vOS('type', exp));
        iss.push(...this.vOS('subscriberId', exp));
        iss.push(...this.vOA('identifier', exp));
        iss.push(...this.vOS('group', exp));
        iss.push(...this.vOS('plan', exp));
        iss.push(...this.vOS('subPlan', exp));
        iss.push(...this.vOS('dependent', exp));
        iss.push(...this.vOS('sequence', exp));
        iss.push(...this.vOS('subscriber', exp));
        iss.push(...this.vOS('network', exp));
        iss.push(...this.vOA('contract', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
Coverage._fts_dataType = 'Coverage';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ292ZXJhZ2UuanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL0NvdmVyYWdlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQiwrQ0FBK0M7QUFDL0Msa0NBQWtDO0FBQ2xDLDBCQUEwQjtBQUUxQixPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQXdGbkM7O0dBRUc7QUFDSCxNQUFNLE9BQU8sUUFBUyxTQUFRLElBQUksQ0FBQyxjQUFjO0lBaUUvQzs7T0FFRztJQUNILFlBQVksU0FBK0IsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDckYsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLENBQUMsWUFBWSxHQUFHLFVBQVUsQ0FBQztRQUMvQixJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FBRTtRQUNuRixJQUFJLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FBRTtRQUMzRSxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FBRTtRQUNoRixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FBRTtRQUMxRSxJQUFJLE1BQU0sQ0FB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LEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3JDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3RDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3hDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3JDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3RDLE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQzs7QUFoSUQ7O0dBRUc7QUFDNkIsc0JBQWEsR0FBVSxVQUFVLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8YXV0by1nZW5lcmF0ZWQvPlxyXG4vLyBDb250ZW50cyBvZjogaGw3LmZoaXIucjIuY29yZSB2ZXJzaW9uOiAxLjAuMlxyXG4vLyBNaW5pbXVtIFR5cGVTY3JpcHQgVmVyc2lvbjogMy43XHJcbi8vIEZISVIgUmVzb3VyY2U6IENvdmVyYWdlXHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIENvdmVyYWdlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENvdmVyYWdlQXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiQ292ZXJhZ2VcInx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTmVlZCB0byBpZGVudGlmeSB0aGUgaXNzdWVyIHRvIHRhcmdldCBmb3IgcHJvY2Vzc2luZyBhbmQgZm9yIGNvb3JkaW5hdGlvbiBvZiBiZW5lZml0IHByb2Nlc3NpbmcuXHJcbiAgICovXHJcbiAgaXNzdWVyPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBCdXNpbmVzcyBJZGVudGlmaWNhdGlvbiBOdW1iZXIgKEJJTiBudW1iZXIpIHVzZWQgdG8gaWRlbnRpZnkgdGhlIHJvdXRpbmcgIG9mIGVjbGFpbXMgaWYgdGhlIGluc3VyZXIgdGhlbXNlbHZlcyBkb24ndCBoYXZlIGEgQklOIG51bWJlciBmb3IgYWxsIG9mIHRoZWlyIGJ1c2luZXNzLlxyXG4gICAqL1xyXG4gIGJpbj86IGZoaXIuSWRlbnRpZmllckFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRpbWUgcGVyaW9kIGR1cmluZyB3aGljaCB0aGUgY292ZXJhZ2UgaXMgaW4gZm9yY2UuIEEgbWlzc2luZyBzdGFydCBkYXRlIGluZGljYXRlcyB0aGUgc3RhcnQgZGF0ZSBpc24ndCBrbm93biwgYSBtaXNzaW5nIGVuZCBkYXRlIG1lYW5zIHRoZSBjb3ZlcmFnZSBpcyBjb250aW51aW5nIHRvIGJlIGluIGZvcmNlLlxyXG4gICAqL1xyXG4gIHBlcmlvZD86IGZoaXIuUGVyaW9kQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG9yZGVyIG9mIGFwcGxpY2F0aW9uIG9mIGNvdmVyYWdlcyBpcyBkZXBlbmRlbnQgb24gdGhlIHR5cGVzIG9mIGNvdmVyYWdlLlxyXG4gICAqL1xyXG4gIHR5cGU/OiBmaGlyLkNvZGluZ0FyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpZCBpc3N1ZWQgdG8gdGhlIHN1YnNjcmliZXIuXHJcbiAgICovXHJcbiAgc3Vic2NyaWJlcklkPzogZmhpci5JZGVudGlmaWVyQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhpcyB2YWx1ZSBtYXkgdW5pcXVlbHkgaWRlbnRpZnkgdGhlIGNvdmVyYWdlIG9yIGl0IG1heSBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggdGhlIGFkZGl0aW9uYWwgaWRlbnRpZmllcnMgYmVsb3cuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyBhIHN0eWxlIG9yIGNvbGxlY3RpdmUgb2YgY292ZXJhZ2UgaXNzdWVzIGJ5IHRoZSB1bmRlcndyaXRlciwgZm9yIGV4YW1wbGUgbWF5IGJlIHVzZWQgdG8gaWRlbnRpZnkgYSBjbGFzcyBvZiBjb3ZlcmFnZSBvciBlbXBsb3llciBncm91cC4gTWF5IGFsc28gYmUgcmVmZXJyZWQgdG8gYXMgYSBQb2xpY3kgb3IgR3JvdXAgSUQuXHJcbiAgICovXHJcbiAgZ3JvdXA/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ292ZXJhZ2UuZ3JvdXBcclxuICAgKi9cclxuICBfZ3JvdXA/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgYSBzdHlsZSBvciBjb2xsZWN0aXZlIG9mIGNvdmVyYWdlIGlzc3VlcyBieSB0aGUgdW5kZXJ3cml0ZXIsIGZvciBleGFtcGxlIG1heSBiZSB1c2VkIHRvIGlkZW50aWZ5IGEgY2xhc3Mgb2YgY292ZXJhZ2Ugb3IgZW1wbG95ZXIgZ3JvdXAuIE1heSBhbHNvIGJlIHJlZmVycmVkIHRvIGFzIGEgUG9saWN5IG9yIEdyb3VwIElELlxyXG4gICAqL1xyXG4gIHBsYW4/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ292ZXJhZ2UucGxhblxyXG4gICAqL1xyXG4gIF9wbGFuPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIGEgc3ViLXN0eWxlIG9yIHN1Yi1jb2xsZWN0aXZlIG9mIGNvdmVyYWdlIGlzc3VlcyBieSB0aGUgdW5kZXJ3cml0ZXIsIGZvciBleGFtcGxlIG1heSBiZSB1c2VkIHRvIGlkZW50aWZ5IGEgc3BlY2lmaWMgZW1wbG95ZXIgZ3JvdXAgd2l0aGluIGEgY2xhc3Mgb2YgZW1wbG95ZXJzLiBNYXkgYmUgcmVmZXJyZWQgdG8gYXMgYSBTZWN0aW9uIG9yIERpdmlzaW9uIElELlxyXG4gICAqL1xyXG4gIHN1YlBsYW4/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogQ292ZXJhZ2Uuc3ViUGxhblxyXG4gICAqL1xyXG4gIF9zdWJQbGFuPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBGb3Igc29tZSBjb3ZlcmFnZSBhIHNpbmdsZSBpZGVudGlmaWVyIGlzIGlzc3VlZCB0byB0aGUgUG9saWN5SG9sZGVyIGFuZCBkZXBlbmRlbnQgbnVtYmVyIGlzc3VlcyB0byBlYWNoIHRvIGVhY2ggb2YgdGhlaXIgZGVwZW5kZW50cyB0byB0cmFjayBhbmQgbWFuYWdlIHRoZSBwbGFuLlxyXG4gICAqL1xyXG4gIGRlcGVuZGVudD86IGZoaXIuRmhpclBvc2l0aXZlSW50fG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IENvdmVyYWdlLmRlcGVuZGVudFxyXG4gICAqL1xyXG4gIF9kZXBlbmRlbnQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFNvbWUgY292ZXJhZ2UsIGZvciBleGFtcGxlIHNvY2lhbCBwbGFucywgbWF5IGJlIG9mZmVyZWQgaW4gc2hvcnQgdGltZSBpbmNyZW1lbnRzLCBmb3IgZXhhbXBsZSBmb3IgYSB3ZWVrIG9yIGEgbW9udGggYXQgYSB0aW1lLCBzbyB3aGlsZSB0aGUgcmVzdCBvZiB0aGUgcGxhbiBkZXRhaWxzIGFuZCBpZGVudGlmaWVycyBtYXkgcmVtYWluIGNvbnN0YW50IG92ZXIgdGltZSwgdGhlIGluc3RhbmNlIGlzIGluY3JlbWVudGVkIHdpdGggZWFjaCByZW5ld2FsIGFuZCBwcm92aWRlZCB0byB0aGUgY292ZXJlZCBwYXJ0eSBvbiB0aGVpciAnY2FyZCcuXHJcbiAgICovXHJcbiAgc2VxdWVuY2U/OiBmaGlyLkZoaXJQb3NpdGl2ZUludHxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBDb3ZlcmFnZS5zZXF1ZW5jZVxyXG4gICAqL1xyXG4gIF9zZXF1ZW5jZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBhcnR5IHdobyAnb3ducycgdGhlIGluc3VyYW5jZSBjb250cmFjdHVhbCByZWxhdGlvbnNoaXAgdG8gdGhlIHBvbGljeSBvciB0byB3aG9tIHRoZSBiZW5lZml0IG9mIHRoZSBwb2xpY3kgaXMgZHVlLlxyXG4gICAqL1xyXG4gIHN1YnNjcmliZXI/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpZGVudGlmaWVyIGZvciBhIGNvbW11bml0eSBvZiBwcm92aWRlcnMuXHJcbiAgICovXHJcbiAgbmV0d29yaz86IGZoaXIuSWRlbnRpZmllckFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwb2xpY3kocykgd2hpY2ggY29uc3RpdHV0ZSB0aGlzIGluc3VyYW5jZSBjb3ZlcmFnZS5cclxuICAgKi9cclxuICBjb250cmFjdD86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEZpbmFuY2lhbCBpbnN0cnVtZW50IHdoaWNoIG1heSBiZSB1c2VkIHRvIHBheSBmb3Igb3IgcmVpbWJ1cnNlIGhlYWx0aCBjYXJlIHByb2R1Y3RzIGFuZCBzZXJ2aWNlcy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb3ZlcmFnZSBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnQ292ZXJhZ2UnO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNvdXJjZVR5cGU6IFwiQ292ZXJhZ2VcIjtcclxuICAvKipcclxuICAgKiBOZWVkIHRvIGlkZW50aWZ5IHRoZSBpc3N1ZXIgdG8gdGFyZ2V0IGZvciBwcm9jZXNzaW5nIGFuZCBmb3IgY29vcmRpbmF0aW9uIG9mIGJlbmVmaXQgcHJvY2Vzc2luZy5cclxuICAgKi9cclxuICBwdWJsaWMgaXNzdWVyPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEJ1c2luZXNzIElkZW50aWZpY2F0aW9uIE51bWJlciAoQklOIG51bWJlcikgdXNlZCB0byBpZGVudGlmeSB0aGUgcm91dGluZyAgb2YgZWNsYWltcyBpZiB0aGUgaW5zdXJlciB0aGVtc2VsdmVzIGRvbid0IGhhdmUgYSBCSU4gbnVtYmVyIGZvciBhbGwgb2YgdGhlaXIgYnVzaW5lc3MuXHJcbiAgICovXHJcbiAgcHVibGljIGJpbj86IGZoaXIuSWRlbnRpZmllcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGltZSBwZXJpb2QgZHVyaW5nIHdoaWNoIHRoZSBjb3ZlcmFnZSBpcyBpbiBmb3JjZS4gQSBtaXNzaW5nIHN0YXJ0IGRhdGUgaW5kaWNhdGVzIHRoZSBzdGFydCBkYXRlIGlzbid0IGtub3duLCBhIG1pc3NpbmcgZW5kIGRhdGUgbWVhbnMgdGhlIGNvdmVyYWdlIGlzIGNvbnRpbnVpbmcgdG8gYmUgaW4gZm9yY2UuXHJcbiAgICovXHJcbiAgcHVibGljIHBlcmlvZD86IGZoaXIuUGVyaW9kfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgb3JkZXIgb2YgYXBwbGljYXRpb24gb2YgY292ZXJhZ2VzIGlzIGRlcGVuZGVudCBvbiB0aGUgdHlwZXMgb2YgY292ZXJhZ2UuXHJcbiAgICovXHJcbiAgcHVibGljIHR5cGU/OiBmaGlyLkNvZGluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGlkIGlzc3VlZCB0byB0aGUgc3Vic2NyaWJlci5cclxuICAgKi9cclxuICBwdWJsaWMgc3Vic2NyaWJlcklkPzogZmhpci5JZGVudGlmaWVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGlzIHZhbHVlIG1heSB1bmlxdWVseSBpZGVudGlmeSB0aGUgY292ZXJhZ2Ugb3IgaXQgbWF5IGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCB0aGUgYWRkaXRpb25hbCBpZGVudGlmaWVycyBiZWxvdy5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcjogZmhpci5JZGVudGlmaWVyW107XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyBhIHN0eWxlIG9yIGNvbGxlY3RpdmUgb2YgY292ZXJhZ2UgaXNzdWVzIGJ5IHRoZSB1bmRlcndyaXRlciwgZm9yIGV4YW1wbGUgbWF5IGJlIHVzZWQgdG8gaWRlbnRpZnkgYSBjbGFzcyBvZiBjb3ZlcmFnZSBvciBlbXBsb3llciBncm91cC4gTWF5IGFsc28gYmUgcmVmZXJyZWQgdG8gYXMgYSBQb2xpY3kgb3IgR3JvdXAgSUQuXHJcbiAgICovXHJcbiAgcHVibGljIGdyb3VwPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIGEgc3R5bGUgb3IgY29sbGVjdGl2ZSBvZiBjb3ZlcmFnZSBpc3N1ZXMgYnkgdGhlIHVuZGVyd3JpdGVyLCBmb3IgZXhhbXBsZSBtYXkgYmUgdXNlZCB0byBpZGVudGlmeSBhIGNsYXNzIG9mIGNvdmVyYWdlIG9yIGVtcGxveWVyIGdyb3VwLiBNYXkgYWxzbyBiZSByZWZlcnJlZCB0byBhcyBhIFBvbGljeSBvciBHcm91cCBJRC5cclxuICAgKi9cclxuICBwdWJsaWMgcGxhbj86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyBhIHN1Yi1zdHlsZSBvciBzdWItY29sbGVjdGl2ZSBvZiBjb3ZlcmFnZSBpc3N1ZXMgYnkgdGhlIHVuZGVyd3JpdGVyLCBmb3IgZXhhbXBsZSBtYXkgYmUgdXNlZCB0byBpZGVudGlmeSBhIHNwZWNpZmljIGVtcGxveWVyIGdyb3VwIHdpdGhpbiBhIGNsYXNzIG9mIGVtcGxveWVycy4gTWF5IGJlIHJlZmVycmVkIHRvIGFzIGEgU2VjdGlvbiBvciBEaXZpc2lvbiBJRC5cclxuICAgKi9cclxuICBwdWJsaWMgc3ViUGxhbj86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRm9yIHNvbWUgY292ZXJhZ2UgYSBzaW5nbGUgaWRlbnRpZmllciBpcyBpc3N1ZWQgdG8gdGhlIFBvbGljeUhvbGRlciBhbmQgZGVwZW5kZW50IG51bWJlciBpc3N1ZXMgdG8gZWFjaCB0byBlYWNoIG9mIHRoZWlyIGRlcGVuZGVudHMgdG8gdHJhY2sgYW5kIG1hbmFnZSB0aGUgcGxhbi5cclxuICAgKi9cclxuICBwdWJsaWMgZGVwZW5kZW50PzogZmhpci5GaGlyUG9zaXRpdmVJbnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFNvbWUgY292ZXJhZ2UsIGZvciBleGFtcGxlIHNvY2lhbCBwbGFucywgbWF5IGJlIG9mZmVyZWQgaW4gc2hvcnQgdGltZSBpbmNyZW1lbnRzLCBmb3IgZXhhbXBsZSBmb3IgYSB3ZWVrIG9yIGEgbW9udGggYXQgYSB0aW1lLCBzbyB3aGlsZSB0aGUgcmVzdCBvZiB0aGUgcGxhbiBkZXRhaWxzIGFuZCBpZGVudGlmaWVycyBtYXkgcmVtYWluIGNvbnN0YW50IG92ZXIgdGltZSwgdGhlIGluc3RhbmNlIGlzIGluY3JlbWVudGVkIHdpdGggZWFjaCByZW5ld2FsIGFuZCBwcm92aWRlZCB0byB0aGUgY292ZXJlZCBwYXJ0eSBvbiB0aGVpciAnY2FyZCcuXHJcbiAgICovXHJcbiAgcHVibGljIHNlcXVlbmNlPzogZmhpci5GaGlyUG9zaXRpdmVJbnR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXJ0eSB3aG8gJ293bnMnIHRoZSBpbnN1cmFuY2UgY29udHJhY3R1YWwgcmVsYXRpb25zaGlwIHRvIHRoZSBwb2xpY3kgb3IgdG8gd2hvbSB0aGUgYmVuZWZpdCBvZiB0aGUgcG9saWN5IGlzIGR1ZS5cclxuICAgKi9cclxuICBwdWJsaWMgc3Vic2NyaWJlcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgaWRlbnRpZmllciBmb3IgYSBjb21tdW5pdHkgb2YgcHJvdmlkZXJzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBuZXR3b3JrPzogZmhpci5JZGVudGlmaWVyfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcG9saWN5KHMpIHdoaWNoIGNvbnN0aXR1dGUgdGhpcyBpbnN1cmFuY2UgY292ZXJhZ2UuXHJcbiAgICovXHJcbiAgcHVibGljIGNvbnRyYWN0OiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIENvdmVyYWdlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8Q292ZXJhZ2VBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnQ292ZXJhZ2UnO1xyXG4gICAgaWYgKHNvdXJjZVsnaXNzdWVyJ10pIHsgdGhpcy5pc3N1ZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmlzc3Vlciwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2JpbiddKSB7IHRoaXMuYmluID0gbmV3IGZoaXIuSWRlbnRpZmllcihzb3VyY2UuYmluLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncGVyaW9kJ10pIHsgdGhpcy5wZXJpb2QgPSBuZXcgZmhpci5QZXJpb2Qoc291cmNlLnBlcmlvZCwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3R5cGUnXSkgeyB0aGlzLnR5cGUgPSBuZXcgZmhpci5Db2Rpbmcoc291cmNlLnR5cGUsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydzdWJzY3JpYmVySWQnXSkgeyB0aGlzLnN1YnNjcmliZXJJZCA9IG5ldyBmaGlyLklkZW50aWZpZXIoc291cmNlLnN1YnNjcmliZXJJZCwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBzb3VyY2UuaWRlbnRpZmllci5tYXAoKHgpID0+IG5ldyBmaGlyLklkZW50aWZpZXIoeCwgb3B0aW9ucykpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pZGVudGlmaWVyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2dyb3VwJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLmdyb3VwID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5ncm91cH0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfZ3JvdXAnXSkge1xyXG4gICAgICBpZiAodGhpcy5ncm91cCkgeyB0aGlzLmdyb3VwLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2dyb3VwISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZ3JvdXAgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fZ3JvdXAgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3BsYW4nXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMucGxhbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2UucGxhbn0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfcGxhbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLnBsYW4pIHsgdGhpcy5wbGFuLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3BsYW4hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5wbGFuID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3BsYW4gYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3N1YlBsYW4nXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuc3ViUGxhbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoe3ZhbHVlOiBzb3VyY2Uuc3ViUGxhbn0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfc3ViUGxhbiddKSB7XHJcbiAgICAgIGlmICh0aGlzLnN1YlBsYW4pIHsgdGhpcy5zdWJQbGFuLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3N1YlBsYW4hKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zdWJQbGFuID0gbmV3IGZoaXIuRmhpclN0cmluZyhzb3VyY2UuX3N1YlBsYW4gYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2RlcGVuZGVudCddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5kZXBlbmRlbnQgPSBuZXcgZmhpci5GaGlyUG9zaXRpdmVJbnQoe3ZhbHVlOiBzb3VyY2UuZGVwZW5kZW50fSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19kZXBlbmRlbnQnXSkge1xyXG4gICAgICBpZiAodGhpcy5kZXBlbmRlbnQpIHsgdGhpcy5kZXBlbmRlbnQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZGVwZW5kZW50ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZGVwZW5kZW50ID0gbmV3IGZoaXIuRmhpclBvc2l0aXZlSW50KHNvdXJjZS5fZGVwZW5kZW50IGFzIFBhcnRpYWw8Zmhpci5GaGlyUG9zaXRpdmVJbnRBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3NlcXVlbmNlJ10gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnNlcXVlbmNlID0gbmV3IGZoaXIuRmhpclBvc2l0aXZlSW50KHt2YWx1ZTogc291cmNlLnNlcXVlbmNlfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zZXF1ZW5jZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnNlcXVlbmNlKSB7IHRoaXMuc2VxdWVuY2UuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc2VxdWVuY2UhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zZXF1ZW5jZSA9IG5ldyBmaGlyLkZoaXJQb3NpdGl2ZUludChzb3VyY2UuX3NlcXVlbmNlIGFzIFBhcnRpYWw8Zmhpci5GaGlyUG9zaXRpdmVJbnRBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3N1YnNjcmliZXInXSkgeyB0aGlzLnN1YnNjcmliZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnN1YnNjcmliZXIsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWyduZXR3b3JrJ10pIHsgdGhpcy5uZXR3b3JrID0gbmV3IGZoaXIuSWRlbnRpZmllcihzb3VyY2UubmV0d29yaywgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2NvbnRyYWN0J10pIHsgdGhpcy5jb250cmFjdCA9IHNvdXJjZS5jb250cmFjdC5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmNvbnRyYWN0ID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdDb3ZlcmFnZScgfVxyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2lzc3VlcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnYmluJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdwZXJpb2QnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3R5cGUnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3N1YnNjcmliZXJJZCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgnaWRlbnRpZmllcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnZ3JvdXAnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3BsYW4nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3N1YlBsYW4nLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ2RlcGVuZGVudCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnc2VxdWVuY2UnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3N1YnNjcmliZXInLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ25ldHdvcmsnLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T0EoJ2NvbnRyYWN0JyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbiJdfQ==