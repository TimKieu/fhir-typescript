// <auto-generated/>
// Contents of: hl7.fhir.r2.core version: 1.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: RiskAssessment
import * as fhir from '../fhir.js';
/**
 * Describes the expected outcome for the subject.
 */
export class RiskAssessmentPrediction extends fhir.BackboneElement {
    /**
     * Default constructor for RiskAssessmentPrediction - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['outcome']) {
            this.outcome = new fhir.CodeableConcept(source.outcome, options);
        }
        else {
            this.outcome = null;
        }
        if (source['probability']) {
            this.probability = source.probability;
        }
        else if (source['probabilityDecimal'] !== undefined) {
            this.probability = new fhir.FhirDecimal({ value: source.probabilityDecimal }, options);
        }
        else if (source['probabilityRange']) {
            this.probability = new fhir.Range(source.probabilityRange, options);
        }
        else if (source['probabilityCodeableConcept']) {
            this.probability = new fhir.CodeableConcept(source.probabilityCodeableConcept, options);
        }
        if (source['relativeRisk'] !== undefined) {
            this.relativeRisk = new fhir.FhirDecimal({ value: source.relativeRisk }, options);
        }
        if (source['_relativeRisk']) {
            if (this.relativeRisk) {
                this.relativeRisk.addExtendedProperties(source._relativeRisk);
            }
            else {
                this.relativeRisk = new fhir.FhirDecimal(source._relativeRisk, options);
            }
        }
        if (source['when']) {
            this.when = source.when;
        }
        else if (source['whenPeriod']) {
            this.when = new fhir.Period(source.whenPeriod, options);
        }
        else if (source['whenRange']) {
            this.when = new fhir.Range(source.whenRange, options);
        }
        if (source['rationale'] !== undefined) {
            this.rationale = new fhir.FhirString({ value: source.rationale }, options);
        }
        if (source['_rationale']) {
            if (this.rationale) {
                this.rationale.addExtendedProperties(source._rationale);
            }
            else {
                this.rationale = new fhir.FhirString(source._rationale, options);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'RiskAssessment.prediction';
        }
        iss.push(...this.vRS('outcome', exp));
        iss.push(...this.vOS('probability', exp));
        iss.push(...this.vOS('relativeRisk', exp));
        iss.push(...this.vOS('when', exp));
        iss.push(...this.vOS('rationale', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
RiskAssessmentPrediction._fts_dataType = 'RiskAssessmentPrediction';
/**
 * Internal flag to properly serialize choice-type element RiskAssessment.prediction.probability[x]
 */
RiskAssessmentPrediction._fts_probabilityIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element RiskAssessment.prediction.when[x]
 */
RiskAssessmentPrediction._fts_whenIsChoice = true;
/**
 * An assessment of the likely outcome(s) for a patient or other subject as well as the likelihood of each outcome.
 */
export class RiskAssessment extends fhir.DomainResource {
    /**
     * Default constructor for RiskAssessment - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'RiskAssessment';
        if (source['subject']) {
            this.subject = new fhir.Reference(source.subject, options);
        }
        if (source['date'] !== undefined) {
            this.date = new fhir.FhirDateTime({ value: source.date }, options);
        }
        if (source['_date']) {
            if (this.date) {
                this.date.addExtendedProperties(source._date);
            }
            else {
                this.date = new fhir.FhirDateTime(source._date, options);
            }
        }
        if (source['condition']) {
            this.condition = new fhir.Reference(source.condition, options);
        }
        if (source['encounter']) {
            this.encounter = new fhir.Reference(source.encounter, options);
        }
        if (source['performer']) {
            this.performer = new fhir.Reference(source.performer, options);
        }
        if (source['identifier']) {
            this.identifier = new fhir.Identifier(source.identifier, options);
        }
        if (source['method']) {
            this.method = new fhir.CodeableConcept(source.method, options);
        }
        if (source['basis']) {
            this.basis = source.basis.map((x) => new fhir.Reference(x, options));
        }
        else {
            this.basis = [];
        }
        if (source['prediction']) {
            this.prediction = source.prediction.map((x) => new fhir.RiskAssessmentPrediction(x, options));
        }
        else {
            this.prediction = [];
        }
        if (source['mitigation'] !== undefined) {
            this.mitigation = new fhir.FhirString({ value: source.mitigation }, options);
        }
        if (source['_mitigation']) {
            if (this.mitigation) {
                this.mitigation.addExtendedProperties(source._mitigation);
            }
            else {
                this.mitigation = new fhir.FhirString(source._mitigation, options);
            }
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let iss = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'RiskAssessment';
        }
        iss.push(...this.vOS('subject', exp));
        iss.push(...this.vOS('date', exp));
        iss.push(...this.vOS('condition', exp));
        iss.push(...this.vOS('encounter', exp));
        iss.push(...this.vOS('performer', exp));
        iss.push(...this.vOS('identifier', exp));
        iss.push(...this.vOS('method', exp));
        iss.push(...this.vOA('basis', exp));
        iss.push(...this.vOA('prediction', exp));
        iss.push(...this.vOS('mitigation', exp));
        return iss;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
RiskAssessment._fts_dataType = 'RiskAssessment';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmlza0Fzc2Vzc21lbnQuanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJmaGlyL1Jpc2tBc3Nlc3NtZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQjtBQUNwQiwrQ0FBK0M7QUFDL0Msa0NBQWtDO0FBQ2xDLGdDQUFnQztBQUVoQyxPQUFPLEtBQUssSUFBSSxNQUFNLFlBQVksQ0FBQztBQXdEbkM7O0dBRUc7QUFDSCxNQUFNLE9BQU8sd0JBQXlCLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUFpQ2hFOztPQUVHO0lBQ0gsWUFBWSxTQUErQyxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUNyRyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztTQUFFO2FBQ3ZGO1lBQUUsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7U0FBRTtRQUM3QixJQUFJLE1BQU0sQ0FBQyxhQUFhLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQztTQUFFO2FBQ2hFLElBQUksTUFBTSxDQUFDLG9CQUFvQixDQUFDLEtBQUssU0FBUyxFQUFFO1lBQUUsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLGtCQUFrQixFQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FBRTthQUN6SSxJQUFJLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLGdCQUFnQixFQUFFLE9BQU8sQ0FBQyxDQUFDO1NB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QUFJLE1BQU0sQ0FBQyxXQUFXLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FBRTtRQUM1RixJQUFJLE1BQU0sQ0FBQyxXQUFXLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FBRTtRQUM1RixJQUFJLE1BQU0sQ0FBQyxXQUFXLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FBRTtRQUM1RixJQUFJLE1BQU0sQ0FBQyxZQUFZLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FBRTtRQUNoRyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FBRTtRQUN6RixJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztTQUFFO2FBQ3pGO1lBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUM7U0FBRTtRQUN6QixJQUFJLE1BQU0sQ0FBQyxZQUFZLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLHdCQUF3QixDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO1NBQUU7YUFDdkg7WUFBRSxJQUFJLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQztTQUFFO1FBQzlCLElBQUksTUFBTSxDQUFDLFlBQVksQ0FBQyxLQUFLLFNBQVMsRUFBRTtZQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxVQUFVLEVBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztTQUFFO1FBQ3ZILElBQUksTUFBTSxDQUFDLGFBQWEsQ0FBQyxFQUFFO1lBQ3pCLElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRTtnQkFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxXQUFZLENBQUMsQ0FBQzthQUFFO2lCQUMvRTtnQkFBRSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsV0FBMkMsRUFBRSxPQUFPLENBQUMsQ0FBQzthQUFFO1NBQzdHO0lBQ0gsQ0FBQztJQUNEOztPQUVHO0lBQ2EsaUJBQWlCLENBQUMsTUFBYSxFQUFFO1FBQy9DLElBQUksR0FBRyxHQUFtQixLQUFLLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDdkQsSUFBSSxHQUFHLEtBQUssRUFBRSxFQUFFO1lBQUUsR0FBRyxHQUFHLGdCQUFnQixDQUFBO1NBQUU7UUFDMUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDckMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDeEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDcEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbkMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDeEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDeEMsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDOztBQTVGRDs7R0FFRztBQUM2Qiw0QkFBYSxHQUFVLGdCQUFnQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnIyLmNvcmUgdmVyc2lvbjogMS4wLjJcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBSaXNrQXNzZXNzbWVudFxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBSaXNrQXNzZXNzbWVudFByZWRpY3Rpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmlza0Fzc2Vzc21lbnRQcmVkaWN0aW9uQXJncyBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50QXJncyB7XHJcbiAgLyoqXHJcbiAgICogT25lIG9mIHRoZSBwb3RlbnRpYWwgb3V0Y29tZXMgZm9yIHRoZSBwYXRpZW50IChlLmcuIHJlbWlzc2lvbiwgZGVhdGgsICBhIHBhcnRpY3VsYXIgY29uZGl0aW9uKS5cclxuICAgKi9cclxuICBvdXRjb21lOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBIb3cgbGlrZWx5IGlzIHRoZSBvdXRjb21lIChpbiB0aGUgc3BlY2lmaWVkIHRpbWVmcmFtZSkuXHJcbiAgICovXHJcbiAgcHJvYmFiaWxpdHk/OiBmaGlyLkZoaXJEZWNpbWFsfGZoaXIuUmFuZ2V8Zmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEhvdyBsaWtlbHkgaXMgdGhlIG91dGNvbWUgKGluIHRoZSBzcGVjaWZpZWQgdGltZWZyYW1lKS5cclxuICAgKi9cclxuICBwcm9iYWJpbGl0eURlY2ltYWw/OiBmaGlyLkZoaXJEZWNpbWFsfG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSG93IGxpa2VseSBpcyB0aGUgb3V0Y29tZSAoaW4gdGhlIHNwZWNpZmllZCB0aW1lZnJhbWUpLlxyXG4gICAqL1xyXG4gIHByb2JhYmlsaXR5UmFuZ2U/OiBmaGlyLlJhbmdlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSG93IGxpa2VseSBpcyB0aGUgb3V0Y29tZSAoaW4gdGhlIHNwZWNpZmllZCB0aW1lZnJhbWUpLlxyXG4gICAqL1xyXG4gIHByb2JhYmlsaXR5Q29kZWFibGVDb25jZXB0PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBYnNvbHV0ZSByaXNrIGlzIGxlc3MgbWVhbmluZ2Z1bCB0aGFuIHJlbGF0aXZlIHJpc2suXHJcbiAgICovXHJcbiAgcmVsYXRpdmVSaXNrPzogZmhpci5GaGlyRGVjaW1hbHxudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBSaXNrQXNzZXNzbWVudC5wcmVkaWN0aW9uLnJlbGF0aXZlUmlza1xyXG4gICAqL1xyXG4gIF9yZWxhdGl2ZVJpc2s/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB0aGUgcGVyaW9kIG9mIHRpbWUgb3IgYWdlIHJhbmdlIG9mIHRoZSBzdWJqZWN0IHRvIHdoaWNoIHRoZSBzcGVjaWZpZWQgcHJvYmFiaWxpdHkgYXBwbGllcy5cclxuICAgKi9cclxuICB3aGVuPzogZmhpci5QZXJpb2R8Zmhpci5SYW5nZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHRoZSBwZXJpb2Qgb2YgdGltZSBvciBhZ2UgcmFuZ2Ugb2YgdGhlIHN1YmplY3QgdG8gd2hpY2ggdGhlIHNwZWNpZmllZCBwcm9iYWJpbGl0eSBhcHBsaWVzLlxyXG4gICAqL1xyXG4gIHdoZW5QZXJpb2Q/OiBmaGlyLlBlcmlvZEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB0aGUgcGVyaW9kIG9mIHRpbWUgb3IgYWdlIHJhbmdlIG9mIHRoZSBzdWJqZWN0IHRvIHdoaWNoIHRoZSBzcGVjaWZpZWQgcHJvYmFiaWxpdHkgYXBwbGllcy5cclxuICAgKi9cclxuICB3aGVuUmFuZ2U/OiBmaGlyLlJhbmdlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWRkaXRpb25hbCBpbmZvcm1hdGlvbiBleHBsYWluaW5nIHRoZSBiYXNpcyBmb3IgdGhlIHByZWRpY3Rpb24uXHJcbiAgICovXHJcbiAgcmF0aW9uYWxlPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFJpc2tBc3Nlc3NtZW50LnByZWRpY3Rpb24ucmF0aW9uYWxlXHJcbiAgICovXHJcbiAgX3JhdGlvbmFsZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEZXNjcmliZXMgdGhlIGV4cGVjdGVkIG91dGNvbWUgZm9yIHRoZSBzdWJqZWN0LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFJpc2tBc3Nlc3NtZW50UHJlZGljdGlvbiBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1Jpc2tBc3Nlc3NtZW50UHJlZGljdGlvbic7XHJcbiAgLyoqXHJcbiAgICogT25lIG9mIHRoZSBwb3RlbnRpYWwgb3V0Y29tZXMgZm9yIHRoZSBwYXRpZW50IChlLmcuIHJlbWlzc2lvbiwgZGVhdGgsICBhIHBhcnRpY3VsYXIgY29uZGl0aW9uKS5cclxuICAgKi9cclxuICBwdWJsaWMgb3V0Y29tZTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBIb3cgbGlrZWx5IGlzIHRoZSBvdXRjb21lIChpbiB0aGUgc3BlY2lmaWVkIHRpbWVmcmFtZSkuXHJcbiAgICovXHJcbiAgcHVibGljIHByb2JhYmlsaXR5PzogKGZoaXIuRmhpckRlY2ltYWx8Zmhpci5SYW5nZXxmaGlyLkNvZGVhYmxlQ29uY2VwdCl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgUmlza0Fzc2Vzc21lbnQucHJlZGljdGlvbi5wcm9iYWJpbGl0eVt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c19wcm9iYWJpbGl0eUlzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIEFic29sdXRlIHJpc2sgaXMgbGVzcyBtZWFuaW5nZnVsIHRoYW4gcmVsYXRpdmUgcmlzay5cclxuICAgKi9cclxuICBwdWJsaWMgcmVsYXRpdmVSaXNrPzogZmhpci5GaGlyRGVjaW1hbHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHRoZSBwZXJpb2Qgb2YgdGltZSBvciBhZ2UgcmFuZ2Ugb2YgdGhlIHN1YmplY3QgdG8gd2hpY2ggdGhlIHNwZWNpZmllZCBwcm9iYWJpbGl0eSBhcHBsaWVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB3aGVuPzogKGZoaXIuUGVyaW9kfGZoaXIuUmFuZ2UpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IFJpc2tBc3Nlc3NtZW50LnByZWRpY3Rpb24ud2hlblt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c193aGVuSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogQWRkaXRpb25hbCBpbmZvcm1hdGlvbiBleHBsYWluaW5nIHRoZSBiYXNpcyBmb3IgdGhlIHByZWRpY3Rpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHJhdGlvbmFsZT86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgUmlza0Fzc2Vzc21lbnRQcmVkaWN0aW9uIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8Umlza0Fzc2Vzc21lbnRQcmVkaWN0aW9uQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ291dGNvbWUnXSkgeyB0aGlzLm91dGNvbWUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLm91dGNvbWUsIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5vdXRjb21lID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsncHJvYmFiaWxpdHknXSkgeyB0aGlzLnByb2JhYmlsaXR5ID0gc291cmNlLnByb2JhYmlsaXR5OyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3Byb2JhYmlsaXR5RGVjaW1hbCddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5wcm9iYWJpbGl0eSA9IG5ldyBmaGlyLkZoaXJEZWNpbWFsKHt2YWx1ZTogc291cmNlLnByb2JhYmlsaXR5RGVjaW1hbH0sIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3Byb2JhYmlsaXR5UmFuZ2UnXSkgeyB0aGlzLnByb2JhYmlsaXR5ID0gbmV3IGZoaXIuUmFuZ2Uoc291cmNlLnByb2JhYmlsaXR5UmFuZ2UsIG9wdGlvbnMpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3Byb2JhYmlsaXR5Q29kZWFibGVDb25jZXB0J10pIHsgdGhpcy5wcm9iYWJpbGl0eSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UucHJvYmFiaWxpdHlDb2RlYWJsZUNvbmNlcHQsIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydyZWxhdGl2ZVJpc2snXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMucmVsYXRpdmVSaXNrID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoe3ZhbHVlOiBzb3VyY2UucmVsYXRpdmVSaXNrfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19yZWxhdGl2ZVJpc2snXSkge1xyXG4gICAgICBpZiAodGhpcy5yZWxhdGl2ZVJpc2spIHsgdGhpcy5yZWxhdGl2ZVJpc2suYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fcmVsYXRpdmVSaXNrISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMucmVsYXRpdmVSaXNrID0gbmV3IGZoaXIuRmhpckRlY2ltYWwoc291cmNlLl9yZWxhdGl2ZVJpc2sgYXMgUGFydGlhbDxmaGlyLkZoaXJEZWNpbWFsQXJncz4sIG9wdGlvbnMpOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd3aGVuJ10pIHsgdGhpcy53aGVuID0gc291cmNlLndoZW47IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnd2hlblBlcmlvZCddKSB7IHRoaXMud2hlbiA9IG5ldyBmaGlyLlBlcmlvZChzb3VyY2Uud2hlblBlcmlvZCwgb3B0aW9ucyk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnd2hlblJhbmdlJ10pIHsgdGhpcy53aGVuID0gbmV3IGZoaXIuUmFuZ2Uoc291cmNlLndoZW5SYW5nZSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3JhdGlvbmFsZSddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5yYXRpb25hbGUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnJhdGlvbmFsZX0sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydfcmF0aW9uYWxlJ10pIHtcclxuICAgICAgaWYgKHRoaXMucmF0aW9uYWxlKSB7IHRoaXMucmF0aW9uYWxlLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3JhdGlvbmFsZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnJhdGlvbmFsZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl9yYXRpb25hbGUgYXMgUGFydGlhbDxmaGlyLkZoaXJTdHJpbmdBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3M6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdSaXNrQXNzZXNzbWVudC5wcmVkaWN0aW9uJyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZSUygnb3V0Y29tZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygncHJvYmFiaWxpdHknLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3JlbGF0aXZlUmlzaycsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnd2hlbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygncmF0aW9uYWxlJyxleHApKTtcclxuICAgIHJldHVybiBpc3M7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBSaXNrQXNzZXNzbWVudCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBSaXNrQXNzZXNzbWVudEFyZ3MgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlQXJncyB7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcmVzb3VyY2VUeXBlOiBcIlJpc2tBc3Nlc3NtZW50XCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXRpZW50IG9yIGdyb3VwIHRoZSByaXNrIGFzc2Vzc21lbnQgYXBwbGllcyB0by5cclxuICAgKi9cclxuICBzdWJqZWN0PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgYXNzZXNzbWVudCByZXN1bHRzIGxvc2UgdmFsaWRpdHkgdGhlIG1vcmUgdGltZSBlbGFwc2VzIGZyb20gd2hlbiB0aGV5IGFyZSBmaXJzdCBtYWRlLlxyXG4gICAqL1xyXG4gIGRhdGU/OiBmaGlyLkZoaXJEYXRlVGltZXxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBSaXNrQXNzZXNzbWVudC5kYXRlXHJcbiAgICovXHJcbiAgX2RhdGU/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEZvciBhc3Nlc3NtZW50cyBvciBwcm9nbm9zaXMgc3BlY2lmaWMgdG8gYSBwYXJ0aWN1bGFyIGNvbmRpdGlvbiwgaW5kaWNhdGVzIHRoZSBjb25kaXRpb24gYmVpbmcgYXNzZXNzZWQuXHJcbiAgICovXHJcbiAgY29uZGl0aW9uPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZW5jb3VudGVyIHdoZXJlIHRoZSBhc3Nlc3NtZW50IHdhcyBwZXJmb3JtZWQuXHJcbiAgICovXHJcbiAgZW5jb3VudGVyPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcHJvdmlkZXIgb3Igc29mdHdhcmUgYXBwbGljYXRpb24gdGhhdCBwZXJmb3JtZWQgdGhlIGFzc2Vzc21lbnQuXHJcbiAgICovXHJcbiAgcGVyZm9ybWVyPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBCdXNpbmVzcyBpZGVudGlmaWVyIGFzc2lnbmVkIHRvIHRoZSByaXNrIGFzc2Vzc21lbnQuXHJcbiAgICovXHJcbiAgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllckFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBtZXRob2QgY2FuIGluZmx1ZW5jZSB0aGUgcmVzdWx0cyBvZiB0aGUgYXNzZXNzbWVudC5cclxuICAgKi9cclxuICBtZXRob2Q/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB0aGUgc291cmNlIGRhdGEgY29uc2lkZXJlZCBhcyBwYXJ0IG9mIHRoZSBhc3Nlc3NtZW50IChGYW1pbHlIaXN0b3J5LCBPYnNlcnZhdGlvbnMsIFByb2NlZHVyZXMsIENvbmRpdGlvbnMsIGV0Yy4pLlxyXG4gICAqL1xyXG4gIGJhc2lzPzogZmhpci5SZWZlcmVuY2VBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB0aGUgZXhwZWN0ZWQgb3V0Y29tZSBmb3IgdGhlIHN1YmplY3QuXHJcbiAgICovXHJcbiAgcHJlZGljdGlvbj86IGZoaXIuUmlza0Fzc2Vzc21lbnRQcmVkaWN0aW9uQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBPbmUgb2YgdGhlIG1haW4gcmVhc29ucyBmb3IgYXNzZXNzaW5nIHJpc2tzIGlzIHRvIGlkZW50aWZ5IHdoZXRoZXIgaW50ZXJ2ZW50aW9uYWwgc3RlcHMgYXJlIG5lZWRlZCB0byByZWR1Y2Ugcmlzay5cclxuICAgKi9cclxuICBtaXRpZ2F0aW9uPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFJpc2tBc3Nlc3NtZW50Lm1pdGlnYXRpb25cclxuICAgKi9cclxuICBfbWl0aWdhdGlvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBbiBhc3Nlc3NtZW50IG9mIHRoZSBsaWtlbHkgb3V0Y29tZShzKSBmb3IgYSBwYXRpZW50IG9yIG90aGVyIHN1YmplY3QgYXMgd2VsbCBhcyB0aGUgbGlrZWxpaG9vZCBvZiBlYWNoIG91dGNvbWUuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUmlza0Fzc2Vzc21lbnQgZXh0ZW5kcyBmaGlyLkRvbWFpblJlc291cmNlIHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1Jpc2tBc3Nlc3NtZW50JztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIlJpc2tBc3Nlc3NtZW50XCI7XHJcbiAgLyoqXHJcbiAgICogVGhlIHBhdGllbnQgb3IgZ3JvdXAgdGhlIHJpc2sgYXNzZXNzbWVudCBhcHBsaWVzIHRvLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdWJqZWN0PzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBhc3Nlc3NtZW50IHJlc3VsdHMgbG9zZSB2YWxpZGl0eSB0aGUgbW9yZSB0aW1lIGVsYXBzZXMgZnJvbSB3aGVuIHRoZXkgYXJlIGZpcnN0IG1hZGUuXHJcbiAgICovXHJcbiAgcHVibGljIGRhdGU/OiBmaGlyLkZoaXJEYXRlVGltZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRm9yIGFzc2Vzc21lbnRzIG9yIHByb2dub3NpcyBzcGVjaWZpYyB0byBhIHBhcnRpY3VsYXIgY29uZGl0aW9uLCBpbmRpY2F0ZXMgdGhlIGNvbmRpdGlvbiBiZWluZyBhc3Nlc3NlZC5cclxuICAgKi9cclxuICBwdWJsaWMgY29uZGl0aW9uPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBlbmNvdW50ZXIgd2hlcmUgdGhlIGFzc2Vzc21lbnQgd2FzIHBlcmZvcm1lZC5cclxuICAgKi9cclxuICBwdWJsaWMgZW5jb3VudGVyPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwcm92aWRlciBvciBzb2Z0d2FyZSBhcHBsaWNhdGlvbiB0aGF0IHBlcmZvcm1lZCB0aGUgYXNzZXNzbWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgcGVyZm9ybWVyPzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEJ1c2luZXNzIGlkZW50aWZpZXIgYXNzaWduZWQgdG8gdGhlIHJpc2sgYXNzZXNzbWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcj86IGZoaXIuSWRlbnRpZmllcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIG1ldGhvZCBjYW4gaW5mbHVlbmNlIHRoZSByZXN1bHRzIG9mIHRoZSBhc3Nlc3NtZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtZXRob2Q/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHRoZSBzb3VyY2UgZGF0YSBjb25zaWRlcmVkIGFzIHBhcnQgb2YgdGhlIGFzc2Vzc21lbnQgKEZhbWlseUhpc3RvcnksIE9ic2VydmF0aW9ucywgUHJvY2VkdXJlcywgQ29uZGl0aW9ucywgZXRjLikuXHJcbiAgICovXHJcbiAgcHVibGljIGJhc2lzOiBmaGlyLlJlZmVyZW5jZVtdO1xyXG4gIC8qKlxyXG4gICAqIERlc2NyaWJlcyB0aGUgZXhwZWN0ZWQgb3V0Y29tZSBmb3IgdGhlIHN1YmplY3QuXHJcbiAgICovXHJcbiAgcHVibGljIHByZWRpY3Rpb246IGZoaXIuUmlza0Fzc2Vzc21lbnRQcmVkaWN0aW9uW107XHJcbiAgLyoqXHJcbiAgICogT25lIG9mIHRoZSBtYWluIHJlYXNvbnMgZm9yIGFzc2Vzc2luZyByaXNrcyBpcyB0byBpZGVudGlmeSB3aGV0aGVyIGludGVydmVudGlvbmFsIHN0ZXBzIGFyZSBuZWVkZWQgdG8gcmVkdWNlIHJpc2suXHJcbiAgICovXHJcbiAgcHVibGljIG1pdGlnYXRpb24/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIFJpc2tBc3Nlc3NtZW50IC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8Umlza0Fzc2Vzc21lbnRBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnUmlza0Fzc2Vzc21lbnQnO1xyXG4gICAgaWYgKHNvdXJjZVsnc3ViamVjdCddKSB7IHRoaXMuc3ViamVjdCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2Uuc3ViamVjdCwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2RhdGUnXSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuZGF0ZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5kYXRlfSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19kYXRlJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZGF0ZSkgeyB0aGlzLmRhdGUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZGF0ZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRhdGUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoc291cmNlLl9kYXRlIGFzIFBhcnRpYWw8Zmhpci5GaGlyRGF0ZVRpbWVBcmdzPiwgb3B0aW9ucyk7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2NvbmRpdGlvbiddKSB7IHRoaXMuY29uZGl0aW9uID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5jb25kaXRpb24sIG9wdGlvbnMpOyB9XHJcbiAgICBpZiAoc291cmNlWydlbmNvdW50ZXInXSkgeyB0aGlzLmVuY291bnRlciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuZW5jb3VudGVyLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncGVyZm9ybWVyJ10pIHsgdGhpcy5wZXJmb3JtZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnBlcmZvcm1lciwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBuZXcgZmhpci5JZGVudGlmaWVyKHNvdXJjZS5pZGVudGlmaWVyLCBvcHRpb25zKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbWV0aG9kJ10pIHsgdGhpcy5tZXRob2QgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLm1ldGhvZCwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ2Jhc2lzJ10pIHsgdGhpcy5iYXNpcyA9IHNvdXJjZS5iYXNpcy5tYXAoKHgpID0+IG5ldyBmaGlyLlJlZmVyZW5jZSh4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmJhc2lzID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3ByZWRpY3Rpb24nXSkgeyB0aGlzLnByZWRpY3Rpb24gPSBzb3VyY2UucHJlZGljdGlvbi5tYXAoKHgpID0+IG5ldyBmaGlyLlJpc2tBc3Nlc3NtZW50UHJlZGljdGlvbih4LCBvcHRpb25zKSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnByZWRpY3Rpb24gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbWl0aWdhdGlvbiddICE9PSB1bmRlZmluZWQpIHsgdGhpcy5taXRpZ2F0aW9uID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5taXRpZ2F0aW9ufSwgb3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19taXRpZ2F0aW9uJ10pIHtcclxuICAgICAgaWYgKHRoaXMubWl0aWdhdGlvbikgeyB0aGlzLm1pdGlnYXRpb24uYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbWl0aWdhdGlvbiEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLm1pdGlnYXRpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fbWl0aWdhdGlvbiBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+LCBvcHRpb25zKTsgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ1Jpc2tBc3Nlc3NtZW50JyB9XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnc3ViamVjdCcsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnZGF0ZScsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnY29uZGl0aW9uJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9TKCdlbmNvdW50ZXInLGV4cCkpO1xyXG4gICAgaXNzLnB1c2goLi4udGhpcy52T1MoJ3BlcmZvcm1lcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnaWRlbnRpZmllcicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnbWV0aG9kJyxleHApKTtcclxuICAgIGlzcy5wdXNoKC4uLnRoaXMudk9BKCdiYXNpcycsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPQSgncHJlZGljdGlvbicsZXhwKSk7XHJcbiAgICBpc3MucHVzaCguLi50aGlzLnZPUygnbWl0aWdhdGlvbicsZXhwKSk7XHJcbiAgICByZXR1cm4gaXNzO1xyXG4gIH1cclxufVxyXG4iXX0=