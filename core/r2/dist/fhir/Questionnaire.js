// <auto-generated/>
// Contents of: hl7.fhir.r2.core version: 1.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: Questionnaire
import * as fhir from '../fhir.js';
// @ts-ignore
import { AnswerFormatVsValidation } from '../fhirValueSets/AnswerFormatVsValidation.js';
// @ts-ignore
import { QuestionnaireStatusVsValidation } from '../fhirValueSets/QuestionnaireStatusVsValidation.js';
// @ts-ignore
import { ResourceTypesVsValidation } from '../fhirValueSets/ResourceTypesVsValidation.js';
/**
 * Must register answers to questions.
 */
export class QuestionnaireGroupQuestion extends fhir.BackboneElement {
    /**
     * Default constructor for QuestionnaireGroupQuestion - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['linkId']) {
            this.linkId = new fhir.FhirString({ value: source.linkId });
        }
        if (source['_linkId']) {
            if (this.linkId) {
                this.linkId.addExtendedProperties(source._linkId);
            }
            else {
                this.linkId = new fhir.FhirString(source._linkId);
            }
        }
        if (source['concept']) {
            this.concept = source.concept.map((x) => new fhir.Coding(x));
        }
        else {
            this.concept = [];
        }
        if (source['text']) {
            this.text = new fhir.FhirString({ value: source.text });
        }
        if (source['_text']) {
            if (this.text) {
                this.text.addExtendedProperties(source._text);
            }
            else {
                this.text = new fhir.FhirString(source._text);
            }
        }
        if (source['type']) {
            this.type = new fhir.FhirCode({ value: source.type });
        }
        if (source['_type']) {
            if (this.type) {
                this.type.addExtendedProperties(source._type);
            }
            else {
                this.type = new fhir.FhirCode(source._type);
            }
        }
        if (source['required']) {
            this.required = new fhir.FhirBoolean({ value: source.required });
        }
        if (source['_required']) {
            if (this.required) {
                this.required.addExtendedProperties(source._required);
            }
            else {
                this.required = new fhir.FhirBoolean(source._required);
            }
        }
        if (source['repeats']) {
            this.repeats = new fhir.FhirBoolean({ value: source.repeats });
        }
        if (source['_repeats']) {
            if (this.repeats) {
                this.repeats.addExtendedProperties(source._repeats);
            }
            else {
                this.repeats = new fhir.FhirBoolean(source._repeats);
            }
        }
        if (source['options']) {
            this.options = new fhir.Reference(source.options);
        }
        if (source['option']) {
            this.option = source.option.map((x) => new fhir.Coding(x));
        }
        else {
            this.option = [];
        }
        if (source['group']) {
            this.group = source.group.map((x) => new fhir.QuestionnaireGroup(x));
        }
        else {
            this.group = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Questionnaire.group.question';
        }
        this.vOS('linkId', exp);
        this.vOA('concept', exp);
        this.vOS('text', exp);
        this.vOSV('type', exp, 'AnswerFormat', AnswerFormatVsValidation, 'r');
        this.vOS('required', exp);
        this.vOS('repeats', exp);
        this.vOS('options', exp);
        this.vOA('option', exp);
        this.vOA('group', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
QuestionnaireGroupQuestion._fts_dataType = 'QuestionnaireGroupQuestion';
/**
 * Need to be able to logically group answers to grouped questions.
 */
export class QuestionnaireGroup extends fhir.BackboneElement {
    /**
     * Default constructor for QuestionnaireGroup - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['linkId']) {
            this.linkId = new fhir.FhirString({ value: source.linkId });
        }
        if (source['_linkId']) {
            if (this.linkId) {
                this.linkId.addExtendedProperties(source._linkId);
            }
            else {
                this.linkId = new fhir.FhirString(source._linkId);
            }
        }
        if (source['title']) {
            this.title = new fhir.FhirString({ value: source.title });
        }
        if (source['_title']) {
            if (this.title) {
                this.title.addExtendedProperties(source._title);
            }
            else {
                this.title = new fhir.FhirString(source._title);
            }
        }
        if (source['concept']) {
            this.concept = source.concept.map((x) => new fhir.Coding(x));
        }
        else {
            this.concept = [];
        }
        if (source['text']) {
            this.text = new fhir.FhirString({ value: source.text });
        }
        if (source['_text']) {
            if (this.text) {
                this.text.addExtendedProperties(source._text);
            }
            else {
                this.text = new fhir.FhirString(source._text);
            }
        }
        if (source['required']) {
            this.required = new fhir.FhirBoolean({ value: source.required });
        }
        if (source['_required']) {
            if (this.required) {
                this.required.addExtendedProperties(source._required);
            }
            else {
                this.required = new fhir.FhirBoolean(source._required);
            }
        }
        if (source['repeats']) {
            this.repeats = new fhir.FhirBoolean({ value: source.repeats });
        }
        if (source['_repeats']) {
            if (this.repeats) {
                this.repeats.addExtendedProperties(source._repeats);
            }
            else {
                this.repeats = new fhir.FhirBoolean(source._repeats);
            }
        }
        if (source['group']) {
            this.group = source.group.map((x) => new fhir.QuestionnaireGroup(x));
        }
        else {
            this.group = [];
        }
        if (source['question']) {
            this.question = source.question.map((x) => new fhir.QuestionnaireGroupQuestion(x));
        }
        else {
            this.question = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Questionnaire.group';
        }
        this.vOS('linkId', exp);
        this.vOS('title', exp);
        this.vOA('concept', exp);
        this.vOS('text', exp);
        this.vOS('required', exp);
        this.vOS('repeats', exp);
        this.vOA('group', exp);
        this.vOA('question', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
QuestionnaireGroup._fts_dataType = 'QuestionnaireGroup';
/**
 * A structured set of questions intended to guide the collection of answers. The questions are ordered and grouped into coherent subsets, corresponding to the structure of the grouping of the underlying questions.
 */
export class Questionnaire extends fhir.DomainResource {
    /**
     * Default constructor for Questionnaire - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'Questionnaire';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['version']) {
            this.version = new fhir.FhirString({ value: source.version });
        }
        if (source['_version']) {
            if (this.version) {
                this.version.addExtendedProperties(source._version);
            }
            else {
                this.version = new fhir.FhirString(source._version);
            }
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['date']) {
            this.date = new fhir.FhirDateTime({ value: source.date });
        }
        if (source['_date']) {
            if (this.date) {
                this.date.addExtendedProperties(source._date);
            }
            else {
                this.date = new fhir.FhirDateTime(source._date);
            }
        }
        if (source['publisher']) {
            this.publisher = new fhir.FhirString({ value: source.publisher });
        }
        if (source['_publisher']) {
            if (this.publisher) {
                this.publisher.addExtendedProperties(source._publisher);
            }
            else {
                this.publisher = new fhir.FhirString(source._publisher);
            }
        }
        if (source['telecom']) {
            this.telecom = source.telecom.map((x) => new fhir.ContactPoint(x));
        }
        else {
            this.telecom = [];
        }
        if (source['subjectType']) {
            this.subjectType = source.subjectType.map((x) => new fhir.FhirCode({ value: x }));
        }
        else {
            this.subjectType = [];
        }
        if (source['_subjectType']) {
            source._subjectType.forEach((x, i) => {
                if (this.subjectType.length >= i) {
                    if (x) {
                        this.subjectType[i].addExtendedProperties(x);
                    }
                }
                else {
                    if (x) {
                        this.subjectType.push(new fhir.FhirCode(x));
                    }
                }
            });
        }
        if (source['group']) {
            this.group = new fhir.QuestionnaireGroup(source.group);
        }
        else {
            this.group = null;
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'Questionnaire';
        }
        this.vRS('resourceType', exp);
        this.vOA('identifier', exp);
        this.vOS('version', exp);
        this.vRSV('status', exp, 'QuestionnaireStatus', QuestionnaireStatusVsValidation, 'r');
        this.vOS('date', exp);
        this.vOS('publisher', exp);
        this.vOA('telecom', exp);
        this.vOAV('subjectType', exp, 'ResourceTypes', ResourceTypesVsValidation, 'r');
        this.vRS('group', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
Questionnaire._fts_dataType = 'Questionnaire';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUXVlc3Rpb25uYWlyZS5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvUXVlc3Rpb25uYWlyZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQywrQkFBK0I7QUFFL0IsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFJbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLDhDQUE4QyxDQUFDO0FBR3hGLGFBQWE7QUFDYixPQUFPLEVBQUUsK0JBQStCLEVBQUUsTUFBTSxxREFBcUQsQ0FBQztBQUd0RyxhQUFhO0FBQ2IsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sK0NBQStDLENBQUM7QUErRDFGOztHQUVHO0FBQ0gsTUFBTSxPQUFPLDBCQUEyQixTQUFRLElBQUksQ0FBQyxlQUFlO0lBeUNsRTs7T0FFRztJQUNILFlBQVksU0FBaUQsRUFBRSxFQUFFLFVBQXNDLEVBQUU7UUFDdkcsS0FBSyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxNQUFNLEVBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDcEYsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFDckIsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO2dCQUFFLElBQUksQ0FBQyxNQUFNLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLE9BQVEsQ0FBQyxDQUFDO2FBQUU7aUJBQ25FO2dCQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxPQUF1QyxDQUFDLENBQUM7YUFBRTtTQUM1RjtRQUNELElBQUksTUFBTSxD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dXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yMi5jb3JlIHZlcnNpb246IDEuMC4yXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogUXVlc3Rpb25uYWlyZVxyXG5cclxuaW1wb3J0ICogYXMgZmhpciBmcm9tICcuLi9maGlyLmpzJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgQW5zd2VyRm9ybWF0Q29kZXMsICBBbnN3ZXJGb3JtYXRDb2RlVHlwZSB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQW5zd2VyRm9ybWF0Q29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IEFuc3dlckZvcm1hdFZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvQW5zd2VyRm9ybWF0VnNWYWxpZGF0aW9uLmpzJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBRdWVzdGlvbm5haXJlU3RhdHVzQ29kZXMsICBRdWVzdGlvbm5haXJlU3RhdHVzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1F1ZXN0aW9ubmFpcmVTdGF0dXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUXVlc3Rpb25uYWlyZVN0YXR1c1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvUXVlc3Rpb25uYWlyZVN0YXR1c1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgUmVzb3VyY2VUeXBlc0NvZGVzLCAgUmVzb3VyY2VUeXBlc0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9SZXNvdXJjZVR5cGVzQ29kZXMuanMnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCB7IFJlc291cmNlVHlwZXNWc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL1Jlc291cmNlVHlwZXNWc1ZhbGlkYXRpb24uanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgUXVlc3Rpb25uYWlyZUdyb3VwUXVlc3Rpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgUXVlc3Rpb25uYWlyZUdyb3VwUXVlc3Rpb25BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBbW1tRdWVzdGlvbm5haXJlUmVzcG9uc2VdXV0gZG9lcyBub3QgcmVxdWlyZSBvbWl0dGVkIGdyb3VwcyB0byBiZSBpbmNsdWRlZCBhbmQgbWF5IGhhdmUgc29tZSBncm91cHMgdGhhdCByZXBlYXQsIHNvIGxpbmthZ2UgYmFzZWQgb24gcG9zaXRpb24gYWxvbmUgaXMgbm90IHN1ZmZpY2llbnQuXHJcbiAgICovXHJcbiAgbGlua0lkPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFF1ZXN0aW9ubmFpcmUuZ3JvdXAucXVlc3Rpb24ubGlua0lkXHJcbiAgICovXHJcbiAgX2xpbmtJZD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQWxsb3dzIGxpbmtpbmcgb2YgcXVlc3Rpb25zIChhbmQgdGhlaXIgYW5zd2VycykgdG8gZm9ybWFsIHRlcm1pbm9sb2dpZXMuXHJcbiAgICovXHJcbiAgY29uY2VwdD86IGZoaXIuQ29kaW5nQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBXaGVuIGluY2x1ZGluZyB0ZXh0IGZvciB0aGUgcXVlc3Rpb25uYWlyZSwgZWFjaCBxdWVzdGlvbiBtYXkgY29udGFpbiBpdHMgYWN0dWFsIHF1ZXN0aW9uIGRpc3BsYXkgdGV4dC5cclxuICAgKi9cclxuICB0ZXh0PzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFF1ZXN0aW9ubmFpcmUuZ3JvdXAucXVlc3Rpb24udGV4dFxyXG4gICAqL1xyXG4gIF90ZXh0PzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBEZWZpbmVzIHRoZSBmb3JtYXQgaW4gd2hpY2ggdGhlIHVzZXIgaXMgdG8gYmUgcHJvbXB0ZWQgZm9yIHRoZSBhbnN3ZXIuXHJcbiAgICovXHJcbiAgdHlwZT86IGZoaXIuRmhpckNvZGU8QW5zd2VyRm9ybWF0Q29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFF1ZXN0aW9ubmFpcmUuZ3JvdXAucXVlc3Rpb24udHlwZVxyXG4gICAqL1xyXG4gIF90eXBlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBJZiB0cnVlLCBpbmRpY2F0ZXMgdGhhdCB0aGUgcXVlc3Rpb24gbXVzdCBiZSBhbnN3ZXJlZCBhbmQgaGF2ZSByZXF1aXJlZCBncm91cHMgd2l0aGluIGl0IGFsc28gcHJlc2VudC4gIElmIGZhbHNlLCB0aGUgcXVlc3Rpb24gYW5kIGFueSBjb250YWluZWQgZ3JvdXBzIG1heSBiZSBza2lwcGVkIHdoZW4gYW5zd2VyaW5nIHRoZSBxdWVzdGlvbm5haXJlLlxyXG4gICAqL1xyXG4gIHJlcXVpcmVkPzogZmhpci5GaGlyQm9vbGVhbnxib29sZWFufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogUXVlc3Rpb25uYWlyZS5ncm91cC5xdWVzdGlvbi5yZXF1aXJlZFxyXG4gICAqL1xyXG4gIF9yZXF1aXJlZD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVXNlZCBmb3IgXCJjaGVjayBhbGwgdGhhdCBhcHBseVwiIHR5cGVzIG9mIHF1ZXN0aW9ucyBvciBcImxpc3QgeW91ciB0b3AgM1wiLCBldGMuXHJcbiAgICovXHJcbiAgcmVwZWF0cz86IGZoaXIuRmhpckJvb2xlYW58Ym9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFF1ZXN0aW9ubmFpcmUuZ3JvdXAucXVlc3Rpb24ucmVwZWF0c1xyXG4gICAqL1xyXG4gIF9yZXBlYXRzPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBSZWZlcmVuY2UgdG8gYSB2YWx1ZSBzZXQgY29udGFpbmluZyBhIGxpc3Qgb2YgY29kZXMgcmVwcmVzZW50aW5nIHBlcm1pdHRlZCBhbnN3ZXJzIGZvciB0aGUgcXVlc3Rpb24uXHJcbiAgICovXHJcbiAgb3B0aW9ucz86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRm9yIGEgXCJjaG9pY2VcIiBxdWVzdGlvbiwgaWRlbnRpZmllcyBvbmUgb2YgdGhlIHBlcm1pdHRlZCBhbnN3ZXJzIGZvciB0aGUgcXVlc3Rpb24uXHJcbiAgICovXHJcbiAgb3B0aW9uPzogZmhpci5Db2RpbmdBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEl0IGlzIHVzZWZ1bCB0byBoYXZlIFwic3ViLXF1ZXN0aW9uc1wiLCBxdWVzdGlvbnMgd2hpY2ggbm9ybWFsbHkgYXBwZWFyIHdoZW4gY2VydGFpbiBhbnN3ZXJzIGFyZSBnaXZlbiBhbmQgd2hpY2ggY29sbGVjdCBhZGRpdGlvbmFsIGRldGFpbHMuXHJcbiAgICovXHJcbiAgZ3JvdXA/OiBmaGlyLlF1ZXN0aW9ubmFpcmVHcm91cEFyZ3NbXXx1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNdXN0IHJlZ2lzdGVyIGFuc3dlcnMgdG8gcXVlc3Rpb25zLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFF1ZXN0aW9ubmFpcmVHcm91cFF1ZXN0aW9uIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnUXVlc3Rpb25uYWlyZUdyb3VwUXVlc3Rpb24nO1xyXG4gIC8qKlxyXG4gICAqIFtbW1F1ZXN0aW9ubmFpcmVSZXNwb25zZV1dXSBkb2VzIG5vdCByZXF1aXJlIG9taXR0ZWQgZ3JvdXBzIHRvIGJlIGluY2x1ZGVkIGFuZCBtYXkgaGF2ZSBzb21lIGdyb3VwcyB0aGF0IHJlcGVhdCwgc28gbGlua2FnZSBiYXNlZCBvbiBwb3NpdGlvbiBhbG9uZSBpcyBub3Qgc3VmZmljaWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgbGlua0lkPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBbGxvd3MgbGlua2luZyBvZiBxdWVzdGlvbnMgKGFuZCB0aGVpciBhbnN3ZXJzKSB0byBmb3JtYWwgdGVybWlub2xvZ2llcy5cclxuICAgKi9cclxuICBwdWJsaWMgY29uY2VwdDogZmhpci5Db2RpbmdbXTtcclxuICAvKipcclxuICAgKiBXaGVuIGluY2x1ZGluZyB0ZXh0IGZvciB0aGUgcXVlc3Rpb25uYWlyZSwgZWFjaCBxdWVzdGlvbiBtYXkgY29udGFpbiBpdHMgYWN0dWFsIHF1ZXN0aW9uIGRpc3BsYXkgdGV4dC5cclxuICAgKi9cclxuICBwdWJsaWMgdGV4dD86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmaW5lcyB0aGUgZm9ybWF0IGluIHdoaWNoIHRoZSB1c2VyIGlzIHRvIGJlIHByb21wdGVkIGZvciB0aGUgYW5zd2VyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0eXBlPzogZmhpci5GaGlyQ29kZTxBbnN3ZXJGb3JtYXRDb2RlVHlwZT58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElmIHRydWUsIGluZGljYXRlcyB0aGF0IHRoZSBxdWVzdGlvbiBtdXN0IGJlIGFuc3dlcmVkIGFuZCBoYXZlIHJlcXVpcmVkIGdyb3VwcyB3aXRoaW4gaXQgYWxzbyBwcmVzZW50LiAgSWYgZmFsc2UsIHRoZSBxdWVzdGlvbiBhbmQgYW55IGNvbnRhaW5lZCBncm91cHMgbWF5IGJlIHNraXBwZWQgd2hlbiBhbnN3ZXJpbmcgdGhlIHF1ZXN0aW9ubmFpcmUuXHJcbiAgICovXHJcbiAgcHVibGljIHJlcXVpcmVkPzogZmhpci5GaGlyQm9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVXNlZCBmb3IgXCJjaGVjayBhbGwgdGhhdCBhcHBseVwiIHR5cGVzIG9mIHF1ZXN0aW9ucyBvciBcImxpc3QgeW91ciB0b3AgM1wiLCBldGMuXHJcbiAgICovXHJcbiAgcHVibGljIHJlcGVhdHM/OiBmaGlyLkZoaXJCb29sZWFufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBSZWZlcmVuY2UgdG8gYSB2YWx1ZSBzZXQgY29udGFpbmluZyBhIGxpc3Qgb2YgY29kZXMgcmVwcmVzZW50aW5nIHBlcm1pdHRlZCBhbnN3ZXJzIGZvciB0aGUgcXVlc3Rpb24uXHJcbiAgICovXHJcbiAgcHVibGljIG9wdGlvbnM/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRm9yIGEgXCJjaG9pY2VcIiBxdWVzdGlvbiwgaWRlbnRpZmllcyBvbmUgb2YgdGhlIHBlcm1pdHRlZCBhbnN3ZXJzIGZvciB0aGUgcXVlc3Rpb24uXHJcbiAgICovXHJcbiAgcHVibGljIG9wdGlvbjogZmhpci5Db2RpbmdbXTtcclxuICAvKipcclxuICAgKiBJdCBpcyB1c2VmdWwgdG8gaGF2ZSBcInN1Yi1xdWVzdGlvbnNcIiwgcXVlc3Rpb25zIHdoaWNoIG5vcm1hbGx5IGFwcGVhciB3aGVuIGNlcnRhaW4gYW5zd2VycyBhcmUgZ2l2ZW4gYW5kIHdoaWNoIGNvbGxlY3QgYWRkaXRpb25hbCBkZXRhaWxzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBncm91cDogZmhpci5RdWVzdGlvbm5haXJlR3JvdXBbXTtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBRdWVzdGlvbm5haXJlR3JvdXBRdWVzdGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPFF1ZXN0aW9ubmFpcmVHcm91cFF1ZXN0aW9uQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2xpbmtJZCddKSB7IHRoaXMubGlua0lkID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5saW5rSWR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2xpbmtJZCddKSB7XHJcbiAgICAgIGlmICh0aGlzLmxpbmtJZCkgeyB0aGlzLmxpbmtJZC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9saW5rSWQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5saW5rSWQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fbGlua0lkIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydjb25jZXB0J10pIHsgdGhpcy5jb25jZXB0ID0gc291cmNlLmNvbmNlcHQubWFwKCh4KSA9PiBuZXcgZmhpci5Db2RpbmcoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5jb25jZXB0ID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3RleHQnXSkgeyB0aGlzLnRleHQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnRleHR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3RleHQnXSkge1xyXG4gICAgICBpZiAodGhpcy50ZXh0KSB7IHRoaXMudGV4dC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl90ZXh0ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudGV4dCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl90ZXh0IGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd0eXBlJ10pIHsgdGhpcy50eXBlID0gbmV3IGZoaXIuRmhpckNvZGU8QW5zd2VyRm9ybWF0Q29kZVR5cGU+KHt2YWx1ZTogc291cmNlLnR5cGV9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3R5cGUnXSkge1xyXG4gICAgICBpZiAodGhpcy50eXBlKSB7IHRoaXMudHlwZS5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl90eXBlISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudHlwZSA9IG5ldyBmaGlyLkZoaXJDb2RlPEFuc3dlckZvcm1hdENvZGVUeXBlPihzb3VyY2UuX3R5cGUgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3JlcXVpcmVkJ10pIHsgdGhpcy5yZXF1aXJlZCA9IG5ldyBmaGlyLkZoaXJCb29sZWFuKHt2YWx1ZTogc291cmNlLnJlcXVpcmVkfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19yZXF1aXJlZCddKSB7XHJcbiAgICAgIGlmICh0aGlzLnJlcXVpcmVkKSB7IHRoaXMucmVxdWlyZWQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fcmVxdWlyZWQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5yZXF1aXJlZCA9IG5ldyBmaGlyLkZoaXJCb29sZWFuKHNvdXJjZS5fcmVxdWlyZWQgYXMgUGFydGlhbDxmaGlyLkZoaXJCb29sZWFuQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydyZXBlYXRzJ10pIHsgdGhpcy5yZXBlYXRzID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oe3ZhbHVlOiBzb3VyY2UucmVwZWF0c30pOyB9XHJcbiAgICBpZiAoc291cmNlWydfcmVwZWF0cyddKSB7XHJcbiAgICAgIGlmICh0aGlzLnJlcGVhdHMpIHsgdGhpcy5yZXBlYXRzLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3JlcGVhdHMhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5yZXBlYXRzID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oc291cmNlLl9yZXBlYXRzIGFzIFBhcnRpYWw8Zmhpci5GaGlyQm9vbGVhbkFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnb3B0aW9ucyddKSB7IHRoaXMub3B0aW9ucyA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2Uub3B0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ29wdGlvbiddKSB7IHRoaXMub3B0aW9uID0gc291cmNlLm9wdGlvbi5tYXAoKHgpID0+IG5ldyBmaGlyLkNvZGluZyh4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLm9wdGlvbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydncm91cCddKSB7IHRoaXMuZ3JvdXAgPSBzb3VyY2UuZ3JvdXAubWFwKCh4KSA9PiBuZXcgZmhpci5RdWVzdGlvbm5haXJlR3JvdXAoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5ncm91cCA9IFtdOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnUXVlc3Rpb25uYWlyZS5ncm91cC5xdWVzdGlvbicgfVxyXG4gICAgdGhpcy52T1MoJ2xpbmtJZCcsZXhwKVxyXG4gICAgdGhpcy52T0EoJ2NvbmNlcHQnLGV4cClcclxuICAgIHRoaXMudk9TKCd0ZXh0JyxleHApXHJcbiAgICB0aGlzLnZPU1YoJ3R5cGUnLGV4cCwnQW5zd2VyRm9ybWF0JyxBbnN3ZXJGb3JtYXRWc1ZhbGlkYXRpb24sJ3InKVxyXG4gICAgdGhpcy52T1MoJ3JlcXVpcmVkJyxleHApXHJcbiAgICB0aGlzLnZPUygncmVwZWF0cycsZXhwKVxyXG4gICAgdGhpcy52T1MoJ29wdGlvbnMnLGV4cClcclxuICAgIHRoaXMudk9BKCdvcHRpb24nLGV4cClcclxuICAgIHRoaXMudk9BKCdncm91cCcsZXhwKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkIGFyZ3VtZW50cyBmb3IgdGhlIFF1ZXN0aW9ubmFpcmVHcm91cCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBRdWVzdGlvbm5haXJlR3JvdXBBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBbW1tRdWVzdGlvbm5haXJlUmVzcG9uc2VdXV0gZG9lcyBub3QgcmVxdWlyZSBvbWl0dGVkIGdyb3VwcyB0byBiZSBpbmNsdWRlZCBhbmQgbWF5IGhhdmUgc29tZSBncm91cHMgdGhhdCByZXBlYXQsIHNvIGxpbmthZ2UgYmFzZWQgb24gcG9zaXRpb24gYWxvbmUgaXMgbm90IHN1ZmZpY2llbnQuXHJcbiAgICovXHJcbiAgbGlua0lkPzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFF1ZXN0aW9ubmFpcmUuZ3JvdXAubGlua0lkXHJcbiAgICovXHJcbiAgX2xpbmtJZD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogV2hlbiBpbmNsdWRpbmcgdGV4dCBmb3IgdGhlIHF1ZXN0aW9ubmFpcmUgd2l0aCB0aGUgYW5zd2Vycywgc2VjdGlvbnMgbWF5IGhhdmUgYSBzZWN0aW9uIGhlYWRlci5cclxuICAgKi9cclxuICB0aXRsZT86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBRdWVzdGlvbm5haXJlLmdyb3VwLnRpdGxlXHJcbiAgICovXHJcbiAgX3RpdGxlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBBbGxvd3MgbGlua2luZyBvZiBncm91cHMgb2YgcXVlc3Rpb25zIChhbmQgY29tcGxldGUgUXVlc3Rpb25uYWlyZSByZXNvdXJjZXMpIHRvIGZvcm1hbCB0ZXJtaW5vbG9naWVzLlxyXG4gICAqL1xyXG4gIGNvbmNlcHQ/OiBmaGlyLkNvZGluZ0FyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogV2hlbiBpbmNsdWRpbmcgdGV4dCBmb3IgdGhlIHF1ZXN0aW9ubmFpcmUsIGVhY2ggc2VjdGlvbiBtYXkgY29udGFpbiBhZGRpdGlvbmFsIGV4cGxhbmF0aW9ucyBhcmUgYmFja2dyb3VuZCB0ZXh0LlxyXG4gICAqL1xyXG4gIHRleHQ/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogUXVlc3Rpb25uYWlyZS5ncm91cC50ZXh0XHJcbiAgICovXHJcbiAgX3RleHQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIElmIHRydWUsIGluZGljYXRlcyB0aGF0IHRoZSBncm91cCBtdXN0IGJlIHByZXNlbnQgYW5kIGhhdmUgcmVxdWlyZWQgcXVlc3Rpb25zIHdpdGhpbiBpdCBhbnN3ZXJlZC4gIElmIGZhbHNlLCB0aGUgZ3JvdXAgbWF5IGJlIHNraXBwZWQgd2hlbiBhbnN3ZXJpbmcgdGhlIHF1ZXN0aW9ubmFpcmUuXHJcbiAgICovXHJcbiAgcmVxdWlyZWQ/OiBmaGlyLkZoaXJCb29sZWFufGJvb2xlYW58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBRdWVzdGlvbm5haXJlLmdyb3VwLnJlcXVpcmVkXHJcbiAgICovXHJcbiAgX3JlcXVpcmVkPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBHcm91cHMgbWF5IGJlIHVzZWQgdG8gY3JlYXRlIHNldCBvZiAocmVsYXRlZCkgcXVlc3Rpb25zIHRoYXQgY2FuIGJlIHJlcGVhdGVkIHRvIGdpdmUgbXVsdGlwbGUgYW5zd2VycyB0byBzdWNoIGEgc2V0LlxyXG4gICAqL1xyXG4gIHJlcGVhdHM/OiBmaGlyLkZoaXJCb29sZWFufGJvb2xlYW58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBRdWVzdGlvbm5haXJlLmdyb3VwLnJlcGVhdHNcclxuICAgKi9cclxuICBfcmVwZWF0cz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogUmVwb3J0cyBjYW4gY29uc2lzdCBvZiBjb21wbGV4IG5lc3RlZCBncm91cHMuXHJcbiAgICovXHJcbiAgZ3JvdXA/OiBmaGlyLlF1ZXN0aW9ubmFpcmVHcm91cEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogTXVzdCByZWdpc3RlciBhbnN3ZXJzIHRvIHF1ZXN0aW9ucy5cclxuICAgKi9cclxuICBxdWVzdGlvbj86IGZoaXIuUXVlc3Rpb25uYWlyZUdyb3VwUXVlc3Rpb25BcmdzW118dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogTmVlZCB0byBiZSBhYmxlIHRvIGxvZ2ljYWxseSBncm91cCBhbnN3ZXJzIHRvIGdyb3VwZWQgcXVlc3Rpb25zLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFF1ZXN0aW9ubmFpcmVHcm91cCBleHRlbmRzIGZoaXIuQmFja2JvbmVFbGVtZW50IHtcclxuICAvKipcclxuICAgKiBNYXBwaW5nIG9mIHRoaXMgZGF0YXR5cGUgdG8gYSBGSElSIGVxdWl2YWxlbnRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIHJlYWRvbmx5IF9mdHNfZGF0YVR5cGU6c3RyaW5nID0gJ1F1ZXN0aW9ubmFpcmVHcm91cCc7XHJcbiAgLyoqXHJcbiAgICogW1tbUXVlc3Rpb25uYWlyZVJlc3BvbnNlXV1dIGRvZXMgbm90IHJlcXVpcmUgb21pdHRlZCBncm91cHMgdG8gYmUgaW5jbHVkZWQgYW5kIG1heSBoYXZlIHNvbWUgZ3JvdXBzIHRoYXQgcmVwZWF0LCBzbyBsaW5rYWdlIGJhc2VkIG9uIHBvc2l0aW9uIGFsb25lIGlzIG5vdCBzdWZmaWNpZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBsaW5rSWQ/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFdoZW4gaW5jbHVkaW5nIHRleHQgZm9yIHRoZSBxdWVzdGlvbm5haXJlIHdpdGggdGhlIGFuc3dlcnMsIHNlY3Rpb25zIG1heSBoYXZlIGEgc2VjdGlvbiBoZWFkZXIuXHJcbiAgICovXHJcbiAgcHVibGljIHRpdGxlPzogZmhpci5GaGlyU3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBbGxvd3MgbGlua2luZyBvZiBncm91cHMgb2YgcXVlc3Rpb25zIChhbmQgY29tcGxldGUgUXVlc3Rpb25uYWlyZSByZXNvdXJjZXMpIHRvIGZvcm1hbCB0ZXJtaW5vbG9naWVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25jZXB0OiBmaGlyLkNvZGluZ1tdO1xyXG4gIC8qKlxyXG4gICAqIFdoZW4gaW5jbHVkaW5nIHRleHQgZm9yIHRoZSBxdWVzdGlvbm5haXJlLCBlYWNoIHNlY3Rpb24gbWF5IGNvbnRhaW4gYWRkaXRpb25hbCBleHBsYW5hdGlvbnMgYXJlIGJhY2tncm91bmQgdGV4dC5cclxuICAgKi9cclxuICBwdWJsaWMgdGV4dD86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWYgdHJ1ZSwgaW5kaWNhdGVzIHRoYXQgdGhlIGdyb3VwIG11c3QgYmUgcHJlc2VudCBhbmQgaGF2ZSByZXF1aXJlZCBxdWVzdGlvbnMgd2l0aGluIGl0IGFuc3dlcmVkLiAgSWYgZmFsc2UsIHRoZSBncm91cCBtYXkgYmUgc2tpcHBlZCB3aGVuIGFuc3dlcmluZyB0aGUgcXVlc3Rpb25uYWlyZS5cclxuICAgKi9cclxuICBwdWJsaWMgcmVxdWlyZWQ/OiBmaGlyLkZoaXJCb29sZWFufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBHcm91cHMgbWF5IGJlIHVzZWQgdG8gY3JlYXRlIHNldCBvZiAocmVsYXRlZCkgcXVlc3Rpb25zIHRoYXQgY2FuIGJlIHJlcGVhdGVkIHRvIGdpdmUgbXVsdGlwbGUgYW5zd2VycyB0byBzdWNoIGEgc2V0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZXBlYXRzPzogZmhpci5GaGlyQm9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogUmVwb3J0cyBjYW4gY29uc2lzdCBvZiBjb21wbGV4IG5lc3RlZCBncm91cHMuXHJcbiAgICovXHJcbiAgcHVibGljIGdyb3VwOiBmaGlyLlF1ZXN0aW9ubmFpcmVHcm91cFtdO1xyXG4gIC8qKlxyXG4gICAqIE11c3QgcmVnaXN0ZXIgYW5zd2VycyB0byBxdWVzdGlvbnMuXHJcbiAgICovXHJcbiAgcHVibGljIHF1ZXN0aW9uOiBmaGlyLlF1ZXN0aW9ubmFpcmVHcm91cFF1ZXN0aW9uW107XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgUXVlc3Rpb25uYWlyZUdyb3VwIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8UXVlc3Rpb25uYWlyZUdyb3VwQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ2xpbmtJZCddKSB7IHRoaXMubGlua0lkID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5saW5rSWR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX2xpbmtJZCddKSB7XHJcbiAgICAgIGlmICh0aGlzLmxpbmtJZCkgeyB0aGlzLmxpbmtJZC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9saW5rSWQhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5saW5rSWQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fbGlua0lkIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd0aXRsZSddKSB7IHRoaXMudGl0bGUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnRpdGxlfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ190aXRsZSddKSB7XHJcbiAgICAgIGlmICh0aGlzLnRpdGxlKSB7IHRoaXMudGl0bGUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdGl0bGUhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy50aXRsZSA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl90aXRsZSBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnY29uY2VwdCddKSB7IHRoaXMuY29uY2VwdCA9IHNvdXJjZS5jb25jZXB0Lm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kaW5nKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuY29uY2VwdCA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWyd0ZXh0J10pIHsgdGhpcy50ZXh0ID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS50ZXh0fSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ190ZXh0J10pIHtcclxuICAgICAgaWYgKHRoaXMudGV4dCkgeyB0aGlzLnRleHQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdGV4dCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnRleHQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fdGV4dCBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVxdWlyZWQnXSkgeyB0aGlzLnJlcXVpcmVkID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oe3ZhbHVlOiBzb3VyY2UucmVxdWlyZWR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3JlcXVpcmVkJ10pIHtcclxuICAgICAgaWYgKHRoaXMucmVxdWlyZWQpIHsgdGhpcy5yZXF1aXJlZC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9yZXF1aXJlZCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnJlcXVpcmVkID0gbmV3IGZoaXIuRmhpckJvb2xlYW4oc291cmNlLl9yZXF1aXJlZCBhcyBQYXJ0aWFsPGZoaXIuRmhpckJvb2xlYW5BcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3JlcGVhdHMnXSkgeyB0aGlzLnJlcGVhdHMgPSBuZXcgZmhpci5GaGlyQm9vbGVhbih7dmFsdWU6IHNvdXJjZS5yZXBlYXRzfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19yZXBlYXRzJ10pIHtcclxuICAgICAgaWYgKHRoaXMucmVwZWF0cykgeyB0aGlzLnJlcGVhdHMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fcmVwZWF0cyEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnJlcGVhdHMgPSBuZXcgZmhpci5GaGlyQm9vbGVhbihzb3VyY2UuX3JlcGVhdHMgYXMgUGFydGlhbDxmaGlyLkZoaXJCb29sZWFuQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydncm91cCddKSB7IHRoaXMuZ3JvdXAgPSBzb3VyY2UuZ3JvdXAubWFwKCh4KSA9PiBuZXcgZmhpci5RdWVzdGlvbm5haXJlR3JvdXAoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5ncm91cCA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydxdWVzdGlvbiddKSB7IHRoaXMucXVlc3Rpb24gPSBzb3VyY2UucXVlc3Rpb24ubWFwKCh4KSA9PiBuZXcgZmhpci5RdWVzdGlvbm5haXJlR3JvdXBRdWVzdGlvbih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnF1ZXN0aW9uID0gW107IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdRdWVzdGlvbm5haXJlLmdyb3VwJyB9XHJcbiAgICB0aGlzLnZPUygnbGlua0lkJyxleHApXHJcbiAgICB0aGlzLnZPUygndGl0bGUnLGV4cClcclxuICAgIHRoaXMudk9BKCdjb25jZXB0JyxleHApXHJcbiAgICB0aGlzLnZPUygndGV4dCcsZXhwKVxyXG4gICAgdGhpcy52T1MoJ3JlcXVpcmVkJyxleHApXHJcbiAgICB0aGlzLnZPUygncmVwZWF0cycsZXhwKVxyXG4gICAgdGhpcy52T0EoJ2dyb3VwJyxleHApXHJcbiAgICB0aGlzLnZPQSgncXVlc3Rpb24nLGV4cClcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBRdWVzdGlvbm5haXJlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXN0aW9ubmFpcmVBcmdzIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZUFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHJlc291cmNlVHlwZTogXCJRdWVzdGlvbm5haXJlXCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIE5lZWQgdG8gYWxsb3cgY29ubmVjdGlvbiB0byBhIHdpZGVyIHdvcmtmbG93LlxyXG4gICAqL1xyXG4gIGlkZW50aWZpZXI/OiBmaGlyLklkZW50aWZpZXJBcmdzW118dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluIHNvbWUgY2FzZXMsIHNlcGFyYXRlIHJlc291cmNlIGluc3RhbmNlcyBtaWdodCBiZSBjcmVhdGVkIGZvciBlYWNoIHZlcnNpb24gKGlmIGFuIG9sZGVyIHZlcnNpb24gY2FuIGJlIG1haW50YWluZWQgb25jZSBhIG5ldyB2ZXJzaW9uIGV4aXN0cykuXHJcbiAgICovXHJcbiAgdmVyc2lvbj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBRdWVzdGlvbm5haXJlLnZlcnNpb25cclxuICAgKi9cclxuICBfdmVyc2lvbj86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIGxpZmVjeWNsZSBzdGF0dXMgb2YgdGhlIHF1ZXN0aW9ubmFpcmUgYXMgYSB3aG9sZS5cclxuICAgKi9cclxuICBzdGF0dXM6IGZoaXIuRmhpckNvZGU8UXVlc3Rpb25uYWlyZVN0YXR1c0NvZGVUeXBlPnxzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBRdWVzdGlvbm5haXJlLnN0YXR1c1xyXG4gICAqL1xyXG4gIF9zdGF0dXM/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRlIHRoYXQgdGhpcyBxdWVzdGlvbm5haXJlIHdhcyBsYXN0IGNoYW5nZWQuXHJcbiAgICovXHJcbiAgZGF0ZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IFF1ZXN0aW9ubmFpcmUuZGF0ZVxyXG4gICAqL1xyXG4gIF9kYXRlPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBDb252ZXlzIHJlc3BvbnNpYmlsaXR5IGZvciB0aGUgcXVlc3Rpb25zIGFuZCB0aGVpciBvcmdhbml6YXRpb24gYW5kIGFsc28gaGVscHMgZXZhbHVhdGUgdGhlIHF1ZXN0aW9ubmFpcmUncyBcImF1dGhvcml0eVwiLlxyXG4gICAqL1xyXG4gIHB1Ymxpc2hlcj86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBRdWVzdGlvbm5haXJlLnB1Ymxpc2hlclxyXG4gICAqL1xyXG4gIF9wdWJsaXNoZXI/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIENvbnRhY3QgZGV0YWlscyB0byBhc3Npc3QgYSB1c2VyIGluIGZpbmRpbmcgYW5kIGNvbW11bmljYXRpbmcgd2l0aCB0aGUgcHVibGlzaGVyLlxyXG4gICAqL1xyXG4gIHRlbGVjb20/OiBmaGlyLkNvbnRhY3RQb2ludEFyZ3NbXXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgdHlwZXMgb2Ygc3ViamVjdHMgdGhhdCBjYW4gYmUgdGhlIHN1YmplY3Qgb2YgdGhlIHF1ZXN0aW9ubmFpcmUuXHJcbiAgICovXHJcbiAgc3ViamVjdFR5cGU/OiBmaGlyLkZoaXJDb2RlW118KHN0cmluZ3xudWxsKVtdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogUXVlc3Rpb25uYWlyZS5zdWJqZWN0VHlwZVxyXG4gICAqL1xyXG4gIF9zdWJqZWN0VHlwZT86KGZoaXIuRmhpckVsZW1lbnRBcmdzfG51bGwpW107XHJcbiAgLyoqXHJcbiAgICogTmVlZCB0byBiZSBhYmxlIHRvIGxvZ2ljYWxseSBncm91cCBhbnN3ZXJzIHRvIGdyb3VwZWQgcXVlc3Rpb25zLlxyXG4gICAqL1xyXG4gIGdyb3VwOiBmaGlyLlF1ZXN0aW9ubmFpcmVHcm91cEFyZ3N8bnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgc3RydWN0dXJlZCBzZXQgb2YgcXVlc3Rpb25zIGludGVuZGVkIHRvIGd1aWRlIHRoZSBjb2xsZWN0aW9uIG9mIGFuc3dlcnMuIFRoZSBxdWVzdGlvbnMgYXJlIG9yZGVyZWQgYW5kIGdyb3VwZWQgaW50byBjb2hlcmVudCBzdWJzZXRzLCBjb3JyZXNwb25kaW5nIHRvIHRoZSBzdHJ1Y3R1cmUgb2YgdGhlIGdyb3VwaW5nIG9mIHRoZSB1bmRlcmx5aW5nIHF1ZXN0aW9ucy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBRdWVzdGlvbm5haXJlIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdRdWVzdGlvbm5haXJlJztcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgcmVzb3VyY2VUeXBlOiBcIlF1ZXN0aW9ubmFpcmVcIjtcclxuICAvKipcclxuICAgKiBOZWVkIHRvIGFsbG93IGNvbm5lY3Rpb24gdG8gYSB3aWRlciB3b3JrZmxvdy5cclxuICAgKi9cclxuICBwdWJsaWMgaWRlbnRpZmllcjogZmhpci5JZGVudGlmaWVyW107XHJcbiAgLyoqXHJcbiAgICogSW4gc29tZSBjYXNlcywgc2VwYXJhdGUgcmVzb3VyY2UgaW5zdGFuY2VzIG1pZ2h0IGJlIGNyZWF0ZWQgZm9yIGVhY2ggdmVyc2lvbiAoaWYgYW4gb2xkZXIgdmVyc2lvbiBjYW4gYmUgbWFpbnRhaW5lZCBvbmNlIGEgbmV3IHZlcnNpb24gZXhpc3RzKS5cclxuICAgKi9cclxuICBwdWJsaWMgdmVyc2lvbj86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGxpZmVjeWNsZSBzdGF0dXMgb2YgdGhlIHF1ZXN0aW9ubmFpcmUgYXMgYSB3aG9sZS5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdHVzOiBmaGlyLkZoaXJDb2RlPFF1ZXN0aW9ubmFpcmVTdGF0dXNDb2RlVHlwZT58bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSB0aGF0IHRoaXMgcXVlc3Rpb25uYWlyZSB3YXMgbGFzdCBjaGFuZ2VkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkYXRlPzogZmhpci5GaGlyRGF0ZVRpbWV8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENvbnZleXMgcmVzcG9uc2liaWxpdHkgZm9yIHRoZSBxdWVzdGlvbnMgYW5kIHRoZWlyIG9yZ2FuaXphdGlvbiBhbmQgYWxzbyBoZWxwcyBldmFsdWF0ZSB0aGUgcXVlc3Rpb25uYWlyZSdzIFwiYXV0aG9yaXR5XCIuXHJcbiAgICovXHJcbiAgcHVibGljIHB1Ymxpc2hlcj86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ29udGFjdCBkZXRhaWxzIHRvIGFzc2lzdCBhIHVzZXIgaW4gZmluZGluZyBhbmQgY29tbXVuaWNhdGluZyB3aXRoIHRoZSBwdWJsaXNoZXIuXHJcbiAgICovXHJcbiAgcHVibGljIHRlbGVjb206IGZoaXIuQ29udGFjdFBvaW50W107XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgdHlwZXMgb2Ygc3ViamVjdHMgdGhhdCBjYW4gYmUgdGhlIHN1YmplY3Qgb2YgdGhlIHF1ZXN0aW9ubmFpcmUuXHJcbiAgICovXHJcbiAgcHVibGljIHN1YmplY3RUeXBlOiBmaGlyLkZoaXJDb2RlW107XHJcbiAgLyoqXHJcbiAgICogTmVlZCB0byBiZSBhYmxlIHRvIGxvZ2ljYWxseSBncm91cCBhbnN3ZXJzIHRvIGdyb3VwZWQgcXVlc3Rpb25zLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBncm91cDogZmhpci5RdWVzdGlvbm5haXJlR3JvdXB8bnVsbDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBRdWVzdGlvbm5haXJlIC0gaW5pdGlhbGl6ZXMgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHRvIG51bGwgaWYgYSB2YWx1ZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlOlBhcnRpYWw8UXVlc3Rpb25uYWlyZUFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnJlc291cmNlVHlwZSA9ICdRdWVzdGlvbm5haXJlJztcclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBzb3VyY2UuaWRlbnRpZmllci5tYXAoKHgpID0+IG5ldyBmaGlyLklkZW50aWZpZXIoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pZGVudGlmaWVyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3ZlcnNpb24nXSkgeyB0aGlzLnZlcnNpb24gPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnZlcnNpb259KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3ZlcnNpb24nXSkge1xyXG4gICAgICBpZiAodGhpcy52ZXJzaW9uKSB7IHRoaXMudmVyc2lvbi5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl92ZXJzaW9uISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudmVyc2lvbiA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl92ZXJzaW9uIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydzdGF0dXMnXSkgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPFF1ZXN0aW9ubmFpcmVTdGF0dXNDb2RlVHlwZT4oe3ZhbHVlOiBzb3VyY2Uuc3RhdHVzfSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnN0YXR1cyA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ19zdGF0dXMnXSkge1xyXG4gICAgICBpZiAodGhpcy5zdGF0dXMpIHsgdGhpcy5zdGF0dXMuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fc3RhdHVzISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8UXVlc3Rpb25uYWlyZVN0YXR1c0NvZGVUeXBlPihzb3VyY2UuX3N0YXR1cyBhcyBQYXJ0aWFsPGZoaXIuRmhpckNvZGU+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGF0ZSddKSB7IHRoaXMuZGF0ZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5kYXRlfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19kYXRlJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZGF0ZSkgeyB0aGlzLmRhdGUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZGF0ZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRhdGUgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoc291cmNlLl9kYXRlIGFzIFBhcnRpYWw8Zmhpci5GaGlyRGF0ZVRpbWVBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3B1Ymxpc2hlciddKSB7IHRoaXMucHVibGlzaGVyID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5wdWJsaXNoZXJ9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3B1Ymxpc2hlciddKSB7XHJcbiAgICAgIGlmICh0aGlzLnB1Ymxpc2hlcikgeyB0aGlzLnB1Ymxpc2hlci5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9wdWJsaXNoZXIhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5wdWJsaXNoZXIgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fcHVibGlzaGVyIGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd0ZWxlY29tJ10pIHsgdGhpcy50ZWxlY29tID0gc291cmNlLnRlbGVjb20ubWFwKCh4KSA9PiBuZXcgZmhpci5Db250YWN0UG9pbnQoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy50ZWxlY29tID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ3N1YmplY3RUeXBlJ10pIHsgdGhpcy5zdWJqZWN0VHlwZSA9IHNvdXJjZS5zdWJqZWN0VHlwZS5tYXAoKHgpID0+IG5ldyBmaGlyLkZoaXJDb2RlKHt2YWx1ZTogeH0pKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3ViamVjdFR5cGUgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3N1YmplY3RUeXBlJ10pIHtcclxuICAgICAgc291cmNlLl9zdWJqZWN0VHlwZS5mb3JFYWNoKCh4LGkpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5zdWJqZWN0VHlwZS5sZW5ndGggPj0gaSkgeyBpZiAoeCkgeyB0aGlzLnN1YmplY3RUeXBlW2ldLmFkZEV4dGVuZGVkUHJvcGVydGllcyh4KTsgfSB9XHJcbiAgICAgICAgZWxzZSB7IGlmICh4KSB7IHRoaXMuc3ViamVjdFR5cGUucHVzaChuZXcgZmhpci5GaGlyQ29kZSh4IGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZUFyZ3M+KSk7IH0gfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2dyb3VwJ10pIHsgdGhpcy5ncm91cCA9IG5ldyBmaGlyLlF1ZXN0aW9ubmFpcmVHcm91cChzb3VyY2UuZ3JvdXApOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5ncm91cCA9IG51bGw7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdRdWVzdGlvbm5haXJlJyB9XHJcbiAgICB0aGlzLnZSUygncmVzb3VyY2VUeXBlJyxleHApXHJcbiAgICB0aGlzLnZPQSgnaWRlbnRpZmllcicsZXhwKVxyXG4gICAgdGhpcy52T1MoJ3ZlcnNpb24nLGV4cClcclxuICAgIHRoaXMudlJTVignc3RhdHVzJyxleHAsJ1F1ZXN0aW9ubmFpcmVTdGF0dXMnLFF1ZXN0aW9ubmFpcmVTdGF0dXNWc1ZhbGlkYXRpb24sJ3InKVxyXG4gICAgdGhpcy52T1MoJ2RhdGUnLGV4cClcclxuICAgIHRoaXMudk9TKCdwdWJsaXNoZXInLGV4cClcclxuICAgIHRoaXMudk9BKCd0ZWxlY29tJyxleHApXHJcbiAgICB0aGlzLnZPQVYoJ3N1YmplY3RUeXBlJyxleHAsJ1Jlc291cmNlVHlwZXMnLFJlc291cmNlVHlwZXNWc1ZhbGlkYXRpb24sJ3InKVxyXG4gICAgdGhpcy52UlMoJ2dyb3VwJyxleHApXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4iXX0=