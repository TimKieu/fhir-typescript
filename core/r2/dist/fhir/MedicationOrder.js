// <auto-generated/>
// Contents of: hl7.fhir.r2.core version: 1.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: MedicationOrder
import * as fhir from '../fhir.js';
// @ts-ignore
import { MedicationOrderStatusVsValidation } from '../fhirValueSets/MedicationOrderStatusVsValidation.js';
/**
 * Indicates how the medication is to be used by the patient.
 */
export class MedicationOrderDosageInstruction extends fhir.BackboneElement {
    /**
     * Default constructor for MedicationOrderDosageInstruction - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['text']) {
            this.text = new fhir.FhirString({ value: source.text });
        }
        if (source['_text']) {
            if (this.text) {
                this.text.addExtendedProperties(source._text);
            }
            else {
                this.text = new fhir.FhirString(source._text);
            }
        }
        if (source['additionalInstructions']) {
            this.additionalInstructions = new fhir.CodeableConcept(source.additionalInstructions);
        }
        if (source['timing']) {
            this.timing = new fhir.Timing(source.timing);
        }
        if (source['asNeeded']) {
            this.asNeeded = source.asNeeded;
        }
        else if (source['asNeededBoolean']) {
            this.asNeeded = new fhir.FhirBoolean({ value: source.asNeededBoolean });
        }
        else if (source['asNeededCodeableConcept']) {
            this.asNeeded = new fhir.CodeableConcept(source.asNeededCodeableConcept);
        }
        if (source['site']) {
            this.site = source.site;
        }
        else if (source['siteCodeableConcept']) {
            this.site = new fhir.CodeableConcept(source.siteCodeableConcept);
        }
        else if (source['siteReference']) {
            this.site = new fhir.Reference(source.siteReference);
        }
        if (source['route']) {
            this.route = new fhir.CodeableConcept(source.route);
        }
        if (source['method']) {
            this.method = new fhir.CodeableConcept(source.method);
        }
        if (source['dose']) {
            this.dose = source.dose;
        }
        else if (source['doseRange']) {
            this.dose = new fhir.Range(source.doseRange);
        }
        else if (source['doseQuantity']) {
            this.dose = new fhir.Quantity(source.doseQuantity);
        }
        if (source['rate']) {
            this.rate = source.rate;
        }
        else if (source['rateRatio']) {
            this.rate = new fhir.Ratio(source.rateRatio);
        }
        else if (source['rateRange']) {
            this.rate = new fhir.Range(source.rateRange);
        }
        if (source['maxDosePerPeriod']) {
            this.maxDosePerPeriod = new fhir.Ratio(source.maxDosePerPeriod);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicationOrder.dosageInstruction';
        }
        this.vOS('text', exp);
        this.vOS('additionalInstructions', exp);
        this.vOS('timing', exp);
        this.vOS('asNeeded', exp);
        this.vOS('site', exp);
        this.vOS('route', exp);
        this.vOS('method', exp);
        this.vOS('dose', exp);
        this.vOS('rate', exp);
        this.vOS('maxDosePerPeriod', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicationOrderDosageInstruction._fts_dataType = 'MedicationOrderDosageInstruction';
/**
 * Internal flag to properly serialize choice-type element MedicationOrder.dosageInstruction.asNeeded[x]
 */
MedicationOrderDosageInstruction._fts_asNeededIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element MedicationOrder.dosageInstruction.site[x]
 */
MedicationOrderDosageInstruction._fts_siteIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element MedicationOrder.dosageInstruction.dose[x]
 */
MedicationOrderDosageInstruction._fts_doseIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element MedicationOrder.dosageInstruction.rate[x]
 */
MedicationOrderDosageInstruction._fts_rateIsChoice = true;
/**
 * Indicates the specific details for the dispense or medication supply part of a medication order (also known as a Medication Prescription).  Note that this information is NOT always sent with the order.  There may be in some settings (e.g. hospitals) institutional or system support for completing the dispense details in the pharmacy department.
 */
export class MedicationOrderDispenseRequest extends fhir.BackboneElement {
    /**
     * Default constructor for MedicationOrderDispenseRequest - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['medication']) {
            this.medication = source.medication;
        }
        else if (source['medicationCodeableConcept']) {
            this.medication = new fhir.CodeableConcept(source.medicationCodeableConcept);
        }
        else if (source['medicationReference']) {
            this.medication = new fhir.Reference(source.medicationReference);
        }
        if (source['validityPeriod']) {
            this.validityPeriod = new fhir.Period(source.validityPeriod);
        }
        if (source['numberOfRepeatsAllowed']) {
            this.numberOfRepeatsAllowed = new fhir.FhirPositiveInt({ value: source.numberOfRepeatsAllowed });
        }
        if (source['_numberOfRepeatsAllowed']) {
            if (this.numberOfRepeatsAllowed) {
                this.numberOfRepeatsAllowed.addExtendedProperties(source._numberOfRepeatsAllowed);
            }
            else {
                this.numberOfRepeatsAllowed = new fhir.FhirPositiveInt(source._numberOfRepeatsAllowed);
            }
        }
        if (source['quantity']) {
            this.quantity = new fhir.Quantity(source.quantity);
        }
        if (source['expectedSupplyDuration']) {
            this.expectedSupplyDuration = new fhir.Quantity(source.expectedSupplyDuration);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicationOrder.dispenseRequest';
        }
        this.vOS('medication', exp);
        this.vOS('validityPeriod', exp);
        this.vOS('numberOfRepeatsAllowed', exp);
        this.vOS('quantity', exp);
        this.vOS('expectedSupplyDuration', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicationOrderDispenseRequest._fts_dataType = 'MedicationOrderDispenseRequest';
/**
 * Internal flag to properly serialize choice-type element MedicationOrder.dispenseRequest.medication[x]
 */
MedicationOrderDispenseRequest._fts_medicationIsChoice = true;
/**
 * Indicates whether or not substitution can or should be part of the dispense. In some cases substitution must happen, in other cases substitution must not happen, and in others it does not matter. This block explains the prescriber's intent. If nothing is specified substitution may be done.
 */
export class MedicationOrderSubstitution extends fhir.BackboneElement {
    /**
     * Default constructor for MedicationOrderSubstitution - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['type']) {
            this.type = new fhir.CodeableConcept(source.type);
        }
        else {
            this.type = null;
        }
        if (source['reason']) {
            this.reason = new fhir.CodeableConcept(source.reason);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicationOrder.substitution';
        }
        this.vRS('type', exp);
        this.vOS('reason', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicationOrderSubstitution._fts_dataType = 'MedicationOrderSubstitution';
/**
 * An order for both supply of the medication and the instructions for administration of the medication to a patient. The resource is called "MedicationOrder" rather than "MedicationPrescription" to generalize the use across inpatient and outpatient settings as well as for care plans, etc.
 */
export class MedicationOrder extends fhir.DomainResource {
    /**
     * Default constructor for MedicationOrder - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'MedicationOrder';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['dateWritten']) {
            this.dateWritten = new fhir.FhirDateTime({ value: source.dateWritten });
        }
        if (source['_dateWritten']) {
            if (this.dateWritten) {
                this.dateWritten.addExtendedProperties(source._dateWritten);
            }
            else {
                this.dateWritten = new fhir.FhirDateTime(source._dateWritten);
            }
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['dateEnded']) {
            this.dateEnded = new fhir.FhirDateTime({ value: source.dateEnded });
        }
        if (source['_dateEnded']) {
            if (this.dateEnded) {
                this.dateEnded.addExtendedProperties(source._dateEnded);
            }
            else {
                this.dateEnded = new fhir.FhirDateTime(source._dateEnded);
            }
        }
        if (source['reasonEnded']) {
            this.reasonEnded = new fhir.CodeableConcept(source.reasonEnded);
        }
        if (source['patient']) {
            this.patient = new fhir.Reference(source.patient);
        }
        if (source['prescriber']) {
            this.prescriber = new fhir.Reference(source.prescriber);
        }
        if (source['encounter']) {
            this.encounter = new fhir.Reference(source.encounter);
        }
        if (source['reason']) {
            this.reason = source.reason;
        }
        else if (source['reasonCodeableConcept']) {
            this.reason = new fhir.CodeableConcept(source.reasonCodeableConcept);
        }
        else if (source['reasonReference']) {
            this.reason = new fhir.Reference(source.reasonReference);
        }
        if (source['note']) {
            this.note = new fhir.FhirString({ value: source.note });
        }
        if (source['_note']) {
            if (this.note) {
                this.note.addExtendedProperties(source._note);
            }
            else {
                this.note = new fhir.FhirString(source._note);
            }
        }
        if (source['medication']) {
            this.medication = source.medication;
        }
        else if (source['medicationCodeableConcept']) {
            this.medication = new fhir.CodeableConcept(source.medicationCodeableConcept);
        }
        else if (source['medicationReference']) {
            this.medication = new fhir.Reference(source.medicationReference);
        }
        else {
            this.medication = null;
        }
        if (source['dosageInstruction']) {
            this.dosageInstruction = source.dosageInstruction.map((x) => new fhir.MedicationOrderDosageInstruction(x));
        }
        else {
            this.dosageInstruction = [];
        }
        if (source['dispenseRequest']) {
            this.dispenseRequest = new fhir.MedicationOrderDispenseRequest(source.dispenseRequest);
        }
        if (source['substitution']) {
            this.substitution = new fhir.MedicationOrderSubstitution(source.substitution);
        }
        if (source['priorPrescription']) {
            this.priorPrescription = new fhir.Reference(source.priorPrescription);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicationOrder';
        }
        this.vRS('resourceType', exp);
        this.vOA('identifier', exp);
        this.vOS('dateWritten', exp);
        this.vOSV('status', exp, 'MedicationOrderStatus', MedicationOrderStatusVsValidation, 'r');
        this.vOS('dateEnded', exp);
        this.vOS('reasonEnded', exp);
        this.vOS('patient', exp);
        this.vOS('prescriber', exp);
        this.vOS('encounter', exp);
        this.vOS('reason', exp);
        this.vOS('note', exp);
        this.vRS('medication', exp);
        this.vOA('dosageInstruction', exp);
        this.vOS('dispenseRequest', exp);
        this.vOS('substitution', exp);
        this.vOS('priorPrescription', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicationOrder._fts_dataType = 'MedicationOrder';
/**
 * Internal flag to properly serialize choice-type element MedicationOrder.reason[x]
 */
MedicationOrder._fts_reasonIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element MedicationOrder.medication[x]
 */
MedicationOrder._fts_medicationIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVkaWNhdGlvbk9yZGVyLmpzIiwic291cmNlUm9vdCI6Ii4vc3JjLyIsInNvdXJjZXMiOlsiZmhpci9NZWRpY2F0aW9uT3JkZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CO0FBQ3BCLCtDQUErQztBQUMvQyxrQ0FBa0M7QUFDbEMsaUNBQWlDO0FBRWpDLE9BQU8sS0FBSyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBSW5DLGFBQWE7QUFDYixPQUFPLEVBQUUsaUNBQWlDLEVBQUUsTUFBTSx1REFBdUQsQ0FBQztBQW1GMUc7O0dBRUc7QUFDSCxNQUFNLE9BQU8sZ0NBQWlDLFNBQVEsSUFBSSxDQUFDLGVBQWU7SUE2RHhFOztPQUVHO0lBQ0gsWUFBWSxTQUF1RCxFQUFFLEVBQUUsVUFBc0MsRUFBRTtRQUM3RyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLElBQUksRUFBQyxDQUFDLENBQUM7U0FBRTtRQUM5RSxJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUNuQixJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUU7Z0JBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsS0FBTSxDQUFDLENBQUM7YUFBRTtpQkFDN0Q7Z0JBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLEtBQXFDLENBQUMsQ0FBQzthQUFFO1NBQ3hGO1FBQ0QsSUFBSSxNQUFNLENBQUMsd0JBQXdCLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxzQkFBc0IsR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLHNCQUFzQixDQUFDLENBQUM7U0FBRTtR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R0FBVSxpQkFBaUIsQ0FBQztBQXlDekU7O0dBRUc7QUFDdUIsbUNBQW1CLEdBQVEsSUFBSSxDQUFDO0FBUzFEOztHQUVHO0FBQ3VCLHVDQUF1QixHQUFRLElBQUksQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDxhdXRvLWdlbmVyYXRlZC8+XHJcbi8vIENvbnRlbnRzIG9mOiBobDcuZmhpci5yMi5jb3JlIHZlcnNpb246IDEuMC4yXHJcbi8vIE1pbmltdW0gVHlwZVNjcmlwdCBWZXJzaW9uOiAzLjdcclxuLy8gRkhJUiBSZXNvdXJjZTogTWVkaWNhdGlvbk9yZGVyXHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBNZWRpY2F0aW9uT3JkZXJTdGF0dXNDb2RlcywgIE1lZGljYXRpb25PcmRlclN0YXR1c0NvZGVUeXBlIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9NZWRpY2F0aW9uT3JkZXJTdGF0dXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTWVkaWNhdGlvbk9yZGVyU3RhdHVzVnNWYWxpZGF0aW9uIH0gZnJvbSAnLi4vZmhpclZhbHVlU2V0cy9NZWRpY2F0aW9uT3JkZXJTdGF0dXNWc1ZhbGlkYXRpb24uanMnO1xyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgTWVkaWNhdGlvbk9yZGVyRG9zYWdlSW5zdHJ1Y3Rpb24gdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVkaWNhdGlvbk9yZGVyRG9zYWdlSW5zdHJ1Y3Rpb25BcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBGcmVlIHRleHQgZG9zYWdlIGluc3RydWN0aW9ucyBjYW4gYmUgdXNlZCBmb3IgY2FzZXMgd2hlcmUgdGhlIGluc3RydWN0aW9ucyBhcmUgdG9vIGNvbXBsZXggdG8gY29kZS4gIFRoZSBjb250ZW50IG9mIHRoaXMgYXR0cmlidXRlIGRvZXMgbm90IGluY2x1ZGUgdGhlIG5hbWUgb3IgZGVzY3JpcHRpb24gb2YgdGhlIG1lZGljYXRpb24uIFdoZW4gY29kZWQgaW5zdHJ1Y3Rpb25zIGFyZSBwcmVzZW50LCB0aGUgZnJlZSB0ZXh0IGluc3RydWN0aW9ucyBtYXkgc3RpbGwgYmUgcHJlc2VudCBmb3IgZGlzcGxheSB0byBodW1hbnMgdGFraW5nIG9yIGFkbWluaXN0ZXJpbmcgdGhlIG1lZGljYXRpb24uIEl0IGlzIGV4cGVjdGVkIHRoYXQgdGhlIHRleHQgaW5zdHJ1Y3Rpb25zIHdpbGwgYWx3YXlzIGJlIHBvcHVsYXRlZC4gIElmIHRoZSBkb3NhZ2UudGltaW5nIGF0dHJpYnV0ZSBpcyBhbHNvIHBvcHVsYXRlZCwgdGhlbiB0aGUgZG9zYWdlLnRleHQgc2hvdWxkIHJlZmxlY3QgdGhlIHNhbWUgaW5mb3JtYXRpb24gYXMgdGhlIHRpbWluZy5cclxuICAgKi9cclxuICB0ZXh0PzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE1lZGljYXRpb25PcmRlci5kb3NhZ2VJbnN0cnVjdGlvbi50ZXh0XHJcbiAgICovXHJcbiAgX3RleHQ/OmZoaXIuRmhpckVsZW1lbnRBcmdzO1xyXG4gIC8qKlxyXG4gICAqIEFkZGl0aW9uYWwgaW5zdHJ1Y3Rpb25zIHN1Y2ggYXMgXCJTd2FsbG93IHdpdGggcGxlbnR5IG9mIHdhdGVyXCIgd2hpY2ggbWF5IG9yIG1heSBub3QgYmUgY29kZWQuXHJcbiAgICovXHJcbiAgYWRkaXRpb25hbEluc3RydWN0aW9ucz86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRpbWluZyBzY2hlZHVsZSBmb3IgZ2l2aW5nIHRoZSBtZWRpY2F0aW9uIHRvIHRoZSBwYXRpZW50LiBUaGUgU2NoZWR1bGUgZGF0YSB0eXBlIGFsbG93cyBtYW55IGRpZmZlcmVudCBleHByZXNzaW9ucy4gRm9yIGV4YW1wbGU6IFwiRXZlcnkgOCBob3Vyc1wiOyBcIlRocmVlIHRpbWVzIGEgZGF5XCI7IFwiMS8yIGFuIGhvdXIgYmVmb3JlIGJyZWFrZmFzdCBmb3IgMTAgZGF5cyBmcm9tIDIzLURlYyAyMDExOlwiOyBcIjE1IE9jdCAyMDEzLCAxNyBPY3QgMjAxMyBhbmQgMSBOb3YgMjAxM1wiLlxyXG4gICAqL1xyXG4gIHRpbWluZz86IGZoaXIuVGltaW5nQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHdoZXRoZXIgdGhlIE1lZGljYXRpb24gaXMgb25seSB0YWtlbiB3aGVuIG5lZWRlZCB3aXRoaW4gYSBzcGVjaWZpYyBkb3Npbmcgc2NoZWR1bGUgKEJvb2xlYW4gb3B0aW9uKSwgb3IgaXQgaW5kaWNhdGVzIHRoZSBwcmVjb25kaXRpb24gZm9yIHRha2luZyB0aGUgTWVkaWNhdGlvbiAoQ29kZWFibGVDb25jZXB0KS5cclxuICAgKi9cclxuICBhc05lZWRlZD86IGZoaXIuRmhpckJvb2xlYW58Zmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB3aGV0aGVyIHRoZSBNZWRpY2F0aW9uIGlzIG9ubHkgdGFrZW4gd2hlbiBuZWVkZWQgd2l0aGluIGEgc3BlY2lmaWMgZG9zaW5nIHNjaGVkdWxlIChCb29sZWFuIG9wdGlvbiksIG9yIGl0IGluZGljYXRlcyB0aGUgcHJlY29uZGl0aW9uIGZvciB0YWtpbmcgdGhlIE1lZGljYXRpb24gKENvZGVhYmxlQ29uY2VwdCkuXHJcbiAgICovXHJcbiAgYXNOZWVkZWRCb29sZWFuPzogZmhpci5GaGlyQm9vbGVhbnxib29sZWFufHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGUgTWVkaWNhdGlvbiBpcyBvbmx5IHRha2VuIHdoZW4gbmVlZGVkIHdpdGhpbiBhIHNwZWNpZmljIGRvc2luZyBzY2hlZHVsZSAoQm9vbGVhbiBvcHRpb24pLCBvciBpdCBpbmRpY2F0ZXMgdGhlIHByZWNvbmRpdGlvbiBmb3IgdGFraW5nIHRoZSBNZWRpY2F0aW9uIChDb2RlYWJsZUNvbmNlcHQpLlxyXG4gICAqL1xyXG4gIGFzTmVlZGVkQ29kZWFibGVDb25jZXB0PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGNvZGVkIHNwZWNpZmljYXRpb24gb2YgdGhlIGFuYXRvbWljIHNpdGUgd2hlcmUgdGhlIG1lZGljYXRpb24gZmlyc3QgZW50ZXJzIHRoZSBib2R5LlxyXG4gICAqL1xyXG4gIHNpdGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBjb2RlZCBzcGVjaWZpY2F0aW9uIG9mIHRoZSBhbmF0b21pYyBzaXRlIHdoZXJlIHRoZSBtZWRpY2F0aW9uIGZpcnN0IGVudGVycyB0aGUgYm9keS5cclxuICAgKi9cclxuICBzaXRlQ29kZWFibGVDb25jZXB0PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGNvZGVkIHNwZWNpZmljYXRpb24gb2YgdGhlIGFuYXRvbWljIHNpdGUgd2hlcmUgdGhlIG1lZGljYXRpb24gZmlyc3QgZW50ZXJzIHRoZSBib2R5LlxyXG4gICAqL1xyXG4gIHNpdGVSZWZlcmVuY2U/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgY29kZSBzcGVjaWZ5aW5nIHRoZSByb3V0ZSBvciBwaHlzaW9sb2dpY2FsIHBhdGggb2YgYWRtaW5pc3RyYXRpb24gb2YgYSB0aGVyYXBldXRpYyBhZ2VudCBpbnRvIG9yIG9udG8gYSBwYXRpZW50J3MgYm9keS5cclxuICAgKi9cclxuICByb3V0ZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBjb2RlZCB2YWx1ZSBpbmRpY2F0aW5nIHRoZSBtZXRob2QgYnkgd2hpY2ggdGhlIG1lZGljYXRpb24gaXMgaW50cm9kdWNlZCBpbnRvIG9yIG9udG8gdGhlIGJvZHkuIE1vc3QgY29tbW9ubHkgdXNlZCBmb3IgaW5qZWN0aW9ucy4gIEZvciBleGFtcGxlcywgU2xvdyBQdXNoOyBEZWVwIElWLlxyXG4gICAqL1xyXG4gIG1ldGhvZD86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGFtb3VudCBvZiB0aGVyYXBldXRpYyBvciBvdGhlciBzdWJzdGFuY2UgZ2l2ZW4gYXQgb25lIGFkbWluaXN0cmF0aW9uIGV2ZW50LlxyXG4gICAqL1xyXG4gIGRvc2U/OiBmaGlyLlJhbmdlfGZoaXIuUXVhbnRpdHl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBhbW91bnQgb2YgdGhlcmFwZXV0aWMgb3Igb3RoZXIgc3Vic3RhbmNlIGdpdmVuIGF0IG9uZSBhZG1pbmlzdHJhdGlvbiBldmVudC5cclxuICAgKi9cclxuICBkb3NlUmFuZ2U/OiBmaGlyLlJhbmdlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGFtb3VudCBvZiB0aGVyYXBldXRpYyBvciBvdGhlciBzdWJzdGFuY2UgZ2l2ZW4gYXQgb25lIGFkbWluaXN0cmF0aW9uIGV2ZW50LlxyXG4gICAqL1xyXG4gIGRvc2VRdWFudGl0eT86IGZoaXIuUXVhbnRpdHlBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHRoZSBzcGVlZCB3aXRoIHdoaWNoIHRoZSBtZWRpY2F0aW9uIHdhcyBvciB3aWxsIGJlIGludHJvZHVjZWQgaW50byB0aGUgcGF0aWVudC4gVHlwaWNhbGx5IHRoZSByYXRlIGZvciBhbiBpbmZ1c2lvbiBlLmcuIDEwMCBtbCBwZXIgMSBob3VyIG9yIDEwMCBtbC9oci4gIE1heSBhbHNvIGJlIGV4cHJlc3NlZCBhcyBhIHJhdGUgcGVyIHVuaXQgb2YgdGltZSBlLmcuIDUwMCBtbCBwZXIgMiBob3Vycy4gICBDdXJyZW50bHkgd2UgZG8gbm90IHNwZWNpZnkgYSBkZWZhdWx0IG9mICcxJyBpbiB0aGUgZGVub21pbmF0b3IsIGJ1dCB0aGlzIGlzIGJlaW5nIGRpc2N1c3NlZC4gT3RoZXIgZXhhbXBsZXM6IDIwMCBtY2cvbWluIG9yIDIwMCBtY2cvMSBtaW51dGU7IDEgbGl0ZXIvOCBob3Vycy5cclxuICAgKi9cclxuICByYXRlPzogZmhpci5SYXRpb3xmaGlyLlJhbmdlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHRoZSBzcGVlZCB3aXRoIHdoaWNoIHRoZSBtZWRpY2F0aW9uIHdhcyBvciB3aWxsIGJlIGludHJvZHVjZWQgaW50byB0aGUgcGF0aWVudC4gVHlwaWNhbGx5IHRoZSByYXRlIGZvciBhbiBpbmZ1c2lvbiBlLmcuIDEwMCBtbCBwZXIgMSBob3VyIG9yIDEwMCBtbC9oci4gIE1heSBhbHNvIGJlIGV4cHJlc3NlZCBhcyBhIHJhdGUgcGVyIHVuaXQgb2YgdGltZSBlLmcuIDUwMCBtbCBwZXIgMiBob3Vycy4gICBDdXJyZW50bHkgd2UgZG8gbm90IHNwZWNpZnkgYSBkZWZhdWx0IG9mICcxJyBpbiB0aGUgZGVub21pbmF0b3IsIGJ1dCB0aGlzIGlzIGJlaW5nIGRpc2N1c3NlZC4gT3RoZXIgZXhhbXBsZXM6IDIwMCBtY2cvbWluIG9yIDIwMCBtY2cvMSBtaW51dGU7IDEgbGl0ZXIvOCBob3Vycy5cclxuICAgKi9cclxuICByYXRlUmF0aW8/OiBmaGlyLlJhdGlvQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgc3BlZWQgd2l0aCB3aGljaCB0aGUgbWVkaWNhdGlvbiB3YXMgb3Igd2lsbCBiZSBpbnRyb2R1Y2VkIGludG8gdGhlIHBhdGllbnQuIFR5cGljYWxseSB0aGUgcmF0ZSBmb3IgYW4gaW5mdXNpb24gZS5nLiAxMDAgbWwgcGVyIDEgaG91ciBvciAxMDAgbWwvaHIuICBNYXkgYWxzbyBiZSBleHByZXNzZWQgYXMgYSByYXRlIHBlciB1bml0IG9mIHRpbWUgZS5nLiA1MDAgbWwgcGVyIDIgaG91cnMuICAgQ3VycmVudGx5IHdlIGRvIG5vdCBzcGVjaWZ5IGEgZGVmYXVsdCBvZiAnMScgaW4gdGhlIGRlbm9taW5hdG9yLCBidXQgdGhpcyBpcyBiZWluZyBkaXNjdXNzZWQuIE90aGVyIGV4YW1wbGVzOiAyMDAgbWNnL21pbiBvciAyMDAgbWNnLzEgbWludXRlOyAxIGxpdGVyLzggaG91cnMuXHJcbiAgICovXHJcbiAgcmF0ZVJhbmdlPzogZmhpci5SYW5nZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBtYXhpbXVtIHRvdGFsIHF1YW50aXR5IG9mIGEgdGhlcmFwZXV0aWMgc3Vic3RhbmNlIHRoYXQgbWF5IGJlIGFkbWluaXN0ZXJlZCB0byBhIHN1YmplY3Qgb3ZlciB0aGUgcGVyaW9kIG9mIHRpbWUuICBGb3IgZXhhbXBsZSwgMTAwMG1nIGluIDI0IGhvdXJzLlxyXG4gICAqL1xyXG4gIG1heERvc2VQZXJQZXJpb2Q/OiBmaGlyLlJhdGlvQXJnc3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbmRpY2F0ZXMgaG93IHRoZSBtZWRpY2F0aW9uIGlzIHRvIGJlIHVzZWQgYnkgdGhlIHBhdGllbnQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNhdGlvbk9yZGVyRG9zYWdlSW5zdHJ1Y3Rpb24gZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdNZWRpY2F0aW9uT3JkZXJEb3NhZ2VJbnN0cnVjdGlvbic7XHJcbiAgLyoqXHJcbiAgICogRnJlZSB0ZXh0IGRvc2FnZSBpbnN0cnVjdGlvbnMgY2FuIGJlIHVzZWQgZm9yIGNhc2VzIHdoZXJlIHRoZSBpbnN0cnVjdGlvbnMgYXJlIHRvbyBjb21wbGV4IHRvIGNvZGUuICBUaGUgY29udGVudCBvZiB0aGlzIGF0dHJpYnV0ZSBkb2VzIG5vdCBpbmNsdWRlIHRoZSBuYW1lIG9yIGRlc2NyaXB0aW9uIG9mIHRoZSBtZWRpY2F0aW9uLiBXaGVuIGNvZGVkIGluc3RydWN0aW9ucyBhcmUgcHJlc2VudCwgdGhlIGZyZWUgdGV4dCBpbnN0cnVjdGlvbnMgbWF5IHN0aWxsIGJlIHByZXNlbnQgZm9yIGRpc3BsYXkgdG8gaHVtYW5zIHRha2luZyBvciBhZG1pbmlzdGVyaW5nIHRoZSBtZWRpY2F0aW9uLiBJdCBpcyBleHBlY3RlZCB0aGF0IHRoZSB0ZXh0IGluc3RydWN0aW9ucyB3aWxsIGFsd2F5cyBiZSBwb3B1bGF0ZWQuICBJZiB0aGUgZG9zYWdlLnRpbWluZyBhdHRyaWJ1dGUgaXMgYWxzbyBwb3B1bGF0ZWQsIHRoZW4gdGhlIGRvc2FnZS50ZXh0IHNob3VsZCByZWZsZWN0IHRoZSBzYW1lIGluZm9ybWF0aW9uIGFzIHRoZSB0aW1pbmcuXHJcbiAgICovXHJcbiAgcHVibGljIHRleHQ/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFkZGl0aW9uYWwgaW5zdHJ1Y3Rpb25zIHN1Y2ggYXMgXCJTd2FsbG93IHdpdGggcGxlbnR5IG9mIHdhdGVyXCIgd2hpY2ggbWF5IG9yIG1heSBub3QgYmUgY29kZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGFkZGl0aW9uYWxJbnN0cnVjdGlvbnM/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRpbWluZyBzY2hlZHVsZSBmb3IgZ2l2aW5nIHRoZSBtZWRpY2F0aW9uIHRvIHRoZSBwYXRpZW50LiBUaGUgU2NoZWR1bGUgZGF0YSB0eXBlIGFsbG93cyBtYW55IGRpZmZlcmVudCBleHByZXNzaW9ucy4gRm9yIGV4YW1wbGU6IFwiRXZlcnkgOCBob3Vyc1wiOyBcIlRocmVlIHRpbWVzIGEgZGF5XCI7IFwiMS8yIGFuIGhvdXIgYmVmb3JlIGJyZWFrZmFzdCBmb3IgMTAgZGF5cyBmcm9tIDIzLURlYyAyMDExOlwiOyBcIjE1IE9jdCAyMDEzLCAxNyBPY3QgMjAxMyBhbmQgMSBOb3YgMjAxM1wiLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0aW1pbmc/OiBmaGlyLlRpbWluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHdoZXRoZXIgdGhlIE1lZGljYXRpb24gaXMgb25seSB0YWtlbiB3aGVuIG5lZWRlZCB3aXRoaW4gYSBzcGVjaWZpYyBkb3Npbmcgc2NoZWR1bGUgKEJvb2xlYW4gb3B0aW9uKSwgb3IgaXQgaW5kaWNhdGVzIHRoZSBwcmVjb25kaXRpb24gZm9yIHRha2luZyB0aGUgTWVkaWNhdGlvbiAoQ29kZWFibGVDb25jZXB0KS5cclxuICAgKi9cclxuICBwdWJsaWMgYXNOZWVkZWQ/OiAoZmhpci5GaGlyQm9vbGVhbnxmaGlyLkNvZGVhYmxlQ29uY2VwdCl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgTWVkaWNhdGlvbk9yZGVyLmRvc2FnZUluc3RydWN0aW9uLmFzTmVlZGVkW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX2FzTmVlZGVkSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogQSBjb2RlZCBzcGVjaWZpY2F0aW9uIG9mIHRoZSBhbmF0b21pYyBzaXRlIHdoZXJlIHRoZSBtZWRpY2F0aW9uIGZpcnN0IGVudGVycyB0aGUgYm9keS5cclxuICAgKi9cclxuICBwdWJsaWMgc2l0ZT86IChmaGlyLkNvZGVhYmxlQ29uY2VwdHxmaGlyLlJlZmVyZW5jZSl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgTWVkaWNhdGlvbk9yZGVyLmRvc2FnZUluc3RydWN0aW9uLnNpdGVbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfc2l0ZUlzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIEEgY29kZSBzcGVjaWZ5aW5nIHRoZSByb3V0ZSBvciBwaHlzaW9sb2dpY2FsIHBhdGggb2YgYWRtaW5pc3RyYXRpb24gb2YgYSB0aGVyYXBldXRpYyBhZ2VudCBpbnRvIG9yIG9udG8gYSBwYXRpZW50J3MgYm9keS5cclxuICAgKi9cclxuICBwdWJsaWMgcm91dGU/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBjb2RlZCB2YWx1ZSBpbmRpY2F0aW5nIHRoZSBtZXRob2QgYnkgd2hpY2ggdGhlIG1lZGljYXRpb24gaXMgaW50cm9kdWNlZCBpbnRvIG9yIG9udG8gdGhlIGJvZHkuIE1vc3QgY29tbW9ubHkgdXNlZCBmb3IgaW5qZWN0aW9ucy4gIEZvciBleGFtcGxlcywgU2xvdyBQdXNoOyBEZWVwIElWLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtZXRob2Q/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGFtb3VudCBvZiB0aGVyYXBldXRpYyBvciBvdGhlciBzdWJzdGFuY2UgZ2l2ZW4gYXQgb25lIGFkbWluaXN0cmF0aW9uIGV2ZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkb3NlPzogKGZoaXIuUmFuZ2V8Zmhpci5RdWFudGl0eSl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgTWVkaWNhdGlvbk9yZGVyLmRvc2FnZUluc3RydWN0aW9uLmRvc2VbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfZG9zZUlzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgdGhlIHNwZWVkIHdpdGggd2hpY2ggdGhlIG1lZGljYXRpb24gd2FzIG9yIHdpbGwgYmUgaW50cm9kdWNlZCBpbnRvIHRoZSBwYXRpZW50LiBUeXBpY2FsbHkgdGhlIHJhdGUgZm9yIGFuIGluZnVzaW9uIGUuZy4gMTAwIG1sIHBlciAxIGhvdXIgb3IgMTAwIG1sL2hyLiAgTWF5IGFsc28gYmUgZXhwcmVzc2VkIGFzIGEgcmF0ZSBwZXIgdW5pdCBvZiB0aW1lIGUuZy4gNTAwIG1sIHBlciAyIGhvdXJzLiAgIEN1cnJlbnRseSB3ZSBkbyBub3Qgc3BlY2lmeSBhIGRlZmF1bHQgb2YgJzEnIGluIHRoZSBkZW5vbWluYXRvciwgYnV0IHRoaXMgaXMgYmVpbmcgZGlzY3Vzc2VkLiBPdGhlciBleGFtcGxlczogMjAwIG1jZy9taW4gb3IgMjAwIG1jZy8xIG1pbnV0ZTsgMSBsaXRlci84IGhvdXJzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByYXRlPzogKGZoaXIuUmF0aW98Zmhpci5SYW5nZSl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgTWVkaWNhdGlvbk9yZGVyLmRvc2FnZUluc3RydWN0aW9uLnJhdGVbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfcmF0ZUlzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBtYXhpbXVtIHRvdGFsIHF1YW50aXR5IG9mIGEgdGhlcmFwZXV0aWMgc3Vic3RhbmNlIHRoYXQgbWF5IGJlIGFkbWluaXN0ZXJlZCB0byBhIHN1YmplY3Qgb3ZlciB0aGUgcGVyaW9kIG9mIHRpbWUuICBGb3IgZXhhbXBsZSwgMTAwMG1nIGluIDI0IGhvdXJzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtYXhEb3NlUGVyUGVyaW9kPzogZmhpci5SYXRpb3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgTWVkaWNhdGlvbk9yZGVyRG9zYWdlSW5zdHJ1Y3Rpb24gLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxNZWRpY2F0aW9uT3JkZXJEb3NhZ2VJbnN0cnVjdGlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWyd0ZXh0J10pIHsgdGhpcy50ZXh0ID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS50ZXh0fSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ190ZXh0J10pIHtcclxuICAgICAgaWYgKHRoaXMudGV4dCkgeyB0aGlzLnRleHQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fdGV4dCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLnRleHQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fdGV4dCBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnYWRkaXRpb25hbEluc3RydWN0aW9ucyddKSB7IHRoaXMuYWRkaXRpb25hbEluc3RydWN0aW9ucyA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuYWRkaXRpb25hbEluc3RydWN0aW9ucyk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3RpbWluZyddKSB7IHRoaXMudGltaW5nID0gbmV3IGZoaXIuVGltaW5nKHNvdXJjZS50aW1pbmcpOyB9XHJcbiAgICBpZiAoc291cmNlWydhc05lZWRlZCddKSB7IHRoaXMuYXNOZWVkZWQgPSBzb3VyY2UuYXNOZWVkZWQ7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnYXNOZWVkZWRCb29sZWFuJ10pIHsgdGhpcy5hc05lZWRlZCA9IG5ldyBmaGlyLkZoaXJCb29sZWFuKHt2YWx1ZTogc291cmNlLmFzTmVlZGVkQm9vbGVhbn0pOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2FzTmVlZGVkQ29kZWFibGVDb25jZXB0J10pIHsgdGhpcy5hc05lZWRlZCA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UuYXNOZWVkZWRDb2RlYWJsZUNvbmNlcHQpOyB9XHJcbiAgICBpZiAoc291cmNlWydzaXRlJ10pIHsgdGhpcy5zaXRlID0gc291cmNlLnNpdGU7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnc2l0ZUNvZGVhYmxlQ29uY2VwdCddKSB7IHRoaXMuc2l0ZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2Uuc2l0ZUNvZGVhYmxlQ29uY2VwdCk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnc2l0ZVJlZmVyZW5jZSddKSB7IHRoaXMuc2l0ZSA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2Uuc2l0ZVJlZmVyZW5jZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3JvdXRlJ10pIHsgdGhpcy5yb3V0ZSA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2Uucm91dGUpOyB9XHJcbiAgICBpZiAoc291cmNlWydtZXRob2QnXSkgeyB0aGlzLm1ldGhvZCA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UubWV0aG9kKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZG9zZSddKSB7IHRoaXMuZG9zZSA9IHNvdXJjZS5kb3NlOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2Rvc2VSYW5nZSddKSB7IHRoaXMuZG9zZSA9IG5ldyBmaGlyLlJhbmdlKHNvdXJjZS5kb3NlUmFuZ2UpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2Rvc2VRdWFudGl0eSddKSB7IHRoaXMuZG9zZSA9IG5ldyBmaGlyLlF1YW50aXR5KHNvdXJjZS5kb3NlUXVhbnRpdHkpOyB9XHJcbiAgICBpZiAoc291cmNlWydyYXRlJ10pIHsgdGhpcy5yYXRlID0gc291cmNlLnJhdGU7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsncmF0ZVJhdGlvJ10pIHsgdGhpcy5yYXRlID0gbmV3IGZoaXIuUmF0aW8oc291cmNlLnJhdGVSYXRpbyk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsncmF0ZVJhbmdlJ10pIHsgdGhpcy5yYXRlID0gbmV3IGZoaXIuUmFuZ2Uoc291cmNlLnJhdGVSYW5nZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ21heERvc2VQZXJQZXJpb2QnXSkgeyB0aGlzLm1heERvc2VQZXJQZXJpb2QgPSBuZXcgZmhpci5SYXRpbyhzb3VyY2UubWF4RG9zZVBlclBlcmlvZCk7IH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gcGVyZm9ybSBiYXNpYyBtb2RlbCB2YWxpZGF0aW9uIChlLmcuLCBjaGVjayBpZiByZXF1aXJlZCBlbGVtZW50cyBhcmUgcHJlc2VudCkuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRvTW9kZWxWYWxpZGF0aW9uKGV4cDpzdHJpbmcgPSAnJyk6Zmhpci5GdHNJc3N1ZVtdIHtcclxuICAgIGxldCBpc3N1ZXM6Zmhpci5GdHNJc3N1ZVtdID0gc3VwZXIuZG9Nb2RlbFZhbGlkYXRpb24oZXhwKTtcclxuICAgIGlmIChleHAgPT09ICcnKSB7IGV4cCA9ICdNZWRpY2F0aW9uT3JkZXIuZG9zYWdlSW5zdHJ1Y3Rpb24nIH1cclxuICAgIHRoaXMudk9TKCd0ZXh0JyxleHApXHJcbiAgICB0aGlzLnZPUygnYWRkaXRpb25hbEluc3RydWN0aW9ucycsZXhwKVxyXG4gICAgdGhpcy52T1MoJ3RpbWluZycsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2FzTmVlZGVkJyxleHApXHJcbiAgICB0aGlzLnZPUygnc2l0ZScsZXhwKVxyXG4gICAgdGhpcy52T1MoJ3JvdXRlJyxleHApXHJcbiAgICB0aGlzLnZPUygnbWV0aG9kJyxleHApXHJcbiAgICB0aGlzLnZPUygnZG9zZScsZXhwKVxyXG4gICAgdGhpcy52T1MoJ3JhdGUnLGV4cClcclxuICAgIHRoaXMudk9TKCdtYXhEb3NlUGVyUGVyaW9kJyxleHApXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgTWVkaWNhdGlvbk9yZGVyRGlzcGVuc2VSZXF1ZXN0IHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lZGljYXRpb25PcmRlckRpc3BlbnNlUmVxdWVzdEFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgdGhlIG1lZGljYXRpb24gYmVpbmcgYWRtaW5pc3RlcmVkLiBUaGlzIGlzIGEgbGluayB0byBhIHJlc291cmNlIHRoYXQgcmVwcmVzZW50cyB0aGUgbWVkaWNhdGlvbiB3aGljaCBtYXkgYmUgdGhlIGRldGFpbHMgb2YgdGhlIG1lZGljYXRpb24gb3Igc2ltcGx5IGFuIGF0dHJpYnV0ZSBjYXJyeWluZyBhIGNvZGUgdGhhdCBpZGVudGlmaWVzIHRoZSBtZWRpY2F0aW9uIGZyb20gYSBrbm93biBsaXN0IG9mIG1lZGljYXRpb25zLlxyXG4gICAqL1xyXG4gIG1lZGljYXRpb24/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgbWVkaWNhdGlvbiBiZWluZyBhZG1pbmlzdGVyZWQuIFRoaXMgaXMgYSBsaW5rIHRvIGEgcmVzb3VyY2UgdGhhdCByZXByZXNlbnRzIHRoZSBtZWRpY2F0aW9uIHdoaWNoIG1heSBiZSB0aGUgZGV0YWlscyBvZiB0aGUgbWVkaWNhdGlvbiBvciBzaW1wbHkgYW4gYXR0cmlidXRlIGNhcnJ5aW5nIGEgY29kZSB0aGF0IGlkZW50aWZpZXMgdGhlIG1lZGljYXRpb24gZnJvbSBhIGtub3duIGxpc3Qgb2YgbWVkaWNhdGlvbnMuXHJcbiAgICovXHJcbiAgbWVkaWNhdGlvbkNvZGVhYmxlQ29uY2VwdD86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgbWVkaWNhdGlvbiBiZWluZyBhZG1pbmlzdGVyZWQuIFRoaXMgaXMgYSBsaW5rIHRvIGEgcmVzb3VyY2UgdGhhdCByZXByZXNlbnRzIHRoZSBtZWRpY2F0aW9uIHdoaWNoIG1heSBiZSB0aGUgZGV0YWlscyBvZiB0aGUgbWVkaWNhdGlvbiBvciBzaW1wbHkgYW4gYXR0cmlidXRlIGNhcnJ5aW5nIGEgY29kZSB0aGF0IGlkZW50aWZpZXMgdGhlIG1lZGljYXRpb24gZnJvbSBhIGtub3duIGxpc3Qgb2YgbWVkaWNhdGlvbnMuXHJcbiAgICovXHJcbiAgbWVkaWNhdGlvblJlZmVyZW5jZT86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHdoZW4gdGhlIFByZXNjcmlwdGlvbiBiZWNvbWVzIHZhbGlkLCBhbmQgd2hlbiBpdCBjZWFzZXMgdG8gYmUgYSBkaXNwZW5zYWJsZSBQcmVzY3JpcHRpb24uXHJcbiAgICovXHJcbiAgdmFsaWRpdHlQZXJpb2Q/OiBmaGlyLlBlcmlvZEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEFuIGludGVnZXIgaW5kaWNhdGluZyB0aGUgbnVtYmVyIG9mIGFkZGl0aW9uYWwgdGltZXMgKGFrYSByZWZpbGxzIG9yIHJlcGVhdHMpIHRoZSBwYXRpZW50IGNhbiByZWNlaXZlIHRoZSBwcmVzY3JpYmVkIG1lZGljYXRpb24uICAgVXNhZ2UgTm90ZXM6IFRoaXMgaW50ZWdlciBkb2VzIE5PVCBpbmNsdWRlIHRoZSBvcmlnaW5hbCBvcmRlciBkaXNwZW5zZS4gICBUaGlzIG1lYW5zIHRoYXQgaWYgYW4gb3JkZXIgaW5kaWNhdGVzIGRpc3BlbnNlIDMwIHRhYmxldHMgcGx1cyAgXCIzIHJlcGVhdHNcIiwgdGhlbiB0aGUgb3JkZXIgY2FuIGJlIGRpc3BlbnNlZCBhIHRvdGFsIG9mIDQgdGltZXMgYW5kIHRoZSBwYXRpZW50IGNhbiByZWNlaXZlIGEgdG90YWwgb2YgMTIwIHRhYmxldHMuXHJcbiAgICovXHJcbiAgbnVtYmVyT2ZSZXBlYXRzQWxsb3dlZD86IGZoaXIuRmhpclBvc2l0aXZlSW50fG51bWJlcnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE1lZGljYXRpb25PcmRlci5kaXNwZW5zZVJlcXVlc3QubnVtYmVyT2ZSZXBlYXRzQWxsb3dlZFxyXG4gICAqL1xyXG4gIF9udW1iZXJPZlJlcGVhdHNBbGxvd2VkPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgYW1vdW50IHRoYXQgaXMgdG8gYmUgZGlzcGVuc2VkIGZvciBvbmUgZmlsbC5cclxuICAgKi9cclxuICBxdWFudGl0eT86IGZoaXIuUXVhbnRpdHlBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHRoZSBwZXJpb2QgdGltZSBvdmVyIHdoaWNoIHRoZSBzdXBwbGllZCBwcm9kdWN0IGlzIGV4cGVjdGVkIHRvIGJlIHVzZWQsIG9yIHRoZSBsZW5ndGggb2YgdGltZSB0aGUgZGlzcGVuc2UgaXMgZXhwZWN0ZWQgdG8gbGFzdC5cclxuICAgKi9cclxuICBleHBlY3RlZFN1cHBseUR1cmF0aW9uPzogZmhpci5RdWFudGl0eUFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogSW5kaWNhdGVzIHRoZSBzcGVjaWZpYyBkZXRhaWxzIGZvciB0aGUgZGlzcGVuc2Ugb3IgbWVkaWNhdGlvbiBzdXBwbHkgcGFydCBvZiBhIG1lZGljYXRpb24gb3JkZXIgKGFsc28ga25vd24gYXMgYSBNZWRpY2F0aW9uIFByZXNjcmlwdGlvbikuICBOb3RlIHRoYXQgdGhpcyBpbmZvcm1hdGlvbiBpcyBOT1QgYWx3YXlzIHNlbnQgd2l0aCB0aGUgb3JkZXIuICBUaGVyZSBtYXkgYmUgaW4gc29tZSBzZXR0aW5ncyAoZS5nLiBob3NwaXRhbHMpIGluc3RpdHV0aW9uYWwgb3Igc3lzdGVtIHN1cHBvcnQgZm9yIGNvbXBsZXRpbmcgdGhlIGRpc3BlbnNlIGRldGFpbHMgaW4gdGhlIHBoYXJtYWN5IGRlcGFydG1lbnQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNhdGlvbk9yZGVyRGlzcGVuc2VSZXF1ZXN0IGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVkaWNhdGlvbk9yZGVyRGlzcGVuc2VSZXF1ZXN0JztcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHRoZSBtZWRpY2F0aW9uIGJlaW5nIGFkbWluaXN0ZXJlZC4gVGhpcyBpcyBhIGxpbmsgdG8gYSByZXNvdXJjZSB0aGF0IHJlcHJlc2VudHMgdGhlIG1lZGljYXRpb24gd2hpY2ggbWF5IGJlIHRoZSBkZXRhaWxzIG9mIHRoZSBtZWRpY2F0aW9uIG9yIHNpbXBseSBhbiBhdHRyaWJ1dGUgY2FycnlpbmcgYSBjb2RlIHRoYXQgaWRlbnRpZmllcyB0aGUgbWVkaWNhdGlvbiBmcm9tIGEga25vd24gbGlzdCBvZiBtZWRpY2F0aW9ucy5cclxuICAgKi9cclxuICBwdWJsaWMgbWVkaWNhdGlvbj86IChmaGlyLkNvZGVhYmxlQ29uY2VwdHxmaGlyLlJlZmVyZW5jZSl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgTWVkaWNhdGlvbk9yZGVyLmRpc3BlbnNlUmVxdWVzdC5tZWRpY2F0aW9uW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX21lZGljYXRpb25Jc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgd2hlbiB0aGUgUHJlc2NyaXB0aW9uIGJlY29tZXMgdmFsaWQsIGFuZCB3aGVuIGl0IGNlYXNlcyB0byBiZSBhIGRpc3BlbnNhYmxlIFByZXNjcmlwdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgdmFsaWRpdHlQZXJpb2Q/OiBmaGlyLlBlcmlvZHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQW4gaW50ZWdlciBpbmRpY2F0aW5nIHRoZSBudW1iZXIgb2YgYWRkaXRpb25hbCB0aW1lcyAoYWthIHJlZmlsbHMgb3IgcmVwZWF0cykgdGhlIHBhdGllbnQgY2FuIHJlY2VpdmUgdGhlIHByZXNjcmliZWQgbWVkaWNhdGlvbi4gICBVc2FnZSBOb3RlczogVGhpcyBpbnRlZ2VyIGRvZXMgTk9UIGluY2x1ZGUgdGhlIG9yaWdpbmFsIG9yZGVyIGRpc3BlbnNlLiAgIFRoaXMgbWVhbnMgdGhhdCBpZiBhbiBvcmRlciBpbmRpY2F0ZXMgZGlzcGVuc2UgMzAgdGFibGV0cyBwbHVzICBcIjMgcmVwZWF0c1wiLCB0aGVuIHRoZSBvcmRlciBjYW4gYmUgZGlzcGVuc2VkIGEgdG90YWwgb2YgNCB0aW1lcyBhbmQgdGhlIHBhdGllbnQgY2FuIHJlY2VpdmUgYSB0b3RhbCBvZiAxMjAgdGFibGV0cy5cclxuICAgKi9cclxuICBwdWJsaWMgbnVtYmVyT2ZSZXBlYXRzQWxsb3dlZD86IGZoaXIuRmhpclBvc2l0aXZlSW50fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgYW1vdW50IHRoYXQgaXMgdG8gYmUgZGlzcGVuc2VkIGZvciBvbmUgZmlsbC5cclxuICAgKi9cclxuICBwdWJsaWMgcXVhbnRpdHk/OiBmaGlyLlF1YW50aXR5fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHRoZSBwZXJpb2QgdGltZSBvdmVyIHdoaWNoIHRoZSBzdXBwbGllZCBwcm9kdWN0IGlzIGV4cGVjdGVkIHRvIGJlIHVzZWQsIG9yIHRoZSBsZW5ndGggb2YgdGltZSB0aGUgZGlzcGVuc2UgaXMgZXhwZWN0ZWQgdG8gbGFzdC5cclxuICAgKi9cclxuICBwdWJsaWMgZXhwZWN0ZWRTdXBwbHlEdXJhdGlvbj86IGZoaXIuUXVhbnRpdHl8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE1lZGljYXRpb25PcmRlckRpc3BlbnNlUmVxdWVzdCAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE1lZGljYXRpb25PcmRlckRpc3BlbnNlUmVxdWVzdEFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWydtZWRpY2F0aW9uJ10pIHsgdGhpcy5tZWRpY2F0aW9uID0gc291cmNlLm1lZGljYXRpb247IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnbWVkaWNhdGlvbkNvZGVhYmxlQ29uY2VwdCddKSB7IHRoaXMubWVkaWNhdGlvbiA9IG5ldyBmaGlyLkNvZGVhYmxlQ29uY2VwdChzb3VyY2UubWVkaWNhdGlvbkNvZGVhYmxlQ29uY2VwdCk7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnbWVkaWNhdGlvblJlZmVyZW5jZSddKSB7IHRoaXMubWVkaWNhdGlvbiA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UubWVkaWNhdGlvblJlZmVyZW5jZSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3ZhbGlkaXR5UGVyaW9kJ10pIHsgdGhpcy52YWxpZGl0eVBlcmlvZCA9IG5ldyBmaGlyLlBlcmlvZChzb3VyY2UudmFsaWRpdHlQZXJpb2QpOyB9XHJcbiAgICBpZiAoc291cmNlWydudW1iZXJPZlJlcGVhdHNBbGxvd2VkJ10pIHsgdGhpcy5udW1iZXJPZlJlcGVhdHNBbGxvd2VkID0gbmV3IGZoaXIuRmhpclBvc2l0aXZlSW50KHt2YWx1ZTogc291cmNlLm51bWJlck9mUmVwZWF0c0FsbG93ZWR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX251bWJlck9mUmVwZWF0c0FsbG93ZWQnXSkge1xyXG4gICAgICBpZiAodGhpcy5udW1iZXJPZlJlcGVhdHNBbGxvd2VkKSB7IHRoaXMubnVtYmVyT2ZSZXBlYXRzQWxsb3dlZC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9udW1iZXJPZlJlcGVhdHNBbGxvd2VkISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMubnVtYmVyT2ZSZXBlYXRzQWxsb3dlZCA9IG5ldyBmaGlyLkZoaXJQb3NpdGl2ZUludChzb3VyY2UuX251bWJlck9mUmVwZWF0c0FsbG93ZWQgYXMgUGFydGlhbDxmaGlyLkZoaXJQb3NpdGl2ZUludEFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsncXVhbnRpdHknXSkgeyB0aGlzLnF1YW50aXR5ID0gbmV3IGZoaXIuUXVhbnRpdHkoc291cmNlLnF1YW50aXR5KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZXhwZWN0ZWRTdXBwbHlEdXJhdGlvbiddKSB7IHRoaXMuZXhwZWN0ZWRTdXBwbHlEdXJhdGlvbiA9IG5ldyBmaGlyLlF1YW50aXR5KHNvdXJjZS5leHBlY3RlZFN1cHBseUR1cmF0aW9uKTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ01lZGljYXRpb25PcmRlci5kaXNwZW5zZVJlcXVlc3QnIH1cclxuICAgIHRoaXMudk9TKCdtZWRpY2F0aW9uJyxleHApXHJcbiAgICB0aGlzLnZPUygndmFsaWRpdHlQZXJpb2QnLGV4cClcclxuICAgIHRoaXMudk9TKCdudW1iZXJPZlJlcGVhdHNBbGxvd2VkJyxleHApXHJcbiAgICB0aGlzLnZPUygncXVhbnRpdHknLGV4cClcclxuICAgIHRoaXMudk9TKCdleHBlY3RlZFN1cHBseUR1cmF0aW9uJyxleHApXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgTWVkaWNhdGlvbk9yZGVyU3Vic3RpdHV0aW9uIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lZGljYXRpb25PcmRlclN1YnN0aXR1dGlvbkFyZ3MgZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudEFyZ3Mge1xyXG4gIC8qKlxyXG4gICAqIEEgY29kZSBzaWduaWZ5aW5nIHdoZXRoZXIgYSBkaWZmZXJlbnQgZHJ1ZyBzaG91bGQgYmUgZGlzcGVuc2VkIGZyb20gd2hhdCB3YXMgcHJlc2NyaWJlZC5cclxuICAgKi9cclxuICB0eXBlOiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgdGhlIHJlYXNvbiBmb3IgdGhlIHN1YnN0aXR1dGlvbiwgb3Igd2h5IHN1YnN0aXR1dGlvbiBtdXN0IG9yIG11c3Qgbm90IGJlIHBlcmZvcm1lZC5cclxuICAgKi9cclxuICByZWFzb24/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogSW5kaWNhdGVzIHdoZXRoZXIgb3Igbm90IHN1YnN0aXR1dGlvbiBjYW4gb3Igc2hvdWxkIGJlIHBhcnQgb2YgdGhlIGRpc3BlbnNlLiBJbiBzb21lIGNhc2VzIHN1YnN0aXR1dGlvbiBtdXN0IGhhcHBlbiwgaW4gb3RoZXIgY2FzZXMgc3Vic3RpdHV0aW9uIG11c3Qgbm90IGhhcHBlbiwgYW5kIGluIG90aGVycyBpdCBkb2VzIG5vdCBtYXR0ZXIuIFRoaXMgYmxvY2sgZXhwbGFpbnMgdGhlIHByZXNjcmliZXIncyBpbnRlbnQuIElmIG5vdGhpbmcgaXMgc3BlY2lmaWVkIHN1YnN0aXR1dGlvbiBtYXkgYmUgZG9uZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZWRpY2F0aW9uT3JkZXJTdWJzdGl0dXRpb24gZXh0ZW5kcyBmaGlyLkJhY2tib25lRWxlbWVudCB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdNZWRpY2F0aW9uT3JkZXJTdWJzdGl0dXRpb24nO1xyXG4gIC8qKlxyXG4gICAqIEEgY29kZSBzaWduaWZ5aW5nIHdoZXRoZXIgYSBkaWZmZXJlbnQgZHJ1ZyBzaG91bGQgYmUgZGlzcGVuc2VkIGZyb20gd2hhdCB3YXMgcHJlc2NyaWJlZC5cclxuICAgKi9cclxuICBwdWJsaWMgdHlwZTogZmhpci5Db2RlYWJsZUNvbmNlcHR8bnVsbDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgdGhlIHJlYXNvbiBmb3IgdGhlIHN1YnN0aXR1dGlvbiwgb3Igd2h5IHN1YnN0aXR1dGlvbiBtdXN0IG9yIG11c3Qgbm90IGJlIHBlcmZvcm1lZC5cclxuICAgKi9cclxuICBwdWJsaWMgcmVhc29uPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE1lZGljYXRpb25PcmRlclN1YnN0aXR1dGlvbiAtIGluaXRpYWxpemVzIGFueSByZXF1aXJlZCBlbGVtZW50cyB0byBudWxsIGlmIGEgdmFsdWUgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTpQYXJ0aWFsPE1lZGljYXRpb25PcmRlclN1YnN0aXR1dGlvbkFyZ3M+ID0ge30sIG9wdGlvbnM6Zmhpci5GaGlyQ29uc3RydWN0b3JPcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKHNvdXJjZSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoc291cmNlWyd0eXBlJ10pIHsgdGhpcy50eXBlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS50eXBlKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMudHlwZSA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ3JlYXNvbiddKSB7IHRoaXMucmVhc29uID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5yZWFzb24pOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnTWVkaWNhdGlvbk9yZGVyLnN1YnN0aXR1dGlvbicgfVxyXG4gICAgdGhpcy52UlMoJ3R5cGUnLGV4cClcclxuICAgIHRoaXMudk9TKCdyZWFzb24nLGV4cClcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBNZWRpY2F0aW9uT3JkZXIgdHlwZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVkaWNhdGlvbk9yZGVyQXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiTWVkaWNhdGlvbk9yZGVyXCJ8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVybmFsIGlkZW50aWZpZXIgLSBvbmUgdGhhdCB3b3VsZCBiZSB1c2VkIGJ5IGFub3RoZXIgbm9uLUZISVIgc3lzdGVtIC0gZm9yIGV4YW1wbGUgYSByZS1pbWJ1cnNlbWVudCBzeXN0ZW0gbWlnaHQgaXNzdWUgaXRzIG93biBpZCBmb3IgZWFjaCBwcmVzY3JpcHRpb24gdGhhdCBpcyBjcmVhdGVkLiAgVGhpcyBpcyBwYXJ0aWN1bGFybHkgaW1wb3J0YW50IHdoZXJlIEZISVIgb25seSBwcm92aWRlcyBwYXJ0IG9mIGFuIGVudGlyZSB3b3JrZmxvdyBwcm9jZXNzIHdoZXJlIHJlY29yZHMgaGF2ZSB0byBiZSB0cmFja2VkIHRocm91Z2ggYW4gZW50aXJlIHN5c3RlbS5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSAoYW5kIHBlcmhhcHMgdGltZSkgd2hlbiB0aGUgcHJlc2NyaXB0aW9uIHdhcyB3cml0dGVuLlxyXG4gICAqL1xyXG4gIGRhdGVXcml0dGVuPzogZmhpci5GaGlyRGF0ZVRpbWV8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogTWVkaWNhdGlvbk9yZGVyLmRhdGVXcml0dGVuXHJcbiAgICovXHJcbiAgX2RhdGVXcml0dGVuPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBBIGNvZGUgc3BlY2lmeWluZyB0aGUgc3RhdGUgb2YgdGhlIG9yZGVyLiAgR2VuZXJhbGx5IHRoaXMgd2lsbCBiZSBhY3RpdmUgb3IgY29tcGxldGVkIHN0YXRlLlxyXG4gICAqL1xyXG4gIHN0YXR1cz86IGZoaXIuRmhpckNvZGU8TWVkaWNhdGlvbk9yZGVyU3RhdHVzQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE1lZGljYXRpb25PcmRlci5zdGF0dXNcclxuICAgKi9cclxuICBfc3RhdHVzPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSAoYW5kIHBlcmhhcHMgdGltZSkgd2hlbiB0aGUgcHJlc2NyaXB0aW9uIHdhcyBzdG9wcGVkLlxyXG4gICAqL1xyXG4gIGRhdGVFbmRlZD86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE1lZGljYXRpb25PcmRlci5kYXRlRW5kZWRcclxuICAgKi9cclxuICBfZGF0ZUVuZGVkPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBUaGUgcmVhc29uIHdoeSB0aGUgcHJlc2NyaXB0aW9uIHdhcyBzdG9wcGVkLCBpZiBpdCB3YXMuXHJcbiAgICovXHJcbiAgcmVhc29uRW5kZWQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgbGluayB0byBhIHJlc291cmNlIHJlcHJlc2VudGluZyB0aGUgcGVyc29uIHRvIHdob20gdGhlIG1lZGljYXRpb24gd2lsbCBiZSBnaXZlbi5cclxuICAgKi9cclxuICBwYXRpZW50PzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgaGVhbHRoY2FyZSBwcm9mZXNzaW9uYWwgcmVzcG9uc2libGUgZm9yIGF1dGhvcml6aW5nIHRoZSBwcmVzY3JpcHRpb24uXHJcbiAgICovXHJcbiAgcHJlc2NyaWJlcj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBsaW5rIHRvIGEgcmVzb3VyY2UgdGhhdCBpZGVudGlmaWVzIHRoZSBwYXJ0aWN1bGFyIG9jY3VycmVuY2Ugb2YgY29udGFjdCBiZXR3ZWVuIHBhdGllbnQgYW5kIGhlYWx0aCBjYXJlIHByb3ZpZGVyLlxyXG4gICAqL1xyXG4gIGVuY291bnRlcj86IGZoaXIuUmVmZXJlbmNlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ2FuIGJlIHRoZSByZWFzb24gb3IgdGhlIGluZGljYXRpb24gZm9yIHdyaXRpbmcgdGhlIHByZXNjcmlwdGlvbi5cclxuICAgKi9cclxuICByZWFzb24/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQ2FuIGJlIHRoZSByZWFzb24gb3IgdGhlIGluZGljYXRpb24gZm9yIHdyaXRpbmcgdGhlIHByZXNjcmlwdGlvbi5cclxuICAgKi9cclxuICByZWFzb25Db2RlYWJsZUNvbmNlcHQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIENhbiBiZSB0aGUgcmVhc29uIG9yIHRoZSBpbmRpY2F0aW9uIGZvciB3cml0aW5nIHRoZSBwcmVzY3JpcHRpb24uXHJcbiAgICovXHJcbiAgcmVhc29uUmVmZXJlbmNlPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRyYSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgcHJlc2NyaXB0aW9uIHRoYXQgY291bGQgbm90IGJlIGNvbnZleWVkIGJ5IHRoZSBvdGhlciBhdHRyaWJ1dGVzLlxyXG4gICAqL1xyXG4gIG5vdGU/OiBmaGlyLkZoaXJTdHJpbmd8c3RyaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlbmRlZCBwcm9wZXJ0aWVzIGZvciBwcmltaXRpdmUgZWxlbWVudDogTWVkaWNhdGlvbk9yZGVyLm5vdGVcclxuICAgKi9cclxuICBfbm90ZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgbWVkaWNhdGlvbiBiZWluZyBhZG1pbmlzdGVyZWQuIFRoaXMgaXMgYSBsaW5rIHRvIGEgcmVzb3VyY2UgdGhhdCByZXByZXNlbnRzIHRoZSBtZWRpY2F0aW9uIHdoaWNoIG1heSBiZSB0aGUgZGV0YWlscyBvZiB0aGUgbWVkaWNhdGlvbiBvciBzaW1wbHkgYW4gYXR0cmlidXRlIGNhcnJ5aW5nIGEgY29kZSB0aGF0IGlkZW50aWZpZXMgdGhlIG1lZGljYXRpb24gZnJvbSBhIGtub3duIGxpc3Qgb2YgbWVkaWNhdGlvbnMuXHJcbiAgICovXHJcbiAgbWVkaWNhdGlvbj86IGZoaXIuQ29kZWFibGVDb25jZXB0fGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHRoZSBtZWRpY2F0aW9uIGJlaW5nIGFkbWluaXN0ZXJlZC4gVGhpcyBpcyBhIGxpbmsgdG8gYSByZXNvdXJjZSB0aGF0IHJlcHJlc2VudHMgdGhlIG1lZGljYXRpb24gd2hpY2ggbWF5IGJlIHRoZSBkZXRhaWxzIG9mIHRoZSBtZWRpY2F0aW9uIG9yIHNpbXBseSBhbiBhdHRyaWJ1dGUgY2FycnlpbmcgYSBjb2RlIHRoYXQgaWRlbnRpZmllcyB0aGUgbWVkaWNhdGlvbiBmcm9tIGEga25vd24gbGlzdCBvZiBtZWRpY2F0aW9ucy5cclxuICAgKi9cclxuICBtZWRpY2F0aW9uQ29kZWFibGVDb25jZXB0PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHRoZSBtZWRpY2F0aW9uIGJlaW5nIGFkbWluaXN0ZXJlZC4gVGhpcyBpcyBhIGxpbmsgdG8gYSByZXNvdXJjZSB0aGF0IHJlcHJlc2VudHMgdGhlIG1lZGljYXRpb24gd2hpY2ggbWF5IGJlIHRoZSBkZXRhaWxzIG9mIHRoZSBtZWRpY2F0aW9uIG9yIHNpbXBseSBhbiBhdHRyaWJ1dGUgY2FycnlpbmcgYSBjb2RlIHRoYXQgaWRlbnRpZmllcyB0aGUgbWVkaWNhdGlvbiBmcm9tIGEga25vd24gbGlzdCBvZiBtZWRpY2F0aW9ucy5cclxuICAgKi9cclxuICBtZWRpY2F0aW9uUmVmZXJlbmNlPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgaG93IHRoZSBtZWRpY2F0aW9uIGlzIHRvIGJlIHVzZWQgYnkgdGhlIHBhdGllbnQuXHJcbiAgICovXHJcbiAgZG9zYWdlSW5zdHJ1Y3Rpb24/OiBmaGlyLk1lZGljYXRpb25PcmRlckRvc2FnZUluc3RydWN0aW9uQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgdGhlIHNwZWNpZmljIGRldGFpbHMgZm9yIHRoZSBkaXNwZW5zZSBvciBtZWRpY2F0aW9uIHN1cHBseSBwYXJ0IG9mIGEgbWVkaWNhdGlvbiBvcmRlciAoYWxzbyBrbm93biBhcyBhIE1lZGljYXRpb24gUHJlc2NyaXB0aW9uKS4gIE5vdGUgdGhhdCB0aGlzIGluZm9ybWF0aW9uIGlzIE5PVCBhbHdheXMgc2VudCB3aXRoIHRoZSBvcmRlci4gIFRoZXJlIG1heSBiZSBpbiBzb21lIHNldHRpbmdzIChlLmcuIGhvc3BpdGFscykgaW5zdGl0dXRpb25hbCBvciBzeXN0ZW0gc3VwcG9ydCBmb3IgY29tcGxldGluZyB0aGUgZGlzcGVuc2UgZGV0YWlscyBpbiB0aGUgcGhhcm1hY3kgZGVwYXJ0bWVudC5cclxuICAgKi9cclxuICBkaXNwZW5zZVJlcXVlc3Q/OiBmaGlyLk1lZGljYXRpb25PcmRlckRpc3BlbnNlUmVxdWVzdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB3aGV0aGVyIG9yIG5vdCBzdWJzdGl0dXRpb24gY2FuIG9yIHNob3VsZCBiZSBwYXJ0IG9mIHRoZSBkaXNwZW5zZS4gSW4gc29tZSBjYXNlcyBzdWJzdGl0dXRpb24gbXVzdCBoYXBwZW4sIGluIG90aGVyIGNhc2VzIHN1YnN0aXR1dGlvbiBtdXN0IG5vdCBoYXBwZW4sIGFuZCBpbiBvdGhlcnMgaXQgZG9lcyBub3QgbWF0dGVyLiBUaGlzIGJsb2NrIGV4cGxhaW5zIHRoZSBwcmVzY3JpYmVyJ3MgaW50ZW50LiBJZiBub3RoaW5nIGlzIHNwZWNpZmllZCBzdWJzdGl0dXRpb24gbWF5IGJlIGRvbmUuXHJcbiAgICovXHJcbiAgc3Vic3RpdHV0aW9uPzogZmhpci5NZWRpY2F0aW9uT3JkZXJTdWJzdGl0dXRpb25BcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGxpbmsgdG8gYSByZXNvdXJjZSByZXByZXNlbnRpbmcgYW4gZWFybGllciBvcmRlciBvciBwcmVzY3JpcHRpb24gdGhhdCB0aGlzIG9yZGVyIHN1cGVyc2VkZXMuXHJcbiAgICovXHJcbiAgcHJpb3JQcmVzY3JpcHRpb24/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQW4gb3JkZXIgZm9yIGJvdGggc3VwcGx5IG9mIHRoZSBtZWRpY2F0aW9uIGFuZCB0aGUgaW5zdHJ1Y3Rpb25zIGZvciBhZG1pbmlzdHJhdGlvbiBvZiB0aGUgbWVkaWNhdGlvbiB0byBhIHBhdGllbnQuIFRoZSByZXNvdXJjZSBpcyBjYWxsZWQgXCJNZWRpY2F0aW9uT3JkZXJcIiByYXRoZXIgdGhhbiBcIk1lZGljYXRpb25QcmVzY3JpcHRpb25cIiB0byBnZW5lcmFsaXplIHRoZSB1c2UgYWNyb3NzIGlucGF0aWVudCBhbmQgb3V0cGF0aWVudCBzZXR0aW5ncyBhcyB3ZWxsIGFzIGZvciBjYXJlIHBsYW5zLCBldGMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNhdGlvbk9yZGVyIGV4dGVuZHMgZmhpci5Eb21haW5SZXNvdXJjZSB7XHJcbiAgLyoqXHJcbiAgICogTWFwcGluZyBvZiB0aGlzIGRhdGF0eXBlIHRvIGEgRkhJUiBlcXVpdmFsZW50XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSBfZnRzX2RhdGFUeXBlOnN0cmluZyA9ICdNZWRpY2F0aW9uT3JkZXInO1xyXG4gIC8qKlxyXG4gICAqIFJlc291cmNlIFR5cGUgTmFtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNvdXJjZVR5cGU6IFwiTWVkaWNhdGlvbk9yZGVyXCI7XHJcbiAgLyoqXHJcbiAgICogRXh0ZXJuYWwgaWRlbnRpZmllciAtIG9uZSB0aGF0IHdvdWxkIGJlIHVzZWQgYnkgYW5vdGhlciBub24tRkhJUiBzeXN0ZW0gLSBmb3IgZXhhbXBsZSBhIHJlLWltYnVyc2VtZW50IHN5c3RlbSBtaWdodCBpc3N1ZSBpdHMgb3duIGlkIGZvciBlYWNoIHByZXNjcmlwdGlvbiB0aGF0IGlzIGNyZWF0ZWQuICBUaGlzIGlzIHBhcnRpY3VsYXJseSBpbXBvcnRhbnQgd2hlcmUgRkhJUiBvbmx5IHByb3ZpZGVzIHBhcnQgb2YgYW4gZW50aXJlIHdvcmtmbG93IHByb2Nlc3Mgd2hlcmUgcmVjb3JkcyBoYXZlIHRvIGJlIHRyYWNrZWQgdGhyb3VnaCBhbiBlbnRpcmUgc3lzdGVtLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBpZGVudGlmaWVyOiBmaGlyLklkZW50aWZpZXJbXTtcclxuICAvKipcclxuICAgKiBUaGUgZGF0ZSAoYW5kIHBlcmhhcHMgdGltZSkgd2hlbiB0aGUgcHJlc2NyaXB0aW9uIHdhcyB3cml0dGVuLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkYXRlV3JpdHRlbj86IGZoaXIuRmhpckRhdGVUaW1lfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGNvZGUgc3BlY2lmeWluZyB0aGUgc3RhdGUgb2YgdGhlIG9yZGVyLiAgR2VuZXJhbGx5IHRoaXMgd2lsbCBiZSBhY3RpdmUgb3IgY29tcGxldGVkIHN0YXRlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0dXM/OiBmaGlyLkZoaXJDb2RlPE1lZGljYXRpb25PcmRlclN0YXR1c0NvZGVUeXBlPnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgKGFuZCBwZXJoYXBzIHRpbWUpIHdoZW4gdGhlIHByZXNjcmlwdGlvbiB3YXMgc3RvcHBlZC5cclxuICAgKi9cclxuICBwdWJsaWMgZGF0ZUVuZGVkPzogZmhpci5GaGlyRGF0ZVRpbWV8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSByZWFzb24gd2h5IHRoZSBwcmVzY3JpcHRpb24gd2FzIHN0b3BwZWQsIGlmIGl0IHdhcy5cclxuICAgKi9cclxuICBwdWJsaWMgcmVhc29uRW5kZWQ/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBsaW5rIHRvIGEgcmVzb3VyY2UgcmVwcmVzZW50aW5nIHRoZSBwZXJzb24gdG8gd2hvbSB0aGUgbWVkaWNhdGlvbiB3aWxsIGJlIGdpdmVuLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXRpZW50PzogZmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBoZWFsdGhjYXJlIHByb2Zlc3Npb25hbCByZXNwb25zaWJsZSBmb3IgYXV0aG9yaXppbmcgdGhlIHByZXNjcmlwdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgcHJlc2NyaWJlcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGxpbmsgdG8gYSByZXNvdXJjZSB0aGF0IGlkZW50aWZpZXMgdGhlIHBhcnRpY3VsYXIgb2NjdXJyZW5jZSBvZiBjb250YWN0IGJldHdlZW4gcGF0aWVudCBhbmQgaGVhbHRoIGNhcmUgcHJvdmlkZXIuXHJcbiAgICovXHJcbiAgcHVibGljIGVuY291bnRlcj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBDYW4gYmUgdGhlIHJlYXNvbiBvciB0aGUgaW5kaWNhdGlvbiBmb3Igd3JpdGluZyB0aGUgcHJlc2NyaXB0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWFzb24/OiAoZmhpci5Db2RlYWJsZUNvbmNlcHR8Zmhpci5SZWZlcmVuY2UpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IE1lZGljYXRpb25PcmRlci5yZWFzb25beF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfcmVhc29uSXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogRXh0cmEgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHByZXNjcmlwdGlvbiB0aGF0IGNvdWxkIG5vdCBiZSBjb252ZXllZCBieSB0aGUgb3RoZXIgYXR0cmlidXRlcy5cclxuICAgKi9cclxuICBwdWJsaWMgbm90ZT86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgbWVkaWNhdGlvbiBiZWluZyBhZG1pbmlzdGVyZWQuIFRoaXMgaXMgYSBsaW5rIHRvIGEgcmVzb3VyY2UgdGhhdCByZXByZXNlbnRzIHRoZSBtZWRpY2F0aW9uIHdoaWNoIG1heSBiZSB0aGUgZGV0YWlscyBvZiB0aGUgbWVkaWNhdGlvbiBvciBzaW1wbHkgYW4gYXR0cmlidXRlIGNhcnJ5aW5nIGEgY29kZSB0aGF0IGlkZW50aWZpZXMgdGhlIG1lZGljYXRpb24gZnJvbSBhIGtub3duIGxpc3Qgb2YgbWVkaWNhdGlvbnMuXHJcbiAgICovXHJcbiAgcHVibGljIG1lZGljYXRpb246IChmaGlyLkNvZGVhYmxlQ29uY2VwdHxmaGlyLlJlZmVyZW5jZSl8bnVsbDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IE1lZGljYXRpb25PcmRlci5tZWRpY2F0aW9uW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX21lZGljYXRpb25Jc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgaG93IHRoZSBtZWRpY2F0aW9uIGlzIHRvIGJlIHVzZWQgYnkgdGhlIHBhdGllbnQuXHJcbiAgICovXHJcbiAgcHVibGljIGRvc2FnZUluc3RydWN0aW9uOiBmaGlyLk1lZGljYXRpb25PcmRlckRvc2FnZUluc3RydWN0aW9uW107XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHRoZSBzcGVjaWZpYyBkZXRhaWxzIGZvciB0aGUgZGlzcGVuc2Ugb3IgbWVkaWNhdGlvbiBzdXBwbHkgcGFydCBvZiBhIG1lZGljYXRpb24gb3JkZXIgKGFsc28ga25vd24gYXMgYSBNZWRpY2F0aW9uIFByZXNjcmlwdGlvbikuICBOb3RlIHRoYXQgdGhpcyBpbmZvcm1hdGlvbiBpcyBOT1QgYWx3YXlzIHNlbnQgd2l0aCB0aGUgb3JkZXIuICBUaGVyZSBtYXkgYmUgaW4gc29tZSBzZXR0aW5ncyAoZS5nLiBob3NwaXRhbHMpIGluc3RpdHV0aW9uYWwgb3Igc3lzdGVtIHN1cHBvcnQgZm9yIGNvbXBsZXRpbmcgdGhlIGRpc3BlbnNlIGRldGFpbHMgaW4gdGhlIHBoYXJtYWN5IGRlcGFydG1lbnQuXHJcbiAgICovXHJcbiAgcHVibGljIGRpc3BlbnNlUmVxdWVzdD86IGZoaXIuTWVkaWNhdGlvbk9yZGVyRGlzcGVuc2VSZXF1ZXN0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgd2hldGhlciBvciBub3Qgc3Vic3RpdHV0aW9uIGNhbiBvciBzaG91bGQgYmUgcGFydCBvZiB0aGUgZGlzcGVuc2UuIEluIHNvbWUgY2FzZXMgc3Vic3RpdHV0aW9uIG11c3QgaGFwcGVuLCBpbiBvdGhlciBjYXNlcyBzdWJzdGl0dXRpb24gbXVzdCBub3QgaGFwcGVuLCBhbmQgaW4gb3RoZXJzIGl0IGRvZXMgbm90IG1hdHRlci4gVGhpcyBibG9jayBleHBsYWlucyB0aGUgcHJlc2NyaWJlcidzIGludGVudC4gSWYgbm90aGluZyBpcyBzcGVjaWZpZWQgc3Vic3RpdHV0aW9uIG1heSBiZSBkb25lLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdWJzdGl0dXRpb24/OiBmaGlyLk1lZGljYXRpb25PcmRlclN1YnN0aXR1dGlvbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBsaW5rIHRvIGEgcmVzb3VyY2UgcmVwcmVzZW50aW5nIGFuIGVhcmxpZXIgb3JkZXIgb3IgcHJlc2NyaXB0aW9uIHRoYXQgdGhpcyBvcmRlciBzdXBlcnNlZGVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcmlvclByZXNjcmlwdGlvbj86IGZoaXIuUmVmZXJlbmNlfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBNZWRpY2F0aW9uT3JkZXIgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxNZWRpY2F0aW9uT3JkZXJBcmdzPiA9IHt9LCBvcHRpb25zOmZoaXIuRmhpckNvbnN0cnVjdG9yT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBzdXBlcihzb3VyY2UsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5yZXNvdXJjZVR5cGUgPSAnTWVkaWNhdGlvbk9yZGVyJztcclxuICAgIGlmIChzb3VyY2VbJ2lkZW50aWZpZXInXSkgeyB0aGlzLmlkZW50aWZpZXIgPSBzb3VyY2UuaWRlbnRpZmllci5tYXAoKHgpID0+IG5ldyBmaGlyLklkZW50aWZpZXIoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5pZGVudGlmaWVyID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ2RhdGVXcml0dGVuJ10pIHsgdGhpcy5kYXRlV3JpdHRlbiA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5kYXRlV3JpdHRlbn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfZGF0ZVdyaXR0ZW4nXSkge1xyXG4gICAgICBpZiAodGhpcy5kYXRlV3JpdHRlbikgeyB0aGlzLmRhdGVXcml0dGVuLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2RhdGVXcml0dGVuISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZGF0ZVdyaXR0ZW4gPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoc291cmNlLl9kYXRlV3JpdHRlbiBhcyBQYXJ0aWFsPGZoaXIuRmhpckRhdGVUaW1lQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydzdGF0dXMnXSkgeyB0aGlzLnN0YXR1cyA9IG5ldyBmaGlyLkZoaXJDb2RlPE1lZGljYXRpb25PcmRlclN0YXR1c0NvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5zdGF0dXN9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3N0YXR1cyddKSB7XHJcbiAgICAgIGlmICh0aGlzLnN0YXR1cykgeyB0aGlzLnN0YXR1cy5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zdGF0dXMhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxNZWRpY2F0aW9uT3JkZXJTdGF0dXNDb2RlVHlwZT4oc291cmNlLl9zdGF0dXMgYXMgUGFydGlhbDxmaGlyLkZoaXJDb2RlPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ2RhdGVFbmRlZCddKSB7IHRoaXMuZGF0ZUVuZGVkID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHt2YWx1ZTogc291cmNlLmRhdGVFbmRlZH0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfZGF0ZUVuZGVkJ10pIHtcclxuICAgICAgaWYgKHRoaXMuZGF0ZUVuZGVkKSB7IHRoaXMuZGF0ZUVuZGVkLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX2RhdGVFbmRlZCEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLmRhdGVFbmRlZCA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZShzb3VyY2UuX2RhdGVFbmRlZCBhcyBQYXJ0aWFsPGZoaXIuRmhpckRhdGVUaW1lQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWydyZWFzb25FbmRlZCddKSB7IHRoaXMucmVhc29uRW5kZWQgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnJlYXNvbkVuZGVkKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncGF0aWVudCddKSB7IHRoaXMucGF0aWVudCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UucGF0aWVudCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3ByZXNjcmliZXInXSkgeyB0aGlzLnByZXNjcmliZXIgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnByZXNjcmliZXIpOyB9XHJcbiAgICBpZiAoc291cmNlWydlbmNvdW50ZXInXSkgeyB0aGlzLmVuY291bnRlciA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UuZW5jb3VudGVyKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVhc29uJ10pIHsgdGhpcy5yZWFzb24gPSBzb3VyY2UucmVhc29uOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3JlYXNvbkNvZGVhYmxlQ29uY2VwdCddKSB7IHRoaXMucmVhc29uID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5yZWFzb25Db2RlYWJsZUNvbmNlcHQpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3JlYXNvblJlZmVyZW5jZSddKSB7IHRoaXMucmVhc29uID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5yZWFzb25SZWZlcmVuY2UpOyB9XHJcbiAgICBpZiAoc291cmNlWydub3RlJ10pIHsgdGhpcy5ub3RlID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5ub3RlfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19ub3RlJ10pIHtcclxuICAgICAgaWYgKHRoaXMubm90ZSkgeyB0aGlzLm5vdGUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbm90ZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLm5vdGUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fbm90ZSBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnbWVkaWNhdGlvbiddKSB7IHRoaXMubWVkaWNhdGlvbiA9IHNvdXJjZS5tZWRpY2F0aW9uOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ21lZGljYXRpb25Db2RlYWJsZUNvbmNlcHQnXSkgeyB0aGlzLm1lZGljYXRpb24gPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLm1lZGljYXRpb25Db2RlYWJsZUNvbmNlcHQpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ21lZGljYXRpb25SZWZlcmVuY2UnXSkgeyB0aGlzLm1lZGljYXRpb24gPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLm1lZGljYXRpb25SZWZlcmVuY2UpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5tZWRpY2F0aW9uID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZG9zYWdlSW5zdHJ1Y3Rpb24nXSkgeyB0aGlzLmRvc2FnZUluc3RydWN0aW9uID0gc291cmNlLmRvc2FnZUluc3RydWN0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuTWVkaWNhdGlvbk9yZGVyRG9zYWdlSW5zdHJ1Y3Rpb24oeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5kb3NhZ2VJbnN0cnVjdGlvbiA9IFtdOyB9XHJcbiAgICBpZiAoc291cmNlWydkaXNwZW5zZVJlcXVlc3QnXSkgeyB0aGlzLmRpc3BlbnNlUmVxdWVzdCA9IG5ldyBmaGlyLk1lZGljYXRpb25PcmRlckRpc3BlbnNlUmVxdWVzdChzb3VyY2UuZGlzcGVuc2VSZXF1ZXN0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3Vic3RpdHV0aW9uJ10pIHsgdGhpcy5zdWJzdGl0dXRpb24gPSBuZXcgZmhpci5NZWRpY2F0aW9uT3JkZXJTdWJzdGl0dXRpb24oc291cmNlLnN1YnN0aXR1dGlvbik7IH1cclxuICAgIGlmIChzb3VyY2VbJ3ByaW9yUHJlc2NyaXB0aW9uJ10pIHsgdGhpcy5wcmlvclByZXNjcmlwdGlvbiA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UucHJpb3JQcmVzY3JpcHRpb24pOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnTWVkaWNhdGlvbk9yZGVyJyB9XHJcbiAgICB0aGlzLnZSUygncmVzb3VyY2VUeXBlJyxleHApXHJcbiAgICB0aGlzLnZPQSgnaWRlbnRpZmllcicsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2RhdGVXcml0dGVuJyxleHApXHJcbiAgICB0aGlzLnZPU1YoJ3N0YXR1cycsZXhwLCdNZWRpY2F0aW9uT3JkZXJTdGF0dXMnLE1lZGljYXRpb25PcmRlclN0YXR1c1ZzVmFsaWRhdGlvbiwncicpXHJcbiAgICB0aGlzLnZPUygnZGF0ZUVuZGVkJyxleHApXHJcbiAgICB0aGlzLnZPUygncmVhc29uRW5kZWQnLGV4cClcclxuICAgIHRoaXMudk9TKCdwYXRpZW50JyxleHApXHJcbiAgICB0aGlzLnZPUygncHJlc2NyaWJlcicsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2VuY291bnRlcicsZXhwKVxyXG4gICAgdGhpcy52T1MoJ3JlYXNvbicsZXhwKVxyXG4gICAgdGhpcy52T1MoJ25vdGUnLGV4cClcclxuICAgIHRoaXMudlJTKCdtZWRpY2F0aW9uJyxleHApXHJcbiAgICB0aGlzLnZPQSgnZG9zYWdlSW5zdHJ1Y3Rpb24nLGV4cClcclxuICAgIHRoaXMudk9TKCdkaXNwZW5zZVJlcXVlc3QnLGV4cClcclxuICAgIHRoaXMudk9TKCdzdWJzdGl0dXRpb24nLGV4cClcclxuICAgIHRoaXMudk9TKCdwcmlvclByZXNjcmlwdGlvbicsZXhwKVxyXG4gICAgcmV0dXJuIGlzc3VlcztcclxuICB9XHJcbn1cclxuIl19