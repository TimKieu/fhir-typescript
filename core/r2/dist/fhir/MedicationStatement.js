// <auto-generated/>
// Contents of: hl7.fhir.r2.core version: 1.0.2
// Minimum TypeScript Version: 3.7
// FHIR Resource: MedicationStatement
import * as fhir from '../fhir.js';
// @ts-ignore
import { MedicationStatementStatusVsValidation } from '../fhirValueSets/MedicationStatementStatusVsValidation.js';
/**
 * Indicates how the medication is/was used by the patient.
 */
export class MedicationStatementDosage extends fhir.BackboneElement {
    /**
     * Default constructor for MedicationStatementDosage - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        if (source['text']) {
            this.text = new fhir.FhirString({ value: source.text });
        }
        if (source['_text']) {
            if (this.text) {
                this.text.addExtendedProperties(source._text);
            }
            else {
                this.text = new fhir.FhirString(source._text);
            }
        }
        if (source['timing']) {
            this.timing = new fhir.Timing(source.timing);
        }
        if (source['asNeeded']) {
            this.asNeeded = source.asNeeded;
        }
        else if (source['asNeededBoolean']) {
            this.asNeeded = new fhir.FhirBoolean({ value: source.asNeededBoolean });
        }
        else if (source['asNeededCodeableConcept']) {
            this.asNeeded = new fhir.CodeableConcept(source.asNeededCodeableConcept);
        }
        if (source['site']) {
            this.site = source.site;
        }
        else if (source['siteCodeableConcept']) {
            this.site = new fhir.CodeableConcept(source.siteCodeableConcept);
        }
        else if (source['siteReference']) {
            this.site = new fhir.Reference(source.siteReference);
        }
        if (source['route']) {
            this.route = new fhir.CodeableConcept(source.route);
        }
        if (source['method']) {
            this.method = new fhir.CodeableConcept(source.method);
        }
        if (source['quantity']) {
            this.quantity = source.quantity;
        }
        else if (source['quantityQuantity']) {
            this.quantity = new fhir.Quantity(source.quantityQuantity);
        }
        else if (source['quantityRange']) {
            this.quantity = new fhir.Range(source.quantityRange);
        }
        if (source['rate']) {
            this.rate = source.rate;
        }
        else if (source['rateRatio']) {
            this.rate = new fhir.Ratio(source.rateRatio);
        }
        else if (source['rateRange']) {
            this.rate = new fhir.Range(source.rateRange);
        }
        if (source['maxDosePerPeriod']) {
            this.maxDosePerPeriod = new fhir.Ratio(source.maxDosePerPeriod);
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicationStatement.dosage';
        }
        this.vOS('text', exp);
        this.vOS('timing', exp);
        this.vOS('asNeeded', exp);
        this.vOS('site', exp);
        this.vOS('route', exp);
        this.vOS('method', exp);
        this.vOS('quantity', exp);
        this.vOS('rate', exp);
        this.vOS('maxDosePerPeriod', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicationStatementDosage._fts_dataType = 'MedicationStatementDosage';
/**
 * Internal flag to properly serialize choice-type element MedicationStatement.dosage.asNeeded[x]
 */
MedicationStatementDosage._fts_asNeededIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element MedicationStatement.dosage.site[x]
 */
MedicationStatementDosage._fts_siteIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element MedicationStatement.dosage.quantity[x]
 */
MedicationStatementDosage._fts_quantityIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element MedicationStatement.dosage.rate[x]
 */
MedicationStatementDosage._fts_rateIsChoice = true;
/**
 * A record of a medication that is being consumed by a patient.   A MedicationStatement may indicate that the patient may be taking the medication now, or has taken the medication in the past or will be taking the medication in the future.  The source of this information can be the patient, significant other (such as a family member or spouse), or a clinician.  A common scenario where this information is captured is during the history taking process during a patient visit or stay.   The medication information may come from e.g. the patient's memory, from a prescription bottle,  or from a list of medications the patient, clinician or other party maintains   The primary difference between a medication statement and a medication administration is that the medication administration has complete administration information and is based on actual administration information from the person who administered the medication.  A medication statement is often, if not always, less specific.  There is no required date/time when the medication was administered, in fact we only know that a source has reported the patient is taking this medication, where details such as time, quantity, or rate or even medication product may be incomplete or missing or less precise.  As stated earlier, the medication statement information may come from the patient's memory, from a prescription bottle or from a list of medications the patient, clinician or other party maintains.  Medication administration is more formal and is not missing detailed information.
 */
export class MedicationStatement extends fhir.DomainResource {
    /**
     * Default constructor for MedicationStatement - initializes any required elements to null if a value is not provided.
     */
    constructor(source = {}, options = {}) {
        super(source, options);
        this.resourceType = 'MedicationStatement';
        if (source['identifier']) {
            this.identifier = source.identifier.map((x) => new fhir.Identifier(x));
        }
        else {
            this.identifier = [];
        }
        if (source['patient']) {
            this.patient = new fhir.Reference(source.patient);
        }
        else {
            this.patient = null;
        }
        if (source['informationSource']) {
            this.informationSource = new fhir.Reference(source.informationSource);
        }
        if (source['dateAsserted']) {
            this.dateAsserted = new fhir.FhirDateTime({ value: source.dateAsserted });
        }
        if (source['_dateAsserted']) {
            if (this.dateAsserted) {
                this.dateAsserted.addExtendedProperties(source._dateAsserted);
            }
            else {
                this.dateAsserted = new fhir.FhirDateTime(source._dateAsserted);
            }
        }
        if (source['status']) {
            this.status = new fhir.FhirCode({ value: source.status });
        }
        else {
            this.status = null;
        }
        if (source['_status']) {
            if (this.status) {
                this.status.addExtendedProperties(source._status);
            }
            else {
                this.status = new fhir.FhirCode(source._status);
            }
        }
        if (source['wasNotTaken']) {
            this.wasNotTaken = new fhir.FhirBoolean({ value: source.wasNotTaken });
        }
        if (source['_wasNotTaken']) {
            if (this.wasNotTaken) {
                this.wasNotTaken.addExtendedProperties(source._wasNotTaken);
            }
            else {
                this.wasNotTaken = new fhir.FhirBoolean(source._wasNotTaken);
            }
        }
        if (source['reasonNotTaken']) {
            this.reasonNotTaken = source.reasonNotTaken.map((x) => new fhir.CodeableConcept(x));
        }
        else {
            this.reasonNotTaken = [];
        }
        if (source['reasonForUse']) {
            this.reasonForUse = source.reasonForUse;
        }
        else if (source['reasonForUseCodeableConcept']) {
            this.reasonForUse = new fhir.CodeableConcept(source.reasonForUseCodeableConcept);
        }
        else if (source['reasonForUseReference']) {
            this.reasonForUse = new fhir.Reference(source.reasonForUseReference);
        }
        if (source['effective']) {
            this.effective = source.effective;
        }
        else if (source['effectiveDateTime']) {
            this.effective = new fhir.FhirDateTime({ value: source.effectiveDateTime });
        }
        else if (source['effectivePeriod']) {
            this.effective = new fhir.Period(source.effectivePeriod);
        }
        if (source['note']) {
            this.note = new fhir.FhirString({ value: source.note });
        }
        if (source['_note']) {
            if (this.note) {
                this.note.addExtendedProperties(source._note);
            }
            else {
                this.note = new fhir.FhirString(source._note);
            }
        }
        if (source['supportingInformation']) {
            this.supportingInformation = source.supportingInformation.map((x) => new fhir.Reference(x));
        }
        else {
            this.supportingInformation = [];
        }
        if (source['medication']) {
            this.medication = source.medication;
        }
        else if (source['medicationCodeableConcept']) {
            this.medication = new fhir.CodeableConcept(source.medicationCodeableConcept);
        }
        else if (source['medicationReference']) {
            this.medication = new fhir.Reference(source.medicationReference);
        }
        else {
            this.medication = null;
        }
        if (source['dosage']) {
            this.dosage = source.dosage.map((x) => new fhir.MedicationStatementDosage(x));
        }
        else {
            this.dosage = [];
        }
    }
    /**
     * Function to perform basic model validation (e.g., check if required elements are present).
     */
    doModelValidation(exp = '') {
        let issues = super.doModelValidation(exp);
        if (exp === '') {
            exp = 'MedicationStatement';
        }
        this.vRS('resourceType', exp);
        this.vOA('identifier', exp);
        this.vRS('patient', exp);
        this.vOS('informationSource', exp);
        this.vOS('dateAsserted', exp);
        this.vRSV('status', exp, 'MedicationStatementStatus', MedicationStatementStatusVsValidation, 'r');
        this.vOS('wasNotTaken', exp);
        this.vOA('reasonNotTaken', exp);
        this.vOS('reasonForUse', exp);
        this.vOS('effective', exp);
        this.vOS('note', exp);
        this.vOA('supportingInformation', exp);
        this.vRS('medication', exp);
        this.vOA('dosage', exp);
        return issues;
    }
}
/**
 * Mapping of this datatype to a FHIR equivalent
 */
MedicationStatement._fts_dataType = 'MedicationStatement';
/**
 * Internal flag to properly serialize choice-type element MedicationStatement.reasonForUse[x]
 */
MedicationStatement._fts_reasonForUseIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element MedicationStatement.effective[x]
 */
MedicationStatement._fts_effectiveIsChoice = true;
/**
 * Internal flag to properly serialize choice-type element MedicationStatement.medication[x]
 */
MedicationStatement._fts_medicationIsChoice = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVkaWNhdGlvblN0YXRlbWVudC5qcyIsInNvdXJjZVJvb3QiOiIuL3NyYy8iLCJzb3VyY2VzIjpbImZoaXIvTWVkaWNhdGlvblN0YXRlbWVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0I7QUFDcEIsK0NBQStDO0FBQy9DLGtDQUFrQztBQUNsQyxxQ0FBcUM7QUFFckMsT0FBTyxLQUFLLElBQUksTUFBTSxZQUFZLENBQUM7QUFJbkMsYUFBYTtBQUNiLE9BQU8sRUFBRSxxQ0FBcUMsRUFBRSxNQUFNLDJEQUEyRCxDQUFDO0FBK0VsSDs7R0FFRztBQUNILE1BQU0sT0FBTyx5QkFBMEIsU0FBUSxJQUFJLENBQUMsZUFBZTtJQXlEakU7O09BRUc7SUFDSCxZQUFZLFNBQWdELEVBQUUsRUFBRSxVQUFzQyxFQUFFO1FBQ3RHLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsSUFBSSxFQUFDLENBQUMsQ0FBQztTQUFFO1FBQzlFLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQ25CLElBQUksSUFBSSxDQUFDLElBQUksRUFBRTtnQkFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxLQUFNLENBQUMsQ0FBQzthQUFFO2lCQUM3RDtnQkFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsS0FBcUMsQ0FBQyxDQUFDO2FBQUU7U0FDeEY7UUFDRCxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUFF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LHVCQUF1QixFQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ3JDLElBQUksQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQzFCLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ3RCLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBOUlEOztHQUVHO0FBQzZCLGlDQUFhLEdBQVUscUJBQXFCLENBQUM7QUFxQzdFOztHQUVHO0FBQ3VCLDZDQUF5QixHQUFRLElBQUksQ0FBQztBQUtoRTs7R0FFRztBQUN1QiwwQ0FBc0IsR0FBUSxJQUFJLENBQUM7QUFhN0Q7O0dBRUc7QUFDdUIsMkNBQXVCLEdBQVEsSUFBSSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPGF1dG8tZ2VuZXJhdGVkLz5cclxuLy8gQ29udGVudHMgb2Y6IGhsNy5maGlyLnIyLmNvcmUgdmVyc2lvbjogMS4wLjJcclxuLy8gTWluaW11bSBUeXBlU2NyaXB0IFZlcnNpb246IDMuN1xyXG4vLyBGSElSIFJlc291cmNlOiBNZWRpY2F0aW9uU3RhdGVtZW50XHJcblxyXG5pbXBvcnQgKiBhcyBmaGlyIGZyb20gJy4uL2ZoaXIuanMnO1xyXG5cclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgeyBNZWRpY2F0aW9uU3RhdGVtZW50U3RhdHVzQ29kZXMsICBNZWRpY2F0aW9uU3RhdGVtZW50U3RhdHVzQ29kZVR5cGUgfSBmcm9tICcuLi9maGlyVmFsdWVTZXRzL01lZGljYXRpb25TdGF0ZW1lbnRTdGF0dXNDb2Rlcy5qcyc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHsgTWVkaWNhdGlvblN0YXRlbWVudFN0YXR1c1ZzVmFsaWRhdGlvbiB9IGZyb20gJy4uL2ZoaXJWYWx1ZVNldHMvTWVkaWNhdGlvblN0YXRlbWVudFN0YXR1c1ZzVmFsaWRhdGlvbi5qcyc7XHJcbi8qKlxyXG4gKiBWYWxpZCBhcmd1bWVudHMgZm9yIHRoZSBNZWRpY2F0aW9uU3RhdGVtZW50RG9zYWdlIHR5cGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lZGljYXRpb25TdGF0ZW1lbnREb3NhZ2VBcmdzIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnRBcmdzIHtcclxuICAvKipcclxuICAgKiBGcmVlIHRleHQgZG9zYWdlIGluZm9ybWF0aW9uIGFzIHJlcG9ydGVkIGFib3V0IGEgcGF0aWVudCdzIG1lZGljYXRpb24gdXNlLiBXaGVuIGNvZGVkIGRvc2FnZSBpbmZvcm1hdGlvbiBpcyBwcmVzZW50LCB0aGUgZnJlZSB0ZXh0IG1heSBzdGlsbCBiZSBwcmVzZW50IGZvciBkaXNwbGF5IHRvIGh1bWFucy5cclxuICAgKi9cclxuICB0ZXh0PzogZmhpci5GaGlyU3RyaW5nfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE1lZGljYXRpb25TdGF0ZW1lbnQuZG9zYWdlLnRleHRcclxuICAgKi9cclxuICBfdGV4dD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogVGhlIHRpbWluZyBzY2hlZHVsZSBmb3IgZ2l2aW5nIHRoZSBtZWRpY2F0aW9uIHRvIHRoZSBwYXRpZW50LiAgVGhlIFNjaGVkdWxlIGRhdGEgdHlwZSBhbGxvd3MgbWFueSBkaWZmZXJlbnQgZXhwcmVzc2lvbnMsIGZvciBleGFtcGxlLiAgXCJFdmVyeSAgOCBob3Vyc1wiOyBcIlRocmVlIHRpbWVzIGEgZGF5XCI7IFwiMS8yIGFuIGhvdXIgYmVmb3JlIGJyZWFrZmFzdCBmb3IgMTAgZGF5cyBmcm9tIDIzLURlYyAyMDExOlwiOyAgXCIxNSBPY3QgMjAxMywgMTcgT2N0IDIwMTMgYW5kIDEgTm92IDIwMTNcIi5cclxuICAgKi9cclxuICB0aW1pbmc/OiBmaGlyLlRpbWluZ0FyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB3aGV0aGVyIHRoZSBNZWRpY2F0aW9uIGlzIG9ubHkgdGFrZW4gd2hlbiBuZWVkZWQgd2l0aGluIGEgc3BlY2lmaWMgZG9zaW5nIHNjaGVkdWxlIChCb29sZWFuIG9wdGlvbiksIG9yIGl0IGluZGljYXRlcyB0aGUgcHJlY29uZGl0aW9uIGZvciB0YWtpbmcgdGhlIE1lZGljYXRpb24gKENvZGVhYmxlQ29uY2VwdCkuICAgIFNwZWNpZmljYWxseSBpZiAnYm9vbGVhbicgZGF0YXR5cGUgaXMgc2VsZWN0ZWQsIHRoZW4gdGhlIGZvbGxvd2luZyBsb2dpYyBhcHBsaWVzOiAgSWYgc2V0IHRvIFRydWUsIHRoaXMgaW5kaWNhdGVzIHRoYXQgdGhlIG1lZGljYXRpb24gaXMgb25seSB0YWtlbiB3aGVuIG5lZWRlZCwgd2l0aGluIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGUuXHJcbiAgICovXHJcbiAgYXNOZWVkZWQ/OiBmaGlyLkZoaXJCb29sZWFufGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGUgTWVkaWNhdGlvbiBpcyBvbmx5IHRha2VuIHdoZW4gbmVlZGVkIHdpdGhpbiBhIHNwZWNpZmljIGRvc2luZyBzY2hlZHVsZSAoQm9vbGVhbiBvcHRpb24pLCBvciBpdCBpbmRpY2F0ZXMgdGhlIHByZWNvbmRpdGlvbiBmb3IgdGFraW5nIHRoZSBNZWRpY2F0aW9uIChDb2RlYWJsZUNvbmNlcHQpLiAgICBTcGVjaWZpY2FsbHkgaWYgJ2Jvb2xlYW4nIGRhdGF0eXBlIGlzIHNlbGVjdGVkLCB0aGVuIHRoZSBmb2xsb3dpbmcgbG9naWMgYXBwbGllczogIElmIHNldCB0byBUcnVlLCB0aGlzIGluZGljYXRlcyB0aGF0IHRoZSBtZWRpY2F0aW9uIGlzIG9ubHkgdGFrZW4gd2hlbiBuZWVkZWQsIHdpdGhpbiB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlLlxyXG4gICAqL1xyXG4gIGFzTmVlZGVkQm9vbGVhbj86IGZoaXIuRmhpckJvb2xlYW58Ym9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHdoZXRoZXIgdGhlIE1lZGljYXRpb24gaXMgb25seSB0YWtlbiB3aGVuIG5lZWRlZCB3aXRoaW4gYSBzcGVjaWZpYyBkb3Npbmcgc2NoZWR1bGUgKEJvb2xlYW4gb3B0aW9uKSwgb3IgaXQgaW5kaWNhdGVzIHRoZSBwcmVjb25kaXRpb24gZm9yIHRha2luZyB0aGUgTWVkaWNhdGlvbiAoQ29kZWFibGVDb25jZXB0KS4gICAgU3BlY2lmaWNhbGx5IGlmICdib29sZWFuJyBkYXRhdHlwZSBpcyBzZWxlY3RlZCwgdGhlbiB0aGUgZm9sbG93aW5nIGxvZ2ljIGFwcGxpZXM6ICBJZiBzZXQgdG8gVHJ1ZSwgdGhpcyBpbmRpY2F0ZXMgdGhhdCB0aGUgbWVkaWNhdGlvbiBpcyBvbmx5IHRha2VuIHdoZW4gbmVlZGVkLCB3aXRoaW4gdGhlIHNwZWNpZmllZCBzY2hlZHVsZS5cclxuICAgKi9cclxuICBhc05lZWRlZENvZGVhYmxlQ29uY2VwdD86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBjb2RlZCBzcGVjaWZpY2F0aW9uIG9mIG9yIGEgcmVmZXJlbmNlIHRvIHRoZSBhbmF0b21pYyBzaXRlIHdoZXJlIHRoZSBtZWRpY2F0aW9uIGZpcnN0IGVudGVycyB0aGUgYm9keS5cclxuICAgKi9cclxuICBzaXRlPzogZmhpci5Db2RlYWJsZUNvbmNlcHR8Zmhpci5SZWZlcmVuY2V8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEEgY29kZWQgc3BlY2lmaWNhdGlvbiBvZiBvciBhIHJlZmVyZW5jZSB0byB0aGUgYW5hdG9taWMgc2l0ZSB3aGVyZSB0aGUgbWVkaWNhdGlvbiBmaXJzdCBlbnRlcnMgdGhlIGJvZHkuXHJcbiAgICovXHJcbiAgc2l0ZUNvZGVhYmxlQ29uY2VwdD86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBjb2RlZCBzcGVjaWZpY2F0aW9uIG9mIG9yIGEgcmVmZXJlbmNlIHRvIHRoZSBhbmF0b21pYyBzaXRlIHdoZXJlIHRoZSBtZWRpY2F0aW9uIGZpcnN0IGVudGVycyB0aGUgYm9keS5cclxuICAgKi9cclxuICBzaXRlUmVmZXJlbmNlPzogZmhpci5SZWZlcmVuY2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGNvZGUgc3BlY2lmeWluZyB0aGUgcm91dGUgb3IgcGh5c2lvbG9naWNhbCBwYXRoIG9mIGFkbWluaXN0cmF0aW9uIG9mIGEgdGhlcmFwZXV0aWMgYWdlbnQgaW50byBvciBvbnRvIGEgc3ViamVjdC5cclxuICAgKi9cclxuICByb3V0ZT86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBjb2RlZCB2YWx1ZSBpbmRpY2F0aW5nIHRoZSBtZXRob2QgYnkgd2hpY2ggdGhlIG1lZGljYXRpb24gaXMgaW50ZW5kZWQgdG8gYmUgb3Igd2FzIGludHJvZHVjZWQgaW50byBvciBvbiB0aGUgYm9keS4gIFRoaXMgYXR0cmlidXRlIHdpbGwgbW9zdCBvZnRlbiBOT1QgYmUgcG9wdWxhdGVkLiAgSXQgaXMgbW9zdCBjb21tb25seSB1c2VkIGZvciBpbmplY3Rpb25zLiAgRm9yIGV4YW1wbGUsIFNsb3cgUHVzaCwgRGVlcCBJVi5cclxuICAgKi9cclxuICBtZXRob2Q/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdEFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBhbW91bnQgb2YgdGhlcmFwZXV0aWMgb3Igb3RoZXIgc3Vic3RhbmNlIGdpdmVuIGF0IG9uZSBhZG1pbmlzdHJhdGlvbiBldmVudC5cclxuICAgKi9cclxuICBxdWFudGl0eT86IGZoaXIuUXVhbnRpdHl8Zmhpci5SYW5nZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGFtb3VudCBvZiB0aGVyYXBldXRpYyBvciBvdGhlciBzdWJzdGFuY2UgZ2l2ZW4gYXQgb25lIGFkbWluaXN0cmF0aW9uIGV2ZW50LlxyXG4gICAqL1xyXG4gIHF1YW50aXR5UXVhbnRpdHk/OiBmaGlyLlF1YW50aXR5QXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGFtb3VudCBvZiB0aGVyYXBldXRpYyBvciBvdGhlciBzdWJzdGFuY2UgZ2l2ZW4gYXQgb25lIGFkbWluaXN0cmF0aW9uIGV2ZW50LlxyXG4gICAqL1xyXG4gIHF1YW50aXR5UmFuZ2U/OiBmaGlyLlJhbmdlQXJnc3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgc3BlZWQgd2l0aCB3aGljaCB0aGUgbWVkaWNhdGlvbiB3YXMgb3Igd2lsbCBiZSBpbnRyb2R1Y2VkIGludG8gdGhlIHBhdGllbnQuIFR5cGljYWxseSB0aGUgcmF0ZSBmb3IgYW4gaW5mdXNpb24gZS5nLiAxMDAgbWwgcGVyIDEgaG91ciBvciAxMDAgbWwvaHIuICBNYXkgYWxzbyBiZSBleHByZXNzZWQgYXMgYSByYXRlIHBlciB1bml0IG9mIHRpbWUgZS5nLiA1MDAgbWwgcGVyIDIgaG91cnMuICAgQ3VycmVudGx5IHdlIGRvIG5vdCBzcGVjaWZ5IGEgZGVmYXVsdCBvZiAnMScgaW4gdGhlIGRlbm9taW5hdG9yLCBidXQgdGhpcyBpcyBiZWluZyBkaXNjdXNzZWQuIE90aGVyIGV4YW1wbGVzOiAyMDAgbWNnL21pbiBvciAyMDAgbWNnLzEgbWludXRlOyAxIGxpdGVyLzggaG91cnMuXHJcbiAgICovXHJcbiAgcmF0ZT86IGZoaXIuUmF0aW98Zmhpci5SYW5nZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgc3BlZWQgd2l0aCB3aGljaCB0aGUgbWVkaWNhdGlvbiB3YXMgb3Igd2lsbCBiZSBpbnRyb2R1Y2VkIGludG8gdGhlIHBhdGllbnQuIFR5cGljYWxseSB0aGUgcmF0ZSBmb3IgYW4gaW5mdXNpb24gZS5nLiAxMDAgbWwgcGVyIDEgaG91ciBvciAxMDAgbWwvaHIuICBNYXkgYWxzbyBiZSBleHByZXNzZWQgYXMgYSByYXRlIHBlciB1bml0IG9mIHRpbWUgZS5nLiA1MDAgbWwgcGVyIDIgaG91cnMuICAgQ3VycmVudGx5IHdlIGRvIG5vdCBzcGVjaWZ5IGEgZGVmYXVsdCBvZiAnMScgaW4gdGhlIGRlbm9taW5hdG9yLCBidXQgdGhpcyBpcyBiZWluZyBkaXNjdXNzZWQuIE90aGVyIGV4YW1wbGVzOiAyMDAgbWNnL21pbiBvciAyMDAgbWNnLzEgbWludXRlOyAxIGxpdGVyLzggaG91cnMuXHJcbiAgICovXHJcbiAgcmF0ZVJhdGlvPzogZmhpci5SYXRpb0FyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIElkZW50aWZpZXMgdGhlIHNwZWVkIHdpdGggd2hpY2ggdGhlIG1lZGljYXRpb24gd2FzIG9yIHdpbGwgYmUgaW50cm9kdWNlZCBpbnRvIHRoZSBwYXRpZW50LiBUeXBpY2FsbHkgdGhlIHJhdGUgZm9yIGFuIGluZnVzaW9uIGUuZy4gMTAwIG1sIHBlciAxIGhvdXIgb3IgMTAwIG1sL2hyLiAgTWF5IGFsc28gYmUgZXhwcmVzc2VkIGFzIGEgcmF0ZSBwZXIgdW5pdCBvZiB0aW1lIGUuZy4gNTAwIG1sIHBlciAyIGhvdXJzLiAgIEN1cnJlbnRseSB3ZSBkbyBub3Qgc3BlY2lmeSBhIGRlZmF1bHQgb2YgJzEnIGluIHRoZSBkZW5vbWluYXRvciwgYnV0IHRoaXMgaXMgYmVpbmcgZGlzY3Vzc2VkLiBPdGhlciBleGFtcGxlczogMjAwIG1jZy9taW4gb3IgMjAwIG1jZy8xIG1pbnV0ZTsgMSBsaXRlci84IGhvdXJzLlxyXG4gICAqL1xyXG4gIHJhdGVSYW5nZT86IGZoaXIuUmFuZ2VBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgbWF4aW11bSB0b3RhbCBxdWFudGl0eSBvZiBhIHRoZXJhcGV1dGljIHN1YnN0YW5jZSB0aGF0IG1heSBiZSBhZG1pbmlzdGVyZWQgdG8gYSBzdWJqZWN0IG92ZXIgdGhlIHBlcmlvZCBvZiB0aW1lLiAgRm9yIGV4YW1wbGUsIDEwMDBtZyBpbiAyNCBob3Vycy5cclxuICAgKi9cclxuICBtYXhEb3NlUGVyUGVyaW9kPzogZmhpci5SYXRpb0FyZ3N8dW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogSW5kaWNhdGVzIGhvdyB0aGUgbWVkaWNhdGlvbiBpcy93YXMgdXNlZCBieSB0aGUgcGF0aWVudC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZWRpY2F0aW9uU3RhdGVtZW50RG9zYWdlIGV4dGVuZHMgZmhpci5CYWNrYm9uZUVsZW1lbnQge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVkaWNhdGlvblN0YXRlbWVudERvc2FnZSc7XHJcbiAgLyoqXHJcbiAgICogRnJlZSB0ZXh0IGRvc2FnZSBpbmZvcm1hdGlvbiBhcyByZXBvcnRlZCBhYm91dCBhIHBhdGllbnQncyBtZWRpY2F0aW9uIHVzZS4gV2hlbiBjb2RlZCBkb3NhZ2UgaW5mb3JtYXRpb24gaXMgcHJlc2VudCwgdGhlIGZyZWUgdGV4dCBtYXkgc3RpbGwgYmUgcHJlc2VudCBmb3IgZGlzcGxheSB0byBodW1hbnMuXHJcbiAgICovXHJcbiAgcHVibGljIHRleHQ/OiBmaGlyLkZoaXJTdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB0aW1pbmcgc2NoZWR1bGUgZm9yIGdpdmluZyB0aGUgbWVkaWNhdGlvbiB0byB0aGUgcGF0aWVudC4gIFRoZSBTY2hlZHVsZSBkYXRhIHR5cGUgYWxsb3dzIG1hbnkgZGlmZmVyZW50IGV4cHJlc3Npb25zLCBmb3IgZXhhbXBsZS4gIFwiRXZlcnkgIDggaG91cnNcIjsgXCJUaHJlZSB0aW1lcyBhIGRheVwiOyBcIjEvMiBhbiBob3VyIGJlZm9yZSBicmVha2Zhc3QgZm9yIDEwIGRheXMgZnJvbSAyMy1EZWMgMjAxMTpcIjsgIFwiMTUgT2N0IDIwMTMsIDE3IE9jdCAyMDEzIGFuZCAxIE5vdiAyMDEzXCIuXHJcbiAgICovXHJcbiAgcHVibGljIHRpbWluZz86IGZoaXIuVGltaW5nfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGUgTWVkaWNhdGlvbiBpcyBvbmx5IHRha2VuIHdoZW4gbmVlZGVkIHdpdGhpbiBhIHNwZWNpZmljIGRvc2luZyBzY2hlZHVsZSAoQm9vbGVhbiBvcHRpb24pLCBvciBpdCBpbmRpY2F0ZXMgdGhlIHByZWNvbmRpdGlvbiBmb3IgdGFraW5nIHRoZSBNZWRpY2F0aW9uIChDb2RlYWJsZUNvbmNlcHQpLiAgICBTcGVjaWZpY2FsbHkgaWYgJ2Jvb2xlYW4nIGRhdGF0eXBlIGlzIHNlbGVjdGVkLCB0aGVuIHRoZSBmb2xsb3dpbmcgbG9naWMgYXBwbGllczogIElmIHNldCB0byBUcnVlLCB0aGlzIGluZGljYXRlcyB0aGF0IHRoZSBtZWRpY2F0aW9uIGlzIG9ubHkgdGFrZW4gd2hlbiBuZWVkZWQsIHdpdGhpbiB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhc05lZWRlZD86IChmaGlyLkZoaXJCb29sZWFufGZoaXIuQ29kZWFibGVDb25jZXB0KXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBNZWRpY2F0aW9uU3RhdGVtZW50LmRvc2FnZS5hc05lZWRlZFt4XVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgX2Z0c19hc05lZWRlZElzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIEEgY29kZWQgc3BlY2lmaWNhdGlvbiBvZiBvciBhIHJlZmVyZW5jZSB0byB0aGUgYW5hdG9taWMgc2l0ZSB3aGVyZSB0aGUgbWVkaWNhdGlvbiBmaXJzdCBlbnRlcnMgdGhlIGJvZHkuXHJcbiAgICovXHJcbiAgcHVibGljIHNpdGU/OiAoZmhpci5Db2RlYWJsZUNvbmNlcHR8Zmhpci5SZWZlcmVuY2UpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IE1lZGljYXRpb25TdGF0ZW1lbnQuZG9zYWdlLnNpdGVbeF1cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IF9mdHNfc2l0ZUlzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIEEgY29kZSBzcGVjaWZ5aW5nIHRoZSByb3V0ZSBvciBwaHlzaW9sb2dpY2FsIHBhdGggb2YgYWRtaW5pc3RyYXRpb24gb2YgYSB0aGVyYXBldXRpYyBhZ2VudCBpbnRvIG9yIG9udG8gYSBzdWJqZWN0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyByb3V0ZT86IGZoaXIuQ29kZWFibGVDb25jZXB0fHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGNvZGVkIHZhbHVlIGluZGljYXRpbmcgdGhlIG1ldGhvZCBieSB3aGljaCB0aGUgbWVkaWNhdGlvbiBpcyBpbnRlbmRlZCB0byBiZSBvciB3YXMgaW50cm9kdWNlZCBpbnRvIG9yIG9uIHRoZSBib2R5LiAgVGhpcyBhdHRyaWJ1dGUgd2lsbCBtb3N0IG9mdGVuIE5PVCBiZSBwb3B1bGF0ZWQuICBJdCBpcyBtb3N0IGNvbW1vbmx5IHVzZWQgZm9yIGluamVjdGlvbnMuICBGb3IgZXhhbXBsZSwgU2xvdyBQdXNoLCBEZWVwIElWLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtZXRob2Q/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGFtb3VudCBvZiB0aGVyYXBldXRpYyBvciBvdGhlciBzdWJzdGFuY2UgZ2l2ZW4gYXQgb25lIGFkbWluaXN0cmF0aW9uIGV2ZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBxdWFudGl0eT86IChmaGlyLlF1YW50aXR5fGZoaXIuUmFuZ2UpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IE1lZGljYXRpb25TdGF0ZW1lbnQuZG9zYWdlLnF1YW50aXR5W3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX3F1YW50aXR5SXNDaG9pY2U6dHJ1ZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgc3BlZWQgd2l0aCB3aGljaCB0aGUgbWVkaWNhdGlvbiB3YXMgb3Igd2lsbCBiZSBpbnRyb2R1Y2VkIGludG8gdGhlIHBhdGllbnQuIFR5cGljYWxseSB0aGUgcmF0ZSBmb3IgYW4gaW5mdXNpb24gZS5nLiAxMDAgbWwgcGVyIDEgaG91ciBvciAxMDAgbWwvaHIuICBNYXkgYWxzbyBiZSBleHByZXNzZWQgYXMgYSByYXRlIHBlciB1bml0IG9mIHRpbWUgZS5nLiA1MDAgbWwgcGVyIDIgaG91cnMuICAgQ3VycmVudGx5IHdlIGRvIG5vdCBzcGVjaWZ5IGEgZGVmYXVsdCBvZiAnMScgaW4gdGhlIGRlbm9taW5hdG9yLCBidXQgdGhpcyBpcyBiZWluZyBkaXNjdXNzZWQuIE90aGVyIGV4YW1wbGVzOiAyMDAgbWNnL21pbiBvciAyMDAgbWNnLzEgbWludXRlOyAxIGxpdGVyLzggaG91cnMuXHJcbiAgICovXHJcbiAgcHVibGljIHJhdGU/OiAoZmhpci5SYXRpb3xmaGlyLlJhbmdlKXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJuYWwgZmxhZyB0byBwcm9wZXJseSBzZXJpYWxpemUgY2hvaWNlLXR5cGUgZWxlbWVudCBNZWRpY2F0aW9uU3RhdGVtZW50LmRvc2FnZS5yYXRlW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX3JhdGVJc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBUaGUgbWF4aW11bSB0b3RhbCBxdWFudGl0eSBvZiBhIHRoZXJhcGV1dGljIHN1YnN0YW5jZSB0aGF0IG1heSBiZSBhZG1pbmlzdGVyZWQgdG8gYSBzdWJqZWN0IG92ZXIgdGhlIHBlcmlvZCBvZiB0aW1lLiAgRm9yIGV4YW1wbGUsIDEwMDBtZyBpbiAyNCBob3Vycy5cclxuICAgKi9cclxuICBwdWJsaWMgbWF4RG9zZVBlclBlcmlvZD86IGZoaXIuUmF0aW98dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE1lZGljYXRpb25TdGF0ZW1lbnREb3NhZ2UgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxNZWRpY2F0aW9uU3RhdGVtZW50RG9zYWdlQXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIGlmIChzb3VyY2VbJ3RleHQnXSkgeyB0aGlzLnRleHQgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHt2YWx1ZTogc291cmNlLnRleHR9KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3RleHQnXSkge1xyXG4gICAgICBpZiAodGhpcy50ZXh0KSB7IHRoaXMudGV4dC5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl90ZXh0ISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMudGV4dCA9IG5ldyBmaGlyLkZoaXJTdHJpbmcoc291cmNlLl90ZXh0IGFzIFBhcnRpYWw8Zmhpci5GaGlyU3RyaW5nQXJncz4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd0aW1pbmcnXSkgeyB0aGlzLnRpbWluZyA9IG5ldyBmaGlyLlRpbWluZyhzb3VyY2UudGltaW5nKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnYXNOZWVkZWQnXSkgeyB0aGlzLmFzTmVlZGVkID0gc291cmNlLmFzTmVlZGVkOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2FzTmVlZGVkQm9vbGVhbiddKSB7IHRoaXMuYXNOZWVkZWQgPSBuZXcgZmhpci5GaGlyQm9vbGVhbih7dmFsdWU6IHNvdXJjZS5hc05lZWRlZEJvb2xlYW59KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydhc05lZWRlZENvZGVhYmxlQ29uY2VwdCddKSB7IHRoaXMuYXNOZWVkZWQgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLmFzTmVlZGVkQ29kZWFibGVDb25jZXB0KTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnc2l0ZSddKSB7IHRoaXMuc2l0ZSA9IHNvdXJjZS5zaXRlOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3NpdGVDb2RlYWJsZUNvbmNlcHQnXSkgeyB0aGlzLnNpdGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnNpdGVDb2RlYWJsZUNvbmNlcHQpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3NpdGVSZWZlcmVuY2UnXSkgeyB0aGlzLnNpdGUgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLnNpdGVSZWZlcmVuY2UpOyB9XHJcbiAgICBpZiAoc291cmNlWydyb3V0ZSddKSB7IHRoaXMucm91dGUgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLnJvdXRlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnbWV0aG9kJ10pIHsgdGhpcy5tZXRob2QgPSBuZXcgZmhpci5Db2RlYWJsZUNvbmNlcHQoc291cmNlLm1ldGhvZCk7IH1cclxuICAgIGlmIChzb3VyY2VbJ3F1YW50aXR5J10pIHsgdGhpcy5xdWFudGl0eSA9IHNvdXJjZS5xdWFudGl0eTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydxdWFudGl0eVF1YW50aXR5J10pIHsgdGhpcy5xdWFudGl0eSA9IG5ldyBmaGlyLlF1YW50aXR5KHNvdXJjZS5xdWFudGl0eVF1YW50aXR5KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydxdWFudGl0eVJhbmdlJ10pIHsgdGhpcy5xdWFudGl0eSA9IG5ldyBmaGlyLlJhbmdlKHNvdXJjZS5xdWFudGl0eVJhbmdlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmF0ZSddKSB7IHRoaXMucmF0ZSA9IHNvdXJjZS5yYXRlOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3JhdGVSYXRpbyddKSB7IHRoaXMucmF0ZSA9IG5ldyBmaGlyLlJhdGlvKHNvdXJjZS5yYXRlUmF0aW8pOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3JhdGVSYW5nZSddKSB7IHRoaXMucmF0ZSA9IG5ldyBmaGlyLlJhbmdlKHNvdXJjZS5yYXRlUmFuZ2UpOyB9XHJcbiAgICBpZiAoc291cmNlWydtYXhEb3NlUGVyUGVyaW9kJ10pIHsgdGhpcy5tYXhEb3NlUGVyUGVyaW9kID0gbmV3IGZoaXIuUmF0aW8oc291cmNlLm1heERvc2VQZXJQZXJpb2QpOyB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHBlcmZvcm0gYmFzaWMgbW9kZWwgdmFsaWRhdGlvbiAoZS5nLiwgY2hlY2sgaWYgcmVxdWlyZWQgZWxlbWVudHMgYXJlIHByZXNlbnQpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBkb01vZGVsVmFsaWRhdGlvbihleHA6c3RyaW5nID0gJycpOmZoaXIuRnRzSXNzdWVbXSB7XHJcbiAgICBsZXQgaXNzdWVzOmZoaXIuRnRzSXNzdWVbXSA9IHN1cGVyLmRvTW9kZWxWYWxpZGF0aW9uKGV4cCk7XHJcbiAgICBpZiAoZXhwID09PSAnJykgeyBleHAgPSAnTWVkaWNhdGlvblN0YXRlbWVudC5kb3NhZ2UnIH1cclxuICAgIHRoaXMudk9TKCd0ZXh0JyxleHApXHJcbiAgICB0aGlzLnZPUygndGltaW5nJyxleHApXHJcbiAgICB0aGlzLnZPUygnYXNOZWVkZWQnLGV4cClcclxuICAgIHRoaXMudk9TKCdzaXRlJyxleHApXHJcbiAgICB0aGlzLnZPUygncm91dGUnLGV4cClcclxuICAgIHRoaXMudk9TKCdtZXRob2QnLGV4cClcclxuICAgIHRoaXMudk9TKCdxdWFudGl0eScsZXhwKVxyXG4gICAgdGhpcy52T1MoJ3JhdGUnLGV4cClcclxuICAgIHRoaXMudk9TKCdtYXhEb3NlUGVyUGVyaW9kJyxleHApXHJcbiAgICByZXR1cm4gaXNzdWVzO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogVmFsaWQgYXJndW1lbnRzIGZvciB0aGUgTWVkaWNhdGlvblN0YXRlbWVudCB0eXBlLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNZWRpY2F0aW9uU3RhdGVtZW50QXJncyBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2VBcmdzIHtcclxuICAvKipcclxuICAgKiBSZXNvdXJjZSBUeXBlIE5hbWVcclxuICAgKi9cclxuICByZXNvdXJjZVR5cGU6IFwiTWVkaWNhdGlvblN0YXRlbWVudFwifHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBFeHRlcm5hbCBpZGVudGlmaWVyIC0gRkhJUiB3aWxsIGdlbmVyYXRlIGl0cyBvd24gaW50ZXJuYWwgaWRlbnRpZmllcnMgKHByb2JhYmx5IFVSTHMpIHdoaWNoIGRvIG5vdCBuZWVkIHRvIGJlIGV4cGxpY2l0bHkgbWFuYWdlZCBieSB0aGUgcmVzb3VyY2UuICBUaGUgaWRlbnRpZmllciBoZXJlIGlzIG9uZSB0aGF0IHdvdWxkIGJlIHVzZWQgYnkgYW5vdGhlciBub24tRkhJUiBzeXN0ZW0gLSBmb3IgZXhhbXBsZSBhbiBhdXRvbWF0ZWQgbWVkaWNhdGlvbiBwdW1wIHdvdWxkIHByb3ZpZGUgYSByZWNvcmQgZWFjaCB0aW1lIGl0IG9wZXJhdGVkOyBhbiBhZG1pbmlzdHJhdGlvbiB3aGlsZSB0aGUgcGF0aWVudCB3YXMgb2ZmIHRoZSB3YXJkIG1pZ2h0IGJlIG1hZGUgd2l0aCBhIGRpZmZlcmVudCBzeXN0ZW0gYW5kIGVudGVyZWQgYWZ0ZXIgdGhlIGV2ZW50LiAgUGFydGljdWxhcmx5IGltcG9ydGFudCBpZiB0aGVzZSByZWNvcmRzIGhhdmUgdG8gYmUgdXBkYXRlZC5cclxuICAgKi9cclxuICBpZGVudGlmaWVyPzogZmhpci5JZGVudGlmaWVyQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgcGVyc29uIG9yIGFuaW1hbCB3aG8gaXMvd2FzIHRha2luZyB0aGUgbWVkaWNhdGlvbi5cclxuICAgKi9cclxuICBwYXRpZW50OiBmaGlyLlJlZmVyZW5jZUFyZ3N8bnVsbDtcclxuICAvKipcclxuICAgKiBUaGUgcGVyc29uIHdobyBwcm92aWRlZCB0aGUgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHRha2luZyBvZiB0aGlzIG1lZGljYXRpb24uXHJcbiAgICovXHJcbiAgaW5mb3JtYXRpb25Tb3VyY2U/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBkYXRlIHdoZW4gdGhlIG1lZGljYXRpb24gc3RhdGVtZW50IHdhcyBhc3NlcnRlZCBieSB0aGUgaW5mb3JtYXRpb24gc291cmNlLlxyXG4gICAqL1xyXG4gIGRhdGVBc3NlcnRlZD86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE1lZGljYXRpb25TdGF0ZW1lbnQuZGF0ZUFzc2VydGVkXHJcbiAgICovXHJcbiAgX2RhdGVBc3NlcnRlZD86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQSBjb2RlIHJlcHJlc2VudGluZyB0aGUgcGF0aWVudCBvciBvdGhlciBzb3VyY2UncyBqdWRnbWVudCBhYm91dCB0aGUgc3RhdGUgb2YgdGhlIG1lZGljYXRpb24gdXNlZCB0aGF0IHRoaXMgc3RhdGVtZW50IGlzIGFib3V0LiAgR2VuZXJhbGx5IHRoaXMgd2lsbCBiZSBhY3RpdmUgb3IgY29tcGxldGVkLlxyXG4gICAqL1xyXG4gIHN0YXR1czogZmhpci5GaGlyQ29kZTxNZWRpY2F0aW9uU3RhdGVtZW50U3RhdHVzQ29kZVR5cGU+fHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kZWQgcHJvcGVydGllcyBmb3IgcHJpbWl0aXZlIGVsZW1lbnQ6IE1lZGljYXRpb25TdGF0ZW1lbnQuc3RhdHVzXHJcbiAgICovXHJcbiAgX3N0YXR1cz86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogU2V0IHRoaXMgdG8gdHJ1ZSBpZiB0aGUgcmVjb3JkIGlzIHNheWluZyB0aGF0IHRoZSBtZWRpY2F0aW9uIHdhcyBOT1QgdGFrZW4uXHJcbiAgICovXHJcbiAgd2FzTm90VGFrZW4/OiBmaGlyLkZoaXJCb29sZWFufGJvb2xlYW58dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBNZWRpY2F0aW9uU3RhdGVtZW50Lndhc05vdFRha2VuXHJcbiAgICovXHJcbiAgX3dhc05vdFRha2VuPzpmaGlyLkZoaXJFbGVtZW50QXJncztcclxuICAvKipcclxuICAgKiBBIGNvZGUgaW5kaWNhdGluZyB3aHkgdGhlIG1lZGljYXRpb24gd2FzIG5vdCB0YWtlbi5cclxuICAgKi9cclxuICByZWFzb25Ob3RUYWtlbj86IGZoaXIuQ29kZWFibGVDb25jZXB0QXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHJlYXNvbiBmb3Igd2h5IHRoZSBtZWRpY2F0aW9uIGlzIGJlaW5nL3dhcyB0YWtlbi5cclxuICAgKi9cclxuICByZWFzb25Gb3JVc2U/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSByZWFzb24gZm9yIHdoeSB0aGUgbWVkaWNhdGlvbiBpcyBiZWluZy93YXMgdGFrZW4uXHJcbiAgICovXHJcbiAgcmVhc29uRm9yVXNlQ29kZWFibGVDb25jZXB0PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIHJlYXNvbiBmb3Igd2h5IHRoZSBtZWRpY2F0aW9uIGlzIGJlaW5nL3dhcyB0YWtlbi5cclxuICAgKi9cclxuICByZWFzb25Gb3JVc2VSZWZlcmVuY2U/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpbnRlcnZhbCBvZiB0aW1lIGR1cmluZyB3aGljaCBpdCBpcyBiZWluZyBhc3NlcnRlZCB0aGF0IHRoZSBwYXRpZW50IHdhcyB0YWtpbmcgdGhlIG1lZGljYXRpb24gKG9yIHdhcyBub3QgdGFraW5nLCB3aGVuIHRoZSB3YXNOb3RHaXZlbiBlbGVtZW50IGlzIHRydWUpLlxyXG4gICAqL1xyXG4gIGVmZmVjdGl2ZT86IGZoaXIuRmhpckRhdGVUaW1lfGZoaXIuUGVyaW9kfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBUaGUgaW50ZXJ2YWwgb2YgdGltZSBkdXJpbmcgd2hpY2ggaXQgaXMgYmVpbmcgYXNzZXJ0ZWQgdGhhdCB0aGUgcGF0aWVudCB3YXMgdGFraW5nIHRoZSBtZWRpY2F0aW9uIChvciB3YXMgbm90IHRha2luZywgd2hlbiB0aGUgd2FzTm90R2l2ZW4gZWxlbWVudCBpcyB0cnVlKS5cclxuICAgKi9cclxuICBlZmZlY3RpdmVEYXRlVGltZT86IGZoaXIuRmhpckRhdGVUaW1lfHN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGludGVydmFsIG9mIHRpbWUgZHVyaW5nIHdoaWNoIGl0IGlzIGJlaW5nIGFzc2VydGVkIHRoYXQgdGhlIHBhdGllbnQgd2FzIHRha2luZyB0aGUgbWVkaWNhdGlvbiAob3Igd2FzIG5vdCB0YWtpbmcsIHdoZW4gdGhlIHdhc05vdEdpdmVuIGVsZW1lbnQgaXMgdHJ1ZSkuXHJcbiAgICovXHJcbiAgZWZmZWN0aXZlUGVyaW9kPzogZmhpci5QZXJpb2RBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBQcm92aWRlcyBleHRyYSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgbWVkaWNhdGlvbiBzdGF0ZW1lbnQgdGhhdCBpcyBub3QgY29udmV5ZWQgYnkgdGhlIG90aGVyIGF0dHJpYnV0ZXMuXHJcbiAgICovXHJcbiAgbm90ZT86IGZoaXIuRmhpclN0cmluZ3xzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEV4dGVuZGVkIHByb3BlcnRpZXMgZm9yIHByaW1pdGl2ZSBlbGVtZW50OiBNZWRpY2F0aW9uU3RhdGVtZW50Lm5vdGVcclxuICAgKi9cclxuICBfbm90ZT86Zmhpci5GaGlyRWxlbWVudEFyZ3M7XHJcbiAgLyoqXHJcbiAgICogQWxsb3dzIGxpbmtpbmcgdGhlIE1lZGljYXRpb25TdGF0ZW1lbnQgdG8gdGhlIHVuZGVybHlpbmcgTWVkaWNhdGlvbk9yZGVyLCBvciB0byBvdGhlciBpbmZvcm1hdGlvbiB0aGF0IHN1cHBvcnRzIHRoZSBNZWRpY2F0aW9uU3RhdGVtZW50LlxyXG4gICAqL1xyXG4gIHN1cHBvcnRpbmdJbmZvcm1hdGlvbj86IGZoaXIuUmVmZXJlbmNlQXJnc1tdfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHRoZSBtZWRpY2F0aW9uIGJlaW5nIGFkbWluaXN0ZXJlZC4gVGhpcyBpcyBlaXRoZXIgYSBsaW5rIHRvIGEgcmVzb3VyY2UgcmVwcmVzZW50aW5nIHRoZSBkZXRhaWxzIG9mIHRoZSBtZWRpY2F0aW9uIG9yIGEgc2ltcGxlIGF0dHJpYnV0ZSBjYXJyeWluZyBhIGNvZGUgdGhhdCBpZGVudGlmaWVzIHRoZSBtZWRpY2F0aW9uIGZyb20gYSBrbm93biBsaXN0IG9mIG1lZGljYXRpb25zLlxyXG4gICAqL1xyXG4gIG1lZGljYXRpb24/OiBmaGlyLkNvZGVhYmxlQ29uY2VwdHxmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgbWVkaWNhdGlvbiBiZWluZyBhZG1pbmlzdGVyZWQuIFRoaXMgaXMgZWl0aGVyIGEgbGluayB0byBhIHJlc291cmNlIHJlcHJlc2VudGluZyB0aGUgZGV0YWlscyBvZiB0aGUgbWVkaWNhdGlvbiBvciBhIHNpbXBsZSBhdHRyaWJ1dGUgY2FycnlpbmcgYSBjb2RlIHRoYXQgaWRlbnRpZmllcyB0aGUgbWVkaWNhdGlvbiBmcm9tIGEga25vd24gbGlzdCBvZiBtZWRpY2F0aW9ucy5cclxuICAgKi9cclxuICBtZWRpY2F0aW9uQ29kZWFibGVDb25jZXB0PzogZmhpci5Db2RlYWJsZUNvbmNlcHRBcmdzfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJZGVudGlmaWVzIHRoZSBtZWRpY2F0aW9uIGJlaW5nIGFkbWluaXN0ZXJlZC4gVGhpcyBpcyBlaXRoZXIgYSBsaW5rIHRvIGEgcmVzb3VyY2UgcmVwcmVzZW50aW5nIHRoZSBkZXRhaWxzIG9mIHRoZSBtZWRpY2F0aW9uIG9yIGEgc2ltcGxlIGF0dHJpYnV0ZSBjYXJyeWluZyBhIGNvZGUgdGhhdCBpZGVudGlmaWVzIHRoZSBtZWRpY2F0aW9uIGZyb20gYSBrbm93biBsaXN0IG9mIG1lZGljYXRpb25zLlxyXG4gICAqL1xyXG4gIG1lZGljYXRpb25SZWZlcmVuY2U/OiBmaGlyLlJlZmVyZW5jZUFyZ3N8dW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyBob3cgdGhlIG1lZGljYXRpb24gaXMvd2FzIHVzZWQgYnkgdGhlIHBhdGllbnQuXHJcbiAgICovXHJcbiAgZG9zYWdlPzogZmhpci5NZWRpY2F0aW9uU3RhdGVtZW50RG9zYWdlQXJnc1tdfHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgcmVjb3JkIG9mIGEgbWVkaWNhdGlvbiB0aGF0IGlzIGJlaW5nIGNvbnN1bWVkIGJ5IGEgcGF0aWVudC4gICBBIE1lZGljYXRpb25TdGF0ZW1lbnQgbWF5IGluZGljYXRlIHRoYXQgdGhlIHBhdGllbnQgbWF5IGJlIHRha2luZyB0aGUgbWVkaWNhdGlvbiBub3csIG9yIGhhcyB0YWtlbiB0aGUgbWVkaWNhdGlvbiBpbiB0aGUgcGFzdCBvciB3aWxsIGJlIHRha2luZyB0aGUgbWVkaWNhdGlvbiBpbiB0aGUgZnV0dXJlLiAgVGhlIHNvdXJjZSBvZiB0aGlzIGluZm9ybWF0aW9uIGNhbiBiZSB0aGUgcGF0aWVudCwgc2lnbmlmaWNhbnQgb3RoZXIgKHN1Y2ggYXMgYSBmYW1pbHkgbWVtYmVyIG9yIHNwb3VzZSksIG9yIGEgY2xpbmljaWFuLiAgQSBjb21tb24gc2NlbmFyaW8gd2hlcmUgdGhpcyBpbmZvcm1hdGlvbiBpcyBjYXB0dXJlZCBpcyBkdXJpbmcgdGhlIGhpc3RvcnkgdGFraW5nIHByb2Nlc3MgZHVyaW5nIGEgcGF0aWVudCB2aXNpdCBvciBzdGF5LiAgIFRoZSBtZWRpY2F0aW9uIGluZm9ybWF0aW9uIG1heSBjb21lIGZyb20gZS5nLiB0aGUgcGF0aWVudCdzIG1lbW9yeSwgZnJvbSBhIHByZXNjcmlwdGlvbiBib3R0bGUsICBvciBmcm9tIGEgbGlzdCBvZiBtZWRpY2F0aW9ucyB0aGUgcGF0aWVudCwgY2xpbmljaWFuIG9yIG90aGVyIHBhcnR5IG1haW50YWlucyAgIFRoZSBwcmltYXJ5IGRpZmZlcmVuY2UgYmV0d2VlbiBhIG1lZGljYXRpb24gc3RhdGVtZW50IGFuZCBhIG1lZGljYXRpb24gYWRtaW5pc3RyYXRpb24gaXMgdGhhdCB0aGUgbWVkaWNhdGlvbiBhZG1pbmlzdHJhdGlvbiBoYXMgY29tcGxldGUgYWRtaW5pc3RyYXRpb24gaW5mb3JtYXRpb24gYW5kIGlzIGJhc2VkIG9uIGFjdHVhbCBhZG1pbmlzdHJhdGlvbiBpbmZvcm1hdGlvbiBmcm9tIHRoZSBwZXJzb24gd2hvIGFkbWluaXN0ZXJlZCB0aGUgbWVkaWNhdGlvbi4gIEEgbWVkaWNhdGlvbiBzdGF0ZW1lbnQgaXMgb2Z0ZW4sIGlmIG5vdCBhbHdheXMsIGxlc3Mgc3BlY2lmaWMuICBUaGVyZSBpcyBubyByZXF1aXJlZCBkYXRlL3RpbWUgd2hlbiB0aGUgbWVkaWNhdGlvbiB3YXMgYWRtaW5pc3RlcmVkLCBpbiBmYWN0IHdlIG9ubHkga25vdyB0aGF0IGEgc291cmNlIGhhcyByZXBvcnRlZCB0aGUgcGF0aWVudCBpcyB0YWtpbmcgdGhpcyBtZWRpY2F0aW9uLCB3aGVyZSBkZXRhaWxzIHN1Y2ggYXMgdGltZSwgcXVhbnRpdHksIG9yIHJhdGUgb3IgZXZlbiBtZWRpY2F0aW9uIHByb2R1Y3QgbWF5IGJlIGluY29tcGxldGUgb3IgbWlzc2luZyBvciBsZXNzIHByZWNpc2UuICBBcyBzdGF0ZWQgZWFybGllciwgdGhlIG1lZGljYXRpb24gc3RhdGVtZW50IGluZm9ybWF0aW9uIG1heSBjb21lIGZyb20gdGhlIHBhdGllbnQncyBtZW1vcnksIGZyb20gYSBwcmVzY3JpcHRpb24gYm90dGxlIG9yIGZyb20gYSBsaXN0IG9mIG1lZGljYXRpb25zIHRoZSBwYXRpZW50LCBjbGluaWNpYW4gb3Igb3RoZXIgcGFydHkgbWFpbnRhaW5zLiAgTWVkaWNhdGlvbiBhZG1pbmlzdHJhdGlvbiBpcyBtb3JlIGZvcm1hbCBhbmQgaXMgbm90IG1pc3NpbmcgZGV0YWlsZWQgaW5mb3JtYXRpb24uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVkaWNhdGlvblN0YXRlbWVudCBleHRlbmRzIGZoaXIuRG9tYWluUmVzb3VyY2Uge1xyXG4gIC8qKlxyXG4gICAqIE1hcHBpbmcgb2YgdGhpcyBkYXRhdHlwZSB0byBhIEZISVIgZXF1aXZhbGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgcmVhZG9ubHkgX2Z0c19kYXRhVHlwZTpzdHJpbmcgPSAnTWVkaWNhdGlvblN0YXRlbWVudCc7XHJcbiAgLyoqXHJcbiAgICogUmVzb3VyY2UgVHlwZSBOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc291cmNlVHlwZTogXCJNZWRpY2F0aW9uU3RhdGVtZW50XCI7XHJcbiAgLyoqXHJcbiAgICogRXh0ZXJuYWwgaWRlbnRpZmllciAtIEZISVIgd2lsbCBnZW5lcmF0ZSBpdHMgb3duIGludGVybmFsIGlkZW50aWZpZXJzIChwcm9iYWJseSBVUkxzKSB3aGljaCBkbyBub3QgbmVlZCB0byBiZSBleHBsaWNpdGx5IG1hbmFnZWQgYnkgdGhlIHJlc291cmNlLiAgVGhlIGlkZW50aWZpZXIgaGVyZSBpcyBvbmUgdGhhdCB3b3VsZCBiZSB1c2VkIGJ5IGFub3RoZXIgbm9uLUZISVIgc3lzdGVtIC0gZm9yIGV4YW1wbGUgYW4gYXV0b21hdGVkIG1lZGljYXRpb24gcHVtcCB3b3VsZCBwcm92aWRlIGEgcmVjb3JkIGVhY2ggdGltZSBpdCBvcGVyYXRlZDsgYW4gYWRtaW5pc3RyYXRpb24gd2hpbGUgdGhlIHBhdGllbnQgd2FzIG9mZiB0aGUgd2FyZCBtaWdodCBiZSBtYWRlIHdpdGggYSBkaWZmZXJlbnQgc3lzdGVtIGFuZCBlbnRlcmVkIGFmdGVyIHRoZSBldmVudC4gIFBhcnRpY3VsYXJseSBpbXBvcnRhbnQgaWYgdGhlc2UgcmVjb3JkcyBoYXZlIHRvIGJlIHVwZGF0ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIGlkZW50aWZpZXI6IGZoaXIuSWRlbnRpZmllcltdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwZXJzb24gb3IgYW5pbWFsIHdobyBpcy93YXMgdGFraW5nIHRoZSBtZWRpY2F0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXRpZW50OiBmaGlyLlJlZmVyZW5jZXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwZXJzb24gd2hvIHByb3ZpZGVkIHRoZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgdGFraW5nIG9mIHRoaXMgbWVkaWNhdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgaW5mb3JtYXRpb25Tb3VyY2U/OiBmaGlyLlJlZmVyZW5jZXx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogVGhlIGRhdGUgd2hlbiB0aGUgbWVkaWNhdGlvbiBzdGF0ZW1lbnQgd2FzIGFzc2VydGVkIGJ5IHRoZSBpbmZvcm1hdGlvbiBzb3VyY2UuXHJcbiAgICovXHJcbiAgcHVibGljIGRhdGVBc3NlcnRlZD86IGZoaXIuRmhpckRhdGVUaW1lfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBBIGNvZGUgcmVwcmVzZW50aW5nIHRoZSBwYXRpZW50IG9yIG90aGVyIHNvdXJjZSdzIGp1ZGdtZW50IGFib3V0IHRoZSBzdGF0ZSBvZiB0aGUgbWVkaWNhdGlvbiB1c2VkIHRoYXQgdGhpcyBzdGF0ZW1lbnQgaXMgYWJvdXQuICBHZW5lcmFsbHkgdGhpcyB3aWxsIGJlIGFjdGl2ZSBvciBjb21wbGV0ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXR1czogZmhpci5GaGlyQ29kZTxNZWRpY2F0aW9uU3RhdGVtZW50U3RhdHVzQ29kZVR5cGU+fG51bGw7XHJcbiAgLyoqXHJcbiAgICogU2V0IHRoaXMgdG8gdHJ1ZSBpZiB0aGUgcmVjb3JkIGlzIHNheWluZyB0aGF0IHRoZSBtZWRpY2F0aW9uIHdhcyBOT1QgdGFrZW4uXHJcbiAgICovXHJcbiAgcHVibGljIHdhc05vdFRha2VuPzogZmhpci5GaGlyQm9vbGVhbnx1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQSBjb2RlIGluZGljYXRpbmcgd2h5IHRoZSBtZWRpY2F0aW9uIHdhcyBub3QgdGFrZW4uXHJcbiAgICovXHJcbiAgcHVibGljIHJlYXNvbk5vdFRha2VuOiBmaGlyLkNvZGVhYmxlQ29uY2VwdFtdO1xyXG4gIC8qKlxyXG4gICAqIEEgcmVhc29uIGZvciB3aHkgdGhlIG1lZGljYXRpb24gaXMgYmVpbmcvd2FzIHRha2VuLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWFzb25Gb3JVc2U/OiAoZmhpci5Db2RlYWJsZUNvbmNlcHR8Zmhpci5SZWZlcmVuY2UpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IE1lZGljYXRpb25TdGF0ZW1lbnQucmVhc29uRm9yVXNlW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX3JlYXNvbkZvclVzZUlzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBpbnRlcnZhbCBvZiB0aW1lIGR1cmluZyB3aGljaCBpdCBpcyBiZWluZyBhc3NlcnRlZCB0aGF0IHRoZSBwYXRpZW50IHdhcyB0YWtpbmcgdGhlIG1lZGljYXRpb24gKG9yIHdhcyBub3QgdGFraW5nLCB3aGVuIHRoZSB3YXNOb3RHaXZlbiBlbGVtZW50IGlzIHRydWUpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBlZmZlY3RpdmU/OiAoZmhpci5GaGlyRGF0ZVRpbWV8Zmhpci5QZXJpb2QpfHVuZGVmaW5lZDtcclxuICAvKipcclxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIHByb3Blcmx5IHNlcmlhbGl6ZSBjaG9pY2UtdHlwZSBlbGVtZW50IE1lZGljYXRpb25TdGF0ZW1lbnQuZWZmZWN0aXZlW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX2VmZmVjdGl2ZUlzQ2hvaWNlOnRydWUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIFByb3ZpZGVzIGV4dHJhIGluZm9ybWF0aW9uIGFib3V0IHRoZSBtZWRpY2F0aW9uIHN0YXRlbWVudCB0aGF0IGlzIG5vdCBjb252ZXllZCBieSB0aGUgb3RoZXIgYXR0cmlidXRlcy5cclxuICAgKi9cclxuICBwdWJsaWMgbm90ZT86IGZoaXIuRmhpclN0cmluZ3x1bmRlZmluZWQ7XHJcbiAgLyoqXHJcbiAgICogQWxsb3dzIGxpbmtpbmcgdGhlIE1lZGljYXRpb25TdGF0ZW1lbnQgdG8gdGhlIHVuZGVybHlpbmcgTWVkaWNhdGlvbk9yZGVyLCBvciB0byBvdGhlciBpbmZvcm1hdGlvbiB0aGF0IHN1cHBvcnRzIHRoZSBNZWRpY2F0aW9uU3RhdGVtZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdXBwb3J0aW5nSW5mb3JtYXRpb246IGZoaXIuUmVmZXJlbmNlW107XHJcbiAgLyoqXHJcbiAgICogSWRlbnRpZmllcyB0aGUgbWVkaWNhdGlvbiBiZWluZyBhZG1pbmlzdGVyZWQuIFRoaXMgaXMgZWl0aGVyIGEgbGluayB0byBhIHJlc291cmNlIHJlcHJlc2VudGluZyB0aGUgZGV0YWlscyBvZiB0aGUgbWVkaWNhdGlvbiBvciBhIHNpbXBsZSBhdHRyaWJ1dGUgY2FycnlpbmcgYSBjb2RlIHRoYXQgaWRlbnRpZmllcyB0aGUgbWVkaWNhdGlvbiBmcm9tIGEga25vd24gbGlzdCBvZiBtZWRpY2F0aW9ucy5cclxuICAgKi9cclxuICBwdWJsaWMgbWVkaWNhdGlvbjogKGZoaXIuQ29kZWFibGVDb25jZXB0fGZoaXIuUmVmZXJlbmNlKXxudWxsO1xyXG4gIC8qKlxyXG4gICAqIEludGVybmFsIGZsYWcgdG8gcHJvcGVybHkgc2VyaWFsaXplIGNob2ljZS10eXBlIGVsZW1lbnQgTWVkaWNhdGlvblN0YXRlbWVudC5tZWRpY2F0aW9uW3hdXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBfZnRzX21lZGljYXRpb25Jc0Nob2ljZTp0cnVlID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgaG93IHRoZSBtZWRpY2F0aW9uIGlzL3dhcyB1c2VkIGJ5IHRoZSBwYXRpZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkb3NhZ2U6IGZoaXIuTWVkaWNhdGlvblN0YXRlbWVudERvc2FnZVtdO1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIE1lZGljYXRpb25TdGF0ZW1lbnQgLSBpbml0aWFsaXplcyBhbnkgcmVxdWlyZWQgZWxlbWVudHMgdG8gbnVsbCBpZiBhIHZhbHVlIGlzIG5vdCBwcm92aWRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6UGFydGlhbDxNZWRpY2F0aW9uU3RhdGVtZW50QXJncz4gPSB7fSwgb3B0aW9uczpmaGlyLkZoaXJDb25zdHJ1Y3Rvck9wdGlvbnMgPSB7fSkge1xyXG4gICAgc3VwZXIoc291cmNlLCBvcHRpb25zKTtcclxuICAgIHRoaXMucmVzb3VyY2VUeXBlID0gJ01lZGljYXRpb25TdGF0ZW1lbnQnO1xyXG4gICAgaWYgKHNvdXJjZVsnaWRlbnRpZmllciddKSB7IHRoaXMuaWRlbnRpZmllciA9IHNvdXJjZS5pZGVudGlmaWVyLm1hcCgoeCkgPT4gbmV3IGZoaXIuSWRlbnRpZmllcih4KSk7IH1cclxuICAgIGVsc2UgeyB0aGlzLmlkZW50aWZpZXIgPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncGF0aWVudCddKSB7IHRoaXMucGF0aWVudCA9IG5ldyBmaGlyLlJlZmVyZW5jZShzb3VyY2UucGF0aWVudCk7IH1cclxuICAgIGVsc2UgeyB0aGlzLnBhdGllbnQgPSBudWxsOyB9XHJcbiAgICBpZiAoc291cmNlWydpbmZvcm1hdGlvblNvdXJjZSddKSB7IHRoaXMuaW5mb3JtYXRpb25Tb3VyY2UgPSBuZXcgZmhpci5SZWZlcmVuY2Uoc291cmNlLmluZm9ybWF0aW9uU291cmNlKTsgfVxyXG4gICAgaWYgKHNvdXJjZVsnZGF0ZUFzc2VydGVkJ10pIHsgdGhpcy5kYXRlQXNzZXJ0ZWQgPSBuZXcgZmhpci5GaGlyRGF0ZVRpbWUoe3ZhbHVlOiBzb3VyY2UuZGF0ZUFzc2VydGVkfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19kYXRlQXNzZXJ0ZWQnXSkge1xyXG4gICAgICBpZiAodGhpcy5kYXRlQXNzZXJ0ZWQpIHsgdGhpcy5kYXRlQXNzZXJ0ZWQuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fZGF0ZUFzc2VydGVkISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMuZGF0ZUFzc2VydGVkID0gbmV3IGZoaXIuRmhpckRhdGVUaW1lKHNvdXJjZS5fZGF0ZUFzc2VydGVkIGFzIFBhcnRpYWw8Zmhpci5GaGlyRGF0ZVRpbWVBcmdzPik7IH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2VbJ3N0YXR1cyddKSB7IHRoaXMuc3RhdHVzID0gbmV3IGZoaXIuRmhpckNvZGU8TWVkaWNhdGlvblN0YXRlbWVudFN0YXR1c0NvZGVUeXBlPih7dmFsdWU6IHNvdXJjZS5zdGF0dXN9KTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3RhdHVzID0gbnVsbDsgfVxyXG4gICAgaWYgKHNvdXJjZVsnX3N0YXR1cyddKSB7XHJcbiAgICAgIGlmICh0aGlzLnN0YXR1cykgeyB0aGlzLnN0YXR1cy5hZGRFeHRlbmRlZFByb3BlcnRpZXMoc291cmNlLl9zdGF0dXMhKTsgfVxyXG4gICAgICBlbHNlIHsgdGhpcy5zdGF0dXMgPSBuZXcgZmhpci5GaGlyQ29kZTxNZWRpY2F0aW9uU3RhdGVtZW50U3RhdHVzQ29kZVR5cGU+KHNvdXJjZS5fc3RhdHVzIGFzIFBhcnRpYWw8Zmhpci5GaGlyQ29kZT4pOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlWyd3YXNOb3RUYWtlbiddKSB7IHRoaXMud2FzTm90VGFrZW4gPSBuZXcgZmhpci5GaGlyQm9vbGVhbih7dmFsdWU6IHNvdXJjZS53YXNOb3RUYWtlbn0pOyB9XHJcbiAgICBpZiAoc291cmNlWydfd2FzTm90VGFrZW4nXSkge1xyXG4gICAgICBpZiAodGhpcy53YXNOb3RUYWtlbikgeyB0aGlzLndhc05vdFRha2VuLmFkZEV4dGVuZGVkUHJvcGVydGllcyhzb3VyY2UuX3dhc05vdFRha2VuISk7IH1cclxuICAgICAgZWxzZSB7IHRoaXMud2FzTm90VGFrZW4gPSBuZXcgZmhpci5GaGlyQm9vbGVhbihzb3VyY2UuX3dhc05vdFRha2VuIGFzIFBhcnRpYWw8Zmhpci5GaGlyQm9vbGVhbkFyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVhc29uTm90VGFrZW4nXSkgeyB0aGlzLnJlYXNvbk5vdFRha2VuID0gc291cmNlLnJlYXNvbk5vdFRha2VuLm1hcCgoeCkgPT4gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMucmVhc29uTm90VGFrZW4gPSBbXTsgfVxyXG4gICAgaWYgKHNvdXJjZVsncmVhc29uRm9yVXNlJ10pIHsgdGhpcy5yZWFzb25Gb3JVc2UgPSBzb3VyY2UucmVhc29uRm9yVXNlOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3JlYXNvbkZvclVzZUNvZGVhYmxlQ29uY2VwdCddKSB7IHRoaXMucmVhc29uRm9yVXNlID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5yZWFzb25Gb3JVc2VDb2RlYWJsZUNvbmNlcHQpOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ3JlYXNvbkZvclVzZVJlZmVyZW5jZSddKSB7IHRoaXMucmVhc29uRm9yVXNlID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5yZWFzb25Gb3JVc2VSZWZlcmVuY2UpOyB9XHJcbiAgICBpZiAoc291cmNlWydlZmZlY3RpdmUnXSkgeyB0aGlzLmVmZmVjdGl2ZSA9IHNvdXJjZS5lZmZlY3RpdmU7IH1cclxuICAgIGVsc2UgaWYgKHNvdXJjZVsnZWZmZWN0aXZlRGF0ZVRpbWUnXSkgeyB0aGlzLmVmZmVjdGl2ZSA9IG5ldyBmaGlyLkZoaXJEYXRlVGltZSh7dmFsdWU6IHNvdXJjZS5lZmZlY3RpdmVEYXRlVGltZX0pOyB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VbJ2VmZmVjdGl2ZVBlcmlvZCddKSB7IHRoaXMuZWZmZWN0aXZlID0gbmV3IGZoaXIuUGVyaW9kKHNvdXJjZS5lZmZlY3RpdmVQZXJpb2QpOyB9XHJcbiAgICBpZiAoc291cmNlWydub3RlJ10pIHsgdGhpcy5ub3RlID0gbmV3IGZoaXIuRmhpclN0cmluZyh7dmFsdWU6IHNvdXJjZS5ub3RlfSk7IH1cclxuICAgIGlmIChzb3VyY2VbJ19ub3RlJ10pIHtcclxuICAgICAgaWYgKHRoaXMubm90ZSkgeyB0aGlzLm5vdGUuYWRkRXh0ZW5kZWRQcm9wZXJ0aWVzKHNvdXJjZS5fbm90ZSEpOyB9XHJcbiAgICAgIGVsc2UgeyB0aGlzLm5vdGUgPSBuZXcgZmhpci5GaGlyU3RyaW5nKHNvdXJjZS5fbm90ZSBhcyBQYXJ0aWFsPGZoaXIuRmhpclN0cmluZ0FyZ3M+KTsgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZVsnc3VwcG9ydGluZ0luZm9ybWF0aW9uJ10pIHsgdGhpcy5zdXBwb3J0aW5nSW5mb3JtYXRpb24gPSBzb3VyY2Uuc3VwcG9ydGluZ0luZm9ybWF0aW9uLm1hcCgoeCkgPT4gbmV3IGZoaXIuUmVmZXJlbmNlKHgpKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMuc3VwcG9ydGluZ0luZm9ybWF0aW9uID0gW107IH1cclxuICAgIGlmIChzb3VyY2VbJ21lZGljYXRpb24nXSkgeyB0aGlzLm1lZGljYXRpb24gPSBzb3VyY2UubWVkaWNhdGlvbjsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydtZWRpY2F0aW9uQ29kZWFibGVDb25jZXB0J10pIHsgdGhpcy5tZWRpY2F0aW9uID0gbmV3IGZoaXIuQ29kZWFibGVDb25jZXB0KHNvdXJjZS5tZWRpY2F0aW9uQ29kZWFibGVDb25jZXB0KTsgfVxyXG4gICAgZWxzZSBpZiAoc291cmNlWydtZWRpY2F0aW9uUmVmZXJlbmNlJ10pIHsgdGhpcy5tZWRpY2F0aW9uID0gbmV3IGZoaXIuUmVmZXJlbmNlKHNvdXJjZS5tZWRpY2F0aW9uUmVmZXJlbmNlKTsgfVxyXG4gICAgZWxzZSB7IHRoaXMubWVkaWNhdGlvbiA9IG51bGw7IH1cclxuICAgIGlmIChzb3VyY2VbJ2Rvc2FnZSddKSB7IHRoaXMuZG9zYWdlID0gc291cmNlLmRvc2FnZS5tYXAoKHgpID0+IG5ldyBmaGlyLk1lZGljYXRpb25TdGF0ZW1lbnREb3NhZ2UoeCkpOyB9XHJcbiAgICBlbHNlIHsgdGhpcy5kb3NhZ2UgPSBbXTsgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiB0byBwZXJmb3JtIGJhc2ljIG1vZGVsIHZhbGlkYXRpb24gKGUuZy4sIGNoZWNrIGlmIHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50KS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZG9Nb2RlbFZhbGlkYXRpb24oZXhwOnN0cmluZyA9ICcnKTpmaGlyLkZ0c0lzc3VlW10ge1xyXG4gICAgbGV0IGlzc3VlczpmaGlyLkZ0c0lzc3VlW10gPSBzdXBlci5kb01vZGVsVmFsaWRhdGlvbihleHApO1xyXG4gICAgaWYgKGV4cCA9PT0gJycpIHsgZXhwID0gJ01lZGljYXRpb25TdGF0ZW1lbnQnIH1cclxuICAgIHRoaXMudlJTKCdyZXNvdXJjZVR5cGUnLGV4cClcclxuICAgIHRoaXMudk9BKCdpZGVudGlmaWVyJyxleHApXHJcbiAgICB0aGlzLnZSUygncGF0aWVudCcsZXhwKVxyXG4gICAgdGhpcy52T1MoJ2luZm9ybWF0aW9uU291cmNlJyxleHApXHJcbiAgICB0aGlzLnZPUygnZGF0ZUFzc2VydGVkJyxleHApXHJcbiAgICB0aGlzLnZSU1YoJ3N0YXR1cycsZXhwLCdNZWRpY2F0aW9uU3RhdGVtZW50U3RhdHVzJyxNZWRpY2F0aW9uU3RhdGVtZW50U3RhdHVzVnNWYWxpZGF0aW9uLCdyJylcclxuICAgIHRoaXMudk9TKCd3YXNOb3RUYWtlbicsZXhwKVxyXG4gICAgdGhpcy52T0EoJ3JlYXNvbk5vdFRha2VuJyxleHApXHJcbiAgICB0aGlzLnZPUygncmVhc29uRm9yVXNlJyxleHApXHJcbiAgICB0aGlzLnZPUygnZWZmZWN0aXZlJyxleHApXHJcbiAgICB0aGlzLnZPUygnbm90ZScsZXhwKVxyXG4gICAgdGhpcy52T0EoJ3N1cHBvcnRpbmdJbmZvcm1hdGlvbicsZXhwKVxyXG4gICAgdGhpcy52UlMoJ21lZGljYXRpb24nLGV4cClcclxuICAgIHRoaXMudk9BKCdkb3NhZ2UnLGV4cClcclxuICAgIHJldHVybiBpc3N1ZXM7XHJcbiAgfVxyXG59XHJcbiJdfQ==